(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();function KI(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var dp={exports:{}},Ic={},hp={exports:{}},ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rx;function qI(){if(rx)return ze;rx=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function x(H){return H===null||typeof H!="object"?null:(H=y&&H[y]||H["@@iterator"],typeof H=="function"?H:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,S={};function C(H,te,Pe){this.props=H,this.context=te,this.refs=S,this.updater=Pe||T}C.prototype.isReactComponent={},C.prototype.setState=function(H,te){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,te,"setState")},C.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function N(){}N.prototype=C.prototype;function L(H,te,Pe){this.props=H,this.context=te,this.refs=S,this.updater=Pe||T}var M=L.prototype=new N;M.constructor=L,k(M,C.prototype),M.isPureReactComponent=!0;var U=Array.isArray,$=Object.prototype.hasOwnProperty,G={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function E(H,te,Pe){var Ae,Le={},Be=null,Qe=null;if(te!=null)for(Ae in te.ref!==void 0&&(Qe=te.ref),te.key!==void 0&&(Be=""+te.key),te)$.call(te,Ae)&&!I.hasOwnProperty(Ae)&&(Le[Ae]=te[Ae]);var He=arguments.length-2;if(He===1)Le.children=Pe;else if(1<He){for(var et=Array(He),Yt=0;Yt<He;Yt++)et[Yt]=arguments[Yt+2];Le.children=et}if(H&&H.defaultProps)for(Ae in He=H.defaultProps,He)Le[Ae]===void 0&&(Le[Ae]=He[Ae]);return{$$typeof:n,type:H,key:Be,ref:Qe,props:Le,_owner:G.current}}function R(H,te){return{$$typeof:n,type:H.type,key:te,ref:H.ref,props:H.props,_owner:H._owner}}function V(H){return typeof H=="object"&&H!==null&&H.$$typeof===n}function B(H){var te={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(Pe){return te[Pe]})}var F=/\/+/g;function D(H,te){return typeof H=="object"&&H!==null&&H.key!=null?B(""+H.key):te.toString(36)}function _e(H,te,Pe,Ae,Le){var Be=typeof H;(Be==="undefined"||Be==="boolean")&&(H=null);var Qe=!1;if(H===null)Qe=!0;else switch(Be){case"string":case"number":Qe=!0;break;case"object":switch(H.$$typeof){case n:case e:Qe=!0}}if(Qe)return Qe=H,Le=Le(Qe),H=Ae===""?"."+D(Qe,0):Ae,U(Le)?(Pe="",H!=null&&(Pe=H.replace(F,"$&/")+"/"),_e(Le,te,Pe,"",function(Yt){return Yt})):Le!=null&&(V(Le)&&(Le=R(Le,Pe+(!Le.key||Qe&&Qe.key===Le.key?"":(""+Le.key).replace(F,"$&/")+"/")+H)),te.push(Le)),1;if(Qe=0,Ae=Ae===""?".":Ae+":",U(H))for(var He=0;He<H.length;He++){Be=H[He];var et=Ae+D(Be,He);Qe+=_e(Be,te,Pe,et,Le)}else if(et=x(H),typeof et=="function")for(H=et.call(H),He=0;!(Be=H.next()).done;)Be=Be.value,et=Ae+D(Be,He++),Qe+=_e(Be,te,Pe,et,Le);else if(Be==="object")throw te=String(H),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.");return Qe}function Ve(H,te,Pe){if(H==null)return H;var Ae=[],Le=0;return _e(H,Ae,"","",function(Be){return te.call(Pe,Be,Le++)}),Ae}function it(H){if(H._status===-1){var te=H._result;te=te(),te.then(function(Pe){(H._status===0||H._status===-1)&&(H._status=1,H._result=Pe)},function(Pe){(H._status===0||H._status===-1)&&(H._status=2,H._result=Pe)}),H._status===-1&&(H._status=0,H._result=te)}if(H._status===1)return H._result.default;throw H._result}var Te={current:null},ie={transition:null},me={ReactCurrentDispatcher:Te,ReactCurrentBatchConfig:ie,ReactCurrentOwner:G};function le(){throw Error("act(...) is not supported in production builds of React.")}return ze.Children={map:Ve,forEach:function(H,te,Pe){Ve(H,function(){te.apply(this,arguments)},Pe)},count:function(H){var te=0;return Ve(H,function(){te++}),te},toArray:function(H){return Ve(H,function(te){return te})||[]},only:function(H){if(!V(H))throw Error("React.Children.only expected to receive a single React element child.");return H}},ze.Component=C,ze.Fragment=t,ze.Profiler=s,ze.PureComponent=L,ze.StrictMode=r,ze.Suspense=d,ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=me,ze.act=le,ze.cloneElement=function(H,te,Pe){if(H==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+H+".");var Ae=k({},H.props),Le=H.key,Be=H.ref,Qe=H._owner;if(te!=null){if(te.ref!==void 0&&(Be=te.ref,Qe=G.current),te.key!==void 0&&(Le=""+te.key),H.type&&H.type.defaultProps)var He=H.type.defaultProps;for(et in te)$.call(te,et)&&!I.hasOwnProperty(et)&&(Ae[et]=te[et]===void 0&&He!==void 0?He[et]:te[et])}var et=arguments.length-2;if(et===1)Ae.children=Pe;else if(1<et){He=Array(et);for(var Yt=0;Yt<et;Yt++)He[Yt]=arguments[Yt+2];Ae.children=He}return{$$typeof:n,type:H.type,key:Le,ref:Be,props:Ae,_owner:Qe}},ze.createContext=function(H){return H={$$typeof:c,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},H.Provider={$$typeof:l,_context:H},H.Consumer=H},ze.createElement=E,ze.createFactory=function(H){var te=E.bind(null,H);return te.type=H,te},ze.createRef=function(){return{current:null}},ze.forwardRef=function(H){return{$$typeof:h,render:H}},ze.isValidElement=V,ze.lazy=function(H){return{$$typeof:g,_payload:{_status:-1,_result:H},_init:it}},ze.memo=function(H,te){return{$$typeof:m,type:H,compare:te===void 0?null:te}},ze.startTransition=function(H){var te=ie.transition;ie.transition={};try{H()}finally{ie.transition=te}},ze.unstable_act=le,ze.useCallback=function(H,te){return Te.current.useCallback(H,te)},ze.useContext=function(H){return Te.current.useContext(H)},ze.useDebugValue=function(){},ze.useDeferredValue=function(H){return Te.current.useDeferredValue(H)},ze.useEffect=function(H,te){return Te.current.useEffect(H,te)},ze.useId=function(){return Te.current.useId()},ze.useImperativeHandle=function(H,te,Pe){return Te.current.useImperativeHandle(H,te,Pe)},ze.useInsertionEffect=function(H,te){return Te.current.useInsertionEffect(H,te)},ze.useLayoutEffect=function(H,te){return Te.current.useLayoutEffect(H,te)},ze.useMemo=function(H,te){return Te.current.useMemo(H,te)},ze.useReducer=function(H,te,Pe){return Te.current.useReducer(H,te,Pe)},ze.useRef=function(H){return Te.current.useRef(H)},ze.useState=function(H){return Te.current.useState(H)},ze.useSyncExternalStore=function(H,te,Pe){return Te.current.useSyncExternalStore(H,te,Pe)},ze.useTransition=function(){return Te.current.useTransition()},ze.version="18.3.1",ze}var ix;function sy(){return ix||(ix=1,hp.exports=qI()),hp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sx;function GI(){if(sx)return Ic;sx=1;var n=sy(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(h,d,m){var g,y={},x=null,T=null;m!==void 0&&(x=""+m),d.key!==void 0&&(x=""+d.key),d.ref!==void 0&&(T=d.ref);for(g in d)r.call(d,g)&&!l.hasOwnProperty(g)&&(y[g]=d[g]);if(h&&h.defaultProps)for(g in d=h.defaultProps,d)y[g]===void 0&&(y[g]=d[g]);return{$$typeof:e,type:h,key:x,ref:T,props:y,_owner:s.current}}return Ic.Fragment=t,Ic.jsx=c,Ic.jsxs=c,Ic}var ox;function QI(){return ox||(ox=1,dp.exports=GI()),dp.exports}var a=QI(),A=sy();const Wt=KI(A);var Gd={},fp={exports:{}},An={},mp={exports:{}},pp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ax;function YI(){return ax||(ax=1,(function(n){function e(ie,me){var le=ie.length;ie.push(me);e:for(;0<le;){var H=le-1>>>1,te=ie[H];if(0<s(te,me))ie[H]=me,ie[le]=te,le=H;else break e}}function t(ie){return ie.length===0?null:ie[0]}function r(ie){if(ie.length===0)return null;var me=ie[0],le=ie.pop();if(le!==me){ie[0]=le;e:for(var H=0,te=ie.length,Pe=te>>>1;H<Pe;){var Ae=2*(H+1)-1,Le=ie[Ae],Be=Ae+1,Qe=ie[Be];if(0>s(Le,le))Be<te&&0>s(Qe,Le)?(ie[H]=Qe,ie[Be]=le,H=Be):(ie[H]=Le,ie[Ae]=le,H=Ae);else if(Be<te&&0>s(Qe,le))ie[H]=Qe,ie[Be]=le,H=Be;else break e}}return me}function s(ie,me){var le=ie.sortIndex-me.sortIndex;return le!==0?le:ie.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,h=c.now();n.unstable_now=function(){return c.now()-h}}var d=[],m=[],g=1,y=null,x=3,T=!1,k=!1,S=!1,C=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(ie){for(var me=t(m);me!==null;){if(me.callback===null)r(m);else if(me.startTime<=ie)r(m),me.sortIndex=me.expirationTime,e(d,me);else break;me=t(m)}}function U(ie){if(S=!1,M(ie),!k)if(t(d)!==null)k=!0,it($);else{var me=t(m);me!==null&&Te(U,me.startTime-ie)}}function $(ie,me){k=!1,S&&(S=!1,N(E),E=-1),T=!0;var le=x;try{for(M(me),y=t(d);y!==null&&(!(y.expirationTime>me)||ie&&!B());){var H=y.callback;if(typeof H=="function"){y.callback=null,x=y.priorityLevel;var te=H(y.expirationTime<=me);me=n.unstable_now(),typeof te=="function"?y.callback=te:y===t(d)&&r(d),M(me)}else r(d);y=t(d)}if(y!==null)var Pe=!0;else{var Ae=t(m);Ae!==null&&Te(U,Ae.startTime-me),Pe=!1}return Pe}finally{y=null,x=le,T=!1}}var G=!1,I=null,E=-1,R=5,V=-1;function B(){return!(n.unstable_now()-V<R)}function F(){if(I!==null){var ie=n.unstable_now();V=ie;var me=!0;try{me=I(!0,ie)}finally{me?D():(G=!1,I=null)}}else G=!1}var D;if(typeof L=="function")D=function(){L(F)};else if(typeof MessageChannel<"u"){var _e=new MessageChannel,Ve=_e.port2;_e.port1.onmessage=F,D=function(){Ve.postMessage(null)}}else D=function(){C(F,0)};function it(ie){I=ie,G||(G=!0,D())}function Te(ie,me){E=C(function(){ie(n.unstable_now())},me)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ie){ie.callback=null},n.unstable_continueExecution=function(){k||T||(k=!0,it($))},n.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<ie?Math.floor(1e3/ie):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(ie){switch(x){case 1:case 2:case 3:var me=3;break;default:me=x}var le=x;x=me;try{return ie()}finally{x=le}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ie,me){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var le=x;x=ie;try{return me()}finally{x=le}},n.unstable_scheduleCallback=function(ie,me,le){var H=n.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?H+le:H):le=H,ie){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=le+te,ie={id:g++,callback:me,priorityLevel:ie,startTime:le,expirationTime:te,sortIndex:-1},le>H?(ie.sortIndex=le,e(m,ie),t(d)===null&&ie===t(m)&&(S?(N(E),E=-1):S=!0,Te(U,le-H))):(ie.sortIndex=te,e(d,ie),k||T||(k=!0,it($))),ie},n.unstable_shouldYield=B,n.unstable_wrapCallback=function(ie){var me=x;return function(){var le=x;x=me;try{return ie.apply(this,arguments)}finally{x=le}}}})(pp)),pp}var lx;function XI(){return lx||(lx=1,mp.exports=YI()),mp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cx;function JI(){if(cx)return An;cx=1;var n=sy(),e=XI();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function l(i,o){c(i,o),c(i+"Capture",o)}function c(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},y={};function x(i){return d.call(y,i)?!0:d.call(g,i)?!1:m.test(i)?y[i]=!0:(g[i]=!0,!1)}function T(i,o,u,p){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return p?!1:u!==null?!u.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function k(i,o,u,p){if(o===null||typeof o>"u"||T(i,o,u,p))return!0;if(p)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function S(i,o,u,p,v,w,j){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=p,this.attributeNamespace=v,this.mustUseProperty=u,this.propertyName=i,this.type=o,this.sanitizeURL=w,this.removeEmptyString=j}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){C[i]=new S(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];C[o]=new S(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){C[i]=new S(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){C[i]=new S(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){C[i]=new S(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){C[i]=new S(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){C[i]=new S(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){C[i]=new S(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){C[i]=new S(i,5,!1,i.toLowerCase(),null,!1,!1)});var N=/[\-:]([a-z])/g;function L(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(N,L);C[o]=new S(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(N,L);C[o]=new S(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(N,L);C[o]=new S(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){C[i]=new S(i,1,!1,i.toLowerCase(),null,!1,!1)}),C.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){C[i]=new S(i,1,!1,i.toLowerCase(),null,!0,!0)});function M(i,o,u,p){var v=C.hasOwnProperty(o)?C[o]:null;(v!==null?v.type!==0:p||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(k(o,u,v,p)&&(u=null),p||v===null?x(o)&&(u===null?i.removeAttribute(o):i.setAttribute(o,""+u)):v.mustUseProperty?i[v.propertyName]=u===null?v.type===3?!1:"":u:(o=v.attributeName,p=v.attributeNamespace,u===null?i.removeAttribute(o):(v=v.type,u=v===3||v===4&&u===!0?"":""+u,p?i.setAttributeNS(p,o,u):i.setAttribute(o,u))))}var U=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$=Symbol.for("react.element"),G=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),B=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),_e=Symbol.for("react.suspense_list"),Ve=Symbol.for("react.memo"),it=Symbol.for("react.lazy"),Te=Symbol.for("react.offscreen"),ie=Symbol.iterator;function me(i){return i===null||typeof i!="object"?null:(i=ie&&i[ie]||i["@@iterator"],typeof i=="function"?i:null)}var le=Object.assign,H;function te(i){if(H===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);H=o&&o[1]||""}return`
`+H+i}var Pe=!1;function Ae(i,o){if(!i||Pe)return"";Pe=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(Y){var p=Y}Reflect.construct(i,[],o)}else{try{o.call()}catch(Y){p=Y}i.call(o.prototype)}else{try{throw Error()}catch(Y){p=Y}i()}}catch(Y){if(Y&&p&&typeof Y.stack=="string"){for(var v=Y.stack.split(`
`),w=p.stack.split(`
`),j=v.length-1,O=w.length-1;1<=j&&0<=O&&v[j]!==w[O];)O--;for(;1<=j&&0<=O;j--,O--)if(v[j]!==w[O]){if(j!==1||O!==1)do if(j--,O--,0>O||v[j]!==w[O]){var z=`
`+v[j].replace(" at new "," at ");return i.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",i.displayName)),z}while(1<=j&&0<=O);break}}}finally{Pe=!1,Error.prepareStackTrace=u}return(i=i?i.displayName||i.name:"")?te(i):""}function Le(i){switch(i.tag){case 5:return te(i.type);case 16:return te("Lazy");case 13:return te("Suspense");case 19:return te("SuspenseList");case 0:case 2:case 15:return i=Ae(i.type,!1),i;case 11:return i=Ae(i.type.render,!1),i;case 1:return i=Ae(i.type,!0),i;default:return""}}function Be(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case I:return"Fragment";case G:return"Portal";case R:return"Profiler";case E:return"StrictMode";case D:return"Suspense";case _e:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case B:return(i.displayName||"Context")+".Consumer";case V:return(i._context.displayName||"Context")+".Provider";case F:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Ve:return o=i.displayName||null,o!==null?o:Be(i.type)||"Memo";case it:o=i._payload,i=i._init;try{return Be(i(o))}catch{}}return null}function Qe(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Be(o);case 8:return o===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function He(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function et(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Yt(i){var o=et(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),p=""+i[o];if(!i.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var v=u.get,w=u.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return v.call(this)},set:function(j){p=""+j,w.call(this,j)}}),Object.defineProperty(i,o,{enumerable:u.enumerable}),{getValue:function(){return p},setValue:function(j){p=""+j},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Ji(i){i._valueTracker||(i._valueTracker=Yt(i))}function J(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var u=o.getValue(),p="";return i&&(p=et(i)?i.checked?"true":"false":i.value),i=p,i!==u?(o.setValue(i),!0):!1}function be(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Oe(i,o){var u=o.checked;return le({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??i._wrapperState.initialChecked})}function Ye(i,o){var u=o.defaultValue==null?"":o.defaultValue,p=o.checked!=null?o.checked:o.defaultChecked;u=He(o.value!=null?o.value:u),i._wrapperState={initialChecked:p,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Et(i,o){o=o.checked,o!=null&&M(i,"checked",o,!1)}function vn(i,o){Et(i,o);var u=He(o.value),p=o.type;if(u!=null)p==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+u):i.value!==""+u&&(i.value=""+u);else if(p==="submit"||p==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?Nt(i,o.type,u):o.hasOwnProperty("defaultValue")&&Nt(i,o.type,He(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function so(i,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var p=o.type;if(!(p!=="submit"&&p!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,u||o===i.value||(i.value=o),i.defaultValue=o}u=i.name,u!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,u!==""&&(i.name=u)}function Nt(i,o,u){(o!=="number"||be(i.ownerDocument)!==i)&&(u==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+u&&(i.defaultValue=""+u))}var Tt=Array.isArray;function yr(i,o,u,p){if(i=i.options,o){o={};for(var v=0;v<u.length;v++)o["$"+u[v]]=!0;for(u=0;u<i.length;u++)v=o.hasOwnProperty("$"+i[u].value),i[u].selected!==v&&(i[u].selected=v),v&&p&&(i[u].defaultSelected=!0)}else{for(u=""+He(u),o=null,v=0;v<i.length;v++){if(i[v].value===u){i[v].selected=!0,p&&(i[v].defaultSelected=!0);return}o!==null||i[v].disabled||(o=i[v])}o!==null&&(o.selected=!0)}}function Dl(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return le({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Vl(i,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(t(92));if(Tt(u)){if(1<u.length)throw Error(t(93));u=u[0]}o=u}o==null&&(o=""),u=o}i._wrapperState={initialValue:He(u)}}function Mu(i,o){var u=He(o.value),p=He(o.defaultValue);u!=null&&(u=""+u,u!==i.value&&(i.value=u),o.defaultValue==null&&i.defaultValue!==u&&(i.defaultValue=u)),p!=null&&(i.defaultValue=""+p)}function Zi(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function Ll(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function na(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?Ll(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var es,Du=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,p,v){MSApp.execUnsafeLocalFunction(function(){return i(o,u,p,v)})}:i})(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(es=es||document.createElement("div"),es.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=es.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function oo(i,o){if(o){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=o;return}}i.textContent=o}var ts={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Vu=["Webkit","ms","Moz","O"];Object.keys(ts).forEach(function(i){Vu.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),ts[o]=ts[i]})});function ns(i,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||ts.hasOwnProperty(i)&&ts[i]?(""+o).trim():o+"px"}function ra(i,o){i=i.style;for(var u in o)if(o.hasOwnProperty(u)){var p=u.indexOf("--")===0,v=ns(u,o[u],p);u==="float"&&(u="cssFloat"),p?i.setProperty(u,v):i[u]=v}}var Ol=le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vr(i,o){if(o){if(Ol[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function ia(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rs=null;function sa(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var fi=null,mi=null,wt=null;function Bl(i){if(i=hc(i)){if(typeof fi!="function")throw Error(t(280));var o=i.stateNode;o&&(o=cd(o),fi(i.stateNode,i.type,o))}}function is(i){mi?wt?wt.push(i):wt=[i]:mi=i}function ss(){if(mi){var i=mi,o=wt;if(wt=mi=null,Bl(i),o)for(i=0;i<o.length;i++)Bl(o[i])}}function Lu(i,o){return i(o)}function Ou(){}var Br=!1;function Bu(i,o,u){if(Br)return i(o,u);Br=!0;try{return Lu(i,o,u)}finally{Br=!1,(mi!==null||wt!==null)&&(Ou(),ss())}}function ao(i,o){var u=i.stateNode;if(u===null)return null;var p=cd(u);if(p===null)return null;u=p[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(i=i.type,p=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!p;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(t(231,o,typeof u));return u}var os=!1;if(h)try{var as={};Object.defineProperty(as,"passive",{get:function(){os=!0}}),window.addEventListener("test",as,as),window.removeEventListener("test",as,as)}catch{os=!1}function zu(i,o,u,p,v,w,j,O,z){var Y=Array.prototype.slice.call(arguments,3);try{o.apply(u,Y)}catch(re){this.onError(re)}}var pi=!1,zr=null,oa=!1,Xn=null,Fu={onError:function(i){pi=!0,zr=i}};function Uu(i,o,u,p,v,w,j,O,z){pi=!1,zr=null,zu.apply(Fu,arguments)}function zl(i,o,u,p,v,w,j,O,z){if(Uu.apply(this,arguments),pi){if(pi){var Y=zr;pi=!1,zr=null}else throw Error(t(198));oa||(oa=!0,Xn=Y)}}function xr(i){var o=i,u=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(u=o.return),i=o.return;while(i)}return o.tag===3?u:null}function Fl(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function Wu(i){if(xr(i)!==i)throw Error(t(188))}function $u(i){var o=i.alternate;if(!o){if(o=xr(i),o===null)throw Error(t(188));return o!==i?null:i}for(var u=i,p=o;;){var v=u.return;if(v===null)break;var w=v.alternate;if(w===null){if(p=v.return,p!==null){u=p;continue}break}if(v.child===w.child){for(w=v.child;w;){if(w===u)return Wu(v),i;if(w===p)return Wu(v),o;w=w.sibling}throw Error(t(188))}if(u.return!==p.return)u=v,p=w;else{for(var j=!1,O=v.child;O;){if(O===u){j=!0,u=v,p=w;break}if(O===p){j=!0,p=v,u=w;break}O=O.sibling}if(!j){for(O=w.child;O;){if(O===u){j=!0,u=w,p=v;break}if(O===p){j=!0,p=w,u=v;break}O=O.sibling}if(!j)throw Error(t(189))}}if(u.alternate!==p)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?i:o}function Hu(i){return i=$u(i),i!==null?lo(i):null}function lo(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=lo(i);if(o!==null)return o;i=i.sibling}return null}var Ul=e.unstable_scheduleCallback,aa=e.unstable_cancelCallback,co=e.unstable_shouldYield,gi=e.unstable_requestPaint,lt=e.unstable_now,Uf=e.unstable_getCurrentPriorityLevel,la=e.unstable_ImmediatePriority,Wl=e.unstable_UserBlockingPriority,uo=e.unstable_NormalPriority,$l=e.unstable_LowPriority,ca=e.unstable_IdlePriority,ho=null,Ln=null;function Ku(i){if(Ln&&typeof Ln.onCommitFiberRoot=="function")try{Ln.onCommitFiberRoot(ho,i,void 0,(i.current.flags&128)===128)}catch{}}var On=Math.clz32?Math.clz32:fo,Fr=Math.log,Jn=Math.LN2;function fo(i){return i>>>=0,i===0?32:31-(Fr(i)/Jn|0)|0}var Ur=64,ls=4194304;function Je(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function yi(i,o){var u=i.pendingLanes;if(u===0)return 0;var p=0,v=i.suspendedLanes,w=i.pingedLanes,j=u&268435455;if(j!==0){var O=j&~v;O!==0?p=Je(O):(w&=j,w!==0&&(p=Je(w)))}else j=u&~v,j!==0?p=Je(j):w!==0&&(p=Je(w));if(p===0)return 0;if(o!==0&&o!==p&&(o&v)===0&&(v=p&-p,w=o&-o,v>=w||v===16&&(w&4194240)!==0))return o;if((p&4)!==0&&(p|=u&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=p;0<o;)u=31-On(o),v=1<<u,p|=i[u],o&=~v;return p}function mo(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function po(i,o){for(var u=i.suspendedLanes,p=i.pingedLanes,v=i.expirationTimes,w=i.pendingLanes;0<w;){var j=31-On(w),O=1<<j,z=v[j];z===-1?((O&u)===0||(O&p)!==0)&&(v[j]=mo(O,o)):z<=o&&(i.expiredLanes|=O),w&=~O}}function Hl(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Kl(){var i=Ur;return Ur<<=1,(Ur&4194240)===0&&(Ur=64),i}function ql(i){for(var o=[],u=0;31>u;u++)o.push(i);return o}function go(i,o,u){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-On(o),i[o]=u}function Wf(i,o){var u=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var p=i.eventTimes;for(i=i.expirationTimes;0<u;){var v=31-On(u),w=1<<v;o[v]=0,p[v]=-1,i[v]=-1,u&=~w}}function Gl(i,o){var u=i.entangledLanes|=o;for(i=i.entanglements;u;){var p=31-On(u),v=1<<p;v&o|i[p]&o&&(i[p]|=o),u&=~v}}var Ke=0;function Wr(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Ql,ua,Yl,Xl,Jl,$r=!1,da=[],Hr=null,Kr=null,Xt=null,yo=new Map,vi=new Map,Bn=[],qu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cs(i,o){switch(i){case"focusin":case"focusout":Hr=null;break;case"dragenter":case"dragleave":Kr=null;break;case"mouseover":case"mouseout":Xt=null;break;case"pointerover":case"pointerout":yo.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":vi.delete(o.pointerId)}}function wr(i,o,u,p,v,w){return i===null||i.nativeEvent!==w?(i={blockedOn:o,domEventName:u,eventSystemFlags:p,nativeEvent:w,targetContainers:[v]},o!==null&&(o=hc(o),o!==null&&ua(o)),i):(i.eventSystemFlags|=p,o=i.targetContainers,v!==null&&o.indexOf(v)===-1&&o.push(v),i)}function Gu(i,o,u,p,v){switch(o){case"focusin":return Hr=wr(Hr,i,o,u,p,v),!0;case"dragenter":return Kr=wr(Kr,i,o,u,p,v),!0;case"mouseover":return Xt=wr(Xt,i,o,u,p,v),!0;case"pointerover":var w=v.pointerId;return yo.set(w,wr(yo.get(w)||null,i,o,u,p,v)),!0;case"gotpointercapture":return w=v.pointerId,vi.set(w,wr(vi.get(w)||null,i,o,u,p,v)),!0}return!1}function ha(i){var o=bo(i.target);if(o!==null){var u=xr(o);if(u!==null){if(o=u.tag,o===13){if(o=Fl(u),o!==null){i.blockedOn=o,Jl(i.priority,function(){Yl(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function st(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var u=fa(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(u===null){u=i.nativeEvent;var p=new u.constructor(u.type,u);rs=p,u.target.dispatchEvent(p),rs=null}else return o=hc(u),o!==null&&ua(o),i.blockedOn=u,!1;o.shift()}return!0}function Qu(i,o,u){st(i)&&u.delete(o)}function $f(){$r=!1,Hr!==null&&st(Hr)&&(Hr=null),Kr!==null&&st(Kr)&&(Kr=null),Xt!==null&&st(Xt)&&(Xt=null),yo.forEach(Qu),vi.forEach(Qu)}function us(i,o){i.blockedOn===o&&(i.blockedOn=null,$r||($r=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,$f)))}function ds(i){function o(v){return us(v,i)}if(0<da.length){us(da[0],i);for(var u=1;u<da.length;u++){var p=da[u];p.blockedOn===i&&(p.blockedOn=null)}}for(Hr!==null&&us(Hr,i),Kr!==null&&us(Kr,i),Xt!==null&&us(Xt,i),yo.forEach(o),vi.forEach(o),u=0;u<Bn.length;u++)p=Bn[u],p.blockedOn===i&&(p.blockedOn=null);for(;0<Bn.length&&(u=Bn[0],u.blockedOn===null);)ha(u),u.blockedOn===null&&Bn.shift()}var xi=U.ReactCurrentBatchConfig,wi=!0;function qr(i,o,u,p){var v=Ke,w=xi.transition;xi.transition=null;try{Ke=1,Zl(i,o,u,p)}finally{Ke=v,xi.transition=w}}function Yu(i,o,u,p){var v=Ke,w=xi.transition;xi.transition=null;try{Ke=4,Zl(i,o,u,p)}finally{Ke=v,xi.transition=w}}function Zl(i,o,u,p){if(wi){var v=fa(i,o,u,p);if(v===null)tm(i,o,p,Gr,u),cs(i,p);else if(Gu(v,i,o,u,p))p.stopPropagation();else if(cs(i,p),o&4&&-1<qu.indexOf(i)){for(;v!==null;){var w=hc(v);if(w!==null&&Ql(w),w=fa(i,o,u,p),w===null&&tm(i,o,p,Gr,u),w===v)break;v=w}v!==null&&p.stopPropagation()}else tm(i,o,p,null,u)}}var Gr=null;function fa(i,o,u,p){if(Gr=null,i=sa(p),i=bo(i),i!==null)if(o=xr(i),o===null)i=null;else if(u=o.tag,u===13){if(i=Fl(o),i!==null)return i;i=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return Gr=i,null}function ma(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Uf()){case la:return 1;case Wl:return 4;case uo:case $l:return 16;case ca:return 536870912;default:return 16}default:return 16}}var zn=null,pa=null,bi=null;function Xu(){if(bi)return bi;var i,o=pa,u=o.length,p,v="value"in zn?zn.value:zn.textContent,w=v.length;for(i=0;i<u&&o[i]===v[i];i++);var j=u-i;for(p=1;p<=j&&o[u-p]===v[w-p];p++);return bi=v.slice(i,1<p?1-p:void 0)}function vo(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Qr(){return!0}function ec(){return!1}function an(i){function o(u,p,v,w,j){this._reactName=u,this._targetInst=v,this.type=p,this.nativeEvent=w,this.target=j,this.currentTarget=null;for(var O in i)i.hasOwnProperty(O)&&(u=i[O],this[O]=u?u(w):w[O]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Qr:ec,this.isPropagationStopped=ec,this}return le(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Qr)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Qr)},persist:function(){},isPersistent:Qr}),o}var Yr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xo=an(Yr),hs=le({},Yr,{view:0,detail:0}),ga=an(hs),ya,va,Fn,wo=le({},hs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Me,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Fn&&(Fn&&i.type==="mousemove"?(ya=i.screenX-Fn.screenX,va=i.screenY-Fn.screenY):va=ya=0,Fn=i),ya)},movementY:function(i){return"movementY"in i?i.movementY:va}}),tc=an(wo),Ju=le({},wo,{dataTransfer:0}),Zu=an(Ju),xa=le({},hs,{relatedTarget:0}),Jt=an(xa),ed=le({},Yr,{animationName:0,elapsedTime:0,pseudoElement:0}),td=an(ed),fs=le({},Yr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),f=an(fs),b=le({},Yr,{data:0}),_=an(b),P={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},q={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},X={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ce(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=X[i])?!!o[i]:!1}function Me(){return ce}var It=le({},hs,{key:function(i){if(i.key){var o=P[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=vo(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?q[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Me,charCode:function(i){return i.type==="keypress"?vo(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?vo(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),tt=an(It),Mt=le({},wo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Un=an(Mt),ki=le({},hs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Me}),Xr=an(ki),Jr=le({},Yr,{propertyName:0,elapsedTime:0,pseudoElement:0}),wa=an(Jr),nc=le({},wo,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),zT=an(nc),FT=[9,13,27,32],Hf=h&&"CompositionEvent"in window,rc=null;h&&"documentMode"in document&&(rc=document.documentMode);var UT=h&&"TextEvent"in window&&!rc,Q0=h&&(!Hf||rc&&8<rc&&11>=rc),Y0=" ",X0=!1;function J0(i,o){switch(i){case"keyup":return FT.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Z0(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ba=!1;function WT(i,o){switch(i){case"compositionend":return Z0(o);case"keypress":return o.which!==32?null:(X0=!0,Y0);case"textInput":return i=o.data,i===Y0&&X0?null:i;default:return null}}function $T(i,o){if(ba)return i==="compositionend"||!Hf&&J0(i,o)?(i=Xu(),bi=pa=zn=null,ba=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Q0&&o.locale!=="ko"?null:o.data;default:return null}}var HT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ev(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!HT[i.type]:o==="textarea"}function tv(i,o,u,p){is(p),o=od(o,"onChange"),0<o.length&&(u=new xo("onChange","change",null,u,p),i.push({event:u,listeners:o}))}var ic=null,sc=null;function KT(i){xv(i,0)}function nd(i){var o=Ta(i);if(J(o))return i}function qT(i,o){if(i==="change")return o}var nv=!1;if(h){var Kf;if(h){var qf="oninput"in document;if(!qf){var rv=document.createElement("div");rv.setAttribute("oninput","return;"),qf=typeof rv.oninput=="function"}Kf=qf}else Kf=!1;nv=Kf&&(!document.documentMode||9<document.documentMode)}function iv(){ic&&(ic.detachEvent("onpropertychange",sv),sc=ic=null)}function sv(i){if(i.propertyName==="value"&&nd(sc)){var o=[];tv(o,sc,i,sa(i)),Bu(KT,o)}}function GT(i,o,u){i==="focusin"?(iv(),ic=o,sc=u,ic.attachEvent("onpropertychange",sv)):i==="focusout"&&iv()}function QT(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return nd(sc)}function YT(i,o){if(i==="click")return nd(o)}function XT(i,o){if(i==="input"||i==="change")return nd(o)}function JT(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var br=typeof Object.is=="function"?Object.is:JT;function oc(i,o){if(br(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var u=Object.keys(i),p=Object.keys(o);if(u.length!==p.length)return!1;for(p=0;p<u.length;p++){var v=u[p];if(!d.call(o,v)||!br(i[v],o[v]))return!1}return!0}function ov(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function av(i,o){var u=ov(i);i=0;for(var p;u;){if(u.nodeType===3){if(p=i+u.textContent.length,i<=o&&p>=o)return{node:u,offset:o-i};i=p}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=ov(u)}}function lv(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?lv(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function cv(){for(var i=window,o=be();o instanceof i.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)i=o.contentWindow;else break;o=be(i.document)}return o}function Gf(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function ZT(i){var o=cv(),u=i.focusedElem,p=i.selectionRange;if(o!==u&&u&&u.ownerDocument&&lv(u.ownerDocument.documentElement,u)){if(p!==null&&Gf(u)){if(o=p.start,i=p.end,i===void 0&&(i=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(i,u.value.length);else if(i=(o=u.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var v=u.textContent.length,w=Math.min(p.start,v);p=p.end===void 0?w:Math.min(p.end,v),!i.extend&&w>p&&(v=p,p=w,w=v),v=av(u,w);var j=av(u,p);v&&j&&(i.rangeCount!==1||i.anchorNode!==v.node||i.anchorOffset!==v.offset||i.focusNode!==j.node||i.focusOffset!==j.offset)&&(o=o.createRange(),o.setStart(v.node,v.offset),i.removeAllRanges(),w>p?(i.addRange(o),i.extend(j.node,j.offset)):(o.setEnd(j.node,j.offset),i.addRange(o)))}}for(o=[],i=u;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)i=o[u],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var eI=h&&"documentMode"in document&&11>=document.documentMode,ka=null,Qf=null,ac=null,Yf=!1;function uv(i,o,u){var p=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Yf||ka==null||ka!==be(p)||(p=ka,"selectionStart"in p&&Gf(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),ac&&oc(ac,p)||(ac=p,p=od(Qf,"onSelect"),0<p.length&&(o=new xo("onSelect","select",null,o,u),i.push({event:o,listeners:p}),o.target=ka)))}function rd(i,o){var u={};return u[i.toLowerCase()]=o.toLowerCase(),u["Webkit"+i]="webkit"+o,u["Moz"+i]="moz"+o,u}var _a={animationend:rd("Animation","AnimationEnd"),animationiteration:rd("Animation","AnimationIteration"),animationstart:rd("Animation","AnimationStart"),transitionend:rd("Transition","TransitionEnd")},Xf={},dv={};h&&(dv=document.createElement("div").style,"AnimationEvent"in window||(delete _a.animationend.animation,delete _a.animationiteration.animation,delete _a.animationstart.animation),"TransitionEvent"in window||delete _a.transitionend.transition);function id(i){if(Xf[i])return Xf[i];if(!_a[i])return i;var o=_a[i],u;for(u in o)if(o.hasOwnProperty(u)&&u in dv)return Xf[i]=o[u];return i}var hv=id("animationend"),fv=id("animationiteration"),mv=id("animationstart"),pv=id("transitionend"),gv=new Map,yv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ms(i,o){gv.set(i,o),l(o,[i])}for(var Jf=0;Jf<yv.length;Jf++){var Zf=yv[Jf],tI=Zf.toLowerCase(),nI=Zf[0].toUpperCase()+Zf.slice(1);ms(tI,"on"+nI)}ms(hv,"onAnimationEnd"),ms(fv,"onAnimationIteration"),ms(mv,"onAnimationStart"),ms("dblclick","onDoubleClick"),ms("focusin","onFocus"),ms("focusout","onBlur"),ms(pv,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rI=new Set("cancel close invalid load scroll toggle".split(" ").concat(lc));function vv(i,o,u){var p=i.type||"unknown-event";i.currentTarget=u,zl(p,o,void 0,i),i.currentTarget=null}function xv(i,o){o=(o&4)!==0;for(var u=0;u<i.length;u++){var p=i[u],v=p.event;p=p.listeners;e:{var w=void 0;if(o)for(var j=p.length-1;0<=j;j--){var O=p[j],z=O.instance,Y=O.currentTarget;if(O=O.listener,z!==w&&v.isPropagationStopped())break e;vv(v,O,Y),w=z}else for(j=0;j<p.length;j++){if(O=p[j],z=O.instance,Y=O.currentTarget,O=O.listener,z!==w&&v.isPropagationStopped())break e;vv(v,O,Y),w=z}}}if(oa)throw i=Xn,oa=!1,Xn=null,i}function ct(i,o){var u=o[am];u===void 0&&(u=o[am]=new Set);var p=i+"__bubble";u.has(p)||(wv(o,i,2,!1),u.add(p))}function em(i,o,u){var p=0;o&&(p|=4),wv(u,i,p,o)}var sd="_reactListening"+Math.random().toString(36).slice(2);function cc(i){if(!i[sd]){i[sd]=!0,r.forEach(function(u){u!=="selectionchange"&&(rI.has(u)||em(u,!1,i),em(u,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[sd]||(o[sd]=!0,em("selectionchange",!1,o))}}function wv(i,o,u,p){switch(ma(o)){case 1:var v=qr;break;case 4:v=Yu;break;default:v=Zl}u=v.bind(null,o,u,i),v=void 0,!os||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(v=!0),p?v!==void 0?i.addEventListener(o,u,{capture:!0,passive:v}):i.addEventListener(o,u,!0):v!==void 0?i.addEventListener(o,u,{passive:v}):i.addEventListener(o,u,!1)}function tm(i,o,u,p,v){var w=p;if((o&1)===0&&(o&2)===0&&p!==null)e:for(;;){if(p===null)return;var j=p.tag;if(j===3||j===4){var O=p.stateNode.containerInfo;if(O===v||O.nodeType===8&&O.parentNode===v)break;if(j===4)for(j=p.return;j!==null;){var z=j.tag;if((z===3||z===4)&&(z=j.stateNode.containerInfo,z===v||z.nodeType===8&&z.parentNode===v))return;j=j.return}for(;O!==null;){if(j=bo(O),j===null)return;if(z=j.tag,z===5||z===6){p=w=j;continue e}O=O.parentNode}}p=p.return}Bu(function(){var Y=w,re=sa(u),se=[];e:{var ne=gv.get(i);if(ne!==void 0){var fe=xo,ve=i;switch(i){case"keypress":if(vo(u)===0)break e;case"keydown":case"keyup":fe=tt;break;case"focusin":ve="focus",fe=Jt;break;case"focusout":ve="blur",fe=Jt;break;case"beforeblur":case"afterblur":fe=Jt;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=tc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=Zu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=Xr;break;case hv:case fv:case mv:fe=td;break;case pv:fe=wa;break;case"scroll":fe=ga;break;case"wheel":fe=zT;break;case"copy":case"cut":case"paste":fe=f;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=Un}var xe=(o&4)!==0,Ct=!xe&&i==="scroll",K=xe?ne!==null?ne+"Capture":null:ne;xe=[];for(var W=Y,Q;W!==null;){Q=W;var oe=Q.stateNode;if(Q.tag===5&&oe!==null&&(Q=oe,K!==null&&(oe=ao(W,K),oe!=null&&xe.push(uc(W,oe,Q)))),Ct)break;W=W.return}0<xe.length&&(ne=new fe(ne,ve,null,u,re),se.push({event:ne,listeners:xe}))}}if((o&7)===0){e:{if(ne=i==="mouseover"||i==="pointerover",fe=i==="mouseout"||i==="pointerout",ne&&u!==rs&&(ve=u.relatedTarget||u.fromElement)&&(bo(ve)||ve[_i]))break e;if((fe||ne)&&(ne=re.window===re?re:(ne=re.ownerDocument)?ne.defaultView||ne.parentWindow:window,fe?(ve=u.relatedTarget||u.toElement,fe=Y,ve=ve?bo(ve):null,ve!==null&&(Ct=xr(ve),ve!==Ct||ve.tag!==5&&ve.tag!==6)&&(ve=null)):(fe=null,ve=Y),fe!==ve)){if(xe=tc,oe="onMouseLeave",K="onMouseEnter",W="mouse",(i==="pointerout"||i==="pointerover")&&(xe=Un,oe="onPointerLeave",K="onPointerEnter",W="pointer"),Ct=fe==null?ne:Ta(fe),Q=ve==null?ne:Ta(ve),ne=new xe(oe,W+"leave",fe,u,re),ne.target=Ct,ne.relatedTarget=Q,oe=null,bo(re)===Y&&(xe=new xe(K,W+"enter",ve,u,re),xe.target=Q,xe.relatedTarget=Ct,oe=xe),Ct=oe,fe&&ve)t:{for(xe=fe,K=ve,W=0,Q=xe;Q;Q=Sa(Q))W++;for(Q=0,oe=K;oe;oe=Sa(oe))Q++;for(;0<W-Q;)xe=Sa(xe),W--;for(;0<Q-W;)K=Sa(K),Q--;for(;W--;){if(xe===K||K!==null&&xe===K.alternate)break t;xe=Sa(xe),K=Sa(K)}xe=null}else xe=null;fe!==null&&bv(se,ne,fe,xe,!1),ve!==null&&Ct!==null&&bv(se,Ct,ve,xe,!0)}}e:{if(ne=Y?Ta(Y):window,fe=ne.nodeName&&ne.nodeName.toLowerCase(),fe==="select"||fe==="input"&&ne.type==="file")var we=qT;else if(ev(ne))if(nv)we=XT;else{we=QT;var Se=GT}else(fe=ne.nodeName)&&fe.toLowerCase()==="input"&&(ne.type==="checkbox"||ne.type==="radio")&&(we=YT);if(we&&(we=we(i,Y))){tv(se,we,u,re);break e}Se&&Se(i,ne,Y),i==="focusout"&&(Se=ne._wrapperState)&&Se.controlled&&ne.type==="number"&&Nt(ne,"number",ne.value)}switch(Se=Y?Ta(Y):window,i){case"focusin":(ev(Se)||Se.contentEditable==="true")&&(ka=Se,Qf=Y,ac=null);break;case"focusout":ac=Qf=ka=null;break;case"mousedown":Yf=!0;break;case"contextmenu":case"mouseup":case"dragend":Yf=!1,uv(se,u,re);break;case"selectionchange":if(eI)break;case"keydown":case"keyup":uv(se,u,re)}var Ee;if(Hf)e:{switch(i){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else ba?J0(i,u)&&(Re="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(Re="onCompositionStart");Re&&(Q0&&u.locale!=="ko"&&(ba||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&ba&&(Ee=Xu()):(zn=re,pa="value"in zn?zn.value:zn.textContent,ba=!0)),Se=od(Y,Re),0<Se.length&&(Re=new _(Re,i,null,u,re),se.push({event:Re,listeners:Se}),Ee?Re.data=Ee:(Ee=Z0(u),Ee!==null&&(Re.data=Ee)))),(Ee=UT?WT(i,u):$T(i,u))&&(Y=od(Y,"onBeforeInput"),0<Y.length&&(re=new _("onBeforeInput","beforeinput",null,u,re),se.push({event:re,listeners:Y}),re.data=Ee))}xv(se,o)})}function uc(i,o,u){return{instance:i,listener:o,currentTarget:u}}function od(i,o){for(var u=o+"Capture",p=[];i!==null;){var v=i,w=v.stateNode;v.tag===5&&w!==null&&(v=w,w=ao(i,u),w!=null&&p.unshift(uc(i,w,v)),w=ao(i,o),w!=null&&p.push(uc(i,w,v))),i=i.return}return p}function Sa(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function bv(i,o,u,p,v){for(var w=o._reactName,j=[];u!==null&&u!==p;){var O=u,z=O.alternate,Y=O.stateNode;if(z!==null&&z===p)break;O.tag===5&&Y!==null&&(O=Y,v?(z=ao(u,w),z!=null&&j.unshift(uc(u,z,O))):v||(z=ao(u,w),z!=null&&j.push(uc(u,z,O)))),u=u.return}j.length!==0&&i.push({event:o,listeners:j})}var iI=/\r\n?/g,sI=/\u0000|\uFFFD/g;function kv(i){return(typeof i=="string"?i:""+i).replace(iI,`
`).replace(sI,"")}function ad(i,o,u){if(o=kv(o),kv(i)!==o&&u)throw Error(t(425))}function ld(){}var nm=null,rm=null;function im(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var sm=typeof setTimeout=="function"?setTimeout:void 0,oI=typeof clearTimeout=="function"?clearTimeout:void 0,_v=typeof Promise=="function"?Promise:void 0,aI=typeof queueMicrotask=="function"?queueMicrotask:typeof _v<"u"?function(i){return _v.resolve(null).then(i).catch(lI)}:sm;function lI(i){setTimeout(function(){throw i})}function om(i,o){var u=o,p=0;do{var v=u.nextSibling;if(i.removeChild(u),v&&v.nodeType===8)if(u=v.data,u==="/$"){if(p===0){i.removeChild(v),ds(o);return}p--}else u!=="$"&&u!=="$?"&&u!=="$!"||p++;u=v}while(u);ds(o)}function ps(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function Sv(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return i;o--}else u==="/$"&&o++}i=i.previousSibling}return null}var Ea=Math.random().toString(36).slice(2),Zr="__reactFiber$"+Ea,dc="__reactProps$"+Ea,_i="__reactContainer$"+Ea,am="__reactEvents$"+Ea,cI="__reactListeners$"+Ea,uI="__reactHandles$"+Ea;function bo(i){var o=i[Zr];if(o)return o;for(var u=i.parentNode;u;){if(o=u[_i]||u[Zr]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(i=Sv(i);i!==null;){if(u=i[Zr])return u;i=Sv(i)}return o}i=u,u=i.parentNode}return null}function hc(i){return i=i[Zr]||i[_i],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Ta(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function cd(i){return i[dc]||null}var lm=[],Ia=-1;function gs(i){return{current:i}}function ut(i){0>Ia||(i.current=lm[Ia],lm[Ia]=null,Ia--)}function ot(i,o){Ia++,lm[Ia]=i.current,i.current=o}var ys={},ln=gs(ys),En=gs(!1),ko=ys;function Ca(i,o){var u=i.type.contextTypes;if(!u)return ys;var p=i.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===o)return p.__reactInternalMemoizedMaskedChildContext;var v={},w;for(w in u)v[w]=o[w];return p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=v),v}function Tn(i){return i=i.childContextTypes,i!=null}function ud(){ut(En),ut(ln)}function Ev(i,o,u){if(ln.current!==ys)throw Error(t(168));ot(ln,o),ot(En,u)}function Tv(i,o,u){var p=i.stateNode;if(o=o.childContextTypes,typeof p.getChildContext!="function")return u;p=p.getChildContext();for(var v in p)if(!(v in o))throw Error(t(108,Qe(i)||"Unknown",v));return le({},u,p)}function dd(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||ys,ko=ln.current,ot(ln,i),ot(En,En.current),!0}function Iv(i,o,u){var p=i.stateNode;if(!p)throw Error(t(169));u?(i=Tv(i,o,ko),p.__reactInternalMemoizedMergedChildContext=i,ut(En),ut(ln),ot(ln,i)):ut(En),ot(En,u)}var Si=null,hd=!1,cm=!1;function Cv(i){Si===null?Si=[i]:Si.push(i)}function dI(i){hd=!0,Cv(i)}function vs(){if(!cm&&Si!==null){cm=!0;var i=0,o=Ke;try{var u=Si;for(Ke=1;i<u.length;i++){var p=u[i];do p=p(!0);while(p!==null)}Si=null,hd=!1}catch(v){throw Si!==null&&(Si=Si.slice(i+1)),Ul(la,vs),v}finally{Ke=o,cm=!1}}return null}var ja=[],Aa=0,fd=null,md=0,Zn=[],er=0,_o=null,Ei=1,Ti="";function So(i,o){ja[Aa++]=md,ja[Aa++]=fd,fd=i,md=o}function jv(i,o,u){Zn[er++]=Ei,Zn[er++]=Ti,Zn[er++]=_o,_o=i;var p=Ei;i=Ti;var v=32-On(p)-1;p&=~(1<<v),u+=1;var w=32-On(o)+v;if(30<w){var j=v-v%5;w=(p&(1<<j)-1).toString(32),p>>=j,v-=j,Ei=1<<32-On(o)+v|u<<v|p,Ti=w+i}else Ei=1<<w|u<<v|p,Ti=i}function um(i){i.return!==null&&(So(i,1),jv(i,1,0))}function dm(i){for(;i===fd;)fd=ja[--Aa],ja[Aa]=null,md=ja[--Aa],ja[Aa]=null;for(;i===_o;)_o=Zn[--er],Zn[er]=null,Ti=Zn[--er],Zn[er]=null,Ei=Zn[--er],Zn[er]=null}var Wn=null,$n=null,mt=!1,kr=null;function Av(i,o){var u=ir(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=i,o=i.deletions,o===null?(i.deletions=[u],i.flags|=16):o.push(u)}function Rv(i,o){switch(i.tag){case 5:var u=i.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,Wn=i,$n=ps(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,Wn=i,$n=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=_o!==null?{id:Ei,overflow:Ti}:null,i.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=ir(18,null,null,0),u.stateNode=o,u.return=i,i.child=u,Wn=i,$n=null,!0):!1;default:return!1}}function hm(i){return(i.mode&1)!==0&&(i.flags&128)===0}function fm(i){if(mt){var o=$n;if(o){var u=o;if(!Rv(i,o)){if(hm(i))throw Error(t(418));o=ps(u.nextSibling);var p=Wn;o&&Rv(i,o)?Av(p,u):(i.flags=i.flags&-4097|2,mt=!1,Wn=i)}}else{if(hm(i))throw Error(t(418));i.flags=i.flags&-4097|2,mt=!1,Wn=i}}}function Pv(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Wn=i}function pd(i){if(i!==Wn)return!1;if(!mt)return Pv(i),mt=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!im(i.type,i.memoizedProps)),o&&(o=$n)){if(hm(i))throw Nv(),Error(t(418));for(;o;)Av(i,o),o=ps(o.nextSibling)}if(Pv(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"){if(o===0){$n=ps(i.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}i=i.nextSibling}$n=null}}else $n=Wn?ps(i.stateNode.nextSibling):null;return!0}function Nv(){for(var i=$n;i;)i=ps(i.nextSibling)}function Ra(){$n=Wn=null,mt=!1}function mm(i){kr===null?kr=[i]:kr.push(i)}var hI=U.ReactCurrentBatchConfig;function fc(i,o,u){if(i=u.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var p=u.stateNode}if(!p)throw Error(t(147,i));var v=p,w=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===w?o.ref:(o=function(j){var O=v.refs;j===null?delete O[w]:O[w]=j},o._stringRef=w,o)}if(typeof i!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,i))}return i}function gd(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function Mv(i){var o=i._init;return o(i._payload)}function Dv(i){function o(K,W){if(i){var Q=K.deletions;Q===null?(K.deletions=[W],K.flags|=16):Q.push(W)}}function u(K,W){if(!i)return null;for(;W!==null;)o(K,W),W=W.sibling;return null}function p(K,W){for(K=new Map;W!==null;)W.key!==null?K.set(W.key,W):K.set(W.index,W),W=W.sibling;return K}function v(K,W){return K=Ts(K,W),K.index=0,K.sibling=null,K}function w(K,W,Q){return K.index=Q,i?(Q=K.alternate,Q!==null?(Q=Q.index,Q<W?(K.flags|=2,W):Q):(K.flags|=2,W)):(K.flags|=1048576,W)}function j(K){return i&&K.alternate===null&&(K.flags|=2),K}function O(K,W,Q,oe){return W===null||W.tag!==6?(W=sp(Q,K.mode,oe),W.return=K,W):(W=v(W,Q),W.return=K,W)}function z(K,W,Q,oe){var we=Q.type;return we===I?re(K,W,Q.props.children,oe,Q.key):W!==null&&(W.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===it&&Mv(we)===W.type)?(oe=v(W,Q.props),oe.ref=fc(K,W,Q),oe.return=K,oe):(oe=zd(Q.type,Q.key,Q.props,null,K.mode,oe),oe.ref=fc(K,W,Q),oe.return=K,oe)}function Y(K,W,Q,oe){return W===null||W.tag!==4||W.stateNode.containerInfo!==Q.containerInfo||W.stateNode.implementation!==Q.implementation?(W=op(Q,K.mode,oe),W.return=K,W):(W=v(W,Q.children||[]),W.return=K,W)}function re(K,W,Q,oe,we){return W===null||W.tag!==7?(W=Po(Q,K.mode,oe,we),W.return=K,W):(W=v(W,Q),W.return=K,W)}function se(K,W,Q){if(typeof W=="string"&&W!==""||typeof W=="number")return W=sp(""+W,K.mode,Q),W.return=K,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case $:return Q=zd(W.type,W.key,W.props,null,K.mode,Q),Q.ref=fc(K,null,W),Q.return=K,Q;case G:return W=op(W,K.mode,Q),W.return=K,W;case it:var oe=W._init;return se(K,oe(W._payload),Q)}if(Tt(W)||me(W))return W=Po(W,K.mode,Q,null),W.return=K,W;gd(K,W)}return null}function ne(K,W,Q,oe){var we=W!==null?W.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number")return we!==null?null:O(K,W,""+Q,oe);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case $:return Q.key===we?z(K,W,Q,oe):null;case G:return Q.key===we?Y(K,W,Q,oe):null;case it:return we=Q._init,ne(K,W,we(Q._payload),oe)}if(Tt(Q)||me(Q))return we!==null?null:re(K,W,Q,oe,null);gd(K,Q)}return null}function fe(K,W,Q,oe,we){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return K=K.get(Q)||null,O(W,K,""+oe,we);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case $:return K=K.get(oe.key===null?Q:oe.key)||null,z(W,K,oe,we);case G:return K=K.get(oe.key===null?Q:oe.key)||null,Y(W,K,oe,we);case it:var Se=oe._init;return fe(K,W,Q,Se(oe._payload),we)}if(Tt(oe)||me(oe))return K=K.get(Q)||null,re(W,K,oe,we,null);gd(W,oe)}return null}function ve(K,W,Q,oe){for(var we=null,Se=null,Ee=W,Re=W=0,qt=null;Ee!==null&&Re<Q.length;Re++){Ee.index>Re?(qt=Ee,Ee=null):qt=Ee.sibling;var Xe=ne(K,Ee,Q[Re],oe);if(Xe===null){Ee===null&&(Ee=qt);break}i&&Ee&&Xe.alternate===null&&o(K,Ee),W=w(Xe,W,Re),Se===null?we=Xe:Se.sibling=Xe,Se=Xe,Ee=qt}if(Re===Q.length)return u(K,Ee),mt&&So(K,Re),we;if(Ee===null){for(;Re<Q.length;Re++)Ee=se(K,Q[Re],oe),Ee!==null&&(W=w(Ee,W,Re),Se===null?we=Ee:Se.sibling=Ee,Se=Ee);return mt&&So(K,Re),we}for(Ee=p(K,Ee);Re<Q.length;Re++)qt=fe(Ee,K,Re,Q[Re],oe),qt!==null&&(i&&qt.alternate!==null&&Ee.delete(qt.key===null?Re:qt.key),W=w(qt,W,Re),Se===null?we=qt:Se.sibling=qt,Se=qt);return i&&Ee.forEach(function(Is){return o(K,Is)}),mt&&So(K,Re),we}function xe(K,W,Q,oe){var we=me(Q);if(typeof we!="function")throw Error(t(150));if(Q=we.call(Q),Q==null)throw Error(t(151));for(var Se=we=null,Ee=W,Re=W=0,qt=null,Xe=Q.next();Ee!==null&&!Xe.done;Re++,Xe=Q.next()){Ee.index>Re?(qt=Ee,Ee=null):qt=Ee.sibling;var Is=ne(K,Ee,Xe.value,oe);if(Is===null){Ee===null&&(Ee=qt);break}i&&Ee&&Is.alternate===null&&o(K,Ee),W=w(Is,W,Re),Se===null?we=Is:Se.sibling=Is,Se=Is,Ee=qt}if(Xe.done)return u(K,Ee),mt&&So(K,Re),we;if(Ee===null){for(;!Xe.done;Re++,Xe=Q.next())Xe=se(K,Xe.value,oe),Xe!==null&&(W=w(Xe,W,Re),Se===null?we=Xe:Se.sibling=Xe,Se=Xe);return mt&&So(K,Re),we}for(Ee=p(K,Ee);!Xe.done;Re++,Xe=Q.next())Xe=fe(Ee,K,Re,Xe.value,oe),Xe!==null&&(i&&Xe.alternate!==null&&Ee.delete(Xe.key===null?Re:Xe.key),W=w(Xe,W,Re),Se===null?we=Xe:Se.sibling=Xe,Se=Xe);return i&&Ee.forEach(function(HI){return o(K,HI)}),mt&&So(K,Re),we}function Ct(K,W,Q,oe){if(typeof Q=="object"&&Q!==null&&Q.type===I&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case $:e:{for(var we=Q.key,Se=W;Se!==null;){if(Se.key===we){if(we=Q.type,we===I){if(Se.tag===7){u(K,Se.sibling),W=v(Se,Q.props.children),W.return=K,K=W;break e}}else if(Se.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===it&&Mv(we)===Se.type){u(K,Se.sibling),W=v(Se,Q.props),W.ref=fc(K,Se,Q),W.return=K,K=W;break e}u(K,Se);break}else o(K,Se);Se=Se.sibling}Q.type===I?(W=Po(Q.props.children,K.mode,oe,Q.key),W.return=K,K=W):(oe=zd(Q.type,Q.key,Q.props,null,K.mode,oe),oe.ref=fc(K,W,Q),oe.return=K,K=oe)}return j(K);case G:e:{for(Se=Q.key;W!==null;){if(W.key===Se)if(W.tag===4&&W.stateNode.containerInfo===Q.containerInfo&&W.stateNode.implementation===Q.implementation){u(K,W.sibling),W=v(W,Q.children||[]),W.return=K,K=W;break e}else{u(K,W);break}else o(K,W);W=W.sibling}W=op(Q,K.mode,oe),W.return=K,K=W}return j(K);case it:return Se=Q._init,Ct(K,W,Se(Q._payload),oe)}if(Tt(Q))return ve(K,W,Q,oe);if(me(Q))return xe(K,W,Q,oe);gd(K,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"?(Q=""+Q,W!==null&&W.tag===6?(u(K,W.sibling),W=v(W,Q),W.return=K,K=W):(u(K,W),W=sp(Q,K.mode,oe),W.return=K,K=W),j(K)):u(K,W)}return Ct}var Pa=Dv(!0),Vv=Dv(!1),yd=gs(null),vd=null,Na=null,pm=null;function gm(){pm=Na=vd=null}function ym(i){var o=yd.current;ut(yd),i._currentValue=o}function vm(i,o,u){for(;i!==null;){var p=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,p!==null&&(p.childLanes|=o)):p!==null&&(p.childLanes&o)!==o&&(p.childLanes|=o),i===u)break;i=i.return}}function Ma(i,o){vd=i,pm=Na=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(In=!0),i.firstContext=null)}function tr(i){var o=i._currentValue;if(pm!==i)if(i={context:i,memoizedValue:o,next:null},Na===null){if(vd===null)throw Error(t(308));Na=i,vd.dependencies={lanes:0,firstContext:i}}else Na=Na.next=i;return o}var Eo=null;function xm(i){Eo===null?Eo=[i]:Eo.push(i)}function Lv(i,o,u,p){var v=o.interleaved;return v===null?(u.next=u,xm(o)):(u.next=v.next,v.next=u),o.interleaved=u,Ii(i,p)}function Ii(i,o){i.lanes|=o;var u=i.alternate;for(u!==null&&(u.lanes|=o),u=i,i=i.return;i!==null;)i.childLanes|=o,u=i.alternate,u!==null&&(u.childLanes|=o),u=i,i=i.return;return u.tag===3?u.stateNode:null}var xs=!1;function wm(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ov(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Ci(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function ws(i,o,u){var p=i.updateQueue;if(p===null)return null;if(p=p.shared,(Ge&2)!==0){var v=p.pending;return v===null?o.next=o:(o.next=v.next,v.next=o),p.pending=o,Ii(i,u)}return v=p.interleaved,v===null?(o.next=o,xm(p)):(o.next=v.next,v.next=o),p.interleaved=o,Ii(i,u)}function xd(i,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var p=o.lanes;p&=i.pendingLanes,u|=p,o.lanes=u,Gl(i,u)}}function Bv(i,o){var u=i.updateQueue,p=i.alternate;if(p!==null&&(p=p.updateQueue,u===p)){var v=null,w=null;if(u=u.firstBaseUpdate,u!==null){do{var j={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};w===null?v=w=j:w=w.next=j,u=u.next}while(u!==null);w===null?v=w=o:w=w.next=o}else v=w=o;u={baseState:p.baseState,firstBaseUpdate:v,lastBaseUpdate:w,shared:p.shared,effects:p.effects},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=o:i.next=o,u.lastBaseUpdate=o}function wd(i,o,u,p){var v=i.updateQueue;xs=!1;var w=v.firstBaseUpdate,j=v.lastBaseUpdate,O=v.shared.pending;if(O!==null){v.shared.pending=null;var z=O,Y=z.next;z.next=null,j===null?w=Y:j.next=Y,j=z;var re=i.alternate;re!==null&&(re=re.updateQueue,O=re.lastBaseUpdate,O!==j&&(O===null?re.firstBaseUpdate=Y:O.next=Y,re.lastBaseUpdate=z))}if(w!==null){var se=v.baseState;j=0,re=Y=z=null,O=w;do{var ne=O.lane,fe=O.eventTime;if((p&ne)===ne){re!==null&&(re=re.next={eventTime:fe,lane:0,tag:O.tag,payload:O.payload,callback:O.callback,next:null});e:{var ve=i,xe=O;switch(ne=o,fe=u,xe.tag){case 1:if(ve=xe.payload,typeof ve=="function"){se=ve.call(fe,se,ne);break e}se=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=xe.payload,ne=typeof ve=="function"?ve.call(fe,se,ne):ve,ne==null)break e;se=le({},se,ne);break e;case 2:xs=!0}}O.callback!==null&&O.lane!==0&&(i.flags|=64,ne=v.effects,ne===null?v.effects=[O]:ne.push(O))}else fe={eventTime:fe,lane:ne,tag:O.tag,payload:O.payload,callback:O.callback,next:null},re===null?(Y=re=fe,z=se):re=re.next=fe,j|=ne;if(O=O.next,O===null){if(O=v.shared.pending,O===null)break;ne=O,O=ne.next,ne.next=null,v.lastBaseUpdate=ne,v.shared.pending=null}}while(!0);if(re===null&&(z=se),v.baseState=z,v.firstBaseUpdate=Y,v.lastBaseUpdate=re,o=v.shared.interleaved,o!==null){v=o;do j|=v.lane,v=v.next;while(v!==o)}else w===null&&(v.shared.lanes=0);Co|=j,i.lanes=j,i.memoizedState=se}}function zv(i,o,u){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var p=i[o],v=p.callback;if(v!==null){if(p.callback=null,p=u,typeof v!="function")throw Error(t(191,v));v.call(p)}}}var mc={},ei=gs(mc),pc=gs(mc),gc=gs(mc);function To(i){if(i===mc)throw Error(t(174));return i}function bm(i,o){switch(ot(gc,o),ot(pc,i),ot(ei,mc),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:na(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=na(o,i)}ut(ei),ot(ei,o)}function Da(){ut(ei),ut(pc),ut(gc)}function Fv(i){To(gc.current);var o=To(ei.current),u=na(o,i.type);o!==u&&(ot(pc,i),ot(ei,u))}function km(i){pc.current===i&&(ut(ei),ut(pc))}var gt=gs(0);function bd(i){for(var o=i;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var _m=[];function Sm(){for(var i=0;i<_m.length;i++)_m[i]._workInProgressVersionPrimary=null;_m.length=0}var kd=U.ReactCurrentDispatcher,Em=U.ReactCurrentBatchConfig,Io=0,yt=null,zt=null,Ht=null,_d=!1,yc=!1,vc=0,fI=0;function cn(){throw Error(t(321))}function Tm(i,o){if(o===null)return!1;for(var u=0;u<o.length&&u<i.length;u++)if(!br(i[u],o[u]))return!1;return!0}function Im(i,o,u,p,v,w){if(Io=w,yt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,kd.current=i===null||i.memoizedState===null?yI:vI,i=u(p,v),yc){w=0;do{if(yc=!1,vc=0,25<=w)throw Error(t(301));w+=1,Ht=zt=null,o.updateQueue=null,kd.current=xI,i=u(p,v)}while(yc)}if(kd.current=Td,o=zt!==null&&zt.next!==null,Io=0,Ht=zt=yt=null,_d=!1,o)throw Error(t(300));return i}function Cm(){var i=vc!==0;return vc=0,i}function ti(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?yt.memoizedState=Ht=i:Ht=Ht.next=i,Ht}function nr(){if(zt===null){var i=yt.alternate;i=i!==null?i.memoizedState:null}else i=zt.next;var o=Ht===null?yt.memoizedState:Ht.next;if(o!==null)Ht=o,zt=i;else{if(i===null)throw Error(t(310));zt=i,i={memoizedState:zt.memoizedState,baseState:zt.baseState,baseQueue:zt.baseQueue,queue:zt.queue,next:null},Ht===null?yt.memoizedState=Ht=i:Ht=Ht.next=i}return Ht}function xc(i,o){return typeof o=="function"?o(i):o}function jm(i){var o=nr(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var p=zt,v=p.baseQueue,w=u.pending;if(w!==null){if(v!==null){var j=v.next;v.next=w.next,w.next=j}p.baseQueue=v=w,u.pending=null}if(v!==null){w=v.next,p=p.baseState;var O=j=null,z=null,Y=w;do{var re=Y.lane;if((Io&re)===re)z!==null&&(z=z.next={lane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),p=Y.hasEagerState?Y.eagerState:i(p,Y.action);else{var se={lane:re,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null};z===null?(O=z=se,j=p):z=z.next=se,yt.lanes|=re,Co|=re}Y=Y.next}while(Y!==null&&Y!==w);z===null?j=p:z.next=O,br(p,o.memoizedState)||(In=!0),o.memoizedState=p,o.baseState=j,o.baseQueue=z,u.lastRenderedState=p}if(i=u.interleaved,i!==null){v=i;do w=v.lane,yt.lanes|=w,Co|=w,v=v.next;while(v!==i)}else v===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function Am(i){var o=nr(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var p=u.dispatch,v=u.pending,w=o.memoizedState;if(v!==null){u.pending=null;var j=v=v.next;do w=i(w,j.action),j=j.next;while(j!==v);br(w,o.memoizedState)||(In=!0),o.memoizedState=w,o.baseQueue===null&&(o.baseState=w),u.lastRenderedState=w}return[w,p]}function Uv(){}function Wv(i,o){var u=yt,p=nr(),v=o(),w=!br(p.memoizedState,v);if(w&&(p.memoizedState=v,In=!0),p=p.queue,Rm(Kv.bind(null,u,p,i),[i]),p.getSnapshot!==o||w||Ht!==null&&Ht.memoizedState.tag&1){if(u.flags|=2048,wc(9,Hv.bind(null,u,p,v,o),void 0,null),Kt===null)throw Error(t(349));(Io&30)!==0||$v(u,o,v)}return v}function $v(i,o,u){i.flags|=16384,i={getSnapshot:o,value:u},o=yt.updateQueue,o===null?(o={lastEffect:null,stores:null},yt.updateQueue=o,o.stores=[i]):(u=o.stores,u===null?o.stores=[i]:u.push(i))}function Hv(i,o,u,p){o.value=u,o.getSnapshot=p,qv(o)&&Gv(i)}function Kv(i,o,u){return u(function(){qv(o)&&Gv(i)})}function qv(i){var o=i.getSnapshot;i=i.value;try{var u=o();return!br(i,u)}catch{return!0}}function Gv(i){var o=Ii(i,1);o!==null&&Tr(o,i,1,-1)}function Qv(i){var o=ti();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xc,lastRenderedState:i},o.queue=i,i=i.dispatch=gI.bind(null,yt,i),[o.memoizedState,i]}function wc(i,o,u,p){return i={tag:i,create:o,destroy:u,deps:p,next:null},o=yt.updateQueue,o===null?(o={lastEffect:null,stores:null},yt.updateQueue=o,o.lastEffect=i.next=i):(u=o.lastEffect,u===null?o.lastEffect=i.next=i:(p=u.next,u.next=i,i.next=p,o.lastEffect=i)),i}function Yv(){return nr().memoizedState}function Sd(i,o,u,p){var v=ti();yt.flags|=i,v.memoizedState=wc(1|o,u,void 0,p===void 0?null:p)}function Ed(i,o,u,p){var v=nr();p=p===void 0?null:p;var w=void 0;if(zt!==null){var j=zt.memoizedState;if(w=j.destroy,p!==null&&Tm(p,j.deps)){v.memoizedState=wc(o,u,w,p);return}}yt.flags|=i,v.memoizedState=wc(1|o,u,w,p)}function Xv(i,o){return Sd(8390656,8,i,o)}function Rm(i,o){return Ed(2048,8,i,o)}function Jv(i,o){return Ed(4,2,i,o)}function Zv(i,o){return Ed(4,4,i,o)}function e1(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function t1(i,o,u){return u=u!=null?u.concat([i]):null,Ed(4,4,e1.bind(null,o,i),u)}function Pm(){}function n1(i,o){var u=nr();o=o===void 0?null:o;var p=u.memoizedState;return p!==null&&o!==null&&Tm(o,p[1])?p[0]:(u.memoizedState=[i,o],i)}function r1(i,o){var u=nr();o=o===void 0?null:o;var p=u.memoizedState;return p!==null&&o!==null&&Tm(o,p[1])?p[0]:(i=i(),u.memoizedState=[i,o],i)}function i1(i,o,u){return(Io&21)===0?(i.baseState&&(i.baseState=!1,In=!0),i.memoizedState=u):(br(u,o)||(u=Kl(),yt.lanes|=u,Co|=u,i.baseState=!0),o)}function mI(i,o){var u=Ke;Ke=u!==0&&4>u?u:4,i(!0);var p=Em.transition;Em.transition={};try{i(!1),o()}finally{Ke=u,Em.transition=p}}function s1(){return nr().memoizedState}function pI(i,o,u){var p=Ss(i);if(u={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null},o1(i))a1(o,u);else if(u=Lv(i,o,u,p),u!==null){var v=wn();Tr(u,i,p,v),l1(u,o,p)}}function gI(i,o,u){var p=Ss(i),v={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null};if(o1(i))a1(o,v);else{var w=i.alternate;if(i.lanes===0&&(w===null||w.lanes===0)&&(w=o.lastRenderedReducer,w!==null))try{var j=o.lastRenderedState,O=w(j,u);if(v.hasEagerState=!0,v.eagerState=O,br(O,j)){var z=o.interleaved;z===null?(v.next=v,xm(o)):(v.next=z.next,z.next=v),o.interleaved=v;return}}catch{}finally{}u=Lv(i,o,v,p),u!==null&&(v=wn(),Tr(u,i,p,v),l1(u,o,p))}}function o1(i){var o=i.alternate;return i===yt||o!==null&&o===yt}function a1(i,o){yc=_d=!0;var u=i.pending;u===null?o.next=o:(o.next=u.next,u.next=o),i.pending=o}function l1(i,o,u){if((u&4194240)!==0){var p=o.lanes;p&=i.pendingLanes,u|=p,o.lanes=u,Gl(i,u)}}var Td={readContext:tr,useCallback:cn,useContext:cn,useEffect:cn,useImperativeHandle:cn,useInsertionEffect:cn,useLayoutEffect:cn,useMemo:cn,useReducer:cn,useRef:cn,useState:cn,useDebugValue:cn,useDeferredValue:cn,useTransition:cn,useMutableSource:cn,useSyncExternalStore:cn,useId:cn,unstable_isNewReconciler:!1},yI={readContext:tr,useCallback:function(i,o){return ti().memoizedState=[i,o===void 0?null:o],i},useContext:tr,useEffect:Xv,useImperativeHandle:function(i,o,u){return u=u!=null?u.concat([i]):null,Sd(4194308,4,e1.bind(null,o,i),u)},useLayoutEffect:function(i,o){return Sd(4194308,4,i,o)},useInsertionEffect:function(i,o){return Sd(4,2,i,o)},useMemo:function(i,o){var u=ti();return o=o===void 0?null:o,i=i(),u.memoizedState=[i,o],i},useReducer:function(i,o,u){var p=ti();return o=u!==void 0?u(o):o,p.memoizedState=p.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},p.queue=i,i=i.dispatch=pI.bind(null,yt,i),[p.memoizedState,i]},useRef:function(i){var o=ti();return i={current:i},o.memoizedState=i},useState:Qv,useDebugValue:Pm,useDeferredValue:function(i){return ti().memoizedState=i},useTransition:function(){var i=Qv(!1),o=i[0];return i=mI.bind(null,i[1]),ti().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,u){var p=yt,v=ti();if(mt){if(u===void 0)throw Error(t(407));u=u()}else{if(u=o(),Kt===null)throw Error(t(349));(Io&30)!==0||$v(p,o,u)}v.memoizedState=u;var w={value:u,getSnapshot:o};return v.queue=w,Xv(Kv.bind(null,p,w,i),[i]),p.flags|=2048,wc(9,Hv.bind(null,p,w,u,o),void 0,null),u},useId:function(){var i=ti(),o=Kt.identifierPrefix;if(mt){var u=Ti,p=Ei;u=(p&~(1<<32-On(p)-1)).toString(32)+u,o=":"+o+"R"+u,u=vc++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=fI++,o=":"+o+"r"+u.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},vI={readContext:tr,useCallback:n1,useContext:tr,useEffect:Rm,useImperativeHandle:t1,useInsertionEffect:Jv,useLayoutEffect:Zv,useMemo:r1,useReducer:jm,useRef:Yv,useState:function(){return jm(xc)},useDebugValue:Pm,useDeferredValue:function(i){var o=nr();return i1(o,zt.memoizedState,i)},useTransition:function(){var i=jm(xc)[0],o=nr().memoizedState;return[i,o]},useMutableSource:Uv,useSyncExternalStore:Wv,useId:s1,unstable_isNewReconciler:!1},xI={readContext:tr,useCallback:n1,useContext:tr,useEffect:Rm,useImperativeHandle:t1,useInsertionEffect:Jv,useLayoutEffect:Zv,useMemo:r1,useReducer:Am,useRef:Yv,useState:function(){return Am(xc)},useDebugValue:Pm,useDeferredValue:function(i){var o=nr();return zt===null?o.memoizedState=i:i1(o,zt.memoizedState,i)},useTransition:function(){var i=Am(xc)[0],o=nr().memoizedState;return[i,o]},useMutableSource:Uv,useSyncExternalStore:Wv,useId:s1,unstable_isNewReconciler:!1};function _r(i,o){if(i&&i.defaultProps){o=le({},o),i=i.defaultProps;for(var u in i)o[u]===void 0&&(o[u]=i[u]);return o}return o}function Nm(i,o,u,p){o=i.memoizedState,u=u(p,o),u=u==null?o:le({},o,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var Id={isMounted:function(i){return(i=i._reactInternals)?xr(i)===i:!1},enqueueSetState:function(i,o,u){i=i._reactInternals;var p=wn(),v=Ss(i),w=Ci(p,v);w.payload=o,u!=null&&(w.callback=u),o=ws(i,w,v),o!==null&&(Tr(o,i,v,p),xd(o,i,v))},enqueueReplaceState:function(i,o,u){i=i._reactInternals;var p=wn(),v=Ss(i),w=Ci(p,v);w.tag=1,w.payload=o,u!=null&&(w.callback=u),o=ws(i,w,v),o!==null&&(Tr(o,i,v,p),xd(o,i,v))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var u=wn(),p=Ss(i),v=Ci(u,p);v.tag=2,o!=null&&(v.callback=o),o=ws(i,v,p),o!==null&&(Tr(o,i,p,u),xd(o,i,p))}};function c1(i,o,u,p,v,w,j){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(p,w,j):o.prototype&&o.prototype.isPureReactComponent?!oc(u,p)||!oc(v,w):!0}function u1(i,o,u){var p=!1,v=ys,w=o.contextType;return typeof w=="object"&&w!==null?w=tr(w):(v=Tn(o)?ko:ln.current,p=o.contextTypes,w=(p=p!=null)?Ca(i,v):ys),o=new o(u,w),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Id,i.stateNode=o,o._reactInternals=i,p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=v,i.__reactInternalMemoizedMaskedChildContext=w),o}function d1(i,o,u,p){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,p),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,p),o.state!==i&&Id.enqueueReplaceState(o,o.state,null)}function Mm(i,o,u,p){var v=i.stateNode;v.props=u,v.state=i.memoizedState,v.refs={},wm(i);var w=o.contextType;typeof w=="object"&&w!==null?v.context=tr(w):(w=Tn(o)?ko:ln.current,v.context=Ca(i,w)),v.state=i.memoizedState,w=o.getDerivedStateFromProps,typeof w=="function"&&(Nm(i,o,w,u),v.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(o=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),o!==v.state&&Id.enqueueReplaceState(v,v.state,null),wd(i,u,v,p),v.state=i.memoizedState),typeof v.componentDidMount=="function"&&(i.flags|=4194308)}function Va(i,o){try{var u="",p=o;do u+=Le(p),p=p.return;while(p);var v=u}catch(w){v=`
Error generating stack: `+w.message+`
`+w.stack}return{value:i,source:o,stack:v,digest:null}}function Dm(i,o,u){return{value:i,source:null,stack:u??null,digest:o??null}}function Vm(i,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var wI=typeof WeakMap=="function"?WeakMap:Map;function h1(i,o,u){u=Ci(-1,u),u.tag=3,u.payload={element:null};var p=o.value;return u.callback=function(){Md||(Md=!0,Xm=p),Vm(i,o)},u}function f1(i,o,u){u=Ci(-1,u),u.tag=3;var p=i.type.getDerivedStateFromError;if(typeof p=="function"){var v=o.value;u.payload=function(){return p(v)},u.callback=function(){Vm(i,o)}}var w=i.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(u.callback=function(){Vm(i,o),typeof p!="function"&&(ks===null?ks=new Set([this]):ks.add(this));var j=o.stack;this.componentDidCatch(o.value,{componentStack:j!==null?j:""})}),u}function m1(i,o,u){var p=i.pingCache;if(p===null){p=i.pingCache=new wI;var v=new Set;p.set(o,v)}else v=p.get(o),v===void 0&&(v=new Set,p.set(o,v));v.has(u)||(v.add(u),i=MI.bind(null,i,o,u),o.then(i,i))}function p1(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function g1(i,o,u,p,v){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=Ci(-1,1),o.tag=2,ws(u,o,1))),u.lanes|=1),i):(i.flags|=65536,i.lanes=v,i)}var bI=U.ReactCurrentOwner,In=!1;function xn(i,o,u,p){o.child=i===null?Vv(o,null,u,p):Pa(o,i.child,u,p)}function y1(i,o,u,p,v){u=u.render;var w=o.ref;return Ma(o,v),p=Im(i,o,u,p,w,v),u=Cm(),i!==null&&!In?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~v,ji(i,o,v)):(mt&&u&&um(o),o.flags|=1,xn(i,o,p,v),o.child)}function v1(i,o,u,p,v){if(i===null){var w=u.type;return typeof w=="function"&&!ip(w)&&w.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=w,x1(i,o,w,p,v)):(i=zd(u.type,null,p,o,o.mode,v),i.ref=o.ref,i.return=o,o.child=i)}if(w=i.child,(i.lanes&v)===0){var j=w.memoizedProps;if(u=u.compare,u=u!==null?u:oc,u(j,p)&&i.ref===o.ref)return ji(i,o,v)}return o.flags|=1,i=Ts(w,p),i.ref=o.ref,i.return=o,o.child=i}function x1(i,o,u,p,v){if(i!==null){var w=i.memoizedProps;if(oc(w,p)&&i.ref===o.ref)if(In=!1,o.pendingProps=p=w,(i.lanes&v)!==0)(i.flags&131072)!==0&&(In=!0);else return o.lanes=i.lanes,ji(i,o,v)}return Lm(i,o,u,p,v)}function w1(i,o,u){var p=o.pendingProps,v=p.children,w=i!==null?i.memoizedState:null;if(p.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},ot(Oa,Hn),Hn|=u;else{if((u&1073741824)===0)return i=w!==null?w.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,ot(Oa,Hn),Hn|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=w!==null?w.baseLanes:u,ot(Oa,Hn),Hn|=p}else w!==null?(p=w.baseLanes|u,o.memoizedState=null):p=u,ot(Oa,Hn),Hn|=p;return xn(i,o,v,u),o.child}function b1(i,o){var u=o.ref;(i===null&&u!==null||i!==null&&i.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function Lm(i,o,u,p,v){var w=Tn(u)?ko:ln.current;return w=Ca(o,w),Ma(o,v),u=Im(i,o,u,p,w,v),p=Cm(),i!==null&&!In?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~v,ji(i,o,v)):(mt&&p&&um(o),o.flags|=1,xn(i,o,u,v),o.child)}function k1(i,o,u,p,v){if(Tn(u)){var w=!0;dd(o)}else w=!1;if(Ma(o,v),o.stateNode===null)jd(i,o),u1(o,u,p),Mm(o,u,p,v),p=!0;else if(i===null){var j=o.stateNode,O=o.memoizedProps;j.props=O;var z=j.context,Y=u.contextType;typeof Y=="object"&&Y!==null?Y=tr(Y):(Y=Tn(u)?ko:ln.current,Y=Ca(o,Y));var re=u.getDerivedStateFromProps,se=typeof re=="function"||typeof j.getSnapshotBeforeUpdate=="function";se||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(O!==p||z!==Y)&&d1(o,j,p,Y),xs=!1;var ne=o.memoizedState;j.state=ne,wd(o,p,j,v),z=o.memoizedState,O!==p||ne!==z||En.current||xs?(typeof re=="function"&&(Nm(o,u,re,p),z=o.memoizedState),(O=xs||c1(o,u,O,p,ne,z,Y))?(se||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount()),typeof j.componentDidMount=="function"&&(o.flags|=4194308)):(typeof j.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=p,o.memoizedState=z),j.props=p,j.state=z,j.context=Y,p=O):(typeof j.componentDidMount=="function"&&(o.flags|=4194308),p=!1)}else{j=o.stateNode,Ov(i,o),O=o.memoizedProps,Y=o.type===o.elementType?O:_r(o.type,O),j.props=Y,se=o.pendingProps,ne=j.context,z=u.contextType,typeof z=="object"&&z!==null?z=tr(z):(z=Tn(u)?ko:ln.current,z=Ca(o,z));var fe=u.getDerivedStateFromProps;(re=typeof fe=="function"||typeof j.getSnapshotBeforeUpdate=="function")||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(O!==se||ne!==z)&&d1(o,j,p,z),xs=!1,ne=o.memoizedState,j.state=ne,wd(o,p,j,v);var ve=o.memoizedState;O!==se||ne!==ve||En.current||xs?(typeof fe=="function"&&(Nm(o,u,fe,p),ve=o.memoizedState),(Y=xs||c1(o,u,Y,p,ne,ve,z)||!1)?(re||typeof j.UNSAFE_componentWillUpdate!="function"&&typeof j.componentWillUpdate!="function"||(typeof j.componentWillUpdate=="function"&&j.componentWillUpdate(p,ve,z),typeof j.UNSAFE_componentWillUpdate=="function"&&j.UNSAFE_componentWillUpdate(p,ve,z)),typeof j.componentDidUpdate=="function"&&(o.flags|=4),typeof j.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof j.componentDidUpdate!="function"||O===i.memoizedProps&&ne===i.memoizedState||(o.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||O===i.memoizedProps&&ne===i.memoizedState||(o.flags|=1024),o.memoizedProps=p,o.memoizedState=ve),j.props=p,j.state=ve,j.context=z,p=Y):(typeof j.componentDidUpdate!="function"||O===i.memoizedProps&&ne===i.memoizedState||(o.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||O===i.memoizedProps&&ne===i.memoizedState||(o.flags|=1024),p=!1)}return Om(i,o,u,p,w,v)}function Om(i,o,u,p,v,w){b1(i,o);var j=(o.flags&128)!==0;if(!p&&!j)return v&&Iv(o,u,!1),ji(i,o,w);p=o.stateNode,bI.current=o;var O=j&&typeof u.getDerivedStateFromError!="function"?null:p.render();return o.flags|=1,i!==null&&j?(o.child=Pa(o,i.child,null,w),o.child=Pa(o,null,O,w)):xn(i,o,O,w),o.memoizedState=p.state,v&&Iv(o,u,!0),o.child}function _1(i){var o=i.stateNode;o.pendingContext?Ev(i,o.pendingContext,o.pendingContext!==o.context):o.context&&Ev(i,o.context,!1),bm(i,o.containerInfo)}function S1(i,o,u,p,v){return Ra(),mm(v),o.flags|=256,xn(i,o,u,p),o.child}var Bm={dehydrated:null,treeContext:null,retryLane:0};function zm(i){return{baseLanes:i,cachePool:null,transitions:null}}function E1(i,o,u){var p=o.pendingProps,v=gt.current,w=!1,j=(o.flags&128)!==0,O;if((O=j)||(O=i!==null&&i.memoizedState===null?!1:(v&2)!==0),O?(w=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(v|=1),ot(gt,v&1),i===null)return fm(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(j=p.children,i=p.fallback,w?(p=o.mode,w=o.child,j={mode:"hidden",children:j},(p&1)===0&&w!==null?(w.childLanes=0,w.pendingProps=j):w=Fd(j,p,0,null),i=Po(i,p,u,null),w.return=o,i.return=o,w.sibling=i,o.child=w,o.child.memoizedState=zm(u),o.memoizedState=Bm,i):Fm(o,j));if(v=i.memoizedState,v!==null&&(O=v.dehydrated,O!==null))return kI(i,o,j,p,O,v,u);if(w){w=p.fallback,j=o.mode,v=i.child,O=v.sibling;var z={mode:"hidden",children:p.children};return(j&1)===0&&o.child!==v?(p=o.child,p.childLanes=0,p.pendingProps=z,o.deletions=null):(p=Ts(v,z),p.subtreeFlags=v.subtreeFlags&14680064),O!==null?w=Ts(O,w):(w=Po(w,j,u,null),w.flags|=2),w.return=o,p.return=o,p.sibling=w,o.child=p,p=w,w=o.child,j=i.child.memoizedState,j=j===null?zm(u):{baseLanes:j.baseLanes|u,cachePool:null,transitions:j.transitions},w.memoizedState=j,w.childLanes=i.childLanes&~u,o.memoizedState=Bm,p}return w=i.child,i=w.sibling,p=Ts(w,{mode:"visible",children:p.children}),(o.mode&1)===0&&(p.lanes=u),p.return=o,p.sibling=null,i!==null&&(u=o.deletions,u===null?(o.deletions=[i],o.flags|=16):u.push(i)),o.child=p,o.memoizedState=null,p}function Fm(i,o){return o=Fd({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function Cd(i,o,u,p){return p!==null&&mm(p),Pa(o,i.child,null,u),i=Fm(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function kI(i,o,u,p,v,w,j){if(u)return o.flags&256?(o.flags&=-257,p=Dm(Error(t(422))),Cd(i,o,j,p)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(w=p.fallback,v=o.mode,p=Fd({mode:"visible",children:p.children},v,0,null),w=Po(w,v,j,null),w.flags|=2,p.return=o,w.return=o,p.sibling=w,o.child=p,(o.mode&1)!==0&&Pa(o,i.child,null,j),o.child.memoizedState=zm(j),o.memoizedState=Bm,w);if((o.mode&1)===0)return Cd(i,o,j,null);if(v.data==="$!"){if(p=v.nextSibling&&v.nextSibling.dataset,p)var O=p.dgst;return p=O,w=Error(t(419)),p=Dm(w,p,void 0),Cd(i,o,j,p)}if(O=(j&i.childLanes)!==0,In||O){if(p=Kt,p!==null){switch(j&-j){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=(v&(p.suspendedLanes|j))!==0?0:v,v!==0&&v!==w.retryLane&&(w.retryLane=v,Ii(i,v),Tr(p,i,v,-1))}return rp(),p=Dm(Error(t(421))),Cd(i,o,j,p)}return v.data==="$?"?(o.flags|=128,o.child=i.child,o=DI.bind(null,i),v._reactRetry=o,null):(i=w.treeContext,$n=ps(v.nextSibling),Wn=o,mt=!0,kr=null,i!==null&&(Zn[er++]=Ei,Zn[er++]=Ti,Zn[er++]=_o,Ei=i.id,Ti=i.overflow,_o=o),o=Fm(o,p.children),o.flags|=4096,o)}function T1(i,o,u){i.lanes|=o;var p=i.alternate;p!==null&&(p.lanes|=o),vm(i.return,o,u)}function Um(i,o,u,p,v){var w=i.memoizedState;w===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:p,tail:u,tailMode:v}:(w.isBackwards=o,w.rendering=null,w.renderingStartTime=0,w.last=p,w.tail=u,w.tailMode=v)}function I1(i,o,u){var p=o.pendingProps,v=p.revealOrder,w=p.tail;if(xn(i,o,p.children,u),p=gt.current,(p&2)!==0)p=p&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&T1(i,u,o);else if(i.tag===19)T1(i,u,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}p&=1}if(ot(gt,p),(o.mode&1)===0)o.memoizedState=null;else switch(v){case"forwards":for(u=o.child,v=null;u!==null;)i=u.alternate,i!==null&&bd(i)===null&&(v=u),u=u.sibling;u=v,u===null?(v=o.child,o.child=null):(v=u.sibling,u.sibling=null),Um(o,!1,v,u,w);break;case"backwards":for(u=null,v=o.child,o.child=null;v!==null;){if(i=v.alternate,i!==null&&bd(i)===null){o.child=v;break}i=v.sibling,v.sibling=u,u=v,v=i}Um(o,!0,u,null,w);break;case"together":Um(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function jd(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function ji(i,o,u){if(i!==null&&(o.dependencies=i.dependencies),Co|=o.lanes,(u&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,u=Ts(i,i.pendingProps),o.child=u,u.return=o;i.sibling!==null;)i=i.sibling,u=u.sibling=Ts(i,i.pendingProps),u.return=o;u.sibling=null}return o.child}function _I(i,o,u){switch(o.tag){case 3:_1(o),Ra();break;case 5:Fv(o);break;case 1:Tn(o.type)&&dd(o);break;case 4:bm(o,o.stateNode.containerInfo);break;case 10:var p=o.type._context,v=o.memoizedProps.value;ot(yd,p._currentValue),p._currentValue=v;break;case 13:if(p=o.memoizedState,p!==null)return p.dehydrated!==null?(ot(gt,gt.current&1),o.flags|=128,null):(u&o.child.childLanes)!==0?E1(i,o,u):(ot(gt,gt.current&1),i=ji(i,o,u),i!==null?i.sibling:null);ot(gt,gt.current&1);break;case 19:if(p=(u&o.childLanes)!==0,(i.flags&128)!==0){if(p)return I1(i,o,u);o.flags|=128}if(v=o.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),ot(gt,gt.current),p)break;return null;case 22:case 23:return o.lanes=0,w1(i,o,u)}return ji(i,o,u)}var C1,Wm,j1,A1;C1=function(i,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)i.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},Wm=function(){},j1=function(i,o,u,p){var v=i.memoizedProps;if(v!==p){i=o.stateNode,To(ei.current);var w=null;switch(u){case"input":v=Oe(i,v),p=Oe(i,p),w=[];break;case"select":v=le({},v,{value:void 0}),p=le({},p,{value:void 0}),w=[];break;case"textarea":v=Dl(i,v),p=Dl(i,p),w=[];break;default:typeof v.onClick!="function"&&typeof p.onClick=="function"&&(i.onclick=ld)}vr(u,p);var j;u=null;for(Y in v)if(!p.hasOwnProperty(Y)&&v.hasOwnProperty(Y)&&v[Y]!=null)if(Y==="style"){var O=v[Y];for(j in O)O.hasOwnProperty(j)&&(u||(u={}),u[j]="")}else Y!=="dangerouslySetInnerHTML"&&Y!=="children"&&Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&Y!=="autoFocus"&&(s.hasOwnProperty(Y)?w||(w=[]):(w=w||[]).push(Y,null));for(Y in p){var z=p[Y];if(O=v!=null?v[Y]:void 0,p.hasOwnProperty(Y)&&z!==O&&(z!=null||O!=null))if(Y==="style")if(O){for(j in O)!O.hasOwnProperty(j)||z&&z.hasOwnProperty(j)||(u||(u={}),u[j]="");for(j in z)z.hasOwnProperty(j)&&O[j]!==z[j]&&(u||(u={}),u[j]=z[j])}else u||(w||(w=[]),w.push(Y,u)),u=z;else Y==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,O=O?O.__html:void 0,z!=null&&O!==z&&(w=w||[]).push(Y,z)):Y==="children"?typeof z!="string"&&typeof z!="number"||(w=w||[]).push(Y,""+z):Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&(s.hasOwnProperty(Y)?(z!=null&&Y==="onScroll"&&ct("scroll",i),w||O===z||(w=[])):(w=w||[]).push(Y,z))}u&&(w=w||[]).push("style",u);var Y=w;(o.updateQueue=Y)&&(o.flags|=4)}},A1=function(i,o,u,p){u!==p&&(o.flags|=4)};function bc(i,o){if(!mt)switch(i.tailMode){case"hidden":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:p.sibling=null}}function un(i){var o=i.alternate!==null&&i.alternate.child===i.child,u=0,p=0;if(o)for(var v=i.child;v!==null;)u|=v.lanes|v.childLanes,p|=v.subtreeFlags&14680064,p|=v.flags&14680064,v.return=i,v=v.sibling;else for(v=i.child;v!==null;)u|=v.lanes|v.childLanes,p|=v.subtreeFlags,p|=v.flags,v.return=i,v=v.sibling;return i.subtreeFlags|=p,i.childLanes=u,o}function SI(i,o,u){var p=o.pendingProps;switch(dm(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return un(o),null;case 1:return Tn(o.type)&&ud(),un(o),null;case 3:return p=o.stateNode,Da(),ut(En),ut(ln),Sm(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(i===null||i.child===null)&&(pd(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,kr!==null&&(ep(kr),kr=null))),Wm(i,o),un(o),null;case 5:km(o);var v=To(gc.current);if(u=o.type,i!==null&&o.stateNode!=null)j1(i,o,u,p,v),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!p){if(o.stateNode===null)throw Error(t(166));return un(o),null}if(i=To(ei.current),pd(o)){p=o.stateNode,u=o.type;var w=o.memoizedProps;switch(p[Zr]=o,p[dc]=w,i=(o.mode&1)!==0,u){case"dialog":ct("cancel",p),ct("close",p);break;case"iframe":case"object":case"embed":ct("load",p);break;case"video":case"audio":for(v=0;v<lc.length;v++)ct(lc[v],p);break;case"source":ct("error",p);break;case"img":case"image":case"link":ct("error",p),ct("load",p);break;case"details":ct("toggle",p);break;case"input":Ye(p,w),ct("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!w.multiple},ct("invalid",p);break;case"textarea":Vl(p,w),ct("invalid",p)}vr(u,w),v=null;for(var j in w)if(w.hasOwnProperty(j)){var O=w[j];j==="children"?typeof O=="string"?p.textContent!==O&&(w.suppressHydrationWarning!==!0&&ad(p.textContent,O,i),v=["children",O]):typeof O=="number"&&p.textContent!==""+O&&(w.suppressHydrationWarning!==!0&&ad(p.textContent,O,i),v=["children",""+O]):s.hasOwnProperty(j)&&O!=null&&j==="onScroll"&&ct("scroll",p)}switch(u){case"input":Ji(p),so(p,w,!0);break;case"textarea":Ji(p),Zi(p);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(p.onclick=ld)}p=v,o.updateQueue=p,p!==null&&(o.flags|=4)}else{j=v.nodeType===9?v:v.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Ll(u)),i==="http://www.w3.org/1999/xhtml"?u==="script"?(i=j.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof p.is=="string"?i=j.createElement(u,{is:p.is}):(i=j.createElement(u),u==="select"&&(j=i,p.multiple?j.multiple=!0:p.size&&(j.size=p.size))):i=j.createElementNS(i,u),i[Zr]=o,i[dc]=p,C1(i,o,!1,!1),o.stateNode=i;e:{switch(j=ia(u,p),u){case"dialog":ct("cancel",i),ct("close",i),v=p;break;case"iframe":case"object":case"embed":ct("load",i),v=p;break;case"video":case"audio":for(v=0;v<lc.length;v++)ct(lc[v],i);v=p;break;case"source":ct("error",i),v=p;break;case"img":case"image":case"link":ct("error",i),ct("load",i),v=p;break;case"details":ct("toggle",i),v=p;break;case"input":Ye(i,p),v=Oe(i,p),ct("invalid",i);break;case"option":v=p;break;case"select":i._wrapperState={wasMultiple:!!p.multiple},v=le({},p,{value:void 0}),ct("invalid",i);break;case"textarea":Vl(i,p),v=Dl(i,p),ct("invalid",i);break;default:v=p}vr(u,v),O=v;for(w in O)if(O.hasOwnProperty(w)){var z=O[w];w==="style"?ra(i,z):w==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,z!=null&&Du(i,z)):w==="children"?typeof z=="string"?(u!=="textarea"||z!=="")&&oo(i,z):typeof z=="number"&&oo(i,""+z):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(s.hasOwnProperty(w)?z!=null&&w==="onScroll"&&ct("scroll",i):z!=null&&M(i,w,z,j))}switch(u){case"input":Ji(i),so(i,p,!1);break;case"textarea":Ji(i),Zi(i);break;case"option":p.value!=null&&i.setAttribute("value",""+He(p.value));break;case"select":i.multiple=!!p.multiple,w=p.value,w!=null?yr(i,!!p.multiple,w,!1):p.defaultValue!=null&&yr(i,!!p.multiple,p.defaultValue,!0);break;default:typeof v.onClick=="function"&&(i.onclick=ld)}switch(u){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return un(o),null;case 6:if(i&&o.stateNode!=null)A1(i,o,i.memoizedProps,p);else{if(typeof p!="string"&&o.stateNode===null)throw Error(t(166));if(u=To(gc.current),To(ei.current),pd(o)){if(p=o.stateNode,u=o.memoizedProps,p[Zr]=o,(w=p.nodeValue!==u)&&(i=Wn,i!==null))switch(i.tag){case 3:ad(p.nodeValue,u,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&ad(p.nodeValue,u,(i.mode&1)!==0)}w&&(o.flags|=4)}else p=(u.nodeType===9?u:u.ownerDocument).createTextNode(p),p[Zr]=o,o.stateNode=p}return un(o),null;case 13:if(ut(gt),p=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(mt&&$n!==null&&(o.mode&1)!==0&&(o.flags&128)===0)Nv(),Ra(),o.flags|=98560,w=!1;else if(w=pd(o),p!==null&&p.dehydrated!==null){if(i===null){if(!w)throw Error(t(318));if(w=o.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(t(317));w[Zr]=o}else Ra(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;un(o),w=!1}else kr!==null&&(ep(kr),kr=null),w=!0;if(!w)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=u,o):(p=p!==null,p!==(i!==null&&i.memoizedState!==null)&&p&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(gt.current&1)!==0?Ft===0&&(Ft=3):rp())),o.updateQueue!==null&&(o.flags|=4),un(o),null);case 4:return Da(),Wm(i,o),i===null&&cc(o.stateNode.containerInfo),un(o),null;case 10:return ym(o.type._context),un(o),null;case 17:return Tn(o.type)&&ud(),un(o),null;case 19:if(ut(gt),w=o.memoizedState,w===null)return un(o),null;if(p=(o.flags&128)!==0,j=w.rendering,j===null)if(p)bc(w,!1);else{if(Ft!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(j=bd(i),j!==null){for(o.flags|=128,bc(w,!1),p=j.updateQueue,p!==null&&(o.updateQueue=p,o.flags|=4),o.subtreeFlags=0,p=u,u=o.child;u!==null;)w=u,i=p,w.flags&=14680066,j=w.alternate,j===null?(w.childLanes=0,w.lanes=i,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=j.childLanes,w.lanes=j.lanes,w.child=j.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=j.memoizedProps,w.memoizedState=j.memoizedState,w.updateQueue=j.updateQueue,w.type=j.type,i=j.dependencies,w.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),u=u.sibling;return ot(gt,gt.current&1|2),o.child}i=i.sibling}w.tail!==null&&lt()>Ba&&(o.flags|=128,p=!0,bc(w,!1),o.lanes=4194304)}else{if(!p)if(i=bd(j),i!==null){if(o.flags|=128,p=!0,u=i.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),bc(w,!0),w.tail===null&&w.tailMode==="hidden"&&!j.alternate&&!mt)return un(o),null}else 2*lt()-w.renderingStartTime>Ba&&u!==1073741824&&(o.flags|=128,p=!0,bc(w,!1),o.lanes=4194304);w.isBackwards?(j.sibling=o.child,o.child=j):(u=w.last,u!==null?u.sibling=j:o.child=j,w.last=j)}return w.tail!==null?(o=w.tail,w.rendering=o,w.tail=o.sibling,w.renderingStartTime=lt(),o.sibling=null,u=gt.current,ot(gt,p?u&1|2:u&1),o):(un(o),null);case 22:case 23:return np(),p=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==p&&(o.flags|=8192),p&&(o.mode&1)!==0?(Hn&1073741824)!==0&&(un(o),o.subtreeFlags&6&&(o.flags|=8192)):un(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function EI(i,o){switch(dm(o),o.tag){case 1:return Tn(o.type)&&ud(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Da(),ut(En),ut(ln),Sm(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return km(o),null;case 13:if(ut(gt),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));Ra()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return ut(gt),null;case 4:return Da(),null;case 10:return ym(o.type._context),null;case 22:case 23:return np(),null;case 24:return null;default:return null}}var Ad=!1,dn=!1,TI=typeof WeakSet=="function"?WeakSet:Set,ye=null;function La(i,o){var u=i.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(p){bt(i,o,p)}else u.current=null}function $m(i,o,u){try{u()}catch(p){bt(i,o,p)}}var R1=!1;function II(i,o){if(nm=wi,i=cv(),Gf(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var p=u.getSelection&&u.getSelection();if(p&&p.rangeCount!==0){u=p.anchorNode;var v=p.anchorOffset,w=p.focusNode;p=p.focusOffset;try{u.nodeType,w.nodeType}catch{u=null;break e}var j=0,O=-1,z=-1,Y=0,re=0,se=i,ne=null;t:for(;;){for(var fe;se!==u||v!==0&&se.nodeType!==3||(O=j+v),se!==w||p!==0&&se.nodeType!==3||(z=j+p),se.nodeType===3&&(j+=se.nodeValue.length),(fe=se.firstChild)!==null;)ne=se,se=fe;for(;;){if(se===i)break t;if(ne===u&&++Y===v&&(O=j),ne===w&&++re===p&&(z=j),(fe=se.nextSibling)!==null)break;se=ne,ne=se.parentNode}se=fe}u=O===-1||z===-1?null:{start:O,end:z}}else u=null}u=u||{start:0,end:0}}else u=null;for(rm={focusedElem:i,selectionRange:u},wi=!1,ye=o;ye!==null;)if(o=ye,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,ye=i;else for(;ye!==null;){o=ye;try{var ve=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(ve!==null){var xe=ve.memoizedProps,Ct=ve.memoizedState,K=o.stateNode,W=K.getSnapshotBeforeUpdate(o.elementType===o.type?xe:_r(o.type,xe),Ct);K.__reactInternalSnapshotBeforeUpdate=W}break;case 3:var Q=o.stateNode.containerInfo;Q.nodeType===1?Q.textContent="":Q.nodeType===9&&Q.documentElement&&Q.removeChild(Q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(oe){bt(o,o.return,oe)}if(i=o.sibling,i!==null){i.return=o.return,ye=i;break}ye=o.return}return ve=R1,R1=!1,ve}function kc(i,o,u){var p=o.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var v=p=p.next;do{if((v.tag&i)===i){var w=v.destroy;v.destroy=void 0,w!==void 0&&$m(o,u,w)}v=v.next}while(v!==p)}}function Rd(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&i)===i){var p=u.create;u.destroy=p()}u=u.next}while(u!==o)}}function Hm(i){var o=i.ref;if(o!==null){var u=i.stateNode;switch(i.tag){case 5:i=u;break;default:i=u}typeof o=="function"?o(i):o.current=i}}function P1(i){var o=i.alternate;o!==null&&(i.alternate=null,P1(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[Zr],delete o[dc],delete o[am],delete o[cI],delete o[uI])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function N1(i){return i.tag===5||i.tag===3||i.tag===4}function M1(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||N1(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Km(i,o,u){var p=i.tag;if(p===5||p===6)i=i.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(i,o):u.insertBefore(i,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(i,u)):(o=u,o.appendChild(i)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=ld));else if(p!==4&&(i=i.child,i!==null))for(Km(i,o,u),i=i.sibling;i!==null;)Km(i,o,u),i=i.sibling}function qm(i,o,u){var p=i.tag;if(p===5||p===6)i=i.stateNode,o?u.insertBefore(i,o):u.appendChild(i);else if(p!==4&&(i=i.child,i!==null))for(qm(i,o,u),i=i.sibling;i!==null;)qm(i,o,u),i=i.sibling}var Zt=null,Sr=!1;function bs(i,o,u){for(u=u.child;u!==null;)D1(i,o,u),u=u.sibling}function D1(i,o,u){if(Ln&&typeof Ln.onCommitFiberUnmount=="function")try{Ln.onCommitFiberUnmount(ho,u)}catch{}switch(u.tag){case 5:dn||La(u,o);case 6:var p=Zt,v=Sr;Zt=null,bs(i,o,u),Zt=p,Sr=v,Zt!==null&&(Sr?(i=Zt,u=u.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)):Zt.removeChild(u.stateNode));break;case 18:Zt!==null&&(Sr?(i=Zt,u=u.stateNode,i.nodeType===8?om(i.parentNode,u):i.nodeType===1&&om(i,u),ds(i)):om(Zt,u.stateNode));break;case 4:p=Zt,v=Sr,Zt=u.stateNode.containerInfo,Sr=!0,bs(i,o,u),Zt=p,Sr=v;break;case 0:case 11:case 14:case 15:if(!dn&&(p=u.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){v=p=p.next;do{var w=v,j=w.destroy;w=w.tag,j!==void 0&&((w&2)!==0||(w&4)!==0)&&$m(u,o,j),v=v.next}while(v!==p)}bs(i,o,u);break;case 1:if(!dn&&(La(u,o),p=u.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=u.memoizedProps,p.state=u.memoizedState,p.componentWillUnmount()}catch(O){bt(u,o,O)}bs(i,o,u);break;case 21:bs(i,o,u);break;case 22:u.mode&1?(dn=(p=dn)||u.memoizedState!==null,bs(i,o,u),dn=p):bs(i,o,u);break;default:bs(i,o,u)}}function V1(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var u=i.stateNode;u===null&&(u=i.stateNode=new TI),o.forEach(function(p){var v=VI.bind(null,i,p);u.has(p)||(u.add(p),p.then(v,v))})}}function Er(i,o){var u=o.deletions;if(u!==null)for(var p=0;p<u.length;p++){var v=u[p];try{var w=i,j=o,O=j;e:for(;O!==null;){switch(O.tag){case 5:Zt=O.stateNode,Sr=!1;break e;case 3:Zt=O.stateNode.containerInfo,Sr=!0;break e;case 4:Zt=O.stateNode.containerInfo,Sr=!0;break e}O=O.return}if(Zt===null)throw Error(t(160));D1(w,j,v),Zt=null,Sr=!1;var z=v.alternate;z!==null&&(z.return=null),v.return=null}catch(Y){bt(v,o,Y)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)L1(o,i),o=o.sibling}function L1(i,o){var u=i.alternate,p=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Er(o,i),ni(i),p&4){try{kc(3,i,i.return),Rd(3,i)}catch(xe){bt(i,i.return,xe)}try{kc(5,i,i.return)}catch(xe){bt(i,i.return,xe)}}break;case 1:Er(o,i),ni(i),p&512&&u!==null&&La(u,u.return);break;case 5:if(Er(o,i),ni(i),p&512&&u!==null&&La(u,u.return),i.flags&32){var v=i.stateNode;try{oo(v,"")}catch(xe){bt(i,i.return,xe)}}if(p&4&&(v=i.stateNode,v!=null)){var w=i.memoizedProps,j=u!==null?u.memoizedProps:w,O=i.type,z=i.updateQueue;if(i.updateQueue=null,z!==null)try{O==="input"&&w.type==="radio"&&w.name!=null&&Et(v,w),ia(O,j);var Y=ia(O,w);for(j=0;j<z.length;j+=2){var re=z[j],se=z[j+1];re==="style"?ra(v,se):re==="dangerouslySetInnerHTML"?Du(v,se):re==="children"?oo(v,se):M(v,re,se,Y)}switch(O){case"input":vn(v,w);break;case"textarea":Mu(v,w);break;case"select":var ne=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!w.multiple;var fe=w.value;fe!=null?yr(v,!!w.multiple,fe,!1):ne!==!!w.multiple&&(w.defaultValue!=null?yr(v,!!w.multiple,w.defaultValue,!0):yr(v,!!w.multiple,w.multiple?[]:"",!1))}v[dc]=w}catch(xe){bt(i,i.return,xe)}}break;case 6:if(Er(o,i),ni(i),p&4){if(i.stateNode===null)throw Error(t(162));v=i.stateNode,w=i.memoizedProps;try{v.nodeValue=w}catch(xe){bt(i,i.return,xe)}}break;case 3:if(Er(o,i),ni(i),p&4&&u!==null&&u.memoizedState.isDehydrated)try{ds(o.containerInfo)}catch(xe){bt(i,i.return,xe)}break;case 4:Er(o,i),ni(i);break;case 13:Er(o,i),ni(i),v=i.child,v.flags&8192&&(w=v.memoizedState!==null,v.stateNode.isHidden=w,!w||v.alternate!==null&&v.alternate.memoizedState!==null||(Ym=lt())),p&4&&V1(i);break;case 22:if(re=u!==null&&u.memoizedState!==null,i.mode&1?(dn=(Y=dn)||re,Er(o,i),dn=Y):Er(o,i),ni(i),p&8192){if(Y=i.memoizedState!==null,(i.stateNode.isHidden=Y)&&!re&&(i.mode&1)!==0)for(ye=i,re=i.child;re!==null;){for(se=ye=re;ye!==null;){switch(ne=ye,fe=ne.child,ne.tag){case 0:case 11:case 14:case 15:kc(4,ne,ne.return);break;case 1:La(ne,ne.return);var ve=ne.stateNode;if(typeof ve.componentWillUnmount=="function"){p=ne,u=ne.return;try{o=p,ve.props=o.memoizedProps,ve.state=o.memoizedState,ve.componentWillUnmount()}catch(xe){bt(p,u,xe)}}break;case 5:La(ne,ne.return);break;case 22:if(ne.memoizedState!==null){z1(se);continue}}fe!==null?(fe.return=ne,ye=fe):z1(se)}re=re.sibling}e:for(re=null,se=i;;){if(se.tag===5){if(re===null){re=se;try{v=se.stateNode,Y?(w=v.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(O=se.stateNode,z=se.memoizedProps.style,j=z!=null&&z.hasOwnProperty("display")?z.display:null,O.style.display=ns("display",j))}catch(xe){bt(i,i.return,xe)}}}else if(se.tag===6){if(re===null)try{se.stateNode.nodeValue=Y?"":se.memoizedProps}catch(xe){bt(i,i.return,xe)}}else if((se.tag!==22&&se.tag!==23||se.memoizedState===null||se===i)&&se.child!==null){se.child.return=se,se=se.child;continue}if(se===i)break e;for(;se.sibling===null;){if(se.return===null||se.return===i)break e;re===se&&(re=null),se=se.return}re===se&&(re=null),se.sibling.return=se.return,se=se.sibling}}break;case 19:Er(o,i),ni(i),p&4&&V1(i);break;case 21:break;default:Er(o,i),ni(i)}}function ni(i){var o=i.flags;if(o&2){try{e:{for(var u=i.return;u!==null;){if(N1(u)){var p=u;break e}u=u.return}throw Error(t(160))}switch(p.tag){case 5:var v=p.stateNode;p.flags&32&&(oo(v,""),p.flags&=-33);var w=M1(i);qm(i,w,v);break;case 3:case 4:var j=p.stateNode.containerInfo,O=M1(i);Km(i,O,j);break;default:throw Error(t(161))}}catch(z){bt(i,i.return,z)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function CI(i,o,u){ye=i,O1(i)}function O1(i,o,u){for(var p=(i.mode&1)!==0;ye!==null;){var v=ye,w=v.child;if(v.tag===22&&p){var j=v.memoizedState!==null||Ad;if(!j){var O=v.alternate,z=O!==null&&O.memoizedState!==null||dn;O=Ad;var Y=dn;if(Ad=j,(dn=z)&&!Y)for(ye=v;ye!==null;)j=ye,z=j.child,j.tag===22&&j.memoizedState!==null?F1(v):z!==null?(z.return=j,ye=z):F1(v);for(;w!==null;)ye=w,O1(w),w=w.sibling;ye=v,Ad=O,dn=Y}B1(i)}else(v.subtreeFlags&8772)!==0&&w!==null?(w.return=v,ye=w):B1(i)}}function B1(i){for(;ye!==null;){var o=ye;if((o.flags&8772)!==0){var u=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:dn||Rd(5,o);break;case 1:var p=o.stateNode;if(o.flags&4&&!dn)if(u===null)p.componentDidMount();else{var v=o.elementType===o.type?u.memoizedProps:_r(o.type,u.memoizedProps);p.componentDidUpdate(v,u.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var w=o.updateQueue;w!==null&&zv(o,w,p);break;case 3:var j=o.updateQueue;if(j!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}zv(o,j,u)}break;case 5:var O=o.stateNode;if(u===null&&o.flags&4){u=O;var z=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":z.autoFocus&&u.focus();break;case"img":z.src&&(u.src=z.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var Y=o.alternate;if(Y!==null){var re=Y.memoizedState;if(re!==null){var se=re.dehydrated;se!==null&&ds(se)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}dn||o.flags&512&&Hm(o)}catch(ne){bt(o,o.return,ne)}}if(o===i){ye=null;break}if(u=o.sibling,u!==null){u.return=o.return,ye=u;break}ye=o.return}}function z1(i){for(;ye!==null;){var o=ye;if(o===i){ye=null;break}var u=o.sibling;if(u!==null){u.return=o.return,ye=u;break}ye=o.return}}function F1(i){for(;ye!==null;){var o=ye;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{Rd(4,o)}catch(z){bt(o,u,z)}break;case 1:var p=o.stateNode;if(typeof p.componentDidMount=="function"){var v=o.return;try{p.componentDidMount()}catch(z){bt(o,v,z)}}var w=o.return;try{Hm(o)}catch(z){bt(o,w,z)}break;case 5:var j=o.return;try{Hm(o)}catch(z){bt(o,j,z)}}}catch(z){bt(o,o.return,z)}if(o===i){ye=null;break}var O=o.sibling;if(O!==null){O.return=o.return,ye=O;break}ye=o.return}}var jI=Math.ceil,Pd=U.ReactCurrentDispatcher,Gm=U.ReactCurrentOwner,rr=U.ReactCurrentBatchConfig,Ge=0,Kt=null,Dt=null,en=0,Hn=0,Oa=gs(0),Ft=0,_c=null,Co=0,Nd=0,Qm=0,Sc=null,Cn=null,Ym=0,Ba=1/0,Ai=null,Md=!1,Xm=null,ks=null,Dd=!1,_s=null,Vd=0,Ec=0,Jm=null,Ld=-1,Od=0;function wn(){return(Ge&6)!==0?lt():Ld!==-1?Ld:Ld=lt()}function Ss(i){return(i.mode&1)===0?1:(Ge&2)!==0&&en!==0?en&-en:hI.transition!==null?(Od===0&&(Od=Kl()),Od):(i=Ke,i!==0||(i=window.event,i=i===void 0?16:ma(i.type)),i)}function Tr(i,o,u,p){if(50<Ec)throw Ec=0,Jm=null,Error(t(185));go(i,u,p),((Ge&2)===0||i!==Kt)&&(i===Kt&&((Ge&2)===0&&(Nd|=u),Ft===4&&Es(i,en)),jn(i,p),u===1&&Ge===0&&(o.mode&1)===0&&(Ba=lt()+500,hd&&vs()))}function jn(i,o){var u=i.callbackNode;po(i,o);var p=yi(i,i===Kt?en:0);if(p===0)u!==null&&aa(u),i.callbackNode=null,i.callbackPriority=0;else if(o=p&-p,i.callbackPriority!==o){if(u!=null&&aa(u),o===1)i.tag===0?dI(W1.bind(null,i)):Cv(W1.bind(null,i)),aI(function(){(Ge&6)===0&&vs()}),u=null;else{switch(Wr(p)){case 1:u=la;break;case 4:u=Wl;break;case 16:u=uo;break;case 536870912:u=ca;break;default:u=uo}u=X1(u,U1.bind(null,i))}i.callbackPriority=o,i.callbackNode=u}}function U1(i,o){if(Ld=-1,Od=0,(Ge&6)!==0)throw Error(t(327));var u=i.callbackNode;if(za()&&i.callbackNode!==u)return null;var p=yi(i,i===Kt?en:0);if(p===0)return null;if((p&30)!==0||(p&i.expiredLanes)!==0||o)o=Bd(i,p);else{o=p;var v=Ge;Ge|=2;var w=H1();(Kt!==i||en!==o)&&(Ai=null,Ba=lt()+500,Ao(i,o));do try{PI();break}catch(O){$1(i,O)}while(!0);gm(),Pd.current=w,Ge=v,Dt!==null?o=0:(Kt=null,en=0,o=Ft)}if(o!==0){if(o===2&&(v=Hl(i),v!==0&&(p=v,o=Zm(i,v))),o===1)throw u=_c,Ao(i,0),Es(i,p),jn(i,lt()),u;if(o===6)Es(i,p);else{if(v=i.current.alternate,(p&30)===0&&!AI(v)&&(o=Bd(i,p),o===2&&(w=Hl(i),w!==0&&(p=w,o=Zm(i,w))),o===1))throw u=_c,Ao(i,0),Es(i,p),jn(i,lt()),u;switch(i.finishedWork=v,i.finishedLanes=p,o){case 0:case 1:throw Error(t(345));case 2:Ro(i,Cn,Ai);break;case 3:if(Es(i,p),(p&130023424)===p&&(o=Ym+500-lt(),10<o)){if(yi(i,0)!==0)break;if(v=i.suspendedLanes,(v&p)!==p){wn(),i.pingedLanes|=i.suspendedLanes&v;break}i.timeoutHandle=sm(Ro.bind(null,i,Cn,Ai),o);break}Ro(i,Cn,Ai);break;case 4:if(Es(i,p),(p&4194240)===p)break;for(o=i.eventTimes,v=-1;0<p;){var j=31-On(p);w=1<<j,j=o[j],j>v&&(v=j),p&=~w}if(p=v,p=lt()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*jI(p/1960))-p,10<p){i.timeoutHandle=sm(Ro.bind(null,i,Cn,Ai),p);break}Ro(i,Cn,Ai);break;case 5:Ro(i,Cn,Ai);break;default:throw Error(t(329))}}}return jn(i,lt()),i.callbackNode===u?U1.bind(null,i):null}function Zm(i,o){var u=Sc;return i.current.memoizedState.isDehydrated&&(Ao(i,o).flags|=256),i=Bd(i,o),i!==2&&(o=Cn,Cn=u,o!==null&&ep(o)),i}function ep(i){Cn===null?Cn=i:Cn.push.apply(Cn,i)}function AI(i){for(var o=i;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var p=0;p<u.length;p++){var v=u[p],w=v.getSnapshot;v=v.value;try{if(!br(w(),v))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Es(i,o){for(o&=~Qm,o&=~Nd,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var u=31-On(o),p=1<<u;i[u]=-1,o&=~p}}function W1(i){if((Ge&6)!==0)throw Error(t(327));za();var o=yi(i,0);if((o&1)===0)return jn(i,lt()),null;var u=Bd(i,o);if(i.tag!==0&&u===2){var p=Hl(i);p!==0&&(o=p,u=Zm(i,p))}if(u===1)throw u=_c,Ao(i,0),Es(i,o),jn(i,lt()),u;if(u===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,Ro(i,Cn,Ai),jn(i,lt()),null}function tp(i,o){var u=Ge;Ge|=1;try{return i(o)}finally{Ge=u,Ge===0&&(Ba=lt()+500,hd&&vs())}}function jo(i){_s!==null&&_s.tag===0&&(Ge&6)===0&&za();var o=Ge;Ge|=1;var u=rr.transition,p=Ke;try{if(rr.transition=null,Ke=1,i)return i()}finally{Ke=p,rr.transition=u,Ge=o,(Ge&6)===0&&vs()}}function np(){Hn=Oa.current,ut(Oa)}function Ao(i,o){i.finishedWork=null,i.finishedLanes=0;var u=i.timeoutHandle;if(u!==-1&&(i.timeoutHandle=-1,oI(u)),Dt!==null)for(u=Dt.return;u!==null;){var p=u;switch(dm(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&ud();break;case 3:Da(),ut(En),ut(ln),Sm();break;case 5:km(p);break;case 4:Da();break;case 13:ut(gt);break;case 19:ut(gt);break;case 10:ym(p.type._context);break;case 22:case 23:np()}u=u.return}if(Kt=i,Dt=i=Ts(i.current,null),en=Hn=o,Ft=0,_c=null,Qm=Nd=Co=0,Cn=Sc=null,Eo!==null){for(o=0;o<Eo.length;o++)if(u=Eo[o],p=u.interleaved,p!==null){u.interleaved=null;var v=p.next,w=u.pending;if(w!==null){var j=w.next;w.next=v,p.next=j}u.pending=p}Eo=null}return i}function $1(i,o){do{var u=Dt;try{if(gm(),kd.current=Td,_d){for(var p=yt.memoizedState;p!==null;){var v=p.queue;v!==null&&(v.pending=null),p=p.next}_d=!1}if(Io=0,Ht=zt=yt=null,yc=!1,vc=0,Gm.current=null,u===null||u.return===null){Ft=1,_c=o,Dt=null;break}e:{var w=i,j=u.return,O=u,z=o;if(o=en,O.flags|=32768,z!==null&&typeof z=="object"&&typeof z.then=="function"){var Y=z,re=O,se=re.tag;if((re.mode&1)===0&&(se===0||se===11||se===15)){var ne=re.alternate;ne?(re.updateQueue=ne.updateQueue,re.memoizedState=ne.memoizedState,re.lanes=ne.lanes):(re.updateQueue=null,re.memoizedState=null)}var fe=p1(j);if(fe!==null){fe.flags&=-257,g1(fe,j,O,w,o),fe.mode&1&&m1(w,Y,o),o=fe,z=Y;var ve=o.updateQueue;if(ve===null){var xe=new Set;xe.add(z),o.updateQueue=xe}else ve.add(z);break e}else{if((o&1)===0){m1(w,Y,o),rp();break e}z=Error(t(426))}}else if(mt&&O.mode&1){var Ct=p1(j);if(Ct!==null){(Ct.flags&65536)===0&&(Ct.flags|=256),g1(Ct,j,O,w,o),mm(Va(z,O));break e}}w=z=Va(z,O),Ft!==4&&(Ft=2),Sc===null?Sc=[w]:Sc.push(w),w=j;do{switch(w.tag){case 3:w.flags|=65536,o&=-o,w.lanes|=o;var K=h1(w,z,o);Bv(w,K);break e;case 1:O=z;var W=w.type,Q=w.stateNode;if((w.flags&128)===0&&(typeof W.getDerivedStateFromError=="function"||Q!==null&&typeof Q.componentDidCatch=="function"&&(ks===null||!ks.has(Q)))){w.flags|=65536,o&=-o,w.lanes|=o;var oe=f1(w,O,o);Bv(w,oe);break e}}w=w.return}while(w!==null)}q1(u)}catch(we){o=we,Dt===u&&u!==null&&(Dt=u=u.return);continue}break}while(!0)}function H1(){var i=Pd.current;return Pd.current=Td,i===null?Td:i}function rp(){(Ft===0||Ft===3||Ft===2)&&(Ft=4),Kt===null||(Co&268435455)===0&&(Nd&268435455)===0||Es(Kt,en)}function Bd(i,o){var u=Ge;Ge|=2;var p=H1();(Kt!==i||en!==o)&&(Ai=null,Ao(i,o));do try{RI();break}catch(v){$1(i,v)}while(!0);if(gm(),Ge=u,Pd.current=p,Dt!==null)throw Error(t(261));return Kt=null,en=0,Ft}function RI(){for(;Dt!==null;)K1(Dt)}function PI(){for(;Dt!==null&&!co();)K1(Dt)}function K1(i){var o=Y1(i.alternate,i,Hn);i.memoizedProps=i.pendingProps,o===null?q1(i):Dt=o,Gm.current=null}function q1(i){var o=i;do{var u=o.alternate;if(i=o.return,(o.flags&32768)===0){if(u=SI(u,o,Hn),u!==null){Dt=u;return}}else{if(u=EI(u,o),u!==null){u.flags&=32767,Dt=u;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Ft=6,Dt=null;return}}if(o=o.sibling,o!==null){Dt=o;return}Dt=o=i}while(o!==null);Ft===0&&(Ft=5)}function Ro(i,o,u){var p=Ke,v=rr.transition;try{rr.transition=null,Ke=1,NI(i,o,u,p)}finally{rr.transition=v,Ke=p}return null}function NI(i,o,u,p){do za();while(_s!==null);if((Ge&6)!==0)throw Error(t(327));u=i.finishedWork;var v=i.finishedLanes;if(u===null)return null;if(i.finishedWork=null,i.finishedLanes=0,u===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var w=u.lanes|u.childLanes;if(Wf(i,w),i===Kt&&(Dt=Kt=null,en=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Dd||(Dd=!0,X1(uo,function(){return za(),null})),w=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||w){w=rr.transition,rr.transition=null;var j=Ke;Ke=1;var O=Ge;Ge|=4,Gm.current=null,II(i,u),L1(u,i),ZT(rm),wi=!!nm,rm=nm=null,i.current=u,CI(u),gi(),Ge=O,Ke=j,rr.transition=w}else i.current=u;if(Dd&&(Dd=!1,_s=i,Vd=v),w=i.pendingLanes,w===0&&(ks=null),Ku(u.stateNode),jn(i,lt()),o!==null)for(p=i.onRecoverableError,u=0;u<o.length;u++)v=o[u],p(v.value,{componentStack:v.stack,digest:v.digest});if(Md)throw Md=!1,i=Xm,Xm=null,i;return(Vd&1)!==0&&i.tag!==0&&za(),w=i.pendingLanes,(w&1)!==0?i===Jm?Ec++:(Ec=0,Jm=i):Ec=0,vs(),null}function za(){if(_s!==null){var i=Wr(Vd),o=rr.transition,u=Ke;try{if(rr.transition=null,Ke=16>i?16:i,_s===null)var p=!1;else{if(i=_s,_s=null,Vd=0,(Ge&6)!==0)throw Error(t(331));var v=Ge;for(Ge|=4,ye=i.current;ye!==null;){var w=ye,j=w.child;if((ye.flags&16)!==0){var O=w.deletions;if(O!==null){for(var z=0;z<O.length;z++){var Y=O[z];for(ye=Y;ye!==null;){var re=ye;switch(re.tag){case 0:case 11:case 15:kc(8,re,w)}var se=re.child;if(se!==null)se.return=re,ye=se;else for(;ye!==null;){re=ye;var ne=re.sibling,fe=re.return;if(P1(re),re===Y){ye=null;break}if(ne!==null){ne.return=fe,ye=ne;break}ye=fe}}}var ve=w.alternate;if(ve!==null){var xe=ve.child;if(xe!==null){ve.child=null;do{var Ct=xe.sibling;xe.sibling=null,xe=Ct}while(xe!==null)}}ye=w}}if((w.subtreeFlags&2064)!==0&&j!==null)j.return=w,ye=j;else e:for(;ye!==null;){if(w=ye,(w.flags&2048)!==0)switch(w.tag){case 0:case 11:case 15:kc(9,w,w.return)}var K=w.sibling;if(K!==null){K.return=w.return,ye=K;break e}ye=w.return}}var W=i.current;for(ye=W;ye!==null;){j=ye;var Q=j.child;if((j.subtreeFlags&2064)!==0&&Q!==null)Q.return=j,ye=Q;else e:for(j=W;ye!==null;){if(O=ye,(O.flags&2048)!==0)try{switch(O.tag){case 0:case 11:case 15:Rd(9,O)}}catch(we){bt(O,O.return,we)}if(O===j){ye=null;break e}var oe=O.sibling;if(oe!==null){oe.return=O.return,ye=oe;break e}ye=O.return}}if(Ge=v,vs(),Ln&&typeof Ln.onPostCommitFiberRoot=="function")try{Ln.onPostCommitFiberRoot(ho,i)}catch{}p=!0}return p}finally{Ke=u,rr.transition=o}}return!1}function G1(i,o,u){o=Va(u,o),o=h1(i,o,1),i=ws(i,o,1),o=wn(),i!==null&&(go(i,1,o),jn(i,o))}function bt(i,o,u){if(i.tag===3)G1(i,i,u);else for(;o!==null;){if(o.tag===3){G1(o,i,u);break}else if(o.tag===1){var p=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(ks===null||!ks.has(p))){i=Va(u,i),i=f1(o,i,1),o=ws(o,i,1),i=wn(),o!==null&&(go(o,1,i),jn(o,i));break}}o=o.return}}function MI(i,o,u){var p=i.pingCache;p!==null&&p.delete(o),o=wn(),i.pingedLanes|=i.suspendedLanes&u,Kt===i&&(en&u)===u&&(Ft===4||Ft===3&&(en&130023424)===en&&500>lt()-Ym?Ao(i,0):Qm|=u),jn(i,o)}function Q1(i,o){o===0&&((i.mode&1)===0?o=1:(o=ls,ls<<=1,(ls&130023424)===0&&(ls=4194304)));var u=wn();i=Ii(i,o),i!==null&&(go(i,o,u),jn(i,u))}function DI(i){var o=i.memoizedState,u=0;o!==null&&(u=o.retryLane),Q1(i,u)}function VI(i,o){var u=0;switch(i.tag){case 13:var p=i.stateNode,v=i.memoizedState;v!==null&&(u=v.retryLane);break;case 19:p=i.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(o),Q1(i,u)}var Y1;Y1=function(i,o,u){if(i!==null)if(i.memoizedProps!==o.pendingProps||En.current)In=!0;else{if((i.lanes&u)===0&&(o.flags&128)===0)return In=!1,_I(i,o,u);In=(i.flags&131072)!==0}else In=!1,mt&&(o.flags&1048576)!==0&&jv(o,md,o.index);switch(o.lanes=0,o.tag){case 2:var p=o.type;jd(i,o),i=o.pendingProps;var v=Ca(o,ln.current);Ma(o,u),v=Im(null,o,p,i,v,u);var w=Cm();return o.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Tn(p)?(w=!0,dd(o)):w=!1,o.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,wm(o),v.updater=Id,o.stateNode=v,v._reactInternals=o,Mm(o,p,i,u),o=Om(null,o,p,!0,w,u)):(o.tag=0,mt&&w&&um(o),xn(null,o,v,u),o=o.child),o;case 16:p=o.elementType;e:{switch(jd(i,o),i=o.pendingProps,v=p._init,p=v(p._payload),o.type=p,v=o.tag=OI(p),i=_r(p,i),v){case 0:o=Lm(null,o,p,i,u);break e;case 1:o=k1(null,o,p,i,u);break e;case 11:o=y1(null,o,p,i,u);break e;case 14:o=v1(null,o,p,_r(p.type,i),u);break e}throw Error(t(306,p,""))}return o;case 0:return p=o.type,v=o.pendingProps,v=o.elementType===p?v:_r(p,v),Lm(i,o,p,v,u);case 1:return p=o.type,v=o.pendingProps,v=o.elementType===p?v:_r(p,v),k1(i,o,p,v,u);case 3:e:{if(_1(o),i===null)throw Error(t(387));p=o.pendingProps,w=o.memoizedState,v=w.element,Ov(i,o),wd(o,p,null,u);var j=o.memoizedState;if(p=j.element,w.isDehydrated)if(w={element:p,isDehydrated:!1,cache:j.cache,pendingSuspenseBoundaries:j.pendingSuspenseBoundaries,transitions:j.transitions},o.updateQueue.baseState=w,o.memoizedState=w,o.flags&256){v=Va(Error(t(423)),o),o=S1(i,o,p,u,v);break e}else if(p!==v){v=Va(Error(t(424)),o),o=S1(i,o,p,u,v);break e}else for($n=ps(o.stateNode.containerInfo.firstChild),Wn=o,mt=!0,kr=null,u=Vv(o,null,p,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Ra(),p===v){o=ji(i,o,u);break e}xn(i,o,p,u)}o=o.child}return o;case 5:return Fv(o),i===null&&fm(o),p=o.type,v=o.pendingProps,w=i!==null?i.memoizedProps:null,j=v.children,im(p,v)?j=null:w!==null&&im(p,w)&&(o.flags|=32),b1(i,o),xn(i,o,j,u),o.child;case 6:return i===null&&fm(o),null;case 13:return E1(i,o,u);case 4:return bm(o,o.stateNode.containerInfo),p=o.pendingProps,i===null?o.child=Pa(o,null,p,u):xn(i,o,p,u),o.child;case 11:return p=o.type,v=o.pendingProps,v=o.elementType===p?v:_r(p,v),y1(i,o,p,v,u);case 7:return xn(i,o,o.pendingProps,u),o.child;case 8:return xn(i,o,o.pendingProps.children,u),o.child;case 12:return xn(i,o,o.pendingProps.children,u),o.child;case 10:e:{if(p=o.type._context,v=o.pendingProps,w=o.memoizedProps,j=v.value,ot(yd,p._currentValue),p._currentValue=j,w!==null)if(br(w.value,j)){if(w.children===v.children&&!En.current){o=ji(i,o,u);break e}}else for(w=o.child,w!==null&&(w.return=o);w!==null;){var O=w.dependencies;if(O!==null){j=w.child;for(var z=O.firstContext;z!==null;){if(z.context===p){if(w.tag===1){z=Ci(-1,u&-u),z.tag=2;var Y=w.updateQueue;if(Y!==null){Y=Y.shared;var re=Y.pending;re===null?z.next=z:(z.next=re.next,re.next=z),Y.pending=z}}w.lanes|=u,z=w.alternate,z!==null&&(z.lanes|=u),vm(w.return,u,o),O.lanes|=u;break}z=z.next}}else if(w.tag===10)j=w.type===o.type?null:w.child;else if(w.tag===18){if(j=w.return,j===null)throw Error(t(341));j.lanes|=u,O=j.alternate,O!==null&&(O.lanes|=u),vm(j,u,o),j=w.sibling}else j=w.child;if(j!==null)j.return=w;else for(j=w;j!==null;){if(j===o){j=null;break}if(w=j.sibling,w!==null){w.return=j.return,j=w;break}j=j.return}w=j}xn(i,o,v.children,u),o=o.child}return o;case 9:return v=o.type,p=o.pendingProps.children,Ma(o,u),v=tr(v),p=p(v),o.flags|=1,xn(i,o,p,u),o.child;case 14:return p=o.type,v=_r(p,o.pendingProps),v=_r(p.type,v),v1(i,o,p,v,u);case 15:return x1(i,o,o.type,o.pendingProps,u);case 17:return p=o.type,v=o.pendingProps,v=o.elementType===p?v:_r(p,v),jd(i,o),o.tag=1,Tn(p)?(i=!0,dd(o)):i=!1,Ma(o,u),u1(o,p,v),Mm(o,p,v,u),Om(null,o,p,!0,i,u);case 19:return I1(i,o,u);case 22:return w1(i,o,u)}throw Error(t(156,o.tag))};function X1(i,o){return Ul(i,o)}function LI(i,o,u,p){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ir(i,o,u,p){return new LI(i,o,u,p)}function ip(i){return i=i.prototype,!(!i||!i.isReactComponent)}function OI(i){if(typeof i=="function")return ip(i)?1:0;if(i!=null){if(i=i.$$typeof,i===F)return 11;if(i===Ve)return 14}return 2}function Ts(i,o){var u=i.alternate;return u===null?(u=ir(i.tag,o,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=o,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&14680064,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,o=i.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u}function zd(i,o,u,p,v,w){var j=2;if(p=i,typeof i=="function")ip(i)&&(j=1);else if(typeof i=="string")j=5;else e:switch(i){case I:return Po(u.children,v,w,o);case E:j=8,v|=8;break;case R:return i=ir(12,u,o,v|2),i.elementType=R,i.lanes=w,i;case D:return i=ir(13,u,o,v),i.elementType=D,i.lanes=w,i;case _e:return i=ir(19,u,o,v),i.elementType=_e,i.lanes=w,i;case Te:return Fd(u,v,w,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case V:j=10;break e;case B:j=9;break e;case F:j=11;break e;case Ve:j=14;break e;case it:j=16,p=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=ir(j,u,o,v),o.elementType=i,o.type=p,o.lanes=w,o}function Po(i,o,u,p){return i=ir(7,i,p,o),i.lanes=u,i}function Fd(i,o,u,p){return i=ir(22,i,p,o),i.elementType=Te,i.lanes=u,i.stateNode={isHidden:!1},i}function sp(i,o,u){return i=ir(6,i,null,o),i.lanes=u,i}function op(i,o,u){return o=ir(4,i.children!==null?i.children:[],i.key,o),o.lanes=u,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function BI(i,o,u,p,v){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ql(0),this.expirationTimes=ql(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ql(0),this.identifierPrefix=p,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function ap(i,o,u,p,v,w,j,O,z){return i=new BI(i,o,u,O,z),o===1?(o=1,w===!0&&(o|=8)):o=0,w=ir(3,null,null,o),i.current=w,w.stateNode=i,w.memoizedState={element:p,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},wm(w),i}function zI(i,o,u){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:G,key:p==null?null:""+p,children:i,containerInfo:o,implementation:u}}function J1(i){if(!i)return ys;i=i._reactInternals;e:{if(xr(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Tn(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var u=i.type;if(Tn(u))return Tv(i,u,o)}return o}function Z1(i,o,u,p,v,w,j,O,z){return i=ap(u,p,!0,i,v,w,j,O,z),i.context=J1(null),u=i.current,p=wn(),v=Ss(u),w=Ci(p,v),w.callback=o??null,ws(u,w,v),i.current.lanes=v,go(i,v,p),jn(i,p),i}function Ud(i,o,u,p){var v=o.current,w=wn(),j=Ss(v);return u=J1(u),o.context===null?o.context=u:o.pendingContext=u,o=Ci(w,j),o.payload={element:i},p=p===void 0?null:p,p!==null&&(o.callback=p),i=ws(v,o,j),i!==null&&(Tr(i,v,j,w),xd(i,v,j)),j}function Wd(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function ex(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<o?u:o}}function lp(i,o){ex(i,o),(i=i.alternate)&&ex(i,o)}function FI(){return null}var tx=typeof reportError=="function"?reportError:function(i){console.error(i)};function cp(i){this._internalRoot=i}$d.prototype.render=cp.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));Ud(i,o,null,null)},$d.prototype.unmount=cp.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;jo(function(){Ud(null,i,null,null)}),o[_i]=null}};function $d(i){this._internalRoot=i}$d.prototype.unstable_scheduleHydration=function(i){if(i){var o=Xl();i={blockedOn:null,target:i,priority:o};for(var u=0;u<Bn.length&&o!==0&&o<Bn[u].priority;u++);Bn.splice(u,0,i),u===0&&ha(i)}};function up(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Hd(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function nx(){}function UI(i,o,u,p,v){if(v){if(typeof p=="function"){var w=p;p=function(){var Y=Wd(j);w.call(Y)}}var j=Z1(o,p,i,0,null,!1,!1,"",nx);return i._reactRootContainer=j,i[_i]=j.current,cc(i.nodeType===8?i.parentNode:i),jo(),j}for(;v=i.lastChild;)i.removeChild(v);if(typeof p=="function"){var O=p;p=function(){var Y=Wd(z);O.call(Y)}}var z=ap(i,0,!1,null,null,!1,!1,"",nx);return i._reactRootContainer=z,i[_i]=z.current,cc(i.nodeType===8?i.parentNode:i),jo(function(){Ud(o,z,u,p)}),z}function Kd(i,o,u,p,v){var w=u._reactRootContainer;if(w){var j=w;if(typeof v=="function"){var O=v;v=function(){var z=Wd(j);O.call(z)}}Ud(o,j,i,v)}else j=UI(u,o,i,v,p);return Wd(j)}Ql=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var u=Je(o.pendingLanes);u!==0&&(Gl(o,u|1),jn(o,lt()),(Ge&6)===0&&(Ba=lt()+500,vs()))}break;case 13:jo(function(){var p=Ii(i,1);if(p!==null){var v=wn();Tr(p,i,1,v)}}),lp(i,1)}},ua=function(i){if(i.tag===13){var o=Ii(i,134217728);if(o!==null){var u=wn();Tr(o,i,134217728,u)}lp(i,134217728)}},Yl=function(i){if(i.tag===13){var o=Ss(i),u=Ii(i,o);if(u!==null){var p=wn();Tr(u,i,o,p)}lp(i,o)}},Xl=function(){return Ke},Jl=function(i,o){var u=Ke;try{return Ke=i,o()}finally{Ke=u}},fi=function(i,o,u){switch(o){case"input":if(vn(i,u),o=u.name,u.type==="radio"&&o!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var p=u[o];if(p!==i&&p.form===i.form){var v=cd(p);if(!v)throw Error(t(90));J(p),vn(p,v)}}}break;case"textarea":Mu(i,u);break;case"select":o=u.value,o!=null&&yr(i,!!u.multiple,o,!1)}},Lu=tp,Ou=jo;var WI={usingClientEntryPoint:!1,Events:[hc,Ta,cd,is,ss,tp]},Tc={findFiberByHostInstance:bo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$I={bundleType:Tc.bundleType,version:Tc.version,rendererPackageName:Tc.rendererPackageName,rendererConfig:Tc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:U.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Hu(i),i===null?null:i.stateNode},findFiberByHostInstance:Tc.findFiberByHostInstance||FI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qd.isDisabled&&qd.supportsFiber)try{ho=qd.inject($I),Ln=qd}catch{}}return An.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WI,An.createPortal=function(i,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!up(o))throw Error(t(200));return zI(i,o,null,u)},An.createRoot=function(i,o){if(!up(i))throw Error(t(299));var u=!1,p="",v=tx;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onRecoverableError!==void 0&&(v=o.onRecoverableError)),o=ap(i,1,!1,null,null,u,!1,p,v),i[_i]=o.current,cc(i.nodeType===8?i.parentNode:i),new cp(o)},An.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=Hu(o),i=i===null?null:i.stateNode,i},An.flushSync=function(i){return jo(i)},An.hydrate=function(i,o,u){if(!Hd(o))throw Error(t(200));return Kd(null,i,o,!0,u)},An.hydrateRoot=function(i,o,u){if(!up(i))throw Error(t(405));var p=u!=null&&u.hydratedSources||null,v=!1,w="",j=tx;if(u!=null&&(u.unstable_strictMode===!0&&(v=!0),u.identifierPrefix!==void 0&&(w=u.identifierPrefix),u.onRecoverableError!==void 0&&(j=u.onRecoverableError)),o=Z1(o,null,i,1,u??null,v,!1,w,j),i[_i]=o.current,cc(i),p)for(i=0;i<p.length;i++)u=p[i],v=u._getVersion,v=v(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,v]:o.mutableSourceEagerHydrationData.push(u,v);return new $d(o)},An.render=function(i,o,u){if(!Hd(o))throw Error(t(200));return Kd(null,i,o,!1,u)},An.unmountComponentAtNode=function(i){if(!Hd(i))throw Error(t(40));return i._reactRootContainer?(jo(function(){Kd(null,null,i,!1,function(){i._reactRootContainer=null,i[_i]=null})}),!0):!1},An.unstable_batchedUpdates=tp,An.unstable_renderSubtreeIntoContainer=function(i,o,u,p){if(!Hd(u))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return Kd(i,o,u,!1,p)},An.version="18.3.1-next-f1338f8080-20240426",An}var ux;function ZI(){if(ux)return fp.exports;ux=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),fp.exports=JI(),fp.exports}var dx;function eC(){if(dx)return Gd;dx=1;var n=ZI();return Gd.createRoot=n.createRoot,Gd.hydrateRoot=n.hydrateRoot,Gd}var tC=eC();/**
 * react-router v7.12.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var hx="popstate";function nC(n={}){function e(s,l){let{pathname:c="/",search:h="",hash:d=""}=Xo(s.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),ng("",{pathname:c,search:h,hash:d},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(s,l){let c=s.document.querySelector("base"),h="";if(c&&c.getAttribute("href")){let d=s.location.href,m=d.indexOf("#");h=m===-1?d:d.slice(0,m)}return h+"#"+(typeof l=="string"?l:Xc(l))}function r(s,l){Gn(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return iC(e,t,r,n)}function pt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Gn(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function rC(){return Math.random().toString(36).substring(2,10)}function fx(n,e){return{usr:n.state,key:n.key,idx:e}}function ng(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Xo(e):e,state:t,key:e&&e.key||r||rC()}}function Xc({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Xo(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function iC(n,e,t,r={}){let{window:s=document.defaultView,v5Compat:l=!1}=r,c=s.history,h="POP",d=null,m=g();m==null&&(m=0,c.replaceState({...c.state,idx:m},""));function g(){return(c.state||{idx:null}).idx}function y(){h="POP";let C=g(),N=C==null?null:C-m;m=C,d&&d({action:h,location:S.location,delta:N})}function x(C,N){h="PUSH";let L=ng(S.location,C,N);t&&t(L,C),m=g()+1;let M=fx(L,m),U=S.createHref(L);try{c.pushState(M,"",U)}catch($){if($ instanceof DOMException&&$.name==="DataCloneError")throw $;s.location.assign(U)}l&&d&&d({action:h,location:S.location,delta:1})}function T(C,N){h="REPLACE";let L=ng(S.location,C,N);t&&t(L,C),m=g();let M=fx(L,m),U=S.createHref(L);c.replaceState(M,"",U),l&&d&&d({action:h,location:S.location,delta:0})}function k(C){return sC(C)}let S={get action(){return h},get location(){return n(s,c)},listen(C){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(hx,y),d=C,()=>{s.removeEventListener(hx,y),d=null}},createHref(C){return e(s,C)},createURL:k,encodeLocation(C){let N=k(C);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:x,replace:T,go(C){return c.go(C)}};return S}function sC(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),pt(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Xc(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function Tk(n,e,t="/"){return oC(n,e,t,!1)}function oC(n,e,t,r){let s=typeof e=="string"?Xo(e):e,l=Fi(s.pathname||"/",t);if(l==null)return null;let c=Ik(n);aC(c);let h=null;for(let d=0;h==null&&d<c.length;++d){let m=vC(l);h=gC(c[d],m,r)}return h}function Ik(n,e=[],t=[],r="",s=!1){let l=(c,h,d=s,m)=>{let g={relativePath:m===void 0?c.path||"":m,caseSensitive:c.caseSensitive===!0,childrenIndex:h,route:c};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(r)&&d)return;pt(g.relativePath.startsWith(r),`Absolute route path "${g.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(r.length)}let y=Vi([r,g.relativePath]),x=t.concat(g);c.children&&c.children.length>0&&(pt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),Ik(c.children,e,x,y,d)),!(c.path==null&&!c.index)&&e.push({path:y,score:mC(y,c.index),routesMeta:x})};return n.forEach((c,h)=>{var d;if(c.path===""||!((d=c.path)!=null&&d.includes("?")))l(c,h);else for(let m of Ck(c.path))l(c,h,!0,m)}),e}function Ck(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),l=t.replace(/\?$/,"");if(r.length===0)return s?[l,""]:[l];let c=Ck(r.join("/")),h=[];return h.push(...c.map(d=>d===""?l:[l,d].join("/"))),s&&h.push(...c),h.map(d=>n.startsWith("/")&&d===""?"/":d)}function aC(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:pC(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var lC=/^:[\w-]+$/,cC=3,uC=2,dC=1,hC=10,fC=-2,mx=n=>n==="*";function mC(n,e){let t=n.split("/"),r=t.length;return t.some(mx)&&(r+=fC),e&&(r+=uC),t.filter(s=>!mx(s)).reduce((s,l)=>s+(lC.test(l)?cC:l===""?dC:hC),r)}function pC(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function gC(n,e,t=!1){let{routesMeta:r}=n,s={},l="/",c=[];for(let h=0;h<r.length;++h){let d=r[h],m=h===r.length-1,g=l==="/"?e:e.slice(l.length)||"/",y=Eh({path:d.relativePath,caseSensitive:d.caseSensitive,end:m},g),x=d.route;if(!y&&m&&t&&!r[r.length-1].route.index&&(y=Eh({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!y)return null;Object.assign(s,y.params),c.push({params:s,pathname:Vi([l,y.pathname]),pathnameBase:kC(Vi([l,y.pathnameBase])),route:x}),y.pathnameBase!=="/"&&(l=Vi([l,y.pathnameBase]))}return c}function Eh(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=yC(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let l=s[0],c=l.replace(/(.)\/+$/,"$1"),h=s.slice(1);return{params:r.reduce((m,{paramName:g,isOptional:y},x)=>{if(g==="*"){let k=h[x]||"";c=l.slice(0,l.length-k.length).replace(/(.)\/+$/,"$1")}const T=h[x];return y&&!T?m[g]=void 0:m[g]=(T||"").replace(/%2F/g,"/"),m},{}),pathname:l,pathnameBase:c,pattern:n}}function yC(n,e=!1,t=!0){Gn(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,h,d)=>(r.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function vC(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Gn(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Fi(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}var jk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xC=n=>jk.test(n);function wC(n,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?Xo(n):n,l;if(t)if(xC(t))l=t;else{if(t.includes("//")){let c=t;t=t.replace(/\/\/+/g,"/"),Gn(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${t}`)}t.startsWith("/")?l=px(t.substring(1),"/"):l=px(t,e)}else l=e;return{pathname:l,search:_C(r),hash:SC(s)}}function px(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function gp(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function bC(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function oy(n){let e=bC(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function ay(n,e,t,r=!1){let s;typeof n=="string"?s=Xo(n):(s={...n},pt(!s.pathname||!s.pathname.includes("?"),gp("?","pathname","search",s)),pt(!s.pathname||!s.pathname.includes("#"),gp("#","pathname","hash",s)),pt(!s.search||!s.search.includes("#"),gp("#","search","hash",s)));let l=n===""||s.pathname==="",c=l?"/":s.pathname,h;if(c==null)h=t;else{let y=e.length-1;if(!r&&c.startsWith("..")){let x=c.split("/");for(;x[0]==="..";)x.shift(),y-=1;s.pathname=x.join("/")}h=y>=0?e[y]:"/"}let d=wC(s,h),m=c&&c!=="/"&&c.endsWith("/"),g=(l||c===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(m||g)&&(d.pathname+="/"),d}var Vi=n=>n.join("/").replace(/\/\/+/g,"/"),kC=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),_C=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,SC=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,EC=class{constructor(n,e,t,r=!1){this.status=n,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function TC(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function IC(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Ak=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Rk(n,e){let t=n;if(typeof t!="string"||!jk.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let r=t,s=!1;if(Ak)try{let l=new URL(window.location.href),c=t.startsWith("//")?new URL(l.protocol+t):new URL(t),h=Fi(c.pathname,e);c.origin===l.origin&&h!=null?t=h+c.search+c.hash:s=!0}catch{Gn(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:s,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Pk=["POST","PUT","PATCH","DELETE"];new Set(Pk);var CC=["GET",...Pk];new Set(CC);var wl=A.createContext(null);wl.displayName="DataRouter";var sf=A.createContext(null);sf.displayName="DataRouterState";var jC=A.createContext(!1),Nk=A.createContext({isTransitioning:!1});Nk.displayName="ViewTransition";var AC=A.createContext(new Map);AC.displayName="Fetchers";var RC=A.createContext(null);RC.displayName="Await";var Qn=A.createContext(null);Qn.displayName="Navigation";var hu=A.createContext(null);hu.displayName="Location";var Vr=A.createContext({outlet:null,matches:[],isDataRoute:!1});Vr.displayName="Route";var ly=A.createContext(null);ly.displayName="RouteError";var Mk="REACT_ROUTER_ERROR",PC="REDIRECT",NC="ROUTE_ERROR_RESPONSE";function MC(n){if(n.startsWith(`${Mk}:${PC}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function DC(n){if(n.startsWith(`${Mk}:${NC}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new EC(e.status,e.statusText,e.data)}catch{}}function VC(n,{relative:e}={}){pt(bl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=A.useContext(Qn),{hash:s,pathname:l,search:c}=fu(n,{relative:e}),h=l;return t!=="/"&&(h=l==="/"?t:Vi([t,l])),r.createHref({pathname:h,search:c,hash:s})}function bl(){return A.useContext(hu)!=null}function gr(){return pt(bl(),"useLocation() may be used only in the context of a <Router> component."),A.useContext(hu).location}var Dk="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Vk(n){A.useContext(Qn).static||A.useLayoutEffect(n)}function Ys(){let{isDataRoute:n}=A.useContext(Vr);return n?QC():LC()}function LC(){pt(bl(),"useNavigate() may be used only in the context of a <Router> component.");let n=A.useContext(wl),{basename:e,navigator:t}=A.useContext(Qn),{matches:r}=A.useContext(Vr),{pathname:s}=gr(),l=JSON.stringify(oy(r)),c=A.useRef(!1);return Vk(()=>{c.current=!0}),A.useCallback((d,m={})=>{if(Gn(c.current,Dk),!c.current)return;if(typeof d=="number"){t.go(d);return}let g=ay(d,JSON.parse(l),s,m.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Vi([e,g.pathname])),(m.replace?t.replace:t.push)(g,m.state,m)},[e,t,l,s,n])}A.createContext(null);function cy(){let{matches:n}=A.useContext(Vr),e=n[n.length-1];return e?e.params:{}}function fu(n,{relative:e}={}){let{matches:t}=A.useContext(Vr),{pathname:r}=gr(),s=JSON.stringify(oy(t));return A.useMemo(()=>ay(n,JSON.parse(s),r,e==="path"),[n,s,r,e])}function OC(n,e){return Lk(n,e)}function Lk(n,e,t,r,s){var L;pt(bl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=A.useContext(Qn),{matches:c}=A.useContext(Vr),h=c[c.length-1],d=h?h.params:{},m=h?h.pathname:"/",g=h?h.pathnameBase:"/",y=h&&h.route;{let M=y&&y.path||"";Bk(m,!y||M.endsWith("*")||M.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${M}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${M}"> to <Route path="${M==="/"?"*":`${M}/*`}">.`)}let x=gr(),T;if(e){let M=typeof e=="string"?Xo(e):e;pt(g==="/"||((L=M.pathname)==null?void 0:L.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${M.pathname}" was given in the \`location\` prop.`),T=M}else T=x;let k=T.pathname||"/",S=k;if(g!=="/"){let M=g.replace(/^\//,"").split("/");S="/"+k.replace(/^\//,"").split("/").slice(M.length).join("/")}let C=Tk(n,{pathname:S});Gn(y||C!=null,`No routes matched location "${T.pathname}${T.search}${T.hash}" `),Gn(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${T.pathname}${T.search}${T.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let N=WC(C&&C.map(M=>Object.assign({},M,{params:Object.assign({},d,M.params),pathname:Vi([g,l.encodeLocation?l.encodeLocation(M.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?g:Vi([g,l.encodeLocation?l.encodeLocation(M.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:M.pathnameBase])})),c,t,r,s);return e&&N?A.createElement(hu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...T},navigationType:"POP"}},N):N}function BC(){let n=GC(),e=TC(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=A.createElement(A.Fragment,null,A.createElement("p",null," Hey developer "),A.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",A.createElement("code",{style:l},"ErrorBoundary")," or"," ",A.createElement("code",{style:l},"errorElement")," prop on your route.")),A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),t?A.createElement("pre",{style:s},t):null,c)}var zC=A.createElement(BC,null),Ok=class extends A.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=DC(n.digest);t&&(n=t)}let e=n!==void 0?A.createElement(Vr.Provider,{value:this.props.routeContext},A.createElement(ly.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?A.createElement(FC,{error:n},e):e}};Ok.contextType=jC;var yp=new WeakMap;function FC({children:n,error:e}){let{basename:t}=A.useContext(Qn);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=MC(e.digest);if(r){let s=yp.get(e);if(s)throw s;let l=Rk(r.location,t);if(Ak&&!yp.get(e))if(l.isExternal||r.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:r.replace}));throw yp.set(e,c),c}return A.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return n}function UC({routeContext:n,match:e,children:t}){let r=A.useContext(wl);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),A.createElement(Vr.Provider,{value:n},t)}function WC(n,e=[],t=null,r=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,c=t==null?void 0:t.errors;if(c!=null){let g=l.findIndex(y=>y.route.id&&(c==null?void 0:c[y.route.id])!==void 0);pt(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,g+1))}let h=!1,d=-1;if(t)for(let g=0;g<l.length;g++){let y=l[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(d=g),y.route.id){let{loaderData:x,errors:T}=t,k=y.route.loader&&!x.hasOwnProperty(y.route.id)&&(!T||T[y.route.id]===void 0);if(y.route.lazy||k){h=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}let m=t&&r?(g,y)=>{var x,T;r(g,{location:t.location,params:((T=(x=t.matches)==null?void 0:x[0])==null?void 0:T.params)??{},unstable_pattern:IC(t.matches),errorInfo:y})}:void 0;return l.reduceRight((g,y,x)=>{let T,k=!1,S=null,C=null;t&&(T=c&&y.route.id?c[y.route.id]:void 0,S=y.route.errorElement||zC,h&&(d<0&&x===0?(Bk("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),k=!0,C=null):d===x&&(k=!0,C=y.route.hydrateFallbackElement||null)));let N=e.concat(l.slice(0,x+1)),L=()=>{let M;return T?M=S:k?M=C:y.route.Component?M=A.createElement(y.route.Component,null):y.route.element?M=y.route.element:M=g,A.createElement(UC,{match:y,routeContext:{outlet:g,matches:N,isDataRoute:t!=null},children:M})};return t&&(y.route.ErrorBoundary||y.route.errorElement||x===0)?A.createElement(Ok,{location:t.location,revalidation:t.revalidation,component:S,error:T,children:L(),routeContext:{outlet:null,matches:N,isDataRoute:!0},onError:m}):L()},null)}function uy(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $C(n){let e=A.useContext(wl);return pt(e,uy(n)),e}function HC(n){let e=A.useContext(sf);return pt(e,uy(n)),e}function KC(n){let e=A.useContext(Vr);return pt(e,uy(n)),e}function dy(n){let e=KC(n),t=e.matches[e.matches.length-1];return pt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function qC(){return dy("useRouteId")}function GC(){var r;let n=A.useContext(ly),e=HC("useRouteError"),t=dy("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function QC(){let{router:n}=$C("useNavigate"),e=dy("useNavigate"),t=A.useRef(!1);return Vk(()=>{t.current=!0}),A.useCallback(async(s,l={})=>{Gn(t.current,Dk),t.current&&(typeof s=="number"?await n.navigate(s):await n.navigate(s,{fromRouteId:e,...l}))},[n,e])}var gx={};function Bk(n,e,t){!e&&!gx[n]&&(gx[n]=!0,Gn(!1,t))}A.memo(YC);function YC({routes:n,future:e,state:t,onError:r}){return Lk(n,void 0,t,r,e)}function XC({to:n,replace:e,state:t,relative:r}){pt(bl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=A.useContext(Qn);Gn(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=A.useContext(Vr),{pathname:c}=gr(),h=Ys(),d=ay(n,oy(l),c,r==="path"),m=JSON.stringify(d);return A.useEffect(()=>{h(JSON.parse(m),{replace:e,state:t,relative:r})},[h,m,r,e,t]),null}function dt(n){pt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function JC({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:l=!1,unstable_useTransitions:c}){pt(!bl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=n.replace(/^\/*/,"/"),d=A.useMemo(()=>({basename:h,navigator:s,static:l,unstable_useTransitions:c,future:{}}),[h,s,l,c]);typeof t=="string"&&(t=Xo(t));let{pathname:m="/",search:g="",hash:y="",state:x=null,key:T="default"}=t,k=A.useMemo(()=>{let S=Fi(m,h);return S==null?null:{location:{pathname:S,search:g,hash:y,state:x,key:T},navigationType:r}},[h,m,g,y,x,T,r]);return Gn(k!=null,`<Router basename="${h}"> is not able to match the URL "${m}${g}${y}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:A.createElement(Qn.Provider,{value:d},A.createElement(hu.Provider,{children:e,value:k}))}function ZC({children:n,location:e}){return OC(rg(n),e)}function rg(n,e=[]){let t=[];return A.Children.forEach(n,(r,s)=>{if(!A.isValidElement(r))return;let l=[...e,s];if(r.type===A.Fragment){t.push.apply(t,rg(r.props.children,l));return}pt(r.type===dt,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),pt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=rg(r.props.children,l)),t.push(c)}),t}var ch="get",uh="application/x-www-form-urlencoded";function of(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function ej(n){return of(n)&&n.tagName.toLowerCase()==="button"}function tj(n){return of(n)&&n.tagName.toLowerCase()==="form"}function nj(n){return of(n)&&n.tagName.toLowerCase()==="input"}function rj(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function ij(n,e){return n.button===0&&(!e||e==="_self")&&!rj(n)}var Qd=null;function sj(){if(Qd===null)try{new FormData(document.createElement("form"),0),Qd=!1}catch{Qd=!0}return Qd}var oj=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function vp(n){return n!=null&&!oj.has(n)?(Gn(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${uh}"`),null):n}function aj(n,e){let t,r,s,l,c;if(tj(n)){let h=n.getAttribute("action");r=h?Fi(h,e):null,t=n.getAttribute("method")||ch,s=vp(n.getAttribute("enctype"))||uh,l=new FormData(n)}else if(ej(n)||nj(n)&&(n.type==="submit"||n.type==="image")){let h=n.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=n.getAttribute("formaction")||h.getAttribute("action");if(r=d?Fi(d,e):null,t=n.getAttribute("formmethod")||h.getAttribute("method")||ch,s=vp(n.getAttribute("formenctype"))||vp(h.getAttribute("enctype"))||uh,l=new FormData(h,n),!sj()){let{name:m,type:g,value:y}=n;if(g==="image"){let x=m?`${m}.`:"";l.append(`${x}x`,"0"),l.append(`${x}y`,"0")}else m&&l.append(m,y)}}else{if(of(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=ch,r=null,s=uh,c=n}return l&&s==="text/plain"&&(c=l,l=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function hy(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function lj(n,e,t,r){let s=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?s.pathname.endsWith("/")?s.pathname=`${s.pathname}_.${r}`:s.pathname=`${s.pathname}.${r}`:s.pathname==="/"?s.pathname=`_root.${r}`:e&&Fi(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${r}`,s}async function cj(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function uj(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function dj(n,e,t){let r=await Promise.all(n.map(async s=>{let l=e.routes[s.route.id];if(l){let c=await cj(l,t);return c.links?c.links():[]}return[]}));return pj(r.flat(1).filter(uj).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function yx(n,e,t,r,s,l){let c=(d,m)=>t[m]?d.route.id!==t[m].route.id:!0,h=(d,m)=>{var g;return t[m].pathname!==d.pathname||((g=t[m].route.path)==null?void 0:g.endsWith("*"))&&t[m].params["*"]!==d.params["*"]};return l==="assets"?e.filter((d,m)=>c(d,m)||h(d,m)):l==="data"?e.filter((d,m)=>{var y;let g=r.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(c(d,m)||h(d,m))return!0;if(d.route.shouldRevalidate){let x=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((y=t[0])==null?void 0:y.params)||{},nextUrl:new URL(n,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function hj(n,e,{includeHydrateFallback:t}={}){return fj(n.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let l=[s.module];return s.clientActionModule&&(l=l.concat(s.clientActionModule)),s.clientLoaderModule&&(l=l.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(l=l.concat(s.hydrateFallbackModule)),s.imports&&(l=l.concat(s.imports)),l}).flat(1))}function fj(n){return[...new Set(n)]}function mj(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function pj(n,e){let t=new Set;return new Set(e),n.reduce((r,s)=>{let l=JSON.stringify(mj(s));return t.has(l)||(t.add(l),r.push({key:l,link:s})),r},[])}function zk(){let n=A.useContext(wl);return hy(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function gj(){let n=A.useContext(sf);return hy(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var fy=A.createContext(void 0);fy.displayName="FrameworkContext";function Fk(){let n=A.useContext(fy);return hy(n,"You must render this element inside a <HydratedRouter> element"),n}function yj(n,e){let t=A.useContext(fy),[r,s]=A.useState(!1),[l,c]=A.useState(!1),{onFocus:h,onBlur:d,onMouseEnter:m,onMouseLeave:g,onTouchStart:y}=e,x=A.useRef(null);A.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let S=N=>{N.forEach(L=>{c(L.isIntersecting)})},C=new IntersectionObserver(S,{threshold:.5});return x.current&&C.observe(x.current),()=>{C.disconnect()}}},[n]),A.useEffect(()=>{if(r){let S=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(S)}}},[r]);let T=()=>{s(!0)},k=()=>{s(!1),c(!1)};return t?n!=="intent"?[l,x,{}]:[l,x,{onFocus:Cc(h,T),onBlur:Cc(d,k),onMouseEnter:Cc(m,T),onMouseLeave:Cc(g,k),onTouchStart:Cc(y,T)}]:[!1,x,{}]}function Cc(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function vj({page:n,...e}){let{router:t}=zk(),r=A.useMemo(()=>Tk(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?A.createElement(wj,{page:n,matches:r,...e}):null}function xj(n){let{manifest:e,routeModules:t}=Fk(),[r,s]=A.useState([]);return A.useEffect(()=>{let l=!1;return dj(n,e,t).then(c=>{l||s(c)}),()=>{l=!0}},[n,e,t]),r}function wj({page:n,matches:e,...t}){let r=gr(),{future:s,manifest:l,routeModules:c}=Fk(),{basename:h}=zk(),{loaderData:d,matches:m}=gj(),g=A.useMemo(()=>yx(n,e,m,l,r,"data"),[n,e,m,l,r]),y=A.useMemo(()=>yx(n,e,m,l,r,"assets"),[n,e,m,l,r]),x=A.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let S=new Set,C=!1;if(e.forEach(L=>{var U;let M=l.routes[L.route.id];!M||!M.hasLoader||(!g.some($=>$.route.id===L.route.id)&&L.route.id in d&&((U=c[L.route.id])!=null&&U.shouldRevalidate)||M.hasClientLoader?C=!0:S.add(L.route.id))}),S.size===0)return[];let N=lj(n,h,s.unstable_trailingSlashAwareDataRequests,"data");return C&&S.size>0&&N.searchParams.set("_routes",e.filter(L=>S.has(L.route.id)).map(L=>L.route.id).join(",")),[N.pathname+N.search]},[h,s.unstable_trailingSlashAwareDataRequests,d,r,l,g,e,n,c]),T=A.useMemo(()=>hj(y,l),[y,l]),k=xj(y);return A.createElement(A.Fragment,null,x.map(S=>A.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...t})),T.map(S=>A.createElement("link",{key:S,rel:"modulepreload",href:S,...t})),k.map(({key:S,link:C})=>A.createElement("link",{key:S,nonce:t.nonce,...C})))}function bj(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var kj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{kj&&(window.__reactRouterVersion="7.12.0")}catch{}function _j({basename:n,children:e,unstable_useTransitions:t,window:r}){let s=A.useRef();s.current==null&&(s.current=nC({window:r,v5Compat:!0}));let l=s.current,[c,h]=A.useState({action:l.action,location:l.location}),d=A.useCallback(m=>{t===!1?h(m):A.startTransition(()=>h(m))},[t]);return A.useLayoutEffect(()=>l.listen(d),[l,d]),A.createElement(JC,{basename:n,children:e,location:c.location,navigationType:c.action,navigator:l,unstable_useTransitions:t})}var Uk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ue=A.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:l,replace:c,state:h,target:d,to:m,preventScrollReset:g,viewTransition:y,unstable_defaultShouldRevalidate:x,...T},k){let{basename:S,unstable_useTransitions:C}=A.useContext(Qn),N=typeof m=="string"&&Uk.test(m),L=Rk(m,S);m=L.to;let M=VC(m,{relative:s}),[U,$,G]=yj(r,T),I=Ij(m,{replace:c,state:h,target:d,preventScrollReset:g,relative:s,viewTransition:y,unstable_defaultShouldRevalidate:x,unstable_useTransitions:C});function E(V){e&&e(V),V.defaultPrevented||I(V)}let R=A.createElement("a",{...T,...G,href:L.absoluteURL||M,onClick:L.isExternal||l?e:E,ref:bj(k,$),target:d,"data-discover":!N&&t==="render"?"true":void 0});return U&&!N?A.createElement(A.Fragment,null,R,A.createElement(vj,{page:M})):R});ue.displayName="Link";var Sj=A.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:l,to:c,viewTransition:h,children:d,...m},g){let y=fu(c,{relative:m.relative}),x=gr(),T=A.useContext(sf),{navigator:k,basename:S}=A.useContext(Qn),C=T!=null&&Pj(y)&&h===!0,N=k.encodeLocation?k.encodeLocation(y).pathname:y.pathname,L=x.pathname,M=T&&T.navigation&&T.navigation.location?T.navigation.location.pathname:null;t||(L=L.toLowerCase(),M=M?M.toLowerCase():null,N=N.toLowerCase()),M&&S&&(M=Fi(M,S)||M);const U=N!=="/"&&N.endsWith("/")?N.length-1:N.length;let $=L===N||!s&&L.startsWith(N)&&L.charAt(U)==="/",G=M!=null&&(M===N||!s&&M.startsWith(N)&&M.charAt(N.length)==="/"),I={isActive:$,isPending:G,isTransitioning:C},E=$?e:void 0,R;typeof r=="function"?R=r(I):R=[r,$?"active":null,G?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let V=typeof l=="function"?l(I):l;return A.createElement(ue,{...m,"aria-current":E,className:R,ref:g,style:V,to:c,viewTransition:h},typeof d=="function"?d(I):d)});Sj.displayName="NavLink";var Ej=A.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:l,method:c=ch,action:h,onSubmit:d,relative:m,preventScrollReset:g,viewTransition:y,unstable_defaultShouldRevalidate:x,...T},k)=>{let{unstable_useTransitions:S}=A.useContext(Qn),C=Aj(),N=Rj(h,{relative:m}),L=c.toLowerCase()==="get"?"get":"post",M=typeof h=="string"&&Uk.test(h),U=$=>{if(d&&d($),$.defaultPrevented)return;$.preventDefault();let G=$.nativeEvent.submitter,I=(G==null?void 0:G.getAttribute("formmethod"))||c,E=()=>C(G||$.currentTarget,{fetcherKey:e,method:I,navigate:t,replace:s,state:l,relative:m,preventScrollReset:g,viewTransition:y,unstable_defaultShouldRevalidate:x});S&&t!==!1?A.startTransition(()=>E()):E()};return A.createElement("form",{ref:k,method:L,action:N,onSubmit:r?d:U,...T,"data-discover":!M&&n==="render"?"true":void 0})});Ej.displayName="Form";function Tj(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Wk(n){let e=A.useContext(wl);return pt(e,Tj(n)),e}function Ij(n,{target:e,replace:t,state:r,preventScrollReset:s,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:h,unstable_useTransitions:d}={}){let m=Ys(),g=gr(),y=fu(n,{relative:l});return A.useCallback(x=>{if(ij(x,e)){x.preventDefault();let T=t!==void 0?t:Xc(g)===Xc(y),k=()=>m(n,{replace:T,state:r,preventScrollReset:s,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:h});d?A.startTransition(()=>k()):k()}},[g,m,y,t,r,e,n,s,l,c,h,d])}var Cj=0,jj=()=>`__${String(++Cj)}__`;function Aj(){let{router:n}=Wk("useSubmit"),{basename:e}=A.useContext(Qn),t=qC(),r=n.fetch,s=n.navigate;return A.useCallback(async(l,c={})=>{let{action:h,method:d,encType:m,formData:g,body:y}=aj(l,e);if(c.navigate===!1){let x=c.fetcherKey||jj();await r(x,t,c.action||h,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:g,body:y,formMethod:c.method||d,formEncType:c.encType||m,flushSync:c.flushSync})}else await s(c.action||h,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:g,body:y,formMethod:c.method||d,formEncType:c.encType||m,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[r,s,e,t])}function Rj(n,{relative:e}={}){let{basename:t}=A.useContext(Qn),r=A.useContext(Vr);pt(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),l={...fu(n||".",{relative:e})},c=gr();if(n==null){l.search=c.search;let h=new URLSearchParams(l.search),d=h.getAll("index");if(d.some(g=>g==="")){h.delete("index"),d.filter(y=>y).forEach(y=>h.append("index",y));let g=h.toString();l.search=g?`?${g}`:""}}return(!n||n===".")&&s.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Vi([t,l.pathname])),Xc(l)}function Pj(n,{relative:e}={}){let t=A.useContext(Nk);pt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Wk("useViewTransitionState"),s=fu(n,{relative:e});if(!t.isTransitioning)return!1;let l=Fi(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=Fi(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Eh(s.pathname,c)!=null||Eh(s.pathname,l)!=null}const Nj=()=>{};var vx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},Mj=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const l=n[t++];e[r++]=String.fromCharCode((s&31)<<6|l&63)}else if(s>239&&s<365){const l=n[t++],c=n[t++],h=n[t++],d=((s&7)<<18|(l&63)<<12|(c&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const l=n[t++],c=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(l&63)<<6|c&63)}}return e.join("")},Hk={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const l=n[s],c=s+1<n.length,h=c?n[s+1]:0,d=s+2<n.length,m=d?n[s+2]:0,g=l>>2,y=(l&3)<<4|h>>4;let x=(h&15)<<2|m>>6,T=m&63;d||(T=64,c||(x=64)),r.push(t[g],t[y],t[x],t[T])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray($k(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Mj(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const l=t[n.charAt(s++)],h=s<n.length?t[n.charAt(s)]:0;++s;const m=s<n.length?t[n.charAt(s)]:64;++s;const y=s<n.length?t[n.charAt(s)]:64;if(++s,l==null||h==null||m==null||y==null)throw new Dj;const x=l<<2|h>>4;if(r.push(x),m!==64){const T=h<<4&240|m>>2;if(r.push(T),y!==64){const k=m<<6&192|y;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Dj extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Vj=function(n){const e=$k(n);return Hk.encodeByteArray(e,!0)},Th=function(n){return Vj(n).replace(/\./g,"")},Kk=function(n){try{return Hk.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lj(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oj=()=>Lj().__FIREBASE_DEFAULTS__,Bj=()=>{if(typeof process>"u"||typeof vx>"u")return;const n=vx.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},zj=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Kk(n[1]);return e&&JSON.parse(e)},af=()=>{try{return Nj()||Oj()||Bj()||zj()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},qk=n=>{var e,t;return(t=(e=af())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},Fj=n=>{const e=qk(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Gk=()=>{var n;return(n=af())==null?void 0:n.config},Qk=n=>{var e;return(e=af())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Yk(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wj(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Th(JSON.stringify(t)),Th(JSON.stringify(c)),""].join(".")}const Fc={};function $j(){const n={prod:[],emulator:[]};for(const e of Object.keys(Fc))Fc[e]?n.emulator.push(e):n.prod.push(e);return n}function Hj(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let xx=!1;function Xk(n,e){if(typeof window>"u"||typeof document>"u"||!kl(window.location.host)||Fc[n]===e||Fc[n]||xx)return;Fc[n]=e;function t(x){return`__firebase__banner__${x}`}const r="__firebase__banner",l=$j().prod.length>0;function c(){const x=document.getElementById(r);x&&x.remove()}function h(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function d(x,T){x.setAttribute("width","24"),x.setAttribute("id",T),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function m(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{xx=!0,c()},x}function g(x,T){x.setAttribute("id",T),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function y(){const x=Hj(r),T=t("text"),k=document.getElementById(T)||document.createElement("span"),S=t("learnmore"),C=document.getElementById(S)||document.createElement("a"),N=t("preprendIcon"),L=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const M=x.element;h(M),g(C,S);const U=m();d(L,N),M.append(L,k,C,U),document.body.appendChild(M)}l?(k.innerText="Preview backend disconnected.",L.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(L.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Kj(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(yn())}function qj(){var e;const n=(e=af())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Gj(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Qj(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Yj(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Xj(){const n=yn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Jj(){return!qj()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Zj(){try{return typeof indexedDB=="object"}catch{return!1}}function eA(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var l;e(((l=s.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA="FirebaseError";class Qi extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=tA,Object.setPrototypeOf(this,Qi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mu.prototype.create)}}class mu{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,l=this.errors[e],c=l?nA(l,r):"Error",h=`${this.serviceName}: ${c} (${s}).`;return new Qi(s,h,r)}}function nA(n,e){return n.replace(rA,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const rA=/\{\$([^}]+)}/g;function iA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ui(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const l=n[s],c=e[s];if(wx(l)&&wx(c)){if(!Ui(l,c))return!1}else if(l!==c)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function wx(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pu(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Nc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,l]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(l)}}),e}function Mc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function sA(n,e){const t=new oA(n,e);return t.subscribe.bind(t)}class oA{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");aA(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=xp),s.error===void 0&&(s.error=xp),s.complete===void 0&&(s.complete=xp);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function aA(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function xp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(n){return n&&n._delegate?n._delegate:n}class Uo{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Uj;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(uA(e))try{this.getOrInitializeService({instanceIdentifier:Mo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:s});r.resolve(l)}catch{}}}}clearInstance(e=Mo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Mo){return this.instances.has(e)}getOptions(e=Mo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);r===h&&c.resolve(s)}return s}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const l=this.instances.get(r);return l&&e(l,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:cA(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Mo){return this.component?this.component.multipleInstances?e:Mo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function cA(n){return n===Mo?void 0:n}function uA(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new lA(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ue||(Ue={}));const hA={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},fA=Ue.INFO,mA={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},pA=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=mA[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class my{constructor(e){this.name=e,this._logLevel=fA,this._logHandler=pA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const gA=(n,e)=>e.some(t=>n instanceof t);let bx,kx;function yA(){return bx||(bx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vA(){return kx||(kx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Jk=new WeakMap,ig=new WeakMap,Zk=new WeakMap,wp=new WeakMap,py=new WeakMap;function xA(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(Ds(n.result)),s()},c=()=>{r(n.error),s()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&Jk.set(t,n)}).catch(()=>{}),py.set(e,n),e}function wA(n){if(ig.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),s()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});ig.set(n,e)}let sg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return ig.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Zk.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ds(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function bA(n){sg=n(sg)}function kA(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(bp(this),e,...t);return Zk.set(r,e.sort?e.sort():[e]),Ds(r)}:vA().includes(n)?function(...e){return n.apply(bp(this),e),Ds(Jk.get(this))}:function(...e){return Ds(n.apply(bp(this),e))}}function _A(n){return typeof n=="function"?kA(n):(n instanceof IDBTransaction&&wA(n),gA(n,yA())?new Proxy(n,sg):n)}function Ds(n){if(n instanceof IDBRequest)return xA(n);if(wp.has(n))return wp.get(n);const e=_A(n);return e!==n&&(wp.set(n,e),py.set(e,n)),e}const bp=n=>py.get(n);function SA(n,e,{blocked:t,upgrade:r,blocking:s,terminated:l}={}){const c=indexedDB.open(n,e),h=Ds(c);return r&&c.addEventListener("upgradeneeded",d=>{r(Ds(c.result),d.oldVersion,d.newVersion,Ds(c.transaction),d)}),t&&c.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),h.then(d=>{l&&d.addEventListener("close",()=>l()),s&&d.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const EA=["get","getKey","getAll","getAllKeys","count"],TA=["put","add","delete","clear"],kp=new Map;function _x(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(kp.get(e))return kp.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=TA.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||EA.includes(t)))return;const l=async function(c,...h){const d=this.transaction(c,s?"readwrite":"readonly");let m=d.store;return r&&(m=m.index(h.shift())),(await Promise.all([m[t](...h),s&&d.done]))[0]};return kp.set(e,l),l}bA(n=>({...n,get:(e,t,r)=>_x(e,t)||n.get(e,t,r),has:(e,t)=>!!_x(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(CA(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function CA(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const og="@firebase/app",Sx="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wi=new my("@firebase/app"),jA="@firebase/app-compat",AA="@firebase/analytics-compat",RA="@firebase/analytics",PA="@firebase/app-check-compat",NA="@firebase/app-check",MA="@firebase/auth",DA="@firebase/auth-compat",VA="@firebase/database",LA="@firebase/data-connect",OA="@firebase/database-compat",BA="@firebase/functions",zA="@firebase/functions-compat",FA="@firebase/installations",UA="@firebase/installations-compat",WA="@firebase/messaging",$A="@firebase/messaging-compat",HA="@firebase/performance",KA="@firebase/performance-compat",qA="@firebase/remote-config",GA="@firebase/remote-config-compat",QA="@firebase/storage",YA="@firebase/storage-compat",XA="@firebase/firestore",JA="@firebase/ai",ZA="@firebase/firestore-compat",e5="firebase",t5="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ag="[DEFAULT]",n5={[og]:"fire-core",[jA]:"fire-core-compat",[RA]:"fire-analytics",[AA]:"fire-analytics-compat",[NA]:"fire-app-check",[PA]:"fire-app-check-compat",[MA]:"fire-auth",[DA]:"fire-auth-compat",[VA]:"fire-rtdb",[LA]:"fire-data-connect",[OA]:"fire-rtdb-compat",[BA]:"fire-fn",[zA]:"fire-fn-compat",[FA]:"fire-iid",[UA]:"fire-iid-compat",[WA]:"fire-fcm",[$A]:"fire-fcm-compat",[HA]:"fire-perf",[KA]:"fire-perf-compat",[qA]:"fire-rc",[GA]:"fire-rc-compat",[QA]:"fire-gcs",[YA]:"fire-gcs-compat",[XA]:"fire-fst",[ZA]:"fire-fst-compat",[JA]:"fire-vertex","fire-js":"fire-js",[e5]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ih=new Map,r5=new Map,lg=new Map;function Ex(n,e){try{n.container.addComponent(e)}catch(t){Wi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function sl(n){const e=n.name;if(lg.has(e))return Wi.debug(`There were multiple attempts to register component ${e}.`),!1;lg.set(e,n);for(const t of Ih.values())Ex(t,n);for(const t of r5.values())Ex(t,n);return!0}function gy(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Kn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i5={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Vs=new mu("app","Firebase",i5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s5{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Uo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Vs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _l=t5;function e_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:ag,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Vs.create("bad-app-name",{appName:String(s)});if(t||(t=Gk()),!t)throw Vs.create("no-options");const l=Ih.get(s);if(l){if(Ui(t,l.options)&&Ui(r,l.config))return l;throw Vs.create("duplicate-app",{appName:s})}const c=new dA(s);for(const d of lg.values())c.addComponent(d);const h=new s5(t,r,c);return Ih.set(s,h),h}function t_(n=ag){const e=Ih.get(n);if(!e&&n===ag&&Gk())return e_();if(!e)throw Vs.create("no-app",{appName:n});return e}function Ls(n,e,t){let r=n5[n]??n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),l=e.match(/\s|\//);if(s||l){const c=[`Unable to register library "${r}" with version "${e}":`];s&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Wi.warn(c.join(" "));return}sl(new Uo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o5="firebase-heartbeat-database",a5=1,Jc="firebase-heartbeat-store";let _p=null;function n_(){return _p||(_p=SA(o5,a5,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Jc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Vs.create("idb-open",{originalErrorMessage:n.message})})),_p}async function l5(n){try{const t=(await n_()).transaction(Jc),r=await t.objectStore(Jc).get(r_(n));return await t.done,r}catch(e){if(e instanceof Qi)Wi.warn(e.message);else{const t=Vs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Wi.warn(t.message)}}}async function Tx(n,e){try{const r=(await n_()).transaction(Jc,"readwrite");await r.objectStore(Jc).put(e,r_(n)),await r.done}catch(t){if(t instanceof Qi)Wi.warn(t.message);else{const r=Vs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Wi.warn(r.message)}}}function r_(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c5=1024,u5=30;class d5{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new f5(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Ix();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:s}),this._heartbeatsCache.heartbeats.length>u5){const c=m5(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Wi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Ix(),{heartbeatsToSend:r,unsentEntries:s}=h5(this._heartbeatsCache.heartbeats),l=Th(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Wi.warn(t),""}}}function Ix(){return new Date().toISOString().substring(0,10)}function h5(n,e=c5){const t=[];let r=n.slice();for(const s of n){const l=t.find(c=>c.agent===s.agent);if(l){if(l.dates.push(s.date),Cx(t)>e){l.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),Cx(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class f5{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Zj()?eA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await l5(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Tx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Tx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Cx(n){return Th(JSON.stringify({version:2,heartbeats:n})).length}function m5(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p5(n){sl(new Uo("platform-logger",e=>new IA(e),"PRIVATE")),sl(new Uo("heartbeat",e=>new d5(e),"PRIVATE")),Ls(og,Sx,n),Ls(og,Sx,"esm2020"),Ls("fire-js","")}p5("");function i_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const g5=i_,s_=new mu("auth","Firebase",i_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ch=new my("@firebase/auth");function y5(n,...e){Ch.logLevel<=Ue.WARN&&Ch.warn(`Auth (${_l}): ${n}`,...e)}function dh(n,...e){Ch.logLevel<=Ue.ERROR&&Ch.error(`Auth (${_l}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(n,...e){throw vy(n,...e)}function Rr(n,...e){return vy(n,...e)}function yy(n,e,t){const r={...g5(),[e]:t};return new mu("auth","Firebase",r).create(e,{appName:n.name})}function Li(n){return yy(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function v5(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&dr(n,"argument-error"),yy(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function vy(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return s_.create(n,...e)}function Ie(n,e,...t){if(!n)throw vy(e,...t)}function Mi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw dh(e),new Error(e)}function $i(n,e){n||Mi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cg(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function x5(){return jx()==="http:"||jx()==="https:"}function jx(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(x5()||Qj()||"connection"in navigator)?navigator.onLine:!0}function b5(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e,t){this.shortDelay=e,this.longDelay=t,$i(t>e,"Short delay should be less than long delay!"),this.isMobile=Kj()||Yj()}get(){return w5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xy(n,e){$i(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Mi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Mi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Mi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _5=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],S5=new gu(3e4,6e4);function Xs(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Yi(n,e,t,r,s={}){return a_(n,s,async()=>{let l={},c={};r&&(e==="GET"?c=r:l={body:JSON.stringify(r)});const h=pu({key:n.config.apiKey,...c}).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const m={method:e,headers:d,...l};return Gj()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&kl(n.emulatorConfig.host)&&(m.credentials="include"),o_.fetch()(await l_(n,n.config.apiHost,t,h),m)})}async function a_(n,e,t){n._canInitEmulator=!1;const r={...k5,...e};try{const s=new T5(n),l=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Yd(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const h=l.ok?c.errorMessage:c.error.message,[d,m]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yd(n,"credential-already-in-use",c);if(d==="EMAIL_EXISTS")throw Yd(n,"email-already-in-use",c);if(d==="USER_DISABLED")throw Yd(n,"user-disabled",c);const g=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw yy(n,g,m);dr(n,g)}}catch(s){if(s instanceof Qi)throw s;dr(n,"network-request-failed",{message:String(s)})}}async function yu(n,e,t,r,s={}){const l=await Yi(n,e,t,r,s);return"mfaPendingCredential"in l&&dr(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function l_(n,e,t,r){const s=`${e}${t}?${r}`,l=n,c=l.config.emulator?xy(n.config,s):`${n.config.apiScheme}://${s}`;return _5.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function E5(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class T5{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Rr(this.auth,"network-request-failed")),S5.get())})}}function Yd(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=Rr(n,e,r);return s.customData._tokenResponse=t,s}function Ax(n){return n!==void 0&&n.enterprise!==void 0}class I5{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return E5(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function C5(n,e){return Yi(n,"GET","/v2/recaptchaConfig",Xs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j5(n,e){return Yi(n,"POST","/v1/accounts:delete",e)}async function jh(n,e){return Yi(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function A5(n,e=!1){const t=Pt(n),r=await t.getIdToken(e),s=wy(r);Ie(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const l=typeof s.firebase=="object"?s.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:s,token:r,authTime:Uc(Sp(s.auth_time)),issuedAtTime:Uc(Sp(s.iat)),expirationTime:Uc(Sp(s.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Sp(n){return Number(n)*1e3}function wy(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return dh("JWT malformed, contained fewer than 3 sections"),null;try{const s=Kk(t);return s?JSON.parse(s):(dh("Failed to decode base64 JWT payload"),null)}catch(s){return dh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Rx(n){const e=wy(n);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ol(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Qi&&R5(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function R5({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Uc(this.lastLoginAt),this.creationTime=Uc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ah(n){var y;const e=n.auth,t=await n.getIdToken(),r=await ol(n,jh(e,{idToken:t}));Ie(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const l=(y=s.providerUserInfo)!=null&&y.length?c_(s.providerUserInfo):[],c=M5(n.providerData,l),h=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!(c!=null&&c.length),m=h?d:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new ug(s.createdAt,s.lastLoginAt),isAnonymous:m};Object.assign(n,g)}async function N5(n){const e=Pt(n);await Ah(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function M5(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function c_(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D5(n,e){const t=await a_(n,{},async()=>{const r=pu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:l}=n.config,c=await l_(n,s,"/v1/token",`key=${l}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:h,body:r};return n.emulatorConfig&&kl(n.emulatorConfig.host)&&(d.credentials="include"),o_.fetch()(c,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function V5(n,e){return Yi(n,"POST","/v2/accounts:revokeToken",Xs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Rx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const t=Rx(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:l}=await D5(e,t);this.updateTokensAndExpiration(r,s,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:l}=t,c=new Xa;return r&&(Ie(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),s&&(Ie(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),l&&(Ie(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Xa,this.toJSON())}_performRefresh(){return Mi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cs(n,e){Ie(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ar{constructor({uid:e,auth:t,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new P5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ug(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await ol(this,this.stsTokenManager.getToken(this.auth,e));return Ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return A5(this,e)}reload(){return N5(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ar({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Ah(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Kn(this.auth.app))return Promise.reject(Li(this.auth));const e=await this.getIdToken();return await ol(this,j5(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,s=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,h=t.tenantId??void 0,d=t._redirectEventId??void 0,m=t.createdAt??void 0,g=t.lastLoginAt??void 0,{uid:y,emailVerified:x,isAnonymous:T,providerData:k,stsTokenManager:S}=t;Ie(y&&S,e,"internal-error");const C=Xa.fromJSON(this.name,S);Ie(typeof y=="string",e,"internal-error"),Cs(r,e.name),Cs(s,e.name),Ie(typeof x=="boolean",e,"internal-error"),Ie(typeof T=="boolean",e,"internal-error"),Cs(l,e.name),Cs(c,e.name),Cs(h,e.name),Cs(d,e.name),Cs(m,e.name),Cs(g,e.name);const N=new Ar({uid:y,auth:e,email:s,emailVerified:x,displayName:r,isAnonymous:T,photoURL:c,phoneNumber:l,tenantId:h,stsTokenManager:C,createdAt:m,lastLoginAt:g});return k&&Array.isArray(k)&&(N.providerData=k.map(L=>({...L}))),d&&(N._redirectEventId=d),N}static async _fromIdTokenResponse(e,t,r=!1){const s=new Xa;s.updateFromServerResponse(t);const l=new Ar({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Ah(l),l}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];Ie(s.localId!==void 0,"internal-error");const l=s.providerUserInfo!==void 0?c_(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!(l!=null&&l.length),h=new Xa;h.updateFromIdToken(r);const d=new Ar({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:c}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new ug(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(l!=null&&l.length)};return Object.assign(d,m),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px=new Map;function Di(n){$i(n instanceof Function,"Expected a class definition");let e=Px.get(n);return e?($i(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Px.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}u_.type="NONE";const Nx=u_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hh(n,e,t){return`firebase:${n}:${e}:${t}`}class Ja{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:l}=this.auth;this.fullUserKey=hh(this.userKey,s.apiKey,l),this.fullPersistenceKey=hh("persistence",s.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await jh(this.auth,{idToken:e}).catch(()=>{});return t?Ar._fromGetAccountInfoResponse(this.auth,t,e):null}return Ar._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Ja(Di(Nx),e,r);const s=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let l=s[0]||Di(Nx);const c=hh(r,e.config.apiKey,e.name);let h=null;for(const m of t)try{const g=await m._get(c);if(g){let y;if(typeof g=="string"){const x=await jh(e,{idToken:g}).catch(()=>{});if(!x)break;y=await Ar._fromGetAccountInfoResponse(e,x,g)}else y=Ar._fromJSON(e,g);m!==l&&(h=y),l=m;break}}catch{}const d=s.filter(m=>m._shouldAllowMigration);return!l._shouldAllowMigration||!d.length?new Ja(l,e,r):(l=d[0],h&&await l._set(c,h.toJSON()),await Promise.all(t.map(async m=>{if(m!==l)try{await m._remove(c)}catch{}})),new Ja(l,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mx(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(m_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(d_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(g_(e))return"Blackberry";if(y_(e))return"Webos";if(h_(e))return"Safari";if((e.includes("chrome/")||f_(e))&&!e.includes("edge/"))return"Chrome";if(p_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function d_(n=yn()){return/firefox\//i.test(n)}function h_(n=yn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function f_(n=yn()){return/crios\//i.test(n)}function m_(n=yn()){return/iemobile/i.test(n)}function p_(n=yn()){return/android/i.test(n)}function g_(n=yn()){return/blackberry/i.test(n)}function y_(n=yn()){return/webos/i.test(n)}function by(n=yn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function L5(n=yn()){var e;return by(n)&&!!((e=window.navigator)!=null&&e.standalone)}function O5(){return Xj()&&document.documentMode===10}function v_(n=yn()){return by(n)||p_(n)||y_(n)||g_(n)||/windows phone/i.test(n)||m_(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x_(n,e=[]){let t;switch(n){case"Browser":t=Mx(yn());break;case"Worker":t=`${Mx(yn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${_l}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((c,h)=>{try{const d=e(l);c(d)}catch(d){h(d)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z5(n,e={}){return Yi(n,"GET","/v2/passwordPolicy",Xs(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F5=6;class U5{constructor(e){var r;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??F5,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W5{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Dx(this),this.idTokenSubscription=new Dx(this),this.beforeStateQueue=new B5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=s_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Di(t)),this._initializationPromise=this.queue(async()=>{var r,s,l;if(!this._deleted&&(this.persistenceManager=await Ja.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await jh(this,{idToken:e}),r=await Ar._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(Kn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(h,h))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,h=r==null?void 0:r._redirectEventId,d=await this.tryRedirectSignIn(e);(!c||c===h)&&(d!=null&&d.user)&&(r=d.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ah(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=b5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Kn(this.app))return Promise.reject(Li(this));const t=e?Pt(e):null;return t&&Ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Kn(this.app)?Promise.reject(Li(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Kn(this.app)?Promise.reject(Li(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Di(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await z5(this),t=new U5(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new mu("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await V5(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Di(e)||this._popupRedirectResolver;Ie(t,this,"argument-error"),this.redirectPersistenceManager=await Ja.create(this,[Di(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(h,this,"internal-error"),h.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,r,s);return()=>{c=!0,d()}}else{const d=e.addObserver(t);return()=>{c=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=x_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(Kn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&y5(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Js(n){return Pt(n)}class Dx{constructor(e){this.auth=e,this.observer=null,this.addObserver=sA(t=>this.observer=t)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $5(n){lf=n}function w_(n){return lf.loadJS(n)}function H5(){return lf.recaptchaEnterpriseScript}function K5(){return lf.gapiScript}function q5(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class G5{constructor(){this.enterprise=new Q5}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Q5{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Y5="recaptcha-enterprise",b_="NO_RECAPTCHA";class X5{constructor(e){this.type=Y5,this.auth=Js(e)}async verify(e="verify",t=!1){async function r(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,h)=>{C5(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const m=new I5(d);return l.tenantId==null?l._agentRecaptchaConfig=m:l._tenantRecaptchaConfigs[l.tenantId]=m,c(m.siteKey)}}).catch(d=>{h(d)})})}function s(l,c,h){const d=window.grecaptcha;Ax(d)?d.enterprise.ready(()=>{d.enterprise.execute(l,{action:e}).then(m=>{c(m)}).catch(()=>{c(b_)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new G5().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{r(this.auth).then(h=>{if(!t&&Ax(window.grecaptcha))s(h,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let d=H5();d.length!==0&&(d+=h),w_(d).then(()=>{s(h,l,c)}).catch(m=>{c(m)})}}).catch(h=>{c(h)})})}}async function Vx(n,e,t,r=!1,s=!1){const l=new X5(n);let c;if(s)c=b_;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const h={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const d=h.phoneEnrollmentInfo.phoneNumber,m=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const d=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return r?Object.assign(h,{captchaResp:c}):Object.assign(h,{captchaResponse:c}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function dg(n,e,t,r,s){var l;if((l=n._getRecaptchaConfig())!=null&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Vx(n,e,t,t==="getOobCode");return r(n,c)}else return r(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await Vx(n,e,t,t==="getOobCode");return r(n,h)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J5(n,e){const t=gy(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),l=t.getOptions();if(Ui(l,e??{}))return s;dr(s,"already-initialized")}return t.initialize({options:e})}function Z5(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Di);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function eR(n,e,t){const r=Js(n);Ie(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,l=k_(e),{host:c,port:h}=tR(e),d=h===null?"":`:${h}`,m={url:`${l}//${c}${d}/`},g=Object.freeze({host:c,port:h,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Ie(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ie(Ui(m,r.config.emulator)&&Ui(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=m,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,kl(c)?(Yk(`${l}//${c}${d}`),Xk("Auth",!0)):nR()}function k_(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function tR(n){const e=k_(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const l=s[1];return{host:l,port:Lx(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:Lx(c)}}}function Lx(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function nR(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Mi("not implemented")}_getIdTokenResponse(e){return Mi("not implemented")}_linkToIdToken(e,t){return Mi("not implemented")}_getReauthenticationResolver(e){return Mi("not implemented")}}async function rR(n,e){return Yi(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iR(n,e){return yu(n,"POST","/v1/accounts:signInWithPassword",Xs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sR(n,e){return yu(n,"POST","/v1/accounts:signInWithEmailLink",Xs(n,e))}async function oR(n,e){return yu(n,"POST","/v1/accounts:signInWithEmailLink",Xs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc extends ky{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Zc(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Zc(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dg(e,t,"signInWithPassword",iR);case"emailLink":return sR(e,{email:this._email,oobCode:this._password});default:dr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dg(e,r,"signUpPassword",rR);case"emailLink":return oR(e,{idToken:t,email:this._email,oobCode:this._password});default:dr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Za(n,e){return yu(n,"POST","/v1/accounts:signInWithIdp",Xs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR="http://localhost";class Wo extends ky{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Wo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):dr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...l}=t;if(!r||!s)return null;const c=new Wo(r,s);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Za(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Za(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Za(e,t)}buildRequest(){const e={requestUri:aR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=pu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lR(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function cR(n){const e=Nc(Mc(n)).link,t=e?Nc(Mc(e)).deep_link_id:null,r=Nc(Mc(n)).deep_link_id;return(r?Nc(Mc(r)).link:null)||r||t||e||n}class _y{constructor(e){const t=Nc(Mc(e)),r=t.apiKey??null,s=t.oobCode??null,l=lR(t.mode??null);Ie(r&&s&&l,"argument-error"),this.apiKey=r,this.operation=l,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=cR(e);try{return new _y(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(){this.providerId=Sl.PROVIDER_ID}static credential(e,t){return Zc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=_y.parseLink(t);return Ie(r,"argument-error"),Zc._fromEmailAndCode(e,r.code,r.tenantId)}}Sl.PROVIDER_ID="password";Sl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Sl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu extends Sy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As extends vu{constructor(){super("facebook.com")}static credential(e){return Wo._fromParams({providerId:As.PROVIDER_ID,signInMethod:As.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return As.credentialFromTaggedObject(e)}static credentialFromError(e){return As.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return As.credential(e.oauthAccessToken)}catch{return null}}}As.FACEBOOK_SIGN_IN_METHOD="facebook.com";As.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi extends vu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Wo._fromParams({providerId:Pi.PROVIDER_ID,signInMethod:Pi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Pi.credentialFromTaggedObject(e)}static credentialFromError(e){return Pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Pi.credential(t,r)}catch{return null}}}Pi.GOOGLE_SIGN_IN_METHOD="google.com";Pi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs extends vu{constructor(){super("github.com")}static credential(e){return Wo._fromParams({providerId:Rs.PROVIDER_ID,signInMethod:Rs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Rs.credentialFromTaggedObject(e)}static credentialFromError(e){return Rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Rs.credential(e.oauthAccessToken)}catch{return null}}}Rs.GITHUB_SIGN_IN_METHOD="github.com";Rs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps extends vu{constructor(){super("twitter.com")}static credential(e,t){return Wo._fromParams({providerId:Ps.PROVIDER_ID,signInMethod:Ps.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ps.credentialFromTaggedObject(e)}static credentialFromError(e){return Ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Ps.credential(t,r)}catch{return null}}}Ps.TWITTER_SIGN_IN_METHOD="twitter.com";Ps.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uR(n,e){return yu(n,"POST","/v1/accounts:signUp",Xs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const l=await Ar._fromIdTokenResponse(e,r,s),c=Ox(r);return new $o({user:l,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=Ox(r);return new $o({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function Ox(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh extends Qi{constructor(e,t,r,s){super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Rh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new Rh(e,t,r,s)}}function __(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Rh._fromErrorAndOperation(n,l,e,r):l})}async function dR(n,e,t=!1){const r=await ol(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return $o._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hR(n,e,t=!1){const{auth:r}=n;if(Kn(r.app))return Promise.reject(Li(r));const s="reauthenticate";try{const l=await ol(n,__(r,s,e,n),t);Ie(l.idToken,r,"internal-error");const c=wy(l.idToken);Ie(c,r,"internal-error");const{sub:h}=c;return Ie(n.uid===h,r,"user-mismatch"),$o._forOperation(n,s,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&dr(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S_(n,e,t=!1){if(Kn(n.app))return Promise.reject(Li(n));const r="signIn",s=await __(n,r,e),l=await $o._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(l.user),l}async function fR(n,e){return S_(Js(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E_(n){const e=Js(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function mR(n,e,t){if(Kn(n.app))return Promise.reject(Li(n));const r=Js(n),c=await dg(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",uR).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&E_(n),d}),h=await $o._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(h.user),h}function pR(n,e,t){return Kn(n.app)?Promise.reject(Li(n)):fR(Pt(n),Sl.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&E_(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gR(n,e){return Yi(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yR(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Pt(n),l={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=await ol(r,gR(r.auth,l));r.displayName=c.displayName||null,r.photoURL=c.photoUrl||null;const h=r.providerData.find(({providerId:d})=>d==="password");h&&(h.displayName=r.displayName,h.photoURL=r.photoURL),await r._updateTokensIfNecessary(c)}function vR(n,e,t,r){return Pt(n).onIdTokenChanged(e,t,r)}function xR(n,e,t){return Pt(n).beforeAuthStateChanged(e,t)}function wR(n,e,t,r){return Pt(n).onAuthStateChanged(e,t,r)}function bR(n){return Pt(n).signOut()}const Ph="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ph,"1"),this.storage.removeItem(Ph),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR=1e3,_R=10;class I_ extends T_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=v_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,h,d)=>{this.notifyListeners(c,d)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);O5()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,_R):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},kR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}I_.type="LOCAL";const SR=I_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_ extends T_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}C_.type="SESSION";const j_=C_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ER(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new cf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:l}=t.data,c=this.handlersMap[s];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const h=Array.from(c).map(async m=>m(t.origin,l)),d=await ER(h);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}cf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ey(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let l,c;return new Promise((h,d)=>{const m=Ey("",20);s.port1.start();const g=setTimeout(()=>{d(new Error("unsupported_event"))},r);c={messageChannel:s,onMessage(y){const x=y;if(x.data.eventId===m)switch(x.data.status){case"ack":clearTimeout(g),l=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),h(x.data.response);break;default:clearTimeout(g),clearTimeout(l),d(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function si(){return window}function IR(n){si().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A_(){return typeof si().WorkerGlobalScope<"u"&&typeof si().importScripts=="function"}async function CR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function jR(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function AR(){return A_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R_="firebaseLocalStorageDb",RR=1,Nh="firebaseLocalStorage",P_="fbase_key";class xu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function uf(n,e){return n.transaction([Nh],e?"readwrite":"readonly").objectStore(Nh)}function PR(){const n=indexedDB.deleteDatabase(R_);return new xu(n).toPromise()}function hg(){const n=indexedDB.open(R_,RR);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Nh,{keyPath:P_})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Nh)?e(r):(r.close(),await PR(),e(await hg()))})})}async function Bx(n,e,t){const r=uf(n,!0).put({[P_]:e,value:t});return new xu(r).toPromise()}async function NR(n,e){const t=uf(n,!1).get(e),r=await new xu(t).toPromise();return r===void 0?null:r.value}function zx(n,e){const t=uf(n,!0).delete(e);return new xu(t).toPromise()}const MR=800,DR=3;class N_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await hg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>DR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return A_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=cf._getInstance(AR()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await CR(),!this.activeServiceWorker)return;this.sender=new TR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||jR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await hg();return await Bx(e,Ph,"1"),await zx(e,Ph),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Bx(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>NR(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>zx(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const l=uf(s,!1).getAll();return new xu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:l}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(l)&&(this.notifyListeners(s,l),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),MR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}N_.type="LOCAL";const VR=N_;new gu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M_(n,e){return e?Di(e):(Ie(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty extends ky{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Za(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Za(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Za(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function LR(n){return S_(n.auth,new Ty(n),n.bypassAuthState)}function OR(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),hR(t,new Ty(n),n.bypassAuthState)}async function BR(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),dR(t,new Ty(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{constructor(e,t,r,s,l=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:l,error:c,type:h}=e;if(c){this.reject(c);return}const d={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return LR;case"linkViaPopup":case"linkViaRedirect":return BR;case"reauthViaPopup":case"reauthViaRedirect":return OR;default:dr(this.auth,"internal-error")}}resolve(e){$i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR=new gu(2e3,1e4);async function FR(n,e,t){if(Kn(n.app))return Promise.reject(Rr(n,"operation-not-supported-in-this-environment"));const r=Js(n);v5(n,e,Sy);const s=M_(r,t);return new Vo(r,"signInViaPopup",e,s).executeNotNull()}class Vo extends D_{constructor(e,t,r,s,l){super(e,t,s,l),this.provider=r,this.authWindow=null,this.pollId=null,Vo.currentPopupAction&&Vo.currentPopupAction.cancel(),Vo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){$i(this.filter.length===1,"Popup operations only handle one event");const e=Ey();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Rr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Rr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Vo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if((r=(t=this.authWindow)==null?void 0:t.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Rr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,zR.get())};e()}}Vo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR="pendingRedirect",fh=new Map;class WR extends D_{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=fh.get(this.auth._key());if(!e){try{const r=await $R(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}fh.set(this.auth._key(),e)}return this.bypassAuthState||fh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function $R(n,e){const t=qR(e),r=KR(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function HR(n,e){fh.set(n._key(),e)}function KR(n){return Di(n._redirectPersistence)}function qR(n){return hh(UR,n.config.apiKey,n.name)}async function GR(n,e,t=!1){if(Kn(n.app))return Promise.reject(Li(n));const r=Js(n),s=M_(r,e),c=await new WR(r,s,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR=600*1e3;class YR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!XR(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!V_(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";t.onError(Rr(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=QR&&this.cachedEventUids.clear(),this.cachedEventUids.has(Fx(e))}saveEventToCache(e){this.cachedEventUids.add(Fx(e)),this.lastProcessedEventTime=Date.now()}}function Fx(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function V_({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function XR(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return V_(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JR(n,e={}){return Yi(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,eP=/^https?/;async function tP(n){if(n.config.emulator)return;const{authorizedDomains:e}=await JR(n);for(const t of e)try{if(nP(t))return}catch{}dr(n,"unauthorized-domain")}function nP(n){const e=cg(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!eP.test(t))return!1;if(ZR.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rP=new gu(3e4,6e4);function Ux(){const n=si().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function iP(n){return new Promise((e,t)=>{var s,l,c;function r(){Ux(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ux(),t(Rr(n,"network-request-failed"))},timeout:rP.get()})}if((l=(s=si().gapi)==null?void 0:s.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((c=si().gapi)!=null&&c.load)r();else{const h=q5("iframefcb");return si()[h]=()=>{gapi.load?r():t(Rr(n,"network-request-failed"))},w_(`${K5()}?onload=${h}`).catch(d=>t(d))}}).catch(e=>{throw mh=null,e})}let mh=null;function sP(n){return mh=mh||iP(n),mh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oP=new gu(5e3,15e3),aP="__/auth/iframe",lP="emulator/auth/iframe",cP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},uP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function dP(n){const e=n.config;Ie(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?xy(e,lP):`https://${n.config.authDomain}/${aP}`,r={apiKey:e.apiKey,appName:n.name,v:_l},s=uP.get(n.config.apiHost);s&&(r.eid=s);const l=n._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${pu(r).slice(1)}`}async function hP(n){const e=await sP(n),t=si().gapi;return Ie(t,n,"internal-error"),e.open({where:document.body,url:dP(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:cP,dontclear:!0},r=>new Promise(async(s,l)=>{await r.restyle({setHideOnLeave:!1});const c=Rr(n,"network-request-failed"),h=si().setTimeout(()=>{l(c)},oP.get());function d(){si().clearTimeout(h),s(r)}r.ping(d).then(d,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},mP=500,pP=600,gP="_blank",yP="http://localhost";class Wx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function vP(n,e,t,r=mP,s=pP){const l=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const d={...fP,width:r.toString(),height:s.toString(),top:l,left:c},m=yn().toLowerCase();t&&(h=f_(m)?gP:t),d_(m)&&(e=e||yP,d.scrollbars="yes");const g=Object.entries(d).reduce((x,[T,k])=>`${x}${T}=${k},`,"");if(L5(m)&&h!=="_self")return xP(e||"",h),new Wx(null);const y=window.open(e||"",h,g);Ie(y,n,"popup-blocked");try{y.focus()}catch{}return new Wx(y)}function xP(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP="__/auth/handler",bP="emulator/auth/handler",kP=encodeURIComponent("fac");async function $x(n,e,t,r,s,l){Ie(n.config.authDomain,n,"auth-domain-config-required"),Ie(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:_l,eventId:s};if(e instanceof Sy){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",iA(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,y]of Object.entries({}))c[g]=y}if(e instanceof vu){const g=e.getScopes().filter(y=>y!=="");g.length>0&&(c.scopes=g.join(","))}n.tenantId&&(c.tid=n.tenantId);const h=c;for(const g of Object.keys(h))h[g]===void 0&&delete h[g];const d=await n._getAppCheckToken(),m=d?`#${kP}=${encodeURIComponent(d)}`:"";return`${_P(n)}?${pu(h).slice(1)}${m}`}function _P({config:n}){return n.emulator?xy(n,bP):`https://${n.authDomain}/${wP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ep="webStorageSupport";class SP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=j_,this._completeRedirectFn=GR,this._overrideRedirectResult=HR}async _openPopup(e,t,r,s){var c;$i((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await $x(e,t,r,cg(),s);return vP(e,l,Ey())}async _openRedirect(e,t,r,s){await this._originValidation(e);const l=await $x(e,t,r,cg(),s);return IR(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:l}=this.eventManagers[t];return s?Promise.resolve(s):($i(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await hP(e),r=new YR(e);return t.register("authEvent",s=>(Ie(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ep,{type:Ep},s=>{var c;const l=(c=s==null?void 0:s[0])==null?void 0:c[Ep];l!==void 0&&t(!!l),dr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=tP(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return v_()||h_()||by()}}const EP=SP;var Hx="@firebase/auth",Kx="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IP(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function CP(n){sl(new Uo("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=r.options;Ie(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:c,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:x_(n)},m=new W5(r,s,l,d);return Z5(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),sl(new Uo("auth-internal",e=>{const t=Js(e.getProvider("auth").getImmediate());return(r=>new TP(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ls(Hx,Kx,IP(n)),Ls(Hx,Kx,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jP=300,AP=Qk("authIdTokenMaxAge")||jP;let qx=null;const RP=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>AP)return;const s=t==null?void 0:t.token;qx!==s&&(qx=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function PP(n=t_()){const e=gy(n,"auth");if(e.isInitialized())return e.getImmediate();const t=J5(n,{popupRedirectResolver:EP,persistence:[VR,SR,j_]}),r=Qk("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const c=RP(l.toString());xR(t,c,()=>c(t.currentUser)),vR(t,h=>c(h))}}const s=qk("auth");return s&&eR(t,`http://${s}`),t}function NP(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}$5({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const l=Rr("internal-error");l.customData=s,t(l)},r.type="text/javascript",r.charset="UTF-8",NP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});CP("Browser");var Gx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Os,L_;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,E){function R(){}R.prototype=E.prototype,I.F=E.prototype,I.prototype=new R,I.prototype.constructor=I,I.D=function(V,B,F){for(var D=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)D[_e-2]=arguments[_e];return E.prototype[B].apply(V,D)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,E,R){R||(R=0);const V=Array(16);if(typeof E=="string")for(var B=0;B<16;++B)V[B]=E.charCodeAt(R++)|E.charCodeAt(R++)<<8|E.charCodeAt(R++)<<16|E.charCodeAt(R++)<<24;else for(B=0;B<16;++B)V[B]=E[R++]|E[R++]<<8|E[R++]<<16|E[R++]<<24;E=I.g[0],R=I.g[1],B=I.g[2];let F=I.g[3],D;D=E+(F^R&(B^F))+V[0]+3614090360&4294967295,E=R+(D<<7&4294967295|D>>>25),D=F+(B^E&(R^B))+V[1]+3905402710&4294967295,F=E+(D<<12&4294967295|D>>>20),D=B+(R^F&(E^R))+V[2]+606105819&4294967295,B=F+(D<<17&4294967295|D>>>15),D=R+(E^B&(F^E))+V[3]+3250441966&4294967295,R=B+(D<<22&4294967295|D>>>10),D=E+(F^R&(B^F))+V[4]+4118548399&4294967295,E=R+(D<<7&4294967295|D>>>25),D=F+(B^E&(R^B))+V[5]+1200080426&4294967295,F=E+(D<<12&4294967295|D>>>20),D=B+(R^F&(E^R))+V[6]+2821735955&4294967295,B=F+(D<<17&4294967295|D>>>15),D=R+(E^B&(F^E))+V[7]+4249261313&4294967295,R=B+(D<<22&4294967295|D>>>10),D=E+(F^R&(B^F))+V[8]+1770035416&4294967295,E=R+(D<<7&4294967295|D>>>25),D=F+(B^E&(R^B))+V[9]+2336552879&4294967295,F=E+(D<<12&4294967295|D>>>20),D=B+(R^F&(E^R))+V[10]+4294925233&4294967295,B=F+(D<<17&4294967295|D>>>15),D=R+(E^B&(F^E))+V[11]+2304563134&4294967295,R=B+(D<<22&4294967295|D>>>10),D=E+(F^R&(B^F))+V[12]+1804603682&4294967295,E=R+(D<<7&4294967295|D>>>25),D=F+(B^E&(R^B))+V[13]+4254626195&4294967295,F=E+(D<<12&4294967295|D>>>20),D=B+(R^F&(E^R))+V[14]+2792965006&4294967295,B=F+(D<<17&4294967295|D>>>15),D=R+(E^B&(F^E))+V[15]+1236535329&4294967295,R=B+(D<<22&4294967295|D>>>10),D=E+(B^F&(R^B))+V[1]+4129170786&4294967295,E=R+(D<<5&4294967295|D>>>27),D=F+(R^B&(E^R))+V[6]+3225465664&4294967295,F=E+(D<<9&4294967295|D>>>23),D=B+(E^R&(F^E))+V[11]+643717713&4294967295,B=F+(D<<14&4294967295|D>>>18),D=R+(F^E&(B^F))+V[0]+3921069994&4294967295,R=B+(D<<20&4294967295|D>>>12),D=E+(B^F&(R^B))+V[5]+3593408605&4294967295,E=R+(D<<5&4294967295|D>>>27),D=F+(R^B&(E^R))+V[10]+38016083&4294967295,F=E+(D<<9&4294967295|D>>>23),D=B+(E^R&(F^E))+V[15]+3634488961&4294967295,B=F+(D<<14&4294967295|D>>>18),D=R+(F^E&(B^F))+V[4]+3889429448&4294967295,R=B+(D<<20&4294967295|D>>>12),D=E+(B^F&(R^B))+V[9]+568446438&4294967295,E=R+(D<<5&4294967295|D>>>27),D=F+(R^B&(E^R))+V[14]+3275163606&4294967295,F=E+(D<<9&4294967295|D>>>23),D=B+(E^R&(F^E))+V[3]+4107603335&4294967295,B=F+(D<<14&4294967295|D>>>18),D=R+(F^E&(B^F))+V[8]+1163531501&4294967295,R=B+(D<<20&4294967295|D>>>12),D=E+(B^F&(R^B))+V[13]+2850285829&4294967295,E=R+(D<<5&4294967295|D>>>27),D=F+(R^B&(E^R))+V[2]+4243563512&4294967295,F=E+(D<<9&4294967295|D>>>23),D=B+(E^R&(F^E))+V[7]+1735328473&4294967295,B=F+(D<<14&4294967295|D>>>18),D=R+(F^E&(B^F))+V[12]+2368359562&4294967295,R=B+(D<<20&4294967295|D>>>12),D=E+(R^B^F)+V[5]+4294588738&4294967295,E=R+(D<<4&4294967295|D>>>28),D=F+(E^R^B)+V[8]+2272392833&4294967295,F=E+(D<<11&4294967295|D>>>21),D=B+(F^E^R)+V[11]+1839030562&4294967295,B=F+(D<<16&4294967295|D>>>16),D=R+(B^F^E)+V[14]+4259657740&4294967295,R=B+(D<<23&4294967295|D>>>9),D=E+(R^B^F)+V[1]+2763975236&4294967295,E=R+(D<<4&4294967295|D>>>28),D=F+(E^R^B)+V[4]+1272893353&4294967295,F=E+(D<<11&4294967295|D>>>21),D=B+(F^E^R)+V[7]+4139469664&4294967295,B=F+(D<<16&4294967295|D>>>16),D=R+(B^F^E)+V[10]+3200236656&4294967295,R=B+(D<<23&4294967295|D>>>9),D=E+(R^B^F)+V[13]+681279174&4294967295,E=R+(D<<4&4294967295|D>>>28),D=F+(E^R^B)+V[0]+3936430074&4294967295,F=E+(D<<11&4294967295|D>>>21),D=B+(F^E^R)+V[3]+3572445317&4294967295,B=F+(D<<16&4294967295|D>>>16),D=R+(B^F^E)+V[6]+76029189&4294967295,R=B+(D<<23&4294967295|D>>>9),D=E+(R^B^F)+V[9]+3654602809&4294967295,E=R+(D<<4&4294967295|D>>>28),D=F+(E^R^B)+V[12]+3873151461&4294967295,F=E+(D<<11&4294967295|D>>>21),D=B+(F^E^R)+V[15]+530742520&4294967295,B=F+(D<<16&4294967295|D>>>16),D=R+(B^F^E)+V[2]+3299628645&4294967295,R=B+(D<<23&4294967295|D>>>9),D=E+(B^(R|~F))+V[0]+4096336452&4294967295,E=R+(D<<6&4294967295|D>>>26),D=F+(R^(E|~B))+V[7]+1126891415&4294967295,F=E+(D<<10&4294967295|D>>>22),D=B+(E^(F|~R))+V[14]+2878612391&4294967295,B=F+(D<<15&4294967295|D>>>17),D=R+(F^(B|~E))+V[5]+4237533241&4294967295,R=B+(D<<21&4294967295|D>>>11),D=E+(B^(R|~F))+V[12]+1700485571&4294967295,E=R+(D<<6&4294967295|D>>>26),D=F+(R^(E|~B))+V[3]+2399980690&4294967295,F=E+(D<<10&4294967295|D>>>22),D=B+(E^(F|~R))+V[10]+4293915773&4294967295,B=F+(D<<15&4294967295|D>>>17),D=R+(F^(B|~E))+V[1]+2240044497&4294967295,R=B+(D<<21&4294967295|D>>>11),D=E+(B^(R|~F))+V[8]+1873313359&4294967295,E=R+(D<<6&4294967295|D>>>26),D=F+(R^(E|~B))+V[15]+4264355552&4294967295,F=E+(D<<10&4294967295|D>>>22),D=B+(E^(F|~R))+V[6]+2734768916&4294967295,B=F+(D<<15&4294967295|D>>>17),D=R+(F^(B|~E))+V[13]+1309151649&4294967295,R=B+(D<<21&4294967295|D>>>11),D=E+(B^(R|~F))+V[4]+4149444226&4294967295,E=R+(D<<6&4294967295|D>>>26),D=F+(R^(E|~B))+V[11]+3174756917&4294967295,F=E+(D<<10&4294967295|D>>>22),D=B+(E^(F|~R))+V[2]+718787259&4294967295,B=F+(D<<15&4294967295|D>>>17),D=R+(F^(B|~E))+V[9]+3951481745&4294967295,I.g[0]=I.g[0]+E&4294967295,I.g[1]=I.g[1]+(B+(D<<21&4294967295|D>>>11))&4294967295,I.g[2]=I.g[2]+B&4294967295,I.g[3]=I.g[3]+F&4294967295}r.prototype.v=function(I,E){E===void 0&&(E=I.length);const R=E-this.blockSize,V=this.C;let B=this.h,F=0;for(;F<E;){if(B==0)for(;F<=R;)s(this,I,F),F+=this.blockSize;if(typeof I=="string"){for(;F<E;)if(V[B++]=I.charCodeAt(F++),B==this.blockSize){s(this,V),B=0;break}}else for(;F<E;)if(V[B++]=I[F++],B==this.blockSize){s(this,V),B=0;break}}this.h=B,this.o+=E},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var E=1;E<I.length-8;++E)I[E]=0;E=this.o*8;for(var R=I.length-8;R<I.length;++R)I[R]=E&255,E/=256;for(this.v(I),I=Array(16),E=0,R=0;R<4;++R)for(let V=0;V<32;V+=8)I[E++]=this.g[R]>>>V&255;return I};function l(I,E){var R=h;return Object.prototype.hasOwnProperty.call(R,I)?R[I]:R[I]=E(I)}function c(I,E){this.h=E;const R=[];let V=!0;for(let B=I.length-1;B>=0;B--){const F=I[B]|0;V&&F==E||(R[B]=F,V=!1)}this.g=R}var h={};function d(I){return-128<=I&&I<128?l(I,function(E){return new c([E|0],E<0?-1:0)}):new c([I|0],I<0?-1:0)}function m(I){if(isNaN(I)||!isFinite(I))return y;if(I<0)return C(m(-I));const E=[];let R=1;for(let V=0;I>=R;V++)E[V]=I/R|0,R*=4294967296;return new c(E,0)}function g(I,E){if(I.length==0)throw Error("number format error: empty string");if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(I.charAt(0)=="-")return C(g(I.substring(1),E));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=m(Math.pow(E,8));let V=y;for(let F=0;F<I.length;F+=8){var B=Math.min(8,I.length-F);const D=parseInt(I.substring(F,F+B),E);B<8?(B=m(Math.pow(E,B)),V=V.j(B).add(m(D))):(V=V.j(R),V=V.add(m(D)))}return V}var y=d(0),x=d(1),T=d(16777216);n=c.prototype,n.m=function(){if(S(this))return-C(this).m();let I=0,E=1;for(let R=0;R<this.g.length;R++){const V=this.i(R);I+=(V>=0?V:4294967296+V)*E,E*=4294967296}return I},n.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(k(this))return"0";if(S(this))return"-"+C(this).toString(I);const E=m(Math.pow(I,6));var R=this;let V="";for(;;){const B=U(R,E).g;R=N(R,B.j(E));let F=((R.g.length>0?R.g[0]:R.h)>>>0).toString(I);if(R=B,k(R))return F+V;for(;F.length<6;)F="0"+F;V=F+V}},n.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function k(I){if(I.h!=0)return!1;for(let E=0;E<I.g.length;E++)if(I.g[E]!=0)return!1;return!0}function S(I){return I.h==-1}n.l=function(I){return I=N(this,I),S(I)?-1:k(I)?0:1};function C(I){const E=I.g.length,R=[];for(let V=0;V<E;V++)R[V]=~I.g[V];return new c(R,~I.h).add(x)}n.abs=function(){return S(this)?C(this):this},n.add=function(I){const E=Math.max(this.g.length,I.g.length),R=[];let V=0;for(let B=0;B<=E;B++){let F=V+(this.i(B)&65535)+(I.i(B)&65535),D=(F>>>16)+(this.i(B)>>>16)+(I.i(B)>>>16);V=D>>>16,F&=65535,D&=65535,R[B]=D<<16|F}return new c(R,R[R.length-1]&-2147483648?-1:0)};function N(I,E){return I.add(C(E))}n.j=function(I){if(k(this)||k(I))return y;if(S(this))return S(I)?C(this).j(C(I)):C(C(this).j(I));if(S(I))return C(this.j(C(I)));if(this.l(T)<0&&I.l(T)<0)return m(this.m()*I.m());const E=this.g.length+I.g.length,R=[];for(var V=0;V<2*E;V++)R[V]=0;for(V=0;V<this.g.length;V++)for(let B=0;B<I.g.length;B++){const F=this.i(V)>>>16,D=this.i(V)&65535,_e=I.i(B)>>>16,Ve=I.i(B)&65535;R[2*V+2*B]+=D*Ve,L(R,2*V+2*B),R[2*V+2*B+1]+=F*Ve,L(R,2*V+2*B+1),R[2*V+2*B+1]+=D*_e,L(R,2*V+2*B+1),R[2*V+2*B+2]+=F*_e,L(R,2*V+2*B+2)}for(I=0;I<E;I++)R[I]=R[2*I+1]<<16|R[2*I];for(I=E;I<2*E;I++)R[I]=0;return new c(R,0)};function L(I,E){for(;(I[E]&65535)!=I[E];)I[E+1]+=I[E]>>>16,I[E]&=65535,E++}function M(I,E){this.g=I,this.h=E}function U(I,E){if(k(E))throw Error("division by zero");if(k(I))return new M(y,y);if(S(I))return E=U(C(I),E),new M(C(E.g),C(E.h));if(S(E))return E=U(I,C(E)),new M(C(E.g),E.h);if(I.g.length>30){if(S(I)||S(E))throw Error("slowDivide_ only works with positive integers.");for(var R=x,V=E;V.l(I)<=0;)R=$(R),V=$(V);var B=G(R,1),F=G(V,1);for(V=G(V,2),R=G(R,2);!k(V);){var D=F.add(V);D.l(I)<=0&&(B=B.add(R),F=D),V=G(V,1),R=G(R,1)}return E=N(I,B.j(E)),new M(B,E)}for(B=y;I.l(E)>=0;){for(R=Math.max(1,Math.floor(I.m()/E.m())),V=Math.ceil(Math.log(R)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),F=m(R),D=F.j(E);S(D)||D.l(I)>0;)R-=V,F=m(R),D=F.j(E);k(F)&&(F=x),B=B.add(F),I=N(I,D)}return new M(B,I)}n.B=function(I){return U(this,I).h},n.and=function(I){const E=Math.max(this.g.length,I.g.length),R=[];for(let V=0;V<E;V++)R[V]=this.i(V)&I.i(V);return new c(R,this.h&I.h)},n.or=function(I){const E=Math.max(this.g.length,I.g.length),R=[];for(let V=0;V<E;V++)R[V]=this.i(V)|I.i(V);return new c(R,this.h|I.h)},n.xor=function(I){const E=Math.max(this.g.length,I.g.length),R=[];for(let V=0;V<E;V++)R[V]=this.i(V)^I.i(V);return new c(R,this.h^I.h)};function $(I){const E=I.g.length+1,R=[];for(let V=0;V<E;V++)R[V]=I.i(V)<<1|I.i(V-1)>>>31;return new c(R,I.h)}function G(I,E){const R=E>>5;E%=32;const V=I.g.length-R,B=[];for(let F=0;F<V;F++)B[F]=E>0?I.i(F+R)>>>E|I.i(F+R+1)<<32-E:I.i(F+R);return new c(B,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,L_=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=g,Os=c}).apply(typeof Gx<"u"?Gx:typeof self<"u"?self:typeof window<"u"?window:{});var Xd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var O_,Dc,B_,ph,fg,z_,F_,U_;(function(){var n,e=Object.defineProperty;function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xd=="object"&&Xd];for(var b=0;b<f.length;++b){var _=f[b];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=t(this);function s(f,b){if(b)e:{var _=r;f=f.split(".");for(var P=0;P<f.length-1;P++){var q=f[P];if(!(q in _))break e;_=_[q]}f=f[f.length-1],P=_[f],b=b(P),b!=P&&b!=null&&e(_,f,{configurable:!0,writable:!0,value:b})}}s("Symbol.dispose",function(f){return f||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(f){return f||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(f){return f||function(b){var _=[],P;for(P in b)Object.prototype.hasOwnProperty.call(b,P)&&_.push([P,b[P]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function h(f){var b=typeof f;return b=="object"&&f!=null||b=="function"}function d(f,b,_){return f.call.apply(f.bind,arguments)}function m(f,b,_){return m=d,m.apply(null,arguments)}function g(f,b){var _=Array.prototype.slice.call(arguments,1);return function(){var P=_.slice();return P.push.apply(P,arguments),f.apply(this,P)}}function y(f,b){function _(){}_.prototype=b.prototype,f.Z=b.prototype,f.prototype=new _,f.prototype.constructor=f,f.Ob=function(P,q,X){for(var ce=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)ce[Me-2]=arguments[Me];return b.prototype[q].apply(P,ce)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?f=>f&&AsyncContext.Snapshot.wrap(f):f=>f;function T(f){const b=f.length;if(b>0){const _=Array(b);for(let P=0;P<b;P++)_[P]=f[P];return _}return[]}function k(f,b){for(let P=1;P<arguments.length;P++){const q=arguments[P];var _=typeof q;if(_=_!="object"?_:q?Array.isArray(q)?"array":_:"null",_=="array"||_=="object"&&typeof q.length=="number"){_=f.length||0;const X=q.length||0;f.length=_+X;for(let ce=0;ce<X;ce++)f[_+ce]=q[ce]}else f.push(q)}}class S{constructor(b,_){this.i=b,this.j=_,this.h=0,this.g=null}get(){let b;return this.h>0?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function C(f){c.setTimeout(()=>{throw f},0)}function N(){var f=I;let b=null;return f.g&&(b=f.g,f.g=f.g.next,f.g||(f.h=null),b.next=null),b}class L{constructor(){this.h=this.g=null}add(b,_){const P=M.get();P.set(b,_),this.h?this.h.next=P:this.g=P,this.h=P}}var M=new S(()=>new U,f=>f.reset());class U{constructor(){this.next=this.g=this.h=null}set(b,_){this.h=b,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let $,G=!1,I=new L,E=()=>{const f=Promise.resolve(void 0);$=()=>{f.then(R)}};function R(){for(var f;f=N();){try{f.h.call(f.g)}catch(_){C(_)}var b=M;b.j(f),b.h<100&&(b.h++,f.next=b.g,b.g=f)}G=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function B(f,b){this.type=f,this.g=this.target=b,this.defaultPrevented=!1}B.prototype.h=function(){this.defaultPrevented=!0};var F=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var f=!1,b=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const _=()=>{};c.addEventListener("test",_,b),c.removeEventListener("test",_,b)}catch{}return f})();function D(f){return/^[\s\xa0]*$/.test(f)}function _e(f,b){B.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f&&this.init(f,b)}y(_e,B),_e.prototype.init=function(f,b){const _=this.type=f.type,P=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;this.target=f.target||f.srcElement,this.g=b,b=f.relatedTarget,b||(_=="mouseover"?b=f.fromElement:_=="mouseout"&&(b=f.toElement)),this.relatedTarget=b,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=f.pointerType,this.state=f.state,this.i=f,f.defaultPrevented&&_e.Z.h.call(this)},_e.prototype.h=function(){_e.Z.h.call(this);const f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Ve="closure_listenable_"+(Math.random()*1e6|0),it=0;function Te(f,b,_,P,q){this.listener=f,this.proxy=null,this.src=b,this.type=_,this.capture=!!P,this.ha=q,this.key=++it,this.da=this.fa=!1}function ie(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function me(f,b,_){for(const P in f)b.call(_,f[P],P,f)}function le(f,b){for(const _ in f)b.call(void 0,f[_],_,f)}function H(f){const b={};for(const _ in f)b[_]=f[_];return b}const te="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Pe(f,b){let _,P;for(let q=1;q<arguments.length;q++){P=arguments[q];for(_ in P)f[_]=P[_];for(let X=0;X<te.length;X++)_=te[X],Object.prototype.hasOwnProperty.call(P,_)&&(f[_]=P[_])}}function Ae(f){this.src=f,this.g={},this.h=0}Ae.prototype.add=function(f,b,_,P,q){const X=f.toString();f=this.g[X],f||(f=this.g[X]=[],this.h++);const ce=Be(f,b,P,q);return ce>-1?(b=f[ce],_||(b.fa=!1)):(b=new Te(b,this.src,X,!!P,q),b.fa=_,f.push(b)),b};function Le(f,b){const _=b.type;if(_ in f.g){var P=f.g[_],q=Array.prototype.indexOf.call(P,b,void 0),X;(X=q>=0)&&Array.prototype.splice.call(P,q,1),X&&(ie(b),f.g[_].length==0&&(delete f.g[_],f.h--))}}function Be(f,b,_,P){for(let q=0;q<f.length;++q){const X=f[q];if(!X.da&&X.listener==b&&X.capture==!!_&&X.ha==P)return q}return-1}var Qe="closure_lm_"+(Math.random()*1e6|0),He={};function et(f,b,_,P,q){if(Array.isArray(b)){for(let X=0;X<b.length;X++)et(f,b[X],_,P,q);return null}return _=so(_),f&&f[Ve]?f.J(b,_,h(P)?!!P.capture:!1,q):Yt(f,b,_,!1,P,q)}function Yt(f,b,_,P,q,X){if(!b)throw Error("Invalid event type");const ce=h(q)?!!q.capture:!!q;let Me=Et(f);if(Me||(f[Qe]=Me=new Ae(f)),_=Me.add(b,_,P,ce,X),_.proxy)return _;if(P=Ji(),_.proxy=P,P.src=f,P.listener=_,f.addEventListener)F||(q=ce),q===void 0&&(q=!1),f.addEventListener(b.toString(),P,q);else if(f.attachEvent)f.attachEvent(Oe(b.toString()),P);else if(f.addListener&&f.removeListener)f.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Ji(){function f(_){return b.call(f.src,f.listener,_)}const b=Ye;return f}function J(f,b,_,P,q){if(Array.isArray(b))for(var X=0;X<b.length;X++)J(f,b[X],_,P,q);else P=h(P)?!!P.capture:!!P,_=so(_),f&&f[Ve]?(f=f.i,X=String(b).toString(),X in f.g&&(b=f.g[X],_=Be(b,_,P,q),_>-1&&(ie(b[_]),Array.prototype.splice.call(b,_,1),b.length==0&&(delete f.g[X],f.h--)))):f&&(f=Et(f))&&(b=f.g[b.toString()],f=-1,b&&(f=Be(b,_,P,q)),(_=f>-1?b[f]:null)&&be(_))}function be(f){if(typeof f!="number"&&f&&!f.da){var b=f.src;if(b&&b[Ve])Le(b.i,f);else{var _=f.type,P=f.proxy;b.removeEventListener?b.removeEventListener(_,P,f.capture):b.detachEvent?b.detachEvent(Oe(_),P):b.addListener&&b.removeListener&&b.removeListener(P),(_=Et(b))?(Le(_,f),_.h==0&&(_.src=null,b[Qe]=null)):ie(f)}}}function Oe(f){return f in He?He[f]:He[f]="on"+f}function Ye(f,b){if(f.da)f=!0;else{b=new _e(b,this);const _=f.listener,P=f.ha||f.src;f.fa&&be(f),f=_.call(P,b)}return f}function Et(f){return f=f[Qe],f instanceof Ae?f:null}var vn="__closure_events_fn_"+(Math.random()*1e9>>>0);function so(f){return typeof f=="function"?f:(f[vn]||(f[vn]=function(b){return f.handleEvent(b)}),f[vn])}function Nt(){V.call(this),this.i=new Ae(this),this.M=this,this.G=null}y(Nt,V),Nt.prototype[Ve]=!0,Nt.prototype.removeEventListener=function(f,b,_,P){J(this,f,b,_,P)};function Tt(f,b){var _,P=f.G;if(P)for(_=[];P;P=P.G)_.push(P);if(f=f.M,P=b.type||b,typeof b=="string")b=new B(b,f);else if(b instanceof B)b.target=b.target||f;else{var q=b;b=new B(P,f),Pe(b,q)}q=!0;let X,ce;if(_)for(ce=_.length-1;ce>=0;ce--)X=b.g=_[ce],q=yr(X,P,!0,b)&&q;if(X=b.g=f,q=yr(X,P,!0,b)&&q,q=yr(X,P,!1,b)&&q,_)for(ce=0;ce<_.length;ce++)X=b.g=_[ce],q=yr(X,P,!1,b)&&q}Nt.prototype.N=function(){if(Nt.Z.N.call(this),this.i){var f=this.i;for(const b in f.g){const _=f.g[b];for(let P=0;P<_.length;P++)ie(_[P]);delete f.g[b],f.h--}}this.G=null},Nt.prototype.J=function(f,b,_,P){return this.i.add(String(f),b,!1,_,P)},Nt.prototype.K=function(f,b,_,P){return this.i.add(String(f),b,!0,_,P)};function yr(f,b,_,P){if(b=f.i.g[String(b)],!b)return!0;b=b.concat();let q=!0;for(let X=0;X<b.length;++X){const ce=b[X];if(ce&&!ce.da&&ce.capture==_){const Me=ce.listener,It=ce.ha||ce.src;ce.fa&&Le(f.i,ce),q=Me.call(It,P)!==!1&&q}}return q&&!P.defaultPrevented}function Dl(f,b){if(typeof f!="function")if(f&&typeof f.handleEvent=="function")f=m(f.handleEvent,f);else throw Error("Invalid listener argument");return Number(b)>2147483647?-1:c.setTimeout(f,b||0)}function Vl(f){f.g=Dl(()=>{f.g=null,f.i&&(f.i=!1,Vl(f))},f.l);const b=f.h;f.h=null,f.m.apply(null,b)}class Mu extends V{constructor(b,_){super(),this.m=b,this.l=_,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:Vl(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zi(f){V.call(this),this.h=f,this.g={}}y(Zi,V);var Ll=[];function na(f){me(f.g,function(b,_){this.g.hasOwnProperty(_)&&be(b)},f),f.g={}}Zi.prototype.N=function(){Zi.Z.N.call(this),na(this)},Zi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var es=c.JSON.stringify,Du=c.JSON.parse,oo=class{stringify(f){return c.JSON.stringify(f,void 0)}parse(f){return c.JSON.parse(f,void 0)}};function ts(){}function Vu(){}var ns={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ra(){B.call(this,"d")}y(ra,B);function Ol(){B.call(this,"c")}y(Ol,B);var vr={},ia=null;function rs(){return ia=ia||new Nt}vr.Ia="serverreachability";function sa(f){B.call(this,vr.Ia,f)}y(sa,B);function fi(f){const b=rs();Tt(b,new sa(b))}vr.STAT_EVENT="statevent";function mi(f,b){B.call(this,vr.STAT_EVENT,f),this.stat=b}y(mi,B);function wt(f){const b=rs();Tt(b,new mi(b,f))}vr.Ja="timingevent";function Bl(f,b){B.call(this,vr.Ja,f),this.size=b}y(Bl,B);function is(f,b){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){f()},b)}function ss(){this.g=!0}ss.prototype.ua=function(){this.g=!1};function Lu(f,b,_,P,q,X){f.info(function(){if(f.g)if(X){var ce="",Me=X.split("&");for(let tt=0;tt<Me.length;tt++){var It=Me[tt].split("=");if(It.length>1){const Mt=It[0];It=It[1];const Un=Mt.split("_");ce=Un.length>=2&&Un[1]=="type"?ce+(Mt+"="+It+"&"):ce+(Mt+"=redacted&")}}}else ce=null;else ce=X;return"XMLHTTP REQ ("+P+") [attempt "+q+"]: "+b+`
`+_+`
`+ce})}function Ou(f,b,_,P,q,X,ce){f.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+q+"]: "+b+`
`+_+`
`+X+" "+ce})}function Br(f,b,_,P){f.info(function(){return"XMLHTTP TEXT ("+b+"): "+ao(f,_)+(P?" "+P:"")})}function Bu(f,b){f.info(function(){return"TIMEOUT: "+b})}ss.prototype.info=function(){};function ao(f,b){if(!f.g)return b;if(!b)return null;try{const X=JSON.parse(b);if(X){for(f=0;f<X.length;f++)if(Array.isArray(X[f])){var _=X[f];if(!(_.length<2)){var P=_[1];if(Array.isArray(P)&&!(P.length<1)){var q=P[0];if(q!="noop"&&q!="stop"&&q!="close")for(let ce=1;ce<P.length;ce++)P[ce]=""}}}}return es(X)}catch{return b}}var os={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},as={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},zu;function pi(){}y(pi,ts),pi.prototype.g=function(){return new XMLHttpRequest},zu=new pi;function zr(f){return encodeURIComponent(String(f))}function oa(f){var b=1;f=f.split(":");const _=[];for(;b>0&&f.length;)_.push(f.shift()),b--;return f.length&&_.push(f.join(":")),_}function Xn(f,b,_,P){this.j=f,this.i=b,this.l=_,this.S=P||1,this.V=new Zi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Fu}function Fu(){this.i=null,this.g="",this.h=!1}var Uu={},zl={};function xr(f,b,_){f.M=1,f.A=yi(Jn(b)),f.u=_,f.R=!0,Fl(f,null)}function Fl(f,b){f.F=Date.now(),lo(f),f.B=Jn(f.A);var _=f.B,P=f.S;Array.isArray(P)||(P=[String(P)]),Xl(_.i,"t",P),f.C=0,_=f.j.L,f.h=new Fu,f.g=Ju(f.j,_?b:null,!f.u),f.P>0&&(f.O=new Mu(m(f.Y,f,f.g),f.P)),b=f.V,_=f.g,P=f.ba;var q="readystatechange";Array.isArray(q)||(q&&(Ll[0]=q.toString()),q=Ll);for(let X=0;X<q.length;X++){const ce=et(_,q[X],P||b.handleEvent,!1,b.h||b);if(!ce)break;b.g[ce.key]=ce}b=f.J?H(f.J):{},f.u?(f.v||(f.v="POST"),b["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.B,f.v,f.u,b)):(f.v="GET",f.g.ea(f.B,f.v,null,b)),fi(),Lu(f.i,f.v,f.B,f.l,f.S,f.u)}Xn.prototype.ba=function(f){f=f.target;const b=this.O;b&&qr(f)==3?b.j():this.Y(f)},Xn.prototype.Y=function(f){try{if(f==this.g)e:{const Me=qr(this.g),It=this.g.ya(),tt=this.g.ca();if(!(Me<3)&&(Me!=3||this.g&&(this.h.h||this.g.la()||Yu(this.g)))){this.K||Me!=4||It==7||(It==8||tt<=0?fi(3):fi(2)),aa(this);var b=this.g.ca();this.X=b;var _=Wu(this);if(this.o=b==200,Ou(this.i,this.v,this.B,this.l,this.S,Me,b),this.o){if(this.U&&!this.L){t:{if(this.g){var P,q=this.g;if((P=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(P)){var X=P;break t}}X=null}if(f=X)Br(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,lt(this,f);else{this.o=!1,this.m=3,wt(12),gi(this),co(this);break e}}if(this.R){f=!0;let Mt;for(;!this.K&&this.C<_.length;)if(Mt=Hu(this,_),Mt==zl){Me==4&&(this.m=4,wt(14),f=!1),Br(this.i,this.l,null,"[Incomplete Response]");break}else if(Mt==Uu){this.m=4,wt(15),Br(this.i,this.l,_,"[Invalid Chunk]"),f=!1;break}else Br(this.i,this.l,Mt,null),lt(this,Mt);if($u(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Me!=4||_.length!=0||this.h.h||(this.m=1,wt(16),f=!1),this.o=this.o&&f,!f)Br(this.i,this.l,_,"[Invalid Chunked Response]"),gi(this),co(this);else if(_.length>0&&!this.W){this.W=!0;var ce=this.j;ce.g==this&&ce.aa&&!ce.P&&(ce.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),xo(ce),ce.P=!0,wt(11))}}else Br(this.i,this.l,_,null),lt(this,_);Me==4&&gi(this),this.o&&!this.K&&(Me==4?ya(this.j,this):(this.o=!1,lo(this)))}else Zl(this.g),b==400&&_.indexOf("Unknown SID")>0?(this.m=3,wt(12)):(this.m=0,wt(13)),gi(this),co(this)}}}catch{}finally{}};function Wu(f){if(!$u(f))return f.g.la();const b=Yu(f.g);if(b==="")return"";let _="";const P=b.length,q=qr(f.g)==4;if(!f.h.i){if(typeof TextDecoder>"u")return gi(f),co(f),"";f.h.i=new c.TextDecoder}for(let X=0;X<P;X++)f.h.h=!0,_+=f.h.i.decode(b[X],{stream:!(q&&X==P-1)});return b.length=0,f.h.g+=_,f.C=0,f.h.g}function $u(f){return f.g?f.v=="GET"&&f.M!=2&&f.j.Aa:!1}function Hu(f,b){var _=f.C,P=b.indexOf(`
`,_);return P==-1?zl:(_=Number(b.substring(_,P)),isNaN(_)?Uu:(P+=1,P+_>b.length?zl:(b=b.slice(P,P+_),f.C=P+_,b)))}Xn.prototype.cancel=function(){this.K=!0,gi(this)};function lo(f){f.T=Date.now()+f.H,Ul(f,f.H)}function Ul(f,b){if(f.D!=null)throw Error("WatchDog timer not null");f.D=is(m(f.aa,f),b)}function aa(f){f.D&&(c.clearTimeout(f.D),f.D=null)}Xn.prototype.aa=function(){this.D=null;const f=Date.now();f-this.T>=0?(Bu(this.i,this.B),this.M!=2&&(fi(),wt(17)),gi(this),this.m=2,co(this)):Ul(this,this.T-f)};function co(f){f.j.I==0||f.K||ya(f.j,f)}function gi(f){aa(f);var b=f.O;b&&typeof b.dispose=="function"&&b.dispose(),f.O=null,na(f.V),f.g&&(b=f.g,f.g=null,b.abort(),b.dispose())}function lt(f,b){try{var _=f.j;if(_.I!=0&&(_.g==f||$l(_.h,f))){if(!f.L&&$l(_.h,f)&&_.I==3){try{var P=_.Ba.g.parse(b)}catch{P=null}if(Array.isArray(P)&&P.length==3){var q=P;if(q[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<f.F)ga(_),zn(_);else break e;Yr(_),wt(18)}}else _.xa=q[1],0<_.xa-_.K&&q[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=is(m(_.Va,_),6e3));uo(_.h)<=1&&_.ta&&(_.ta=void 0)}else Fn(_,11)}else if((f.L||_.g==f)&&ga(_),!D(b))for(q=_.Ba.g.parse(b),b=0;b<q.length;b++){let tt=q[b];const Mt=tt[0];if(!(Mt<=_.K))if(_.K=Mt,tt=tt[1],_.I==2)if(tt[0]=="c"){_.M=tt[1],_.ba=tt[2];const Un=tt[3];Un!=null&&(_.ka=Un,_.j.info("VER="+_.ka));const ki=tt[4];ki!=null&&(_.za=ki,_.j.info("SVER="+_.za));const Xr=tt[5];Xr!=null&&typeof Xr=="number"&&Xr>0&&(P=1.5*Xr,_.O=P,_.j.info("backChannelRequestTimeoutMs_="+P)),P=_;const Jr=f.g;if(Jr){const wa=Jr.g?Jr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(wa){var X=P.h;X.g||wa.indexOf("spdy")==-1&&wa.indexOf("quic")==-1&&wa.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(ca(X,X.h),X.h=null))}if(P.G){const nc=Jr.g?Jr.g.getResponseHeader("X-HTTP-Session-Id"):null;nc&&(P.wa=nc,Je(P.J,P.G,nc))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-f.F,_.j.info("Handshake RTT: "+_.T+"ms")),P=_;var ce=f;if(P.na=tc(P,P.L?P.ba:null,P.W),ce.L){ho(P.h,ce);var Me=ce,It=P.O;It&&(Me.H=It),Me.D&&(aa(Me),lo(Me)),P.g=ce}else an(P);_.i.length>0&&bi(_)}else tt[0]!="stop"&&tt[0]!="close"||Fn(_,7);else _.I==3&&(tt[0]=="stop"||tt[0]=="close"?tt[0]=="stop"?Fn(_,7):ma(_):tt[0]!="noop"&&_.l&&_.l.qa(tt),_.A=0)}}fi(4)}catch{}}var Uf=class{constructor(f,b){this.g=f,this.map=b}};function la(f){this.l=f||10,c.PerformanceNavigationTiming?(f=c.performance.getEntriesByType("navigation"),f=f.length>0&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Wl(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function uo(f){return f.h?1:f.g?f.g.size:0}function $l(f,b){return f.h?f.h==b:f.g?f.g.has(b):!1}function ca(f,b){f.g?f.g.add(b):f.h=b}function ho(f,b){f.h&&f.h==b?f.h=null:f.g&&f.g.has(b)&&f.g.delete(b)}la.prototype.cancel=function(){if(this.i=Ln(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Ln(f){if(f.h!=null)return f.i.concat(f.h.G);if(f.g!=null&&f.g.size!==0){let b=f.i;for(const _ of f.g.values())b=b.concat(_.G);return b}return T(f.i)}var Ku=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function On(f,b){if(f){f=f.split("&");for(let _=0;_<f.length;_++){const P=f[_].indexOf("=");let q,X=null;P>=0?(q=f[_].substring(0,P),X=f[_].substring(P+1)):q=f[_],b(q,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function Fr(f){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let b;f instanceof Fr?(this.l=f.l,fo(this,f.j),this.o=f.o,this.g=f.g,Ur(this,f.u),this.h=f.h,ls(this,Jl(f.i)),this.m=f.m):f&&(b=String(f).match(Ku))?(this.l=!1,fo(this,b[1]||"",!0),this.o=mo(b[2]||""),this.g=mo(b[3]||"",!0),Ur(this,b[4]),this.h=mo(b[5]||"",!0),ls(this,b[6]||"",!0),this.m=mo(b[7]||"")):(this.l=!1,this.i=new Ke(null,this.l))}Fr.prototype.toString=function(){const f=[];var b=this.j;b&&f.push(po(b,Kl,!0),":");var _=this.g;return(_||b=="file")&&(f.push("//"),(b=this.o)&&f.push(po(b,Kl,!0),"@"),f.push(zr(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&f.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&f.push("/"),f.push(po(_,_.charAt(0)=="/"?go:ql,!0))),(_=this.i.toString())&&f.push("?",_),(_=this.m)&&f.push("#",po(_,Gl)),f.join("")},Fr.prototype.resolve=function(f){const b=Jn(this);let _=!!f.j;_?fo(b,f.j):_=!!f.o,_?b.o=f.o:_=!!f.g,_?b.g=f.g:_=f.u!=null;var P=f.h;if(_)Ur(b,f.u);else if(_=!!f.h){if(P.charAt(0)!="/")if(this.g&&!this.h)P="/"+P;else{var q=b.h.lastIndexOf("/");q!=-1&&(P=b.h.slice(0,q+1)+P)}if(q=P,q==".."||q==".")P="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){P=q.lastIndexOf("/",0)==0,q=q.split("/");const X=[];for(let ce=0;ce<q.length;){const Me=q[ce++];Me=="."?P&&ce==q.length&&X.push(""):Me==".."?((X.length>1||X.length==1&&X[0]!="")&&X.pop(),P&&ce==q.length&&X.push("")):(X.push(Me),P=!0)}P=X.join("/")}else P=q}return _?b.h=P:_=f.i.toString()!=="",_?ls(b,Jl(f.i)):_=!!f.m,_&&(b.m=f.m),b};function Jn(f){return new Fr(f)}function fo(f,b,_){f.j=_?mo(b,!0):b,f.j&&(f.j=f.j.replace(/:$/,""))}function Ur(f,b){if(b){if(b=Number(b),isNaN(b)||b<0)throw Error("Bad port number "+b);f.u=b}else f.u=null}function ls(f,b,_){b instanceof Ke?(f.i=b,da(f.i,f.l)):(_||(b=po(b,Wf)),f.i=new Ke(b,f.l))}function Je(f,b,_){f.i.set(b,_)}function yi(f){return Je(f,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),f}function mo(f,b){return f?b?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function po(f,b,_){return typeof f=="string"?(f=encodeURI(f).replace(b,Hl),_&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Hl(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Kl=/[#\/\?@]/g,ql=/[#\?:]/g,go=/[#\?]/g,Wf=/[#\?@]/g,Gl=/#/g;function Ke(f,b){this.h=this.g=null,this.i=f||null,this.j=!!b}function Wr(f){f.g||(f.g=new Map,f.h=0,f.i&&On(f.i,function(b,_){f.add(decodeURIComponent(b.replace(/\+/g," ")),_)}))}n=Ke.prototype,n.add=function(f,b){Wr(this),this.i=null,f=$r(this,f);let _=this.g.get(f);return _||this.g.set(f,_=[]),_.push(b),this.h+=1,this};function Ql(f,b){Wr(f),b=$r(f,b),f.g.has(b)&&(f.i=null,f.h-=f.g.get(b).length,f.g.delete(b))}function ua(f,b){return Wr(f),b=$r(f,b),f.g.has(b)}n.forEach=function(f,b){Wr(this),this.g.forEach(function(_,P){_.forEach(function(q){f.call(b,q,P,this)},this)},this)};function Yl(f,b){Wr(f);let _=[];if(typeof b=="string")ua(f,b)&&(_=_.concat(f.g.get($r(f,b))));else for(f=Array.from(f.g.values()),b=0;b<f.length;b++)_=_.concat(f[b]);return _}n.set=function(f,b){return Wr(this),this.i=null,f=$r(this,f),ua(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[b]),this.h+=1,this},n.get=function(f,b){return f?(f=Yl(this,f),f.length>0?String(f[0]):b):b};function Xl(f,b,_){Ql(f,b),_.length>0&&(f.i=null,f.g.set($r(f,b),T(_)),f.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],b=Array.from(this.g.keys());for(let P=0;P<b.length;P++){var _=b[P];const q=zr(_);_=Yl(this,_);for(let X=0;X<_.length;X++){let ce=q;_[X]!==""&&(ce+="="+zr(_[X])),f.push(ce)}}return this.i=f.join("&")};function Jl(f){const b=new Ke;return b.i=f.i,f.g&&(b.g=new Map(f.g),b.h=f.h),b}function $r(f,b){return b=String(b),f.j&&(b=b.toLowerCase()),b}function da(f,b){b&&!f.j&&(Wr(f),f.i=null,f.g.forEach(function(_,P){const q=P.toLowerCase();P!=q&&(Ql(this,P),Xl(this,q,_))},f)),f.j=b}function Hr(f,b){const _=new ss;if(c.Image){const P=new Image;P.onload=g(Xt,_,"TestLoadImage: loaded",!0,b,P),P.onerror=g(Xt,_,"TestLoadImage: error",!1,b,P),P.onabort=g(Xt,_,"TestLoadImage: abort",!1,b,P),P.ontimeout=g(Xt,_,"TestLoadImage: timeout",!1,b,P),c.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=f}else b(!1)}function Kr(f,b){const _=new ss,P=new AbortController,q=setTimeout(()=>{P.abort(),Xt(_,"TestPingServer: timeout",!1,b)},1e4);fetch(f,{signal:P.signal}).then(X=>{clearTimeout(q),X.ok?Xt(_,"TestPingServer: ok",!0,b):Xt(_,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(q),Xt(_,"TestPingServer: error",!1,b)})}function Xt(f,b,_,P,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),P(_)}catch{}}function yo(){this.g=new oo}function vi(f){this.i=f.Sb||null,this.h=f.ab||!1}y(vi,ts),vi.prototype.g=function(){return new Bn(this.i,this.h)};function Bn(f,b){Nt.call(this),this.H=f,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}y(Bn,Nt),n=Bn.prototype,n.open=function(f,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=f,this.D=b,this.readyState=1,wr(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const b={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};f&&(b.body=f),(this.H||c).fetch(new Request(this.D,b)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,cs(this)),this.readyState=0},n.Pa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,wr(this)),this.g&&(this.readyState=3,wr(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;qu(this)}else f.text().then(this.Oa.bind(this),this.ga.bind(this))};function qu(f){f.j.read().then(f.Ma.bind(f)).catch(f.ga.bind(f))}n.Ma=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var b=f.value?f.value:new Uint8Array(0);(b=this.B.decode(b,{stream:!f.done}))&&(this.response=this.responseText+=b)}f.done?cs(this):wr(this),this.readyState==3&&qu(this)}},n.Oa=function(f){this.g&&(this.response=this.responseText=f,cs(this))},n.Na=function(f){this.g&&(this.response=f,cs(this))},n.ga=function(){this.g&&cs(this)};function cs(f){f.readyState=4,f.l=null,f.j=null,f.B=null,wr(f)}n.setRequestHeader=function(f,b){this.A.append(f,b)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],b=this.h.entries();for(var _=b.next();!_.done;)_=_.value,f.push(_[0]+": "+_[1]),_=b.next();return f.join(`\r
`)};function wr(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Bn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Gu(f){let b="";return me(f,function(_,P){b+=P,b+=":",b+=_,b+=`\r
`}),b}function ha(f,b,_){e:{for(P in _){var P=!1;break e}P=!0}P||(_=Gu(_),typeof f=="string"?_!=null&&zr(_):Je(f,b,_))}function st(f){Nt.call(this),this.headers=new Map,this.L=f||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}y(st,Nt);var Qu=/^https?$/i,$f=["POST","PUT"];n=st.prototype,n.Fa=function(f){this.H=f},n.ea=function(f,b,_,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);b=b?b.toUpperCase():"GET",this.D=f,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():zu.g(),this.g.onreadystatechange=x(m(this.Ca,this));try{this.B=!0,this.g.open(b,String(f),!0),this.B=!1}catch(X){us(this,X);return}if(f=_||"",_=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var q in P)_.set(q,P[q]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const X of P.keys())_.set(X,P.get(X));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(_.keys()).find(X=>X.toLowerCase()=="content-type"),q=c.FormData&&f instanceof c.FormData,!(Array.prototype.indexOf.call($f,b,void 0)>=0)||P||q||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,ce]of _)this.g.setRequestHeader(X,ce);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(f),this.v=!1}catch(X){us(this,X)}};function us(f,b){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=b,f.o=5,ds(f),wi(f)}function ds(f){f.A||(f.A=!0,Tt(f,"complete"),Tt(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=f||7,Tt(this,"complete"),Tt(this,"abort"),wi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wi(this,!0)),st.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?xi(this):this.Xa())},n.Xa=function(){xi(this)};function xi(f){if(f.h&&typeof l<"u"){if(f.v&&qr(f)==4)setTimeout(f.Ca.bind(f),0);else if(Tt(f,"readystatechange"),qr(f)==4){f.h=!1;try{const X=f.ca();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var _;if(!(_=b)){var P;if(P=X===0){let ce=String(f.D).match(Ku)[1]||null;!ce&&c.self&&c.self.location&&(ce=c.self.location.protocol.slice(0,-1)),P=!Qu.test(ce?ce.toLowerCase():"")}_=P}if(_)Tt(f,"complete"),Tt(f,"success");else{f.o=6;try{var q=qr(f)>2?f.g.statusText:""}catch{q=""}f.l=q+" ["+f.ca()+"]",ds(f)}}finally{wi(f)}}}}function wi(f,b){if(f.g){f.m&&(clearTimeout(f.m),f.m=null);const _=f.g;f.g=null,b||Tt(f,"ready");try{_.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function qr(f){return f.g?f.g.readyState:0}n.ca=function(){try{return qr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(f){if(this.g){var b=this.g.responseText;return f&&b.indexOf(f)==0&&(b=b.substring(f.length)),Du(b)}};function Yu(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.F){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Zl(f){const b={};f=(f.g&&qr(f)>=2&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<f.length;P++){if(D(f[P]))continue;var _=oa(f[P]);const q=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const X=b[q]||[];b[q]=X,X.push(_)}le(b,function(P){return P.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Gr(f,b,_){return _&&_.internalChannelParams&&_.internalChannelParams[f]||b}function fa(f){this.za=0,this.i=[],this.j=new ss,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Gr("failFast",!1,f),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Gr("baseRetryDelayMs",5e3,f),this.Za=Gr("retryDelaySeedMs",1e4,f),this.Ta=Gr("forwardChannelMaxRetries",2,f),this.va=Gr("forwardChannelRequestTimeoutMs",2e4,f),this.ma=f&&f.xmlHttpFactory||void 0,this.Ua=f&&f.Rb||void 0,this.Aa=f&&f.useFetchStreams||!1,this.O=void 0,this.L=f&&f.supportsCrossDomainXhr||!1,this.M="",this.h=new la(f&&f.concurrentRequestLimit),this.Ba=new yo,this.S=f&&f.fastHandshake||!1,this.R=f&&f.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=f&&f.Pb||!1,f&&f.ua&&this.j.ua(),f&&f.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&f&&f.detectBufferingProxy||!1,this.ia=void 0,f&&f.longPollingTimeout&&f.longPollingTimeout>0&&(this.ia=f.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=fa.prototype,n.ka=8,n.I=1,n.connect=function(f,b,_,P){wt(0),this.W=f,this.H=b||{},_&&P!==void 0&&(this.H.OSID=_,this.H.OAID=P),this.F=this.X,this.J=tc(this,null,this.W),bi(this)};function ma(f){if(pa(f),f.I==3){var b=f.V++,_=Jn(f.J);if(Je(_,"SID",f.M),Je(_,"RID",b),Je(_,"TYPE","terminate"),Qr(f,_),b=new Xn(f,f.j,b),b.M=2,b.A=yi(Jn(_)),_=!1,c.navigator&&c.navigator.sendBeacon)try{_=c.navigator.sendBeacon(b.A.toString(),"")}catch{}!_&&c.Image&&(new Image().src=b.A,_=!0),_||(b.g=Ju(b.j,null),b.g.ea(b.A)),b.F=Date.now(),lo(b)}wo(f)}function zn(f){f.g&&(xo(f),f.g.cancel(),f.g=null)}function pa(f){zn(f),f.v&&(c.clearTimeout(f.v),f.v=null),ga(f),f.h.cancel(),f.m&&(typeof f.m=="number"&&c.clearTimeout(f.m),f.m=null)}function bi(f){if(!Wl(f.h)&&!f.m){f.m=!0;var b=f.Ea;$||E(),G||($(),G=!0),I.add(b,f),f.D=0}}function Xu(f,b){return uo(f.h)>=f.h.j-(f.m?1:0)?!1:f.m?(f.i=b.G.concat(f.i),!0):f.I==1||f.I==2||f.D>=(f.Sa?0:f.Ta)?!1:(f.m=is(m(f.Ea,f,b),va(f,f.D)),f.D++,!0)}n.Ea=function(f){if(this.m)if(this.m=null,this.I==1){if(!f){this.V=Math.floor(Math.random()*1e5),f=this.V++;const q=new Xn(this,this.j,f);let X=this.o;if(this.U&&(X?(X=H(X),Pe(X,this.U)):X=this.U),this.u!==null||this.R||(q.J=X,X=null),this.S)e:{for(var b=0,_=0;_<this.i.length;_++){t:{var P=this.i[_];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(b+=P,b>4096){b=_;break e}if(b===4096||_===this.i.length-1){b=_+1;break e}}b=1e3}else b=1e3;b=ec(this,q,b),_=Jn(this.J),Je(_,"RID",f),Je(_,"CVER",22),this.G&&Je(_,"X-HTTP-Session-Id",this.G),Qr(this,_),X&&(this.R?b="headers="+zr(Gu(X))+"&"+b:this.u&&ha(_,this.u,X)),ca(this.h,q),this.Ra&&Je(_,"TYPE","init"),this.S?(Je(_,"$req",b),Je(_,"SID","null"),q.U=!0,xr(q,_,null)):xr(q,_,b),this.I=2}}else this.I==3&&(f?vo(this,f):this.i.length==0||Wl(this.h)||vo(this))};function vo(f,b){var _;b?_=b.l:_=f.V++;const P=Jn(f.J);Je(P,"SID",f.M),Je(P,"RID",_),Je(P,"AID",f.K),Qr(f,P),f.u&&f.o&&ha(P,f.u,f.o),_=new Xn(f,f.j,_,f.D+1),f.u===null&&(_.J=f.o),b&&(f.i=b.G.concat(f.i)),b=ec(f,_,1e3),_.H=Math.round(f.va*.5)+Math.round(f.va*.5*Math.random()),ca(f.h,_),xr(_,P,b)}function Qr(f,b){f.H&&me(f.H,function(_,P){Je(b,P,_)}),f.l&&me({},function(_,P){Je(b,P,_)})}function ec(f,b,_){_=Math.min(f.i.length,_);const P=f.l?m(f.l.Ka,f.l,f):null;e:{var q=f.i;let Me=-1;for(;;){const It=["count="+_];Me==-1?_>0?(Me=q[0].g,It.push("ofs="+Me)):Me=0:It.push("ofs="+Me);let tt=!0;for(let Mt=0;Mt<_;Mt++){var X=q[Mt].g;const Un=q[Mt].map;if(X-=Me,X<0)Me=Math.max(0,q[Mt].g-100),tt=!1;else try{X="req"+X+"_"||"";try{var ce=Un instanceof Map?Un:Object.entries(Un);for(const[ki,Xr]of ce){let Jr=Xr;h(Xr)&&(Jr=es(Xr)),It.push(X+ki+"="+encodeURIComponent(Jr))}}catch(ki){throw It.push(X+"type="+encodeURIComponent("_badmap")),ki}}catch{P&&P(Un)}}if(tt){ce=It.join("&");break e}}ce=void 0}return f=f.i.splice(0,_),b.G=f,ce}function an(f){if(!f.g&&!f.v){f.Y=1;var b=f.Da;$||E(),G||($(),G=!0),I.add(b,f),f.A=0}}function Yr(f){return f.g||f.v||f.A>=3?!1:(f.Y++,f.v=is(m(f.Da,f),va(f,f.A)),f.A++,!0)}n.Da=function(){if(this.v=null,hs(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var f=4*this.T;this.j.info("BP detection timer enabled: "+f),this.B=is(m(this.Wa,this),f)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,wt(10),zn(this),hs(this))};function xo(f){f.B!=null&&(c.clearTimeout(f.B),f.B=null)}function hs(f){f.g=new Xn(f,f.j,"rpc",f.Y),f.u===null&&(f.g.J=f.o),f.g.P=0;var b=Jn(f.na);Je(b,"RID","rpc"),Je(b,"SID",f.M),Je(b,"AID",f.K),Je(b,"CI",f.F?"0":"1"),!f.F&&f.ia&&Je(b,"TO",f.ia),Je(b,"TYPE","xmlhttp"),Qr(f,b),f.u&&f.o&&ha(b,f.u,f.o),f.O&&(f.g.H=f.O);var _=f.g;f=f.ba,_.M=1,_.A=yi(Jn(b)),_.u=null,_.R=!0,Fl(_,f)}n.Va=function(){this.C!=null&&(this.C=null,zn(this),Yr(this),wt(19))};function ga(f){f.C!=null&&(c.clearTimeout(f.C),f.C=null)}function ya(f,b){var _=null;if(f.g==b){ga(f),xo(f),f.g=null;var P=2}else if($l(f.h,b))_=b.G,ho(f.h,b),P=1;else return;if(f.I!=0){if(b.o)if(P==1){_=b.u?b.u.length:0,b=Date.now()-b.F;var q=f.D;P=rs(),Tt(P,new Bl(P,_)),bi(f)}else an(f);else if(q=b.m,q==3||q==0&&b.X>0||!(P==1&&Xu(f,b)||P==2&&Yr(f)))switch(_&&_.length>0&&(b=f.h,b.i=b.i.concat(_)),q){case 1:Fn(f,5);break;case 4:Fn(f,10);break;case 3:Fn(f,6);break;default:Fn(f,2)}}}function va(f,b){let _=f.Qa+Math.floor(Math.random()*f.Za);return f.isActive()||(_*=2),_*b}function Fn(f,b){if(f.j.info("Error code "+b),b==2){var _=m(f.bb,f),P=f.Ua;const q=!P;P=new Fr(P||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||fo(P,"https"),yi(P),q?Hr(P.toString(),_):Kr(P.toString(),_)}else wt(2);f.I=0,f.l&&f.l.pa(b),wo(f),pa(f)}n.bb=function(f){f?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function wo(f){if(f.I=0,f.ja=[],f.l){const b=Ln(f.h);(b.length!=0||f.i.length!=0)&&(k(f.ja,b),k(f.ja,f.i),f.h.i.length=0,T(f.i),f.i.length=0),f.l.oa()}}function tc(f,b,_){var P=_ instanceof Fr?Jn(_):new Fr(_);if(P.g!="")b&&(P.g=b+"."+P.g),Ur(P,P.u);else{var q=c.location;P=q.protocol,b=b?b+"."+q.hostname:q.hostname,q=+q.port;const X=new Fr(null);P&&fo(X,P),b&&(X.g=b),q&&Ur(X,q),_&&(X.h=_),P=X}return _=f.G,b=f.wa,_&&b&&Je(P,_,b),Je(P,"VER",f.ka),Qr(f,P),P}function Ju(f,b,_){if(b&&!f.L)throw Error("Can't create secondary domain capable XhrIo object.");return b=f.Aa&&!f.ma?new st(new vi({ab:_})):new st(f.ma),b.Fa(f.L),b}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Zu(){}n=Zu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function xa(){}xa.prototype.g=function(f,b){return new Jt(f,b)};function Jt(f,b){Nt.call(this),this.g=new fa(b),this.l=f,this.h=b&&b.messageUrlParams||null,f=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(f?f["X-WebChannel-Content-Type"]=b.messageContentType:f={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.sa&&(f?f["X-WebChannel-Client-Profile"]=b.sa:f={"X-WebChannel-Client-Profile":b.sa}),this.g.U=f,(f=b&&b.Qb)&&!D(f)&&(this.g.u=f),this.A=b&&b.supportsCrossDomainXhr||!1,this.v=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!D(b)&&(this.g.G=b,f=this.h,f!==null&&b in f&&(f=this.h,b in f&&delete f[b])),this.j=new fs(this)}y(Jt,Nt),Jt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Jt.prototype.close=function(){ma(this.g)},Jt.prototype.o=function(f){var b=this.g;if(typeof f=="string"){var _={};_.__data__=f,f=_}else this.v&&(_={},_.__data__=es(f),f=_);b.i.push(new Uf(b.Ya++,f)),b.I==3&&bi(b)},Jt.prototype.N=function(){this.g.l=null,delete this.j,ma(this.g),delete this.g,Jt.Z.N.call(this)};function ed(f){ra.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var b=f.__sm__;if(b){e:{for(const _ in b){f=_;break e}f=void 0}(this.i=f)&&(f=this.i,b=b!==null&&f in b?b[f]:void 0),this.data=b}else this.data=f}y(ed,ra);function td(){Ol.call(this),this.status=1}y(td,Ol);function fs(f){this.g=f}y(fs,Zu),fs.prototype.ra=function(){Tt(this.g,"a")},fs.prototype.qa=function(f){Tt(this.g,new ed(f))},fs.prototype.pa=function(f){Tt(this.g,new td)},fs.prototype.oa=function(){Tt(this.g,"b")},xa.prototype.createWebChannel=xa.prototype.g,Jt.prototype.send=Jt.prototype.o,Jt.prototype.open=Jt.prototype.m,Jt.prototype.close=Jt.prototype.close,U_=function(){return new xa},F_=function(){return rs()},z_=vr,fg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},os.NO_ERROR=0,os.TIMEOUT=8,os.HTTP_ERROR=6,ph=os,as.COMPLETE="complete",B_=as,Vu.EventType=ns,ns.OPEN="a",ns.CLOSE="b",ns.ERROR="c",ns.MESSAGE="d",Nt.prototype.listen=Nt.prototype.J,Dc=Vu,st.prototype.listenOnce=st.prototype.K,st.prototype.getLastError=st.prototype.Ha,st.prototype.getLastErrorCode=st.prototype.ya,st.prototype.getStatus=st.prototype.ca,st.prototype.getResponseJson=st.prototype.La,st.prototype.getResponseText=st.prototype.la,st.prototype.send=st.prototype.ea,st.prototype.setWithCredentials=st.prototype.Fa,O_=st}).apply(typeof Xd<"u"?Xd:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};fn.UNAUTHENTICATED=new fn(null),fn.GOOGLE_CREDENTIALS=new fn("google-credentials-uid"),fn.FIRST_PARTY=new fn("first-party-uid"),fn.MOCK_USER=new fn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let El="12.8.0";function MP(n){El=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho=new my("@firebase/firestore");function Ua(){return Ho.logLevel}function pe(n,...e){if(Ho.logLevel<=Ue.DEBUG){const t=e.map(Iy);Ho.debug(`Firestore (${El}): ${n}`,...t)}}function Hi(n,...e){if(Ho.logLevel<=Ue.ERROR){const t=e.map(Iy);Ho.error(`Firestore (${El}): ${n}`,...t)}}function al(n,...e){if(Ho.logLevel<=Ue.WARN){const t=e.map(Iy);Ho.warn(`Firestore (${El}): ${n}`,...t)}}function Iy(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,W_(n,r,t)}function W_(n,e,t){let r=`FIRESTORE (${El}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Hi(r),new Error(r)}function Ze(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||W_(e,s,r)}function De(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends Qi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class DP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(fn.UNAUTHENTICATED)))}shutdown(){}}class VP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class LP{constructor(e){this.t=e,this.currentUser=fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ze(this.o===void 0,42304);let r=this.i;const s=d=>this.i!==r?(r=this.i,t(d)):Promise.resolve();let l=new Oi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Oi,e.enqueueRetryable((()=>s(this.currentUser)))};const c=()=>{const d=l;e.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},h=d=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((d=>h(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?h(d):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Oi)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ze(typeof r.accessToken=="string",31837,{l:r}),new $_(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ze(e===null||typeof e=="string",2055,{h:e}),new fn(e)}}class OP{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=fn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class BP{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new OP(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(fn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Qx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zP{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Kn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ze(this.o===void 0,3512);const r=l=>{l.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,pe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const s=l=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>s(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?s(l):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Qx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ze(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Qx(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FP(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=FP(40);for(let l=0;l<s.length;++l)r.length<20&&s[l]<t&&(r+=e.charAt(s[l]%62))}return r}}function We(n,e){return n<e?-1:n>e?1:0}function mg(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const s=n.charAt(r),l=e.charAt(r);if(s!==l)return Tp(s)===Tp(l)?We(s,l):Tp(s)?1:-1}return We(n.length,e.length)}const UP=55296,WP=57343;function Tp(n){const e=n.charCodeAt(0);return e>=UP&&e<=WP}function ll(n,e,t){return n.length===e.length&&n.every(((r,s)=>t(r,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx="__name__";class ri{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ce(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ce(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return ri.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ri?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const l=ri.compareSegments(e.get(s),t.get(s));if(l!==0)return l}return We(e.length,t.length)}static compareSegments(e,t){const r=ri.isNumericId(e),s=ri.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?ri.extractNumericId(e).compare(ri.extractNumericId(t)):mg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Os.fromString(e.substring(4,e.length-2))}}class at extends ri{construct(e,t,r){return new at(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new he(Z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((s=>s.length>0)))}return new at(t)}static emptyPath(){return new at([])}}const $P=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rn extends ri{construct(e,t,r){return new rn(e,t,r)}static isValidIdentifier(e){return $P.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Yx}static keyField(){return new rn([Yx])}static fromServerFormat(e){const t=[];let r="",s=0;const l=()=>{if(r.length===0)throw new he(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new he(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new he(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,s+=2}else h==="`"?(c=!c,s++):h!=="."||c?(r+=h,s++):(l(),s++)}if(l(),c)throw new he(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rn(t)}static emptyPath(){return new rn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.path=e}static fromPath(e){return new ke(at.fromString(e))}static fromName(e){return new ke(at.fromString(e).popFirst(5))}static empty(){return new ke(at.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&at.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return at.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ke(new at(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H_(n,e,t){if(!t)throw new he(Z.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function HP(n,e,t,r){if(e===!0&&r===!0)throw new he(Z.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Xx(n){if(!ke.isDocumentKey(n))throw new he(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Jx(n){if(ke.isDocumentKey(n))throw new he(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function K_(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function df(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ce(12329,{type:typeof n})}function hr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new he(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=df(n);throw new he(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(n,e){const t={typeString:n};return e&&(t.value=e),t}function wu(n,e){if(!K_(n))throw new he(Z.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const c=n[r];if(s&&typeof c!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${r}' field to equal '${l.value}'`;break}}if(t)throw new he(Z.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx=-62135596800,ew=1e6;class ht{static now(){return ht.fromMillis(Date.now())}static fromDate(e){return ht.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*ew);return new ht(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Zx)throw new he(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ew}_compareTo(e){return this.seconds===e.seconds?We(this.nanoseconds,e.nanoseconds):We(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ht._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(wu(e,ht._jsonSchema))return new ht(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Zx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ht._jsonSchemaVersion="firestore/timestamp/1.0",ht._jsonSchema={type:Bt("string",ht._jsonSchemaVersion),seconds:Bt("number"),nanoseconds:Bt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{static fromTimestamp(e){return new Ne(e)}static min(){return new Ne(new ht(0,0))}static max(){return new Ne(new ht(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eu=-1;function KP(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Ne.fromTimestamp(r===1e9?new ht(t+1,0):new ht(t,r));return new Fs(s,ke.empty(),e)}function qP(n){return new Fs(n.readTime,n.key,eu)}class Fs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Fs(Ne.min(),ke.empty(),eu)}static max(){return new Fs(Ne.max(),ke.empty(),eu)}}function GP(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ke.comparator(n.documentKey,e.documentKey),t!==0?t:We(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class YP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tl(n){if(n.code!==Z.FAILED_PRECONDITION||n.message!==QP)throw n;pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ee(((r,s)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,s)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ee?t:ee.resolve(t)}catch(t){return ee.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ee.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ee.reject(t)}static resolve(e){return new ee(((t,r)=>{t(e)}))}static reject(e){return new ee(((t,r)=>{r(e)}))}static waitFor(e){return new ee(((t,r)=>{let s=0,l=0,c=!1;e.forEach((h=>{++s,h.next((()=>{++l,c&&l===s&&t()}),(d=>r(d)))})),c=!0,l===s&&t()}))}static or(e){let t=ee.resolve(!1);for(const r of e)t=t.next((s=>s?ee.resolve(s):r()));return t}static forEach(e,t){const r=[];return e.forEach(((s,l)=>{r.push(t.call(this,s,l))})),this.waitFor(r)}static mapArray(e,t){return new ee(((r,s)=>{const l=e.length,c=new Array(l);let h=0;for(let d=0;d<l;d++){const m=d;t(e[m]).next((g=>{c[m]=g,++h,h===l&&r(c)}),(g=>s(g)))}}))}static doWhile(e,t){return new ee(((r,s)=>{const l=()=>{e()===!0?t().next((()=>{l()}),s):r()};l()}))}}function XP(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Il(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}hf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy=-1;function ff(n){return n==null}function Mh(n){return n===0&&1/n==-1/0}function JP(n){return typeof n=="number"&&Number.isInteger(n)&&!Mh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q_="";function ZP(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=tw(e)),e=eN(n.get(t),e);return tw(e)}function eN(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const l=n.charAt(s);switch(l){case"\0":t+="";break;case q_:t+="";break;default:t+=l}}return t}function tw(n){return n+q_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Zs(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function G_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,t){this.comparator=e,this.root=t||nn.EMPTY}insert(e,t){return new xt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,nn.BLACK,null,null))}remove(e){return new xt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Jd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Jd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Jd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Jd(this.root,e,this.comparator,!0)}}class Jd{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&s&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nn{constructor(e,t,r,s,l){this.key=e,this.value=t,this.color=r??nn.RED,this.left=s??nn.EMPTY,this.right=l??nn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,l){return new nn(e??this.key,t??this.value,r??this.color,s??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const l=r(e,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(e,t,r),null):l===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return nn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return nn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ce(27949);return e+(this.isRed()?0:1)}}nn.EMPTY=null,nn.RED=!0,nn.BLACK=!1;nn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce(57766)}get value(){throw Ce(16141)}get color(){throw Ce(16727)}get left(){throw Ce(29726)}get right(){throw Ce(36894)}copy(e,t,r,s,l){return this}insert(e,t,r){return new nn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.comparator=e,this.data=new xt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new rw(this.data.getIterator())}getIteratorFrom(e){return new rw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof $t)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=r.getNext().key;if(this.comparator(s,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new $t(this.comparator);return t.data=e,t}}class rw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this.fields=e,e.sort(rn.comparator)}static empty(){return new qn([])}unionWith(e){let t=new $t(rn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new qn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ll(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Q_("Invalid base64 string: "+l):l}})(e);return new sn(t)}static fromUint8Array(e){const t=(function(s){let l="";for(let c=0;c<s.length;++c)l+=String.fromCharCode(s[c]);return l})(e);return new sn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return We(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}sn.EMPTY_BYTE_STRING=new sn("");const tN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Us(n){if(Ze(!!n,39018),typeof n=="string"){let e=0;const t=tN.exec(n);if(Ze(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:jt(n.seconds),nanos:jt(n.nanos)}}function jt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ws(n){return typeof n=="string"?sn.fromBase64String(n):sn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y_="server_timestamp",X_="__type__",J_="__previous_value__",Z_="__local_write_time__";function Ay(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[X_])==null?void 0:r.stringValue)===Y_}function mf(n){const e=n.mapValue.fields[J_];return Ay(e)?mf(e):e}function tu(n){const e=Us(n.mapValue.fields[Z_].timestampValue);return new ht(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e,t,r,s,l,c,h,d,m,g,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=m,this.isUsingEmulator=g,this.apiKey=y}}const Dh="(default)";class nu{constructor(e,t){this.projectId=e,this.database=t||Dh}static empty(){return new nu("","")}get isDefaultDatabase(){return this.database===Dh}isEqual(e){return e instanceof nu&&e.projectId===this.projectId&&e.database===this.database}}function rN(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new he(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nu(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS="__type__",iN="__max__",Zd={mapValue:{}},tS="__vector__",Vh="value";function $s(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ay(n)?4:oN(n)?9007199254740991:sN(n)?10:11:Ce(28295,{value:n})}function ui(n,e){if(n===e)return!0;const t=$s(n);if(t!==$s(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return tu(n).isEqual(tu(e));case 3:return(function(s,l){if(typeof s.timestampValue=="string"&&typeof l.timestampValue=="string"&&s.timestampValue.length===l.timestampValue.length)return s.timestampValue===l.timestampValue;const c=Us(s.timestampValue),h=Us(l.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,l){return Ws(s.bytesValue).isEqual(Ws(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,l){return jt(s.geoPointValue.latitude)===jt(l.geoPointValue.latitude)&&jt(s.geoPointValue.longitude)===jt(l.geoPointValue.longitude)})(n,e);case 2:return(function(s,l){if("integerValue"in s&&"integerValue"in l)return jt(s.integerValue)===jt(l.integerValue);if("doubleValue"in s&&"doubleValue"in l){const c=jt(s.doubleValue),h=jt(l.doubleValue);return c===h?Mh(c)===Mh(h):isNaN(c)&&isNaN(h)}return!1})(n,e);case 9:return ll(n.arrayValue.values||[],e.arrayValue.values||[],ui);case 10:case 11:return(function(s,l){const c=s.mapValue.fields||{},h=l.mapValue.fields||{};if(nw(c)!==nw(h))return!1;for(const d in c)if(c.hasOwnProperty(d)&&(h[d]===void 0||!ui(c[d],h[d])))return!1;return!0})(n,e);default:return Ce(52216,{left:n})}}function ru(n,e){return(n.values||[]).find((t=>ui(t,e)))!==void 0}function cl(n,e){if(n===e)return 0;const t=$s(n),r=$s(e);if(t!==r)return We(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return We(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const h=jt(l.integerValue||l.doubleValue),d=jt(c.integerValue||c.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1})(n,e);case 3:return iw(n.timestampValue,e.timestampValue);case 4:return iw(tu(n),tu(e));case 5:return mg(n.stringValue,e.stringValue);case 6:return(function(l,c){const h=Ws(l),d=Ws(c);return h.compareTo(d)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const h=l.split("/"),d=c.split("/");for(let m=0;m<h.length&&m<d.length;m++){const g=We(h[m],d[m]);if(g!==0)return g}return We(h.length,d.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const h=We(jt(l.latitude),jt(c.latitude));return h!==0?h:We(jt(l.longitude),jt(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return sw(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var x,T,k,S;const h=l.fields||{},d=c.fields||{},m=(x=h[Vh])==null?void 0:x.arrayValue,g=(T=d[Vh])==null?void 0:T.arrayValue,y=We(((k=m==null?void 0:m.values)==null?void 0:k.length)||0,((S=g==null?void 0:g.values)==null?void 0:S.length)||0);return y!==0?y:sw(m,g)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===Zd.mapValue&&c===Zd.mapValue)return 0;if(l===Zd.mapValue)return 1;if(c===Zd.mapValue)return-1;const h=l.fields||{},d=Object.keys(h),m=c.fields||{},g=Object.keys(m);d.sort(),g.sort();for(let y=0;y<d.length&&y<g.length;++y){const x=mg(d[y],g[y]);if(x!==0)return x;const T=cl(h[d[y]],m[g[y]]);if(T!==0)return T}return We(d.length,g.length)})(n.mapValue,e.mapValue);default:throw Ce(23264,{he:t})}}function iw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return We(n,e);const t=Us(n),r=Us(e),s=We(t.seconds,r.seconds);return s!==0?s:We(t.nanos,r.nanos)}function sw(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const l=cl(t[s],r[s]);if(l)return l}return We(t.length,r.length)}function ul(n){return pg(n)}function pg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Us(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Ws(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ke.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",s=!0;for(const l of t.values||[])s?s=!1:r+=",",r+=pg(l);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let s="{",l=!0;for(const c of r)l?l=!1:s+=",",s+=`${c}:${pg(t.fields[c])}`;return s+"}"})(n.mapValue):Ce(61005,{value:n})}function gh(n){switch($s(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=mf(n);return e?16+gh(e):16;case 5:return 2*n.stringValue.length;case 6:return Ws(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,l)=>s+gh(l)),0)})(n.arrayValue);case 10:case 11:return(function(r){let s=0;return Zs(r.fields,((l,c)=>{s+=l.length+gh(c)})),s})(n.mapValue);default:throw Ce(13486,{value:n})}}function ow(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function gg(n){return!!n&&"integerValue"in n}function Ry(n){return!!n&&"arrayValue"in n}function aw(n){return!!n&&"nullValue"in n}function lw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function yh(n){return!!n&&"mapValue"in n}function sN(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[eS])==null?void 0:r.stringValue)===tS}function Wc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Zs(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Wc(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Wc(n.arrayValue.values[t]);return e}return{...n}}function oN(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===iN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.value=e}static empty(){return new Pn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!yh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wc(t)}setAll(e){let t=rn.emptyPath(),r={},s=[];e.forEach(((c,h)=>{if(!t.isImmediateParentOf(h)){const d=this.getFieldsMap(t);this.applyChanges(d,r,s),r={},s=[],t=h.popLast()}c?r[h.lastSegment()]=Wc(c):s.push(h.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,r,s)}delete(e){const t=this.field(e.popLast());yh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ui(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];yh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Zs(t,((s,l)=>e[s]=l));for(const s of r)delete e[s]}clone(){return new Pn(Wc(this.value))}}function nS(n){const e=[];return Zs(n.fields,((t,r)=>{const s=new rn([t]);if(yh(r)){const l=nS(r.mapValue).fields;if(l.length===0)e.push(s);else for(const c of l)e.push(s.child(c))}else e.push(s)})),new qn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e,t,r,s,l,c,h){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=l,this.data=c,this.documentState=h}static newInvalidDocument(e){return new mn(e,0,Ne.min(),Ne.min(),Ne.min(),Pn.empty(),0)}static newFoundDocument(e,t,r,s){return new mn(e,1,t,Ne.min(),r,s,0)}static newNoDocument(e,t){return new mn(e,2,t,Ne.min(),Ne.min(),Pn.empty(),0)}static newUnknownDocument(e,t){return new mn(e,3,t,Ne.min(),Ne.min(),Pn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,t){this.position=e,this.inclusive=t}}function cw(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const l=e[s],c=n.position[s];if(l.field.isKeyField()?r=ke.comparator(ke.fromName(c.referenceValue),t.key):r=cl(c,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function uw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ui(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,t="asc"){this.field=e,this.dir=t}}function aN(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{}class Ot extends rS{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new cN(e,t,r):t==="array-contains"?new hN(e,r):t==="in"?new fN(e,r):t==="not-in"?new mN(e,r):t==="array-contains-any"?new pN(e,r):new Ot(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new uN(e,r):new dN(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(cl(t,this.value)):t!==null&&$s(this.value)===$s(t)&&this.matchesComparison(cl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Mr extends rS{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Mr(e,t)}matches(e){return iS(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function iS(n){return n.op==="and"}function sS(n){return lN(n)&&iS(n)}function lN(n){for(const e of n.filters)if(e instanceof Mr)return!1;return!0}function yg(n){if(n instanceof Ot)return n.field.canonicalString()+n.op.toString()+ul(n.value);if(sS(n))return n.filters.map((e=>yg(e))).join(",");{const e=n.filters.map((t=>yg(t))).join(",");return`${n.op}(${e})`}}function oS(n,e){return n instanceof Ot?(function(r,s){return s instanceof Ot&&r.op===s.op&&r.field.isEqual(s.field)&&ui(r.value,s.value)})(n,e):n instanceof Mr?(function(r,s){return s instanceof Mr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((l,c,h)=>l&&oS(c,s.filters[h])),!0):!1})(n,e):void Ce(19439)}function aS(n){return n instanceof Ot?(function(t){return`${t.field.canonicalString()} ${t.op} ${ul(t.value)}`})(n):n instanceof Mr?(function(t){return t.op.toString()+" {"+t.getFilters().map(aS).join(" ,")+"}"})(n):"Filter"}class cN extends Ot{constructor(e,t,r){super(e,t,r),this.key=ke.fromName(r.referenceValue)}matches(e){const t=ke.comparator(e.key,this.key);return this.matchesComparison(t)}}class uN extends Ot{constructor(e,t){super(e,"in",t),this.keys=lS("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class dN extends Ot{constructor(e,t){super(e,"not-in",t),this.keys=lS("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function lS(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((r=>ke.fromName(r.referenceValue)))}class hN extends Ot{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ry(t)&&ru(t.arrayValue,this.value)}}class fN extends Ot{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ru(this.value.arrayValue,t)}}class mN extends Ot{constructor(e,t){super(e,"not-in",t)}matches(e){if(ru(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ru(this.value.arrayValue,t)}}class pN extends Ot{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ry(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>ru(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e,t=null,r=[],s=[],l=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=l,this.startAt=c,this.endAt=h,this.Te=null}}function dw(n,e=null,t=[],r=[],s=null,l=null,c=null){return new gN(n,e,t,r,s,l,c)}function Py(n){const e=De(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>yg(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),ff(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>ul(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>ul(r))).join(",")),e.Te=t}return e.Te}function Ny(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!aN(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!oS(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!uw(n.startAt,e.startAt)&&uw(n.endAt,e.endAt)}function vg(n){return ke.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e,t=null,r=[],s=[],l=null,c="F",h=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=l,this.limitType=c,this.startAt=h,this.endAt=d,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function yN(n,e,t,r,s,l,c,h){return new Cl(n,e,t,r,s,l,c,h)}function My(n){return new Cl(n)}function hw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function vN(n){return ke.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function cS(n){return n.collectionGroup!==null}function $c(n){const e=De(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new $t(rn.comparator);return c.filters.forEach((d=>{d.getFlattenedFilters().forEach((m=>{m.isInequality()&&(h=h.add(m.field))}))})),h})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new iu(l,r))})),t.has(rn.keyField().canonicalString())||e.Ie.push(new iu(rn.keyField(),r))}return e.Ie}function oi(n){const e=De(n);return e.Ee||(e.Ee=xN(e,$c(n))),e.Ee}function xN(n,e){if(n.limitType==="F")return dw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const l=s.dir==="desc"?"asc":"desc";return new iu(s.field,l)}));const t=n.endAt?new Lh(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Lh(n.startAt.position,n.startAt.inclusive):null;return dw(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function xg(n,e){const t=n.filters.concat([e]);return new Cl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function wN(n,e){const t=n.explicitOrderBy.concat([e]);return new Cl(n.path,n.collectionGroup,t,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}function Oh(n,e,t){return new Cl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function pf(n,e){return Ny(oi(n),oi(e))&&n.limitType===e.limitType}function uS(n){return`${Py(oi(n))}|lt:${n.limitType}`}function Wa(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((s=>aS(s))).join(", ")}]`),ff(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((s=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(s))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((s=>ul(s))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((s=>ul(s))).join(",")),`Target(${r})`})(oi(n))}; limitType=${n.limitType})`}function gf(n,e){return e.isFoundDocument()&&(function(r,s){const l=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):ke.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(n,e)&&(function(r,s){for(const l of $c(r))if(!l.field.isKeyField()&&s.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(r,s){for(const l of r.filters)if(!l.matches(s))return!1;return!0})(n,e)&&(function(r,s){return!(r.startAt&&!(function(c,h,d){const m=cw(c,h,d);return c.inclusive?m<=0:m<0})(r.startAt,$c(r),s)||r.endAt&&!(function(c,h,d){const m=cw(c,h,d);return c.inclusive?m>=0:m>0})(r.endAt,$c(r),s))})(n,e)}function bN(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function dS(n){return(e,t)=>{let r=!1;for(const s of $c(n)){const l=kN(s,e,t);if(l!==0)return l;r=r||s.field.isKeyField()}return 0}}function kN(n,e,t){const r=n.field.isKeyField()?ke.comparator(e.key,t.key):(function(l,c,h){const d=c.data.field(l),m=h.data.field(l);return d!==null&&m!==null?cl(d,m):Ce(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ce(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,l]of r)if(this.equalsFn(s,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return void(s[l]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Zs(this.inner,((t,r)=>{for(const[s,l]of r)e(s,l)}))}isEmpty(){return G_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N=new xt(ke.comparator);function Ki(){return _N}const hS=new xt(ke.comparator);function Vc(...n){let e=hS;for(const t of n)e=e.insert(t.key,t);return e}function fS(n){let e=hS;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Lo(){return Hc()}function mS(){return Hc()}function Hc(){return new Jo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const SN=new xt(ke.comparator),EN=new $t(ke.comparator);function $e(...n){let e=EN;for(const t of n)e=e.add(t);return e}const TN=new $t(We);function IN(){return TN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dy(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mh(e)?"-0":e}}function pS(n){return{integerValue:""+n}}function gS(n,e){return JP(e)?pS(e):Dy(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(){this._=void 0}}function CN(n,e,t){return n instanceof su?(function(s,l){const c={fields:{[X_]:{stringValue:Y_},[Z_]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return l&&Ay(l)&&(l=mf(l)),l&&(c.fields[J_]=l),{mapValue:c}})(t,e):n instanceof dl?vS(n,e):n instanceof hl?xS(n,e):(function(s,l){const c=yS(s,l),h=fw(c)+fw(s.Ae);return gg(c)&&gg(s.Ae)?pS(h):Dy(s.serializer,h)})(n,e)}function jN(n,e,t){return n instanceof dl?vS(n,e):n instanceof hl?xS(n,e):t}function yS(n,e){return n instanceof ou?(function(r){return gg(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class su extends yf{}class dl extends yf{constructor(e){super(),this.elements=e}}function vS(n,e){const t=wS(e);for(const r of n.elements)t.some((s=>ui(s,r)))||t.push(r);return{arrayValue:{values:t}}}class hl extends yf{constructor(e){super(),this.elements=e}}function xS(n,e){let t=wS(e);for(const r of n.elements)t=t.filter((s=>!ui(s,r)));return{arrayValue:{values:t}}}class ou extends yf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function fw(n){return jt(n.integerValue||n.doubleValue)}function wS(n){return Ry(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,t){this.field=e,this.transform=t}}function AN(n,e){return n.field.isEqual(e.field)&&(function(r,s){return r instanceof dl&&s instanceof dl||r instanceof hl&&s instanceof hl?ll(r.elements,s.elements,ui):r instanceof ou&&s instanceof ou?ui(r.Ae,s.Ae):r instanceof su&&s instanceof su})(n.transform,e.transform)}class RN{constructor(e,t){this.version=e,this.transformResults=t}}class _n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new _n}static exists(e){return new _n(void 0,e)}static updateTime(e){return new _n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class xf{}function bS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new wf(n.key,_n.none()):new bu(n.key,n.data,_n.none());{const t=n.data,r=Pn.empty();let s=new $t(rn.comparator);for(let l of e.fields)if(!s.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?r.delete(l):r.set(l,c),s=s.add(l)}return new eo(n.key,r,new qn(s.toArray()),_n.none())}}function PN(n,e,t){n instanceof bu?(function(s,l,c){const h=s.value.clone(),d=pw(s.fieldTransforms,l,c.transformResults);h.setAll(d),l.convertToFoundDocument(c.version,h).setHasCommittedMutations()})(n,e,t):n instanceof eo?(function(s,l,c){if(!vh(s.precondition,l))return void l.convertToUnknownDocument(c.version);const h=pw(s.fieldTransforms,l,c.transformResults),d=l.data;d.setAll(kS(s)),d.setAll(h),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):(function(s,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Kc(n,e,t,r){return n instanceof bu?(function(l,c,h,d){if(!vh(l.precondition,c))return h;const m=l.value.clone(),g=gw(l.fieldTransforms,d,c);return m.setAll(g),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null})(n,e,t,r):n instanceof eo?(function(l,c,h,d){if(!vh(l.precondition,c))return h;const m=gw(l.fieldTransforms,d,c),g=c.data;return g.setAll(kS(l)),g.setAll(m),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),h===null?null:h.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((y=>y.field)))})(n,e,t,r):(function(l,c,h){return vh(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h})(n,e,t)}function NN(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),l=yS(r.transform,s||null);l!=null&&(t===null&&(t=Pn.empty()),t.set(r.field,l))}return t||null}function mw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ll(r,s,((l,c)=>AN(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class bu extends xf{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class eo extends xf{constructor(e,t,r,s,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function kS(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function pw(n,e,t){const r=new Map;Ze(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let s=0;s<t.length;s++){const l=n[s],c=l.transform,h=e.data.field(l.field);r.set(l.field,jN(c,h,t[s]))}return r}function gw(n,e,t){const r=new Map;for(const s of n){const l=s.transform,c=t.data.field(s.field);r.set(s.field,CN(l,c,e))}return r}class wf extends xf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class MN extends xf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const l=this.mutations[s];l.key.isEqual(e.key)&&PN(l,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Kc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Kc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=mS();return this.mutations.forEach((s=>{const l=e.get(s.key),c=l.overlayedDocument;let h=this.applyToLocalView(c,l.mutatedFields);h=t.has(s.key)?null:h;const d=bS(c,h);d!==null&&r.set(s.key,d),c.isValidDocument()||c.convertToNoDocument(Ne.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),$e())}isEqual(e){return this.batchId===e.batchId&&ll(this.mutations,e.mutations,((t,r)=>mw(t,r)))&&ll(this.baseMutations,e.baseMutations,((t,r)=>mw(t,r)))}}class Vy{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Ze(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return SN})();const l=e.mutations;for(let c=0;c<l.length;c++)s=s.insert(l[c].key,r[c].version);return new Vy(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vt,qe;function ON(n){switch(n){case Z.OK:return Ce(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return Ce(15467,{code:n})}}function _S(n){if(n===void 0)return Hi("GRPC error has no .code"),Z.UNKNOWN;switch(n){case Vt.OK:return Z.OK;case Vt.CANCELLED:return Z.CANCELLED;case Vt.UNKNOWN:return Z.UNKNOWN;case Vt.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case Vt.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case Vt.INTERNAL:return Z.INTERNAL;case Vt.UNAVAILABLE:return Z.UNAVAILABLE;case Vt.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case Vt.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case Vt.NOT_FOUND:return Z.NOT_FOUND;case Vt.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case Vt.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case Vt.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case Vt.ABORTED:return Z.ABORTED;case Vt.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case Vt.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case Vt.DATA_LOSS:return Z.DATA_LOSS;default:return Ce(39323,{code:n})}}(qe=Vt||(Vt={}))[qe.OK=0]="OK",qe[qe.CANCELLED=1]="CANCELLED",qe[qe.UNKNOWN=2]="UNKNOWN",qe[qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qe[qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qe[qe.NOT_FOUND=5]="NOT_FOUND",qe[qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",qe[qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",qe[qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",qe[qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qe[qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qe[qe.ABORTED=10]="ABORTED",qe[qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",qe[qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",qe[qe.INTERNAL=13]="INTERNAL",qe[qe.UNAVAILABLE=14]="UNAVAILABLE",qe[qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN=new Os([4294967295,4294967295],0);function yw(n){const e=BN().encode(n),t=new L_;return t.update(e),new Uint8Array(t.digest())}function vw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Os([t,r],0),new Os([s,l],0)]}class Ly{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Lc(`Invalid padding: ${t}`);if(r<0)throw new Lc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Lc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Lc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Os.fromNumber(this.ge)}ye(e,t,r){let s=e.add(t.multiply(Os.fromNumber(r)));return s.compare(zN)===1&&(s=new Os([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=yw(e),[r,s]=vw(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,s,l);if(!this.we(c))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Ly(l,s,t);return r.forEach((h=>c.insert(h))),c}insert(e){if(this.ge===0)return;const t=yw(e),[r,s]=vw(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,s,l);this.be(c)}}be(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Lc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e,t,r,s,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,ku.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new bf(Ne.min(),s,new xt(We),Ki(),$e())}}class ku{constructor(e,t,r,s,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new ku(r,t,$e(),$e(),$e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,t,r,s){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=s}}class SS{constructor(e,t){this.targetId=e,this.Ce=t}}class ES{constructor(e,t,r=sn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class xw{constructor(){this.ve=0,this.Fe=ww(),this.Me=sn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=$e(),t=$e(),r=$e();return this.Fe.forEach(((s,l)=>{switch(l){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Ce(38017,{changeType:l})}})),new ku(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=ww()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Ze(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class FN{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ki(),this.He=eh(),this.Je=eh(),this.Ze=new xt(We)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Ce(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,r=e.Ce.count,s=this.ot(t);if(s){const l=s.target;if(vg(l))if(r===0){const c=new ke(l.path);this.et(t,c,mn.newNoDocument(c,Ne.min()))}else Ze(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const h=this.ut(e),d=h?this.ct(h,e,c):1;if(d!==0){this.it(t);const m=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,m)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:l=0}=t;let c,h;try{c=Ws(r).toUint8Array()}catch(d){if(d instanceof Q_)return al("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new Ly(c,s,l)}catch(d){return al(d instanceof Lc?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.ge===0?null:h}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let s=0;return r.forEach((l=>{const c=this.Ge.ht(),h=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(h)||(this.et(t,l,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const h=this.ot(c);if(h){if(l.current&&vg(h.target)){const d=new ke(h.target.path);this.It(d).has(c)||this.Et(c,d)||this.et(c,d,mn.newNoDocument(d,e))}l.Be&&(t.set(c,l.ke()),l.Ke())}}));let r=$e();this.Je.forEach(((l,c)=>{let h=!0;c.forEachWhile((d=>{const m=this.ot(d);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(r=r.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const s=new bf(e,t,this.Ze,this.je,r);return this.je=Ki(),this.He=eh(),this.Je=eh(),this.Ze=new xt(We),s}Ye(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.qe(t,1):s.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new xw,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new $t(We),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new $t(We),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||pe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new xw),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function eh(){return new xt(ke.comparator)}function ww(){return new xt(ke.comparator)}const UN={asc:"ASCENDING",desc:"DESCENDING"},WN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$N={and:"AND",or:"OR"};class HN{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function wg(n,e){return n.useProto3Json||ff(e)?e:{value:e}}function Bh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function TS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function KN(n,e){return Bh(n,e.toTimestamp())}function ai(n){return Ze(!!n,49232),Ne.fromTimestamp((function(t){const r=Us(t);return new ht(r.seconds,r.nanos)})(n))}function Oy(n,e){return bg(n,e).canonicalString()}function bg(n,e){const t=(function(s){return new at(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function IS(n){const e=at.fromString(n);return Ze(PS(e),10190,{key:e.toString()}),e}function kg(n,e){return Oy(n.databaseId,e.path)}function Ip(n,e){const t=IS(e);if(t.get(1)!==n.databaseId.projectId)throw new he(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new he(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ke(jS(t))}function CS(n,e){return Oy(n.databaseId,e)}function qN(n){const e=IS(n);return e.length===4?at.emptyPath():jS(e)}function _g(n){return new at(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function jS(n){return Ze(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function bw(n,e,t){return{name:kg(n,e),fields:t.value.mapValue.fields}}function GN(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Ce(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],l=(function(m,g){return m.useProto3Json?(Ze(g===void 0||typeof g=="string",58123),sn.fromBase64String(g||"")):(Ze(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),sn.fromUint8Array(g||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&(function(m){const g=m.code===void 0?Z.UNKNOWN:_S(m.code);return new he(g,m.message||"")})(c);t=new ES(r,s,l,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ip(n,r.document.name),l=ai(r.document.updateTime),c=r.document.createTime?ai(r.document.createTime):Ne.min(),h=new Pn({mapValue:{fields:r.document.fields}}),d=mn.newFoundDocument(s,l,c,h),m=r.targetIds||[],g=r.removedTargetIds||[];t=new xh(m,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Ip(n,r.document),l=r.readTime?ai(r.readTime):Ne.min(),c=mn.newNoDocument(s,l),h=r.removedTargetIds||[];t=new xh([],h,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Ip(n,r.document),l=r.removedTargetIds||[];t=new xh([],l,s,null)}else{if(!("filter"in e))return Ce(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:l}=r,c=new LN(s,l),h=r.targetId;t=new SS(h,c)}}return t}function QN(n,e){let t;if(e instanceof bu)t={update:bw(n,e.key,e.value)};else if(e instanceof wf)t={delete:kg(n,e.key)};else if(e instanceof eo)t={update:bw(n,e.key,e.data),updateMask:i4(e.fieldMask)};else{if(!(e instanceof MN))return Ce(16599,{dt:e.type});t={verify:kg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(l,c){const h=c.transform;if(h instanceof su)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof dl)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof hl)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof ou)return{fieldPath:c.field.canonicalString(),increment:h.Ae};throw Ce(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(s,l){return l.updateTime!==void 0?{updateTime:KN(s,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ce(27497)})(n,e.precondition)),t}function YN(n,e){return n&&n.length>0?(Ze(e!==void 0,14353),n.map((t=>(function(s,l){let c=s.updateTime?ai(s.updateTime):ai(l);return c.isEqual(Ne.min())&&(c=ai(l)),new RN(c,s.transformResults||[])})(t,e)))):[]}function XN(n,e){return{documents:[CS(n,e.path)]}}function JN(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=CS(n,s);const l=(function(m){if(m.length!==0)return RS(Mr.create(m,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(m){if(m.length!==0)return m.map((g=>(function(x){return{field:$a(x.field),direction:t4(x.dir)}})(g)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=wg(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:t,parent:s}}function ZN(n){let e=qN(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Ze(r===1,65062);const g=t.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let l=[];t.where&&(l=(function(y){const x=AS(y);return x instanceof Mr&&sS(x)?x.getFilters():[x]})(t.where));let c=[];t.orderBy&&(c=(function(y){return y.map((x=>(function(k){return new iu(Ha(k.field),(function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(x)))})(t.orderBy));let h=null;t.limit&&(h=(function(y){let x;return x=typeof y=="object"?y.value:y,ff(x)?null:x})(t.limit));let d=null;t.startAt&&(d=(function(y){const x=!!y.before,T=y.values||[];return new Lh(T,x)})(t.startAt));let m=null;return t.endAt&&(m=(function(y){const x=!y.before,T=y.values||[];return new Lh(T,x)})(t.endAt)),yN(e,s,c,l,h,"F",d,m)}function e4(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function AS(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Ha(t.unaryFilter.field);return Ot.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ha(t.unaryFilter.field);return Ot.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Ha(t.unaryFilter.field);return Ot.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Ha(t.unaryFilter.field);return Ot.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ce(61313);default:return Ce(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ot.create(Ha(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ce(58110);default:return Ce(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Mr.create(t.compositeFilter.filters.map((r=>AS(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ce(1026)}})(t.compositeFilter.op))})(n):Ce(30097,{filter:n})}function t4(n){return UN[n]}function n4(n){return WN[n]}function r4(n){return $N[n]}function $a(n){return{fieldPath:n.canonicalString()}}function Ha(n){return rn.fromServerFormat(n.fieldPath)}function RS(n){return n instanceof Ot?(function(t){if(t.op==="=="){if(lw(t.value))return{unaryFilter:{field:$a(t.field),op:"IS_NAN"}};if(aw(t.value))return{unaryFilter:{field:$a(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(lw(t.value))return{unaryFilter:{field:$a(t.field),op:"IS_NOT_NAN"}};if(aw(t.value))return{unaryFilter:{field:$a(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$a(t.field),op:n4(t.op),value:t.value}}})(n):n instanceof Mr?(function(t){const r=t.getFilters().map((s=>RS(s)));return r.length===1?r[0]:{compositeFilter:{op:r4(t.op),filters:r}}})(n):Ce(54877,{filter:n})}function i4(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function PS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function NS(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,t,r,s,l=Ne.min(),c=Ne.min(),h=sn.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(e){return new Ns(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ns(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ns(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ns(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(e){this.yt=e}}function o4(n){const e=ZN({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Oh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{constructor(){this.Sn=new l4}addToCollectionParentIndex(e,t){return this.Sn.add(t),ee.resolve()}getCollectionParents(e,t){return ee.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return ee.resolve()}deleteFieldIndex(e,t){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,t){return ee.resolve()}getDocumentsMatchingTarget(e,t){return ee.resolve(null)}getIndexType(e,t){return ee.resolve(0)}getFieldIndexes(e,t){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,t){return ee.resolve(Fs.min())}getMinOffsetFromCollectionGroup(e,t){return ee.resolve(Fs.min())}updateCollectionGroup(e,t,r){return ee.resolve()}updateIndexEntries(e,t){return ee.resolve()}}class l4{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new $t(at.comparator),l=!s.has(r);return this.index[t]=s.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new $t(at.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},MS=41943040;class Rn{static withCacheSize(e){return new Rn(e,Rn.DEFAULT_COLLECTION_PERCENTILE,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rn.DEFAULT_COLLECTION_PERCENTILE=10,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rn.DEFAULT=new Rn(MS,Rn.DEFAULT_COLLECTION_PERCENTILE,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rn.DISABLED=new Rn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new fl(0)}static ar(){return new fl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w="LruGarbageCollector",c4=1048576;function Sw([n,e],[t,r]){const s=We(n,t);return s===0?We(e,r):s}class u4{constructor(e){this.Pr=e,this.buffer=new $t(Sw),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Sw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class d4{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){pe(_w,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Il(t)?pe(_w,"Ignoring IndexedDB error during garbage collection: ",t):await Tl(t)}await this.Ar(3e5)}))}}class h4{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return ee.resolve(hf.ce);const r=new u4(t);return this.Vr.forEachTarget(e,(s=>r.Er(s.sequenceNumber))).next((()=>this.Vr.mr(e,(s=>r.Er(s))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(pe("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(kw)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),kw):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,s,l,c,h,d,m;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((y=>(y>this.params.maximumSequenceNumbersToCollect?(pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),s=this.params.maximumSequenceNumbersToCollect):s=y,c=Date.now(),this.nthSequenceNumber(e,s)))).next((y=>(r=y,h=Date.now(),this.removeTargets(e,r,t)))).next((y=>(l=y,d=Date.now(),this.removeOrphanedDocuments(e,r)))).next((y=>(m=Date.now(),Ua()<=Ue.DEBUG&&pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-g}ms
	Determined least recently used ${s} in `+(h-c)+`ms
	Removed ${l} targets in `+(d-h)+`ms
	Removed ${y} documents in `+(m-d)+`ms
Total Duration: ${m-g}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:l,documentsRemoved:y}))))}}function f4(n,e){return new h4(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{constructor(){this.changes=new Jo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,mn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ee.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(r!==null&&Kc(r.mutation,s,qn.empty(),ht.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,$e()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=$e()){const s=Lo();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,r).next((l=>{let c=Vc();return l.forEach(((h,d)=>{c=c.insert(h,d.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=Lo();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,$e())))}populateOverlays(e,t,r){const s=[];return r.forEach((l=>{t.has(l)||s.push(l)})),this.documentOverlayCache.getOverlays(e,s).next((l=>{l.forEach(((c,h)=>{t.set(c,h)}))}))}computeViews(e,t,r,s){let l=Ki();const c=Hc(),h=(function(){return Hc()})();return t.forEach(((d,m)=>{const g=r.get(m.key);s.has(m.key)&&(g===void 0||g.mutation instanceof eo)?l=l.insert(m.key,m):g!==void 0?(c.set(m.key,g.mutation.getFieldMask()),Kc(g.mutation,m,g.mutation.getFieldMask(),ht.now())):c.set(m.key,qn.empty())})),this.recalculateAndSaveOverlays(e,l).next((d=>(d.forEach(((m,g)=>c.set(m,g))),t.forEach(((m,g)=>h.set(m,new p4(g,c.get(m)??null)))),h)))}recalculateAndSaveOverlays(e,t){const r=Hc();let s=new xt(((c,h)=>c-h)),l=$e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const h of c)h.keys().forEach((d=>{const m=t.get(d);if(m===null)return;let g=r.get(d)||qn.empty();g=h.applyToLocalView(m,g),r.set(d,g);const y=(s.get(h.batchId)||$e()).add(d);s=s.insert(h.batchId,y)}))})).next((()=>{const c=[],h=s.getReverseIterator();for(;h.hasNext();){const d=h.getNext(),m=d.key,g=d.value,y=mS();g.forEach((x=>{if(!l.has(x)){const T=bS(t.get(x),r.get(x));T!==null&&y.set(x,T),l=l.add(x)}})),c.push(this.documentOverlayCache.saveOverlays(e,m,y))}return ee.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,s){return vN(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):cS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next((l=>{const c=s-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-l.size):ee.resolve(Lo());let h=eu,d=l;return c.next((m=>ee.forEach(m,((g,y)=>(h<y.largestBatchId&&(h=y.largestBatchId),l.get(g)?ee.resolve():this.remoteDocumentCache.getEntry(e,g).next((x=>{d=d.insert(g,x)}))))).next((()=>this.populateOverlays(e,m,l))).next((()=>this.computeViews(e,d,m,$e()))).next((g=>({batchId:h,changes:fS(g)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ke(t)).next((r=>{let s=Vc();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const l=t.collectionGroup;let c=Vc();return this.indexManager.getCollectionParents(e,l).next((h=>ee.forEach(h,(d=>{const m=(function(y,x){return new Cl(x,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(t,d.child(l));return this.getDocumentsMatchingCollectionQuery(e,m,r,s).next((g=>{g.forEach(((y,x)=>{c=c.insert(y,x)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,s){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,s)))).next((c=>{l.forEach(((d,m)=>{const g=m.getKey();c.get(g)===null&&(c=c.insert(g,mn.newInvalidDocument(g)))}));let h=Vc();return c.forEach(((d,m)=>{const g=l.get(d);g!==void 0&&Kc(g.mutation,m,qn.empty(),ht.now()),gf(t,m)&&(h=h.insert(d,m))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return ee.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:ai(s.createTime)}})(t)),ee.resolve()}getNamedQuery(e,t){return ee.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(s){return{name:s.name,query:o4(s.bundledQuery),readTime:ai(s.readTime)}})(t)),ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4{constructor(){this.overlays=new xt(ke.comparator),this.Lr=new Map}getOverlay(e,t){return ee.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Lo();return ee.forEach(t,(s=>this.getOverlay(e,s).next((l=>{l!==null&&r.set(s,l)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((s,l)=>{this.bt(e,t,l)})),ee.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Lr.get(r);return s!==void 0&&(s.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(r)),ee.resolve()}getOverlaysForCollection(e,t,r){const s=Lo(),l=t.length+1,c=new ke(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const d=h.getNext().value,m=d.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===l&&d.largestBatchId>r&&s.set(d.getKey(),d)}return ee.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let l=new xt(((m,g)=>m-g));const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let g=l.get(m.largestBatchId);g===null&&(g=Lo(),l=l.insert(m.largestBatchId,g)),g.set(m.getKey(),m)}}const h=Lo(),d=l.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((m,g)=>h.set(m,g))),!(h.size()>=s)););return ee.resolve(h)}bt(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const c=this.Lr.get(s.largestBatchId).delete(r.key);this.Lr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new VN(t,r));let l=this.Lr.get(t);l===void 0&&(l=$e(),this.Lr.set(t,l)),this.Lr.set(t,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(){this.sessionToken=sn.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By{constructor(){this.kr=new $t(Gt.Kr),this.qr=new $t(Gt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const r=new Gt(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new Gt(e,t))}Qr(e,t){e.forEach((r=>this.removeReference(r,t)))}Gr(e){const t=new ke(new at([])),r=new Gt(t,e),s=new Gt(t,e+1),l=[];return this.qr.forEachInRange([r,s],(c=>{this.Wr(c),l.push(c.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new ke(new at([])),r=new Gt(t,e),s=new Gt(t,e+1);let l=$e();return this.qr.forEachInRange([r,s],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Gt(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Gt{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return ke.comparator(e.key,t.key)||We(e.Hr,t.Hr)}static Ur(e,t){return We(e.Hr,t.Hr)||ke.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new $t(Gt.Kr)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new DN(l,t,r,s);this.mutationQueue.push(c);for(const h of s)this.Jr=this.Jr.add(new Gt(h.key,l)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ee.resolve(c)}lookupMutationBatch(e,t){return ee.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Xr(r),l=s<0?0:s;return ee.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?jy:this.Yn-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Gt(t,0),s=new Gt(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([r,s],(c=>{const h=this.Zr(c.Hr);l.push(h)})),ee.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new $t(We);return t.forEach((s=>{const l=new Gt(s,0),c=new Gt(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,c],(h=>{r=r.add(h.Hr)}))})),ee.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let l=r;ke.isDocumentKey(l)||(l=l.child(""));const c=new Gt(new ke(l),0);let h=new $t(We);return this.Jr.forEachWhile((d=>{const m=d.key.path;return!!r.isPrefixOf(m)&&(m.length===s&&(h=h.add(d.Hr)),!0)}),c),ee.resolve(this.Yr(h))}Yr(e){const t=[];return e.forEach((r=>{const s=this.Zr(r);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){Ze(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return ee.forEach(t.mutations,(s=>{const l=new Gt(s.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,t){const r=new Gt(t,0),s=this.Jr.firstAfterOrEqual(r);return ee.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(e){this.ti=e,this.docs=(function(){return new xt(ke.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),l=s?s.size:0,c=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ee.resolve(r?r.document.mutableCopy():mn.newInvalidDocument(t))}getEntries(e,t){let r=Ki();return t.forEach((s=>{const l=this.docs.get(s);r=r.insert(s,l?l.document.mutableCopy():mn.newInvalidDocument(s))})),ee.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let l=Ki();const c=t.path,h=new ke(c.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){const{key:m,value:{document:g}}=d.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||GP(qP(g),r)<=0||(s.has(g.key)||gf(t,g))&&(l=l.insert(g.key,g.mutableCopy()))}return ee.resolve(l)}getAllFromCollectionGroup(e,t,r,s){Ce(9500)}ni(e,t){return ee.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new k4(this)}getSize(e){return ee.resolve(this.size)}}class k4 extends m4{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?t.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(r)})),ee.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(e){this.persistence=e,this.ri=new Jo((t=>Py(t)),Ny),this.lastRemoteSnapshotVersion=Ne.min(),this.highestTargetId=0,this.ii=0,this.si=new By,this.targetCount=0,this.oi=fl._r()}forEachTarget(e,t){return this.ri.forEach(((r,s)=>t(s))),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),ee.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new fl(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,ee.resolve()}updateTargetData(e,t){return this.lr(t),ee.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,t,r){let s=0;const l=[];return this.ri.forEach(((c,h)=>{h.sequenceNumber<=t&&r.get(h.targetId)===null&&(this.ri.delete(c),l.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)})),ee.waitFor(l).next((()=>s))}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,t){const r=this.ri.get(t)||null;return ee.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),ee.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);const s=this.persistence.referenceDelegate,l=[];return s&&t.forEach((c=>{l.push(s.markPotentiallyOrphaned(e,c))})),ee.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),ee.resolve()}getMatchingKeysForTargetId(e,t){const r=this.si.jr(t);return ee.resolve(r)}containsKey(e,t){return ee.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e,t){this._i={},this.overlays={},this.ai=new hf(0),this.ui=!1,this.ui=!0,this.ci=new x4,this.referenceDelegate=e(this),this.li=new _4(this),this.indexManager=new a4,this.remoteDocumentCache=(function(s){return new b4(s)})((r=>this.referenceDelegate.hi(r))),this.serializer=new s4(t),this.Pi=new y4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new v4,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new w4(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){pe("MemoryPersistence","Starting transaction:",e);const s=new S4(this.ai.next());return this.referenceDelegate.Ti(),r(s).next((l=>this.referenceDelegate.Ii(s).next((()=>l)))).toPromise().then((l=>(s.raiseOnCommittedEvent(),l)))}Ei(e,t){return ee.or(Object.values(this._i).map((r=>()=>r.containsKey(e,t))))}}class S4 extends YP{constructor(e){super(),this.currentSequenceNumber=e}}class zy{constructor(e){this.persistence=e,this.Ri=new By,this.Ai=null}static Vi(e){return new zy(e)}get di(){if(this.Ai)return this.Ai;throw Ce(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),ee.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),ee.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),ee.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((s=>this.di.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((l=>this.di.add(l.toString())))})).next((()=>r.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.di,(r=>{const s=ke.fromPath(r);return this.mi(e,s).next((l=>{l||t.removeEntry(s,Ne.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return ee.or([()=>ee.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class zh{constructor(e,t){this.persistence=e,this.fi=new Jo((r=>ZP(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=f4(this,t)}static Vi(e,t){return new zh(e,t)}Ti(){}Ii(e){return ee.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}mr(e,t){return ee.forEach(this.fi,((r,s)=>this.wr(e,r,s).next((l=>l?ee.resolve():t(s)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),l=s.newChangeBuffer();return s.ni(e,(c=>this.wr(e,c,t).next((h=>{h||(r++,l.removeEntry(c,Ne.min()))})))).next((()=>l.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),ee.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),ee.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),ee.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),ee.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=gh(e.data.value)),t}wr(e,t,r){return ee.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.fi.get(t);return ee.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=s}static Es(e,t){let r=$e(),s=$e();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:s=s.add(l.doc.key)}return new Fy(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T4{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return Jj()?8:XP(yn())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,s){const l={result:null};return this.gs(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ps(e,t,s,r).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new E4;return this.ys(e,t,c).next((h=>{if(l.result=h,this.As)return this.ws(e,t,c,h.size)}))})).next((()=>l.result))}ws(e,t,r,s){return r.documentReadCount<this.Vs?(Ua()<=Ue.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",Wa(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ee.resolve()):(Ua()<=Ue.DEBUG&&pe("QueryEngine","Query:",Wa(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(Ua()<=Ue.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",Wa(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,oi(t))):ee.resolve())}gs(e,t){if(hw(t))return ee.resolve(null);let r=oi(t);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=Oh(t,null,"F"),r=oi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const c=$e(...l);return this.fs.getDocuments(e,c).next((h=>this.indexManager.getMinOffset(e,r).next((d=>{const m=this.bs(t,h);return this.Ss(t,m,c,d.readTime)?this.gs(e,Oh(t,null,"F")):this.Ds(e,m,t,d)}))))})))))}ps(e,t,r,s){return hw(t)||s.isEqual(Ne.min())?ee.resolve(null):this.fs.getDocuments(e,r).next((l=>{const c=this.bs(t,l);return this.Ss(t,c,r,s)?ee.resolve(null):(Ua()<=Ue.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Wa(t)),this.Ds(e,c,t,KP(s,eu)).next((h=>h)))}))}bs(e,t){let r=new $t(dS(e));return t.forEach(((s,l)=>{gf(e,l)&&(r=r.add(l))})),r}Ss(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(s)>0)}ys(e,t,r){return Ua()<=Ue.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",Wa(t)),this.fs.getDocumentsMatchingQuery(e,t,Fs.min(),r)}Ds(e,t,r,s){return this.fs.getDocumentsMatchingQuery(e,r,s).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uy="LocalStore",I4=3e8;class C4{constructor(e,t,r,s){this.persistence=e,this.Cs=t,this.serializer=s,this.vs=new xt(We),this.Fs=new Jo((l=>Py(l)),Ny),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new g4(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function j4(n,e,t,r){return new C4(n,e,t,r)}async function VS(n,e){const t=De(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next((l=>(s=l,t.Os(e),t.mutationQueue.getAllMutationBatches(r)))).next((l=>{const c=[],h=[];let d=$e();for(const m of s){c.push(m.batchId);for(const g of m.mutations)d=d.add(g.key)}for(const m of l){h.push(m.batchId);for(const g of m.mutations)d=d.add(g.key)}return t.localDocuments.getDocuments(r,d).next((m=>({Ns:m,removedBatchIds:c,addedBatchIds:h})))}))}))}function A4(n,e){const t=De(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(h,d,m,g){const y=m.batch,x=y.keys();let T=ee.resolve();return x.forEach((k=>{T=T.next((()=>g.getEntry(d,k))).next((S=>{const C=m.docVersions.get(k);Ze(C!==null,48541),S.version.compareTo(C)<0&&(y.applyToRemoteDocument(S,m),S.isValidDocument()&&(S.setReadTime(m.commitVersion),g.addEntry(S)))}))})),T.next((()=>h.mutationQueue.removeMutationBatch(d,y)))})(t,r,e,l).next((()=>l.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(h){let d=$e();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(d=d.add(h.batch.mutations[m].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(r,s)))}))}function LS(n){const e=De(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function R4(n,e){const t=De(n),r=e.snapshotVersion;let s=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.xs.newChangeBuffer({trackRemovals:!0});s=t.vs;const h=[];e.targetChanges.forEach(((g,y)=>{const x=s.get(y);if(!x)return;h.push(t.li.removeMatchingKeys(l,g.removedDocuments,y).next((()=>t.li.addMatchingKeys(l,g.addedDocuments,y))));let T=x.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(y)!==null?T=T.withResumeToken(sn.EMPTY_BYTE_STRING,Ne.min()).withLastLimboFreeSnapshotVersion(Ne.min()):g.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(g.resumeToken,r)),s=s.insert(y,T),(function(S,C,N){return S.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=I4?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0})(x,T,g)&&h.push(t.li.updateTargetData(l,T))}));let d=Ki(),m=$e();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(l,g))})),h.push(P4(l,c,e.documentUpdates).next((g=>{d=g.Bs,m=g.Ls}))),!r.isEqual(Ne.min())){const g=t.li.getLastRemoteSnapshotVersion(l).next((y=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,r)));h.push(g)}return ee.waitFor(h).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,d,m))).next((()=>d))})).then((l=>(t.vs=s,l)))}function P4(n,e,t){let r=$e(),s=$e();return t.forEach((l=>r=r.add(l))),e.getEntries(n,r).next((l=>{let c=Ki();return t.forEach(((h,d)=>{const m=l.get(h);d.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(h)),d.isNoDocument()&&d.version.isEqual(Ne.min())?(e.removeEntry(h,d.readTime),c=c.insert(h,d)):!m.isValidDocument()||d.version.compareTo(m.version)>0||d.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(d),c=c.insert(h,d)):pe(Uy,"Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",d.version)})),{Bs:c,Ls:s}}))}function N4(n,e){const t=De(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=jy),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function M4(n,e){const t=De(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return t.li.getTargetData(r,e).next((l=>l?(s=l,ee.resolve(s)):t.li.allocateTargetId(r).next((c=>(s=new Ns(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=t.vs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r}))}async function Sg(n,e,t){const r=De(n),s=r.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,(c=>r.persistence.referenceDelegate.removeTarget(c,s)))}catch(c){if(!Il(c))throw c;pe(Uy,`Failed to update sequence numbers for target ${e}: ${c}`)}r.vs=r.vs.remove(e),r.Fs.delete(s.target)}function Ew(n,e,t){const r=De(n);let s=Ne.min(),l=$e();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(d,m,g){const y=De(d),x=y.Fs.get(g);return x!==void 0?ee.resolve(y.vs.get(x)):y.li.getTargetData(m,g)})(r,c,oi(e)).next((h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(c,h.targetId).next((d=>{l=d}))})).next((()=>r.Cs.getDocumentsMatchingQuery(c,e,t?s:Ne.min(),t?l:$e()))).next((h=>(D4(r,bN(e),h),{documents:h,ks:l})))))}function D4(n,e,t){let r=n.Ms.get(e)||Ne.min();t.forEach(((s,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),n.Ms.set(e,r)}class Tw{constructor(){this.activeTargetIds=IN()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class V4{constructor(){this.vo=new Tw,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Tw,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw="ConnectivityMonitor";class Cw{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){pe(Iw,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){pe(Iw,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let th=null;function Eg(){return th===null?th=(function(){return 268435456+Math.round(2147483648*Math.random())})():th++,"0x"+th.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cp="RestConnection",O4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class B4{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.$o=this.databaseId.database===Dh?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,t,r,s,l){const c=Eg(),h=this.Qo(e,t.toUriEncodedString());pe(Cp,`Sending RPC '${e}' ${c}:`,h,r);const d={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(d,s,l);const{host:m}=new URL(h),g=kl(m);return this.zo(e,h,d,r,g).then((y=>(pe(Cp,`Received RPC '${e}' ${c}: `,y),y)),(y=>{throw al(Cp,`RPC '${e}' ${c} failed with error: `,y,"url: ",h,"request:",r),y}))}jo(e,t,r,s,l,c){return this.Wo(e,t,r,s,l)}Go(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+El})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,l)=>e[l]=s)),r&&r.headers.forEach(((s,l)=>e[l]=s))}Qo(e,t){const r=O4[e];let s=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hn="WebChannelConnection",jc=(n,e,t)=>{n.listen(e,(r=>{try{t(r)}catch(s){setTimeout((()=>{throw s}),0)}}))};class el extends B4{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!el.c_){const e=F_();jc(e,z_.STAT_EVENT,(t=>{t.stat===fg.PROXY?pe(hn,"STAT_EVENT: detected buffering proxy"):t.stat===fg.NOPROXY&&pe(hn,"STAT_EVENT: detected no buffering proxy")})),el.c_=!0}}zo(e,t,r,s,l){const c=Eg();return new Promise(((h,d)=>{const m=new O_;m.setWithCredentials(!0),m.listenOnce(B_.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case ph.NO_ERROR:const y=m.getResponseJson();pe(hn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(y)),h(y);break;case ph.TIMEOUT:pe(hn,`RPC '${e}' ${c} timed out`),d(new he(Z.DEADLINE_EXCEEDED,"Request time out"));break;case ph.HTTP_ERROR:const x=m.getStatus();if(pe(hn,`RPC '${e}' ${c} failed with status:`,x,"response text:",m.getResponseText()),x>0){let T=m.getResponseJson();Array.isArray(T)&&(T=T[0]);const k=T==null?void 0:T.error;if(k&&k.status&&k.message){const S=(function(N){const L=N.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(L)>=0?L:Z.UNKNOWN})(k.status);d(new he(S,k.message))}else d(new he(Z.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new he(Z.UNAVAILABLE,"Connection failed."));break;default:Ce(9055,{l_:e,streamId:c,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{pe(hn,`RPC '${e}' ${c} completed.`)}}));const g=JSON.stringify(s);pe(hn,`RPC '${e}' ${c} sending request:`,s),m.send(t,"POST",g,r,15)}))}T_(e,t,r){const s=Eg(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(h.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(h.useFetchStreams=!0),this.Go(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const m=l.join("");pe(hn,`Creating RPC '${e}' stream ${s}: ${m}`,h);const g=c.createWebChannel(m,h);this.I_(g);let y=!1,x=!1;const T=new z4({Ho:k=>{x?pe(hn,`Not sending because RPC '${e}' stream ${s} is closed:`,k):(y||(pe(hn,`Opening RPC '${e}' stream ${s} transport.`),g.open(),y=!0),pe(hn,`RPC '${e}' stream ${s} sending:`,k),g.send(k))},Jo:()=>g.close()});return jc(g,Dc.EventType.OPEN,(()=>{x||(pe(hn,`RPC '${e}' stream ${s} transport opened.`),T.i_())})),jc(g,Dc.EventType.CLOSE,(()=>{x||(x=!0,pe(hn,`RPC '${e}' stream ${s} transport closed`),T.o_(),this.E_(g))})),jc(g,Dc.EventType.ERROR,(k=>{x||(x=!0,al(hn,`RPC '${e}' stream ${s} transport errored. Name:`,k.name,"Message:",k.message),T.o_(new he(Z.UNAVAILABLE,"The operation could not be completed")))})),jc(g,Dc.EventType.MESSAGE,(k=>{var S;if(!x){const C=k.data[0];Ze(!!C,16349);const N=C,L=(N==null?void 0:N.error)||((S=N[0])==null?void 0:S.error);if(L){pe(hn,`RPC '${e}' stream ${s} received error:`,L);const M=L.status;let U=(function(I){const E=Vt[I];if(E!==void 0)return _S(E)})(M),$=L.message;U===void 0&&(U=Z.INTERNAL,$="Unknown error status: "+M+" with message "+L.message),x=!0,T.o_(new he(U,$)),g.close()}else pe(hn,`RPC '${e}' stream ${s} received:`,C),T.__(C)}})),el.u_(),setTimeout((()=>{T.s_()}),0),T}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return U_()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F4(n){return new el(n)}function jp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kf(n){return new HN(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */el.c_=!1;class OS{constructor(e,t,r=1e3,s=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=s,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-r);s>0&&pe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw="PersistentStream";class BS{constructor(e,t,r,s,l,c,h,d){this.Ci=e,this.b_=r,this.S_=s,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new OS(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Z.RESOURCE_EXHAUSTED?(Hi(t.toString()),Hi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===t&&this.G_(r,s)}),(r=>{e((()=>{const s=new he(Z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,t){const r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.H_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return pe(jw,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(pe(jw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class U4 extends BS{constructor(e,t,r,s,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=GN(this.serializer,e),r=(function(l){if(!("targetChange"in l))return Ne.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ne.min():c.readTime?ai(c.readTime):Ne.min()})(e);return this.listener.J_(t,r)}Z_(e){const t={};t.database=_g(this.serializer),t.addTarget=(function(l,c){let h;const d=c.target;if(h=vg(d)?{documents:XN(l,d)}:{query:JN(l,d).ft},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=TS(l,c.resumeToken);const m=wg(l,c.expectedCount);m!==null&&(h.expectedCount=m)}else if(c.snapshotVersion.compareTo(Ne.min())>0){h.readTime=Bh(l,c.snapshotVersion.toTimestamp());const m=wg(l,c.expectedCount);m!==null&&(h.expectedCount=m)}return h})(this.serializer,e);const r=e4(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){const t={};t.database=_g(this.serializer),t.removeTarget=e,this.K_(t)}}class W4 extends BS{constructor(e,t,r,s,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,c),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=YN(e.writeResults,e.commitTime),r=ai(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=_g(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>QN(this.serializer,r)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{}class H4 extends $4{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new he(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,bg(t,r),s,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new he(Z.UNKNOWN,l.toString())}))}jo(e,t,r,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,h])=>this.connection.jo(e,bg(t,r),s,c,h,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new he(Z.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function K4(n,e,t,r){return new H4(n,e,t,r)}class q4{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Hi(t),this.aa=!1):pe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ko="RemoteStore";class G4{constructor(e,t,r,s,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((c=>{r.enqueueAndForget((async()=>{Zo(this)&&(pe(Ko,"Restarting streams for network reachability change."),await(async function(d){const m=De(d);m.Ea.add(4),await _u(m),m.Va.set("Unknown"),m.Ea.delete(4),await _f(m)})(this))}))})),this.Va=new q4(r,s)}}async function _f(n){if(Zo(n))for(const e of n.Ra)await e(!0)}async function _u(n){for(const e of n.Ra)await e(!1)}function zS(n,e){const t=De(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Ky(t)?Hy(t):jl(t).O_()&&$y(t,e))}function Wy(n,e){const t=De(n),r=jl(t);t.Ia.delete(e),r.O_()&&FS(t,e),t.Ia.size===0&&(r.O_()?r.L_():Zo(t)&&t.Va.set("Unknown"))}function $y(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ne.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}jl(n).Z_(e)}function FS(n,e){n.da.$e(e),jl(n).X_(e)}function Hy(n){n.da=new FN({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),jl(n).start(),n.Va.ua()}function Ky(n){return Zo(n)&&!jl(n).x_()&&n.Ia.size>0}function Zo(n){return De(n).Ea.size===0}function US(n){n.da=void 0}async function Q4(n){n.Va.set("Online")}async function Y4(n){n.Ia.forEach(((e,t)=>{$y(n,e)}))}async function X4(n,e){US(n),Ky(n)?(n.Va.ha(e),Hy(n)):n.Va.set("Unknown")}async function J4(n,e,t){if(n.Va.set("Online"),e instanceof ES&&e.state===2&&e.cause)try{await(async function(s,l){const c=l.cause;for(const h of l.targetIds)s.Ia.has(h)&&(await s.remoteSyncer.rejectListen(h,c),s.Ia.delete(h),s.da.removeTarget(h))})(n,e)}catch(r){pe(Ko,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Fh(n,r)}else if(e instanceof xh?n.da.Xe(e):e instanceof SS?n.da.st(e):n.da.tt(e),!t.isEqual(Ne.min()))try{const r=await LS(n.localStore);t.compareTo(r)>=0&&await(function(l,c){const h=l.da.Tt(c);return h.targetChanges.forEach(((d,m)=>{if(d.resumeToken.approximateByteSize()>0){const g=l.Ia.get(m);g&&l.Ia.set(m,g.withResumeToken(d.resumeToken,c))}})),h.targetMismatches.forEach(((d,m)=>{const g=l.Ia.get(d);if(!g)return;l.Ia.set(d,g.withResumeToken(sn.EMPTY_BYTE_STRING,g.snapshotVersion)),FS(l,d);const y=new Ns(g.target,d,m,g.sequenceNumber);$y(l,y)})),l.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(r){pe(Ko,"Failed to raise snapshot:",r),await Fh(n,r)}}async function Fh(n,e,t){if(!Il(e))throw e;n.Ea.add(1),await _u(n),n.Va.set("Offline"),t||(t=()=>LS(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{pe(Ko,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await _f(n)}))}function WS(n,e){return e().catch((t=>Fh(n,t,e)))}async function Sf(n){const e=De(n),t=Hs(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:jy;for(;Z4(e);)try{const s=await N4(e.localStore,r);if(s===null){e.Ta.length===0&&t.L_();break}r=s.batchId,eM(e,s)}catch(s){await Fh(e,s)}$S(e)&&HS(e)}function Z4(n){return Zo(n)&&n.Ta.length<10}function eM(n,e){n.Ta.push(e);const t=Hs(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function $S(n){return Zo(n)&&!Hs(n).x_()&&n.Ta.length>0}function HS(n){Hs(n).start()}async function tM(n){Hs(n).ra()}async function nM(n){const e=Hs(n);for(const t of n.Ta)e.ea(t.mutations)}async function rM(n,e,t){const r=n.Ta.shift(),s=Vy.from(r,e,t);await WS(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await Sf(n)}async function iM(n,e){e&&Hs(n).Y_&&await(async function(r,s){if((function(c){return ON(c)&&c!==Z.ABORTED})(s.code)){const l=r.Ta.shift();Hs(r).B_(),await WS(r,(()=>r.remoteSyncer.rejectFailedWrite(l.batchId,s))),await Sf(r)}})(n,e),$S(n)&&HS(n)}async function Aw(n,e){const t=De(n);t.asyncQueue.verifyOperationInProgress(),pe(Ko,"RemoteStore received new credentials");const r=Zo(t);t.Ea.add(3),await _u(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await _f(t)}async function sM(n,e){const t=De(n);e?(t.Ea.delete(2),await _f(t)):e||(t.Ea.add(2),await _u(t),t.Va.set("Unknown"))}function jl(n){return n.ma||(n.ma=(function(t,r,s){const l=De(t);return l.sa(),new U4(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(n.datastore,n.asyncQueue,{Zo:Q4.bind(null,n),Yo:Y4.bind(null,n),t_:X4.bind(null,n),J_:J4.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),Ky(n)?Hy(n):n.Va.set("Unknown")):(await n.ma.stop(),US(n))}))),n.ma}function Hs(n){return n.fa||(n.fa=(function(t,r,s){const l=De(t);return l.sa(),new W4(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:tM.bind(null,n),t_:iM.bind(null,n),ta:nM.bind(null,n),na:rM.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await Sf(n)):(await n.fa.stop(),n.Ta.length>0&&(pe(Ko,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(e,t,r,s,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=l,this.deferred=new Oi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,l){const c=Date.now()+r,h=new qy(e,t,c,s,l);return h.start(r),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gy(n,e){if(Hi("AsyncQueue",`${e}: ${n}`),Il(n))return new he(Z.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{static emptySet(e){return new tl(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ke.comparator(t.key,r.key):(t,r)=>ke.comparator(t.key,r.key),this.keyedMap=Vc(),this.sortedSet=new xt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof tl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=r.getNext().key;if(!s.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new tl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(){this.ga=new xt(ke.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ce(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class ml{constructor(e,t,r,s,l,c,h,d,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,s,l){const c=[];return t.forEach((h=>{c.push({type:0,doc:h})})),new ml(e,t,tl.emptySet(t),c,r,s,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class aM{constructor(){this.queries=Pw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const s=De(t),l=s.queries;s.queries=Pw(),l.forEach(((c,h)=>{for(const d of h.ba)d.onError(r)}))})(this,new he(Z.ABORTED,"Firestore shutting down"))}}function Pw(){return new Jo((n=>uS(n)),pf)}async function KS(n,e){const t=De(n);let r=3;const s=e.query;let l=t.queries.get(s);l?!l.Sa()&&e.Da()&&(r=2):(l=new oM,r=e.Da()?0:1);try{switch(r){case 0:l.wa=await t.onListen(s,!0);break;case 1:l.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(c){const h=Gy(c,`Initialization of query '${Wa(e.query)}' failed`);return void e.onError(h)}t.queries.set(s,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Qy(t)}async function qS(n,e){const t=De(n),r=e.query;let s=3;const l=t.queries.get(r);if(l){const c=l.ba.indexOf(e);c>=0&&(l.ba.splice(c,1),l.ba.length===0?s=e.Da()?0:1:!l.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function lM(n,e){const t=De(n);let r=!1;for(const s of e){const l=s.query,c=t.queries.get(l);if(c){for(const h of c.ba)h.Fa(s)&&(r=!0);c.wa=s}}r&&Qy(t)}function cM(n,e,t){const r=De(n),s=r.queries.get(e);if(s)for(const l of s.ba)l.onError(t);r.queries.delete(e)}function Qy(n){n.Ca.forEach((e=>{e.next()}))}var Tg,Nw;(Nw=Tg||(Tg={})).Ma="default",Nw.Cache="cache";class GS{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ml(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ml.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Tg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e){this.key=e}}class YS{constructor(e){this.key=e}}class uM{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=$e(),this.mutatedKeys=$e(),this.eu=dS(e),this.tu=new tl(this.eu)}get nu(){return this.Za}ru(e,t){const r=t?t.iu:new Rw,s=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=s,h=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((g,y)=>{const x=s.get(g),T=gf(this.query,y)?y:null,k=!!x&&this.mutatedKeys.has(x.key),S=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let C=!1;x&&T?x.data.isEqual(T.data)?k!==S&&(r.track({type:3,doc:T}),C=!0):this.su(x,T)||(r.track({type:2,doc:T}),C=!0,(d&&this.eu(T,d)>0||m&&this.eu(T,m)<0)&&(h=!0)):!x&&T?(r.track({type:0,doc:T}),C=!0):x&&!T&&(r.track({type:1,doc:x}),C=!0,(d||m)&&(h=!0)),C&&(T?(c=c.add(T),l=S?l.add(g):l.delete(g)):(c=c.delete(g),l=l.delete(g)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const g=this.query.limitType==="F"?c.last():c.first();c=c.delete(g.key),l=l.delete(g.key),r.track({type:1,doc:g})}return{tu:c,iu:r,Ss:h,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((g,y)=>(function(T,k){const S=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce(20277,{Vt:C})}};return S(T)-S(k)})(g.type,y.type)||this.eu(g.doc,y.doc))),this.ou(r),s=s??!1;const h=t&&!s?this._u():[],d=this.Ya.size===0&&this.current&&!s?1:0,m=d!==this.Xa;return this.Xa=d,c.length!==0||m?{snapshot:new ml(this.query,e.tu,l,c,e.mutatedKeys,d===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Rw,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=$e(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const t=[];return e.forEach((r=>{this.Ya.has(r)||t.push(new YS(r))})),this.Ya.forEach((r=>{e.has(r)||t.push(new QS(r))})),t}cu(e){this.Za=e.ks,this.Ya=$e();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ml.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Yy="SyncEngine";class dM{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class hM{constructor(e){this.key=e,this.hu=!1}}class fM{constructor(e,t,r,s,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Jo((h=>uS(h)),pf),this.Iu=new Map,this.Eu=new Set,this.Ru=new xt(ke.comparator),this.Au=new Map,this.Vu=new By,this.du={},this.mu=new Map,this.fu=fl.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function mM(n,e,t=!0){const r=n2(n);let s;const l=r.Tu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),s=l.view.lu()):s=await XS(r,e,t,!0),s}async function pM(n,e){const t=n2(n);await XS(t,e,!0,!1)}async function XS(n,e,t,r){const s=await M4(n.localStore,oi(e)),l=s.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let h;return r&&(h=await gM(n,e,l,c==="current",s.resumeToken)),n.isPrimaryClient&&t&&zS(n.remoteStore,s),h}async function gM(n,e,t,r,s){n.pu=(y,x,T)=>(async function(S,C,N,L){let M=C.view.ru(N);M.Ss&&(M=await Ew(S.localStore,C.query,!1).then((({documents:I})=>C.view.ru(I,M))));const U=L&&L.targetChanges.get(C.targetId),$=L&&L.targetMismatches.get(C.targetId)!=null,G=C.view.applyChanges(M,S.isPrimaryClient,U,$);return Dw(S,C.targetId,G.au),G.snapshot})(n,y,x,T);const l=await Ew(n.localStore,e,!0),c=new uM(e,l.ks),h=c.ru(l.documents),d=ku.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),m=c.applyChanges(h,n.isPrimaryClient,d);Dw(n,t,m.au);const g=new dM(e,t,c);return n.Tu.set(e,g),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),m.snapshot}async function yM(n,e,t){const r=De(n),s=r.Tu.get(e),l=r.Iu.get(s.targetId);if(l.length>1)return r.Iu.set(s.targetId,l.filter((c=>!pf(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Sg(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),t&&Wy(r.remoteStore,s.targetId),Ig(r,s.targetId)})).catch(Tl)):(Ig(r,s.targetId),await Sg(r.localStore,s.targetId,!0))}async function vM(n,e){const t=De(n),r=t.Tu.get(e),s=t.Iu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Wy(t.remoteStore,r.targetId))}async function xM(n,e,t){const r=TM(n);try{const s=await(function(c,h){const d=De(c),m=ht.now(),g=h.reduce(((T,k)=>T.add(k.key)),$e());let y,x;return d.persistence.runTransaction("Locally write mutations","readwrite",(T=>{let k=Ki(),S=$e();return d.xs.getEntries(T,g).next((C=>{k=C,k.forEach(((N,L)=>{L.isValidDocument()||(S=S.add(N))}))})).next((()=>d.localDocuments.getOverlayedDocuments(T,k))).next((C=>{y=C;const N=[];for(const L of h){const M=NN(L,y.get(L.key).overlayedDocument);M!=null&&N.push(new eo(L.key,M,nS(M.value.mapValue),_n.exists(!0)))}return d.mutationQueue.addMutationBatch(T,m,N,h)})).next((C=>{x=C;const N=C.applyToLocalDocumentSet(y,S);return d.documentOverlayCache.saveOverlays(T,C.batchId,N)}))})).then((()=>({batchId:x.batchId,changes:fS(y)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(c,h,d){let m=c.du[c.currentUser.toKey()];m||(m=new xt(We)),m=m.insert(h,d),c.du[c.currentUser.toKey()]=m})(r,s.batchId,t),await Su(r,s.changes),await Sf(r.remoteStore)}catch(s){const l=Gy(s,"Failed to persist write");t.reject(l)}}async function JS(n,e){const t=De(n);try{const r=await R4(t.localStore,e);e.targetChanges.forEach(((s,l)=>{const c=t.Au.get(l);c&&(Ze(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c.hu=!0:s.modifiedDocuments.size>0?Ze(c.hu,14607):s.removedDocuments.size>0&&(Ze(c.hu,42227),c.hu=!1))})),await Su(t,r,e)}catch(r){await Tl(r)}}function Mw(n,e,t){const r=De(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Tu.forEach(((l,c)=>{const h=c.view.va(e);h.snapshot&&s.push(h.snapshot)})),(function(c,h){const d=De(c);d.onlineState=h;let m=!1;d.queries.forEach(((g,y)=>{for(const x of y.ba)x.va(h)&&(m=!0)})),m&&Qy(d)})(r.eventManager,e),s.length&&r.Pu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function wM(n,e,t){const r=De(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Au.get(e),l=s&&s.key;if(l){let c=new xt(ke.comparator);c=c.insert(l,mn.newNoDocument(l,Ne.min()));const h=$e().add(l),d=new bf(Ne.min(),new Map,new xt(We),c,h);await JS(r,d),r.Ru=r.Ru.remove(l),r.Au.delete(e),Xy(r)}else await Sg(r.localStore,e,!1).then((()=>Ig(r,e,t))).catch(Tl)}async function bM(n,e){const t=De(n),r=e.batch.batchId;try{const s=await A4(t.localStore,e);e2(t,r,null),ZS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Su(t,s)}catch(s){await Tl(s)}}async function kM(n,e,t){const r=De(n);try{const s=await(function(c,h){const d=De(c);return d.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let g;return d.mutationQueue.lookupMutationBatch(m,h).next((y=>(Ze(y!==null,37113),g=y.keys(),d.mutationQueue.removeMutationBatch(m,y)))).next((()=>d.mutationQueue.performConsistencyCheck(m))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(m,g,h))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,g))).next((()=>d.localDocuments.getDocuments(m,g)))}))})(r.localStore,e);e2(r,e,t),ZS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Su(r,s)}catch(s){await Tl(s)}}function ZS(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function e2(n,e,t){const r=De(n);let s=r.du[r.currentUser.toKey()];if(s){const l=s.get(e);l&&(t?l.reject(t):l.resolve(),s=s.remove(e)),r.du[r.currentUser.toKey()]=s}}function Ig(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((r=>{n.Vu.containsKey(r)||t2(n,r)}))}function t2(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(Wy(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),Xy(n))}function Dw(n,e,t){for(const r of t)r instanceof QS?(n.Vu.addReference(r.key,e),_M(n,r)):r instanceof YS?(pe(Yy,"Document no longer in limbo: "+r.key),n.Vu.removeReference(r.key,e),n.Vu.containsKey(r.key)||t2(n,r.key)):Ce(19791,{wu:r})}function _M(n,e){const t=e.key,r=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(r)||(pe(Yy,"New document in limbo: "+t),n.Eu.add(r),Xy(n))}function Xy(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ke(at.fromString(e)),r=n.fu.next();n.Au.set(r,new hM(t)),n.Ru=n.Ru.insert(t,r),zS(n.remoteStore,new Ns(oi(My(t.path)),r,"TargetPurposeLimboResolution",hf.ce))}}async function Su(n,e,t){const r=De(n),s=[],l=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((h,d)=>{c.push(r.pu(d,e,t).then((m=>{var g;if((m||t)&&r.isPrimaryClient){const y=m?!m.fromCache:(g=t==null?void 0:t.targetChanges.get(d.targetId))==null?void 0:g.current;r.sharedClientState.updateQueryState(d.targetId,y?"current":"not-current")}if(m){s.push(m);const y=Fy.Es(d.targetId,m);l.push(y)}})))})),await Promise.all(c),r.Pu.J_(s),await(async function(d,m){const g=De(d);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(y=>ee.forEach(m,(x=>ee.forEach(x.Ts,(T=>g.persistence.referenceDelegate.addReference(y,x.targetId,T))).next((()=>ee.forEach(x.Is,(T=>g.persistence.referenceDelegate.removeReference(y,x.targetId,T)))))))))}catch(y){if(!Il(y))throw y;pe(Uy,"Failed to update sequence numbers: "+y)}for(const y of m){const x=y.targetId;if(!y.fromCache){const T=g.vs.get(x),k=T.snapshotVersion,S=T.withLastLimboFreeSnapshotVersion(k);g.vs=g.vs.insert(x,S)}}})(r.localStore,l))}async function SM(n,e){const t=De(n);if(!t.currentUser.isEqual(e)){pe(Yy,"User change. New user:",e.toKey());const r=await VS(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((h=>{h.forEach((d=>{d.reject(new he(Z.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Su(t,r.Ns)}}function EM(n,e){const t=De(n),r=t.Au.get(e);if(r&&r.hu)return $e().add(r.key);{let s=$e();const l=t.Iu.get(e);if(!l)return s;for(const c of l){const h=t.Tu.get(c);s=s.unionWith(h.view.nu)}return s}}function n2(n){const e=De(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=JS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=EM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wM.bind(null,e),e.Pu.J_=lM.bind(null,e.eventManager),e.Pu.yu=cM.bind(null,e.eventManager),e}function TM(n){const e=De(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=kM.bind(null,e),e}class Uh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=kf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return j4(this.persistence,new T4,e.initialUser,this.serializer)}Cu(e){return new DS(zy.Vi,this.serializer)}Du(e){return new V4}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Uh.provider={build:()=>new Uh};class IM extends Uh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ze(this.persistence.referenceDelegate instanceof zh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new d4(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Rn.withCacheSize(this.cacheSizeBytes):Rn.DEFAULT;return new DS((r=>zh.Vi(r,t)),this.serializer)}}class Cg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Mw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=SM.bind(null,this.syncEngine),await sM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new aM})()}createDatastore(e){const t=kf(e.databaseInfo.databaseId),r=F4(e.databaseInfo);return K4(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,s,l,c,h){return new G4(r,s,l,c,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>Mw(this.syncEngine,t,0)),(function(){return Cw.v()?new Cw:new L4})())}createSyncEngine(e,t){return(function(s,l,c,h,d,m,g){const y=new fM(s,l,c,h,d,m);return g&&(y.gu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const l=De(s);pe(Ko,"RemoteStore shutting down."),l.Ea.add(5),await _u(l),l.Aa.shutdown(),l.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Cg.provider={build:()=>new Cg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Hi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks="FirestoreClient";class CM{constructor(e,t,r,s,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=s,this.user=fn.UNAUTHENTICATED,this.clientId=Cy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(async c=>{pe(Ks,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(pe(Ks,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Oi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Gy(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Ap(n,e){n.asyncQueue.verifyOperationInProgress(),pe(Ks,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async s=>{r.isEqual(s)||(await VS(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Vw(n,e){n.asyncQueue.verifyOperationInProgress();const t=await jM(n);pe(Ks,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>Aw(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,s)=>Aw(e.remoteStore,s))),n._onlineComponents=e}async function jM(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){pe(Ks,"Using user provided OfflineComponentProvider");try{await Ap(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===Z.FAILED_PRECONDITION||s.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;al("Error using user provided cache. Falling back to memory cache: "+t),await Ap(n,new Uh)}}else pe(Ks,"Using default OfflineComponentProvider"),await Ap(n,new IM(void 0));return n._offlineComponents}async function i2(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(pe(Ks,"Using user provided OnlineComponentProvider"),await Vw(n,n._uninitializedComponentsProvider._online)):(pe(Ks,"Using default OnlineComponentProvider"),await Vw(n,new Cg))),n._onlineComponents}function AM(n){return i2(n).then((e=>e.syncEngine))}async function s2(n){const e=await i2(n),t=e.eventManager;return t.onListen=mM.bind(null,e.syncEngine),t.onUnlisten=yM.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=pM.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=vM.bind(null,e.syncEngine),t}function RM(n,e,t={}){const r=new Oi;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,h,d,m){const g=new r2({next:x=>{g.Nu(),c.enqueueAndForget((()=>qS(l,y)));const T=x.docs.has(h);!T&&x.fromCache?m.reject(new he(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&x.fromCache&&d&&d.source==="server"?m.reject(new he(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(x)},error:x=>m.reject(x)}),y=new GS(My(h.path),g,{includeMetadataChanges:!0,Ka:!0});return KS(l,y)})(await s2(n),n.asyncQueue,e,t,r))),r.promise}function PM(n,e,t={}){const r=new Oi;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,h,d,m){const g=new r2({next:x=>{g.Nu(),c.enqueueAndForget((()=>qS(l,y))),x.fromCache&&d.source==="server"?m.reject(new he(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(x)},error:x=>m.reject(x)}),y=new GS(h,g,{includeMetadataChanges:!0,Ka:!0});return KS(l,y)})(await s2(n),n.asyncQueue,e,t,r))),r.promise}function NM(n,e){const t=new Oi;return n.asyncQueue.enqueueAndForget((async()=>xM(await AM(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o2(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MM="ComponentProvider",Lw=new Map;function DM(n,e,t,r,s){return new nN(n,e,t,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,o2(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2="firestore.googleapis.com",Ow=!0;class Bw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=a2,this.ssl=Ow}else this.host=e.host,this.ssl=e.ssl??Ow;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=MS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<c4)throw new he(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}HP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=o2(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new he(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new he(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new he(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ef{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Bw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Bw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new DP;switch(r.type){case"firstParty":return new BP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new he(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=Lw.get(t);r&&(pe(MM,"Removing Datastore"),Lw.delete(t),r.terminate())})(this),Promise.resolve()}}function VM(n,e,t,r={}){var m;n=hr(n,Ef);const s=kl(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},h=`${e}:${t}`;s&&(Yk(`https://${h}`),Xk("Firestore",!0)),l.host!==a2&&l.host!==h&&al("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...l,host:h,ssl:s,emulatorOptions:r};if(!Ui(d,c)&&(n._setSettings(d),r.mockUserToken)){let g,y;if(typeof r.mockUserToken=="string")g=r.mockUserToken,y=fn.MOCK_USER;else{g=Wj(r.mockUserToken,(m=n._app)==null?void 0:m.options.projectId);const x=r.mockUserToken.sub||r.mockUserToken.user_id;if(!x)throw new he(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new fn(x)}n._authCredentials=new VP(new $_(g,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new to(this.firestore,e,this._query)}}class At{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new At(this.firestore,e,this._key)}toJSON(){return{type:At._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(wu(t,At._jsonSchema))return new At(e,r||null,new ke(at.fromString(t.referencePath)))}}At._jsonSchemaVersion="firestore/documentReference/1.0",At._jsonSchema={type:Bt("string",At._jsonSchemaVersion),referencePath:Bt("string")};class Bs extends to{constructor(e,t,r){super(e,t,My(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new At(this.firestore,null,new ke(e))}withConverter(e){return new Bs(this.firestore,e,this._path)}}function Rt(n,e,...t){if(n=Pt(n),H_("collection","path",e),n instanceof Ef){const r=at.fromString(e,...t);return Jx(r),new Bs(n,null,r)}{if(!(n instanceof At||n instanceof Bs))throw new he(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(at.fromString(e,...t));return Jx(r),new Bs(n.firestore,null,r)}}function rt(n,e,...t){if(n=Pt(n),arguments.length===1&&(e=Cy.newId()),H_("doc","path",e),n instanceof Ef){const r=at.fromString(e,...t);return Xx(r),new At(n,null,new ke(r))}{if(!(n instanceof At||n instanceof Bs))throw new he(Z.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(at.fromString(e,...t));return Xx(r),new At(n.firestore,n instanceof Bs?n.converter:null,new ke(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw="AsyncQueue";class Fw{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new OS(this,"async_queue_retry"),this._c=()=>{const r=jp();r&&pe(zw,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=jp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=jp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Oi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Il(e))throw e;pe(zw,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Hi("INTERNAL UNHANDLED ERROR: ",Uw(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=qy.createAndSchedule(this,e,t,r,(l=>this.hc(l)));return this.tc.push(s),s}uc(){this.nc&&Ce(47125,{Pc:Uw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Uw(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class no extends Ef{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new Fw,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Fw(e),this._firestoreClient=void 0,await e}}}function LM(n,e){const t=typeof n=="object"?n:t_(),r=typeof n=="string"?n:Dh,s=gy(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const l=Fj("firestore");l&&VM(s,...l)}return s}function Tf(n){if(n._terminated)throw new he(Z.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||OM(n),n._firestoreClient}function OM(n){var r,s,l,c;const e=n._freezeSettings(),t=DM(n._databaseId,((r=n._app)==null?void 0:r.options.appId)||"",n._persistenceKey,(s=n._app)==null?void 0:s.options.apiKey,e);n._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new CM(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(d){const m=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(m),_online:m}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this._byteString=e}static fromBase64String(e){try{return new or(sn.fromBase64String(e))}catch(t){throw new he(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new or(sn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:or._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(wu(e,or._jsonSchema))return or.fromBase64String(e.bytes)}}or._jsonSchemaVersion="firestore/bytes/1.0",or._jsonSchema={type:Bt("string",or._jsonSchemaVersion),bytes:Bt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return We(this._lat,e._lat)||We(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:li._jsonSchemaVersion}}static fromJSON(e){if(wu(e,li._jsonSchema))return new li(e.latitude,e.longitude)}}li._jsonSchemaVersion="firestore/geoPoint/1.0",li._jsonSchema={type:Bt("string",li._jsonSchemaVersion),latitude:Bt("number"),longitude:Bt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==s[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Pr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(wu(e,Pr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Pr(e.vectorValues);throw new he(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Pr._jsonSchemaVersion="firestore/vectorValue/1.0",Pr._jsonSchema={type:Bt("string",Pr._jsonSchemaVersion),vectorValues:Bt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BM=/^__.*__$/;class zM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new eo(e,this.data,this.fieldMask,t,this.fieldTransforms):new bu(e,this.data,t,this.fieldTransforms)}}class l2{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new eo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function c2(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce(40011,{dataSource:n})}}class Cf{constructor(e,t,r,s,l,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Cf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const t=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var s;const t=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Wh(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(c2(this.dataSource)&&BM.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class FM{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||kf(e)}createContext(e,t,r,s=!1){return new Cf({dataSource:e,methodName:t,targetDoc:r,path:rn.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Eu(n){const e=n._freezeSettings(),t=kf(n._databaseId);return new FM(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Jy(n,e,t,r,s,l={}){const c=n.createContext(l.merge||l.mergeFields?2:0,e,t,s);r0("Data must be an object, but it was:",c,r);const h=f2(r,c);let d,m;if(l.merge)d=new qn(c.fieldMask),m=c.fieldTransforms;else if(l.mergeFields){const g=[];for(const y of l.mergeFields){const x=qo(e,y,t);if(!c.contains(x))throw new he(Z.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);g2(g,x)||g.push(x)}d=new qn(g),m=c.fieldTransforms.filter((y=>d.covers(y.field)))}else d=null,m=c.fieldTransforms;return new zM(new Pn(h),d,m)}class jf extends ea{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jf}}function u2(n,e,t){return new Cf({dataSource:3,targetDoc:e.settings.targetDoc,methodName:n._methodName,arrayElement:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Zy extends ea{_toFieldTransform(e){return new vf(e.path,new su)}isEqual(e){return e instanceof Zy}}class e0 extends ea{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=u2(this,e,!0),r=this.Ac.map((l=>ta(l,t))),s=new dl(r);return new vf(e.path,s)}isEqual(e){return e instanceof e0&&Ui(this.Ac,e.Ac)}}class t0 extends ea{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=u2(this,e,!0),r=this.Ac.map((l=>ta(l,t))),s=new hl(r);return new vf(e.path,s)}isEqual(e){return e instanceof t0&&Ui(this.Ac,e.Ac)}}class n0 extends ea{constructor(e,t){super(e),this.Vc=t}_toFieldTransform(e){const t=new ou(e.serializer,gS(e.serializer,this.Vc));return new vf(e.path,t)}isEqual(e){return e instanceof n0&&this.Vc===e.Vc}}function d2(n,e,t,r){const s=n.createContext(1,e,t);r0("Data must be an object, but it was:",s,r);const l=[],c=Pn.empty();Zs(r,((d,m)=>{const g=p2(e,d,t);m=Pt(m);const y=s.childContextForFieldPath(g);if(m instanceof jf)l.push(g);else{const x=ta(m,y);x!=null&&(l.push(g),c.set(g,x))}}));const h=new qn(l);return new l2(c,h,s.fieldTransforms)}function h2(n,e,t,r,s,l){const c=n.createContext(1,e,t),h=[qo(e,r,t)],d=[s];if(l.length%2!=0)throw new he(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<l.length;x+=2)h.push(qo(e,l[x])),d.push(l[x+1]);const m=[],g=Pn.empty();for(let x=h.length-1;x>=0;--x)if(!g2(m,h[x])){const T=h[x];let k=d[x];k=Pt(k);const S=c.childContextForFieldPath(T);if(k instanceof jf)m.push(T);else{const C=ta(k,S);C!=null&&(m.push(T),g.set(T,C))}}const y=new qn(m);return new l2(g,y,c.fieldTransforms)}function UM(n,e,t,r=!1){return ta(t,n.createContext(r?4:3,e))}function ta(n,e){if(m2(n=Pt(n)))return r0("Unsupported field value:",e,n),f2(n,e);if(n instanceof ea)return(function(r,s){if(!c2(s.dataSource))throw s.createError(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(s);l&&s.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,s){const l=[];let c=0;for(const h of r){let d=ta(h,s.childContextForArray(c));d==null&&(d={nullValue:"NULL_VALUE"}),l.push(d),c++}return{arrayValue:{values:l}}})(n,e)}return(function(r,s){if((r=Pt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return gS(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=ht.fromDate(r);return{timestampValue:Bh(s.serializer,l)}}if(r instanceof ht){const l=new ht(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Bh(s.serializer,l)}}if(r instanceof li)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof or)return{bytesValue:TS(s.serializer,r._byteString)};if(r instanceof At){const l=s.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw s.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Oy(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Pr)return(function(c,h){const d=c instanceof Pr?c.toArray():c;return{mapValue:{fields:{[eS]:{stringValue:tS},[Vh]:{arrayValue:{values:d.map((g=>{if(typeof g!="number")throw h.createError("VectorValues must only contain numeric values.");return Dy(h.serializer,g)}))}}}}}})(r,s);if(NS(r))return r._toProto(s.serializer);throw s.createError(`Unsupported field value: ${df(r)}`)})(n,e)}function f2(n,e){const t={};return G_(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zs(n,((r,s)=>{const l=ta(s,e.childContextForField(r));l!=null&&(t[r]=l)})),{mapValue:{fields:t}}}function m2(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ht||n instanceof li||n instanceof or||n instanceof At||n instanceof ea||n instanceof Pr||NS(n))}function r0(n,e,t){if(!m2(t)||!K_(t)){const r=df(t);throw r==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+r)}}function qo(n,e,t){if((e=Pt(e))instanceof If)return e._internalPath;if(typeof e=="string")return p2(n,e);throw Wh("Field path arguments must be of type string or ",n,!1,void 0,t)}const WM=new RegExp("[~\\*/\\[\\]]");function p2(n,e,t){if(e.search(WM)>=0)throw Wh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new If(...e.split("."))._internalPath}catch{throw Wh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Wh(n,e,t,r,s){const l=r&&!r.isEmpty(),c=s!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(l||c)&&(d+=" (found",l&&(d+=` in field ${r}`),c&&(d+=` in document ${s}`),d+=")"),new he(Z.INVALID_ARGUMENT,h+n+d)}function g2(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{convertValue(e,t="none"){switch($s(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ws(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Zs(e,((s,l)=>{r[s]=this.convertValue(l,t)})),r}convertVectorValue(e){var r,s,l;const t=(l=(s=(r=e.fields)==null?void 0:r[Vh].arrayValue)==null?void 0:s.values)==null?void 0:l.map((c=>jt(c.doubleValue)));return new Pr(t)}convertGeoPoint(e){return new li(jt(e.latitude),jt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=mf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(tu(e));default:return null}}convertTimestamp(e){const t=Us(e);return new ht(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=at.fromString(e);Ze(PS(r),9688,{name:e});const s=new nu(r.get(1),r.get(3)),l=new ke(r.popFirst(5));return s.isEqual(t)||Hi(`Document ${l} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2 extends $M{constructor(e){super(),this.firestore=e}convertBytes(e){return new or(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new At(this.firestore,null,t)}}function nt(){return new Zy("serverTimestamp")}function v2(...n){return new e0("arrayUnion",n)}function HM(...n){return new t0("arrayRemove",n)}function Go(n){return new n0("increment",n)}const Ww="@firebase/firestore",$w="4.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e,t,r,s,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new At(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new KM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(qo("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class KM extends x2{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qM(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new he(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class i0{}class s0 extends i0{}function fr(n,e,...t){let r=[];e instanceof i0&&r.push(e),r=r.concat(t),(function(l){const c=l.filter((d=>d instanceof o0)).length,h=l.filter((d=>d instanceof Af)).length;if(c>1||c>0&&h>0)throw new he(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)n=s._apply(n);return n}class Af extends s0{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Af(e,t,r)}_apply(e){const t=this._parse(e);return w2(e._query,t),new to(e.firestore,e.converter,xg(e._query,t))}_parse(e){const t=Eu(e.firestore);return(function(l,c,h,d,m,g,y){let x;if(m.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new he(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){Kw(y,g);const k=[];for(const S of y)k.push(Hw(d,l,S));x={arrayValue:{values:k}}}else x=Hw(d,l,y)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||Kw(y,g),x=UM(h,c,y,g==="in"||g==="not-in");return Ot.create(m,g,x)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function di(n,e,t){const r=e,s=qo("where",n);return Af._create(s,r,t)}class o0 extends i0{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new o0(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:Mr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,l){let c=s;const h=l.getFlattenedFilters();for(const d of h)w2(c,d),c=xg(c,d)})(e._query,t),new to(e.firestore,e.converter,xg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class a0 extends s0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new a0(e,t)}_apply(e){const t=(function(s,l,c){if(s.startAt!==null)throw new he(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new he(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new iu(l,c)})(e._query,this._field,this._direction);return new to(e.firestore,e.converter,wN(e._query,t))}}function qi(n,e="asc"){const t=e,r=qo("orderBy",n);return a0._create(r,t)}class l0 extends s0{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new l0(e,t,r)}_apply(e){return new to(e.firestore,e.converter,Oh(e._query,this._limit,this._limitType))}}function GM(n){return l0._create("limit",n,"F")}function Hw(n,e,t){if(typeof(t=Pt(t))=="string"){if(t==="")throw new he(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cS(e)&&t.indexOf("/")!==-1)throw new he(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(at.fromString(t));if(!ke.isDocumentKey(r))throw new he(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ow(n,new ke(r))}if(t instanceof At)return ow(n,t._key);throw new he(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${df(t)}.`)}function Kw(n,e){if(!Array.isArray(n)||n.length===0)throw new he(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function w2(n,e){const t=(function(s,l){for(const c of s)for(const h of c.getFlattenedFilters())if(l.indexOf(h.op)>=0)return h.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new he(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function c0(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Oc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class zo extends x2{constructor(e,t,r,s,l,c){super(e,t,r,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new wh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(qo("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=zo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}zo._jsonSchemaVersion="firestore/documentSnapshot/1.0",zo._jsonSchema={type:Bt("string",zo._jsonSchemaVersion),bundleSource:Bt("string","DocumentSnapshot"),bundleName:Bt("string"),bundle:Bt("string")};class wh extends zo{data(e={}){return super.data(e)}}class nl{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Oc(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new wh(this._firestore,this._userDataWriter,r.key,r,new Oc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,l){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map((h=>{const d=new wh(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Oc(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:d,oldIndex:-1,newIndex:c++}}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((h=>l||h.type!==3)).map((h=>{const d=new wh(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Oc(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,g=-1;return h.type!==0&&(m=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),g=c.indexOf(h.doc.key)),{type:QM(h.type),doc:d,oldIndex:m,newIndex:g}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=nl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Cy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),s.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function QM(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nl._jsonSchemaVersion="firestore/querySnapshot/1.0",nl._jsonSchema={type:Bt("string",nl._jsonSchemaVersion),bundleSource:Bt("string","QuerySnapshot"),bundleName:Bt("string"),bundle:Bt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Eu(e)}set(e,t,r){this._verifyNotCommitted();const s=Rp(e,this._firestore),l=c0(s.converter,t,r),c=Jy(this._dataReader,"WriteBatch.set",s._key,l,s.converter!==null,r);return this._mutations.push(c.toMutation(s._key,_n.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const l=Rp(e,this._firestore);let c;return c=typeof(t=Pt(t))=="string"||t instanceof If?h2(this._dataReader,"WriteBatch.update",l._key,t,r,s):d2(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,_n.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Rp(e,this._firestore);return this._mutations=this._mutations.concat(new wf(t._key,_n.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new he(Z.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Rp(n,e){if((n=Pt(n)).firestore!==e)throw new he(Z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(n){n=hr(n,At);const e=hr(n.firestore,no),t=Tf(e);return RM(t,n._key).then((r=>XM(e,n,r)))}function gn(n){n=hr(n,to);const e=hr(n.firestore,no),t=Tf(e),r=new y2(e);return qM(n._query),PM(t,n._query).then((s=>new nl(e,r,n,s)))}function Al(n,e,t){n=hr(n,At);const r=hr(n.firestore,no),s=c0(n.converter,e,t),l=Eu(r);return Tu(r,[Jy(l,"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,_n.none())])}function Sn(n,e,t,...r){n=hr(n,At);const s=hr(n.firestore,no),l=Eu(s);let c;return c=typeof(e=Pt(e))=="string"||e instanceof If?h2(l,"updateDoc",n._key,e,t,r):d2(l,"updateDoc",n._key,e),Tu(s,[c.toMutation(n._key,_n.exists(!0))])}function b2(n){return Tu(hr(n.firestore,no),[new wf(n._key,_n.none())])}function Rf(n,e){const t=hr(n.firestore,no),r=rt(n),s=c0(n.converter,e),l=Eu(n.firestore);return Tu(t,[Jy(l,"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,_n.exists(!1))]).then((()=>r))}function Tu(n,e){const t=Tf(n);return NM(t,e)}function XM(n,e,t){const r=t.docs.get(e._key),s=new y2(n);return new zo(n,s,e._key,r,new Oc(t.hasPendingWrites,t.fromCache),e.converter)}function k2(n){return n=hr(n,no),Tf(n),new YM(n,(e=>Tu(n,e)))}(function(e,t=!0){MP(_l),sl(new Uo("firestore",((r,{instanceIdentifier:s,options:l})=>{const c=r.getProvider("app").getImmediate(),h=new no(new LP(r.getProvider("auth-internal")),new zP(c,r.getProvider("app-check-internal")),rN(c,s),c);return l={useFetchStreams:t,...l},h._setSettings(l),h}),"PUBLIC").setMultipleInstances(!0)),Ls(Ww,$w,e),Ls(Ww,$w,"esm2020")})();var JM="firebase",ZM="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ls(JM,ZM,"app");const eD={apiKey:"AIzaSyCf4uRHqqZtYR3ZvlbHF9w59qGuEjlXcW4",authDomain:"kinderbucks-e3e8c.firebaseapp.com",projectId:"kinderbucks-e3e8c",storageBucket:"kinderbucks-e3e8c.firebasestorage.app",messagingSenderId:"18326874439",appId:"1:18326874439:web:ad902e6a1c794b2b3c4462",measurementId:"G-3JMD9HSMC3"},_2=e_(eD),je=LM(_2),Qo=PP(_2),ro="users",Nn={ADMIN:"admin",BUSINESS:"business",MEMBER:"member"};function ii(n){return n?Array.isArray(n.roles)?n.roles:Array.isArray(n.role)?n.role:n.role&&typeof n.role=="string"?[n.role]:[Nn.MEMBER]:[]}function tD(n,e){return ii(n).includes(e)}async function nD(n,e,t){const s=(await mR(Qo,n,e)).user;return await yR(s,{displayName:t}),await Al(rt(je,ro,s.uid),{uid:s.uid,email:s.email,displayName:t,roles:[Nn.MEMBER],createdAt:nt(),lastLogin:nt()}),s}async function rD(n,e){const t=await pR(Qo,n,e);return await Sn(rt(je,ro,t.user.uid),{lastLogin:nt()}),t.user}async function iD(){var l;const n=new Pi,t=(await FR(Qo,n)).user,r=rt(je,ro,t.uid);return(await Lr(r)).exists()?await Sn(r,{lastLogin:nt(),photoURL:t.photoURL}):await Al(r,{uid:t.uid,email:t.email,displayName:t.displayName||((l=t.email)==null?void 0:l.split("@")[0]),photoURL:t.photoURL,roles:[Nn.MEMBER],createdAt:nt(),lastLogin:nt(),provider:"google"}),t}async function S2(){return bR(Qo)}async function qw(n){const e=rt(je,ro,n),t=await Lr(e);return t.exists()?t.data():null}async function sD(n,e){if(!Object.values(Nn).includes(e))throw new Error("Invalid role");const t=rt(je,ro,n),r=await Lr(t);if(r.exists()){const s=r.data();if(Array.isArray(s.roles))await Sn(t,{roles:v2(e),updatedAt:nt()});else{const l=s.role?[s.role]:[Nn.MEMBER];l.includes(e)||l.push(e),await Sn(t,{roles:l,updatedAt:nt()})}}}async function oD(n,e){if(!Object.values(Nn).includes(e))throw new Error("Invalid role");const t=rt(je,ro,n),r=await Lr(t);if(r.exists()){const s=r.data(),l=ii(s);if(l.length===1&&l[0]===e){await Sn(t,{roles:[Nn.MEMBER],updatedAt:nt()});return}if(Array.isArray(s.roles))await Sn(t,{roles:HM(e),updatedAt:nt()});else{const h=(s.role?[s.role]:[Nn.MEMBER]).filter(d=>d!==e);await Sn(t,{roles:h.length>0?h:[Nn.MEMBER],updatedAt:nt()})}}}async function aD(n,e){const t=rt(je,ro,n),r=await Lr(t);if(r.exists()){const s=r.data(),l=ii(s),c=l.includes(Nn.BUSINESS)?l:[...l,Nn.BUSINESS];await Sn(t,{roles:c,businessCode:e,updatedAt:nt()})}}async function lD(){return(await gn(Rt(je,ro))).docs.map(e=>({id:e.id,...e.data()}))}function cD(n){return wR(Qo,n)}const E2=A.createContext(null);function uD({children:n}){const[e,t]=A.useState(null),[r,s]=A.useState(null),[l,c]=A.useState(!0);A.useEffect(()=>{const C=cD(async N=>{if(t(N),N){const L=await qw(N.uid);s(L)}else s(null);c(!1)});return()=>C()},[]);const h=ii(r),d=!!e,m=h.includes(Nn.ADMIN),g=h.includes(Nn.BUSINESS),y=h.includes(Nn.MEMBER)||d,S={user:e,profile:r,roles:h,loading:l,isAuthenticated:d,isAdmin:m,isBusiness:g,isMember:y,hasRole:C=>tD(r,C),hasAnyRole:(...C)=>C.some(N=>h.includes(N)),refreshProfile:async()=>{if(e){const C=await qw(e.uid);s(C)}}};return a.jsx(E2.Provider,{value:S,children:n})}function Or(){const n=A.useContext(E2);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n}/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dD=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),hD=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),Gw=n=>{const e=hD(n);return e.charAt(0).toUpperCase()+e.slice(1)},T2=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),fD=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var mD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pD=A.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:l,iconNode:c,...h},d)=>A.createElement("svg",{ref:d,...mD,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:T2("lucide",s),...!l&&!fD(h)&&{"aria-hidden":"true"},...h},[...c.map(([m,g])=>A.createElement(m,g)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=(n,e)=>{const t=A.forwardRef(({className:r,...s},l)=>A.createElement(pD,{ref:l,iconNode:e,className:T2(`lucide-${dD(Gw(n))}`,`lucide-${n}`,r),...s}));return t.displayName=Gw(n),t};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gD=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],Qw=ae("arrow-down-right",gD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yD=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],I2=ae("arrow-left",yD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vD=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],Pf=ae("arrow-right-left",vD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xD=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],jg=ae("arrow-right",xD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wD=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],Yw=ae("arrow-up-right",wD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bD=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],mr=ae("award",bD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kD=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],Bi=ae("banknote",kD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _D=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Xw=ae("book-open",_D);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SD=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],C2=ae("briefcase",SD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ED=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],TD=ae("building-2",ED);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ID=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Nf=ae("calendar",ID);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CD=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],u0=ae("chart-column",CD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jD=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ni=ae("check",jD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AD=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],RD=ae("chevron-down",AD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PD=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],ND=ae("chevron-left",PD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MD=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],DD=ae("chevron-up",MD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],zs=ae("circle-alert",VD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LD=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Mn=ae("circle-check-big",LD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],j2=ae("circle-x",OD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BD=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],lr=ae("clock",BD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zD=[["path",{d:"M6 16.326A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 .5 8.973",key:"1cez44"}],["path",{d:"m13 12-3 5h4l-3 5",key:"1t22er"}]],Pp=ae("cloud-lightning",zD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FD=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]],Ri=ae("cloud-rain",FD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UD=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M8 15h.01",key:"a7atzg"}],["path",{d:"M8 19h.01",key:"puxtts"}],["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M12 21h.01",key:"h35vbk"}],["path",{d:"M16 15h.01",key:"rnfrdf"}],["path",{d:"M16 19h.01",key:"1vcnzz"}]],Fa=ae("cloud-snow",UD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WD=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],nh=ae("cloud",WD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $D=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],HD=ae("coins",$D);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KD=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],A2=ae("compass",KD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qD=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],d0=ae("copy",qD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GD=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Ag=ae("credit-card",GD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QD=[["path",{d:"M10.2 18H4.774a1.5 1.5 0 0 1-1.352-.97 11 11 0 0 1 .132-6.487",key:"14kkz9"}],["path",{d:"M18 10.2V4.774a1.5 1.5 0 0 0-.97-1.352 11 11 0 0 0-6.486.132",key:"1g7v07"}],["path",{d:"M18 5a4 3 0 0 1 4 3 2 2 0 0 1-2 2 10 10 0 0 0-5.139 1.42",key:"ratg6b"}],["path",{d:"M5 18a3 4 0 0 0 3 4 2 2 0 0 0 2-2 10 10 0 0 1 1.42-5.14",key:"4454f0"}],["path",{d:"M8.709 2.554a10 10 0 0 0-6.155 6.155 1.5 1.5 0 0 0 .676 1.626l9.807 5.42a2 2 0 0 0 2.718-2.718l-5.42-9.807a1.5 1.5 0 0 0-1.626-.676",key:"qmemie"}]],YD=ae("croissant",QD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XD=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Yn=ae("crown",XD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JD=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],$h=ae("dollar-sign",JD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZD=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],R2=ae("download",ZD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eV=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],tV=ae("droplets",eV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nV=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],rV=ae("external-link",nV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iV=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],sV=ae("eye-off",iV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oV=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],P2=ae("eye",oV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aV=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],N2=ae("gift",aV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lV=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],cV=ae("house",lV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],dV=ae("info",uV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hV=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],fV=ae("layout-dashboard",hV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mV=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],pV=ae("lightbulb",mV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gV=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],h0=ae("loader-circle",gV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yV=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],vV=ae("lock",yV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xV=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],pl=ae("log-in",xV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wV=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Rg=ae("log-out",wV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bV=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],M2=ae("mail",bV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kV=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],gl=ae("map-pin",kV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _V=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],SV=ae("megaphone",_V);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EV=[["path",{d:"M5 12h14",key:"1ays0h"}]],TV=ae("minus",EV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IV=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],CV=ae("navigation",IV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jV=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Jw=ae("package",jV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AV=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],D2=ae("palette",AV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RV=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],PV=ae("percent",RV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NV=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],MV=ae("phone",NV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DV=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],yl=ae("plus",DV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VV=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],V2=ae("printer",VV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LV=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],Nr=ae("qr-code",LV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OV=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],BV=ae("refresh-cw",OV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zV=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],FV=ae("save",zV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UV=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Mf=ae("search",UV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WV=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Hh=ae("send",WV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $V=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],HV=ae("share-2",$V);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KV=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],L2=ae("shield-check",KV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qV=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Kh=ae("shield",qV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GV=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],f0=ae("shopping-bag",GV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QV=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],Pg=ae("smartphone",QV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YV=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],m0=ae("sparkles",YV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XV=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],JV=ae("square-check-big",XV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZV=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],e3=ae("square",ZV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],pr=ae("star",t3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],St=ae("store",n3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Zw=ae("sun",r3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=[["path",{d:"M12 2v8",key:"1q4o3n"}],["path",{d:"m4.93 10.93 1.41 1.41",key:"2a7f42"}],["path",{d:"M2 18h2",key:"j10viu"}],["path",{d:"M20 18h2",key:"wocana"}],["path",{d:"m19.07 10.93-1.41 1.41",key:"15zs5n"}],["path",{d:"M22 22H2",key:"19qnx5"}],["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}],["path",{d:"M16 18a4 4 0 0 0-8 0",key:"1lzouq"}]],s3=ae("sunrise",i3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=[["path",{d:"M12 10V2",key:"16sf7g"}],["path",{d:"m4.93 10.93 1.41 1.41",key:"2a7f42"}],["path",{d:"M2 18h2",key:"j10viu"}],["path",{d:"M20 18h2",key:"wocana"}],["path",{d:"m19.07 10.93-1.41 1.41",key:"15zs5n"}],["path",{d:"M22 22H2",key:"19qnx5"}],["path",{d:"m16 6-4 4-4-4",key:"6wukr"}],["path",{d:"M16 18a4 4 0 0 0-8 0",key:"1lzouq"}]],a3=ae("sunset",o3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Ac=ae("tag",l3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],on=ae("target",c3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],d3=ae("toggle-left",u3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],f3=ae("toggle-right",h3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],O2=ae("trash-2",m3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],qs=ae("trending-up",p3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],y3=ae("trophy",g3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],qh=ae("user-plus",v3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],rl=ae("user",x3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Dr=ae("users",w3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]],B2=ae("utensils-crossed",b3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3=[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]],_3=ae("wind",k3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],p0=ae("x",S3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],T3=ae("zap",E3);function Ir({children:n,allowedRoles:e=[]}){const{user:t,roles:r,loading:s,isAuthenticated:l}=Or(),c=gr();return s?a.jsxs("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"var(--kb-cream)"},children:[a.jsxs("div",{style:{textAlign:"center"},children:[a.jsx(h0,{size:48,color:"var(--kb-navy)",style:{animation:"spin 1s linear infinite"}}),a.jsx("p",{style:{marginTop:"1rem",color:"var(--kb-gray-500)"},children:"Loading..."})]}),a.jsx("style",{children:`
          @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
          }
        `})]}):l?e.length>0&&!e.some(d=>r.includes(d))?a.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"var(--kb-cream)",padding:"2rem"},children:a.jsxs("div",{className:"card",style:{maxWidth:"400px",textAlign:"center",padding:"2rem"},children:[a.jsx("h2",{style:{color:"#dc2626",marginBottom:"1rem"},children:"Access Denied"}),a.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem"},children:"You don't have permission to access this page."}),a.jsx("a",{href:"/",className:"btn btn-primary",children:"Go Home"})]})}):n:a.jsx(XC,{to:"/login",state:{from:c},replace:!0})}const g0=A.createContext({});function y0(n){const e=A.useRef(null);return e.current===null&&(e.current=n()),e.current}const z2=typeof window<"u",F2=z2?A.useLayoutEffect:A.useEffect,Df=A.createContext(null);function v0(n,e){n.indexOf(e)===-1&&n.push(e)}function x0(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const hi=(n,e,t)=>t>e?e:t<n?n:t;let w0=()=>{};const Gi={},U2=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function W2(n){return typeof n=="object"&&n!==null}const $2=n=>/^0[^.\s]+$/u.test(n);function b0(n){let e;return()=>(e===void 0&&(e=n()),e)}const cr=n=>n,I3=(n,e)=>t=>e(n(t)),Iu=(...n)=>n.reduce(I3),au=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r};class k0{constructor(){this.subscriptions=[]}add(e){return v0(this.subscriptions,e),()=>x0(this.subscriptions,e)}notify(e,t,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,t,r);else for(let l=0;l<s;l++){const c=this.subscriptions[l];c&&c(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const zi=n=>n*1e3,ar=n=>n/1e3;function H2(n,e){return e?n*(1e3/e):0}const K2=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,C3=1e-7,j3=12;function A3(n,e,t,r,s){let l,c,h=0;do c=e+(t-e)/2,l=K2(c,r,s)-n,l>0?t=c:e=c;while(Math.abs(l)>C3&&++h<j3);return c}function Cu(n,e,t,r){if(n===e&&t===r)return cr;const s=l=>A3(l,0,1,n,t);return l=>l===0||l===1?l:K2(s(l),e,r)}const q2=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,G2=n=>e=>1-n(1-e),Q2=Cu(.33,1.53,.69,.99),_0=G2(Q2),Y2=q2(_0),X2=n=>(n*=2)<1?.5*_0(n):.5*(2-Math.pow(2,-10*(n-1))),S0=n=>1-Math.sin(Math.acos(n)),J2=G2(S0),Z2=q2(S0),R3=Cu(.42,0,1,1),P3=Cu(0,0,.58,1),eE=Cu(.42,0,.58,1),N3=n=>Array.isArray(n)&&typeof n[0]!="number",tE=n=>Array.isArray(n)&&typeof n[0]=="number",M3={linear:cr,easeIn:R3,easeInOut:eE,easeOut:P3,circIn:S0,circInOut:Z2,circOut:J2,backIn:_0,backInOut:Y2,backOut:Q2,anticipate:X2},D3=n=>typeof n=="string",eb=n=>{if(tE(n)){w0(n.length===4);const[e,t,r,s]=n;return Cu(e,t,r,s)}else if(D3(n))return M3[n];return n},rh=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function V3(n,e){let t=new Set,r=new Set,s=!1,l=!1;const c=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1};function d(g){c.has(g)&&(m.schedule(g),n()),g(h)}const m={schedule:(g,y=!1,x=!1)=>{const k=x&&s?t:r;return y&&c.add(g),k.has(g)||k.add(g),g},cancel:g=>{r.delete(g),c.delete(g)},process:g=>{if(h=g,s){l=!0;return}s=!0,[t,r]=[r,t],t.forEach(d),t.clear(),s=!1,l&&(l=!1,m.process(g))}};return m}const L3=40;function nE(n,e){let t=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},l=()=>t=!0,c=rh.reduce((M,U)=>(M[U]=V3(l),M),{}),{setup:h,read:d,resolveKeyframes:m,preUpdate:g,update:y,preRender:x,render:T,postRender:k}=c,S=()=>{const M=Gi.useManualTiming?s.timestamp:performance.now();t=!1,Gi.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(M-s.timestamp,L3),1)),s.timestamp=M,s.isProcessing=!0,h.process(s),d.process(s),m.process(s),g.process(s),y.process(s),x.process(s),T.process(s),k.process(s),s.isProcessing=!1,t&&e&&(r=!1,n(S))},C=()=>{t=!0,r=!0,s.isProcessing||n(S)};return{schedule:rh.reduce((M,U)=>{const $=c[U];return M[U]=(G,I=!1,E=!1)=>(t||C(),$.schedule(G,I,E)),M},{}),cancel:M=>{for(let U=0;U<rh.length;U++)c[rh[U]].cancel(M)},state:s,steps:c}}const{schedule:ft,cancel:Gs,state:tn,steps:Np}=nE(typeof requestAnimationFrame<"u"?requestAnimationFrame:cr,!0);let bh;function O3(){bh=void 0}const bn={now:()=>(bh===void 0&&bn.set(tn.isProcessing||Gi.useManualTiming?tn.timestamp:performance.now()),bh),set:n=>{bh=n,queueMicrotask(O3)}},rE=n=>e=>typeof e=="string"&&e.startsWith(n),iE=rE("--"),B3=rE("var(--"),E0=n=>B3(n)?z3.test(n.split("/*")[0].trim()):!1,z3=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function tb(n){return typeof n!="string"?!1:n.split("/*")[0].includes("var(--")}const Rl={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},lu={...Rl,transform:n=>hi(0,1,n)},ih={...Rl,default:1},qc=n=>Math.round(n*1e5)/1e5,T0=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function F3(n){return n==null}const U3=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,I0=(n,e)=>t=>!!(typeof t=="string"&&U3.test(t)&&t.startsWith(n)||e&&!F3(t)&&Object.prototype.hasOwnProperty.call(t,e)),sE=(n,e,t)=>r=>{if(typeof r!="string")return r;const[s,l,c,h]=r.match(T0);return{[n]:parseFloat(s),[e]:parseFloat(l),[t]:parseFloat(c),alpha:h!==void 0?parseFloat(h):1}},W3=n=>hi(0,255,n),Mp={...Rl,transform:n=>Math.round(W3(n))},Oo={test:I0("rgb","red"),parse:sE("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+Mp.transform(n)+", "+Mp.transform(e)+", "+Mp.transform(t)+", "+qc(lu.transform(r))+")"};function $3(n){let e="",t="",r="",s="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),s=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),s=n.substring(4,5),e+=e,t+=t,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Ng={test:I0("#"),parse:$3,transform:Oo.transform},ju=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),js=ju("deg"),ci=ju("%"),ge=ju("px"),H3=ju("vh"),K3=ju("vw"),nb={...ci,parse:n=>ci.parse(n)/100,transform:n=>ci.transform(n*100)},Ka={test:I0("hsl","hue"),parse:sE("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+ci.transform(qc(e))+", "+ci.transform(qc(t))+", "+qc(lu.transform(r))+")"},Lt={test:n=>Oo.test(n)||Ng.test(n)||Ka.test(n),parse:n=>Oo.test(n)?Oo.parse(n):Ka.test(n)?Ka.parse(n):Ng.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Oo.transform(n):Ka.transform(n),getAnimatableNone:n=>{const e=Lt.parse(n);return e.alpha=0,Lt.transform(e)}},q3=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function G3(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(T0))==null?void 0:e.length)||0)+(((t=n.match(q3))==null?void 0:t.length)||0)>0}const oE="number",aE="color",Q3="var",Y3="var(",rb="${}",X3=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function cu(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},s=[];let l=0;const h=e.replace(X3,d=>(Lt.test(d)?(r.color.push(l),s.push(aE),t.push(Lt.parse(d))):d.startsWith(Y3)?(r.var.push(l),s.push(Q3),t.push(d)):(r.number.push(l),s.push(oE),t.push(parseFloat(d))),++l,rb)).split(rb);return{values:t,split:h,indexes:r,types:s}}function lE(n){return cu(n).values}function cE(n){const{split:e,types:t}=cu(n),r=e.length;return s=>{let l="";for(let c=0;c<r;c++)if(l+=e[c],s[c]!==void 0){const h=t[c];h===oE?l+=qc(s[c]):h===aE?l+=Lt.transform(s[c]):l+=s[c]}return l}}const J3=n=>typeof n=="number"?0:Lt.test(n)?Lt.getAnimatableNone(n):n;function Z3(n){const e=lE(n);return cE(n)(e.map(J3))}const Qs={test:G3,parse:lE,createTransformer:cE,getAnimatableNone:Z3};function Dp(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function e6({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let s=0,l=0,c=0;if(!e)s=l=c=t;else{const h=t<.5?t*(1+e):t+e-t*e,d=2*t-h;s=Dp(d,h,n+1/3),l=Dp(d,h,n),c=Dp(d,h,n-1/3)}return{red:Math.round(s*255),green:Math.round(l*255),blue:Math.round(c*255),alpha:r}}function Gh(n,e){return t=>t>0?e:n}const vt=(n,e,t)=>n+(e-n)*t,Vp=(n,e,t)=>{const r=n*n,s=t*(e*e-r)+r;return s<0?0:Math.sqrt(s)},t6=[Ng,Oo,Ka],n6=n=>t6.find(e=>e.test(n));function ib(n){const e=n6(n);if(!e)return!1;let t=e.parse(n);return e===Ka&&(t=e6(t)),t}const sb=(n,e)=>{const t=ib(n),r=ib(e);if(!t||!r)return Gh(n,e);const s={...t};return l=>(s.red=Vp(t.red,r.red,l),s.green=Vp(t.green,r.green,l),s.blue=Vp(t.blue,r.blue,l),s.alpha=vt(t.alpha,r.alpha,l),Oo.transform(s))},Mg=new Set(["none","hidden"]);function r6(n,e){return Mg.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function i6(n,e){return t=>vt(n,e,t)}function C0(n){return typeof n=="number"?i6:typeof n=="string"?E0(n)?Gh:Lt.test(n)?sb:a6:Array.isArray(n)?uE:typeof n=="object"?Lt.test(n)?sb:s6:Gh}function uE(n,e){const t=[...n],r=t.length,s=n.map((l,c)=>C0(l)(l,e[c]));return l=>{for(let c=0;c<r;c++)t[c]=s[c](l);return t}}function s6(n,e){const t={...n,...e},r={};for(const s in t)n[s]!==void 0&&e[s]!==void 0&&(r[s]=C0(n[s])(n[s],e[s]));return s=>{for(const l in r)t[l]=r[l](s);return t}}function o6(n,e){const t=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const l=e.types[s],c=n.indexes[l][r[l]],h=n.values[c]??0;t[s]=h,r[l]++}return t}const a6=(n,e)=>{const t=Qs.createTransformer(e),r=cu(n),s=cu(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?Mg.has(n)&&!s.values.length||Mg.has(e)&&!r.values.length?r6(n,e):Iu(uE(o6(r,s),s.values),t):Gh(n,e)};function dE(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?vt(n,e,t):C0(n)(n,e)}const l6=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>ft.update(e,t),stop:()=>Gs(e),now:()=>tn.isProcessing?tn.timestamp:bn.now()}},hE=(n,e,t=10)=>{let r="";const s=Math.max(Math.round(e/t),2);for(let l=0;l<s;l++)r+=Math.round(n(l/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Qh=2e4;function j0(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<Qh;)e+=t,r=n.next(e);return e>=Qh?1/0:e}function c6(n,e=100,t){const r=t({...n,keyframes:[0,e]}),s=Math.min(j0(r),Qh);return{type:"keyframes",ease:l=>r.next(s*l).value/e,duration:ar(s)}}const u6=5;function fE(n,e,t){const r=Math.max(e-u6,0);return H2(t-n(r),e-r)}const _t={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Lp=.001;function d6({duration:n=_t.duration,bounce:e=_t.bounce,velocity:t=_t.velocity,mass:r=_t.mass}){let s,l,c=1-e;c=hi(_t.minDamping,_t.maxDamping,c),n=hi(_t.minDuration,_t.maxDuration,ar(n)),c<1?(s=m=>{const g=m*c,y=g*n,x=g-t,T=Dg(m,c),k=Math.exp(-y);return Lp-x/T*k},l=m=>{const y=m*c*n,x=y*t+t,T=Math.pow(c,2)*Math.pow(m,2)*n,k=Math.exp(-y),S=Dg(Math.pow(m,2),c);return(-s(m)+Lp>0?-1:1)*((x-T)*k)/S}):(s=m=>{const g=Math.exp(-m*n),y=(m-t)*n+1;return-Lp+g*y},l=m=>{const g=Math.exp(-m*n),y=(t-m)*(n*n);return g*y});const h=5/n,d=f6(s,l,h);if(n=zi(n),isNaN(d))return{stiffness:_t.stiffness,damping:_t.damping,duration:n};{const m=Math.pow(d,2)*r;return{stiffness:m,damping:c*2*Math.sqrt(r*m),duration:n}}}const h6=12;function f6(n,e,t){let r=t;for(let s=1;s<h6;s++)r=r-n(r)/e(r);return r}function Dg(n,e){return n*Math.sqrt(1-e*e)}const m6=["duration","bounce"],p6=["stiffness","damping","mass"];function ob(n,e){return e.some(t=>n[t]!==void 0)}function g6(n){let e={velocity:_t.velocity,stiffness:_t.stiffness,damping:_t.damping,mass:_t.mass,isResolvedFromDuration:!1,...n};if(!ob(n,p6)&&ob(n,m6))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),s=r*r,l=2*hi(.05,1,1-(n.bounce||0))*Math.sqrt(s);e={...e,mass:_t.mass,stiffness:s,damping:l}}else{const t=d6(n);e={...e,...t,mass:_t.mass},e.isResolvedFromDuration=!0}return e}function Yh(n=_t.visualDuration,e=_t.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:s}=t;const l=t.keyframes[0],c=t.keyframes[t.keyframes.length-1],h={done:!1,value:l},{stiffness:d,damping:m,mass:g,duration:y,velocity:x,isResolvedFromDuration:T}=g6({...t,velocity:-ar(t.velocity||0)}),k=x||0,S=m/(2*Math.sqrt(d*g)),C=c-l,N=ar(Math.sqrt(d/g)),L=Math.abs(C)<5;r||(r=L?_t.restSpeed.granular:_t.restSpeed.default),s||(s=L?_t.restDelta.granular:_t.restDelta.default);let M;if(S<1){const $=Dg(N,S);M=G=>{const I=Math.exp(-S*N*G);return c-I*((k+S*N*C)/$*Math.sin($*G)+C*Math.cos($*G))}}else if(S===1)M=$=>c-Math.exp(-N*$)*(C+(k+N*C)*$);else{const $=N*Math.sqrt(S*S-1);M=G=>{const I=Math.exp(-S*N*G),E=Math.min($*G,300);return c-I*((k+S*N*C)*Math.sinh(E)+$*C*Math.cosh(E))/$}}const U={calculatedDuration:T&&y||null,next:$=>{const G=M($);if(T)h.done=$>=y;else{let I=$===0?k:0;S<1&&(I=$===0?zi(k):fE(M,$,G));const E=Math.abs(I)<=r,R=Math.abs(c-G)<=s;h.done=E&&R}return h.value=h.done?c:G,h},toString:()=>{const $=Math.min(j0(U),Qh),G=hE(I=>U.next($*I).value,$,30);return $+"ms "+G},toTransition:()=>{}};return U}Yh.applyToOptions=n=>{const e=c6(n,100,Yh);return n.ease=e.ease,n.duration=zi(e.duration),n.type="keyframes",n};function Vg({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:l=500,modifyTarget:c,min:h,max:d,restDelta:m=.5,restSpeed:g}){const y=n[0],x={done:!1,value:y},T=E=>h!==void 0&&E<h||d!==void 0&&E>d,k=E=>h===void 0?d:d===void 0||Math.abs(h-E)<Math.abs(d-E)?h:d;let S=t*e;const C=y+S,N=c===void 0?C:c(C);N!==C&&(S=N-y);const L=E=>-S*Math.exp(-E/r),M=E=>N+L(E),U=E=>{const R=L(E),V=M(E);x.done=Math.abs(R)<=m,x.value=x.done?N:V};let $,G;const I=E=>{T(x.value)&&($=E,G=Yh({keyframes:[x.value,k(x.value)],velocity:fE(M,E,x.value),damping:s,stiffness:l,restDelta:m,restSpeed:g}))};return I(0),{calculatedDuration:null,next:E=>{let R=!1;return!G&&$===void 0&&(R=!0,U(E),I(E)),$!==void 0&&E>=$?G.next(E-$):(!R&&U(E),x)}}}function y6(n,e,t){const r=[],s=t||Gi.mix||dE,l=n.length-1;for(let c=0;c<l;c++){let h=s(n[c],n[c+1]);if(e){const d=Array.isArray(e)?e[c]||cr:e;h=Iu(d,h)}r.push(h)}return r}function v6(n,e,{clamp:t=!0,ease:r,mixer:s}={}){const l=n.length;if(w0(l===e.length),l===1)return()=>e[0];if(l===2&&e[0]===e[1])return()=>e[1];const c=n[0]===n[1];n[0]>n[l-1]&&(n=[...n].reverse(),e=[...e].reverse());const h=y6(e,r,s),d=h.length,m=g=>{if(c&&g<n[0])return e[0];let y=0;if(d>1)for(;y<n.length-2&&!(g<n[y+1]);y++);const x=au(n[y],n[y+1],g);return h[y](x)};return t?g=>m(hi(n[0],n[l-1],g)):m}function x6(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const s=au(0,e,r);n.push(vt(t,1,s))}}function w6(n){const e=[0];return x6(e,n.length-1),e}function b6(n,e){return n.map(t=>t*e)}function k6(n,e){return n.map(()=>e||eE).splice(0,n.length-1)}function Gc({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const s=N3(r)?r.map(eb):eb(r),l={done:!1,value:e[0]},c=b6(t&&t.length===e.length?t:w6(e),n),h=v6(c,e,{ease:Array.isArray(s)?s:k6(e,s)});return{calculatedDuration:n,next:d=>(l.value=h(d),l.done=d>=n,l)}}const _6=n=>n!==null;function A0(n,{repeat:e,repeatType:t="loop"},r,s=1){const l=n.filter(_6),h=s<0||e&&t!=="loop"&&e%2===1?0:l.length-1;return!h||r===void 0?l[h]:r}const S6={decay:Vg,inertia:Vg,tween:Gc,keyframes:Gc,spring:Yh};function mE(n){typeof n.type=="string"&&(n.type=S6[n.type])}class R0{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const E6=n=>n/100;class P0 extends R0{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:t}=this.options;t&&t.updatedAt!==bn.now()&&this.tick(bn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;mE(e);const{type:t=Gc,repeat:r=0,repeatDelay:s=0,repeatType:l,velocity:c=0}=e;let{keyframes:h}=e;const d=t||Gc;d!==Gc&&typeof h[0]!="number"&&(this.mixKeyframes=Iu(E6,dE(h[0],h[1])),h=[0,100]);const m=d({...e,keyframes:h});l==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...h].reverse(),velocity:-c})),m.calculatedDuration===null&&(m.calculatedDuration=j0(m));const{calculatedDuration:g}=m;this.calculatedDuration=g,this.resolvedDuration=g+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=m}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:r,totalDuration:s,mixKeyframes:l,mirroredGenerator:c,resolvedDuration:h,calculatedDuration:d}=this;if(this.startTime===null)return r.next(0);const{delay:m=0,keyframes:g,repeat:y,repeatType:x,repeatDelay:T,type:k,onUpdate:S,finalKeyframe:C}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const N=this.currentTime-m*(this.playbackSpeed>=0?1:-1),L=this.playbackSpeed>=0?N<0:N>s;this.currentTime=Math.max(N,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let M=this.currentTime,U=r;if(y){const E=Math.min(this.currentTime,s)/h;let R=Math.floor(E),V=E%1;!V&&E>=1&&(V=1),V===1&&R--,R=Math.min(R,y+1),!!(R%2)&&(x==="reverse"?(V=1-V,T&&(V-=T/h)):x==="mirror"&&(U=c)),M=hi(0,1,V)*h}const $=L?{done:!1,value:g[0]}:U.next(M);l&&($.value=l($.value));let{done:G}=$;!L&&d!==null&&(G=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&G);return I&&k!==Vg&&($.value=A0(g,this.options,C,this.speed)),S&&S($.value),I&&this.finish(),$}then(e,t){return this.finished.then(e,t)}get duration(){return ar(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+ar(e)}get time(){return ar(this.currentTime)}set time(e){var t;e=zi(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(t=this.driver)==null||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(bn.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=ar(this.currentTime))}play(){var s,l;if(this.isStopped)return;const{driver:e=l6,startTime:t}=this.options;this.driver||(this.driver=e(c=>this.tick(c))),(l=(s=this.options).onPlay)==null||l.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=t??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(bn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",(t=(e=this.options).onComplete)==null||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(t=(e=this.options).onCancel)==null||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(t=this.driver)==null||t.stop(),e.observe(this)}}function T6(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const Bo=n=>n*180/Math.PI,Lg=n=>{const e=Bo(Math.atan2(n[1],n[0]));return Og(e)},I6={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:Lg,rotateZ:Lg,skewX:n=>Bo(Math.atan(n[1])),skewY:n=>Bo(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},Og=n=>(n=n%360,n<0&&(n+=360),n),ab=Lg,lb=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),cb=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),C6={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:lb,scaleY:cb,scale:n=>(lb(n)+cb(n))/2,rotateX:n=>Og(Bo(Math.atan2(n[6],n[5]))),rotateY:n=>Og(Bo(Math.atan2(-n[2],n[0]))),rotateZ:ab,rotate:ab,skewX:n=>Bo(Math.atan(n[4])),skewY:n=>Bo(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function Bg(n){return n.includes("scale")?1:0}function zg(n,e){if(!n||n==="none")return Bg(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(t)r=C6,s=t;else{const h=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=I6,s=h}if(!s)return Bg(e);const l=r[e],c=s[1].split(",").map(A6);return typeof l=="function"?l(c):c[l]}const j6=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return zg(t,e)};function A6(n){return parseFloat(n.trim())}const Pl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Nl=new Set(Pl),ub=n=>n===Rl||n===ge,R6=new Set(["x","y","z"]),P6=Pl.filter(n=>!R6.has(n));function N6(n){const e=[];return P6.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const Ms={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>zg(e,"x"),y:(n,{transform:e})=>zg(e,"y")};Ms.translateX=Ms.x;Ms.translateY=Ms.y;const Fo=new Set;let Fg=!1,Ug=!1,Wg=!1;function pE(){if(Ug){const n=Array.from(Fo).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const s=N6(r);s.length&&(t.set(r,s),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=t.get(r);s&&s.forEach(([l,c])=>{var h;(h=r.getValue(l))==null||h.set(c)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Ug=!1,Fg=!1,Fo.forEach(n=>n.complete(Wg)),Fo.clear()}function gE(){Fo.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Ug=!0)})}function M6(){Wg=!0,gE(),pE(),Wg=!1}class N0{constructor(e,t,r,s,l,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=s,this.element=l,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(Fo.add(this),Fg||(Fg=!0,ft.read(gE),ft.resolveKeyframes(pE))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:s}=this;if(e[0]===null){const l=s==null?void 0:s.get(),c=e[e.length-1];if(l!==void 0)e[0]=l;else if(r&&t){const h=r.readValue(t,c);h!=null&&(e[0]=h)}e[0]===void 0&&(e[0]=c),s&&l===void 0&&s.set(e[0])}T6(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Fo.delete(this)}cancel(){this.state==="scheduled"&&(Fo.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const D6=n=>n.startsWith("--");function V6(n,e,t){D6(e)?n.style.setProperty(e,t):n.style[e]=t}const L6=b0(()=>window.ScrollTimeline!==void 0),O6={};function B6(n,e){const t=b0(n);return()=>O6[e]??t()}const yE=B6(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Bc=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,db={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Bc([0,.65,.55,1]),circOut:Bc([.55,0,1,.45]),backIn:Bc([.31,.01,.66,-.59]),backOut:Bc([.33,1.53,.69,.99])};function vE(n,e){if(n)return typeof n=="function"?yE()?hE(n,e):"ease-out":tE(n)?Bc(n):Array.isArray(n)?n.map(t=>vE(t,e)||db.easeOut):db[n]}function z6(n,e,t,{delay:r=0,duration:s=300,repeat:l=0,repeatType:c="loop",ease:h="easeOut",times:d}={},m=void 0){const g={[e]:t};d&&(g.offset=d);const y=vE(h,s);Array.isArray(y)&&(g.easing=y);const x={delay:r,duration:s,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:l+1,direction:c==="reverse"?"alternate":"normal"};return m&&(x.pseudoElement=m),n.animate(g,x)}function xE(n){return typeof n=="function"&&"applyToOptions"in n}function F6({type:n,...e}){return xE(n)&&yE()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class U6 extends R0{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:t,name:r,keyframes:s,pseudoElement:l,allowFlatten:c=!1,finalKeyframe:h,onComplete:d}=e;this.isPseudoElement=!!l,this.allowFlatten=c,this.options=e,w0(typeof e.type!="string");const m=F6(e);this.animation=z6(t,r,s,m,l),m.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!l){const g=A0(s,this.options,h,this.speed);this.updateMotionValue?this.updateMotionValue(g):V6(t,r,g),this.animation.cancel()}d==null||d(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;(t=(e=this.animation).finish)==null||t.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(t=(e=this.animation).commitStyles)==null||t.call(e)}get duration(){var t,r;const e=((r=(t=this.animation.effect)==null?void 0:t.getComputedTiming)==null?void 0:r.call(t).duration)||0;return ar(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+ar(e)}get time(){return ar(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=zi(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&L6()?(this.animation.timeline=e,cr):t(this)}}const wE={anticipate:X2,backInOut:Y2,circInOut:Z2};function W6(n){return n in wE}function $6(n){typeof n.ease=="string"&&W6(n.ease)&&(n.ease=wE[n.ease])}const Op=10;class H6 extends U6{constructor(e){$6(e),mE(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:r,onComplete:s,element:l,...c}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const h=new P0({...c,autoplay:!1}),d=Math.max(Op,bn.now()-this.startTime),m=hi(0,Op,d-Op);t.setWithVelocity(h.sample(Math.max(0,d-m)).value,h.sample(d).value,m),h.stop()}}const hb=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Qs.test(n)||n==="0")&&!n.startsWith("url("));function K6(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function q6(n,e,t,r){const s=n[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const l=n[n.length-1],c=hb(s,e),h=hb(l,e);return!c||!h?!1:K6(n)||(t==="spring"||xE(t))&&r}function $g(n){n.duration=0,n.type="keyframes"}const G6=new Set(["opacity","clipPath","filter","transform"]),Q6=b0(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Y6(n){var g;const{motionValue:e,name:t,repeatDelay:r,repeatType:s,damping:l,type:c}=n;if(!(((g=e==null?void 0:e.owner)==null?void 0:g.current)instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:m}=e.owner.getProps();return Q6()&&t&&G6.has(t)&&(t!=="transform"||!m)&&!d&&!r&&s!=="mirror"&&l!==0&&c!=="inertia"}const X6=40;class J6 extends R0{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:s=0,repeatDelay:l=0,repeatType:c="loop",keyframes:h,name:d,motionValue:m,element:g,...y}){var k;super(),this.stop=()=>{var S,C;this._animation&&(this._animation.stop(),(S=this.stopTimeline)==null||S.call(this)),(C=this.keyframeResolver)==null||C.cancel()},this.createdAt=bn.now();const x={autoplay:e,delay:t,type:r,repeat:s,repeatDelay:l,repeatType:c,name:d,motionValue:m,element:g,...y},T=(g==null?void 0:g.KeyframeResolver)||N0;this.keyframeResolver=new T(h,(S,C,N)=>this.onKeyframesResolved(S,C,x,!N),d,m,g),(k=this.keyframeResolver)==null||k.scheduleResolve()}onKeyframesResolved(e,t,r,s){var C,N;this.keyframeResolver=void 0;const{name:l,type:c,velocity:h,delay:d,isHandoff:m,onUpdate:g}=r;this.resolvedAt=bn.now(),q6(e,l,c,h)||((Gi.instantAnimations||!d)&&(g==null||g(A0(e,r,t))),e[0]=e[e.length-1],$g(r),r.repeat=0);const x={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>X6?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...r,keyframes:e},T=!m&&Y6(x),k=(N=(C=x.motionValue)==null?void 0:C.owner)==null?void 0:N.current,S=T?new H6({...x,element:k}):new P0(x);S.finished.then(()=>{this.notifyFinished()}).catch(cr),this.pendingTimeline&&(this.stopTimeline=S.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=S}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),M6()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}function bE(n,e,t,r=0,s=1){const l=Array.from(n).sort((m,g)=>m.sortNodePosition(g)).indexOf(e),c=n.size,h=(c-1)*r;return typeof t=="function"?t(l,c):s===1?l*r:h-l*r}const Z6=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function eL(n){const e=Z6.exec(n);if(!e)return[,];const[,t,r,s]=e;return[`--${t??r}`,s]}function kE(n,e,t=1){const[r,s]=eL(n);if(!r)return;const l=window.getComputedStyle(e).getPropertyValue(r);if(l){const c=l.trim();return U2(c)?parseFloat(c):c}return E0(s)?kE(s,e,t+1):s}const tL={type:"spring",stiffness:500,damping:25,restSpeed:10},nL=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),rL={type:"keyframes",duration:.8},iL={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},sL=(n,{keyframes:e})=>e.length>2?rL:Nl.has(n)?n.startsWith("scale")?nL(e[1]):tL:iL,oL=n=>n!==null;function aL(n,{repeat:e,repeatType:t="loop"},r){const s=n.filter(oL),l=e&&t!=="loop"&&e%2===1?0:s.length-1;return s[l]}function M0(n,e){return(n==null?void 0:n[e])??(n==null?void 0:n.default)??n}function lL({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:s,repeat:l,repeatType:c,repeatDelay:h,from:d,elapsed:m,...g}){return!!Object.keys(g).length}const D0=(n,e,t,r={},s,l)=>c=>{const h=M0(r,n)||{},d=h.delay||r.delay||0;let{elapsed:m=0}=r;m=m-zi(d);const g={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...h,delay:-m,onUpdate:x=>{e.set(x),h.onUpdate&&h.onUpdate(x)},onComplete:()=>{c(),h.onComplete&&h.onComplete()},name:n,motionValue:e,element:l?void 0:s};lL(h)||Object.assign(g,sL(n,g)),g.duration&&(g.duration=zi(g.duration)),g.repeatDelay&&(g.repeatDelay=zi(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let y=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&($g(g),g.delay===0&&(y=!0)),(Gi.instantAnimations||Gi.skipAnimations)&&(y=!0,$g(g),g.delay=0),g.allowFlatten=!h.type&&!h.ease,y&&!l&&e.get()!==void 0){const x=aL(g.keyframes,h);if(x!==void 0){ft.update(()=>{g.onUpdate(x),g.onComplete()});return}}return h.isSync?new P0(g):new J6(g)};function fb(n){const e=[{},{}];return n==null||n.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function V0(n,e,t,r){if(typeof e=="function"){const[s,l]=fb(r);e=e(t!==void 0?t:n.custom,s,l)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[s,l]=fb(r);e=e(t!==void 0?t:n.custom,s,l)}return e}function il(n,e,t){const r=n.getProps();return V0(r,e,t!==void 0?t:r.custom,n)}const _E=new Set(["width","height","top","left","right","bottom",...Pl]),mb=30,cL=n=>!isNaN(parseFloat(n));class uL{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var l;const s=bn.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((l=this.events.change)==null||l.notify(this.current),this.dependents))for(const c of this.dependents)c.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=bn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=cL(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new k0);const r=this.events[e].add(t);return e==="change"?()=>{r(),ft.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=bn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>mb)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,mb);return H2(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;(e=this.dependents)==null||e.clear(),(t=this.events.destroy)==null||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function vl(n,e){return new uL(n,e)}const Hg=n=>Array.isArray(n);function dL(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,vl(t))}function hL(n){return Hg(n)?n[n.length-1]||0:n}function fL(n,e){const t=il(n,e);let{transitionEnd:r={},transition:s={},...l}=t||{};l={...l,...r};for(const c in l){const h=hL(l[c]);dL(n,c,h)}}const pn=n=>!!(n&&n.getVelocity);function mL(n){return!!(pn(n)&&n.add)}function Kg(n,e){const t=n.getValue("willChange");if(mL(t))return t.add(e);if(!t&&Gi.WillChange){const r=new Gi.WillChange("auto");n.addValue("willChange",r),r.add(e)}}function L0(n){return n.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const pL="framerAppearId",SE="data-"+L0(pL);function EE(n){return n.props[SE]}function gL({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function TE(n,e,{delay:t=0,transitionOverride:r,type:s}={}){let{transition:l=n.getDefaultTransition(),transitionEnd:c,...h}=e;r&&(l=r);const d=[],m=s&&n.animationState&&n.animationState.getState()[s];for(const g in h){const y=n.getValue(g,n.latestValues[g]??null),x=h[g];if(x===void 0||m&&gL(m,g))continue;const T={delay:t,...M0(l||{},g)},k=y.get();if(k!==void 0&&!y.isAnimating&&!Array.isArray(x)&&x===k&&!T.velocity)continue;let S=!1;if(window.MotionHandoffAnimation){const N=EE(n);if(N){const L=window.MotionHandoffAnimation(N,g,ft);L!==null&&(T.startTime=L,S=!0)}}Kg(n,g),y.start(D0(g,y,x,n.shouldReduceMotion&&_E.has(g)?{type:!1}:T,n,S));const C=y.animation;C&&d.push(C)}return c&&Promise.all(d).then(()=>{ft.update(()=>{c&&fL(n,c)})}),d}function qg(n,e,t={}){var d;const r=il(n,e,t.type==="exit"?(d=n.presenceContext)==null?void 0:d.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(s=t.transitionOverride);const l=r?()=>Promise.all(TE(n,r,t)):()=>Promise.resolve(),c=n.variantChildren&&n.variantChildren.size?(m=0)=>{const{delayChildren:g=0,staggerChildren:y,staggerDirection:x}=s;return yL(n,e,m,g,y,x,t)}:()=>Promise.resolve(),{when:h}=s;if(h){const[m,g]=h==="beforeChildren"?[l,c]:[c,l];return m().then(()=>g())}else return Promise.all([l(),c(t.delay)])}function yL(n,e,t=0,r=0,s=0,l=1,c){const h=[];for(const d of n.variantChildren)d.notify("AnimationStart",e),h.push(qg(d,e,{...c,delay:t+(typeof r=="function"?0:r)+bE(n.variantChildren,d,r,s,l)}).then(()=>d.notify("AnimationComplete",e)));return Promise.all(h)}function vL(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(l=>qg(n,l,t));r=Promise.all(s)}else if(typeof e=="string")r=qg(n,e,t);else{const s=typeof e=="function"?il(n,e,t.custom):e;r=Promise.all(TE(n,s,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}const xL={test:n=>n==="auto",parse:n=>n},IE=n=>e=>e.test(n),CE=[Rl,ge,ci,js,K3,H3,xL],pb=n=>CE.find(IE(n));function wL(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||$2(n):!0}const bL=new Set(["brightness","contrast","saturate","opacity"]);function kL(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(T0)||[];if(!r)return n;const s=t.replace(r,"");let l=bL.has(e)?1:0;return r!==t&&(l*=100),e+"("+l+s+")"}const _L=/\b([a-z-]*)\(.*?\)/gu,Gg={...Qs,getAnimatableNone:n=>{const e=n.match(_L);return e?e.map(kL).join(" "):n}},gb={...Rl,transform:Math.round},SL={rotate:js,rotateX:js,rotateY:js,rotateZ:js,scale:ih,scaleX:ih,scaleY:ih,scaleZ:ih,skew:js,skewX:js,skewY:js,distance:ge,translateX:ge,translateY:ge,translateZ:ge,x:ge,y:ge,z:ge,perspective:ge,transformPerspective:ge,opacity:lu,originX:nb,originY:nb,originZ:ge},O0={borderWidth:ge,borderTopWidth:ge,borderRightWidth:ge,borderBottomWidth:ge,borderLeftWidth:ge,borderRadius:ge,radius:ge,borderTopLeftRadius:ge,borderTopRightRadius:ge,borderBottomRightRadius:ge,borderBottomLeftRadius:ge,width:ge,maxWidth:ge,height:ge,maxHeight:ge,top:ge,right:ge,bottom:ge,left:ge,inset:ge,insetBlock:ge,insetBlockStart:ge,insetBlockEnd:ge,insetInline:ge,insetInlineStart:ge,insetInlineEnd:ge,padding:ge,paddingTop:ge,paddingRight:ge,paddingBottom:ge,paddingLeft:ge,paddingBlock:ge,paddingBlockStart:ge,paddingBlockEnd:ge,paddingInline:ge,paddingInlineStart:ge,paddingInlineEnd:ge,margin:ge,marginTop:ge,marginRight:ge,marginBottom:ge,marginLeft:ge,marginBlock:ge,marginBlockStart:ge,marginBlockEnd:ge,marginInline:ge,marginInlineStart:ge,marginInlineEnd:ge,backgroundPositionX:ge,backgroundPositionY:ge,...SL,zIndex:gb,fillOpacity:lu,strokeOpacity:lu,numOctaves:gb},EL={...O0,color:Lt,backgroundColor:Lt,outlineColor:Lt,fill:Lt,stroke:Lt,borderColor:Lt,borderTopColor:Lt,borderRightColor:Lt,borderBottomColor:Lt,borderLeftColor:Lt,filter:Gg,WebkitFilter:Gg},jE=n=>EL[n];function AE(n,e){let t=jE(n);return t!==Gg&&(t=Qs),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const TL=new Set(["auto","none","0"]);function IL(n,e,t){let r=0,s;for(;r<n.length&&!s;){const l=n[r];typeof l=="string"&&!TL.has(l)&&cu(l).values.length&&(s=n[r]),r++}if(s&&t)for(const l of e)n[l]=AE(t,s)}class CL extends N0{constructor(e,t,r,s,l){super(e,t,r,s,l,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let g=0;g<e.length;g++){let y=e[g];if(typeof y=="string"&&(y=y.trim(),E0(y))){const x=kE(y,t.current);x!==void 0&&(e[g]=x),g===e.length-1&&(this.finalKeyframe=y)}}if(this.resolveNoneKeyframes(),!_E.has(r)||e.length!==2)return;const[s,l]=e,c=pb(s),h=pb(l),d=tb(s),m=tb(l);if(d!==m&&Ms[r]){this.needsMeasurement=!0;return}if(c!==h)if(ub(c)&&ub(h))for(let g=0;g<e.length;g++){const y=e[g];typeof y=="string"&&(e[g]=parseFloat(y))}else Ms[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||wL(e[s]))&&r.push(s);r.length&&IL(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ms[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const s=t[t.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var h;const{element:e,name:t,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(t);s&&s.jump(this.measuredOrigin,!1);const l=r.length-1,c=r[l];r[l]=Ms[t](e.measureViewportBox(),window.getComputedStyle(e.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),(h=this.removedTransforms)!=null&&h.length&&this.removedTransforms.forEach(([d,m])=>{e.getValue(d).set(m)}),this.resolveNoneKeyframes()}}function jL(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let r=document;const s=(t==null?void 0:t[n])??r.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n)}const RE=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function PE(n){return W2(n)&&"offsetHeight"in n}const{schedule:B0}=nE(queueMicrotask,!1),jr={x:!1,y:!1};function NE(){return jr.x||jr.y}function AL(n){return n==="x"||n==="y"?jr[n]?null:(jr[n]=!0,()=>{jr[n]=!1}):jr.x||jr.y?null:(jr.x=jr.y=!0,()=>{jr.x=jr.y=!1})}function ME(n,e){const t=jL(n),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[t,s,()=>r.abort()]}function yb(n){return!(n.pointerType==="touch"||NE())}function RL(n,e,t={}){const[r,s,l]=ME(n,t),c=h=>{if(!yb(h))return;const{target:d}=h,m=e(d,h);if(typeof m!="function"||!d)return;const g=y=>{yb(y)&&(m(y),d.removeEventListener("pointerleave",g))};d.addEventListener("pointerleave",g,s)};return r.forEach(h=>{h.addEventListener("pointerenter",c,s)}),l}const DE=(n,e)=>e?n===e?!0:DE(n,e.parentElement):!1,z0=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,PL=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function VE(n){return PL.has(n.tagName)||n.isContentEditable===!0}const kh=new WeakSet;function vb(n){return e=>{e.key==="Enter"&&n(e)}}function Bp(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const NL=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=vb(()=>{if(kh.has(t))return;Bp(t,"down");const s=vb(()=>{Bp(t,"up")}),l=()=>Bp(t,"cancel");t.addEventListener("keyup",s,e),t.addEventListener("blur",l,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function xb(n){return z0(n)&&!NE()}function ML(n,e,t={}){const[r,s,l]=ME(n,t),c=h=>{const d=h.currentTarget;if(!xb(h))return;kh.add(d);const m=e(d,h),g=(T,k)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",x),kh.has(d)&&kh.delete(d),xb(T)&&typeof m=="function"&&m(T,{success:k})},y=T=>{g(T,d===window||d===document||t.useGlobalTarget||DE(d,T.target))},x=T=>{g(T,!1)};window.addEventListener("pointerup",y,s),window.addEventListener("pointercancel",x,s)};return r.forEach(h=>{(t.useGlobalTarget?window:h).addEventListener("pointerdown",c,s),PE(h)&&(h.addEventListener("focus",m=>NL(m,s)),!VE(h)&&!h.hasAttribute("tabindex")&&(h.tabIndex=0))}),l}function LE(n){return W2(n)&&"ownerSVGElement"in n}function DL(n){return LE(n)&&n.tagName==="svg"}const VL=[...CE,Lt,Qs],LL=n=>VL.find(IE(n)),wb=()=>({translate:0,scale:1,origin:0,originPoint:0}),qa=()=>({x:wb(),y:wb()}),bb=()=>({min:0,max:0}),Ut=()=>({x:bb(),y:bb()}),Qg={current:null},OE={current:!1},OL=typeof window<"u";function BL(){if(OE.current=!0,!!OL)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>Qg.current=n.matches;n.addEventListener("change",e),e()}else Qg.current=!1}const zL=new WeakMap;function Vf(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function uu(n){return typeof n=="string"||Array.isArray(n)}const F0=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],U0=["initial",...F0];function Lf(n){return Vf(n.animate)||U0.some(e=>uu(n[e]))}function BE(n){return!!(Lf(n)||n.variants)}function FL(n,e,t){for(const r in e){const s=e[r],l=t[r];if(pn(s))n.addValue(r,s);else if(pn(l))n.addValue(r,vl(s,{owner:n}));else if(l!==s)if(n.hasValue(r)){const c=n.getValue(r);c.liveStyle===!0?c.jump(s):c.hasAnimated||c.set(s)}else{const c=n.getStaticValue(r);n.addValue(r,vl(c!==void 0?c:s,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const kb=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let Xh={};function zE(n){Xh=n}function UL(){return Xh}class WL{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:l,visualState:c},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=N0,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=bn.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,ft.render(this.render,!1,!0))};const{latestValues:d,renderState:m}=c;this.latestValues=d,this.baseTarget={...d},this.initialValues=t.initial?{...d}:{},this.renderState=m,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=h,this.blockInitialAnimation=!!l,this.isControllingVariants=Lf(t),this.isVariantNode=BE(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...y}=this.scrapeMotionValuesFromProps(t,{},this);for(const x in y){const T=y[x];d[x]!==void 0&&pn(T)&&T.set(d[x])}}mount(e){var t;this.current=e,zL.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,s)=>this.bindToMotionValue(s,r)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(OE.current||BL(),this.shouldReduceMotion=Qg.current),(t=this.parent)==null||t.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),Gs(this.notifyUpdate),Gs(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Nl.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=t.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&ft.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let l;typeof window<"u"&&window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{s(),l&&l(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Xh){const t=Xh[e];if(!t)continue;const{isEnabled:r,Feature:s}=t;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const l=this.features[e];l.isMounted?l.update():(l.mount(),l.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ut()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<kb.length;r++){const s=kb[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const l="on"+s,c=e[l];c&&(this.propEventSubscriptions[s]=this.on(s,c))}this.prevMotionValues=FL(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=vl(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(U2(r)||$2(r))?r=parseFloat(r):!LL(r)&&Qs.test(t)&&(r=AE(e,t)),this.setBaseTarget(e,pn(r)?r.get():r)),pn(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var l;const{initial:t}=this.props;let r;if(typeof t=="string"||typeof t=="object"){const c=V0(this.props,t,(l=this.presenceContext)==null?void 0:l.custom);c&&(r=c[e])}if(t&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!pn(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new k0),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){B0.render(this.render)}}class FE extends WL{constructor(){super(...arguments),this.KeyframeResolver=CL}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){const r=e.style;return r?r[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;pn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}class io{constructor(e){this.isMounted=!1,this.node=e}update(){}}function UE({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function $L({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function HL(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function zp(n){return n===void 0||n===1}function Yg({scale:n,scaleX:e,scaleY:t}){return!zp(n)||!zp(e)||!zp(t)}function Do(n){return Yg(n)||WE(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function WE(n){return _b(n.x)||_b(n.y)}function _b(n){return n&&n!=="0%"}function Jh(n,e,t){const r=n-t,s=e*r;return t+s}function Sb(n,e,t,r,s){return s!==void 0&&(n=Jh(n,s,r)),Jh(n,t,r)+e}function Xg(n,e=0,t=1,r,s){n.min=Sb(n.min,e,t,r,s),n.max=Sb(n.max,e,t,r,s)}function $E(n,{x:e,y:t}){Xg(n.x,e.translate,e.scale,e.originPoint),Xg(n.y,t.translate,t.scale,t.originPoint)}const Eb=.999999999999,Tb=1.0000000000001;function KL(n,e,t,r=!1){const s=t.length;if(!s)return;e.x=e.y=1;let l,c;for(let h=0;h<s;h++){l=t[h],c=l.projectionDelta;const{visualElement:d}=l.options;d&&d.props.style&&d.props.style.display==="contents"||(r&&l.options.layoutScroll&&l.scroll&&l!==l.root&&Qa(n,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,$E(n,c)),r&&Do(l.latestValues)&&Qa(n,l.latestValues))}e.x<Tb&&e.x>Eb&&(e.x=1),e.y<Tb&&e.y>Eb&&(e.y=1)}function Ga(n,e){n.min=n.min+e,n.max=n.max+e}function Ib(n,e,t,r,s=.5){const l=vt(n.min,n.max,s);Xg(n,e,t,l,r)}function Qa(n,e){Ib(n.x,e.x,e.scaleX,e.scale,e.originX),Ib(n.y,e.y,e.scaleY,e.scale,e.originY)}function HE(n,e){return UE(HL(n.getBoundingClientRect(),e))}function qL(n,e,t){const r=HE(n,t),{scroll:s}=e;return s&&(Ga(r.x,s.offset.x),Ga(r.y,s.offset.y)),r}const GL={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},QL=Pl.length;function YL(n,e,t){let r="",s=!0;for(let l=0;l<QL;l++){const c=Pl[l],h=n[c];if(h===void 0)continue;let d=!0;if(typeof h=="number"?d=h===(c.startsWith("scale")?1:0):d=parseFloat(h)===0,!d||t){const m=RE(h,O0[c]);if(!d){s=!1;const g=GL[c]||c;r+=`${g}(${m}) `}t&&(e[c]=m)}}return r=r.trim(),t?r=t(e,s?"":r):s&&(r="none"),r}function W0(n,e,t){const{style:r,vars:s,transformOrigin:l}=n;let c=!1,h=!1;for(const d in e){const m=e[d];if(Nl.has(d)){c=!0;continue}else if(iE(d)){s[d]=m;continue}else{const g=RE(m,O0[d]);d.startsWith("origin")?(h=!0,l[d]=g):r[d]=g}}if(e.transform||(c||t?r.transform=YL(e,n.transform,t):r.transform&&(r.transform="none")),h){const{originX:d="50%",originY:m="50%",originZ:g=0}=l;r.transformOrigin=`${d} ${m} ${g}`}}function KE(n,{style:e,vars:t},r,s){const l=n.style;let c;for(c in e)l[c]=e[c];s==null||s.applyProjectionStyles(l,r);for(c in t)l.setProperty(c,t[c])}function Cb(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Rc={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(ge.test(n))n=parseFloat(n);else return n;const t=Cb(n,e.target.x),r=Cb(n,e.target.y);return`${t}% ${r}%`}},XL={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,s=Qs.parse(n);if(s.length>5)return r;const l=Qs.createTransformer(n),c=typeof s[0]!="number"?1:0,h=t.x.scale*e.x,d=t.y.scale*e.y;s[0+c]/=h,s[1+c]/=d;const m=vt(h,d,.5);return typeof s[2+c]=="number"&&(s[2+c]/=m),typeof s[3+c]=="number"&&(s[3+c]/=m),l(s)}},Jg={borderRadius:{...Rc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Rc,borderTopRightRadius:Rc,borderBottomLeftRadius:Rc,borderBottomRightRadius:Rc,boxShadow:XL};function qE(n,{layout:e,layoutId:t}){return Nl.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Jg[n]||n==="opacity")}function $0(n,e,t){var c;const r=n.style,s=e==null?void 0:e.style,l={};if(!r)return l;for(const h in r)(pn(r[h])||s&&pn(s[h])||qE(h,n)||((c=t==null?void 0:t.getValue(h))==null?void 0:c.liveStyle)!==void 0)&&(l[h]=r[h]);return l}function JL(n){return window.getComputedStyle(n)}class ZL extends FE{constructor(){super(...arguments),this.type="html",this.renderInstance=KE}readValueFromInstance(e,t){var r;if(Nl.has(t))return(r=this.projection)!=null&&r.isProjecting?Bg(t):j6(e,t);{const s=JL(e),l=(iE(t)?s.getPropertyValue(t):s[t])||0;return typeof l=="string"?l.trim():l}}measureInstanceViewportBox(e,{transformPagePoint:t}){return HE(e,t)}build(e,t,r){W0(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return $0(e,t,r)}}const eO={offset:"stroke-dashoffset",array:"stroke-dasharray"},tO={offset:"strokeDashoffset",array:"strokeDasharray"};function nO(n,e,t=1,r=0,s=!0){n.pathLength=1;const l=s?eO:tO;n[l.offset]=ge.transform(-r);const c=ge.transform(e),h=ge.transform(t);n[l.array]=`${c} ${h}`}const rO=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function GE(n,{attrX:e,attrY:t,attrScale:r,pathLength:s,pathSpacing:l=1,pathOffset:c=0,...h},d,m,g){if(W0(n,h,m),d){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:y,style:x}=n;y.transform&&(x.transform=y.transform,delete y.transform),(x.transform||y.transformOrigin)&&(x.transformOrigin=y.transformOrigin??"50% 50%",delete y.transformOrigin),x.transform&&(x.transformBox=(g==null?void 0:g.transformBox)??"fill-box",delete y.transformBox);for(const T of rO)y[T]!==void 0&&(x[T]=y[T],delete y[T]);e!==void 0&&(y.x=e),t!==void 0&&(y.y=t),r!==void 0&&(y.scale=r),s!==void 0&&nO(y,s,l,c,!1)}const QE=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),YE=n=>typeof n=="string"&&n.toLowerCase()==="svg";function iO(n,e,t,r){KE(n,e,void 0,r);for(const s in e.attrs)n.setAttribute(QE.has(s)?s:L0(s),e.attrs[s])}function XE(n,e,t){const r=$0(n,e,t);for(const s in n)if(pn(n[s])||pn(e[s])){const l=Pl.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[l]=n[s]}return r}class sO extends FE{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ut}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Nl.has(t)){const r=jE(t);return r&&r.default||0}return t=QE.has(t)?t:L0(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return XE(e,t,r)}build(e,t,r){GE(e,t,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,t,r,s){iO(e,t,r,s)}mount(e){this.isSVGTag=YE(e.tagName),super.mount(e)}}const oO=U0.length;function JE(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?JE(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<oO;t++){const r=U0[t],s=n.props[r];(uu(s)||s===!1)&&(e[r]=s)}return e}function ZE(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}const aO=[...F0].reverse(),lO=F0.length;function cO(n){return e=>Promise.all(e.map(({animation:t,options:r})=>vL(n,t,r)))}function uO(n){let e=cO(n),t=jb(),r=!0;const s=d=>(m,g)=>{var x;const y=il(n,g,d==="exit"?(x=n.presenceContext)==null?void 0:x.custom:void 0);if(y){const{transition:T,transitionEnd:k,...S}=y;m={...m,...S,...k}}return m};function l(d){e=d(n)}function c(d){const{props:m}=n,g=JE(n.parent)||{},y=[],x=new Set;let T={},k=1/0;for(let C=0;C<lO;C++){const N=aO[C],L=t[N],M=m[N]!==void 0?m[N]:g[N],U=uu(M),$=N===d?L.isActive:null;$===!1&&(k=C);let G=M===g[N]&&M!==m[N]&&U;if(G&&r&&n.manuallyAnimateOnMount&&(G=!1),L.protectedKeys={...T},!L.isActive&&$===null||!M&&!L.prevProp||Vf(M)||typeof M=="boolean")continue;const I=dO(L.prevProp,M);let E=I||N===d&&L.isActive&&!G&&U||C>k&&U,R=!1;const V=Array.isArray(M)?M:[M];let B=V.reduce(s(N),{});$===!1&&(B={});const{prevResolvedValues:F={}}=L,D={...F,...B},_e=Te=>{E=!0,x.has(Te)&&(R=!0,x.delete(Te)),L.needsAnimating[Te]=!0;const ie=n.getValue(Te);ie&&(ie.liveStyle=!1)};for(const Te in D){const ie=B[Te],me=F[Te];if(T.hasOwnProperty(Te))continue;let le=!1;Hg(ie)&&Hg(me)?le=!ZE(ie,me):le=ie!==me,le?ie!=null?_e(Te):x.add(Te):ie!==void 0&&x.has(Te)?_e(Te):L.protectedKeys[Te]=!0}L.prevProp=M,L.prevResolvedValues=B,L.isActive&&(T={...T,...B}),r&&n.blockInitialAnimation&&(E=!1);const Ve=G&&I;E&&(!Ve||R)&&y.push(...V.map(Te=>{const ie={type:N};if(typeof Te=="string"&&r&&!Ve&&n.manuallyAnimateOnMount&&n.parent){const{parent:me}=n,le=il(me,Te);if(me.enteringChildren&&le){const{delayChildren:H}=le.transition||{};ie.delay=bE(me.enteringChildren,n,H)}}return{animation:Te,options:ie}}))}if(x.size){const C={};if(typeof m.initial!="boolean"){const N=il(n,Array.isArray(m.initial)?m.initial[0]:m.initial);N&&N.transition&&(C.transition=N.transition)}x.forEach(N=>{const L=n.getBaseTarget(N),M=n.getValue(N);M&&(M.liveStyle=!0),C[N]=L??null}),y.push({animation:C})}let S=!!y.length;return r&&(m.initial===!1||m.initial===m.animate)&&!n.manuallyAnimateOnMount&&(S=!1),r=!1,S?e(y):Promise.resolve()}function h(d,m){var y;if(t[d].isActive===m)return Promise.resolve();(y=n.variantChildren)==null||y.forEach(x=>{var T;return(T=x.animationState)==null?void 0:T.setActive(d,m)}),t[d].isActive=m;const g=c(d);for(const x in t)t[x].protectedKeys={};return g}return{animateChanges:c,setActive:h,setAnimateFunction:l,getState:()=>t,reset:()=>{t=jb()}}}function dO(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!ZE(e,n):!1}function No(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function jb(){return{animate:No(!0),whileInView:No(),whileHover:No(),whileTap:No(),whileDrag:No(),whileFocus:No(),exit:No()}}function Ab(n,e){n.min=e.min,n.max=e.max}function Cr(n,e){Ab(n.x,e.x),Ab(n.y,e.y)}function Rb(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}const eT=1e-4,hO=1-eT,fO=1+eT,tT=.01,mO=0-tT,pO=0+tT;function kn(n){return n.max-n.min}function gO(n,e,t){return Math.abs(n-e)<=t}function Pb(n,e,t,r=.5){n.origin=r,n.originPoint=vt(e.min,e.max,n.origin),n.scale=kn(t)/kn(e),n.translate=vt(t.min,t.max,n.origin)-n.originPoint,(n.scale>=hO&&n.scale<=fO||isNaN(n.scale))&&(n.scale=1),(n.translate>=mO&&n.translate<=pO||isNaN(n.translate))&&(n.translate=0)}function Qc(n,e,t,r){Pb(n.x,e.x,t.x,r?r.originX:void 0),Pb(n.y,e.y,t.y,r?r.originY:void 0)}function Nb(n,e,t){n.min=t.min+e.min,n.max=n.min+kn(e)}function yO(n,e,t){Nb(n.x,e.x,t.x),Nb(n.y,e.y,t.y)}function Mb(n,e,t){n.min=e.min-t.min,n.max=n.min+kn(e)}function Zh(n,e,t){Mb(n.x,e.x,t.x),Mb(n.y,e.y,t.y)}function Db(n,e,t,r,s){return n-=e,n=Jh(n,1/t,r),s!==void 0&&(n=Jh(n,1/s,r)),n}function vO(n,e=0,t=1,r=.5,s,l=n,c=n){if(ci.test(e)&&(e=parseFloat(e),e=vt(c.min,c.max,e/100)-c.min),typeof e!="number")return;let h=vt(l.min,l.max,r);n===l&&(h-=e),n.min=Db(n.min,e,t,h,s),n.max=Db(n.max,e,t,h,s)}function Vb(n,e,[t,r,s],l,c){vO(n,e[t],e[r],e[s],e.scale,l,c)}const xO=["x","scaleX","originX"],wO=["y","scaleY","originY"];function Lb(n,e,t,r){Vb(n.x,e,xO,t?t.x:void 0,r?r.x:void 0),Vb(n.y,e,wO,t?t.y:void 0,r?r.y:void 0)}function Ob(n){return n.translate===0&&n.scale===1}function nT(n){return Ob(n.x)&&Ob(n.y)}function Bb(n,e){return n.min===e.min&&n.max===e.max}function bO(n,e){return Bb(n.x,e.x)&&Bb(n.y,e.y)}function zb(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function rT(n,e){return zb(n.x,e.x)&&zb(n.y,e.y)}function Fb(n){return kn(n.x)/kn(n.y)}function Ub(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}function sr(n){return[n("x"),n("y")]}function kO(n,e,t){let r="";const s=n.x.translate/e.x,l=n.y.translate/e.y,c=(t==null?void 0:t.z)||0;if((s||l||c)&&(r=`translate3d(${s}px, ${l}px, ${c}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:m,rotate:g,rotateX:y,rotateY:x,skewX:T,skewY:k}=t;m&&(r=`perspective(${m}px) ${r}`),g&&(r+=`rotate(${g}deg) `),y&&(r+=`rotateX(${y}deg) `),x&&(r+=`rotateY(${x}deg) `),T&&(r+=`skewX(${T}deg) `),k&&(r+=`skewY(${k}deg) `)}const h=n.x.scale*e.x,d=n.y.scale*e.y;return(h!==1||d!==1)&&(r+=`scale(${h}, ${d})`),r||"none"}const iT=["TopLeft","TopRight","BottomLeft","BottomRight"],_O=iT.length,Wb=n=>typeof n=="string"?parseFloat(n):n,$b=n=>typeof n=="number"||ge.test(n);function SO(n,e,t,r,s,l){s?(n.opacity=vt(0,t.opacity??1,EO(r)),n.opacityExit=vt(e.opacity??1,0,TO(r))):l&&(n.opacity=vt(e.opacity??1,t.opacity??1,r));for(let c=0;c<_O;c++){const h=`border${iT[c]}Radius`;let d=Hb(e,h),m=Hb(t,h);if(d===void 0&&m===void 0)continue;d||(d=0),m||(m=0),d===0||m===0||$b(d)===$b(m)?(n[h]=Math.max(vt(Wb(d),Wb(m),r),0),(ci.test(m)||ci.test(d))&&(n[h]+="%")):n[h]=m}(e.rotate||t.rotate)&&(n.rotate=vt(e.rotate||0,t.rotate||0,r))}function Hb(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const EO=sT(0,.5,J2),TO=sT(.5,.95,cr);function sT(n,e,t){return r=>r<n?0:r>e?1:t(au(n,e,r))}function IO(n,e,t){const r=pn(n)?n:vl(n);return r.start(D0("",r,e,t)),r.animation}function du(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}const CO=(n,e)=>n.depth-e.depth;class jO{constructor(){this.children=[],this.isDirty=!1}add(e){v0(this.children,e),this.isDirty=!0}remove(e){x0(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(CO),this.isDirty=!1,this.children.forEach(e)}}function AO(n,e){const t=bn.now(),r=({timestamp:s})=>{const l=s-t;l>=e&&(Gs(r),n(l-e))};return ft.setup(r,!0),()=>Gs(r)}function _h(n){return pn(n)?n.get():n}class RO{constructor(){this.members=[]}add(e){v0(this.members,e),e.scheduleRender()}remove(e){if(x0(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(s=>e===s);if(t===0)return!1;let r;for(let s=t;s>=0;s--){const l=this.members[s];if(l.isPresent!==!1){r=l;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const Sh={hasAnimatedSinceResize:!0,hasEverUpdated:!1},Fp=["","X","Y","Z"],PO=1e3;let NO=0;function Up(n,e,t,r){const{latestValues:s}=e;s[n]&&(t[n]=s[n],e.setStaticValue(n,0),r&&(r[n]=0))}function oT(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=EE(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:s,layoutId:l}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",ft,!(s||l))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&oT(r)}function aT({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(c={},h=e==null?void 0:e()){this.id=NO++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(VO),this.nodes.forEach(zO),this.nodes.forEach(FO),this.nodes.forEach(LO)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new jO)}addEventListener(c,h){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new k0),this.eventHandlers.get(c).add(h)}notifyListeners(c,...h){const d=this.eventHandlers.get(c);d&&d.notify(...h)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=LE(c)&&!DL(c),this.instance=c;const{layoutId:h,layout:d,visualElement:m}=this.options;if(m&&!m.current&&m.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||h)&&(this.isLayoutDirty=!0),n){let g,y=0;const x=()=>this.root.updateBlockedByResize=!1;ft.read(()=>{y=window.innerWidth}),n(c,()=>{const T=window.innerWidth;T!==y&&(y=T,this.root.updateBlockedByResize=!0,g&&g(),g=AO(x,250),Sh.hasAnimatedSinceResize&&(Sh.hasAnimatedSinceResize=!1,this.nodes.forEach(Gb)))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&m&&(h||d)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:y,hasRelativeLayoutChanged:x,layout:T})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const k=this.options.transition||m.getDefaultTransition()||KO,{onLayoutAnimationStart:S,onLayoutAnimationComplete:C}=m.getProps(),N=!this.targetLayout||!rT(this.targetLayout,T),L=!y&&x;if(this.options.layoutRoot||this.resumeFrom||L||y&&(N||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const M={...M0(k,"layout"),onPlay:S,onComplete:C};(m.shouldReduceMotion||this.options.layoutRoot)&&(M.delay=0,M.type=!1),this.startAnimation(M),this.setAnimationOrigin(g,L)}else y||Gb(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=T})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Gs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(UO),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&oT(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const y=this.path[g];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:h,layout:d}=this.options;if(h===void 0&&!d)return;const m=this.getTransformTemplate();this.prevTransformTemplateValue=m?m(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Kb);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(qb);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(BO),this.nodes.forEach(MO),this.nodes.forEach(DO)):this.nodes.forEach(qb),this.clearAllSnapshots();const h=bn.now();tn.delta=hi(0,1e3/60,h-tn.timestamp),tn.timestamp=h,tn.isProcessing=!0,Np.update.process(tn),Np.preRender.process(tn),Np.render.process(tn),tn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,B0.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(OO),this.sharedNodes.forEach(WO)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ft.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ft.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!kn(this.snapshot.measuredBox.x)&&!kn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Ut(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(h=!1),h&&this.instance){const d=r(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:d,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!s)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!nT(this.projectionDelta),d=this.getTransformTemplate(),m=d?d(this.latestValues,""):void 0,g=m!==this.prevTransformTemplateValue;c&&this.instance&&(h||Do(this.latestValues)||g)&&(s(this.instance,m),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const h=this.measurePageBox();let d=this.removeElementScroll(h);return c&&(d=this.removeTransform(d)),qO(d),{animationId:this.root.animationId,measuredBox:h,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var m;const{visualElement:c}=this.options;if(!c)return Ut();const h=c.measureViewportBox();if(!(((m=this.scroll)==null?void 0:m.wasRoot)||this.path.some(GO))){const{scroll:g}=this.root;g&&(Ga(h.x,g.offset.x),Ga(h.y,g.offset.y))}return h}removeElementScroll(c){var d;const h=Ut();if(Cr(h,c),(d=this.scroll)!=null&&d.wasRoot)return h;for(let m=0;m<this.path.length;m++){const g=this.path[m],{scroll:y,options:x}=g;g!==this.root&&y&&x.layoutScroll&&(y.wasRoot&&Cr(h,c),Ga(h.x,y.offset.x),Ga(h.y,y.offset.y))}return h}applyTransform(c,h=!1){const d=Ut();Cr(d,c);for(let m=0;m<this.path.length;m++){const g=this.path[m];!h&&g.options.layoutScroll&&g.scroll&&g!==g.root&&Qa(d,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),Do(g.latestValues)&&Qa(d,g.latestValues)}return Do(this.latestValues)&&Qa(d,this.latestValues),d}removeTransform(c){const h=Ut();Cr(h,c);for(let d=0;d<this.path.length;d++){const m=this.path[d];if(!m.instance||!Do(m.latestValues))continue;Yg(m.latestValues)&&m.updateSnapshot();const g=Ut(),y=m.measurePageBox();Cr(g,y),Lb(h,m.latestValues,m.snapshot?m.snapshot.layoutBox:void 0,g)}return Do(this.latestValues)&&Lb(h,this.latestValues),h}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==tn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){var T;const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==h;if(!(c||d&&this.isSharedProjectionDirty||this.isProjectionDirty||(T=this.parent)!=null&&T.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:y}=this.options;if(!this.layout||!(g||y))return;this.resolvedRelativeTargetAt=tn.timestamp;const x=this.getClosestProjectingParent();x&&this.linkedParentVersion!==x.layoutVersion&&!x.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(x&&x.layout?this.createRelativeTarget(x,this.layout.layoutBox,x.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ut(),this.targetWithTransforms=Ut()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),yO(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Cr(this.target,this.layout.layoutBox),$E(this.target,this.targetDelta)):Cr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?this.createRelativeTarget(x,this.target,x.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Yg(this.parent.latestValues)||WE(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(c,h,d){this.relativeParent=c,this.linkedParentVersion=c.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ut(),this.relativeTargetOrigin=Ut(),Zh(this.relativeTargetOrigin,h,d),Cr(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var k;const c=this.getLead(),h=!!this.resumingFrom||this!==c;let d=!0;if((this.isProjectionDirty||(k=this.parent)!=null&&k.isProjectionDirty)&&(d=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===tn.timestamp&&(d=!1),d)return;const{layout:m,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||g))return;Cr(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,x=this.treeScale.y;KL(this.layoutCorrected,this.treeScale,this.path,h),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=Ut());const{target:T}=c;if(!T){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Rb(this.prevProjectionDelta.x,this.projectionDelta.x),Rb(this.prevProjectionDelta.y,this.projectionDelta.y)),Qc(this.projectionDelta,this.layoutCorrected,T,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==x||!Ub(this.projectionDelta.x,this.prevProjectionDelta.x)||!Ub(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",T))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){var h;if((h=this.options.visualElement)==null||h.scheduleRender(),c){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=qa(),this.projectionDelta=qa(),this.projectionDeltaWithTransform=qa()}setAnimationOrigin(c,h=!1){const d=this.snapshot,m=d?d.latestValues:{},g={...this.latestValues},y=qa();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const x=Ut(),T=d?d.source:void 0,k=this.layout?this.layout.source:void 0,S=T!==k,C=this.getStack(),N=!C||C.members.length<=1,L=!!(S&&!N&&this.options.crossfade===!0&&!this.path.some(HO));this.animationProgress=0;let M;this.mixTargetDelta=U=>{const $=U/1e3;Qb(y.x,c.x,$),Qb(y.y,c.y,$),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Zh(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),$O(this.relativeTarget,this.relativeTargetOrigin,x,$),M&&bO(this.relativeTarget,M)&&(this.isProjectionDirty=!1),M||(M=Ut()),Cr(M,this.relativeTarget)),S&&(this.animationValues=g,SO(g,m,this.latestValues,$,L,N)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=$},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){var h,d,m;this.notifyListeners("animationStart"),(h=this.currentAnimation)==null||h.stop(),(m=(d=this.resumingFrom)==null?void 0:d.currentAnimation)==null||m.stop(),this.pendingAnimation&&(Gs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ft.update(()=>{Sh.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=vl(0)),this.currentAnimation=IO(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:g=>{this.mixTargetDelta(g),c.onUpdate&&c.onUpdate(g)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(PO),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:h,target:d,layout:m,latestValues:g}=c;if(!(!h||!d||!m)){if(this!==c&&this.layout&&m&&lT(this.options.animationType,this.layout.layoutBox,m.layoutBox)){d=this.target||Ut();const y=kn(this.layout.layoutBox.x);d.x.min=c.target.x.min,d.x.max=d.x.min+y;const x=kn(this.layout.layoutBox.y);d.y.min=c.target.y.min,d.y.max=d.y.min+x}Cr(h,d),Qa(h,g),Qc(this.projectionDeltaWithTransform,this.layoutCorrected,h,g)}}registerSharedNode(c,h){this.sharedNodes.has(c)||this.sharedNodes.set(c,new RO),this.sharedNodes.get(c).add(h);const m=h.options.initialPromotionConfig;h.promote({transition:m?m.transition:void 0,preserveFollowOpacity:m&&m.shouldPreserveFollowOpacity?m.shouldPreserveFollowOpacity(h):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){var h;const{layoutId:c}=this.options;return c?((h=this.getStack())==null?void 0:h.lead)||this:this}getPrevLead(){var h;const{layoutId:c}=this.options;return c?(h=this.getStack())==null?void 0:h.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:h,preserveFollowOpacity:d}={}){const m=this.getStack();m&&m.promote(this,d),c&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let h=!1;const{latestValues:d}=c;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(h=!0),!h)return;const m={};d.z&&Up("z",c,m,this.animationValues);for(let g=0;g<Fp.length;g++)Up(`rotate${Fp[g]}`,c,m,this.animationValues),Up(`skew${Fp[g]}`,c,m,this.animationValues);c.render();for(const g in m)c.setStaticValue(g,m[g]),this.animationValues&&(this.animationValues[g]=m[g]);c.scheduleRender()}applyProjectionStyles(c,h){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=_h(h==null?void 0:h.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none";return}const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=_h(h==null?void 0:h.pointerEvents)||""),this.hasProjected&&!Do(this.latestValues)&&(c.transform=d?d({},""):"none",this.hasProjected=!1);return}c.visibility="";const g=m.animationValues||m.latestValues;this.applyTransformsToTarget();let y=kO(this.projectionDeltaWithTransform,this.treeScale,g);d&&(y=d(g,y)),c.transform=y;const{x,y:T}=this.projectionDelta;c.transformOrigin=`${x.origin*100}% ${T.origin*100}% 0`,m.animationValues?c.opacity=m===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:c.opacity=m===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const k in Jg){if(g[k]===void 0)continue;const{correct:S,applyTo:C,isCSSVariable:N}=Jg[k],L=y==="none"?g[k]:S(g[k],m);if(C){const M=C.length;for(let U=0;U<M;U++)c[C[U]]=L}else N?this.options.visualElement.renderState.vars[k]=L:c[k]=L}this.options.layoutId&&(c.pointerEvents=m===this?_h(h==null?void 0:h.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>{var h;return(h=c.currentAnimation)==null?void 0:h.stop()}),this.root.nodes.forEach(Kb),this.root.sharedNodes.clear()}}}function MO(n){n.updateLayout()}function DO(n){var t;const e=((t=n.resumeFrom)==null?void 0:t.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=n.layout,{animationType:l}=n.options,c=e.source!==n.layout.source;l==="size"?sr(y=>{const x=c?e.measuredBox[y]:e.layoutBox[y],T=kn(x);x.min=r[y].min,x.max=x.min+T}):lT(l,e.layoutBox,r)&&sr(y=>{const x=c?e.measuredBox[y]:e.layoutBox[y],T=kn(r[y]);x.max=x.min+T,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[y].max=n.relativeTarget[y].min+T)});const h=qa();Qc(h,r,e.layoutBox);const d=qa();c?Qc(d,n.applyTransform(s,!0),e.measuredBox):Qc(d,r,e.layoutBox);const m=!nT(h);let g=!1;if(!n.resumeFrom){const y=n.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:x,layout:T}=y;if(x&&T){const k=Ut();Zh(k,e.layoutBox,x.layoutBox);const S=Ut();Zh(S,r,T.layoutBox),rT(k,S)||(g=!0),y.options.layoutRoot&&(n.relativeTarget=S,n.relativeTargetOrigin=k,n.relativeParent=y)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:d,layoutDelta:h,hasLayoutChanged:m,hasRelativeLayoutChanged:g})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function VO(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function LO(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function OO(n){n.clearSnapshot()}function Kb(n){n.clearMeasurements()}function qb(n){n.isLayoutDirty=!1}function BO(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function Gb(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function zO(n){n.resolveTargetDelta()}function FO(n){n.calcProjection()}function UO(n){n.resetSkewAndRotation()}function WO(n){n.removeLeadSnapshot()}function Qb(n,e,t){n.translate=vt(e.translate,0,t),n.scale=vt(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function Yb(n,e,t,r){n.min=vt(e.min,t.min,r),n.max=vt(e.max,t.max,r)}function $O(n,e,t,r){Yb(n.x,e.x,t.x,r),Yb(n.y,e.y,t.y,r)}function HO(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const KO={duration:.45,ease:[.4,0,.1,1]},Xb=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),Jb=Xb("applewebkit/")&&!Xb("chrome/")?Math.round:cr;function Zb(n){n.min=Jb(n.min),n.max=Jb(n.max)}function qO(n){Zb(n.x),Zb(n.y)}function lT(n,e,t){return n==="position"||n==="preserve-aspect"&&!gO(Fb(e),Fb(t),.2)}function GO(n){var e;return n!==n.root&&((e=n.scroll)==null?void 0:e.wasRoot)}const QO=aT({attachResizeListener:(n,e)=>du(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Wp={current:void 0},cT=aT({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!Wp.current){const n=new QO({});n.mount(window),n.setOptions({layoutScroll:!0}),Wp.current=n}return Wp.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),H0=A.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function ek(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function YO(...n){return e=>{let t=!1;const r=n.map(s=>{const l=ek(s,e);return!t&&typeof l=="function"&&(t=!0),l});if(t)return()=>{for(let s=0;s<r.length;s++){const l=r[s];typeof l=="function"?l():ek(n[s],null)}}}}function XO(...n){return A.useCallback(YO(...n),n)}class JO extends A.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=t.offsetParent,s=PE(r)&&r.offsetWidth||0,l=this.props.sizeRef.current;l.height=t.offsetHeight||0,l.width=t.offsetWidth||0,l.top=t.offsetTop,l.left=t.offsetLeft,l.right=s-l.width-l.left}return null}componentDidUpdate(){}render(){return this.props.children}}function ZO({children:n,isPresent:e,anchorX:t,root:r}){var g;const s=A.useId(),l=A.useRef(null),c=A.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=A.useContext(H0),d=((g=n.props)==null?void 0:g.ref)??(n==null?void 0:n.ref),m=XO(l,d);return A.useInsertionEffect(()=>{const{width:y,height:x,top:T,left:k,right:S}=c.current;if(e||!l.current||!y||!x)return;const C=t==="left"?`left: ${k}`:`right: ${S}`;l.current.dataset.motionPopId=s;const N=document.createElement("style");h&&(N.nonce=h);const L=r??document.head;return L.appendChild(N),N.sheet&&N.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${y}px !important;
            height: ${x}px !important;
            ${C}px !important;
            top: ${T}px !important;
          }
        `),()=>{L.contains(N)&&L.removeChild(N)}},[e]),a.jsx(JO,{isPresent:e,childRef:l,sizeRef:c,children:A.cloneElement(n,{ref:m})})}const e8=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:s,presenceAffectsLayout:l,mode:c,anchorX:h,root:d})=>{const m=y0(t8),g=A.useId();let y=!0,x=A.useMemo(()=>(y=!1,{id:g,initial:e,isPresent:t,custom:s,onExitComplete:T=>{m.set(T,!0);for(const k of m.values())if(!k)return;r&&r()},register:T=>(m.set(T,!1),()=>m.delete(T))}),[t,m,r]);return l&&y&&(x={...x}),A.useMemo(()=>{m.forEach((T,k)=>m.set(k,!1))},[t]),A.useEffect(()=>{!t&&!m.size&&r&&r()},[t]),c==="popLayout"&&(n=a.jsx(ZO,{isPresent:t,anchorX:h,root:d,children:n})),a.jsx(Df.Provider,{value:x,children:n})};function t8(){return new Map}function uT(n=!0){const e=A.useContext(Df);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:s}=e,l=A.useId();A.useEffect(()=>{if(n)return s(l)},[n]);const c=A.useCallback(()=>n&&r&&r(l),[l,r,n]);return!t&&r?[!1,c]:[!0]}const sh=n=>n.key||"";function tk(n){const e=[];return A.Children.forEach(n,t=>{A.isValidElement(t)&&e.push(t)}),e}const K0=({children:n,custom:e,initial:t=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:l="sync",propagate:c=!1,anchorX:h="left",root:d})=>{const[m,g]=uT(c),y=A.useMemo(()=>tk(n),[n]),x=c&&!m?[]:y.map(sh),T=A.useRef(!0),k=A.useRef(y),S=y0(()=>new Map),C=A.useRef(new Set),[N,L]=A.useState(y),[M,U]=A.useState(y);F2(()=>{T.current=!1,k.current=y;for(let I=0;I<M.length;I++){const E=sh(M[I]);x.includes(E)?(S.delete(E),C.current.delete(E)):S.get(E)!==!0&&S.set(E,!1)}},[M,x.length,x.join("-")]);const $=[];if(y!==N){let I=[...y];for(let E=0;E<M.length;E++){const R=M[E],V=sh(R);x.includes(V)||(I.splice(E,0,R),$.push(R))}return l==="wait"&&$.length&&(I=$),U(tk(I)),L(y),null}const{forceRender:G}=A.useContext(g0);return a.jsx(a.Fragment,{children:M.map(I=>{const E=sh(I),R=c&&!m?!1:y===M||x.includes(E),V=()=>{if(C.current.has(E))return;if(C.current.add(E),S.has(E))S.set(E,!0);else return;let B=!0;S.forEach(F=>{F||(B=!1)}),B&&(G==null||G(),U(k.current),c&&(g==null||g()),r&&r())};return a.jsx(e8,{isPresent:R,initial:!T.current||t?void 0:!1,custom:e,presenceAffectsLayout:s,mode:l,root:d,onExitComplete:R?void 0:V,anchorX:h,children:I},E)})})},dT=A.createContext({strict:!1}),nk={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let rk=!1;function n8(){if(rk)return;const n={};for(const e in nk)n[e]={isEnabled:t=>nk[e].some(r=>!!t[r])};zE(n),rk=!0}function hT(){return n8(),UL()}function r8(n){const e=hT();for(const t in n)e[t]={...e[t],...n[t]};zE(e)}const i8=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ef(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||i8.has(n)}let fT=n=>!ef(n);function s8(n){typeof n=="function"&&(fT=e=>e.startsWith("on")?!ef(e):n(e))}try{s8(require("@emotion/is-prop-valid").default)}catch{}function o8(n,e,t){const r={};for(const s in n)s==="values"&&typeof n.values=="object"||(fT(s)||t===!0&&ef(s)||!e&&!ef(s)||n.draggable&&s.startsWith("onDrag"))&&(r[s]=n[s]);return r}const Of=A.createContext({});function a8(n,e){if(Lf(n)){const{initial:t,animate:r}=n;return{initial:t===!1||uu(t)?t:void 0,animate:uu(r)?r:void 0}}return n.inherit!==!1?e:{}}function l8(n){const{initial:e,animate:t}=a8(n,A.useContext(Of));return A.useMemo(()=>({initial:e,animate:t}),[ik(e),ik(t)])}function ik(n){return Array.isArray(n)?n.join(" "):n}const q0=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function mT(n,e,t){for(const r in e)!pn(e[r])&&!qE(r,t)&&(n[r]=e[r])}function c8({transformTemplate:n},e){return A.useMemo(()=>{const t=q0();return W0(t,e,n),Object.assign({},t.vars,t.style)},[e])}function u8(n,e){const t=n.style||{},r={};return mT(r,t,n),Object.assign(r,c8(n,e)),r}function d8(n,e){const t={},r=u8(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}const pT=()=>({...q0(),attrs:{}});function h8(n,e,t,r){const s=A.useMemo(()=>{const l=pT();return GE(l,e,YE(r),n.transformTemplate,n.style),{...l.attrs,style:{...l.style}}},[e]);if(n.style){const l={};mT(l,n.style,n),s.style={...l,...s.style}}return s}const f8=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function G0(n){return typeof n!="string"||n.includes("-")?!1:!!(f8.indexOf(n)>-1||/[A-Z]/u.test(n))}function m8(n,e,t,{latestValues:r},s,l=!1,c){const d=(c??G0(n)?h8:d8)(e,r,s,n),m=o8(e,typeof n=="string",l),g=n!==A.Fragment?{...m,...d,ref:t}:{},{children:y}=e,x=A.useMemo(()=>pn(y)?y.get():y,[y]);return A.createElement(n,{...g,children:x})}function p8({scrapeMotionValuesFromProps:n,createRenderState:e},t,r,s){return{latestValues:g8(t,r,s,n),renderState:e()}}function g8(n,e,t,r){const s={},l=r(n,{});for(const x in l)s[x]=_h(l[x]);let{initial:c,animate:h}=n;const d=Lf(n),m=BE(n);e&&m&&!d&&n.inherit!==!1&&(c===void 0&&(c=e.initial),h===void 0&&(h=e.animate));let g=t?t.initial===!1:!1;g=g||c===!1;const y=g?h:c;if(y&&typeof y!="boolean"&&!Vf(y)){const x=Array.isArray(y)?y:[y];for(let T=0;T<x.length;T++){const k=V0(n,x[T]);if(k){const{transitionEnd:S,transition:C,...N}=k;for(const L in N){let M=N[L];if(Array.isArray(M)){const U=g?M.length-1:0;M=M[U]}M!==null&&(s[L]=M)}for(const L in S)s[L]=S[L]}}}return s}const gT=n=>(e,t)=>{const r=A.useContext(Of),s=A.useContext(Df),l=()=>p8(n,e,r,s);return t?l():y0(l)},y8=gT({scrapeMotionValuesFromProps:$0,createRenderState:q0}),v8=gT({scrapeMotionValuesFromProps:XE,createRenderState:pT}),x8=Symbol.for("motionComponentSymbol");function w8(n,e,t){const r=A.useRef(t);A.useInsertionEffect(()=>{r.current=t});const s=A.useRef(null);return A.useCallback(l=>{var h;l&&((h=n.onMount)==null||h.call(n,l)),e&&(l?e.mount(l):e.unmount());const c=r.current;if(typeof c=="function")if(l){const d=c(l);typeof d=="function"&&(s.current=d)}else s.current?(s.current(),s.current=null):c(l);else c&&(c.current=l)},[e])}const yT=A.createContext({});function zc(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function b8(n,e,t,r,s,l){var C,N;const{visualElement:c}=A.useContext(Of),h=A.useContext(dT),d=A.useContext(Df),m=A.useContext(H0).reducedMotion,g=A.useRef(null);r=r||h.renderer,!g.current&&r&&(g.current=r(n,{visualState:e,parent:c,props:t,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:m,isSVG:l}));const y=g.current,x=A.useContext(yT);y&&!y.projection&&s&&(y.type==="html"||y.type==="svg")&&k8(g.current,t,s,x);const T=A.useRef(!1);A.useInsertionEffect(()=>{y&&T.current&&y.update(t,d)});const k=t[SE],S=A.useRef(!!k&&!((C=window.MotionHandoffIsComplete)!=null&&C.call(window,k))&&((N=window.MotionHasOptimisedAnimation)==null?void 0:N.call(window,k)));return F2(()=>{y&&(T.current=!0,window.MotionIsMounted=!0,y.updateFeatures(),y.scheduleRenderMicrotask(),S.current&&y.animationState&&y.animationState.animateChanges())}),A.useEffect(()=>{y&&(!S.current&&y.animationState&&y.animationState.animateChanges(),S.current&&(queueMicrotask(()=>{var L;(L=window.MotionHandoffMarkAsComplete)==null||L.call(window,k)}),S.current=!1),y.enteringChildren=void 0)}),y}function k8(n,e,t,r){const{layoutId:s,layout:l,drag:c,dragConstraints:h,layoutScroll:d,layoutRoot:m,layoutCrossfade:g}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:vT(n.parent)),n.projection.setOptions({layoutId:s,layout:l,alwaysMeasureLayout:!!c||h&&zc(h),visualElement:n,animationType:typeof l=="string"?l:"both",initialPromotionConfig:r,crossfade:g,layoutScroll:d,layoutRoot:m})}function vT(n){if(n)return n.options.allowProjection!==!1?n.projection:vT(n.parent)}function $p(n,{forwardMotionProps:e=!1,type:t}={},r,s){r&&r8(r);const l=t?t==="svg":G0(n),c=l?v8:y8;function h(m,g){let y;const x={...A.useContext(H0),...m,layoutId:_8(m)},{isStatic:T}=x,k=l8(m),S=c(m,T);if(!T&&z2){S8();const C=E8(x);y=C.MeasureLayout,k.visualElement=b8(n,S,x,s,C.ProjectionNode,l)}return a.jsxs(Of.Provider,{value:k,children:[y&&k.visualElement?a.jsx(y,{visualElement:k.visualElement,...x}):null,m8(n,m,w8(S,k.visualElement,g),S,T,e,l)]})}h.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const d=A.forwardRef(h);return d[x8]=n,d}function _8({layoutId:n}){const e=A.useContext(g0).id;return e&&n!==void 0?e+"-"+n:n}function S8(n,e){A.useContext(dT).strict}function E8(n){const e=hT(),{drag:t,layout:r}=e;if(!t&&!r)return{};const s={...t,...r};return{MeasureLayout:t!=null&&t.isEnabled(n)||r!=null&&r.isEnabled(n)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function T8(n,e){if(typeof Proxy>"u")return $p;const t=new Map,r=(l,c)=>$p(l,c,n,e),s=(l,c)=>r(l,c);return new Proxy(s,{get:(l,c)=>c==="create"?r:(t.has(c)||t.set(c,$p(c,void 0,n,e)),t.get(c))})}const I8=(n,e)=>e.isSVG??G0(n)?new sO(e):new ZL(e,{allowProjection:n!==A.Fragment});class C8 extends io{constructor(e){super(e),e.animationState||(e.animationState=uO(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Vf(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let j8=0;class A8 extends io{constructor(){super(...arguments),this.id=j8++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);t&&!e&&s.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const R8={animation:{Feature:C8},exit:{Feature:A8}};function Au(n){return{point:{x:n.pageX,y:n.pageY}}}const P8=n=>e=>z0(e)&&n(e,Au(e));function Yc(n,e,t,r){return du(n,e,P8(t),r)}const xT=({current:n})=>n?n.ownerDocument.defaultView:null,sk=(n,e)=>Math.abs(n-e);function N8(n,e){const t=sk(n.x,e.x),r=sk(n.y,e.y);return Math.sqrt(t**2+r**2)}const ok=new Set(["auto","scroll"]);class wT{constructor(e,t,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:l=!1,distanceThreshold:c=3,element:h}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=T=>{this.handleScroll(T.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=Kp(this.lastMoveEventInfo,this.history),k=this.startEvent!==null,S=N8(T.offset,{x:0,y:0})>=this.distanceThreshold;if(!k&&!S)return;const{point:C}=T,{timestamp:N}=tn;this.history.push({...C,timestamp:N});const{onStart:L,onMove:M}=this.handlers;k||(L&&L(this.lastMoveEvent,T),this.startEvent=this.lastMoveEvent),M&&M(this.lastMoveEvent,T)},this.handlePointerMove=(T,k)=>{this.lastMoveEvent=T,this.lastMoveEventInfo=Hp(k,this.transformPagePoint),ft.update(this.updatePoint,!0)},this.handlePointerUp=(T,k)=>{this.end();const{onEnd:S,onSessionEnd:C,resumeAnimation:N}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&N&&N(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const L=Kp(T.type==="pointercancel"?this.lastMoveEventInfo:Hp(k,this.transformPagePoint),this.history);this.startEvent&&S&&S(T,L),C&&C(T,L)},!z0(e))return;this.dragSnapToOrigin=l,this.handlers=t,this.transformPagePoint=r,this.distanceThreshold=c,this.contextWindow=s||window;const d=Au(e),m=Hp(d,this.transformPagePoint),{point:g}=m,{timestamp:y}=tn;this.history=[{...g,timestamp:y}];const{onSessionStart:x}=t;x&&x(e,Kp(m,this.history)),this.removeListeners=Iu(Yc(this.contextWindow,"pointermove",this.handlePointerMove),Yc(this.contextWindow,"pointerup",this.handlePointerUp),Yc(this.contextWindow,"pointercancel",this.handlePointerUp)),h&&this.startScrollTracking(h)}startScrollTracking(e){let t=e.parentElement;for(;t;){const r=getComputedStyle(t);(ok.has(r.overflowX)||ok.has(r.overflowY))&&this.scrollPositions.set(t,{x:t.scrollLeft,y:t.scrollTop}),t=t.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const t=this.scrollPositions.get(e);if(!t)return;const r=e===window,s=r?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},l={x:s.x-t.x,y:s.y-t.y};l.x===0&&l.y===0||(r?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=l.x,this.lastMoveEventInfo.point.y+=l.y):this.history.length>0&&(this.history[0].x-=l.x,this.history[0].y-=l.y),this.scrollPositions.set(e,s),ft.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),Gs(this.updatePoint)}}function Hp(n,e){return e?{point:e(n.point)}:n}function ak(n,e){return{x:n.x-e.x,y:n.y-e.y}}function Kp({point:n},e){return{point:n,delta:ak(n,bT(e)),offset:ak(n,M8(e)),velocity:D8(e,.1)}}function M8(n){return n[0]}function bT(n){return n[n.length-1]}function D8(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const s=bT(n);for(;t>=0&&(r=n[t],!(s.timestamp-r.timestamp>zi(e)));)t--;if(!r)return{x:0,y:0};const l=ar(s.timestamp-r.timestamp);if(l===0)return{x:0,y:0};const c={x:(s.x-r.x)/l,y:(s.y-r.y)/l};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function V8(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?vt(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?vt(t,n,r.max):Math.min(n,t)),n}function lk(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function L8(n,{top:e,left:t,bottom:r,right:s}){return{x:lk(n.x,t,s),y:lk(n.y,e,r)}}function ck(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function O8(n,e){return{x:ck(n.x,e.x),y:ck(n.y,e.y)}}function B8(n,e){let t=.5;const r=kn(n),s=kn(e);return s>r?t=au(e.min,e.max-r,n.min):r>s&&(t=au(n.min,n.max-s,e.min)),hi(0,1,t)}function z8(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const Zg=.35;function F8(n=Zg){return n===!1?n=0:n===!0&&(n=Zg),{x:uk(n,"left","right"),y:uk(n,"top","bottom")}}function uk(n,e,t){return{min:dk(n,e),max:dk(n,t)}}function dk(n,e){return typeof n=="number"?n:n[e]||0}const U8=new WeakMap;class W8{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ut(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const l=y=>{t?(this.stopAnimation(),this.snapToCursor(Au(y).point)):this.pauseAnimation()},c=(y,x)=>{this.stopAnimation();const{drag:T,dragPropagation:k,onDragStart:S}=this.getProps();if(T&&!k&&(this.openDragLock&&this.openDragLock(),this.openDragLock=AL(T),!this.openDragLock))return;this.latestPointerEvent=y,this.latestPanInfo=x,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),sr(N=>{let L=this.getAxisMotionValue(N).get()||0;if(ci.test(L)){const{projection:M}=this.visualElement;if(M&&M.layout){const U=M.layout.layoutBox[N];U&&(L=kn(U)*(parseFloat(L)/100))}}this.originPoint[N]=L}),S&&ft.postRender(()=>S(y,x)),Kg(this.visualElement,"transform");const{animationState:C}=this.visualElement;C&&C.setActive("whileDrag",!0)},h=(y,x)=>{this.latestPointerEvent=y,this.latestPanInfo=x;const{dragPropagation:T,dragDirectionLock:k,onDirectionLock:S,onDrag:C}=this.getProps();if(!T&&!this.openDragLock)return;const{offset:N}=x;if(k&&this.currentDirection===null){this.currentDirection=$8(N),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",x.point,N),this.updateAxis("y",x.point,N),this.visualElement.render(),C&&C(y,x)},d=(y,x)=>{this.latestPointerEvent=y,this.latestPanInfo=x,this.stop(y,x),this.latestPointerEvent=null,this.latestPanInfo=null},m=()=>sr(y=>{var x;return this.getAnimationState(y)==="paused"&&((x=this.getAxisMotionValue(y).animation)==null?void 0:x.play())}),{dragSnapToOrigin:g}=this.getProps();this.panSession=new wT(e,{onSessionStart:l,onStart:c,onMove:h,onSessionEnd:d,resumeAnimation:m},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,distanceThreshold:r,contextWindow:xT(this.visualElement),element:this.visualElement.current})}stop(e,t){const r=e||this.latestPointerEvent,s=t||this.latestPanInfo,l=this.isDragging;if(this.cancel(),!l||!s||!r)return;const{velocity:c}=s;this.startAnimation(c);const{onDragEnd:h}=this.getProps();h&&ft.postRender(()=>h(r,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:s}=this.getProps();if(!r||!oh(e,s,this.currentDirection))return;const l=this.getAxisMotionValue(e);let c=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(c=V8(c,this.constraints[e],this.elastic[e])),l.set(c)}resolveConstraints(){var l;const{dragConstraints:e,dragElastic:t}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(l=this.visualElement.projection)==null?void 0:l.layout,s=this.constraints;e&&zc(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=L8(r.layoutBox,e):this.constraints=!1,this.elastic=F8(t),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&sr(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=z8(r.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!zc(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const l=qL(r,s.root,this.visualElement.getTransformPagePoint());let c=O8(s.layout.layoutBox,l);if(t){const h=t($L(c));this.hasMutatedConstraints=!!h,h&&(c=UE(h))}return c}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:s,dragTransition:l,dragSnapToOrigin:c,onDragTransitionEnd:h}=this.getProps(),d=this.constraints||{},m=sr(g=>{if(!oh(g,t,this.currentDirection))return;let y=d&&d[g]||{};c&&(y={min:0,max:0});const x=s?200:1e6,T=s?40:1e7,k={type:"inertia",velocity:r?e[g]:0,bounceStiffness:x,bounceDamping:T,timeConstant:750,restDelta:1,restSpeed:10,...l,...y};return this.startAxisValueAnimation(g,k)});return Promise.all(m).then(h)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return Kg(this.visualElement,e),r.start(D0(e,r,0,t,this.visualElement,!1))}stopAnimation(){sr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){sr(e=>{var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[t];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){sr(t=>{const{drag:r}=this.getProps();if(!oh(t,r,this.currentDirection))return;const{projection:s}=this.visualElement,l=this.getAxisMotionValue(t);if(s&&s.layout){const{min:c,max:h}=s.layout.layoutBox[t],d=l.get()||0;l.set(e[t]-vt(c,h,.5)+d)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!zc(t)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};sr(c=>{const h=this.getAxisMotionValue(c);if(h&&this.constraints!==!1){const d=h.get();s[c]=B8({min:d,max:d},this.constraints[c])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),sr(c=>{if(!oh(c,e,null))return;const h=this.getAxisMotionValue(c),{min:d,max:m}=this.constraints[c];h.set(vt(d,m,s[c]))})}addListeners(){if(!this.visualElement.current)return;U8.set(this.visualElement,this);const e=this.visualElement.current,t=Yc(e,"pointerdown",d=>{const{drag:m,dragListener:g=!0}=this.getProps();m&&g&&!VE(d.target)&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();zc(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,l=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),ft.read(r);const c=du(window,"resize",()=>this.scalePositionWithinConstraints()),h=s.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:m})=>{this.isDragging&&m&&(sr(g=>{const y=this.getAxisMotionValue(g);y&&(this.originPoint[g]+=d[g].translate,y.set(y.get()+d[g].translate))}),this.visualElement.render())}));return()=>{c(),t(),l(),h&&h()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:l=!1,dragElastic:c=Zg,dragMomentum:h=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:s,dragConstraints:l,dragElastic:c,dragMomentum:h}}}function oh(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function $8(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class H8 extends io{constructor(e){super(e),this.removeGroupControls=cr,this.removeListeners=cr,this.controls=new W8(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||cr}update(){const{dragControls:e}=this.node.getProps(),{dragControls:t}=this.node.prevProps||{};e!==t&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners()}}const hk=n=>(e,t)=>{n&&ft.postRender(()=>n(e,t))};class K8 extends io{constructor(){super(...arguments),this.removePointerDownListener=cr}onPointerDown(e){this.session=new wT(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:xT(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:hk(e),onStart:hk(t),onMove:r,onEnd:(l,c)=>{delete this.session,s&&ft.postRender(()=>s(l,c))}}}mount(){this.removePointerDownListener=Yc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let qp=!1;class q8 extends A.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:s}=this.props,{projection:l}=e;l&&(t.group&&t.group.add(l),r&&r.register&&s&&r.register(l),qp&&l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),Sh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:s,isPresent:l}=this.props,{projection:c}=r;return c&&(c.isPresent=l,qp=!0,s||e.layoutDependency!==t||t===void 0||e.isPresent!==l?c.willUpdate():this.safeToRemove(),e.isPresent!==l&&(l?c.promote():c.relegate()||ft.postRender(()=>{const h=c.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),B0.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:s}=e;qp=!0,s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function kT(n){const[e,t]=uT(),r=A.useContext(g0);return a.jsx(q8,{...n,layoutGroup:r,switchLayoutGroup:A.useContext(yT),isPresent:e,safeToRemove:t})}const G8={pan:{Feature:K8},drag:{Feature:H8,ProjectionNode:cT,MeasureLayout:kT}};function fk(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const s="onHover"+t,l=r[s];l&&ft.postRender(()=>l(e,Au(e)))}class Q8 extends io{mount(){const{current:e}=this.node;e&&(this.unmount=RL(e,(t,r)=>(fk(this.node,r,"Start"),s=>fk(this.node,s,"End"))))}unmount(){}}class Y8 extends io{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Iu(du(this.node.current,"focus",()=>this.onFocus()),du(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function mk(n,e,t){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const s="onTap"+(t==="End"?"":t),l=r[s];l&&ft.postRender(()=>l(e,Au(e)))}class X8 extends io{mount(){const{current:e}=this.node;e&&(this.unmount=ML(e,(t,r)=>(mk(this.node,r,"Start"),(s,{success:l})=>mk(this.node,s,l?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const ey=new WeakMap,Gp=new WeakMap,J8=n=>{const e=ey.get(n.target);e&&e(n)},Z8=n=>{n.forEach(J8)};function e9({root:n,...e}){const t=n||document;Gp.has(t)||Gp.set(t,{});const r=Gp.get(t),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(Z8,{root:n,...e})),r[s]}function t9(n,e,t){const r=e9(e);return ey.set(n,t),r.observe(n),()=>{ey.delete(n),r.unobserve(n)}}const n9={some:0,all:1};class r9 extends io{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:s="some",once:l}=e,c={root:t?t.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:n9[s]},h=d=>{const{isIntersecting:m}=d;if(this.isInView===m||(this.isInView=m,l&&!m&&this.hasEnteredView))return;m&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",m);const{onViewportEnter:g,onViewportLeave:y}=this.node.getProps(),x=m?g:y;x&&x(d)};return t9(this.node.current,c,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(i9(e,t))&&this.startObserver()}unmount(){}}function i9({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const s9={inView:{Feature:r9},tap:{Feature:X8},focus:{Feature:Y8},hover:{Feature:Q8}},o9={layout:{ProjectionNode:cT,MeasureLayout:kT}},a9={...R8,...s9,...G8,...o9},de=T8(a9,I8);function Dn(){var k;const n=gr(),e=Ys(),{user:t,profile:r,isAuthenticated:s,isAdmin:l,isBusiness:c}=Or(),[h,d]=A.useState(!1),[m,g]=A.useState(!1),y=[{to:"/",label:"Home"},{to:"/map",label:"Village Map"},{to:"/demo",label:"See Demo"},{to:"/about",label:"How It Works"},{to:"/businesses",label:"For Businesses"}],x=async()=>{await S2(),g(!1),e("/")},T=S=>n.pathname===S;return a.jsxs("header",{style:{background:"var(--kb-white)",borderBottom:"1px solid var(--kb-gray-200)",position:"sticky",top:0,zIndex:100},children:[a.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 1rem",display:"flex",alignItems:"center",justifyContent:"space-between",height:"70px"},children:[a.jsxs(ue,{to:s?"/map":"/",style:{display:"flex",alignItems:"center",gap:"0.5rem",textDecoration:"none"},children:[a.jsx("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, var(--kb-navy) 0%, var(--kb-navy-light) 100%)",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--kb-gold)",fontFamily:"var(--font-display)",fontWeight:"700",fontSize:"1.2rem"},children:"K"}),a.jsxs("div",{children:[a.jsx("div",{style:{fontFamily:"var(--font-display)",fontWeight:"600",color:"var(--kb-navy)",fontSize:"1.1rem",lineHeight:1.1},children:"Kinderbucks"}),a.jsx("div",{style:{fontSize:"0.65rem",color:"var(--kb-gray-500)",textTransform:"uppercase",letterSpacing:"0.1em"},children:"Village Currency"})]})]}),a.jsx("nav",{style:{display:"flex",alignItems:"center",gap:"2rem"},className:"desktop-nav",children:y.map(S=>a.jsx(ue,{to:S.to,style:{color:T(S.to)?"var(--kb-navy)":"var(--kb-gray-500)",fontWeight:T(S.to)?"600":"500",fontSize:"0.95rem",transition:"color 0.2s",borderBottom:T(S.to)?"2px solid var(--kb-gold)":"2px solid transparent",paddingBottom:"4px"},children:S.label},S.to))}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},className:"desktop-nav",children:[s?a.jsx(a.Fragment,{children:a.jsxs("div",{style:{position:"relative"},children:[a.jsxs("button",{onClick:()=>g(!m),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"var(--kb-gray-100)",border:"none",borderRadius:"8px",cursor:"pointer",color:"var(--kb-navy)",fontWeight:"500"},children:[a.jsx(rl,{size:18}),(r==null?void 0:r.displayName)||((k=t.email)==null?void 0:k.split("@")[0])]}),m&&a.jsxs("div",{style:{position:"absolute",right:0,top:"100%",marginTop:"0.5rem",background:"white",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",minWidth:"180px",zIndex:200,overflow:"hidden"},children:[a.jsxs(ue,{to:"/card",onClick:()=>g(!1),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",color:"var(--kb-gold-dark)",textDecoration:"none",borderBottom:"1px solid var(--kb-gray-100)",fontWeight:"600",background:"rgba(201, 162, 39, 0.1)"},children:[a.jsx(Ag,{size:16})," My OK Card"]}),a.jsxs(ue,{to:"/profile",onClick:()=>g(!1),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",color:"var(--kb-gray-700)",textDecoration:"none",borderBottom:"1px solid var(--kb-gray-100)"},children:[a.jsx(rl,{size:16})," My Profile"]}),c&&a.jsxs(ue,{to:"/business/dashboard",onClick:()=>g(!1),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",color:"#2563eb",textDecoration:"none",borderBottom:"1px solid var(--kb-gray-100)"},children:[a.jsx(St,{size:16})," Business Dashboard"]}),l&&a.jsxs(ue,{to:"/admin/dashboard",onClick:()=>g(!1),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",color:"#dc2626",textDecoration:"none",borderBottom:"1px solid var(--kb-gray-100)"},children:[a.jsx(Kh,{size:16})," Admin Portal"]}),a.jsxs("button",{onClick:x,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",color:"var(--kb-gray-600)",background:"none",border:"none",cursor:"pointer",width:"100%",textAlign:"left"},children:[a.jsx(Rg,{size:16})," Sign Out"]})]})]})}):a.jsx(a.Fragment,{children:a.jsxs(ue,{to:"/login",className:"btn btn-secondary",style:{padding:"0.5rem 1rem",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(pl,{size:16})," Sign In"]})}),a.jsx(ue,{to:"/exchange",className:"btn btn-gold",style:{padding:"0.5rem 1rem",fontSize:"0.9rem"},children:"Get Kinderbucks"})]}),a.jsx("button",{onClick:()=>d(!h),className:"mobile-menu-btn",style:{display:"none",background:"none",border:"none",padding:"0.5rem",cursor:"pointer"},children:a.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:h?a.jsx("path",{d:"M6 6l12 12M6 18L18 6"}):a.jsx("path",{d:"M3 12h18M3 6h18M3 18h18"})})})]}),h&&a.jsxs("div",{className:"mobile-menu",style:{background:"var(--kb-white)",borderTop:"1px solid var(--kb-gray-200)",padding:"1rem"},children:[y.map(S=>a.jsx(ue,{to:S.to,onClick:()=>d(!1),style:{display:"block",padding:"0.75rem 0",color:T(S.to)?"var(--kb-navy)":"var(--kb-gray-700)",fontWeight:T(S.to)?"600":"400",borderBottom:"1px solid var(--kb-gray-100)"},children:S.label},S.to)),a.jsxs("div",{style:{marginTop:"1rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:[s?a.jsxs(a.Fragment,{children:[a.jsxs("div",{style:{padding:"0.75rem",background:"var(--kb-gray-50)",borderRadius:"8px",marginBottom:"0.5rem"},children:[a.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:(r==null?void 0:r.displayName)||t.email}),a.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:(r==null?void 0:r.role)||"member"})]}),a.jsxs(ue,{to:"/profile",onClick:()=>d(!1),className:"btn btn-secondary",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[a.jsx(rl,{size:16})," My Profile"]}),c&&a.jsxs(ue,{to:"/business/dashboard",onClick:()=>d(!1),className:"btn",style:{background:"#2563eb",color:"white",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[a.jsx(St,{size:16})," Business Dashboard"]}),l&&a.jsxs(ue,{to:"/admin/dashboard",onClick:()=>d(!1),className:"btn",style:{background:"#dc2626",color:"white",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[a.jsx(Kh,{size:16})," Admin Portal"]}),a.jsxs("button",{onClick:()=>{x(),d(!1)},className:"btn btn-secondary",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[a.jsx(Rg,{size:16})," Sign Out"]})]}):a.jsxs(ue,{to:"/login",onClick:()=>d(!1),className:"btn btn-secondary",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[a.jsx(pl,{size:16})," Sign In"]}),a.jsx(ue,{to:"/exchange",onClick:()=>d(!1),className:"btn btn-gold",children:"Get Kinderbucks"})]})]}),a.jsx("style",{children:`
        @media (max-width: 768px) {
          .desktop-nav {
            display: none !important;
          }
          .mobile-menu-btn {
            display: block !important;
          }
        }
      `})]})}function Vn(){return a.jsxs("footer",{style:{background:"var(--kb-navy)",color:"var(--kb-white)",padding:"3rem 1rem 2rem",marginTop:"auto"},children:[a.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"2rem"},children:[a.jsxs("div",{children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[a.jsx("div",{style:{width:"36px",height:"36px",background:"var(--kb-gold)",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--kb-navy)",fontFamily:"var(--font-display)",fontWeight:"700"},children:"K"}),a.jsx("span",{style:{fontFamily:"var(--font-display)",fontWeight:"600",fontSize:"1.1rem"},children:"Kinderbucks"})]}),a.jsx("p",{style:{color:"var(--kb-gray-300)",fontSize:"0.9rem",lineHeight:1.6},children:"Village of Kinderhook's local currency program. Supporting local businesses, strengthening community."}),a.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.8rem",marginTop:"1rem"},children:"Est. 2026"})]}),a.jsxs("div",{children:[a.jsx("h4",{style:{color:"var(--kb-gold)",marginBottom:"1rem",fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Quick Links"}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[a.jsx(ue,{to:"/demo",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"See Demo"}),a.jsx(ue,{to:"/about",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"How It Works"}),a.jsx(ue,{to:"/benefits",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"Member Benefits"}),a.jsx(ue,{to:"/exchange",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"Get Kinderbucks"}),a.jsx(ue,{to:"/businesses",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"For Businesses"})]})]}),a.jsxs("div",{children:[a.jsx("h4",{style:{color:"var(--kb-gold)",marginBottom:"1rem",fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"For Members"}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[a.jsx(ue,{to:"/account",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"My Account"}),a.jsx(ue,{to:"/profile",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"Kinderhooker Profile"}),a.jsx(ue,{to:"/scan/KB-0001",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"Verify Currency"})]})]}),a.jsxs("div",{children:[a.jsx("h4",{style:{color:"var(--kb-gold)",marginBottom:"1rem",fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Contact"}),a.jsxs("p",{style:{color:"var(--kb-gray-300)",fontSize:"0.9rem",lineHeight:1.8},children:["Village of Kinderhook",a.jsx("br",{}),"Columbia County, NY"]})]})]}),a.jsxs("div",{style:{maxWidth:"1200px",margin:"2rem auto 0",paddingTop:"2rem",borderTop:"1px solid var(--kb-navy-light)",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"1rem"},children:[a.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.8rem"},children:" 2026 Kinderbucks. A Harmonic Systems project."}),a.jsx("div",{style:{display:"flex",gap:"1.5rem"},children:a.jsx(ue,{to:"/admin/dashboard",style:{color:"var(--kb-gray-500)",fontSize:"0.8rem"},children:"Admin"})})]})]})}function l9(){const{isAuthenticated:n,loading:e}=Or(),t=Ys();return A.useEffect(()=>{!e&&n&&t("/card",{replace:!0})},[n,e,t]),e?null:a.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[a.jsx(Dn,{}),a.jsx("section",{style:{background:"linear-gradient(135deg, var(--kb-navy) 0%, var(--kb-navy-light) 100%)",color:"var(--kb-white)",padding:"4rem 1rem",textAlign:"center"},children:a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},style:{maxWidth:"800px",margin:"0 auto"},children:[a.jsx("div",{style:{display:"inline-block",background:"rgba(201, 162, 39, 0.2)",color:"var(--kb-gold)",padding:"0.5rem 1rem",borderRadius:"100px",fontSize:"0.85rem",fontWeight:"600",marginBottom:"1.5rem"},children:"Village of Kinderhook  Est. 2026"}),a.jsxs("h1",{style:{fontFamily:"var(--font-display)",fontSize:"clamp(2.5rem, 5vw, 3.5rem)",fontWeight:"700",marginBottom:"1.5rem",lineHeight:1.2},children:["Strengthen Our Village,",a.jsx("br",{}),a.jsx("span",{style:{color:"var(--kb-gold)"},children:"One Kinderbuck at a Time"})]}),a.jsx("p",{style:{fontSize:"1.2rem",color:"var(--kb-gray-300)",marginBottom:"2rem",maxWidth:"600px",margin:"0 auto 2rem"},children:"A local currency program that keeps money circulating in Kinderhook, rewards loyal customers, and strengthens our community economy."}),a.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[a.jsx(ue,{to:"/exchange",className:"btn btn-gold",style:{padding:"1rem 2rem",fontSize:"1.1rem"},children:"Get Kinderbucks"}),a.jsx(ue,{to:"/demo",className:"btn btn-outline",style:{padding:"1rem 2rem",fontSize:"1.1rem",borderColor:"var(--kb-white)",color:"var(--kb-white)"},children:"See Demo"})]})]})}),a.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:a.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[a.jsxs("div",{style:{textAlign:"center",marginBottom:"3rem"},children:[a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"How Kinderbucks Works"}),a.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"Simple steps to start supporting local"})]}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"2rem"},children:[{step:"1",title:"Exchange",description:"Convert USD to Kinderbucks at participating locations or online. Members get bonus rates!",Icon:Pf},{step:"2",title:"Spend Local",description:"Use Kinderbucks at any of our 19+ participating village businesses.",Icon:St},{step:"3",title:"Check In",description:"Scan QR codes when you visit to build your Kinderhooker status and unlock rewards.",Icon:Nr},{step:"4",title:"Earn More",description:"Higher tiers mean better exchange rates. Village Patrons get 25% bonus!",Icon:qs}].map((r,s)=>a.jsxs(de.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:s*.1},viewport:{once:!0},className:"card",style:{textAlign:"center"},children:[a.jsx("div",{style:{width:"60px",height:"60px",background:"var(--kb-navy)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:a.jsx(r.Icon,{size:28,color:"var(--kb-gold)",strokeWidth:1.5})}),a.jsxs("div",{style:{color:"var(--kb-gold)",fontSize:"0.8rem",fontWeight:"600",marginBottom:"0.25rem"},children:["STEP ",r.step]}),a.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:r.title}),a.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.95rem"},children:r.description})]},s))})]})}),a.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:a.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[a.jsxs("div",{style:{textAlign:"center",marginBottom:"3rem"},children:[a.jsx("div",{className:"badge badge-gold",style:{marginBottom:"1rem"},children:"OK Membership"}),a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"Become a Kinderhooker"}),a.jsx("p",{style:{color:"var(--kb-gray-500)",maxWidth:"600px",margin:"0 auto"},children:"Visit local businesses to level up your membership and unlock better exchange rates"})]}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"1.5rem"},children:[{name:"Curious",businesses:"1+",bonus:"10%",color:"#888888",Icon:on},{name:"Hooked",businesses:"5+",bonus:"15%",color:"#2e7d32",Icon:pr},{name:"Line & Sinker",businesses:"10+",bonus:"20%",color:"#1565c0",Icon:mr},{name:"Village Patron",businesses:"15+",bonus:"25%",color:"#c9a227",Icon:Yn,featured:!0}].map((r,s)=>a.jsxs(de.div,{initial:{opacity:0,scale:.95},whileInView:{opacity:1,scale:1},transition:{delay:s*.1},viewport:{once:!0},className:"card",style:{textAlign:"center",border:r.featured?"2px solid var(--kb-gold)":void 0,position:"relative",overflow:"hidden"},children:[r.featured&&a.jsx("div",{style:{position:"absolute",top:"10px",right:"-30px",background:"var(--kb-gold)",color:"var(--kb-navy)",padding:"0.25rem 2rem",fontSize:"0.7rem",fontWeight:"600",transform:"rotate(45deg)"},children:"BEST"}),a.jsx("div",{style:{width:"50px",height:"50px",background:`${r.color}15`,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 0.75rem"},children:a.jsx(r.Icon,{size:24,color:r.color,strokeWidth:1.5})}),a.jsx("h3",{style:{color:r.color,marginBottom:"0.5rem"},children:r.name}),a.jsxs("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem",marginBottom:"1rem"},children:[r.businesses," businesses visited"]}),a.jsxs("div",{style:{background:`${r.color}15`,borderRadius:"8px",padding:"1rem"},children:[a.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:r.color},children:r.bonus}),a.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:"Exchange Bonus"})]})]},s))}),a.jsx("div",{style:{textAlign:"center",marginTop:"2rem"},children:a.jsx(ue,{to:"/profile",className:"btn btn-primary",children:"View My Progress"})})]})}),a.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:a.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[a.jsxs("div",{style:{textAlign:"center",marginBottom:"3rem"},children:[a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"Participating Businesses"}),a.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"Support these local Kinderhook establishments"})]}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"1rem"},children:["The Aviary","Morningbird Cafe","Saisonnier","Broad Street Bagel","Brooklyn Pizzeria","Isola Wine Bar","OK Pantry","Kinderhook Books","Samascott's","The School Gallery","Old Dutch Inn","Muse Aesthetics"].map((r,s)=>a.jsx("div",{style:{background:"var(--kb-white)",borderRadius:"8px",padding:"1rem",textAlign:"center",fontSize:"0.9rem",color:"var(--kb-gray-700)",border:"1px solid var(--kb-gray-200)"},children:r},s))}),a.jsx("div",{style:{textAlign:"center",marginTop:"2rem"},children:a.jsx(ue,{to:"/businesses",className:"btn btn-secondary",children:"View All 19 Businesses "})})]})}),a.jsx("section",{style:{padding:"4rem 1rem",background:"linear-gradient(135deg, var(--kb-green) 0%, var(--kb-green-light) 100%)",color:"var(--kb-white)",textAlign:"center"},children:a.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto"},children:[a.jsx("h2",{style:{marginBottom:"1rem"},children:"Ready to Support Local?"}),a.jsx("p",{style:{opacity:.9,marginBottom:"2rem"},children:"Join the Kinderbucks program today and start earning rewards while strengthening our village economy."}),a.jsx("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:a.jsx(ue,{to:"/exchange",className:"btn btn-gold",style:{padding:"1rem 2rem"},children:"Get Your First Kinderbucks"})})]})}),a.jsx(Vn,{})]})}const pk={customer:{id:"customer",title:"For Customers",subtitle:"Start supporting local in minutes",Icon:f0,color:"var(--kb-green)",minCommitment:"Start with just $10"},business:{id:"business",title:"For Business Owners",subtitle:"Accept Kinderbucks and grow your customer base",Icon:St,color:"var(--kb-navy)",minCommitment:"No upfront cost to join"},association:{id:"association",title:"For the Business Association",subtitle:"Strengthen the village economy together",Icon:TD,color:"var(--kb-gold-dark)",minCommitment:"Community-driven program"}},gk=[{number:1,title:"Get Your First Kinderbucks",description:"Visit any exchange location with USD. Start with as little as $10.",visual:"exchange",details:["Visit Village Hall, OK Pantry, or The Aviary","Exchange any amount ($10, $20, $50, $100)","New members get 10% bonus automatically","Receive physical Kinderbucks bills"],tip:"First-time? You'll get $11 in Kinderbucks for every $10 USD!"},{number:2,title:"Spend at Local Businesses",description:"Use Kinderbucks like cash at 19+ participating village businesses.",visual:"spend",details:["Accepted at restaurants, shops, and services","Works just like regular currency","Businesses give change in Kinderbucks when possible","100% of your money stays in Kinderhook"],tip:"Check the business directory to plan your local shopping route!"},{number:3,title:"Check In When You Visit",description:"Scan QR codes at businesses to track your visits and earn rewards.",visual:"checkin",details:["Look for the Kinderbucks QR code at each business","Scan with your phone camera","Each unique business counts toward your tier","One check-in per business per hour"],tip:"You don't need an app - just scan and go!"},{number:4,title:"Level Up Your Membership",description:"Visit more businesses to unlock better exchange rates.",visual:"tiers",details:["Curious (1+ businesses): 10% bonus","Hooked (5+ businesses): 15% bonus","Line & Sinker (10+ businesses): 20% bonus","Village Patron (15+ businesses): 25% bonus"],tip:"At 25% bonus, $100 USD gets you $125 in Kinderbucks!"}],c9=[{number:1,title:"Register Your Business",description:"Join the program with no upfront costs or monthly fees.",visual:"register",details:["Contact the Business Association to register","Receive your unique business QR code","Get listed in the Kinderbucks directory","No fees, no contracts, no risk"],tip:"Registration takes less than 10 minutes!"},{number:2,title:"Accept Kinderbucks Payments",description:"Accept Kinderbucks just like you accept cash.",visual:"accept",details:["Kinderbucks bills have QR codes for verification","Scan any bill to verify authenticity","Make change in Kinderbucks when possible","Train staff in minutes"],tip:"Verification is instant - just scan the QR code on any bill."},{number:3,title:"Build Customer Loyalty",description:"Customers check in at your business, driving repeat visits.",visual:"loyalty",details:["Display your QR code prominently","Customers scan to record their visit","Each check-in helps customers level up","Higher tiers = more valuable customers"],tip:"Village Patrons have visited 15+ businesses - they're your most loyal customers!"},{number:4,title:"Redeem or Recirculate",description:"Use Kinderbucks at other businesses or redeem for USD.",visual:"redeem",details:["Spend at other participating businesses","Pay suppliers who accept Kinderbucks","Redeem for USD at exchange locations (1:1)","Keep money circulating locally"],tip:"Most businesses find it easier to spend than redeem - the money keeps moving!"}],u9=[{number:1,title:"Program Overview",description:"A local currency that strengthens the village economy.",visual:"overview",details:["Kinderbucks is a complementary currency for Kinderhook","Backed 1:1 by USD in a dedicated account","Bonus rates funded by interest and community investment","QR verification prevents counterfeiting"],tip:"Complementary currencies have been used successfully in communities worldwide."},{number:2,title:"Economic Impact",description:"Money that circulates locally multiplies its impact.",visual:"impact",details:["Studies show local currency circulates 3-4x more than USD","$10,000 in circulation = $30,000-40,000 in local economic activity",'Encourages "buy local" behavior',"Builds connections between businesses and residents"],tip:"Every Kinderbuck spent is guaranteed to stay in the village."},{number:3,title:"Member Engagement",description:"Tier system drives exploration of local businesses.",visual:"engagement",details:["Gamification encourages visiting new businesses","Tier bonuses reward loyal community members","Check-in data shows foot traffic patterns","Members become ambassadors for local spending"],tip:"The average member discovers 3 new businesses they didn't know about."},{number:4,title:"Administration & Growth",description:"Simple management with room to scale.",visual:"admin",details:["Digital dashboard tracks circulation and usage","New businesses join with minimal onboarding","Seasonal promotions drive engagement","Expand to neighboring communities over time"],tip:"The program is designed to be self-sustaining once established."}];function d9({step:n,isActive:e,onClick:t}){return a.jsx(de.div,{onClick:t,whileHover:{scale:1.02},whileTap:{scale:.98},style:{background:e?"var(--kb-navy)":"var(--kb-white)",color:e?"var(--kb-white)":"var(--kb-gray-700)",borderRadius:"12px",padding:"1.25rem",cursor:"pointer",border:e?"none":"1px solid var(--kb-gray-200)",transition:"all 0.2s"},children:a.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[a.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"50%",background:e?"var(--kb-gold)":"var(--kb-gray-100)",color:e?"var(--kb-navy)":"var(--kb-gray-500)",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"700",fontSize:"1rem",flexShrink:0},children:n.number}),a.jsxs("div",{children:[a.jsx("h4",{style:{margin:0,fontSize:"1rem",fontWeight:"600",marginBottom:"0.25rem"},children:n.title}),a.jsx("p",{style:{margin:0,fontSize:"0.85rem",opacity:.8},children:n.description})]})]})})}function h9({step:n,audienceColor:e}){return a.jsxs(de.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},style:{background:"var(--kb-white)",borderRadius:"16px",padding:"2rem",height:"100%",display:"flex",flexDirection:"column"},children:[a.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",background:`${e}15`,color:e,padding:"0.5rem 1rem",borderRadius:"100px",fontSize:"0.8rem",fontWeight:"600",marginBottom:"1rem",alignSelf:"flex-start"},children:["STEP ",n.number]}),a.jsx("h3",{style:{color:"var(--kb-navy)",fontSize:"1.5rem",marginBottom:"0.5rem"},children:n.title}),a.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem",fontSize:"1.05rem"},children:n.description}),a.jsxs("div",{style:{background:"var(--kb-cream)",borderRadius:"12px",padding:"1.5rem",marginBottom:"1.5rem",flex:1},children:[a.jsx("h4",{style:{color:"var(--kb-navy)",fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"1rem"},children:"What This Looks Like"}),a.jsx("ul",{style:{margin:0,padding:0,listStyle:"none"},children:n.details.map((t,r)=>a.jsxs("li",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",marginBottom:"0.75rem",color:"var(--kb-gray-700)"},children:[a.jsx("span",{style:{color:"var(--kb-green)",fontWeight:"600"},children:""}),t]},r))})]}),a.jsxs("div",{style:{background:"linear-gradient(135deg, var(--kb-gold) 0%, #d4af37 100%)",borderRadius:"12px",padding:"1rem 1.25rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[a.jsx("span",{style:{fontSize:"1.5rem"},children:""}),a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:"600",color:"var(--kb-navy)",fontSize:"0.8rem",textTransform:"uppercase",marginBottom:"0.25rem"},children:"Pro Tip"}),a.jsx("div",{style:{color:"var(--kb-navy)",fontSize:"0.95rem"},children:n.tip})]})]})]},n.number)}function f9({audience:n,steps:e}){const[t,r]=A.useState(0);return a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1.5fr",gap:"2rem",minHeight:"500px"},className:"demo-flow-grid",children:[a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:e.map((s,l)=>a.jsx(d9,{step:s,isActive:t===l,onClick:()=>r(l)},s.number))}),a.jsx(K0,{mode:"wait",children:a.jsx(h9,{step:e[t],audienceColor:n.color},t)})]})}function ah({icon:n,title:e,description:t}){return a.jsxs("div",{style:{background:"var(--kb-white)",borderRadius:"12px",padding:"1.5rem",textAlign:"center",border:"1px solid var(--kb-gray-200)"},children:[a.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.75rem"},children:n}),a.jsx("h4",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:e}),a.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem",margin:0},children:t})]})}function m9(){const[n,e]=A.useState("customer"),t=pk[n],r=()=>{switch(n){case"customer":return gk;case"business":return c9;case"association":return u9;default:return gk}},l=(()=>{switch(n){case"customer":return{to:"/exchange",text:"Get Your First Kinderbucks",secondary:"/businesses",secondaryText:"Browse Businesses"};case"business":return{to:"/businesses",text:"Register Your Business",secondary:"/about",secondaryText:"Learn More"};case"association":return{to:"/about",text:"Full Program Details",secondary:"/admin/dashboard",secondaryText:"View Dashboard"};default:return{to:"/exchange",text:"Get Started"}}})();return a.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[a.jsx(Dn,{}),a.jsx("section",{style:{background:"linear-gradient(135deg, var(--kb-navy) 0%, var(--kb-navy-light) 100%)",color:"var(--kb-white)",padding:"3rem 1rem",textAlign:"center"},children:a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{maxWidth:"800px",margin:"0 auto"},children:[a.jsx("div",{className:"badge badge-gold",style:{marginBottom:"1rem"},children:"Interactive Demo"}),a.jsx("h1",{style:{fontFamily:"var(--font-display)",fontSize:"clamp(2rem, 4vw, 2.75rem)",fontWeight:"700",marginBottom:"1rem"},children:"See How Kinderbucks Works"}),a.jsx("p",{style:{fontSize:"1.15rem",color:"var(--kb-gray-300)",maxWidth:"600px",margin:"0 auto"},children:"Choose your perspective below to see a step-by-step walkthrough of the Kinderbucks program."})]})}),a.jsx("section",{style:{background:"var(--kb-white)",padding:"2rem 1rem",borderBottom:"1px solid var(--kb-gray-200)"},children:a.jsx("div",{style:{maxWidth:"900px",margin:"0 auto"},children:a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem"},children:Object.values(pk).map(c=>{const h=c.Icon;return a.jsxs(de.button,{onClick:()=>e(c.id),whileHover:{scale:1.02},whileTap:{scale:.98},style:{background:n===c.id?`linear-gradient(135deg, ${c.color} 0%, ${c.color}dd 100%)`:"var(--kb-cream)",color:n===c.id?"var(--kb-white)":"var(--kb-gray-700)",border:n===c.id?"none":"2px solid var(--kb-gray-200)",borderRadius:"12px",padding:"1.5rem",cursor:"pointer",textAlign:"left",transition:"all 0.2s"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[a.jsx(h,{size:28,strokeWidth:1.5}),a.jsx("span",{style:{fontWeight:"600",fontSize:"1.1rem"},children:c.title})]}),a.jsx("p",{style:{margin:0,fontSize:"0.9rem",opacity:.85},children:c.subtitle}),a.jsx("div",{style:{marginTop:"0.75rem",fontSize:"0.8rem",fontWeight:"600",opacity:n===c.id?1:.7},children:c.minCommitment})]},c.id)})})})}),a.jsx("section",{style:{background:"var(--kb-cream)",padding:"3rem 1rem",flex:1},children:a.jsx("div",{style:{maxWidth:"1100px",margin:"0 auto"},children:a.jsx(K0,{mode:"wait",children:a.jsx(de.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:a.jsx(f9,{audience:t,steps:r()})},n)})})}),a.jsx("section",{style:{background:"var(--kb-white)",padding:"3rem 1rem",borderTop:"1px solid var(--kb-gray-200)"},children:a.jsxs("div",{style:{maxWidth:"900px",margin:"0 auto"},children:[a.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"Minimal Commitment, Maximum Impact"}),a.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"Kinderbucks is designed to be easy to try and rewarding to use"})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem"},children:[a.jsx(ah,{icon:"",title:"Start with $10",description:"No minimum exchange amount. Try it with pocket change."}),a.jsx(ah,{icon:"",title:"No Fees",description:"No signup fees, no monthly costs, no hidden charges."}),a.jsx(ah,{icon:"",title:"Full Refund",description:"Businesses can redeem Kinderbucks for USD 1:1 anytime."}),a.jsx(ah,{icon:"",title:"Instant Setup",description:"Customers start immediately. Businesses onboard in minutes."})]})]})}),a.jsx("section",{style:{background:t.color,padding:"3rem 1rem",textAlign:"center"},children:a.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto"},children:[a.jsx("h2",{style:{color:"var(--kb-white)",marginBottom:"0.5rem"},children:"Ready to Get Started?"}),a.jsxs("p",{style:{color:"rgba(255,255,255,0.85)",marginBottom:"2rem"},children:[n==="customer"&&"Join hundreds of Kinderhook residents supporting local businesses.",n==="business"&&"Join 19 local businesses already accepting Kinderbucks.",n==="association"&&"See the full details of how the program operates."]}),a.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[a.jsx(ue,{to:l.to,className:"btn",style:{background:"var(--kb-white)",color:t.color,padding:"1rem 2rem",fontSize:"1.1rem",fontWeight:"600"},children:l.text}),l.secondary&&a.jsx(ue,{to:l.secondary,className:"btn btn-outline",style:{borderColor:"var(--kb-white)",color:"var(--kb-white)",padding:"1rem 2rem",fontSize:"1.1rem"},children:l.secondaryText})]})]})}),a.jsx(Vn,{}),a.jsx("style",{children:`
        @media (max-width: 900px) {
          .demo-flow-grid {
            grid-template-columns: 1fr !important;
            gap: 1.5rem !important;
          }
        }
      `})]})}var p9=Object.defineProperty,tf=Object.getOwnPropertySymbols,_T=Object.prototype.hasOwnProperty,ST=Object.prototype.propertyIsEnumerable,yk=(n,e,t)=>e in n?p9(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ty=(n,e)=>{for(var t in e||(e={}))_T.call(e,t)&&yk(n,t,e[t]);if(tf)for(var t of tf(e))ST.call(e,t)&&yk(n,t,e[t]);return n},ny=(n,e)=>{var t={};for(var r in n)_T.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&tf)for(var r of tf(n))e.indexOf(r)<0&&ST.call(n,r)&&(t[r]=n[r]);return t};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Yo;(n=>{const e=class Fe{constructor(d,m,g,y){if(this.version=d,this.errorCorrectionLevel=m,this.modules=[],this.isFunction=[],d<Fe.MIN_VERSION||d>Fe.MAX_VERSION)throw new RangeError("Version value out of range");if(y<-1||y>7)throw new RangeError("Mask value out of range");this.size=d*4+17;let x=[];for(let k=0;k<this.size;k++)x.push(!1);for(let k=0;k<this.size;k++)this.modules.push(x.slice()),this.isFunction.push(x.slice());this.drawFunctionPatterns();const T=this.addEccAndInterleave(g);if(this.drawCodewords(T),y==-1){let k=1e9;for(let S=0;S<8;S++){this.applyMask(S),this.drawFormatBits(S);const C=this.getPenaltyScore();C<k&&(y=S,k=C),this.applyMask(S)}}s(0<=y&&y<=7),this.mask=y,this.applyMask(y),this.drawFormatBits(y),this.isFunction=[]}static encodeText(d,m){const g=n.QrSegment.makeSegments(d);return Fe.encodeSegments(g,m)}static encodeBinary(d,m){const g=n.QrSegment.makeBytes(d);return Fe.encodeSegments([g],m)}static encodeSegments(d,m,g=1,y=40,x=-1,T=!0){if(!(Fe.MIN_VERSION<=g&&g<=y&&y<=Fe.MAX_VERSION)||x<-1||x>7)throw new RangeError("Invalid value");let k,S;for(k=g;;k++){const M=Fe.getNumDataCodewords(k,m)*8,U=c.getTotalBits(d,k);if(U<=M){S=U;break}if(k>=y)throw new RangeError("Data too long")}for(const M of[Fe.Ecc.MEDIUM,Fe.Ecc.QUARTILE,Fe.Ecc.HIGH])T&&S<=Fe.getNumDataCodewords(k,M)*8&&(m=M);let C=[];for(const M of d){t(M.mode.modeBits,4,C),t(M.numChars,M.mode.numCharCountBits(k),C);for(const U of M.getData())C.push(U)}s(C.length==S);const N=Fe.getNumDataCodewords(k,m)*8;s(C.length<=N),t(0,Math.min(4,N-C.length),C),t(0,(8-C.length%8)%8,C),s(C.length%8==0);for(let M=236;C.length<N;M^=253)t(M,8,C);let L=[];for(;L.length*8<C.length;)L.push(0);return C.forEach((M,U)=>L[U>>>3]|=M<<7-(U&7)),new Fe(k,m,L,x)}getModule(d,m){return 0<=d&&d<this.size&&0<=m&&m<this.size&&this.modules[m][d]}getModules(){return this.modules}drawFunctionPatterns(){for(let g=0;g<this.size;g++)this.setFunctionModule(6,g,g%2==0),this.setFunctionModule(g,6,g%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const d=this.getAlignmentPatternPositions(),m=d.length;for(let g=0;g<m;g++)for(let y=0;y<m;y++)g==0&&y==0||g==0&&y==m-1||g==m-1&&y==0||this.drawAlignmentPattern(d[g],d[y]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(d){const m=this.errorCorrectionLevel.formatBits<<3|d;let g=m;for(let x=0;x<10;x++)g=g<<1^(g>>>9)*1335;const y=(m<<10|g)^21522;s(y>>>15==0);for(let x=0;x<=5;x++)this.setFunctionModule(8,x,r(y,x));this.setFunctionModule(8,7,r(y,6)),this.setFunctionModule(8,8,r(y,7)),this.setFunctionModule(7,8,r(y,8));for(let x=9;x<15;x++)this.setFunctionModule(14-x,8,r(y,x));for(let x=0;x<8;x++)this.setFunctionModule(this.size-1-x,8,r(y,x));for(let x=8;x<15;x++)this.setFunctionModule(8,this.size-15+x,r(y,x));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let d=this.version;for(let g=0;g<12;g++)d=d<<1^(d>>>11)*7973;const m=this.version<<12|d;s(m>>>18==0);for(let g=0;g<18;g++){const y=r(m,g),x=this.size-11+g%3,T=Math.floor(g/3);this.setFunctionModule(x,T,y),this.setFunctionModule(T,x,y)}}drawFinderPattern(d,m){for(let g=-4;g<=4;g++)for(let y=-4;y<=4;y++){const x=Math.max(Math.abs(y),Math.abs(g)),T=d+y,k=m+g;0<=T&&T<this.size&&0<=k&&k<this.size&&this.setFunctionModule(T,k,x!=2&&x!=4)}}drawAlignmentPattern(d,m){for(let g=-2;g<=2;g++)for(let y=-2;y<=2;y++)this.setFunctionModule(d+y,m+g,Math.max(Math.abs(y),Math.abs(g))!=1)}setFunctionModule(d,m,g){this.modules[m][d]=g,this.isFunction[m][d]=!0}addEccAndInterleave(d){const m=this.version,g=this.errorCorrectionLevel;if(d.length!=Fe.getNumDataCodewords(m,g))throw new RangeError("Invalid argument");const y=Fe.NUM_ERROR_CORRECTION_BLOCKS[g.ordinal][m],x=Fe.ECC_CODEWORDS_PER_BLOCK[g.ordinal][m],T=Math.floor(Fe.getNumRawDataModules(m)/8),k=y-T%y,S=Math.floor(T/y);let C=[];const N=Fe.reedSolomonComputeDivisor(x);for(let M=0,U=0;M<y;M++){let $=d.slice(U,U+S-x+(M<k?0:1));U+=$.length;const G=Fe.reedSolomonComputeRemainder($,N);M<k&&$.push(0),C.push($.concat(G))}let L=[];for(let M=0;M<C[0].length;M++)C.forEach((U,$)=>{(M!=S-x||$>=k)&&L.push(U[M])});return s(L.length==T),L}drawCodewords(d){if(d.length!=Math.floor(Fe.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let m=0;for(let g=this.size-1;g>=1;g-=2){g==6&&(g=5);for(let y=0;y<this.size;y++)for(let x=0;x<2;x++){const T=g-x,S=(g+1&2)==0?this.size-1-y:y;!this.isFunction[S][T]&&m<d.length*8&&(this.modules[S][T]=r(d[m>>>3],7-(m&7)),m++)}}s(m==d.length*8)}applyMask(d){if(d<0||d>7)throw new RangeError("Mask value out of range");for(let m=0;m<this.size;m++)for(let g=0;g<this.size;g++){let y;switch(d){case 0:y=(g+m)%2==0;break;case 1:y=m%2==0;break;case 2:y=g%3==0;break;case 3:y=(g+m)%3==0;break;case 4:y=(Math.floor(g/3)+Math.floor(m/2))%2==0;break;case 5:y=g*m%2+g*m%3==0;break;case 6:y=(g*m%2+g*m%3)%2==0;break;case 7:y=((g+m)%2+g*m%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[m][g]&&y&&(this.modules[m][g]=!this.modules[m][g])}}getPenaltyScore(){let d=0;for(let x=0;x<this.size;x++){let T=!1,k=0,S=[0,0,0,0,0,0,0];for(let C=0;C<this.size;C++)this.modules[x][C]==T?(k++,k==5?d+=Fe.PENALTY_N1:k>5&&d++):(this.finderPenaltyAddHistory(k,S),T||(d+=this.finderPenaltyCountPatterns(S)*Fe.PENALTY_N3),T=this.modules[x][C],k=1);d+=this.finderPenaltyTerminateAndCount(T,k,S)*Fe.PENALTY_N3}for(let x=0;x<this.size;x++){let T=!1,k=0,S=[0,0,0,0,0,0,0];for(let C=0;C<this.size;C++)this.modules[C][x]==T?(k++,k==5?d+=Fe.PENALTY_N1:k>5&&d++):(this.finderPenaltyAddHistory(k,S),T||(d+=this.finderPenaltyCountPatterns(S)*Fe.PENALTY_N3),T=this.modules[C][x],k=1);d+=this.finderPenaltyTerminateAndCount(T,k,S)*Fe.PENALTY_N3}for(let x=0;x<this.size-1;x++)for(let T=0;T<this.size-1;T++){const k=this.modules[x][T];k==this.modules[x][T+1]&&k==this.modules[x+1][T]&&k==this.modules[x+1][T+1]&&(d+=Fe.PENALTY_N2)}let m=0;for(const x of this.modules)m=x.reduce((T,k)=>T+(k?1:0),m);const g=this.size*this.size,y=Math.ceil(Math.abs(m*20-g*10)/g)-1;return s(0<=y&&y<=9),d+=y*Fe.PENALTY_N4,s(0<=d&&d<=2568888),d}getAlignmentPatternPositions(){if(this.version==1)return[];{const d=Math.floor(this.version/7)+2,m=this.version==32?26:Math.ceil((this.version*4+4)/(d*2-2))*2;let g=[6];for(let y=this.size-7;g.length<d;y-=m)g.splice(1,0,y);return g}}static getNumRawDataModules(d){if(d<Fe.MIN_VERSION||d>Fe.MAX_VERSION)throw new RangeError("Version number out of range");let m=(16*d+128)*d+64;if(d>=2){const g=Math.floor(d/7)+2;m-=(25*g-10)*g-55,d>=7&&(m-=36)}return s(208<=m&&m<=29648),m}static getNumDataCodewords(d,m){return Math.floor(Fe.getNumRawDataModules(d)/8)-Fe.ECC_CODEWORDS_PER_BLOCK[m.ordinal][d]*Fe.NUM_ERROR_CORRECTION_BLOCKS[m.ordinal][d]}static reedSolomonComputeDivisor(d){if(d<1||d>255)throw new RangeError("Degree out of range");let m=[];for(let y=0;y<d-1;y++)m.push(0);m.push(1);let g=1;for(let y=0;y<d;y++){for(let x=0;x<m.length;x++)m[x]=Fe.reedSolomonMultiply(m[x],g),x+1<m.length&&(m[x]^=m[x+1]);g=Fe.reedSolomonMultiply(g,2)}return m}static reedSolomonComputeRemainder(d,m){let g=m.map(y=>0);for(const y of d){const x=y^g.shift();g.push(0),m.forEach((T,k)=>g[k]^=Fe.reedSolomonMultiply(T,x))}return g}static reedSolomonMultiply(d,m){if(d>>>8||m>>>8)throw new RangeError("Byte out of range");let g=0;for(let y=7;y>=0;y--)g=g<<1^(g>>>7)*285,g^=(m>>>y&1)*d;return s(g>>>8==0),g}finderPenaltyCountPatterns(d){const m=d[1];s(m<=this.size*3);const g=m>0&&d[2]==m&&d[3]==m*3&&d[4]==m&&d[5]==m;return(g&&d[0]>=m*4&&d[6]>=m?1:0)+(g&&d[6]>=m*4&&d[0]>=m?1:0)}finderPenaltyTerminateAndCount(d,m,g){return d&&(this.finderPenaltyAddHistory(m,g),m=0),m+=this.size,this.finderPenaltyAddHistory(m,g),this.finderPenaltyCountPatterns(g)}finderPenaltyAddHistory(d,m){m[0]==0&&(d+=this.size),m.pop(),m.unshift(d)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],n.QrCode=e;function t(h,d,m){if(d<0||d>31||h>>>d)throw new RangeError("Value out of range");for(let g=d-1;g>=0;g--)m.push(h>>>g&1)}function r(h,d){return(h>>>d&1)!=0}function s(h){if(!h)throw new Error("Assertion error")}const l=class kt{constructor(d,m,g){if(this.mode=d,this.numChars=m,this.bitData=g,m<0)throw new RangeError("Invalid argument");this.bitData=g.slice()}static makeBytes(d){let m=[];for(const g of d)t(g,8,m);return new kt(kt.Mode.BYTE,d.length,m)}static makeNumeric(d){if(!kt.isNumeric(d))throw new RangeError("String contains non-numeric characters");let m=[];for(let g=0;g<d.length;){const y=Math.min(d.length-g,3);t(parseInt(d.substring(g,g+y),10),y*3+1,m),g+=y}return new kt(kt.Mode.NUMERIC,d.length,m)}static makeAlphanumeric(d){if(!kt.isAlphanumeric(d))throw new RangeError("String contains unencodable characters in alphanumeric mode");let m=[],g;for(g=0;g+2<=d.length;g+=2){let y=kt.ALPHANUMERIC_CHARSET.indexOf(d.charAt(g))*45;y+=kt.ALPHANUMERIC_CHARSET.indexOf(d.charAt(g+1)),t(y,11,m)}return g<d.length&&t(kt.ALPHANUMERIC_CHARSET.indexOf(d.charAt(g)),6,m),new kt(kt.Mode.ALPHANUMERIC,d.length,m)}static makeSegments(d){return d==""?[]:kt.isNumeric(d)?[kt.makeNumeric(d)]:kt.isAlphanumeric(d)?[kt.makeAlphanumeric(d)]:[kt.makeBytes(kt.toUtf8ByteArray(d))]}static makeEci(d){let m=[];if(d<0)throw new RangeError("ECI assignment value out of range");if(d<128)t(d,8,m);else if(d<16384)t(2,2,m),t(d,14,m);else if(d<1e6)t(6,3,m),t(d,21,m);else throw new RangeError("ECI assignment value out of range");return new kt(kt.Mode.ECI,0,m)}static isNumeric(d){return kt.NUMERIC_REGEX.test(d)}static isAlphanumeric(d){return kt.ALPHANUMERIC_REGEX.test(d)}getData(){return this.bitData.slice()}static getTotalBits(d,m){let g=0;for(const y of d){const x=y.mode.numCharCountBits(m);if(y.numChars>=1<<x)return 1/0;g+=4+x+y.bitData.length}return g}static toUtf8ByteArray(d){d=encodeURI(d);let m=[];for(let g=0;g<d.length;g++)d.charAt(g)!="%"?m.push(d.charCodeAt(g)):(m.push(parseInt(d.substring(g+1,g+3),16)),g+=2);return m}};l.NUMERIC_REGEX=/^[0-9]*$/,l.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,l.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let c=l;n.QrSegment=l})(Yo||(Yo={}));(n=>{(e=>{const t=class{constructor(s,l){this.ordinal=s,this.formatBits=l}};t.LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2),e.Ecc=t})(n.QrCode||(n.QrCode={}))})(Yo||(Yo={}));(n=>{(e=>{const t=class{constructor(s,l){this.modeBits=s,this.numBitsCharCount=l}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};t.NUMERIC=new t(1,[10,12,14]),t.ALPHANUMERIC=new t(2,[9,11,13]),t.BYTE=new t(4,[8,16,16]),t.KANJI=new t(8,[8,10,12]),t.ECI=new t(7,[0,0,0]),e.Mode=t})(n.QrSegment||(n.QrSegment={}))})(Yo||(Yo={}));var Ya=Yo;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var g9={L:Ya.QrCode.Ecc.LOW,M:Ya.QrCode.Ecc.MEDIUM,Q:Ya.QrCode.Ecc.QUARTILE,H:Ya.QrCode.Ecc.HIGH},ET=128,TT="L",IT="#FFFFFF",CT="#000000",jT=!1,AT=1,y9=4,v9=0,x9=.1;function RT(n,e=0){const t=[];return n.forEach(function(r,s){let l=null;r.forEach(function(c,h){if(!c&&l!==null){t.push(`M${l+e} ${s+e}h${h-l}v1H${l+e}z`),l=null;return}if(h===r.length-1){if(!c)return;l===null?t.push(`M${h+e},${s+e} h1v1H${h+e}z`):t.push(`M${l+e},${s+e} h${h+1-l}v1H${l+e}z`);return}c&&l===null&&(l=h)})}),t.join("")}function PT(n,e){return n.slice().map((t,r)=>r<e.y||r>=e.y+e.h?t:t.map((s,l)=>l<e.x||l>=e.x+e.w?s:!1))}function w9(n,e,t,r){if(r==null)return null;const s=n.length+t*2,l=Math.floor(e*x9),c=s/e,h=(r.width||l)*c,d=(r.height||l)*c,m=r.x==null?n.length/2-h/2:r.x*c,g=r.y==null?n.length/2-d/2:r.y*c,y=r.opacity==null?1:r.opacity;let x=null;if(r.excavate){let k=Math.floor(m),S=Math.floor(g),C=Math.ceil(h+m-k),N=Math.ceil(d+g-S);x={x:k,y:S,w:C,h:N}}const T=r.crossOrigin;return{x:m,y:g,h:d,w:h,excavation:x,opacity:y,crossOrigin:T}}function b9(n,e){return e!=null?Math.max(Math.floor(e),0):n?y9:v9}function NT({value:n,level:e,minVersion:t,includeMargin:r,marginSize:s,imageSettings:l,size:c,boostLevel:h}){let d=Wt.useMemo(()=>{const k=(Array.isArray(n)?n:[n]).reduce((S,C)=>(S.push(...Ya.QrSegment.makeSegments(C)),S),[]);return Ya.QrCode.encodeSegments(k,g9[e],t,void 0,void 0,h)},[n,e,t,h]);const{cells:m,margin:g,numCells:y,calculatedImageSettings:x}=Wt.useMemo(()=>{let T=d.getModules();const k=b9(r,s),S=T.length+k*2,C=w9(T,c,k,l);return{cells:T,margin:k,numCells:S,calculatedImageSettings:C}},[d,c,l,r,s]);return{qrcode:d,margin:g,cells:m,numCells:y,calculatedImageSettings:x}}var k9=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),_9=Wt.forwardRef(function(e,t){const r=e,{value:s,size:l=ET,level:c=TT,bgColor:h=IT,fgColor:d=CT,includeMargin:m=jT,minVersion:g=AT,boostLevel:y,marginSize:x,imageSettings:T}=r,S=ny(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:C}=S,N=ny(S,["style"]),L=T==null?void 0:T.src,M=Wt.useRef(null),U=Wt.useRef(null),$=Wt.useCallback(_e=>{M.current=_e,typeof t=="function"?t(_e):t&&(t.current=_e)},[t]),[G,I]=Wt.useState(!1),{margin:E,cells:R,numCells:V,calculatedImageSettings:B}=NT({value:s,level:c,minVersion:g,boostLevel:y,includeMargin:m,marginSize:x,imageSettings:T,size:l});Wt.useEffect(()=>{if(M.current!=null){const _e=M.current,Ve=_e.getContext("2d");if(!Ve)return;let it=R;const Te=U.current,ie=B!=null&&Te!==null&&Te.complete&&Te.naturalHeight!==0&&Te.naturalWidth!==0;ie&&B.excavation!=null&&(it=PT(R,B.excavation));const me=window.devicePixelRatio||1;_e.height=_e.width=l*me;const le=l/V*me;Ve.scale(le,le),Ve.fillStyle=h,Ve.fillRect(0,0,V,V),Ve.fillStyle=d,k9?Ve.fill(new Path2D(RT(it,E))):R.forEach(function(H,te){H.forEach(function(Pe,Ae){Pe&&Ve.fillRect(Ae+E,te+E,1,1)})}),B&&(Ve.globalAlpha=B.opacity),ie&&Ve.drawImage(Te,B.x+E,B.y+E,B.w,B.h)}}),Wt.useEffect(()=>{I(!1)},[L]);const F=ty({height:l,width:l},C);let D=null;return L!=null&&(D=Wt.createElement("img",{src:L,key:L,style:{display:"none"},onLoad:()=>{I(!0)},ref:U,crossOrigin:B==null?void 0:B.crossOrigin})),Wt.createElement(Wt.Fragment,null,Wt.createElement("canvas",ty({style:F,height:l,width:l,ref:$,role:"img"},N)),D)});_9.displayName="QRCodeCanvas";var ry=Wt.forwardRef(function(e,t){const r=e,{value:s,size:l=ET,level:c=TT,bgColor:h=IT,fgColor:d=CT,includeMargin:m=jT,minVersion:g=AT,boostLevel:y,title:x,marginSize:T,imageSettings:k}=r,S=ny(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:C,cells:N,numCells:L,calculatedImageSettings:M}=NT({value:s,level:c,minVersion:g,boostLevel:y,includeMargin:m,marginSize:T,imageSettings:k,size:l});let U=N,$=null;k!=null&&M!=null&&(M.excavation!=null&&(U=PT(N,M.excavation)),$=Wt.createElement("image",{href:k.src,height:M.h,width:M.w,x:M.x+C,y:M.y+C,preserveAspectRatio:"none",opacity:M.opacity,crossOrigin:M.crossOrigin}));const G=RT(U,C);return Wt.createElement("svg",ty({height:l,width:l,viewBox:`0 0 ${L} ${L}`,ref:t,role:"img"},S),!!x&&Wt.createElement("title",null,x),Wt.createElement("path",{fill:h,d:`M0,0 h${L}v${L}H0z`,shapeRendering:"crispEdges"}),Wt.createElement("path",{fill:d,d:G,shapeRendering:"crispEdges"}),$)});ry.displayName="QRCodeSVG";const vk={1:{color:"#2d5a27",gradient:["#3d7a37","#2d5a27"],label:"ONE",accent:"#90c695"},5:{color:"#1e3a5f",gradient:["#2e5a8f","#1e3a5f"],label:"FIVE",accent:"#7ba3cc"},10:{color:"#5c2d5c",gradient:["#7c4d7c","#5c2d5c"],label:"TEN",accent:"#b89db8"},20:{color:"#8b6914",gradient:["#c9a227","#8b6914"],label:"TWENTY",accent:"#e8d48a"}};function xl({value:n,size:e=128,denomination:t=5,showFrame:r=!0}){const s=vk[t]||vk[5],l=e+48,c=16;return r?a.jsx("div",{style:{width:l,background:`linear-gradient(135deg, ${s.gradient[0]} 0%, ${s.gradient[1]} 100%)`,borderRadius:c,padding:"3px",display:"inline-block",boxShadow:"0 4px 12px rgba(0,0,0,0.2)"},children:a.jsxs("div",{style:{background:"linear-gradient(135deg, #fefefe 0%, #f5f5f0 100%)",borderRadius:c-2,padding:"8px",position:"relative"},children:[a.jsx("div",{style:{textAlign:"center",marginBottom:"6px",fontFamily:'"Georgia", serif',fontSize:"10px",fontWeight:"bold",color:s.color,letterSpacing:"3px",textTransform:"uppercase"},children:"KINDERBUCKS"}),a.jsxs("div",{style:{background:"white",borderRadius:"8px",padding:"8px",border:`2px solid ${s.accent}`,position:"relative"},children:[a.jsx("div",{style:{position:"absolute",top:"4px",left:"4px",width:"12px",height:"12px",borderTop:`2px solid ${s.color}`,borderLeft:`2px solid ${s.color}`,borderRadius:"2px 0 0 0"}}),a.jsx("div",{style:{position:"absolute",top:"4px",right:"4px",width:"12px",height:"12px",borderTop:`2px solid ${s.color}`,borderRight:`2px solid ${s.color}`,borderRadius:"0 2px 0 0"}}),a.jsx("div",{style:{position:"absolute",bottom:"4px",left:"4px",width:"12px",height:"12px",borderBottom:`2px solid ${s.color}`,borderLeft:`2px solid ${s.color}`,borderRadius:"0 0 0 2px"}}),a.jsx("div",{style:{position:"absolute",bottom:"4px",right:"4px",width:"12px",height:"12px",borderBottom:`2px solid ${s.color}`,borderRight:`2px solid ${s.color}`,borderRadius:"0 0 2px 0"}}),a.jsx(ry,{value:n,size:e,level:"H",fgColor:s.color,style:{display:"block"},imageSettings:{src:`data:image/svg+xml,${encodeURIComponent(`
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="${s.color}">
                  <circle cx="12" cy="12" r="11" fill="white" stroke="${s.color}" stroke-width="1.5"/>
                  <text x="12" y="16" text-anchor="middle" font-size="12" font-weight="bold" fill="${s.color}" font-family="Georgia">K</text>
                </svg>
              `)}`,height:e*.2,width:e*.2,excavate:!0}})]}),a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"6px",padding:"0 4px"},children:[a.jsxs("span",{style:{fontFamily:'"Georgia", serif',fontSize:"14px",fontWeight:"bold",color:s.color},children:["$",t]}),a.jsx("span",{style:{fontFamily:'"Georgia", serif',fontSize:"9px",color:s.color,letterSpacing:"1px",opacity:.8},children:s.label}),a.jsxs("span",{style:{fontFamily:'"Georgia", serif',fontSize:"14px",fontWeight:"bold",color:s.color},children:["$",t]})]})]})}):a.jsx(ry,{value:n,size:e,level:"M",fgColor:s.color,style:{display:"block"}})}const S9="https://harmonicsystems.github.io/kinderbucks/#/scan/KB-0001",E9="https://harmonicsystems.github.io/kinderbucks/#/checkin/BROADST-BAGEL",T9="Broad Street Bagel Co.";function I9(){const[n,e]=A.useState(null),[t,r]=A.useState(0),[s,l]=A.useState(!1);return a.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)",overflow:"hidden"},children:a.jsxs("div",{style:{maxWidth:"1100px",margin:"0 auto"},children:[a.jsxs(de.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},style:{textAlign:"center",marginBottom:"3rem"},children:[a.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",background:"linear-gradient(135deg, var(--kb-gold) 0%, #e8c33a 100%)",color:"var(--kb-navy)",padding:"0.5rem 1rem",borderRadius:"100px",fontSize:"0.85rem",fontWeight:"600",marginBottom:"1rem"},children:[a.jsx(T3,{size:16})," Try It Live"]}),a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.75rem"},children:"See Kinderbucks in Action"}),a.jsx("p",{style:{color:"var(--kb-gray-600)",maxWidth:"600px",margin:"0 auto"},children:"Scan these real QR codes with your phone's camera to experience the magic"})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(320px, 1fr))",gap:"2rem",marginBottom:"3rem"},children:[a.jsxs(de.div,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},transition:{delay:.1},viewport:{once:!0},className:"card",style:{padding:"2rem",background:"linear-gradient(180deg, #f8fbff 0%, #ffffff 100%)",border:"2px solid #e8f0ff",position:"relative",overflow:"hidden"},children:[a.jsx("div",{style:{position:"absolute",top:0,right:0,width:"80px",height:"80px",background:"linear-gradient(135deg, transparent 50%, rgba(52, 152, 219, 0.1) 50%)"}}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[a.jsx("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, #3498db 0%, #2980b9 100%)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(L2,{size:22,color:"white"})}),a.jsxs("div",{children:[a.jsx("h3",{style:{color:"var(--kb-navy)",margin:0,fontSize:"1.2rem"},children:"Verify Currency"}),a.jsx("p",{style:{color:"var(--kb-gray-500)",margin:0,fontSize:"0.85rem"},children:"Confirm authenticity instantly"})]})]}),a.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem",marginBottom:"1.5rem"},children:"Every Kinderbuck has a unique QR code. Scan to verify it's real, see its value, and track its journey through the village."}),a.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1.5rem"},children:a.jsx(de.div,{whileHover:{scale:1.02},transition:{type:"spring",stiffness:300},children:a.jsx(xl,{value:S9,size:130,denomination:5,showFrame:!0})})}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1rem",background:"rgba(52, 152, 219, 0.08)",borderRadius:"10px",marginBottom:"1rem"},children:[a.jsx(Pg,{size:20,color:"#3498db"}),a.jsx("span",{style:{color:"var(--kb-gray-700)",fontSize:"0.9rem"},children:"Point your phone camera at the QR code"})]}),a.jsxs("div",{style:{borderTop:"1px dashed var(--kb-gray-200)",paddingTop:"1rem"},children:[a.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)",marginBottom:"0.5rem"},children:"You'll see:"}),a.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:["Verified","$5 Value","Active Status","Serial: KB-0001"].map((c,h)=>a.jsx("span",{style:{padding:"0.25rem 0.6rem",background:"var(--kb-gray-100)",borderRadius:"4px",fontSize:"0.8rem",color:"var(--kb-gray-600)"},children:c},h))})]})]}),a.jsxs(de.div,{initial:{opacity:0,x:30},whileInView:{opacity:1,x:0},transition:{delay:.2},viewport:{once:!0},className:"card",style:{padding:"2rem",background:"linear-gradient(180deg, #f8fff8 0%, #ffffff 100%)",border:"2px solid #e8ffe8",position:"relative",overflow:"hidden"},children:[a.jsx("div",{style:{position:"absolute",top:0,right:0,width:"80px",height:"80px",background:"linear-gradient(135deg, transparent 50%, rgba(39, 174, 96, 0.1) 50%)"}}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[a.jsx("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, var(--kb-green) 0%, #1e8449 100%)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(St,{size:22,color:"white"})}),a.jsxs("div",{children:[a.jsx("h3",{style:{color:"var(--kb-navy)",margin:0,fontSize:"1.2rem"},children:"Check In"}),a.jsx("p",{style:{color:"var(--kb-gray-500)",margin:0,fontSize:"0.85rem"},children:"Record visits, earn rewards"})]})]}),a.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem",marginBottom:"1.5rem"},children:"Scan the QR code at each business you visit. Build your Kinderhooker status and unlock better exchange rates!"}),a.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1.5rem"},children:a.jsx(de.div,{whileHover:{scale:1.02},transition:{type:"spring",stiffness:300},style:{background:"linear-gradient(135deg, var(--kb-green) 0%, #1e8449 100%)",borderRadius:"16px",padding:"3px",boxShadow:"0 4px 12px rgba(39, 174, 96, 0.3)"},children:a.jsxs("div",{style:{background:"white",borderRadius:"14px",padding:"12px",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"10px",fontWeight:"600",color:"var(--kb-green)",letterSpacing:"2px",marginBottom:"8px"},children:"CHECK IN AT"}),a.jsx(xl,{value:E9,size:110,denomination:1,showFrame:!1}),a.jsxs("div",{style:{marginTop:"8px",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.4rem"},children:[a.jsx(YD,{size:14,color:"var(--kb-green)"}),a.jsx("span",{style:{fontWeight:"600",color:"var(--kb-navy)",fontSize:"0.9rem"},children:T9})]})]})})}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1rem",background:"rgba(39, 174, 96, 0.08)",borderRadius:"10px",marginBottom:"1rem"},children:[a.jsx(Pg,{size:20,color:"var(--kb-green)"}),a.jsx("span",{style:{color:"var(--kb-gray-700)",fontSize:"0.9rem"},children:"Scan when you visit a business"})]}),a.jsxs("div",{style:{borderTop:"1px dashed var(--kb-gray-200)",paddingTop:"1rem"},children:[a.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)",marginBottom:"0.5rem"},children:"You'll see:"}),a.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:["Check-in Recorded","+1 Business","Tier Progress","Next Reward"].map((c,h)=>a.jsx("span",{style:{padding:"0.25rem 0.6rem",background:"var(--kb-gray-100)",borderRadius:"4px",fontSize:"0.8rem",color:"var(--kb-gray-600)"},children:c},h))})]})]})]}),a.jsxs(de.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{delay:.3},viewport:{once:!0},style:{background:"linear-gradient(135deg, var(--kb-navy) 0%, #1a3a5c 100%)",borderRadius:"20px",padding:"2rem",color:"white",position:"relative",overflow:"hidden"},children:[a.jsx("div",{style:{position:"absolute",top:"-50%",right:"-10%",width:"300px",height:"300px",background:"radial-gradient(circle, rgba(201, 162, 39, 0.1) 0%, transparent 70%)",borderRadius:"50%"}}),a.jsxs("div",{style:{position:"relative",zIndex:1},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1.5rem"},children:[a.jsx(m0,{size:20,color:"var(--kb-gold)"}),a.jsx("span",{style:{color:"var(--kb-gold)",fontWeight:"600",fontSize:"0.9rem"},children:"The Kinderbucks Loop"})]}),a.jsx("h3",{style:{fontSize:"1.5rem",marginBottom:"2rem",maxWidth:"500px"},children:"Check-ins unlock better exchange rates on currency"}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem",alignItems:"center"},children:[a.jsxs(de.div,{initial:{opacity:0},whileInView:{opacity:1},transition:{delay:.4},viewport:{once:!0},style:{display:"flex",alignItems:"center",gap:"1rem"},children:[a.jsx("div",{style:{width:"50px",height:"50px",background:"rgba(255,255,255,0.1)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:a.jsx(St,{size:24,color:"var(--kb-gold)"})}),a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Visit & Check In"}),a.jsx("div",{style:{fontSize:"0.85rem",opacity:.8},children:"Scan at local businesses"})]})]}),a.jsx("div",{style:{display:"flex",justifyContent:"center"},children:a.jsx(jg,{size:24,color:"var(--kb-gold)",style:{opacity:.5}})}),a.jsxs(de.div,{initial:{opacity:0},whileInView:{opacity:1},transition:{delay:.5},viewport:{once:!0},style:{display:"flex",alignItems:"center",gap:"1rem"},children:[a.jsx("div",{style:{width:"50px",height:"50px",background:"rgba(255,255,255,0.1)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:a.jsx(qs,{size:24,color:"var(--kb-gold)"})}),a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Level Up"}),a.jsx("div",{style:{fontSize:"0.85rem",opacity:.8},children:"Reach new tiers"})]})]}),a.jsx("div",{style:{display:"flex",justifyContent:"center"},children:a.jsx(jg,{size:24,color:"var(--kb-gold)",style:{opacity:.5}})}),a.jsxs(de.div,{initial:{opacity:0},whileInView:{opacity:1},transition:{delay:.6},viewport:{once:!0},style:{display:"flex",alignItems:"center",gap:"1rem"},children:[a.jsx("div",{style:{width:"50px",height:"50px",background:"linear-gradient(135deg, var(--kb-gold) 0%, #b8922d 100%)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:a.jsx(pr,{size:24,color:"var(--kb-navy)"})}),a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Earn More"}),a.jsx("div",{style:{fontSize:"0.85rem",opacity:.8},children:"Up to 25% bonus!"})]})]})]}),a.jsx("div",{style:{marginTop:"2rem",display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[{name:"Curious",visits:"1+",bonus:"10%"},{name:"Hooked",visits:"5+",bonus:"15%"},{name:"Line & Sinker",visits:"10+",bonus:"20%"},{name:"Village Patron",visits:"15+",bonus:"25%",featured:!0}].map((c,h)=>a.jsxs("div",{style:{padding:"0.5rem 1rem",background:c.featured?"linear-gradient(135deg, var(--kb-gold) 0%, #b8922d 100%)":"rgba(255,255,255,0.1)",borderRadius:"8px",fontSize:"0.85rem",color:c.featured?"var(--kb-navy)":"white",fontWeight:c.featured?"600":"400"},children:[c.name,": ",c.bonus]},h))})]})]}),a.jsxs(de.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:.4},viewport:{once:!0},style:{textAlign:"center",marginTop:"2.5rem"},children:[a.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1rem"},children:"Ready to start your Kinderhooker journey?"}),a.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[a.jsx(ue,{to:"/profile",className:"btn btn-primary",children:"View My Progress"}),a.jsx(ue,{to:"/businesses",className:"btn btn-secondary",children:"Find Businesses to Visit"})]})]})]})})}function C9(){return a.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[a.jsx(Dn,{}),a.jsx("section",{style:{background:"var(--kb-navy)",color:"var(--kb-white)",padding:"4rem 1rem",textAlign:"center"},children:a.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[a.jsx("h1",{style:{marginBottom:"1rem"},children:"How Kinderbucks Works"}),a.jsx("p",{style:{color:"var(--kb-gray-300)",fontSize:"1.1rem"},children:"A simple system designed to keep money local and reward community participation"})]})}),a.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:a.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem"},children:"What is Kinderbucks?"}),a.jsxs("div",{style:{color:"var(--kb-gray-700)",lineHeight:1.8},children:[a.jsxs("p",{style:{marginBottom:"1rem"},children:[a.jsx("strong",{children:"Kinderbucks"})," is a local currency program for the Village of Kinderhook, NY. It's real money  physical bills with QR codes for verification  that can only be spent at participating local businesses."]}),a.jsx("p",{style:{marginBottom:"1rem"},children:"When you exchange US dollars for Kinderbucks, you're making a commitment to spend locally. In return, you receive bonus value through our OK Membership program, turning $10 into $11, $12, or even $12.50 in local spending power."}),a.jsx("p",{children:"Every Kinderbuck spent stays in the village, circulating between businesses and residents, strengthening our local economy with each transaction."})]})]})}),a.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:a.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem",textAlign:"center"},children:"The Exchange Process"}),a.jsx("div",{style:{display:"grid",gap:"2rem",maxWidth:"700px",margin:"0 auto"},children:[{step:1,title:"Visit an Exchange Point",description:"Stop by any participating business or our central exchange location with US dollars."},{step:2,title:"Show Your Membership",description:"Scan your profile QR code or provide your phone number to apply your tier bonus."},{step:3,title:"Receive Your Kinderbucks",description:"Get physical Kinderbuck bills in $1, $5, $10, and $20 denominations with your bonus applied."},{step:4,title:"Spend Locally",description:"Use your Kinderbucks at any of our 19+ participating businesses."}].map((n,e)=>a.jsxs(de.div,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},transition:{delay:e*.1},viewport:{once:!0},style:{display:"flex",gap:"1.5rem",alignItems:"flex-start"},children:[a.jsx("div",{style:{width:"50px",height:"50px",background:"var(--kb-navy)",color:"var(--kb-gold)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"var(--font-display)",fontWeight:"700",fontSize:"1.2rem",flexShrink:0},children:n.step}),a.jsxs("div",{children:[a.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:n.title}),a.jsx("p",{style:{color:"var(--kb-gray-600)"},children:n.description})]})]},e))})]})}),a.jsx(I9,{}),a.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:a.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[a.jsx("div",{className:"badge badge-gold",style:{marginBottom:"1rem"},children:"OK Membership"}),a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem"},children:"The Kinderhooker Program"}),a.jsxs("div",{style:{color:"var(--kb-gray-700)",lineHeight:1.8},children:[a.jsxs("p",{style:{marginBottom:"1rem"},children:[a.jsx("strong",{children:"OK Membership"})," rewards customers who actively support local businesses. The more businesses you visit, the higher your tier  and the better your exchange rate."]}),a.jsxs("p",{style:{marginBottom:"1rem"},children:['Each participating business has a QR code. Scan it when you visit to record a "check-in." Your tier is based on how many ',a.jsx("em",{children:"unique"})," businesses you've visited, encouraging exploration of the entire village."]}),a.jsx("p",{children:`There's no cost to join. Simply start checking in at businesses, and you'll automatically become a "Kinderhooker" with access to bonus exchange rates.`})]}),a.jsxs("div",{style:{marginTop:"2rem",display:"flex",gap:"1rem",flexWrap:"wrap"},children:[a.jsx(ue,{to:"/benefits",className:"btn btn-primary",children:"View All Benefits"}),a.jsx(ue,{to:"/profile",className:"btn btn-secondary",children:"Check My Status"})]})]})}),a.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:a.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem"},children:"Frequently Asked Questions"}),[{q:"Is Kinderbucks real money?",a:"Kinderbucks are a local complementary currency. They have value within our participating business network but cannot be deposited in banks or used outside Kinderhook."},{q:"Can I convert Kinderbucks back to USD?",a:"Kinderbucks are designed to circulate locally. While businesses can redeem them, individual customers are encouraged to spend them at participating businesses."},{q:"What if a business closes?",a:"Kinderbucks remain valid at all other participating businesses. The program maintains reserves to ensure stability."},{q:"How do businesses benefit?",a:"Businesses receive customers committed to spending locally, gain exposure through our directory, and become part of a community-strengthening initiative."},{q:"Is there a fee to exchange?",a:"No fees. You receive full value plus your membership bonus when exchanging USD for Kinderbucks."}].map((n,e)=>a.jsxs("div",{style:{marginBottom:"1.5rem"},children:[a.jsx("h4",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:n.q}),a.jsx("p",{style:{color:"var(--kb-gray-600)"},children:n.a})]},e))]})}),a.jsxs("section",{style:{padding:"3rem 1rem",background:"var(--kb-navy)",color:"var(--kb-white)",textAlign:"center"},children:[a.jsx("h3",{style:{marginBottom:"1rem"},children:"Ready to get started?"}),a.jsx(ue,{to:"/exchange",className:"btn btn-gold",children:"Get Your Kinderbucks"})]}),a.jsx(Vn,{})]})}const ur={curious:{name:"Curious",threshold:1,bonus:.1,color:"#888888",bgColor:"#f0f0f0",emoji:""},hooked:{name:"Hooked",threshold:5,bonus:.15,color:"#2e7d32",bgColor:"#e8f5e9",emoji:""},lineAndSinker:{name:"Line & Sinker",threshold:10,bonus:.2,color:"#1565c0",bgColor:"#e3f2fd",emoji:""},patron:{name:"Village Patron",threshold:15,bonus:.25,color:"#c9a227",bgColor:"#fff8e1",emoji:""}};function iy(n){return n>=15?"patron":n>=10?"lineAndSinker":n>=5?"hooked":n>=1?"curious":null}function j9(n){const e=["curious","hooked","lineAndSinker","patron"],t=e.indexOf(n);return t<e.length-1?e[t+1]:null}function MT(n){const e=iy(n),t=j9(e);if(!t)return{progress:100,remaining:0,nextTier:null};const r=ur[t],s=e?ur[e].threshold:0,l=(n-s)/(r.threshold-s)*100;return{progress:Math.min(100,Math.max(0,l)),remaining:r.threshold-n,nextTier:r}}function A9(){const n=[{Icon:HD,title:"Bonus Exchange Rates",description:"Get up to 25% extra when converting USD to Kinderbucks. A $100 exchange becomes $125 in local spending power.",highlight:"Up to 25% bonus"},{Icon:St,title:"Exclusive Local Deals",description:"Participating businesses offer special discounts and promotions exclusively for Kinderhooker members.",highlight:"Member-only offers"},{Icon:pr,title:"Priority Access",description:"Higher-tier members get early access to limited events, seasonal specials, and new business openings.",highlight:"First in line"},{Icon:N2,title:"Seasonal Bonuses",description:"Extra rewards during holidays and special village events. Double check-in points, bonus exchanges, and more.",highlight:"Special events"},{Icon:u0,title:"Impact Tracking",description:"See exactly how your spending supports local businesses and contributes to the village economy.",highlight:"Track your impact"},{Icon:Dr,title:"Community Recognition",description:"Village Patrons are recognized in our annual report and invited to exclusive community appreciation events.",highlight:"Be celebrated"}];return a.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[a.jsx(Dn,{}),a.jsx("section",{style:{background:"linear-gradient(135deg, var(--kb-gold-dark) 0%, var(--kb-gold) 100%)",color:"var(--kb-navy)",padding:"4rem 1rem",textAlign:"center"},children:a.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[a.jsx("div",{className:"badge badge-navy",style:{marginBottom:"1rem"},children:"OK Membership"}),a.jsx("h1",{style:{marginBottom:"1rem"},children:"Member Benefits & Rewards"}),a.jsx("p",{style:{fontSize:"1.1rem",opacity:.9},children:"The more you support local, the more you earn. It pays to be a Kinderhooker."})]})}),a.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:a.jsxs("div",{style:{maxWidth:"1100px",margin:"0 auto"},children:[a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem",textAlign:"center"},children:"Membership Tiers"}),a.jsx("p",{style:{color:"var(--kb-gray-500)",textAlign:"center",marginBottom:"2rem"},children:"Visit more businesses to unlock better rewards"}),a.jsx("div",{style:{overflowX:"auto"},children:a.jsxs("table",{style:{minWidth:"700px"},children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{style:{width:"25%"},children:"Tier"}),a.jsx("th",{style:{width:"20%"},children:"Requirement"}),a.jsx("th",{style:{width:"20%"},children:"Exchange Bonus"}),a.jsx("th",{style:{width:"35%"},children:"Perks"})]})}),a.jsxs("tbody",{children:[a.jsxs("tr",{children:[a.jsx("td",{children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(on,{size:18,color:"#888"}),a.jsx("span",{style:{fontWeight:"600",color:"#888"},children:"Curious"})]})}),a.jsx("td",{children:"1+ businesses"}),a.jsx("td",{children:a.jsx("span",{style:{color:"#888",fontWeight:"600"},children:"10%"})}),a.jsx("td",{style:{fontSize:"0.9rem",color:"var(--kb-gray-600)"},children:"Basic exchange bonus, check-in tracking"})]}),a.jsxs("tr",{children:[a.jsx("td",{children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(pr,{size:18,color:"#2e7d32"}),a.jsx("span",{style:{fontWeight:"600",color:"#2e7d32"},children:"Hooked"})]})}),a.jsx("td",{children:"5+ businesses"}),a.jsx("td",{children:a.jsx("span",{style:{color:"#2e7d32",fontWeight:"600"},children:"15%"})}),a.jsx("td",{style:{fontSize:"0.9rem",color:"var(--kb-gray-600)"},children:"Seasonal bonus events, member deals"})]}),a.jsxs("tr",{children:[a.jsx("td",{children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(mr,{size:18,color:"#1565c0"}),a.jsx("span",{style:{fontWeight:"600",color:"#1565c0"},children:"Line & Sinker"})]})}),a.jsx("td",{children:"10+ businesses"}),a.jsx("td",{children:a.jsx("span",{style:{color:"#1565c0",fontWeight:"600"},children:"20%"})}),a.jsx("td",{style:{fontSize:"0.9rem",color:"var(--kb-gray-600)"},children:"Priority access, exclusive events"})]}),a.jsxs("tr",{style:{background:"rgba(201, 162, 39, 0.1)"},children:[a.jsx("td",{children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(Yn,{size:18,color:"#c9a227"}),a.jsx("span",{style:{fontWeight:"600",color:"#c9a227"},children:"Village Patron"})]})}),a.jsx("td",{children:"15+ businesses"}),a.jsx("td",{children:a.jsx("span",{style:{color:"#c9a227",fontWeight:"600"},children:"25%"})}),a.jsx("td",{style:{fontSize:"0.9rem",color:"var(--kb-gray-600)"},children:"All perks + community recognition + VIP events"})]})]})]})}),a.jsx("div",{style:{textAlign:"center",marginTop:"2rem"},children:a.jsx(ue,{to:"/profile",className:"btn btn-primary",children:"Check My Progress"})})]})}),a.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:a.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem",textAlign:"center"},children:"All Member Benefits"}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1.5rem"},children:n.map((e,t)=>a.jsx(de.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:t*.1},viewport:{once:!0},className:"card",children:a.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[a.jsx("div",{style:{width:"50px",height:"50px",background:"var(--kb-navy)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:a.jsx(e.Icon,{size:24,color:"var(--kb-gold)",strokeWidth:1.5})}),a.jsxs("div",{children:[a.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"0.25rem",fontSize:"1.1rem"},children:e.title}),a.jsx("span",{className:"badge badge-gold",style:{marginBottom:"0.5rem"},children:e.highlight}),a.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem",marginTop:"0.5rem"},children:e.description})]})]})},t))})]})}),a.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:a.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto",textAlign:"center"},children:[a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"See Your Savings"}),a.jsx("p",{style:{color:"var(--kb-gray-500)",marginBottom:"2rem"},children:"Example: Exchange $100 USD"}),a.jsx("div",{className:"card",style:{padding:"2rem"},children:a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[{tier:"Curious",bonus:10,color:"#888"},{tier:"Hooked",bonus:15,color:"#2e7d32"},{tier:"Line & Sinker",bonus:20,color:"#1565c0"},{tier:"Village Patron",bonus:25,color:"#c9a227"}].map((e,t)=>a.jsxs("div",{style:{padding:"1rem",borderRadius:"8px",background:`${e.color}10`,border:`1px solid ${e.color}30`},children:[a.jsx("div",{style:{fontSize:"0.85rem",color:e.color,fontWeight:"600"},children:e.tier}),a.jsxs("div",{style:{fontFamily:"var(--font-display)",fontSize:"1.8rem",fontWeight:"700",color:e.color},children:["$",100+e.bonus]}),a.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:"in Kinderbucks"})]},t))})}),a.jsx("div",{style:{marginTop:"2rem"},children:a.jsx(ue,{to:"/exchange",className:"btn btn-gold",style:{padding:"1rem 2rem"},children:"Start Exchanging"})})]})}),a.jsxs("section",{style:{padding:"3rem 1rem",background:"var(--kb-green)",color:"var(--kb-white)",textAlign:"center"},children:[a.jsx("h3",{style:{marginBottom:"1rem"},children:"Start earning rewards today"}),a.jsx("p",{style:{opacity:.9,marginBottom:"1.5rem"},children:"Visit a participating business and scan their QR code to begin"}),a.jsx(ue,{to:"/businesses",className:"btn btn-gold",children:"Find Businesses Near You"})]}),a.jsx(Vn,{})]})}const Ml="businesses";async function Bf(n){const e=rt(je,Ml,n),t=await Lr(e);return t.exists()?{code:t.id,...t.data()}:null}async function Xi(){const n=fr(Rt(je,Ml),qi("name"));return(await gn(n)).docs.map(t=>({code:t.id,...t.data()}))}async function xk(n,e,t,r={}){const s={code:n,name:e,category:t,isActive:!0,checkinCount:0,createdAt:nt()};r.address&&(s.address=r.address),r.placeId&&(s.placeId=r.placeId),r.phone&&(s.phone=r.phone),r.website&&(s.website=r.website),r.photoUrl&&(s.photoUrl=r.photoUrl),await Al(rt(je,Ml,n),s)}async function R9(n){await b2(rt(je,Ml,n))}async function P9(n){const e=rt(je,Ml,n);await Sn(e,{checkinCount:Go(1)})}async function N9(n,e){const t=rt(je,Ml,n);await Sn(t,{isActive:e})}async function M9(n){const e=await Bf(n);return e?{...e,kinderbucksBalance:e.kinderbucksBalance||0,lifetimeAccepted:e.lifetimeAccepted||0,lifetimeRedeemed:e.lifetimeRedeemed||0}:null}const Qp={food:{label:"Food & Drink",Icon:B2,color:"#e74c3c"},retail:{label:"Retail",Icon:f0,color:"#9b59b6"},services:{label:"Services",Icon:C2,color:"#3498db"},arts:{label:"Arts & Culture",Icon:D2,color:"#1abc9c"}};function D9(){const[n,e]=A.useState([]),[t,r]=A.useState(!0),[s,l]=A.useState("all");A.useEffect(()=>{async function d(){const m=await Xi();e(m.filter(g=>g.isActive)),r(!1)}d()},[]);const c=s==="all"?n:n.filter(d=>d.category===s),h={total:n.length,food:n.filter(d=>d.category==="food").length,retail:n.filter(d=>d.category==="retail").length};return a.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[a.jsx(Dn,{}),a.jsx("section",{style:{background:"var(--kb-navy)",color:"var(--kb-white)",padding:"4rem 1rem",textAlign:"center"},children:a.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[a.jsx("h1",{style:{marginBottom:"1rem"},children:"For Local Businesses"}),a.jsx("p",{style:{color:"var(--kb-gray-300)",fontSize:"1.1rem",marginBottom:"2rem"},children:"Join the Kinderbucks network and connect with customers committed to shopping local"}),a.jsx(ue,{to:"/admin/businesses",className:"btn btn-gold",children:"Register Your Business"})]})}),a.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:a.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem",textAlign:"center"},children:"Why Accept Kinderbucks?"}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"2rem"},children:[{Icon:Dr,title:"Committed Customers",description:"Kinderbucks holders have already decided to spend locally. They're not comparison shopping online."},{Icon:BV,title:"Money Stays Local",description:"Unlike credit cards that send fees elsewhere, Kinderbucks keep circulating in our village economy."},{Icon:SV,title:"Free Marketing",description:"Get listed in our business directory, featured on our homepage, and promoted to all members."},{Icon:y3,title:"Community Standing",description:"Show customers you're invested in Kinderhook's future. Participating businesses are community leaders."},{Icon:Bi,title:"Easy Redemption",description:"Redeem Kinderbucks for USD at any time through our simple merchant portal. No waiting."},{Icon:u0,title:"Customer Insights",description:"Access check-in data and understand your customers' behavior across the village."}].map((d,m)=>a.jsxs(de.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:m*.1},viewport:{once:!0},className:"card",style:{textAlign:"center"},children:[a.jsx("div",{style:{width:"60px",height:"60px",background:"var(--kb-navy)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:a.jsx(d.Icon,{size:28,color:"var(--kb-gold)",strokeWidth:1.5})}),a.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:d.title}),a.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem"},children:d.description})]},m))})]})}),a.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:a.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem",textAlign:"center"},children:"How It Works"}),a.jsx("div",{style:{display:"grid",gap:"1.5rem"},children:[{step:1,title:"Register",desc:"Sign up as a participating business. It's free to join."},{step:2,title:"Get Your QR Code",desc:"We'll provide a unique check-in QR code for your location."},{step:3,title:"Display It",desc:"Put the QR code at your counter or entrance for customers to scan."},{step:4,title:"Accept Kinderbucks",desc:"Take Kinderbucks as payment, just like cash. Same denominations."},{step:5,title:"Redeem Anytime",desc:"Exchange accumulated Kinderbucks back to USD when you need."}].map((d,m)=>a.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center",background:"var(--kb-white)",padding:"1.5rem",borderRadius:"12px",boxShadow:"var(--shadow-sm)"},children:[a.jsx("div",{style:{width:"40px",height:"40px",background:"var(--kb-gold)",color:"var(--kb-navy)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"700",flexShrink:0},children:d.step}),a.jsxs("div",{children:[a.jsx("h4",{style:{color:"var(--kb-navy)",marginBottom:"0.25rem"},children:d.title}),a.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem",margin:0},children:d.desc})]})]},m))})]})}),a.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:a.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem",textAlign:"center"},children:"Participating Businesses"}),a.jsxs("p",{style:{color:"var(--kb-gray-500)",textAlign:"center",marginBottom:"2rem"},children:[h.total," businesses currently accepting Kinderbucks"]}),a.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center",marginBottom:"2rem",flexWrap:"wrap"},children:[a.jsxs("button",{onClick:()=>l("all"),className:s==="all"?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem"},children:["All (",h.total,")"]}),Object.entries(Qp).map(([d,m])=>a.jsxs("button",{onClick:()=>l(d),className:s===d?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem",display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(m.Icon,{size:16})," ",m.label]},d))]}),t?a.jsx("p",{style:{textAlign:"center"},children:"Loading businesses..."}):c.length===0?a.jsxs("p",{style:{textAlign:"center",color:"var(--kb-gray-500)"},children:["No businesses found. ",a.jsx(ue,{to:"/admin/businesses",children:"Add some!"})]}):a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:"1rem"},children:c.map((d,m)=>{const g=Qp[d.category]||Qp.services;return a.jsxs(de.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:m*.03},className:"card",style:{padding:"1.25rem"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[a.jsx("div",{style:{width:"40px",height:"40px",background:`${g.color}15`,borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(g.Icon,{size:20,color:g.color,strokeWidth:1.5})}),a.jsxs("div",{children:[a.jsx("h4",{style:{color:"var(--kb-navy)",margin:0,fontSize:"1rem"},children:d.name}),a.jsx("span",{style:{fontSize:"0.8rem",color:g.color},children:g.label})]})]}),d.checkinCount>0&&a.jsxs("div",{style:{marginTop:"0.75rem",fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:[d.checkinCount," check-ins"]})]},d.code)})})]})}),a.jsxs("section",{style:{padding:"3rem 1rem",background:"var(--kb-gold)",color:"var(--kb-navy)",textAlign:"center"},children:[a.jsx("h3",{style:{marginBottom:"1rem"},children:"Ready to join the network?"}),a.jsx("p",{style:{opacity:.9,marginBottom:"1.5rem"},children:"Registration is free. Start accepting Kinderbucks today."}),a.jsx(ue,{to:"/admin/businesses",className:"btn btn-primary",children:"Register Your Business"})]}),a.jsx(Vn,{})]})}const DT="members";function nf(){return Qo.currentUser?Qo.currentUser.uid:rf()}function rf(){let n=localStorage.getItem("kinderhooker_visitor_id");return n||(n="anon_"+Math.random().toString(36).substring(2,15),localStorage.setItem("kinderhooker_visitor_id",n)),n}async function Ru(n){const e=rt(je,DT,n),t=await Lr(e);return t.exists()?{visitorId:t.id,...t.data()}:null}async function V9(n,e){const t=rt(je,DT,n),r=await Lr(t);if(r.exists()){const s=r.data(),l=s.businessesVisited||[],c=!l.includes(e),h=c?l.length+1:l.length,d=iy(h),m=d!==s.tier;return await Sn(t,{businessesVisited:v2(e),totalCheckins:Go(1),tier:d,lastCheckin:nt()}),{isNewBusiness:c,tierChanged:m,oldTier:s.tier,newTier:d,businessesVisited:c?[...l,e]:l,totalCheckins:(s.totalCheckins||0)+1}}else{const s=iy(1);return await Al(t,{visitorId:n,tier:s,businessesVisited:[e],totalCheckins:1,createdAt:nt(),lastCheckin:nt(),email:null}),{isNewBusiness:!0,tierChanged:!0,oldTier:null,newTier:s,businessesVisited:[e],totalCheckins:1}}}const L9={curious:on,hooked:pr,lineAndSinker:mr,patron:Yn};function O9(){const[n,e]=A.useState(null),[t,r]=A.useState(!0),[s,l]=A.useState(20),[c,h]=A.useState(!1),[d,m]=A.useState(!1);A.useEffect(()=>{async function N(){const L=rf(),M=await Ru(L);e(M),r(!1)}N()},[]);const g=(n==null?void 0:n.tier)||"curious",y=ur[g]||ur.curious,x=n?y.bonus:.1,T=s*x,k=s+T,S=async()=>{h(!0);try{await Rf(Rt(je,"exchanges"),{visitorId:rf(),usdAmount:s,bonusRate:x,bonusAmount:T,kinderbucksAmount:k,tier:g,status:"pending",createdAt:nt()}),m(!0)}catch(N){console.error("Exchange error:",N),alert("Error submitting exchange request")}h(!1)},C=[10,20,50,100];return a.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[a.jsx(Dn,{}),a.jsx("section",{style:{background:"linear-gradient(135deg, var(--kb-green) 0%, var(--kb-green-light) 100%)",color:"var(--kb-white)",padding:"3rem 1rem",textAlign:"center"},children:a.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto"},children:[a.jsx("h1",{style:{marginBottom:"0.5rem"},children:"Get Kinderbucks"}),a.jsx("p",{style:{opacity:.9},children:"Exchange USD for local currency with bonus value"})]})}),a.jsx("section",{style:{padding:"3rem 1rem",background:"var(--kb-cream)",flex:1},children:a.jsx("div",{style:{maxWidth:"500px",margin:"0 auto"},children:d?a.jsxs(de.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"card",style:{textAlign:"center",padding:"3rem 2rem"},children:[a.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:""}),a.jsx("h2",{style:{color:"var(--kb-green)",marginBottom:"1rem"},children:"Exchange Requested!"}),a.jsxs("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem"},children:["Your exchange request for ",a.jsxs("strong",{children:["$",s," USD"]})," "," ",a.jsxs("strong",{children:["$",k.toFixed(2)," Kinderbucks"]})," has been submitted."]}),a.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem",marginBottom:"2rem"},children:"Visit any exchange point to complete your transaction and receive your Kinderbucks."}),a.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[a.jsx("button",{onClick:()=>m(!1),className:"btn btn-primary",children:"Exchange More"}),a.jsx(ue,{to:"/account",className:"btn btn-secondary",children:"View Account"})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)",marginBottom:"0.25rem"},children:"Your Tier"}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(()=>{const N=L9[g]||on;return a.jsx(N,{size:28,color:y.color,strokeWidth:1.5})})(),a.jsx("span",{style:{fontWeight:"600",color:y.color,fontSize:"1.2rem"},children:y.name})]})]}),a.jsxs("div",{style:{textAlign:"right"},children:[a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)",marginBottom:"0.25rem"},children:"Bonus Rate"}),a.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:y.color},children:[Math.round(x*100),"%"]})]})]}),!n&&a.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"var(--kb-gray-50)",borderRadius:"8px",fontSize:"0.85rem",color:"var(--kb-gray-600)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(pV,{size:16,color:"var(--kb-gold)"})," ",a.jsx(ue,{to:"/profile",style:{color:"var(--kb-navy)"},children:"Visit businesses"})," to increase your tier and get better rates!"]})]}),a.jsxs("div",{className:"card",children:[a.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem"},children:"Exchange Calculator"}),a.jsxs("div",{style:{marginBottom:"1.5rem"},children:[a.jsx("label",{children:"Amount (USD)"}),a.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem"},children:C.map(N=>a.jsxs("button",{onClick:()=>l(N),className:s===N?"btn btn-primary":"btn btn-secondary",style:{flex:1,padding:"0.5rem"},children:["$",N]},N))}),a.jsx("input",{type:"number",value:s,onChange:N=>l(Math.max(1,Number(N.target.value))),min:"1",style:{width:"100%"}})]}),a.jsxs("div",{style:{background:"var(--kb-gray-50)",borderRadius:"12px",padding:"1.5rem",marginBottom:"1.5rem"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.75rem"},children:[a.jsx("span",{style:{color:"var(--kb-gray-600)"},children:"USD Amount"}),a.jsxs("span",{style:{fontWeight:"600"},children:["$",s.toFixed(2)]})]}),a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.75rem"},children:[a.jsxs("span",{style:{color:"var(--kb-gray-600)"},children:[y.name," Bonus (",Math.round(x*100),"%)"]}),a.jsxs("span",{style:{fontWeight:"600",color:"var(--kb-green)"},children:["+$",T.toFixed(2)]})]}),a.jsx("div",{className:"divider",style:{margin:"0.75rem 0"}}),a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsx("span",{style:{color:"var(--kb-navy)",fontWeight:"600"},children:"You Receive"}),a.jsxs("span",{style:{fontFamily:"var(--font-display)",fontSize:"1.8rem",fontWeight:"700",color:"var(--kb-gold-dark)"},children:["$",k.toFixed(2)]})]}),a.jsx("div",{style:{textAlign:"right",fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Kinderbucks"})]}),a.jsx("button",{onClick:S,disabled:c,className:"btn btn-gold",style:{width:"100%",padding:"1rem",fontSize:"1.1rem"},children:c?"Processing...":`Exchange $${s} for $${k.toFixed(2)} Kinderbucks`}),a.jsx("p",{style:{textAlign:"center",fontSize:"0.85rem",color:"var(--kb-gray-500)",marginTop:"1rem"},children:"Complete your exchange at any participating business or exchange point"})]}),a.jsxs("div",{className:"card",style:{marginTop:"1.5rem"},children:[a.jsx("h4",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Exchange Locations"}),a.jsxs("div",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem"},children:[a.jsxs("p",{style:{marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(gl,{size:16,color:"var(--kb-green)"})," ",a.jsx("strong",{children:"OK Pantry"})," - 2 Hudson Street"]}),a.jsxs("p",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(gl,{size:16,color:"var(--kb-green)"})," ",a.jsx("strong",{children:"Village Hall"})," - During events"]})]})]})]})})}),a.jsx(Vn,{})]})}const wk={curious:on,hooked:pr,lineAndSinker:mr,patron:Yn};function B9(){var N,L;const[n,e]=A.useState(null),[t,r]=A.useState([]),[s,l]=A.useState([]),[c,h]=A.useState(!0),[d,m]=A.useState("overview");if(A.useEffect(()=>{async function M(){const U=rf(),$=await Ru(U),G=await Xi();try{const I=fr(Rt(je,"exchanges"),di("visitorId","==",U),qi("createdAt","desc")),E=await gn(I);l(E.docs.map(R=>({id:R.id,...R.data()})))}catch(I){console.error("Error loading exchanges:",I)}e($),r(G),h(!1)}M()},[]),c)return a.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[a.jsx(Dn,{}),a.jsx("div",{className:"page page-center",style:{flex:1},children:a.jsx("div",{style:{fontSize:"2rem"},children:"Loading..."})}),a.jsx(Vn,{})]});const g=(n==null?void 0:n.tier)||null,y=g?ur[g]:null,x=((N=n==null?void 0:n.businessesVisited)==null?void 0:N.length)||0,T=MT(x),k=((L=n==null?void 0:n.businessesVisited)==null?void 0:L.map(M=>{const U=t.find($=>$.code===M);return U?U.name:M}))||[],S=t.filter(M=>{var U;return M.isActive&&!((U=n==null?void 0:n.businessesVisited)!=null&&U.includes(M.code))}),C=s.reduce((M,U)=>M+(U.kinderbucksAmount||0),0);return a.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[a.jsx(Dn,{}),a.jsx("section",{style:{background:"var(--kb-navy)",color:"var(--kb-white)",padding:"2rem 1rem"},children:a.jsx("div",{style:{maxWidth:"800px",margin:"0 auto"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[a.jsx("div",{style:{width:"80px",height:"80px",background:y?y.color:"var(--kb-gray-500)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:(()=>{const M=g&&wk[g]?wk[g]:on;return a.jsx(M,{size:40,color:"white",strokeWidth:1.5})})()}),a.jsxs("div",{style:{flex:1},children:[a.jsx("div",{style:{fontSize:"0.9rem",color:"var(--kb-gray-300)",marginBottom:"0.25rem"},children:"OK Membership"}),a.jsx("h1",{style:{fontSize:"1.5rem",marginBottom:"0.25rem"},children:y?y.name:"New Member"}),a.jsx("div",{style:{fontSize:"0.9rem",color:"var(--kb-gold)"},children:y?`${Math.round(y.bonus*100)}% Exchange Bonus`:"Start exploring to earn rewards"})]}),a.jsx(ue,{to:"/exchange",className:"btn btn-gold",children:"Get Kinderbucks"})]})})}),a.jsx("div",{style:{background:"var(--kb-white)",borderBottom:"1px solid var(--kb-gray-200)",position:"sticky",top:"70px",zIndex:50},children:a.jsx("div",{style:{maxWidth:"800px",margin:"0 auto",display:"flex",gap:"2rem",padding:"0 1rem"},children:["overview","progress","history"].map(M=>a.jsx("button",{onClick:()=>m(M),style:{background:"none",border:"none",padding:"1rem 0",fontSize:"0.95rem",fontWeight:d===M?"600":"400",color:d===M?"var(--kb-navy)":"var(--kb-gray-500)",borderBottom:d===M?"2px solid var(--kb-gold)":"2px solid transparent",cursor:"pointer",textTransform:"capitalize"},children:M},M))})}),a.jsx("section",{style:{padding:"2rem 1rem",background:"var(--kb-cream)",flex:1},children:a.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[d==="overview"&&a.jsxs(de.div,{initial:{opacity:0},animate:{opacity:1},children:[a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[a.jsxs("div",{className:"card",style:{textAlign:"center"},children:[a.jsx("div",{className:"stat-value",children:x}),a.jsx("div",{className:"stat-label",children:"Businesses Visited"})]}),a.jsxs("div",{className:"card",style:{textAlign:"center"},children:[a.jsx("div",{className:"stat-value",children:(n==null?void 0:n.totalCheckins)||0}),a.jsx("div",{className:"stat-label",children:"Total Check-ins"})]}),a.jsxs("div",{className:"card",style:{textAlign:"center"},children:[a.jsxs("div",{className:"stat-value",style:{color:"var(--kb-gold)"},children:["$",C.toFixed(0)]}),a.jsx("div",{className:"stat-label",children:"Kinderbucks Exchanged"})]})]}),a.jsxs("div",{className:"card",children:[a.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Quick Actions"}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"0.75rem"},children:[a.jsxs(ue,{to:"/exchange",className:"btn btn-gold",style:{textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[a.jsx(Bi,{size:18})," Exchange"]}),a.jsxs(ue,{to:"/businesses",className:"btn btn-secondary",style:{textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[a.jsx(St,{size:18})," Find Businesses"]}),a.jsxs(ue,{to:"/benefits",className:"btn btn-secondary",style:{textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[a.jsx(m0,{size:18})," View Benefits"]})]})]})]}),d==="progress"&&a.jsxs(de.div,{initial:{opacity:0},animate:{opacity:1},children:[y&&a.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[a.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Tier Progress"}),T.nextTier?a.jsxs(a.Fragment,{children:[a.jsxs("div",{style:{marginBottom:"0.5rem"},children:[a.jsx("span",{style:{color:y.color,fontWeight:"600"},children:y.name}),a.jsx("span",{style:{color:"var(--kb-gray-400)",margin:"0 0.5rem"},children:""}),a.jsx("span",{style:{color:T.nextTier.color,fontWeight:"600"},children:T.nextTier.name})]}),a.jsx("div",{className:"progress-bar",style:{height:"12px",marginBottom:"0.5rem"},children:a.jsx("div",{className:"progress-bar-fill",style:{width:`${T.progress}%`,background:y.color}})}),a.jsxs("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:[T.remaining," more business",T.remaining!==1?"es":""," to reach ",T.nextTier.name]})]}):a.jsxs("p",{style:{color:"var(--kb-gold)",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(Yn,{size:20})," Maximum tier reached! You're a Village Patron!"]})]}),a.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[a.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(Ni,{size:20,color:"var(--kb-green)"})," Businesses Visited (",k.length,")"]}),k.length>0?a.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:k.map((M,U)=>a.jsxs("span",{style:{background:"#d4edda",color:"var(--kb-green)",padding:"0.4rem 0.75rem",borderRadius:"100px",fontSize:"0.85rem",display:"inline-flex",alignItems:"center",gap:"0.25rem"},children:[a.jsx(Ni,{size:14})," ",M]},U))}):a.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"No businesses visited yet"})]}),S.length>0&&a.jsxs("div",{className:"card",children:[a.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(A2,{size:20,color:"var(--kb-navy)"})," Still to Explore (",S.length,")"]}),a.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:[S.slice(0,12).map(M=>a.jsx("span",{style:{background:"var(--kb-gray-100)",color:"var(--kb-gray-600)",padding:"0.4rem 0.75rem",borderRadius:"100px",fontSize:"0.85rem"},children:M.name},M.code)),S.length>12&&a.jsxs("span",{style:{color:"var(--kb-gray-500)",padding:"0.4rem"},children:["+",S.length-12," more"]})]})]})]}),d==="history"&&a.jsx(de.div,{initial:{opacity:0},animate:{opacity:1},children:a.jsxs("div",{className:"card",children:[a.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Exchange History"}),s.length>0?a.jsx("div",{children:s.map((M,U)=>{var $,G,I,E;return a.jsxs("div",{style:{padding:"1rem 0",borderBottom:U<s.length-1?"1px solid var(--kb-gray-100)":"none",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsxs("div",{children:[a.jsxs("div",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:["$",M.usdAmount,"  $",($=M.kinderbucksAmount)==null?void 0:$.toFixed(2)," KB"]}),a.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:[((E=(I=(G=M.createdAt)==null?void 0:G.toDate)==null?void 0:I.call(G))==null?void 0:E.toLocaleDateString())||"Pending","  ",Math.round(M.bonusRate*100),"% bonus"]})]}),a.jsx("span",{className:"badge",style:{background:M.status==="completed"?"#d4edda":"#fff3cd",color:M.status==="completed"?"var(--kb-green)":"#856404"},children:M.status})]},M.id)})}):a.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"var(--kb-gray-500)"},children:[a.jsx("p",{style:{marginBottom:"1rem"},children:"No exchanges yet"}),a.jsx(ue,{to:"/exchange",className:"btn btn-gold",children:"Make Your First Exchange"})]})]})})]})}),a.jsx(Vn,{})]})}const bk={curious:on,hooked:pr,lineAndSinker:mr,patron:Yn},Pc={curious:"#888888",hooked:"#2e7d32",lineAndSinker:"#1565c0",patron:"#c9a227"};function z9(){var S,C;const{user:n,profile:e,isAuthenticated:t}=Or(),[r,s]=A.useState(null),[l,c]=A.useState([]),[h,d]=A.useState(!0);A.useEffect(()=>{async function N(){const L=nf(),M=await Ru(L),U=await Xi();s(M),c(U.filter($=>$.isActive)),d(!1)}N()},[n]);const m=(r==null?void 0:r.tier)||"curious",g=ur[m],y=((S=r==null?void 0:r.businessesVisited)==null?void 0:S.length)||0,x=MT(y),T=((C=r==null?void 0:r.businessesVisited)==null?void 0:C.map(N=>{const L=l.find(M=>M.code===N);return L?L.name:N}))||[],k=l.filter(N=>{var L;return!((L=r==null?void 0:r.businessesVisited)!=null&&L.includes(N.code))});return a.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[a.jsx(Dn,{}),a.jsx("main",{style:{flex:1,background:"var(--kb-cream)",padding:"2rem 1rem"},children:a.jsx("div",{style:{maxWidth:"600px",margin:"0 auto"},children:h?a.jsx("div",{style:{textAlign:"center",padding:"4rem 0"},children:a.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading your profile..."})}):r?a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[t&&e&&a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1.5rem",padding:"1rem",background:"white",borderRadius:"12px"},children:[a.jsx("div",{style:{width:"48px",height:"48px",background:"var(--kb-gray-100)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(rl,{size:24,color:"var(--kb-gray-500)"})}),a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:e.displayName||n.email}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:n.email})]})]}),a.jsxs(de.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.1},style:{background:`linear-gradient(135deg, ${Pc[m]} 0%, ${Pc[m]}dd 100%)`,borderRadius:"20px",padding:"2rem",color:"white",textAlign:"center",marginBottom:"1.5rem",boxShadow:"0 4px 20px rgba(0,0,0,0.2)"},children:[(()=>{const N=bk[m]||on;return a.jsx(N,{size:48,color:"white",strokeWidth:1.5,style:{marginBottom:"0.5rem"}})})(),a.jsx("div",{style:{fontSize:"1.8rem",fontWeight:"bold",marginBottom:"0.25rem"},children:g.name}),a.jsxs("div",{style:{opacity:.9,fontSize:"1rem"},children:[Math.round(g.bonus*100),"% Kinderbuck Exchange Bonus"]})]}),a.jsxs(ue,{to:"/card",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",width:"100%",padding:"1.25rem",background:"linear-gradient(135deg, var(--kb-gold) 0%, #d4af37 100%)",color:"var(--kb-navy)",borderRadius:"16px",fontSize:"1.25rem",fontWeight:"700",textDecoration:"none",marginBottom:"1.5rem",boxShadow:"0 4px 12px rgba(201, 162, 39, 0.3)"},children:[a.jsx(Ag,{size:28}),"SHOW MY OK CARD"]}),a.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[a.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",textAlign:"center"},children:[y," Business",y!==1?"es":""," Visited"]}),x.nextTier?a.jsxs(a.Fragment,{children:[a.jsx("div",{style:{background:"var(--kb-gray-100)",borderRadius:"10px",height:"28px",overflow:"hidden",marginBottom:"0.75rem"},children:a.jsxs(de.div,{initial:{width:0},animate:{width:`${x.progress}%`},transition:{delay:.3,duration:.8},style:{background:`linear-gradient(90deg, ${Pc[m]}, ${x.nextTier.color})`,height:"100%",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"0.85rem",fontWeight:"bold"},children:[y,"/",x.nextTier.threshold]})}),a.jsxs("p",{style:{color:"var(--kb-gray-600)",textAlign:"center"},children:[a.jsx("strong",{children:x.remaining})," more to reach"," ",a.jsx("strong",{style:{color:x.nextTier.color},children:x.nextTier.name})]})]}):a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",color:"var(--kb-gold-dark)",fontWeight:"600"},children:[a.jsx(Yn,{size:20})," Maximum tier reached! You're a true Village Patron!"]})]}),T.length>0&&a.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[a.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(Ni,{size:20,color:"var(--kb-green)"})," Visited"]}),a.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:T.map((N,L)=>a.jsxs("span",{style:{padding:"0.4rem 0.8rem",background:"#e8f5e9",borderRadius:"6px",color:"#2e7d32",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:[a.jsx(Ni,{size:14})," ",N]},L))})]}),k.length>0&&a.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[a.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(A2,{size:20})," Still to Explore (",k.length,")"]}),a.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:[k.slice(0,10).map(N=>a.jsx("span",{style:{padding:"0.4rem 0.8rem",background:"var(--kb-gray-100)",borderRadius:"6px",color:"var(--kb-gray-600)",fontSize:"0.9rem"},children:N.name},N.code)),k.length>10&&a.jsxs("span",{style:{padding:"0.4rem 0.8rem",color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:["+",k.length-10," more"]})]}),a.jsxs(ue,{to:"/businesses",style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",marginTop:"1rem",color:"var(--kb-navy)",fontWeight:"500",fontSize:"0.9rem"},children:["View all businesses ",a.jsx(jg,{size:16})]})]}),a.jsxs("div",{style:{textAlign:"center",color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:["Total check-ins: ",r.totalCheckins||0]}),!t&&a.jsxs("div",{style:{marginTop:"2rem",padding:"1rem",background:"rgba(201, 162, 39, 0.1)",borderRadius:"12px",textAlign:"center"},children:[a.jsx("p",{style:{color:"var(--kb-gray-700)",marginBottom:"0.75rem"},children:"Sign in to save your progress across devices"}),a.jsxs(ue,{to:"/login",className:"btn btn-gold",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(pl,{size:18})," Sign In"]})]})]}):a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[a.jsxs("div",{className:"card",style:{padding:"2rem",textAlign:"center",marginBottom:"2rem"},children:[a.jsx("div",{style:{width:"80px",height:"80px",background:"linear-gradient(135deg, var(--kb-navy) 0%, var(--kb-navy-light) 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.5rem"},children:a.jsx(m0,{size:36,color:"var(--kb-gold)"})}),a.jsx("h1",{style:{color:"var(--kb-navy)",marginBottom:"0.75rem"},children:"Welcome to Kinderbucks!"}),a.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem",fontSize:"1.05rem"},children:"You haven't checked in anywhere yet. Visit a local business and scan their QR code to start building your Kinderhooker status!"}),!t&&a.jsxs("div",{style:{background:"rgba(201, 162, 39, 0.1)",borderRadius:"12px",padding:"1rem",marginBottom:"1.5rem"},children:[a.jsx("p",{style:{color:"var(--kb-gray-700)",fontSize:"0.9rem",marginBottom:"0.75rem"},children:"Sign in to save your progress across devices"}),a.jsxs(ue,{to:"/login",className:"btn btn-gold",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(pl,{size:18})," Sign In or Create Account"]})]}),a.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap",justifyContent:"center"},children:[a.jsxs(ue,{to:"/businesses",className:"btn btn-primary",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(gl,{size:18})," Find Businesses"]}),a.jsxs(ue,{to:"/card",className:"btn btn-gold",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(Ag,{size:18})," View My Card"]})]})]}),a.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[a.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",textAlign:"center"},children:"How to Get Started"}),a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[{step:1,text:"Visit any participating Kinderhook business",icon:St},{step:2,text:"Scan their check-in QR code with your phone",icon:on},{step:3,text:"Build your tier to unlock better exchange rates",icon:qs}].map(N=>a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[a.jsx("div",{style:{width:"44px",height:"44px",background:"var(--kb-navy)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:a.jsx(N.icon,{size:20,color:"var(--kb-gold)"})}),a.jsx("div",{style:{color:"var(--kb-gray-700)"},children:N.text})]},N.step))})]}),a.jsxs("div",{style:{marginTop:"2rem"},children:[a.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",textAlign:"center"},children:"Tier Rewards"}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.75rem"},children:Object.entries(ur).map(([N,L])=>{const M=bk[N];return a.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"1rem",textAlign:"center",border:"1px solid var(--kb-gray-200)"},children:[a.jsx(M,{size:24,color:Pc[N],style:{marginBottom:"0.5rem"}}),a.jsx("div",{style:{fontWeight:"600",color:Pc[N],marginBottom:"0.25rem"},children:L.name}),a.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:[Math.round(L.bonus*100),"% bonus"]})]},N)})})]})]})})}),a.jsx(Vn,{})]})}function F9(){var M,U;const[n,e]=A.useState("login"),[t,r]=A.useState(""),[s,l]=A.useState(""),[c,h]=A.useState(""),[d,m]=A.useState(""),[g,y]=A.useState(!1),x=Ys(),T=gr(),{isAuthenticated:k}=Or(),N=new URLSearchParams(T.search).get("redirect")||((U=(M=T.state)==null?void 0:M.from)==null?void 0:U.pathname)||"/card",L=async $=>{$.preventDefault(),m(""),y(!0);try{if(n==="signup"){if(!c.trim()){m("Please enter your name"),y(!1);return}await nD(t,s,c)}else await rD(t,s);x(N,{replace:!0})}catch(G){console.error("Auth error:",G),G.code==="auth/email-already-in-use"?m("An account with this email already exists"):G.code==="auth/weak-password"?m("Password should be at least 6 characters"):G.code==="auth/invalid-email"?m("Please enter a valid email address"):G.code==="auth/user-not-found"||G.code==="auth/wrong-password"||G.code==="auth/invalid-credential"?m("Invalid email or password"):m("Something went wrong. Please try again.")}y(!1)};return a.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[a.jsx(Dn,{}),a.jsx("section",{style:{flex:1,background:"linear-gradient(180deg, var(--kb-cream) 0%, var(--kb-white) 100%)",padding:"3rem 1rem",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{width:"100%",maxWidth:"420px"},children:[a.jsxs("div",{className:"card",style:{padding:"2rem"},children:[a.jsxs("div",{style:{display:"flex",marginBottom:"2rem",background:"var(--kb-gray-100)",borderRadius:"10px",padding:"4px"},children:[a.jsxs("button",{onClick:()=>{e("login"),m("")},style:{flex:1,padding:"0.75rem",border:"none",borderRadius:"8px",background:n==="login"?"white":"transparent",color:n==="login"?"var(--kb-navy)":"var(--kb-gray-500)",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",boxShadow:n==="login"?"0 1px 3px rgba(0,0,0,0.1)":"none",transition:"all 0.2s"},children:[a.jsx(pl,{size:18})," Sign In"]}),a.jsxs("button",{onClick:()=>{e("signup"),m("")},style:{flex:1,padding:"0.75rem",border:"none",borderRadius:"8px",background:n==="signup"?"white":"transparent",color:n==="signup"?"var(--kb-navy)":"var(--kb-gray-500)",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",boxShadow:n==="signup"?"0 1px 3px rgba(0,0,0,0.1)":"none",transition:"all 0.2s"},children:[a.jsx(qh,{size:18})," Sign Up"]})]}),a.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:n==="login"?"Welcome Back":"Join Kinderbucks"}),a.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.95rem"},children:n==="login"?"Sign in to access your account":"Create an account to track your Kinderhooker status"})]}),d&&a.jsxs(de.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},style:{background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",padding:"0.75rem 1rem",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem",color:"#dc2626",fontSize:"0.9rem"},children:[a.jsx(zs,{size:18}),d]}),a.jsxs("form",{onSubmit:L,children:[n==="signup"&&a.jsxs("div",{style:{marginBottom:"1rem"},children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Your Name"}),a.jsxs("div",{style:{position:"relative"},children:[a.jsx(rl,{size:18,color:"var(--kb-gray-400)",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)"}}),a.jsx("input",{type:"text",value:c,onChange:$=>h($.target.value),placeholder:"Jane Smith",style:{width:"100%",paddingLeft:"40px"},required:n==="signup"})]})]}),a.jsxs("div",{style:{marginBottom:"1rem"},children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Email"}),a.jsxs("div",{style:{position:"relative"},children:[a.jsx(M2,{size:18,color:"var(--kb-gray-400)",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)"}}),a.jsx("input",{type:"email",value:t,onChange:$=>r($.target.value),placeholder:"you@example.com",style:{width:"100%",paddingLeft:"40px"},required:!0})]})]}),a.jsxs("div",{style:{marginBottom:"1.5rem"},children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Password"}),a.jsxs("div",{style:{position:"relative"},children:[a.jsx(vV,{size:18,color:"var(--kb-gray-400)",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)"}}),a.jsx("input",{type:"password",value:s,onChange:$=>l($.target.value),placeholder:"",style:{width:"100%",paddingLeft:"40px"},required:!0,minLength:6})]}),n==="signup"&&a.jsx("p",{style:{marginTop:"0.5rem",fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:"At least 6 characters"})]}),a.jsx("button",{type:"submit",className:"btn btn-gold",disabled:g,style:{width:"100%",padding:"0.875rem",fontSize:"1rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:g?a.jsxs(a.Fragment,{children:[a.jsx(h0,{size:20,className:"animate-spin",style:{animation:"spin 1s linear infinite"}}),n==="login"?"Signing in...":"Creating account..."]}):a.jsxs(a.Fragment,{children:[n==="login"?a.jsx(pl,{size:20}):a.jsx(qh,{size:20}),n==="login"?"Sign In":"Create Account"]})})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",margin:"1.5rem 0",gap:"1rem"},children:[a.jsx("div",{style:{flex:1,height:"1px",background:"var(--kb-gray-200)"}}),a.jsx("span",{style:{color:"var(--kb-gray-400)",fontSize:"0.85rem"},children:"or"}),a.jsx("div",{style:{flex:1,height:"1px",background:"var(--kb-gray-200)"}})]}),a.jsxs("button",{type:"button",onClick:async()=>{m(""),y(!0);try{await iD(),x(N,{replace:!0})}catch($){console.error("Google sign-in error:",$),$.code==="auth/popup-closed-by-user"?m("Sign-in cancelled"):m("Could not sign in with Google. Please try again.")}y(!1)},disabled:g,style:{width:"100%",padding:"0.75rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",background:"white",border:"1px solid var(--kb-gray-300)",borderRadius:"8px",cursor:"pointer",fontSize:"0.95rem",fontWeight:"500",color:"var(--kb-gray-700)",transition:"all 0.2s"},children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",children:[a.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),a.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),a.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),a.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),a.jsx("div",{style:{marginTop:"1rem"},children:a.jsx(ue,{to:"/profile",style:{display:"block",textAlign:"center",color:"var(--kb-gray-500)",fontSize:"0.85rem",textDecoration:"none"},children:"Continue as guest (limited features)"})})]}),a.jsx("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"rgba(201, 162, 39, 0.1)",borderRadius:"12px",textAlign:"center"},children:a.jsx("p",{style:{color:"var(--kb-gray-700)",fontSize:"0.9rem",margin:0},children:"Create an account to sync your Kinderhooker status across devices and never lose your tier progress!"})})]})}),a.jsx(Vn,{}),a.jsx("style",{children:`
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
      `})]})}const U9={curious:on,hooked:pr,lineAndSinker:mr,patron:Yn},W9={curious:{primary:"#6b7280",secondary:"#9ca3af",bg:"#f3f4f6"},hooked:{primary:"#16a34a",secondary:"#22c55e",bg:"#dcfce7"},lineAndSinker:{primary:"#2563eb",secondary:"#3b82f6",bg:"#dbeafe"},patron:{primary:"#ca8a04",secondary:"#eab308",bg:"#fef3c7"}};function $9(){var S;const{user:n,profile:e,isAuthenticated:t}=Or(),[r,s]=A.useState(null),[l,c]=A.useState(!0);A.useEffect(()=>{async function C(){const N=nf(),L=await Ru(N);s(L),c(!1)}C()},[n]);const h=(r==null?void 0:r.tier)||"curious",d=ur[h],m=W9[h],g=U9[h],y=((S=r==null?void 0:r.businessesVisited)==null?void 0:S.length)||0,x=Math.round(d.bonus*100),T=nf(),k=T?`OK-${T.substring(0,6).toUpperCase()}`:"OK-GUEST";return l?a.jsx("div",{style:{minHeight:"100vh",background:"var(--kb-navy)",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx("div",{style:{color:"white",fontSize:"1.5rem"},children:"Loading..."})}):a.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(180deg, var(--kb-navy) 0%, #1a3a5c 100%)",padding:"1rem",display:"flex",flexDirection:"column"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[a.jsxs(ue,{to:"/map",style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",color:"white",opacity:.8,textDecoration:"none",fontSize:"1rem"},children:[a.jsx(ND,{size:20})," Village Map"]}),a.jsx(ue,{to:"/profile",style:{color:"white",opacity:.8,textDecoration:"none",fontSize:"1rem"},children:"My Profile"})]}),a.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsxs(de.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},style:{width:"100%",maxWidth:"380px"},children:[a.jsxs("div",{style:{background:"white",borderRadius:"20px",overflow:"hidden",boxShadow:"0 20px 60px rgba(0,0,0,0.3)",border:"3px solid var(--kb-gold)"},children:[a.jsxs("div",{style:{background:"var(--kb-navy)",padding:"1.25rem 1.5rem",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[a.jsxs("div",{children:[a.jsx("div",{style:{color:"var(--kb-gold)",fontFamily:"var(--font-display)",fontWeight:"700",fontSize:"1.5rem",letterSpacing:"0.02em"},children:"KINDERBUCKS"}),a.jsx("div",{style:{color:"rgba(255,255,255,0.7)",fontSize:"0.8rem",marginTop:"0.1rem"},children:"OK MEMBER CARD"})]}),a.jsx("div",{style:{width:"50px",height:"50px",background:"var(--kb-gold)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--kb-navy)",fontFamily:"var(--font-display)",fontWeight:"700",fontSize:"1.75rem"},children:"K"})]}),a.jsxs("div",{style:{padding:"1.5rem"},children:[a.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"600",color:"var(--kb-navy)",marginBottom:"0.25rem"},children:t&&(e!=null&&e.displayName)?e.displayName:"OK Member"}),a.jsx("div",{style:{fontFamily:"monospace",fontSize:"1.1rem",color:"var(--kb-gray-500)",marginBottom:"1.5rem"},children:k}),a.jsxs("div",{style:{background:`linear-gradient(135deg, ${m.primary} 0%, ${m.secondary} 100%)`,borderRadius:"16px",padding:"1.5rem",textAlign:"center",color:"white",marginBottom:"1.5rem"},children:[a.jsx(g,{size:40,strokeWidth:1.5,style:{marginBottom:"0.5rem"}}),a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",textTransform:"uppercase",marginBottom:"0.25rem"},children:d.name}),a.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"800",lineHeight:1},children:[x,"%"]}),a.jsx("div",{style:{fontSize:"1rem",opacity:.9,marginTop:"0.25rem"},children:"Exchange Bonus"})]}),a.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"2rem",padding:"1rem 0",borderTop:"1px solid var(--kb-gray-200)",borderBottom:"1px solid var(--kb-gray-200)",marginBottom:"1.5rem"},children:[a.jsxs("div",{style:{textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:y}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Businesses"})]}),a.jsxs("div",{style:{textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:(r==null?void 0:r.totalCheckins)||0}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Check-ins"})]})]}),a.jsxs("div",{style:{background:"var(--kb-cream)",borderRadius:"12px",padding:"1rem",textAlign:"center"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"0.5rem",color:"var(--kb-navy)",fontWeight:"600"},children:[a.jsx(Nr,{size:20}),"How to use"]}),a.jsxs("p",{style:{fontSize:"0.95rem",color:"var(--kb-gray-600)",margin:0,lineHeight:1.5},children:["Scan the business QR code",a.jsx("br",{}),"to check in and get your discount code"]})]})]}),a.jsx("div",{style:{background:"var(--kb-cream)",padding:"0.75rem 1.5rem",textAlign:"center",borderTop:"1px solid var(--kb-gray-200)"},children:a.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:"Village of Kinderhook  Est. 2026"})})]}),a.jsxs(ue,{to:"/businesses",className:"btn btn-gold",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",width:"100%",marginTop:"1.5rem",padding:"1rem",fontSize:"1.1rem"},children:[a.jsx(Nr,{size:22}),"Find a Business to Check In"]})]})})]})}const Pu="kinderbucks",H9="scans";async function VT(n){const e=rt(je,Pu,n),t=await Lr(e);return t.exists()?{serial:t.id,...t.data()}:null}async function LT(){const n=fr(Rt(je,Pu),qi("serial"));return(await gn(n)).docs.map(t=>({serial:t.id,...t.data()}))}async function K9(n,e){const t=n.map(r=>Al(rt(je,Pu,r),{serial:r,denomination:e,status:"draft",scanCount:0,createdAt:nt()}));await Promise.all(t)}async function q9(n,e,t=null){const r=rt(je,Pu,n),s={status:e,issuedAt:nt(),...t&&{issuedTo:t}};await Sn(r,s)}async function G9(n){const e=rt(je,Pu,n);await Sn(e,{scanCount:Go(1),lastScanned:nt(),status:"active"}),await Rf(Rt(je,H9),{serial:n,scannedAt:nt(),userAgent:navigator.userAgent||null})}async function Q9(n){const e=await VT(n);return e?e.status!=="active"?{valid:!1,error:`Kinderbuck status is "${e.status}" - must be "active"`}:e.currentHolder&&e.holderType==="business"?{valid:!1,error:"Kinderbuck is already held by a business"}:{valid:!0,kb:e}:{valid:!1,error:"Kinderbuck not found"}}function OT(){const[n,e]=A.useState([]);return A.useEffect(()=>{const t=["#2d5a27","#c9a227","#4a7c43","#d4af37","#5c4033"],r=Array.from({length:50},(s,l)=>({id:l,x:Math.random()*100,color:t[Math.floor(Math.random()*t.length)],delay:Math.random()*.5,duration:2+Math.random()*2,size:8+Math.random()*8}));e(r)},[]),a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,pointerEvents:"none",overflow:"hidden",zIndex:100},children:n.map(t=>a.jsx(de.div,{initial:{y:-20,x:`${t.x}vw`,opacity:1,rotate:0},animate:{y:"110vh",rotate:360*(Math.random()>.5?1:-1),opacity:[1,1,0]},transition:{duration:t.duration,delay:t.delay,ease:"linear"},style:{position:"absolute",width:t.size,height:t.size,background:t.color,borderRadius:Math.random()>.5?"50%":"2px"}},t.id))})}const kk={1:{bg:"#d4edda",text:"#155724"},5:{bg:"#cce5ff",text:"#004085"},10:{bg:"#e2d5e7",text:"#4a235a"},20:{bg:"#fff3cd",text:"#856404"}};function Y9({kinderbuck:n}){const e=kk[n.denomination]||kk[5];return a.jsxs(de.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",duration:.5},className:"card",style:{textAlign:"center",maxWidth:"400px",background:e.bg},children:[a.jsxs(de.div,{initial:{y:-20},animate:{y:0},transition:{delay:.2},children:[a.jsxs("h1",{style:{color:e.text,fontSize:"3rem",marginBottom:"0.5rem"},children:["$",n.denomination]}),a.jsx("p",{style:{fontFamily:"monospace",fontSize:"1.5rem",color:e.text},children:n.serial})]}),a.jsx(de.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},style:{marginTop:"1.5rem"},children:a.jsx("div",{style:{display:"inline-block",padding:"0.5rem 1rem",background:"rgba(255,255,255,0.7)",borderRadius:"20px",color:"var(--kb-green)",fontWeight:"bold"},children:"VERIFIED AUTHENTIC"})}),a.jsxs(de.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},style:{marginTop:"1.5rem",fontSize:"0.9rem",opacity:.8},children:[a.jsxs("p",{children:["Status: ",a.jsx("strong",{children:n.status})]}),n.issuedAt&&a.jsxs("p",{children:["Issued: ",new Date(n.issuedAt.seconds*1e3).toLocaleDateString()]}),a.jsxs("p",{children:["Scans: ",n.scanCount||1]})]}),a.jsx(de.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.8,type:"spring"},style:{marginTop:"1.5rem"},children:a.jsx("iframe",{src:"https://giphy.com/embed/B1txHfofr9y08bDB8b",width:"200",height:"200",frameBorder:"0",style:{borderRadius:"12px",pointerEvents:"none"},allowFullScreen:!0})})]})}function X9(){const{serial:n}=cy(),[e,t]=A.useState(null),[r,s]=A.useState(!0),[l,c]=A.useState(null);return A.useEffect(()=>{async function h(){try{const d=await VT(n);d?(t(d),await G9(n)):c("not_found")}catch(d){console.error("Verification error:",d),c("error")}finally{s(!1)}}h()},[n]),r?a.jsxs("div",{className:"page page-center",children:[a.jsx(de.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},style:{fontSize:"3rem"},children:"$"}),a.jsxs("p",{style:{marginTop:"1rem"},children:["Verifying ",n,"..."]})]}):l==="not_found"?a.jsxs("div",{className:"page page-center",children:[a.jsx("h1",{style:{color:"#c0392b"},children:"Not Found"}),a.jsxs("p",{children:["Serial ",a.jsx("strong",{children:n})," is not a valid Kinderbuck."]})]}):l?a.jsxs("div",{className:"page page-center",children:[a.jsx("h1",{style:{color:"#c0392b"},children:"Error"}),a.jsx("p",{children:"Something went wrong verifying this Kinderbuck."})]}):a.jsxs("div",{className:"page page-center",children:[a.jsx(OT,{}),a.jsx(Y9,{kinderbuck:e})]})}const zf="checkins",J9=3600*1e3;async function Z9(n,e){var t;try{const r=new Date(Date.now()-J9),s=fr(Rt(je,zf),di("visitorId","==",n),di("businessCode","==",e)),l=await gn(s);if(l.empty)return!1;for(const c of l.docs)if((((t=c.data().timestamp)==null?void 0:t.toDate())||new Date(0))>r)return!0;return!1}catch(r){return console.error("hasRecentCheckin error (allowing checkin):",r),!1}}async function eB(n,e,t){await Rf(Rt(je,zf),{visitorId:n,businessCode:e,timestamp:nt(),kinderbucksMatched:!1,boostApplied:0,memberTier:t||"curious"})}async function BT(n){try{const e=fr(Rt(je,zf),di("businessCode","==",n));return(await gn(e)).docs.map(s=>({id:s.id,...s.data()})).sort((s,l)=>{var d,m,g,y;const c=((m=(d=s.timestamp)==null?void 0:d.toDate)==null?void 0:m.call(d))||new Date(0);return(((y=(g=l.timestamp)==null?void 0:g.toDate)==null?void 0:y.call(g))||new Date(0))-c}).slice(0,100)}catch(e){return console.error("getCheckinsByBusiness error:",e),[]}}async function tB(){try{return(await gn(Rt(je,zf))).docs.map(e=>({id:e.id,...e.data()}))}catch(n){return console.error("getAllCheckins error:",n),[]}}const nB={curious:on,hooked:pr,lineAndSinker:mr,patron:Yn},rB={curious:"#6b7280",hooked:"#16a34a",lineAndSinker:"#2563eb",patron:"#ca8a04"};function iB(n,e){const t=new Date,r=t.getHours().toString().padStart(2,"0")+t.getMinutes().toString().padStart(2,"0"),s=e.substring(0,4).toUpperCase();return`${n.substring(0,3).toUpperCase()}-${s}-${r}`}function sB(){const{businessCode:n}=cy(),{isAuthenticated:e}=Or(),[t,r]=A.useState(null),[s,l]=A.useState(!0),[c,h]=A.useState(null),[d,m]=A.useState(null),[g,y]=A.useState(!1),[x,T]=A.useState(!1),[k,S]=A.useState("");if(A.useEffect(()=>{async function G(){try{const I=await Bf(n);if(!I){h("not_found"),l(!1);return}if(!I.isActive){h("inactive"),l(!1);return}if(r(I),!e){l(!1);return}const E=nf();if(S(iB(n,E)),await Z9(E,n)){y(!0);const B=await Ru(E);B&&m({tierChanged:!1,newTier:B.tier,businessesVisited:B.businessesVisited||[],totalCheckins:B.totalCheckins||0,isNewBusiness:!1}),l(!1);return}const V=await V9(E,n);await eB(E,n,V.newTier),await P9(n),m(V),V.tierChanged&&V.newTier&&T(!0),l(!1)}catch(I){console.error("Check-in error:",I),h("error"),l(!1)}}G()},[n,e]),s)return a.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"linear-gradient(180deg, var(--kb-navy) 0%, #1a3a5c 100%)",padding:"2rem"},children:[a.jsx(de.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:a.jsx(h0,{size:64,color:"var(--kb-gold)"})}),a.jsx("p",{style:{marginTop:"1.5rem",color:"white",fontSize:"1.25rem"},children:"Checking in..."})]});if(c==="not_found")return a.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#fef2f2",padding:"2rem",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:"?"}),a.jsx("h1",{style:{color:"#dc2626",fontSize:"1.75rem",marginBottom:"0.75rem"},children:"Business Not Found"}),a.jsx("p",{style:{color:"#7f1d1d",fontSize:"1.1rem",marginBottom:"2rem"},children:"This QR code doesn't match any participating business."}),a.jsx(ue,{to:"/",className:"btn btn-primary",style:{fontSize:"1.1rem",padding:"1rem 2rem"},children:"Go Home"})]});if(c==="inactive")return a.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#fffbeb",padding:"2rem",textAlign:"center"},children:[a.jsx("h1",{style:{color:"#d97706",fontSize:"1.75rem",marginBottom:"0.75rem"},children:"Business Not Active"}),a.jsx("p",{style:{color:"#92400e",fontSize:"1.1rem",marginBottom:"2rem"},children:"This business is not currently participating."}),a.jsx(ue,{to:"/",className:"btn btn-primary",style:{fontSize:"1.1rem",padding:"1rem 2rem"},children:"Go Home"})]});if(c)return a.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#fef2f2",padding:"2rem",textAlign:"center"},children:[a.jsx("h1",{style:{color:"#dc2626",fontSize:"1.75rem",marginBottom:"0.75rem"},children:"Something went wrong"}),a.jsx("p",{style:{color:"#7f1d1d",fontSize:"1.1rem",marginBottom:"2rem"},children:"Please try scanning again."}),a.jsx(ue,{to:"/",className:"btn btn-primary",style:{fontSize:"1.1rem",padding:"1rem 2rem"},children:"Go Home"})]});const C=(d==null?void 0:d.newTier)||"curious",N=ur[C],L=rB[C],M=nB[C],U=Math.round(N.bonus*100),$=e?g?"#6b7280":L:"var(--kb-navy)";return a.jsxs("div",{style:{minHeight:"100vh",background:`linear-gradient(180deg, ${$} 0%, ${$}dd 100%)`,padding:"1.5rem",display:"flex",flexDirection:"column"},children:[x&&a.jsx(OT,{}),a.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",maxWidth:"400px",margin:"0 auto",width:"100%"},children:[g?a.jsxs(de.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},style:{textAlign:"center",color:"white"},children:[a.jsx(lr,{size:80,strokeWidth:1.5,style:{marginBottom:"1rem",opacity:.8}}),a.jsx("h1",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"Already Checked In"}),a.jsxs("p",{style:{fontSize:"1.25rem",opacity:.9,marginBottom:"2rem"},children:["at ",t.name]}),a.jsxs("p",{style:{fontSize:"1.1rem",opacity:.8},children:["Come back in about an hour",a.jsx("br",{}),"for another check-in!"]})]}):e?a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{width:"100%"},children:[a.jsxs("div",{style:{textAlign:"center",color:"white",marginBottom:"1.5rem"},children:[a.jsx(de.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.2},children:a.jsx("div",{style:{width:"80px",height:"80px",background:"rgba(255,255,255,0.2)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:a.jsx(Ni,{size:48,strokeWidth:2.5})})}),a.jsx("h1",{style:{fontSize:"1.75rem",marginBottom:"0.25rem"},children:"Checked In!"}),a.jsx("p",{style:{fontSize:"1.25rem",opacity:.9},children:t.name})]}),a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},style:{background:"white",borderRadius:"24px",padding:"2rem",textAlign:"center",boxShadow:"0 10px 40px rgba(0,0,0,0.2)"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"1rem"},children:[a.jsx(M,{size:28,color:L}),a.jsx("span",{style:{fontSize:"1.25rem",fontWeight:"700",color:L,textTransform:"uppercase"},children:N.name})]}),a.jsxs("div",{style:{background:`${L}15`,borderRadius:"16px",padding:"1.5rem",marginBottom:"1.5rem"},children:[a.jsxs("div",{style:{fontSize:"4rem",fontWeight:"800",color:L,lineHeight:1},children:[U,"%"]}),a.jsx("div",{style:{fontSize:"1.1rem",color:"var(--kb-gray-600)",marginTop:"0.25rem"},children:"Exchange Bonus"})]}),a.jsxs("div",{style:{background:"var(--kb-navy)",borderRadius:"12px",padding:"1rem",marginBottom:"1rem"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[a.jsx(L2,{size:18,color:"var(--kb-gold)"}),a.jsx("span",{style:{color:"var(--kb-gold)",fontSize:"0.85rem",fontWeight:"600"},children:"VERIFICATION CODE"})]}),a.jsx("div",{style:{fontFamily:"monospace",fontSize:"1.75rem",fontWeight:"700",color:"white",letterSpacing:"0.1em"},children:k})]}),a.jsxs("p",{style:{fontSize:"1.1rem",color:"var(--kb-gray-600)",lineHeight:1.5},children:["Show this screen to the cashier",a.jsx("br",{}),"to receive your ",a.jsxs("strong",{children:[U,"% bonus"]})]})]}),(d==null?void 0:d.tierChanged)&&a.jsxs(de.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},style:{marginTop:"1.5rem",padding:"1rem",background:"rgba(255,255,255,0.15)",borderRadius:"12px",textAlign:"center",color:"white"},children:[a.jsx("span",{style:{fontSize:"1.25rem"},children:""}),a.jsxs("span",{style:{marginLeft:"0.5rem",fontWeight:"600"},children:["You just leveled up to ",N.name,"!"]})]})]}):a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{width:"100%"},children:[a.jsxs("div",{style:{textAlign:"center",color:"white",marginBottom:"1.5rem"},children:[a.jsx(de.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.2},children:a.jsx("div",{style:{width:"80px",height:"80px",background:"rgba(255,255,255,0.2)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:a.jsx(qh,{size:40,strokeWidth:1.5})})}),a.jsxs("h1",{style:{fontSize:"1.75rem",marginBottom:"0.25rem"},children:["Welcome to ",t.name,"!"]}),a.jsx("p",{style:{fontSize:"1.1rem",opacity:.9},children:"Sign in to complete your check-in and unlock your discount"})]}),a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},style:{background:"white",borderRadius:"24px",padding:"2rem",textAlign:"center",boxShadow:"0 10px 40px rgba(0,0,0,0.2)"},children:[a.jsx("div",{style:{width:"60px",height:"60px",background:"var(--kb-gold)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.25rem"},children:a.jsx(N2,{size:28,color:"var(--kb-navy)"})}),a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem",fontSize:"1.5rem"},children:"Your Discount is Waiting!"}),a.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"1rem",marginBottom:"1.5rem",lineHeight:1.5},children:"Create a free OK Member account to unlock your exclusive bonus discount."}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",marginBottom:"1.5rem",textAlign:"left",background:"var(--kb-cream)",borderRadius:"12px",padding:"1rem 1.25rem"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"0.95rem",color:"var(--kb-gray-700)"},children:[a.jsx("div",{style:{width:"24px",height:"24px",background:"var(--kb-green)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(Ni,{size:14,color:"white"})}),"Unlock your discount code"]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"0.95rem",color:"var(--kb-gray-700)"},children:[a.jsx("div",{style:{width:"24px",height:"24px",background:"var(--kb-green)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(Ni,{size:14,color:"white"})}),"Track your tier progress"]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"0.95rem",color:"var(--kb-gray-700)"},children:[a.jsx("div",{style:{width:"24px",height:"24px",background:"var(--kb-green)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(Ni,{size:14,color:"white"})}),"Get your digital OK Member Card"]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"0.95rem",color:"var(--kb-gray-700)"},children:[a.jsx("div",{style:{width:"24px",height:"24px",background:"var(--kb-green)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(Ni,{size:14,color:"white"})}),"Earn higher bonuses as you level up"]})]}),a.jsxs(ue,{to:`/login?redirect=/checkin/${n}`,className:"btn btn-gold",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",padding:"1rem",fontSize:"1.15rem",marginBottom:"0.75rem"},children:[a.jsx(qh,{size:22}),"Sign Up Free"]}),a.jsxs("p",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:["Already have an account? ",a.jsx(ue,{to:`/login?redirect=/checkin/${n}`,style:{color:"var(--kb-navy)",fontWeight:"600"},children:"Sign In"})]})]})]}),a.jsxs(de.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},style:{marginTop:"2rem",display:"flex",gap:"0.75rem"},children:[a.jsx(ue,{to:"/profile",className:"btn",style:{background:"rgba(255,255,255,0.2)",color:"white",padding:"0.875rem 1.5rem",fontSize:"1rem"},children:"My Profile"}),a.jsx(ue,{to:"/",className:"btn",style:{background:"white",color:"var(--kb-navy)",padding:"0.875rem 1.5rem",fontSize:"1rem"},children:"Home"})]})]})]})}const Ff="promoCodes";async function lh(n){const e=fr(Rt(je,Ff),di("businessCode","==",n),qi("createdAt","desc"));return(await gn(e)).docs.map(r=>({id:r.id,...r.data()}))}async function oB({businessCode:n,code:e,description:t,discountType:r,discountValue:s,minTier:l,expiresAt:c,usageLimit:h}){const d=`${n}-${e.toUpperCase()}`;return await Al(rt(je,Ff,d),{businessCode:n,code:e.toUpperCase(),description:t,discountType:r,discountValue:s,minTier:l||null,expiresAt:c||null,usageLimit:h||null,usageCount:0,isActive:!0,createdAt:nt()}),d}async function aB(n,e){const t=rt(je,Ff,n);await Sn(t,{isActive:e})}async function lB(n){await b2(rt(je,Ff,n))}const Nu="transactions";async function cB(n,e,t){const r=k2(je),s=rt(je,"kinderbucks",n),l=await Lr(s);if(!l.exists())throw new Error("Kinderbuck not found");const h=l.data().denomination;r.update(s,{currentHolder:e,holderType:"business",lastTransferAt:nt()});const d=rt(je,"businesses",e);r.update(d,{kinderbucksBalance:Go(h),lifetimeAccepted:Go(h)});const m=rt(Rt(je,Nu));return r.set(m,{type:"payment",kinderbuckSerial:n,denomination:h,businessCode:e,businessName:t,amount:h,status:"completed",createdAt:nt()}),await r.commit(),{serial:n,amount:h,businessCode:e}}async function uB(n,e=50){const t=fr(Rt(je,Nu),di("businessCode","==",n),qi("createdAt","desc"));return(await gn(t)).docs.slice(0,e).map(s=>({id:s.id,...s.data()}))}async function dB(n,e,t){return{id:(await Rf(Rt(je,Nu),{type:"redemption",businessCode:n,businessName:e,amount:t,status:"pending",createdAt:nt()})).id,amount:t,businessCode:n}}async function hB(n,e,t){const r=rt(je,Nu,n),s=await Lr(r);if(!s.exists())throw new Error("Transaction not found");const l=s.data();if(l.status!=="pending")throw new Error("Transaction already processed");const c=k2(je);if(c.update(r,{status:e?"approved":"rejected",processedBy:t,processedAt:nt()}),e){const h=rt(je,"businesses",l.businessCode);c.update(h,{kinderbucksBalance:Go(-l.amount),lifetimeRedeemed:Go(l.amount)});const d=fr(Rt(je,"kinderbucks"),di("currentHolder","==",l.businessCode),di("status","==","active")),m=await gn(d);let g=l.amount;const y=[];for(const x of m.docs){if(g<=0)break;const T=x.data();c.update(x.ref,{status:"redeemed",redeemedAt:nt(),redeemedInTransaction:n}),g-=T.denomination,y.push(x.id)}c.update(r,{redeemedSerials:y})}return await c.commit(),{txnId:n,approved:e,status:e?"approved":"rejected"}}async function fB(){const n=fr(Rt(je,Nu),di("type","==","redemption"),qi("createdAt","desc"));return(await gn(n)).docs.map(t=>({id:t.id,...t.data()}))}function mB({isOpen:n,onClose:e,businessCode:t,businessName:r,currentBalance:s,onSuccess:l}){const[c,h]=A.useState(""),[d,m]=A.useState(!1),[g,y]=A.useState(""),[x,T]=A.useState(!1),k=async C=>{C.preventDefault(),y("");const N=parseFloat(c);if(!N||N<=0){y("Please enter a valid amount");return}if(N>s){y(`Amount exceeds your balance of $${s}`);return}m(!0);try{await dB(t,r,N),T(!0),setTimeout(()=>{l==null||l(),e(),T(!1),h("")},2e3)}catch(L){console.error("Error creating redemption:",L),y("Failed to create redemption request")}m(!1)},S=()=>{d||(h(""),y(""),T(!1),e())};return n?a.jsx(K0,{children:a.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},onClick:S,children:a.jsxs(de.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"card",style:{maxWidth:"400px",width:"100%",padding:0,overflow:"hidden"},onClick:C=>C.stopPropagation(),children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1.25rem 1.5rem",borderBottom:"1px solid var(--kb-gray-200)",background:"var(--kb-gray-50)"},children:[a.jsxs("h3",{style:{margin:0,color:"var(--kb-navy)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx($h,{size:20}),"Request Redemption"]}),a.jsx("button",{onClick:S,style:{background:"none",border:"none",cursor:"pointer",padding:"0.25rem",color:"var(--kb-gray-500)"},children:a.jsx(p0,{size:20})})]}),a.jsx("div",{style:{padding:"1.5rem"},children:x?a.jsxs("div",{style:{textAlign:"center",padding:"2rem 0"},children:[a.jsx("div",{style:{width:"64px",height:"64px",background:"rgba(39, 174, 96, 0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:a.jsx(Mn,{size:32,color:"var(--kb-green)"})}),a.jsx("h4",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"Request Submitted"}),a.jsxs("p",{style:{color:"var(--kb-gray-600)",margin:0},children:["Your redemption request for $",c," has been submitted for admin approval."]})]}):a.jsxs("form",{onSubmit:k,children:[a.jsxs("div",{style:{background:"linear-gradient(135deg, var(--kb-gold) 0%, var(--kb-gold-dark) 100%)",borderRadius:"12px",padding:"1.25rem",marginBottom:"1.5rem",color:"white",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"0.85rem",opacity:.9,marginBottom:"0.25rem"},children:"Available Balance"}),a.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700"},children:["$",s.toFixed(2)]})]}),a.jsxs("div",{style:{marginBottom:"1.5rem"},children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Amount to Redeem (USD)"}),a.jsxs("div",{style:{position:"relative"},children:[a.jsx("span",{style:{position:"absolute",left:"1rem",top:"50%",transform:"translateY(-50%)",color:"var(--kb-gray-500)",fontWeight:"500"},children:"$"}),a.jsx("input",{type:"number",value:c,onChange:C=>h(C.target.value),placeholder:"0.00",min:"1",max:s,step:"0.01",style:{width:"100%",paddingLeft:"2rem",fontSize:"1.25rem",fontWeight:"500"},required:!0})]}),a.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.75rem",flexWrap:"wrap"},children:[[25,50,100].map(C=>s>=C&&a.jsxs("button",{type:"button",onClick:()=>h(C.toString()),className:"btn btn-secondary",style:{padding:"0.4rem 0.75rem",fontSize:"0.85rem"},children:["$",C]},C)),a.jsx("button",{type:"button",onClick:()=>h(s.toString()),className:"btn btn-secondary",style:{padding:"0.4rem 0.75rem",fontSize:"0.85rem"},children:"Max"})]})]}),g&&a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",background:"#fef2f2",borderRadius:"8px",color:"#dc2626",marginBottom:"1rem",fontSize:"0.9rem"},children:[a.jsx(zs,{size:18}),g]}),a.jsxs("div",{style:{padding:"1rem",background:"var(--kb-gray-50)",borderRadius:"8px",marginBottom:"1.5rem",fontSize:"0.85rem",color:"var(--kb-gray-600)"},children:[a.jsx("strong",{children:"How it works:"})," Your request will be reviewed by an administrator. Once approved, you'll receive USD equivalent and the corresponding Kinderbucks bills will be marked as redeemed."]}),a.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[a.jsx("button",{type:"button",onClick:S,className:"btn btn-secondary",style:{flex:1},disabled:d,children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",style:{flex:1},disabled:d||!c,children:d?"Submitting...":"Submit Request"})]})]})})]})})}):null}function pB(){const{profile:n}=Or(),e=Ys(),[t,r]=A.useState(null),[s,l]=A.useState([]),[c,h]=A.useState([]),[d,m]=A.useState([]),[g,y]=A.useState([]),[x,T]=A.useState([]),[k,S]=A.useState(!0),[C,N]=A.useState("overview"),[L,M]=A.useState(!1),[U,$]=A.useState(!1),[G,I]=A.useState(!1),[E,R]=A.useState(!1),[V,B]=A.useState(null),[F,D]=A.useState({code:"",description:"",discountType:"percent",discountValue:10,minTier:"",expiresAt:"",usageLimit:""}),[_e,Ve]=A.useState(!1),it=async()=>{if(!(n!=null&&n.businessCode)){S(!1);return}try{const[J,be,Oe,Ye,Et,vn]=await Promise.all([M9(n.businessCode),BT(n.businessCode),lh(n.businessCode).catch(()=>[]),Xi(),tB(),uB(n.businessCode).catch(()=>[])]);r(J),l(be),h(Oe),m(Ye.filter(so=>so.isActive)),y(Et),T(vn)}catch(J){console.error("Error loading business data:",J)}S(!1)};A.useEffect(()=>{it()},[n==null?void 0:n.businessCode]);const Te=()=>{const J=`https://harmonicsystems.github.io/kinderbucks/#/checkin/${n.businessCode}`;navigator.clipboard.writeText(J),$(!0),setTimeout(()=>$(!1),2e3)};s.filter(J=>{var Ye;const be=(Ye=J.timestamp)!=null&&Ye.toDate?J.timestamp.toDate():new Date(J.timestamp),Oe=new Date;return be.toDateString()===Oe.toDateString()}).length;const ie=s.filter(J=>{var Ye;const be=(Ye=J.timestamp)!=null&&Ye.toDate?J.timestamp.toDate():new Date(J.timestamp),Oe=new Date;return Oe.setDate(Oe.getDate()-7),be>Oe}).length,me=s.filter(J=>{var Et;const be=(Et=J.timestamp)!=null&&Et.toDate?J.timestamp.toDate():new Date(J.timestamp),Oe=new Date,Ye=new Date;return Oe.setDate(Oe.getDate()-7),Ye.setDate(Ye.getDate()-14),be>Ye&&be<=Oe}).length,le=me>0?Math.round((ie-me)/me*100):ie>0?100:0,H=new Set(s.map(J=>J.visitorId)).size,te=g.length,Pe=g.filter(J=>{var Ye;const be=(Ye=J.timestamp)!=null&&Ye.toDate?J.timestamp.toDate():new Date(J.timestamp),Oe=new Date;return Oe.setDate(Oe.getDate()-7),be>Oe}).length,Ae=d.sort((J,be)=>(be.checkinCount||0)-(J.checkinCount||0)).slice(0,5),Le=d.sort((J,be)=>(be.checkinCount||0)-(J.checkinCount||0)).findIndex(J=>J.code===(n==null?void 0:n.businessCode))+1,Be=async J=>{if(J.preventDefault(),!(!F.code||!F.description)){Ve(!0);try{await oB({businessCode:n.businessCode,code:F.code,description:F.description,discountType:F.discountType,discountValue:Number(F.discountValue),minTier:F.minTier||null,expiresAt:F.expiresAt?new Date(F.expiresAt):null,usageLimit:F.usageLimit?Number(F.usageLimit):null});const be=await lh(n.businessCode);h(be),D({code:"",description:"",discountType:"percent",discountValue:10,minTier:"",expiresAt:"",usageLimit:""}),I(!1)}catch(be){console.error("Error creating promo:",be),alert("Error creating promo code")}Ve(!1)}},Qe=async(J,be)=>{await aB(J,!be);const Oe=await lh(n.businessCode);h(Oe)},He=async J=>{if(!confirm("Delete this promo code?"))return;await lB(J);const be=await lh(n.businessCode);h(be)};if(k)return a.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[a.jsx(Dn,{}),a.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",background:"var(--kb-cream)"},children:a.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading..."})}),a.jsx(Vn,{})]});if(!(n!=null&&n.businessCode))return a.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[a.jsx(Dn,{}),a.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",background:"var(--kb-cream)",padding:"2rem"},children:a.jsxs("div",{className:"card",style:{maxWidth:"400px",textAlign:"center",padding:"2rem"},children:[a.jsx(St,{size:48,color:"var(--kb-gray-400)",style:{marginBottom:"1rem"}}),a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"No Business Assigned"}),a.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem"},children:"Your account doesn't have a business assigned yet. Contact an administrator to get set up."}),a.jsx(ue,{to:"/",className:"btn btn-primary",children:"Go Home"})]})}),a.jsx(Vn,{})]});const et=`https://harmonicsystems.github.io/kinderbucks/#/checkin/${n.businessCode}`,Yt=[{key:"overview",label:"Overview",icon:u0},{key:"kinderbucks",label:"Kinderbucks",icon:Bi},{key:"qrcode",label:"QR Code",icon:Nr},{key:"promos",label:"Promo Codes",icon:Ac},{key:"trends",label:"Village Trends",icon:qs},{key:"guide",label:"Resource Guide",icon:Xw}],Ji=[{id:"qr-setup",title:"Setting Up Your QR Code",icon:Nr,content:["Print your unique QR code and display it prominently at your counter or entrance","Use a stand or frame to keep it visible and accessible for customers","Consider printing multiple codes for different checkout areas","Test the code regularly to ensure it scans correctly"]},{id:"customer-flow",title:"Customer Check-in Flow",icon:Pg,content:["Customers scan the QR code with their phone camera","They're taken to your check-in page (no app download needed)","If signed in, they earn a check-in toward their Kinderhooker status","Their tier badge appears so you can offer appropriate discounts"]},{id:"tier-discounts",title:"Member Tier Discounts",icon:mr,content:["Curious (0-4 check-ins): New to Kinderhook - welcome them warmly!","Hooked (5-14 check-ins): Regular visitors - consider small perks","Line & Sinker (15-29 check-ins): Loyal customers - offer meaningful discounts","Village Patron (30+ check-ins): Your best customers - VIP treatment!"]},{id:"promo-tips",title:"Creating Effective Promos",icon:Ac,content:["Create tier-specific promos to reward loyalty","Set expiration dates to create urgency","Use memorable, easy-to-type codes","Track usage to see what resonates with customers"]}];return a.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[a.jsx(Dn,{}),a.jsx("main",{style:{flex:1,background:"var(--kb-cream)",padding:"2rem 1rem"},children:a.jsxs("div",{style:{maxWidth:"1100px",margin:"0 auto"},children:[a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{marginBottom:"1.5rem"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"1rem"},children:[a.jsxs("div",{children:[a.jsx("div",{className:"badge badge-gold",style:{marginBottom:"0.5rem"},children:"Business Resource Center"}),a.jsx("h1",{style:{color:"var(--kb-navy)",marginBottom:"0.25rem"},children:(t==null?void 0:t.name)||n.businessCode}),a.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"Manage check-ins, promos, and see village trends"})]}),Le>0&&a.jsxs("div",{style:{background:"linear-gradient(135deg, var(--kb-gold) 0%, var(--kb-gold-dark) 100%)",color:"white",padding:"0.75rem 1.25rem",borderRadius:"12px",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"0.75rem",opacity:.9},children:"Village Rank"}),a.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700"},children:["#",Le]})]})]})}),a.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem",overflowX:"auto",paddingBottom:"0.5rem"},children:Yt.map(J=>{const be=J.icon;return a.jsxs("button",{onClick:()=>N(J.key),className:"btn",style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.6rem 1rem",background:C===J.key?"var(--kb-navy)":"white",color:C===J.key?"white":"var(--kb-gray-600)",border:"1px solid var(--kb-gray-200)",whiteSpace:"nowrap"},children:[a.jsx(be,{size:16}),J.label]},J.key)})}),C==="overview"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card",style:{padding:"1.25rem"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[a.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(39, 174, 96, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(qs,{size:22,color:"var(--kb-green)"})}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:(t==null?void 0:t.checkinCount)||0}),a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Total Check-ins"})]})]})}),a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card",style:{padding:"1.25rem"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[a.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(52, 152, 219, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(Nf,{size:22,color:"#3498db"})}),a.jsxs("div",{children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx("span",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:ie}),le!==0&&a.jsxs("span",{style:{fontSize:"0.75rem",padding:"0.15rem 0.4rem",borderRadius:"4px",background:le>0?"rgba(39, 174, 96, 0.1)":"rgba(231, 76, 60, 0.1)",color:le>0?"var(--kb-green)":"#e74c3c"},children:[le>0?"+":"",le,"%"]})]}),a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"This Week"})]})]})}),a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"card",style:{padding:"1.25rem"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[a.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(201, 162, 39, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(Dr,{size:22,color:"var(--kb-gold-dark)"})}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:H}),a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Unique Visitors"})]})]})}),a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"card",style:{padding:"1.25rem"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[a.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(155, 89, 182, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(Ac,{size:22,color:"#9b59b6"})}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:c.filter(J=>J.isActive).length}),a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Active Promos"})]})]})})]}),a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"card",children:[a.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(lr,{size:20})," Recent Check-ins"]}),s.length===0?a.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[a.jsx(Dr,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),a.jsx("p",{children:"No check-ins yet"}),a.jsx("p",{style:{fontSize:"0.9rem"},children:"Display your QR code to start receiving check-ins!"}),a.jsx("button",{onClick:()=>N("qrcode"),className:"btn btn-gold",style:{marginTop:"1rem"},children:"View QR Code"})]}):a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:s.slice(0,10).map((J,be)=>{var Et;const Oe=(Et=J.timestamp)!=null&&Et.toDate?J.timestamp.toDate():new Date(J.timestamp),Ye={"Village Patron":"#9b59b6","Line & Sinker":"#c9a227",Hooked:"#27ae60",Curious:"#3498db"};return a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"var(--kb-gray-50)",borderRadius:"8px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[a.jsx("div",{style:{width:"36px",height:"36px",background:"var(--kb-green)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(Mn,{size:18,color:"white"})}),a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:"Check-in recorded"}),J.tier&&a.jsx("span",{style:{fontSize:"0.75rem",padding:"0.1rem 0.5rem",borderRadius:"4px",background:`${Ye[J.tier]||"#95a5a6"}20`,color:Ye[J.tier]||"#95a5a6",fontWeight:"500"},children:J.tier})]})]}),a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:Oe.toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]},J.id||be)})})]})]}),C==="kinderbucks"&&a.jsxs(a.Fragment,{children:[a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",style:{marginBottom:"1.5rem",background:"linear-gradient(135deg, var(--kb-gold) 0%, var(--kb-gold-dark) 100%)",color:"white",padding:"2rem"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"1.5rem"},children:[a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"0.9rem",opacity:.9,marginBottom:"0.25rem"},children:"Current Kinderbucks Balance"}),a.jsxs("div",{style:{fontSize:"3rem",fontWeight:"700",lineHeight:1},children:["$",((t==null?void 0:t.kinderbucksBalance)||0).toFixed(2)]}),a.jsx("div",{style:{fontSize:"0.85rem",opacity:.8,marginTop:"0.5rem"},children:"Available for redemption to USD"})]}),a.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[a.jsxs("button",{onClick:()=>e("/business/accept-payment"),className:"btn",style:{background:"rgba(255,255,255,0.2)",color:"white",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(yl,{size:18}),"Accept Payment"]}),a.jsxs("button",{onClick:()=>R(!0),className:"btn",style:{background:"white",color:"var(--kb-gold-dark)",display:"flex",alignItems:"center",gap:"0.5rem"},disabled:((t==null?void 0:t.kinderbucksBalance)||0)===0,children:[a.jsx($h,{size:18}),"Request Redemption"]})]})]})}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card",style:{padding:"1.25rem"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[a.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(39, 174, 96, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(Qw,{size:22,color:"var(--kb-green)"})}),a.jsxs("div",{children:[a.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"var(--kb-navy)"},children:["$",((t==null?void 0:t.lifetimeAccepted)||0).toFixed(0)]}),a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Total Accepted"})]})]})}),a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card",style:{padding:"1.25rem"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[a.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(52, 152, 219, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(Yw,{size:22,color:"#3498db"})}),a.jsxs("div",{children:[a.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"var(--kb-navy)"},children:["$",((t==null?void 0:t.lifetimeRedeemed)||0).toFixed(0)]}),a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Total Redeemed"})]})]})}),a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"card",style:{padding:"1.25rem"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[a.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(155, 89, 182, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(Bi,{size:22,color:"#9b59b6"})}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"var(--kb-navy)"},children:x.filter(J=>J.type==="payment").length}),a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Payments Received"})]})]})})]}),a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"card",children:[a.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(lr,{size:20})," Recent Transactions"]}),x.length===0?a.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[a.jsx(Bi,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),a.jsx("p",{children:"No transactions yet"}),a.jsx("p",{style:{fontSize:"0.9rem"},children:"Accept Kinderbucks payments to see them here."}),a.jsx("button",{onClick:()=>e("/business/accept-payment"),className:"btn btn-gold",style:{marginTop:"1rem"},children:"Accept First Payment"})]}):a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:x.slice(0,10).map((J,be)=>{var Et,vn;const Oe=(Et=J.createdAt)!=null&&Et.toDate?J.createdAt.toDate():new Date(J.createdAt),Ye=J.type==="payment";return a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"var(--kb-gray-50)",borderRadius:"8px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[a.jsx("div",{style:{width:"36px",height:"36px",background:Ye?"rgba(39, 174, 96, 0.1)":"rgba(52, 152, 219, 0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:Ye?a.jsx(Qw,{size:18,color:"var(--kb-green)"}):a.jsx(Yw,{size:18,color:"#3498db"})}),a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:Ye?"Payment received":"Redemption"}),J.kinderbuckSerial&&a.jsx("span",{style:{fontSize:"0.75rem",fontFamily:"monospace",color:"var(--kb-gray-500)"},children:J.kinderbuckSerial}),J.status==="pending"&&a.jsx("span",{style:{fontSize:"0.75rem",padding:"0.1rem 0.4rem",borderRadius:"4px",background:"#fff3cd",color:"#856404",marginLeft:"0.5rem"},children:"Pending"})]})]}),a.jsxs("div",{style:{textAlign:"right"},children:[a.jsxs("div",{style:{fontWeight:"600",color:Ye?"var(--kb-green)":"#3498db"},children:[Ye?"+":"-","$",(vn=J.amount)==null?void 0:vn.toFixed(2)]}),a.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:Oe.toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]})]},J.id||be)})})]})]}),C==="qrcode"&&a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",style:{padding:"2rem"},children:a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"2rem",alignItems:"start"},children:[a.jsxs("div",{style:{textAlign:"center"},children:[a.jsx("div",{style:{background:"linear-gradient(135deg, var(--kb-green) 0%, #1e8449 100%)",borderRadius:"20px",padding:"4px",display:"inline-block"},children:a.jsxs("div",{style:{background:"white",borderRadius:"18px",padding:"20px"},children:[a.jsx("div",{style:{fontSize:"11px",fontWeight:"600",color:"var(--kb-green)",letterSpacing:"2px",marginBottom:"12px"},children:"CHECK IN AT"}),a.jsx(xl,{value:et,size:180,denomination:1,showFrame:!1}),a.jsx("div",{style:{marginTop:"12px",fontWeight:"600",color:"var(--kb-navy)",fontSize:"1.1rem"},children:t==null?void 0:t.name})]})}),a.jsxs("div",{style:{marginTop:"1.5rem",display:"flex",gap:"0.5rem",justifyContent:"center",flexWrap:"wrap"},children:[a.jsxs("button",{onClick:()=>window.print(),className:"btn btn-gold",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(V2,{size:18})," Print"]}),a.jsxs("button",{onClick:Te,className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[U?a.jsx(Mn,{size:18}):a.jsx(d0,{size:18}),U?"Copied!":"Copy URL"]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"How Customers Use This"}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[a.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"start"},children:[a.jsx("div",{style:{width:"32px",height:"32px",background:"var(--kb-navy)",color:"white",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"600",fontSize:"0.9rem",flexShrink:0},children:"1"}),a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:"Customer scans with phone"}),a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"Using their camera app or QR reader"})]})]}),a.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"start"},children:[a.jsx("div",{style:{width:"32px",height:"32px",background:"var(--kb-navy)",color:"white",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"600",fontSize:"0.9rem",flexShrink:0},children:"2"}),a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:"Opens check-in page"}),a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"No app download required!"})]})]}),a.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"start"},children:[a.jsx("div",{style:{width:"32px",height:"32px",background:"var(--kb-navy)",color:"white",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"600",fontSize:"0.9rem",flexShrink:0},children:"3"}),a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:'They tap "Check In"'}),a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"Earns progress toward their Kinderhooker tier"})]})]}),a.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"start"},children:[a.jsx("div",{style:{width:"32px",height:"32px",background:"var(--kb-green)",color:"white",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:a.jsx(Mn,{size:18})}),a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:"You see their tier badge"}),a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"Offer appropriate discounts for their loyalty level"})]})]})]}),a.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"rgba(201, 162, 39, 0.1)",borderRadius:"8px",borderLeft:"3px solid var(--kb-gold)"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--kb-gold-dark)",fontWeight:"600",marginBottom:"0.5rem"},children:[a.jsx(dV,{size:16})," Pro Tip"]}),a.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.9rem",margin:0},children:"Place your QR code near the register or on table tents so customers can check in while they wait!"})]})]})]})}),C==="promos"&&a.jsx(a.Fragment,{children:a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",style:{marginBottom:"1.5rem"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1.5rem"},children:[a.jsxs("h3",{style:{color:"var(--kb-navy)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(Ac,{size:20})," Your Promo Codes"]}),a.jsxs("button",{onClick:()=>I(!G),className:"btn btn-gold",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(yl,{size:18})," Create Promo"]})]}),G&&a.jsxs("form",{onSubmit:Be,style:{padding:"1.5rem",background:"var(--kb-gray-50)",borderRadius:"12px",marginBottom:"1.5rem"},children:[a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Code *"}),a.jsx("input",{type:"text",value:F.code,onChange:J=>D(be=>({...be,code:J.target.value.toUpperCase().replace(/[^A-Z0-9]/g,"")})),placeholder:"SUMMER20",style:{width:"100%",fontFamily:"monospace"},required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Discount Type"}),a.jsxs("select",{value:F.discountType,onChange:J=>D(be=>({...be,discountType:J.target.value})),style:{width:"100%"},children:[a.jsx("option",{value:"percent",children:"Percent Off"}),a.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:F.discountType==="percent"?"Percent Off":"Amount Off ($)"}),a.jsx("input",{type:"number",value:F.discountValue,onChange:J=>D(be=>({...be,discountValue:J.target.value})),min:"1",max:F.discountType==="percent"?100:1e3,style:{width:"100%"}})]})]}),a.jsxs("div",{style:{marginBottom:"1rem"},children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Description *"}),a.jsx("input",{type:"text",value:F.description,onChange:J=>D(be=>({...be,description:J.target.value})),placeholder:"10% off your entire purchase",style:{width:"100%"},required:!0})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Min. Tier (optional)"}),a.jsxs("select",{value:F.minTier,onChange:J=>D(be=>({...be,minTier:J.target.value})),style:{width:"100%"},children:[a.jsx("option",{value:"",children:"Any tier"}),a.jsx("option",{value:"Curious",children:"Curious"}),a.jsx("option",{value:"Hooked",children:"Hooked"}),a.jsx("option",{value:"Line & Sinker",children:"Line & Sinker"}),a.jsx("option",{value:"Village Patron",children:"Village Patron"})]})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Expires (optional)"}),a.jsx("input",{type:"date",value:F.expiresAt,onChange:J=>D(be=>({...be,expiresAt:J.target.value})),style:{width:"100%"}})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Usage Limit (optional)"}),a.jsx("input",{type:"number",value:F.usageLimit,onChange:J=>D(be=>({...be,usageLimit:J.target.value})),placeholder:"Unlimited",min:"1",style:{width:"100%"}})]})]}),a.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[a.jsx("button",{type:"submit",className:"btn btn-primary",disabled:_e,children:_e?"Creating...":"Create Promo Code"}),a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>I(!1),children:"Cancel"})]})]}),c.length===0?a.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[a.jsx(Ac,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),a.jsx("p",{children:"No promo codes yet"}),a.jsx("p",{style:{fontSize:"0.9rem"},children:"Create your first promo to reward loyal customers!"})]}):a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:c.map(J=>a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem",background:J.isActive?"var(--kb-gray-50)":"var(--kb-gray-100)",borderRadius:"8px",opacity:J.isActive?1:.6,flexWrap:"wrap",gap:"1rem"},children:[a.jsxs("div",{children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.25rem"},children:[a.jsx("code",{style:{padding:"0.25rem 0.5rem",background:"var(--kb-navy)",color:"var(--kb-gold)",borderRadius:"4px",fontWeight:"600"},children:J.code}),a.jsxs("span",{style:{padding:"0.15rem 0.5rem",background:J.discountType==="percent"?"rgba(39, 174, 96, 0.1)":"rgba(52, 152, 219, 0.1)",color:J.discountType==="percent"?"var(--kb-green)":"#3498db",borderRadius:"4px",fontSize:"0.8rem",fontWeight:"500"},children:[J.discountType==="percent"?a.jsx(PV,{size:12,style:{marginRight:4}}):a.jsx($h,{size:12,style:{marginRight:4}}),J.discountValue,J.discountType==="percent"?"% off":" off"]})]}),a.jsx("div",{style:{color:"var(--kb-gray-600)",fontSize:"0.9rem"},children:J.description}),a.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"0.5rem",fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:[J.minTier&&a.jsxs("span",{children:["Min tier: ",J.minTier]}),J.usageLimit&&a.jsxs("span",{children:["Limit: ",J.usageCount||0,"/",J.usageLimit]}),J.expiresAt&&a.jsxs("span",{children:["Expires: ",new Date(J.expiresAt.toDate?J.expiresAt.toDate():J.expiresAt).toLocaleDateString()]})]})]}),a.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[a.jsxs("button",{onClick:()=>Qe(J.id,J.isActive),className:"btn btn-secondary",style:{padding:"0.4rem 0.6rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:[J.isActive?a.jsx(sV,{size:16}):a.jsx(P2,{size:16}),J.isActive?"Disable":"Enable"]}),a.jsx("button",{onClick:()=>He(J.id),className:"btn",style:{padding:"0.4rem 0.6rem",background:"#e74c3c",color:"white"},children:a.jsx(O2,{size:16})})]})]},J.id))})]})}),C==="trends"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",style:{padding:"1.5rem"},children:[a.jsx("h4",{style:{color:"var(--kb-gray-500)",marginBottom:"0.5rem",fontSize:"0.9rem"},children:"Village-Wide Check-ins"}),a.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"var(--kb-navy)"},children:te}),a.jsxs("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:[Pe," this week across all businesses"]})]}),a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card",style:{padding:"1.5rem"},children:[a.jsx("h4",{style:{color:"var(--kb-gray-500)",marginBottom:"0.5rem",fontSize:"0.9rem"},children:"Participating Businesses"}),a.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"var(--kb-navy)"},children:d.length}),a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Active in the Kinderbucks network"})]}),a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card",style:{padding:"1.5rem",background:"linear-gradient(135deg, var(--kb-gold) 0%, var(--kb-gold-dark) 100%)",color:"white"},children:[a.jsx("h4",{style:{opacity:.9,marginBottom:"0.5rem",fontSize:"0.9rem"},children:"Your Market Share"}),a.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"700"},children:[te>0?Math.round(((t==null?void 0:t.checkinCount)||0)/te*100):0,"%"]}),a.jsx("div",{style:{opacity:.9,fontSize:"0.85rem"},children:"of all village check-ins"})]})]}),a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"card",children:[a.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(mr,{size:20})," Top Businesses This Month"]}),a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:Ae.map((J,be)=>{var vn;const Oe=J.code===(n==null?void 0:n.businessCode),Ye=((vn=Ae[0])==null?void 0:vn.checkinCount)||1,Et=(J.checkinCount||0)/Ye*100;return a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"0.75rem 1rem",background:Oe?"rgba(201, 162, 39, 0.1)":"var(--kb-gray-50)",borderRadius:"8px",border:Oe?"2px solid var(--kb-gold)":"none"},children:[a.jsx("div",{style:{width:"28px",height:"28px",background:be===0?"var(--kb-gold)":be===1?"#c0c0c0":be===2?"#cd7f32":"var(--kb-gray-300)",color:"white",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"600",fontSize:"0.85rem"},children:be+1}),a.jsxs("div",{style:{flex:1},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:[a.jsx("span",{style:{fontWeight:Oe?"600":"500",color:"var(--kb-navy)"},children:J.name}),Oe&&a.jsx("span",{style:{fontSize:"0.7rem",padding:"0.1rem 0.4rem",background:"var(--kb-gold)",color:"white",borderRadius:"4px"},children:"YOU"})]}),a.jsx("div",{style:{height:"6px",background:"var(--kb-gray-200)",borderRadius:"3px",overflow:"hidden"},children:a.jsx("div",{style:{width:`${Et}%`,height:"100%",background:Oe?"var(--kb-gold)":"var(--kb-green)",borderRadius:"3px"}})})]}),a.jsx("div",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:J.checkinCount||0})]},J.code)})})]})]}),C==="guide"&&a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",children:[a.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(Xw,{size:20})," Business Resource Guide"]}),a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:Ji.map(J=>{const be=J.icon,Oe=V===J.id;return a.jsxs("div",{style:{border:"1px solid var(--kb-gray-200)",borderRadius:"12px",overflow:"hidden"},children:[a.jsxs("button",{onClick:()=>B(Oe?null:J.id),style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem 1.25rem",background:Oe?"var(--kb-gray-50)":"white",border:"none",cursor:"pointer",textAlign:"left"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[a.jsx("div",{style:{width:"40px",height:"40px",background:"rgba(201, 162, 39, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(be,{size:20,color:"var(--kb-gold-dark)"})}),a.jsx("span",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:J.title})]}),Oe?a.jsx(DD,{size:20,color:"var(--kb-gray-400)"}):a.jsx(RD,{size:20,color:"var(--kb-gray-400)"})]}),Oe&&a.jsx("div",{style:{padding:"1rem 1.25rem",borderTop:"1px solid var(--kb-gray-200)"},children:a.jsx("ul",{style:{margin:0,paddingLeft:"1.25rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:J.content.map((Ye,Et)=>a.jsx("li",{style:{color:"var(--kb-gray-600)",lineHeight:1.5},children:Ye},Et))})})]},J.id)})}),a.jsxs("div",{style:{marginTop:"2rem",padding:"1.5rem",background:"linear-gradient(135deg, var(--kb-navy) 0%, var(--kb-navy-light) 100%)",borderRadius:"12px",color:"white"},children:[a.jsx("h4",{style:{marginBottom:"0.5rem"},children:"Need Help?"}),a.jsx("p",{style:{opacity:.9,marginBottom:"1rem",fontSize:"0.95rem"},children:"Questions about Kinderbucks or need assistance with your account? We're here to help!"}),a.jsx("a",{href:"mailto:support@kinderbucks.com",className:"btn",style:{background:"rgba(255,255,255,0.2)",color:"white"},children:"Contact Support"})]})]})]})}),a.jsx(Vn,{}),a.jsx(mB,{isOpen:E,onClose:()=>R(!1),businessCode:n==null?void 0:n.businessCode,businessName:t==null?void 0:t.name,currentBalance:(t==null?void 0:t.kinderbucksBalance)||0,onSuccess:()=>it()})]})}function Qt({children:n,title:e}){const t=gr(),r=Ys(),{user:s,profile:l,isAdmin:c}=Or(),h=[{to:"/admin/dashboard",label:"Dashboard",Icon:fV},{to:"/admin/exchanges",label:"Exchanges",Icon:Pf},{to:"/admin/redemptions",label:"Redemptions",Icon:Bi},{to:"/admin/members",label:"Members",Icon:Dr},{to:"/admin/generate",label:"Generate QR",Icon:Nr},{to:"/admin/issue",label:"Issue Currency",Icon:Hh},{to:"/admin/businesses",label:"Businesses",Icon:St},{to:"/admin/users",label:"User Management",Icon:Kh}],d=async()=>{await S2(),r("/")},m=g=>t.pathname===g;return a.jsxs("div",{style:{display:"flex",minHeight:"100vh"},children:[a.jsxs("aside",{style:{width:"260px",background:"var(--kb-navy)",color:"var(--kb-white)",display:"flex",flexDirection:"column",position:"fixed",top:0,left:0,bottom:0,zIndex:100},children:[a.jsx("div",{style:{padding:"1.5rem",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:a.jsxs(ue,{to:"/map",style:{display:"flex",alignItems:"center",gap:"0.75rem",textDecoration:"none"},children:[a.jsx("div",{style:{width:"40px",height:"40px",background:"var(--kb-gold)",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--kb-navy)",fontFamily:"var(--font-display)",fontWeight:"700",fontSize:"1.2rem"},children:"K"}),a.jsxs("div",{children:[a.jsx("div",{style:{fontFamily:"var(--font-display)",fontWeight:"600",color:"var(--kb-white)",fontSize:"1.1rem"},children:"Kinderbucks"}),a.jsx("div",{style:{fontSize:"0.7rem",color:"var(--kb-gold)",textTransform:"uppercase",letterSpacing:"0.1em"},children:"Admin Portal"})]})]})}),a.jsx("nav",{style:{flex:1,padding:"1rem 0",overflowY:"auto"},children:h.map(g=>a.jsxs(ue,{to:g.to,style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.875rem 1.5rem",color:m(g.to)?"var(--kb-gold)":"var(--kb-gray-300)",background:m(g.to)?"rgba(201, 162, 39, 0.1)":"transparent",borderLeft:m(g.to)?"3px solid var(--kb-gold)":"3px solid transparent",textDecoration:"none",fontSize:"0.95rem",fontWeight:m(g.to)?"600":"400",transition:"all 0.2s"},children:[a.jsx(g.Icon,{size:20,strokeWidth:1.5}),g.label]},g.to))}),a.jsxs("div",{style:{padding:"1rem 1.5rem",borderTop:"1px solid rgba(255,255,255,0.1)"},children:[s&&a.jsxs("div",{style:{padding:"0.75rem 0",borderBottom:"1px solid rgba(255,255,255,0.1)",marginBottom:"0.75rem"},children:[a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-300)"},children:(l==null?void 0:l.displayName)||s.email}),a.jsx("div",{style:{fontSize:"0.75rem",color:"var(--kb-gray-500)"},children:(l==null?void 0:l.role)||"member"})]}),a.jsxs(ue,{to:"/map",style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.5rem 0",color:"var(--kb-gray-400)",textDecoration:"none",fontSize:"0.9rem"},children:[a.jsx(cV,{size:18}),"Back to Site"]}),s&&a.jsxs("button",{onClick:d,style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.5rem 0",color:"var(--kb-gray-400)",background:"none",border:"none",cursor:"pointer",fontSize:"0.9rem",width:"100%"},children:[a.jsx(Rg,{size:18}),"Sign Out"]})]})]}),a.jsxs("main",{style:{flex:1,marginLeft:"260px",background:"var(--kb-cream)",minHeight:"100vh"},children:[a.jsx("header",{style:{background:"var(--kb-white)",borderBottom:"1px solid var(--kb-gray-200)",padding:"1.25rem 2rem",position:"sticky",top:0,zIndex:50},children:a.jsx("h1",{style:{fontFamily:"var(--font-display)",fontSize:"1.5rem",color:"var(--kb-navy)",margin:0},children:e})}),a.jsx("div",{style:{padding:"2rem"},children:n})]}),a.jsx("style",{children:`
        @media (max-width: 768px) {
          aside {
            width: 100% !important;
            position: relative !important;
            display: none;
          }
          main {
            margin-left: 0 !important;
          }
        }
      `})]})}function gB(){const[n,e]=A.useState({totalCurrency:0,inCirculation:0,circulationValue:0,pendingExchanges:0,pendingValue:0,totalMembers:0,activeBusinesses:0,totalCheckins:0}),[t,r]=A.useState([]),[s,l]=A.useState({}),[c,h]=A.useState(!0);A.useEffect(()=>{async function m(){try{const g=await LT(),y=g.filter(I=>I.status==="issued"||I.status==="active"),x={};y.forEach(I=>{const E=I.denomination||0;x[E]=(x[E]||0)+1}),l(x);const T=await Xi(),k=T.filter(I=>I.isActive),S=T.reduce((I,E)=>I+(E.checkinCount||0),0),C=fr(Rt(je,"exchanges"),di("status","==","pending"),qi("createdAt","desc")),L=(await gn(C)).docs.map(I=>({id:I.id,...I.data()})),M=L.reduce((I,E)=>I+(E.kinderbucksAmount||0),0),U=fr(Rt(je,"exchanges"),qi("createdAt","desc"),GM(5)),$=await gn(U);r($.docs.map(I=>({id:I.id,...I.data()})));const G=await gn(Rt(je,"members"));e({totalCurrency:g.length,inCirculation:y.length,circulationValue:y.reduce((I,E)=>I+(E.denomination||0),0),pendingExchanges:L.length,pendingValue:M,totalMembers:G.size,activeBusinesses:k.length,totalCheckins:S}),h(!1)}catch(g){console.error("Error loading dashboard data:",g),h(!1)}}m()},[]);const d=({icon:m,label:g,value:y,subtext:x,color:T,to:k})=>a.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[a.jsxs("div",{children:[a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem",marginBottom:"0.5rem"},children:g}),a.jsx("div",{style:{fontFamily:"var(--font-display)",fontSize:"2rem",fontWeight:"700",color:T||"var(--kb-navy)"},children:y}),x&&a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem",marginTop:"0.25rem"},children:x})]}),a.jsx("div",{style:{width:"48px",height:"48px",background:`${T||"var(--kb-navy)"}15`,borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(m,{size:24,color:T||"var(--kb-navy)"})})]}),k&&a.jsx(ue,{to:k,style:{display:"block",marginTop:"1rem",paddingTop:"1rem",borderTop:"1px solid var(--kb-gray-100)",color:"var(--kb-navy)",fontSize:"0.85rem",fontWeight:"500"},children:"View Details "})]});return c?a.jsx(Qt,{title:"Dashboard",children:a.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:a.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading dashboard..."})})}):a.jsxs(Qt,{title:"Dashboard",children:[a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[a.jsx(d,{icon:Bi,label:"In Circulation",value:`$${n.circulationValue.toLocaleString()}`,subtext:`${n.inCirculation} bills issued`,color:"var(--kb-green)"}),a.jsx(d,{icon:lr,label:"Pending Exchanges",value:n.pendingExchanges,subtext:`$${n.pendingValue.toFixed(2)} value`,color:n.pendingExchanges>0?"#e67e22":"var(--kb-gray-400)",to:"/admin/exchanges"}),a.jsx(d,{icon:Dr,label:"OK Members",value:n.totalMembers,subtext:`${n.totalCheckins} total check-ins`,color:"var(--kb-navy)",to:"/admin/members"}),a.jsx(d,{icon:St,label:"Active Businesses",value:n.activeBusinesses,color:"var(--kb-gold-dark)",to:"/admin/businesses"})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem"},children:[a.jsxs("div",{className:"card",children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[a.jsx("h3",{style:{color:"var(--kb-navy)",margin:0},children:"Recent Exchanges"}),a.jsx(ue,{to:"/admin/exchanges",style:{fontSize:"0.85rem",color:"var(--kb-navy)"},children:"View All "})]}),t.length===0?a.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"No exchanges yet"}):a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:t.map(m=>{var g,y,x,T;return a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem",background:"var(--kb-gray-50)",borderRadius:"8px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[m.status==="completed"?a.jsx(Mn,{size:18,color:"var(--kb-green)"}):m.status==="pending"?a.jsx(lr,{size:18,color:"#e67e22"}):a.jsx(zs,{size:18,color:"var(--kb-gray-400)"}),a.jsxs("div",{children:[a.jsxs("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:["$",m.usdAmount,"  $",(g=m.kinderbucksAmount)==null?void 0:g.toFixed(2)," KB"]}),a.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:((T=(x=(y=m.createdAt)==null?void 0:y.toDate)==null?void 0:x.call(y))==null?void 0:T.toLocaleDateString())||"Pending"})]})]}),a.jsx("span",{className:"badge",style:{background:m.status==="completed"?"#d4edda":m.status==="pending"?"#fff3cd":"#f8f9fa",color:m.status==="completed"?"var(--kb-green)":m.status==="pending"?"#856404":"var(--kb-gray-600)"},children:m.status})]},m.id)})})]}),a.jsxs("div",{className:"card",children:[a.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem"},children:"Circulation by Denomination"}),Object.keys(s).length===0?a.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"No currency in circulation yet"}):a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[1,5,10,20].map(m=>{const g=s[m]||0,y=Math.max(...Object.values(s),1),x=g/y*100,T={1:"#27ae60",5:"#3498db",10:"#9b59b6",20:"#c9a227"};return a.jsxs("div",{children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[a.jsxs("span",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:["$",m]}),a.jsxs("span",{style:{color:"var(--kb-gray-500)"},children:[g," bills ($",g*m,")"]})]}),a.jsx("div",{style:{height:"8px",background:"var(--kb-gray-100)",borderRadius:"4px",overflow:"hidden"},children:a.jsx("div",{style:{width:`${x}%`,height:"100%",background:T[m],borderRadius:"4px",transition:"width 0.5s ease"}})})]},m)})})]})]}),a.jsxs("div",{className:"card",style:{marginTop:"1.5rem"},children:[a.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Quick Actions"}),a.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[a.jsxs(ue,{to:"/admin/generate",className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(Nr,{size:18})," Generate QR Codes"]}),a.jsxs(ue,{to:"/admin/issue",className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(Hh,{size:18})," Issue Currency"]}),a.jsxs(ue,{to:"/admin/exchanges",className:"btn btn-gold",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(Pf,{size:18})," Process Exchanges"]})]})]})]})}function yB(){const[n,e]=A.useState({start:1,end:100}),[t,r]=A.useState(5),[s,l]=A.useState([]),[c,h]=A.useState(!1),[d,m]=A.useState(!1),g=()=>{const k=[];for(let S=n.start;S<=n.end;S++)k.push(`KB-${String(S).padStart(4,"0")}`);l(k),m(!1)},y=async()=>{h(!0);try{await K9(s,t),m(!0)}catch(k){console.error("Error saving:",k),alert("Error saving to database")}h(!1)},x="https://harmonicsystems.github.io/kinderbucks/#/scan/",T={1:{bg:"rgba(39, 174, 96, 0.1)",text:"var(--kb-green)"},5:{bg:"rgba(52, 152, 219, 0.1)",text:"#3498db"},10:{bg:"rgba(155, 89, 182, 0.1)",text:"#9b59b6"},20:{bg:"rgba(201, 162, 39, 0.1)",text:"var(--kb-gold-dark)"}};return a.jsxs(Qt,{title:"Generate QR Codes",children:[a.jsxs("div",{className:"card",style:{marginBottom:"2rem"},children:[a.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(Nr,{size:20})," Generation Settings"]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1.5rem",marginBottom:"1.5rem"},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Start Number"}),a.jsx("input",{type:"number",value:n.start,onChange:k=>e(S=>({...S,start:Number(k.target.value)})),min:1,max:9999,style:{width:"100%"}})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"End Number"}),a.jsx("input",{type:"number",value:n.end,onChange:k=>e(S=>({...S,end:Number(k.target.value)})),min:1,max:9999,style:{width:"100%"}})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Denomination"}),a.jsxs("select",{value:t,onChange:k=>r(Number(k.target.value)),style:{width:"100%"},children:[a.jsx("option",{value:1,children:"$1"}),a.jsx("option",{value:5,children:"$5"}),a.jsx("option",{value:10,children:"$10"}),a.jsx("option",{value:20,children:"$20"})]})]})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[a.jsxs("button",{className:"btn btn-primary",onClick:g,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(Nr,{size:18})," Generate ",n.end-n.start+1," Codes"]}),a.jsxs("div",{style:{padding:"0.75rem 1rem",background:T[t].bg,borderRadius:"8px",color:T[t].text,fontWeight:"600"},children:["Total Value: $",(n.end-n.start+1)*t]})]})]}),s.length>0&&a.jsxs("div",{className:"card",children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[a.jsxs("div",{children:[a.jsxs("h3",{style:{color:"var(--kb-navy)",margin:0},children:["Generated: ",s.length," Kinderbucks"]}),a.jsxs("p",{style:{color:"var(--kb-gray-500)",margin:"0.25rem 0 0",fontSize:"0.9rem"},children:["$",t," denomination  Total value: $",s.length*t]})]}),a.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[d?a.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--kb-green)",fontWeight:"600"},children:[a.jsx(Mn,{size:18})," Saved!"]}):a.jsxs("button",{className:"btn btn-gold",onClick:y,disabled:c,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(FV,{size:18}),c?"Saving...":"Save to Database"]}),a.jsxs("button",{className:"btn btn-secondary",onClick:()=>window.print(),style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(V2,{size:18})," Print"]})]})]}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gap:"1.5rem"},children:s.slice(0,50).map(k=>a.jsxs("div",{style:{background:"var(--kb-white)",border:"1px solid var(--kb-gray-200)",borderRadius:"12px",padding:"1rem",textAlign:"center"},children:[a.jsx(xl,{value:`${x}${k}`,size:140,denomination:t}),a.jsx("p",{style:{fontFamily:"monospace",marginTop:"0.75rem",fontSize:"0.9rem",color:"var(--kb-navy)",fontWeight:"600"},children:k})]},k))}),s.length>50&&a.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"var(--kb-gray-50)",borderRadius:"8px",textAlign:"center",color:"var(--kb-gray-600)"},children:["Showing 50 of ",s.length," codes. All will be saved and printable."]})]}),s.length===0&&a.jsxs("div",{className:"card",style:{textAlign:"center",padding:"4rem 2rem"},children:[a.jsx(Nr,{size:64,color:"var(--kb-gray-300)",style:{marginBottom:"1rem"}}),a.jsx("h3",{style:{color:"var(--kb-gray-500)",marginBottom:"0.5rem"},children:"No codes generated yet"}),a.jsx("p",{style:{color:"var(--kb-gray-400)"},children:"Set your range and denomination above, then click Generate."})]})]})}function vB(){const[n,e]=A.useState([]),[t,r]=A.useState(!0),[s,l]=A.useState([]),[c,h]=A.useState(""),[d,m]=A.useState(!1),[g,y]=A.useState(0),x=async()=>{const I=await LT();e(I.filter(E=>E.status==="draft"||E.status==="issued")),r(!1)};A.useEffect(()=>{x()},[]);const T=I=>{l(E=>E.includes(I)?E.filter(R=>R!==I):[...E,I])},k=()=>{const I=N.map(E=>E.serial);l(I)},S=()=>{l([])},C=async()=>{if(s.length!==0){m(!0);try{for(const I of s)await q9(I,"issued",c);y(s.length),l([]),h(""),await x(),setTimeout(()=>y(0),3e3)}catch(I){console.error("Error issuing:",I),alert("Error issuing Kinderbucks")}m(!1)}},N=n.filter(I=>I.status==="draft"),L=n.filter(I=>I.status==="issued"),M=s.reduce((I,E)=>{const R=n.find(V=>V.serial===E);return I+((R==null?void 0:R.denomination)||0)},0),$=(I=>{const E={1:[],5:[],10:[],20:[]};return I.forEach(R=>{const V=R.denomination||5;E[V]&&E[V].push(R)}),E})(N),G={1:"#27ae60",5:"#3498db",10:"#9b59b6",20:"#c9a227"};return t?a.jsx(Qt,{title:"Issue Currency",children:a.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:a.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading..."})})}):a.jsxs(Qt,{title:"Issue Currency",children:[g>0&&a.jsxs("div",{style:{position:"fixed",top:"100px",right:"2rem",background:"var(--kb-green)",color:"white",padding:"1rem 1.5rem",borderRadius:"8px",display:"flex",alignItems:"center",gap:"0.75rem",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:1e3},children:[a.jsx(Mn,{size:20}),a.jsxs("span",{children:["Issued ",g," Kinderbucks successfully!"]})]}),a.jsxs("div",{className:"card",style:{marginBottom:"2rem"},children:[a.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(Hh,{size:20})," Issue to Circulation"]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:"1.5rem",alignItems:"end"},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Recipient (optional)"}),a.jsx("input",{type:"text",value:c,onChange:I=>h(I.target.value),placeholder:"Business name or exchange point",style:{width:"100%"}})]}),a.jsxs("button",{className:"btn btn-gold",onClick:C,disabled:s.length===0||d,style:{display:"flex",alignItems:"center",gap:"0.5rem",height:"42px"},children:[a.jsx(Hh,{size:18}),d?"Issuing...":`Issue ${s.length} Selected`]})]}),s.length>0&&a.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem 1rem",background:"var(--kb-gold)",borderRadius:"8px",color:"var(--kb-navy)",fontWeight:"500"},children:["Selected: ",s.length," bills  Total value: $",M]})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[a.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-gray-500)"},children:N.length}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Available (Draft)"})]}),a.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-green)"},children:L.length}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Already Issued"})]}),a.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:s.length}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Selected"})]})]}),a.jsxs("div",{className:"card",children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[a.jsxs("h3",{style:{color:"var(--kb-navy)",margin:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(Jw,{size:20})," Available to Issue (",N.length,")"]}),a.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[a.jsx("button",{className:"btn btn-secondary",onClick:k,style:{padding:"0.4rem 0.75rem",fontSize:"0.85rem"},children:"Select All"}),a.jsx("button",{className:"btn btn-secondary",onClick:S,style:{padding:"0.4rem 0.75rem",fontSize:"0.85rem"},children:"Clear"})]})]}),N.length===0?a.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[a.jsx(Jw,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),a.jsx("p",{children:"No draft Kinderbucks available."}),a.jsx("p",{style:{fontSize:"0.9rem"},children:"Generate some QR codes first."})]}):a.jsx("div",{children:[1,5,10,20].map(I=>{const E=$[I];return E.length===0?null:a.jsxs("div",{style:{marginBottom:"1.5rem"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem"},children:[a.jsxs("div",{style:{width:"24px",height:"24px",background:G[I],borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"0.75rem",fontWeight:"600"},children:["$",I]}),a.jsxs("span",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:["$",I," Bills (",E.length,")"]}),a.jsx("button",{onClick:()=>{const R=E.map(B=>B.serial),V=R.every(B=>s.includes(B));l(V?B=>B.filter(F=>!R.includes(F)):B=>[...new Set([...B,...R])])},style:{background:"none",border:"none",color:G[I],cursor:"pointer",fontSize:"0.85rem"},children:E.every(R=>s.includes(R.serial))?"Deselect all":"Select all"})]}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))",gap:"0.5rem"},children:E.map(R=>{const V=s.includes(R.serial);return a.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.6rem 0.75rem",background:V?`${G[I]}15`:"var(--kb-gray-50)",borderRadius:"6px",cursor:"pointer",border:V?`2px solid ${G[I]}`:"2px solid transparent",transition:"all 0.15s"},children:[V?a.jsx(JV,{size:18,color:G[I]}):a.jsx(e3,{size:18,color:"var(--kb-gray-400)"}),a.jsx("input",{type:"checkbox",checked:V,onChange:()=>T(R.serial),style:{display:"none"}}),a.jsx("span",{style:{fontFamily:"monospace",fontSize:"0.85rem",color:V?G[I]:"var(--kb-gray-600)",fontWeight:V?"600":"400"},children:R.serial})]},R.serial)})})]},I)})})]})]})}const xB="AIzaSyBTfW1zXwDOYJGEZ7ktRsLNowGvFewLKj0";function wB(n){if(!n)return"services";const e=new Set(n);return e.has("restaurant")||e.has("cafe")||e.has("bar")||e.has("bakery")||e.has("food")||e.has("meal_takeaway")||e.has("meal_delivery")?"food":e.has("store")||e.has("shopping_mall")||e.has("clothing_store")||e.has("grocery_or_supermarket")||e.has("convenience_store")||e.has("liquor_store")||e.has("florist")||e.has("jewelry_store")||e.has("book_store")||e.has("hardware_store")?"retail":e.has("art_gallery")||e.has("museum")||e.has("movie_theater")||e.has("library")||e.has("tourist_attraction")?"arts":"services"}function bB(n){return n?n.toUpperCase().replace(/[^A-Z0-9\s]/g,"").replace(/\b(THE|AND|OF|AT|IN)\b/gi,"").trim().replace(/\s+/g,"-").substring(0,20)||"BIZ":""}function kB({onPlaceSelect:n,placeholder:e="Search for a business..."}){const[t,r]=A.useState(""),[s,l]=A.useState([]),[c,h]=A.useState(!1),[d,m]=A.useState(!1),[g,y]=A.useState(!1),x=A.useRef(null),T=A.useRef(null),k=A.useRef(null),S=A.useRef(null),C=A.useRef(null);A.useEffect(()=>{var G,I,E,R;if((I=(G=window.google)==null?void 0:G.maps)!=null&&I.places){y(!0);return}const U=document.querySelector('script[src*="maps.googleapis.com"]');if(U){U.addEventListener("load",()=>y(!0)),(R=(E=window.google)==null?void 0:E.maps)!=null&&R.places&&y(!0);return}const $=document.createElement("script");$.src=`https://maps.googleapis.com/maps/api/js?key=${xB}&libraries=places`,$.async=!0,$.defer=!0,$.onload=()=>y(!0),document.head.appendChild($)},[]),A.useEffect(()=>{if(!g)return;x.current=new window.google.maps.places.AutocompleteService;const U=document.createElement("div");T.current=new window.google.maps.places.PlacesService(U),k.current=new window.google.maps.places.AutocompleteSessionToken},[g]),A.useEffect(()=>{const U=$=>{C.current&&!C.current.contains($.target)&&S.current&&!S.current.contains($.target)&&m(!1)};return document.addEventListener("mousedown",U),()=>document.removeEventListener("mousedown",U)},[]);const N=async U=>{if(!U||U.length<2||!x.current){l([]);return}h(!0);const $={input:U,sessionToken:k.current,types:["establishment"],locationBias:{center:{lat:42.3951,lng:-73.6977},radius:5e4}};x.current.getPlacePredictions($,(G,I)=>{h(!1),I===window.google.maps.places.PlacesServiceStatus.OK&&G?(l(G),m(!0)):l([])})};A.useEffect(()=>{const U=setTimeout(()=>{N(t)},300);return()=>clearTimeout(U)},[t]);const L=U=>{if(!T.current)return;const $={placeId:U.place_id,fields:["name","formatted_address","types","geometry","formatted_phone_number","website","opening_hours","photos"],sessionToken:k.current};T.current.getDetails($,(G,I)=>{var E;if(I===window.google.maps.places.PlacesServiceStatus.OK&&G){let R=null;G.photos&&G.photos.length>0&&(R=G.photos[0].getUrl({maxWidth:400,maxHeight:300}));const V={name:G.name,address:G.formatted_address,code:bB(G.name),category:wB(G.types),phone:G.formatted_phone_number,website:G.website,photoUrl:R,location:(E=G.geometry)!=null&&E.location?{lat:G.geometry.location.lat(),lng:G.geometry.location.lng()}:null,placeId:U.place_id};n(V),r(""),l([]),m(!1),k.current=new window.google.maps.places.AutocompleteSessionToken}})},M=()=>{var U;r(""),l([]),m(!1),(U=S.current)==null||U.focus()};return a.jsxs("div",{style:{position:"relative"},children:[a.jsxs("div",{style:{position:"relative"},children:[a.jsx(Mf,{size:18,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--kb-gray-400)"}}),a.jsx("input",{ref:S,type:"text",value:t,onChange:U=>r(U.target.value),onFocus:()=>s.length>0&&m(!0),placeholder:e,style:{width:"100%",paddingLeft:"40px",paddingRight:t?"36px":"12px"}}),t&&a.jsx("button",{onClick:M,style:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"var(--kb-gray-400)",padding:"4px"},children:a.jsx(p0,{size:16})})]}),d&&s.length>0&&a.jsx("div",{ref:C,style:{position:"absolute",top:"100%",left:0,right:0,marginTop:"4px",background:"white",borderRadius:"8px",boxShadow:"0 4px 20px rgba(0,0,0,0.15)",zIndex:100,maxHeight:"300px",overflowY:"auto"},children:s.map(U=>{var $,G;return a.jsxs("button",{onClick:()=>L(U),style:{width:"100%",padding:"0.75rem 1rem",background:"none",border:"none",borderBottom:"1px solid var(--kb-gray-100)",cursor:"pointer",textAlign:"left",display:"flex",alignItems:"flex-start",gap:"0.75rem"},onMouseEnter:I=>I.currentTarget.style.background="var(--kb-gray-50)",onMouseLeave:I=>I.currentTarget.style.background="none",children:[a.jsx(gl,{size:16,color:"var(--kb-gold)",style:{marginTop:"2px",flexShrink:0}}),a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:(($=U.structured_formatting)==null?void 0:$.main_text)||U.description}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:(G=U.structured_formatting)==null?void 0:G.secondary_text})]})]},U.place_id)})}),c&&a.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,marginTop:"4px",padding:"1rem",background:"white",borderRadius:"8px",boxShadow:"0 4px 20px rgba(0,0,0,0.15)",textAlign:"center",color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"Searching..."})]})}const _B=[{code:"AVIARY",name:"The Aviary",category:"food"},{code:"MORNINGBIRD",name:"Morningbird Cafe",category:"food"},{code:"SAISONNIER",name:"Saisonnier",category:"food"},{code:"BROADST-BAGEL",name:"Broad Street Bagel Co.",category:"food"},{code:"ISOLA",name:"Isola Wine Bar",category:"food"},{code:"BOTTLE-SHOP",name:"Kinderhook Bottle Shop",category:"retail"},{code:"SAMASCOTTS",name:"Samascott's Garden Market",category:"retail"},{code:"SAMASCOTT-ORCHARDS",name:"Samascott Orchards",category:"retail"},{code:"SCHOOL-GALLERY",name:"The School | Jack Shainman Gallery",category:"arts"},{code:"FEED-SEED",name:"The Feed and Seed",category:"services"},{code:"OLD-DUTCH",name:"The Old Dutch Inn",category:"services"},{code:"VILLAGE-YOGA",name:"Village Yoga",category:"services"},{code:"WALSH-DENTISTRY",name:"Walsh & Walsh Dentistry",category:"services"}],Yp={food:{label:"Food & Drink",Icon:B2,color:"#e74c3c"},retail:{label:"Retail",Icon:f0,color:"#9b59b6"},services:{label:"Services",Icon:C2,color:"#3498db"},arts:{label:"Arts & Culture",Icon:D2,color:"#1abc9c"}};function SB(){const[n,e]=A.useState([]),[t,r]=A.useState(!0),[s,l]=A.useState({code:"",name:"",category:"food",address:"",placeId:"",photoUrl:"",website:""}),[c,h]=A.useState(!1),[d,m]=A.useState(null),[g,y]=A.useState(!1),[x,T]=A.useState(null),k=async()=>{const I=await Xi();e(I),r(!1)};A.useEffect(()=>{k()},[]);const S=async I=>{if(I.preventDefault(),!(!s.code||!s.name)){h(!0);try{await xk(s.code.toUpperCase(),s.name,s.category,{address:s.address,placeId:s.placeId,photoUrl:s.photoUrl,website:s.website}),l({code:"",name:"",category:"food",address:"",placeId:"",photoUrl:"",website:""}),await k()}catch(E){console.error("Error creating business:",E),alert("Error creating business")}h(!1)}},C=I=>{l({code:I.code,name:I.name,category:I.category,address:I.address||"",placeId:I.placeId||"",photoUrl:I.photoUrl||"",website:I.website||""})},N=async(I,E)=>{if(confirm(`Delete "${E}"? This cannot be undone.`))try{await R9(I),await k()}catch(R){console.error("Error deleting business:",R),alert("Error deleting business")}},L=async(I,E)=>{await N9(I,!E),await k()},M=async()=>{if(confirm("This will add all Kinderhook businesses. Continue?")){y(!0);try{for(const I of _B)n.find(R=>R.code===I.code)||await xk(I.code,I.name,I.category);await k(),alert("Businesses seeded successfully!")}catch(I){console.error("Error seeding:",I),alert("Error seeding businesses")}y(!1)}},U=I=>{navigator.clipboard.writeText(I),T(I),setTimeout(()=>T(null),2e3)},$="https://harmonicsystems.github.io/kinderbucks/#/checkin/",G={total:n.length,active:n.filter(I=>I.isActive).length,totalCheckins:n.reduce((I,E)=>I+(E.checkinCount||0),0)};return t?a.jsx(Qt,{title:"Business Directory",children:a.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:a.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading..."})})}):a.jsxs(Qt,{title:"Business Directory",children:[a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[a.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:G.total}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Businesses"})]}),a.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-green)"},children:G.active}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Active"})]}),a.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-gold-dark)"},children:G.totalCheckins}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Check-ins"})]})]}),a.jsxs("div",{className:"card",style:{marginBottom:"2rem"},children:[a.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(yl,{size:20})," Add Business"]}),a.jsxs("div",{style:{marginBottom:"1.5rem"},children:[a.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:[a.jsx(Mf,{size:16,style:{marginRight:"0.5rem",verticalAlign:"middle"}}),"Search Google Places"]}),a.jsx(kB,{onPlaceSelect:C,placeholder:"Search for a business by name..."}),a.jsx("p",{style:{marginTop:"0.5rem",fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Search to auto-fill details, or enter manually below"})]}),s.photoUrl&&a.jsxs("div",{style:{marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"1rem",padding:"1rem",background:"var(--kb-gray-50)",borderRadius:"8px"},children:[a.jsx("img",{src:s.photoUrl,alt:s.name,style:{width:"80px",height:"80px",objectFit:"cover",borderRadius:"8px"}}),a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:s.name}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:s.address}),s.website&&a.jsx("a",{href:s.website,target:"_blank",rel:"noopener noreferrer",style:{fontSize:"0.85rem",color:"var(--kb-gold-dark)"},children:s.website})]})]}),a.jsx("div",{style:{borderTop:"1px solid var(--kb-gray-200)",paddingTop:"1.5rem"},children:a.jsxs("form",{onSubmit:S,children:[a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1.5rem",marginBottom:"1.5rem"},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Code *"}),a.jsx("input",{type:"text",value:s.code,onChange:I=>l(E=>({...E,code:I.target.value.toUpperCase().replace(/[^A-Z0-9-]/g,"")})),placeholder:"CAFE-01",style:{width:"100%",fontFamily:"monospace"},required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Name *"}),a.jsx("input",{type:"text",value:s.name,onChange:I=>l(E=>({...E,name:I.target.value})),placeholder:"Village Caf",style:{width:"100%"},required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Category"}),a.jsx("select",{value:s.category,onChange:I=>l(E=>({...E,category:I.target.value})),style:{width:"100%"},children:Object.entries(Yp).map(([I,E])=>a.jsx("option",{value:I,children:E.label},I))})]})]}),a.jsxs("div",{style:{marginBottom:"1.5rem"},children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Address"}),a.jsx("input",{type:"text",value:s.address,onChange:I=>l(E=>({...E,address:I.target.value})),placeholder:"123 Main Street, Kinderhook, NY 12106",style:{width:"100%"}})]}),a.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[a.jsxs("button",{type:"submit",className:"btn btn-primary",disabled:c||!s.code||!s.name,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(yl,{size:18})," ",c?"Adding...":"Add Business"]}),a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:M,disabled:g,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(R2,{size:18})," ",g?"Seeding...":"Seed Kinderhook Businesses"]})]})]})})]}),a.jsxs("div",{className:"card",children:[a.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(St,{size:20})," Participating Businesses (",n.length,")"]}),n.length===0?a.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[a.jsx(St,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),a.jsx("p",{children:"No businesses yet. Add one above or seed the Kinderhook businesses."})]}):a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:n.map(I=>{const E=Yp[I.category]||Yp.services,R=E.Icon,V=`${$}${I.code}`;return a.jsxs("div",{style:{background:I.isActive?"var(--kb-white)":"var(--kb-gray-50)",border:`1px solid ${I.isActive,"var(--kb-gray-200)"}`,borderRadius:"12px",padding:"1.25rem",opacity:I.isActive?1:.7},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"1rem"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[I.photoUrl?a.jsx("img",{src:I.photoUrl,alt:I.name,style:{width:"48px",height:"48px",objectFit:"cover",borderRadius:"10px"}}):a.jsx("div",{style:{width:"48px",height:"48px",background:`${E.color}15`,borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(R,{size:24,color:E.color})}),a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:"600",color:I.isActive?"var(--kb-navy)":"var(--kb-gray-500)",fontSize:"1.1rem"},children:I.name}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginTop:"0.25rem",flexWrap:"wrap"},children:[a.jsx("span",{style:{fontFamily:"monospace",fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:I.code}),a.jsx("span",{style:{fontSize:"0.85rem",color:E.color},children:E.label}),I.address&&a.jsx("span",{style:{fontSize:"0.8rem",color:"var(--kb-gray-400)"},children:I.address.split(",")[0]})]})]})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1.5rem"},children:[a.jsxs("div",{style:{textAlign:"center"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"var(--kb-green)",fontWeight:"600"},children:[a.jsx(qs,{size:16}),I.checkinCount||0]}),a.jsx("div",{style:{fontSize:"0.75rem",color:"var(--kb-gray-500)"},children:"check-ins"})]}),a.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[a.jsxs(ue,{to:`/admin/businesses/${I.code}`,className:"btn btn-gold",style:{padding:"0.5rem 0.75rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:[a.jsx(P2,{size:16})," Details"]}),a.jsx("button",{onClick:()=>m(d===I.code?null:I.code),className:"btn btn-secondary",style:{padding:"0.5rem 0.75rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:a.jsx(Nr,{size:16})}),a.jsxs("button",{onClick:()=>L(I.code,I.isActive),className:"btn",style:{padding:"0.5rem 0.75rem",background:I.isActive?"#e74c3c":"var(--kb-green)",color:"white",display:"flex",alignItems:"center",gap:"0.25rem"},children:[I.isActive?a.jsx(f3,{size:16}):a.jsx(d3,{size:16}),I.isActive?"Deactivate":"Activate"]}),a.jsx("button",{onClick:()=>N(I.code,I.name),className:"btn",style:{padding:"0.5rem 0.75rem",background:"var(--kb-gray-100)",color:"var(--kb-gray-600)",display:"flex",alignItems:"center"},title:"Delete business",children:a.jsx(O2,{size:16})})]})]})]}),d===I.code&&a.jsxs("div",{style:{marginTop:"1.5rem",paddingTop:"1.5rem",borderTop:"1px solid var(--kb-gray-200)",display:"flex",alignItems:"center",gap:"2rem",flexWrap:"wrap"},children:[a.jsx("div",{style:{textAlign:"center"},children:a.jsx(xl,{value:V,size:150,denomination:5,showFrame:!1})}),a.jsxs("div",{style:{flex:1,minWidth:"200px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontSize:"0.85rem"},children:"Check-in URL"}),a.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[a.jsx("input",{type:"text",value:V,readOnly:!0,style:{flex:1,fontFamily:"monospace",fontSize:"0.85rem"}}),a.jsxs("button",{onClick:()=>U(V),className:"btn btn-secondary",style:{padding:"0.5rem 0.75rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:[a.jsx(d0,{size:16}),x===V?"Copied!":"Copy"]})]}),a.jsx("p",{style:{marginTop:"0.75rem",fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Print this QR code and display it at the counter for customers to scan when they visit."})]})]})]},I.code)})})]})]})}const EB={curious:on,hooked:pr,lineAndSinker:mr,patron:Yn};function TB(){const[n,e]=A.useState([]),[t,r]=A.useState(!0),[s,l]=A.useState("all"),[c,h]=A.useState(null),d=async()=>{try{const k=fr(Rt(je,"exchanges"),qi("createdAt","desc")),S=await gn(k);e(S.docs.map(C=>({id:C.id,...C.data()}))),r(!1)}catch(k){console.error("Error loading exchanges:",k),r(!1)}};A.useEffect(()=>{d()},[]);const m=async(k,S)=>{h(k);try{await Sn(rt(je,"exchanges",k),{status:S,processedAt:nt()}),await d()}catch(C){console.error("Error updating exchange:",C),alert("Error updating exchange status")}h(null)},g=s==="all"?n:n.filter(k=>k.status===s),y={total:n.length,pending:n.filter(k=>k.status==="pending").length,completed:n.filter(k=>k.status==="completed").length,cancelled:n.filter(k=>k.status==="cancelled").length,totalValue:n.filter(k=>k.status==="completed").reduce((k,S)=>k+(S.kinderbucksAmount||0),0)},x=k=>{switch(k){case"completed":return a.jsx(Mn,{size:18,color:"var(--kb-green)"});case"pending":return a.jsx(lr,{size:18,color:"#e67e22"});case"cancelled":return a.jsx(j2,{size:18,color:"#e74c3c"});default:return a.jsx(zs,{size:18,color:"var(--kb-gray-400)"})}},T=k=>{switch(k){case"completed":return{background:"#d4edda",color:"var(--kb-green)"};case"pending":return{background:"#fff3cd",color:"#856404"};case"cancelled":return{background:"#f8d7da",color:"#721c24"};default:return{background:"#f8f9fa",color:"var(--kb-gray-600)"}}};return t?a.jsx(Qt,{title:"Exchange Management",children:a.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:a.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading exchanges..."})})}):a.jsxs(Qt,{title:"Exchange Management",children:[a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[a.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"#e67e22"},children:y.pending}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Pending"})]}),a.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-green)"},children:y.completed}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Completed"})]}),a.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[a.jsxs("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-gold-dark)"},children:["$",y.totalValue.toFixed(0)]}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Exchanged"})]})]}),a.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem",flexWrap:"wrap"},children:[{value:"all",label:`All (${y.total})`},{value:"pending",label:`Pending (${y.pending})`},{value:"completed",label:`Completed (${y.completed})`},{value:"cancelled",label:`Cancelled (${y.cancelled})`}].map(k=>a.jsx("button",{onClick:()=>l(k.value),className:s===k.value?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem"},children:k.label},k.value))}),a.jsx("div",{className:"card",children:g.length===0?a.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[a.jsx(Pf,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),a.jsxs("p",{children:["No ",s!=="all"?s:""," exchanges found"]})]}):a.jsxs("div",{children:[a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 150px",gap:"1rem",padding:"0.75rem 1rem",borderBottom:"2px solid var(--kb-navy)",fontWeight:"600",color:"var(--kb-navy)",fontSize:"0.85rem"},children:[a.jsx("div",{children:"Date"}),a.jsx("div",{children:"Amount"}),a.jsx("div",{children:"Tier & Bonus"}),a.jsx("div",{children:"Status"}),a.jsx("div",{children:"Actions"})]}),g.map(k=>{var C,N,L,M,U,$,G;const S=EB[k.tier]||on;return a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 150px",gap:"1rem",padding:"1rem",borderBottom:"1px solid var(--kb-gray-100)",alignItems:"center",background:k.status==="pending"?"rgba(230, 126, 34, 0.05)":"transparent"},children:[a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:((L=(N=(C=k.createdAt)==null?void 0:C.toDate)==null?void 0:N.call(C))==null?void 0:L.toLocaleDateString())||"Unknown"}),a.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:(($=(U=(M=k.createdAt)==null?void 0:M.toDate)==null?void 0:U.call(M))==null?void 0:$.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))||""})]}),a.jsxs("div",{children:[a.jsxs("div",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:["$",k.usdAmount," USD"]}),a.jsxs("div",{style:{fontSize:"0.9rem",color:"var(--kb-gold-dark)"},children:[" $",(G=k.kinderbucksAmount)==null?void 0:G.toFixed(2)," KB"]})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(S,{size:18,color:"var(--kb-gray-500)"}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"0.9rem",color:"var(--kb-gray-700)",textTransform:"capitalize"},children:k.tier||"curious"}),a.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--kb-green)"},children:["+",Math.round((k.bonusRate||.1)*100),"% bonus"]})]})]}),a.jsx("div",{children:a.jsxs("span",{className:"badge",style:{...T(k.status),display:"inline-flex",alignItems:"center",gap:"0.25rem"},children:[x(k.status),k.status]})}),a.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[k.status==="pending"&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>m(k.id,"completed"),disabled:c===k.id,className:"btn btn-primary",style:{padding:"0.4rem 0.75rem",fontSize:"0.8rem"},children:c===k.id?"...":"Approve"}),a.jsx("button",{onClick:()=>m(k.id,"cancelled"),disabled:c===k.id,className:"btn btn-secondary",style:{padding:"0.4rem 0.75rem",fontSize:"0.8rem"},children:"Cancel"})]}),k.status==="completed"&&a.jsx("span",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Processed"}),k.status==="cancelled"&&a.jsx("button",{onClick:()=>m(k.id,"pending"),disabled:c===k.id,className:"btn btn-secondary",style:{padding:"0.4rem 0.75rem",fontSize:"0.8rem"},children:"Reopen"})]})]},k.id)})]})})]})}const Xp={curious:on,hooked:pr,lineAndSinker:mr,patron:Yn},Jp={curious:"#888888",hooked:"#2e7d32",lineAndSinker:"#1565c0",patron:"#c9a227"};function IB(){const[n,e]=A.useState([]),[t,r]=A.useState([]),[s,l]=A.useState(!0),[c,h]=A.useState("checkins"),[d,m]=A.useState("all");A.useEffect(()=>{async function k(){try{const C=(await gn(Rt(je,"members"))).docs.map(L=>({id:L.id,...L.data()})),N=await Xi();e(C),r(N),l(!1)}catch(S){console.error("Error loading members:",S),l(!1)}}k()},[]);const g=k=>{const S=t.find(C=>C.code===k);return S?S.name:k},y=[...n].sort((k,S)=>{var C,N,L,M,U,$;switch(c){case"checkins":return(S.totalCheckins||0)-(k.totalCheckins||0);case"businesses":return(((C=S.businessesVisited)==null?void 0:C.length)||0)-(((N=k.businessesVisited)==null?void 0:N.length)||0);case"recent":const G=((M=(L=k.lastCheckin)==null?void 0:L.toDate)==null?void 0:M.call(L))||new Date(0);return((($=(U=S.lastCheckin)==null?void 0:U.toDate)==null?void 0:$.call(U))||new Date(0))-G;default:return 0}}),x=d==="all"?y:y.filter(k=>k.tier===d),T={total:n.length,curious:n.filter(k=>k.tier==="curious").length,hooked:n.filter(k=>k.tier==="hooked").length,lineAndSinker:n.filter(k=>k.tier==="lineAndSinker").length,patron:n.filter(k=>k.tier==="patron").length,totalCheckins:n.reduce((k,S)=>k+(S.totalCheckins||0),0)};return s?a.jsx(Qt,{title:"Member Management",children:a.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:a.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading members..."})})}):a.jsxs(Qt,{title:"Member Management",children:[a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(130px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[a.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:T.total}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Members"})]}),Object.entries(Xp).map(([k,S])=>{var C;return a.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[a.jsx(S,{size:20,color:Jp[k]}),a.jsx("span",{style:{fontSize:"1.5rem",fontWeight:"700",color:Jp[k]},children:T[k]})]}),a.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)",textTransform:"capitalize"},children:((C=ur[k])==null?void 0:C.name)||k})]},k)})]}),a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[a.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[a.jsx("button",{onClick:()=>m("all"),className:d==="all"?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem"},children:"All"}),Object.entries(Xp).map(([k,S])=>a.jsx("button",{onClick:()=>m(k),className:d===k?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:a.jsx(S,{size:16})},k))]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx("span",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"Sort by:"}),a.jsxs("select",{value:c,onChange:k=>h(k.target.value),style:{padding:"0.5rem"},children:[a.jsx("option",{value:"checkins",children:"Most Check-ins"}),a.jsx("option",{value:"businesses",children:"Most Businesses"}),a.jsx("option",{value:"recent",children:"Recent Activity"})]})]})]}),a.jsx("div",{className:"card",children:x.length===0?a.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[a.jsx(Dr,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),a.jsx("p",{children:"No members found"})]}):a.jsxs("div",{children:[a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 2fr",gap:"1rem",padding:"0.75rem 1rem",borderBottom:"2px solid var(--kb-navy)",fontWeight:"600",color:"var(--kb-navy)",fontSize:"0.85rem"},children:[a.jsx("div",{children:"Member"}),a.jsx("div",{children:"Tier"}),a.jsx("div",{children:"Activity"}),a.jsx("div",{children:"Businesses Visited"})]}),x.map(k=>{var M,U,$,G,I;const S=Xp[k.tier]||on,C=Jp[k.tier]||"#888",N=ur[k.tier]||ur.curious,L=((M=k.businessesVisited)==null?void 0:M.length)||0;return a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 2fr",gap:"1rem",padding:"1rem",borderBottom:"1px solid var(--kb-gray-100)",alignItems:"center"},children:[a.jsxs("div",{children:[a.jsxs("div",{style:{fontFamily:"monospace",fontSize:"0.85rem",color:"var(--kb-gray-500)",wordBreak:"break-all"},children:[k.id.substring(0,16),"..."]}),k.lastCheckin&&a.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-400)",display:"flex",alignItems:"center",gap:"0.25rem",marginTop:"0.25rem"},children:[a.jsx(Nf,{size:12}),"Last: ",((G=($=(U=k.lastCheckin)==null?void 0:U.toDate)==null?void 0:$.call(U))==null?void 0:G.toLocaleDateString())||"Unknown"]})]}),a.jsxs("div",{children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:C,fontWeight:"600"},children:[a.jsx(S,{size:20}),N.name]}),a.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:[Math.round(N.bonus*100),"% bonus"]})]}),a.jsxs("div",{children:[a.jsxs("div",{style:{fontWeight:"600",color:"var(--kb-navy)",display:"flex",alignItems:"center",gap:"0.25rem"},children:[a.jsx(qs,{size:16}),k.totalCheckins||0]}),a.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:"check-ins"})]}),a.jsxs("div",{children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",marginBottom:"0.5rem",color:"var(--kb-gray-600)"},children:[a.jsx(gl,{size:14}),a.jsx("span",{style:{fontWeight:"500"},children:L}),a.jsx("span",{style:{fontSize:"0.85rem"},children:"businesses"})]}),((I=k.businessesVisited)==null?void 0:I.length)>0&&a.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.25rem"},children:[k.businessesVisited.slice(0,3).map(E=>a.jsx("span",{style:{fontSize:"0.75rem",padding:"0.15rem 0.5rem",background:"var(--kb-gray-100)",borderRadius:"4px",color:"var(--kb-gray-600)"},children:g(E)},E)),k.businessesVisited.length>3&&a.jsxs("span",{style:{fontSize:"0.75rem",color:"var(--kb-gray-400)"},children:["+",k.businessesVisited.length-3," more"]})]})]})]},k.id)})]})}),a.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"var(--kb-gray-50)",borderRadius:"8px",textAlign:"center",color:"var(--kb-gray-600)",fontSize:"0.9rem"},children:["Total of ",a.jsx("strong",{children:T.totalCheckins})," check-ins across ",a.jsx("strong",{children:T.total})," members"]})]})}const Zp={admin:{label:"Admin",color:"#dc2626",bgColor:"#fef2f2",Icon:Kh,description:"Full system access"},business:{label:"Business",color:"#2563eb",bgColor:"#eff6ff",Icon:St,description:"Business owner access"},member:{label:"Member",color:"var(--kb-green)",bgColor:"#f0fdf4",Icon:rl,description:"Regular member"}};function CB(){const[n,e]=A.useState([]),[t,r]=A.useState([]),[s,l]=A.useState(!0),[c,h]=A.useState(""),[d,m]=A.useState("all"),[g,y]=A.useState(null),[x,T]=A.useState(null),[k,S]=A.useState(""),[C,N]=A.useState(null),L=async()=>{const[E,R]=await Promise.all([lD(),Xi()]);e(E),r(R),l(!1)};A.useEffect(()=>{L()},[]);const M=async(E,R)=>{N(`${E}-${R}`);try{const V=n.find(F=>F.id===E);ii(V).includes(R)?await oD(E,R):await sD(E,R),S("Role updated successfully"),setTimeout(()=>S(""),3e3),await L()}catch(V){console.error("Error updating role:",V),alert("Error updating role")}N(null)},U=async(E,R)=>{try{await aD(E,R),S("Business assigned successfully"),setTimeout(()=>S(""),3e3),await L(),T(null)}catch(V){console.error("Error assigning business:",V),alert("Error assigning business")}},$=n.filter(E=>{var B,F;const R=((B=E.email)==null?void 0:B.toLowerCase().includes(c.toLowerCase()))||((F=E.displayName)==null?void 0:F.toLowerCase().includes(c.toLowerCase()));if(d==="all")return R;const V=ii(E);return R&&V.includes(d)}),G={total:n.length,admins:n.filter(E=>ii(E).includes("admin")).length,businesses:n.filter(E=>ii(E).includes("business")).length,members:n.filter(E=>ii(E).includes("member")).length},I=E=>E?(E.toDate?E.toDate():new Date(E)).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Never";return s?a.jsx(Qt,{title:"User Management",children:a.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:a.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading..."})})}):a.jsxs(Qt,{title:"User Management",children:[k&&a.jsxs("div",{style:{position:"fixed",top:"100px",right:"2rem",background:"var(--kb-green)",color:"white",padding:"1rem 1.5rem",borderRadius:"8px",display:"flex",alignItems:"center",gap:"0.75rem",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:1e3},children:[a.jsx(Mn,{size:20}),a.jsx("span",{children:k})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[a.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:G.total}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Users"})]}),a.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"#dc2626"},children:G.admins}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Admins"})]}),a.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"#2563eb"},children:G.businesses}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Business Users"})]}),a.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-green)"},children:G.members}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Members"})]})]}),a.jsx("div",{className:"card",style:{marginBottom:"2rem"},children:a.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap",alignItems:"center"},children:[a.jsxs("div",{style:{flex:1,minWidth:"200px",position:"relative"},children:[a.jsx(Mf,{size:18,color:"var(--kb-gray-400)",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)"}}),a.jsx("input",{type:"text",placeholder:"Search by name or email...",value:c,onChange:E=>h(E.target.value),style:{width:"100%",paddingLeft:"40px"}})]}),a.jsxs("select",{value:d,onChange:E=>m(E.target.value),style:{minWidth:"150px"},children:[a.jsx("option",{value:"all",children:"All Roles"}),a.jsx("option",{value:"admin",children:"Has Admin"}),a.jsx("option",{value:"business",children:"Has Business"}),a.jsx("option",{value:"member",children:"Has Member"})]})]})}),a.jsxs("div",{className:"card",children:[a.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(Dr,{size:20})," All Users (",$.length,")"]}),$.length===0?a.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[a.jsx(Dr,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),a.jsx("p",{children:"No users found"})]}):a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:$.map(E=>{const R=ii(E),V=R.includes("admin")?"admin":R.includes("business")?"business":"member",B=Zp[V],F=B.Icon;return a.jsxs("div",{style:{background:"var(--kb-gray-50)",border:"1px solid var(--kb-gray-200)",borderRadius:"12px",padding:"1.25rem"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",flexWrap:"wrap",gap:"1rem"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[a.jsx("div",{style:{width:"48px",height:"48px",background:B.bgColor,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(F,{size:24,color:B.color})}),a.jsxs("div",{children:[a.jsxs("div",{style:{fontWeight:"600",color:"var(--kb-navy)",fontSize:"1.05rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[E.displayName||"Unnamed User",R.includes("admin")&&a.jsx(Yn,{size:16,color:"#c9a227"})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:[a.jsx(M2,{size:14}),E.email]}),E.businessCode&&a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#2563eb",fontSize:"0.85rem",marginTop:"0.25rem"},children:[a.jsx(St,{size:14}),E.businessCode]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"var(--kb-gray-400)",fontSize:"0.8rem",marginTop:"0.25rem"},children:[a.jsx(Nf,{size:12}),"Last login: ",I(E.lastLogin)]})]})]}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:"0.75rem"},children:[a.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:R.map(D=>{const _e=Zp[D];return _e?a.jsxs("div",{style:{padding:"0.35rem 0.75rem",background:_e.bgColor,color:_e.color,borderRadius:"6px",fontSize:"0.8rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.35rem"},children:[a.jsx(_e.Icon,{size:14}),_e.label]},D):null})}),a.jsx("button",{onClick:()=>y(g===E.id?null:E.id),className:"btn btn-secondary",style:{padding:"0.4rem 0.75rem",fontSize:"0.8rem"},children:g===E.id?"Done":"Edit Roles"})]})]}),g===E.id&&a.jsxs("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:"1px solid var(--kb-gray-200)"},children:[a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)",marginBottom:"0.75rem"},children:"Toggle roles for this user:"}),a.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",marginBottom:"1rem"},children:Object.entries(Zp).map(([D,_e])=>{const Ve=R.includes(D),it=C===`${E.id}-${D}`;return a.jsxs("button",{onClick:()=>M(E.id,D),disabled:it,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",borderRadius:"8px",border:`2px solid ${Ve?_e.color:"var(--kb-gray-300)"}`,background:Ve?_e.bgColor:"white",color:Ve?_e.color:"var(--kb-gray-500)",cursor:it?"wait":"pointer",fontWeight:"500",fontSize:"0.9rem",opacity:it?.6:1},children:[Ve?a.jsx(TV,{size:16}):a.jsx(yl,{size:16}),a.jsx(_e.Icon,{size:16}),_e.label]},D)})}),R.includes("business")&&a.jsxs("button",{onClick:()=>T(E.id),className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem"},children:[a.jsx(St,{size:16}),E.businessCode?`Change Business (${E.businessCode})`:"Assign Business"]})]})]},E.id)})})]}),x&&a.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:1e3},children:a.jsxs("div",{className:"card",style:{maxWidth:"400px",width:"100%",padding:"1.5rem"},children:[a.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Assign Business"}),a.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1rem"},children:"Select a business to assign to this user:"}),a.jsx("div",{style:{maxHeight:"300px",overflowY:"auto",marginBottom:"1rem"},children:t.map(E=>a.jsxs("button",{onClick:()=>U(x,E.code),style:{display:"flex",alignItems:"center",gap:"0.75rem",width:"100%",padding:"0.75rem",border:"1px solid var(--kb-gray-200)",borderRadius:"8px",background:"white",cursor:"pointer",marginBottom:"0.5rem",textAlign:"left"},children:[a.jsx(St,{size:18,color:"var(--kb-navy)"}),a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:E.name}),a.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:E.code})]})]},E.code))}),a.jsx("button",{onClick:()=>T(null),className:"btn btn-secondary",style:{width:"100%"},children:"Cancel"})]})})]})}const _k={curious:on,hooked:pr,lineAndSinker:mr,patron:Yn},Sk={curious:"#6b7280",hooked:"#16a34a",lineAndSinker:"#2563eb",patron:"#ca8a04"};function jB(){const{businessCode:n}=cy(),[e,t]=A.useState(null),[r,s]=A.useState([]),[l,c]=A.useState(!0),[h,d]=A.useState(!1);A.useEffect(()=>{async function S(){const[C,N]=await Promise.all([Bf(n),BT(n)]);t(C),s(N),c(!1)}S()},[n]);const m=()=>{const S=`https://harmonicsystems.github.io/kinderbucks/#/checkin/${n}`;navigator.clipboard.writeText(S),d(!0),setTimeout(()=>d(!1),2e3)},g=r.filter(S=>{var L;const C=(L=S.timestamp)!=null&&L.toDate?S.timestamp.toDate():new Date(S.timestamp),N=new Date;return C.toDateString()===N.toDateString()}).length,y=r.filter(S=>{var L;const C=(L=S.timestamp)!=null&&L.toDate?S.timestamp.toDate():new Date(S.timestamp),N=new Date;return N.setDate(N.getDate()-7),C>N}).length,x=new Set(r.map(S=>S.visitorId)).size,T=r.reduce((S,C)=>{const N=C.memberTier||"curious";return S[N]=(S[N]||0)+1,S},{});if(l)return a.jsx(Qt,{title:"Business Details",children:a.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:a.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading..."})})});if(!e)return a.jsx(Qt,{title:"Business Details",children:a.jsxs("div",{style:{textAlign:"center",padding:"4rem"},children:[a.jsx(St,{size:48,color:"var(--kb-gray-300)",style:{marginBottom:"1rem"}}),a.jsx("h2",{style:{color:"var(--kb-navy)"},children:"Business Not Found"}),a.jsxs("p",{style:{color:"var(--kb-gray-500)",marginBottom:"1.5rem"},children:['No business with code "',n,'" exists.']}),a.jsx(ue,{to:"/admin/businesses",className:"btn btn-primary",children:"Back to Businesses"})]})});const k=`https://harmonicsystems.github.io/kinderbucks/#/checkin/${n}`;return a.jsxs(Qt,{title:"Business Details",children:[a.jsxs(ue,{to:"/admin/businesses",style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",color:"var(--kb-gray-500)",marginBottom:"1.5rem",fontSize:"0.9rem"},children:[a.jsx(I2,{size:16})," Back to Directory"]}),a.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",flexWrap:"wrap",gap:"1.5rem",marginBottom:"2rem"},children:[a.jsxs("div",{children:[a.jsx("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.25rem 0.75rem",background:e.isActive?"rgba(39, 174, 96, 0.1)":"rgba(231, 76, 60, 0.1)",color:e.isActive?"var(--kb-green)":"#e74c3c",borderRadius:"6px",fontSize:"0.85rem",fontWeight:"600",marginBottom:"0.75rem"},children:e.isActive?"Active":"Inactive"}),a.jsx("h1",{style:{color:"var(--kb-navy)",marginBottom:"0.25rem",fontSize:"2rem"},children:e.name}),a.jsx("div",{style:{fontFamily:"monospace",color:"var(--kb-gray-500)"},children:n})]}),a.jsxs("div",{className:"card",style:{padding:"1.5rem",textAlign:"center"},children:[a.jsx("div",{style:{background:"white",borderRadius:"12px",padding:"12px",marginBottom:"1rem"},children:a.jsx(xl,{value:k,size:120,showFrame:!1})}),a.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[a.jsxs("button",{onClick:m,className:"btn btn-secondary",style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.25rem",fontSize:"0.85rem"},children:[a.jsx(d0,{size:14})," ",h?"Copied!":"Copy URL"]}),a.jsxs("button",{onClick:()=>window.print(),className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"0.85rem"},children:[a.jsx(R2,{size:14})," Print"]})]})]})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[a.jsx("div",{className:"card",style:{padding:"1.25rem"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[a.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(39, 174, 96, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(qs,{size:22,color:"var(--kb-green)"})}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:e.checkinCount||0}),a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Total Check-ins"})]})]})}),a.jsx("div",{className:"card",style:{padding:"1.25rem"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[a.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(52, 152, 219, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(lr,{size:22,color:"#3498db"})}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:g}),a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Today"})]})]})}),a.jsx("div",{className:"card",style:{padding:"1.25rem"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[a.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(155, 89, 182, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(Nf,{size:22,color:"#9b59b6"})}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:y}),a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"This Week"})]})]})}),a.jsx("div",{className:"card",style:{padding:"1.25rem"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[a.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(201, 162, 39, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(Dr,{size:22,color:"var(--kb-gold-dark)"})}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:x}),a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Unique Visitors"})]})]})})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem"},children:[a.jsxs("div",{className:"card",children:[a.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem"},children:"Check-ins by Member Tier"}),Object.keys(T).length===0?a.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"No check-ins yet"}):a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:["curious","hooked","lineAndSinker","patron"].map(S=>{const C=T[S]||0;if(C===0&&!T[S])return null;const N=_k[S],L=Sk[S],M={curious:"Curious",hooked:"Hooked",lineAndSinker:"Line & Sinker",patron:"Village Patron"},U=Math.max(...Object.values(T),1),$=C/U*100;return a.jsxs("div",{children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.5rem"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(N,{size:18,color:L}),a.jsx("span",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:M[S]})]}),a.jsx("span",{style:{color:"var(--kb-gray-500)",fontWeight:"600"},children:C})]}),a.jsx("div",{style:{height:"8px",background:"var(--kb-gray-100)",borderRadius:"4px",overflow:"hidden"},children:a.jsx("div",{style:{width:`${$}%`,height:"100%",background:L,borderRadius:"4px"}})})]},S)}).filter(Boolean)})]}),a.jsxs("div",{className:"card",children:[a.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Check-in Information"}),a.jsxs("div",{style:{marginBottom:"1rem"},children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontSize:"0.85rem"},children:"Check-in URL"}),a.jsx("input",{type:"text",value:k,readOnly:!0,style:{width:"100%",fontFamily:"monospace",fontSize:"0.85rem"}})]}),a.jsxs("div",{style:{background:"var(--kb-cream)",borderRadius:"8px",padding:"1rem"},children:[a.jsx("h4",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem",fontSize:"0.95rem"},children:"How Check-ins Work"}),a.jsxs("ul",{style:{color:"var(--kb-gray-600)",fontSize:"0.9rem",paddingLeft:"1.25rem",lineHeight:1.6},children:[a.jsx("li",{children:"Customer scans QR code with phone"}),a.jsx("li",{children:"App shows verification code + bonus %"}),a.jsx("li",{children:"Customer shows screen to cashier"}),a.jsx("li",{children:"1 hour cooldown between check-ins"})]})]})]})]}),a.jsxs("div",{className:"card",style:{marginTop:"1.5rem"},children:[a.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(lr,{size:20})," Recent Check-ins"]}),r.length===0?a.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[a.jsx(Dr,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),a.jsx("p",{children:"No check-ins recorded yet"})]}):a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:r.slice(0,25).map((S,C)=>{var U,$;const N=(U=S.timestamp)!=null&&U.toDate?S.timestamp.toDate():new Date(S.timestamp),L=_k[S.memberTier]||on,M=Sk[S.memberTier]||"#6b7280";return a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"var(--kb-gray-50)",borderRadius:"8px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[a.jsx("div",{style:{width:"36px",height:"36px",background:"var(--kb-green)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(Mn,{size:18,color:"white"})}),a.jsxs("div",{children:[a.jsxs("div",{style:{fontWeight:"500",color:"var(--kb-navy)",display:"flex",alignItems:"center",gap:"0.5rem"},children:["Check-in",S.memberTier&&a.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",fontSize:"0.75rem",color:M,background:`${M}15`,padding:"0.125rem 0.5rem",borderRadius:"4px"},children:[a.jsx(L,{size:12}),S.memberTier]})]}),a.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)",fontFamily:"monospace"},children:[($=S.visitorId)==null?void 0:$.substring(0,8),"..."]})]})]}),a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:N.toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]},S.id||C)})})]})]})}function AB(){const{user:n}=Or(),[e,t]=A.useState([]),[r,s]=A.useState(!0),[l,c]=A.useState("all"),[h,d]=A.useState(null),m=async()=>{try{const S=await fB();t(S),s(!1)}catch(S){console.error("Error loading redemptions:",S),s(!1)}};A.useEffect(()=>{m()},[]);const g=async(S,C)=>{d(S);try{await hB(S,C,n.uid),await m()}catch(N){console.error("Error processing redemption:",N),alert("Error processing redemption: "+N.message)}d(null)},y=l==="all"?e:e.filter(S=>S.status===l),x={total:e.length,pending:e.filter(S=>S.status==="pending").length,approved:e.filter(S=>S.status==="approved").length,rejected:e.filter(S=>S.status==="rejected").length,totalValue:e.filter(S=>S.status==="approved").reduce((S,C)=>S+(C.amount||0),0)},T=S=>{switch(S){case"approved":return a.jsx(Mn,{size:18,color:"var(--kb-green)"});case"pending":return a.jsx(lr,{size:18,color:"#e67e22"});case"rejected":return a.jsx(j2,{size:18,color:"#e74c3c"});default:return a.jsx(zs,{size:18,color:"var(--kb-gray-400)"})}},k=S=>{switch(S){case"approved":return{background:"#d4edda",color:"var(--kb-green)"};case"pending":return{background:"#fff3cd",color:"#856404"};case"rejected":return{background:"#f8d7da",color:"#721c24"};default:return{background:"#f8f9fa",color:"var(--kb-gray-600)"}}};return r?a.jsx(Qt,{title:"Redemption Requests",children:a.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:a.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading redemptions..."})})}):a.jsxs(Qt,{title:"Redemption Requests",children:[a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[a.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"#e67e22"},children:x.pending}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Pending"})]}),a.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-green)"},children:x.approved}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Approved"})]}),a.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"#e74c3c"},children:x.rejected}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Rejected"})]}),a.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[a.jsxs("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-gold-dark)"},children:["$",x.totalValue.toFixed(0)]}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Redeemed"})]})]}),a.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem",flexWrap:"wrap"},children:[{value:"all",label:`All (${x.total})`},{value:"pending",label:`Pending (${x.pending})`},{value:"approved",label:`Approved (${x.approved})`},{value:"rejected",label:`Rejected (${x.rejected})`}].map(S=>a.jsx("button",{onClick:()=>c(S.value),className:l===S.value?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem"},children:S.label},S.value))}),a.jsx("div",{className:"card",children:y.length===0?a.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[a.jsx(Bi,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),a.jsxs("p",{children:["No ",l!=="all"?l:""," redemption requests"]})]}):a.jsxs("div",{children:[a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 150px",gap:"1rem",padding:"0.75rem 1rem",borderBottom:"2px solid var(--kb-navy)",fontWeight:"600",color:"var(--kb-navy)",fontSize:"0.85rem"},children:[a.jsx("div",{children:"Date"}),a.jsx("div",{children:"Business"}),a.jsx("div",{children:"Amount"}),a.jsx("div",{children:"Status"}),a.jsx("div",{children:"Actions"})]}),y.map(S=>{var C,N,L,M,U,$,G;return a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 150px",gap:"1rem",padding:"1rem",borderBottom:"1px solid var(--kb-gray-100)",alignItems:"center",background:S.status==="pending"?"rgba(230, 126, 34, 0.05)":"transparent"},children:[a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:((L=(N=(C=S.createdAt)==null?void 0:C.toDate)==null?void 0:N.call(C))==null?void 0:L.toLocaleDateString())||"Unknown"}),a.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:(($=(U=(M=S.createdAt)==null?void 0:M.toDate)==null?void 0:U.call(M))==null?void 0:$.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))||""})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(St,{size:18,color:"var(--kb-gray-400)"}),a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:S.businessName||S.businessCode}),a.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:S.businessCode})]})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx($h,{size:18,color:"var(--kb-gold-dark)"}),a.jsxs("span",{style:{fontSize:"1.25rem",fontWeight:"600",color:"var(--kb-navy)"},children:["$",(G=S.amount)==null?void 0:G.toFixed(2)]})]}),a.jsx("div",{children:a.jsxs("span",{className:"badge",style:{...k(S.status),display:"inline-flex",alignItems:"center",gap:"0.25rem"},children:[T(S.status),S.status]})}),a.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[S.status==="pending"&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>g(S.id,!0),disabled:h===S.id,className:"btn btn-primary",style:{padding:"0.4rem 0.75rem",fontSize:"0.8rem"},children:h===S.id?"...":"Approve"}),a.jsx("button",{onClick:()=>g(S.id,!1),disabled:h===S.id,className:"btn btn-secondary",style:{padding:"0.4rem 0.75rem",fontSize:"0.8rem"},children:"Reject"})]}),S.status==="approved"&&a.jsx("span",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Processed"}),S.status==="rejected"&&a.jsx("span",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Rejected"})]})]},S.id)})]})})]})}function RB(){const{profile:n}=Or(),e=Ys(),[t,r]=A.useState(""),[s,l]=A.useState(!1),[c,h]=A.useState(null),[d,m]=A.useState(""),[g,y]=A.useState(!1),[x,T]=A.useState(null),[k,S]=A.useState("");A.useState(()=>{async function U(){if(n!=null&&n.businessCode){const $=await Bf(n.businessCode);$&&S($.name)}}U()},[n==null?void 0:n.businessCode]);const C=async U=>{U.preventDefault(),m(""),h(null);const $=t.trim().toUpperCase();if(!$){m("Please enter a serial number");return}l(!0);try{const G=await Q9($);G.valid?h(G.kb):m(G.error)}catch(G){console.error("Validation error:",G),m("Failed to validate serial number")}l(!1)},N=async()=>{if(!(!c||!(n!=null&&n.businessCode))){y(!0);try{await cB(c.serial,n.businessCode,k),T({serial:c.serial,amount:c.denomination}),h(null),r("")}catch(U){console.error("Payment error:",U),m("Failed to record payment")}y(!1)}},L=()=>{r(""),h(null),m(""),T(null)};if(!(n!=null&&n.businessCode))return a.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"var(--kb-cream)",padding:"2rem"},children:a.jsxs("div",{className:"card",style:{maxWidth:"400px",textAlign:"center",padding:"2rem"},children:[a.jsx(zs,{size:48,color:"var(--kb-gray-400)",style:{marginBottom:"1rem"}}),a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"No Business Assigned"}),a.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem"},children:"You need a business account to accept payments."}),a.jsx(ue,{to:"/",className:"btn btn-primary",children:"Go Home"})]})});const M=U=>{switch(U){case 1:return"#27ae60";case 5:return"#3498db";case 10:return"#9b59b6";case 20:return"#e67e22";case 50:return"#c0392b";default:return"var(--kb-gold)"}};return a.jsxs("div",{style:{minHeight:"100vh",background:"var(--kb-navy)",display:"flex",flexDirection:"column"},children:[a.jsxs("header",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem 1.5rem",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:[a.jsxs(ue,{to:"/business/dashboard",style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--kb-gray-300)",textDecoration:"none"},children:[a.jsx(I2,{size:20}),"Back to Dashboard"]}),a.jsx("div",{style:{color:"var(--kb-gold)",fontWeight:"500"},children:k})]}),a.jsx("main",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem"},children:a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{width:"100%",maxWidth:"500px"},children:[x&&a.jsxs("div",{className:"card",style:{padding:"3rem 2rem",textAlign:"center"},children:[a.jsx(de.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200,damping:15},children:a.jsx("div",{style:{width:"80px",height:"80px",background:"rgba(39, 174, 96, 0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.5rem"},children:a.jsx(Mn,{size:40,color:"var(--kb-green)"})})}),a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"Payment Accepted"}),a.jsxs("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem"},children:["$",x.amount," Kinderbuck has been added to your balance"]}),a.jsx("div",{style:{background:"var(--kb-gray-50)",borderRadius:"8px",padding:"1rem",marginBottom:"2rem",fontFamily:"monospace",fontSize:"1.25rem",color:"var(--kb-navy)"},children:x.serial}),a.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[a.jsxs("button",{onClick:L,className:"btn btn-gold",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(yl,{size:18}),"Accept Another"]}),a.jsx("button",{onClick:()=>e("/business/dashboard"),className:"btn btn-secondary",children:"Done"})]})]}),c&&!x&&a.jsxs("div",{className:"card",style:{padding:"2rem"},children:[a.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"Confirm Payment"}),a.jsx("p",{style:{color:"var(--kb-gray-600)"},children:"Review the Kinderbuck details below"})]}),a.jsx("div",{style:{background:"linear-gradient(135deg, var(--kb-cream) 0%, var(--kb-gray-100) 100%)",borderRadius:"16px",padding:"2rem",marginBottom:"1.5rem",border:`3px solid ${M(c.denomination)}`},children:a.jsxs("div",{style:{textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"0.75rem",color:"var(--kb-gray-500)",textTransform:"uppercase",letterSpacing:"0.1em",marginBottom:"0.5rem"},children:"Serial Number"}),a.jsx("div",{style:{fontFamily:"monospace",fontSize:"1.5rem",fontWeight:"600",color:"var(--kb-navy)",marginBottom:"1.5rem"},children:c.serial}),a.jsxs("div",{style:{fontSize:"4rem",fontWeight:"700",color:M(c.denomination),lineHeight:1},children:["$",c.denomination]}),a.jsx("div",{style:{fontSize:"0.9rem",color:"var(--kb-gray-600)",marginTop:"0.5rem"},children:"Kinderbuck"})]})}),d&&a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",background:"#fef2f2",borderRadius:"8px",color:"#dc2626",marginBottom:"1rem",fontSize:"0.9rem"},children:[a.jsx(zs,{size:18}),d]}),a.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[a.jsxs("button",{onClick:L,className:"btn btn-secondary",style:{flex:1},disabled:g,children:[a.jsx(p0,{size:18,style:{marginRight:"0.5rem"}}),"Cancel"]}),a.jsx("button",{onClick:N,className:"btn btn-primary",style:{flex:1},disabled:g,children:g?"Processing...":a.jsxs(a.Fragment,{children:[a.jsx(Mn,{size:18,style:{marginRight:"0.5rem"}}),"Accept $",c.denomination]})})]})]}),!c&&!x&&a.jsxs("div",{className:"card",style:{padding:"2rem"},children:[a.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[a.jsx("div",{style:{width:"64px",height:"64px",background:"rgba(201, 162, 39, 0.1)",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:a.jsx(Bi,{size:32,color:"var(--kb-gold-dark)"})}),a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"Accept Kinderbuck Payment"}),a.jsx("p",{style:{color:"var(--kb-gray-600)"},children:"Enter the serial number from the physical bill"})]}),a.jsxs("form",{onSubmit:C,children:[a.jsxs("div",{style:{marginBottom:"1.5rem"},children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Serial Number"}),a.jsx("input",{type:"text",value:t,onChange:U=>r(U.target.value.toUpperCase()),placeholder:"KB-0001",style:{width:"100%",fontFamily:"monospace",fontSize:"1.25rem",textAlign:"center",letterSpacing:"0.1em"},autoFocus:!0})]}),d&&a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",background:"#fef2f2",borderRadius:"8px",color:"#dc2626",marginBottom:"1rem",fontSize:"0.9rem"},children:[a.jsx(zs,{size:18}),d]}),a.jsx("button",{type:"submit",className:"btn btn-gold",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",padding:"1rem",fontSize:"1.1rem"},disabled:s,children:s?"Validating...":a.jsxs(a.Fragment,{children:[a.jsx(Mf,{size:20}),"Validate"]})})]}),a.jsxs("div",{style:{marginTop:"2rem",padding:"1rem",background:"var(--kb-gray-50)",borderRadius:"8px",fontSize:"0.85rem",color:"var(--kb-gray-600)"},children:[a.jsx("strong",{children:"Tip:"})," The serial number is printed on the front of the Kinderbuck bill, typically in the format KB-XXXX."]})]})]})})]})}const PB={AVIARY:{address:"4 Hudson Street, Kinderhook, NY 12106",phone:"(518) 610-8543",website:"https://theaviarykinderhook.com",hours:{monday:"Closed",tuesday:"Closed",wednesday:"5:00 PM - 9:00 PM",thursday:"5:00 PM - 9:00 PM",friday:"5:00 PM - 10:00 PM",saturday:"5:00 PM - 10:00 PM",sunday:"5:00 PM - 9:00 PM"}},MORNINGBIRD:{address:"4 Hudson Street, Kinderhook, NY 12106",phone:"(518) 610-8543",website:"https://theaviarykinderhook.com/morningbird",hours:{monday:"Closed",tuesday:"8:00 AM - 3:00 PM",wednesday:"8:00 AM - 3:00 PM",thursday:"8:00 AM - 3:00 PM",friday:"8:00 AM - 3:00 PM",saturday:"8:00 AM - 3:00 PM",sunday:"8:00 AM - 3:00 PM"}},SAISONNIER:{address:"11 Chatham Street, Kinderhook, NY 12106",phone:"(518) 610-8100",website:"https://www.saisonnier.us",hours:{monday:"Closed",tuesday:"Closed",wednesday:"5:00 PM - 9:00 PM",thursday:"5:00 PM - 9:00 PM",friday:"5:00 PM - 10:00 PM",saturday:"11:30 AM - 2:30 PM, 5:00 PM - 10:00 PM",sunday:"11:30 AM - 2:30 PM, 5:00 PM - 9:00 PM"}},"BROADST-BAGEL":{address:"1 Broad Street, Kinderhook, NY 12106",phone:"(518) 758-8084",website:"https://broadstreetbagelco.com",hours:{monday:"7:00 AM - 2:00 PM",tuesday:"7:00 AM - 2:00 PM",wednesday:"7:00 AM - 2:00 PM",thursday:"7:00 AM - 2:00 PM",friday:"7:00 AM - 2:00 PM",saturday:"7:00 AM - 2:00 PM",sunday:"8:00 AM - 1:00 PM"}},"BOTTLE-SHOP":{address:"8 Hudson Street, Kinderhook, NY 12106",phone:"(518) 610-8111",website:"https://kinderhookbottleshop.com",hours:{monday:"12:00 PM - 7:00 PM",tuesday:"12:00 PM - 7:00 PM",wednesday:"12:00 PM - 7:00 PM",thursday:"12:00 PM - 7:00 PM",friday:"12:00 PM - 8:00 PM",saturday:"11:00 AM - 8:00 PM",sunday:"12:00 PM - 5:00 PM"}},"OLD-DUTCH":{address:"8 Broad Street, Kinderhook, NY 12106",phone:"(518) 203-3347",website:"https://theolddutchinn.com",hours:{monday:"Closed",tuesday:"Closed",wednesday:"5:00 PM - 9:00 PM",thursday:"5:00 PM - 9:00 PM",friday:"5:00 PM - 10:00 PM",saturday:"11:00 AM - 10:00 PM",sunday:"11:00 AM - 8:00 PM"}},SAMASCOTTS:{address:"65 Chatham Street, Kinderhook, NY 12106",phone:"(518) 758-9292",website:"https://www.samascott.com/gardenmarket",hours:{monday:"9:00 AM - 6:00 PM",tuesday:"9:00 AM - 6:00 PM",wednesday:"9:00 AM - 6:00 PM",thursday:"9:00 AM - 6:00 PM",friday:"9:00 AM - 6:00 PM",saturday:"9:00 AM - 6:00 PM",sunday:"9:00 AM - 5:00 PM"}},"SAMASCOTT-ORCHARDS":{address:"5 Sunset Avenue, Kinderhook, NY 12106",phone:"(518) 758-7224",website:"https://www.samascott.com",hours:{monday:"9:00 AM - 6:00 PM",tuesday:"9:00 AM - 6:00 PM",wednesday:"9:00 AM - 6:00 PM",thursday:"9:00 AM - 6:00 PM",friday:"9:00 AM - 6:00 PM",saturday:"9:00 AM - 6:00 PM",sunday:"9:00 AM - 5:00 PM"}},"SCHOOL-GALLERY":{address:"25 Broad Street, Kinderhook, NY 12106",phone:"(518) 758-1620",website:"https://jackshainman.com/the_school",hours:{monday:"Closed",tuesday:"Closed",wednesday:"11:00 AM - 6:00 PM",thursday:"11:00 AM - 6:00 PM",friday:"11:00 AM - 6:00 PM",saturday:"11:00 AM - 6:00 PM",sunday:"Closed"}},ISOLA:{address:"16 Hudson Street, Kinderhook, NY 12106",phone:"(518) 567-7181",website:"https://isolawinebar.com",hours:{monday:"Closed",tuesday:"Closed",wednesday:"4:00 PM - 9:00 PM",thursday:"4:00 PM - 9:00 PM",friday:"4:00 PM - 10:00 PM",saturday:"12:00 PM - 10:00 PM",sunday:"12:00 PM - 8:00 PM"}},"VILLAGE-YOGA":{address:"6 Hudson Street, 2nd Floor, Kinderhook, NY 12106",phone:"(518) 610-8135",website:"https://villageyoga.co",hours:{monday:"9:00 AM - 7:00 PM",tuesday:"9:00 AM - 7:00 PM",wednesday:"9:00 AM - 7:00 PM",thursday:"9:00 AM - 7:00 PM",friday:"9:00 AM - 5:00 PM",saturday:"9:00 AM - 12:00 PM",sunday:"Closed"}},"WALSH-DENTISTRY":{address:"3 Hudson Street, 2nd Floor, Kinderhook, NY 12106",phone:"(518) 758-7071",website:"https://walshdentistry.com",hours:{monday:"8:00 AM - 5:00 PM",tuesday:"8:00 AM - 5:00 PM",wednesday:"8:00 AM - 5:00 PM",thursday:"8:00 AM - 5:00 PM",friday:"8:00 AM - 3:00 PM",saturday:"Closed",sunday:"Closed"}},"FEED-SEED":{address:"22 Hudson Street, Kinderhook, NY 12106",hours:{monday:"9:00 AM - 5:00 PM",tuesday:"9:00 AM - 5:00 PM",wednesday:"9:00 AM - 5:00 PM",thursday:"9:00 AM - 5:00 PM",friday:"9:00 AM - 5:00 PM",saturday:"9:00 AM - 4:00 PM",sunday:"Closed"}}};function eg(n){if(!n)return null;const e=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],t=new Date,r=e[t.getDay()],s=n[r];if(!s||s==="Closed")return!1;const l=s.match(/(\d+):(\d+)\s*(AM|PM)/gi);if(!l||l.length<2)return null;const c=t.getHours(),h=t.getMinutes(),d=c*60+h,m=s.match(/(\d+):(\d+)\s*(AM|PM)/i);if(m){let g=parseInt(m[1]);const y=parseInt(m[2]),x=m[3].toUpperCase();x==="PM"&&g!==12&&(g+=12),x==="AM"&&g===12&&(g=0);const T=g*60+y,k=s.match(/(\d+):(\d+)\s*(AM|PM)/gi);if(k&&k.length>=2){const S=k[k.length-1].match(/(\d+):(\d+)\s*(AM|PM)/i);if(S){let C=parseInt(S[1]);const N=parseInt(S[2]),L=S[3].toUpperCase();L==="PM"&&C!==12&&(C+=12),L==="AM"&&C===12&&(C=0);const M=C*60+N;return d>=T&&d<M}}}return null}function NB(n){if(!n)return"Hours not available";const r=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][new Date().getDay()];return n[r]||"Hours not available"}const MB=42.3944,DB=-73.7059,Ek={0:{icon:Zw,description:"Clear sky",suggestion:"Perfect day to explore the village!"},1:{icon:Zw,description:"Mainly clear",suggestion:"Great weather for a village stroll!"},2:{icon:nh,description:"Partly cloudy",suggestion:"Nice day to visit local shops!"},3:{icon:nh,description:"Overcast",suggestion:"Good day to cozy up at a cafe!"},45:{icon:nh,description:"Foggy",suggestion:"Mysterious village vibes today!"},48:{icon:nh,description:"Foggy",suggestion:"Grab a warm drink at a local cafe!"},51:{icon:Ri,description:"Light drizzle",suggestion:"Pop into a shop to stay dry!"},53:{icon:Ri,description:"Drizzle",suggestion:"Perfect excuse for a coffee break!"},55:{icon:Ri,description:"Heavy drizzle",suggestion:"Browse the bookstore while it passes!"},61:{icon:Ri,description:"Light rain",suggestion:"Duck into a local business!"},63:{icon:Ri,description:"Rain",suggestion:"Great day for indoor shopping!"},65:{icon:Ri,description:"Heavy rain",suggestion:"Stay cozy at a village restaurant!"},71:{icon:Fa,description:"Light snow",suggestion:"Beautiful! Warm up with hot cocoa!"},73:{icon:Fa,description:"Snow",suggestion:"Snow day! Explore the charming village!"},75:{icon:Fa,description:"Heavy snow",suggestion:"Cozy up at a local spot!"},77:{icon:Fa,description:"Snow grains",suggestion:"Winter wonderland vibes!"},80:{icon:Ri,description:"Light showers",suggestion:"Quick visits between showers!"},81:{icon:Ri,description:"Showers",suggestion:"Pop into shops along the way!"},82:{icon:Ri,description:"Heavy showers",suggestion:"Find shelter at a cozy cafe!"},85:{icon:Fa,description:"Snow showers",suggestion:"Magical village views!"},86:{icon:Fa,description:"Heavy snow showers",suggestion:"Warm drinks are calling!"},95:{icon:Pp,description:"Thunderstorm",suggestion:"Stay safe indoors!"},96:{icon:Pp,description:"Thunderstorm with hail",suggestion:"Seek shelter in a shop!"},99:{icon:Pp,description:"Severe thunderstorm",suggestion:"Stay safe inside!"}};function VB({compact:n=!1}){const[e,t]=A.useState(null),[r,s]=A.useState(!0),[l,c]=A.useState(null);if(A.useEffect(()=>{async function m(){var y,x,T,k;try{const S=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${MB}&longitude=${DB}&current=temperature_2m,relative_humidity_2m,weather_code,wind_speed_10m&daily=sunrise,sunset&temperature_unit=fahrenheit&wind_speed_unit=mph&timezone=America%2FNew_York`);if(!S.ok)throw new Error("Weather fetch failed");const C=await S.json(),N=(x=(y=C.daily)==null?void 0:y.sunrise)!=null&&x[0]?new Date(C.daily.sunrise[0]):null,L=(k=(T=C.daily)==null?void 0:T.sunset)!=null&&k[0]?new Date(C.daily.sunset[0]):null;t({temp:Math.round(C.current.temperature_2m),humidity:C.current.relative_humidity_2m,windSpeed:Math.round(C.current.wind_speed_10m),code:C.current.weather_code,sunrise:N,sunset:L}),s(!1)}catch(S){console.error("Weather error:",S),c("Could not load weather"),s(!1)}}m();const g=setInterval(m,1800*1e3);return()=>clearInterval(g)},[]),r)return a.jsx("div",{style:{background:"linear-gradient(135deg, #4a90d9 0%, #67b8e3 100%)",borderRadius:"12px",padding:n?"0.75rem 1rem":"1rem 1.25rem",color:"white",opacity:.7},children:"Loading weather..."});if(l||!e)return null;const h=Ek[e.code]||Ek[0],d=h.icon;return n?a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",background:"linear-gradient(135deg, #4a90d9 0%, #67b8e3 100%)",borderRadius:"10px",padding:"0.5rem 1rem",color:"white"},children:[a.jsx(d,{size:24}),a.jsxs("span",{style:{fontSize:"1.25rem",fontWeight:"700"},children:[e.temp,"F"]}),a.jsx("span",{style:{opacity:.9,fontSize:"0.85rem"},children:h.description})]}):a.jsxs("div",{style:{background:"linear-gradient(135deg, #4a90d9 0%, #67b8e3 100%)",borderRadius:"16px",padding:"1.25rem",color:"white"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.75rem"},children:[a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"0.8rem",opacity:.9,marginBottom:"0.25rem"},children:"Kinderhook, NY"}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsxs("span",{style:{fontSize:"2.5rem",fontWeight:"700",lineHeight:1},children:[e.temp,""]}),a.jsx("span",{style:{fontSize:"1rem"},children:"F"})]})]}),a.jsx(d,{size:56,strokeWidth:1.5})]}),a.jsx("div",{style:{fontSize:"1rem",fontWeight:"600",marginBottom:"0.5rem"},children:h.description}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem",fontSize:"0.8rem",opacity:.9,marginBottom:"1rem"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[a.jsx(tV,{size:14})," ",e.humidity,"%"]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[a.jsx(_3,{size:14})," ",e.windSpeed," mph"]}),e.sunrise&&a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[a.jsx(s3,{size:14})," ",e.sunrise.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})]}),e.sunset&&a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[a.jsx(a3,{size:14})," ",e.sunset.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})]})]}),a.jsx("div",{style:{background:"rgba(255,255,255,0.2)",borderRadius:"8px",padding:"0.75rem",fontSize:"0.9rem",fontStyle:"italic"},children:h.suggestion})]})}const tg=new Map;function LB({businessName:n,address:e,size:t="medium",style:r={}}){const[s,l]=A.useState(null),[c,h]=A.useState(!0),[d,m]=A.useState(!1),g={small:{width:80,height:80},medium:{width:150,height:100},large:{width:300,height:200}},{width:y,height:x}=g[t]||g.medium;A.useEffect(()=>{if(!n){h(!1),m(!0);return}const k=`${n}-${e}`;if(tg.has(k)){l(tg.get(k)),h(!1);return}const S=setInterval(()=>{var L,M;(M=(L=window.google)==null?void 0:L.maps)!=null&&M.places&&(clearInterval(S),N())},100),C=setTimeout(()=>{clearInterval(S),h(!1),m(!0)},5e3);async function N(){try{const L=document.createElement("div"),M=new window.google.maps.places.PlacesService(L),U=`${n} ${e||"Kinderhook NY"}`;M.findPlaceFromQuery({query:U,fields:["photos","place_id"]},($,G)=>{var I,E;if(clearTimeout(C),G===window.google.maps.places.PlacesServiceStatus.OK&&((E=(I=$==null?void 0:$[0])==null?void 0:I.photos)==null?void 0:E.length)>0){const V=$[0].photos[0].getUrl({maxWidth:y*2,maxHeight:x*2});tg.set(k,V),l(V)}else m(!0);h(!1)})}catch(L){console.error("Place photo error:",L),m(!0),h(!1)}}return()=>{clearInterval(S),clearTimeout(C)}},[n,e,y,x]);const T={width:`${y}px`,height:`${x}px`,borderRadius:"8px",overflow:"hidden",background:"var(--kb-gray-100)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,...r};return c?a.jsxs("div",{style:T,children:[a.jsx("div",{style:{width:"24px",height:"24px",border:"2px solid var(--kb-gray-200)",borderTopColor:"var(--kb-navy)",borderRadius:"50%",animation:"spin 1s linear infinite"}}),a.jsx("style",{children:`
          @keyframes spin {
            to { transform: rotate(360deg); }
          }
        `})]}):d||!s?a.jsx("div",{style:{...T,background:"linear-gradient(135deg, var(--kb-gray-100) 0%, var(--kb-gray-200) 100%)"},children:a.jsx(St,{size:24,color:"var(--kb-gray-400)"})}):a.jsx("div",{style:T,children:a.jsx("img",{src:s,alt:n,style:{width:"100%",height:"100%",objectFit:"cover"},onError:()=>m(!0)})})}function OB(){const[n,e]=A.useState([]),[t,r]=A.useState(!0),[s,l]=A.useState("all"),[c,h]=A.useState(!1);A.useEffect(()=>{async function k(){const S=await Xi();e(S.filter(C=>C.isActive)),r(!1)}k()},[]);const d=n.map(k=>({...k,...PB[k.code]})),m=d.filter(k=>!(!k.address||s==="open"&&!eg(k.hours))),g=d.filter(k=>k.address&&eg(k.hours)),y=()=>{const S=new Date().toLocaleDateString("en-US",{weekday:"long"}),C=g.map(N=>N.name).join(", ");return`What's open in Kinderhook this ${S}? ${g.length} businesses are ready to serve you: ${C}. Show your OK Member card for bonus discounts! #Kinderbucks #ShopLocal`},x=async()=>{const k=y();if(navigator.share)try{await navigator.share({title:"What's Open in Kinderhook",text:k})}catch{}else navigator.clipboard.writeText(k),h(!0),setTimeout(()=>h(!1),2e3)},T=k=>{switch(k){case"food":return"#e67e22";case"retail":return"#3498db";case"services":return"#9b59b6";case"arts":return"#1abc9c";default:return"var(--kb-gray-500)"}};return a.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[a.jsx(Dn,{}),a.jsxs("main",{style:{flex:1,background:"var(--kb-cream)"},children:[a.jsx("section",{style:{background:"linear-gradient(135deg, var(--kb-navy) 0%, var(--kb-navy-light) 100%)",padding:"2rem 1rem",color:"white",textAlign:"center"},children:a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[a.jsx("div",{className:"badge badge-gold",style:{marginBottom:"0.75rem"},children:"Village Directory"}),a.jsx("h1",{style:{marginBottom:"0.5rem"},children:"Explore Kinderhook"}),a.jsx("p",{style:{opacity:.8,maxWidth:"500px",margin:"0 auto"},children:"Find participating businesses, check hours, and earn rewards"})]})}),a.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto",padding:"2rem 1rem"},children:[a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:a.jsx(VB,{})}),a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card",style:{background:"linear-gradient(135deg, var(--kb-green) 0%, #1e8449 100%)",color:"white"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"1rem"},children:[a.jsxs("div",{children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[a.jsx(lr,{size:20}),a.jsx("span",{style:{fontWeight:"600"},children:"Open Right Now"})]}),a.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700"},children:[g.length," Businesses"]}),a.jsx("div",{style:{opacity:.9,fontSize:"0.9rem"},children:"Show your OK card for bonus discounts!"})]}),a.jsxs("button",{onClick:x,className:"btn",style:{background:"rgba(255,255,255,0.2)",color:"white",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c?a.jsx(Mn,{size:18}):a.jsx(HV,{size:18}),c?"Copied!":"Share"]})]})})]}),a.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem"},children:[a.jsxs("button",{onClick:()=>l("all"),className:"btn",style:{padding:"0.6rem 1.25rem",fontSize:"0.9rem",background:s==="all"?"var(--kb-navy)":"white",color:s==="all"?"white":"var(--kb-gray-600)",border:"1px solid var(--kb-gray-200)"},children:["All (",d.filter(k=>k.address).length,")"]}),a.jsxs("button",{onClick:()=>l("open"),className:"btn",style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.6rem 1.25rem",fontSize:"0.9rem",background:s==="open"?"var(--kb-green)":"white",color:s==="open"?"white":"var(--kb-gray-600)",border:"1px solid var(--kb-gray-200)"},children:[a.jsx(lr,{size:16}),"Open Now (",g.length,")"]})]}),a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:s==="open"?"Open Now":"All Businesses"}),t?a.jsx("div",{className:"card",style:{padding:"4rem",textAlign:"center",color:"var(--kb-gray-500)"},children:"Loading businesses..."}):a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"1rem"},children:m.map((k,S)=>{const C=eg(k.hours),N=NB(k.hours);return a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:S*.05},className:"card",style:{padding:"1.25rem",overflow:"hidden"},children:[a.jsx("div",{style:{margin:"-1.25rem -1.25rem 1rem -1.25rem"},children:a.jsx(LB,{businessName:k.name,address:k.address,size:"large",style:{width:"100%",height:"120px",borderRadius:0}})}),a.jsxs("div",{style:{marginBottom:"0.75rem"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.25rem"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx("span",{style:{display:"inline-block",width:"8px",height:"8px",borderRadius:"50%",background:C?"#27ae60":"#95a5a6"}}),a.jsx("span",{style:{fontSize:"0.7rem",fontWeight:"600",color:C?"#27ae60":"var(--kb-gray-500)"},children:C?"OPEN NOW":"CLOSED"})]}),a.jsx("span",{style:{fontSize:"0.7rem",padding:"0.15rem 0.5rem",borderRadius:"4px",background:`${T(k.category)}15`,color:T(k.category),fontWeight:"500",textTransform:"capitalize"},children:k.category})]}),a.jsx("h3",{style:{color:"var(--kb-navy)",fontSize:"1.1rem",marginBottom:"0.25rem"},children:k.name})]}),k.address&&a.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.5rem",fontSize:"0.85rem",color:"var(--kb-gray-600)",marginBottom:"0.5rem"},children:[a.jsx(gl,{size:14,style:{flexShrink:0,marginTop:"2px"}}),a.jsx("span",{children:k.address})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem",color:"var(--kb-gray-600)",marginBottom:"0.5rem"},children:[a.jsx(lr,{size:14}),"Today: ",N]}),k.phone&&a.jsxs("a",{href:`tel:${k.phone}`,style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem",color:"var(--kb-gray-600)",textDecoration:"none",marginBottom:"0.75rem"},children:[a.jsx(MV,{size:14}),k.phone]}),k.website&&a.jsxs("a",{href:k.website,target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem",color:"var(--kb-gold-dark)",textDecoration:"none",marginBottom:"0.75rem"},children:[a.jsx(rV,{size:14}),"Visit Website"]}),k.address&&a.jsxs("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(k.address)}`,target:"_blank",rel:"noopener noreferrer",className:"btn btn-gold",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",width:"100%",fontSize:"0.85rem",padding:"0.5rem"},children:[a.jsx(CV,{size:14})," Get Directions"]})]},k.code)})}),m.length===0&&!t&&a.jsxs("div",{className:"card",style:{padding:"3rem",textAlign:"center",color:"var(--kb-gray-500)"},children:[a.jsx(St,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),a.jsx("p",{children:s==="open"?"No businesses are open right now":"No businesses found"}),s==="open"&&a.jsx("button",{onClick:()=>l("all"),className:"btn btn-secondary",style:{marginTop:"1rem"},children:"View All Businesses"})]})]})]}),a.jsx(Vn,{})]})}function BB(){return a.jsx(uD,{children:a.jsx(_j,{children:a.jsxs(ZC,{children:[a.jsx(dt,{path:"/",element:a.jsx(l9,{})}),a.jsx(dt,{path:"/demo",element:a.jsx(m9,{})}),a.jsx(dt,{path:"/about",element:a.jsx(C9,{})}),a.jsx(dt,{path:"/benefits",element:a.jsx(A9,{})}),a.jsx(dt,{path:"/businesses",element:a.jsx(D9,{})}),a.jsx(dt,{path:"/map",element:a.jsx(OB,{})}),a.jsx(dt,{path:"/exchange",element:a.jsx(O9,{})}),a.jsx(dt,{path:"/login",element:a.jsx(F9,{})}),a.jsx(dt,{path:"/account",element:a.jsx(B9,{})}),a.jsx(dt,{path:"/profile",element:a.jsx(z9,{})}),a.jsx(dt,{path:"/card",element:a.jsx($9,{})}),a.jsx(dt,{path:"/scan/:serial",element:a.jsx(X9,{})}),a.jsx(dt,{path:"/checkin/:businessCode",element:a.jsx(sB,{})}),a.jsx(dt,{path:"/business/dashboard",element:a.jsx(Ir,{allowedRoles:["business","admin"],children:a.jsx(pB,{})})}),a.jsx(dt,{path:"/business/accept-payment",element:a.jsx(Ir,{allowedRoles:["business","admin"],children:a.jsx(RB,{})})}),a.jsx(dt,{path:"/admin/dashboard",element:a.jsx(Ir,{allowedRoles:["admin"],children:a.jsx(gB,{})})}),a.jsx(dt,{path:"/admin/exchanges",element:a.jsx(Ir,{allowedRoles:["admin"],children:a.jsx(TB,{})})}),a.jsx(dt,{path:"/admin/members",element:a.jsx(Ir,{allowedRoles:["admin"],children:a.jsx(IB,{})})}),a.jsx(dt,{path:"/admin/generate",element:a.jsx(Ir,{allowedRoles:["admin"],children:a.jsx(yB,{})})}),a.jsx(dt,{path:"/admin/issue",element:a.jsx(Ir,{allowedRoles:["admin"],children:a.jsx(vB,{})})}),a.jsx(dt,{path:"/admin/businesses",element:a.jsx(Ir,{allowedRoles:["admin"],children:a.jsx(SB,{})})}),a.jsx(dt,{path:"/admin/businesses/:businessCode",element:a.jsx(Ir,{allowedRoles:["admin"],children:a.jsx(jB,{})})}),a.jsx(dt,{path:"/admin/users",element:a.jsx(Ir,{allowedRoles:["admin"],children:a.jsx(CB,{})})}),a.jsx(dt,{path:"/admin/redemptions",element:a.jsx(Ir,{allowedRoles:["admin"],children:a.jsx(AB,{})})})]})})})}tC.createRoot(document.getElementById("root")).render(a.jsx(A.StrictMode,{children:a.jsx(BB,{})}));
