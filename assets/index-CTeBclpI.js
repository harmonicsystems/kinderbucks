(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();function jI(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Jm={exports:{}},wc={},Zm={exports:{}},Oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K1;function RI(){if(K1)return Oe;K1=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function x(H){return H===null||typeof H!="object"?null:(H=y&&H[y]||H["@@iterator"],typeof H=="function"?H:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,I={};function C(H,te,Re){this.props=H,this.context=te,this.refs=I,this.updater=Re||S}C.prototype.isReactComponent={},C.prototype.setState=function(H,te){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,te,"setState")},C.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function M(){}M.prototype=C.prototype;function D(H,te,Re){this.props=H,this.context=te,this.refs=I,this.updater=Re||S}var R=D.prototype=new M;R.constructor=D,_(R,C.prototype),R.isPureReactComponent=!0;var K=Array.isArray,z=Object.prototype.hasOwnProperty,U={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function E(H,te,Re){var Pe,Le={},J=null,de=null;if(te!=null)for(Pe in te.ref!==void 0&&(de=te.ref),te.key!==void 0&&(J=""+te.key),te)z.call(te,Pe)&&!A.hasOwnProperty(Pe)&&(Le[Pe]=te[Pe]);var xe=arguments.length-2;if(xe===1)Le.children=Re;else if(1<xe){for(var Ie=Array(xe),Je=0;Je<xe;Je++)Ie[Je]=arguments[Je+2];Le.children=Ie}if(H&&H.defaultProps)for(Pe in xe=H.defaultProps,xe)Le[Pe]===void 0&&(Le[Pe]=xe[Pe]);return{$$typeof:n,type:H,key:J,ref:de,props:Le,_owner:U.current}}function N(H,te){return{$$typeof:n,type:H.type,key:te,ref:H.ref,props:H.props,_owner:H._owner}}function V(H){return typeof H=="object"&&H!==null&&H.$$typeof===n}function B(H){var te={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(Re){return te[Re]})}var $=/\/+/g;function O(H,te){return typeof H=="object"&&H!==null&&H.key!=null?B(""+H.key):te.toString(36)}function Ve(H,te,Re,Pe,Le){var J=typeof H;(J==="undefined"||J==="boolean")&&(H=null);var de=!1;if(H===null)de=!0;else switch(J){case"string":case"number":de=!0;break;case"object":switch(H.$$typeof){case n:case e:de=!0}}if(de)return de=H,Le=Le(de),H=Pe===""?"."+O(de,0):Pe,K(Le)?(Re="",H!=null&&(Re=H.replace($,"$&/")+"/"),Ve(Le,te,Re,"",function(Je){return Je})):Le!=null&&(V(Le)&&(Le=N(Le,Re+(!Le.key||de&&de.key===Le.key?"":(""+Le.key).replace($,"$&/")+"/")+H)),te.push(Le)),1;if(de=0,Pe=Pe===""?".":Pe+":",K(H))for(var xe=0;xe<H.length;xe++){J=H[xe];var Ie=Pe+O(J,xe);de+=Ve(J,te,Re,Ie,Le)}else if(Ie=x(H),typeof Ie=="function")for(H=Ie.call(H),xe=0;!(J=H.next()).done;)J=J.value,Ie=Pe+O(J,xe++),de+=Ve(J,te,Re,Ie,Le);else if(J==="object")throw te=String(H),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.");return de}function Ke(H,te,Re){if(H==null)return H;var Pe=[],Le=0;return Ve(H,Pe,"","",function(J){return te.call(Re,J,Le++)}),Pe}function at(H){if(H._status===-1){var te=H._result;te=te(),te.then(function(Re){(H._status===0||H._status===-1)&&(H._status=1,H._result=Re)},function(Re){(H._status===0||H._status===-1)&&(H._status=2,H._result=Re)}),H._status===-1&&(H._status=0,H._result=te)}if(H._status===1)return H._result.default;throw H._result}var Te={current:null},ie={transition:null},me={ReactCurrentDispatcher:Te,ReactCurrentBatchConfig:ie,ReactCurrentOwner:U};function ce(){throw Error("act(...) is not supported in production builds of React.")}return Oe.Children={map:Ke,forEach:function(H,te,Re){Ke(H,function(){te.apply(this,arguments)},Re)},count:function(H){var te=0;return Ke(H,function(){te++}),te},toArray:function(H){return Ke(H,function(te){return te})||[]},only:function(H){if(!V(H))throw Error("React.Children.only expected to receive a single React element child.");return H}},Oe.Component=C,Oe.Fragment=t,Oe.Profiler=s,Oe.PureComponent=D,Oe.StrictMode=r,Oe.Suspense=d,Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=me,Oe.act=ce,Oe.cloneElement=function(H,te,Re){if(H==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+H+".");var Pe=_({},H.props),Le=H.key,J=H.ref,de=H._owner;if(te!=null){if(te.ref!==void 0&&(J=te.ref,de=U.current),te.key!==void 0&&(Le=""+te.key),H.type&&H.type.defaultProps)var xe=H.type.defaultProps;for(Ie in te)z.call(te,Ie)&&!A.hasOwnProperty(Ie)&&(Pe[Ie]=te[Ie]===void 0&&xe!==void 0?xe[Ie]:te[Ie])}var Ie=arguments.length-2;if(Ie===1)Pe.children=Re;else if(1<Ie){xe=Array(Ie);for(var Je=0;Je<Ie;Je++)xe[Je]=arguments[Je+2];Pe.children=xe}return{$$typeof:n,type:H.type,key:Le,ref:J,props:Pe,_owner:de}},Oe.createContext=function(H){return H={$$typeof:c,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},H.Provider={$$typeof:l,_context:H},H.Consumer=H},Oe.createElement=E,Oe.createFactory=function(H){var te=E.bind(null,H);return te.type=H,te},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(H){return{$$typeof:f,render:H}},Oe.isValidElement=V,Oe.lazy=function(H){return{$$typeof:g,_payload:{_status:-1,_result:H},_init:at}},Oe.memo=function(H,te){return{$$typeof:m,type:H,compare:te===void 0?null:te}},Oe.startTransition=function(H){var te=ie.transition;ie.transition={};try{H()}finally{ie.transition=te}},Oe.unstable_act=ce,Oe.useCallback=function(H,te){return Te.current.useCallback(H,te)},Oe.useContext=function(H){return Te.current.useContext(H)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(H){return Te.current.useDeferredValue(H)},Oe.useEffect=function(H,te){return Te.current.useEffect(H,te)},Oe.useId=function(){return Te.current.useId()},Oe.useImperativeHandle=function(H,te,Re){return Te.current.useImperativeHandle(H,te,Re)},Oe.useInsertionEffect=function(H,te){return Te.current.useInsertionEffect(H,te)},Oe.useLayoutEffect=function(H,te){return Te.current.useLayoutEffect(H,te)},Oe.useMemo=function(H,te){return Te.current.useMemo(H,te)},Oe.useReducer=function(H,te,Re){return Te.current.useReducer(H,te,Re)},Oe.useRef=function(H){return Te.current.useRef(H)},Oe.useState=function(H){return Te.current.useState(H)},Oe.useSyncExternalStore=function(H,te,Re){return Te.current.useSyncExternalStore(H,te,Re)},Oe.useTransition=function(){return Te.current.useTransition()},Oe.version="18.3.1",Oe}var q1;function Hg(){return q1||(q1=1,Zm.exports=RI()),Zm.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G1;function PI(){if(G1)return wc;G1=1;var n=Hg(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(f,d,m){var g,y={},x=null,S=null;m!==void 0&&(x=""+m),d.key!==void 0&&(x=""+d.key),d.ref!==void 0&&(S=d.ref);for(g in d)r.call(d,g)&&!l.hasOwnProperty(g)&&(y[g]=d[g]);if(f&&f.defaultProps)for(g in d=f.defaultProps,d)y[g]===void 0&&(y[g]=d[g]);return{$$typeof:e,type:f,key:x,ref:S,props:y,_owner:s.current}}return wc.Fragment=t,wc.jsx=c,wc.jsxs=c,wc}var Q1;function NI(){return Q1||(Q1=1,Jm.exports=PI()),Jm.exports}var a=NI(),j=Hg();const Lt=jI(j);var Fd={},ep={exports:{}},kn={},tp={exports:{}},np={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y1;function MI(){return Y1||(Y1=1,(function(n){function e(ie,me){var ce=ie.length;ie.push(me);e:for(;0<ce;){var H=ce-1>>>1,te=ie[H];if(0<s(te,me))ie[H]=me,ie[ce]=te,ce=H;else break e}}function t(ie){return ie.length===0?null:ie[0]}function r(ie){if(ie.length===0)return null;var me=ie[0],ce=ie.pop();if(ce!==me){ie[0]=ce;e:for(var H=0,te=ie.length,Re=te>>>1;H<Re;){var Pe=2*(H+1)-1,Le=ie[Pe],J=Pe+1,de=ie[J];if(0>s(Le,ce))J<te&&0>s(de,Le)?(ie[H]=de,ie[J]=ce,H=J):(ie[H]=Le,ie[Pe]=ce,H=Pe);else if(J<te&&0>s(de,ce))ie[H]=de,ie[J]=ce,H=J;else break e}}return me}function s(ie,me){var ce=ie.sortIndex-me.sortIndex;return ce!==0?ce:ie.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();n.unstable_now=function(){return c.now()-f}}var d=[],m=[],g=1,y=null,x=3,S=!1,_=!1,I=!1,C=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(ie){for(var me=t(m);me!==null;){if(me.callback===null)r(m);else if(me.startTime<=ie)r(m),me.sortIndex=me.expirationTime,e(d,me);else break;me=t(m)}}function K(ie){if(I=!1,R(ie),!_)if(t(d)!==null)_=!0,at(z);else{var me=t(m);me!==null&&Te(K,me.startTime-ie)}}function z(ie,me){_=!1,I&&(I=!1,M(E),E=-1),S=!0;var ce=x;try{for(R(me),y=t(d);y!==null&&(!(y.expirationTime>me)||ie&&!B());){var H=y.callback;if(typeof H=="function"){y.callback=null,x=y.priorityLevel;var te=H(y.expirationTime<=me);me=n.unstable_now(),typeof te=="function"?y.callback=te:y===t(d)&&r(d),R(me)}else r(d);y=t(d)}if(y!==null)var Re=!0;else{var Pe=t(m);Pe!==null&&Te(K,Pe.startTime-me),Re=!1}return Re}finally{y=null,x=ce,S=!1}}var U=!1,A=null,E=-1,N=5,V=-1;function B(){return!(n.unstable_now()-V<N)}function $(){if(A!==null){var ie=n.unstable_now();V=ie;var me=!0;try{me=A(!0,ie)}finally{me?O():(U=!1,A=null)}}else U=!1}var O;if(typeof D=="function")O=function(){D($)};else if(typeof MessageChannel<"u"){var Ve=new MessageChannel,Ke=Ve.port2;Ve.port1.onmessage=$,O=function(){Ke.postMessage(null)}}else O=function(){C($,0)};function at(ie){A=ie,U||(U=!0,O())}function Te(ie,me){E=C(function(){ie(n.unstable_now())},me)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ie){ie.callback=null},n.unstable_continueExecution=function(){_||S||(_=!0,at(z))},n.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<ie?Math.floor(1e3/ie):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(ie){switch(x){case 1:case 2:case 3:var me=3;break;default:me=x}var ce=x;x=me;try{return ie()}finally{x=ce}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ie,me){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var ce=x;x=ie;try{return me()}finally{x=ce}},n.unstable_scheduleCallback=function(ie,me,ce){var H=n.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?H+ce:H):ce=H,ie){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=ce+te,ie={id:g++,callback:me,priorityLevel:ie,startTime:ce,expirationTime:te,sortIndex:-1},ce>H?(ie.sortIndex=ce,e(m,ie),t(d)===null&&ie===t(m)&&(I?(M(E),E=-1):I=!0,Te(K,ce-H))):(ie.sortIndex=te,e(d,ie),_||S||(_=!0,at(z))),ie},n.unstable_shouldYield=B,n.unstable_wrapCallback=function(ie){var me=x;return function(){var ce=x;x=me;try{return ie.apply(this,arguments)}finally{x=ce}}}})(np)),np}var X1;function DI(){return X1||(X1=1,tp.exports=MI()),tp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J1;function VI(){if(J1)return kn;J1=1;var n=Hg(),e=DI();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function l(i,o){c(i,o),c(i+"Capture",o)}function c(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},y={};function x(i){return d.call(y,i)?!0:d.call(g,i)?!1:m.test(i)?y[i]=!0:(g[i]=!0,!1)}function S(i,o,u,p){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return p?!1:u!==null?!u.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function _(i,o,u,p){if(o===null||typeof o>"u"||S(i,o,u,p))return!0;if(p)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function I(i,o,u,p,v,w,T){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=p,this.attributeNamespace=v,this.mustUseProperty=u,this.propertyName=i,this.type=o,this.sanitizeURL=w,this.removeEmptyString=T}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){C[i]=new I(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];C[o]=new I(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){C[i]=new I(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){C[i]=new I(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){C[i]=new I(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){C[i]=new I(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){C[i]=new I(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){C[i]=new I(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){C[i]=new I(i,5,!1,i.toLowerCase(),null,!1,!1)});var M=/[\-:]([a-z])/g;function D(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(M,D);C[o]=new I(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(M,D);C[o]=new I(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(M,D);C[o]=new I(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){C[i]=new I(i,1,!1,i.toLowerCase(),null,!1,!1)}),C.xlinkHref=new I("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){C[i]=new I(i,1,!1,i.toLowerCase(),null,!0,!0)});function R(i,o,u,p){var v=C.hasOwnProperty(o)?C[o]:null;(v!==null?v.type!==0:p||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(_(o,u,v,p)&&(u=null),p||v===null?x(o)&&(u===null?i.removeAttribute(o):i.setAttribute(o,""+u)):v.mustUseProperty?i[v.propertyName]=u===null?v.type===3?!1:"":u:(o=v.attributeName,p=v.attributeNamespace,u===null?i.removeAttribute(o):(v=v.type,u=v===3||v===4&&u===!0?"":""+u,p?i.setAttributeNS(p,o,u):i.setAttribute(o,u))))}var K=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,z=Symbol.for("react.element"),U=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),B=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),Ve=Symbol.for("react.suspense_list"),Ke=Symbol.for("react.memo"),at=Symbol.for("react.lazy"),Te=Symbol.for("react.offscreen"),ie=Symbol.iterator;function me(i){return i===null||typeof i!="object"?null:(i=ie&&i[ie]||i["@@iterator"],typeof i=="function"?i:null)}var ce=Object.assign,H;function te(i){if(H===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);H=o&&o[1]||""}return`
`+H+i}var Re=!1;function Pe(i,o){if(!i||Re)return"";Re=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(Y){var p=Y}Reflect.construct(i,[],o)}else{try{o.call()}catch(Y){p=Y}i.call(o.prototype)}else{try{throw Error()}catch(Y){p=Y}i()}}catch(Y){if(Y&&p&&typeof Y.stack=="string"){for(var v=Y.stack.split(`
`),w=p.stack.split(`
`),T=v.length-1,L=w.length-1;1<=T&&0<=L&&v[T]!==w[L];)L--;for(;1<=T&&0<=L;T--,L--)if(v[T]!==w[L]){if(T!==1||L!==1)do if(T--,L--,0>L||v[T]!==w[L]){var F=`
`+v[T].replace(" at new "," at ");return i.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",i.displayName)),F}while(1<=T&&0<=L);break}}}finally{Re=!1,Error.prepareStackTrace=u}return(i=i?i.displayName||i.name:"")?te(i):""}function Le(i){switch(i.tag){case 5:return te(i.type);case 16:return te("Lazy");case 13:return te("Suspense");case 19:return te("SuspenseList");case 0:case 2:case 15:return i=Pe(i.type,!1),i;case 11:return i=Pe(i.type.render,!1),i;case 1:return i=Pe(i.type,!0),i;default:return""}}function J(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case A:return"Fragment";case U:return"Portal";case N:return"Profiler";case E:return"StrictMode";case O:return"Suspense";case Ve:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case B:return(i.displayName||"Context")+".Consumer";case V:return(i._context.displayName||"Context")+".Provider";case $:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Ke:return o=i.displayName||null,o!==null?o:J(i.type)||"Memo";case at:o=i._payload,i=i._init;try{return J(i(o))}catch{}}return null}function de(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return J(o);case 8:return o===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function xe(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ie(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Je(i){var o=Ie(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),p=""+i[o];if(!i.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var v=u.get,w=u.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return v.call(this)},set:function(T){p=""+T,w.call(this,T)}}),Object.defineProperty(i,o,{enumerable:u.enumerable}),{getValue:function(){return p},setValue:function(T){p=""+T},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function sr(i){i._valueTracker||(i._valueTracker=Je(i))}function Hs(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var u=o.getValue(),p="";return i&&(p=Ie(i)?i.checked?"true":"false":i.value),i=p,i!==u?(o.setValue(i),!0):!1}function zi(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Ho(i,o){var u=o.checked;return ce({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??i._wrapperState.initialChecked})}function Tu(i,o){var u=o.defaultValue==null?"":o.defaultValue,p=o.checked!=null?o.checked:o.defaultChecked;u=xe(o.value!=null?o.value:u),i._wrapperState={initialChecked:p,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Ko(i,o){o=o.checked,o!=null&&R(i,"checked",o,!1)}function Ks(i,o){Ko(i,o);var u=xe(o.value),p=o.type;if(u!=null)p==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+u):i.value!==""+u&&(i.value=""+u);else if(p==="submit"||p==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?Et(i,o.type,u):o.hasOwnProperty("defaultValue")&&Et(i,o.type,xe(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function Il(i,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var p=o.type;if(!(p!=="submit"&&p!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,u||o===i.value||(i.value=o),i.defaultValue=o}u=i.name,u!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,u!==""&&(i.name=u)}function Et(i,o,u){(o!=="number"||zi(i.ownerDocument)!==i)&&(u==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+u&&(i.defaultValue=""+u))}var xt=Array.isArray;function or(i,o,u,p){if(i=i.options,o){o={};for(var v=0;v<u.length;v++)o["$"+u[v]]=!0;for(u=0;u<i.length;u++)v=o.hasOwnProperty("$"+i[u].value),i[u].selected!==v&&(i[u].selected=v),v&&p&&(i[u].defaultSelected=!0)}else{for(u=""+xe(u),o=null,v=0;v<i.length;v++){if(i[v].value===u){i[v].selected=!0,p&&(i[v].defaultSelected=!0);return}o!==null||i[v].disabled||(o=i[v])}o!==null&&(o.selected=!0)}}function Cl(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return ce({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Al(i,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(t(92));if(xt(u)){if(1<u.length)throw Error(t(93));u=u[0]}o=u}o==null&&(o=""),u=o}i._wrapperState={initialValue:xe(u)}}function Iu(i,o){var u=xe(o.value),p=xe(o.defaultValue);u!=null&&(u=""+u,u!==i.value&&(i.value=u),o.defaultValue==null&&i.defaultValue!==u&&(i.defaultValue=u)),p!=null&&(i.defaultValue=""+p)}function Fi(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function jl(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qo(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?jl(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Ui,Cu=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,p,v){MSApp.execUnsafeLocalFunction(function(){return i(o,u,p,v)})}:i})(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(Ui=Ui||document.createElement("div"),Ui.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Ui.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function qs(i,o){if(o){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=o;return}}i.textContent=o}var Wi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Au=["Webkit","ms","Moz","O"];Object.keys(Wi).forEach(function(i){Au.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),Wi[o]=Wi[i]})});function $i(i,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||Wi.hasOwnProperty(i)&&Wi[i]?(""+o).trim():o+"px"}function Go(i,o){i=i.style;for(var u in o)if(o.hasOwnProperty(u)){var p=u.indexOf("--")===0,v=$i(u,o[u],p);u==="float"&&(u="cssFloat"),p?i.setProperty(u,v):i[u]=v}}var Rl=ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ar(i,o){if(o){if(Rl[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function Qo(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hi=null;function Yo(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ti=null,ni=null,pt=null;function Pl(i){if(i=sc(i)){if(typeof ti!="function")throw Error(t(280));var o=i.stateNode;o&&(o=nd(o),ti(i.stateNode,i.type,o))}}function Ki(i){ni?pt?pt.push(i):pt=[i]:ni=i}function qi(){if(ni){var i=ni,o=pt;if(pt=ni=null,Pl(i),o)for(i=0;i<o.length;i++)Pl(o[i])}}function ju(i,o){return i(o)}function Ru(){}var Cr=!1;function Pu(i,o,u){if(Cr)return i(o,u);Cr=!0;try{return ju(i,o,u)}finally{Cr=!1,(ni!==null||pt!==null)&&(Ru(),qi())}}function Gs(i,o){var u=i.stateNode;if(u===null)return null;var p=nd(u);if(p===null)return null;u=p[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(i=i.type,p=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!p;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(t(231,o,typeof u));return u}var Gi=!1;if(f)try{var Qi={};Object.defineProperty(Qi,"passive",{get:function(){Gi=!0}}),window.addEventListener("test",Qi,Qi),window.removeEventListener("test",Qi,Qi)}catch{Gi=!1}function Nu(i,o,u,p,v,w,T,L,F){var Y=Array.prototype.slice.call(arguments,3);try{o.apply(u,Y)}catch(re){this.onError(re)}}var ri=!1,Ar=null,Xo=!1,Fn=null,Mu={onError:function(i){ri=!0,Ar=i}};function Du(i,o,u,p,v,w,T,L,F){ri=!1,Ar=null,Nu.apply(Mu,arguments)}function Nl(i,o,u,p,v,w,T,L,F){if(Du.apply(this,arguments),ri){if(ri){var Y=Ar;ri=!1,Ar=null}else throw Error(t(198));Xo||(Xo=!0,Fn=Y)}}function lr(i){var o=i,u=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(u=o.return),i=o.return;while(i)}return o.tag===3?u:null}function Ml(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function Vu(i){if(lr(i)!==i)throw Error(t(188))}function Lu(i){var o=i.alternate;if(!o){if(o=lr(i),o===null)throw Error(t(188));return o!==i?null:i}for(var u=i,p=o;;){var v=u.return;if(v===null)break;var w=v.alternate;if(w===null){if(p=v.return,p!==null){u=p;continue}break}if(v.child===w.child){for(w=v.child;w;){if(w===u)return Vu(v),i;if(w===p)return Vu(v),o;w=w.sibling}throw Error(t(188))}if(u.return!==p.return)u=v,p=w;else{for(var T=!1,L=v.child;L;){if(L===u){T=!0,u=v,p=w;break}if(L===p){T=!0,p=v,u=w;break}L=L.sibling}if(!T){for(L=w.child;L;){if(L===u){T=!0,u=w,p=v;break}if(L===p){T=!0,p=w,u=v;break}L=L.sibling}if(!T)throw Error(t(189))}}if(u.alternate!==p)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?i:o}function Ou(i){return i=Lu(i),i!==null?Qs(i):null}function Qs(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=Qs(i);if(o!==null)return o;i=i.sibling}return null}var Dl=e.unstable_scheduleCallback,Jo=e.unstable_cancelCallback,Ys=e.unstable_shouldYield,ii=e.unstable_requestPaint,nt=e.unstable_now,Af=e.unstable_getCurrentPriorityLevel,Zo=e.unstable_ImmediatePriority,Vl=e.unstable_UserBlockingPriority,Xs=e.unstable_NormalPriority,Ll=e.unstable_LowPriority,ea=e.unstable_IdlePriority,Js=null,Tn=null;function Bu(i){if(Tn&&typeof Tn.onCommitFiberRoot=="function")try{Tn.onCommitFiberRoot(Js,i,void 0,(i.current.flags&128)===128)}catch{}}var In=Math.clz32?Math.clz32:Zs,jr=Math.log,Un=Math.LN2;function Zs(i){return i>>>=0,i===0?32:31-(jr(i)/Un|0)|0}var Rr=64,Yi=4194304;function Qe(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function si(i,o){var u=i.pendingLanes;if(u===0)return 0;var p=0,v=i.suspendedLanes,w=i.pingedLanes,T=u&268435455;if(T!==0){var L=T&~v;L!==0?p=Qe(L):(w&=T,w!==0&&(p=Qe(w)))}else T=u&~v,T!==0?p=Qe(T):w!==0&&(p=Qe(w));if(p===0)return 0;if(o!==0&&o!==p&&(o&v)===0&&(v=p&-p,w=o&-o,v>=w||v===16&&(w&4194240)!==0))return o;if((p&4)!==0&&(p|=u&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=p;0<o;)u=31-In(o),v=1<<u,p|=i[u],o&=~v;return p}function eo(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function to(i,o){for(var u=i.suspendedLanes,p=i.pingedLanes,v=i.expirationTimes,w=i.pendingLanes;0<w;){var T=31-In(w),L=1<<T,F=v[T];F===-1?((L&u)===0||(L&p)!==0)&&(v[T]=eo(L,o)):F<=o&&(i.expiredLanes|=L),w&=~L}}function Ol(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Bl(){var i=Rr;return Rr<<=1,(Rr&4194240)===0&&(Rr=64),i}function zl(i){for(var o=[],u=0;31>u;u++)o.push(i);return o}function no(i,o,u){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-In(o),i[o]=u}function jf(i,o){var u=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var p=i.eventTimes;for(i=i.expirationTimes;0<u;){var v=31-In(u),w=1<<v;o[v]=0,p[v]=-1,i[v]=-1,u&=~w}}function Fl(i,o){var u=i.entangledLanes|=o;for(i=i.entanglements;u;){var p=31-In(u),v=1<<p;v&o|i[p]&o&&(i[p]|=o),u&=~v}}var $e=0;function Pr(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Ul,ta,Wl,$l,Hl,Nr=!1,na=[],Mr=null,Dr=null,$t=null,ro=new Map,oi=new Map,Cn=[],zu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xi(i,o){switch(i){case"focusin":case"focusout":Mr=null;break;case"dragenter":case"dragleave":Dr=null;break;case"mouseover":case"mouseout":$t=null;break;case"pointerover":case"pointerout":ro.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":oi.delete(o.pointerId)}}function cr(i,o,u,p,v,w){return i===null||i.nativeEvent!==w?(i={blockedOn:o,domEventName:u,eventSystemFlags:p,nativeEvent:w,targetContainers:[v]},o!==null&&(o=sc(o),o!==null&&ta(o)),i):(i.eventSystemFlags|=p,o=i.targetContainers,v!==null&&o.indexOf(v)===-1&&o.push(v),i)}function Fu(i,o,u,p,v){switch(o){case"focusin":return Mr=cr(Mr,i,o,u,p,v),!0;case"dragenter":return Dr=cr(Dr,i,o,u,p,v),!0;case"mouseover":return $t=cr($t,i,o,u,p,v),!0;case"pointerover":var w=v.pointerId;return ro.set(w,cr(ro.get(w)||null,i,o,u,p,v)),!0;case"gotpointercapture":return w=v.pointerId,oi.set(w,cr(oi.get(w)||null,i,o,u,p,v)),!0}return!1}function ra(i){var o=ao(i.target);if(o!==null){var u=lr(o);if(u!==null){if(o=u.tag,o===13){if(o=Ml(u),o!==null){i.blockedOn=o,Hl(i.priority,function(){Wl(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Ze(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var u=ia(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(u===null){u=i.nativeEvent;var p=new u.constructor(u.type,u);Hi=p,u.target.dispatchEvent(p),Hi=null}else return o=sc(u),o!==null&&ta(o),i.blockedOn=u,!1;o.shift()}return!0}function Uu(i,o,u){Ze(i)&&u.delete(o)}function Rf(){Nr=!1,Mr!==null&&Ze(Mr)&&(Mr=null),Dr!==null&&Ze(Dr)&&(Dr=null),$t!==null&&Ze($t)&&($t=null),ro.forEach(Uu),oi.forEach(Uu)}function Ji(i,o){i.blockedOn===o&&(i.blockedOn=null,Nr||(Nr=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Rf)))}function Zi(i){function o(v){return Ji(v,i)}if(0<na.length){Ji(na[0],i);for(var u=1;u<na.length;u++){var p=na[u];p.blockedOn===i&&(p.blockedOn=null)}}for(Mr!==null&&Ji(Mr,i),Dr!==null&&Ji(Dr,i),$t!==null&&Ji($t,i),ro.forEach(o),oi.forEach(o),u=0;u<Cn.length;u++)p=Cn[u],p.blockedOn===i&&(p.blockedOn=null);for(;0<Cn.length&&(u=Cn[0],u.blockedOn===null);)ra(u),u.blockedOn===null&&Cn.shift()}var ai=K.ReactCurrentBatchConfig,li=!0;function Vr(i,o,u,p){var v=$e,w=ai.transition;ai.transition=null;try{$e=1,Kl(i,o,u,p)}finally{$e=v,ai.transition=w}}function Wu(i,o,u,p){var v=$e,w=ai.transition;ai.transition=null;try{$e=4,Kl(i,o,u,p)}finally{$e=v,ai.transition=w}}function Kl(i,o,u,p){if(li){var v=ia(i,o,u,p);if(v===null)Uf(i,o,p,Lr,u),Xi(i,p);else if(Fu(v,i,o,u,p))p.stopPropagation();else if(Xi(i,p),o&4&&-1<zu.indexOf(i)){for(;v!==null;){var w=sc(v);if(w!==null&&Ul(w),w=ia(i,o,u,p),w===null&&Uf(i,o,p,Lr,u),w===v)break;v=w}v!==null&&p.stopPropagation()}else Uf(i,o,p,null,u)}}var Lr=null;function ia(i,o,u,p){if(Lr=null,i=Yo(p),i=ao(i),i!==null)if(o=lr(i),o===null)i=null;else if(u=o.tag,u===13){if(i=Ml(o),i!==null)return i;i=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return Lr=i,null}function sa(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Af()){case Zo:return 1;case Vl:return 4;case Xs:case Ll:return 16;case ea:return 536870912;default:return 16}default:return 16}}var An=null,oa=null,ci=null;function $u(){if(ci)return ci;var i,o=oa,u=o.length,p,v="value"in An?An.value:An.textContent,w=v.length;for(i=0;i<u&&o[i]===v[i];i++);var T=u-i;for(p=1;p<=T&&o[u-p]===v[w-p];p++);return ci=v.slice(i,1<p?1-p:void 0)}function io(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Or(){return!0}function ql(){return!1}function Zt(i){function o(u,p,v,w,T){this._reactName=u,this._targetInst=v,this.type=p,this.nativeEvent=w,this.target=T,this.currentTarget=null;for(var L in i)i.hasOwnProperty(L)&&(u=i[L],this[L]=u?u(w):w[L]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Or:ql,this.isPropagationStopped=ql,this}return ce(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Or)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Or)},persist:function(){},isPersistent:Or}),o}var Br={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},so=Zt(Br),es=ce({},Br,{view:0,detail:0}),aa=Zt(es),la,ca,jn,oo=ce({},es,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Me,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==jn&&(jn&&i.type==="mousemove"?(la=i.screenX-jn.screenX,ca=i.screenY-jn.screenY):ca=la=0,jn=i),la)},movementY:function(i){return"movementY"in i?i.movementY:ca}}),Gl=Zt(oo),Hu=ce({},oo,{dataTransfer:0}),Ku=Zt(Hu),ua=ce({},es,{relatedTarget:0}),Ht=Zt(ua),qu=ce({},Br,{animationName:0,elapsedTime:0,pseudoElement:0}),Gu=Zt(qu),ts=ce({},Br,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),h=Zt(ts),k=ce({},Br,{data:0}),b=Zt(k),P={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},G={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},X={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function le(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=X[i])?!!o[i]:!1}function Me(){return le}var wt=ce({},es,{key:function(i){if(i.key){var o=P[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=io(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?G[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Me,charCode:function(i){return i.type==="keypress"?io(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?io(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Xe=Zt(wt),Tt=ce({},oo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rn=Zt(Tt),ui=ce({},es,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Me}),zr=Zt(ui),Fr=ce({},Br,{propertyName:0,elapsedTime:0,pseudoElement:0}),da=Zt(Fr),Ql=ce({},oo,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),ST=Zt(Ql),ET=[9,13,27,32],Pf=f&&"CompositionEvent"in window,Yl=null;f&&"documentMode"in document&&(Yl=document.documentMode);var TT=f&&"TextEvent"in window&&!Yl,O0=f&&(!Pf||Yl&&8<Yl&&11>=Yl),B0=" ",z0=!1;function F0(i,o){switch(i){case"keyup":return ET.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function U0(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ha=!1;function IT(i,o){switch(i){case"compositionend":return U0(o);case"keypress":return o.which!==32?null:(z0=!0,B0);case"textInput":return i=o.data,i===B0&&z0?null:i;default:return null}}function CT(i,o){if(ha)return i==="compositionend"||!Pf&&F0(i,o)?(i=$u(),ci=oa=An=null,ha=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return O0&&o.locale!=="ko"?null:o.data;default:return null}}var AT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function W0(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!AT[i.type]:o==="textarea"}function $0(i,o,u,p){Ki(p),o=Zu(o,"onChange"),0<o.length&&(u=new so("onChange","change",null,u,p),i.push({event:u,listeners:o}))}var Xl=null,Jl=null;function jT(i){lv(i,0)}function Qu(i){var o=ya(i);if(Hs(o))return i}function RT(i,o){if(i==="change")return o}var H0=!1;if(f){var Nf;if(f){var Mf="oninput"in document;if(!Mf){var K0=document.createElement("div");K0.setAttribute("oninput","return;"),Mf=typeof K0.oninput=="function"}Nf=Mf}else Nf=!1;H0=Nf&&(!document.documentMode||9<document.documentMode)}function q0(){Xl&&(Xl.detachEvent("onpropertychange",G0),Jl=Xl=null)}function G0(i){if(i.propertyName==="value"&&Qu(Jl)){var o=[];$0(o,Jl,i,Yo(i)),Pu(jT,o)}}function PT(i,o,u){i==="focusin"?(q0(),Xl=o,Jl=u,Xl.attachEvent("onpropertychange",G0)):i==="focusout"&&q0()}function NT(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Qu(Jl)}function MT(i,o){if(i==="click")return Qu(o)}function DT(i,o){if(i==="input"||i==="change")return Qu(o)}function VT(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var ur=typeof Object.is=="function"?Object.is:VT;function Zl(i,o){if(ur(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var u=Object.keys(i),p=Object.keys(o);if(u.length!==p.length)return!1;for(p=0;p<u.length;p++){var v=u[p];if(!d.call(o,v)||!ur(i[v],o[v]))return!1}return!0}function Q0(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Y0(i,o){var u=Q0(i);i=0;for(var p;u;){if(u.nodeType===3){if(p=i+u.textContent.length,i<=o&&p>=o)return{node:u,offset:o-i};i=p}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Q0(u)}}function X0(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?X0(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function J0(){for(var i=window,o=zi();o instanceof i.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)i=o.contentWindow;else break;o=zi(i.document)}return o}function Df(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function LT(i){var o=J0(),u=i.focusedElem,p=i.selectionRange;if(o!==u&&u&&u.ownerDocument&&X0(u.ownerDocument.documentElement,u)){if(p!==null&&Df(u)){if(o=p.start,i=p.end,i===void 0&&(i=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(i,u.value.length);else if(i=(o=u.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var v=u.textContent.length,w=Math.min(p.start,v);p=p.end===void 0?w:Math.min(p.end,v),!i.extend&&w>p&&(v=p,p=w,w=v),v=Y0(u,w);var T=Y0(u,p);v&&T&&(i.rangeCount!==1||i.anchorNode!==v.node||i.anchorOffset!==v.offset||i.focusNode!==T.node||i.focusOffset!==T.offset)&&(o=o.createRange(),o.setStart(v.node,v.offset),i.removeAllRanges(),w>p?(i.addRange(o),i.extend(T.node,T.offset)):(o.setEnd(T.node,T.offset),i.addRange(o)))}}for(o=[],i=u;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)i=o[u],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var OT=f&&"documentMode"in document&&11>=document.documentMode,fa=null,Vf=null,ec=null,Lf=!1;function Z0(i,o,u){var p=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Lf||fa==null||fa!==zi(p)||(p=fa,"selectionStart"in p&&Df(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),ec&&Zl(ec,p)||(ec=p,p=Zu(Vf,"onSelect"),0<p.length&&(o=new so("onSelect","select",null,o,u),i.push({event:o,listeners:p}),o.target=fa)))}function Yu(i,o){var u={};return u[i.toLowerCase()]=o.toLowerCase(),u["Webkit"+i]="webkit"+o,u["Moz"+i]="moz"+o,u}var ma={animationend:Yu("Animation","AnimationEnd"),animationiteration:Yu("Animation","AnimationIteration"),animationstart:Yu("Animation","AnimationStart"),transitionend:Yu("Transition","TransitionEnd")},Of={},ev={};f&&(ev=document.createElement("div").style,"AnimationEvent"in window||(delete ma.animationend.animation,delete ma.animationiteration.animation,delete ma.animationstart.animation),"TransitionEvent"in window||delete ma.transitionend.transition);function Xu(i){if(Of[i])return Of[i];if(!ma[i])return i;var o=ma[i],u;for(u in o)if(o.hasOwnProperty(u)&&u in ev)return Of[i]=o[u];return i}var tv=Xu("animationend"),nv=Xu("animationiteration"),rv=Xu("animationstart"),iv=Xu("transitionend"),sv=new Map,ov="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ns(i,o){sv.set(i,o),l(o,[i])}for(var Bf=0;Bf<ov.length;Bf++){var zf=ov[Bf],BT=zf.toLowerCase(),zT=zf[0].toUpperCase()+zf.slice(1);ns(BT,"on"+zT)}ns(tv,"onAnimationEnd"),ns(nv,"onAnimationIteration"),ns(rv,"onAnimationStart"),ns("dblclick","onDoubleClick"),ns("focusin","onFocus"),ns("focusout","onBlur"),ns(iv,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),FT=new Set("cancel close invalid load scroll toggle".split(" ").concat(tc));function av(i,o,u){var p=i.type||"unknown-event";i.currentTarget=u,Nl(p,o,void 0,i),i.currentTarget=null}function lv(i,o){o=(o&4)!==0;for(var u=0;u<i.length;u++){var p=i[u],v=p.event;p=p.listeners;e:{var w=void 0;if(o)for(var T=p.length-1;0<=T;T--){var L=p[T],F=L.instance,Y=L.currentTarget;if(L=L.listener,F!==w&&v.isPropagationStopped())break e;av(v,L,Y),w=F}else for(T=0;T<p.length;T++){if(L=p[T],F=L.instance,Y=L.currentTarget,L=L.listener,F!==w&&v.isPropagationStopped())break e;av(v,L,Y),w=F}}}if(Xo)throw i=Fn,Xo=!1,Fn=null,i}function rt(i,o){var u=o[Gf];u===void 0&&(u=o[Gf]=new Set);var p=i+"__bubble";u.has(p)||(cv(o,i,2,!1),u.add(p))}function Ff(i,o,u){var p=0;o&&(p|=4),cv(u,i,p,o)}var Ju="_reactListening"+Math.random().toString(36).slice(2);function nc(i){if(!i[Ju]){i[Ju]=!0,r.forEach(function(u){u!=="selectionchange"&&(FT.has(u)||Ff(u,!1,i),Ff(u,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Ju]||(o[Ju]=!0,Ff("selectionchange",!1,o))}}function cv(i,o,u,p){switch(sa(o)){case 1:var v=Vr;break;case 4:v=Wu;break;default:v=Kl}u=v.bind(null,o,u,i),v=void 0,!Gi||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(v=!0),p?v!==void 0?i.addEventListener(o,u,{capture:!0,passive:v}):i.addEventListener(o,u,!0):v!==void 0?i.addEventListener(o,u,{passive:v}):i.addEventListener(o,u,!1)}function Uf(i,o,u,p,v){var w=p;if((o&1)===0&&(o&2)===0&&p!==null)e:for(;;){if(p===null)return;var T=p.tag;if(T===3||T===4){var L=p.stateNode.containerInfo;if(L===v||L.nodeType===8&&L.parentNode===v)break;if(T===4)for(T=p.return;T!==null;){var F=T.tag;if((F===3||F===4)&&(F=T.stateNode.containerInfo,F===v||F.nodeType===8&&F.parentNode===v))return;T=T.return}for(;L!==null;){if(T=ao(L),T===null)return;if(F=T.tag,F===5||F===6){p=w=T;continue e}L=L.parentNode}}p=p.return}Pu(function(){var Y=w,re=Yo(u),se=[];e:{var ne=sv.get(i);if(ne!==void 0){var fe=so,we=i;switch(i){case"keypress":if(io(u)===0)break e;case"keydown":case"keyup":fe=Xe;break;case"focusin":we="focus",fe=Ht;break;case"focusout":we="blur",fe=Ht;break;case"beforeblur":case"afterblur":fe=Ht;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=Gl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=Ku;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=zr;break;case tv:case nv:case rv:fe=Gu;break;case iv:fe=da;break;case"scroll":fe=aa;break;case"wheel":fe=ST;break;case"copy":case"cut":case"paste":fe=h;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=Rn}var ke=(o&4)!==0,kt=!ke&&i==="scroll",q=ke?ne!==null?ne+"Capture":null:ne;ke=[];for(var W=Y,Q;W!==null;){Q=W;var oe=Q.stateNode;if(Q.tag===5&&oe!==null&&(Q=oe,q!==null&&(oe=Gs(W,q),oe!=null&&ke.push(rc(W,oe,Q)))),kt)break;W=W.return}0<ke.length&&(ne=new fe(ne,we,null,u,re),se.push({event:ne,listeners:ke}))}}if((o&7)===0){e:{if(ne=i==="mouseover"||i==="pointerover",fe=i==="mouseout"||i==="pointerout",ne&&u!==Hi&&(we=u.relatedTarget||u.fromElement)&&(ao(we)||we[di]))break e;if((fe||ne)&&(ne=re.window===re?re:(ne=re.ownerDocument)?ne.defaultView||ne.parentWindow:window,fe?(we=u.relatedTarget||u.toElement,fe=Y,we=we?ao(we):null,we!==null&&(kt=lr(we),we!==kt||we.tag!==5&&we.tag!==6)&&(we=null)):(fe=null,we=Y),fe!==we)){if(ke=Gl,oe="onMouseLeave",q="onMouseEnter",W="mouse",(i==="pointerout"||i==="pointerover")&&(ke=Rn,oe="onPointerLeave",q="onPointerEnter",W="pointer"),kt=fe==null?ne:ya(fe),Q=we==null?ne:ya(we),ne=new ke(oe,W+"leave",fe,u,re),ne.target=kt,ne.relatedTarget=Q,oe=null,ao(re)===Y&&(ke=new ke(q,W+"enter",we,u,re),ke.target=Q,ke.relatedTarget=kt,oe=ke),kt=oe,fe&&we)t:{for(ke=fe,q=we,W=0,Q=ke;Q;Q=pa(Q))W++;for(Q=0,oe=q;oe;oe=pa(oe))Q++;for(;0<W-Q;)ke=pa(ke),W--;for(;0<Q-W;)q=pa(q),Q--;for(;W--;){if(ke===q||q!==null&&ke===q.alternate)break t;ke=pa(ke),q=pa(q)}ke=null}else ke=null;fe!==null&&uv(se,ne,fe,ke,!1),we!==null&&kt!==null&&uv(se,kt,we,ke,!0)}}e:{if(ne=Y?ya(Y):window,fe=ne.nodeName&&ne.nodeName.toLowerCase(),fe==="select"||fe==="input"&&ne.type==="file")var be=RT;else if(W0(ne))if(H0)be=DT;else{be=NT;var Se=PT}else(fe=ne.nodeName)&&fe.toLowerCase()==="input"&&(ne.type==="checkbox"||ne.type==="radio")&&(be=MT);if(be&&(be=be(i,Y))){$0(se,be,u,re);break e}Se&&Se(i,ne,Y),i==="focusout"&&(Se=ne._wrapperState)&&Se.controlled&&ne.type==="number"&&Et(ne,"number",ne.value)}switch(Se=Y?ya(Y):window,i){case"focusin":(W0(Se)||Se.contentEditable==="true")&&(fa=Se,Vf=Y,ec=null);break;case"focusout":ec=Vf=fa=null;break;case"mousedown":Lf=!0;break;case"contextmenu":case"mouseup":case"dragend":Lf=!1,Z0(se,u,re);break;case"selectionchange":if(OT)break;case"keydown":case"keyup":Z0(se,u,re)}var Ee;if(Pf)e:{switch(i){case"compositionstart":var je="onCompositionStart";break e;case"compositionend":je="onCompositionEnd";break e;case"compositionupdate":je="onCompositionUpdate";break e}je=void 0}else ha?F0(i,u)&&(je="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(je="onCompositionStart");je&&(O0&&u.locale!=="ko"&&(ha||je!=="onCompositionStart"?je==="onCompositionEnd"&&ha&&(Ee=$u()):(An=re,oa="value"in An?An.value:An.textContent,ha=!0)),Se=Zu(Y,je),0<Se.length&&(je=new b(je,i,null,u,re),se.push({event:je,listeners:Se}),Ee?je.data=Ee:(Ee=U0(u),Ee!==null&&(je.data=Ee)))),(Ee=TT?IT(i,u):CT(i,u))&&(Y=Zu(Y,"onBeforeInput"),0<Y.length&&(re=new b("onBeforeInput","beforeinput",null,u,re),se.push({event:re,listeners:Y}),re.data=Ee))}lv(se,o)})}function rc(i,o,u){return{instance:i,listener:o,currentTarget:u}}function Zu(i,o){for(var u=o+"Capture",p=[];i!==null;){var v=i,w=v.stateNode;v.tag===5&&w!==null&&(v=w,w=Gs(i,u),w!=null&&p.unshift(rc(i,w,v)),w=Gs(i,o),w!=null&&p.push(rc(i,w,v))),i=i.return}return p}function pa(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function uv(i,o,u,p,v){for(var w=o._reactName,T=[];u!==null&&u!==p;){var L=u,F=L.alternate,Y=L.stateNode;if(F!==null&&F===p)break;L.tag===5&&Y!==null&&(L=Y,v?(F=Gs(u,w),F!=null&&T.unshift(rc(u,F,L))):v||(F=Gs(u,w),F!=null&&T.push(rc(u,F,L)))),u=u.return}T.length!==0&&i.push({event:o,listeners:T})}var UT=/\r\n?/g,WT=/\u0000|\uFFFD/g;function dv(i){return(typeof i=="string"?i:""+i).replace(UT,`
`).replace(WT,"")}function ed(i,o,u){if(o=dv(o),dv(i)!==o&&u)throw Error(t(425))}function td(){}var Wf=null,$f=null;function Hf(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Kf=typeof setTimeout=="function"?setTimeout:void 0,$T=typeof clearTimeout=="function"?clearTimeout:void 0,hv=typeof Promise=="function"?Promise:void 0,HT=typeof queueMicrotask=="function"?queueMicrotask:typeof hv<"u"?function(i){return hv.resolve(null).then(i).catch(KT)}:Kf;function KT(i){setTimeout(function(){throw i})}function qf(i,o){var u=o,p=0;do{var v=u.nextSibling;if(i.removeChild(u),v&&v.nodeType===8)if(u=v.data,u==="/$"){if(p===0){i.removeChild(v),Zi(o);return}p--}else u!=="$"&&u!=="$?"&&u!=="$!"||p++;u=v}while(u);Zi(o)}function rs(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function fv(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return i;o--}else u==="/$"&&o++}i=i.previousSibling}return null}var ga=Math.random().toString(36).slice(2),Ur="__reactFiber$"+ga,ic="__reactProps$"+ga,di="__reactContainer$"+ga,Gf="__reactEvents$"+ga,qT="__reactListeners$"+ga,GT="__reactHandles$"+ga;function ao(i){var o=i[Ur];if(o)return o;for(var u=i.parentNode;u;){if(o=u[di]||u[Ur]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(i=fv(i);i!==null;){if(u=i[Ur])return u;i=fv(i)}return o}i=u,u=i.parentNode}return null}function sc(i){return i=i[Ur]||i[di],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function ya(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function nd(i){return i[ic]||null}var Qf=[],va=-1;function is(i){return{current:i}}function it(i){0>va||(i.current=Qf[va],Qf[va]=null,va--)}function et(i,o){va++,Qf[va]=i.current,i.current=o}var ss={},en=is(ss),gn=is(!1),lo=ss;function xa(i,o){var u=i.type.contextTypes;if(!u)return ss;var p=i.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===o)return p.__reactInternalMemoizedMaskedChildContext;var v={},w;for(w in u)v[w]=o[w];return p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=v),v}function yn(i){return i=i.childContextTypes,i!=null}function rd(){it(gn),it(en)}function mv(i,o,u){if(en.current!==ss)throw Error(t(168));et(en,o),et(gn,u)}function pv(i,o,u){var p=i.stateNode;if(o=o.childContextTypes,typeof p.getChildContext!="function")return u;p=p.getChildContext();for(var v in p)if(!(v in o))throw Error(t(108,de(i)||"Unknown",v));return ce({},u,p)}function id(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||ss,lo=en.current,et(en,i),et(gn,gn.current),!0}function gv(i,o,u){var p=i.stateNode;if(!p)throw Error(t(169));u?(i=pv(i,o,lo),p.__reactInternalMemoizedMergedChildContext=i,it(gn),it(en),et(en,i)):it(gn),et(gn,u)}var hi=null,sd=!1,Yf=!1;function yv(i){hi===null?hi=[i]:hi.push(i)}function QT(i){sd=!0,yv(i)}function os(){if(!Yf&&hi!==null){Yf=!0;var i=0,o=$e;try{var u=hi;for($e=1;i<u.length;i++){var p=u[i];do p=p(!0);while(p!==null)}hi=null,sd=!1}catch(v){throw hi!==null&&(hi=hi.slice(i+1)),Dl(Zo,os),v}finally{$e=o,Yf=!1}}return null}var wa=[],ka=0,od=null,ad=0,Wn=[],$n=0,co=null,fi=1,mi="";function uo(i,o){wa[ka++]=ad,wa[ka++]=od,od=i,ad=o}function vv(i,o,u){Wn[$n++]=fi,Wn[$n++]=mi,Wn[$n++]=co,co=i;var p=fi;i=mi;var v=32-In(p)-1;p&=~(1<<v),u+=1;var w=32-In(o)+v;if(30<w){var T=v-v%5;w=(p&(1<<T)-1).toString(32),p>>=T,v-=T,fi=1<<32-In(o)+v|u<<v|p,mi=w+i}else fi=1<<w|u<<v|p,mi=i}function Xf(i){i.return!==null&&(uo(i,1),vv(i,1,0))}function Jf(i){for(;i===od;)od=wa[--ka],wa[ka]=null,ad=wa[--ka],wa[ka]=null;for(;i===co;)co=Wn[--$n],Wn[$n]=null,mi=Wn[--$n],Wn[$n]=null,fi=Wn[--$n],Wn[$n]=null}var Pn=null,Nn=null,lt=!1,dr=null;function xv(i,o){var u=Gn(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=i,o=i.deletions,o===null?(i.deletions=[u],i.flags|=16):o.push(u)}function wv(i,o){switch(i.tag){case 5:var u=i.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,Pn=i,Nn=rs(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,Pn=i,Nn=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=co!==null?{id:fi,overflow:mi}:null,i.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=Gn(18,null,null,0),u.stateNode=o,u.return=i,i.child=u,Pn=i,Nn=null,!0):!1;default:return!1}}function Zf(i){return(i.mode&1)!==0&&(i.flags&128)===0}function em(i){if(lt){var o=Nn;if(o){var u=o;if(!wv(i,o)){if(Zf(i))throw Error(t(418));o=rs(u.nextSibling);var p=Pn;o&&wv(i,o)?xv(p,u):(i.flags=i.flags&-4097|2,lt=!1,Pn=i)}}else{if(Zf(i))throw Error(t(418));i.flags=i.flags&-4097|2,lt=!1,Pn=i}}}function kv(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Pn=i}function ld(i){if(i!==Pn)return!1;if(!lt)return kv(i),lt=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!Hf(i.type,i.memoizedProps)),o&&(o=Nn)){if(Zf(i))throw bv(),Error(t(418));for(;o;)xv(i,o),o=rs(o.nextSibling)}if(kv(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"){if(o===0){Nn=rs(i.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}i=i.nextSibling}Nn=null}}else Nn=Pn?rs(i.stateNode.nextSibling):null;return!0}function bv(){for(var i=Nn;i;)i=rs(i.nextSibling)}function ba(){Nn=Pn=null,lt=!1}function tm(i){dr===null?dr=[i]:dr.push(i)}var YT=K.ReactCurrentBatchConfig;function oc(i,o,u){if(i=u.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var p=u.stateNode}if(!p)throw Error(t(147,i));var v=p,w=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===w?o.ref:(o=function(T){var L=v.refs;T===null?delete L[w]:L[w]=T},o._stringRef=w,o)}if(typeof i!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,i))}return i}function cd(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function _v(i){var o=i._init;return o(i._payload)}function Sv(i){function o(q,W){if(i){var Q=q.deletions;Q===null?(q.deletions=[W],q.flags|=16):Q.push(W)}}function u(q,W){if(!i)return null;for(;W!==null;)o(q,W),W=W.sibling;return null}function p(q,W){for(q=new Map;W!==null;)W.key!==null?q.set(W.key,W):q.set(W.index,W),W=W.sibling;return q}function v(q,W){return q=ms(q,W),q.index=0,q.sibling=null,q}function w(q,W,Q){return q.index=Q,i?(Q=q.alternate,Q!==null?(Q=Q.index,Q<W?(q.flags|=2,W):Q):(q.flags|=2,W)):(q.flags|=1048576,W)}function T(q){return i&&q.alternate===null&&(q.flags|=2),q}function L(q,W,Q,oe){return W===null||W.tag!==6?(W=Km(Q,q.mode,oe),W.return=q,W):(W=v(W,Q),W.return=q,W)}function F(q,W,Q,oe){var be=Q.type;return be===A?re(q,W,Q.props.children,oe,Q.key):W!==null&&(W.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===at&&_v(be)===W.type)?(oe=v(W,Q.props),oe.ref=oc(q,W,Q),oe.return=q,oe):(oe=Nd(Q.type,Q.key,Q.props,null,q.mode,oe),oe.ref=oc(q,W,Q),oe.return=q,oe)}function Y(q,W,Q,oe){return W===null||W.tag!==4||W.stateNode.containerInfo!==Q.containerInfo||W.stateNode.implementation!==Q.implementation?(W=qm(Q,q.mode,oe),W.return=q,W):(W=v(W,Q.children||[]),W.return=q,W)}function re(q,W,Q,oe,be){return W===null||W.tag!==7?(W=xo(Q,q.mode,oe,be),W.return=q,W):(W=v(W,Q),W.return=q,W)}function se(q,W,Q){if(typeof W=="string"&&W!==""||typeof W=="number")return W=Km(""+W,q.mode,Q),W.return=q,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case z:return Q=Nd(W.type,W.key,W.props,null,q.mode,Q),Q.ref=oc(q,null,W),Q.return=q,Q;case U:return W=qm(W,q.mode,Q),W.return=q,W;case at:var oe=W._init;return se(q,oe(W._payload),Q)}if(xt(W)||me(W))return W=xo(W,q.mode,Q,null),W.return=q,W;cd(q,W)}return null}function ne(q,W,Q,oe){var be=W!==null?W.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number")return be!==null?null:L(q,W,""+Q,oe);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case z:return Q.key===be?F(q,W,Q,oe):null;case U:return Q.key===be?Y(q,W,Q,oe):null;case at:return be=Q._init,ne(q,W,be(Q._payload),oe)}if(xt(Q)||me(Q))return be!==null?null:re(q,W,Q,oe,null);cd(q,Q)}return null}function fe(q,W,Q,oe,be){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return q=q.get(Q)||null,L(W,q,""+oe,be);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case z:return q=q.get(oe.key===null?Q:oe.key)||null,F(W,q,oe,be);case U:return q=q.get(oe.key===null?Q:oe.key)||null,Y(W,q,oe,be);case at:var Se=oe._init;return fe(q,W,Q,Se(oe._payload),be)}if(xt(oe)||me(oe))return q=q.get(Q)||null,re(W,q,oe,be,null);cd(W,oe)}return null}function we(q,W,Q,oe){for(var be=null,Se=null,Ee=W,je=W=0,Ut=null;Ee!==null&&je<Q.length;je++){Ee.index>je?(Ut=Ee,Ee=null):Ut=Ee.sibling;var Ge=ne(q,Ee,Q[je],oe);if(Ge===null){Ee===null&&(Ee=Ut);break}i&&Ee&&Ge.alternate===null&&o(q,Ee),W=w(Ge,W,je),Se===null?be=Ge:Se.sibling=Ge,Se=Ge,Ee=Ut}if(je===Q.length)return u(q,Ee),lt&&uo(q,je),be;if(Ee===null){for(;je<Q.length;je++)Ee=se(q,Q[je],oe),Ee!==null&&(W=w(Ee,W,je),Se===null?be=Ee:Se.sibling=Ee,Se=Ee);return lt&&uo(q,je),be}for(Ee=p(q,Ee);je<Q.length;je++)Ut=fe(Ee,q,je,Q[je],oe),Ut!==null&&(i&&Ut.alternate!==null&&Ee.delete(Ut.key===null?je:Ut.key),W=w(Ut,W,je),Se===null?be=Ut:Se.sibling=Ut,Se=Ut);return i&&Ee.forEach(function(ps){return o(q,ps)}),lt&&uo(q,je),be}function ke(q,W,Q,oe){var be=me(Q);if(typeof be!="function")throw Error(t(150));if(Q=be.call(Q),Q==null)throw Error(t(151));for(var Se=be=null,Ee=W,je=W=0,Ut=null,Ge=Q.next();Ee!==null&&!Ge.done;je++,Ge=Q.next()){Ee.index>je?(Ut=Ee,Ee=null):Ut=Ee.sibling;var ps=ne(q,Ee,Ge.value,oe);if(ps===null){Ee===null&&(Ee=Ut);break}i&&Ee&&ps.alternate===null&&o(q,Ee),W=w(ps,W,je),Se===null?be=ps:Se.sibling=ps,Se=ps,Ee=Ut}if(Ge.done)return u(q,Ee),lt&&uo(q,je),be;if(Ee===null){for(;!Ge.done;je++,Ge=Q.next())Ge=se(q,Ge.value,oe),Ge!==null&&(W=w(Ge,W,je),Se===null?be=Ge:Se.sibling=Ge,Se=Ge);return lt&&uo(q,je),be}for(Ee=p(q,Ee);!Ge.done;je++,Ge=Q.next())Ge=fe(Ee,q,je,Ge.value,oe),Ge!==null&&(i&&Ge.alternate!==null&&Ee.delete(Ge.key===null?je:Ge.key),W=w(Ge,W,je),Se===null?be=Ge:Se.sibling=Ge,Se=Ge);return i&&Ee.forEach(function(AI){return o(q,AI)}),lt&&uo(q,je),be}function kt(q,W,Q,oe){if(typeof Q=="object"&&Q!==null&&Q.type===A&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case z:e:{for(var be=Q.key,Se=W;Se!==null;){if(Se.key===be){if(be=Q.type,be===A){if(Se.tag===7){u(q,Se.sibling),W=v(Se,Q.props.children),W.return=q,q=W;break e}}else if(Se.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===at&&_v(be)===Se.type){u(q,Se.sibling),W=v(Se,Q.props),W.ref=oc(q,Se,Q),W.return=q,q=W;break e}u(q,Se);break}else o(q,Se);Se=Se.sibling}Q.type===A?(W=xo(Q.props.children,q.mode,oe,Q.key),W.return=q,q=W):(oe=Nd(Q.type,Q.key,Q.props,null,q.mode,oe),oe.ref=oc(q,W,Q),oe.return=q,q=oe)}return T(q);case U:e:{for(Se=Q.key;W!==null;){if(W.key===Se)if(W.tag===4&&W.stateNode.containerInfo===Q.containerInfo&&W.stateNode.implementation===Q.implementation){u(q,W.sibling),W=v(W,Q.children||[]),W.return=q,q=W;break e}else{u(q,W);break}else o(q,W);W=W.sibling}W=qm(Q,q.mode,oe),W.return=q,q=W}return T(q);case at:return Se=Q._init,kt(q,W,Se(Q._payload),oe)}if(xt(Q))return we(q,W,Q,oe);if(me(Q))return ke(q,W,Q,oe);cd(q,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"?(Q=""+Q,W!==null&&W.tag===6?(u(q,W.sibling),W=v(W,Q),W.return=q,q=W):(u(q,W),W=Km(Q,q.mode,oe),W.return=q,q=W),T(q)):u(q,W)}return kt}var _a=Sv(!0),Ev=Sv(!1),ud=is(null),dd=null,Sa=null,nm=null;function rm(){nm=Sa=dd=null}function im(i){var o=ud.current;it(ud),i._currentValue=o}function sm(i,o,u){for(;i!==null;){var p=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,p!==null&&(p.childLanes|=o)):p!==null&&(p.childLanes&o)!==o&&(p.childLanes|=o),i===u)break;i=i.return}}function Ea(i,o){dd=i,nm=Sa=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(vn=!0),i.firstContext=null)}function Hn(i){var o=i._currentValue;if(nm!==i)if(i={context:i,memoizedValue:o,next:null},Sa===null){if(dd===null)throw Error(t(308));Sa=i,dd.dependencies={lanes:0,firstContext:i}}else Sa=Sa.next=i;return o}var ho=null;function om(i){ho===null?ho=[i]:ho.push(i)}function Tv(i,o,u,p){var v=o.interleaved;return v===null?(u.next=u,om(o)):(u.next=v.next,v.next=u),o.interleaved=u,pi(i,p)}function pi(i,o){i.lanes|=o;var u=i.alternate;for(u!==null&&(u.lanes|=o),u=i,i=i.return;i!==null;)i.childLanes|=o,u=i.alternate,u!==null&&(u.childLanes|=o),u=i,i=i.return;return u.tag===3?u.stateNode:null}var as=!1;function am(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Iv(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function gi(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function ls(i,o,u){var p=i.updateQueue;if(p===null)return null;if(p=p.shared,(qe&2)!==0){var v=p.pending;return v===null?o.next=o:(o.next=v.next,v.next=o),p.pending=o,pi(i,u)}return v=p.interleaved,v===null?(o.next=o,om(p)):(o.next=v.next,v.next=o),p.interleaved=o,pi(i,u)}function hd(i,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var p=o.lanes;p&=i.pendingLanes,u|=p,o.lanes=u,Fl(i,u)}}function Cv(i,o){var u=i.updateQueue,p=i.alternate;if(p!==null&&(p=p.updateQueue,u===p)){var v=null,w=null;if(u=u.firstBaseUpdate,u!==null){do{var T={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};w===null?v=w=T:w=w.next=T,u=u.next}while(u!==null);w===null?v=w=o:w=w.next=o}else v=w=o;u={baseState:p.baseState,firstBaseUpdate:v,lastBaseUpdate:w,shared:p.shared,effects:p.effects},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=o:i.next=o,u.lastBaseUpdate=o}function fd(i,o,u,p){var v=i.updateQueue;as=!1;var w=v.firstBaseUpdate,T=v.lastBaseUpdate,L=v.shared.pending;if(L!==null){v.shared.pending=null;var F=L,Y=F.next;F.next=null,T===null?w=Y:T.next=Y,T=F;var re=i.alternate;re!==null&&(re=re.updateQueue,L=re.lastBaseUpdate,L!==T&&(L===null?re.firstBaseUpdate=Y:L.next=Y,re.lastBaseUpdate=F))}if(w!==null){var se=v.baseState;T=0,re=Y=F=null,L=w;do{var ne=L.lane,fe=L.eventTime;if((p&ne)===ne){re!==null&&(re=re.next={eventTime:fe,lane:0,tag:L.tag,payload:L.payload,callback:L.callback,next:null});e:{var we=i,ke=L;switch(ne=o,fe=u,ke.tag){case 1:if(we=ke.payload,typeof we=="function"){se=we.call(fe,se,ne);break e}se=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=ke.payload,ne=typeof we=="function"?we.call(fe,se,ne):we,ne==null)break e;se=ce({},se,ne);break e;case 2:as=!0}}L.callback!==null&&L.lane!==0&&(i.flags|=64,ne=v.effects,ne===null?v.effects=[L]:ne.push(L))}else fe={eventTime:fe,lane:ne,tag:L.tag,payload:L.payload,callback:L.callback,next:null},re===null?(Y=re=fe,F=se):re=re.next=fe,T|=ne;if(L=L.next,L===null){if(L=v.shared.pending,L===null)break;ne=L,L=ne.next,ne.next=null,v.lastBaseUpdate=ne,v.shared.pending=null}}while(!0);if(re===null&&(F=se),v.baseState=F,v.firstBaseUpdate=Y,v.lastBaseUpdate=re,o=v.shared.interleaved,o!==null){v=o;do T|=v.lane,v=v.next;while(v!==o)}else w===null&&(v.shared.lanes=0);po|=T,i.lanes=T,i.memoizedState=se}}function Av(i,o,u){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var p=i[o],v=p.callback;if(v!==null){if(p.callback=null,p=u,typeof v!="function")throw Error(t(191,v));v.call(p)}}}var ac={},Wr=is(ac),lc=is(ac),cc=is(ac);function fo(i){if(i===ac)throw Error(t(174));return i}function lm(i,o){switch(et(cc,o),et(lc,i),et(Wr,ac),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:qo(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=qo(o,i)}it(Wr),et(Wr,o)}function Ta(){it(Wr),it(lc),it(cc)}function jv(i){fo(cc.current);var o=fo(Wr.current),u=qo(o,i.type);o!==u&&(et(lc,i),et(Wr,u))}function cm(i){lc.current===i&&(it(Wr),it(lc))}var ut=is(0);function md(i){for(var o=i;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var um=[];function dm(){for(var i=0;i<um.length;i++)um[i]._workInProgressVersionPrimary=null;um.length=0}var pd=K.ReactCurrentDispatcher,hm=K.ReactCurrentBatchConfig,mo=0,dt=null,Mt=null,zt=null,gd=!1,uc=!1,dc=0,XT=0;function tn(){throw Error(t(321))}function fm(i,o){if(o===null)return!1;for(var u=0;u<o.length&&u<i.length;u++)if(!ur(i[u],o[u]))return!1;return!0}function mm(i,o,u,p,v,w){if(mo=w,dt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,pd.current=i===null||i.memoizedState===null?tI:nI,i=u(p,v),uc){w=0;do{if(uc=!1,dc=0,25<=w)throw Error(t(301));w+=1,zt=Mt=null,o.updateQueue=null,pd.current=rI,i=u(p,v)}while(uc)}if(pd.current=xd,o=Mt!==null&&Mt.next!==null,mo=0,zt=Mt=dt=null,gd=!1,o)throw Error(t(300));return i}function pm(){var i=dc!==0;return dc=0,i}function $r(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zt===null?dt.memoizedState=zt=i:zt=zt.next=i,zt}function Kn(){if(Mt===null){var i=dt.alternate;i=i!==null?i.memoizedState:null}else i=Mt.next;var o=zt===null?dt.memoizedState:zt.next;if(o!==null)zt=o,Mt=i;else{if(i===null)throw Error(t(310));Mt=i,i={memoizedState:Mt.memoizedState,baseState:Mt.baseState,baseQueue:Mt.baseQueue,queue:Mt.queue,next:null},zt===null?dt.memoizedState=zt=i:zt=zt.next=i}return zt}function hc(i,o){return typeof o=="function"?o(i):o}function gm(i){var o=Kn(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var p=Mt,v=p.baseQueue,w=u.pending;if(w!==null){if(v!==null){var T=v.next;v.next=w.next,w.next=T}p.baseQueue=v=w,u.pending=null}if(v!==null){w=v.next,p=p.baseState;var L=T=null,F=null,Y=w;do{var re=Y.lane;if((mo&re)===re)F!==null&&(F=F.next={lane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),p=Y.hasEagerState?Y.eagerState:i(p,Y.action);else{var se={lane:re,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null};F===null?(L=F=se,T=p):F=F.next=se,dt.lanes|=re,po|=re}Y=Y.next}while(Y!==null&&Y!==w);F===null?T=p:F.next=L,ur(p,o.memoizedState)||(vn=!0),o.memoizedState=p,o.baseState=T,o.baseQueue=F,u.lastRenderedState=p}if(i=u.interleaved,i!==null){v=i;do w=v.lane,dt.lanes|=w,po|=w,v=v.next;while(v!==i)}else v===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function ym(i){var o=Kn(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var p=u.dispatch,v=u.pending,w=o.memoizedState;if(v!==null){u.pending=null;var T=v=v.next;do w=i(w,T.action),T=T.next;while(T!==v);ur(w,o.memoizedState)||(vn=!0),o.memoizedState=w,o.baseQueue===null&&(o.baseState=w),u.lastRenderedState=w}return[w,p]}function Rv(){}function Pv(i,o){var u=dt,p=Kn(),v=o(),w=!ur(p.memoizedState,v);if(w&&(p.memoizedState=v,vn=!0),p=p.queue,vm(Dv.bind(null,u,p,i),[i]),p.getSnapshot!==o||w||zt!==null&&zt.memoizedState.tag&1){if(u.flags|=2048,fc(9,Mv.bind(null,u,p,v,o),void 0,null),Ft===null)throw Error(t(349));(mo&30)!==0||Nv(u,o,v)}return v}function Nv(i,o,u){i.flags|=16384,i={getSnapshot:o,value:u},o=dt.updateQueue,o===null?(o={lastEffect:null,stores:null},dt.updateQueue=o,o.stores=[i]):(u=o.stores,u===null?o.stores=[i]:u.push(i))}function Mv(i,o,u,p){o.value=u,o.getSnapshot=p,Vv(o)&&Lv(i)}function Dv(i,o,u){return u(function(){Vv(o)&&Lv(i)})}function Vv(i){var o=i.getSnapshot;i=i.value;try{var u=o();return!ur(i,u)}catch{return!0}}function Lv(i){var o=pi(i,1);o!==null&&pr(o,i,1,-1)}function Ov(i){var o=$r();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hc,lastRenderedState:i},o.queue=i,i=i.dispatch=eI.bind(null,dt,i),[o.memoizedState,i]}function fc(i,o,u,p){return i={tag:i,create:o,destroy:u,deps:p,next:null},o=dt.updateQueue,o===null?(o={lastEffect:null,stores:null},dt.updateQueue=o,o.lastEffect=i.next=i):(u=o.lastEffect,u===null?o.lastEffect=i.next=i:(p=u.next,u.next=i,i.next=p,o.lastEffect=i)),i}function Bv(){return Kn().memoizedState}function yd(i,o,u,p){var v=$r();dt.flags|=i,v.memoizedState=fc(1|o,u,void 0,p===void 0?null:p)}function vd(i,o,u,p){var v=Kn();p=p===void 0?null:p;var w=void 0;if(Mt!==null){var T=Mt.memoizedState;if(w=T.destroy,p!==null&&fm(p,T.deps)){v.memoizedState=fc(o,u,w,p);return}}dt.flags|=i,v.memoizedState=fc(1|o,u,w,p)}function zv(i,o){return yd(8390656,8,i,o)}function vm(i,o){return vd(2048,8,i,o)}function Fv(i,o){return vd(4,2,i,o)}function Uv(i,o){return vd(4,4,i,o)}function Wv(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function $v(i,o,u){return u=u!=null?u.concat([i]):null,vd(4,4,Wv.bind(null,o,i),u)}function xm(){}function Hv(i,o){var u=Kn();o=o===void 0?null:o;var p=u.memoizedState;return p!==null&&o!==null&&fm(o,p[1])?p[0]:(u.memoizedState=[i,o],i)}function Kv(i,o){var u=Kn();o=o===void 0?null:o;var p=u.memoizedState;return p!==null&&o!==null&&fm(o,p[1])?p[0]:(i=i(),u.memoizedState=[i,o],i)}function qv(i,o,u){return(mo&21)===0?(i.baseState&&(i.baseState=!1,vn=!0),i.memoizedState=u):(ur(u,o)||(u=Bl(),dt.lanes|=u,po|=u,i.baseState=!0),o)}function JT(i,o){var u=$e;$e=u!==0&&4>u?u:4,i(!0);var p=hm.transition;hm.transition={};try{i(!1),o()}finally{$e=u,hm.transition=p}}function Gv(){return Kn().memoizedState}function ZT(i,o,u){var p=hs(i);if(u={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null},Qv(i))Yv(o,u);else if(u=Tv(i,o,u,p),u!==null){var v=fn();pr(u,i,p,v),Xv(u,o,p)}}function eI(i,o,u){var p=hs(i),v={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null};if(Qv(i))Yv(o,v);else{var w=i.alternate;if(i.lanes===0&&(w===null||w.lanes===0)&&(w=o.lastRenderedReducer,w!==null))try{var T=o.lastRenderedState,L=w(T,u);if(v.hasEagerState=!0,v.eagerState=L,ur(L,T)){var F=o.interleaved;F===null?(v.next=v,om(o)):(v.next=F.next,F.next=v),o.interleaved=v;return}}catch{}finally{}u=Tv(i,o,v,p),u!==null&&(v=fn(),pr(u,i,p,v),Xv(u,o,p))}}function Qv(i){var o=i.alternate;return i===dt||o!==null&&o===dt}function Yv(i,o){uc=gd=!0;var u=i.pending;u===null?o.next=o:(o.next=u.next,u.next=o),i.pending=o}function Xv(i,o,u){if((u&4194240)!==0){var p=o.lanes;p&=i.pendingLanes,u|=p,o.lanes=u,Fl(i,u)}}var xd={readContext:Hn,useCallback:tn,useContext:tn,useEffect:tn,useImperativeHandle:tn,useInsertionEffect:tn,useLayoutEffect:tn,useMemo:tn,useReducer:tn,useRef:tn,useState:tn,useDebugValue:tn,useDeferredValue:tn,useTransition:tn,useMutableSource:tn,useSyncExternalStore:tn,useId:tn,unstable_isNewReconciler:!1},tI={readContext:Hn,useCallback:function(i,o){return $r().memoizedState=[i,o===void 0?null:o],i},useContext:Hn,useEffect:zv,useImperativeHandle:function(i,o,u){return u=u!=null?u.concat([i]):null,yd(4194308,4,Wv.bind(null,o,i),u)},useLayoutEffect:function(i,o){return yd(4194308,4,i,o)},useInsertionEffect:function(i,o){return yd(4,2,i,o)},useMemo:function(i,o){var u=$r();return o=o===void 0?null:o,i=i(),u.memoizedState=[i,o],i},useReducer:function(i,o,u){var p=$r();return o=u!==void 0?u(o):o,p.memoizedState=p.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},p.queue=i,i=i.dispatch=ZT.bind(null,dt,i),[p.memoizedState,i]},useRef:function(i){var o=$r();return i={current:i},o.memoizedState=i},useState:Ov,useDebugValue:xm,useDeferredValue:function(i){return $r().memoizedState=i},useTransition:function(){var i=Ov(!1),o=i[0];return i=JT.bind(null,i[1]),$r().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,u){var p=dt,v=$r();if(lt){if(u===void 0)throw Error(t(407));u=u()}else{if(u=o(),Ft===null)throw Error(t(349));(mo&30)!==0||Nv(p,o,u)}v.memoizedState=u;var w={value:u,getSnapshot:o};return v.queue=w,zv(Dv.bind(null,p,w,i),[i]),p.flags|=2048,fc(9,Mv.bind(null,p,w,u,o),void 0,null),u},useId:function(){var i=$r(),o=Ft.identifierPrefix;if(lt){var u=mi,p=fi;u=(p&~(1<<32-In(p)-1)).toString(32)+u,o=":"+o+"R"+u,u=dc++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=XT++,o=":"+o+"r"+u.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},nI={readContext:Hn,useCallback:Hv,useContext:Hn,useEffect:vm,useImperativeHandle:$v,useInsertionEffect:Fv,useLayoutEffect:Uv,useMemo:Kv,useReducer:gm,useRef:Bv,useState:function(){return gm(hc)},useDebugValue:xm,useDeferredValue:function(i){var o=Kn();return qv(o,Mt.memoizedState,i)},useTransition:function(){var i=gm(hc)[0],o=Kn().memoizedState;return[i,o]},useMutableSource:Rv,useSyncExternalStore:Pv,useId:Gv,unstable_isNewReconciler:!1},rI={readContext:Hn,useCallback:Hv,useContext:Hn,useEffect:vm,useImperativeHandle:$v,useInsertionEffect:Fv,useLayoutEffect:Uv,useMemo:Kv,useReducer:ym,useRef:Bv,useState:function(){return ym(hc)},useDebugValue:xm,useDeferredValue:function(i){var o=Kn();return Mt===null?o.memoizedState=i:qv(o,Mt.memoizedState,i)},useTransition:function(){var i=ym(hc)[0],o=Kn().memoizedState;return[i,o]},useMutableSource:Rv,useSyncExternalStore:Pv,useId:Gv,unstable_isNewReconciler:!1};function hr(i,o){if(i&&i.defaultProps){o=ce({},o),i=i.defaultProps;for(var u in i)o[u]===void 0&&(o[u]=i[u]);return o}return o}function wm(i,o,u,p){o=i.memoizedState,u=u(p,o),u=u==null?o:ce({},o,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var wd={isMounted:function(i){return(i=i._reactInternals)?lr(i)===i:!1},enqueueSetState:function(i,o,u){i=i._reactInternals;var p=fn(),v=hs(i),w=gi(p,v);w.payload=o,u!=null&&(w.callback=u),o=ls(i,w,v),o!==null&&(pr(o,i,v,p),hd(o,i,v))},enqueueReplaceState:function(i,o,u){i=i._reactInternals;var p=fn(),v=hs(i),w=gi(p,v);w.tag=1,w.payload=o,u!=null&&(w.callback=u),o=ls(i,w,v),o!==null&&(pr(o,i,v,p),hd(o,i,v))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var u=fn(),p=hs(i),v=gi(u,p);v.tag=2,o!=null&&(v.callback=o),o=ls(i,v,p),o!==null&&(pr(o,i,p,u),hd(o,i,p))}};function Jv(i,o,u,p,v,w,T){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(p,w,T):o.prototype&&o.prototype.isPureReactComponent?!Zl(u,p)||!Zl(v,w):!0}function Zv(i,o,u){var p=!1,v=ss,w=o.contextType;return typeof w=="object"&&w!==null?w=Hn(w):(v=yn(o)?lo:en.current,p=o.contextTypes,w=(p=p!=null)?xa(i,v):ss),o=new o(u,w),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=wd,i.stateNode=o,o._reactInternals=i,p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=v,i.__reactInternalMemoizedMaskedChildContext=w),o}function e1(i,o,u,p){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,p),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,p),o.state!==i&&wd.enqueueReplaceState(o,o.state,null)}function km(i,o,u,p){var v=i.stateNode;v.props=u,v.state=i.memoizedState,v.refs={},am(i);var w=o.contextType;typeof w=="object"&&w!==null?v.context=Hn(w):(w=yn(o)?lo:en.current,v.context=xa(i,w)),v.state=i.memoizedState,w=o.getDerivedStateFromProps,typeof w=="function"&&(wm(i,o,w,u),v.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(o=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),o!==v.state&&wd.enqueueReplaceState(v,v.state,null),fd(i,u,v,p),v.state=i.memoizedState),typeof v.componentDidMount=="function"&&(i.flags|=4194308)}function Ia(i,o){try{var u="",p=o;do u+=Le(p),p=p.return;while(p);var v=u}catch(w){v=`
Error generating stack: `+w.message+`
`+w.stack}return{value:i,source:o,stack:v,digest:null}}function bm(i,o,u){return{value:i,source:null,stack:u??null,digest:o??null}}function _m(i,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var iI=typeof WeakMap=="function"?WeakMap:Map;function t1(i,o,u){u=gi(-1,u),u.tag=3,u.payload={element:null};var p=o.value;return u.callback=function(){Id||(Id=!0,Om=p),_m(i,o)},u}function n1(i,o,u){u=gi(-1,u),u.tag=3;var p=i.type.getDerivedStateFromError;if(typeof p=="function"){var v=o.value;u.payload=function(){return p(v)},u.callback=function(){_m(i,o)}}var w=i.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(u.callback=function(){_m(i,o),typeof p!="function"&&(us===null?us=new Set([this]):us.add(this));var T=o.stack;this.componentDidCatch(o.value,{componentStack:T!==null?T:""})}),u}function r1(i,o,u){var p=i.pingCache;if(p===null){p=i.pingCache=new iI;var v=new Set;p.set(o,v)}else v=p.get(o),v===void 0&&(v=new Set,p.set(o,v));v.has(u)||(v.add(u),i=vI.bind(null,i,o,u),o.then(i,i))}function i1(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function s1(i,o,u,p,v){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=gi(-1,1),o.tag=2,ls(u,o,1))),u.lanes|=1),i):(i.flags|=65536,i.lanes=v,i)}var sI=K.ReactCurrentOwner,vn=!1;function hn(i,o,u,p){o.child=i===null?Ev(o,null,u,p):_a(o,i.child,u,p)}function o1(i,o,u,p,v){u=u.render;var w=o.ref;return Ea(o,v),p=mm(i,o,u,p,w,v),u=pm(),i!==null&&!vn?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~v,yi(i,o,v)):(lt&&u&&Xf(o),o.flags|=1,hn(i,o,p,v),o.child)}function a1(i,o,u,p,v){if(i===null){var w=u.type;return typeof w=="function"&&!Hm(w)&&w.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=w,l1(i,o,w,p,v)):(i=Nd(u.type,null,p,o,o.mode,v),i.ref=o.ref,i.return=o,o.child=i)}if(w=i.child,(i.lanes&v)===0){var T=w.memoizedProps;if(u=u.compare,u=u!==null?u:Zl,u(T,p)&&i.ref===o.ref)return yi(i,o,v)}return o.flags|=1,i=ms(w,p),i.ref=o.ref,i.return=o,o.child=i}function l1(i,o,u,p,v){if(i!==null){var w=i.memoizedProps;if(Zl(w,p)&&i.ref===o.ref)if(vn=!1,o.pendingProps=p=w,(i.lanes&v)!==0)(i.flags&131072)!==0&&(vn=!0);else return o.lanes=i.lanes,yi(i,o,v)}return Sm(i,o,u,p,v)}function c1(i,o,u){var p=o.pendingProps,v=p.children,w=i!==null?i.memoizedState:null;if(p.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},et(Aa,Mn),Mn|=u;else{if((u&1073741824)===0)return i=w!==null?w.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,et(Aa,Mn),Mn|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=w!==null?w.baseLanes:u,et(Aa,Mn),Mn|=p}else w!==null?(p=w.baseLanes|u,o.memoizedState=null):p=u,et(Aa,Mn),Mn|=p;return hn(i,o,v,u),o.child}function u1(i,o){var u=o.ref;(i===null&&u!==null||i!==null&&i.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function Sm(i,o,u,p,v){var w=yn(u)?lo:en.current;return w=xa(o,w),Ea(o,v),u=mm(i,o,u,p,w,v),p=pm(),i!==null&&!vn?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~v,yi(i,o,v)):(lt&&p&&Xf(o),o.flags|=1,hn(i,o,u,v),o.child)}function d1(i,o,u,p,v){if(yn(u)){var w=!0;id(o)}else w=!1;if(Ea(o,v),o.stateNode===null)bd(i,o),Zv(o,u,p),km(o,u,p,v),p=!0;else if(i===null){var T=o.stateNode,L=o.memoizedProps;T.props=L;var F=T.context,Y=u.contextType;typeof Y=="object"&&Y!==null?Y=Hn(Y):(Y=yn(u)?lo:en.current,Y=xa(o,Y));var re=u.getDerivedStateFromProps,se=typeof re=="function"||typeof T.getSnapshotBeforeUpdate=="function";se||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(L!==p||F!==Y)&&e1(o,T,p,Y),as=!1;var ne=o.memoizedState;T.state=ne,fd(o,p,T,v),F=o.memoizedState,L!==p||ne!==F||gn.current||as?(typeof re=="function"&&(wm(o,u,re,p),F=o.memoizedState),(L=as||Jv(o,u,L,p,ne,F,Y))?(se||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(o.flags|=4194308)):(typeof T.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=p,o.memoizedState=F),T.props=p,T.state=F,T.context=Y,p=L):(typeof T.componentDidMount=="function"&&(o.flags|=4194308),p=!1)}else{T=o.stateNode,Iv(i,o),L=o.memoizedProps,Y=o.type===o.elementType?L:hr(o.type,L),T.props=Y,se=o.pendingProps,ne=T.context,F=u.contextType,typeof F=="object"&&F!==null?F=Hn(F):(F=yn(u)?lo:en.current,F=xa(o,F));var fe=u.getDerivedStateFromProps;(re=typeof fe=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(L!==se||ne!==F)&&e1(o,T,p,F),as=!1,ne=o.memoizedState,T.state=ne,fd(o,p,T,v);var we=o.memoizedState;L!==se||ne!==we||gn.current||as?(typeof fe=="function"&&(wm(o,u,fe,p),we=o.memoizedState),(Y=as||Jv(o,u,Y,p,ne,we,F)||!1)?(re||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(p,we,F),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(p,we,F)),typeof T.componentDidUpdate=="function"&&(o.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof T.componentDidUpdate!="function"||L===i.memoizedProps&&ne===i.memoizedState||(o.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||L===i.memoizedProps&&ne===i.memoizedState||(o.flags|=1024),o.memoizedProps=p,o.memoizedState=we),T.props=p,T.state=we,T.context=F,p=Y):(typeof T.componentDidUpdate!="function"||L===i.memoizedProps&&ne===i.memoizedState||(o.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||L===i.memoizedProps&&ne===i.memoizedState||(o.flags|=1024),p=!1)}return Em(i,o,u,p,w,v)}function Em(i,o,u,p,v,w){u1(i,o);var T=(o.flags&128)!==0;if(!p&&!T)return v&&gv(o,u,!1),yi(i,o,w);p=o.stateNode,sI.current=o;var L=T&&typeof u.getDerivedStateFromError!="function"?null:p.render();return o.flags|=1,i!==null&&T?(o.child=_a(o,i.child,null,w),o.child=_a(o,null,L,w)):hn(i,o,L,w),o.memoizedState=p.state,v&&gv(o,u,!0),o.child}function h1(i){var o=i.stateNode;o.pendingContext?mv(i,o.pendingContext,o.pendingContext!==o.context):o.context&&mv(i,o.context,!1),lm(i,o.containerInfo)}function f1(i,o,u,p,v){return ba(),tm(v),o.flags|=256,hn(i,o,u,p),o.child}var Tm={dehydrated:null,treeContext:null,retryLane:0};function Im(i){return{baseLanes:i,cachePool:null,transitions:null}}function m1(i,o,u){var p=o.pendingProps,v=ut.current,w=!1,T=(o.flags&128)!==0,L;if((L=T)||(L=i!==null&&i.memoizedState===null?!1:(v&2)!==0),L?(w=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(v|=1),et(ut,v&1),i===null)return em(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(T=p.children,i=p.fallback,w?(p=o.mode,w=o.child,T={mode:"hidden",children:T},(p&1)===0&&w!==null?(w.childLanes=0,w.pendingProps=T):w=Md(T,p,0,null),i=xo(i,p,u,null),w.return=o,i.return=o,w.sibling=i,o.child=w,o.child.memoizedState=Im(u),o.memoizedState=Tm,i):Cm(o,T));if(v=i.memoizedState,v!==null&&(L=v.dehydrated,L!==null))return oI(i,o,T,p,L,v,u);if(w){w=p.fallback,T=o.mode,v=i.child,L=v.sibling;var F={mode:"hidden",children:p.children};return(T&1)===0&&o.child!==v?(p=o.child,p.childLanes=0,p.pendingProps=F,o.deletions=null):(p=ms(v,F),p.subtreeFlags=v.subtreeFlags&14680064),L!==null?w=ms(L,w):(w=xo(w,T,u,null),w.flags|=2),w.return=o,p.return=o,p.sibling=w,o.child=p,p=w,w=o.child,T=i.child.memoizedState,T=T===null?Im(u):{baseLanes:T.baseLanes|u,cachePool:null,transitions:T.transitions},w.memoizedState=T,w.childLanes=i.childLanes&~u,o.memoizedState=Tm,p}return w=i.child,i=w.sibling,p=ms(w,{mode:"visible",children:p.children}),(o.mode&1)===0&&(p.lanes=u),p.return=o,p.sibling=null,i!==null&&(u=o.deletions,u===null?(o.deletions=[i],o.flags|=16):u.push(i)),o.child=p,o.memoizedState=null,p}function Cm(i,o){return o=Md({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function kd(i,o,u,p){return p!==null&&tm(p),_a(o,i.child,null,u),i=Cm(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function oI(i,o,u,p,v,w,T){if(u)return o.flags&256?(o.flags&=-257,p=bm(Error(t(422))),kd(i,o,T,p)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(w=p.fallback,v=o.mode,p=Md({mode:"visible",children:p.children},v,0,null),w=xo(w,v,T,null),w.flags|=2,p.return=o,w.return=o,p.sibling=w,o.child=p,(o.mode&1)!==0&&_a(o,i.child,null,T),o.child.memoizedState=Im(T),o.memoizedState=Tm,w);if((o.mode&1)===0)return kd(i,o,T,null);if(v.data==="$!"){if(p=v.nextSibling&&v.nextSibling.dataset,p)var L=p.dgst;return p=L,w=Error(t(419)),p=bm(w,p,void 0),kd(i,o,T,p)}if(L=(T&i.childLanes)!==0,vn||L){if(p=Ft,p!==null){switch(T&-T){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=(v&(p.suspendedLanes|T))!==0?0:v,v!==0&&v!==w.retryLane&&(w.retryLane=v,pi(i,v),pr(p,i,v,-1))}return $m(),p=bm(Error(t(421))),kd(i,o,T,p)}return v.data==="$?"?(o.flags|=128,o.child=i.child,o=xI.bind(null,i),v._reactRetry=o,null):(i=w.treeContext,Nn=rs(v.nextSibling),Pn=o,lt=!0,dr=null,i!==null&&(Wn[$n++]=fi,Wn[$n++]=mi,Wn[$n++]=co,fi=i.id,mi=i.overflow,co=o),o=Cm(o,p.children),o.flags|=4096,o)}function p1(i,o,u){i.lanes|=o;var p=i.alternate;p!==null&&(p.lanes|=o),sm(i.return,o,u)}function Am(i,o,u,p,v){var w=i.memoizedState;w===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:p,tail:u,tailMode:v}:(w.isBackwards=o,w.rendering=null,w.renderingStartTime=0,w.last=p,w.tail=u,w.tailMode=v)}function g1(i,o,u){var p=o.pendingProps,v=p.revealOrder,w=p.tail;if(hn(i,o,p.children,u),p=ut.current,(p&2)!==0)p=p&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&p1(i,u,o);else if(i.tag===19)p1(i,u,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}p&=1}if(et(ut,p),(o.mode&1)===0)o.memoizedState=null;else switch(v){case"forwards":for(u=o.child,v=null;u!==null;)i=u.alternate,i!==null&&md(i)===null&&(v=u),u=u.sibling;u=v,u===null?(v=o.child,o.child=null):(v=u.sibling,u.sibling=null),Am(o,!1,v,u,w);break;case"backwards":for(u=null,v=o.child,o.child=null;v!==null;){if(i=v.alternate,i!==null&&md(i)===null){o.child=v;break}i=v.sibling,v.sibling=u,u=v,v=i}Am(o,!0,u,null,w);break;case"together":Am(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function bd(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function yi(i,o,u){if(i!==null&&(o.dependencies=i.dependencies),po|=o.lanes,(u&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,u=ms(i,i.pendingProps),o.child=u,u.return=o;i.sibling!==null;)i=i.sibling,u=u.sibling=ms(i,i.pendingProps),u.return=o;u.sibling=null}return o.child}function aI(i,o,u){switch(o.tag){case 3:h1(o),ba();break;case 5:jv(o);break;case 1:yn(o.type)&&id(o);break;case 4:lm(o,o.stateNode.containerInfo);break;case 10:var p=o.type._context,v=o.memoizedProps.value;et(ud,p._currentValue),p._currentValue=v;break;case 13:if(p=o.memoizedState,p!==null)return p.dehydrated!==null?(et(ut,ut.current&1),o.flags|=128,null):(u&o.child.childLanes)!==0?m1(i,o,u):(et(ut,ut.current&1),i=yi(i,o,u),i!==null?i.sibling:null);et(ut,ut.current&1);break;case 19:if(p=(u&o.childLanes)!==0,(i.flags&128)!==0){if(p)return g1(i,o,u);o.flags|=128}if(v=o.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),et(ut,ut.current),p)break;return null;case 22:case 23:return o.lanes=0,c1(i,o,u)}return yi(i,o,u)}var y1,jm,v1,x1;y1=function(i,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)i.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},jm=function(){},v1=function(i,o,u,p){var v=i.memoizedProps;if(v!==p){i=o.stateNode,fo(Wr.current);var w=null;switch(u){case"input":v=Ho(i,v),p=Ho(i,p),w=[];break;case"select":v=ce({},v,{value:void 0}),p=ce({},p,{value:void 0}),w=[];break;case"textarea":v=Cl(i,v),p=Cl(i,p),w=[];break;default:typeof v.onClick!="function"&&typeof p.onClick=="function"&&(i.onclick=td)}ar(u,p);var T;u=null;for(Y in v)if(!p.hasOwnProperty(Y)&&v.hasOwnProperty(Y)&&v[Y]!=null)if(Y==="style"){var L=v[Y];for(T in L)L.hasOwnProperty(T)&&(u||(u={}),u[T]="")}else Y!=="dangerouslySetInnerHTML"&&Y!=="children"&&Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&Y!=="autoFocus"&&(s.hasOwnProperty(Y)?w||(w=[]):(w=w||[]).push(Y,null));for(Y in p){var F=p[Y];if(L=v!=null?v[Y]:void 0,p.hasOwnProperty(Y)&&F!==L&&(F!=null||L!=null))if(Y==="style")if(L){for(T in L)!L.hasOwnProperty(T)||F&&F.hasOwnProperty(T)||(u||(u={}),u[T]="");for(T in F)F.hasOwnProperty(T)&&L[T]!==F[T]&&(u||(u={}),u[T]=F[T])}else u||(w||(w=[]),w.push(Y,u)),u=F;else Y==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,L=L?L.__html:void 0,F!=null&&L!==F&&(w=w||[]).push(Y,F)):Y==="children"?typeof F!="string"&&typeof F!="number"||(w=w||[]).push(Y,""+F):Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&(s.hasOwnProperty(Y)?(F!=null&&Y==="onScroll"&&rt("scroll",i),w||L===F||(w=[])):(w=w||[]).push(Y,F))}u&&(w=w||[]).push("style",u);var Y=w;(o.updateQueue=Y)&&(o.flags|=4)}},x1=function(i,o,u,p){u!==p&&(o.flags|=4)};function mc(i,o){if(!lt)switch(i.tailMode){case"hidden":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:p.sibling=null}}function nn(i){var o=i.alternate!==null&&i.alternate.child===i.child,u=0,p=0;if(o)for(var v=i.child;v!==null;)u|=v.lanes|v.childLanes,p|=v.subtreeFlags&14680064,p|=v.flags&14680064,v.return=i,v=v.sibling;else for(v=i.child;v!==null;)u|=v.lanes|v.childLanes,p|=v.subtreeFlags,p|=v.flags,v.return=i,v=v.sibling;return i.subtreeFlags|=p,i.childLanes=u,o}function lI(i,o,u){var p=o.pendingProps;switch(Jf(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nn(o),null;case 1:return yn(o.type)&&rd(),nn(o),null;case 3:return p=o.stateNode,Ta(),it(gn),it(en),dm(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(i===null||i.child===null)&&(ld(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,dr!==null&&(Fm(dr),dr=null))),jm(i,o),nn(o),null;case 5:cm(o);var v=fo(cc.current);if(u=o.type,i!==null&&o.stateNode!=null)v1(i,o,u,p,v),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!p){if(o.stateNode===null)throw Error(t(166));return nn(o),null}if(i=fo(Wr.current),ld(o)){p=o.stateNode,u=o.type;var w=o.memoizedProps;switch(p[Ur]=o,p[ic]=w,i=(o.mode&1)!==0,u){case"dialog":rt("cancel",p),rt("close",p);break;case"iframe":case"object":case"embed":rt("load",p);break;case"video":case"audio":for(v=0;v<tc.length;v++)rt(tc[v],p);break;case"source":rt("error",p);break;case"img":case"image":case"link":rt("error",p),rt("load",p);break;case"details":rt("toggle",p);break;case"input":Tu(p,w),rt("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!w.multiple},rt("invalid",p);break;case"textarea":Al(p,w),rt("invalid",p)}ar(u,w),v=null;for(var T in w)if(w.hasOwnProperty(T)){var L=w[T];T==="children"?typeof L=="string"?p.textContent!==L&&(w.suppressHydrationWarning!==!0&&ed(p.textContent,L,i),v=["children",L]):typeof L=="number"&&p.textContent!==""+L&&(w.suppressHydrationWarning!==!0&&ed(p.textContent,L,i),v=["children",""+L]):s.hasOwnProperty(T)&&L!=null&&T==="onScroll"&&rt("scroll",p)}switch(u){case"input":sr(p),Il(p,w,!0);break;case"textarea":sr(p),Fi(p);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(p.onclick=td)}p=v,o.updateQueue=p,p!==null&&(o.flags|=4)}else{T=v.nodeType===9?v:v.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=jl(u)),i==="http://www.w3.org/1999/xhtml"?u==="script"?(i=T.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof p.is=="string"?i=T.createElement(u,{is:p.is}):(i=T.createElement(u),u==="select"&&(T=i,p.multiple?T.multiple=!0:p.size&&(T.size=p.size))):i=T.createElementNS(i,u),i[Ur]=o,i[ic]=p,y1(i,o,!1,!1),o.stateNode=i;e:{switch(T=Qo(u,p),u){case"dialog":rt("cancel",i),rt("close",i),v=p;break;case"iframe":case"object":case"embed":rt("load",i),v=p;break;case"video":case"audio":for(v=0;v<tc.length;v++)rt(tc[v],i);v=p;break;case"source":rt("error",i),v=p;break;case"img":case"image":case"link":rt("error",i),rt("load",i),v=p;break;case"details":rt("toggle",i),v=p;break;case"input":Tu(i,p),v=Ho(i,p),rt("invalid",i);break;case"option":v=p;break;case"select":i._wrapperState={wasMultiple:!!p.multiple},v=ce({},p,{value:void 0}),rt("invalid",i);break;case"textarea":Al(i,p),v=Cl(i,p),rt("invalid",i);break;default:v=p}ar(u,v),L=v;for(w in L)if(L.hasOwnProperty(w)){var F=L[w];w==="style"?Go(i,F):w==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,F!=null&&Cu(i,F)):w==="children"?typeof F=="string"?(u!=="textarea"||F!=="")&&qs(i,F):typeof F=="number"&&qs(i,""+F):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(s.hasOwnProperty(w)?F!=null&&w==="onScroll"&&rt("scroll",i):F!=null&&R(i,w,F,T))}switch(u){case"input":sr(i),Il(i,p,!1);break;case"textarea":sr(i),Fi(i);break;case"option":p.value!=null&&i.setAttribute("value",""+xe(p.value));break;case"select":i.multiple=!!p.multiple,w=p.value,w!=null?or(i,!!p.multiple,w,!1):p.defaultValue!=null&&or(i,!!p.multiple,p.defaultValue,!0);break;default:typeof v.onClick=="function"&&(i.onclick=td)}switch(u){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return nn(o),null;case 6:if(i&&o.stateNode!=null)x1(i,o,i.memoizedProps,p);else{if(typeof p!="string"&&o.stateNode===null)throw Error(t(166));if(u=fo(cc.current),fo(Wr.current),ld(o)){if(p=o.stateNode,u=o.memoizedProps,p[Ur]=o,(w=p.nodeValue!==u)&&(i=Pn,i!==null))switch(i.tag){case 3:ed(p.nodeValue,u,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&ed(p.nodeValue,u,(i.mode&1)!==0)}w&&(o.flags|=4)}else p=(u.nodeType===9?u:u.ownerDocument).createTextNode(p),p[Ur]=o,o.stateNode=p}return nn(o),null;case 13:if(it(ut),p=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(lt&&Nn!==null&&(o.mode&1)!==0&&(o.flags&128)===0)bv(),ba(),o.flags|=98560,w=!1;else if(w=ld(o),p!==null&&p.dehydrated!==null){if(i===null){if(!w)throw Error(t(318));if(w=o.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(t(317));w[Ur]=o}else ba(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;nn(o),w=!1}else dr!==null&&(Fm(dr),dr=null),w=!0;if(!w)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=u,o):(p=p!==null,p!==(i!==null&&i.memoizedState!==null)&&p&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(ut.current&1)!==0?Dt===0&&(Dt=3):$m())),o.updateQueue!==null&&(o.flags|=4),nn(o),null);case 4:return Ta(),jm(i,o),i===null&&nc(o.stateNode.containerInfo),nn(o),null;case 10:return im(o.type._context),nn(o),null;case 17:return yn(o.type)&&rd(),nn(o),null;case 19:if(it(ut),w=o.memoizedState,w===null)return nn(o),null;if(p=(o.flags&128)!==0,T=w.rendering,T===null)if(p)mc(w,!1);else{if(Dt!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(T=md(i),T!==null){for(o.flags|=128,mc(w,!1),p=T.updateQueue,p!==null&&(o.updateQueue=p,o.flags|=4),o.subtreeFlags=0,p=u,u=o.child;u!==null;)w=u,i=p,w.flags&=14680066,T=w.alternate,T===null?(w.childLanes=0,w.lanes=i,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=T.childLanes,w.lanes=T.lanes,w.child=T.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=T.memoizedProps,w.memoizedState=T.memoizedState,w.updateQueue=T.updateQueue,w.type=T.type,i=T.dependencies,w.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),u=u.sibling;return et(ut,ut.current&1|2),o.child}i=i.sibling}w.tail!==null&&nt()>ja&&(o.flags|=128,p=!0,mc(w,!1),o.lanes=4194304)}else{if(!p)if(i=md(T),i!==null){if(o.flags|=128,p=!0,u=i.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),mc(w,!0),w.tail===null&&w.tailMode==="hidden"&&!T.alternate&&!lt)return nn(o),null}else 2*nt()-w.renderingStartTime>ja&&u!==1073741824&&(o.flags|=128,p=!0,mc(w,!1),o.lanes=4194304);w.isBackwards?(T.sibling=o.child,o.child=T):(u=w.last,u!==null?u.sibling=T:o.child=T,w.last=T)}return w.tail!==null?(o=w.tail,w.rendering=o,w.tail=o.sibling,w.renderingStartTime=nt(),o.sibling=null,u=ut.current,et(ut,p?u&1|2:u&1),o):(nn(o),null);case 22:case 23:return Wm(),p=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==p&&(o.flags|=8192),p&&(o.mode&1)!==0?(Mn&1073741824)!==0&&(nn(o),o.subtreeFlags&6&&(o.flags|=8192)):nn(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function cI(i,o){switch(Jf(o),o.tag){case 1:return yn(o.type)&&rd(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Ta(),it(gn),it(en),dm(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return cm(o),null;case 13:if(it(ut),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));ba()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return it(ut),null;case 4:return Ta(),null;case 10:return im(o.type._context),null;case 22:case 23:return Wm(),null;case 24:return null;default:return null}}var _d=!1,rn=!1,uI=typeof WeakSet=="function"?WeakSet:Set,ve=null;function Ca(i,o){var u=i.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(p){gt(i,o,p)}else u.current=null}function Rm(i,o,u){try{u()}catch(p){gt(i,o,p)}}var w1=!1;function dI(i,o){if(Wf=li,i=J0(),Df(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var p=u.getSelection&&u.getSelection();if(p&&p.rangeCount!==0){u=p.anchorNode;var v=p.anchorOffset,w=p.focusNode;p=p.focusOffset;try{u.nodeType,w.nodeType}catch{u=null;break e}var T=0,L=-1,F=-1,Y=0,re=0,se=i,ne=null;t:for(;;){for(var fe;se!==u||v!==0&&se.nodeType!==3||(L=T+v),se!==w||p!==0&&se.nodeType!==3||(F=T+p),se.nodeType===3&&(T+=se.nodeValue.length),(fe=se.firstChild)!==null;)ne=se,se=fe;for(;;){if(se===i)break t;if(ne===u&&++Y===v&&(L=T),ne===w&&++re===p&&(F=T),(fe=se.nextSibling)!==null)break;se=ne,ne=se.parentNode}se=fe}u=L===-1||F===-1?null:{start:L,end:F}}else u=null}u=u||{start:0,end:0}}else u=null;for($f={focusedElem:i,selectionRange:u},li=!1,ve=o;ve!==null;)if(o=ve,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,ve=i;else for(;ve!==null;){o=ve;try{var we=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(we!==null){var ke=we.memoizedProps,kt=we.memoizedState,q=o.stateNode,W=q.getSnapshotBeforeUpdate(o.elementType===o.type?ke:hr(o.type,ke),kt);q.__reactInternalSnapshotBeforeUpdate=W}break;case 3:var Q=o.stateNode.containerInfo;Q.nodeType===1?Q.textContent="":Q.nodeType===9&&Q.documentElement&&Q.removeChild(Q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(oe){gt(o,o.return,oe)}if(i=o.sibling,i!==null){i.return=o.return,ve=i;break}ve=o.return}return we=w1,w1=!1,we}function pc(i,o,u){var p=o.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var v=p=p.next;do{if((v.tag&i)===i){var w=v.destroy;v.destroy=void 0,w!==void 0&&Rm(o,u,w)}v=v.next}while(v!==p)}}function Sd(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&i)===i){var p=u.create;u.destroy=p()}u=u.next}while(u!==o)}}function Pm(i){var o=i.ref;if(o!==null){var u=i.stateNode;switch(i.tag){case 5:i=u;break;default:i=u}typeof o=="function"?o(i):o.current=i}}function k1(i){var o=i.alternate;o!==null&&(i.alternate=null,k1(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[Ur],delete o[ic],delete o[Gf],delete o[qT],delete o[GT])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function b1(i){return i.tag===5||i.tag===3||i.tag===4}function _1(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||b1(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Nm(i,o,u){var p=i.tag;if(p===5||p===6)i=i.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(i,o):u.insertBefore(i,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(i,u)):(o=u,o.appendChild(i)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=td));else if(p!==4&&(i=i.child,i!==null))for(Nm(i,o,u),i=i.sibling;i!==null;)Nm(i,o,u),i=i.sibling}function Mm(i,o,u){var p=i.tag;if(p===5||p===6)i=i.stateNode,o?u.insertBefore(i,o):u.appendChild(i);else if(p!==4&&(i=i.child,i!==null))for(Mm(i,o,u),i=i.sibling;i!==null;)Mm(i,o,u),i=i.sibling}var Kt=null,fr=!1;function cs(i,o,u){for(u=u.child;u!==null;)S1(i,o,u),u=u.sibling}function S1(i,o,u){if(Tn&&typeof Tn.onCommitFiberUnmount=="function")try{Tn.onCommitFiberUnmount(Js,u)}catch{}switch(u.tag){case 5:rn||Ca(u,o);case 6:var p=Kt,v=fr;Kt=null,cs(i,o,u),Kt=p,fr=v,Kt!==null&&(fr?(i=Kt,u=u.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)):Kt.removeChild(u.stateNode));break;case 18:Kt!==null&&(fr?(i=Kt,u=u.stateNode,i.nodeType===8?qf(i.parentNode,u):i.nodeType===1&&qf(i,u),Zi(i)):qf(Kt,u.stateNode));break;case 4:p=Kt,v=fr,Kt=u.stateNode.containerInfo,fr=!0,cs(i,o,u),Kt=p,fr=v;break;case 0:case 11:case 14:case 15:if(!rn&&(p=u.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){v=p=p.next;do{var w=v,T=w.destroy;w=w.tag,T!==void 0&&((w&2)!==0||(w&4)!==0)&&Rm(u,o,T),v=v.next}while(v!==p)}cs(i,o,u);break;case 1:if(!rn&&(Ca(u,o),p=u.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=u.memoizedProps,p.state=u.memoizedState,p.componentWillUnmount()}catch(L){gt(u,o,L)}cs(i,o,u);break;case 21:cs(i,o,u);break;case 22:u.mode&1?(rn=(p=rn)||u.memoizedState!==null,cs(i,o,u),rn=p):cs(i,o,u);break;default:cs(i,o,u)}}function E1(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var u=i.stateNode;u===null&&(u=i.stateNode=new uI),o.forEach(function(p){var v=wI.bind(null,i,p);u.has(p)||(u.add(p),p.then(v,v))})}}function mr(i,o){var u=o.deletions;if(u!==null)for(var p=0;p<u.length;p++){var v=u[p];try{var w=i,T=o,L=T;e:for(;L!==null;){switch(L.tag){case 5:Kt=L.stateNode,fr=!1;break e;case 3:Kt=L.stateNode.containerInfo,fr=!0;break e;case 4:Kt=L.stateNode.containerInfo,fr=!0;break e}L=L.return}if(Kt===null)throw Error(t(160));S1(w,T,v),Kt=null,fr=!1;var F=v.alternate;F!==null&&(F.return=null),v.return=null}catch(Y){gt(v,o,Y)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)T1(o,i),o=o.sibling}function T1(i,o){var u=i.alternate,p=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(mr(o,i),Hr(i),p&4){try{pc(3,i,i.return),Sd(3,i)}catch(ke){gt(i,i.return,ke)}try{pc(5,i,i.return)}catch(ke){gt(i,i.return,ke)}}break;case 1:mr(o,i),Hr(i),p&512&&u!==null&&Ca(u,u.return);break;case 5:if(mr(o,i),Hr(i),p&512&&u!==null&&Ca(u,u.return),i.flags&32){var v=i.stateNode;try{qs(v,"")}catch(ke){gt(i,i.return,ke)}}if(p&4&&(v=i.stateNode,v!=null)){var w=i.memoizedProps,T=u!==null?u.memoizedProps:w,L=i.type,F=i.updateQueue;if(i.updateQueue=null,F!==null)try{L==="input"&&w.type==="radio"&&w.name!=null&&Ko(v,w),Qo(L,T);var Y=Qo(L,w);for(T=0;T<F.length;T+=2){var re=F[T],se=F[T+1];re==="style"?Go(v,se):re==="dangerouslySetInnerHTML"?Cu(v,se):re==="children"?qs(v,se):R(v,re,se,Y)}switch(L){case"input":Ks(v,w);break;case"textarea":Iu(v,w);break;case"select":var ne=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!w.multiple;var fe=w.value;fe!=null?or(v,!!w.multiple,fe,!1):ne!==!!w.multiple&&(w.defaultValue!=null?or(v,!!w.multiple,w.defaultValue,!0):or(v,!!w.multiple,w.multiple?[]:"",!1))}v[ic]=w}catch(ke){gt(i,i.return,ke)}}break;case 6:if(mr(o,i),Hr(i),p&4){if(i.stateNode===null)throw Error(t(162));v=i.stateNode,w=i.memoizedProps;try{v.nodeValue=w}catch(ke){gt(i,i.return,ke)}}break;case 3:if(mr(o,i),Hr(i),p&4&&u!==null&&u.memoizedState.isDehydrated)try{Zi(o.containerInfo)}catch(ke){gt(i,i.return,ke)}break;case 4:mr(o,i),Hr(i);break;case 13:mr(o,i),Hr(i),v=i.child,v.flags&8192&&(w=v.memoizedState!==null,v.stateNode.isHidden=w,!w||v.alternate!==null&&v.alternate.memoizedState!==null||(Lm=nt())),p&4&&E1(i);break;case 22:if(re=u!==null&&u.memoizedState!==null,i.mode&1?(rn=(Y=rn)||re,mr(o,i),rn=Y):mr(o,i),Hr(i),p&8192){if(Y=i.memoizedState!==null,(i.stateNode.isHidden=Y)&&!re&&(i.mode&1)!==0)for(ve=i,re=i.child;re!==null;){for(se=ve=re;ve!==null;){switch(ne=ve,fe=ne.child,ne.tag){case 0:case 11:case 14:case 15:pc(4,ne,ne.return);break;case 1:Ca(ne,ne.return);var we=ne.stateNode;if(typeof we.componentWillUnmount=="function"){p=ne,u=ne.return;try{o=p,we.props=o.memoizedProps,we.state=o.memoizedState,we.componentWillUnmount()}catch(ke){gt(p,u,ke)}}break;case 5:Ca(ne,ne.return);break;case 22:if(ne.memoizedState!==null){A1(se);continue}}fe!==null?(fe.return=ne,ve=fe):A1(se)}re=re.sibling}e:for(re=null,se=i;;){if(se.tag===5){if(re===null){re=se;try{v=se.stateNode,Y?(w=v.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(L=se.stateNode,F=se.memoizedProps.style,T=F!=null&&F.hasOwnProperty("display")?F.display:null,L.style.display=$i("display",T))}catch(ke){gt(i,i.return,ke)}}}else if(se.tag===6){if(re===null)try{se.stateNode.nodeValue=Y?"":se.memoizedProps}catch(ke){gt(i,i.return,ke)}}else if((se.tag!==22&&se.tag!==23||se.memoizedState===null||se===i)&&se.child!==null){se.child.return=se,se=se.child;continue}if(se===i)break e;for(;se.sibling===null;){if(se.return===null||se.return===i)break e;re===se&&(re=null),se=se.return}re===se&&(re=null),se.sibling.return=se.return,se=se.sibling}}break;case 19:mr(o,i),Hr(i),p&4&&E1(i);break;case 21:break;default:mr(o,i),Hr(i)}}function Hr(i){var o=i.flags;if(o&2){try{e:{for(var u=i.return;u!==null;){if(b1(u)){var p=u;break e}u=u.return}throw Error(t(160))}switch(p.tag){case 5:var v=p.stateNode;p.flags&32&&(qs(v,""),p.flags&=-33);var w=_1(i);Mm(i,w,v);break;case 3:case 4:var T=p.stateNode.containerInfo,L=_1(i);Nm(i,L,T);break;default:throw Error(t(161))}}catch(F){gt(i,i.return,F)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function hI(i,o,u){ve=i,I1(i)}function I1(i,o,u){for(var p=(i.mode&1)!==0;ve!==null;){var v=ve,w=v.child;if(v.tag===22&&p){var T=v.memoizedState!==null||_d;if(!T){var L=v.alternate,F=L!==null&&L.memoizedState!==null||rn;L=_d;var Y=rn;if(_d=T,(rn=F)&&!Y)for(ve=v;ve!==null;)T=ve,F=T.child,T.tag===22&&T.memoizedState!==null?j1(v):F!==null?(F.return=T,ve=F):j1(v);for(;w!==null;)ve=w,I1(w),w=w.sibling;ve=v,_d=L,rn=Y}C1(i)}else(v.subtreeFlags&8772)!==0&&w!==null?(w.return=v,ve=w):C1(i)}}function C1(i){for(;ve!==null;){var o=ve;if((o.flags&8772)!==0){var u=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:rn||Sd(5,o);break;case 1:var p=o.stateNode;if(o.flags&4&&!rn)if(u===null)p.componentDidMount();else{var v=o.elementType===o.type?u.memoizedProps:hr(o.type,u.memoizedProps);p.componentDidUpdate(v,u.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var w=o.updateQueue;w!==null&&Av(o,w,p);break;case 3:var T=o.updateQueue;if(T!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}Av(o,T,u)}break;case 5:var L=o.stateNode;if(u===null&&o.flags&4){u=L;var F=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":F.autoFocus&&u.focus();break;case"img":F.src&&(u.src=F.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var Y=o.alternate;if(Y!==null){var re=Y.memoizedState;if(re!==null){var se=re.dehydrated;se!==null&&Zi(se)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}rn||o.flags&512&&Pm(o)}catch(ne){gt(o,o.return,ne)}}if(o===i){ve=null;break}if(u=o.sibling,u!==null){u.return=o.return,ve=u;break}ve=o.return}}function A1(i){for(;ve!==null;){var o=ve;if(o===i){ve=null;break}var u=o.sibling;if(u!==null){u.return=o.return,ve=u;break}ve=o.return}}function j1(i){for(;ve!==null;){var o=ve;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{Sd(4,o)}catch(F){gt(o,u,F)}break;case 1:var p=o.stateNode;if(typeof p.componentDidMount=="function"){var v=o.return;try{p.componentDidMount()}catch(F){gt(o,v,F)}}var w=o.return;try{Pm(o)}catch(F){gt(o,w,F)}break;case 5:var T=o.return;try{Pm(o)}catch(F){gt(o,T,F)}}}catch(F){gt(o,o.return,F)}if(o===i){ve=null;break}var L=o.sibling;if(L!==null){L.return=o.return,ve=L;break}ve=o.return}}var fI=Math.ceil,Ed=K.ReactCurrentDispatcher,Dm=K.ReactCurrentOwner,qn=K.ReactCurrentBatchConfig,qe=0,Ft=null,It=null,qt=0,Mn=0,Aa=is(0),Dt=0,gc=null,po=0,Td=0,Vm=0,yc=null,xn=null,Lm=0,ja=1/0,vi=null,Id=!1,Om=null,us=null,Cd=!1,ds=null,Ad=0,vc=0,Bm=null,jd=-1,Rd=0;function fn(){return(qe&6)!==0?nt():jd!==-1?jd:jd=nt()}function hs(i){return(i.mode&1)===0?1:(qe&2)!==0&&qt!==0?qt&-qt:YT.transition!==null?(Rd===0&&(Rd=Bl()),Rd):(i=$e,i!==0||(i=window.event,i=i===void 0?16:sa(i.type)),i)}function pr(i,o,u,p){if(50<vc)throw vc=0,Bm=null,Error(t(185));no(i,u,p),((qe&2)===0||i!==Ft)&&(i===Ft&&((qe&2)===0&&(Td|=u),Dt===4&&fs(i,qt)),wn(i,p),u===1&&qe===0&&(o.mode&1)===0&&(ja=nt()+500,sd&&os()))}function wn(i,o){var u=i.callbackNode;to(i,o);var p=si(i,i===Ft?qt:0);if(p===0)u!==null&&Jo(u),i.callbackNode=null,i.callbackPriority=0;else if(o=p&-p,i.callbackPriority!==o){if(u!=null&&Jo(u),o===1)i.tag===0?QT(P1.bind(null,i)):yv(P1.bind(null,i)),HT(function(){(qe&6)===0&&os()}),u=null;else{switch(Pr(p)){case 1:u=Zo;break;case 4:u=Vl;break;case 16:u=Xs;break;case 536870912:u=ea;break;default:u=Xs}u=z1(u,R1.bind(null,i))}i.callbackPriority=o,i.callbackNode=u}}function R1(i,o){if(jd=-1,Rd=0,(qe&6)!==0)throw Error(t(327));var u=i.callbackNode;if(Ra()&&i.callbackNode!==u)return null;var p=si(i,i===Ft?qt:0);if(p===0)return null;if((p&30)!==0||(p&i.expiredLanes)!==0||o)o=Pd(i,p);else{o=p;var v=qe;qe|=2;var w=M1();(Ft!==i||qt!==o)&&(vi=null,ja=nt()+500,yo(i,o));do try{gI();break}catch(L){N1(i,L)}while(!0);rm(),Ed.current=w,qe=v,It!==null?o=0:(Ft=null,qt=0,o=Dt)}if(o!==0){if(o===2&&(v=Ol(i),v!==0&&(p=v,o=zm(i,v))),o===1)throw u=gc,yo(i,0),fs(i,p),wn(i,nt()),u;if(o===6)fs(i,p);else{if(v=i.current.alternate,(p&30)===0&&!mI(v)&&(o=Pd(i,p),o===2&&(w=Ol(i),w!==0&&(p=w,o=zm(i,w))),o===1))throw u=gc,yo(i,0),fs(i,p),wn(i,nt()),u;switch(i.finishedWork=v,i.finishedLanes=p,o){case 0:case 1:throw Error(t(345));case 2:vo(i,xn,vi);break;case 3:if(fs(i,p),(p&130023424)===p&&(o=Lm+500-nt(),10<o)){if(si(i,0)!==0)break;if(v=i.suspendedLanes,(v&p)!==p){fn(),i.pingedLanes|=i.suspendedLanes&v;break}i.timeoutHandle=Kf(vo.bind(null,i,xn,vi),o);break}vo(i,xn,vi);break;case 4:if(fs(i,p),(p&4194240)===p)break;for(o=i.eventTimes,v=-1;0<p;){var T=31-In(p);w=1<<T,T=o[T],T>v&&(v=T),p&=~w}if(p=v,p=nt()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*fI(p/1960))-p,10<p){i.timeoutHandle=Kf(vo.bind(null,i,xn,vi),p);break}vo(i,xn,vi);break;case 5:vo(i,xn,vi);break;default:throw Error(t(329))}}}return wn(i,nt()),i.callbackNode===u?R1.bind(null,i):null}function zm(i,o){var u=yc;return i.current.memoizedState.isDehydrated&&(yo(i,o).flags|=256),i=Pd(i,o),i!==2&&(o=xn,xn=u,o!==null&&Fm(o)),i}function Fm(i){xn===null?xn=i:xn.push.apply(xn,i)}function mI(i){for(var o=i;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var p=0;p<u.length;p++){var v=u[p],w=v.getSnapshot;v=v.value;try{if(!ur(w(),v))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function fs(i,o){for(o&=~Vm,o&=~Td,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var u=31-In(o),p=1<<u;i[u]=-1,o&=~p}}function P1(i){if((qe&6)!==0)throw Error(t(327));Ra();var o=si(i,0);if((o&1)===0)return wn(i,nt()),null;var u=Pd(i,o);if(i.tag!==0&&u===2){var p=Ol(i);p!==0&&(o=p,u=zm(i,p))}if(u===1)throw u=gc,yo(i,0),fs(i,o),wn(i,nt()),u;if(u===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,vo(i,xn,vi),wn(i,nt()),null}function Um(i,o){var u=qe;qe|=1;try{return i(o)}finally{qe=u,qe===0&&(ja=nt()+500,sd&&os())}}function go(i){ds!==null&&ds.tag===0&&(qe&6)===0&&Ra();var o=qe;qe|=1;var u=qn.transition,p=$e;try{if(qn.transition=null,$e=1,i)return i()}finally{$e=p,qn.transition=u,qe=o,(qe&6)===0&&os()}}function Wm(){Mn=Aa.current,it(Aa)}function yo(i,o){i.finishedWork=null,i.finishedLanes=0;var u=i.timeoutHandle;if(u!==-1&&(i.timeoutHandle=-1,$T(u)),It!==null)for(u=It.return;u!==null;){var p=u;switch(Jf(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&rd();break;case 3:Ta(),it(gn),it(en),dm();break;case 5:cm(p);break;case 4:Ta();break;case 13:it(ut);break;case 19:it(ut);break;case 10:im(p.type._context);break;case 22:case 23:Wm()}u=u.return}if(Ft=i,It=i=ms(i.current,null),qt=Mn=o,Dt=0,gc=null,Vm=Td=po=0,xn=yc=null,ho!==null){for(o=0;o<ho.length;o++)if(u=ho[o],p=u.interleaved,p!==null){u.interleaved=null;var v=p.next,w=u.pending;if(w!==null){var T=w.next;w.next=v,p.next=T}u.pending=p}ho=null}return i}function N1(i,o){do{var u=It;try{if(rm(),pd.current=xd,gd){for(var p=dt.memoizedState;p!==null;){var v=p.queue;v!==null&&(v.pending=null),p=p.next}gd=!1}if(mo=0,zt=Mt=dt=null,uc=!1,dc=0,Dm.current=null,u===null||u.return===null){Dt=1,gc=o,It=null;break}e:{var w=i,T=u.return,L=u,F=o;if(o=qt,L.flags|=32768,F!==null&&typeof F=="object"&&typeof F.then=="function"){var Y=F,re=L,se=re.tag;if((re.mode&1)===0&&(se===0||se===11||se===15)){var ne=re.alternate;ne?(re.updateQueue=ne.updateQueue,re.memoizedState=ne.memoizedState,re.lanes=ne.lanes):(re.updateQueue=null,re.memoizedState=null)}var fe=i1(T);if(fe!==null){fe.flags&=-257,s1(fe,T,L,w,o),fe.mode&1&&r1(w,Y,o),o=fe,F=Y;var we=o.updateQueue;if(we===null){var ke=new Set;ke.add(F),o.updateQueue=ke}else we.add(F);break e}else{if((o&1)===0){r1(w,Y,o),$m();break e}F=Error(t(426))}}else if(lt&&L.mode&1){var kt=i1(T);if(kt!==null){(kt.flags&65536)===0&&(kt.flags|=256),s1(kt,T,L,w,o),tm(Ia(F,L));break e}}w=F=Ia(F,L),Dt!==4&&(Dt=2),yc===null?yc=[w]:yc.push(w),w=T;do{switch(w.tag){case 3:w.flags|=65536,o&=-o,w.lanes|=o;var q=t1(w,F,o);Cv(w,q);break e;case 1:L=F;var W=w.type,Q=w.stateNode;if((w.flags&128)===0&&(typeof W.getDerivedStateFromError=="function"||Q!==null&&typeof Q.componentDidCatch=="function"&&(us===null||!us.has(Q)))){w.flags|=65536,o&=-o,w.lanes|=o;var oe=n1(w,L,o);Cv(w,oe);break e}}w=w.return}while(w!==null)}V1(u)}catch(be){o=be,It===u&&u!==null&&(It=u=u.return);continue}break}while(!0)}function M1(){var i=Ed.current;return Ed.current=xd,i===null?xd:i}function $m(){(Dt===0||Dt===3||Dt===2)&&(Dt=4),Ft===null||(po&268435455)===0&&(Td&268435455)===0||fs(Ft,qt)}function Pd(i,o){var u=qe;qe|=2;var p=M1();(Ft!==i||qt!==o)&&(vi=null,yo(i,o));do try{pI();break}catch(v){N1(i,v)}while(!0);if(rm(),qe=u,Ed.current=p,It!==null)throw Error(t(261));return Ft=null,qt=0,Dt}function pI(){for(;It!==null;)D1(It)}function gI(){for(;It!==null&&!Ys();)D1(It)}function D1(i){var o=B1(i.alternate,i,Mn);i.memoizedProps=i.pendingProps,o===null?V1(i):It=o,Dm.current=null}function V1(i){var o=i;do{var u=o.alternate;if(i=o.return,(o.flags&32768)===0){if(u=lI(u,o,Mn),u!==null){It=u;return}}else{if(u=cI(u,o),u!==null){u.flags&=32767,It=u;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Dt=6,It=null;return}}if(o=o.sibling,o!==null){It=o;return}It=o=i}while(o!==null);Dt===0&&(Dt=5)}function vo(i,o,u){var p=$e,v=qn.transition;try{qn.transition=null,$e=1,yI(i,o,u,p)}finally{qn.transition=v,$e=p}return null}function yI(i,o,u,p){do Ra();while(ds!==null);if((qe&6)!==0)throw Error(t(327));u=i.finishedWork;var v=i.finishedLanes;if(u===null)return null;if(i.finishedWork=null,i.finishedLanes=0,u===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var w=u.lanes|u.childLanes;if(jf(i,w),i===Ft&&(It=Ft=null,qt=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Cd||(Cd=!0,z1(Xs,function(){return Ra(),null})),w=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||w){w=qn.transition,qn.transition=null;var T=$e;$e=1;var L=qe;qe|=4,Dm.current=null,dI(i,u),T1(u,i),LT($f),li=!!Wf,$f=Wf=null,i.current=u,hI(u),ii(),qe=L,$e=T,qn.transition=w}else i.current=u;if(Cd&&(Cd=!1,ds=i,Ad=v),w=i.pendingLanes,w===0&&(us=null),Bu(u.stateNode),wn(i,nt()),o!==null)for(p=i.onRecoverableError,u=0;u<o.length;u++)v=o[u],p(v.value,{componentStack:v.stack,digest:v.digest});if(Id)throw Id=!1,i=Om,Om=null,i;return(Ad&1)!==0&&i.tag!==0&&Ra(),w=i.pendingLanes,(w&1)!==0?i===Bm?vc++:(vc=0,Bm=i):vc=0,os(),null}function Ra(){if(ds!==null){var i=Pr(Ad),o=qn.transition,u=$e;try{if(qn.transition=null,$e=16>i?16:i,ds===null)var p=!1;else{if(i=ds,ds=null,Ad=0,(qe&6)!==0)throw Error(t(331));var v=qe;for(qe|=4,ve=i.current;ve!==null;){var w=ve,T=w.child;if((ve.flags&16)!==0){var L=w.deletions;if(L!==null){for(var F=0;F<L.length;F++){var Y=L[F];for(ve=Y;ve!==null;){var re=ve;switch(re.tag){case 0:case 11:case 15:pc(8,re,w)}var se=re.child;if(se!==null)se.return=re,ve=se;else for(;ve!==null;){re=ve;var ne=re.sibling,fe=re.return;if(k1(re),re===Y){ve=null;break}if(ne!==null){ne.return=fe,ve=ne;break}ve=fe}}}var we=w.alternate;if(we!==null){var ke=we.child;if(ke!==null){we.child=null;do{var kt=ke.sibling;ke.sibling=null,ke=kt}while(ke!==null)}}ve=w}}if((w.subtreeFlags&2064)!==0&&T!==null)T.return=w,ve=T;else e:for(;ve!==null;){if(w=ve,(w.flags&2048)!==0)switch(w.tag){case 0:case 11:case 15:pc(9,w,w.return)}var q=w.sibling;if(q!==null){q.return=w.return,ve=q;break e}ve=w.return}}var W=i.current;for(ve=W;ve!==null;){T=ve;var Q=T.child;if((T.subtreeFlags&2064)!==0&&Q!==null)Q.return=T,ve=Q;else e:for(T=W;ve!==null;){if(L=ve,(L.flags&2048)!==0)try{switch(L.tag){case 0:case 11:case 15:Sd(9,L)}}catch(be){gt(L,L.return,be)}if(L===T){ve=null;break e}var oe=L.sibling;if(oe!==null){oe.return=L.return,ve=oe;break e}ve=L.return}}if(qe=v,os(),Tn&&typeof Tn.onPostCommitFiberRoot=="function")try{Tn.onPostCommitFiberRoot(Js,i)}catch{}p=!0}return p}finally{$e=u,qn.transition=o}}return!1}function L1(i,o,u){o=Ia(u,o),o=t1(i,o,1),i=ls(i,o,1),o=fn(),i!==null&&(no(i,1,o),wn(i,o))}function gt(i,o,u){if(i.tag===3)L1(i,i,u);else for(;o!==null;){if(o.tag===3){L1(o,i,u);break}else if(o.tag===1){var p=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(us===null||!us.has(p))){i=Ia(u,i),i=n1(o,i,1),o=ls(o,i,1),i=fn(),o!==null&&(no(o,1,i),wn(o,i));break}}o=o.return}}function vI(i,o,u){var p=i.pingCache;p!==null&&p.delete(o),o=fn(),i.pingedLanes|=i.suspendedLanes&u,Ft===i&&(qt&u)===u&&(Dt===4||Dt===3&&(qt&130023424)===qt&&500>nt()-Lm?yo(i,0):Vm|=u),wn(i,o)}function O1(i,o){o===0&&((i.mode&1)===0?o=1:(o=Yi,Yi<<=1,(Yi&130023424)===0&&(Yi=4194304)));var u=fn();i=pi(i,o),i!==null&&(no(i,o,u),wn(i,u))}function xI(i){var o=i.memoizedState,u=0;o!==null&&(u=o.retryLane),O1(i,u)}function wI(i,o){var u=0;switch(i.tag){case 13:var p=i.stateNode,v=i.memoizedState;v!==null&&(u=v.retryLane);break;case 19:p=i.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(o),O1(i,u)}var B1;B1=function(i,o,u){if(i!==null)if(i.memoizedProps!==o.pendingProps||gn.current)vn=!0;else{if((i.lanes&u)===0&&(o.flags&128)===0)return vn=!1,aI(i,o,u);vn=(i.flags&131072)!==0}else vn=!1,lt&&(o.flags&1048576)!==0&&vv(o,ad,o.index);switch(o.lanes=0,o.tag){case 2:var p=o.type;bd(i,o),i=o.pendingProps;var v=xa(o,en.current);Ea(o,u),v=mm(null,o,p,i,v,u);var w=pm();return o.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,yn(p)?(w=!0,id(o)):w=!1,o.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,am(o),v.updater=wd,o.stateNode=v,v._reactInternals=o,km(o,p,i,u),o=Em(null,o,p,!0,w,u)):(o.tag=0,lt&&w&&Xf(o),hn(null,o,v,u),o=o.child),o;case 16:p=o.elementType;e:{switch(bd(i,o),i=o.pendingProps,v=p._init,p=v(p._payload),o.type=p,v=o.tag=bI(p),i=hr(p,i),v){case 0:o=Sm(null,o,p,i,u);break e;case 1:o=d1(null,o,p,i,u);break e;case 11:o=o1(null,o,p,i,u);break e;case 14:o=a1(null,o,p,hr(p.type,i),u);break e}throw Error(t(306,p,""))}return o;case 0:return p=o.type,v=o.pendingProps,v=o.elementType===p?v:hr(p,v),Sm(i,o,p,v,u);case 1:return p=o.type,v=o.pendingProps,v=o.elementType===p?v:hr(p,v),d1(i,o,p,v,u);case 3:e:{if(h1(o),i===null)throw Error(t(387));p=o.pendingProps,w=o.memoizedState,v=w.element,Iv(i,o),fd(o,p,null,u);var T=o.memoizedState;if(p=T.element,w.isDehydrated)if(w={element:p,isDehydrated:!1,cache:T.cache,pendingSuspenseBoundaries:T.pendingSuspenseBoundaries,transitions:T.transitions},o.updateQueue.baseState=w,o.memoizedState=w,o.flags&256){v=Ia(Error(t(423)),o),o=f1(i,o,p,u,v);break e}else if(p!==v){v=Ia(Error(t(424)),o),o=f1(i,o,p,u,v);break e}else for(Nn=rs(o.stateNode.containerInfo.firstChild),Pn=o,lt=!0,dr=null,u=Ev(o,null,p,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(ba(),p===v){o=yi(i,o,u);break e}hn(i,o,p,u)}o=o.child}return o;case 5:return jv(o),i===null&&em(o),p=o.type,v=o.pendingProps,w=i!==null?i.memoizedProps:null,T=v.children,Hf(p,v)?T=null:w!==null&&Hf(p,w)&&(o.flags|=32),u1(i,o),hn(i,o,T,u),o.child;case 6:return i===null&&em(o),null;case 13:return m1(i,o,u);case 4:return lm(o,o.stateNode.containerInfo),p=o.pendingProps,i===null?o.child=_a(o,null,p,u):hn(i,o,p,u),o.child;case 11:return p=o.type,v=o.pendingProps,v=o.elementType===p?v:hr(p,v),o1(i,o,p,v,u);case 7:return hn(i,o,o.pendingProps,u),o.child;case 8:return hn(i,o,o.pendingProps.children,u),o.child;case 12:return hn(i,o,o.pendingProps.children,u),o.child;case 10:e:{if(p=o.type._context,v=o.pendingProps,w=o.memoizedProps,T=v.value,et(ud,p._currentValue),p._currentValue=T,w!==null)if(ur(w.value,T)){if(w.children===v.children&&!gn.current){o=yi(i,o,u);break e}}else for(w=o.child,w!==null&&(w.return=o);w!==null;){var L=w.dependencies;if(L!==null){T=w.child;for(var F=L.firstContext;F!==null;){if(F.context===p){if(w.tag===1){F=gi(-1,u&-u),F.tag=2;var Y=w.updateQueue;if(Y!==null){Y=Y.shared;var re=Y.pending;re===null?F.next=F:(F.next=re.next,re.next=F),Y.pending=F}}w.lanes|=u,F=w.alternate,F!==null&&(F.lanes|=u),sm(w.return,u,o),L.lanes|=u;break}F=F.next}}else if(w.tag===10)T=w.type===o.type?null:w.child;else if(w.tag===18){if(T=w.return,T===null)throw Error(t(341));T.lanes|=u,L=T.alternate,L!==null&&(L.lanes|=u),sm(T,u,o),T=w.sibling}else T=w.child;if(T!==null)T.return=w;else for(T=w;T!==null;){if(T===o){T=null;break}if(w=T.sibling,w!==null){w.return=T.return,T=w;break}T=T.return}w=T}hn(i,o,v.children,u),o=o.child}return o;case 9:return v=o.type,p=o.pendingProps.children,Ea(o,u),v=Hn(v),p=p(v),o.flags|=1,hn(i,o,p,u),o.child;case 14:return p=o.type,v=hr(p,o.pendingProps),v=hr(p.type,v),a1(i,o,p,v,u);case 15:return l1(i,o,o.type,o.pendingProps,u);case 17:return p=o.type,v=o.pendingProps,v=o.elementType===p?v:hr(p,v),bd(i,o),o.tag=1,yn(p)?(i=!0,id(o)):i=!1,Ea(o,u),Zv(o,p,v),km(o,p,v,u),Em(null,o,p,!0,i,u);case 19:return g1(i,o,u);case 22:return c1(i,o,u)}throw Error(t(156,o.tag))};function z1(i,o){return Dl(i,o)}function kI(i,o,u,p){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gn(i,o,u,p){return new kI(i,o,u,p)}function Hm(i){return i=i.prototype,!(!i||!i.isReactComponent)}function bI(i){if(typeof i=="function")return Hm(i)?1:0;if(i!=null){if(i=i.$$typeof,i===$)return 11;if(i===Ke)return 14}return 2}function ms(i,o){var u=i.alternate;return u===null?(u=Gn(i.tag,o,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=o,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&14680064,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,o=i.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u}function Nd(i,o,u,p,v,w){var T=2;if(p=i,typeof i=="function")Hm(i)&&(T=1);else if(typeof i=="string")T=5;else e:switch(i){case A:return xo(u.children,v,w,o);case E:T=8,v|=8;break;case N:return i=Gn(12,u,o,v|2),i.elementType=N,i.lanes=w,i;case O:return i=Gn(13,u,o,v),i.elementType=O,i.lanes=w,i;case Ve:return i=Gn(19,u,o,v),i.elementType=Ve,i.lanes=w,i;case Te:return Md(u,v,w,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case V:T=10;break e;case B:T=9;break e;case $:T=11;break e;case Ke:T=14;break e;case at:T=16,p=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=Gn(T,u,o,v),o.elementType=i,o.type=p,o.lanes=w,o}function xo(i,o,u,p){return i=Gn(7,i,p,o),i.lanes=u,i}function Md(i,o,u,p){return i=Gn(22,i,p,o),i.elementType=Te,i.lanes=u,i.stateNode={isHidden:!1},i}function Km(i,o,u){return i=Gn(6,i,null,o),i.lanes=u,i}function qm(i,o,u){return o=Gn(4,i.children!==null?i.children:[],i.key,o),o.lanes=u,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function _I(i,o,u,p,v){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zl(0),this.expirationTimes=zl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zl(0),this.identifierPrefix=p,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function Gm(i,o,u,p,v,w,T,L,F){return i=new _I(i,o,u,L,F),o===1?(o=1,w===!0&&(o|=8)):o=0,w=Gn(3,null,null,o),i.current=w,w.stateNode=i,w.memoizedState={element:p,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},am(w),i}function SI(i,o,u){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:U,key:p==null?null:""+p,children:i,containerInfo:o,implementation:u}}function F1(i){if(!i)return ss;i=i._reactInternals;e:{if(lr(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(yn(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var u=i.type;if(yn(u))return pv(i,u,o)}return o}function U1(i,o,u,p,v,w,T,L,F){return i=Gm(u,p,!0,i,v,w,T,L,F),i.context=F1(null),u=i.current,p=fn(),v=hs(u),w=gi(p,v),w.callback=o??null,ls(u,w,v),i.current.lanes=v,no(i,v,p),wn(i,p),i}function Dd(i,o,u,p){var v=o.current,w=fn(),T=hs(v);return u=F1(u),o.context===null?o.context=u:o.pendingContext=u,o=gi(w,T),o.payload={element:i},p=p===void 0?null:p,p!==null&&(o.callback=p),i=ls(v,o,T),i!==null&&(pr(i,v,T,w),hd(i,v,T)),T}function Vd(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function W1(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<o?u:o}}function Qm(i,o){W1(i,o),(i=i.alternate)&&W1(i,o)}function EI(){return null}var $1=typeof reportError=="function"?reportError:function(i){console.error(i)};function Ym(i){this._internalRoot=i}Ld.prototype.render=Ym.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));Dd(i,o,null,null)},Ld.prototype.unmount=Ym.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;go(function(){Dd(null,i,null,null)}),o[di]=null}};function Ld(i){this._internalRoot=i}Ld.prototype.unstable_scheduleHydration=function(i){if(i){var o=$l();i={blockedOn:null,target:i,priority:o};for(var u=0;u<Cn.length&&o!==0&&o<Cn[u].priority;u++);Cn.splice(u,0,i),u===0&&ra(i)}};function Xm(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Od(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function H1(){}function TI(i,o,u,p,v){if(v){if(typeof p=="function"){var w=p;p=function(){var Y=Vd(T);w.call(Y)}}var T=U1(o,p,i,0,null,!1,!1,"",H1);return i._reactRootContainer=T,i[di]=T.current,nc(i.nodeType===8?i.parentNode:i),go(),T}for(;v=i.lastChild;)i.removeChild(v);if(typeof p=="function"){var L=p;p=function(){var Y=Vd(F);L.call(Y)}}var F=Gm(i,0,!1,null,null,!1,!1,"",H1);return i._reactRootContainer=F,i[di]=F.current,nc(i.nodeType===8?i.parentNode:i),go(function(){Dd(o,F,u,p)}),F}function Bd(i,o,u,p,v){var w=u._reactRootContainer;if(w){var T=w;if(typeof v=="function"){var L=v;v=function(){var F=Vd(T);L.call(F)}}Dd(o,T,i,v)}else T=TI(u,o,i,v,p);return Vd(T)}Ul=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var u=Qe(o.pendingLanes);u!==0&&(Fl(o,u|1),wn(o,nt()),(qe&6)===0&&(ja=nt()+500,os()))}break;case 13:go(function(){var p=pi(i,1);if(p!==null){var v=fn();pr(p,i,1,v)}}),Qm(i,1)}},ta=function(i){if(i.tag===13){var o=pi(i,134217728);if(o!==null){var u=fn();pr(o,i,134217728,u)}Qm(i,134217728)}},Wl=function(i){if(i.tag===13){var o=hs(i),u=pi(i,o);if(u!==null){var p=fn();pr(u,i,o,p)}Qm(i,o)}},$l=function(){return $e},Hl=function(i,o){var u=$e;try{return $e=i,o()}finally{$e=u}},ti=function(i,o,u){switch(o){case"input":if(Ks(i,u),o=u.name,u.type==="radio"&&o!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var p=u[o];if(p!==i&&p.form===i.form){var v=nd(p);if(!v)throw Error(t(90));Hs(p),Ks(p,v)}}}break;case"textarea":Iu(i,u);break;case"select":o=u.value,o!=null&&or(i,!!u.multiple,o,!1)}},ju=Um,Ru=go;var II={usingClientEntryPoint:!1,Events:[sc,ya,nd,Ki,qi,Um]},xc={findFiberByHostInstance:ao,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},CI={bundleType:xc.bundleType,version:xc.version,rendererPackageName:xc.rendererPackageName,rendererConfig:xc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:K.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Ou(i),i===null?null:i.stateNode},findFiberByHostInstance:xc.findFiberByHostInstance||EI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zd.isDisabled&&zd.supportsFiber)try{Js=zd.inject(CI),Tn=zd}catch{}}return kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=II,kn.createPortal=function(i,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Xm(o))throw Error(t(200));return SI(i,o,null,u)},kn.createRoot=function(i,o){if(!Xm(i))throw Error(t(299));var u=!1,p="",v=$1;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onRecoverableError!==void 0&&(v=o.onRecoverableError)),o=Gm(i,1,!1,null,null,u,!1,p,v),i[di]=o.current,nc(i.nodeType===8?i.parentNode:i),new Ym(o)},kn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=Ou(o),i=i===null?null:i.stateNode,i},kn.flushSync=function(i){return go(i)},kn.hydrate=function(i,o,u){if(!Od(o))throw Error(t(200));return Bd(null,i,o,!0,u)},kn.hydrateRoot=function(i,o,u){if(!Xm(i))throw Error(t(405));var p=u!=null&&u.hydratedSources||null,v=!1,w="",T=$1;if(u!=null&&(u.unstable_strictMode===!0&&(v=!0),u.identifierPrefix!==void 0&&(w=u.identifierPrefix),u.onRecoverableError!==void 0&&(T=u.onRecoverableError)),o=U1(o,null,i,1,u??null,v,!1,w,T),i[di]=o.current,nc(i),p)for(i=0;i<p.length;i++)u=p[i],v=u._getVersion,v=v(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,v]:o.mutableSourceEagerHydrationData.push(u,v);return new Ld(o)},kn.render=function(i,o,u){if(!Od(o))throw Error(t(200));return Bd(null,i,o,!1,u)},kn.unmountComponentAtNode=function(i){if(!Od(i))throw Error(t(40));return i._reactRootContainer?(go(function(){Bd(null,null,i,!1,function(){i._reactRootContainer=null,i[di]=null})}),!0):!1},kn.unstable_batchedUpdates=Um,kn.unstable_renderSubtreeIntoContainer=function(i,o,u,p){if(!Od(u))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return Bd(i,o,u,!1,p)},kn.version="18.3.1-next-f1338f8080-20240426",kn}var Z1;function LI(){if(Z1)return ep.exports;Z1=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ep.exports=VI(),ep.exports}var ex;function OI(){if(ex)return Fd;ex=1;var n=LI();return Fd.createRoot=n.createRoot,Fd.hydrateRoot=n.hydrateRoot,Fd}var BI=OI();/**
 * react-router v7.12.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var tx="popstate";function zI(n={}){function e(s,l){let{pathname:c="/",search:f="",hash:d=""}=zo(s.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),Fp("",{pathname:c,search:f,hash:d},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(s,l){let c=s.document.querySelector("base"),f="";if(c&&c.getAttribute("href")){let d=s.location.href,m=d.indexOf("#");f=m===-1?d:d.slice(0,m)}return f+"#"+(typeof l=="string"?l:$c(l))}function r(s,l){On(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return UI(e,t,r,n)}function ct(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function On(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function FI(){return Math.random().toString(36).substring(2,10)}function nx(n,e){return{usr:n.state,key:n.key,idx:e}}function Fp(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?zo(e):e,state:t,key:e&&e.key||r||FI()}}function $c({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function zo(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function UI(n,e,t,r={}){let{window:s=document.defaultView,v5Compat:l=!1}=r,c=s.history,f="POP",d=null,m=g();m==null&&(m=0,c.replaceState({...c.state,idx:m},""));function g(){return(c.state||{idx:null}).idx}function y(){f="POP";let C=g(),M=C==null?null:C-m;m=C,d&&d({action:f,location:I.location,delta:M})}function x(C,M){f="PUSH";let D=Fp(I.location,C,M);t&&t(D,C),m=g()+1;let R=nx(D,m),K=I.createHref(D);try{c.pushState(R,"",K)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;s.location.assign(K)}l&&d&&d({action:f,location:I.location,delta:1})}function S(C,M){f="REPLACE";let D=Fp(I.location,C,M);t&&t(D,C),m=g();let R=nx(D,m),K=I.createHref(D);c.replaceState(R,"",K),l&&d&&d({action:f,location:I.location,delta:0})}function _(C){return WI(C)}let I={get action(){return f},get location(){return n(s,c)},listen(C){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(tx,y),d=C,()=>{s.removeEventListener(tx,y),d=null}},createHref(C){return e(s,C)},createURL:_,encodeLocation(C){let M=_(C);return{pathname:M.pathname,search:M.search,hash:M.hash}},push:x,replace:S,go(C){return c.go(C)}};return I}function WI(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),ct(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:$c(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function fb(n,e,t="/"){return $I(n,e,t,!1)}function $I(n,e,t,r){let s=typeof e=="string"?zo(e):e,l=Ai(s.pathname||"/",t);if(l==null)return null;let c=mb(n);HI(c);let f=null;for(let d=0;f==null&&d<c.length;++d){let m=nC(l);f=eC(c[d],m,r)}return f}function mb(n,e=[],t=[],r="",s=!1){let l=(c,f,d=s,m)=>{let g={relativePath:m===void 0?c.path||"":m,caseSensitive:c.caseSensitive===!0,childrenIndex:f,route:c};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(r)&&d)return;ct(g.relativePath.startsWith(r),`Absolute route path "${g.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(r.length)}let y=Ei([r,g.relativePath]),x=t.concat(g);c.children&&c.children.length>0&&(ct(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),mb(c.children,e,x,y,d)),!(c.path==null&&!c.index)&&e.push({path:y,score:JI(y,c.index),routesMeta:x})};return n.forEach((c,f)=>{var d;if(c.path===""||!((d=c.path)!=null&&d.includes("?")))l(c,f);else for(let m of pb(c.path))l(c,f,!0,m)}),e}function pb(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),l=t.replace(/\?$/,"");if(r.length===0)return s?[l,""]:[l];let c=pb(r.join("/")),f=[];return f.push(...c.map(d=>d===""?l:[l,d].join("/"))),s&&f.push(...c),f.map(d=>n.startsWith("/")&&d===""?"/":d)}function HI(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:ZI(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var KI=/^:[\w-]+$/,qI=3,GI=2,QI=1,YI=10,XI=-2,rx=n=>n==="*";function JI(n,e){let t=n.split("/"),r=t.length;return t.some(rx)&&(r+=XI),e&&(r+=GI),t.filter(s=>!rx(s)).reduce((s,l)=>s+(KI.test(l)?qI:l===""?QI:YI),r)}function ZI(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function eC(n,e,t=!1){let{routesMeta:r}=n,s={},l="/",c=[];for(let f=0;f<r.length;++f){let d=r[f],m=f===r.length-1,g=l==="/"?e:e.slice(l.length)||"/",y=vh({path:d.relativePath,caseSensitive:d.caseSensitive,end:m},g),x=d.route;if(!y&&m&&t&&!r[r.length-1].route.index&&(y=vh({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!y)return null;Object.assign(s,y.params),c.push({params:s,pathname:Ei([l,y.pathname]),pathnameBase:oC(Ei([l,y.pathnameBase])),route:x}),y.pathnameBase!=="/"&&(l=Ei([l,y.pathnameBase]))}return c}function vh(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=tC(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let l=s[0],c=l.replace(/(.)\/+$/,"$1"),f=s.slice(1);return{params:r.reduce((m,{paramName:g,isOptional:y},x)=>{if(g==="*"){let _=f[x]||"";c=l.slice(0,l.length-_.length).replace(/(.)\/+$/,"$1")}const S=f[x];return y&&!S?m[g]=void 0:m[g]=(S||"").replace(/%2F/g,"/"),m},{}),pathname:l,pathnameBase:c,pattern:n}}function tC(n,e=!1,t=!0){On(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,f,d)=>(r.push({paramName:f,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function nC(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return On(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Ai(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}var gb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rC=n=>gb.test(n);function iC(n,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?zo(n):n,l;if(t)if(rC(t))l=t;else{if(t.includes("//")){let c=t;t=t.replace(/\/\/+/g,"/"),On(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${t}`)}t.startsWith("/")?l=ix(t.substring(1),"/"):l=ix(t,e)}else l=e;return{pathname:l,search:aC(r),hash:lC(s)}}function ix(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function rp(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function sC(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Kg(n){let e=sC(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function qg(n,e,t,r=!1){let s;typeof n=="string"?s=zo(n):(s={...n},ct(!s.pathname||!s.pathname.includes("?"),rp("?","pathname","search",s)),ct(!s.pathname||!s.pathname.includes("#"),rp("#","pathname","hash",s)),ct(!s.search||!s.search.includes("#"),rp("#","search","hash",s)));let l=n===""||s.pathname==="",c=l?"/":s.pathname,f;if(c==null)f=t;else{let y=e.length-1;if(!r&&c.startsWith("..")){let x=c.split("/");for(;x[0]==="..";)x.shift(),y-=1;s.pathname=x.join("/")}f=y>=0?e[y]:"/"}let d=iC(s,f),m=c&&c!=="/"&&c.endsWith("/"),g=(l||c===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(m||g)&&(d.pathname+="/"),d}var Ei=n=>n.join("/").replace(/\/\/+/g,"/"),oC=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),aC=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,lC=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,cC=class{constructor(n,e,t,r=!1){this.status=n,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function uC(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function dC(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var yb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function vb(n,e){let t=n;if(typeof t!="string"||!gb.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let r=t,s=!1;if(yb)try{let l=new URL(window.location.href),c=t.startsWith("//")?new URL(l.protocol+t):new URL(t),f=Ai(c.pathname,e);c.origin===l.origin&&f!=null?t=f+c.search+c.hash:s=!0}catch{On(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:s,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var xb=["POST","PUT","PATCH","DELETE"];new Set(xb);var hC=["GET",...xb];new Set(hC);var cl=j.createContext(null);cl.displayName="DataRouter";var Yh=j.createContext(null);Yh.displayName="DataRouterState";var fC=j.createContext(!1),wb=j.createContext({isTransitioning:!1});wb.displayName="ViewTransition";var mC=j.createContext(new Map);mC.displayName="Fetchers";var pC=j.createContext(null);pC.displayName="Await";var Bn=j.createContext(null);Bn.displayName="Navigation";var ou=j.createContext(null);ou.displayName="Location";var Tr=j.createContext({outlet:null,matches:[],isDataRoute:!1});Tr.displayName="Route";var Gg=j.createContext(null);Gg.displayName="RouteError";var kb="REACT_ROUTER_ERROR",gC="REDIRECT",yC="ROUTE_ERROR_RESPONSE";function vC(n){if(n.startsWith(`${kb}:${gC}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function xC(n){if(n.startsWith(`${kb}:${yC}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new cC(e.status,e.statusText,e.data)}catch{}}function wC(n,{relative:e}={}){ct(ul(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=j.useContext(Bn),{hash:s,pathname:l,search:c}=au(n,{relative:e}),f=l;return t!=="/"&&(f=l==="/"?t:Ei([t,l])),r.createHref({pathname:f,search:c,hash:s})}function ul(){return j.useContext(ou)!=null}function ir(){return ct(ul(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(ou).location}var bb="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function _b(n){j.useContext(Bn).static||j.useLayoutEffect(n)}function dl(){let{isDataRoute:n}=j.useContext(Tr);return n?NC():kC()}function kC(){ct(ul(),"useNavigate() may be used only in the context of a <Router> component.");let n=j.useContext(cl),{basename:e,navigator:t}=j.useContext(Bn),{matches:r}=j.useContext(Tr),{pathname:s}=ir(),l=JSON.stringify(Kg(r)),c=j.useRef(!1);return _b(()=>{c.current=!0}),j.useCallback((d,m={})=>{if(On(c.current,bb),!c.current)return;if(typeof d=="number"){t.go(d);return}let g=qg(d,JSON.parse(l),s,m.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Ei([e,g.pathname])),(m.replace?t.replace:t.push)(g,m.state,m)},[e,t,l,s,n])}j.createContext(null);function Qg(){let{matches:n}=j.useContext(Tr),e=n[n.length-1];return e?e.params:{}}function au(n,{relative:e}={}){let{matches:t}=j.useContext(Tr),{pathname:r}=ir(),s=JSON.stringify(Kg(t));return j.useMemo(()=>qg(n,JSON.parse(s),r,e==="path"),[n,s,r,e])}function bC(n,e){return Sb(n,e)}function Sb(n,e,t,r,s){var D;ct(ul(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=j.useContext(Bn),{matches:c}=j.useContext(Tr),f=c[c.length-1],d=f?f.params:{},m=f?f.pathname:"/",g=f?f.pathnameBase:"/",y=f&&f.route;{let R=y&&y.path||"";Tb(m,!y||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let x=ir(),S;if(e){let R=typeof e=="string"?zo(e):e;ct(g==="/"||((D=R.pathname)==null?void 0:D.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${R.pathname}" was given in the \`location\` prop.`),S=R}else S=x;let _=S.pathname||"/",I=_;if(g!=="/"){let R=g.replace(/^\//,"").split("/");I="/"+_.replace(/^\//,"").split("/").slice(R.length).join("/")}let C=fb(n,{pathname:I});On(y||C!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),On(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let M=IC(C&&C.map(R=>Object.assign({},R,{params:Object.assign({},d,R.params),pathname:Ei([g,l.encodeLocation?l.encodeLocation(R.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?g:Ei([g,l.encodeLocation?l.encodeLocation(R.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathnameBase])})),c,t,r,s);return e&&M?j.createElement(ou.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},M):M}function _C(){let n=PC(),e=uC(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:l},"ErrorBoundary")," or"," ",j.createElement("code",{style:l},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),t?j.createElement("pre",{style:s},t):null,c)}var SC=j.createElement(_C,null),Eb=class extends j.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=xC(n.digest);t&&(n=t)}let e=n!==void 0?j.createElement(Tr.Provider,{value:this.props.routeContext},j.createElement(Gg.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?j.createElement(EC,{error:n},e):e}};Eb.contextType=fC;var ip=new WeakMap;function EC({children:n,error:e}){let{basename:t}=j.useContext(Bn);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=vC(e.digest);if(r){let s=ip.get(e);if(s)throw s;let l=vb(r.location,t);if(yb&&!ip.get(e))if(l.isExternal||r.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:r.replace}));throw ip.set(e,c),c}return j.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return n}function TC({routeContext:n,match:e,children:t}){let r=j.useContext(cl);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),j.createElement(Tr.Provider,{value:n},t)}function IC(n,e=[],t=null,r=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,c=t==null?void 0:t.errors;if(c!=null){let g=l.findIndex(y=>y.route.id&&(c==null?void 0:c[y.route.id])!==void 0);ct(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,g+1))}let f=!1,d=-1;if(t)for(let g=0;g<l.length;g++){let y=l[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(d=g),y.route.id){let{loaderData:x,errors:S}=t,_=y.route.loader&&!x.hasOwnProperty(y.route.id)&&(!S||S[y.route.id]===void 0);if(y.route.lazy||_){f=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}let m=t&&r?(g,y)=>{var x,S;r(g,{location:t.location,params:((S=(x=t.matches)==null?void 0:x[0])==null?void 0:S.params)??{},unstable_pattern:dC(t.matches),errorInfo:y})}:void 0;return l.reduceRight((g,y,x)=>{let S,_=!1,I=null,C=null;t&&(S=c&&y.route.id?c[y.route.id]:void 0,I=y.route.errorElement||SC,f&&(d<0&&x===0?(Tb("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,C=null):d===x&&(_=!0,C=y.route.hydrateFallbackElement||null)));let M=e.concat(l.slice(0,x+1)),D=()=>{let R;return S?R=I:_?R=C:y.route.Component?R=j.createElement(y.route.Component,null):y.route.element?R=y.route.element:R=g,j.createElement(TC,{match:y,routeContext:{outlet:g,matches:M,isDataRoute:t!=null},children:R})};return t&&(y.route.ErrorBoundary||y.route.errorElement||x===0)?j.createElement(Eb,{location:t.location,revalidation:t.revalidation,component:I,error:S,children:D(),routeContext:{outlet:null,matches:M,isDataRoute:!0},onError:m}):D()},null)}function Yg(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function CC(n){let e=j.useContext(cl);return ct(e,Yg(n)),e}function AC(n){let e=j.useContext(Yh);return ct(e,Yg(n)),e}function jC(n){let e=j.useContext(Tr);return ct(e,Yg(n)),e}function Xg(n){let e=jC(n),t=e.matches[e.matches.length-1];return ct(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function RC(){return Xg("useRouteId")}function PC(){var r;let n=j.useContext(Gg),e=AC("useRouteError"),t=Xg("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function NC(){let{router:n}=CC("useNavigate"),e=Xg("useNavigate"),t=j.useRef(!1);return _b(()=>{t.current=!0}),j.useCallback(async(s,l={})=>{On(t.current,bb),t.current&&(typeof s=="number"?await n.navigate(s):await n.navigate(s,{fromRouteId:e,...l}))},[n,e])}var sx={};function Tb(n,e,t){!e&&!sx[n]&&(sx[n]=!0,On(!1,t))}j.memo(MC);function MC({routes:n,future:e,state:t,onError:r}){return Sb(n,void 0,t,r,e)}function DC({to:n,replace:e,state:t,relative:r}){ct(ul(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=j.useContext(Bn);On(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=j.useContext(Tr),{pathname:c}=ir(),f=dl(),d=qg(n,Kg(l),c,r==="path"),m=JSON.stringify(d);return j.useEffect(()=>{f(JSON.parse(m),{replace:e,state:t,relative:r})},[f,m,r,e,t]),null}function ht(n){ct(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function VC({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:l=!1,unstable_useTransitions:c}){ct(!ul(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=n.replace(/^\/*/,"/"),d=j.useMemo(()=>({basename:f,navigator:s,static:l,unstable_useTransitions:c,future:{}}),[f,s,l,c]);typeof t=="string"&&(t=zo(t));let{pathname:m="/",search:g="",hash:y="",state:x=null,key:S="default"}=t,_=j.useMemo(()=>{let I=Ai(m,f);return I==null?null:{location:{pathname:I,search:g,hash:y,state:x,key:S},navigationType:r}},[f,m,g,y,x,S,r]);return On(_!=null,`<Router basename="${f}"> is not able to match the URL "${m}${g}${y}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:j.createElement(Bn.Provider,{value:d},j.createElement(ou.Provider,{children:e,value:_}))}function LC({children:n,location:e}){return bC(Up(n),e)}function Up(n,e=[]){let t=[];return j.Children.forEach(n,(r,s)=>{if(!j.isValidElement(r))return;let l=[...e,s];if(r.type===j.Fragment){t.push.apply(t,Up(r.props.children,l));return}ct(r.type===ht,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ct(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=Up(r.props.children,l)),t.push(c)}),t}var nh="get",rh="application/x-www-form-urlencoded";function Xh(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function OC(n){return Xh(n)&&n.tagName.toLowerCase()==="button"}function BC(n){return Xh(n)&&n.tagName.toLowerCase()==="form"}function zC(n){return Xh(n)&&n.tagName.toLowerCase()==="input"}function FC(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function UC(n,e){return n.button===0&&(!e||e==="_self")&&!FC(n)}var Ud=null;function WC(){if(Ud===null)try{new FormData(document.createElement("form"),0),Ud=!1}catch{Ud=!0}return Ud}var $C=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function sp(n){return n!=null&&!$C.has(n)?(On(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${rh}"`),null):n}function HC(n,e){let t,r,s,l,c;if(BC(n)){let f=n.getAttribute("action");r=f?Ai(f,e):null,t=n.getAttribute("method")||nh,s=sp(n.getAttribute("enctype"))||rh,l=new FormData(n)}else if(OC(n)||zC(n)&&(n.type==="submit"||n.type==="image")){let f=n.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=n.getAttribute("formaction")||f.getAttribute("action");if(r=d?Ai(d,e):null,t=n.getAttribute("formmethod")||f.getAttribute("method")||nh,s=sp(n.getAttribute("formenctype"))||sp(f.getAttribute("enctype"))||rh,l=new FormData(f,n),!WC()){let{name:m,type:g,value:y}=n;if(g==="image"){let x=m?`${m}.`:"";l.append(`${x}x`,"0"),l.append(`${x}y`,"0")}else m&&l.append(m,y)}}else{if(Xh(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=nh,r=null,s=rh,c=n}return l&&s==="text/plain"&&(c=l,l=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Jg(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function KC(n,e,t,r){let s=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?s.pathname.endsWith("/")?s.pathname=`${s.pathname}_.${r}`:s.pathname=`${s.pathname}.${r}`:s.pathname==="/"?s.pathname=`_root.${r}`:e&&Ai(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${r}`,s}async function qC(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function GC(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function QC(n,e,t){let r=await Promise.all(n.map(async s=>{let l=e.routes[s.route.id];if(l){let c=await qC(l,t);return c.links?c.links():[]}return[]}));return ZC(r.flat(1).filter(GC).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function ox(n,e,t,r,s,l){let c=(d,m)=>t[m]?d.route.id!==t[m].route.id:!0,f=(d,m)=>{var g;return t[m].pathname!==d.pathname||((g=t[m].route.path)==null?void 0:g.endsWith("*"))&&t[m].params["*"]!==d.params["*"]};return l==="assets"?e.filter((d,m)=>c(d,m)||f(d,m)):l==="data"?e.filter((d,m)=>{var y;let g=r.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(c(d,m)||f(d,m))return!0;if(d.route.shouldRevalidate){let x=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((y=t[0])==null?void 0:y.params)||{},nextUrl:new URL(n,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function YC(n,e,{includeHydrateFallback:t}={}){return XC(n.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let l=[s.module];return s.clientActionModule&&(l=l.concat(s.clientActionModule)),s.clientLoaderModule&&(l=l.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(l=l.concat(s.hydrateFallbackModule)),s.imports&&(l=l.concat(s.imports)),l}).flat(1))}function XC(n){return[...new Set(n)]}function JC(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function ZC(n,e){let t=new Set;return new Set(e),n.reduce((r,s)=>{let l=JSON.stringify(JC(s));return t.has(l)||(t.add(l),r.push({key:l,link:s})),r},[])}function Ib(){let n=j.useContext(cl);return Jg(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function eA(){let n=j.useContext(Yh);return Jg(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Zg=j.createContext(void 0);Zg.displayName="FrameworkContext";function Cb(){let n=j.useContext(Zg);return Jg(n,"You must render this element inside a <HydratedRouter> element"),n}function tA(n,e){let t=j.useContext(Zg),[r,s]=j.useState(!1),[l,c]=j.useState(!1),{onFocus:f,onBlur:d,onMouseEnter:m,onMouseLeave:g,onTouchStart:y}=e,x=j.useRef(null);j.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let I=M=>{M.forEach(D=>{c(D.isIntersecting)})},C=new IntersectionObserver(I,{threshold:.5});return x.current&&C.observe(x.current),()=>{C.disconnect()}}},[n]),j.useEffect(()=>{if(r){let I=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(I)}}},[r]);let S=()=>{s(!0)},_=()=>{s(!1),c(!1)};return t?n!=="intent"?[l,x,{}]:[l,x,{onFocus:kc(f,S),onBlur:kc(d,_),onMouseEnter:kc(m,S),onMouseLeave:kc(g,_),onTouchStart:kc(y,S)}]:[!1,x,{}]}function kc(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function nA({page:n,...e}){let{router:t}=Ib(),r=j.useMemo(()=>fb(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?j.createElement(iA,{page:n,matches:r,...e}):null}function rA(n){let{manifest:e,routeModules:t}=Cb(),[r,s]=j.useState([]);return j.useEffect(()=>{let l=!1;return QC(n,e,t).then(c=>{l||s(c)}),()=>{l=!0}},[n,e,t]),r}function iA({page:n,matches:e,...t}){let r=ir(),{future:s,manifest:l,routeModules:c}=Cb(),{basename:f}=Ib(),{loaderData:d,matches:m}=eA(),g=j.useMemo(()=>ox(n,e,m,l,r,"data"),[n,e,m,l,r]),y=j.useMemo(()=>ox(n,e,m,l,r,"assets"),[n,e,m,l,r]),x=j.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let I=new Set,C=!1;if(e.forEach(D=>{var K;let R=l.routes[D.route.id];!R||!R.hasLoader||(!g.some(z=>z.route.id===D.route.id)&&D.route.id in d&&((K=c[D.route.id])!=null&&K.shouldRevalidate)||R.hasClientLoader?C=!0:I.add(D.route.id))}),I.size===0)return[];let M=KC(n,f,s.unstable_trailingSlashAwareDataRequests,"data");return C&&I.size>0&&M.searchParams.set("_routes",e.filter(D=>I.has(D.route.id)).map(D=>D.route.id).join(",")),[M.pathname+M.search]},[f,s.unstable_trailingSlashAwareDataRequests,d,r,l,g,e,n,c]),S=j.useMemo(()=>YC(y,l),[y,l]),_=rA(y);return j.createElement(j.Fragment,null,x.map(I=>j.createElement("link",{key:I,rel:"prefetch",as:"fetch",href:I,...t})),S.map(I=>j.createElement("link",{key:I,rel:"modulepreload",href:I,...t})),_.map(({key:I,link:C})=>j.createElement("link",{key:I,nonce:t.nonce,...C})))}function sA(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var oA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{oA&&(window.__reactRouterVersion="7.12.0")}catch{}function aA({basename:n,children:e,unstable_useTransitions:t,window:r}){let s=j.useRef();s.current==null&&(s.current=zI({window:r,v5Compat:!0}));let l=s.current,[c,f]=j.useState({action:l.action,location:l.location}),d=j.useCallback(m=>{t===!1?f(m):j.startTransition(()=>f(m))},[t]);return j.useLayoutEffect(()=>l.listen(d),[l,d]),j.createElement(VC,{basename:n,children:e,location:c.location,navigationType:c.action,navigator:l,unstable_useTransitions:t})}var Ab=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ue=j.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:l,replace:c,state:f,target:d,to:m,preventScrollReset:g,viewTransition:y,unstable_defaultShouldRevalidate:x,...S},_){let{basename:I,unstable_useTransitions:C}=j.useContext(Bn),M=typeof m=="string"&&Ab.test(m),D=vb(m,I);m=D.to;let R=wC(m,{relative:s}),[K,z,U]=tA(r,S),A=dA(m,{replace:c,state:f,target:d,preventScrollReset:g,relative:s,viewTransition:y,unstable_defaultShouldRevalidate:x,unstable_useTransitions:C});function E(V){e&&e(V),V.defaultPrevented||A(V)}let N=j.createElement("a",{...S,...U,href:D.absoluteURL||R,onClick:D.isExternal||l?e:E,ref:sA(_,z),target:d,"data-discover":!M&&t==="render"?"true":void 0});return K&&!M?j.createElement(j.Fragment,null,N,j.createElement(nA,{page:R})):N});ue.displayName="Link";var lA=j.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:l,to:c,viewTransition:f,children:d,...m},g){let y=au(c,{relative:m.relative}),x=ir(),S=j.useContext(Yh),{navigator:_,basename:I}=j.useContext(Bn),C=S!=null&&gA(y)&&f===!0,M=_.encodeLocation?_.encodeLocation(y).pathname:y.pathname,D=x.pathname,R=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;t||(D=D.toLowerCase(),R=R?R.toLowerCase():null,M=M.toLowerCase()),R&&I&&(R=Ai(R,I)||R);const K=M!=="/"&&M.endsWith("/")?M.length-1:M.length;let z=D===M||!s&&D.startsWith(M)&&D.charAt(K)==="/",U=R!=null&&(R===M||!s&&R.startsWith(M)&&R.charAt(M.length)==="/"),A={isActive:z,isPending:U,isTransitioning:C},E=z?e:void 0,N;typeof r=="function"?N=r(A):N=[r,z?"active":null,U?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let V=typeof l=="function"?l(A):l;return j.createElement(ue,{...m,"aria-current":E,className:N,ref:g,style:V,to:c,viewTransition:f},typeof d=="function"?d(A):d)});lA.displayName="NavLink";var cA=j.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:l,method:c=nh,action:f,onSubmit:d,relative:m,preventScrollReset:g,viewTransition:y,unstable_defaultShouldRevalidate:x,...S},_)=>{let{unstable_useTransitions:I}=j.useContext(Bn),C=mA(),M=pA(f,{relative:m}),D=c.toLowerCase()==="get"?"get":"post",R=typeof f=="string"&&Ab.test(f),K=z=>{if(d&&d(z),z.defaultPrevented)return;z.preventDefault();let U=z.nativeEvent.submitter,A=(U==null?void 0:U.getAttribute("formmethod"))||c,E=()=>C(U||z.currentTarget,{fetcherKey:e,method:A,navigate:t,replace:s,state:l,relative:m,preventScrollReset:g,viewTransition:y,unstable_defaultShouldRevalidate:x});I&&t!==!1?j.startTransition(()=>E()):E()};return j.createElement("form",{ref:_,method:D,action:M,onSubmit:r?d:K,...S,"data-discover":!R&&n==="render"?"true":void 0})});cA.displayName="Form";function uA(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function jb(n){let e=j.useContext(cl);return ct(e,uA(n)),e}function dA(n,{target:e,replace:t,state:r,preventScrollReset:s,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:f,unstable_useTransitions:d}={}){let m=dl(),g=ir(),y=au(n,{relative:l});return j.useCallback(x=>{if(UC(x,e)){x.preventDefault();let S=t!==void 0?t:$c(g)===$c(y),_=()=>m(n,{replace:S,state:r,preventScrollReset:s,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:f});d?j.startTransition(()=>_()):_()}},[g,m,y,t,r,e,n,s,l,c,f,d])}var hA=0,fA=()=>`__${String(++hA)}__`;function mA(){let{router:n}=jb("useSubmit"),{basename:e}=j.useContext(Bn),t=RC(),r=n.fetch,s=n.navigate;return j.useCallback(async(l,c={})=>{let{action:f,method:d,encType:m,formData:g,body:y}=HC(l,e);if(c.navigate===!1){let x=c.fetcherKey||fA();await r(x,t,c.action||f,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:g,body:y,formMethod:c.method||d,formEncType:c.encType||m,flushSync:c.flushSync})}else await s(c.action||f,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:g,body:y,formMethod:c.method||d,formEncType:c.encType||m,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[r,s,e,t])}function pA(n,{relative:e}={}){let{basename:t}=j.useContext(Bn),r=j.useContext(Tr);ct(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),l={...au(n||".",{relative:e})},c=ir();if(n==null){l.search=c.search;let f=new URLSearchParams(l.search),d=f.getAll("index");if(d.some(g=>g==="")){f.delete("index"),d.filter(y=>y).forEach(y=>f.append("index",y));let g=f.toString();l.search=g?`?${g}`:""}}return(!n||n===".")&&s.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Ei([t,l.pathname])),$c(l)}function gA(n,{relative:e}={}){let t=j.useContext(wb);ct(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=jb("useViewTransitionState"),s=au(n,{relative:e});if(!t.isTransitioning)return!1;let l=Ai(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=Ai(t.nextLocation.pathname,r)||t.nextLocation.pathname;return vh(s.pathname,c)!=null||vh(s.pathname,l)!=null}const yA=()=>{};var ax={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rb=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},vA=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const l=n[t++];e[r++]=String.fromCharCode((s&31)<<6|l&63)}else if(s>239&&s<365){const l=n[t++],c=n[t++],f=n[t++],d=((s&7)<<18|(l&63)<<12|(c&63)<<6|f&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const l=n[t++],c=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(l&63)<<6|c&63)}}return e.join("")},Pb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const l=n[s],c=s+1<n.length,f=c?n[s+1]:0,d=s+2<n.length,m=d?n[s+2]:0,g=l>>2,y=(l&3)<<4|f>>4;let x=(f&15)<<2|m>>6,S=m&63;d||(S=64,c||(x=64)),r.push(t[g],t[y],t[x],t[S])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Rb(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):vA(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const l=t[n.charAt(s++)],f=s<n.length?t[n.charAt(s)]:0;++s;const m=s<n.length?t[n.charAt(s)]:64;++s;const y=s<n.length?t[n.charAt(s)]:64;if(++s,l==null||f==null||m==null||y==null)throw new xA;const x=l<<2|f>>4;if(r.push(x),m!==64){const S=f<<4&240|m>>2;if(r.push(S),y!==64){const _=m<<6&192|y;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class xA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wA=function(n){const e=Rb(n);return Pb.encodeByteArray(e,!0)},xh=function(n){return wA(n).replace(/\./g,"")},Nb=function(n){try{return Pb.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA=()=>kA().__FIREBASE_DEFAULTS__,_A=()=>{if(typeof process>"u"||typeof ax>"u")return;const n=ax.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},SA=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Nb(n[1]);return e&&JSON.parse(e)},Jh=()=>{try{return yA()||bA()||_A()||SA()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Mb=n=>{var e,t;return(t=(e=Jh())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},EA=n=>{const e=Mb(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Db=()=>{var n;return(n=Jh())==null?void 0:n.config},Vb=n=>{var e;return(e=Jh())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Lb(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IA(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[xh(JSON.stringify(t)),xh(JSON.stringify(c)),""].join(".")}const Mc={};function CA(){const n={prod:[],emulator:[]};for(const e of Object.keys(Mc))Mc[e]?n.emulator.push(e):n.prod.push(e);return n}function AA(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let lx=!1;function Ob(n,e){if(typeof window>"u"||typeof document>"u"||!hl(window.location.host)||Mc[n]===e||Mc[n]||lx)return;Mc[n]=e;function t(x){return`__firebase__banner__${x}`}const r="__firebase__banner",l=CA().prod.length>0;function c(){const x=document.getElementById(r);x&&x.remove()}function f(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function d(x,S){x.setAttribute("width","24"),x.setAttribute("id",S),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function m(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{lx=!0,c()},x}function g(x,S){x.setAttribute("id",S),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function y(){const x=AA(r),S=t("text"),_=document.getElementById(S)||document.createElement("span"),I=t("learnmore"),C=document.getElementById(I)||document.createElement("a"),M=t("preprendIcon"),D=document.getElementById(M)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const R=x.element;f(R),g(C,I);const K=m();d(D,M),R.append(D,_,C,K),document.body.appendChild(R)}l?(_.innerText="Preview backend disconnected.",D.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(D.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dn())}function RA(){var e;const n=(e=Jh())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function PA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function NA(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function MA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function DA(){const n=dn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function VA(){return!RA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function LA(){try{return typeof indexedDB=="object"}catch{return!1}}function OA(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var l;e(((l=s.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA="FirebaseError";class Vi extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=BA,Object.setPrototypeOf(this,Vi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lu.prototype.create)}}class lu{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,l=this.errors[e],c=l?zA(l,r):"Error",f=`${this.serviceName}: ${c} (${s}).`;return new Vi(s,f,r)}}function zA(n,e){return n.replace(FA,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const FA=/\{\$([^}]+)}/g;function UA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function As(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const l=n[s],c=e[s];if(cx(l)&&cx(c)){if(!As(l,c))return!1}else if(l!==c)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function cx(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cu(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Tc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,l]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(l)}}),e}function Ic(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function WA(n,e){const t=new $A(n,e);return t.subscribe.bind(t)}class $A{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");HA(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=op),s.error===void 0&&(s.error=op),s.complete===void 0&&(s.complete=op);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function HA(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function op(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(n){return n&&n._delegate?n._delegate:n}class jo{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ko="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new TA;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(GA(e))try{this.getOrInitializeService({instanceIdentifier:ko})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:s});r.resolve(l)}catch{}}}}clearInstance(e=ko){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ko){return this.instances.has(e)}getOptions(e=ko){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);r===f&&c.resolve(s)}return s}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const l=this.instances.get(r);return l&&e(l,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:qA(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ko){return this.component?this.component.multipleInstances?e:ko:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function qA(n){return n===ko?void 0:n}function GA(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new KA(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ze||(ze={}));const YA={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},XA=ze.INFO,JA={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},ZA=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=JA[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ey{constructor(e){this.name=e,this._logLevel=XA,this._logHandler=ZA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?YA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}}const ej=(n,e)=>e.some(t=>n instanceof t);let ux,dx;function tj(){return ux||(ux=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nj(){return dx||(dx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Bb=new WeakMap,Wp=new WeakMap,zb=new WeakMap,ap=new WeakMap,ty=new WeakMap;function rj(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(Ss(n.result)),s()},c=()=>{r(n.error),s()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&Bb.set(t,n)}).catch(()=>{}),ty.set(e,n),e}function ij(n){if(Wp.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),s()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});Wp.set(n,e)}let $p={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Wp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||zb.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ss(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function sj(n){$p=n($p)}function oj(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(lp(this),e,...t);return zb.set(r,e.sort?e.sort():[e]),Ss(r)}:nj().includes(n)?function(...e){return n.apply(lp(this),e),Ss(Bb.get(this))}:function(...e){return Ss(n.apply(lp(this),e))}}function aj(n){return typeof n=="function"?oj(n):(n instanceof IDBTransaction&&ij(n),ej(n,tj())?new Proxy(n,$p):n)}function Ss(n){if(n instanceof IDBRequest)return rj(n);if(ap.has(n))return ap.get(n);const e=aj(n);return e!==n&&(ap.set(n,e),ty.set(e,n)),e}const lp=n=>ty.get(n);function lj(n,e,{blocked:t,upgrade:r,blocking:s,terminated:l}={}){const c=indexedDB.open(n,e),f=Ss(c);return r&&c.addEventListener("upgradeneeded",d=>{r(Ss(c.result),d.oldVersion,d.newVersion,Ss(c.transaction),d)}),t&&c.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),f.then(d=>{l&&d.addEventListener("close",()=>l()),s&&d.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),f}const cj=["get","getKey","getAll","getAllKeys","count"],uj=["put","add","delete","clear"],cp=new Map;function hx(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(cp.get(e))return cp.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=uj.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||cj.includes(t)))return;const l=async function(c,...f){const d=this.transaction(c,s?"readwrite":"readonly");let m=d.store;return r&&(m=m.index(f.shift())),(await Promise.all([m[t](...f),s&&d.done]))[0]};return cp.set(e,l),l}sj(n=>({...n,get:(e,t,r)=>hx(e,t)||n.get(e,t,r),has:(e,t)=>!!hx(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(hj(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function hj(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Hp="@firebase/app",fx="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ji=new ey("@firebase/app"),fj="@firebase/app-compat",mj="@firebase/analytics-compat",pj="@firebase/analytics",gj="@firebase/app-check-compat",yj="@firebase/app-check",vj="@firebase/auth",xj="@firebase/auth-compat",wj="@firebase/database",kj="@firebase/data-connect",bj="@firebase/database-compat",_j="@firebase/functions",Sj="@firebase/functions-compat",Ej="@firebase/installations",Tj="@firebase/installations-compat",Ij="@firebase/messaging",Cj="@firebase/messaging-compat",Aj="@firebase/performance",jj="@firebase/performance-compat",Rj="@firebase/remote-config",Pj="@firebase/remote-config-compat",Nj="@firebase/storage",Mj="@firebase/storage-compat",Dj="@firebase/firestore",Vj="@firebase/ai",Lj="@firebase/firestore-compat",Oj="firebase",Bj="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kp="[DEFAULT]",zj={[Hp]:"fire-core",[fj]:"fire-core-compat",[pj]:"fire-analytics",[mj]:"fire-analytics-compat",[yj]:"fire-app-check",[gj]:"fire-app-check-compat",[vj]:"fire-auth",[xj]:"fire-auth-compat",[wj]:"fire-rtdb",[kj]:"fire-data-connect",[bj]:"fire-rtdb-compat",[_j]:"fire-fn",[Sj]:"fire-fn-compat",[Ej]:"fire-iid",[Tj]:"fire-iid-compat",[Ij]:"fire-fcm",[Cj]:"fire-fcm-compat",[Aj]:"fire-perf",[jj]:"fire-perf-compat",[Rj]:"fire-rc",[Pj]:"fire-rc-compat",[Nj]:"fire-gcs",[Mj]:"fire-gcs-compat",[Dj]:"fire-fst",[Lj]:"fire-fst-compat",[Vj]:"fire-vertex","fire-js":"fire-js",[Oj]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wh=new Map,Fj=new Map,qp=new Map;function mx(n,e){try{n.container.addComponent(e)}catch(t){ji.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ya(n){const e=n.name;if(qp.has(e))return ji.debug(`There were multiple attempts to register component ${e}.`),!1;qp.set(e,n);for(const t of wh.values())mx(t,n);for(const t of Fj.values())mx(t,n);return!0}function ny(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Dn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Es=new lu("app","Firebase",Uj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wj{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new jo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Es.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fl=Bj;function Fb(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:Kp,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Es.create("bad-app-name",{appName:String(s)});if(t||(t=Db()),!t)throw Es.create("no-options");const l=wh.get(s);if(l){if(As(t,l.options)&&As(r,l.config))return l;throw Es.create("duplicate-app",{appName:s})}const c=new QA(s);for(const d of qp.values())c.addComponent(d);const f=new Wj(t,r,c);return wh.set(s,f),f}function Ub(n=Kp){const e=wh.get(n);if(!e&&n===Kp&&Db())return Fb();if(!e)throw Es.create("no-app",{appName:n});return e}function Ts(n,e,t){let r=zj[n]??n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),l=e.match(/\s|\//);if(s||l){const c=[`Unable to register library "${r}" with version "${e}":`];s&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ji.warn(c.join(" "));return}Ya(new jo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $j="firebase-heartbeat-database",Hj=1,Hc="firebase-heartbeat-store";let up=null;function Wb(){return up||(up=lj($j,Hj,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Hc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Es.create("idb-open",{originalErrorMessage:n.message})})),up}async function Kj(n){try{const t=(await Wb()).transaction(Hc),r=await t.objectStore(Hc).get($b(n));return await t.done,r}catch(e){if(e instanceof Vi)ji.warn(e.message);else{const t=Es.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ji.warn(t.message)}}}async function px(n,e){try{const r=(await Wb()).transaction(Hc,"readwrite");await r.objectStore(Hc).put(e,$b(n)),await r.done}catch(t){if(t instanceof Vi)ji.warn(t.message);else{const r=Es.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ji.warn(r.message)}}}function $b(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qj=1024,Gj=30;class Qj{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Xj(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=gx();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:s}),this._heartbeatsCache.heartbeats.length>Gj){const c=Jj(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ji.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=gx(),{heartbeatsToSend:r,unsentEntries:s}=Yj(this._heartbeatsCache.heartbeats),l=xh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return ji.warn(t),""}}}function gx(){return new Date().toISOString().substring(0,10)}function Yj(n,e=qj){const t=[];let r=n.slice();for(const s of n){const l=t.find(c=>c.agent===s.agent);if(l){if(l.dates.push(s.date),yx(t)>e){l.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),yx(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class Xj{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return LA()?OA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Kj(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return px(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return px(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function yx(n){return xh(JSON.stringify({version:2,heartbeats:n})).length}function Jj(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zj(n){Ya(new jo("platform-logger",e=>new dj(e),"PRIVATE")),Ya(new jo("heartbeat",e=>new Qj(e),"PRIVATE")),Ts(Hp,fx,n),Ts(Hp,fx,"esm2020"),Ts("fire-js","")}Zj("");function Hb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const e5=Hb,Kb=new lu("auth","Firebase",Hb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kh=new ey("@firebase/auth");function t5(n,...e){kh.logLevel<=ze.WARN&&kh.warn(`Auth (${fl}): ${n}`,...e)}function ih(n,...e){kh.logLevel<=ze.ERROR&&kh.error(`Auth (${fl}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(n,...e){throw iy(n,...e)}function xr(n,...e){return iy(n,...e)}function ry(n,e,t){const r={...e5(),[e]:t};return new lu("auth","Firebase",r).create(e,{appName:n.name})}function Ti(n){return ry(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function n5(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&tr(n,"argument-error"),ry(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function iy(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Kb.create(n,...e)}function Ce(n,e,...t){if(!n)throw iy(e,...t)}function _i(n){const e="INTERNAL ASSERTION FAILED: "+n;throw ih(e),new Error(e)}function Ri(n,e){n||_i(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gp(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function r5(){return vx()==="http:"||vx()==="https:"}function vx(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(r5()||NA()||"connection"in navigator)?navigator.onLine:!0}function s5(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ri(t>e,"Short delay should be less than long delay!"),this.isMobile=jA()||MA()}get(){return i5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sy(n,e){Ri(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_i("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_i("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_i("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a5=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],l5=new uu(3e4,6e4);function Bs(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Li(n,e,t,r,s={}){return Gb(n,s,async()=>{let l={},c={};r&&(e==="GET"?c=r:l={body:JSON.stringify(r)});const f=cu({key:n.config.apiKey,...c}).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const m={method:e,headers:d,...l};return PA()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&hl(n.emulatorConfig.host)&&(m.credentials="include"),qb.fetch()(await Qb(n,n.config.apiHost,t,f),m)})}async function Gb(n,e,t){n._canInitEmulator=!1;const r={...o5,...e};try{const s=new u5(n),l=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Wd(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const f=l.ok?c.errorMessage:c.error.message,[d,m]=f.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wd(n,"credential-already-in-use",c);if(d==="EMAIL_EXISTS")throw Wd(n,"email-already-in-use",c);if(d==="USER_DISABLED")throw Wd(n,"user-disabled",c);const g=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw ry(n,g,m);tr(n,g)}}catch(s){if(s instanceof Vi)throw s;tr(n,"network-request-failed",{message:String(s)})}}async function du(n,e,t,r,s={}){const l=await Li(n,e,t,r,s);return"mfaPendingCredential"in l&&tr(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function Qb(n,e,t,r){const s=`${e}${t}?${r}`,l=n,c=l.config.emulator?sy(n.config,s):`${n.config.apiScheme}://${s}`;return a5.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function c5(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class u5{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(xr(this.auth,"network-request-failed")),l5.get())})}}function Wd(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=xr(n,e,r);return s.customData._tokenResponse=t,s}function xx(n){return n!==void 0&&n.enterprise!==void 0}class d5{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return c5(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function h5(n,e){return Li(n,"GET","/v2/recaptchaConfig",Bs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f5(n,e){return Li(n,"POST","/v1/accounts:delete",e)}async function bh(n,e){return Li(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function m5(n,e=!1){const t=Bt(n),r=await t.getIdToken(e),s=oy(r);Ce(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const l=typeof s.firebase=="object"?s.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:s,token:r,authTime:Dc(dp(s.auth_time)),issuedAtTime:Dc(dp(s.iat)),expirationTime:Dc(dp(s.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function dp(n){return Number(n)*1e3}function oy(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return ih("JWT malformed, contained fewer than 3 sections"),null;try{const s=Nb(t);return s?JSON.parse(s):(ih("Failed to decode base64 JWT payload"),null)}catch(s){return ih("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function wx(n){const e=oy(n);return Ce(e,"internal-error"),Ce(typeof e.exp<"u","internal-error"),Ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xa(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Vi&&p5(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function p5({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dc(this.lastLoginAt),this.creationTime=Dc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _h(n){var y;const e=n.auth,t=await n.getIdToken(),r=await Xa(n,bh(e,{idToken:t}));Ce(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const l=(y=s.providerUserInfo)!=null&&y.length?Yb(s.providerUserInfo):[],c=v5(n.providerData,l),f=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!(c!=null&&c.length),m=f?d:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Qp(s.createdAt,s.lastLoginAt),isAnonymous:m};Object.assign(n,g)}async function y5(n){const e=Bt(n);await _h(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function v5(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Yb(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x5(n,e){const t=await Gb(n,{},async()=>{const r=cu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:l}=n.config,c=await Qb(n,s,"/v1/token",`key=${l}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:f,body:r};return n.emulatorConfig&&hl(n.emulatorConfig.host)&&(d.credentials="include"),qb.fetch()(c,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function w5(n,e){return Li(n,"POST","/v2/accounts:revokeToken",Bs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ce(e.idToken,"internal-error"),Ce(typeof e.idToken<"u","internal-error"),Ce(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):wx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ce(e.length!==0,"internal-error");const t=wx(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:l}=await x5(e,t);this.updateTokensAndExpiration(r,s,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:l}=t,c=new Ua;return r&&(Ce(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),s&&(Ce(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),l&&(Ce(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ua,this.toJSON())}_performRefresh(){return _i("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gs(n,e){Ce(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class vr{constructor({uid:e,auth:t,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new g5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Qp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Xa(this,this.stsTokenManager.getToken(this.auth,e));return Ce(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return m5(this,e)}reload(){return y5(this)}_assign(e){this!==e&&(Ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new vr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await _h(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Dn(this.auth.app))return Promise.reject(Ti(this.auth));const e=await this.getIdToken();return await Xa(this,f5(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,s=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,f=t.tenantId??void 0,d=t._redirectEventId??void 0,m=t.createdAt??void 0,g=t.lastLoginAt??void 0,{uid:y,emailVerified:x,isAnonymous:S,providerData:_,stsTokenManager:I}=t;Ce(y&&I,e,"internal-error");const C=Ua.fromJSON(this.name,I);Ce(typeof y=="string",e,"internal-error"),gs(r,e.name),gs(s,e.name),Ce(typeof x=="boolean",e,"internal-error"),Ce(typeof S=="boolean",e,"internal-error"),gs(l,e.name),gs(c,e.name),gs(f,e.name),gs(d,e.name),gs(m,e.name),gs(g,e.name);const M=new vr({uid:y,auth:e,email:s,emailVerified:x,displayName:r,isAnonymous:S,photoURL:c,phoneNumber:l,tenantId:f,stsTokenManager:C,createdAt:m,lastLoginAt:g});return _&&Array.isArray(_)&&(M.providerData=_.map(D=>({...D}))),d&&(M._redirectEventId=d),M}static async _fromIdTokenResponse(e,t,r=!1){const s=new Ua;s.updateFromServerResponse(t);const l=new vr({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await _h(l),l}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];Ce(s.localId!==void 0,"internal-error");const l=s.providerUserInfo!==void 0?Yb(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!(l!=null&&l.length),f=new Ua;f.updateFromIdToken(r);const d=new vr({uid:s.localId,auth:e,stsTokenManager:f,isAnonymous:c}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Qp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(l!=null&&l.length)};return Object.assign(d,m),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx=new Map;function Si(n){Ri(n instanceof Function,"Expected a class definition");let e=kx.get(n);return e?(Ri(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,kx.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Xb.type="NONE";const bx=Xb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sh(n,e,t){return`firebase:${n}:${e}:${t}`}class Wa{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:l}=this.auth;this.fullUserKey=sh(this.userKey,s.apiKey,l),this.fullPersistenceKey=sh("persistence",s.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await bh(this.auth,{idToken:e}).catch(()=>{});return t?vr._fromGetAccountInfoResponse(this.auth,t,e):null}return vr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Wa(Si(bx),e,r);const s=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let l=s[0]||Si(bx);const c=sh(r,e.config.apiKey,e.name);let f=null;for(const m of t)try{const g=await m._get(c);if(g){let y;if(typeof g=="string"){const x=await bh(e,{idToken:g}).catch(()=>{});if(!x)break;y=await vr._fromGetAccountInfoResponse(e,x,g)}else y=vr._fromJSON(e,g);m!==l&&(f=y),l=m;break}}catch{}const d=s.filter(m=>m._shouldAllowMigration);return!l._shouldAllowMigration||!d.length?new Wa(l,e,r):(l=d[0],f&&await l._set(c,f.toJSON()),await Promise.all(t.map(async m=>{if(m!==l)try{await m._remove(c)}catch{}})),new Wa(l,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(t_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Jb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(r_(e))return"Blackberry";if(i_(e))return"Webos";if(Zb(e))return"Safari";if((e.includes("chrome/")||e_(e))&&!e.includes("edge/"))return"Chrome";if(n_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Jb(n=dn()){return/firefox\//i.test(n)}function Zb(n=dn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function e_(n=dn()){return/crios\//i.test(n)}function t_(n=dn()){return/iemobile/i.test(n)}function n_(n=dn()){return/android/i.test(n)}function r_(n=dn()){return/blackberry/i.test(n)}function i_(n=dn()){return/webos/i.test(n)}function ay(n=dn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function k5(n=dn()){var e;return ay(n)&&!!((e=window.navigator)!=null&&e.standalone)}function b5(){return DA()&&document.documentMode===10}function s_(n=dn()){return ay(n)||n_(n)||i_(n)||r_(n)||/windows phone/i.test(n)||t_(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o_(n,e=[]){let t;switch(n){case"Browser":t=_x(dn());break;case"Worker":t=`${_x(dn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${fl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((c,f)=>{try{const d=e(l);c(d)}catch(d){f(d)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S5(n,e={}){return Li(n,"GET","/v2/passwordPolicy",Bs(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E5=6;class T5{constructor(e){var r;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??E5,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I5{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Sx(this),this.idTokenSubscription=new Sx(this),this.beforeStateQueue=new _5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Kb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Si(t)),this._initializationPromise=this.queue(async()=>{var r,s,l;if(!this._deleted&&(this.persistenceManager=await Wa.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await bh(this,{idToken:e}),r=await vr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(Dn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,f=r==null?void 0:r._redirectEventId,d=await this.tryRedirectSignIn(e);(!c||c===f)&&(d!=null&&d.user)&&(r=d.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await _h(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=s5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Dn(this.app))return Promise.reject(Ti(this));const t=e?Bt(e):null;return t&&Ce(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Dn(this.app)?Promise.reject(Ti(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Dn(this.app)?Promise.reject(Ti(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Si(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await S5(this),t=new T5(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new lu("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await w5(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Si(e)||this._popupRedirectResolver;Ce(t,this,"argument-error"),this.redirectPersistenceManager=await Wa.create(this,[Si(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ce(f,this,"internal-error"),f.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,r,s);return()=>{c=!0,d()}}else{const d=e.addObserver(t);return()=>{c=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=o_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(Dn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&t5(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function zs(n){return Bt(n)}class Sx{constructor(e){this.auth=e,this.observer=null,this.addObserver=WA(t=>this.observer=t)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function C5(n){Zh=n}function a_(n){return Zh.loadJS(n)}function A5(){return Zh.recaptchaEnterpriseScript}function j5(){return Zh.gapiScript}function R5(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class P5{constructor(){this.enterprise=new N5}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class N5{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const M5="recaptcha-enterprise",l_="NO_RECAPTCHA";class D5{constructor(e){this.type=M5,this.auth=zs(e)}async verify(e="verify",t=!1){async function r(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,f)=>{h5(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const m=new d5(d);return l.tenantId==null?l._agentRecaptchaConfig=m:l._tenantRecaptchaConfigs[l.tenantId]=m,c(m.siteKey)}}).catch(d=>{f(d)})})}function s(l,c,f){const d=window.grecaptcha;xx(d)?d.enterprise.ready(()=>{d.enterprise.execute(l,{action:e}).then(m=>{c(m)}).catch(()=>{c(l_)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new P5().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{r(this.auth).then(f=>{if(!t&&xx(window.grecaptcha))s(f,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let d=A5();d.length!==0&&(d+=f),a_(d).then(()=>{s(f,l,c)}).catch(m=>{c(m)})}}).catch(f=>{c(f)})})}}async function Ex(n,e,t,r=!1,s=!1){const l=new D5(n);let c;if(s)c=l_;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const f={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const d=f.phoneEnrollmentInfo.phoneNumber,m=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const d=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return r?Object.assign(f,{captchaResp:c}):Object.assign(f,{captchaResponse:c}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function Yp(n,e,t,r,s){var l;if((l=n._getRecaptchaConfig())!=null&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Ex(n,e,t,t==="getOobCode");return r(n,c)}else return r(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await Ex(n,e,t,t==="getOobCode");return r(n,f)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V5(n,e){const t=ny(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),l=t.getOptions();if(As(l,e??{}))return s;tr(s,"already-initialized")}return t.initialize({options:e})}function L5(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Si);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function O5(n,e,t){const r=zs(n);Ce(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,l=c_(e),{host:c,port:f}=B5(e),d=f===null?"":`:${f}`,m={url:`${l}//${c}${d}/`},g=Object.freeze({host:c,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Ce(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ce(As(m,r.config.emulator)&&As(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=m,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,hl(c)?(Lb(`${l}//${c}${d}`),Ob("Auth",!0)):z5()}function c_(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function B5(n){const e=c_(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const l=s[1];return{host:l,port:Tx(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:Tx(c)}}}function Tx(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function z5(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return _i("not implemented")}_getIdTokenResponse(e){return _i("not implemented")}_linkToIdToken(e,t){return _i("not implemented")}_getReauthenticationResolver(e){return _i("not implemented")}}async function F5(n,e){return Li(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U5(n,e){return du(n,"POST","/v1/accounts:signInWithPassword",Bs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W5(n,e){return du(n,"POST","/v1/accounts:signInWithEmailLink",Bs(n,e))}async function $5(n,e){return du(n,"POST","/v1/accounts:signInWithEmailLink",Bs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc extends ly{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Kc(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Kc(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yp(e,t,"signInWithPassword",U5);case"emailLink":return W5(e,{email:this._email,oobCode:this._password});default:tr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yp(e,r,"signUpPassword",F5);case"emailLink":return $5(e,{idToken:t,email:this._email,oobCode:this._password});default:tr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $a(n,e){return du(n,"POST","/v1/accounts:signInWithIdp",Bs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H5="http://localhost";class Ro extends ly{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ro(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):tr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...l}=t;if(!r||!s)return null;const c=new Ro(r,s);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return $a(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,$a(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,$a(e,t)}buildRequest(){const e={requestUri:H5,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=cu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K5(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function q5(n){const e=Tc(Ic(n)).link,t=e?Tc(Ic(e)).deep_link_id:null,r=Tc(Ic(n)).deep_link_id;return(r?Tc(Ic(r)).link:null)||r||t||e||n}class cy{constructor(e){const t=Tc(Ic(e)),r=t.apiKey??null,s=t.oobCode??null,l=K5(t.mode??null);Ce(r&&s&&l,"argument-error"),this.apiKey=r,this.operation=l,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=q5(e);try{return new cy(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(){this.providerId=ml.PROVIDER_ID}static credential(e,t){return Kc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=cy.parseLink(t);return Ce(r,"argument-error"),Kc._fromEmailAndCode(e,r.code,r.tenantId)}}ml.PROVIDER_ID="password";ml.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ml.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu extends uy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs extends hu{constructor(){super("facebook.com")}static credential(e){return Ro._fromParams({providerId:vs.PROVIDER_ID,signInMethod:vs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vs.credentialFromTaggedObject(e)}static credentialFromError(e){return vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vs.credential(e.oauthAccessToken)}catch{return null}}}vs.FACEBOOK_SIGN_IN_METHOD="facebook.com";vs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki extends hu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ro._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ki.credentialFromTaggedObject(e)}static credentialFromError(e){return ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return ki.credential(t,r)}catch{return null}}}ki.GOOGLE_SIGN_IN_METHOD="google.com";ki.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs extends hu{constructor(){super("github.com")}static credential(e){return Ro._fromParams({providerId:xs.PROVIDER_ID,signInMethod:xs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xs.credentialFromTaggedObject(e)}static credentialFromError(e){return xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xs.credential(e.oauthAccessToken)}catch{return null}}}xs.GITHUB_SIGN_IN_METHOD="github.com";xs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws extends hu{constructor(){super("twitter.com")}static credential(e,t){return Ro._fromParams({providerId:ws.PROVIDER_ID,signInMethod:ws.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ws.credentialFromTaggedObject(e)}static credentialFromError(e){return ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ws.credential(t,r)}catch{return null}}}ws.TWITTER_SIGN_IN_METHOD="twitter.com";ws.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G5(n,e){return du(n,"POST","/v1/accounts:signUp",Bs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const l=await vr._fromIdTokenResponse(e,r,s),c=Ix(r);return new Po({user:l,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=Ix(r);return new Po({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function Ix(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh extends Vi{constructor(e,t,r,s){super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Sh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new Sh(e,t,r,s)}}function u_(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Sh._fromErrorAndOperation(n,l,e,r):l})}async function Q5(n,e,t=!1){const r=await Xa(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Po._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y5(n,e,t=!1){const{auth:r}=n;if(Dn(r.app))return Promise.reject(Ti(r));const s="reauthenticate";try{const l=await Xa(n,u_(r,s,e,n),t);Ce(l.idToken,r,"internal-error");const c=oy(l.idToken);Ce(c,r,"internal-error");const{sub:f}=c;return Ce(n.uid===f,r,"user-mismatch"),Po._forOperation(n,s,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&tr(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d_(n,e,t=!1){if(Dn(n.app))return Promise.reject(Ti(n));const r="signIn",s=await u_(n,r,e),l=await Po._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(l.user),l}async function X5(n,e){return d_(zs(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h_(n){const e=zs(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function J5(n,e,t){if(Dn(n.app))return Promise.reject(Ti(n));const r=zs(n),c=await Yp(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",G5).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&h_(n),d}),f=await Po._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(f.user),f}function Z5(n,e,t){return Dn(n.app)?Promise.reject(Ti(n)):X5(Bt(n),ml.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&h_(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eR(n,e){return Li(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tR(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Bt(n),l={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=await Xa(r,eR(r.auth,l));r.displayName=c.displayName||null,r.photoURL=c.photoUrl||null;const f=r.providerData.find(({providerId:d})=>d==="password");f&&(f.displayName=r.displayName,f.photoURL=r.photoURL),await r._updateTokensIfNecessary(c)}function nR(n,e,t,r){return Bt(n).onIdTokenChanged(e,t,r)}function rR(n,e,t){return Bt(n).beforeAuthStateChanged(e,t)}function iR(n,e,t,r){return Bt(n).onAuthStateChanged(e,t,r)}function sR(n){return Bt(n).signOut()}const Eh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Eh,"1"),this.storage.removeItem(Eh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR=1e3,aR=10;class m_ extends f_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=s_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,f,d)=>{this.notifyListeners(c,d)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);b5()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,aR):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},oR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}m_.type="LOCAL";const lR=m_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_ extends f_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}p_.type="SESSION";const g_=p_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cR(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new ef(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:l}=t.data,c=this.handlersMap[s];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const f=Array.from(c).map(async m=>m(t.origin,l)),d=await cR(f);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ef.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dy(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let l,c;return new Promise((f,d)=>{const m=dy("",20);s.port1.start();const g=setTimeout(()=>{d(new Error("unsupported_event"))},r);c={messageChannel:s,onMessage(y){const x=y;if(x.data.eventId===m)switch(x.data.status){case"ack":clearTimeout(g),l=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(x.data.response);break;default:clearTimeout(g),clearTimeout(l),d(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qr(){return window}function dR(n){qr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y_(){return typeof qr().WorkerGlobalScope<"u"&&typeof qr().importScripts=="function"}async function hR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function fR(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function mR(){return y_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_="firebaseLocalStorageDb",pR=1,Th="firebaseLocalStorage",x_="fbase_key";class fu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function tf(n,e){return n.transaction([Th],e?"readwrite":"readonly").objectStore(Th)}function gR(){const n=indexedDB.deleteDatabase(v_);return new fu(n).toPromise()}function Xp(){const n=indexedDB.open(v_,pR);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Th,{keyPath:x_})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Th)?e(r):(r.close(),await gR(),e(await Xp()))})})}async function Cx(n,e,t){const r=tf(n,!0).put({[x_]:e,value:t});return new fu(r).toPromise()}async function yR(n,e){const t=tf(n,!1).get(e),r=await new fu(t).toPromise();return r===void 0?null:r.value}function Ax(n,e){const t=tf(n,!0).delete(e);return new fu(t).toPromise()}const vR=800,xR=3;class w_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Xp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>xR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return y_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ef._getInstance(mR()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await hR(),!this.activeServiceWorker)return;this.sender=new uR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||fR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Xp();return await Cx(e,Eh,"1"),await Ax(e,Eh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Cx(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>yR(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Ax(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const l=tf(s,!1).getAll();return new fu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:l}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(l)&&(this.notifyListeners(s,l),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),vR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}w_.type="LOCAL";const wR=w_;new uu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k_(n,e){return e?Si(e):(Ce(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy extends ly{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return $a(e,this._buildIdpRequest())}_linkToIdToken(e,t){return $a(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return $a(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function kR(n){return d_(n.auth,new hy(n),n.bypassAuthState)}function bR(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),Y5(t,new hy(n),n.bypassAuthState)}async function _R(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),Q5(t,new hy(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(e,t,r,s,l=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:l,error:c,type:f}=e;if(c){this.reject(c);return}const d={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(d))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return kR;case"linkViaPopup":case"linkViaRedirect":return _R;case"reauthViaPopup":case"reauthViaRedirect":return bR;default:tr(this.auth,"internal-error")}}resolve(e){Ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR=new uu(2e3,1e4);async function ER(n,e,t){if(Dn(n.app))return Promise.reject(xr(n,"operation-not-supported-in-this-environment"));const r=zs(n);n5(n,e,uy);const s=k_(r,t);return new _o(r,"signInViaPopup",e,s).executeNotNull()}class _o extends b_{constructor(e,t,r,s,l){super(e,t,s,l),this.provider=r,this.authWindow=null,this.pollId=null,_o.currentPopupAction&&_o.currentPopupAction.cancel(),_o.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ce(e,this.auth,"internal-error"),e}async onExecution(){Ri(this.filter.length===1,"Popup operations only handle one event");const e=dy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(xr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(xr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_o.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if((r=(t=this.authWindow)==null?void 0:t.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(xr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,SR.get())};e()}}_o.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR="pendingRedirect",oh=new Map;class IR extends b_{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=oh.get(this.auth._key());if(!e){try{const r=await CR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}oh.set(this.auth._key(),e)}return this.bypassAuthState||oh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function CR(n,e){const t=RR(e),r=jR(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function AR(n,e){oh.set(n._key(),e)}function jR(n){return Si(n._redirectPersistence)}function RR(n){return sh(TR,n.config.apiKey,n.name)}async function PR(n,e,t=!1){if(Dn(n.app))return Promise.reject(Ti(n));const r=zs(n),s=k_(r,e),c=await new IR(r,s,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR=600*1e3;class MR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!DR(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!__(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";t.onError(xr(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=NR&&this.cachedEventUids.clear(),this.cachedEventUids.has(jx(e))}saveEventToCache(e){this.cachedEventUids.add(jx(e)),this.lastProcessedEventTime=Date.now()}}function jx(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function __({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function DR(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return __(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VR(n,e={}){return Li(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,OR=/^https?/;async function BR(n){if(n.config.emulator)return;const{authorizedDomains:e}=await VR(n);for(const t of e)try{if(zR(t))return}catch{}tr(n,"unauthorized-domain")}function zR(n){const e=Gp(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!OR.test(t))return!1;if(LR.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR=new uu(3e4,6e4);function Rx(){const n=qr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function UR(n){return new Promise((e,t)=>{var s,l,c;function r(){Rx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Rx(),t(xr(n,"network-request-failed"))},timeout:FR.get()})}if((l=(s=qr().gapi)==null?void 0:s.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((c=qr().gapi)!=null&&c.load)r();else{const f=R5("iframefcb");return qr()[f]=()=>{gapi.load?r():t(xr(n,"network-request-failed"))},a_(`${j5()}?onload=${f}`).catch(d=>t(d))}}).catch(e=>{throw ah=null,e})}let ah=null;function WR(n){return ah=ah||UR(n),ah}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R=new uu(5e3,15e3),HR="__/auth/iframe",KR="emulator/auth/iframe",qR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},GR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function QR(n){const e=n.config;Ce(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?sy(e,KR):`https://${n.config.authDomain}/${HR}`,r={apiKey:e.apiKey,appName:n.name,v:fl},s=GR.get(n.config.apiHost);s&&(r.eid=s);const l=n._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${cu(r).slice(1)}`}async function YR(n){const e=await WR(n),t=qr().gapi;return Ce(t,n,"internal-error"),e.open({where:document.body,url:QR(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qR,dontclear:!0},r=>new Promise(async(s,l)=>{await r.restyle({setHideOnLeave:!1});const c=xr(n,"network-request-failed"),f=qr().setTimeout(()=>{l(c)},$R.get());function d(){qr().clearTimeout(f),s(r)}r.ping(d).then(d,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},JR=500,ZR=600,eP="_blank",tP="http://localhost";class Px{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function nP(n,e,t,r=JR,s=ZR){const l=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let f="";const d={...XR,width:r.toString(),height:s.toString(),top:l,left:c},m=dn().toLowerCase();t&&(f=e_(m)?eP:t),Jb(m)&&(e=e||tP,d.scrollbars="yes");const g=Object.entries(d).reduce((x,[S,_])=>`${x}${S}=${_},`,"");if(k5(m)&&f!=="_self")return rP(e||"",f),new Px(null);const y=window.open(e||"",f,g);Ce(y,n,"popup-blocked");try{y.focus()}catch{}return new Px(y)}function rP(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iP="__/auth/handler",sP="emulator/auth/handler",oP=encodeURIComponent("fac");async function Nx(n,e,t,r,s,l){Ce(n.config.authDomain,n,"auth-domain-config-required"),Ce(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:fl,eventId:s};if(e instanceof uy){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",UA(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,y]of Object.entries({}))c[g]=y}if(e instanceof hu){const g=e.getScopes().filter(y=>y!=="");g.length>0&&(c.scopes=g.join(","))}n.tenantId&&(c.tid=n.tenantId);const f=c;for(const g of Object.keys(f))f[g]===void 0&&delete f[g];const d=await n._getAppCheckToken(),m=d?`#${oP}=${encodeURIComponent(d)}`:"";return`${aP(n)}?${cu(f).slice(1)}${m}`}function aP({config:n}){return n.emulator?sy(n,sP):`https://${n.authDomain}/${iP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hp="webStorageSupport";class lP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=g_,this._completeRedirectFn=PR,this._overrideRedirectResult=AR}async _openPopup(e,t,r,s){var c;Ri((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await Nx(e,t,r,Gp(),s);return nP(e,l,dy())}async _openRedirect(e,t,r,s){await this._originValidation(e);const l=await Nx(e,t,r,Gp(),s);return dR(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:l}=this.eventManagers[t];return s?Promise.resolve(s):(Ri(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await YR(e),r=new MR(e);return t.register("authEvent",s=>(Ce(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(hp,{type:hp},s=>{var c;const l=(c=s==null?void 0:s[0])==null?void 0:c[hp];l!==void 0&&t(!!l),tr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=BR(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return s_()||Zb()||ay()}}const cP=lP;var Mx="@firebase/auth",Dx="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dP(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function hP(n){Ya(new jo("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=r.options;Ce(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:c,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:o_(n)},m=new I5(r,s,l,d);return L5(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ya(new jo("auth-internal",e=>{const t=zs(e.getProvider("auth").getImmediate());return(r=>new uP(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ts(Mx,Dx,dP(n)),Ts(Mx,Dx,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fP=300,mP=Vb("authIdTokenMaxAge")||fP;let Vx=null;const pP=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>mP)return;const s=t==null?void 0:t.token;Vx!==s&&(Vx=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function gP(n=Ub()){const e=ny(n,"auth");if(e.isInitialized())return e.getImmediate();const t=V5(n,{popupRedirectResolver:cP,persistence:[wR,lR,g_]}),r=Vb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const c=pP(l.toString());rR(t,c,()=>c(t.currentUser)),nR(t,f=>c(f))}}const s=Mb("auth");return s&&O5(t,`http://${s}`),t}function yP(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}C5({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const l=xr("internal-error");l.customData=s,t(l)},r.type="text/javascript",r.charset="UTF-8",yP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});hP("Browser");var Lx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Is,S_;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,E){function N(){}N.prototype=E.prototype,A.F=E.prototype,A.prototype=new N,A.prototype.constructor=A,A.D=function(V,B,$){for(var O=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)O[Ve-2]=arguments[Ve];return E.prototype[B].apply(V,O)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,E,N){N||(N=0);const V=Array(16);if(typeof E=="string")for(var B=0;B<16;++B)V[B]=E.charCodeAt(N++)|E.charCodeAt(N++)<<8|E.charCodeAt(N++)<<16|E.charCodeAt(N++)<<24;else for(B=0;B<16;++B)V[B]=E[N++]|E[N++]<<8|E[N++]<<16|E[N++]<<24;E=A.g[0],N=A.g[1],B=A.g[2];let $=A.g[3],O;O=E+($^N&(B^$))+V[0]+3614090360&4294967295,E=N+(O<<7&4294967295|O>>>25),O=$+(B^E&(N^B))+V[1]+3905402710&4294967295,$=E+(O<<12&4294967295|O>>>20),O=B+(N^$&(E^N))+V[2]+606105819&4294967295,B=$+(O<<17&4294967295|O>>>15),O=N+(E^B&($^E))+V[3]+3250441966&4294967295,N=B+(O<<22&4294967295|O>>>10),O=E+($^N&(B^$))+V[4]+4118548399&4294967295,E=N+(O<<7&4294967295|O>>>25),O=$+(B^E&(N^B))+V[5]+1200080426&4294967295,$=E+(O<<12&4294967295|O>>>20),O=B+(N^$&(E^N))+V[6]+2821735955&4294967295,B=$+(O<<17&4294967295|O>>>15),O=N+(E^B&($^E))+V[7]+4249261313&4294967295,N=B+(O<<22&4294967295|O>>>10),O=E+($^N&(B^$))+V[8]+1770035416&4294967295,E=N+(O<<7&4294967295|O>>>25),O=$+(B^E&(N^B))+V[9]+2336552879&4294967295,$=E+(O<<12&4294967295|O>>>20),O=B+(N^$&(E^N))+V[10]+4294925233&4294967295,B=$+(O<<17&4294967295|O>>>15),O=N+(E^B&($^E))+V[11]+2304563134&4294967295,N=B+(O<<22&4294967295|O>>>10),O=E+($^N&(B^$))+V[12]+1804603682&4294967295,E=N+(O<<7&4294967295|O>>>25),O=$+(B^E&(N^B))+V[13]+4254626195&4294967295,$=E+(O<<12&4294967295|O>>>20),O=B+(N^$&(E^N))+V[14]+2792965006&4294967295,B=$+(O<<17&4294967295|O>>>15),O=N+(E^B&($^E))+V[15]+1236535329&4294967295,N=B+(O<<22&4294967295|O>>>10),O=E+(B^$&(N^B))+V[1]+4129170786&4294967295,E=N+(O<<5&4294967295|O>>>27),O=$+(N^B&(E^N))+V[6]+3225465664&4294967295,$=E+(O<<9&4294967295|O>>>23),O=B+(E^N&($^E))+V[11]+643717713&4294967295,B=$+(O<<14&4294967295|O>>>18),O=N+($^E&(B^$))+V[0]+3921069994&4294967295,N=B+(O<<20&4294967295|O>>>12),O=E+(B^$&(N^B))+V[5]+3593408605&4294967295,E=N+(O<<5&4294967295|O>>>27),O=$+(N^B&(E^N))+V[10]+38016083&4294967295,$=E+(O<<9&4294967295|O>>>23),O=B+(E^N&($^E))+V[15]+3634488961&4294967295,B=$+(O<<14&4294967295|O>>>18),O=N+($^E&(B^$))+V[4]+3889429448&4294967295,N=B+(O<<20&4294967295|O>>>12),O=E+(B^$&(N^B))+V[9]+568446438&4294967295,E=N+(O<<5&4294967295|O>>>27),O=$+(N^B&(E^N))+V[14]+3275163606&4294967295,$=E+(O<<9&4294967295|O>>>23),O=B+(E^N&($^E))+V[3]+4107603335&4294967295,B=$+(O<<14&4294967295|O>>>18),O=N+($^E&(B^$))+V[8]+1163531501&4294967295,N=B+(O<<20&4294967295|O>>>12),O=E+(B^$&(N^B))+V[13]+2850285829&4294967295,E=N+(O<<5&4294967295|O>>>27),O=$+(N^B&(E^N))+V[2]+4243563512&4294967295,$=E+(O<<9&4294967295|O>>>23),O=B+(E^N&($^E))+V[7]+1735328473&4294967295,B=$+(O<<14&4294967295|O>>>18),O=N+($^E&(B^$))+V[12]+2368359562&4294967295,N=B+(O<<20&4294967295|O>>>12),O=E+(N^B^$)+V[5]+4294588738&4294967295,E=N+(O<<4&4294967295|O>>>28),O=$+(E^N^B)+V[8]+2272392833&4294967295,$=E+(O<<11&4294967295|O>>>21),O=B+($^E^N)+V[11]+1839030562&4294967295,B=$+(O<<16&4294967295|O>>>16),O=N+(B^$^E)+V[14]+4259657740&4294967295,N=B+(O<<23&4294967295|O>>>9),O=E+(N^B^$)+V[1]+2763975236&4294967295,E=N+(O<<4&4294967295|O>>>28),O=$+(E^N^B)+V[4]+1272893353&4294967295,$=E+(O<<11&4294967295|O>>>21),O=B+($^E^N)+V[7]+4139469664&4294967295,B=$+(O<<16&4294967295|O>>>16),O=N+(B^$^E)+V[10]+3200236656&4294967295,N=B+(O<<23&4294967295|O>>>9),O=E+(N^B^$)+V[13]+681279174&4294967295,E=N+(O<<4&4294967295|O>>>28),O=$+(E^N^B)+V[0]+3936430074&4294967295,$=E+(O<<11&4294967295|O>>>21),O=B+($^E^N)+V[3]+3572445317&4294967295,B=$+(O<<16&4294967295|O>>>16),O=N+(B^$^E)+V[6]+76029189&4294967295,N=B+(O<<23&4294967295|O>>>9),O=E+(N^B^$)+V[9]+3654602809&4294967295,E=N+(O<<4&4294967295|O>>>28),O=$+(E^N^B)+V[12]+3873151461&4294967295,$=E+(O<<11&4294967295|O>>>21),O=B+($^E^N)+V[15]+530742520&4294967295,B=$+(O<<16&4294967295|O>>>16),O=N+(B^$^E)+V[2]+3299628645&4294967295,N=B+(O<<23&4294967295|O>>>9),O=E+(B^(N|~$))+V[0]+4096336452&4294967295,E=N+(O<<6&4294967295|O>>>26),O=$+(N^(E|~B))+V[7]+1126891415&4294967295,$=E+(O<<10&4294967295|O>>>22),O=B+(E^($|~N))+V[14]+2878612391&4294967295,B=$+(O<<15&4294967295|O>>>17),O=N+($^(B|~E))+V[5]+4237533241&4294967295,N=B+(O<<21&4294967295|O>>>11),O=E+(B^(N|~$))+V[12]+1700485571&4294967295,E=N+(O<<6&4294967295|O>>>26),O=$+(N^(E|~B))+V[3]+2399980690&4294967295,$=E+(O<<10&4294967295|O>>>22),O=B+(E^($|~N))+V[10]+4293915773&4294967295,B=$+(O<<15&4294967295|O>>>17),O=N+($^(B|~E))+V[1]+2240044497&4294967295,N=B+(O<<21&4294967295|O>>>11),O=E+(B^(N|~$))+V[8]+1873313359&4294967295,E=N+(O<<6&4294967295|O>>>26),O=$+(N^(E|~B))+V[15]+4264355552&4294967295,$=E+(O<<10&4294967295|O>>>22),O=B+(E^($|~N))+V[6]+2734768916&4294967295,B=$+(O<<15&4294967295|O>>>17),O=N+($^(B|~E))+V[13]+1309151649&4294967295,N=B+(O<<21&4294967295|O>>>11),O=E+(B^(N|~$))+V[4]+4149444226&4294967295,E=N+(O<<6&4294967295|O>>>26),O=$+(N^(E|~B))+V[11]+3174756917&4294967295,$=E+(O<<10&4294967295|O>>>22),O=B+(E^($|~N))+V[2]+718787259&4294967295,B=$+(O<<15&4294967295|O>>>17),O=N+($^(B|~E))+V[9]+3951481745&4294967295,A.g[0]=A.g[0]+E&4294967295,A.g[1]=A.g[1]+(B+(O<<21&4294967295|O>>>11))&4294967295,A.g[2]=A.g[2]+B&4294967295,A.g[3]=A.g[3]+$&4294967295}r.prototype.v=function(A,E){E===void 0&&(E=A.length);const N=E-this.blockSize,V=this.C;let B=this.h,$=0;for(;$<E;){if(B==0)for(;$<=N;)s(this,A,$),$+=this.blockSize;if(typeof A=="string"){for(;$<E;)if(V[B++]=A.charCodeAt($++),B==this.blockSize){s(this,V),B=0;break}}else for(;$<E;)if(V[B++]=A[$++],B==this.blockSize){s(this,V),B=0;break}}this.h=B,this.o+=E},r.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var E=1;E<A.length-8;++E)A[E]=0;E=this.o*8;for(var N=A.length-8;N<A.length;++N)A[N]=E&255,E/=256;for(this.v(A),A=Array(16),E=0,N=0;N<4;++N)for(let V=0;V<32;V+=8)A[E++]=this.g[N]>>>V&255;return A};function l(A,E){var N=f;return Object.prototype.hasOwnProperty.call(N,A)?N[A]:N[A]=E(A)}function c(A,E){this.h=E;const N=[];let V=!0;for(let B=A.length-1;B>=0;B--){const $=A[B]|0;V&&$==E||(N[B]=$,V=!1)}this.g=N}var f={};function d(A){return-128<=A&&A<128?l(A,function(E){return new c([E|0],E<0?-1:0)}):new c([A|0],A<0?-1:0)}function m(A){if(isNaN(A)||!isFinite(A))return y;if(A<0)return C(m(-A));const E=[];let N=1;for(let V=0;A>=N;V++)E[V]=A/N|0,N*=4294967296;return new c(E,0)}function g(A,E){if(A.length==0)throw Error("number format error: empty string");if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(A.charAt(0)=="-")return C(g(A.substring(1),E));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=m(Math.pow(E,8));let V=y;for(let $=0;$<A.length;$+=8){var B=Math.min(8,A.length-$);const O=parseInt(A.substring($,$+B),E);B<8?(B=m(Math.pow(E,B)),V=V.j(B).add(m(O))):(V=V.j(N),V=V.add(m(O)))}return V}var y=d(0),x=d(1),S=d(16777216);n=c.prototype,n.m=function(){if(I(this))return-C(this).m();let A=0,E=1;for(let N=0;N<this.g.length;N++){const V=this.i(N);A+=(V>=0?V:4294967296+V)*E,E*=4294967296}return A},n.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(_(this))return"0";if(I(this))return"-"+C(this).toString(A);const E=m(Math.pow(A,6));var N=this;let V="";for(;;){const B=K(N,E).g;N=M(N,B.j(E));let $=((N.g.length>0?N.g[0]:N.h)>>>0).toString(A);if(N=B,_(N))return $+V;for(;$.length<6;)$="0"+$;V=$+V}},n.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function _(A){if(A.h!=0)return!1;for(let E=0;E<A.g.length;E++)if(A.g[E]!=0)return!1;return!0}function I(A){return A.h==-1}n.l=function(A){return A=M(this,A),I(A)?-1:_(A)?0:1};function C(A){const E=A.g.length,N=[];for(let V=0;V<E;V++)N[V]=~A.g[V];return new c(N,~A.h).add(x)}n.abs=function(){return I(this)?C(this):this},n.add=function(A){const E=Math.max(this.g.length,A.g.length),N=[];let V=0;for(let B=0;B<=E;B++){let $=V+(this.i(B)&65535)+(A.i(B)&65535),O=($>>>16)+(this.i(B)>>>16)+(A.i(B)>>>16);V=O>>>16,$&=65535,O&=65535,N[B]=O<<16|$}return new c(N,N[N.length-1]&-2147483648?-1:0)};function M(A,E){return A.add(C(E))}n.j=function(A){if(_(this)||_(A))return y;if(I(this))return I(A)?C(this).j(C(A)):C(C(this).j(A));if(I(A))return C(this.j(C(A)));if(this.l(S)<0&&A.l(S)<0)return m(this.m()*A.m());const E=this.g.length+A.g.length,N=[];for(var V=0;V<2*E;V++)N[V]=0;for(V=0;V<this.g.length;V++)for(let B=0;B<A.g.length;B++){const $=this.i(V)>>>16,O=this.i(V)&65535,Ve=A.i(B)>>>16,Ke=A.i(B)&65535;N[2*V+2*B]+=O*Ke,D(N,2*V+2*B),N[2*V+2*B+1]+=$*Ke,D(N,2*V+2*B+1),N[2*V+2*B+1]+=O*Ve,D(N,2*V+2*B+1),N[2*V+2*B+2]+=$*Ve,D(N,2*V+2*B+2)}for(A=0;A<E;A++)N[A]=N[2*A+1]<<16|N[2*A];for(A=E;A<2*E;A++)N[A]=0;return new c(N,0)};function D(A,E){for(;(A[E]&65535)!=A[E];)A[E+1]+=A[E]>>>16,A[E]&=65535,E++}function R(A,E){this.g=A,this.h=E}function K(A,E){if(_(E))throw Error("division by zero");if(_(A))return new R(y,y);if(I(A))return E=K(C(A),E),new R(C(E.g),C(E.h));if(I(E))return E=K(A,C(E)),new R(C(E.g),E.h);if(A.g.length>30){if(I(A)||I(E))throw Error("slowDivide_ only works with positive integers.");for(var N=x,V=E;V.l(A)<=0;)N=z(N),V=z(V);var B=U(N,1),$=U(V,1);for(V=U(V,2),N=U(N,2);!_(V);){var O=$.add(V);O.l(A)<=0&&(B=B.add(N),$=O),V=U(V,1),N=U(N,1)}return E=M(A,B.j(E)),new R(B,E)}for(B=y;A.l(E)>=0;){for(N=Math.max(1,Math.floor(A.m()/E.m())),V=Math.ceil(Math.log(N)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),$=m(N),O=$.j(E);I(O)||O.l(A)>0;)N-=V,$=m(N),O=$.j(E);_($)&&($=x),B=B.add($),A=M(A,O)}return new R(B,A)}n.B=function(A){return K(this,A).h},n.and=function(A){const E=Math.max(this.g.length,A.g.length),N=[];for(let V=0;V<E;V++)N[V]=this.i(V)&A.i(V);return new c(N,this.h&A.h)},n.or=function(A){const E=Math.max(this.g.length,A.g.length),N=[];for(let V=0;V<E;V++)N[V]=this.i(V)|A.i(V);return new c(N,this.h|A.h)},n.xor=function(A){const E=Math.max(this.g.length,A.g.length),N=[];for(let V=0;V<E;V++)N[V]=this.i(V)^A.i(V);return new c(N,this.h^A.h)};function z(A){const E=A.g.length+1,N=[];for(let V=0;V<E;V++)N[V]=A.i(V)<<1|A.i(V-1)>>>31;return new c(N,A.h)}function U(A,E){const N=E>>5;E%=32;const V=A.g.length-N,B=[];for(let $=0;$<V;$++)B[$]=E>0?A.i($+N)>>>E|A.i($+N+1)<<32-E:A.i($+N);return new c(B,A.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,S_=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=g,Is=c}).apply(typeof Lx<"u"?Lx:typeof self<"u"?self:typeof window<"u"?window:{});var $d=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var E_,Cc,T_,lh,Jp,I_,C_,A_;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof $d=="object"&&$d];for(var k=0;k<h.length;++k){var b=h[k];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=t(this);function s(h,k){if(k)e:{var b=r;h=h.split(".");for(var P=0;P<h.length-1;P++){var G=h[P];if(!(G in b))break e;b=b[G]}h=h[h.length-1],P=b[h],k=k(P),k!=P&&k!=null&&e(b,h,{configurable:!0,writable:!0,value:k})}}s("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(h){return h||function(k){var b=[],P;for(P in k)Object.prototype.hasOwnProperty.call(k,P)&&b.push([P,k[P]]);return b}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function f(h){var k=typeof h;return k=="object"&&h!=null||k=="function"}function d(h,k,b){return h.call.apply(h.bind,arguments)}function m(h,k,b){return m=d,m.apply(null,arguments)}function g(h,k){var b=Array.prototype.slice.call(arguments,1);return function(){var P=b.slice();return P.push.apply(P,arguments),h.apply(this,P)}}function y(h,k){function b(){}b.prototype=k.prototype,h.Z=k.prototype,h.prototype=new b,h.prototype.constructor=h,h.Ob=function(P,G,X){for(var le=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)le[Me-2]=arguments[Me];return k.prototype[G].apply(P,le)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function S(h){const k=h.length;if(k>0){const b=Array(k);for(let P=0;P<k;P++)b[P]=h[P];return b}return[]}function _(h,k){for(let P=1;P<arguments.length;P++){const G=arguments[P];var b=typeof G;if(b=b!="object"?b:G?Array.isArray(G)?"array":b:"null",b=="array"||b=="object"&&typeof G.length=="number"){b=h.length||0;const X=G.length||0;h.length=b+X;for(let le=0;le<X;le++)h[b+le]=G[le]}else h.push(G)}}class I{constructor(k,b){this.i=k,this.j=b,this.h=0,this.g=null}get(){let k;return this.h>0?(this.h--,k=this.g,this.g=k.next,k.next=null):k=this.i(),k}}function C(h){c.setTimeout(()=>{throw h},0)}function M(){var h=A;let k=null;return h.g&&(k=h.g,h.g=h.g.next,h.g||(h.h=null),k.next=null),k}class D{constructor(){this.h=this.g=null}add(k,b){const P=R.get();P.set(k,b),this.h?this.h.next=P:this.g=P,this.h=P}}var R=new I(()=>new K,h=>h.reset());class K{constructor(){this.next=this.g=this.h=null}set(k,b){this.h=k,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let z,U=!1,A=new D,E=()=>{const h=Promise.resolve(void 0);z=()=>{h.then(N)}};function N(){for(var h;h=M();){try{h.h.call(h.g)}catch(b){C(b)}var k=R;k.j(h),k.h<100&&(k.h++,h.next=k.g,k.g=h)}U=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function B(h,k){this.type=h,this.g=this.target=k,this.defaultPrevented=!1}B.prototype.h=function(){this.defaultPrevented=!0};var $=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,k=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const b=()=>{};c.addEventListener("test",b,k),c.removeEventListener("test",b,k)}catch{}return h})();function O(h){return/^[\s\xa0]*$/.test(h)}function Ve(h,k){B.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,k)}y(Ve,B),Ve.prototype.init=function(h,k){const b=this.type=h.type,P=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=k,k=h.relatedTarget,k||(b=="mouseover"?k=h.fromElement:b=="mouseout"&&(k=h.toElement)),this.relatedTarget=k,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Ve.Z.h.call(this)},Ve.prototype.h=function(){Ve.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ke="closure_listenable_"+(Math.random()*1e6|0),at=0;function Te(h,k,b,P,G){this.listener=h,this.proxy=null,this.src=k,this.type=b,this.capture=!!P,this.ha=G,this.key=++at,this.da=this.fa=!1}function ie(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function me(h,k,b){for(const P in h)k.call(b,h[P],P,h)}function ce(h,k){for(const b in h)k.call(void 0,h[b],b,h)}function H(h){const k={};for(const b in h)k[b]=h[b];return k}const te="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Re(h,k){let b,P;for(let G=1;G<arguments.length;G++){P=arguments[G];for(b in P)h[b]=P[b];for(let X=0;X<te.length;X++)b=te[X],Object.prototype.hasOwnProperty.call(P,b)&&(h[b]=P[b])}}function Pe(h){this.src=h,this.g={},this.h=0}Pe.prototype.add=function(h,k,b,P,G){const X=h.toString();h=this.g[X],h||(h=this.g[X]=[],this.h++);const le=J(h,k,P,G);return le>-1?(k=h[le],b||(k.fa=!1)):(k=new Te(k,this.src,X,!!P,G),k.fa=b,h.push(k)),k};function Le(h,k){const b=k.type;if(b in h.g){var P=h.g[b],G=Array.prototype.indexOf.call(P,k,void 0),X;(X=G>=0)&&Array.prototype.splice.call(P,G,1),X&&(ie(k),h.g[b].length==0&&(delete h.g[b],h.h--))}}function J(h,k,b,P){for(let G=0;G<h.length;++G){const X=h[G];if(!X.da&&X.listener==k&&X.capture==!!b&&X.ha==P)return G}return-1}var de="closure_lm_"+(Math.random()*1e6|0),xe={};function Ie(h,k,b,P,G){if(Array.isArray(k)){for(let X=0;X<k.length;X++)Ie(h,k[X],b,P,G);return null}return b=Il(b),h&&h[Ke]?h.J(k,b,f(P)?!!P.capture:!1,G):Je(h,k,b,!1,P,G)}function Je(h,k,b,P,G,X){if(!k)throw Error("Invalid event type");const le=f(G)?!!G.capture:!!G;let Me=Ko(h);if(Me||(h[de]=Me=new Pe(h)),b=Me.add(k,b,P,le,X),b.proxy)return b;if(P=sr(),b.proxy=P,P.src=h,P.listener=b,h.addEventListener)$||(G=le),G===void 0&&(G=!1),h.addEventListener(k.toString(),P,G);else if(h.attachEvent)h.attachEvent(Ho(k.toString()),P);else if(h.addListener&&h.removeListener)h.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return b}function sr(){function h(b){return k.call(h.src,h.listener,b)}const k=Tu;return h}function Hs(h,k,b,P,G){if(Array.isArray(k))for(var X=0;X<k.length;X++)Hs(h,k[X],b,P,G);else P=f(P)?!!P.capture:!!P,b=Il(b),h&&h[Ke]?(h=h.i,X=String(k).toString(),X in h.g&&(k=h.g[X],b=J(k,b,P,G),b>-1&&(ie(k[b]),Array.prototype.splice.call(k,b,1),k.length==0&&(delete h.g[X],h.h--)))):h&&(h=Ko(h))&&(k=h.g[k.toString()],h=-1,k&&(h=J(k,b,P,G)),(b=h>-1?k[h]:null)&&zi(b))}function zi(h){if(typeof h!="number"&&h&&!h.da){var k=h.src;if(k&&k[Ke])Le(k.i,h);else{var b=h.type,P=h.proxy;k.removeEventListener?k.removeEventListener(b,P,h.capture):k.detachEvent?k.detachEvent(Ho(b),P):k.addListener&&k.removeListener&&k.removeListener(P),(b=Ko(k))?(Le(b,h),b.h==0&&(b.src=null,k[de]=null)):ie(h)}}}function Ho(h){return h in xe?xe[h]:xe[h]="on"+h}function Tu(h,k){if(h.da)h=!0;else{k=new Ve(k,this);const b=h.listener,P=h.ha||h.src;h.fa&&zi(h),h=b.call(P,k)}return h}function Ko(h){return h=h[de],h instanceof Pe?h:null}var Ks="__closure_events_fn_"+(Math.random()*1e9>>>0);function Il(h){return typeof h=="function"?h:(h[Ks]||(h[Ks]=function(k){return h.handleEvent(k)}),h[Ks])}function Et(){V.call(this),this.i=new Pe(this),this.M=this,this.G=null}y(Et,V),Et.prototype[Ke]=!0,Et.prototype.removeEventListener=function(h,k,b,P){Hs(this,h,k,b,P)};function xt(h,k){var b,P=h.G;if(P)for(b=[];P;P=P.G)b.push(P);if(h=h.M,P=k.type||k,typeof k=="string")k=new B(k,h);else if(k instanceof B)k.target=k.target||h;else{var G=k;k=new B(P,h),Re(k,G)}G=!0;let X,le;if(b)for(le=b.length-1;le>=0;le--)X=k.g=b[le],G=or(X,P,!0,k)&&G;if(X=k.g=h,G=or(X,P,!0,k)&&G,G=or(X,P,!1,k)&&G,b)for(le=0;le<b.length;le++)X=k.g=b[le],G=or(X,P,!1,k)&&G}Et.prototype.N=function(){if(Et.Z.N.call(this),this.i){var h=this.i;for(const k in h.g){const b=h.g[k];for(let P=0;P<b.length;P++)ie(b[P]);delete h.g[k],h.h--}}this.G=null},Et.prototype.J=function(h,k,b,P){return this.i.add(String(h),k,!1,b,P)},Et.prototype.K=function(h,k,b,P){return this.i.add(String(h),k,!0,b,P)};function or(h,k,b,P){if(k=h.i.g[String(k)],!k)return!0;k=k.concat();let G=!0;for(let X=0;X<k.length;++X){const le=k[X];if(le&&!le.da&&le.capture==b){const Me=le.listener,wt=le.ha||le.src;le.fa&&Le(h.i,le),G=Me.call(wt,P)!==!1&&G}}return G&&!P.defaultPrevented}function Cl(h,k){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=m(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(k)>2147483647?-1:c.setTimeout(h,k||0)}function Al(h){h.g=Cl(()=>{h.g=null,h.i&&(h.i=!1,Al(h))},h.l);const k=h.h;h.h=null,h.m.apply(null,k)}class Iu extends V{constructor(k,b){super(),this.m=k,this.l=b,this.h=null,this.i=!1,this.g=null}j(k){this.h=arguments,this.g?this.i=!0:Al(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fi(h){V.call(this),this.h=h,this.g={}}y(Fi,V);var jl=[];function qo(h){me(h.g,function(k,b){this.g.hasOwnProperty(b)&&zi(k)},h),h.g={}}Fi.prototype.N=function(){Fi.Z.N.call(this),qo(this)},Fi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ui=c.JSON.stringify,Cu=c.JSON.parse,qs=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function Wi(){}function Au(){}var $i={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Go(){B.call(this,"d")}y(Go,B);function Rl(){B.call(this,"c")}y(Rl,B);var ar={},Qo=null;function Hi(){return Qo=Qo||new Et}ar.Ia="serverreachability";function Yo(h){B.call(this,ar.Ia,h)}y(Yo,B);function ti(h){const k=Hi();xt(k,new Yo(k))}ar.STAT_EVENT="statevent";function ni(h,k){B.call(this,ar.STAT_EVENT,h),this.stat=k}y(ni,B);function pt(h){const k=Hi();xt(k,new ni(k,h))}ar.Ja="timingevent";function Pl(h,k){B.call(this,ar.Ja,h),this.size=k}y(Pl,B);function Ki(h,k){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},k)}function qi(){this.g=!0}qi.prototype.ua=function(){this.g=!1};function ju(h,k,b,P,G,X){h.info(function(){if(h.g)if(X){var le="",Me=X.split("&");for(let Xe=0;Xe<Me.length;Xe++){var wt=Me[Xe].split("=");if(wt.length>1){const Tt=wt[0];wt=wt[1];const Rn=Tt.split("_");le=Rn.length>=2&&Rn[1]=="type"?le+(Tt+"="+wt+"&"):le+(Tt+"=redacted&")}}}else le=null;else le=X;return"XMLHTTP REQ ("+P+") [attempt "+G+"]: "+k+`
`+b+`
`+le})}function Ru(h,k,b,P,G,X,le){h.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+G+"]: "+k+`
`+b+`
`+X+" "+le})}function Cr(h,k,b,P){h.info(function(){return"XMLHTTP TEXT ("+k+"): "+Gs(h,b)+(P?" "+P:"")})}function Pu(h,k){h.info(function(){return"TIMEOUT: "+k})}qi.prototype.info=function(){};function Gs(h,k){if(!h.g)return k;if(!k)return null;try{const X=JSON.parse(k);if(X){for(h=0;h<X.length;h++)if(Array.isArray(X[h])){var b=X[h];if(!(b.length<2)){var P=b[1];if(Array.isArray(P)&&!(P.length<1)){var G=P[0];if(G!="noop"&&G!="stop"&&G!="close")for(let le=1;le<P.length;le++)P[le]=""}}}}return Ui(X)}catch{return k}}var Gi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Qi={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Nu;function ri(){}y(ri,Wi),ri.prototype.g=function(){return new XMLHttpRequest},Nu=new ri;function Ar(h){return encodeURIComponent(String(h))}function Xo(h){var k=1;h=h.split(":");const b=[];for(;k>0&&h.length;)b.push(h.shift()),k--;return h.length&&b.push(h.join(":")),b}function Fn(h,k,b,P){this.j=h,this.i=k,this.l=b,this.S=P||1,this.V=new Fi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Mu}function Mu(){this.i=null,this.g="",this.h=!1}var Du={},Nl={};function lr(h,k,b){h.M=1,h.A=si(Un(k)),h.u=b,h.R=!0,Ml(h,null)}function Ml(h,k){h.F=Date.now(),Qs(h),h.B=Un(h.A);var b=h.B,P=h.S;Array.isArray(P)||(P=[String(P)]),$l(b.i,"t",P),h.C=0,b=h.j.L,h.h=new Mu,h.g=Hu(h.j,b?k:null,!h.u),h.P>0&&(h.O=new Iu(m(h.Y,h,h.g),h.P)),k=h.V,b=h.g,P=h.ba;var G="readystatechange";Array.isArray(G)||(G&&(jl[0]=G.toString()),G=jl);for(let X=0;X<G.length;X++){const le=Ie(b,G[X],P||k.handleEvent,!1,k.h||k);if(!le)break;k.g[le.key]=le}k=h.J?H(h.J):{},h.u?(h.v||(h.v="POST"),k["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,k)):(h.v="GET",h.g.ea(h.B,h.v,null,k)),ti(),ju(h.i,h.v,h.B,h.l,h.S,h.u)}Fn.prototype.ba=function(h){h=h.target;const k=this.O;k&&Vr(h)==3?k.j():this.Y(h)},Fn.prototype.Y=function(h){try{if(h==this.g)e:{const Me=Vr(this.g),wt=this.g.ya(),Xe=this.g.ca();if(!(Me<3)&&(Me!=3||this.g&&(this.h.h||this.g.la()||Wu(this.g)))){this.K||Me!=4||wt==7||(wt==8||Xe<=0?ti(3):ti(2)),Jo(this);var k=this.g.ca();this.X=k;var b=Vu(this);if(this.o=k==200,Ru(this.i,this.v,this.B,this.l,this.S,Me,k),this.o){if(this.U&&!this.L){t:{if(this.g){var P,G=this.g;if((P=G.g?G.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(P)){var X=P;break t}}X=null}if(h=X)Cr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,nt(this,h);else{this.o=!1,this.m=3,pt(12),ii(this),Ys(this);break e}}if(this.R){h=!0;let Tt;for(;!this.K&&this.C<b.length;)if(Tt=Ou(this,b),Tt==Nl){Me==4&&(this.m=4,pt(14),h=!1),Cr(this.i,this.l,null,"[Incomplete Response]");break}else if(Tt==Du){this.m=4,pt(15),Cr(this.i,this.l,b,"[Invalid Chunk]"),h=!1;break}else Cr(this.i,this.l,Tt,null),nt(this,Tt);if(Lu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Me!=4||b.length!=0||this.h.h||(this.m=1,pt(16),h=!1),this.o=this.o&&h,!h)Cr(this.i,this.l,b,"[Invalid Chunked Response]"),ii(this),Ys(this);else if(b.length>0&&!this.W){this.W=!0;var le=this.j;le.g==this&&le.aa&&!le.P&&(le.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),so(le),le.P=!0,pt(11))}}else Cr(this.i,this.l,b,null),nt(this,b);Me==4&&ii(this),this.o&&!this.K&&(Me==4?la(this.j,this):(this.o=!1,Qs(this)))}else Kl(this.g),k==400&&b.indexOf("Unknown SID")>0?(this.m=3,pt(12)):(this.m=0,pt(13)),ii(this),Ys(this)}}}catch{}finally{}};function Vu(h){if(!Lu(h))return h.g.la();const k=Wu(h.g);if(k==="")return"";let b="";const P=k.length,G=Vr(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return ii(h),Ys(h),"";h.h.i=new c.TextDecoder}for(let X=0;X<P;X++)h.h.h=!0,b+=h.h.i.decode(k[X],{stream:!(G&&X==P-1)});return k.length=0,h.h.g+=b,h.C=0,h.h.g}function Lu(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Ou(h,k){var b=h.C,P=k.indexOf(`
`,b);return P==-1?Nl:(b=Number(k.substring(b,P)),isNaN(b)?Du:(P+=1,P+b>k.length?Nl:(k=k.slice(P,P+b),h.C=P+b,k)))}Fn.prototype.cancel=function(){this.K=!0,ii(this)};function Qs(h){h.T=Date.now()+h.H,Dl(h,h.H)}function Dl(h,k){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Ki(m(h.aa,h),k)}function Jo(h){h.D&&(c.clearTimeout(h.D),h.D=null)}Fn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Pu(this.i,this.B),this.M!=2&&(ti(),pt(17)),ii(this),this.m=2,Ys(this)):Dl(this,this.T-h)};function Ys(h){h.j.I==0||h.K||la(h.j,h)}function ii(h){Jo(h);var k=h.O;k&&typeof k.dispose=="function"&&k.dispose(),h.O=null,qo(h.V),h.g&&(k=h.g,h.g=null,k.abort(),k.dispose())}function nt(h,k){try{var b=h.j;if(b.I!=0&&(b.g==h||Ll(b.h,h))){if(!h.L&&Ll(b.h,h)&&b.I==3){try{var P=b.Ba.g.parse(k)}catch{P=null}if(Array.isArray(P)&&P.length==3){var G=P;if(G[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<h.F)aa(b),An(b);else break e;Br(b),pt(18)}}else b.xa=G[1],0<b.xa-b.K&&G[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=Ki(m(b.Va,b),6e3));Xs(b.h)<=1&&b.ta&&(b.ta=void 0)}else jn(b,11)}else if((h.L||b.g==h)&&aa(b),!O(k))for(G=b.Ba.g.parse(k),k=0;k<G.length;k++){let Xe=G[k];const Tt=Xe[0];if(!(Tt<=b.K))if(b.K=Tt,Xe=Xe[1],b.I==2)if(Xe[0]=="c"){b.M=Xe[1],b.ba=Xe[2];const Rn=Xe[3];Rn!=null&&(b.ka=Rn,b.j.info("VER="+b.ka));const ui=Xe[4];ui!=null&&(b.za=ui,b.j.info("SVER="+b.za));const zr=Xe[5];zr!=null&&typeof zr=="number"&&zr>0&&(P=1.5*zr,b.O=P,b.j.info("backChannelRequestTimeoutMs_="+P)),P=b;const Fr=h.g;if(Fr){const da=Fr.g?Fr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(da){var X=P.h;X.g||da.indexOf("spdy")==-1&&da.indexOf("quic")==-1&&da.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(ea(X,X.h),X.h=null))}if(P.G){const Ql=Fr.g?Fr.g.getResponseHeader("X-HTTP-Session-Id"):null;Ql&&(P.wa=Ql,Qe(P.J,P.G,Ql))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-h.F,b.j.info("Handshake RTT: "+b.T+"ms")),P=b;var le=h;if(P.na=Gl(P,P.L?P.ba:null,P.W),le.L){Js(P.h,le);var Me=le,wt=P.O;wt&&(Me.H=wt),Me.D&&(Jo(Me),Qs(Me)),P.g=le}else Zt(P);b.i.length>0&&ci(b)}else Xe[0]!="stop"&&Xe[0]!="close"||jn(b,7);else b.I==3&&(Xe[0]=="stop"||Xe[0]=="close"?Xe[0]=="stop"?jn(b,7):sa(b):Xe[0]!="noop"&&b.l&&b.l.qa(Xe),b.A=0)}}ti(4)}catch{}}var Af=class{constructor(h,k){this.g=h,this.map=k}};function Zo(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Vl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Xs(h){return h.h?1:h.g?h.g.size:0}function Ll(h,k){return h.h?h.h==k:h.g?h.g.has(k):!1}function ea(h,k){h.g?h.g.add(k):h.h=k}function Js(h,k){h.h&&h.h==k?h.h=null:h.g&&h.g.has(k)&&h.g.delete(k)}Zo.prototype.cancel=function(){if(this.i=Tn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Tn(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let k=h.i;for(const b of h.g.values())k=k.concat(b.G);return k}return S(h.i)}var Bu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function In(h,k){if(h){h=h.split("&");for(let b=0;b<h.length;b++){const P=h[b].indexOf("=");let G,X=null;P>=0?(G=h[b].substring(0,P),X=h[b].substring(P+1)):G=h[b],k(G,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function jr(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let k;h instanceof jr?(this.l=h.l,Zs(this,h.j),this.o=h.o,this.g=h.g,Rr(this,h.u),this.h=h.h,Yi(this,Hl(h.i)),this.m=h.m):h&&(k=String(h).match(Bu))?(this.l=!1,Zs(this,k[1]||"",!0),this.o=eo(k[2]||""),this.g=eo(k[3]||"",!0),Rr(this,k[4]),this.h=eo(k[5]||"",!0),Yi(this,k[6]||"",!0),this.m=eo(k[7]||"")):(this.l=!1,this.i=new $e(null,this.l))}jr.prototype.toString=function(){const h=[];var k=this.j;k&&h.push(to(k,Bl,!0),":");var b=this.g;return(b||k=="file")&&(h.push("//"),(k=this.o)&&h.push(to(k,Bl,!0),"@"),h.push(Ar(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&h.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&h.push("/"),h.push(to(b,b.charAt(0)=="/"?no:zl,!0))),(b=this.i.toString())&&h.push("?",b),(b=this.m)&&h.push("#",to(b,Fl)),h.join("")},jr.prototype.resolve=function(h){const k=Un(this);let b=!!h.j;b?Zs(k,h.j):b=!!h.o,b?k.o=h.o:b=!!h.g,b?k.g=h.g:b=h.u!=null;var P=h.h;if(b)Rr(k,h.u);else if(b=!!h.h){if(P.charAt(0)!="/")if(this.g&&!this.h)P="/"+P;else{var G=k.h.lastIndexOf("/");G!=-1&&(P=k.h.slice(0,G+1)+P)}if(G=P,G==".."||G==".")P="";else if(G.indexOf("./")!=-1||G.indexOf("/.")!=-1){P=G.lastIndexOf("/",0)==0,G=G.split("/");const X=[];for(let le=0;le<G.length;){const Me=G[le++];Me=="."?P&&le==G.length&&X.push(""):Me==".."?((X.length>1||X.length==1&&X[0]!="")&&X.pop(),P&&le==G.length&&X.push("")):(X.push(Me),P=!0)}P=X.join("/")}else P=G}return b?k.h=P:b=h.i.toString()!=="",b?Yi(k,Hl(h.i)):b=!!h.m,b&&(k.m=h.m),k};function Un(h){return new jr(h)}function Zs(h,k,b){h.j=b?eo(k,!0):k,h.j&&(h.j=h.j.replace(/:$/,""))}function Rr(h,k){if(k){if(k=Number(k),isNaN(k)||k<0)throw Error("Bad port number "+k);h.u=k}else h.u=null}function Yi(h,k,b){k instanceof $e?(h.i=k,na(h.i,h.l)):(b||(k=to(k,jf)),h.i=new $e(k,h.l))}function Qe(h,k,b){h.i.set(k,b)}function si(h){return Qe(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function eo(h,k){return h?k?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function to(h,k,b){return typeof h=="string"?(h=encodeURI(h).replace(k,Ol),b&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Ol(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Bl=/[#\/\?@]/g,zl=/[#\?:]/g,no=/[#\?]/g,jf=/[#\?@]/g,Fl=/#/g;function $e(h,k){this.h=this.g=null,this.i=h||null,this.j=!!k}function Pr(h){h.g||(h.g=new Map,h.h=0,h.i&&In(h.i,function(k,b){h.add(decodeURIComponent(k.replace(/\+/g," ")),b)}))}n=$e.prototype,n.add=function(h,k){Pr(this),this.i=null,h=Nr(this,h);let b=this.g.get(h);return b||this.g.set(h,b=[]),b.push(k),this.h+=1,this};function Ul(h,k){Pr(h),k=Nr(h,k),h.g.has(k)&&(h.i=null,h.h-=h.g.get(k).length,h.g.delete(k))}function ta(h,k){return Pr(h),k=Nr(h,k),h.g.has(k)}n.forEach=function(h,k){Pr(this),this.g.forEach(function(b,P){b.forEach(function(G){h.call(k,G,P,this)},this)},this)};function Wl(h,k){Pr(h);let b=[];if(typeof k=="string")ta(h,k)&&(b=b.concat(h.g.get(Nr(h,k))));else for(h=Array.from(h.g.values()),k=0;k<h.length;k++)b=b.concat(h[k]);return b}n.set=function(h,k){return Pr(this),this.i=null,h=Nr(this,h),ta(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[k]),this.h+=1,this},n.get=function(h,k){return h?(h=Wl(this,h),h.length>0?String(h[0]):k):k};function $l(h,k,b){Ul(h,k),b.length>0&&(h.i=null,h.g.set(Nr(h,k),S(b)),h.h+=b.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],k=Array.from(this.g.keys());for(let P=0;P<k.length;P++){var b=k[P];const G=Ar(b);b=Wl(this,b);for(let X=0;X<b.length;X++){let le=G;b[X]!==""&&(le+="="+Ar(b[X])),h.push(le)}}return this.i=h.join("&")};function Hl(h){const k=new $e;return k.i=h.i,h.g&&(k.g=new Map(h.g),k.h=h.h),k}function Nr(h,k){return k=String(k),h.j&&(k=k.toLowerCase()),k}function na(h,k){k&&!h.j&&(Pr(h),h.i=null,h.g.forEach(function(b,P){const G=P.toLowerCase();P!=G&&(Ul(this,P),$l(this,G,b))},h)),h.j=k}function Mr(h,k){const b=new qi;if(c.Image){const P=new Image;P.onload=g($t,b,"TestLoadImage: loaded",!0,k,P),P.onerror=g($t,b,"TestLoadImage: error",!1,k,P),P.onabort=g($t,b,"TestLoadImage: abort",!1,k,P),P.ontimeout=g($t,b,"TestLoadImage: timeout",!1,k,P),c.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=h}else k(!1)}function Dr(h,k){const b=new qi,P=new AbortController,G=setTimeout(()=>{P.abort(),$t(b,"TestPingServer: timeout",!1,k)},1e4);fetch(h,{signal:P.signal}).then(X=>{clearTimeout(G),X.ok?$t(b,"TestPingServer: ok",!0,k):$t(b,"TestPingServer: server error",!1,k)}).catch(()=>{clearTimeout(G),$t(b,"TestPingServer: error",!1,k)})}function $t(h,k,b,P,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),P(b)}catch{}}function ro(){this.g=new qs}function oi(h){this.i=h.Sb||null,this.h=h.ab||!1}y(oi,Wi),oi.prototype.g=function(){return new Cn(this.i,this.h)};function Cn(h,k){Et.call(this),this.H=h,this.o=k,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}y(Cn,Et),n=Cn.prototype,n.open=function(h,k){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=k,this.readyState=1,cr(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const k={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(k.body=h),(this.H||c).fetch(new Request(this.D,k)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Xi(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,cr(this)),this.g&&(this.readyState=3,cr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;zu(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function zu(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var k=h.value?h.value:new Uint8Array(0);(k=this.B.decode(k,{stream:!h.done}))&&(this.response=this.responseText+=k)}h.done?Xi(this):cr(this),this.readyState==3&&zu(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,Xi(this))},n.Na=function(h){this.g&&(this.response=h,Xi(this))},n.ga=function(){this.g&&Xi(this)};function Xi(h){h.readyState=4,h.l=null,h.j=null,h.B=null,cr(h)}n.setRequestHeader=function(h,k){this.A.append(h,k)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],k=this.h.entries();for(var b=k.next();!b.done;)b=b.value,h.push(b[0]+": "+b[1]),b=k.next();return h.join(`\r
`)};function cr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Cn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Fu(h){let k="";return me(h,function(b,P){k+=P,k+=":",k+=b,k+=`\r
`}),k}function ra(h,k,b){e:{for(P in b){var P=!1;break e}P=!0}P||(b=Fu(b),typeof h=="string"?b!=null&&Ar(b):Qe(h,k,b))}function Ze(h){Et.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}y(Ze,Et);var Uu=/^https?$/i,Rf=["POST","PUT"];n=Ze.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,k,b,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);k=k?k.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Nu.g(),this.g.onreadystatechange=x(m(this.Ca,this));try{this.B=!0,this.g.open(k,String(h),!0),this.B=!1}catch(X){Ji(this,X);return}if(h=b||"",b=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var G in P)b.set(G,P[G]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const X of P.keys())b.set(X,P.get(X));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(b.keys()).find(X=>X.toLowerCase()=="content-type"),G=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(Rf,k,void 0)>=0)||P||G||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,le]of b)this.g.setRequestHeader(X,le);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(X){Ji(this,X)}};function Ji(h,k){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=k,h.o=5,Zi(h),li(h)}function Zi(h){h.A||(h.A=!0,xt(h,"complete"),xt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,xt(this,"complete"),xt(this,"abort"),li(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),li(this,!0)),Ze.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?ai(this):this.Xa())},n.Xa=function(){ai(this)};function ai(h){if(h.h&&typeof l<"u"){if(h.v&&Vr(h)==4)setTimeout(h.Ca.bind(h),0);else if(xt(h,"readystatechange"),Vr(h)==4){h.h=!1;try{const X=h.ca();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var k=!0;break e;default:k=!1}var b;if(!(b=k)){var P;if(P=X===0){let le=String(h.D).match(Bu)[1]||null;!le&&c.self&&c.self.location&&(le=c.self.location.protocol.slice(0,-1)),P=!Uu.test(le?le.toLowerCase():"")}b=P}if(b)xt(h,"complete"),xt(h,"success");else{h.o=6;try{var G=Vr(h)>2?h.g.statusText:""}catch{G=""}h.l=G+" ["+h.ca()+"]",Zi(h)}}finally{li(h)}}}}function li(h,k){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const b=h.g;h.g=null,k||xt(h,"ready");try{b.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Vr(h){return h.g?h.g.readyState:0}n.ca=function(){try{return Vr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var k=this.g.responseText;return h&&k.indexOf(h)==0&&(k=k.substring(h.length)),Cu(k)}};function Wu(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Kl(h){const k={};h=(h.g&&Vr(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<h.length;P++){if(O(h[P]))continue;var b=Xo(h[P]);const G=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const X=k[G]||[];k[G]=X,X.push(b)}ce(k,function(P){return P.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Lr(h,k,b){return b&&b.internalChannelParams&&b.internalChannelParams[h]||k}function ia(h){this.za=0,this.i=[],this.j=new qi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Lr("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Lr("baseRetryDelayMs",5e3,h),this.Za=Lr("retryDelaySeedMs",1e4,h),this.Ta=Lr("forwardChannelMaxRetries",2,h),this.va=Lr("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Zo(h&&h.concurrentRequestLimit),this.Ba=new ro,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=ia.prototype,n.ka=8,n.I=1,n.connect=function(h,k,b,P){pt(0),this.W=h,this.H=k||{},b&&P!==void 0&&(this.H.OSID=b,this.H.OAID=P),this.F=this.X,this.J=Gl(this,null,this.W),ci(this)};function sa(h){if(oa(h),h.I==3){var k=h.V++,b=Un(h.J);if(Qe(b,"SID",h.M),Qe(b,"RID",k),Qe(b,"TYPE","terminate"),Or(h,b),k=new Fn(h,h.j,k),k.M=2,k.A=si(Un(b)),b=!1,c.navigator&&c.navigator.sendBeacon)try{b=c.navigator.sendBeacon(k.A.toString(),"")}catch{}!b&&c.Image&&(new Image().src=k.A,b=!0),b||(k.g=Hu(k.j,null),k.g.ea(k.A)),k.F=Date.now(),Qs(k)}oo(h)}function An(h){h.g&&(so(h),h.g.cancel(),h.g=null)}function oa(h){An(h),h.v&&(c.clearTimeout(h.v),h.v=null),aa(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function ci(h){if(!Vl(h.h)&&!h.m){h.m=!0;var k=h.Ea;z||E(),U||(z(),U=!0),A.add(k,h),h.D=0}}function $u(h,k){return Xs(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=k.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Ki(m(h.Ea,h,k),ca(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const G=new Fn(this,this.j,h);let X=this.o;if(this.U&&(X?(X=H(X),Re(X,this.U)):X=this.U),this.u!==null||this.R||(G.J=X,X=null),this.S)e:{for(var k=0,b=0;b<this.i.length;b++){t:{var P=this.i[b];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(k+=P,k>4096){k=b;break e}if(k===4096||b===this.i.length-1){k=b+1;break e}}k=1e3}else k=1e3;k=ql(this,G,k),b=Un(this.J),Qe(b,"RID",h),Qe(b,"CVER",22),this.G&&Qe(b,"X-HTTP-Session-Id",this.G),Or(this,b),X&&(this.R?k="headers="+Ar(Fu(X))+"&"+k:this.u&&ra(b,this.u,X)),ea(this.h,G),this.Ra&&Qe(b,"TYPE","init"),this.S?(Qe(b,"$req",k),Qe(b,"SID","null"),G.U=!0,lr(G,b,null)):lr(G,b,k),this.I=2}}else this.I==3&&(h?io(this,h):this.i.length==0||Vl(this.h)||io(this))};function io(h,k){var b;k?b=k.l:b=h.V++;const P=Un(h.J);Qe(P,"SID",h.M),Qe(P,"RID",b),Qe(P,"AID",h.K),Or(h,P),h.u&&h.o&&ra(P,h.u,h.o),b=new Fn(h,h.j,b,h.D+1),h.u===null&&(b.J=h.o),k&&(h.i=k.G.concat(h.i)),k=ql(h,b,1e3),b.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),ea(h.h,b),lr(b,P,k)}function Or(h,k){h.H&&me(h.H,function(b,P){Qe(k,P,b)}),h.l&&me({},function(b,P){Qe(k,P,b)})}function ql(h,k,b){b=Math.min(h.i.length,b);const P=h.l?m(h.l.Ka,h.l,h):null;e:{var G=h.i;let Me=-1;for(;;){const wt=["count="+b];Me==-1?b>0?(Me=G[0].g,wt.push("ofs="+Me)):Me=0:wt.push("ofs="+Me);let Xe=!0;for(let Tt=0;Tt<b;Tt++){var X=G[Tt].g;const Rn=G[Tt].map;if(X-=Me,X<0)Me=Math.max(0,G[Tt].g-100),Xe=!1;else try{X="req"+X+"_"||"";try{var le=Rn instanceof Map?Rn:Object.entries(Rn);for(const[ui,zr]of le){let Fr=zr;f(zr)&&(Fr=Ui(zr)),wt.push(X+ui+"="+encodeURIComponent(Fr))}}catch(ui){throw wt.push(X+"type="+encodeURIComponent("_badmap")),ui}}catch{P&&P(Rn)}}if(Xe){le=wt.join("&");break e}}le=void 0}return h=h.i.splice(0,b),k.G=h,le}function Zt(h){if(!h.g&&!h.v){h.Y=1;var k=h.Da;z||E(),U||(z(),U=!0),A.add(k,h),h.A=0}}function Br(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Ki(m(h.Da,h),ca(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,es(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Ki(m(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,pt(10),An(this),es(this))};function so(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function es(h){h.g=new Fn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var k=Un(h.na);Qe(k,"RID","rpc"),Qe(k,"SID",h.M),Qe(k,"AID",h.K),Qe(k,"CI",h.F?"0":"1"),!h.F&&h.ia&&Qe(k,"TO",h.ia),Qe(k,"TYPE","xmlhttp"),Or(h,k),h.u&&h.o&&ra(k,h.u,h.o),h.O&&(h.g.H=h.O);var b=h.g;h=h.ba,b.M=1,b.A=si(Un(k)),b.u=null,b.R=!0,Ml(b,h)}n.Va=function(){this.C!=null&&(this.C=null,An(this),Br(this),pt(19))};function aa(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function la(h,k){var b=null;if(h.g==k){aa(h),so(h),h.g=null;var P=2}else if(Ll(h.h,k))b=k.G,Js(h.h,k),P=1;else return;if(h.I!=0){if(k.o)if(P==1){b=k.u?k.u.length:0,k=Date.now()-k.F;var G=h.D;P=Hi(),xt(P,new Pl(P,b)),ci(h)}else Zt(h);else if(G=k.m,G==3||G==0&&k.X>0||!(P==1&&$u(h,k)||P==2&&Br(h)))switch(b&&b.length>0&&(k=h.h,k.i=k.i.concat(b)),G){case 1:jn(h,5);break;case 4:jn(h,10);break;case 3:jn(h,6);break;default:jn(h,2)}}}function ca(h,k){let b=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(b*=2),b*k}function jn(h,k){if(h.j.info("Error code "+k),k==2){var b=m(h.bb,h),P=h.Ua;const G=!P;P=new jr(P||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Zs(P,"https"),si(P),G?Mr(P.toString(),b):Dr(P.toString(),b)}else pt(2);h.I=0,h.l&&h.l.pa(k),oo(h),oa(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function oo(h){if(h.I=0,h.ja=[],h.l){const k=Tn(h.h);(k.length!=0||h.i.length!=0)&&(_(h.ja,k),_(h.ja,h.i),h.h.i.length=0,S(h.i),h.i.length=0),h.l.oa()}}function Gl(h,k,b){var P=b instanceof jr?Un(b):new jr(b);if(P.g!="")k&&(P.g=k+"."+P.g),Rr(P,P.u);else{var G=c.location;P=G.protocol,k=k?k+"."+G.hostname:G.hostname,G=+G.port;const X=new jr(null);P&&Zs(X,P),k&&(X.g=k),G&&Rr(X,G),b&&(X.h=b),P=X}return b=h.G,k=h.wa,b&&k&&Qe(P,b,k),Qe(P,"VER",h.ka),Or(h,P),P}function Hu(h,k,b){if(k&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return k=h.Aa&&!h.ma?new Ze(new oi({ab:b})):new Ze(h.ma),k.Fa(h.L),k}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ku(){}n=Ku.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function ua(){}ua.prototype.g=function(h,k){return new Ht(h,k)};function Ht(h,k){Et.call(this),this.g=new ia(k),this.l=h,this.h=k&&k.messageUrlParams||null,h=k&&k.messageHeaders||null,k&&k.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=k&&k.initMessageHeaders||null,k&&k.messageContentType&&(h?h["X-WebChannel-Content-Type"]=k.messageContentType:h={"X-WebChannel-Content-Type":k.messageContentType}),k&&k.sa&&(h?h["X-WebChannel-Client-Profile"]=k.sa:h={"X-WebChannel-Client-Profile":k.sa}),this.g.U=h,(h=k&&k.Qb)&&!O(h)&&(this.g.u=h),this.A=k&&k.supportsCrossDomainXhr||!1,this.v=k&&k.sendRawJson||!1,(k=k&&k.httpSessionIdParam)&&!O(k)&&(this.g.G=k,h=this.h,h!==null&&k in h&&(h=this.h,k in h&&delete h[k])),this.j=new ts(this)}y(Ht,Et),Ht.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ht.prototype.close=function(){sa(this.g)},Ht.prototype.o=function(h){var k=this.g;if(typeof h=="string"){var b={};b.__data__=h,h=b}else this.v&&(b={},b.__data__=Ui(h),h=b);k.i.push(new Af(k.Ya++,h)),k.I==3&&ci(k)},Ht.prototype.N=function(){this.g.l=null,delete this.j,sa(this.g),delete this.g,Ht.Z.N.call(this)};function qu(h){Go.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var k=h.__sm__;if(k){e:{for(const b in k){h=b;break e}h=void 0}(this.i=h)&&(h=this.i,k=k!==null&&h in k?k[h]:void 0),this.data=k}else this.data=h}y(qu,Go);function Gu(){Rl.call(this),this.status=1}y(Gu,Rl);function ts(h){this.g=h}y(ts,Ku),ts.prototype.ra=function(){xt(this.g,"a")},ts.prototype.qa=function(h){xt(this.g,new qu(h))},ts.prototype.pa=function(h){xt(this.g,new Gu)},ts.prototype.oa=function(){xt(this.g,"b")},ua.prototype.createWebChannel=ua.prototype.g,Ht.prototype.send=Ht.prototype.o,Ht.prototype.open=Ht.prototype.m,Ht.prototype.close=Ht.prototype.close,A_=function(){return new ua},C_=function(){return Hi()},I_=ar,Jp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Gi.NO_ERROR=0,Gi.TIMEOUT=8,Gi.HTTP_ERROR=6,lh=Gi,Qi.COMPLETE="complete",T_=Qi,Au.EventType=$i,$i.OPEN="a",$i.CLOSE="b",$i.ERROR="c",$i.MESSAGE="d",Et.prototype.listen=Et.prototype.J,Cc=Au,Ze.prototype.listenOnce=Ze.prototype.K,Ze.prototype.getLastError=Ze.prototype.Ha,Ze.prototype.getLastErrorCode=Ze.prototype.ya,Ze.prototype.getStatus=Ze.prototype.ca,Ze.prototype.getResponseJson=Ze.prototype.La,Ze.prototype.getResponseText=Ze.prototype.la,Ze.prototype.send=Ze.prototype.ea,Ze.prototype.setWithCredentials=Ze.prototype.Fa,E_=Ze}).apply(typeof $d<"u"?$d:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let on=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pl="12.8.0";function vP(n){pl=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No=new ey("@firebase/firestore");function Na(){return No.logLevel}function pe(n,...e){if(No.logLevel<=ze.DEBUG){const t=e.map(fy);No.debug(`Firestore (${pl}): ${n}`,...t)}}function Pi(n,...e){if(No.logLevel<=ze.ERROR){const t=e.map(fy);No.error(`Firestore (${pl}): ${n}`,...t)}}function Ja(n,...e){if(No.logLevel<=ze.WARN){const t=e.map(fy);No.warn(`Firestore (${pl}): ${n}`,...t)}}function fy(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,j_(n,r,t)}function j_(n,e,t){let r=`FIRESTORE (${pl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Pi(r),new Error(r)}function Ye(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||j_(e,s,r)}function De(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends Vi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class xP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(on.UNAUTHENTICATED)))}shutdown(){}}class wP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class kP{constructor(e){this.t=e,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ye(this.o===void 0,42304);let r=this.i;const s=d=>this.i!==r?(r=this.i,t(d)):Promise.resolve();let l=new Ii;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ii,e.enqueueRetryable((()=>s(this.currentUser)))};const c=()=>{const d=l;e.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},f=d=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((d=>f(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?f(d):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ii)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ye(typeof r.accessToken=="string",31837,{l:r}),new R_(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ye(e===null||typeof e=="string",2055,{h:e}),new on(e)}}class bP{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=on.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class _P{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new bP(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(on.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ox{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class SP{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Dn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ye(this.o===void 0,3512);const r=l=>{l.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,pe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const s=l=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>s(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?s(l):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Ox(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ye(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Ox(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EP(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=EP(40);for(let l=0;l<s.length;++l)r.length<20&&s[l]<t&&(r+=e.charAt(s[l]%62))}return r}}function Fe(n,e){return n<e?-1:n>e?1:0}function Zp(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const s=n.charAt(r),l=e.charAt(r);if(s!==l)return fp(s)===fp(l)?Fe(s,l):fp(s)?1:-1}return Fe(n.length,e.length)}const TP=55296,IP=57343;function fp(n){const e=n.charCodeAt(0);return e>=TP&&e<=IP}function Za(n,e,t){return n.length===e.length&&n.every(((r,s)=>t(r,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx="__name__";class Kr{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ae(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ae(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Kr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Kr?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const l=Kr.compareSegments(e.get(s),t.get(s));if(l!==0)return l}return Fe(e.length,t.length)}static compareSegments(e,t){const r=Kr.isNumericId(e),s=Kr.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?Kr.extractNumericId(e).compare(Kr.extractNumericId(t)):Zp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Is.fromString(e.substring(4,e.length-2))}}class tt extends Kr{construct(e,t,r){return new tt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new he(Z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((s=>s.length>0)))}return new tt(t)}static emptyPath(){return new tt([])}}const CP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yt extends Kr{construct(e,t,r){return new Yt(e,t,r)}static isValidIdentifier(e){return CP.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Bx}static keyField(){return new Yt([Bx])}static fromServerFormat(e){const t=[];let r="",s=0;const l=()=>{if(r.length===0)throw new he(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;s<e.length;){const f=e[s];if(f==="\\"){if(s+1===e.length)throw new he(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new he(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,s+=2}else f==="`"?(c=!c,s++):f!=="."||c?(r+=f,s++):(l(),s++)}if(l(),c)throw new he(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yt(t)}static emptyPath(){return new Yt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.path=e}static fromPath(e){return new _e(tt.fromString(e))}static fromName(e){return new _e(tt.fromString(e).popFirst(5))}static empty(){return new _e(tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return tt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new tt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P_(n,e,t){if(!t)throw new he(Z.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function AP(n,e,t,r){if(e===!0&&r===!0)throw new he(Z.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function zx(n){if(!_e.isDocumentKey(n))throw new he(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Fx(n){if(_e.isDocumentKey(n))throw new he(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function N_(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function nf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ae(12329,{type:typeof n})}function _r(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new he(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=nf(n);throw new he(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(n,e){const t={typeString:n};return e&&(t.value=e),t}function mu(n,e){if(!N_(n))throw new he(Z.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const c=n[r];if(s&&typeof c!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${r}' field to equal '${l.value}'`;break}}if(t)throw new he(Z.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux=-62135596800,Wx=1e6;class st{static now(){return st.fromMillis(Date.now())}static fromDate(e){return st.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Wx);return new st(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Ux)throw new he(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Wx}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:st._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(mu(e,st._jsonSchema))return new st(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Ux;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}st._jsonSchemaVersion="firestore/timestamp/1.0",st._jsonSchema={type:Rt("string",st._jsonSchemaVersion),seconds:Rt("number"),nanoseconds:Rt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{static fromTimestamp(e){return new Ne(e)}static min(){return new Ne(new st(0,0))}static max(){return new Ne(new st(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qc=-1;function jP(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Ne.fromTimestamp(r===1e9?new st(t+1,0):new st(t,r));return new js(s,_e.empty(),e)}function RP(n){return new js(n.readTime,n.key,qc)}class js{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new js(Ne.min(),_e.empty(),qc)}static max(){return new js(Ne.max(),_e.empty(),qc)}}function PP(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=_e.comparator(n.documentKey,e.documentKey),t!==0?t:Fe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class MP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gl(n){if(n.code!==Z.FAILED_PRECONDITION||n.message!==NP)throw n;pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ee(((r,s)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,s)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ee?t:ee.resolve(t)}catch(t){return ee.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ee.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ee.reject(t)}static resolve(e){return new ee(((t,r)=>{t(e)}))}static reject(e){return new ee(((t,r)=>{r(e)}))}static waitFor(e){return new ee(((t,r)=>{let s=0,l=0,c=!1;e.forEach((f=>{++s,f.next((()=>{++l,c&&l===s&&t()}),(d=>r(d)))})),c=!0,l===s&&t()}))}static or(e){let t=ee.resolve(!1);for(const r of e)t=t.next((s=>s?ee.resolve(s):r()));return t}static forEach(e,t){const r=[];return e.forEach(((s,l)=>{r.push(t.call(this,s,l))})),this.waitFor(r)}static mapArray(e,t){return new ee(((r,s)=>{const l=e.length,c=new Array(l);let f=0;for(let d=0;d<l;d++){const m=d;t(e[m]).next((g=>{c[m]=g,++f,f===l&&r(c)}),(g=>s(g)))}}))}static doWhile(e,t){return new ee(((r,s)=>{const l=()=>{e()===!0?t().next((()=>{l()}),s):r()};l()}))}}function DP(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function yl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}rf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const py=-1;function sf(n){return n==null}function Ih(n){return n===0&&1/n==-1/0}function VP(n){return typeof n=="number"&&Number.isInteger(n)&&!Ih(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_="";function LP(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=$x(e)),e=OP(n.get(t),e);return $x(e)}function OP(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const l=n.charAt(s);switch(l){case"\0":t+="";break;case M_:t+="";break;default:t+=l}}return t}function $x(n){return n+M_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hx(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Fs(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function D_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,t){this.comparator=e,this.root=t||Qt.EMPTY}insert(e,t){return new mt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qt.BLACK,null,null))}remove(e){return new mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hd(this.root,e,this.comparator,!0)}}class Hd{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&s&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qt{constructor(e,t,r,s,l){this.key=e,this.value=t,this.color=r??Qt.RED,this.left=s??Qt.EMPTY,this.right=l??Qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,l){return new Qt(e??this.key,t??this.value,r??this.color,s??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const l=r(e,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(e,t,r),null):l===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Qt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}Qt.EMPTY=null,Qt.RED=!0,Qt.BLACK=!1;Qt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,t,r,s,l){return this}insert(e,t,r){return new Qt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.comparator=e,this.data=new mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Kx(this.data.getIterator())}getIteratorFrom(e){return new Kx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Ot)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=r.getNext().key;if(this.comparator(s,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ot(this.comparator);return t.data=e,t}}class Kx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.fields=e,e.sort(Yt.comparator)}static empty(){return new Vn([])}unionWith(e){let t=new Ot(Yt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Vn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Za(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new V_("Invalid base64 string: "+l):l}})(e);return new Xt(t)}static fromUint8Array(e){const t=(function(s){let l="";for(let c=0;c<s.length;++c)l+=String.fromCharCode(s[c]);return l})(e);return new Xt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xt.EMPTY_BYTE_STRING=new Xt("");const BP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rs(n){if(Ye(!!n,39018),typeof n=="string"){let e=0;const t=BP.exec(n);if(Ye(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:bt(n.seconds),nanos:bt(n.nanos)}}function bt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ps(n){return typeof n=="string"?Xt.fromBase64String(n):Xt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_="server_timestamp",O_="__type__",B_="__previous_value__",z_="__local_write_time__";function gy(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[O_])==null?void 0:r.stringValue)===L_}function of(n){const e=n.mapValue.fields[B_];return gy(e)?of(e):e}function Gc(n){const e=Rs(n.mapValue.fields[z_].timestampValue);return new st(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(e,t,r,s,l,c,f,d,m,g,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=d,this.useFetchStreams=m,this.isUsingEmulator=g,this.apiKey=y}}const Ch="(default)";class Qc{constructor(e,t){this.projectId=e,this.database=t||Ch}static empty(){return new Qc("","")}get isDefaultDatabase(){return this.database===Ch}isEqual(e){return e instanceof Qc&&e.projectId===this.projectId&&e.database===this.database}}function FP(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new he(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qc(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_="__type__",UP="__max__",Kd={mapValue:{}},U_="__vector__",Ah="value";function Ns(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?gy(n)?4:$P(n)?9007199254740991:WP(n)?10:11:Ae(28295,{value:n})}function Jr(n,e){if(n===e)return!0;const t=Ns(n);if(t!==Ns(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Gc(n).isEqual(Gc(e));case 3:return(function(s,l){if(typeof s.timestampValue=="string"&&typeof l.timestampValue=="string"&&s.timestampValue.length===l.timestampValue.length)return s.timestampValue===l.timestampValue;const c=Rs(s.timestampValue),f=Rs(l.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,l){return Ps(s.bytesValue).isEqual(Ps(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,l){return bt(s.geoPointValue.latitude)===bt(l.geoPointValue.latitude)&&bt(s.geoPointValue.longitude)===bt(l.geoPointValue.longitude)})(n,e);case 2:return(function(s,l){if("integerValue"in s&&"integerValue"in l)return bt(s.integerValue)===bt(l.integerValue);if("doubleValue"in s&&"doubleValue"in l){const c=bt(s.doubleValue),f=bt(l.doubleValue);return c===f?Ih(c)===Ih(f):isNaN(c)&&isNaN(f)}return!1})(n,e);case 9:return Za(n.arrayValue.values||[],e.arrayValue.values||[],Jr);case 10:case 11:return(function(s,l){const c=s.mapValue.fields||{},f=l.mapValue.fields||{};if(Hx(c)!==Hx(f))return!1;for(const d in c)if(c.hasOwnProperty(d)&&(f[d]===void 0||!Jr(c[d],f[d])))return!1;return!0})(n,e);default:return Ae(52216,{left:n})}}function Yc(n,e){return(n.values||[]).find((t=>Jr(t,e)))!==void 0}function el(n,e){if(n===e)return 0;const t=Ns(n),r=Ns(e);if(t!==r)return Fe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Fe(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const f=bt(l.integerValue||l.doubleValue),d=bt(c.integerValue||c.doubleValue);return f<d?-1:f>d?1:f===d?0:isNaN(f)?isNaN(d)?0:-1:1})(n,e);case 3:return qx(n.timestampValue,e.timestampValue);case 4:return qx(Gc(n),Gc(e));case 5:return Zp(n.stringValue,e.stringValue);case 6:return(function(l,c){const f=Ps(l),d=Ps(c);return f.compareTo(d)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const f=l.split("/"),d=c.split("/");for(let m=0;m<f.length&&m<d.length;m++){const g=Fe(f[m],d[m]);if(g!==0)return g}return Fe(f.length,d.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const f=Fe(bt(l.latitude),bt(c.latitude));return f!==0?f:Fe(bt(l.longitude),bt(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Gx(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var x,S,_,I;const f=l.fields||{},d=c.fields||{},m=(x=f[Ah])==null?void 0:x.arrayValue,g=(S=d[Ah])==null?void 0:S.arrayValue,y=Fe(((_=m==null?void 0:m.values)==null?void 0:_.length)||0,((I=g==null?void 0:g.values)==null?void 0:I.length)||0);return y!==0?y:Gx(m,g)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===Kd.mapValue&&c===Kd.mapValue)return 0;if(l===Kd.mapValue)return 1;if(c===Kd.mapValue)return-1;const f=l.fields||{},d=Object.keys(f),m=c.fields||{},g=Object.keys(m);d.sort(),g.sort();for(let y=0;y<d.length&&y<g.length;++y){const x=Zp(d[y],g[y]);if(x!==0)return x;const S=el(f[d[y]],m[g[y]]);if(S!==0)return S}return Fe(d.length,g.length)})(n.mapValue,e.mapValue);default:throw Ae(23264,{he:t})}}function qx(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Fe(n,e);const t=Rs(n),r=Rs(e),s=Fe(t.seconds,r.seconds);return s!==0?s:Fe(t.nanos,r.nanos)}function Gx(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const l=el(t[s],r[s]);if(l)return l}return Fe(t.length,r.length)}function tl(n){return eg(n)}function eg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Rs(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Ps(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return _e.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",s=!0;for(const l of t.values||[])s?s=!1:r+=",",r+=eg(l);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let s="{",l=!0;for(const c of r)l?l=!1:s+=",",s+=`${c}:${eg(t.fields[c])}`;return s+"}"})(n.mapValue):Ae(61005,{value:n})}function ch(n){switch(Ns(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=of(n);return e?16+ch(e):16;case 5:return 2*n.stringValue.length;case 6:return Ps(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,l)=>s+ch(l)),0)})(n.arrayValue);case 10:case 11:return(function(r){let s=0;return Fs(r.fields,((l,c)=>{s+=l.length+ch(c)})),s})(n.mapValue);default:throw Ae(13486,{value:n})}}function Qx(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function tg(n){return!!n&&"integerValue"in n}function yy(n){return!!n&&"arrayValue"in n}function Yx(n){return!!n&&"nullValue"in n}function Xx(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function uh(n){return!!n&&"mapValue"in n}function WP(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[F_])==null?void 0:r.stringValue)===U_}function Vc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Fs(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Vc(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Vc(n.arrayValue.values[t]);return e}return{...n}}function $P(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===UP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.value=e}static empty(){return new _n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!uh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vc(t)}setAll(e){let t=Yt.emptyPath(),r={},s=[];e.forEach(((c,f)=>{if(!t.isImmediateParentOf(f)){const d=this.getFieldsMap(t);this.applyChanges(d,r,s),r={},s=[],t=f.popLast()}c?r[f.lastSegment()]=Vc(c):s.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,r,s)}delete(e){const t=this.field(e.popLast());uh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Jr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];uh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Fs(t,((s,l)=>e[s]=l));for(const s of r)delete e[s]}clone(){return new _n(Vc(this.value))}}function W_(n){const e=[];return Fs(n.fields,((t,r)=>{const s=new Yt([t]);if(uh(r)){const l=W_(r.mapValue).fields;if(l.length===0)e.push(s);else for(const c of l)e.push(s.child(c))}else e.push(s)})),new Vn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e,t,r,s,l,c,f){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=l,this.data=c,this.documentState=f}static newInvalidDocument(e){return new an(e,0,Ne.min(),Ne.min(),Ne.min(),_n.empty(),0)}static newFoundDocument(e,t,r,s){return new an(e,1,t,Ne.min(),r,s,0)}static newNoDocument(e,t){return new an(e,2,t,Ne.min(),Ne.min(),_n.empty(),0)}static newUnknownDocument(e,t){return new an(e,3,t,Ne.min(),Ne.min(),_n.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof an&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new an(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e,t){this.position=e,this.inclusive=t}}function Jx(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const l=e[s],c=n.position[s];if(l.field.isKeyField()?r=_e.comparator(_e.fromName(c.referenceValue),t.key):r=el(c,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function Zx(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Jr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e,t="asc"){this.field=e,this.dir=t}}function HP(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{}class jt extends $_{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new qP(e,t,r):t==="array-contains"?new YP(e,r):t==="in"?new XP(e,r):t==="not-in"?new JP(e,r):t==="array-contains-any"?new ZP(e,r):new jt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new GP(e,r):new QP(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(el(t,this.value)):t!==null&&Ns(this.value)===Ns(t)&&this.matchesComparison(el(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Sr extends $_{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Sr(e,t)}matches(e){return H_(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function H_(n){return n.op==="and"}function K_(n){return KP(n)&&H_(n)}function KP(n){for(const e of n.filters)if(e instanceof Sr)return!1;return!0}function ng(n){if(n instanceof jt)return n.field.canonicalString()+n.op.toString()+tl(n.value);if(K_(n))return n.filters.map((e=>ng(e))).join(",");{const e=n.filters.map((t=>ng(t))).join(",");return`${n.op}(${e})`}}function q_(n,e){return n instanceof jt?(function(r,s){return s instanceof jt&&r.op===s.op&&r.field.isEqual(s.field)&&Jr(r.value,s.value)})(n,e):n instanceof Sr?(function(r,s){return s instanceof Sr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((l,c,f)=>l&&q_(c,s.filters[f])),!0):!1})(n,e):void Ae(19439)}function G_(n){return n instanceof jt?(function(t){return`${t.field.canonicalString()} ${t.op} ${tl(t.value)}`})(n):n instanceof Sr?(function(t){return t.op.toString()+" {"+t.getFilters().map(G_).join(" ,")+"}"})(n):"Filter"}class qP extends jt{constructor(e,t,r){super(e,t,r),this.key=_e.fromName(r.referenceValue)}matches(e){const t=_e.comparator(e.key,this.key);return this.matchesComparison(t)}}class GP extends jt{constructor(e,t){super(e,"in",t),this.keys=Q_("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class QP extends jt{constructor(e,t){super(e,"not-in",t),this.keys=Q_("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Q_(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((r=>_e.fromName(r.referenceValue)))}class YP extends jt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return yy(t)&&Yc(t.arrayValue,this.value)}}class XP extends jt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Yc(this.value.arrayValue,t)}}class JP extends jt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Yc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Yc(this.value.arrayValue,t)}}class ZP extends jt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!yy(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Yc(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e,t=null,r=[],s=[],l=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=l,this.startAt=c,this.endAt=f,this.Te=null}}function ew(n,e=null,t=[],r=[],s=null,l=null,c=null){return new eN(n,e,t,r,s,l,c)}function vy(n){const e=De(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>ng(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),sf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>tl(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>tl(r))).join(",")),e.Te=t}return e.Te}function xy(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!HP(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!q_(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Zx(n.startAt,e.startAt)&&Zx(n.endAt,e.endAt)}function rg(n){return _e.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e,t=null,r=[],s=[],l=null,c="F",f=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=l,this.limitType=c,this.startAt=f,this.endAt=d,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function tN(n,e,t,r,s,l,c,f){return new vl(n,e,t,r,s,l,c,f)}function wy(n){return new vl(n)}function tw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function nN(n){return _e.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Y_(n){return n.collectionGroup!==null}function Lc(n){const e=De(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new Ot(Yt.comparator);return c.filters.forEach((d=>{d.getFlattenedFilters().forEach((m=>{m.isInequality()&&(f=f.add(m.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Xc(l,r))})),t.has(Yt.keyField().canonicalString())||e.Ie.push(new Xc(Yt.keyField(),r))}return e.Ie}function Gr(n){const e=De(n);return e.Ee||(e.Ee=rN(e,Lc(n))),e.Ee}function rN(n,e){if(n.limitType==="F")return ew(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const l=s.dir==="desc"?"asc":"desc";return new Xc(s.field,l)}));const t=n.endAt?new jh(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new jh(n.startAt.position,n.startAt.inclusive):null;return ew(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function ig(n,e){const t=n.filters.concat([e]);return new vl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function iN(n,e){const t=n.explicitOrderBy.concat([e]);return new vl(n.path,n.collectionGroup,t,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}function Rh(n,e,t){return new vl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function af(n,e){return xy(Gr(n),Gr(e))&&n.limitType===e.limitType}function X_(n){return`${vy(Gr(n))}|lt:${n.limitType}`}function Ma(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((s=>G_(s))).join(", ")}]`),sf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((s=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(s))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((s=>tl(s))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((s=>tl(s))).join(",")),`Target(${r})`})(Gr(n))}; limitType=${n.limitType})`}function lf(n,e){return e.isFoundDocument()&&(function(r,s){const l=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):_e.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(n,e)&&(function(r,s){for(const l of Lc(r))if(!l.field.isKeyField()&&s.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(r,s){for(const l of r.filters)if(!l.matches(s))return!1;return!0})(n,e)&&(function(r,s){return!(r.startAt&&!(function(c,f,d){const m=Jx(c,f,d);return c.inclusive?m<=0:m<0})(r.startAt,Lc(r),s)||r.endAt&&!(function(c,f,d){const m=Jx(c,f,d);return c.inclusive?m>=0:m>0})(r.endAt,Lc(r),s))})(n,e)}function sN(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function J_(n){return(e,t)=>{let r=!1;for(const s of Lc(n)){const l=oN(s,e,t);if(l!==0)return l;r=r||s.field.isKeyField()}return 0}}function oN(n,e,t){const r=n.field.isKeyField()?_e.comparator(e.key,t.key):(function(l,c,f){const d=c.data.field(l),m=f.data.field(l);return d!==null&&m!==null?el(d,m):Ae(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ae(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,l]of r)if(this.equalsFn(s,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return void(s[l]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Fs(this.inner,((t,r)=>{for(const[s,l]of r)e(s,l)}))}isEmpty(){return D_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN=new mt(_e.comparator);function Ni(){return aN}const Z_=new mt(_e.comparator);function Ac(...n){let e=Z_;for(const t of n)e=e.insert(t.key,t);return e}function eS(n){let e=Z_;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function So(){return Oc()}function tS(){return Oc()}function Oc(){return new Fo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const lN=new mt(_e.comparator),cN=new Ot(_e.comparator);function Ue(...n){let e=cN;for(const t of n)e=e.add(t);return e}const uN=new Ot(Fe);function dN(){return uN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ky(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ih(e)?"-0":e}}function nS(n){return{integerValue:""+n}}function rS(n,e){return VP(e)?nS(e):ky(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(){this._=void 0}}function hN(n,e,t){return n instanceof Jc?(function(s,l){const c={fields:{[O_]:{stringValue:L_},[z_]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return l&&gy(l)&&(l=of(l)),l&&(c.fields[B_]=l),{mapValue:c}})(t,e):n instanceof nl?sS(n,e):n instanceof Zc?oS(n,e):(function(s,l){const c=iS(s,l),f=nw(c)+nw(s.Ae);return tg(c)&&tg(s.Ae)?nS(f):ky(s.serializer,f)})(n,e)}function fN(n,e,t){return n instanceof nl?sS(n,e):n instanceof Zc?oS(n,e):t}function iS(n,e){return n instanceof eu?(function(r){return tg(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class Jc extends cf{}class nl extends cf{constructor(e){super(),this.elements=e}}function sS(n,e){const t=aS(e);for(const r of n.elements)t.some((s=>Jr(s,r)))||t.push(r);return{arrayValue:{values:t}}}class Zc extends cf{constructor(e){super(),this.elements=e}}function oS(n,e){let t=aS(e);for(const r of n.elements)t=t.filter((s=>!Jr(s,r)));return{arrayValue:{values:t}}}class eu extends cf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function nw(n){return bt(n.integerValue||n.doubleValue)}function aS(n){return yy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(e,t){this.field=e,this.transform=t}}function mN(n,e){return n.field.isEqual(e.field)&&(function(r,s){return r instanceof nl&&s instanceof nl||r instanceof Zc&&s instanceof Zc?Za(r.elements,s.elements,Jr):r instanceof eu&&s instanceof eu?Jr(r.Ae,s.Ae):r instanceof Jc&&s instanceof Jc})(n.transform,e.transform)}class pN{constructor(e,t){this.version=e,this.transformResults=t}}class Jn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Jn}static exists(e){return new Jn(void 0,e)}static updateTime(e){return new Jn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function dh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class uf{}function lS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new _y(n.key,Jn.none()):new pu(n.key,n.data,Jn.none());{const t=n.data,r=_n.empty();let s=new Ot(Yt.comparator);for(let l of e.fields)if(!s.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?r.delete(l):r.set(l,c),s=s.add(l)}return new Us(n.key,r,new Vn(s.toArray()),Jn.none())}}function gN(n,e,t){n instanceof pu?(function(s,l,c){const f=s.value.clone(),d=iw(s.fieldTransforms,l,c.transformResults);f.setAll(d),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(n,e,t):n instanceof Us?(function(s,l,c){if(!dh(s.precondition,l))return void l.convertToUnknownDocument(c.version);const f=iw(s.fieldTransforms,l,c.transformResults),d=l.data;d.setAll(cS(s)),d.setAll(f),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):(function(s,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Bc(n,e,t,r){return n instanceof pu?(function(l,c,f,d){if(!dh(l.precondition,c))return f;const m=l.value.clone(),g=sw(l.fieldTransforms,d,c);return m.setAll(g),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null})(n,e,t,r):n instanceof Us?(function(l,c,f,d){if(!dh(l.precondition,c))return f;const m=sw(l.fieldTransforms,d,c),g=c.data;return g.setAll(cS(l)),g.setAll(m),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((y=>y.field)))})(n,e,t,r):(function(l,c,f){return dh(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f})(n,e,t)}function yN(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),l=iS(r.transform,s||null);l!=null&&(t===null&&(t=_n.empty()),t.set(r.field,l))}return t||null}function rw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Za(r,s,((l,c)=>mN(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class pu extends uf{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Us extends uf{constructor(e,t,r,s,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function cS(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function iw(n,e,t){const r=new Map;Ye(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let s=0;s<t.length;s++){const l=n[s],c=l.transform,f=e.data.field(l.field);r.set(l.field,fN(c,f,t[s]))}return r}function sw(n,e,t){const r=new Map;for(const s of n){const l=s.transform,c=t.data.field(s.field);r.set(s.field,hN(l,c,e))}return r}class _y extends uf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vN extends uf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const l=this.mutations[s];l.key.isEqual(e.key)&&gN(l,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Bc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Bc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=tS();return this.mutations.forEach((s=>{const l=e.get(s.key),c=l.overlayedDocument;let f=this.applyToLocalView(c,l.mutatedFields);f=t.has(s.key)?null:f;const d=lS(c,f);d!==null&&r.set(s.key,d),c.isValidDocument()||c.convertToNoDocument(Ne.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ue())}isEqual(e){return this.batchId===e.batchId&&Za(this.mutations,e.mutations,((t,r)=>rw(t,r)))&&Za(this.baseMutations,e.baseMutations,((t,r)=>rw(t,r)))}}class Sy{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Ye(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return lN})();const l=e.mutations;for(let c=0;c<l.length;c++)s=s.insert(l[c].key,r[c].version);return new Sy(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ct,He;function bN(n){switch(n){case Z.OK:return Ae(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return Ae(15467,{code:n})}}function uS(n){if(n===void 0)return Pi("GRPC error has no .code"),Z.UNKNOWN;switch(n){case Ct.OK:return Z.OK;case Ct.CANCELLED:return Z.CANCELLED;case Ct.UNKNOWN:return Z.UNKNOWN;case Ct.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case Ct.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case Ct.INTERNAL:return Z.INTERNAL;case Ct.UNAVAILABLE:return Z.UNAVAILABLE;case Ct.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case Ct.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case Ct.NOT_FOUND:return Z.NOT_FOUND;case Ct.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case Ct.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case Ct.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case Ct.ABORTED:return Z.ABORTED;case Ct.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case Ct.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case Ct.DATA_LOSS:return Z.DATA_LOSS;default:return Ae(39323,{code:n})}}(He=Ct||(Ct={}))[He.OK=0]="OK",He[He.CANCELLED=1]="CANCELLED",He[He.UNKNOWN=2]="UNKNOWN",He[He.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",He[He.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",He[He.NOT_FOUND=5]="NOT_FOUND",He[He.ALREADY_EXISTS=6]="ALREADY_EXISTS",He[He.PERMISSION_DENIED=7]="PERMISSION_DENIED",He[He.UNAUTHENTICATED=16]="UNAUTHENTICATED",He[He.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",He[He.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",He[He.ABORTED=10]="ABORTED",He[He.OUT_OF_RANGE=11]="OUT_OF_RANGE",He[He.UNIMPLEMENTED=12]="UNIMPLEMENTED",He[He.INTERNAL=13]="INTERNAL",He[He.UNAVAILABLE=14]="UNAVAILABLE",He[He.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _N(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN=new Is([4294967295,4294967295],0);function ow(n){const e=_N().encode(n),t=new S_;return t.update(e),new Uint8Array(t.digest())}function aw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Is([t,r],0),new Is([s,l],0)]}class Ey{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new jc(`Invalid padding: ${t}`);if(r<0)throw new jc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new jc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new jc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Is.fromNumber(this.ge)}ye(e,t,r){let s=e.add(t.multiply(Is.fromNumber(r)));return s.compare(SN)===1&&(s=new Is([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=ow(e),[r,s]=aw(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,s,l);if(!this.we(c))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Ey(l,s,t);return r.forEach((f=>c.insert(f))),c}insert(e){if(this.ge===0)return;const t=ow(e),[r,s]=aw(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,s,l);this.be(c)}}be(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class jc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,t,r,s,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,gu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new df(Ne.min(),s,new mt(Fe),Ni(),Ue())}}class gu{constructor(e,t,r,s,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new gu(r,t,Ue(),Ue(),Ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e,t,r,s){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=s}}class dS{constructor(e,t){this.targetId=e,this.Ce=t}}class hS{constructor(e,t,r=Xt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class lw{constructor(){this.ve=0,this.Fe=cw(),this.Me=Xt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ue(),t=Ue(),r=Ue();return this.Fe.forEach(((s,l)=>{switch(l){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Ae(38017,{changeType:l})}})),new gu(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=cw()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Ye(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class EN{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ni(),this.He=qd(),this.Je=qd(),this.Ze=new mt(Fe)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Ae(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,r=e.Ce.count,s=this.ot(t);if(s){const l=s.target;if(rg(l))if(r===0){const c=new _e(l.path);this.et(t,c,an.newNoDocument(c,Ne.min()))}else Ye(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const f=this.ut(e),d=f?this.ct(f,e,c):1;if(d!==0){this.it(t);const m=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,m)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:l=0}=t;let c,f;try{c=Ps(r).toUint8Array()}catch(d){if(d instanceof V_)return Ja("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{f=new Ey(c,s,l)}catch(d){return Ja(d instanceof jc?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return f.ge===0?null:f}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let s=0;return r.forEach((l=>{const c=this.Ge.ht(),f=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const f=this.ot(c);if(f){if(l.current&&rg(f.target)){const d=new _e(f.target.path);this.It(d).has(c)||this.Et(c,d)||this.et(c,d,an.newNoDocument(d,e))}l.Be&&(t.set(c,l.ke()),l.Ke())}}));let r=Ue();this.Je.forEach(((l,c)=>{let f=!0;c.forEachWhile((d=>{const m=this.ot(d);return!m||m.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(r=r.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const s=new df(e,t,this.Ze,this.je,r);return this.je=Ni(),this.He=qd(),this.Je=qd(),this.Ze=new mt(Fe),s}Ye(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.qe(t,1):s.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new lw,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Ot(Fe),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Ot(Fe),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||pe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new lw),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function qd(){return new mt(_e.comparator)}function cw(){return new mt(_e.comparator)}const TN={asc:"ASCENDING",desc:"DESCENDING"},IN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},CN={and:"AND",or:"OR"};class AN{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function sg(n,e){return n.useProto3Json||sf(e)?e:{value:e}}function Ph(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function jN(n,e){return Ph(n,e.toTimestamp())}function Qr(n){return Ye(!!n,49232),Ne.fromTimestamp((function(t){const r=Rs(t);return new st(r.seconds,r.nanos)})(n))}function Ty(n,e){return og(n,e).canonicalString()}function og(n,e){const t=(function(s){return new tt(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function mS(n){const e=tt.fromString(n);return Ye(xS(e),10190,{key:e.toString()}),e}function ag(n,e){return Ty(n.databaseId,e.path)}function mp(n,e){const t=mS(e);if(t.get(1)!==n.databaseId.projectId)throw new he(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new he(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new _e(gS(t))}function pS(n,e){return Ty(n.databaseId,e)}function RN(n){const e=mS(n);return e.length===4?tt.emptyPath():gS(e)}function lg(n){return new tt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function gS(n){return Ye(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function uw(n,e,t){return{name:ag(n,e),fields:t.value.mapValue.fields}}function PN(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Ae(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],l=(function(m,g){return m.useProto3Json?(Ye(g===void 0||typeof g=="string",58123),Xt.fromBase64String(g||"")):(Ye(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),Xt.fromUint8Array(g||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&(function(m){const g=m.code===void 0?Z.UNKNOWN:uS(m.code);return new he(g,m.message||"")})(c);t=new hS(r,s,l,f||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=mp(n,r.document.name),l=Qr(r.document.updateTime),c=r.document.createTime?Qr(r.document.createTime):Ne.min(),f=new _n({mapValue:{fields:r.document.fields}}),d=an.newFoundDocument(s,l,c,f),m=r.targetIds||[],g=r.removedTargetIds||[];t=new hh(m,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=mp(n,r.document),l=r.readTime?Qr(r.readTime):Ne.min(),c=an.newNoDocument(s,l),f=r.removedTargetIds||[];t=new hh([],f,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=mp(n,r.document),l=r.removedTargetIds||[];t=new hh([],l,s,null)}else{if(!("filter"in e))return Ae(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:l}=r,c=new kN(s,l),f=r.targetId;t=new dS(f,c)}}return t}function NN(n,e){let t;if(e instanceof pu)t={update:uw(n,e.key,e.value)};else if(e instanceof _y)t={delete:ag(n,e.key)};else if(e instanceof Us)t={update:uw(n,e.key,e.data),updateMask:UN(e.fieldMask)};else{if(!(e instanceof vN))return Ae(16599,{dt:e.type});t={verify:ag(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(l,c){const f=c.transform;if(f instanceof Jc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof nl)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Zc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof eu)return{fieldPath:c.field.canonicalString(),increment:f.Ae};throw Ae(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(s,l){return l.updateTime!==void 0?{updateTime:jN(s,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ae(27497)})(n,e.precondition)),t}function MN(n,e){return n&&n.length>0?(Ye(e!==void 0,14353),n.map((t=>(function(s,l){let c=s.updateTime?Qr(s.updateTime):Qr(l);return c.isEqual(Ne.min())&&(c=Qr(l)),new pN(c,s.transformResults||[])})(t,e)))):[]}function DN(n,e){return{documents:[pS(n,e.path)]}}function VN(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=pS(n,s);const l=(function(m){if(m.length!==0)return vS(Sr.create(m,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(m){if(m.length!==0)return m.map((g=>(function(x){return{field:Da(x.field),direction:BN(x.dir)}})(g)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const f=sg(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:t,parent:s}}function LN(n){let e=RN(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Ye(r===1,65062);const g=t.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let l=[];t.where&&(l=(function(y){const x=yS(y);return x instanceof Sr&&K_(x)?x.getFilters():[x]})(t.where));let c=[];t.orderBy&&(c=(function(y){return y.map((x=>(function(_){return new Xc(Va(_.field),(function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(_.direction))})(x)))})(t.orderBy));let f=null;t.limit&&(f=(function(y){let x;return x=typeof y=="object"?y.value:y,sf(x)?null:x})(t.limit));let d=null;t.startAt&&(d=(function(y){const x=!!y.before,S=y.values||[];return new jh(S,x)})(t.startAt));let m=null;return t.endAt&&(m=(function(y){const x=!y.before,S=y.values||[];return new jh(S,x)})(t.endAt)),tN(e,s,c,l,f,"F",d,m)}function ON(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function yS(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Va(t.unaryFilter.field);return jt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Va(t.unaryFilter.field);return jt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Va(t.unaryFilter.field);return jt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Va(t.unaryFilter.field);return jt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}})(n):n.fieldFilter!==void 0?(function(t){return jt.create(Va(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Sr.create(t.compositeFilter.filters.map((r=>yS(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}})(t.compositeFilter.op))})(n):Ae(30097,{filter:n})}function BN(n){return TN[n]}function zN(n){return IN[n]}function FN(n){return CN[n]}function Da(n){return{fieldPath:n.canonicalString()}}function Va(n){return Yt.fromServerFormat(n.fieldPath)}function vS(n){return n instanceof jt?(function(t){if(t.op==="=="){if(Xx(t.value))return{unaryFilter:{field:Da(t.field),op:"IS_NAN"}};if(Yx(t.value))return{unaryFilter:{field:Da(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Xx(t.value))return{unaryFilter:{field:Da(t.field),op:"IS_NOT_NAN"}};if(Yx(t.value))return{unaryFilter:{field:Da(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Da(t.field),op:zN(t.op),value:t.value}}})(n):n instanceof Sr?(function(t){const r=t.getFilters().map((s=>vS(s)));return r.length===1?r[0]:{compositeFilter:{op:FN(t.op),filters:r}}})(n):Ae(54877,{filter:n})}function UN(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function xS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function wS(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e,t,r,s,l=Ne.min(),c=Ne.min(),f=Xt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=d}withSequenceNumber(e){return new bs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new bs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new bs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new bs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e){this.yt=e}}function $N(n){const e=LN({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Rh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(){this.Sn=new KN}addToCollectionParentIndex(e,t){return this.Sn.add(t),ee.resolve()}getCollectionParents(e,t){return ee.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return ee.resolve()}deleteFieldIndex(e,t){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,t){return ee.resolve()}getDocumentsMatchingTarget(e,t){return ee.resolve(null)}getIndexType(e,t){return ee.resolve(0)}getFieldIndexes(e,t){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,t){return ee.resolve(js.min())}getMinOffsetFromCollectionGroup(e,t){return ee.resolve(js.min())}updateCollectionGroup(e,t,r){return ee.resolve()}updateIndexEntries(e,t){return ee.resolve()}}class KN{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Ot(tt.comparator),l=!s.has(r);return this.index[t]=s.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ot(tt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},kS=41943040;class bn{static withCacheSize(e){return new bn(e,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bn.DEFAULT_COLLECTION_PERCENTILE=10,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bn.DEFAULT=new bn(kS,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bn.DISABLED=new bn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new rl(0)}static ar(){return new rl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw="LruGarbageCollector",qN=1048576;function fw([n,e],[t,r]){const s=Fe(n,t);return s===0?Fe(e,r):s}class GN{constructor(e){this.Pr=e,this.buffer=new Ot(fw),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();fw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class QN{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){pe(hw,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){yl(t)?pe(hw,"Ignoring IndexedDB error during garbage collection: ",t):await gl(t)}await this.Ar(3e5)}))}}class YN{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return ee.resolve(rf.ce);const r=new GN(t);return this.Vr.forEachTarget(e,(s=>r.Er(s.sequenceNumber))).next((()=>this.Vr.mr(e,(s=>r.Er(s))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(pe("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(dw)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),dw):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,s,l,c,f,d,m;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((y=>(y>this.params.maximumSequenceNumbersToCollect?(pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),s=this.params.maximumSequenceNumbersToCollect):s=y,c=Date.now(),this.nthSequenceNumber(e,s)))).next((y=>(r=y,f=Date.now(),this.removeTargets(e,r,t)))).next((y=>(l=y,d=Date.now(),this.removeOrphanedDocuments(e,r)))).next((y=>(m=Date.now(),Na()<=ze.DEBUG&&pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-g}ms
	Determined least recently used ${s} in `+(f-c)+`ms
	Removed ${l} targets in `+(d-f)+`ms
	Removed ${y} documents in `+(m-d)+`ms
Total Duration: ${m-g}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:l,documentsRemoved:y}))))}}function XN(n,e){return new YN(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(){this.changes=new Fo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,an.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ee.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(r!==null&&Bc(r.mutation,s,Vn.empty(),st.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Ue()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Ue()){const s=So();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,r).next((l=>{let c=Ac();return l.forEach(((f,d)=>{c=c.insert(f,d.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=So();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Ue())))}populateOverlays(e,t,r){const s=[];return r.forEach((l=>{t.has(l)||s.push(l)})),this.documentOverlayCache.getOverlays(e,s).next((l=>{l.forEach(((c,f)=>{t.set(c,f)}))}))}computeViews(e,t,r,s){let l=Ni();const c=Oc(),f=(function(){return Oc()})();return t.forEach(((d,m)=>{const g=r.get(m.key);s.has(m.key)&&(g===void 0||g.mutation instanceof Us)?l=l.insert(m.key,m):g!==void 0?(c.set(m.key,g.mutation.getFieldMask()),Bc(g.mutation,m,g.mutation.getFieldMask(),st.now())):c.set(m.key,Vn.empty())})),this.recalculateAndSaveOverlays(e,l).next((d=>(d.forEach(((m,g)=>c.set(m,g))),t.forEach(((m,g)=>f.set(m,new ZN(g,c.get(m)??null)))),f)))}recalculateAndSaveOverlays(e,t){const r=Oc();let s=new mt(((c,f)=>c-f)),l=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const f of c)f.keys().forEach((d=>{const m=t.get(d);if(m===null)return;let g=r.get(d)||Vn.empty();g=f.applyToLocalView(m,g),r.set(d,g);const y=(s.get(f.batchId)||Ue()).add(d);s=s.insert(f.batchId,y)}))})).next((()=>{const c=[],f=s.getReverseIterator();for(;f.hasNext();){const d=f.getNext(),m=d.key,g=d.value,y=tS();g.forEach((x=>{if(!l.has(x)){const S=lS(t.get(x),r.get(x));S!==null&&y.set(x,S),l=l.add(x)}})),c.push(this.documentOverlayCache.saveOverlays(e,m,y))}return ee.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,s){return nN(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Y_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next((l=>{const c=s-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-l.size):ee.resolve(So());let f=qc,d=l;return c.next((m=>ee.forEach(m,((g,y)=>(f<y.largestBatchId&&(f=y.largestBatchId),l.get(g)?ee.resolve():this.remoteDocumentCache.getEntry(e,g).next((x=>{d=d.insert(g,x)}))))).next((()=>this.populateOverlays(e,m,l))).next((()=>this.computeViews(e,d,m,Ue()))).next((g=>({batchId:f,changes:eS(g)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new _e(t)).next((r=>{let s=Ac();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const l=t.collectionGroup;let c=Ac();return this.indexManager.getCollectionParents(e,l).next((f=>ee.forEach(f,(d=>{const m=(function(y,x){return new vl(x,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(t,d.child(l));return this.getDocumentsMatchingCollectionQuery(e,m,r,s).next((g=>{g.forEach(((y,x)=>{c=c.insert(y,x)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,s){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,s)))).next((c=>{l.forEach(((d,m)=>{const g=m.getKey();c.get(g)===null&&(c=c.insert(g,an.newInvalidDocument(g)))}));let f=Ac();return c.forEach(((d,m)=>{const g=l.get(d);g!==void 0&&Bc(g.mutation,m,Vn.empty(),st.now()),lf(t,m)&&(f=f.insert(d,m))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return ee.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Qr(s.createTime)}})(t)),ee.resolve()}getNamedQuery(e,t){return ee.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(s){return{name:s.name,query:$N(s.bundledQuery),readTime:Qr(s.readTime)}})(t)),ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nM{constructor(){this.overlays=new mt(_e.comparator),this.Lr=new Map}getOverlay(e,t){return ee.resolve(this.overlays.get(t))}getOverlays(e,t){const r=So();return ee.forEach(t,(s=>this.getOverlay(e,s).next((l=>{l!==null&&r.set(s,l)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((s,l)=>{this.bt(e,t,l)})),ee.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Lr.get(r);return s!==void 0&&(s.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(r)),ee.resolve()}getOverlaysForCollection(e,t,r){const s=So(),l=t.length+1,c=new _e(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const d=f.getNext().value,m=d.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===l&&d.largestBatchId>r&&s.set(d.getKey(),d)}return ee.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let l=new mt(((m,g)=>m-g));const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let g=l.get(m.largestBatchId);g===null&&(g=So(),l=l.insert(m.largestBatchId,g)),g.set(m.getKey(),m)}}const f=So(),d=l.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((m,g)=>f.set(m,g))),!(f.size()>=s)););return ee.resolve(f)}bt(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const c=this.Lr.get(s.largestBatchId).delete(r.key);this.Lr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new wN(t,r));let l=this.Lr.get(t);l===void 0&&(l=Ue(),this.Lr.set(t,l)),this.Lr.set(t,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(){this.sessionToken=Xt.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(){this.kr=new Ot(Wt.Kr),this.qr=new Ot(Wt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const r=new Wt(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new Wt(e,t))}Qr(e,t){e.forEach((r=>this.removeReference(r,t)))}Gr(e){const t=new _e(new tt([])),r=new Wt(t,e),s=new Wt(t,e+1),l=[];return this.qr.forEachInRange([r,s],(c=>{this.Wr(c),l.push(c.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new _e(new tt([])),r=new Wt(t,e),s=new Wt(t,e+1);let l=Ue();return this.qr.forEachInRange([r,s],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Wt(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Wt{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return _e.comparator(e.key,t.key)||Fe(e.Hr,t.Hr)}static Ur(e,t){return Fe(e.Hr,t.Hr)||_e.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Ot(Wt.Kr)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new xN(l,t,r,s);this.mutationQueue.push(c);for(const f of s)this.Jr=this.Jr.add(new Wt(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return ee.resolve(c)}lookupMutationBatch(e,t){return ee.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Xr(r),l=s<0?0:s;return ee.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?py:this.Yn-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Wt(t,0),s=new Wt(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([r,s],(c=>{const f=this.Zr(c.Hr);l.push(f)})),ee.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ot(Fe);return t.forEach((s=>{const l=new Wt(s,0),c=new Wt(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,c],(f=>{r=r.add(f.Hr)}))})),ee.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let l=r;_e.isDocumentKey(l)||(l=l.child(""));const c=new Wt(new _e(l),0);let f=new Ot(Fe);return this.Jr.forEachWhile((d=>{const m=d.key.path;return!!r.isPrefixOf(m)&&(m.length===s&&(f=f.add(d.Hr)),!0)}),c),ee.resolve(this.Yr(f))}Yr(e){const t=[];return e.forEach((r=>{const s=this.Zr(r);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){Ye(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return ee.forEach(t.mutations,(s=>{const l=new Wt(s.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,t){const r=new Wt(t,0),s=this.Jr.firstAfterOrEqual(r);return ee.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(e){this.ti=e,this.docs=(function(){return new mt(_e.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),l=s?s.size:0,c=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ee.resolve(r?r.document.mutableCopy():an.newInvalidDocument(t))}getEntries(e,t){let r=Ni();return t.forEach((s=>{const l=this.docs.get(s);r=r.insert(s,l?l.document.mutableCopy():an.newInvalidDocument(s))})),ee.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let l=Ni();const c=t.path,f=new _e(c.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(f);for(;d.hasNext();){const{key:m,value:{document:g}}=d.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||PP(RP(g),r)<=0||(s.has(g.key)||lf(t,g))&&(l=l.insert(g.key,g.mutableCopy()))}return ee.resolve(l)}getAllFromCollectionGroup(e,t,r,s){Ae(9500)}ni(e,t){return ee.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new oM(this)}getSize(e){return ee.resolve(this.size)}}class oM extends JN{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?t.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(r)})),ee.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(e){this.persistence=e,this.ri=new Fo((t=>vy(t)),xy),this.lastRemoteSnapshotVersion=Ne.min(),this.highestTargetId=0,this.ii=0,this.si=new Iy,this.targetCount=0,this.oi=rl._r()}forEachTarget(e,t){return this.ri.forEach(((r,s)=>t(s))),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),ee.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new rl(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,ee.resolve()}updateTargetData(e,t){return this.lr(t),ee.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,t,r){let s=0;const l=[];return this.ri.forEach(((c,f)=>{f.sequenceNumber<=t&&r.get(f.targetId)===null&&(this.ri.delete(c),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),s++)})),ee.waitFor(l).next((()=>s))}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,t){const r=this.ri.get(t)||null;return ee.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),ee.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);const s=this.persistence.referenceDelegate,l=[];return s&&t.forEach((c=>{l.push(s.markPotentiallyOrphaned(e,c))})),ee.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),ee.resolve()}getMatchingKeysForTargetId(e,t){const r=this.si.jr(t);return ee.resolve(r)}containsKey(e,t){return ee.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e,t){this._i={},this.overlays={},this.ai=new rf(0),this.ui=!1,this.ui=!0,this.ci=new rM,this.referenceDelegate=e(this),this.li=new aM(this),this.indexManager=new HN,this.remoteDocumentCache=(function(s){return new sM(s)})((r=>this.referenceDelegate.hi(r))),this.serializer=new WN(t),this.Pi=new tM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new nM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new iM(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){pe("MemoryPersistence","Starting transaction:",e);const s=new lM(this.ai.next());return this.referenceDelegate.Ti(),r(s).next((l=>this.referenceDelegate.Ii(s).next((()=>l)))).toPromise().then((l=>(s.raiseOnCommittedEvent(),l)))}Ei(e,t){return ee.or(Object.values(this._i).map((r=>()=>r.containsKey(e,t))))}}class lM extends MP{constructor(e){super(),this.currentSequenceNumber=e}}class Cy{constructor(e){this.persistence=e,this.Ri=new Iy,this.Ai=null}static Vi(e){return new Cy(e)}get di(){if(this.Ai)return this.Ai;throw Ae(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),ee.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),ee.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),ee.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((s=>this.di.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((l=>this.di.add(l.toString())))})).next((()=>r.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.di,(r=>{const s=_e.fromPath(r);return this.mi(e,s).next((l=>{l||t.removeEntry(s,Ne.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return ee.or([()=>ee.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Nh{constructor(e,t){this.persistence=e,this.fi=new Fo((r=>LP(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=XN(this,t)}static Vi(e,t){return new Nh(e,t)}Ti(){}Ii(e){return ee.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}mr(e,t){return ee.forEach(this.fi,((r,s)=>this.wr(e,r,s).next((l=>l?ee.resolve():t(s)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),l=s.newChangeBuffer();return s.ni(e,(c=>this.wr(e,c,t).next((f=>{f||(r++,l.removeEntry(c,Ne.min()))})))).next((()=>l.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),ee.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),ee.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),ee.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),ee.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ch(e.data.value)),t}wr(e,t,r){return ee.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.fi.get(t);return ee.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=s}static Es(e,t){let r=Ue(),s=Ue();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:s=s.add(l.doc.key)}return new Ay(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return VA()?8:DP(dn())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,s){const l={result:null};return this.gs(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ps(e,t,s,r).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new cM;return this.ys(e,t,c).next((f=>{if(l.result=f,this.As)return this.ws(e,t,c,f.size)}))})).next((()=>l.result))}ws(e,t,r,s){return r.documentReadCount<this.Vs?(Na()<=ze.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",Ma(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ee.resolve()):(Na()<=ze.DEBUG&&pe("QueryEngine","Query:",Ma(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(Na()<=ze.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",Ma(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gr(t))):ee.resolve())}gs(e,t){if(tw(t))return ee.resolve(null);let r=Gr(t);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=Rh(t,null,"F"),r=Gr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const c=Ue(...l);return this.fs.getDocuments(e,c).next((f=>this.indexManager.getMinOffset(e,r).next((d=>{const m=this.bs(t,f);return this.Ss(t,m,c,d.readTime)?this.gs(e,Rh(t,null,"F")):this.Ds(e,m,t,d)}))))})))))}ps(e,t,r,s){return tw(t)||s.isEqual(Ne.min())?ee.resolve(null):this.fs.getDocuments(e,r).next((l=>{const c=this.bs(t,l);return this.Ss(t,c,r,s)?ee.resolve(null):(Na()<=ze.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ma(t)),this.Ds(e,c,t,jP(s,qc)).next((f=>f)))}))}bs(e,t){let r=new Ot(J_(e));return t.forEach(((s,l)=>{lf(e,l)&&(r=r.add(l))})),r}Ss(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(s)>0)}ys(e,t,r){return Na()<=ze.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",Ma(t)),this.fs.getDocumentsMatchingQuery(e,t,js.min(),r)}Ds(e,t,r,s){return this.fs.getDocumentsMatchingQuery(e,r,s).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy="LocalStore",dM=3e8;class hM{constructor(e,t,r,s){this.persistence=e,this.Cs=t,this.serializer=s,this.vs=new mt(Fe),this.Fs=new Fo((l=>vy(l)),xy),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new eM(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function fM(n,e,t,r){return new hM(n,e,t,r)}async function _S(n,e){const t=De(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next((l=>(s=l,t.Os(e),t.mutationQueue.getAllMutationBatches(r)))).next((l=>{const c=[],f=[];let d=Ue();for(const m of s){c.push(m.batchId);for(const g of m.mutations)d=d.add(g.key)}for(const m of l){f.push(m.batchId);for(const g of m.mutations)d=d.add(g.key)}return t.localDocuments.getDocuments(r,d).next((m=>({Ns:m,removedBatchIds:c,addedBatchIds:f})))}))}))}function mM(n,e){const t=De(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(f,d,m,g){const y=m.batch,x=y.keys();let S=ee.resolve();return x.forEach((_=>{S=S.next((()=>g.getEntry(d,_))).next((I=>{const C=m.docVersions.get(_);Ye(C!==null,48541),I.version.compareTo(C)<0&&(y.applyToRemoteDocument(I,m),I.isValidDocument()&&(I.setReadTime(m.commitVersion),g.addEntry(I)))}))})),S.next((()=>f.mutationQueue.removeMutationBatch(d,y)))})(t,r,e,l).next((()=>l.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(f){let d=Ue();for(let m=0;m<f.mutationResults.length;++m)f.mutationResults[m].transformResults.length>0&&(d=d.add(f.batch.mutations[m].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(r,s)))}))}function SS(n){const e=De(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function pM(n,e){const t=De(n),r=e.snapshotVersion;let s=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.xs.newChangeBuffer({trackRemovals:!0});s=t.vs;const f=[];e.targetChanges.forEach(((g,y)=>{const x=s.get(y);if(!x)return;f.push(t.li.removeMatchingKeys(l,g.removedDocuments,y).next((()=>t.li.addMatchingKeys(l,g.addedDocuments,y))));let S=x.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(y)!==null?S=S.withResumeToken(Xt.EMPTY_BYTE_STRING,Ne.min()).withLastLimboFreeSnapshotVersion(Ne.min()):g.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(g.resumeToken,r)),s=s.insert(y,S),(function(I,C,M){return I.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=dM?!0:M.addedDocuments.size+M.modifiedDocuments.size+M.removedDocuments.size>0})(x,S,g)&&f.push(t.li.updateTargetData(l,S))}));let d=Ni(),m=Ue();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,g))})),f.push(gM(l,c,e.documentUpdates).next((g=>{d=g.Bs,m=g.Ls}))),!r.isEqual(Ne.min())){const g=t.li.getLastRemoteSnapshotVersion(l).next((y=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,r)));f.push(g)}return ee.waitFor(f).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,d,m))).next((()=>d))})).then((l=>(t.vs=s,l)))}function gM(n,e,t){let r=Ue(),s=Ue();return t.forEach((l=>r=r.add(l))),e.getEntries(n,r).next((l=>{let c=Ni();return t.forEach(((f,d)=>{const m=l.get(f);d.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(f)),d.isNoDocument()&&d.version.isEqual(Ne.min())?(e.removeEntry(f,d.readTime),c=c.insert(f,d)):!m.isValidDocument()||d.version.compareTo(m.version)>0||d.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(d),c=c.insert(f,d)):pe(jy,"Ignoring outdated watch update for ",f,". Current version:",m.version," Watch version:",d.version)})),{Bs:c,Ls:s}}))}function yM(n,e){const t=De(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=py),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function vM(n,e){const t=De(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return t.li.getTargetData(r,e).next((l=>l?(s=l,ee.resolve(s)):t.li.allocateTargetId(r).next((c=>(s=new bs(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=t.vs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r}))}async function cg(n,e,t){const r=De(n),s=r.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,(c=>r.persistence.referenceDelegate.removeTarget(c,s)))}catch(c){if(!yl(c))throw c;pe(jy,`Failed to update sequence numbers for target ${e}: ${c}`)}r.vs=r.vs.remove(e),r.Fs.delete(s.target)}function mw(n,e,t){const r=De(n);let s=Ne.min(),l=Ue();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(d,m,g){const y=De(d),x=y.Fs.get(g);return x!==void 0?ee.resolve(y.vs.get(x)):y.li.getTargetData(m,g)})(r,c,Gr(e)).next((f=>{if(f)return s=f.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(c,f.targetId).next((d=>{l=d}))})).next((()=>r.Cs.getDocumentsMatchingQuery(c,e,t?s:Ne.min(),t?l:Ue()))).next((f=>(xM(r,sN(e),f),{documents:f,ks:l})))))}function xM(n,e,t){let r=n.Ms.get(e)||Ne.min();t.forEach(((s,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),n.Ms.set(e,r)}class pw{constructor(){this.activeTargetIds=dN()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wM{constructor(){this.vo=new pw,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new pw,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gw="ConnectivityMonitor";class yw{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){pe(gw,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){pe(gw,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gd=null;function ug(){return Gd===null?Gd=(function(){return 268435456+Math.round(2147483648*Math.random())})():Gd++,"0x"+Gd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pp="RestConnection",bM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class _M{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.$o=this.databaseId.database===Ch?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,t,r,s,l){const c=ug(),f=this.Qo(e,t.toUriEncodedString());pe(pp,`Sending RPC '${e}' ${c}:`,f,r);const d={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(d,s,l);const{host:m}=new URL(f),g=hl(m);return this.zo(e,f,d,r,g).then((y=>(pe(pp,`Received RPC '${e}' ${c}: `,y),y)),(y=>{throw Ja(pp,`RPC '${e}' ${c} failed with error: `,y,"url: ",f,"request:",r),y}))}jo(e,t,r,s,l,c){return this.Wo(e,t,r,s,l)}Go(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+pl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,l)=>e[l]=s)),r&&r.headers.forEach(((s,l)=>e[l]=s))}Qo(e,t){const r=bM[e];let s=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sn="WebChannelConnection",bc=(n,e,t)=>{n.listen(e,(r=>{try{t(r)}catch(s){setTimeout((()=>{throw s}),0)}}))};class Ha extends _M{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Ha.c_){const e=C_();bc(e,I_.STAT_EVENT,(t=>{t.stat===Jp.PROXY?pe(sn,"STAT_EVENT: detected buffering proxy"):t.stat===Jp.NOPROXY&&pe(sn,"STAT_EVENT: detected no buffering proxy")})),Ha.c_=!0}}zo(e,t,r,s,l){const c=ug();return new Promise(((f,d)=>{const m=new E_;m.setWithCredentials(!0),m.listenOnce(T_.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case lh.NO_ERROR:const y=m.getResponseJson();pe(sn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(y)),f(y);break;case lh.TIMEOUT:pe(sn,`RPC '${e}' ${c} timed out`),d(new he(Z.DEADLINE_EXCEEDED,"Request time out"));break;case lh.HTTP_ERROR:const x=m.getStatus();if(pe(sn,`RPC '${e}' ${c} failed with status:`,x,"response text:",m.getResponseText()),x>0){let S=m.getResponseJson();Array.isArray(S)&&(S=S[0]);const _=S==null?void 0:S.error;if(_&&_.status&&_.message){const I=(function(M){const D=M.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(D)>=0?D:Z.UNKNOWN})(_.status);d(new he(I,_.message))}else d(new he(Z.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new he(Z.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{l_:e,streamId:c,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{pe(sn,`RPC '${e}' ${c} completed.`)}}));const g=JSON.stringify(s);pe(sn,`RPC '${e}' ${c} sending request:`,s),m.send(t,"POST",g,r,15)}))}T_(e,t,r){const s=ug(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(f.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Go(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const m=l.join("");pe(sn,`Creating RPC '${e}' stream ${s}: ${m}`,f);const g=c.createWebChannel(m,f);this.I_(g);let y=!1,x=!1;const S=new SM({Ho:_=>{x?pe(sn,`Not sending because RPC '${e}' stream ${s} is closed:`,_):(y||(pe(sn,`Opening RPC '${e}' stream ${s} transport.`),g.open(),y=!0),pe(sn,`RPC '${e}' stream ${s} sending:`,_),g.send(_))},Jo:()=>g.close()});return bc(g,Cc.EventType.OPEN,(()=>{x||(pe(sn,`RPC '${e}' stream ${s} transport opened.`),S.i_())})),bc(g,Cc.EventType.CLOSE,(()=>{x||(x=!0,pe(sn,`RPC '${e}' stream ${s} transport closed`),S.o_(),this.E_(g))})),bc(g,Cc.EventType.ERROR,(_=>{x||(x=!0,Ja(sn,`RPC '${e}' stream ${s} transport errored. Name:`,_.name,"Message:",_.message),S.o_(new he(Z.UNAVAILABLE,"The operation could not be completed")))})),bc(g,Cc.EventType.MESSAGE,(_=>{var I;if(!x){const C=_.data[0];Ye(!!C,16349);const M=C,D=(M==null?void 0:M.error)||((I=M[0])==null?void 0:I.error);if(D){pe(sn,`RPC '${e}' stream ${s} received error:`,D);const R=D.status;let K=(function(A){const E=Ct[A];if(E!==void 0)return uS(E)})(R),z=D.message;K===void 0&&(K=Z.INTERNAL,z="Unknown error status: "+R+" with message "+D.message),x=!0,S.o_(new he(K,z)),g.close()}else pe(sn,`RPC '${e}' stream ${s} received:`,C),S.__(C)}})),Ha.u_(),setTimeout((()=>{S.s_()}),0),S}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return A_()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EM(n){return new Ha(n)}function gp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hf(n){return new AN(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ha.c_=!1;class ES{constructor(e,t,r=1e3,s=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=s,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-r);s>0&&pe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vw="PersistentStream";class TS{constructor(e,t,r,s,l,c,f,d){this.Ci=e,this.b_=r,this.S_=s,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ES(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Z.RESOURCE_EXHAUSTED?(Pi(t.toString()),Pi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===t&&this.G_(r,s)}),(r=>{e((()=>{const s=new he(Z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,t){const r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.H_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return pe(vw,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(pe(vw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class TM extends TS{constructor(e,t,r,s,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=PN(this.serializer,e),r=(function(l){if(!("targetChange"in l))return Ne.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ne.min():c.readTime?Qr(c.readTime):Ne.min()})(e);return this.listener.J_(t,r)}Z_(e){const t={};t.database=lg(this.serializer),t.addTarget=(function(l,c){let f;const d=c.target;if(f=rg(d)?{documents:DN(l,d)}:{query:VN(l,d).ft},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=fS(l,c.resumeToken);const m=sg(l,c.expectedCount);m!==null&&(f.expectedCount=m)}else if(c.snapshotVersion.compareTo(Ne.min())>0){f.readTime=Ph(l,c.snapshotVersion.toTimestamp());const m=sg(l,c.expectedCount);m!==null&&(f.expectedCount=m)}return f})(this.serializer,e);const r=ON(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){const t={};t.database=lg(this.serializer),t.removeTarget=e,this.K_(t)}}class IM extends TS{constructor(e,t,r,s,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,c),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Ye(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ye(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ye(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=MN(e.writeResults,e.commitTime),r=Qr(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=lg(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>NN(this.serializer,r)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{}class AM extends CM{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new he(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,og(t,r),s,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new he(Z.UNKNOWN,l.toString())}))}jo(e,t,r,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.jo(e,og(t,r),s,c,f,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new he(Z.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function jM(n,e,t,r){return new AM(n,e,t,r)}class RM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Pi(t),this.aa=!1):pe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mo="RemoteStore";class PM{constructor(e,t,r,s,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((c=>{r.enqueueAndForget((async()=>{Uo(this)&&(pe(Mo,"Restarting streams for network reachability change."),await(async function(d){const m=De(d);m.Ea.add(4),await yu(m),m.Va.set("Unknown"),m.Ea.delete(4),await ff(m)})(this))}))})),this.Va=new RM(r,s)}}async function ff(n){if(Uo(n))for(const e of n.Ra)await e(!0)}async function yu(n){for(const e of n.Ra)await e(!1)}function IS(n,e){const t=De(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),My(t)?Ny(t):xl(t).O_()&&Py(t,e))}function Ry(n,e){const t=De(n),r=xl(t);t.Ia.delete(e),r.O_()&&CS(t,e),t.Ia.size===0&&(r.O_()?r.L_():Uo(t)&&t.Va.set("Unknown"))}function Py(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ne.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}xl(n).Z_(e)}function CS(n,e){n.da.$e(e),xl(n).X_(e)}function Ny(n){n.da=new EN({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),xl(n).start(),n.Va.ua()}function My(n){return Uo(n)&&!xl(n).x_()&&n.Ia.size>0}function Uo(n){return De(n).Ea.size===0}function AS(n){n.da=void 0}async function NM(n){n.Va.set("Online")}async function MM(n){n.Ia.forEach(((e,t)=>{Py(n,e)}))}async function DM(n,e){AS(n),My(n)?(n.Va.ha(e),Ny(n)):n.Va.set("Unknown")}async function VM(n,e,t){if(n.Va.set("Online"),e instanceof hS&&e.state===2&&e.cause)try{await(async function(s,l){const c=l.cause;for(const f of l.targetIds)s.Ia.has(f)&&(await s.remoteSyncer.rejectListen(f,c),s.Ia.delete(f),s.da.removeTarget(f))})(n,e)}catch(r){pe(Mo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Mh(n,r)}else if(e instanceof hh?n.da.Xe(e):e instanceof dS?n.da.st(e):n.da.tt(e),!t.isEqual(Ne.min()))try{const r=await SS(n.localStore);t.compareTo(r)>=0&&await(function(l,c){const f=l.da.Tt(c);return f.targetChanges.forEach(((d,m)=>{if(d.resumeToken.approximateByteSize()>0){const g=l.Ia.get(m);g&&l.Ia.set(m,g.withResumeToken(d.resumeToken,c))}})),f.targetMismatches.forEach(((d,m)=>{const g=l.Ia.get(d);if(!g)return;l.Ia.set(d,g.withResumeToken(Xt.EMPTY_BYTE_STRING,g.snapshotVersion)),CS(l,d);const y=new bs(g.target,d,m,g.sequenceNumber);Py(l,y)})),l.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(r){pe(Mo,"Failed to raise snapshot:",r),await Mh(n,r)}}async function Mh(n,e,t){if(!yl(e))throw e;n.Ea.add(1),await yu(n),n.Va.set("Offline"),t||(t=()=>SS(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{pe(Mo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await ff(n)}))}function jS(n,e){return e().catch((t=>Mh(n,t,e)))}async function mf(n){const e=De(n),t=Ms(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:py;for(;LM(e);)try{const s=await yM(e.localStore,r);if(s===null){e.Ta.length===0&&t.L_();break}r=s.batchId,OM(e,s)}catch(s){await Mh(e,s)}RS(e)&&PS(e)}function LM(n){return Uo(n)&&n.Ta.length<10}function OM(n,e){n.Ta.push(e);const t=Ms(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function RS(n){return Uo(n)&&!Ms(n).x_()&&n.Ta.length>0}function PS(n){Ms(n).start()}async function BM(n){Ms(n).ra()}async function zM(n){const e=Ms(n);for(const t of n.Ta)e.ea(t.mutations)}async function FM(n,e,t){const r=n.Ta.shift(),s=Sy.from(r,e,t);await jS(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await mf(n)}async function UM(n,e){e&&Ms(n).Y_&&await(async function(r,s){if((function(c){return bN(c)&&c!==Z.ABORTED})(s.code)){const l=r.Ta.shift();Ms(r).B_(),await jS(r,(()=>r.remoteSyncer.rejectFailedWrite(l.batchId,s))),await mf(r)}})(n,e),RS(n)&&PS(n)}async function xw(n,e){const t=De(n);t.asyncQueue.verifyOperationInProgress(),pe(Mo,"RemoteStore received new credentials");const r=Uo(t);t.Ea.add(3),await yu(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await ff(t)}async function WM(n,e){const t=De(n);e?(t.Ea.delete(2),await ff(t)):e||(t.Ea.add(2),await yu(t),t.Va.set("Unknown"))}function xl(n){return n.ma||(n.ma=(function(t,r,s){const l=De(t);return l.sa(),new TM(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(n.datastore,n.asyncQueue,{Zo:NM.bind(null,n),Yo:MM.bind(null,n),t_:DM.bind(null,n),J_:VM.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),My(n)?Ny(n):n.Va.set("Unknown")):(await n.ma.stop(),AS(n))}))),n.ma}function Ms(n){return n.fa||(n.fa=(function(t,r,s){const l=De(t);return l.sa(),new IM(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:BM.bind(null,n),t_:UM.bind(null,n),ta:zM.bind(null,n),na:FM.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await mf(n)):(await n.fa.stop(),n.Ta.length>0&&(pe(Mo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(e,t,r,s,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=l,this.deferred=new Ii,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,l){const c=Date.now()+r,f=new Dy(e,t,c,s,l);return f.start(r),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vy(n,e){if(Pi("AsyncQueue",`${e}: ${n}`),yl(n))return new he(Z.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{static emptySet(e){return new Ka(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||_e.comparator(t.key,r.key):(t,r)=>_e.comparator(t.key,r.key),this.keyedMap=Ac(),this.sortedSet=new mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ka)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=r.getNext().key;if(!s.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ka;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(){this.ga=new mt(_e.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ae(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class il{constructor(e,t,r,s,l,c,f,d,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=d,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,s,l){const c=[];return t.forEach((f=>{c.push({type:0,doc:f})})),new il(e,t,Ka.emptySet(t),c,r,s,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&af(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class HM{constructor(){this.queries=kw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const s=De(t),l=s.queries;s.queries=kw(),l.forEach(((c,f)=>{for(const d of f.ba)d.onError(r)}))})(this,new he(Z.ABORTED,"Firestore shutting down"))}}function kw(){return new Fo((n=>X_(n)),af)}async function NS(n,e){const t=De(n);let r=3;const s=e.query;let l=t.queries.get(s);l?!l.Sa()&&e.Da()&&(r=2):(l=new $M,r=e.Da()?0:1);try{switch(r){case 0:l.wa=await t.onListen(s,!0);break;case 1:l.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(c){const f=Vy(c,`Initialization of query '${Ma(e.query)}' failed`);return void e.onError(f)}t.queries.set(s,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Ly(t)}async function MS(n,e){const t=De(n),r=e.query;let s=3;const l=t.queries.get(r);if(l){const c=l.ba.indexOf(e);c>=0&&(l.ba.splice(c,1),l.ba.length===0?s=e.Da()?0:1:!l.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function KM(n,e){const t=De(n);let r=!1;for(const s of e){const l=s.query,c=t.queries.get(l);if(c){for(const f of c.ba)f.Fa(s)&&(r=!0);c.wa=s}}r&&Ly(t)}function qM(n,e,t){const r=De(n),s=r.queries.get(e);if(s)for(const l of s.ba)l.onError(t);r.queries.delete(e)}function Ly(n){n.Ca.forEach((e=>{e.next()}))}var dg,bw;(bw=dg||(dg={})).Ma="default",bw.Cache="cache";class DS{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new il(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=il.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==dg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(e){this.key=e}}class LS{constructor(e){this.key=e}}class GM{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Ue(),this.mutatedKeys=Ue(),this.eu=J_(e),this.tu=new Ka(this.eu)}get nu(){return this.Za}ru(e,t){const r=t?t.iu:new ww,s=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=s,f=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((g,y)=>{const x=s.get(g),S=lf(this.query,y)?y:null,_=!!x&&this.mutatedKeys.has(x.key),I=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let C=!1;x&&S?x.data.isEqual(S.data)?_!==I&&(r.track({type:3,doc:S}),C=!0):this.su(x,S)||(r.track({type:2,doc:S}),C=!0,(d&&this.eu(S,d)>0||m&&this.eu(S,m)<0)&&(f=!0)):!x&&S?(r.track({type:0,doc:S}),C=!0):x&&!S&&(r.track({type:1,doc:x}),C=!0,(d||m)&&(f=!0)),C&&(S?(c=c.add(S),l=I?l.add(g):l.delete(g)):(c=c.delete(g),l=l.delete(g)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const g=this.query.limitType==="F"?c.last():c.first();c=c.delete(g.key),l=l.delete(g.key),r.track({type:1,doc:g})}return{tu:c,iu:r,Ss:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((g,y)=>(function(S,_){const I=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{Vt:C})}};return I(S)-I(_)})(g.type,y.type)||this.eu(g.doc,y.doc))),this.ou(r),s=s??!1;const f=t&&!s?this._u():[],d=this.Ya.size===0&&this.current&&!s?1:0,m=d!==this.Xa;return this.Xa=d,c.length!==0||m?{snapshot:new il(this.query,e.tu,l,c,e.mutatedKeys,d===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ww,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Ue(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const t=[];return e.forEach((r=>{this.Ya.has(r)||t.push(new LS(r))})),this.Ya.forEach((r=>{e.has(r)||t.push(new VS(r))})),t}cu(e){this.Za=e.ks,this.Ya=Ue();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return il.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Oy="SyncEngine";class QM{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class YM{constructor(e){this.key=e,this.hu=!1}}class XM{constructor(e,t,r,s,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Fo((f=>X_(f)),af),this.Iu=new Map,this.Eu=new Set,this.Ru=new mt(_e.comparator),this.Au=new Map,this.Vu=new Iy,this.du={},this.mu=new Map,this.fu=rl.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function JM(n,e,t=!0){const r=WS(n);let s;const l=r.Tu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),s=l.view.lu()):s=await OS(r,e,t,!0),s}async function ZM(n,e){const t=WS(n);await OS(t,e,!0,!1)}async function OS(n,e,t,r){const s=await vM(n.localStore,Gr(e)),l=s.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let f;return r&&(f=await e4(n,e,l,c==="current",s.resumeToken)),n.isPrimaryClient&&t&&IS(n.remoteStore,s),f}async function e4(n,e,t,r,s){n.pu=(y,x,S)=>(async function(I,C,M,D){let R=C.view.ru(M);R.Ss&&(R=await mw(I.localStore,C.query,!1).then((({documents:A})=>C.view.ru(A,R))));const K=D&&D.targetChanges.get(C.targetId),z=D&&D.targetMismatches.get(C.targetId)!=null,U=C.view.applyChanges(R,I.isPrimaryClient,K,z);return Sw(I,C.targetId,U.au),U.snapshot})(n,y,x,S);const l=await mw(n.localStore,e,!0),c=new GM(e,l.ks),f=c.ru(l.documents),d=gu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),m=c.applyChanges(f,n.isPrimaryClient,d);Sw(n,t,m.au);const g=new QM(e,t,c);return n.Tu.set(e,g),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),m.snapshot}async function t4(n,e,t){const r=De(n),s=r.Tu.get(e),l=r.Iu.get(s.targetId);if(l.length>1)return r.Iu.set(s.targetId,l.filter((c=>!af(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await cg(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),t&&Ry(r.remoteStore,s.targetId),hg(r,s.targetId)})).catch(gl)):(hg(r,s.targetId),await cg(r.localStore,s.targetId,!0))}async function n4(n,e){const t=De(n),r=t.Tu.get(e),s=t.Iu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Ry(t.remoteStore,r.targetId))}async function r4(n,e,t){const r=u4(n);try{const s=await(function(c,f){const d=De(c),m=st.now(),g=f.reduce(((S,_)=>S.add(_.key)),Ue());let y,x;return d.persistence.runTransaction("Locally write mutations","readwrite",(S=>{let _=Ni(),I=Ue();return d.xs.getEntries(S,g).next((C=>{_=C,_.forEach(((M,D)=>{D.isValidDocument()||(I=I.add(M))}))})).next((()=>d.localDocuments.getOverlayedDocuments(S,_))).next((C=>{y=C;const M=[];for(const D of f){const R=yN(D,y.get(D.key).overlayedDocument);R!=null&&M.push(new Us(D.key,R,W_(R.value.mapValue),Jn.exists(!0)))}return d.mutationQueue.addMutationBatch(S,m,M,f)})).next((C=>{x=C;const M=C.applyToLocalDocumentSet(y,I);return d.documentOverlayCache.saveOverlays(S,C.batchId,M)}))})).then((()=>({batchId:x.batchId,changes:eS(y)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(c,f,d){let m=c.du[c.currentUser.toKey()];m||(m=new mt(Fe)),m=m.insert(f,d),c.du[c.currentUser.toKey()]=m})(r,s.batchId,t),await vu(r,s.changes),await mf(r.remoteStore)}catch(s){const l=Vy(s,"Failed to persist write");t.reject(l)}}async function BS(n,e){const t=De(n);try{const r=await pM(t.localStore,e);e.targetChanges.forEach(((s,l)=>{const c=t.Au.get(l);c&&(Ye(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c.hu=!0:s.modifiedDocuments.size>0?Ye(c.hu,14607):s.removedDocuments.size>0&&(Ye(c.hu,42227),c.hu=!1))})),await vu(t,r,e)}catch(r){await gl(r)}}function _w(n,e,t){const r=De(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Tu.forEach(((l,c)=>{const f=c.view.va(e);f.snapshot&&s.push(f.snapshot)})),(function(c,f){const d=De(c);d.onlineState=f;let m=!1;d.queries.forEach(((g,y)=>{for(const x of y.ba)x.va(f)&&(m=!0)})),m&&Ly(d)})(r.eventManager,e),s.length&&r.Pu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function i4(n,e,t){const r=De(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Au.get(e),l=s&&s.key;if(l){let c=new mt(_e.comparator);c=c.insert(l,an.newNoDocument(l,Ne.min()));const f=Ue().add(l),d=new df(Ne.min(),new Map,new mt(Fe),c,f);await BS(r,d),r.Ru=r.Ru.remove(l),r.Au.delete(e),By(r)}else await cg(r.localStore,e,!1).then((()=>hg(r,e,t))).catch(gl)}async function s4(n,e){const t=De(n),r=e.batch.batchId;try{const s=await mM(t.localStore,e);FS(t,r,null),zS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await vu(t,s)}catch(s){await gl(s)}}async function o4(n,e,t){const r=De(n);try{const s=await(function(c,f){const d=De(c);return d.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let g;return d.mutationQueue.lookupMutationBatch(m,f).next((y=>(Ye(y!==null,37113),g=y.keys(),d.mutationQueue.removeMutationBatch(m,y)))).next((()=>d.mutationQueue.performConsistencyCheck(m))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(m,g,f))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,g))).next((()=>d.localDocuments.getDocuments(m,g)))}))})(r.localStore,e);FS(r,e,t),zS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await vu(r,s)}catch(s){await gl(s)}}function zS(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function FS(n,e,t){const r=De(n);let s=r.du[r.currentUser.toKey()];if(s){const l=s.get(e);l&&(t?l.reject(t):l.resolve(),s=s.remove(e)),r.du[r.currentUser.toKey()]=s}}function hg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((r=>{n.Vu.containsKey(r)||US(n,r)}))}function US(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(Ry(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),By(n))}function Sw(n,e,t){for(const r of t)r instanceof VS?(n.Vu.addReference(r.key,e),a4(n,r)):r instanceof LS?(pe(Oy,"Document no longer in limbo: "+r.key),n.Vu.removeReference(r.key,e),n.Vu.containsKey(r.key)||US(n,r.key)):Ae(19791,{wu:r})}function a4(n,e){const t=e.key,r=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(r)||(pe(Oy,"New document in limbo: "+t),n.Eu.add(r),By(n))}function By(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new _e(tt.fromString(e)),r=n.fu.next();n.Au.set(r,new YM(t)),n.Ru=n.Ru.insert(t,r),IS(n.remoteStore,new bs(Gr(wy(t.path)),r,"TargetPurposeLimboResolution",rf.ce))}}async function vu(n,e,t){const r=De(n),s=[],l=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((f,d)=>{c.push(r.pu(d,e,t).then((m=>{var g;if((m||t)&&r.isPrimaryClient){const y=m?!m.fromCache:(g=t==null?void 0:t.targetChanges.get(d.targetId))==null?void 0:g.current;r.sharedClientState.updateQueryState(d.targetId,y?"current":"not-current")}if(m){s.push(m);const y=Ay.Es(d.targetId,m);l.push(y)}})))})),await Promise.all(c),r.Pu.J_(s),await(async function(d,m){const g=De(d);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(y=>ee.forEach(m,(x=>ee.forEach(x.Ts,(S=>g.persistence.referenceDelegate.addReference(y,x.targetId,S))).next((()=>ee.forEach(x.Is,(S=>g.persistence.referenceDelegate.removeReference(y,x.targetId,S)))))))))}catch(y){if(!yl(y))throw y;pe(jy,"Failed to update sequence numbers: "+y)}for(const y of m){const x=y.targetId;if(!y.fromCache){const S=g.vs.get(x),_=S.snapshotVersion,I=S.withLastLimboFreeSnapshotVersion(_);g.vs=g.vs.insert(x,I)}}})(r.localStore,l))}async function l4(n,e){const t=De(n);if(!t.currentUser.isEqual(e)){pe(Oy,"User change. New user:",e.toKey());const r=await _S(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((f=>{f.forEach((d=>{d.reject(new he(Z.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await vu(t,r.Ns)}}function c4(n,e){const t=De(n),r=t.Au.get(e);if(r&&r.hu)return Ue().add(r.key);{let s=Ue();const l=t.Iu.get(e);if(!l)return s;for(const c of l){const f=t.Tu.get(c);s=s.unionWith(f.view.nu)}return s}}function WS(n){const e=De(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=BS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=c4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=i4.bind(null,e),e.Pu.J_=KM.bind(null,e.eventManager),e.Pu.yu=qM.bind(null,e.eventManager),e}function u4(n){const e=De(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=s4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=o4.bind(null,e),e}class Dh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=hf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return fM(this.persistence,new uM,e.initialUser,this.serializer)}Cu(e){return new bS(Cy.Vi,this.serializer)}Du(e){return new wM}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Dh.provider={build:()=>new Dh};class d4 extends Dh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ye(this.persistence.referenceDelegate instanceof Nh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new QN(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?bn.withCacheSize(this.cacheSizeBytes):bn.DEFAULT;return new bS((r=>Nh.Vi(r,t)),this.serializer)}}class fg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>_w(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=l4.bind(null,this.syncEngine),await WM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new HM})()}createDatastore(e){const t=hf(e.databaseInfo.databaseId),r=EM(e.databaseInfo);return jM(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,s,l,c,f){return new PM(r,s,l,c,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>_w(this.syncEngine,t,0)),(function(){return yw.v()?new yw:new kM})())}createSyncEngine(e,t){return(function(s,l,c,f,d,m,g){const y=new XM(s,l,c,f,d,m);return g&&(y.gu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const l=De(s);pe(Mo,"RemoteStore shutting down."),l.Ea.add(5),await yu(l),l.Aa.shutdown(),l.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}fg.provider={build:()=>new fg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Pi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds="FirestoreClient";class h4{constructor(e,t,r,s,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=s,this.user=on.UNAUTHENTICATED,this.clientId=my.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(async c=>{pe(Ds,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(pe(Ds,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ii;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Vy(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function yp(n,e){n.asyncQueue.verifyOperationInProgress(),pe(Ds,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async s=>{r.isEqual(s)||(await _S(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Ew(n,e){n.asyncQueue.verifyOperationInProgress();const t=await f4(n);pe(Ds,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>xw(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,s)=>xw(e.remoteStore,s))),n._onlineComponents=e}async function f4(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){pe(Ds,"Using user provided OfflineComponentProvider");try{await yp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===Z.FAILED_PRECONDITION||s.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;Ja("Error using user provided cache. Falling back to memory cache: "+t),await yp(n,new Dh)}}else pe(Ds,"Using default OfflineComponentProvider"),await yp(n,new d4(void 0));return n._offlineComponents}async function HS(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(pe(Ds,"Using user provided OnlineComponentProvider"),await Ew(n,n._uninitializedComponentsProvider._online)):(pe(Ds,"Using default OnlineComponentProvider"),await Ew(n,new fg))),n._onlineComponents}function m4(n){return HS(n).then((e=>e.syncEngine))}async function KS(n){const e=await HS(n),t=e.eventManager;return t.onListen=JM.bind(null,e.syncEngine),t.onUnlisten=t4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=ZM.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=n4.bind(null,e.syncEngine),t}function p4(n,e,t={}){const r=new Ii;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,f,d,m){const g=new $S({next:x=>{g.Nu(),c.enqueueAndForget((()=>MS(l,y)));const S=x.docs.has(f);!S&&x.fromCache?m.reject(new he(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&x.fromCache&&d&&d.source==="server"?m.reject(new he(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(x)},error:x=>m.reject(x)}),y=new DS(wy(f.path),g,{includeMetadataChanges:!0,Ka:!0});return NS(l,y)})(await KS(n),n.asyncQueue,e,t,r))),r.promise}function g4(n,e,t={}){const r=new Ii;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,f,d,m){const g=new $S({next:x=>{g.Nu(),c.enqueueAndForget((()=>MS(l,y))),x.fromCache&&d.source==="server"?m.reject(new he(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(x)},error:x=>m.reject(x)}),y=new DS(f,g,{includeMetadataChanges:!0,Ka:!0});return NS(l,y)})(await KS(n),n.asyncQueue,e,t,r))),r.promise}function y4(n,e){const t=new Ii;return n.asyncQueue.enqueueAndForget((async()=>r4(await m4(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v4="ComponentProvider",Tw=new Map;function x4(n,e,t,r,s){return new zP(n,e,t,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,qS(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS="firestore.googleapis.com",Iw=!0;class Cw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=GS,this.ssl=Iw}else this.host=e.host,this.ssl=e.ssl??Iw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=kS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<qN)throw new he(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}AP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qS(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new he(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new he(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new he(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class pf{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Cw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Cw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new xP;switch(r.type){case"firstParty":return new _P(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new he(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=Tw.get(t);r&&(pe(v4,"Removing Datastore"),Tw.delete(t),r.terminate())})(this),Promise.resolve()}}function w4(n,e,t,r={}){var m;n=_r(n,pf);const s=hl(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},f=`${e}:${t}`;s&&(Lb(`https://${f}`),Ob("Firestore",!0)),l.host!==GS&&l.host!==f&&Ja("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...l,host:f,ssl:s,emulatorOptions:r};if(!As(d,c)&&(n._setSettings(d),r.mockUserToken)){let g,y;if(typeof r.mockUserToken=="string")g=r.mockUserToken,y=on.MOCK_USER;else{g=IA(r.mockUserToken,(m=n._app)==null?void 0:m.options.projectId);const x=r.mockUserToken.sub||r.mockUserToken.user_id;if(!x)throw new he(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new on(x)}n._authCredentials=new wP(new R_(g,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ws(this.firestore,e,this._query)}}class _t{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _t(this.firestore,e,this._key)}toJSON(){return{type:_t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(mu(t,_t._jsonSchema))return new _t(e,r||null,new _e(tt.fromString(t.referencePath)))}}_t._jsonSchemaVersion="firestore/documentReference/1.0",_t._jsonSchema={type:Rt("string",_t._jsonSchemaVersion),referencePath:Rt("string")};class Cs extends Ws{constructor(e,t,r){super(e,t,wy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _t(this.firestore,null,new _e(e))}withConverter(e){return new Cs(this.firestore,e,this._path)}}function cn(n,e,...t){if(n=Bt(n),P_("collection","path",e),n instanceof pf){const r=tt.fromString(e,...t);return Fx(r),new Cs(n,null,r)}{if(!(n instanceof _t||n instanceof Cs))throw new he(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(tt.fromString(e,...t));return Fx(r),new Cs(n.firestore,null,r)}}function St(n,e,...t){if(n=Bt(n),arguments.length===1&&(e=my.newId()),P_("doc","path",e),n instanceof pf){const r=tt.fromString(e,...t);return zx(r),new _t(n,null,new _e(r))}{if(!(n instanceof _t||n instanceof Cs))throw new he(Z.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(tt.fromString(e,...t));return zx(r),new _t(n.firestore,n instanceof Cs?n.converter:null,new _e(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw="AsyncQueue";class jw{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ES(this,"async_queue_retry"),this._c=()=>{const r=gp();r&&pe(Aw,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=gp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=gp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ii;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!yl(e))throw e;pe(Aw,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Pi("INTERNAL UNHANDLED ERROR: ",Rw(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=Dy.createAndSchedule(this,e,t,r,(l=>this.hc(l)));return this.tc.push(s),s}uc(){this.nc&&Ae(47125,{Pc:Rw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Rw(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Wo extends pf{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new jw,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new jw(e),this._firestoreClient=void 0,await e}}}function k4(n,e){const t=typeof n=="object"?n:Ub(),r=typeof n=="string"?n:Ch,s=ny(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const l=EA("firestore");l&&w4(s,...l)}return s}function zy(n){if(n._terminated)throw new he(Z.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||b4(n),n._firestoreClient}function b4(n){var r,s,l,c;const e=n._freezeSettings(),t=x4(n._databaseId,((r=n._app)==null?void 0:r.options.appId)||"",n._persistenceKey,(s=n._app)==null?void 0:s.options.apiKey,e);n._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new h4(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(d){const m=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(m),_online:m}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yn(Xt.fromBase64String(e))}catch(t){throw new he(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Yn(Xt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Yn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(mu(e,Yn._jsonSchema))return Yn.fromBase64String(e.bytes)}}Yn._jsonSchemaVersion="firestore/bytes/1.0",Yn._jsonSchema={type:Rt("string",Yn._jsonSchemaVersion),bytes:Rt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Yr._jsonSchemaVersion}}static fromJSON(e){if(mu(e,Yr._jsonSchema))return new Yr(e.latitude,e.longitude)}}Yr._jsonSchemaVersion="firestore/geoPoint/1.0",Yr._jsonSchema={type:Rt("string",Yr._jsonSchemaVersion),latitude:Rt("number"),longitude:Rt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==s[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:wr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(mu(e,wr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new wr(e.vectorValues);throw new he(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}wr._jsonSchemaVersion="firestore/vectorValue/1.0",wr._jsonSchema={type:Rt("string",wr._jsonSchemaVersion),vectorValues:Rt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4=/^__.*__$/;class S4{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Us(e,this.data,this.fieldMask,t,this.fieldTransforms):new pu(e,this.data,t,this.fieldTransforms)}}class QS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Us(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function YS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{dataSource:n})}}class gf{constructor(e,t,r,s,l,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new gf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const t=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var s;const t=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Vh(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(YS(this.dataSource)&&_4.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class E4{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||hf(e)}createContext(e,t,r,s=!1){return new gf({dataSource:e,methodName:t,targetDoc:r,path:Yt.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yf(n){const e=n._freezeSettings(),t=hf(n._databaseId);return new E4(n._databaseId,!!e.ignoreUndefinedProperties,t)}function XS(n,e,t,r,s,l={}){const c=n.createContext(l.merge||l.mergeFields?2:0,e,t,s);Hy("Data must be an object, but it was:",c,r);const f=JS(r,c);let d,m;if(l.merge)d=new Vn(c.fieldMask),m=c.fieldTransforms;else if(l.mergeFields){const g=[];for(const y of l.mergeFields){const x=Do(e,y,t);if(!c.contains(x))throw new he(Z.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);tE(g,x)||g.push(x)}d=new Vn(g),m=c.fieldTransforms.filter((y=>d.covers(y.field)))}else d=null,m=c.fieldTransforms;return new S4(new _n(f),d,m)}class vf extends wl{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof vf}}function T4(n,e,t){return new gf({dataSource:3,targetDoc:e.settings.targetDoc,methodName:n._methodName,arrayElement:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Uy extends wl{_toFieldTransform(e){return new by(e.path,new Jc)}isEqual(e){return e instanceof Uy}}class Wy extends wl{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=T4(this,e,!0),r=this.Ac.map((l=>kl(l,t))),s=new nl(r);return new by(e.path,s)}isEqual(e){return e instanceof Wy&&As(this.Ac,e.Ac)}}class $y extends wl{constructor(e,t){super(e),this.Vc=t}_toFieldTransform(e){const t=new eu(e.serializer,rS(e.serializer,this.Vc));return new by(e.path,t)}isEqual(e){return e instanceof $y&&this.Vc===e.Vc}}function I4(n,e,t,r){const s=n.createContext(1,e,t);Hy("Data must be an object, but it was:",s,r);const l=[],c=_n.empty();Fs(r,((d,m)=>{const g=eE(e,d,t);m=Bt(m);const y=s.childContextForFieldPath(g);if(m instanceof vf)l.push(g);else{const x=kl(m,y);x!=null&&(l.push(g),c.set(g,x))}}));const f=new Vn(l);return new QS(c,f,s.fieldTransforms)}function C4(n,e,t,r,s,l){const c=n.createContext(1,e,t),f=[Do(e,r,t)],d=[s];if(l.length%2!=0)throw new he(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<l.length;x+=2)f.push(Do(e,l[x])),d.push(l[x+1]);const m=[],g=_n.empty();for(let x=f.length-1;x>=0;--x)if(!tE(m,f[x])){const S=f[x];let _=d[x];_=Bt(_);const I=c.childContextForFieldPath(S);if(_ instanceof vf)m.push(S);else{const C=kl(_,I);C!=null&&(m.push(S),g.set(S,C))}}const y=new Vn(m);return new QS(g,y,c.fieldTransforms)}function A4(n,e,t,r=!1){return kl(t,n.createContext(r?4:3,e))}function kl(n,e){if(ZS(n=Bt(n)))return Hy("Unsupported field value:",e,n),JS(n,e);if(n instanceof wl)return(function(r,s){if(!YS(s.dataSource))throw s.createError(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(s);l&&s.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,s){const l=[];let c=0;for(const f of r){let d=kl(f,s.childContextForArray(c));d==null&&(d={nullValue:"NULL_VALUE"}),l.push(d),c++}return{arrayValue:{values:l}}})(n,e)}return(function(r,s){if((r=Bt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return rS(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=st.fromDate(r);return{timestampValue:Ph(s.serializer,l)}}if(r instanceof st){const l=new st(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ph(s.serializer,l)}}if(r instanceof Yr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Yn)return{bytesValue:fS(s.serializer,r._byteString)};if(r instanceof _t){const l=s.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw s.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Ty(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof wr)return(function(c,f){const d=c instanceof wr?c.toArray():c;return{mapValue:{fields:{[F_]:{stringValue:U_},[Ah]:{arrayValue:{values:d.map((g=>{if(typeof g!="number")throw f.createError("VectorValues must only contain numeric values.");return ky(f.serializer,g)}))}}}}}})(r,s);if(wS(r))return r._toProto(s.serializer);throw s.createError(`Unsupported field value: ${nf(r)}`)})(n,e)}function JS(n,e){const t={};return D_(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fs(n,((r,s)=>{const l=kl(s,e.childContextForField(r));l!=null&&(t[r]=l)})),{mapValue:{fields:t}}}function ZS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof st||n instanceof Yr||n instanceof Yn||n instanceof _t||n instanceof wl||n instanceof wr||wS(n))}function Hy(n,e,t){if(!ZS(t)||!N_(t)){const r=nf(t);throw r==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+r)}}function Do(n,e,t){if((e=Bt(e))instanceof Fy)return e._internalPath;if(typeof e=="string")return eE(n,e);throw Vh("Field path arguments must be of type string or ",n,!1,void 0,t)}const j4=new RegExp("[~\\*/\\[\\]]");function eE(n,e,t){if(e.search(j4)>=0)throw Vh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Fy(...e.split("."))._internalPath}catch{throw Vh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Vh(n,e,t,r,s){const l=r&&!r.isEmpty(),c=s!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let d="";return(l||c)&&(d+=" (found",l&&(d+=` in field ${r}`),c&&(d+=` in document ${s}`),d+=")"),new he(Z.INVALID_ARGUMENT,f+n+d)}function tE(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4{convertValue(e,t="none"){switch(Ns(e)){case 0:return null;case 1:return e.booleanValue;case 2:return bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ps(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Fs(e,((s,l)=>{r[s]=this.convertValue(l,t)})),r}convertVectorValue(e){var r,s,l;const t=(l=(s=(r=e.fields)==null?void 0:r[Ah].arrayValue)==null?void 0:s.values)==null?void 0:l.map((c=>bt(c.doubleValue)));return new wr(t)}convertGeoPoint(e){return new Yr(bt(e.latitude),bt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=of(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Gc(e));default:return null}}convertTimestamp(e){const t=Rs(e);return new st(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=tt.fromString(e);Ye(xS(r),9688,{name:e});const s=new Qc(r.get(1),r.get(3)),l=new _e(r.popFirst(5));return s.isEqual(t)||Pi(`Document ${l} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE extends R4{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new _t(this.firestore,null,t)}}function Pt(){return new Uy("serverTimestamp")}function P4(...n){return new Wy("arrayUnion",n)}function Ky(n){return new $y("increment",n)}const Pw="@firebase/firestore",Nw="4.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(e,t,r,s,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new _t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new N4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(Do("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class N4 extends rE{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M4(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new he(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qy{}class Gy extends qy{}function Mi(n,e,...t){let r=[];e instanceof qy&&r.push(e),r=r.concat(t),(function(l){const c=l.filter((d=>d instanceof Qy)).length,f=l.filter((d=>d instanceof xf)).length;if(c>1||c>0&&f>0)throw new he(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)n=s._apply(n);return n}class xf extends Gy{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new xf(e,t,r)}_apply(e){const t=this._parse(e);return iE(e._query,t),new Ws(e.firestore,e.converter,ig(e._query,t))}_parse(e){const t=yf(e.firestore);return(function(l,c,f,d,m,g,y){let x;if(m.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new he(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){Dw(y,g);const _=[];for(const I of y)_.push(Mw(d,l,I));x={arrayValue:{values:_}}}else x=Mw(d,l,y)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||Dw(y,g),x=A4(f,c,y,g==="in"||g==="not-in");return jt.create(m,g,x)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function sl(n,e,t){const r=e,s=Do("where",n);return xf._create(s,r,t)}class Qy extends qy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Qy(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:Sr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,l){let c=s;const f=l.getFlattenedFilters();for(const d of f)iE(c,d),c=ig(c,d)})(e._query,t),new Ws(e.firestore,e.converter,ig(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Yy extends Gy{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Yy(e,t)}_apply(e){const t=(function(s,l,c){if(s.startAt!==null)throw new he(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new he(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Xc(l,c)})(e._query,this._field,this._direction);return new Ws(e.firestore,e.converter,iN(e._query,t))}}function Vo(n,e="asc"){const t=e,r=Do("orderBy",n);return Yy._create(r,t)}class Xy extends Gy{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Xy(e,t,r)}_apply(e){return new Ws(e.firestore,e.converter,Rh(e._query,this._limit,this._limitType))}}function D4(n){return Xy._create("limit",n,"F")}function Mw(n,e,t){if(typeof(t=Bt(t))=="string"){if(t==="")throw new he(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Y_(e)&&t.indexOf("/")!==-1)throw new he(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(tt.fromString(t));if(!_e.isDocumentKey(r))throw new he(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Qx(n,new _e(r))}if(t instanceof _t)return Qx(n,t._key);throw new he(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${nf(t)}.`)}function Dw(n,e){if(!Array.isArray(n)||n.length===0)throw new he(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function iE(n,e){const t=(function(s,l){for(const c of s)for(const f of c.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new he(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function sE(n,e,t){let r;return r=n?n.toFirestore(e):e,r}class Rc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Io extends rE{constructor(e,t,r,s,l,c){super(e,t,r,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new fh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Do("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Io._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Io._jsonSchemaVersion="firestore/documentSnapshot/1.0",Io._jsonSchema={type:Rt("string",Io._jsonSchemaVersion),bundleSource:Rt("string","DocumentSnapshot"),bundleName:Rt("string"),bundle:Rt("string")};class fh extends Io{data(e={}){return super.data(e)}}class qa{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Rc(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new fh(this._firestore,this._userDataWriter,r.key,r,new Rc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,l){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map((f=>{const d=new fh(s._firestore,s._userDataWriter,f.doc.key,f.doc,new Rc(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);return f.doc,{type:"added",doc:d,oldIndex:-1,newIndex:c++}}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const d=new fh(s._firestore,s._userDataWriter,f.doc.key,f.doc,new Rc(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,g=-1;return f.type!==0&&(m=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),g=c.indexOf(f.doc.key)),{type:V4(f.type),doc:d,oldIndex:m,newIndex:g}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=qa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=my.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),s.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function V4(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qa._jsonSchemaVersion="firestore/querySnapshot/1.0",qa._jsonSchema={type:Rt("string",qa._jsonSchemaVersion),bundleSource:Rt("string","QuerySnapshot"),bundleName:Rt("string"),bundle:Rt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bl(n){n=_r(n,_t);const e=_r(n.firestore,Wo),t=zy(e);return p4(t,n._key).then((r=>O4(e,n,r)))}function Ln(n){n=_r(n,Ws);const e=_r(n.firestore,Wo),t=zy(e),r=new nE(e);return M4(n._query),g4(t,n._query).then((s=>new qa(e,r,n,s)))}function _l(n,e,t){n=_r(n,_t);const r=_r(n.firestore,Wo),s=sE(n.converter,e),l=yf(r);return wf(r,[XS(l,"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Jn.none())])}function Ir(n,e,t,...r){n=_r(n,_t);const s=_r(n.firestore,Wo),l=yf(s);let c;return c=typeof(e=Bt(e))=="string"||e instanceof Fy?C4(l,"updateDoc",n._key,e,t,r):I4(l,"updateDoc",n._key,e),wf(s,[c.toMutation(n._key,Jn.exists(!0))])}function L4(n){return wf(_r(n.firestore,Wo),[new _y(n._key,Jn.none())])}function Jy(n,e){const t=_r(n.firestore,Wo),r=St(n),s=sE(n.converter,e),l=yf(n.firestore);return wf(t,[XS(l,"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,Jn.exists(!1))]).then((()=>r))}function wf(n,e){const t=zy(n);return y4(t,e)}function O4(n,e,t){const r=t.docs.get(e._key),s=new nE(n);return new Io(n,s,e._key,r,new Rc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){vP(fl),Ya(new jo("firestore",((r,{instanceIdentifier:s,options:l})=>{const c=r.getProvider("app").getImmediate(),f=new Wo(new kP(r.getProvider("auth-internal")),new SP(c,r.getProvider("app-check-internal")),FP(c,s),c);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),Ts(Pw,Nw,e),Ts(Pw,Nw,"esm2020")})();var B4="firebase",z4="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ts(B4,z4,"app");const F4={apiKey:"AIzaSyCf4uRHqqZtYR3ZvlbHF9w59qGuEjlXcW4",authDomain:"kinderbucks-e3e8c.firebaseapp.com",projectId:"kinderbucks-e3e8c",storageBucket:"kinderbucks-e3e8c.firebasestorage.app",messagingSenderId:"18326874439",appId:"1:18326874439:web:ad902e6a1c794b2b3c4462",measurementId:"G-3JMD9HSMC3"},oE=Fb(F4),We=k4(oE),Lo=gP(oE),$o="users",Co={ADMIN:"admin",BUSINESS:"business",MEMBER:"member"};async function U4(n,e,t){const s=(await J5(Lo,n,e)).user;return await tR(s,{displayName:t}),await _l(St(We,$o,s.uid),{uid:s.uid,email:s.email,displayName:t,role:Co.MEMBER,createdAt:Pt(),lastLogin:Pt()}),s}async function W4(n,e){const t=await Z5(Lo,n,e);return await Ir(St(We,$o,t.user.uid),{lastLogin:Pt()}),t.user}async function $4(){var l;const n=new ki,t=(await ER(Lo,n)).user,r=St(We,$o,t.uid);return(await bl(r)).exists()?await Ir(r,{lastLogin:Pt(),photoURL:t.photoURL}):await _l(r,{uid:t.uid,email:t.email,displayName:t.displayName||((l=t.email)==null?void 0:l.split("@")[0]),photoURL:t.photoURL,role:Co.MEMBER,createdAt:Pt(),lastLogin:Pt(),provider:"google"}),t}async function aE(){return sR(Lo)}async function Vw(n){const e=St(We,$o,n),t=await bl(e);return t.exists()?t.data():null}async function H4(n,e){if(!Object.values(Co).includes(e))throw new Error("Invalid role");await Ir(St(We,$o,n),{role:e,updatedAt:Pt()})}async function K4(n,e){await Ir(St(We,$o,n),{role:Co.BUSINESS,businessCode:e,updatedAt:Pt()})}async function q4(){return(await Ln(cn(We,$o))).docs.map(e=>({id:e.id,...e.data()}))}function G4(n){return iR(Lo,n)}const lE=j.createContext(null);function Q4({children:n}){const[e,t]=j.useState(null),[r,s]=j.useState(null),[l,c]=j.useState(!0);j.useEffect(()=>{const _=G4(async I=>{if(t(I),I){const C=await Vw(I.uid);s(C)}else s(null);c(!1)});return()=>_()},[]);const f=!!e,d=(r==null?void 0:r.role)===Co.ADMIN,m=(r==null?void 0:r.role)===Co.BUSINESS||d&&(r==null?void 0:r.businessCode),g=(r==null?void 0:r.role)===Co.MEMBER||f,S={user:e,profile:r,loading:l,isAuthenticated:f,isAdmin:d,isBusiness:m,isMember:g,hasRole:(..._)=>r?_.includes(r.role):!1,refreshProfile:async()=>{if(e){const _=await Vw(e.uid);s(_)}}};return a.jsx(lE.Provider,{value:S,children:n})}function Oi(){const n=j.useContext(lE);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n}/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),X4=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),Lw=n=>{const e=X4(n);return e.charAt(0).toUpperCase()+e.slice(1)},cE=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),J4=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Z4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eD=j.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:l,iconNode:c,...f},d)=>j.createElement("svg",{ref:d,...Z4,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:cE("lucide",s),...!l&&!J4(f)&&{"aria-hidden":"true"},...f},[...c.map(([m,g])=>j.createElement(m,g)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=(n,e)=>{const t=j.forwardRef(({className:r,...s},l)=>j.createElement(eD,{ref:l,iconNode:e,className:cE(`lucide-${Y4(Lw(n))}`,`lucide-${n}`,r),...s}));return t.displayName=Lw(n),t};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tD=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],nD=ae("arrow-left",tD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rD=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],kf=ae("arrow-right-left",rD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iD=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],mg=ae("arrow-right",iD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sD=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],nr=ae("award",sD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oD=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],Zy=ae("banknote",oD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aD=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Ow=ae("book-open",aD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lD=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],uE=ae("briefcase",lD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cD=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],bf=ae("calendar",cD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uD=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],e0=ae("chart-column",uD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dD=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],bi=ae("check",dD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hD=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],fD=ae("chevron-down",hD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mD=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],pD=ae("chevron-left",mD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gD=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],yD=ae("chevron-up",gD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],t0=ae("circle-alert",vD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xD=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],kr=ae("circle-check-big",xD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],kD=ae("circle-x",wD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bD=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Zr=ae("clock",bD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _D=[["path",{d:"M6 16.326A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 .5 8.973",key:"1cez44"}],["path",{d:"m13 12-3 5h4l-3 5",key:"1t22er"}]],vp=ae("cloud-lightning",_D);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SD=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]],xi=ae("cloud-rain",SD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ED=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M8 15h.01",key:"a7atzg"}],["path",{d:"M8 19h.01",key:"puxtts"}],["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M12 21h.01",key:"h35vbk"}],["path",{d:"M16 15h.01",key:"rnfrdf"}],["path",{d:"M16 19h.01",key:"1vcnzz"}]],Pa=ae("cloud-snow",ED);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TD=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],Qd=ae("cloud",TD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ID=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],CD=ae("coins",ID);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AD=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],dE=ae("compass",AD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jD=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],n0=ae("copy",jD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RD=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],pg=ae("credit-card",RD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PD=[["path",{d:"M10.2 18H4.774a1.5 1.5 0 0 1-1.352-.97 11 11 0 0 1 .132-6.487",key:"14kkz9"}],["path",{d:"M18 10.2V4.774a1.5 1.5 0 0 0-.97-1.352 11 11 0 0 0-6.486.132",key:"1g7v07"}],["path",{d:"M18 5a4 3 0 0 1 4 3 2 2 0 0 1-2 2 10 10 0 0 0-5.139 1.42",key:"ratg6b"}],["path",{d:"M5 18a3 4 0 0 0 3 4 2 2 0 0 0 2-2 10 10 0 0 1 1.42-5.14",key:"4454f0"}],["path",{d:"M8.709 2.554a10 10 0 0 0-6.155 6.155 1.5 1.5 0 0 0 .676 1.626l9.807 5.42a2 2 0 0 0 2.718-2.718l-5.42-9.807a1.5 1.5 0 0 0-1.626-.676",key:"qmemie"}]],ND=ae("croissant",PD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MD=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],zn=ae("crown",MD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DD=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],VD=ae("dollar-sign",DD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LD=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],hE=ae("download",LD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OD=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],BD=ae("droplets",OD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zD=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],FD=ae("ellipsis-vertical",zD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UD=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],WD=ae("eye-off",UD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $D=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],fE=ae("eye",$D);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HD=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],KD=ae("funnel",HD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qD=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],mE=ae("gift",qD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GD=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],QD=ae("house",GD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],XD=ae("info",YD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JD=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],ZD=ae("layout-dashboard",JD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eV=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],tV=ae("lightbulb",eV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nV=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],r0=ae("loader-circle",nV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rV=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],iV=ae("lock",rV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sV=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],ol=ae("log-in",sV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oV=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],gg=ae("log-out",oV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aV=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],pE=ae("mail",aV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lV=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Oo=ae("map-pin",lV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cV=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],uV=ae("megaphone",cV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dV=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],gE=ae("navigation",dV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hV=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Bw=ae("package",hV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fV=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],yE=ae("palette",fV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mV=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],pV=ae("percent",mV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gV=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],yV=ae("phone",gV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vV=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],yg=ae("plus",vV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xV=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],vE=ae("printer",xV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wV=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],br=ae("qr-code",wV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kV=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],bV=ae("refresh-cw",kV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _V=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],SV=ae("save",_V);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EV=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],TV=ae("search",EV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IV=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Lh=ae("send",IV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CV=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],AV=ae("share-2",CV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jV=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],xE=ae("shield-check",jV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RV=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Oh=ae("shield",RV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PV=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],wE=ae("shopping-bag",PV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NV=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],vg=ae("smartphone",NV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MV=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],i0=ae("sparkles",MV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DV=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],VV=ae("square-check-big",DV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LV=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],OV=ae("square",LV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BV=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],rr=ae("star",BV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zV=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],Nt=ae("store",zV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FV=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],zw=ae("sun",FV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UV=[["path",{d:"M12 2v8",key:"1q4o3n"}],["path",{d:"m4.93 10.93 1.41 1.41",key:"2a7f42"}],["path",{d:"M2 18h2",key:"j10viu"}],["path",{d:"M20 18h2",key:"wocana"}],["path",{d:"m19.07 10.93-1.41 1.41",key:"15zs5n"}],["path",{d:"M22 22H2",key:"19qnx5"}],["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}],["path",{d:"M16 18a4 4 0 0 0-8 0",key:"1lzouq"}]],WV=ae("sunrise",UV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $V=[["path",{d:"M12 10V2",key:"16sf7g"}],["path",{d:"m4.93 10.93 1.41 1.41",key:"2a7f42"}],["path",{d:"M2 18h2",key:"j10viu"}],["path",{d:"M20 18h2",key:"wocana"}],["path",{d:"m19.07 10.93-1.41 1.41",key:"15zs5n"}],["path",{d:"M22 22H2",key:"19qnx5"}],["path",{d:"m16 6-4 4-4-4",key:"6wukr"}],["path",{d:"M16 18a4 4 0 0 0-8 0",key:"1lzouq"}]],HV=ae("sunset",$V);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KV=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],_c=ae("tag",KV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Jt=ae("target",qV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GV=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],QV=ae("toggle-left",GV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YV=[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],XV=ae("toggle-right",YV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JV=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ZV=ae("trash-2",JV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Vs=ae("trending-up",e3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],n3=ae("trophy",t3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Bh=ae("user-plus",r3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Ga=ae("user",i3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Er=ae("users",s3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]],kE=ae("utensils-crossed",o3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]],l3=ae("wind",a3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],u3=ae("zap",c3);function wi({children:n,allowedRoles:e=[]}){const{user:t,profile:r,loading:s,isAuthenticated:l}=Oi(),c=ir();return s?a.jsxs("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"var(--kb-cream)"},children:[a.jsxs("div",{style:{textAlign:"center"},children:[a.jsx(r0,{size:48,color:"var(--kb-navy)",style:{animation:"spin 1s linear infinite"}}),a.jsx("p",{style:{marginTop:"1rem",color:"var(--kb-gray-500)"},children:"Loading..."})]}),a.jsx("style",{children:`
          @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
          }
        `})]}):l?e.length>0&&r&&!e.includes(r.role)?a.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"var(--kb-cream)",padding:"2rem"},children:a.jsxs("div",{className:"card",style:{maxWidth:"400px",textAlign:"center",padding:"2rem"},children:[a.jsx("h2",{style:{color:"#dc2626",marginBottom:"1rem"},children:"Access Denied"}),a.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem"},children:"You don't have permission to access this page."}),a.jsx("a",{href:"/",className:"btn btn-primary",children:"Go Home"})]})}):n:a.jsx(DC,{to:"/login",state:{from:c},replace:!0})}const s0=j.createContext({});function o0(n){const e=j.useRef(null);return e.current===null&&(e.current=n()),e.current}const bE=typeof window<"u",_E=bE?j.useLayoutEffect:j.useEffect,_f=j.createContext(null);function a0(n,e){n.indexOf(e)===-1&&n.push(e)}function l0(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const ei=(n,e,t)=>t>e?e:t<n?n:t;let c0=()=>{};const Di={},SE=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function EE(n){return typeof n=="object"&&n!==null}const TE=n=>/^0[^.\s]+$/u.test(n);function u0(n){let e;return()=>(e===void 0&&(e=n()),e)}const Zn=n=>n,d3=(n,e)=>t=>e(n(t)),xu=(...n)=>n.reduce(d3),tu=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r};class d0{constructor(){this.subscriptions=[]}add(e){return a0(this.subscriptions,e),()=>l0(this.subscriptions,e)}notify(e,t,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,t,r);else for(let l=0;l<s;l++){const c=this.subscriptions[l];c&&c(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ci=n=>n*1e3,Xn=n=>n/1e3;function IE(n,e){return e?n*(1e3/e):0}const CE=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,h3=1e-7,f3=12;function m3(n,e,t,r,s){let l,c,f=0;do c=e+(t-e)/2,l=CE(c,r,s)-n,l>0?t=c:e=c;while(Math.abs(l)>h3&&++f<f3);return c}function wu(n,e,t,r){if(n===e&&t===r)return Zn;const s=l=>m3(l,0,1,n,t);return l=>l===0||l===1?l:CE(s(l),e,r)}const AE=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,jE=n=>e=>1-n(1-e),RE=wu(.33,1.53,.69,.99),h0=jE(RE),PE=AE(h0),NE=n=>(n*=2)<1?.5*h0(n):.5*(2-Math.pow(2,-10*(n-1))),f0=n=>1-Math.sin(Math.acos(n)),ME=jE(f0),DE=AE(f0),p3=wu(.42,0,1,1),g3=wu(0,0,.58,1),VE=wu(.42,0,.58,1),y3=n=>Array.isArray(n)&&typeof n[0]!="number",LE=n=>Array.isArray(n)&&typeof n[0]=="number",v3={linear:Zn,easeIn:p3,easeInOut:VE,easeOut:g3,circIn:f0,circInOut:DE,circOut:ME,backIn:h0,backInOut:PE,backOut:RE,anticipate:NE},x3=n=>typeof n=="string",Fw=n=>{if(LE(n)){c0(n.length===4);const[e,t,r,s]=n;return wu(e,t,r,s)}else if(x3(n))return v3[n];return n},Yd=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function w3(n,e){let t=new Set,r=new Set,s=!1,l=!1;const c=new WeakSet;let f={delta:0,timestamp:0,isProcessing:!1};function d(g){c.has(g)&&(m.schedule(g),n()),g(f)}const m={schedule:(g,y=!1,x=!1)=>{const _=x&&s?t:r;return y&&c.add(g),_.has(g)||_.add(g),g},cancel:g=>{r.delete(g),c.delete(g)},process:g=>{if(f=g,s){l=!0;return}s=!0,[t,r]=[r,t],t.forEach(d),t.clear(),s=!1,l&&(l=!1,m.process(g))}};return m}const k3=40;function OE(n,e){let t=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},l=()=>t=!0,c=Yd.reduce((R,K)=>(R[K]=w3(l),R),{}),{setup:f,read:d,resolveKeyframes:m,preUpdate:g,update:y,preRender:x,render:S,postRender:_}=c,I=()=>{const R=Di.useManualTiming?s.timestamp:performance.now();t=!1,Di.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(R-s.timestamp,k3),1)),s.timestamp=R,s.isProcessing=!0,f.process(s),d.process(s),m.process(s),g.process(s),y.process(s),x.process(s),S.process(s),_.process(s),s.isProcessing=!1,t&&e&&(r=!1,n(I))},C=()=>{t=!0,r=!0,s.isProcessing||n(I)};return{schedule:Yd.reduce((R,K)=>{const z=c[K];return R[K]=(U,A=!1,E=!1)=>(t||C(),z.schedule(U,A,E)),R},{}),cancel:R=>{for(let K=0;K<Yd.length;K++)c[Yd[K]].cancel(R)},state:s,steps:c}}const{schedule:ot,cancel:Ls,state:Gt,steps:xp}=OE(typeof requestAnimationFrame<"u"?requestAnimationFrame:Zn,!0);let mh;function b3(){mh=void 0}const mn={now:()=>(mh===void 0&&mn.set(Gt.isProcessing||Di.useManualTiming?Gt.timestamp:performance.now()),mh),set:n=>{mh=n,queueMicrotask(b3)}},BE=n=>e=>typeof e=="string"&&e.startsWith(n),zE=BE("--"),_3=BE("var(--"),m0=n=>_3(n)?S3.test(n.split("/*")[0].trim()):!1,S3=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function Uw(n){return typeof n!="string"?!1:n.split("/*")[0].includes("var(--")}const Sl={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},nu={...Sl,transform:n=>ei(0,1,n)},Xd={...Sl,default:1},zc=n=>Math.round(n*1e5)/1e5,p0=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function E3(n){return n==null}const T3=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,g0=(n,e)=>t=>!!(typeof t=="string"&&T3.test(t)&&t.startsWith(n)||e&&!E3(t)&&Object.prototype.hasOwnProperty.call(t,e)),FE=(n,e,t)=>r=>{if(typeof r!="string")return r;const[s,l,c,f]=r.match(p0);return{[n]:parseFloat(s),[e]:parseFloat(l),[t]:parseFloat(c),alpha:f!==void 0?parseFloat(f):1}},I3=n=>ei(0,255,n),wp={...Sl,transform:n=>Math.round(I3(n))},Eo={test:g0("rgb","red"),parse:FE("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+wp.transform(n)+", "+wp.transform(e)+", "+wp.transform(t)+", "+zc(nu.transform(r))+")"};function C3(n){let e="",t="",r="",s="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),s=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),s=n.substring(4,5),e+=e,t+=t,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const xg={test:g0("#"),parse:C3,transform:Eo.transform},ku=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),ys=ku("deg"),Xr=ku("%"),ye=ku("px"),A3=ku("vh"),j3=ku("vw"),Ww={...Xr,parse:n=>Xr.parse(n)/100,transform:n=>Xr.transform(n*100)},La={test:g0("hsl","hue"),parse:FE("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+Xr.transform(zc(e))+", "+Xr.transform(zc(t))+", "+zc(nu.transform(r))+")"},At={test:n=>Eo.test(n)||xg.test(n)||La.test(n),parse:n=>Eo.test(n)?Eo.parse(n):La.test(n)?La.parse(n):xg.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Eo.transform(n):La.transform(n),getAnimatableNone:n=>{const e=At.parse(n);return e.alpha=0,At.transform(e)}},R3=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function P3(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(p0))==null?void 0:e.length)||0)+(((t=n.match(R3))==null?void 0:t.length)||0)>0}const UE="number",WE="color",N3="var",M3="var(",$w="${}",D3=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ru(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},s=[];let l=0;const f=e.replace(D3,d=>(At.test(d)?(r.color.push(l),s.push(WE),t.push(At.parse(d))):d.startsWith(M3)?(r.var.push(l),s.push(N3),t.push(d)):(r.number.push(l),s.push(UE),t.push(parseFloat(d))),++l,$w)).split($w);return{values:t,split:f,indexes:r,types:s}}function $E(n){return ru(n).values}function HE(n){const{split:e,types:t}=ru(n),r=e.length;return s=>{let l="";for(let c=0;c<r;c++)if(l+=e[c],s[c]!==void 0){const f=t[c];f===UE?l+=zc(s[c]):f===WE?l+=At.transform(s[c]):l+=s[c]}return l}}const V3=n=>typeof n=="number"?0:At.test(n)?At.getAnimatableNone(n):n;function L3(n){const e=$E(n);return HE(n)(e.map(V3))}const Os={test:P3,parse:$E,createTransformer:HE,getAnimatableNone:L3};function kp(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function O3({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let s=0,l=0,c=0;if(!e)s=l=c=t;else{const f=t<.5?t*(1+e):t+e-t*e,d=2*t-f;s=kp(d,f,n+1/3),l=kp(d,f,n),c=kp(d,f,n-1/3)}return{red:Math.round(s*255),green:Math.round(l*255),blue:Math.round(c*255),alpha:r}}function zh(n,e){return t=>t>0?e:n}const ft=(n,e,t)=>n+(e-n)*t,bp=(n,e,t)=>{const r=n*n,s=t*(e*e-r)+r;return s<0?0:Math.sqrt(s)},B3=[xg,Eo,La],z3=n=>B3.find(e=>e.test(n));function Hw(n){const e=z3(n);if(!e)return!1;let t=e.parse(n);return e===La&&(t=O3(t)),t}const Kw=(n,e)=>{const t=Hw(n),r=Hw(e);if(!t||!r)return zh(n,e);const s={...t};return l=>(s.red=bp(t.red,r.red,l),s.green=bp(t.green,r.green,l),s.blue=bp(t.blue,r.blue,l),s.alpha=ft(t.alpha,r.alpha,l),Eo.transform(s))},wg=new Set(["none","hidden"]);function F3(n,e){return wg.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function U3(n,e){return t=>ft(n,e,t)}function y0(n){return typeof n=="number"?U3:typeof n=="string"?m0(n)?zh:At.test(n)?Kw:H3:Array.isArray(n)?KE:typeof n=="object"?At.test(n)?Kw:W3:zh}function KE(n,e){const t=[...n],r=t.length,s=n.map((l,c)=>y0(l)(l,e[c]));return l=>{for(let c=0;c<r;c++)t[c]=s[c](l);return t}}function W3(n,e){const t={...n,...e},r={};for(const s in t)n[s]!==void 0&&e[s]!==void 0&&(r[s]=y0(n[s])(n[s],e[s]));return s=>{for(const l in r)t[l]=r[l](s);return t}}function $3(n,e){const t=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const l=e.types[s],c=n.indexes[l][r[l]],f=n.values[c]??0;t[s]=f,r[l]++}return t}const H3=(n,e)=>{const t=Os.createTransformer(e),r=ru(n),s=ru(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?wg.has(n)&&!s.values.length||wg.has(e)&&!r.values.length?F3(n,e):xu(KE($3(r,s),s.values),t):zh(n,e)};function qE(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?ft(n,e,t):y0(n)(n,e)}const K3=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>ot.update(e,t),stop:()=>Ls(e),now:()=>Gt.isProcessing?Gt.timestamp:mn.now()}},GE=(n,e,t=10)=>{let r="";const s=Math.max(Math.round(e/t),2);for(let l=0;l<s;l++)r+=Math.round(n(l/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Fh=2e4;function v0(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<Fh;)e+=t,r=n.next(e);return e>=Fh?1/0:e}function q3(n,e=100,t){const r=t({...n,keyframes:[0,e]}),s=Math.min(v0(r),Fh);return{type:"keyframes",ease:l=>r.next(s*l).value/e,duration:Xn(s)}}const G3=5;function QE(n,e,t){const r=Math.max(e-G3,0);return IE(t-n(r),e-r)}const vt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},_p=.001;function Q3({duration:n=vt.duration,bounce:e=vt.bounce,velocity:t=vt.velocity,mass:r=vt.mass}){let s,l,c=1-e;c=ei(vt.minDamping,vt.maxDamping,c),n=ei(vt.minDuration,vt.maxDuration,Xn(n)),c<1?(s=m=>{const g=m*c,y=g*n,x=g-t,S=kg(m,c),_=Math.exp(-y);return _p-x/S*_},l=m=>{const y=m*c*n,x=y*t+t,S=Math.pow(c,2)*Math.pow(m,2)*n,_=Math.exp(-y),I=kg(Math.pow(m,2),c);return(-s(m)+_p>0?-1:1)*((x-S)*_)/I}):(s=m=>{const g=Math.exp(-m*n),y=(m-t)*n+1;return-_p+g*y},l=m=>{const g=Math.exp(-m*n),y=(t-m)*(n*n);return g*y});const f=5/n,d=X3(s,l,f);if(n=Ci(n),isNaN(d))return{stiffness:vt.stiffness,damping:vt.damping,duration:n};{const m=Math.pow(d,2)*r;return{stiffness:m,damping:c*2*Math.sqrt(r*m),duration:n}}}const Y3=12;function X3(n,e,t){let r=t;for(let s=1;s<Y3;s++)r=r-n(r)/e(r);return r}function kg(n,e){return n*Math.sqrt(1-e*e)}const J3=["duration","bounce"],Z3=["stiffness","damping","mass"];function qw(n,e){return e.some(t=>n[t]!==void 0)}function e6(n){let e={velocity:vt.velocity,stiffness:vt.stiffness,damping:vt.damping,mass:vt.mass,isResolvedFromDuration:!1,...n};if(!qw(n,Z3)&&qw(n,J3))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),s=r*r,l=2*ei(.05,1,1-(n.bounce||0))*Math.sqrt(s);e={...e,mass:vt.mass,stiffness:s,damping:l}}else{const t=Q3(n);e={...e,...t,mass:vt.mass},e.isResolvedFromDuration=!0}return e}function Uh(n=vt.visualDuration,e=vt.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:s}=t;const l=t.keyframes[0],c=t.keyframes[t.keyframes.length-1],f={done:!1,value:l},{stiffness:d,damping:m,mass:g,duration:y,velocity:x,isResolvedFromDuration:S}=e6({...t,velocity:-Xn(t.velocity||0)}),_=x||0,I=m/(2*Math.sqrt(d*g)),C=c-l,M=Xn(Math.sqrt(d/g)),D=Math.abs(C)<5;r||(r=D?vt.restSpeed.granular:vt.restSpeed.default),s||(s=D?vt.restDelta.granular:vt.restDelta.default);let R;if(I<1){const z=kg(M,I);R=U=>{const A=Math.exp(-I*M*U);return c-A*((_+I*M*C)/z*Math.sin(z*U)+C*Math.cos(z*U))}}else if(I===1)R=z=>c-Math.exp(-M*z)*(C+(_+M*C)*z);else{const z=M*Math.sqrt(I*I-1);R=U=>{const A=Math.exp(-I*M*U),E=Math.min(z*U,300);return c-A*((_+I*M*C)*Math.sinh(E)+z*C*Math.cosh(E))/z}}const K={calculatedDuration:S&&y||null,next:z=>{const U=R(z);if(S)f.done=z>=y;else{let A=z===0?_:0;I<1&&(A=z===0?Ci(_):QE(R,z,U));const E=Math.abs(A)<=r,N=Math.abs(c-U)<=s;f.done=E&&N}return f.value=f.done?c:U,f},toString:()=>{const z=Math.min(v0(K),Fh),U=GE(A=>K.next(z*A).value,z,30);return z+"ms "+U},toTransition:()=>{}};return K}Uh.applyToOptions=n=>{const e=q3(n,100,Uh);return n.ease=e.ease,n.duration=Ci(e.duration),n.type="keyframes",n};function bg({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:l=500,modifyTarget:c,min:f,max:d,restDelta:m=.5,restSpeed:g}){const y=n[0],x={done:!1,value:y},S=E=>f!==void 0&&E<f||d!==void 0&&E>d,_=E=>f===void 0?d:d===void 0||Math.abs(f-E)<Math.abs(d-E)?f:d;let I=t*e;const C=y+I,M=c===void 0?C:c(C);M!==C&&(I=M-y);const D=E=>-I*Math.exp(-E/r),R=E=>M+D(E),K=E=>{const N=D(E),V=R(E);x.done=Math.abs(N)<=m,x.value=x.done?M:V};let z,U;const A=E=>{S(x.value)&&(z=E,U=Uh({keyframes:[x.value,_(x.value)],velocity:QE(R,E,x.value),damping:s,stiffness:l,restDelta:m,restSpeed:g}))};return A(0),{calculatedDuration:null,next:E=>{let N=!1;return!U&&z===void 0&&(N=!0,K(E),A(E)),z!==void 0&&E>=z?U.next(E-z):(!N&&K(E),x)}}}function t6(n,e,t){const r=[],s=t||Di.mix||qE,l=n.length-1;for(let c=0;c<l;c++){let f=s(n[c],n[c+1]);if(e){const d=Array.isArray(e)?e[c]||Zn:e;f=xu(d,f)}r.push(f)}return r}function n6(n,e,{clamp:t=!0,ease:r,mixer:s}={}){const l=n.length;if(c0(l===e.length),l===1)return()=>e[0];if(l===2&&e[0]===e[1])return()=>e[1];const c=n[0]===n[1];n[0]>n[l-1]&&(n=[...n].reverse(),e=[...e].reverse());const f=t6(e,r,s),d=f.length,m=g=>{if(c&&g<n[0])return e[0];let y=0;if(d>1)for(;y<n.length-2&&!(g<n[y+1]);y++);const x=tu(n[y],n[y+1],g);return f[y](x)};return t?g=>m(ei(n[0],n[l-1],g)):m}function r6(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const s=tu(0,e,r);n.push(ft(t,1,s))}}function i6(n){const e=[0];return r6(e,n.length-1),e}function s6(n,e){return n.map(t=>t*e)}function o6(n,e){return n.map(()=>e||VE).splice(0,n.length-1)}function Fc({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const s=y3(r)?r.map(Fw):Fw(r),l={done:!1,value:e[0]},c=s6(t&&t.length===e.length?t:i6(e),n),f=n6(c,e,{ease:Array.isArray(s)?s:o6(e,s)});return{calculatedDuration:n,next:d=>(l.value=f(d),l.done=d>=n,l)}}const a6=n=>n!==null;function x0(n,{repeat:e,repeatType:t="loop"},r,s=1){const l=n.filter(a6),f=s<0||e&&t!=="loop"&&e%2===1?0:l.length-1;return!f||r===void 0?l[f]:r}const l6={decay:bg,inertia:bg,tween:Fc,keyframes:Fc,spring:Uh};function YE(n){typeof n.type=="string"&&(n.type=l6[n.type])}class w0{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const c6=n=>n/100;class k0 extends w0{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:t}=this.options;t&&t.updatedAt!==mn.now()&&this.tick(mn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;YE(e);const{type:t=Fc,repeat:r=0,repeatDelay:s=0,repeatType:l,velocity:c=0}=e;let{keyframes:f}=e;const d=t||Fc;d!==Fc&&typeof f[0]!="number"&&(this.mixKeyframes=xu(c6,qE(f[0],f[1])),f=[0,100]);const m=d({...e,keyframes:f});l==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...f].reverse(),velocity:-c})),m.calculatedDuration===null&&(m.calculatedDuration=v0(m));const{calculatedDuration:g}=m;this.calculatedDuration=g,this.resolvedDuration=g+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=m}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:r,totalDuration:s,mixKeyframes:l,mirroredGenerator:c,resolvedDuration:f,calculatedDuration:d}=this;if(this.startTime===null)return r.next(0);const{delay:m=0,keyframes:g,repeat:y,repeatType:x,repeatDelay:S,type:_,onUpdate:I,finalKeyframe:C}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const M=this.currentTime-m*(this.playbackSpeed>=0?1:-1),D=this.playbackSpeed>=0?M<0:M>s;this.currentTime=Math.max(M,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let R=this.currentTime,K=r;if(y){const E=Math.min(this.currentTime,s)/f;let N=Math.floor(E),V=E%1;!V&&E>=1&&(V=1),V===1&&N--,N=Math.min(N,y+1),!!(N%2)&&(x==="reverse"?(V=1-V,S&&(V-=S/f)):x==="mirror"&&(K=c)),R=ei(0,1,V)*f}const z=D?{done:!1,value:g[0]}:K.next(R);l&&(z.value=l(z.value));let{done:U}=z;!D&&d!==null&&(U=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const A=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&U);return A&&_!==bg&&(z.value=x0(g,this.options,C,this.speed)),I&&I(z.value),A&&this.finish(),z}then(e,t){return this.finished.then(e,t)}get duration(){return Xn(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Xn(e)}get time(){return Xn(this.currentTime)}set time(e){var t;e=Ci(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(t=this.driver)==null||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(mn.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Xn(this.currentTime))}play(){var s,l;if(this.isStopped)return;const{driver:e=K3,startTime:t}=this.options;this.driver||(this.driver=e(c=>this.tick(c))),(l=(s=this.options).onPlay)==null||l.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=t??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(mn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",(t=(e=this.options).onComplete)==null||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(t=(e=this.options).onCancel)==null||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(t=this.driver)==null||t.stop(),e.observe(this)}}function u6(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const To=n=>n*180/Math.PI,_g=n=>{const e=To(Math.atan2(n[1],n[0]));return Sg(e)},d6={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:_g,rotateZ:_g,skewX:n=>To(Math.atan(n[1])),skewY:n=>To(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},Sg=n=>(n=n%360,n<0&&(n+=360),n),Gw=_g,Qw=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),Yw=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),h6={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Qw,scaleY:Yw,scale:n=>(Qw(n)+Yw(n))/2,rotateX:n=>Sg(To(Math.atan2(n[6],n[5]))),rotateY:n=>Sg(To(Math.atan2(-n[2],n[0]))),rotateZ:Gw,rotate:Gw,skewX:n=>To(Math.atan(n[4])),skewY:n=>To(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function Eg(n){return n.includes("scale")?1:0}function Tg(n,e){if(!n||n==="none")return Eg(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(t)r=h6,s=t;else{const f=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=d6,s=f}if(!s)return Eg(e);const l=r[e],c=s[1].split(",").map(m6);return typeof l=="function"?l(c):c[l]}const f6=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return Tg(t,e)};function m6(n){return parseFloat(n.trim())}const El=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Tl=new Set(El),Xw=n=>n===Sl||n===ye,p6=new Set(["x","y","z"]),g6=El.filter(n=>!p6.has(n));function y6(n){const e=[];return g6.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const _s={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>Tg(e,"x"),y:(n,{transform:e})=>Tg(e,"y")};_s.translateX=_s.x;_s.translateY=_s.y;const Ao=new Set;let Ig=!1,Cg=!1,Ag=!1;function XE(){if(Cg){const n=Array.from(Ao).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const s=y6(r);s.length&&(t.set(r,s),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=t.get(r);s&&s.forEach(([l,c])=>{var f;(f=r.getValue(l))==null||f.set(c)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Cg=!1,Ig=!1,Ao.forEach(n=>n.complete(Ag)),Ao.clear()}function JE(){Ao.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Cg=!0)})}function v6(){Ag=!0,JE(),XE(),Ag=!1}class b0{constructor(e,t,r,s,l,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=s,this.element=l,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(Ao.add(this),Ig||(Ig=!0,ot.read(JE),ot.resolveKeyframes(XE))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:s}=this;if(e[0]===null){const l=s==null?void 0:s.get(),c=e[e.length-1];if(l!==void 0)e[0]=l;else if(r&&t){const f=r.readValue(t,c);f!=null&&(e[0]=f)}e[0]===void 0&&(e[0]=c),s&&l===void 0&&s.set(e[0])}u6(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Ao.delete(this)}cancel(){this.state==="scheduled"&&(Ao.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const x6=n=>n.startsWith("--");function w6(n,e,t){x6(e)?n.style.setProperty(e,t):n.style[e]=t}const k6=u0(()=>window.ScrollTimeline!==void 0),b6={};function _6(n,e){const t=u0(n);return()=>b6[e]??t()}const ZE=_6(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Pc=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,Jw={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Pc([0,.65,.55,1]),circOut:Pc([.55,0,1,.45]),backIn:Pc([.31,.01,.66,-.59]),backOut:Pc([.33,1.53,.69,.99])};function e2(n,e){if(n)return typeof n=="function"?ZE()?GE(n,e):"ease-out":LE(n)?Pc(n):Array.isArray(n)?n.map(t=>e2(t,e)||Jw.easeOut):Jw[n]}function S6(n,e,t,{delay:r=0,duration:s=300,repeat:l=0,repeatType:c="loop",ease:f="easeOut",times:d}={},m=void 0){const g={[e]:t};d&&(g.offset=d);const y=e2(f,s);Array.isArray(y)&&(g.easing=y);const x={delay:r,duration:s,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:l+1,direction:c==="reverse"?"alternate":"normal"};return m&&(x.pseudoElement=m),n.animate(g,x)}function t2(n){return typeof n=="function"&&"applyToOptions"in n}function E6({type:n,...e}){return t2(n)&&ZE()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class T6 extends w0{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:t,name:r,keyframes:s,pseudoElement:l,allowFlatten:c=!1,finalKeyframe:f,onComplete:d}=e;this.isPseudoElement=!!l,this.allowFlatten=c,this.options=e,c0(typeof e.type!="string");const m=E6(e);this.animation=S6(t,r,s,m,l),m.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!l){const g=x0(s,this.options,f,this.speed);this.updateMotionValue?this.updateMotionValue(g):w6(t,r,g),this.animation.cancel()}d==null||d(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;(t=(e=this.animation).finish)==null||t.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(t=(e=this.animation).commitStyles)==null||t.call(e)}get duration(){var t,r;const e=((r=(t=this.animation.effect)==null?void 0:t.getComputedTiming)==null?void 0:r.call(t).duration)||0;return Xn(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Xn(e)}get time(){return Xn(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=Ci(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&k6()?(this.animation.timeline=e,Zn):t(this)}}const n2={anticipate:NE,backInOut:PE,circInOut:DE};function I6(n){return n in n2}function C6(n){typeof n.ease=="string"&&I6(n.ease)&&(n.ease=n2[n.ease])}const Sp=10;class A6 extends T6{constructor(e){C6(e),YE(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:r,onComplete:s,element:l,...c}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const f=new k0({...c,autoplay:!1}),d=Math.max(Sp,mn.now()-this.startTime),m=ei(0,Sp,d-Sp);t.setWithVelocity(f.sample(Math.max(0,d-m)).value,f.sample(d).value,m),f.stop()}}const Zw=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Os.test(n)||n==="0")&&!n.startsWith("url("));function j6(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function R6(n,e,t,r){const s=n[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const l=n[n.length-1],c=Zw(s,e),f=Zw(l,e);return!c||!f?!1:j6(n)||(t==="spring"||t2(t))&&r}function jg(n){n.duration=0,n.type="keyframes"}const P6=new Set(["opacity","clipPath","filter","transform"]),N6=u0(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function M6(n){var g;const{motionValue:e,name:t,repeatDelay:r,repeatType:s,damping:l,type:c}=n;if(!(((g=e==null?void 0:e.owner)==null?void 0:g.current)instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:m}=e.owner.getProps();return N6()&&t&&P6.has(t)&&(t!=="transform"||!m)&&!d&&!r&&s!=="mirror"&&l!==0&&c!=="inertia"}const D6=40;class V6 extends w0{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:s=0,repeatDelay:l=0,repeatType:c="loop",keyframes:f,name:d,motionValue:m,element:g,...y}){var _;super(),this.stop=()=>{var I,C;this._animation&&(this._animation.stop(),(I=this.stopTimeline)==null||I.call(this)),(C=this.keyframeResolver)==null||C.cancel()},this.createdAt=mn.now();const x={autoplay:e,delay:t,type:r,repeat:s,repeatDelay:l,repeatType:c,name:d,motionValue:m,element:g,...y},S=(g==null?void 0:g.KeyframeResolver)||b0;this.keyframeResolver=new S(f,(I,C,M)=>this.onKeyframesResolved(I,C,x,!M),d,m,g),(_=this.keyframeResolver)==null||_.scheduleResolve()}onKeyframesResolved(e,t,r,s){var C,M;this.keyframeResolver=void 0;const{name:l,type:c,velocity:f,delay:d,isHandoff:m,onUpdate:g}=r;this.resolvedAt=mn.now(),R6(e,l,c,f)||((Di.instantAnimations||!d)&&(g==null||g(x0(e,r,t))),e[0]=e[e.length-1],jg(r),r.repeat=0);const x={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>D6?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...r,keyframes:e},S=!m&&M6(x),_=(M=(C=x.motionValue)==null?void 0:C.owner)==null?void 0:M.current,I=S?new A6({...x,element:_}):new k0(x);I.finished.then(()=>{this.notifyFinished()}).catch(Zn),this.pendingTimeline&&(this.stopTimeline=I.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=I}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),v6()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}function r2(n,e,t,r=0,s=1){const l=Array.from(n).sort((m,g)=>m.sortNodePosition(g)).indexOf(e),c=n.size,f=(c-1)*r;return typeof t=="function"?t(l,c):s===1?l*r:f-l*r}const L6=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function O6(n){const e=L6.exec(n);if(!e)return[,];const[,t,r,s]=e;return[`--${t??r}`,s]}function i2(n,e,t=1){const[r,s]=O6(n);if(!r)return;const l=window.getComputedStyle(e).getPropertyValue(r);if(l){const c=l.trim();return SE(c)?parseFloat(c):c}return m0(s)?i2(s,e,t+1):s}const B6={type:"spring",stiffness:500,damping:25,restSpeed:10},z6=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),F6={type:"keyframes",duration:.8},U6={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},W6=(n,{keyframes:e})=>e.length>2?F6:Tl.has(n)?n.startsWith("scale")?z6(e[1]):B6:U6,$6=n=>n!==null;function H6(n,{repeat:e,repeatType:t="loop"},r){const s=n.filter($6),l=e&&t!=="loop"&&e%2===1?0:s.length-1;return s[l]}function _0(n,e){return(n==null?void 0:n[e])??(n==null?void 0:n.default)??n}function K6({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:s,repeat:l,repeatType:c,repeatDelay:f,from:d,elapsed:m,...g}){return!!Object.keys(g).length}const S0=(n,e,t,r={},s,l)=>c=>{const f=_0(r,n)||{},d=f.delay||r.delay||0;let{elapsed:m=0}=r;m=m-Ci(d);const g={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...f,delay:-m,onUpdate:x=>{e.set(x),f.onUpdate&&f.onUpdate(x)},onComplete:()=>{c(),f.onComplete&&f.onComplete()},name:n,motionValue:e,element:l?void 0:s};K6(f)||Object.assign(g,W6(n,g)),g.duration&&(g.duration=Ci(g.duration)),g.repeatDelay&&(g.repeatDelay=Ci(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let y=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(jg(g),g.delay===0&&(y=!0)),(Di.instantAnimations||Di.skipAnimations)&&(y=!0,jg(g),g.delay=0),g.allowFlatten=!f.type&&!f.ease,y&&!l&&e.get()!==void 0){const x=H6(g.keyframes,f);if(x!==void 0){ot.update(()=>{g.onUpdate(x),g.onComplete()});return}}return f.isSync?new k0(g):new V6(g)};function ek(n){const e=[{},{}];return n==null||n.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function E0(n,e,t,r){if(typeof e=="function"){const[s,l]=ek(r);e=e(t!==void 0?t:n.custom,s,l)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[s,l]=ek(r);e=e(t!==void 0?t:n.custom,s,l)}return e}function Qa(n,e,t){const r=n.getProps();return E0(r,e,t!==void 0?t:r.custom,n)}const s2=new Set(["width","height","top","left","right","bottom",...El]),tk=30,q6=n=>!isNaN(parseFloat(n));class G6{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var l;const s=mn.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((l=this.events.change)==null||l.notify(this.current),this.dependents))for(const c of this.dependents)c.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=mn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=q6(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new d0);const r=this.events[e].add(t);return e==="change"?()=>{r(),ot.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=mn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>tk)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,tk);return IE(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;(e=this.dependents)==null||e.clear(),(t=this.events.destroy)==null||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function al(n,e){return new G6(n,e)}const Rg=n=>Array.isArray(n);function Q6(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,al(t))}function Y6(n){return Rg(n)?n[n.length-1]||0:n}function X6(n,e){const t=Qa(n,e);let{transitionEnd:r={},transition:s={},...l}=t||{};l={...l,...r};for(const c in l){const f=Y6(l[c]);Q6(n,c,f)}}const ln=n=>!!(n&&n.getVelocity);function J6(n){return!!(ln(n)&&n.add)}function Pg(n,e){const t=n.getValue("willChange");if(J6(t))return t.add(e);if(!t&&Di.WillChange){const r=new Di.WillChange("auto");n.addValue("willChange",r),r.add(e)}}function T0(n){return n.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const Z6="framerAppearId",o2="data-"+T0(Z6);function a2(n){return n.props[o2]}function eL({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function l2(n,e,{delay:t=0,transitionOverride:r,type:s}={}){let{transition:l=n.getDefaultTransition(),transitionEnd:c,...f}=e;r&&(l=r);const d=[],m=s&&n.animationState&&n.animationState.getState()[s];for(const g in f){const y=n.getValue(g,n.latestValues[g]??null),x=f[g];if(x===void 0||m&&eL(m,g))continue;const S={delay:t,..._0(l||{},g)},_=y.get();if(_!==void 0&&!y.isAnimating&&!Array.isArray(x)&&x===_&&!S.velocity)continue;let I=!1;if(window.MotionHandoffAnimation){const M=a2(n);if(M){const D=window.MotionHandoffAnimation(M,g,ot);D!==null&&(S.startTime=D,I=!0)}}Pg(n,g),y.start(S0(g,y,x,n.shouldReduceMotion&&s2.has(g)?{type:!1}:S,n,I));const C=y.animation;C&&d.push(C)}return c&&Promise.all(d).then(()=>{ot.update(()=>{c&&X6(n,c)})}),d}function Ng(n,e,t={}){var d;const r=Qa(n,e,t.type==="exit"?(d=n.presenceContext)==null?void 0:d.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(s=t.transitionOverride);const l=r?()=>Promise.all(l2(n,r,t)):()=>Promise.resolve(),c=n.variantChildren&&n.variantChildren.size?(m=0)=>{const{delayChildren:g=0,staggerChildren:y,staggerDirection:x}=s;return tL(n,e,m,g,y,x,t)}:()=>Promise.resolve(),{when:f}=s;if(f){const[m,g]=f==="beforeChildren"?[l,c]:[c,l];return m().then(()=>g())}else return Promise.all([l(),c(t.delay)])}function tL(n,e,t=0,r=0,s=0,l=1,c){const f=[];for(const d of n.variantChildren)d.notify("AnimationStart",e),f.push(Ng(d,e,{...c,delay:t+(typeof r=="function"?0:r)+r2(n.variantChildren,d,r,s,l)}).then(()=>d.notify("AnimationComplete",e)));return Promise.all(f)}function nL(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(l=>Ng(n,l,t));r=Promise.all(s)}else if(typeof e=="string")r=Ng(n,e,t);else{const s=typeof e=="function"?Qa(n,e,t.custom):e;r=Promise.all(l2(n,s,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}const rL={test:n=>n==="auto",parse:n=>n},c2=n=>e=>e.test(n),u2=[Sl,ye,Xr,ys,j3,A3,rL],nk=n=>u2.find(c2(n));function iL(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||TE(n):!0}const sL=new Set(["brightness","contrast","saturate","opacity"]);function oL(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(p0)||[];if(!r)return n;const s=t.replace(r,"");let l=sL.has(e)?1:0;return r!==t&&(l*=100),e+"("+l+s+")"}const aL=/\b([a-z-]*)\(.*?\)/gu,Mg={...Os,getAnimatableNone:n=>{const e=n.match(aL);return e?e.map(oL).join(" "):n}},rk={...Sl,transform:Math.round},lL={rotate:ys,rotateX:ys,rotateY:ys,rotateZ:ys,scale:Xd,scaleX:Xd,scaleY:Xd,scaleZ:Xd,skew:ys,skewX:ys,skewY:ys,distance:ye,translateX:ye,translateY:ye,translateZ:ye,x:ye,y:ye,z:ye,perspective:ye,transformPerspective:ye,opacity:nu,originX:Ww,originY:Ww,originZ:ye},I0={borderWidth:ye,borderTopWidth:ye,borderRightWidth:ye,borderBottomWidth:ye,borderLeftWidth:ye,borderRadius:ye,radius:ye,borderTopLeftRadius:ye,borderTopRightRadius:ye,borderBottomRightRadius:ye,borderBottomLeftRadius:ye,width:ye,maxWidth:ye,height:ye,maxHeight:ye,top:ye,right:ye,bottom:ye,left:ye,inset:ye,insetBlock:ye,insetBlockStart:ye,insetBlockEnd:ye,insetInline:ye,insetInlineStart:ye,insetInlineEnd:ye,padding:ye,paddingTop:ye,paddingRight:ye,paddingBottom:ye,paddingLeft:ye,paddingBlock:ye,paddingBlockStart:ye,paddingBlockEnd:ye,paddingInline:ye,paddingInlineStart:ye,paddingInlineEnd:ye,margin:ye,marginTop:ye,marginRight:ye,marginBottom:ye,marginLeft:ye,marginBlock:ye,marginBlockStart:ye,marginBlockEnd:ye,marginInline:ye,marginInlineStart:ye,marginInlineEnd:ye,backgroundPositionX:ye,backgroundPositionY:ye,...lL,zIndex:rk,fillOpacity:nu,strokeOpacity:nu,numOctaves:rk},cL={...I0,color:At,backgroundColor:At,outlineColor:At,fill:At,stroke:At,borderColor:At,borderTopColor:At,borderRightColor:At,borderBottomColor:At,borderLeftColor:At,filter:Mg,WebkitFilter:Mg},d2=n=>cL[n];function h2(n,e){let t=d2(n);return t!==Mg&&(t=Os),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const uL=new Set(["auto","none","0"]);function dL(n,e,t){let r=0,s;for(;r<n.length&&!s;){const l=n[r];typeof l=="string"&&!uL.has(l)&&ru(l).values.length&&(s=n[r]),r++}if(s&&t)for(const l of e)n[l]=h2(t,s)}class hL extends b0{constructor(e,t,r,s,l){super(e,t,r,s,l,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let g=0;g<e.length;g++){let y=e[g];if(typeof y=="string"&&(y=y.trim(),m0(y))){const x=i2(y,t.current);x!==void 0&&(e[g]=x),g===e.length-1&&(this.finalKeyframe=y)}}if(this.resolveNoneKeyframes(),!s2.has(r)||e.length!==2)return;const[s,l]=e,c=nk(s),f=nk(l),d=Uw(s),m=Uw(l);if(d!==m&&_s[r]){this.needsMeasurement=!0;return}if(c!==f)if(Xw(c)&&Xw(f))for(let g=0;g<e.length;g++){const y=e[g];typeof y=="string"&&(e[g]=parseFloat(y))}else _s[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||iL(e[s]))&&r.push(s);r.length&&dL(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=_s[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const s=t[t.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var f;const{element:e,name:t,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(t);s&&s.jump(this.measuredOrigin,!1);const l=r.length-1,c=r[l];r[l]=_s[t](e.measureViewportBox(),window.getComputedStyle(e.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),(f=this.removedTransforms)!=null&&f.length&&this.removedTransforms.forEach(([d,m])=>{e.getValue(d).set(m)}),this.resolveNoneKeyframes()}}function fL(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let r=document;const s=(t==null?void 0:t[n])??r.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n)}const f2=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function m2(n){return EE(n)&&"offsetHeight"in n}const{schedule:C0}=OE(queueMicrotask,!1),yr={x:!1,y:!1};function p2(){return yr.x||yr.y}function mL(n){return n==="x"||n==="y"?yr[n]?null:(yr[n]=!0,()=>{yr[n]=!1}):yr.x||yr.y?null:(yr.x=yr.y=!0,()=>{yr.x=yr.y=!1})}function g2(n,e){const t=fL(n),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[t,s,()=>r.abort()]}function ik(n){return!(n.pointerType==="touch"||p2())}function pL(n,e,t={}){const[r,s,l]=g2(n,t),c=f=>{if(!ik(f))return;const{target:d}=f,m=e(d,f);if(typeof m!="function"||!d)return;const g=y=>{ik(y)&&(m(y),d.removeEventListener("pointerleave",g))};d.addEventListener("pointerleave",g,s)};return r.forEach(f=>{f.addEventListener("pointerenter",c,s)}),l}const y2=(n,e)=>e?n===e?!0:y2(n,e.parentElement):!1,A0=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,gL=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function v2(n){return gL.has(n.tagName)||n.isContentEditable===!0}const ph=new WeakSet;function sk(n){return e=>{e.key==="Enter"&&n(e)}}function Ep(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const yL=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=sk(()=>{if(ph.has(t))return;Ep(t,"down");const s=sk(()=>{Ep(t,"up")}),l=()=>Ep(t,"cancel");t.addEventListener("keyup",s,e),t.addEventListener("blur",l,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function ok(n){return A0(n)&&!p2()}function vL(n,e,t={}){const[r,s,l]=g2(n,t),c=f=>{const d=f.currentTarget;if(!ok(f))return;ph.add(d);const m=e(d,f),g=(S,_)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",x),ph.has(d)&&ph.delete(d),ok(S)&&typeof m=="function"&&m(S,{success:_})},y=S=>{g(S,d===window||d===document||t.useGlobalTarget||y2(d,S.target))},x=S=>{g(S,!1)};window.addEventListener("pointerup",y,s),window.addEventListener("pointercancel",x,s)};return r.forEach(f=>{(t.useGlobalTarget?window:f).addEventListener("pointerdown",c,s),m2(f)&&(f.addEventListener("focus",m=>yL(m,s)),!v2(f)&&!f.hasAttribute("tabindex")&&(f.tabIndex=0))}),l}function x2(n){return EE(n)&&"ownerSVGElement"in n}function xL(n){return x2(n)&&n.tagName==="svg"}const wL=[...u2,At,Os],kL=n=>wL.find(c2(n)),ak=()=>({translate:0,scale:1,origin:0,originPoint:0}),Oa=()=>({x:ak(),y:ak()}),lk=()=>({min:0,max:0}),Vt=()=>({x:lk(),y:lk()}),Dg={current:null},w2={current:!1},bL=typeof window<"u";function _L(){if(w2.current=!0,!!bL)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>Dg.current=n.matches;n.addEventListener("change",e),e()}else Dg.current=!1}const SL=new WeakMap;function Sf(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function iu(n){return typeof n=="string"||Array.isArray(n)}const j0=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],R0=["initial",...j0];function Ef(n){return Sf(n.animate)||R0.some(e=>iu(n[e]))}function k2(n){return!!(Ef(n)||n.variants)}function EL(n,e,t){for(const r in e){const s=e[r],l=t[r];if(ln(s))n.addValue(r,s);else if(ln(l))n.addValue(r,al(s,{owner:n}));else if(l!==s)if(n.hasValue(r)){const c=n.getValue(r);c.liveStyle===!0?c.jump(s):c.hasAnimated||c.set(s)}else{const c=n.getStaticValue(r);n.addValue(r,al(c!==void 0?c:s,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const ck=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let Wh={};function b2(n){Wh=n}function TL(){return Wh}class IL{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:l,visualState:c},f={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=b0,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=mn.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,ot.render(this.render,!1,!0))};const{latestValues:d,renderState:m}=c;this.latestValues=d,this.baseTarget={...d},this.initialValues=t.initial?{...d}:{},this.renderState=m,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=f,this.blockInitialAnimation=!!l,this.isControllingVariants=Ef(t),this.isVariantNode=k2(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...y}=this.scrapeMotionValuesFromProps(t,{},this);for(const x in y){const S=y[x];d[x]!==void 0&&ln(S)&&S.set(d[x])}}mount(e){var t;this.current=e,SL.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,s)=>this.bindToMotionValue(s,r)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(w2.current||_L(),this.shouldReduceMotion=Dg.current),(t=this.parent)==null||t.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),Ls(this.notifyUpdate),Ls(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Tl.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=t.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&ot.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let l;typeof window<"u"&&window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{s(),l&&l(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Wh){const t=Wh[e];if(!t)continue;const{isEnabled:r,Feature:s}=t;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const l=this.features[e];l.isMounted?l.update():(l.mount(),l.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Vt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<ck.length;r++){const s=ck[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const l="on"+s,c=e[l];c&&(this.propEventSubscriptions[s]=this.on(s,c))}this.prevMotionValues=EL(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=al(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(SE(r)||TE(r))?r=parseFloat(r):!kL(r)&&Os.test(t)&&(r=h2(e,t)),this.setBaseTarget(e,ln(r)?r.get():r)),ln(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var l;const{initial:t}=this.props;let r;if(typeof t=="string"||typeof t=="object"){const c=E0(this.props,t,(l=this.presenceContext)==null?void 0:l.custom);c&&(r=c[e])}if(t&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!ln(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new d0),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){C0.render(this.render)}}class _2 extends IL{constructor(){super(...arguments),this.KeyframeResolver=hL}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){const r=e.style;return r?r[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ln(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}class $s{constructor(e){this.isMounted=!1,this.node=e}update(){}}function S2({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function CL({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function AL(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function Tp(n){return n===void 0||n===1}function Vg({scale:n,scaleX:e,scaleY:t}){return!Tp(n)||!Tp(e)||!Tp(t)}function bo(n){return Vg(n)||E2(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function E2(n){return uk(n.x)||uk(n.y)}function uk(n){return n&&n!=="0%"}function $h(n,e,t){const r=n-t,s=e*r;return t+s}function dk(n,e,t,r,s){return s!==void 0&&(n=$h(n,s,r)),$h(n,t,r)+e}function Lg(n,e=0,t=1,r,s){n.min=dk(n.min,e,t,r,s),n.max=dk(n.max,e,t,r,s)}function T2(n,{x:e,y:t}){Lg(n.x,e.translate,e.scale,e.originPoint),Lg(n.y,t.translate,t.scale,t.originPoint)}const hk=.999999999999,fk=1.0000000000001;function jL(n,e,t,r=!1){const s=t.length;if(!s)return;e.x=e.y=1;let l,c;for(let f=0;f<s;f++){l=t[f],c=l.projectionDelta;const{visualElement:d}=l.options;d&&d.props.style&&d.props.style.display==="contents"||(r&&l.options.layoutScroll&&l.scroll&&l!==l.root&&za(n,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,T2(n,c)),r&&bo(l.latestValues)&&za(n,l.latestValues))}e.x<fk&&e.x>hk&&(e.x=1),e.y<fk&&e.y>hk&&(e.y=1)}function Ba(n,e){n.min=n.min+e,n.max=n.max+e}function mk(n,e,t,r,s=.5){const l=ft(n.min,n.max,s);Lg(n,e,t,l,r)}function za(n,e){mk(n.x,e.x,e.scaleX,e.scale,e.originX),mk(n.y,e.y,e.scaleY,e.scale,e.originY)}function I2(n,e){return S2(AL(n.getBoundingClientRect(),e))}function RL(n,e,t){const r=I2(n,t),{scroll:s}=e;return s&&(Ba(r.x,s.offset.x),Ba(r.y,s.offset.y)),r}const PL={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},NL=El.length;function ML(n,e,t){let r="",s=!0;for(let l=0;l<NL;l++){const c=El[l],f=n[c];if(f===void 0)continue;let d=!0;if(typeof f=="number"?d=f===(c.startsWith("scale")?1:0):d=parseFloat(f)===0,!d||t){const m=f2(f,I0[c]);if(!d){s=!1;const g=PL[c]||c;r+=`${g}(${m}) `}t&&(e[c]=m)}}return r=r.trim(),t?r=t(e,s?"":r):s&&(r="none"),r}function P0(n,e,t){const{style:r,vars:s,transformOrigin:l}=n;let c=!1,f=!1;for(const d in e){const m=e[d];if(Tl.has(d)){c=!0;continue}else if(zE(d)){s[d]=m;continue}else{const g=f2(m,I0[d]);d.startsWith("origin")?(f=!0,l[d]=g):r[d]=g}}if(e.transform||(c||t?r.transform=ML(e,n.transform,t):r.transform&&(r.transform="none")),f){const{originX:d="50%",originY:m="50%",originZ:g=0}=l;r.transformOrigin=`${d} ${m} ${g}`}}function C2(n,{style:e,vars:t},r,s){const l=n.style;let c;for(c in e)l[c]=e[c];s==null||s.applyProjectionStyles(l,r);for(c in t)l.setProperty(c,t[c])}function pk(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Sc={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(ye.test(n))n=parseFloat(n);else return n;const t=pk(n,e.target.x),r=pk(n,e.target.y);return`${t}% ${r}%`}},DL={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,s=Os.parse(n);if(s.length>5)return r;const l=Os.createTransformer(n),c=typeof s[0]!="number"?1:0,f=t.x.scale*e.x,d=t.y.scale*e.y;s[0+c]/=f,s[1+c]/=d;const m=ft(f,d,.5);return typeof s[2+c]=="number"&&(s[2+c]/=m),typeof s[3+c]=="number"&&(s[3+c]/=m),l(s)}},Og={borderRadius:{...Sc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Sc,borderTopRightRadius:Sc,borderBottomLeftRadius:Sc,borderBottomRightRadius:Sc,boxShadow:DL};function A2(n,{layout:e,layoutId:t}){return Tl.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Og[n]||n==="opacity")}function N0(n,e,t){var c;const r=n.style,s=e==null?void 0:e.style,l={};if(!r)return l;for(const f in r)(ln(r[f])||s&&ln(s[f])||A2(f,n)||((c=t==null?void 0:t.getValue(f))==null?void 0:c.liveStyle)!==void 0)&&(l[f]=r[f]);return l}function VL(n){return window.getComputedStyle(n)}class LL extends _2{constructor(){super(...arguments),this.type="html",this.renderInstance=C2}readValueFromInstance(e,t){var r;if(Tl.has(t))return(r=this.projection)!=null&&r.isProjecting?Eg(t):f6(e,t);{const s=VL(e),l=(zE(t)?s.getPropertyValue(t):s[t])||0;return typeof l=="string"?l.trim():l}}measureInstanceViewportBox(e,{transformPagePoint:t}){return I2(e,t)}build(e,t,r){P0(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return N0(e,t,r)}}const OL={offset:"stroke-dashoffset",array:"stroke-dasharray"},BL={offset:"strokeDashoffset",array:"strokeDasharray"};function zL(n,e,t=1,r=0,s=!0){n.pathLength=1;const l=s?OL:BL;n[l.offset]=ye.transform(-r);const c=ye.transform(e),f=ye.transform(t);n[l.array]=`${c} ${f}`}const FL=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function j2(n,{attrX:e,attrY:t,attrScale:r,pathLength:s,pathSpacing:l=1,pathOffset:c=0,...f},d,m,g){if(P0(n,f,m),d){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:y,style:x}=n;y.transform&&(x.transform=y.transform,delete y.transform),(x.transform||y.transformOrigin)&&(x.transformOrigin=y.transformOrigin??"50% 50%",delete y.transformOrigin),x.transform&&(x.transformBox=(g==null?void 0:g.transformBox)??"fill-box",delete y.transformBox);for(const S of FL)y[S]!==void 0&&(x[S]=y[S],delete y[S]);e!==void 0&&(y.x=e),t!==void 0&&(y.y=t),r!==void 0&&(y.scale=r),s!==void 0&&zL(y,s,l,c,!1)}const R2=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),P2=n=>typeof n=="string"&&n.toLowerCase()==="svg";function UL(n,e,t,r){C2(n,e,void 0,r);for(const s in e.attrs)n.setAttribute(R2.has(s)?s:T0(s),e.attrs[s])}function N2(n,e,t){const r=N0(n,e,t);for(const s in n)if(ln(n[s])||ln(e[s])){const l=El.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[l]=n[s]}return r}class WL extends _2{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Vt}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Tl.has(t)){const r=d2(t);return r&&r.default||0}return t=R2.has(t)?t:T0(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return N2(e,t,r)}build(e,t,r){j2(e,t,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,t,r,s){UL(e,t,r,s)}mount(e){this.isSVGTag=P2(e.tagName),super.mount(e)}}const $L=R0.length;function M2(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?M2(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<$L;t++){const r=R0[t],s=n.props[r];(iu(s)||s===!1)&&(e[r]=s)}return e}function D2(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}const HL=[...j0].reverse(),KL=j0.length;function qL(n){return e=>Promise.all(e.map(({animation:t,options:r})=>nL(n,t,r)))}function GL(n){let e=qL(n),t=gk(),r=!0;const s=d=>(m,g)=>{var x;const y=Qa(n,g,d==="exit"?(x=n.presenceContext)==null?void 0:x.custom:void 0);if(y){const{transition:S,transitionEnd:_,...I}=y;m={...m,...I,..._}}return m};function l(d){e=d(n)}function c(d){const{props:m}=n,g=M2(n.parent)||{},y=[],x=new Set;let S={},_=1/0;for(let C=0;C<KL;C++){const M=HL[C],D=t[M],R=m[M]!==void 0?m[M]:g[M],K=iu(R),z=M===d?D.isActive:null;z===!1&&(_=C);let U=R===g[M]&&R!==m[M]&&K;if(U&&r&&n.manuallyAnimateOnMount&&(U=!1),D.protectedKeys={...S},!D.isActive&&z===null||!R&&!D.prevProp||Sf(R)||typeof R=="boolean")continue;const A=QL(D.prevProp,R);let E=A||M===d&&D.isActive&&!U&&K||C>_&&K,N=!1;const V=Array.isArray(R)?R:[R];let B=V.reduce(s(M),{});z===!1&&(B={});const{prevResolvedValues:$={}}=D,O={...$,...B},Ve=Te=>{E=!0,x.has(Te)&&(N=!0,x.delete(Te)),D.needsAnimating[Te]=!0;const ie=n.getValue(Te);ie&&(ie.liveStyle=!1)};for(const Te in O){const ie=B[Te],me=$[Te];if(S.hasOwnProperty(Te))continue;let ce=!1;Rg(ie)&&Rg(me)?ce=!D2(ie,me):ce=ie!==me,ce?ie!=null?Ve(Te):x.add(Te):ie!==void 0&&x.has(Te)?Ve(Te):D.protectedKeys[Te]=!0}D.prevProp=R,D.prevResolvedValues=B,D.isActive&&(S={...S,...B}),r&&n.blockInitialAnimation&&(E=!1);const Ke=U&&A;E&&(!Ke||N)&&y.push(...V.map(Te=>{const ie={type:M};if(typeof Te=="string"&&r&&!Ke&&n.manuallyAnimateOnMount&&n.parent){const{parent:me}=n,ce=Qa(me,Te);if(me.enteringChildren&&ce){const{delayChildren:H}=ce.transition||{};ie.delay=r2(me.enteringChildren,n,H)}}return{animation:Te,options:ie}}))}if(x.size){const C={};if(typeof m.initial!="boolean"){const M=Qa(n,Array.isArray(m.initial)?m.initial[0]:m.initial);M&&M.transition&&(C.transition=M.transition)}x.forEach(M=>{const D=n.getBaseTarget(M),R=n.getValue(M);R&&(R.liveStyle=!0),C[M]=D??null}),y.push({animation:C})}let I=!!y.length;return r&&(m.initial===!1||m.initial===m.animate)&&!n.manuallyAnimateOnMount&&(I=!1),r=!1,I?e(y):Promise.resolve()}function f(d,m){var y;if(t[d].isActive===m)return Promise.resolve();(y=n.variantChildren)==null||y.forEach(x=>{var S;return(S=x.animationState)==null?void 0:S.setActive(d,m)}),t[d].isActive=m;const g=c(d);for(const x in t)t[x].protectedKeys={};return g}return{animateChanges:c,setActive:f,setAnimateFunction:l,getState:()=>t,reset:()=>{t=gk()}}}function QL(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!D2(e,n):!1}function wo(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function gk(){return{animate:wo(!0),whileInView:wo(),whileHover:wo(),whileTap:wo(),whileDrag:wo(),whileFocus:wo(),exit:wo()}}function yk(n,e){n.min=e.min,n.max=e.max}function gr(n,e){yk(n.x,e.x),yk(n.y,e.y)}function vk(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}const V2=1e-4,YL=1-V2,XL=1+V2,L2=.01,JL=0-L2,ZL=0+L2;function pn(n){return n.max-n.min}function eO(n,e,t){return Math.abs(n-e)<=t}function xk(n,e,t,r=.5){n.origin=r,n.originPoint=ft(e.min,e.max,n.origin),n.scale=pn(t)/pn(e),n.translate=ft(t.min,t.max,n.origin)-n.originPoint,(n.scale>=YL&&n.scale<=XL||isNaN(n.scale))&&(n.scale=1),(n.translate>=JL&&n.translate<=ZL||isNaN(n.translate))&&(n.translate=0)}function Uc(n,e,t,r){xk(n.x,e.x,t.x,r?r.originX:void 0),xk(n.y,e.y,t.y,r?r.originY:void 0)}function wk(n,e,t){n.min=t.min+e.min,n.max=n.min+pn(e)}function tO(n,e,t){wk(n.x,e.x,t.x),wk(n.y,e.y,t.y)}function kk(n,e,t){n.min=e.min-t.min,n.max=n.min+pn(e)}function Hh(n,e,t){kk(n.x,e.x,t.x),kk(n.y,e.y,t.y)}function bk(n,e,t,r,s){return n-=e,n=$h(n,1/t,r),s!==void 0&&(n=$h(n,1/s,r)),n}function nO(n,e=0,t=1,r=.5,s,l=n,c=n){if(Xr.test(e)&&(e=parseFloat(e),e=ft(c.min,c.max,e/100)-c.min),typeof e!="number")return;let f=ft(l.min,l.max,r);n===l&&(f-=e),n.min=bk(n.min,e,t,f,s),n.max=bk(n.max,e,t,f,s)}function _k(n,e,[t,r,s],l,c){nO(n,e[t],e[r],e[s],e.scale,l,c)}const rO=["x","scaleX","originX"],iO=["y","scaleY","originY"];function Sk(n,e,t,r){_k(n.x,e,rO,t?t.x:void 0,r?r.x:void 0),_k(n.y,e,iO,t?t.y:void 0,r?r.y:void 0)}function Ek(n){return n.translate===0&&n.scale===1}function O2(n){return Ek(n.x)&&Ek(n.y)}function Tk(n,e){return n.min===e.min&&n.max===e.max}function sO(n,e){return Tk(n.x,e.x)&&Tk(n.y,e.y)}function Ik(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function B2(n,e){return Ik(n.x,e.x)&&Ik(n.y,e.y)}function Ck(n){return pn(n.x)/pn(n.y)}function Ak(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}function Qn(n){return[n("x"),n("y")]}function oO(n,e,t){let r="";const s=n.x.translate/e.x,l=n.y.translate/e.y,c=(t==null?void 0:t.z)||0;if((s||l||c)&&(r=`translate3d(${s}px, ${l}px, ${c}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:m,rotate:g,rotateX:y,rotateY:x,skewX:S,skewY:_}=t;m&&(r=`perspective(${m}px) ${r}`),g&&(r+=`rotate(${g}deg) `),y&&(r+=`rotateX(${y}deg) `),x&&(r+=`rotateY(${x}deg) `),S&&(r+=`skewX(${S}deg) `),_&&(r+=`skewY(${_}deg) `)}const f=n.x.scale*e.x,d=n.y.scale*e.y;return(f!==1||d!==1)&&(r+=`scale(${f}, ${d})`),r||"none"}const z2=["TopLeft","TopRight","BottomLeft","BottomRight"],aO=z2.length,jk=n=>typeof n=="string"?parseFloat(n):n,Rk=n=>typeof n=="number"||ye.test(n);function lO(n,e,t,r,s,l){s?(n.opacity=ft(0,t.opacity??1,cO(r)),n.opacityExit=ft(e.opacity??1,0,uO(r))):l&&(n.opacity=ft(e.opacity??1,t.opacity??1,r));for(let c=0;c<aO;c++){const f=`border${z2[c]}Radius`;let d=Pk(e,f),m=Pk(t,f);if(d===void 0&&m===void 0)continue;d||(d=0),m||(m=0),d===0||m===0||Rk(d)===Rk(m)?(n[f]=Math.max(ft(jk(d),jk(m),r),0),(Xr.test(m)||Xr.test(d))&&(n[f]+="%")):n[f]=m}(e.rotate||t.rotate)&&(n.rotate=ft(e.rotate||0,t.rotate||0,r))}function Pk(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const cO=F2(0,.5,ME),uO=F2(.5,.95,Zn);function F2(n,e,t){return r=>r<n?0:r>e?1:t(tu(n,e,r))}function dO(n,e,t){const r=ln(n)?n:al(n);return r.start(S0("",r,e,t)),r.animation}function su(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}const hO=(n,e)=>n.depth-e.depth;class fO{constructor(){this.children=[],this.isDirty=!1}add(e){a0(this.children,e),this.isDirty=!0}remove(e){l0(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(hO),this.isDirty=!1,this.children.forEach(e)}}function mO(n,e){const t=mn.now(),r=({timestamp:s})=>{const l=s-t;l>=e&&(Ls(r),n(l-e))};return ot.setup(r,!0),()=>Ls(r)}function gh(n){return ln(n)?n.get():n}class pO{constructor(){this.members=[]}add(e){a0(this.members,e),e.scheduleRender()}remove(e){if(l0(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(s=>e===s);if(t===0)return!1;let r;for(let s=t;s>=0;s--){const l=this.members[s];if(l.isPresent!==!1){r=l;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const yh={hasAnimatedSinceResize:!0,hasEverUpdated:!1},Ip=["","X","Y","Z"],gO=1e3;let yO=0;function Cp(n,e,t,r){const{latestValues:s}=e;s[n]&&(t[n]=s[n],e.setStaticValue(n,0),r&&(r[n]=0))}function U2(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=a2(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:s,layoutId:l}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",ot,!(s||l))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&U2(r)}function W2({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(c={},f=e==null?void 0:e()){this.id=yO++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(wO),this.nodes.forEach(SO),this.nodes.forEach(EO),this.nodes.forEach(kO)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=f?f.root||f:this,this.path=f?[...f.path,f]:[],this.parent=f,this.depth=f?f.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new fO)}addEventListener(c,f){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new d0),this.eventHandlers.get(c).add(f)}notifyListeners(c,...f){const d=this.eventHandlers.get(c);d&&d.notify(...f)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=x2(c)&&!xL(c),this.instance=c;const{layoutId:f,layout:d,visualElement:m}=this.options;if(m&&!m.current&&m.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||f)&&(this.isLayoutDirty=!0),n){let g,y=0;const x=()=>this.root.updateBlockedByResize=!1;ot.read(()=>{y=window.innerWidth}),n(c,()=>{const S=window.innerWidth;S!==y&&(y=S,this.root.updateBlockedByResize=!0,g&&g(),g=mO(x,250),yh.hasAnimatedSinceResize&&(yh.hasAnimatedSinceResize=!1,this.nodes.forEach(Dk)))})}f&&this.root.registerSharedNode(f,this),this.options.animate!==!1&&m&&(f||d)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:y,hasRelativeLayoutChanged:x,layout:S})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||m.getDefaultTransition()||jO,{onLayoutAnimationStart:I,onLayoutAnimationComplete:C}=m.getProps(),M=!this.targetLayout||!B2(this.targetLayout,S),D=!y&&x;if(this.options.layoutRoot||this.resumeFrom||D||y&&(M||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const R={..._0(_,"layout"),onPlay:I,onComplete:C};(m.shouldReduceMotion||this.options.layoutRoot)&&(R.delay=0,R.type=!1),this.startAnimation(R),this.setAnimationOrigin(g,D)}else y||Dk(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=S})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ls(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(TO),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&U2(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const y=this.path[g];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:f,layout:d}=this.options;if(f===void 0&&!d)return;const m=this.getTransformTemplate();this.prevTransformTemplateValue=m?m(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Nk);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Mk);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(_O),this.nodes.forEach(vO),this.nodes.forEach(xO)):this.nodes.forEach(Mk),this.clearAllSnapshots();const f=mn.now();Gt.delta=ei(0,1e3/60,f-Gt.timestamp),Gt.timestamp=f,Gt.isProcessing=!0,xp.update.process(Gt),xp.preRender.process(Gt),xp.render.process(Gt),Gt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,C0.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(bO),this.sharedNodes.forEach(IO)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ot.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ot.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!pn(this.snapshot.measuredBox.x)&&!pn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Vt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:f}=this.options;f&&f.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let f=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(f=!1),f&&this.instance){const d=r(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:d,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!s)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,f=this.projectionDelta&&!O2(this.projectionDelta),d=this.getTransformTemplate(),m=d?d(this.latestValues,""):void 0,g=m!==this.prevTransformTemplateValue;c&&this.instance&&(f||bo(this.latestValues)||g)&&(s(this.instance,m),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const f=this.measurePageBox();let d=this.removeElementScroll(f);return c&&(d=this.removeTransform(d)),RO(d),{animationId:this.root.animationId,measuredBox:f,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var m;const{visualElement:c}=this.options;if(!c)return Vt();const f=c.measureViewportBox();if(!(((m=this.scroll)==null?void 0:m.wasRoot)||this.path.some(PO))){const{scroll:g}=this.root;g&&(Ba(f.x,g.offset.x),Ba(f.y,g.offset.y))}return f}removeElementScroll(c){var d;const f=Vt();if(gr(f,c),(d=this.scroll)!=null&&d.wasRoot)return f;for(let m=0;m<this.path.length;m++){const g=this.path[m],{scroll:y,options:x}=g;g!==this.root&&y&&x.layoutScroll&&(y.wasRoot&&gr(f,c),Ba(f.x,y.offset.x),Ba(f.y,y.offset.y))}return f}applyTransform(c,f=!1){const d=Vt();gr(d,c);for(let m=0;m<this.path.length;m++){const g=this.path[m];!f&&g.options.layoutScroll&&g.scroll&&g!==g.root&&za(d,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),bo(g.latestValues)&&za(d,g.latestValues)}return bo(this.latestValues)&&za(d,this.latestValues),d}removeTransform(c){const f=Vt();gr(f,c);for(let d=0;d<this.path.length;d++){const m=this.path[d];if(!m.instance||!bo(m.latestValues))continue;Vg(m.latestValues)&&m.updateSnapshot();const g=Vt(),y=m.measurePageBox();gr(g,y),Sk(f,m.latestValues,m.snapshot?m.snapshot.layoutBox:void 0,g)}return bo(this.latestValues)&&Sk(f,this.latestValues),f}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Gt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){var S;const f=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=f.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=f.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=f.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==f;if(!(c||d&&this.isSharedProjectionDirty||this.isProjectionDirty||(S=this.parent)!=null&&S.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:y}=this.options;if(!this.layout||!(g||y))return;this.resolvedRelativeTargetAt=Gt.timestamp;const x=this.getClosestProjectingParent();x&&this.linkedParentVersion!==x.layoutVersion&&!x.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(x&&x.layout?this.createRelativeTarget(x,this.layout.layoutBox,x.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Vt(),this.targetWithTransforms=Vt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),tO(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):gr(this.target,this.layout.layoutBox),T2(this.target,this.targetDelta)):gr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?this.createRelativeTarget(x,this.target,x.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Vg(this.parent.latestValues)||E2(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(c,f,d){this.relativeParent=c,this.linkedParentVersion=c.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Vt(),this.relativeTargetOrigin=Vt(),Hh(this.relativeTargetOrigin,f,d),gr(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var _;const c=this.getLead(),f=!!this.resumingFrom||this!==c;let d=!0;if((this.isProjectionDirty||(_=this.parent)!=null&&_.isProjectionDirty)&&(d=!1),f&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===Gt.timestamp&&(d=!1),d)return;const{layout:m,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||g))return;gr(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,x=this.treeScale.y;jL(this.layoutCorrected,this.treeScale,this.path,f),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=Vt());const{target:S}=c;if(!S){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(vk(this.prevProjectionDelta.x,this.projectionDelta.x),vk(this.prevProjectionDelta.y,this.projectionDelta.y)),Uc(this.projectionDelta,this.layoutCorrected,S,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==x||!Ak(this.projectionDelta.x,this.prevProjectionDelta.x)||!Ak(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",S))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){var f;if((f=this.options.visualElement)==null||f.scheduleRender(),c){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Oa(),this.projectionDelta=Oa(),this.projectionDeltaWithTransform=Oa()}setAnimationOrigin(c,f=!1){const d=this.snapshot,m=d?d.latestValues:{},g={...this.latestValues},y=Oa();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!f;const x=Vt(),S=d?d.source:void 0,_=this.layout?this.layout.source:void 0,I=S!==_,C=this.getStack(),M=!C||C.members.length<=1,D=!!(I&&!M&&this.options.crossfade===!0&&!this.path.some(AO));this.animationProgress=0;let R;this.mixTargetDelta=K=>{const z=K/1e3;Vk(y.x,c.x,z),Vk(y.y,c.y,z),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Hh(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),CO(this.relativeTarget,this.relativeTargetOrigin,x,z),R&&sO(this.relativeTarget,R)&&(this.isProjectionDirty=!1),R||(R=Vt()),gr(R,this.relativeTarget)),I&&(this.animationValues=g,lO(g,m,this.latestValues,z,D,M)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=z},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){var f,d,m;this.notifyListeners("animationStart"),(f=this.currentAnimation)==null||f.stop(),(m=(d=this.resumingFrom)==null?void 0:d.currentAnimation)==null||m.stop(),this.pendingAnimation&&(Ls(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ot.update(()=>{yh.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=al(0)),this.currentAnimation=dO(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:g=>{this.mixTargetDelta(g),c.onUpdate&&c.onUpdate(g)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(gO),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:f,target:d,layout:m,latestValues:g}=c;if(!(!f||!d||!m)){if(this!==c&&this.layout&&m&&$2(this.options.animationType,this.layout.layoutBox,m.layoutBox)){d=this.target||Vt();const y=pn(this.layout.layoutBox.x);d.x.min=c.target.x.min,d.x.max=d.x.min+y;const x=pn(this.layout.layoutBox.y);d.y.min=c.target.y.min,d.y.max=d.y.min+x}gr(f,d),za(f,g),Uc(this.projectionDeltaWithTransform,this.layoutCorrected,f,g)}}registerSharedNode(c,f){this.sharedNodes.has(c)||this.sharedNodes.set(c,new pO),this.sharedNodes.get(c).add(f);const m=f.options.initialPromotionConfig;f.promote({transition:m?m.transition:void 0,preserveFollowOpacity:m&&m.shouldPreserveFollowOpacity?m.shouldPreserveFollowOpacity(f):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){var f;const{layoutId:c}=this.options;return c?((f=this.getStack())==null?void 0:f.lead)||this:this}getPrevLead(){var f;const{layoutId:c}=this.options;return c?(f=this.getStack())==null?void 0:f.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:f,preserveFollowOpacity:d}={}){const m=this.getStack();m&&m.promote(this,d),c&&(this.projectionDelta=void 0,this.needsReset=!0),f&&this.setOptions({transition:f})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let f=!1;const{latestValues:d}=c;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(f=!0),!f)return;const m={};d.z&&Cp("z",c,m,this.animationValues);for(let g=0;g<Ip.length;g++)Cp(`rotate${Ip[g]}`,c,m,this.animationValues),Cp(`skew${Ip[g]}`,c,m,this.animationValues);c.render();for(const g in m)c.setStaticValue(g,m[g]),this.animationValues&&(this.animationValues[g]=m[g]);c.scheduleRender()}applyProjectionStyles(c,f){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=gh(f==null?void 0:f.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none";return}const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=gh(f==null?void 0:f.pointerEvents)||""),this.hasProjected&&!bo(this.latestValues)&&(c.transform=d?d({},""):"none",this.hasProjected=!1);return}c.visibility="";const g=m.animationValues||m.latestValues;this.applyTransformsToTarget();let y=oO(this.projectionDeltaWithTransform,this.treeScale,g);d&&(y=d(g,y)),c.transform=y;const{x,y:S}=this.projectionDelta;c.transformOrigin=`${x.origin*100}% ${S.origin*100}% 0`,m.animationValues?c.opacity=m===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:c.opacity=m===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const _ in Og){if(g[_]===void 0)continue;const{correct:I,applyTo:C,isCSSVariable:M}=Og[_],D=y==="none"?g[_]:I(g[_],m);if(C){const R=C.length;for(let K=0;K<R;K++)c[C[K]]=D}else M?this.options.visualElement.renderState.vars[_]=D:c[_]=D}this.options.layoutId&&(c.pointerEvents=m===this?gh(f==null?void 0:f.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>{var f;return(f=c.currentAnimation)==null?void 0:f.stop()}),this.root.nodes.forEach(Nk),this.root.sharedNodes.clear()}}}function vO(n){n.updateLayout()}function xO(n){var t;const e=((t=n.resumeFrom)==null?void 0:t.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=n.layout,{animationType:l}=n.options,c=e.source!==n.layout.source;l==="size"?Qn(y=>{const x=c?e.measuredBox[y]:e.layoutBox[y],S=pn(x);x.min=r[y].min,x.max=x.min+S}):$2(l,e.layoutBox,r)&&Qn(y=>{const x=c?e.measuredBox[y]:e.layoutBox[y],S=pn(r[y]);x.max=x.min+S,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[y].max=n.relativeTarget[y].min+S)});const f=Oa();Uc(f,r,e.layoutBox);const d=Oa();c?Uc(d,n.applyTransform(s,!0),e.measuredBox):Uc(d,r,e.layoutBox);const m=!O2(f);let g=!1;if(!n.resumeFrom){const y=n.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:x,layout:S}=y;if(x&&S){const _=Vt();Hh(_,e.layoutBox,x.layoutBox);const I=Vt();Hh(I,r,S.layoutBox),B2(_,I)||(g=!0),y.options.layoutRoot&&(n.relativeTarget=I,n.relativeTargetOrigin=_,n.relativeParent=y)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:d,layoutDelta:f,hasLayoutChanged:m,hasRelativeLayoutChanged:g})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function wO(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function kO(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function bO(n){n.clearSnapshot()}function Nk(n){n.clearMeasurements()}function Mk(n){n.isLayoutDirty=!1}function _O(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function Dk(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function SO(n){n.resolveTargetDelta()}function EO(n){n.calcProjection()}function TO(n){n.resetSkewAndRotation()}function IO(n){n.removeLeadSnapshot()}function Vk(n,e,t){n.translate=ft(e.translate,0,t),n.scale=ft(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function Lk(n,e,t,r){n.min=ft(e.min,t.min,r),n.max=ft(e.max,t.max,r)}function CO(n,e,t,r){Lk(n.x,e.x,t.x,r),Lk(n.y,e.y,t.y,r)}function AO(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const jO={duration:.45,ease:[.4,0,.1,1]},Ok=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),Bk=Ok("applewebkit/")&&!Ok("chrome/")?Math.round:Zn;function zk(n){n.min=Bk(n.min),n.max=Bk(n.max)}function RO(n){zk(n.x),zk(n.y)}function $2(n,e,t){return n==="position"||n==="preserve-aspect"&&!eO(Ck(e),Ck(t),.2)}function PO(n){var e;return n!==n.root&&((e=n.scroll)==null?void 0:e.wasRoot)}const NO=W2({attachResizeListener:(n,e)=>su(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ap={current:void 0},H2=W2({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!Ap.current){const n=new NO({});n.mount(window),n.setOptions({layoutScroll:!0}),Ap.current=n}return Ap.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),M0=j.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function Fk(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function MO(...n){return e=>{let t=!1;const r=n.map(s=>{const l=Fk(s,e);return!t&&typeof l=="function"&&(t=!0),l});if(t)return()=>{for(let s=0;s<r.length;s++){const l=r[s];typeof l=="function"?l():Fk(n[s],null)}}}}function DO(...n){return j.useCallback(MO(...n),n)}class VO extends j.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=t.offsetParent,s=m2(r)&&r.offsetWidth||0,l=this.props.sizeRef.current;l.height=t.offsetHeight||0,l.width=t.offsetWidth||0,l.top=t.offsetTop,l.left=t.offsetLeft,l.right=s-l.width-l.left}return null}componentDidUpdate(){}render(){return this.props.children}}function LO({children:n,isPresent:e,anchorX:t,root:r}){var g;const s=j.useId(),l=j.useRef(null),c=j.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:f}=j.useContext(M0),d=((g=n.props)==null?void 0:g.ref)??(n==null?void 0:n.ref),m=DO(l,d);return j.useInsertionEffect(()=>{const{width:y,height:x,top:S,left:_,right:I}=c.current;if(e||!l.current||!y||!x)return;const C=t==="left"?`left: ${_}`:`right: ${I}`;l.current.dataset.motionPopId=s;const M=document.createElement("style");f&&(M.nonce=f);const D=r??document.head;return D.appendChild(M),M.sheet&&M.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${y}px !important;
            height: ${x}px !important;
            ${C}px !important;
            top: ${S}px !important;
          }
        `),()=>{D.contains(M)&&D.removeChild(M)}},[e]),a.jsx(VO,{isPresent:e,childRef:l,sizeRef:c,children:j.cloneElement(n,{ref:m})})}const OO=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:s,presenceAffectsLayout:l,mode:c,anchorX:f,root:d})=>{const m=o0(BO),g=j.useId();let y=!0,x=j.useMemo(()=>(y=!1,{id:g,initial:e,isPresent:t,custom:s,onExitComplete:S=>{m.set(S,!0);for(const _ of m.values())if(!_)return;r&&r()},register:S=>(m.set(S,!1),()=>m.delete(S))}),[t,m,r]);return l&&y&&(x={...x}),j.useMemo(()=>{m.forEach((S,_)=>m.set(_,!1))},[t]),j.useEffect(()=>{!t&&!m.size&&r&&r()},[t]),c==="popLayout"&&(n=a.jsx(LO,{isPresent:t,anchorX:f,root:d,children:n})),a.jsx(_f.Provider,{value:x,children:n})};function BO(){return new Map}function K2(n=!0){const e=j.useContext(_f);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:s}=e,l=j.useId();j.useEffect(()=>{if(n)return s(l)},[n]);const c=j.useCallback(()=>n&&r&&r(l),[l,r,n]);return!t&&r?[!1,c]:[!0]}const Jd=n=>n.key||"";function Uk(n){const e=[];return j.Children.forEach(n,t=>{j.isValidElement(t)&&e.push(t)}),e}const q2=({children:n,custom:e,initial:t=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:l="sync",propagate:c=!1,anchorX:f="left",root:d})=>{const[m,g]=K2(c),y=j.useMemo(()=>Uk(n),[n]),x=c&&!m?[]:y.map(Jd),S=j.useRef(!0),_=j.useRef(y),I=o0(()=>new Map),C=j.useRef(new Set),[M,D]=j.useState(y),[R,K]=j.useState(y);_E(()=>{S.current=!1,_.current=y;for(let A=0;A<R.length;A++){const E=Jd(R[A]);x.includes(E)?(I.delete(E),C.current.delete(E)):I.get(E)!==!0&&I.set(E,!1)}},[R,x.length,x.join("-")]);const z=[];if(y!==M){let A=[...y];for(let E=0;E<R.length;E++){const N=R[E],V=Jd(N);x.includes(V)||(A.splice(E,0,N),z.push(N))}return l==="wait"&&z.length&&(A=z),K(Uk(A)),D(y),null}const{forceRender:U}=j.useContext(s0);return a.jsx(a.Fragment,{children:R.map(A=>{const E=Jd(A),N=c&&!m?!1:y===R||x.includes(E),V=()=>{if(C.current.has(E))return;if(C.current.add(E),I.has(E))I.set(E,!0);else return;let B=!0;I.forEach($=>{$||(B=!1)}),B&&(U==null||U(),K(_.current),c&&(g==null||g()),r&&r())};return a.jsx(OO,{isPresent:N,initial:!S.current||t?void 0:!1,custom:e,presenceAffectsLayout:s,mode:l,root:d,onExitComplete:N?void 0:V,anchorX:f,children:A},E)})})},G2=j.createContext({strict:!1}),Wk={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let $k=!1;function zO(){if($k)return;const n={};for(const e in Wk)n[e]={isEnabled:t=>Wk[e].some(r=>!!t[r])};b2(n),$k=!0}function Q2(){return zO(),TL()}function FO(n){const e=Q2();for(const t in n)e[t]={...e[t],...n[t]};b2(e)}const UO=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Kh(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||UO.has(n)}let Y2=n=>!Kh(n);function WO(n){typeof n=="function"&&(Y2=e=>e.startsWith("on")?!Kh(e):n(e))}try{WO(require("@emotion/is-prop-valid").default)}catch{}function $O(n,e,t){const r={};for(const s in n)s==="values"&&typeof n.values=="object"||(Y2(s)||t===!0&&Kh(s)||!e&&!Kh(s)||n.draggable&&s.startsWith("onDrag"))&&(r[s]=n[s]);return r}const Tf=j.createContext({});function HO(n,e){if(Ef(n)){const{initial:t,animate:r}=n;return{initial:t===!1||iu(t)?t:void 0,animate:iu(r)?r:void 0}}return n.inherit!==!1?e:{}}function KO(n){const{initial:e,animate:t}=HO(n,j.useContext(Tf));return j.useMemo(()=>({initial:e,animate:t}),[Hk(e),Hk(t)])}function Hk(n){return Array.isArray(n)?n.join(" "):n}const D0=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function X2(n,e,t){for(const r in e)!ln(e[r])&&!A2(r,t)&&(n[r]=e[r])}function qO({transformTemplate:n},e){return j.useMemo(()=>{const t=D0();return P0(t,e,n),Object.assign({},t.vars,t.style)},[e])}function GO(n,e){const t=n.style||{},r={};return X2(r,t,n),Object.assign(r,qO(n,e)),r}function QO(n,e){const t={},r=GO(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}const J2=()=>({...D0(),attrs:{}});function YO(n,e,t,r){const s=j.useMemo(()=>{const l=J2();return j2(l,e,P2(r),n.transformTemplate,n.style),{...l.attrs,style:{...l.style}}},[e]);if(n.style){const l={};X2(l,n.style,n),s.style={...l,...s.style}}return s}const XO=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function V0(n){return typeof n!="string"||n.includes("-")?!1:!!(XO.indexOf(n)>-1||/[A-Z]/u.test(n))}function JO(n,e,t,{latestValues:r},s,l=!1,c){const d=(c??V0(n)?YO:QO)(e,r,s,n),m=$O(e,typeof n=="string",l),g=n!==j.Fragment?{...m,...d,ref:t}:{},{children:y}=e,x=j.useMemo(()=>ln(y)?y.get():y,[y]);return j.createElement(n,{...g,children:x})}function ZO({scrapeMotionValuesFromProps:n,createRenderState:e},t,r,s){return{latestValues:e8(t,r,s,n),renderState:e()}}function e8(n,e,t,r){const s={},l=r(n,{});for(const x in l)s[x]=gh(l[x]);let{initial:c,animate:f}=n;const d=Ef(n),m=k2(n);e&&m&&!d&&n.inherit!==!1&&(c===void 0&&(c=e.initial),f===void 0&&(f=e.animate));let g=t?t.initial===!1:!1;g=g||c===!1;const y=g?f:c;if(y&&typeof y!="boolean"&&!Sf(y)){const x=Array.isArray(y)?y:[y];for(let S=0;S<x.length;S++){const _=E0(n,x[S]);if(_){const{transitionEnd:I,transition:C,...M}=_;for(const D in M){let R=M[D];if(Array.isArray(R)){const K=g?R.length-1:0;R=R[K]}R!==null&&(s[D]=R)}for(const D in I)s[D]=I[D]}}}return s}const Z2=n=>(e,t)=>{const r=j.useContext(Tf),s=j.useContext(_f),l=()=>ZO(n,e,r,s);return t?l():o0(l)},t8=Z2({scrapeMotionValuesFromProps:N0,createRenderState:D0}),n8=Z2({scrapeMotionValuesFromProps:N2,createRenderState:J2}),r8=Symbol.for("motionComponentSymbol");function i8(n,e,t){const r=j.useRef(t);j.useInsertionEffect(()=>{r.current=t});const s=j.useRef(null);return j.useCallback(l=>{var f;l&&((f=n.onMount)==null||f.call(n,l)),e&&(l?e.mount(l):e.unmount());const c=r.current;if(typeof c=="function")if(l){const d=c(l);typeof d=="function"&&(s.current=d)}else s.current?(s.current(),s.current=null):c(l);else c&&(c.current=l)},[e])}const eT=j.createContext({});function Nc(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function s8(n,e,t,r,s,l){var C,M;const{visualElement:c}=j.useContext(Tf),f=j.useContext(G2),d=j.useContext(_f),m=j.useContext(M0).reducedMotion,g=j.useRef(null);r=r||f.renderer,!g.current&&r&&(g.current=r(n,{visualState:e,parent:c,props:t,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:m,isSVG:l}));const y=g.current,x=j.useContext(eT);y&&!y.projection&&s&&(y.type==="html"||y.type==="svg")&&o8(g.current,t,s,x);const S=j.useRef(!1);j.useInsertionEffect(()=>{y&&S.current&&y.update(t,d)});const _=t[o2],I=j.useRef(!!_&&!((C=window.MotionHandoffIsComplete)!=null&&C.call(window,_))&&((M=window.MotionHasOptimisedAnimation)==null?void 0:M.call(window,_)));return _E(()=>{y&&(S.current=!0,window.MotionIsMounted=!0,y.updateFeatures(),y.scheduleRenderMicrotask(),I.current&&y.animationState&&y.animationState.animateChanges())}),j.useEffect(()=>{y&&(!I.current&&y.animationState&&y.animationState.animateChanges(),I.current&&(queueMicrotask(()=>{var D;(D=window.MotionHandoffMarkAsComplete)==null||D.call(window,_)}),I.current=!1),y.enteringChildren=void 0)}),y}function o8(n,e,t,r){const{layoutId:s,layout:l,drag:c,dragConstraints:f,layoutScroll:d,layoutRoot:m,layoutCrossfade:g}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:tT(n.parent)),n.projection.setOptions({layoutId:s,layout:l,alwaysMeasureLayout:!!c||f&&Nc(f),visualElement:n,animationType:typeof l=="string"?l:"both",initialPromotionConfig:r,crossfade:g,layoutScroll:d,layoutRoot:m})}function tT(n){if(n)return n.options.allowProjection!==!1?n.projection:tT(n.parent)}function jp(n,{forwardMotionProps:e=!1,type:t}={},r,s){r&&FO(r);const l=t?t==="svg":V0(n),c=l?n8:t8;function f(m,g){let y;const x={...j.useContext(M0),...m,layoutId:a8(m)},{isStatic:S}=x,_=KO(m),I=c(m,S);if(!S&&bE){l8();const C=c8(x);y=C.MeasureLayout,_.visualElement=s8(n,I,x,s,C.ProjectionNode,l)}return a.jsxs(Tf.Provider,{value:_,children:[y&&_.visualElement?a.jsx(y,{visualElement:_.visualElement,...x}):null,JO(n,m,i8(I,_.visualElement,g),I,S,e,l)]})}f.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const d=j.forwardRef(f);return d[r8]=n,d}function a8({layoutId:n}){const e=j.useContext(s0).id;return e&&n!==void 0?e+"-"+n:n}function l8(n,e){j.useContext(G2).strict}function c8(n){const e=Q2(),{drag:t,layout:r}=e;if(!t&&!r)return{};const s={...t,...r};return{MeasureLayout:t!=null&&t.isEnabled(n)||r!=null&&r.isEnabled(n)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function u8(n,e){if(typeof Proxy>"u")return jp;const t=new Map,r=(l,c)=>jp(l,c,n,e),s=(l,c)=>r(l,c);return new Proxy(s,{get:(l,c)=>c==="create"?r:(t.has(c)||t.set(c,jp(c,void 0,n,e)),t.get(c))})}const d8=(n,e)=>e.isSVG??V0(n)?new WL(e):new LL(e,{allowProjection:n!==j.Fragment});class h8 extends $s{constructor(e){super(e),e.animationState||(e.animationState=GL(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Sf(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let f8=0;class m8 extends $s{constructor(){super(...arguments),this.id=f8++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);t&&!e&&s.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const p8={animation:{Feature:h8},exit:{Feature:m8}};function bu(n){return{point:{x:n.pageX,y:n.pageY}}}const g8=n=>e=>A0(e)&&n(e,bu(e));function Wc(n,e,t,r){return su(n,e,g8(t),r)}const nT=({current:n})=>n?n.ownerDocument.defaultView:null,Kk=(n,e)=>Math.abs(n-e);function y8(n,e){const t=Kk(n.x,e.x),r=Kk(n.y,e.y);return Math.sqrt(t**2+r**2)}const qk=new Set(["auto","scroll"]);class rT{constructor(e,t,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:l=!1,distanceThreshold:c=3,element:f}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=S=>{this.handleScroll(S.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=Pp(this.lastMoveEventInfo,this.history),_=this.startEvent!==null,I=y8(S.offset,{x:0,y:0})>=this.distanceThreshold;if(!_&&!I)return;const{point:C}=S,{timestamp:M}=Gt;this.history.push({...C,timestamp:M});const{onStart:D,onMove:R}=this.handlers;_||(D&&D(this.lastMoveEvent,S),this.startEvent=this.lastMoveEvent),R&&R(this.lastMoveEvent,S)},this.handlePointerMove=(S,_)=>{this.lastMoveEvent=S,this.lastMoveEventInfo=Rp(_,this.transformPagePoint),ot.update(this.updatePoint,!0)},this.handlePointerUp=(S,_)=>{this.end();const{onEnd:I,onSessionEnd:C,resumeAnimation:M}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&M&&M(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const D=Pp(S.type==="pointercancel"?this.lastMoveEventInfo:Rp(_,this.transformPagePoint),this.history);this.startEvent&&I&&I(S,D),C&&C(S,D)},!A0(e))return;this.dragSnapToOrigin=l,this.handlers=t,this.transformPagePoint=r,this.distanceThreshold=c,this.contextWindow=s||window;const d=bu(e),m=Rp(d,this.transformPagePoint),{point:g}=m,{timestamp:y}=Gt;this.history=[{...g,timestamp:y}];const{onSessionStart:x}=t;x&&x(e,Pp(m,this.history)),this.removeListeners=xu(Wc(this.contextWindow,"pointermove",this.handlePointerMove),Wc(this.contextWindow,"pointerup",this.handlePointerUp),Wc(this.contextWindow,"pointercancel",this.handlePointerUp)),f&&this.startScrollTracking(f)}startScrollTracking(e){let t=e.parentElement;for(;t;){const r=getComputedStyle(t);(qk.has(r.overflowX)||qk.has(r.overflowY))&&this.scrollPositions.set(t,{x:t.scrollLeft,y:t.scrollTop}),t=t.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const t=this.scrollPositions.get(e);if(!t)return;const r=e===window,s=r?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},l={x:s.x-t.x,y:s.y-t.y};l.x===0&&l.y===0||(r?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=l.x,this.lastMoveEventInfo.point.y+=l.y):this.history.length>0&&(this.history[0].x-=l.x,this.history[0].y-=l.y),this.scrollPositions.set(e,s),ot.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),Ls(this.updatePoint)}}function Rp(n,e){return e?{point:e(n.point)}:n}function Gk(n,e){return{x:n.x-e.x,y:n.y-e.y}}function Pp({point:n},e){return{point:n,delta:Gk(n,iT(e)),offset:Gk(n,v8(e)),velocity:x8(e,.1)}}function v8(n){return n[0]}function iT(n){return n[n.length-1]}function x8(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const s=iT(n);for(;t>=0&&(r=n[t],!(s.timestamp-r.timestamp>Ci(e)));)t--;if(!r)return{x:0,y:0};const l=Xn(s.timestamp-r.timestamp);if(l===0)return{x:0,y:0};const c={x:(s.x-r.x)/l,y:(s.y-r.y)/l};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function w8(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?ft(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?ft(t,n,r.max):Math.min(n,t)),n}function Qk(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function k8(n,{top:e,left:t,bottom:r,right:s}){return{x:Qk(n.x,t,s),y:Qk(n.y,e,r)}}function Yk(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function b8(n,e){return{x:Yk(n.x,e.x),y:Yk(n.y,e.y)}}function _8(n,e){let t=.5;const r=pn(n),s=pn(e);return s>r?t=tu(e.min,e.max-r,n.min):r>s&&(t=tu(n.min,n.max-s,e.min)),ei(0,1,t)}function S8(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const Bg=.35;function E8(n=Bg){return n===!1?n=0:n===!0&&(n=Bg),{x:Xk(n,"left","right"),y:Xk(n,"top","bottom")}}function Xk(n,e,t){return{min:Jk(n,e),max:Jk(n,t)}}function Jk(n,e){return typeof n=="number"?n:n[e]||0}const T8=new WeakMap;class I8{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Vt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const l=y=>{t?(this.stopAnimation(),this.snapToCursor(bu(y).point)):this.pauseAnimation()},c=(y,x)=>{this.stopAnimation();const{drag:S,dragPropagation:_,onDragStart:I}=this.getProps();if(S&&!_&&(this.openDragLock&&this.openDragLock(),this.openDragLock=mL(S),!this.openDragLock))return;this.latestPointerEvent=y,this.latestPanInfo=x,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Qn(M=>{let D=this.getAxisMotionValue(M).get()||0;if(Xr.test(D)){const{projection:R}=this.visualElement;if(R&&R.layout){const K=R.layout.layoutBox[M];K&&(D=pn(K)*(parseFloat(D)/100))}}this.originPoint[M]=D}),I&&ot.postRender(()=>I(y,x)),Pg(this.visualElement,"transform");const{animationState:C}=this.visualElement;C&&C.setActive("whileDrag",!0)},f=(y,x)=>{this.latestPointerEvent=y,this.latestPanInfo=x;const{dragPropagation:S,dragDirectionLock:_,onDirectionLock:I,onDrag:C}=this.getProps();if(!S&&!this.openDragLock)return;const{offset:M}=x;if(_&&this.currentDirection===null){this.currentDirection=C8(M),this.currentDirection!==null&&I&&I(this.currentDirection);return}this.updateAxis("x",x.point,M),this.updateAxis("y",x.point,M),this.visualElement.render(),C&&C(y,x)},d=(y,x)=>{this.latestPointerEvent=y,this.latestPanInfo=x,this.stop(y,x),this.latestPointerEvent=null,this.latestPanInfo=null},m=()=>Qn(y=>{var x;return this.getAnimationState(y)==="paused"&&((x=this.getAxisMotionValue(y).animation)==null?void 0:x.play())}),{dragSnapToOrigin:g}=this.getProps();this.panSession=new rT(e,{onSessionStart:l,onStart:c,onMove:f,onSessionEnd:d,resumeAnimation:m},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,distanceThreshold:r,contextWindow:nT(this.visualElement),element:this.visualElement.current})}stop(e,t){const r=e||this.latestPointerEvent,s=t||this.latestPanInfo,l=this.isDragging;if(this.cancel(),!l||!s||!r)return;const{velocity:c}=s;this.startAnimation(c);const{onDragEnd:f}=this.getProps();f&&ot.postRender(()=>f(r,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:s}=this.getProps();if(!r||!Zd(e,s,this.currentDirection))return;const l=this.getAxisMotionValue(e);let c=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(c=w8(c,this.constraints[e],this.elastic[e])),l.set(c)}resolveConstraints(){var l;const{dragConstraints:e,dragElastic:t}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(l=this.visualElement.projection)==null?void 0:l.layout,s=this.constraints;e&&Nc(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=k8(r.layoutBox,e):this.constraints=!1,this.elastic=E8(t),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Qn(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=S8(r.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Nc(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const l=RL(r,s.root,this.visualElement.getTransformPagePoint());let c=b8(s.layout.layoutBox,l);if(t){const f=t(CL(c));this.hasMutatedConstraints=!!f,f&&(c=S2(f))}return c}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:s,dragTransition:l,dragSnapToOrigin:c,onDragTransitionEnd:f}=this.getProps(),d=this.constraints||{},m=Qn(g=>{if(!Zd(g,t,this.currentDirection))return;let y=d&&d[g]||{};c&&(y={min:0,max:0});const x=s?200:1e6,S=s?40:1e7,_={type:"inertia",velocity:r?e[g]:0,bounceStiffness:x,bounceDamping:S,timeConstant:750,restDelta:1,restSpeed:10,...l,...y};return this.startAxisValueAnimation(g,_)});return Promise.all(m).then(f)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return Pg(this.visualElement,e),r.start(S0(e,r,0,t,this.visualElement,!1))}stopAnimation(){Qn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Qn(e=>{var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[t];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Qn(t=>{const{drag:r}=this.getProps();if(!Zd(t,r,this.currentDirection))return;const{projection:s}=this.visualElement,l=this.getAxisMotionValue(t);if(s&&s.layout){const{min:c,max:f}=s.layout.layoutBox[t],d=l.get()||0;l.set(e[t]-ft(c,f,.5)+d)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!Nc(t)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Qn(c=>{const f=this.getAxisMotionValue(c);if(f&&this.constraints!==!1){const d=f.get();s[c]=_8({min:d,max:d},this.constraints[c])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Qn(c=>{if(!Zd(c,e,null))return;const f=this.getAxisMotionValue(c),{min:d,max:m}=this.constraints[c];f.set(ft(d,m,s[c]))})}addListeners(){if(!this.visualElement.current)return;T8.set(this.visualElement,this);const e=this.visualElement.current,t=Wc(e,"pointerdown",d=>{const{drag:m,dragListener:g=!0}=this.getProps();m&&g&&!v2(d.target)&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();Nc(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,l=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),ot.read(r);const c=su(window,"resize",()=>this.scalePositionWithinConstraints()),f=s.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:m})=>{this.isDragging&&m&&(Qn(g=>{const y=this.getAxisMotionValue(g);y&&(this.originPoint[g]+=d[g].translate,y.set(y.get()+d[g].translate))}),this.visualElement.render())}));return()=>{c(),t(),l(),f&&f()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:l=!1,dragElastic:c=Bg,dragMomentum:f=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:s,dragConstraints:l,dragElastic:c,dragMomentum:f}}}function Zd(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function C8(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class A8 extends $s{constructor(e){super(e),this.removeGroupControls=Zn,this.removeListeners=Zn,this.controls=new I8(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Zn}update(){const{dragControls:e}=this.node.getProps(),{dragControls:t}=this.node.prevProps||{};e!==t&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners()}}const Zk=n=>(e,t)=>{n&&ot.postRender(()=>n(e,t))};class j8 extends $s{constructor(){super(...arguments),this.removePointerDownListener=Zn}onPointerDown(e){this.session=new rT(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:nT(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:Zk(e),onStart:Zk(t),onMove:r,onEnd:(l,c)=>{delete this.session,s&&ot.postRender(()=>s(l,c))}}}mount(){this.removePointerDownListener=Wc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let Np=!1;class R8 extends j.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:s}=this.props,{projection:l}=e;l&&(t.group&&t.group.add(l),r&&r.register&&s&&r.register(l),Np&&l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),yh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:s,isPresent:l}=this.props,{projection:c}=r;return c&&(c.isPresent=l,Np=!0,s||e.layoutDependency!==t||t===void 0||e.isPresent!==l?c.willUpdate():this.safeToRemove(),e.isPresent!==l&&(l?c.promote():c.relegate()||ot.postRender(()=>{const f=c.getStack();(!f||!f.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),C0.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:s}=e;Np=!0,s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function sT(n){const[e,t]=K2(),r=j.useContext(s0);return a.jsx(R8,{...n,layoutGroup:r,switchLayoutGroup:j.useContext(eT),isPresent:e,safeToRemove:t})}const P8={pan:{Feature:j8},drag:{Feature:A8,ProjectionNode:H2,MeasureLayout:sT}};function eb(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const s="onHover"+t,l=r[s];l&&ot.postRender(()=>l(e,bu(e)))}class N8 extends $s{mount(){const{current:e}=this.node;e&&(this.unmount=pL(e,(t,r)=>(eb(this.node,r,"Start"),s=>eb(this.node,s,"End"))))}unmount(){}}class M8 extends $s{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=xu(su(this.node.current,"focus",()=>this.onFocus()),su(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function tb(n,e,t){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const s="onTap"+(t==="End"?"":t),l=r[s];l&&ot.postRender(()=>l(e,bu(e)))}class D8 extends $s{mount(){const{current:e}=this.node;e&&(this.unmount=vL(e,(t,r)=>(tb(this.node,r,"Start"),(s,{success:l})=>tb(this.node,s,l?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const zg=new WeakMap,Mp=new WeakMap,V8=n=>{const e=zg.get(n.target);e&&e(n)},L8=n=>{n.forEach(V8)};function O8({root:n,...e}){const t=n||document;Mp.has(t)||Mp.set(t,{});const r=Mp.get(t),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(L8,{root:n,...e})),r[s]}function B8(n,e,t){const r=O8(e);return zg.set(n,t),r.observe(n),()=>{zg.delete(n),r.unobserve(n)}}const z8={some:0,all:1};class F8 extends $s{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:s="some",once:l}=e,c={root:t?t.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:z8[s]},f=d=>{const{isIntersecting:m}=d;if(this.isInView===m||(this.isInView=m,l&&!m&&this.hasEnteredView))return;m&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",m);const{onViewportEnter:g,onViewportLeave:y}=this.node.getProps(),x=m?g:y;x&&x(d)};return B8(this.node.current,c,f)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(U8(e,t))&&this.startObserver()}unmount(){}}function U8({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const W8={inView:{Feature:F8},tap:{Feature:D8},focus:{Feature:M8},hover:{Feature:N8}},$8={layout:{ProjectionNode:H2,MeasureLayout:sT}},H8={...p8,...W8,...P8,...$8},ge=u8(H8,d8);function Sn(){var _;const n=ir(),e=dl(),{user:t,profile:r,isAuthenticated:s,isAdmin:l,isBusiness:c}=Oi(),[f,d]=j.useState(!1),[m,g]=j.useState(!1),y=[{to:"/",label:"Home"},{to:"/map",label:"Village Map"},{to:"/demo",label:"See Demo"},{to:"/about",label:"How It Works"},{to:"/businesses",label:"For Businesses"}],x=async()=>{await aE(),g(!1),e("/")},S=I=>n.pathname===I;return a.jsxs("header",{style:{background:"var(--kb-white)",borderBottom:"1px solid var(--kb-gray-200)",position:"sticky",top:0,zIndex:100},children:[a.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 1rem",display:"flex",alignItems:"center",justifyContent:"space-between",height:"70px"},children:[a.jsxs(ue,{to:s?"/map":"/",style:{display:"flex",alignItems:"center",gap:"0.5rem",textDecoration:"none"},children:[a.jsx("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, var(--kb-navy) 0%, var(--kb-navy-light) 100%)",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--kb-gold)",fontFamily:"var(--font-display)",fontWeight:"700",fontSize:"1.2rem"},children:"K"}),a.jsxs("div",{children:[a.jsx("div",{style:{fontFamily:"var(--font-display)",fontWeight:"600",color:"var(--kb-navy)",fontSize:"1.1rem",lineHeight:1.1},children:"Kinderbucks"}),a.jsx("div",{style:{fontSize:"0.65rem",color:"var(--kb-gray-500)",textTransform:"uppercase",letterSpacing:"0.1em"},children:"Village Currency"})]})]}),a.jsx("nav",{style:{display:"flex",alignItems:"center",gap:"2rem"},className:"desktop-nav",children:y.map(I=>a.jsx(ue,{to:I.to,style:{color:S(I.to)?"var(--kb-navy)":"var(--kb-gray-500)",fontWeight:S(I.to)?"600":"500",fontSize:"0.95rem",transition:"color 0.2s",borderBottom:S(I.to)?"2px solid var(--kb-gold)":"2px solid transparent",paddingBottom:"4px"},children:I.label},I.to))}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},className:"desktop-nav",children:[s?a.jsx(a.Fragment,{children:a.jsxs("div",{style:{position:"relative"},children:[a.jsxs("button",{onClick:()=>g(!m),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"var(--kb-gray-100)",border:"none",borderRadius:"8px",cursor:"pointer",color:"var(--kb-navy)",fontWeight:"500"},children:[a.jsx(Ga,{size:18}),(r==null?void 0:r.displayName)||((_=t.email)==null?void 0:_.split("@")[0])]}),m&&a.jsxs("div",{style:{position:"absolute",right:0,top:"100%",marginTop:"0.5rem",background:"white",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",minWidth:"180px",zIndex:200,overflow:"hidden"},children:[a.jsxs(ue,{to:"/card",onClick:()=>g(!1),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",color:"var(--kb-gold-dark)",textDecoration:"none",borderBottom:"1px solid var(--kb-gray-100)",fontWeight:"600",background:"rgba(201, 162, 39, 0.1)"},children:[a.jsx(pg,{size:16})," My OK Card"]}),a.jsxs(ue,{to:"/profile",onClick:()=>g(!1),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",color:"var(--kb-gray-700)",textDecoration:"none",borderBottom:"1px solid var(--kb-gray-100)"},children:[a.jsx(Ga,{size:16})," My Profile"]}),c&&a.jsxs(ue,{to:"/business/dashboard",onClick:()=>g(!1),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",color:"#2563eb",textDecoration:"none",borderBottom:"1px solid var(--kb-gray-100)"},children:[a.jsx(Nt,{size:16})," Business Dashboard"]}),l&&a.jsxs(ue,{to:"/admin/dashboard",onClick:()=>g(!1),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",color:"#dc2626",textDecoration:"none",borderBottom:"1px solid var(--kb-gray-100)"},children:[a.jsx(Oh,{size:16})," Admin Portal"]}),a.jsxs("button",{onClick:x,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",color:"var(--kb-gray-600)",background:"none",border:"none",cursor:"pointer",width:"100%",textAlign:"left"},children:[a.jsx(gg,{size:16})," Sign Out"]})]})]})}):a.jsx(a.Fragment,{children:a.jsxs(ue,{to:"/login",className:"btn btn-secondary",style:{padding:"0.5rem 1rem",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(ol,{size:16})," Sign In"]})}),a.jsx(ue,{to:"/exchange",className:"btn btn-gold",style:{padding:"0.5rem 1rem",fontSize:"0.9rem"},children:"Get Kinderbucks"})]}),a.jsx("button",{onClick:()=>d(!f),className:"mobile-menu-btn",style:{display:"none",background:"none",border:"none",padding:"0.5rem",cursor:"pointer"},children:a.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:f?a.jsx("path",{d:"M6 6l12 12M6 18L18 6"}):a.jsx("path",{d:"M3 12h18M3 6h18M3 18h18"})})})]}),f&&a.jsxs("div",{className:"mobile-menu",style:{background:"var(--kb-white)",borderTop:"1px solid var(--kb-gray-200)",padding:"1rem"},children:[y.map(I=>a.jsx(ue,{to:I.to,onClick:()=>d(!1),style:{display:"block",padding:"0.75rem 0",color:S(I.to)?"var(--kb-navy)":"var(--kb-gray-700)",fontWeight:S(I.to)?"600":"400",borderBottom:"1px solid var(--kb-gray-100)"},children:I.label},I.to)),a.jsxs("div",{style:{marginTop:"1rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:[s?a.jsxs(a.Fragment,{children:[a.jsxs("div",{style:{padding:"0.75rem",background:"var(--kb-gray-50)",borderRadius:"8px",marginBottom:"0.5rem"},children:[a.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:(r==null?void 0:r.displayName)||t.email}),a.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:(r==null?void 0:r.role)||"member"})]}),a.jsxs(ue,{to:"/profile",onClick:()=>d(!1),className:"btn btn-secondary",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[a.jsx(Ga,{size:16})," My Profile"]}),c&&a.jsxs(ue,{to:"/business/dashboard",onClick:()=>d(!1),className:"btn",style:{background:"#2563eb",color:"white",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[a.jsx(Nt,{size:16})," Business Dashboard"]}),l&&a.jsxs(ue,{to:"/admin/dashboard",onClick:()=>d(!1),className:"btn",style:{background:"#dc2626",color:"white",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[a.jsx(Oh,{size:16})," Admin Portal"]}),a.jsxs("button",{onClick:()=>{x(),d(!1)},className:"btn btn-secondary",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[a.jsx(gg,{size:16})," Sign Out"]})]}):a.jsxs(ue,{to:"/login",onClick:()=>d(!1),className:"btn btn-secondary",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[a.jsx(ol,{size:16})," Sign In"]}),a.jsx(ue,{to:"/exchange",onClick:()=>d(!1),className:"btn btn-gold",children:"Get Kinderbucks"})]})]}),a.jsx("style",{children:`
        @media (max-width: 768px) {
          .desktop-nav {
            display: none !important;
          }
          .mobile-menu-btn {
            display: block !important;
          }
        }
      `})]})}function En(){return a.jsxs("footer",{style:{background:"var(--kb-navy)",color:"var(--kb-white)",padding:"3rem 1rem 2rem",marginTop:"auto"},children:[a.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"2rem"},children:[a.jsxs("div",{children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[a.jsx("div",{style:{width:"36px",height:"36px",background:"var(--kb-gold)",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--kb-navy)",fontFamily:"var(--font-display)",fontWeight:"700"},children:"K"}),a.jsx("span",{style:{fontFamily:"var(--font-display)",fontWeight:"600",fontSize:"1.1rem"},children:"Kinderbucks"})]}),a.jsx("p",{style:{color:"var(--kb-gray-300)",fontSize:"0.9rem",lineHeight:1.6},children:"Village of Kinderhook's local currency program. Supporting local businesses, strengthening community."}),a.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.8rem",marginTop:"1rem"},children:"Est. 2026"})]}),a.jsxs("div",{children:[a.jsx("h4",{style:{color:"var(--kb-gold)",marginBottom:"1rem",fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Quick Links"}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[a.jsx(ue,{to:"/demo",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"See Demo"}),a.jsx(ue,{to:"/about",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"How It Works"}),a.jsx(ue,{to:"/benefits",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"Member Benefits"}),a.jsx(ue,{to:"/exchange",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"Get Kinderbucks"}),a.jsx(ue,{to:"/businesses",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"For Businesses"})]})]}),a.jsxs("div",{children:[a.jsx("h4",{style:{color:"var(--kb-gold)",marginBottom:"1rem",fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"For Members"}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[a.jsx(ue,{to:"/account",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"My Account"}),a.jsx(ue,{to:"/profile",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"Kinderhooker Profile"}),a.jsx(ue,{to:"/scan/KB-0001",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"Verify Currency"})]})]}),a.jsxs("div",{children:[a.jsx("h4",{style:{color:"var(--kb-gold)",marginBottom:"1rem",fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Contact"}),a.jsxs("p",{style:{color:"var(--kb-gray-300)",fontSize:"0.9rem",lineHeight:1.8},children:["Village of Kinderhook",a.jsx("br",{}),"Columbia County, NY"]})]})]}),a.jsxs("div",{style:{maxWidth:"1200px",margin:"2rem auto 0",paddingTop:"2rem",borderTop:"1px solid var(--kb-navy-light)",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"1rem"},children:[a.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.8rem"},children:" 2026 Kinderbucks. A Harmonic Systems project."}),a.jsx("div",{style:{display:"flex",gap:"1.5rem"},children:a.jsx(ue,{to:"/admin/dashboard",style:{color:"var(--kb-gray-500)",fontSize:"0.8rem"},children:"Admin"})})]})]})}function K8(){const{isAuthenticated:n,loading:e}=Oi(),t=dl();return j.useEffect(()=>{!e&&n&&t("/card",{replace:!0})},[n,e,t]),e?null:a.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[a.jsx(Sn,{}),a.jsx("section",{style:{background:"linear-gradient(135deg, var(--kb-navy) 0%, var(--kb-navy-light) 100%)",color:"var(--kb-white)",padding:"4rem 1rem",textAlign:"center"},children:a.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},style:{maxWidth:"800px",margin:"0 auto"},children:[a.jsx("div",{style:{display:"inline-block",background:"rgba(201, 162, 39, 0.2)",color:"var(--kb-gold)",padding:"0.5rem 1rem",borderRadius:"100px",fontSize:"0.85rem",fontWeight:"600",marginBottom:"1.5rem"},children:"Village of Kinderhook  Est. 2026"}),a.jsxs("h1",{style:{fontFamily:"var(--font-display)",fontSize:"clamp(2.5rem, 5vw, 3.5rem)",fontWeight:"700",marginBottom:"1.5rem",lineHeight:1.2},children:["Strengthen Our Village,",a.jsx("br",{}),a.jsx("span",{style:{color:"var(--kb-gold)"},children:"One Kinderbuck at a Time"})]}),a.jsx("p",{style:{fontSize:"1.2rem",color:"var(--kb-gray-300)",marginBottom:"2rem",maxWidth:"600px",margin:"0 auto 2rem"},children:"A local currency program that keeps money circulating in Kinderhook, rewards loyal customers, and strengthens our community economy."}),a.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[a.jsx(ue,{to:"/exchange",className:"btn btn-gold",style:{padding:"1rem 2rem",fontSize:"1.1rem"},children:"Get Kinderbucks"}),a.jsx(ue,{to:"/demo",className:"btn btn-outline",style:{padding:"1rem 2rem",fontSize:"1.1rem",borderColor:"var(--kb-white)",color:"var(--kb-white)"},children:"See Demo"})]})]})}),a.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:a.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[a.jsxs("div",{style:{textAlign:"center",marginBottom:"3rem"},children:[a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"How Kinderbucks Works"}),a.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"Simple steps to start supporting local"})]}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"2rem"},children:[{step:"1",title:"Exchange",description:"Convert USD to Kinderbucks at participating locations or online. Members get bonus rates!",Icon:kf},{step:"2",title:"Spend Local",description:"Use Kinderbucks at any of our 19+ participating village businesses.",Icon:Nt},{step:"3",title:"Check In",description:"Scan QR codes when you visit to build your Kinderhooker status and unlock rewards.",Icon:br},{step:"4",title:"Earn More",description:"Higher tiers mean better exchange rates. Village Patrons get 25% bonus!",Icon:Vs}].map((r,s)=>a.jsxs(ge.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:s*.1},viewport:{once:!0},className:"card",style:{textAlign:"center"},children:[a.jsx("div",{style:{width:"60px",height:"60px",background:"var(--kb-navy)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:a.jsx(r.Icon,{size:28,color:"var(--kb-gold)",strokeWidth:1.5})}),a.jsxs("div",{style:{color:"var(--kb-gold)",fontSize:"0.8rem",fontWeight:"600",marginBottom:"0.25rem"},children:["STEP ",r.step]}),a.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:r.title}),a.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.95rem"},children:r.description})]},s))})]})}),a.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:a.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[a.jsxs("div",{style:{textAlign:"center",marginBottom:"3rem"},children:[a.jsx("div",{className:"badge badge-gold",style:{marginBottom:"1rem"},children:"OK Membership"}),a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"Become a Kinderhooker"}),a.jsx("p",{style:{color:"var(--kb-gray-500)",maxWidth:"600px",margin:"0 auto"},children:"Visit local businesses to level up your membership and unlock better exchange rates"})]}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"1.5rem"},children:[{name:"Curious",businesses:"1+",bonus:"10%",color:"#888888",Icon:Jt},{name:"Hooked",businesses:"5+",bonus:"15%",color:"#2e7d32",Icon:rr},{name:"Line & Sinker",businesses:"10+",bonus:"20%",color:"#1565c0",Icon:nr},{name:"Village Patron",businesses:"15+",bonus:"25%",color:"#c9a227",Icon:zn,featured:!0}].map((r,s)=>a.jsxs(ge.div,{initial:{opacity:0,scale:.95},whileInView:{opacity:1,scale:1},transition:{delay:s*.1},viewport:{once:!0},className:"card",style:{textAlign:"center",border:r.featured?"2px solid var(--kb-gold)":void 0,position:"relative",overflow:"hidden"},children:[r.featured&&a.jsx("div",{style:{position:"absolute",top:"10px",right:"-30px",background:"var(--kb-gold)",color:"var(--kb-navy)",padding:"0.25rem 2rem",fontSize:"0.7rem",fontWeight:"600",transform:"rotate(45deg)"},children:"BEST"}),a.jsx("div",{style:{width:"50px",height:"50px",background:`${r.color}15`,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 0.75rem"},children:a.jsx(r.Icon,{size:24,color:r.color,strokeWidth:1.5})}),a.jsx("h3",{style:{color:r.color,marginBottom:"0.5rem"},children:r.name}),a.jsxs("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem",marginBottom:"1rem"},children:[r.businesses," businesses visited"]}),a.jsxs("div",{style:{background:`${r.color}15`,borderRadius:"8px",padding:"1rem"},children:[a.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:r.color},children:r.bonus}),a.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:"Exchange Bonus"})]})]},s))}),a.jsx("div",{style:{textAlign:"center",marginTop:"2rem"},children:a.jsx(ue,{to:"/profile",className:"btn btn-primary",children:"View My Progress"})})]})}),a.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:a.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[a.jsxs("div",{style:{textAlign:"center",marginBottom:"3rem"},children:[a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"Participating Businesses"}),a.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"Support these local Kinderhook establishments"})]}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"1rem"},children:["The Aviary","Morningbird Cafe","Saisonnier","Broad Street Bagel","Brooklyn Pizzeria","Isola Wine Bar","OK Pantry","Kinderhook Books","Samascott's","The School Gallery","Old Dutch Inn","Muse Aesthetics"].map((r,s)=>a.jsx("div",{style:{background:"var(--kb-white)",borderRadius:"8px",padding:"1rem",textAlign:"center",fontSize:"0.9rem",color:"var(--kb-gray-700)",border:"1px solid var(--kb-gray-200)"},children:r},s))}),a.jsx("div",{style:{textAlign:"center",marginTop:"2rem"},children:a.jsx(ue,{to:"/businesses",className:"btn btn-secondary",children:"View All 19 Businesses "})})]})}),a.jsx("section",{style:{padding:"4rem 1rem",background:"linear-gradient(135deg, var(--kb-green) 0%, var(--kb-green-light) 100%)",color:"var(--kb-white)",textAlign:"center"},children:a.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto"},children:[a.jsx("h2",{style:{marginBottom:"1rem"},children:"Ready to Support Local?"}),a.jsx("p",{style:{opacity:.9,marginBottom:"2rem"},children:"Join the Kinderbucks program today and start earning rewards while strengthening our village economy."}),a.jsx("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:a.jsx(ue,{to:"/exchange",className:"btn btn-gold",style:{padding:"1rem 2rem"},children:"Get Your First Kinderbucks"})})]})}),a.jsx(En,{})]})}const nb={customer:{id:"customer",title:"For Customers",subtitle:"Start supporting local in minutes",icon:"",color:"var(--kb-green)",minCommitment:"Start with just $10"},business:{id:"business",title:"For Business Owners",subtitle:"Accept Kinderbucks and grow your customer base",icon:"",color:"var(--kb-navy)",minCommitment:"No upfront cost to join"},association:{id:"association",title:"For the Business Association",subtitle:"Strengthen the village economy together",icon:"",color:"var(--kb-gold)",minCommitment:"Community-driven program"}},rb=[{number:1,title:"Get Your First Kinderbucks",description:"Visit any exchange location with USD. Start with as little as $10.",visual:"exchange",details:["Visit Village Hall, OK Pantry, or The Aviary","Exchange any amount ($10, $20, $50, $100)","New members get 10% bonus automatically","Receive physical Kinderbucks bills"],tip:"First-time? You'll get $11 in Kinderbucks for every $10 USD!"},{number:2,title:"Spend at Local Businesses",description:"Use Kinderbucks like cash at 19+ participating village businesses.",visual:"spend",details:["Accepted at restaurants, shops, and services","Works just like regular currency","Businesses give change in Kinderbucks when possible","100% of your money stays in Kinderhook"],tip:"Check the business directory to plan your local shopping route!"},{number:3,title:"Check In When You Visit",description:"Scan QR codes at businesses to track your visits and earn rewards.",visual:"checkin",details:["Look for the Kinderbucks QR code at each business","Scan with your phone camera","Each unique business counts toward your tier","One check-in per business per hour"],tip:"You don't need an app - just scan and go!"},{number:4,title:"Level Up Your Membership",description:"Visit more businesses to unlock better exchange rates.",visual:"tiers",details:["Curious (1+ businesses): 10% bonus","Hooked (5+ businesses): 15% bonus","Line & Sinker (10+ businesses): 20% bonus","Village Patron (15+ businesses): 25% bonus"],tip:"At 25% bonus, $100 USD gets you $125 in Kinderbucks!"}],q8=[{number:1,title:"Register Your Business",description:"Join the program with no upfront costs or monthly fees.",visual:"register",details:["Contact the Business Association to register","Receive your unique business QR code","Get listed in the Kinderbucks directory","No fees, no contracts, no risk"],tip:"Registration takes less than 10 minutes!"},{number:2,title:"Accept Kinderbucks Payments",description:"Accept Kinderbucks just like you accept cash.",visual:"accept",details:["Kinderbucks bills have QR codes for verification","Scan any bill to verify authenticity","Make change in Kinderbucks when possible","Train staff in minutes"],tip:"Verification is instant - just scan the QR code on any bill."},{number:3,title:"Build Customer Loyalty",description:"Customers check in at your business, driving repeat visits.",visual:"loyalty",details:["Display your QR code prominently","Customers scan to record their visit","Each check-in helps customers level up","Higher tiers = more valuable customers"],tip:"Village Patrons have visited 15+ businesses - they're your most loyal customers!"},{number:4,title:"Redeem or Recirculate",description:"Use Kinderbucks at other businesses or redeem for USD.",visual:"redeem",details:["Spend at other participating businesses","Pay suppliers who accept Kinderbucks","Redeem for USD at exchange locations (1:1)","Keep money circulating locally"],tip:"Most businesses find it easier to spend than redeem - the money keeps moving!"}],G8=[{number:1,title:"Program Overview",description:"A local currency that strengthens the village economy.",visual:"overview",details:["Kinderbucks is a complementary currency for Kinderhook","Backed 1:1 by USD in a dedicated account","Bonus rates funded by interest and community investment","QR verification prevents counterfeiting"],tip:"Complementary currencies have been used successfully in communities worldwide."},{number:2,title:"Economic Impact",description:"Money that circulates locally multiplies its impact.",visual:"impact",details:["Studies show local currency circulates 3-4x more than USD","$10,000 in circulation = $30,000-40,000 in local economic activity",'Encourages "buy local" behavior',"Builds connections between businesses and residents"],tip:"Every Kinderbuck spent is guaranteed to stay in the village."},{number:3,title:"Member Engagement",description:"Tier system drives exploration of local businesses.",visual:"engagement",details:["Gamification encourages visiting new businesses","Tier bonuses reward loyal community members","Check-in data shows foot traffic patterns","Members become ambassadors for local spending"],tip:"The average member discovers 3 new businesses they didn't know about."},{number:4,title:"Administration & Growth",description:"Simple management with room to scale.",visual:"admin",details:["Digital dashboard tracks circulation and usage","New businesses join with minimal onboarding","Seasonal promotions drive engagement","Expand to neighboring communities over time"],tip:"The program is designed to be self-sustaining once established."}];function Q8({step:n,isActive:e,onClick:t}){return a.jsx(ge.div,{onClick:t,whileHover:{scale:1.02},whileTap:{scale:.98},style:{background:e?"var(--kb-navy)":"var(--kb-white)",color:e?"var(--kb-white)":"var(--kb-gray-700)",borderRadius:"12px",padding:"1.25rem",cursor:"pointer",border:e?"none":"1px solid var(--kb-gray-200)",transition:"all 0.2s"},children:a.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[a.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"50%",background:e?"var(--kb-gold)":"var(--kb-gray-100)",color:e?"var(--kb-navy)":"var(--kb-gray-500)",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"700",fontSize:"1rem",flexShrink:0},children:n.number}),a.jsxs("div",{children:[a.jsx("h4",{style:{margin:0,fontSize:"1rem",fontWeight:"600",marginBottom:"0.25rem"},children:n.title}),a.jsx("p",{style:{margin:0,fontSize:"0.85rem",opacity:.8},children:n.description})]})]})})}function Y8({step:n,audienceColor:e}){return a.jsxs(ge.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},style:{background:"var(--kb-white)",borderRadius:"16px",padding:"2rem",height:"100%",display:"flex",flexDirection:"column"},children:[a.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",background:`${e}15`,color:e,padding:"0.5rem 1rem",borderRadius:"100px",fontSize:"0.8rem",fontWeight:"600",marginBottom:"1rem",alignSelf:"flex-start"},children:["STEP ",n.number]}),a.jsx("h3",{style:{color:"var(--kb-navy)",fontSize:"1.5rem",marginBottom:"0.5rem"},children:n.title}),a.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem",fontSize:"1.05rem"},children:n.description}),a.jsxs("div",{style:{background:"var(--kb-cream)",borderRadius:"12px",padding:"1.5rem",marginBottom:"1.5rem",flex:1},children:[a.jsx("h4",{style:{color:"var(--kb-navy)",fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"1rem"},children:"What This Looks Like"}),a.jsx("ul",{style:{margin:0,padding:0,listStyle:"none"},children:n.details.map((t,r)=>a.jsxs("li",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",marginBottom:"0.75rem",color:"var(--kb-gray-700)"},children:[a.jsx("span",{style:{color:"var(--kb-green)",fontWeight:"600"},children:""}),t]},r))})]}),a.jsxs("div",{style:{background:"linear-gradient(135deg, var(--kb-gold) 0%, #d4af37 100%)",borderRadius:"12px",padding:"1rem 1.25rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[a.jsx("span",{style:{fontSize:"1.5rem"},children:""}),a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:"600",color:"var(--kb-navy)",fontSize:"0.8rem",textTransform:"uppercase",marginBottom:"0.25rem"},children:"Pro Tip"}),a.jsx("div",{style:{color:"var(--kb-navy)",fontSize:"0.95rem"},children:n.tip})]})]})]},n.number)}function X8({audience:n,steps:e}){const[t,r]=j.useState(0);return a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1.5fr",gap:"2rem",minHeight:"500px"},className:"demo-flow-grid",children:[a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:e.map((s,l)=>a.jsx(Q8,{step:s,isActive:t===l,onClick:()=>r(l)},s.number))}),a.jsx(q2,{mode:"wait",children:a.jsx(Y8,{step:e[t],audienceColor:n.color},t)})]})}function eh({icon:n,title:e,description:t}){return a.jsxs("div",{style:{background:"var(--kb-white)",borderRadius:"12px",padding:"1.5rem",textAlign:"center",border:"1px solid var(--kb-gray-200)"},children:[a.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.75rem"},children:n}),a.jsx("h4",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:e}),a.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem",margin:0},children:t})]})}function J8(){const[n,e]=j.useState("customer"),t=nb[n],r=()=>{switch(n){case"customer":return rb;case"business":return q8;case"association":return G8;default:return rb}},l=(()=>{switch(n){case"customer":return{to:"/exchange",text:"Get Your First Kinderbucks",secondary:"/businesses",secondaryText:"Browse Businesses"};case"business":return{to:"/businesses",text:"Register Your Business",secondary:"/about",secondaryText:"Learn More"};case"association":return{to:"/about",text:"Full Program Details",secondary:"/admin/dashboard",secondaryText:"View Dashboard"};default:return{to:"/exchange",text:"Get Started"}}})();return a.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[a.jsx(Sn,{}),a.jsx("section",{style:{background:"linear-gradient(135deg, var(--kb-navy) 0%, var(--kb-navy-light) 100%)",color:"var(--kb-white)",padding:"3rem 1rem",textAlign:"center"},children:a.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{maxWidth:"800px",margin:"0 auto"},children:[a.jsx("div",{className:"badge badge-gold",style:{marginBottom:"1rem"},children:"Interactive Demo"}),a.jsx("h1",{style:{fontFamily:"var(--font-display)",fontSize:"clamp(2rem, 4vw, 2.75rem)",fontWeight:"700",marginBottom:"1rem"},children:"See How Kinderbucks Works"}),a.jsx("p",{style:{fontSize:"1.15rem",color:"var(--kb-gray-300)",maxWidth:"600px",margin:"0 auto"},children:"Choose your perspective below to see a step-by-step walkthrough of the Kinderbucks program."})]})}),a.jsx("section",{style:{background:"var(--kb-white)",padding:"2rem 1rem",borderBottom:"1px solid var(--kb-gray-200)"},children:a.jsx("div",{style:{maxWidth:"900px",margin:"0 auto"},children:a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem"},children:Object.values(nb).map(c=>a.jsxs(ge.button,{onClick:()=>e(c.id),whileHover:{scale:1.02},whileTap:{scale:.98},style:{background:n===c.id?`linear-gradient(135deg, ${c.color} 0%, ${c.color}dd 100%)`:"var(--kb-cream)",color:n===c.id?"var(--kb-white)":"var(--kb-gray-700)",border:n===c.id?"none":"2px solid var(--kb-gray-200)",borderRadius:"12px",padding:"1.5rem",cursor:"pointer",textAlign:"left",transition:"all 0.2s"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[a.jsx("span",{style:{fontSize:"1.5rem"},children:c.icon}),a.jsx("span",{style:{fontWeight:"600",fontSize:"1.1rem"},children:c.title})]}),a.jsx("p",{style:{margin:0,fontSize:"0.9rem",opacity:.85},children:c.subtitle}),a.jsx("div",{style:{marginTop:"0.75rem",fontSize:"0.8rem",fontWeight:"600",opacity:n===c.id?1:.7},children:c.minCommitment})]},c.id))})})}),a.jsx("section",{style:{background:"var(--kb-cream)",padding:"3rem 1rem",flex:1},children:a.jsx("div",{style:{maxWidth:"1100px",margin:"0 auto"},children:a.jsx(q2,{mode:"wait",children:a.jsx(ge.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:a.jsx(X8,{audience:t,steps:r()})},n)})})}),a.jsx("section",{style:{background:"var(--kb-white)",padding:"3rem 1rem",borderTop:"1px solid var(--kb-gray-200)"},children:a.jsxs("div",{style:{maxWidth:"900px",margin:"0 auto"},children:[a.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"Minimal Commitment, Maximum Impact"}),a.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"Kinderbucks is designed to be easy to try and rewarding to use"})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem"},children:[a.jsx(eh,{icon:"",title:"Start with $10",description:"No minimum exchange amount. Try it with pocket change."}),a.jsx(eh,{icon:"",title:"No Fees",description:"No signup fees, no monthly costs, no hidden charges."}),a.jsx(eh,{icon:"",title:"Full Refund",description:"Businesses can redeem Kinderbucks for USD 1:1 anytime."}),a.jsx(eh,{icon:"",title:"Instant Setup",description:"Customers start immediately. Businesses onboard in minutes."})]})]})}),a.jsx("section",{style:{background:t.color,padding:"3rem 1rem",textAlign:"center"},children:a.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto"},children:[a.jsx("h2",{style:{color:"var(--kb-white)",marginBottom:"0.5rem"},children:"Ready to Get Started?"}),a.jsxs("p",{style:{color:"rgba(255,255,255,0.85)",marginBottom:"2rem"},children:[n==="customer"&&"Join hundreds of Kinderhook residents supporting local businesses.",n==="business"&&"Join 19 local businesses already accepting Kinderbucks.",n==="association"&&"See the full details of how the program operates."]}),a.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[a.jsx(ue,{to:l.to,className:"btn",style:{background:"var(--kb-white)",color:t.color,padding:"1rem 2rem",fontSize:"1.1rem",fontWeight:"600"},children:l.text}),l.secondary&&a.jsx(ue,{to:l.secondary,className:"btn btn-outline",style:{borderColor:"var(--kb-white)",color:"var(--kb-white)",padding:"1rem 2rem",fontSize:"1.1rem"},children:l.secondaryText})]})]})}),a.jsx(En,{}),a.jsx("style",{children:`
        @media (max-width: 768px) {
          .demo-flow-grid {
            grid-template-columns: 1fr !important;
          }
        }
      `})]})}var Z8=Object.defineProperty,qh=Object.getOwnPropertySymbols,oT=Object.prototype.hasOwnProperty,aT=Object.prototype.propertyIsEnumerable,ib=(n,e,t)=>e in n?Z8(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Fg=(n,e)=>{for(var t in e||(e={}))oT.call(e,t)&&ib(n,t,e[t]);if(qh)for(var t of qh(e))aT.call(e,t)&&ib(n,t,e[t]);return n},Ug=(n,e)=>{var t={};for(var r in n)oT.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&qh)for(var r of qh(n))e.indexOf(r)<0&&aT.call(n,r)&&(t[r]=n[r]);return t};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Bo;(n=>{const e=class Be{constructor(d,m,g,y){if(this.version=d,this.errorCorrectionLevel=m,this.modules=[],this.isFunction=[],d<Be.MIN_VERSION||d>Be.MAX_VERSION)throw new RangeError("Version value out of range");if(y<-1||y>7)throw new RangeError("Mask value out of range");this.size=d*4+17;let x=[];for(let _=0;_<this.size;_++)x.push(!1);for(let _=0;_<this.size;_++)this.modules.push(x.slice()),this.isFunction.push(x.slice());this.drawFunctionPatterns();const S=this.addEccAndInterleave(g);if(this.drawCodewords(S),y==-1){let _=1e9;for(let I=0;I<8;I++){this.applyMask(I),this.drawFormatBits(I);const C=this.getPenaltyScore();C<_&&(y=I,_=C),this.applyMask(I)}}s(0<=y&&y<=7),this.mask=y,this.applyMask(y),this.drawFormatBits(y),this.isFunction=[]}static encodeText(d,m){const g=n.QrSegment.makeSegments(d);return Be.encodeSegments(g,m)}static encodeBinary(d,m){const g=n.QrSegment.makeBytes(d);return Be.encodeSegments([g],m)}static encodeSegments(d,m,g=1,y=40,x=-1,S=!0){if(!(Be.MIN_VERSION<=g&&g<=y&&y<=Be.MAX_VERSION)||x<-1||x>7)throw new RangeError("Invalid value");let _,I;for(_=g;;_++){const R=Be.getNumDataCodewords(_,m)*8,K=c.getTotalBits(d,_);if(K<=R){I=K;break}if(_>=y)throw new RangeError("Data too long")}for(const R of[Be.Ecc.MEDIUM,Be.Ecc.QUARTILE,Be.Ecc.HIGH])S&&I<=Be.getNumDataCodewords(_,R)*8&&(m=R);let C=[];for(const R of d){t(R.mode.modeBits,4,C),t(R.numChars,R.mode.numCharCountBits(_),C);for(const K of R.getData())C.push(K)}s(C.length==I);const M=Be.getNumDataCodewords(_,m)*8;s(C.length<=M),t(0,Math.min(4,M-C.length),C),t(0,(8-C.length%8)%8,C),s(C.length%8==0);for(let R=236;C.length<M;R^=253)t(R,8,C);let D=[];for(;D.length*8<C.length;)D.push(0);return C.forEach((R,K)=>D[K>>>3]|=R<<7-(K&7)),new Be(_,m,D,x)}getModule(d,m){return 0<=d&&d<this.size&&0<=m&&m<this.size&&this.modules[m][d]}getModules(){return this.modules}drawFunctionPatterns(){for(let g=0;g<this.size;g++)this.setFunctionModule(6,g,g%2==0),this.setFunctionModule(g,6,g%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const d=this.getAlignmentPatternPositions(),m=d.length;for(let g=0;g<m;g++)for(let y=0;y<m;y++)g==0&&y==0||g==0&&y==m-1||g==m-1&&y==0||this.drawAlignmentPattern(d[g],d[y]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(d){const m=this.errorCorrectionLevel.formatBits<<3|d;let g=m;for(let x=0;x<10;x++)g=g<<1^(g>>>9)*1335;const y=(m<<10|g)^21522;s(y>>>15==0);for(let x=0;x<=5;x++)this.setFunctionModule(8,x,r(y,x));this.setFunctionModule(8,7,r(y,6)),this.setFunctionModule(8,8,r(y,7)),this.setFunctionModule(7,8,r(y,8));for(let x=9;x<15;x++)this.setFunctionModule(14-x,8,r(y,x));for(let x=0;x<8;x++)this.setFunctionModule(this.size-1-x,8,r(y,x));for(let x=8;x<15;x++)this.setFunctionModule(8,this.size-15+x,r(y,x));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let d=this.version;for(let g=0;g<12;g++)d=d<<1^(d>>>11)*7973;const m=this.version<<12|d;s(m>>>18==0);for(let g=0;g<18;g++){const y=r(m,g),x=this.size-11+g%3,S=Math.floor(g/3);this.setFunctionModule(x,S,y),this.setFunctionModule(S,x,y)}}drawFinderPattern(d,m){for(let g=-4;g<=4;g++)for(let y=-4;y<=4;y++){const x=Math.max(Math.abs(y),Math.abs(g)),S=d+y,_=m+g;0<=S&&S<this.size&&0<=_&&_<this.size&&this.setFunctionModule(S,_,x!=2&&x!=4)}}drawAlignmentPattern(d,m){for(let g=-2;g<=2;g++)for(let y=-2;y<=2;y++)this.setFunctionModule(d+y,m+g,Math.max(Math.abs(y),Math.abs(g))!=1)}setFunctionModule(d,m,g){this.modules[m][d]=g,this.isFunction[m][d]=!0}addEccAndInterleave(d){const m=this.version,g=this.errorCorrectionLevel;if(d.length!=Be.getNumDataCodewords(m,g))throw new RangeError("Invalid argument");const y=Be.NUM_ERROR_CORRECTION_BLOCKS[g.ordinal][m],x=Be.ECC_CODEWORDS_PER_BLOCK[g.ordinal][m],S=Math.floor(Be.getNumRawDataModules(m)/8),_=y-S%y,I=Math.floor(S/y);let C=[];const M=Be.reedSolomonComputeDivisor(x);for(let R=0,K=0;R<y;R++){let z=d.slice(K,K+I-x+(R<_?0:1));K+=z.length;const U=Be.reedSolomonComputeRemainder(z,M);R<_&&z.push(0),C.push(z.concat(U))}let D=[];for(let R=0;R<C[0].length;R++)C.forEach((K,z)=>{(R!=I-x||z>=_)&&D.push(K[R])});return s(D.length==S),D}drawCodewords(d){if(d.length!=Math.floor(Be.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let m=0;for(let g=this.size-1;g>=1;g-=2){g==6&&(g=5);for(let y=0;y<this.size;y++)for(let x=0;x<2;x++){const S=g-x,I=(g+1&2)==0?this.size-1-y:y;!this.isFunction[I][S]&&m<d.length*8&&(this.modules[I][S]=r(d[m>>>3],7-(m&7)),m++)}}s(m==d.length*8)}applyMask(d){if(d<0||d>7)throw new RangeError("Mask value out of range");for(let m=0;m<this.size;m++)for(let g=0;g<this.size;g++){let y;switch(d){case 0:y=(g+m)%2==0;break;case 1:y=m%2==0;break;case 2:y=g%3==0;break;case 3:y=(g+m)%3==0;break;case 4:y=(Math.floor(g/3)+Math.floor(m/2))%2==0;break;case 5:y=g*m%2+g*m%3==0;break;case 6:y=(g*m%2+g*m%3)%2==0;break;case 7:y=((g+m)%2+g*m%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[m][g]&&y&&(this.modules[m][g]=!this.modules[m][g])}}getPenaltyScore(){let d=0;for(let x=0;x<this.size;x++){let S=!1,_=0,I=[0,0,0,0,0,0,0];for(let C=0;C<this.size;C++)this.modules[x][C]==S?(_++,_==5?d+=Be.PENALTY_N1:_>5&&d++):(this.finderPenaltyAddHistory(_,I),S||(d+=this.finderPenaltyCountPatterns(I)*Be.PENALTY_N3),S=this.modules[x][C],_=1);d+=this.finderPenaltyTerminateAndCount(S,_,I)*Be.PENALTY_N3}for(let x=0;x<this.size;x++){let S=!1,_=0,I=[0,0,0,0,0,0,0];for(let C=0;C<this.size;C++)this.modules[C][x]==S?(_++,_==5?d+=Be.PENALTY_N1:_>5&&d++):(this.finderPenaltyAddHistory(_,I),S||(d+=this.finderPenaltyCountPatterns(I)*Be.PENALTY_N3),S=this.modules[C][x],_=1);d+=this.finderPenaltyTerminateAndCount(S,_,I)*Be.PENALTY_N3}for(let x=0;x<this.size-1;x++)for(let S=0;S<this.size-1;S++){const _=this.modules[x][S];_==this.modules[x][S+1]&&_==this.modules[x+1][S]&&_==this.modules[x+1][S+1]&&(d+=Be.PENALTY_N2)}let m=0;for(const x of this.modules)m=x.reduce((S,_)=>S+(_?1:0),m);const g=this.size*this.size,y=Math.ceil(Math.abs(m*20-g*10)/g)-1;return s(0<=y&&y<=9),d+=y*Be.PENALTY_N4,s(0<=d&&d<=2568888),d}getAlignmentPatternPositions(){if(this.version==1)return[];{const d=Math.floor(this.version/7)+2,m=this.version==32?26:Math.ceil((this.version*4+4)/(d*2-2))*2;let g=[6];for(let y=this.size-7;g.length<d;y-=m)g.splice(1,0,y);return g}}static getNumRawDataModules(d){if(d<Be.MIN_VERSION||d>Be.MAX_VERSION)throw new RangeError("Version number out of range");let m=(16*d+128)*d+64;if(d>=2){const g=Math.floor(d/7)+2;m-=(25*g-10)*g-55,d>=7&&(m-=36)}return s(208<=m&&m<=29648),m}static getNumDataCodewords(d,m){return Math.floor(Be.getNumRawDataModules(d)/8)-Be.ECC_CODEWORDS_PER_BLOCK[m.ordinal][d]*Be.NUM_ERROR_CORRECTION_BLOCKS[m.ordinal][d]}static reedSolomonComputeDivisor(d){if(d<1||d>255)throw new RangeError("Degree out of range");let m=[];for(let y=0;y<d-1;y++)m.push(0);m.push(1);let g=1;for(let y=0;y<d;y++){for(let x=0;x<m.length;x++)m[x]=Be.reedSolomonMultiply(m[x],g),x+1<m.length&&(m[x]^=m[x+1]);g=Be.reedSolomonMultiply(g,2)}return m}static reedSolomonComputeRemainder(d,m){let g=m.map(y=>0);for(const y of d){const x=y^g.shift();g.push(0),m.forEach((S,_)=>g[_]^=Be.reedSolomonMultiply(S,x))}return g}static reedSolomonMultiply(d,m){if(d>>>8||m>>>8)throw new RangeError("Byte out of range");let g=0;for(let y=7;y>=0;y--)g=g<<1^(g>>>7)*285,g^=(m>>>y&1)*d;return s(g>>>8==0),g}finderPenaltyCountPatterns(d){const m=d[1];s(m<=this.size*3);const g=m>0&&d[2]==m&&d[3]==m*3&&d[4]==m&&d[5]==m;return(g&&d[0]>=m*4&&d[6]>=m?1:0)+(g&&d[6]>=m*4&&d[0]>=m?1:0)}finderPenaltyTerminateAndCount(d,m,g){return d&&(this.finderPenaltyAddHistory(m,g),m=0),m+=this.size,this.finderPenaltyAddHistory(m,g),this.finderPenaltyCountPatterns(g)}finderPenaltyAddHistory(d,m){m[0]==0&&(d+=this.size),m.pop(),m.unshift(d)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],n.QrCode=e;function t(f,d,m){if(d<0||d>31||f>>>d)throw new RangeError("Value out of range");for(let g=d-1;g>=0;g--)m.push(f>>>g&1)}function r(f,d){return(f>>>d&1)!=0}function s(f){if(!f)throw new Error("Assertion error")}const l=class yt{constructor(d,m,g){if(this.mode=d,this.numChars=m,this.bitData=g,m<0)throw new RangeError("Invalid argument");this.bitData=g.slice()}static makeBytes(d){let m=[];for(const g of d)t(g,8,m);return new yt(yt.Mode.BYTE,d.length,m)}static makeNumeric(d){if(!yt.isNumeric(d))throw new RangeError("String contains non-numeric characters");let m=[];for(let g=0;g<d.length;){const y=Math.min(d.length-g,3);t(parseInt(d.substring(g,g+y),10),y*3+1,m),g+=y}return new yt(yt.Mode.NUMERIC,d.length,m)}static makeAlphanumeric(d){if(!yt.isAlphanumeric(d))throw new RangeError("String contains unencodable characters in alphanumeric mode");let m=[],g;for(g=0;g+2<=d.length;g+=2){let y=yt.ALPHANUMERIC_CHARSET.indexOf(d.charAt(g))*45;y+=yt.ALPHANUMERIC_CHARSET.indexOf(d.charAt(g+1)),t(y,11,m)}return g<d.length&&t(yt.ALPHANUMERIC_CHARSET.indexOf(d.charAt(g)),6,m),new yt(yt.Mode.ALPHANUMERIC,d.length,m)}static makeSegments(d){return d==""?[]:yt.isNumeric(d)?[yt.makeNumeric(d)]:yt.isAlphanumeric(d)?[yt.makeAlphanumeric(d)]:[yt.makeBytes(yt.toUtf8ByteArray(d))]}static makeEci(d){let m=[];if(d<0)throw new RangeError("ECI assignment value out of range");if(d<128)t(d,8,m);else if(d<16384)t(2,2,m),t(d,14,m);else if(d<1e6)t(6,3,m),t(d,21,m);else throw new RangeError("ECI assignment value out of range");return new yt(yt.Mode.ECI,0,m)}static isNumeric(d){return yt.NUMERIC_REGEX.test(d)}static isAlphanumeric(d){return yt.ALPHANUMERIC_REGEX.test(d)}getData(){return this.bitData.slice()}static getTotalBits(d,m){let g=0;for(const y of d){const x=y.mode.numCharCountBits(m);if(y.numChars>=1<<x)return 1/0;g+=4+x+y.bitData.length}return g}static toUtf8ByteArray(d){d=encodeURI(d);let m=[];for(let g=0;g<d.length;g++)d.charAt(g)!="%"?m.push(d.charCodeAt(g)):(m.push(parseInt(d.substring(g+1,g+3),16)),g+=2);return m}};l.NUMERIC_REGEX=/^[0-9]*$/,l.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,l.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let c=l;n.QrSegment=l})(Bo||(Bo={}));(n=>{(e=>{const t=class{constructor(s,l){this.ordinal=s,this.formatBits=l}};t.LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2),e.Ecc=t})(n.QrCode||(n.QrCode={}))})(Bo||(Bo={}));(n=>{(e=>{const t=class{constructor(s,l){this.modeBits=s,this.numBitsCharCount=l}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};t.NUMERIC=new t(1,[10,12,14]),t.ALPHANUMERIC=new t(2,[9,11,13]),t.BYTE=new t(4,[8,16,16]),t.KANJI=new t(8,[8,10,12]),t.ECI=new t(7,[0,0,0]),e.Mode=t})(n.QrSegment||(n.QrSegment={}))})(Bo||(Bo={}));var Fa=Bo;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var e9={L:Fa.QrCode.Ecc.LOW,M:Fa.QrCode.Ecc.MEDIUM,Q:Fa.QrCode.Ecc.QUARTILE,H:Fa.QrCode.Ecc.HIGH},lT=128,cT="L",uT="#FFFFFF",dT="#000000",hT=!1,fT=1,t9=4,n9=0,r9=.1;function mT(n,e=0){const t=[];return n.forEach(function(r,s){let l=null;r.forEach(function(c,f){if(!c&&l!==null){t.push(`M${l+e} ${s+e}h${f-l}v1H${l+e}z`),l=null;return}if(f===r.length-1){if(!c)return;l===null?t.push(`M${f+e},${s+e} h1v1H${f+e}z`):t.push(`M${l+e},${s+e} h${f+1-l}v1H${l+e}z`);return}c&&l===null&&(l=f)})}),t.join("")}function pT(n,e){return n.slice().map((t,r)=>r<e.y||r>=e.y+e.h?t:t.map((s,l)=>l<e.x||l>=e.x+e.w?s:!1))}function i9(n,e,t,r){if(r==null)return null;const s=n.length+t*2,l=Math.floor(e*r9),c=s/e,f=(r.width||l)*c,d=(r.height||l)*c,m=r.x==null?n.length/2-f/2:r.x*c,g=r.y==null?n.length/2-d/2:r.y*c,y=r.opacity==null?1:r.opacity;let x=null;if(r.excavate){let _=Math.floor(m),I=Math.floor(g),C=Math.ceil(f+m-_),M=Math.ceil(d+g-I);x={x:_,y:I,w:C,h:M}}const S=r.crossOrigin;return{x:m,y:g,h:d,w:f,excavation:x,opacity:y,crossOrigin:S}}function s9(n,e){return e!=null?Math.max(Math.floor(e),0):n?t9:n9}function gT({value:n,level:e,minVersion:t,includeMargin:r,marginSize:s,imageSettings:l,size:c,boostLevel:f}){let d=Lt.useMemo(()=>{const _=(Array.isArray(n)?n:[n]).reduce((I,C)=>(I.push(...Fa.QrSegment.makeSegments(C)),I),[]);return Fa.QrCode.encodeSegments(_,e9[e],t,void 0,void 0,f)},[n,e,t,f]);const{cells:m,margin:g,numCells:y,calculatedImageSettings:x}=Lt.useMemo(()=>{let S=d.getModules();const _=s9(r,s),I=S.length+_*2,C=i9(S,c,_,l);return{cells:S,margin:_,numCells:I,calculatedImageSettings:C}},[d,c,l,r,s]);return{qrcode:d,margin:g,cells:m,numCells:y,calculatedImageSettings:x}}var o9=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),a9=Lt.forwardRef(function(e,t){const r=e,{value:s,size:l=lT,level:c=cT,bgColor:f=uT,fgColor:d=dT,includeMargin:m=hT,minVersion:g=fT,boostLevel:y,marginSize:x,imageSettings:S}=r,I=Ug(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:C}=I,M=Ug(I,["style"]),D=S==null?void 0:S.src,R=Lt.useRef(null),K=Lt.useRef(null),z=Lt.useCallback(Ve=>{R.current=Ve,typeof t=="function"?t(Ve):t&&(t.current=Ve)},[t]),[U,A]=Lt.useState(!1),{margin:E,cells:N,numCells:V,calculatedImageSettings:B}=gT({value:s,level:c,minVersion:g,boostLevel:y,includeMargin:m,marginSize:x,imageSettings:S,size:l});Lt.useEffect(()=>{if(R.current!=null){const Ve=R.current,Ke=Ve.getContext("2d");if(!Ke)return;let at=N;const Te=K.current,ie=B!=null&&Te!==null&&Te.complete&&Te.naturalHeight!==0&&Te.naturalWidth!==0;ie&&B.excavation!=null&&(at=pT(N,B.excavation));const me=window.devicePixelRatio||1;Ve.height=Ve.width=l*me;const ce=l/V*me;Ke.scale(ce,ce),Ke.fillStyle=f,Ke.fillRect(0,0,V,V),Ke.fillStyle=d,o9?Ke.fill(new Path2D(mT(at,E))):N.forEach(function(H,te){H.forEach(function(Re,Pe){Re&&Ke.fillRect(Pe+E,te+E,1,1)})}),B&&(Ke.globalAlpha=B.opacity),ie&&Ke.drawImage(Te,B.x+E,B.y+E,B.w,B.h)}}),Lt.useEffect(()=>{A(!1)},[D]);const $=Fg({height:l,width:l},C);let O=null;return D!=null&&(O=Lt.createElement("img",{src:D,key:D,style:{display:"none"},onLoad:()=>{A(!0)},ref:K,crossOrigin:B==null?void 0:B.crossOrigin})),Lt.createElement(Lt.Fragment,null,Lt.createElement("canvas",Fg({style:$,height:l,width:l,ref:z,role:"img"},M)),O)});a9.displayName="QRCodeCanvas";var Wg=Lt.forwardRef(function(e,t){const r=e,{value:s,size:l=lT,level:c=cT,bgColor:f=uT,fgColor:d=dT,includeMargin:m=hT,minVersion:g=fT,boostLevel:y,title:x,marginSize:S,imageSettings:_}=r,I=Ug(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:C,cells:M,numCells:D,calculatedImageSettings:R}=gT({value:s,level:c,minVersion:g,boostLevel:y,includeMargin:m,marginSize:S,imageSettings:_,size:l});let K=M,z=null;_!=null&&R!=null&&(R.excavation!=null&&(K=pT(M,R.excavation)),z=Lt.createElement("image",{href:_.src,height:R.h,width:R.w,x:R.x+C,y:R.y+C,preserveAspectRatio:"none",opacity:R.opacity,crossOrigin:R.crossOrigin}));const U=mT(K,C);return Lt.createElement("svg",Fg({height:l,width:l,viewBox:`0 0 ${D} ${D}`,ref:t,role:"img"},I),!!x&&Lt.createElement("title",null,x),Lt.createElement("path",{fill:f,d:`M0,0 h${D}v${D}H0z`,shapeRendering:"crispEdges"}),Lt.createElement("path",{fill:d,d:U,shapeRendering:"crispEdges"}),z)});Wg.displayName="QRCodeSVG";const sb={1:{color:"#2d5a27",gradient:["#3d7a37","#2d5a27"],label:"ONE",accent:"#90c695"},5:{color:"#1e3a5f",gradient:["#2e5a8f","#1e3a5f"],label:"FIVE",accent:"#7ba3cc"},10:{color:"#5c2d5c",gradient:["#7c4d7c","#5c2d5c"],label:"TEN",accent:"#b89db8"},20:{color:"#8b6914",gradient:["#c9a227","#8b6914"],label:"TWENTY",accent:"#e8d48a"}};function ll({value:n,size:e=128,denomination:t=5,showFrame:r=!0}){const s=sb[t]||sb[5],l=e+48,c=16;return r?a.jsx("div",{style:{width:l,background:`linear-gradient(135deg, ${s.gradient[0]} 0%, ${s.gradient[1]} 100%)`,borderRadius:c,padding:"3px",display:"inline-block",boxShadow:"0 4px 12px rgba(0,0,0,0.2)"},children:a.jsxs("div",{style:{background:"linear-gradient(135deg, #fefefe 0%, #f5f5f0 100%)",borderRadius:c-2,padding:"8px",position:"relative"},children:[a.jsx("div",{style:{textAlign:"center",marginBottom:"6px",fontFamily:'"Georgia", serif',fontSize:"10px",fontWeight:"bold",color:s.color,letterSpacing:"3px",textTransform:"uppercase"},children:"KINDERBUCKS"}),a.jsxs("div",{style:{background:"white",borderRadius:"8px",padding:"8px",border:`2px solid ${s.accent}`,position:"relative"},children:[a.jsx("div",{style:{position:"absolute",top:"4px",left:"4px",width:"12px",height:"12px",borderTop:`2px solid ${s.color}`,borderLeft:`2px solid ${s.color}`,borderRadius:"2px 0 0 0"}}),a.jsx("div",{style:{position:"absolute",top:"4px",right:"4px",width:"12px",height:"12px",borderTop:`2px solid ${s.color}`,borderRight:`2px solid ${s.color}`,borderRadius:"0 2px 0 0"}}),a.jsx("div",{style:{position:"absolute",bottom:"4px",left:"4px",width:"12px",height:"12px",borderBottom:`2px solid ${s.color}`,borderLeft:`2px solid ${s.color}`,borderRadius:"0 0 0 2px"}}),a.jsx("div",{style:{position:"absolute",bottom:"4px",right:"4px",width:"12px",height:"12px",borderBottom:`2px solid ${s.color}`,borderRight:`2px solid ${s.color}`,borderRadius:"0 0 2px 0"}}),a.jsx(Wg,{value:n,size:e,level:"H",fgColor:s.color,style:{display:"block"},imageSettings:{src:`data:image/svg+xml,${encodeURIComponent(`
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="${s.color}">
                  <circle cx="12" cy="12" r="11" fill="white" stroke="${s.color}" stroke-width="1.5"/>
                  <text x="12" y="16" text-anchor="middle" font-size="12" font-weight="bold" fill="${s.color}" font-family="Georgia">K</text>
                </svg>
              `)}`,height:e*.2,width:e*.2,excavate:!0}})]}),a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"6px",padding:"0 4px"},children:[a.jsxs("span",{style:{fontFamily:'"Georgia", serif',fontSize:"14px",fontWeight:"bold",color:s.color},children:["$",t]}),a.jsx("span",{style:{fontFamily:'"Georgia", serif',fontSize:"9px",color:s.color,letterSpacing:"1px",opacity:.8},children:s.label}),a.jsxs("span",{style:{fontFamily:'"Georgia", serif',fontSize:"14px",fontWeight:"bold",color:s.color},children:["$",t]})]})]})}):a.jsx(Wg,{value:n,size:e,level:"M",fgColor:s.color,style:{display:"block"}})}const l9="https://harmonicsystems.github.io/kinderbucks/#/scan/KB-0001",c9="https://harmonicsystems.github.io/kinderbucks/#/checkin/BROADST-BAGEL",u9="Broad Street Bagel Co.";function d9(){const[n,e]=j.useState(null),[t,r]=j.useState(0),[s,l]=j.useState(!1);return a.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)",overflow:"hidden"},children:a.jsxs("div",{style:{maxWidth:"1100px",margin:"0 auto"},children:[a.jsxs(ge.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},style:{textAlign:"center",marginBottom:"3rem"},children:[a.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",background:"linear-gradient(135deg, var(--kb-gold) 0%, #e8c33a 100%)",color:"var(--kb-navy)",padding:"0.5rem 1rem",borderRadius:"100px",fontSize:"0.85rem",fontWeight:"600",marginBottom:"1rem"},children:[a.jsx(u3,{size:16})," Try It Live"]}),a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.75rem"},children:"See Kinderbucks in Action"}),a.jsx("p",{style:{color:"var(--kb-gray-600)",maxWidth:"600px",margin:"0 auto"},children:"Scan these real QR codes with your phone's camera to experience the magic"})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(320px, 1fr))",gap:"2rem",marginBottom:"3rem"},children:[a.jsxs(ge.div,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},transition:{delay:.1},viewport:{once:!0},className:"card",style:{padding:"2rem",background:"linear-gradient(180deg, #f8fbff 0%, #ffffff 100%)",border:"2px solid #e8f0ff",position:"relative",overflow:"hidden"},children:[a.jsx("div",{style:{position:"absolute",top:0,right:0,width:"80px",height:"80px",background:"linear-gradient(135deg, transparent 50%, rgba(52, 152, 219, 0.1) 50%)"}}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[a.jsx("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, #3498db 0%, #2980b9 100%)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(xE,{size:22,color:"white"})}),a.jsxs("div",{children:[a.jsx("h3",{style:{color:"var(--kb-navy)",margin:0,fontSize:"1.2rem"},children:"Verify Currency"}),a.jsx("p",{style:{color:"var(--kb-gray-500)",margin:0,fontSize:"0.85rem"},children:"Confirm authenticity instantly"})]})]}),a.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem",marginBottom:"1.5rem"},children:"Every Kinderbuck has a unique QR code. Scan to verify it's real, see its value, and track its journey through the village."}),a.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1.5rem"},children:a.jsx(ge.div,{whileHover:{scale:1.02},transition:{type:"spring",stiffness:300},children:a.jsx(ll,{value:l9,size:130,denomination:5,showFrame:!0})})}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1rem",background:"rgba(52, 152, 219, 0.08)",borderRadius:"10px",marginBottom:"1rem"},children:[a.jsx(vg,{size:20,color:"#3498db"}),a.jsx("span",{style:{color:"var(--kb-gray-700)",fontSize:"0.9rem"},children:"Point your phone camera at the QR code"})]}),a.jsxs("div",{style:{borderTop:"1px dashed var(--kb-gray-200)",paddingTop:"1rem"},children:[a.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)",marginBottom:"0.5rem"},children:"You'll see:"}),a.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:["Verified","$5 Value","Active Status","Serial: KB-0001"].map((c,f)=>a.jsx("span",{style:{padding:"0.25rem 0.6rem",background:"var(--kb-gray-100)",borderRadius:"4px",fontSize:"0.8rem",color:"var(--kb-gray-600)"},children:c},f))})]})]}),a.jsxs(ge.div,{initial:{opacity:0,x:30},whileInView:{opacity:1,x:0},transition:{delay:.2},viewport:{once:!0},className:"card",style:{padding:"2rem",background:"linear-gradient(180deg, #f8fff8 0%, #ffffff 100%)",border:"2px solid #e8ffe8",position:"relative",overflow:"hidden"},children:[a.jsx("div",{style:{position:"absolute",top:0,right:0,width:"80px",height:"80px",background:"linear-gradient(135deg, transparent 50%, rgba(39, 174, 96, 0.1) 50%)"}}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[a.jsx("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, var(--kb-green) 0%, #1e8449 100%)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(Nt,{size:22,color:"white"})}),a.jsxs("div",{children:[a.jsx("h3",{style:{color:"var(--kb-navy)",margin:0,fontSize:"1.2rem"},children:"Check In"}),a.jsx("p",{style:{color:"var(--kb-gray-500)",margin:0,fontSize:"0.85rem"},children:"Record visits, earn rewards"})]})]}),a.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem",marginBottom:"1.5rem"},children:"Scan the QR code at each business you visit. Build your Kinderhooker status and unlock better exchange rates!"}),a.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1.5rem"},children:a.jsx(ge.div,{whileHover:{scale:1.02},transition:{type:"spring",stiffness:300},style:{background:"linear-gradient(135deg, var(--kb-green) 0%, #1e8449 100%)",borderRadius:"16px",padding:"3px",boxShadow:"0 4px 12px rgba(39, 174, 96, 0.3)"},children:a.jsxs("div",{style:{background:"white",borderRadius:"14px",padding:"12px",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"10px",fontWeight:"600",color:"var(--kb-green)",letterSpacing:"2px",marginBottom:"8px"},children:"CHECK IN AT"}),a.jsx(ll,{value:c9,size:110,denomination:1,showFrame:!1}),a.jsxs("div",{style:{marginTop:"8px",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.4rem"},children:[a.jsx(ND,{size:14,color:"var(--kb-green)"}),a.jsx("span",{style:{fontWeight:"600",color:"var(--kb-navy)",fontSize:"0.9rem"},children:u9})]})]})})}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1rem",background:"rgba(39, 174, 96, 0.08)",borderRadius:"10px",marginBottom:"1rem"},children:[a.jsx(vg,{size:20,color:"var(--kb-green)"}),a.jsx("span",{style:{color:"var(--kb-gray-700)",fontSize:"0.9rem"},children:"Scan when you visit a business"})]}),a.jsxs("div",{style:{borderTop:"1px dashed var(--kb-gray-200)",paddingTop:"1rem"},children:[a.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)",marginBottom:"0.5rem"},children:"You'll see:"}),a.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:["Check-in Recorded","+1 Business","Tier Progress","Next Reward"].map((c,f)=>a.jsx("span",{style:{padding:"0.25rem 0.6rem",background:"var(--kb-gray-100)",borderRadius:"4px",fontSize:"0.8rem",color:"var(--kb-gray-600)"},children:c},f))})]})]})]}),a.jsxs(ge.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{delay:.3},viewport:{once:!0},style:{background:"linear-gradient(135deg, var(--kb-navy) 0%, #1a3a5c 100%)",borderRadius:"20px",padding:"2rem",color:"white",position:"relative",overflow:"hidden"},children:[a.jsx("div",{style:{position:"absolute",top:"-50%",right:"-10%",width:"300px",height:"300px",background:"radial-gradient(circle, rgba(201, 162, 39, 0.1) 0%, transparent 70%)",borderRadius:"50%"}}),a.jsxs("div",{style:{position:"relative",zIndex:1},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1.5rem"},children:[a.jsx(i0,{size:20,color:"var(--kb-gold)"}),a.jsx("span",{style:{color:"var(--kb-gold)",fontWeight:"600",fontSize:"0.9rem"},children:"The Kinderbucks Loop"})]}),a.jsx("h3",{style:{fontSize:"1.5rem",marginBottom:"2rem",maxWidth:"500px"},children:"Check-ins unlock better exchange rates on currency"}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem",alignItems:"center"},children:[a.jsxs(ge.div,{initial:{opacity:0},whileInView:{opacity:1},transition:{delay:.4},viewport:{once:!0},style:{display:"flex",alignItems:"center",gap:"1rem"},children:[a.jsx("div",{style:{width:"50px",height:"50px",background:"rgba(255,255,255,0.1)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:a.jsx(Nt,{size:24,color:"var(--kb-gold)"})}),a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Visit & Check In"}),a.jsx("div",{style:{fontSize:"0.85rem",opacity:.8},children:"Scan at local businesses"})]})]}),a.jsx("div",{style:{display:"flex",justifyContent:"center"},children:a.jsx(mg,{size:24,color:"var(--kb-gold)",style:{opacity:.5}})}),a.jsxs(ge.div,{initial:{opacity:0},whileInView:{opacity:1},transition:{delay:.5},viewport:{once:!0},style:{display:"flex",alignItems:"center",gap:"1rem"},children:[a.jsx("div",{style:{width:"50px",height:"50px",background:"rgba(255,255,255,0.1)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:a.jsx(Vs,{size:24,color:"var(--kb-gold)"})}),a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Level Up"}),a.jsx("div",{style:{fontSize:"0.85rem",opacity:.8},children:"Reach new tiers"})]})]}),a.jsx("div",{style:{display:"flex",justifyContent:"center"},children:a.jsx(mg,{size:24,color:"var(--kb-gold)",style:{opacity:.5}})}),a.jsxs(ge.div,{initial:{opacity:0},whileInView:{opacity:1},transition:{delay:.6},viewport:{once:!0},style:{display:"flex",alignItems:"center",gap:"1rem"},children:[a.jsx("div",{style:{width:"50px",height:"50px",background:"linear-gradient(135deg, var(--kb-gold) 0%, #b8922d 100%)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:a.jsx(rr,{size:24,color:"var(--kb-navy)"})}),a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Earn More"}),a.jsx("div",{style:{fontSize:"0.85rem",opacity:.8},children:"Up to 25% bonus!"})]})]})]}),a.jsx("div",{style:{marginTop:"2rem",display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[{name:"Curious",visits:"1+",bonus:"10%"},{name:"Hooked",visits:"5+",bonus:"15%"},{name:"Line & Sinker",visits:"10+",bonus:"20%"},{name:"Village Patron",visits:"15+",bonus:"25%",featured:!0}].map((c,f)=>a.jsxs("div",{style:{padding:"0.5rem 1rem",background:c.featured?"linear-gradient(135deg, var(--kb-gold) 0%, #b8922d 100%)":"rgba(255,255,255,0.1)",borderRadius:"8px",fontSize:"0.85rem",color:c.featured?"var(--kb-navy)":"white",fontWeight:c.featured?"600":"400"},children:[c.name,": ",c.bonus]},f))})]})]}),a.jsxs(ge.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:.4},viewport:{once:!0},style:{textAlign:"center",marginTop:"2.5rem"},children:[a.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1rem"},children:"Ready to start your Kinderhooker journey?"}),a.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[a.jsx(ue,{to:"/profile",className:"btn btn-primary",children:"View My Progress"}),a.jsx(ue,{to:"/businesses",className:"btn btn-secondary",children:"Find Businesses to Visit"})]})]})]})})}function h9(){return a.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[a.jsx(Sn,{}),a.jsx("section",{style:{background:"var(--kb-navy)",color:"var(--kb-white)",padding:"4rem 1rem",textAlign:"center"},children:a.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[a.jsx("h1",{style:{marginBottom:"1rem"},children:"How Kinderbucks Works"}),a.jsx("p",{style:{color:"var(--kb-gray-300)",fontSize:"1.1rem"},children:"A simple system designed to keep money local and reward community participation"})]})}),a.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:a.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem"},children:"What is Kinderbucks?"}),a.jsxs("div",{style:{color:"var(--kb-gray-700)",lineHeight:1.8},children:[a.jsxs("p",{style:{marginBottom:"1rem"},children:[a.jsx("strong",{children:"Kinderbucks"})," is a local currency program for the Village of Kinderhook, NY. It's real money  physical bills with QR codes for verification  that can only be spent at participating local businesses."]}),a.jsx("p",{style:{marginBottom:"1rem"},children:"When you exchange US dollars for Kinderbucks, you're making a commitment to spend locally. In return, you receive bonus value through our OK Membership program, turning $10 into $11, $12, or even $12.50 in local spending power."}),a.jsx("p",{children:"Every Kinderbuck spent stays in the village, circulating between businesses and residents, strengthening our local economy with each transaction."})]})]})}),a.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:a.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem",textAlign:"center"},children:"The Exchange Process"}),a.jsx("div",{style:{display:"grid",gap:"2rem",maxWidth:"700px",margin:"0 auto"},children:[{step:1,title:"Visit an Exchange Point",description:"Stop by any participating business or our central exchange location with US dollars."},{step:2,title:"Show Your Membership",description:"Scan your profile QR code or provide your phone number to apply your tier bonus."},{step:3,title:"Receive Your Kinderbucks",description:"Get physical Kinderbuck bills in $1, $5, $10, and $20 denominations with your bonus applied."},{step:4,title:"Spend Locally",description:"Use your Kinderbucks at any of our 19+ participating businesses."}].map((n,e)=>a.jsxs(ge.div,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},transition:{delay:e*.1},viewport:{once:!0},style:{display:"flex",gap:"1.5rem",alignItems:"flex-start"},children:[a.jsx("div",{style:{width:"50px",height:"50px",background:"var(--kb-navy)",color:"var(--kb-gold)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"var(--font-display)",fontWeight:"700",fontSize:"1.2rem",flexShrink:0},children:n.step}),a.jsxs("div",{children:[a.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:n.title}),a.jsx("p",{style:{color:"var(--kb-gray-600)"},children:n.description})]})]},e))})]})}),a.jsx(d9,{}),a.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:a.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[a.jsx("div",{className:"badge badge-gold",style:{marginBottom:"1rem"},children:"OK Membership"}),a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem"},children:"The Kinderhooker Program"}),a.jsxs("div",{style:{color:"var(--kb-gray-700)",lineHeight:1.8},children:[a.jsxs("p",{style:{marginBottom:"1rem"},children:[a.jsx("strong",{children:"OK Membership"})," rewards customers who actively support local businesses. The more businesses you visit, the higher your tier  and the better your exchange rate."]}),a.jsxs("p",{style:{marginBottom:"1rem"},children:['Each participating business has a QR code. Scan it when you visit to record a "check-in." Your tier is based on how many ',a.jsx("em",{children:"unique"})," businesses you've visited, encouraging exploration of the entire village."]}),a.jsx("p",{children:`There's no cost to join. Simply start checking in at businesses, and you'll automatically become a "Kinderhooker" with access to bonus exchange rates.`})]}),a.jsxs("div",{style:{marginTop:"2rem",display:"flex",gap:"1rem",flexWrap:"wrap"},children:[a.jsx(ue,{to:"/benefits",className:"btn btn-primary",children:"View All Benefits"}),a.jsx(ue,{to:"/profile",className:"btn btn-secondary",children:"Check My Status"})]})]})}),a.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:a.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem"},children:"Frequently Asked Questions"}),[{q:"Is Kinderbucks real money?",a:"Kinderbucks are a local complementary currency. They have value within our participating business network but cannot be deposited in banks or used outside Kinderhook."},{q:"Can I convert Kinderbucks back to USD?",a:"Kinderbucks are designed to circulate locally. While businesses can redeem them, individual customers are encouraged to spend them at participating businesses."},{q:"What if a business closes?",a:"Kinderbucks remain valid at all other participating businesses. The program maintains reserves to ensure stability."},{q:"How do businesses benefit?",a:"Businesses receive customers committed to spending locally, gain exposure through our directory, and become part of a community-strengthening initiative."},{q:"Is there a fee to exchange?",a:"No fees. You receive full value plus your membership bonus when exchanging USD for Kinderbucks."}].map((n,e)=>a.jsxs("div",{style:{marginBottom:"1.5rem"},children:[a.jsx("h4",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:n.q}),a.jsx("p",{style:{color:"var(--kb-gray-600)"},children:n.a})]},e))]})}),a.jsxs("section",{style:{padding:"3rem 1rem",background:"var(--kb-navy)",color:"var(--kb-white)",textAlign:"center"},children:[a.jsx("h3",{style:{marginBottom:"1rem"},children:"Ready to get started?"}),a.jsx(ue,{to:"/exchange",className:"btn btn-gold",children:"Get Your Kinderbucks"})]}),a.jsx(En,{})]})}const er={curious:{name:"Curious",threshold:1,bonus:.1,color:"#888888",bgColor:"#f0f0f0",emoji:""},hooked:{name:"Hooked",threshold:5,bonus:.15,color:"#2e7d32",bgColor:"#e8f5e9",emoji:""},lineAndSinker:{name:"Line & Sinker",threshold:10,bonus:.2,color:"#1565c0",bgColor:"#e3f2fd",emoji:""},patron:{name:"Village Patron",threshold:15,bonus:.25,color:"#c9a227",bgColor:"#fff8e1",emoji:""}};function $g(n){return n>=15?"patron":n>=10?"lineAndSinker":n>=5?"hooked":n>=1?"curious":null}function f9(n){const e=["curious","hooked","lineAndSinker","patron"],t=e.indexOf(n);return t<e.length-1?e[t+1]:null}function yT(n){const e=$g(n),t=f9(e);if(!t)return{progress:100,remaining:0,nextTier:null};const r=er[t],s=e?er[e].threshold:0,l=(n-s)/(r.threshold-s)*100;return{progress:Math.min(100,Math.max(0,l)),remaining:r.threshold-n,nextTier:r}}function m9(){const n=[{Icon:CD,title:"Bonus Exchange Rates",description:"Get up to 25% extra when converting USD to Kinderbucks. A $100 exchange becomes $125 in local spending power.",highlight:"Up to 25% bonus"},{Icon:Nt,title:"Exclusive Local Deals",description:"Participating businesses offer special discounts and promotions exclusively for Kinderhooker members.",highlight:"Member-only offers"},{Icon:rr,title:"Priority Access",description:"Higher-tier members get early access to limited events, seasonal specials, and new business openings.",highlight:"First in line"},{Icon:mE,title:"Seasonal Bonuses",description:"Extra rewards during holidays and special village events. Double check-in points, bonus exchanges, and more.",highlight:"Special events"},{Icon:e0,title:"Impact Tracking",description:"See exactly how your spending supports local businesses and contributes to the village economy.",highlight:"Track your impact"},{Icon:Er,title:"Community Recognition",description:"Village Patrons are recognized in our annual report and invited to exclusive community appreciation events.",highlight:"Be celebrated"}];return a.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[a.jsx(Sn,{}),a.jsx("section",{style:{background:"linear-gradient(135deg, var(--kb-gold-dark) 0%, var(--kb-gold) 100%)",color:"var(--kb-navy)",padding:"4rem 1rem",textAlign:"center"},children:a.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[a.jsx("div",{className:"badge badge-navy",style:{marginBottom:"1rem"},children:"OK Membership"}),a.jsx("h1",{style:{marginBottom:"1rem"},children:"Member Benefits & Rewards"}),a.jsx("p",{style:{fontSize:"1.1rem",opacity:.9},children:"The more you support local, the more you earn. It pays to be a Kinderhooker."})]})}),a.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:a.jsxs("div",{style:{maxWidth:"1100px",margin:"0 auto"},children:[a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem",textAlign:"center"},children:"Membership Tiers"}),a.jsx("p",{style:{color:"var(--kb-gray-500)",textAlign:"center",marginBottom:"2rem"},children:"Visit more businesses to unlock better rewards"}),a.jsx("div",{style:{overflowX:"auto"},children:a.jsxs("table",{style:{minWidth:"700px"},children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{style:{width:"25%"},children:"Tier"}),a.jsx("th",{style:{width:"20%"},children:"Requirement"}),a.jsx("th",{style:{width:"20%"},children:"Exchange Bonus"}),a.jsx("th",{style:{width:"35%"},children:"Perks"})]})}),a.jsxs("tbody",{children:[a.jsxs("tr",{children:[a.jsx("td",{children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(Jt,{size:18,color:"#888"}),a.jsx("span",{style:{fontWeight:"600",color:"#888"},children:"Curious"})]})}),a.jsx("td",{children:"1+ businesses"}),a.jsx("td",{children:a.jsx("span",{style:{color:"#888",fontWeight:"600"},children:"10%"})}),a.jsx("td",{style:{fontSize:"0.9rem",color:"var(--kb-gray-600)"},children:"Basic exchange bonus, check-in tracking"})]}),a.jsxs("tr",{children:[a.jsx("td",{children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(rr,{size:18,color:"#2e7d32"}),a.jsx("span",{style:{fontWeight:"600",color:"#2e7d32"},children:"Hooked"})]})}),a.jsx("td",{children:"5+ businesses"}),a.jsx("td",{children:a.jsx("span",{style:{color:"#2e7d32",fontWeight:"600"},children:"15%"})}),a.jsx("td",{style:{fontSize:"0.9rem",color:"var(--kb-gray-600)"},children:"Seasonal bonus events, member deals"})]}),a.jsxs("tr",{children:[a.jsx("td",{children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(nr,{size:18,color:"#1565c0"}),a.jsx("span",{style:{fontWeight:"600",color:"#1565c0"},children:"Line & Sinker"})]})}),a.jsx("td",{children:"10+ businesses"}),a.jsx("td",{children:a.jsx("span",{style:{color:"#1565c0",fontWeight:"600"},children:"20%"})}),a.jsx("td",{style:{fontSize:"0.9rem",color:"var(--kb-gray-600)"},children:"Priority access, exclusive events"})]}),a.jsxs("tr",{style:{background:"rgba(201, 162, 39, 0.1)"},children:[a.jsx("td",{children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(zn,{size:18,color:"#c9a227"}),a.jsx("span",{style:{fontWeight:"600",color:"#c9a227"},children:"Village Patron"})]})}),a.jsx("td",{children:"15+ businesses"}),a.jsx("td",{children:a.jsx("span",{style:{color:"#c9a227",fontWeight:"600"},children:"25%"})}),a.jsx("td",{style:{fontSize:"0.9rem",color:"var(--kb-gray-600)"},children:"All perks + community recognition + VIP events"})]})]})]})}),a.jsx("div",{style:{textAlign:"center",marginTop:"2rem"},children:a.jsx(ue,{to:"/profile",className:"btn btn-primary",children:"Check My Progress"})})]})}),a.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:a.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem",textAlign:"center"},children:"All Member Benefits"}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1.5rem"},children:n.map((e,t)=>a.jsx(ge.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:t*.1},viewport:{once:!0},className:"card",children:a.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[a.jsx("div",{style:{width:"50px",height:"50px",background:"var(--kb-navy)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:a.jsx(e.Icon,{size:24,color:"var(--kb-gold)",strokeWidth:1.5})}),a.jsxs("div",{children:[a.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"0.25rem",fontSize:"1.1rem"},children:e.title}),a.jsx("span",{className:"badge badge-gold",style:{marginBottom:"0.5rem"},children:e.highlight}),a.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem",marginTop:"0.5rem"},children:e.description})]})]})},t))})]})}),a.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:a.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto",textAlign:"center"},children:[a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"See Your Savings"}),a.jsx("p",{style:{color:"var(--kb-gray-500)",marginBottom:"2rem"},children:"Example: Exchange $100 USD"}),a.jsx("div",{className:"card",style:{padding:"2rem"},children:a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[{tier:"Curious",bonus:10,color:"#888"},{tier:"Hooked",bonus:15,color:"#2e7d32"},{tier:"Line & Sinker",bonus:20,color:"#1565c0"},{tier:"Village Patron",bonus:25,color:"#c9a227"}].map((e,t)=>a.jsxs("div",{style:{padding:"1rem",borderRadius:"8px",background:`${e.color}10`,border:`1px solid ${e.color}30`},children:[a.jsx("div",{style:{fontSize:"0.85rem",color:e.color,fontWeight:"600"},children:e.tier}),a.jsxs("div",{style:{fontFamily:"var(--font-display)",fontSize:"1.8rem",fontWeight:"700",color:e.color},children:["$",100+e.bonus]}),a.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:"in Kinderbucks"})]},t))})}),a.jsx("div",{style:{marginTop:"2rem"},children:a.jsx(ue,{to:"/exchange",className:"btn btn-gold",style:{padding:"1rem 2rem"},children:"Start Exchanging"})})]})}),a.jsxs("section",{style:{padding:"3rem 1rem",background:"var(--kb-green)",color:"var(--kb-white)",textAlign:"center"},children:[a.jsx("h3",{style:{marginBottom:"1rem"},children:"Start earning rewards today"}),a.jsx("p",{style:{opacity:.9,marginBottom:"1.5rem"},children:"Visit a participating business and scan their QR code to begin"}),a.jsx(ue,{to:"/businesses",className:"btn btn-gold",children:"Find Businesses Near You"})]}),a.jsx(En,{})]})}const _u="businesses";async function L0(n){const e=St(We,_u,n),t=await bl(e);return t.exists()?{code:t.id,...t.data()}:null}async function Bi(){const n=Mi(cn(We,_u),Vo("name"));return(await Ln(n)).docs.map(t=>({code:t.id,...t.data()}))}async function ob(n,e,t){await _l(St(We,_u,n),{code:n,name:e,category:t,isActive:!0,checkinCount:0,createdAt:Pt()})}async function p9(n){const e=St(We,_u,n);await Ir(e,{checkinCount:Ky(1)})}async function g9(n,e){const t=St(We,_u,n);await Ir(t,{isActive:e})}const Dp={food:{label:"Food & Drink",Icon:kE,color:"#e74c3c"},retail:{label:"Retail",Icon:wE,color:"#9b59b6"},services:{label:"Services",Icon:uE,color:"#3498db"},arts:{label:"Arts & Culture",Icon:yE,color:"#1abc9c"}};function y9(){const[n,e]=j.useState([]),[t,r]=j.useState(!0),[s,l]=j.useState("all");j.useEffect(()=>{async function d(){const m=await Bi();e(m.filter(g=>g.isActive)),r(!1)}d()},[]);const c=s==="all"?n:n.filter(d=>d.category===s),f={total:n.length,food:n.filter(d=>d.category==="food").length,retail:n.filter(d=>d.category==="retail").length};return a.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[a.jsx(Sn,{}),a.jsx("section",{style:{background:"var(--kb-navy)",color:"var(--kb-white)",padding:"4rem 1rem",textAlign:"center"},children:a.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[a.jsx("h1",{style:{marginBottom:"1rem"},children:"For Local Businesses"}),a.jsx("p",{style:{color:"var(--kb-gray-300)",fontSize:"1.1rem",marginBottom:"2rem"},children:"Join the Kinderbucks network and connect with customers committed to shopping local"}),a.jsx(ue,{to:"/admin/businesses",className:"btn btn-gold",children:"Register Your Business"})]})}),a.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:a.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem",textAlign:"center"},children:"Why Accept Kinderbucks?"}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"2rem"},children:[{Icon:Er,title:"Committed Customers",description:"Kinderbucks holders have already decided to spend locally. They're not comparison shopping online."},{Icon:bV,title:"Money Stays Local",description:"Unlike credit cards that send fees elsewhere, Kinderbucks keep circulating in our village economy."},{Icon:uV,title:"Free Marketing",description:"Get listed in our business directory, featured on our homepage, and promoted to all members."},{Icon:n3,title:"Community Standing",description:"Show customers you're invested in Kinderhook's future. Participating businesses are community leaders."},{Icon:Zy,title:"Easy Redemption",description:"Redeem Kinderbucks for USD at any time through our simple merchant portal. No waiting."},{Icon:e0,title:"Customer Insights",description:"Access check-in data and understand your customers' behavior across the village."}].map((d,m)=>a.jsxs(ge.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:m*.1},viewport:{once:!0},className:"card",style:{textAlign:"center"},children:[a.jsx("div",{style:{width:"60px",height:"60px",background:"var(--kb-navy)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:a.jsx(d.Icon,{size:28,color:"var(--kb-gold)",strokeWidth:1.5})}),a.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:d.title}),a.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem"},children:d.description})]},m))})]})}),a.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:a.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem",textAlign:"center"},children:"How It Works"}),a.jsx("div",{style:{display:"grid",gap:"1.5rem"},children:[{step:1,title:"Register",desc:"Sign up as a participating business. It's free to join."},{step:2,title:"Get Your QR Code",desc:"We'll provide a unique check-in QR code for your location."},{step:3,title:"Display It",desc:"Put the QR code at your counter or entrance for customers to scan."},{step:4,title:"Accept Kinderbucks",desc:"Take Kinderbucks as payment, just like cash. Same denominations."},{step:5,title:"Redeem Anytime",desc:"Exchange accumulated Kinderbucks back to USD when you need."}].map((d,m)=>a.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center",background:"var(--kb-white)",padding:"1.5rem",borderRadius:"12px",boxShadow:"var(--shadow-sm)"},children:[a.jsx("div",{style:{width:"40px",height:"40px",background:"var(--kb-gold)",color:"var(--kb-navy)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"700",flexShrink:0},children:d.step}),a.jsxs("div",{children:[a.jsx("h4",{style:{color:"var(--kb-navy)",marginBottom:"0.25rem"},children:d.title}),a.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem",margin:0},children:d.desc})]})]},m))})]})}),a.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:a.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem",textAlign:"center"},children:"Participating Businesses"}),a.jsxs("p",{style:{color:"var(--kb-gray-500)",textAlign:"center",marginBottom:"2rem"},children:[f.total," businesses currently accepting Kinderbucks"]}),a.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center",marginBottom:"2rem",flexWrap:"wrap"},children:[a.jsxs("button",{onClick:()=>l("all"),className:s==="all"?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem"},children:["All (",f.total,")"]}),Object.entries(Dp).map(([d,m])=>a.jsxs("button",{onClick:()=>l(d),className:s===d?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem",display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(m.Icon,{size:16})," ",m.label]},d))]}),t?a.jsx("p",{style:{textAlign:"center"},children:"Loading businesses..."}):c.length===0?a.jsxs("p",{style:{textAlign:"center",color:"var(--kb-gray-500)"},children:["No businesses found. ",a.jsx(ue,{to:"/admin/businesses",children:"Add some!"})]}):a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:"1rem"},children:c.map((d,m)=>{const g=Dp[d.category]||Dp.services;return a.jsxs(ge.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:m*.03},className:"card",style:{padding:"1.25rem"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[a.jsx("div",{style:{width:"40px",height:"40px",background:`${g.color}15`,borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(g.Icon,{size:20,color:g.color,strokeWidth:1.5})}),a.jsxs("div",{children:[a.jsx("h4",{style:{color:"var(--kb-navy)",margin:0,fontSize:"1rem"},children:d.name}),a.jsx("span",{style:{fontSize:"0.8rem",color:g.color},children:g.label})]})]}),d.checkinCount>0&&a.jsxs("div",{style:{marginTop:"0.75rem",fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:[d.checkinCount," check-ins"]})]},d.code)})})]})}),a.jsxs("section",{style:{padding:"3rem 1rem",background:"var(--kb-gold)",color:"var(--kb-navy)",textAlign:"center"},children:[a.jsx("h3",{style:{marginBottom:"1rem"},children:"Ready to join the network?"}),a.jsx("p",{style:{opacity:.9,marginBottom:"1.5rem"},children:"Registration is free. Start accepting Kinderbucks today."}),a.jsx(ue,{to:"/admin/businesses",className:"btn btn-primary",children:"Register Your Business"})]}),a.jsx(En,{})]})}const vT="members";function Gh(){return Lo.currentUser?Lo.currentUser.uid:Qh()}function Qh(){let n=localStorage.getItem("kinderhooker_visitor_id");return n||(n="anon_"+Math.random().toString(36).substring(2,15),localStorage.setItem("kinderhooker_visitor_id",n)),n}async function Su(n){const e=St(We,vT,n),t=await bl(e);return t.exists()?{visitorId:t.id,...t.data()}:null}async function v9(n,e){const t=St(We,vT,n),r=await bl(t);if(r.exists()){const s=r.data(),l=s.businessesVisited||[],c=!l.includes(e),f=c?l.length+1:l.length,d=$g(f),m=d!==s.tier;return await Ir(t,{businessesVisited:P4(e),totalCheckins:Ky(1),tier:d,lastCheckin:Pt()}),{isNewBusiness:c,tierChanged:m,oldTier:s.tier,newTier:d,businessesVisited:c?[...l,e]:l,totalCheckins:(s.totalCheckins||0)+1}}else{const s=$g(1);return await _l(t,{visitorId:n,tier:s,businessesVisited:[e],totalCheckins:1,createdAt:Pt(),lastCheckin:Pt(),email:null}),{isNewBusiness:!0,tierChanged:!0,oldTier:null,newTier:s,businessesVisited:[e],totalCheckins:1}}}const x9={curious:Jt,hooked:rr,lineAndSinker:nr,patron:zn};function w9(){const[n,e]=j.useState(null),[t,r]=j.useState(!0),[s,l]=j.useState(20),[c,f]=j.useState(!1),[d,m]=j.useState(!1);j.useEffect(()=>{async function M(){const D=Qh(),R=await Su(D);e(R),r(!1)}M()},[]);const g=(n==null?void 0:n.tier)||"curious",y=er[g]||er.curious,x=n?y.bonus:.1,S=s*x,_=s+S,I=async()=>{f(!0);try{await Jy(cn(We,"exchanges"),{visitorId:Qh(),usdAmount:s,bonusRate:x,bonusAmount:S,kinderbucksAmount:_,tier:g,status:"pending",createdAt:Pt()}),m(!0)}catch(M){console.error("Exchange error:",M),alert("Error submitting exchange request")}f(!1)},C=[10,20,50,100];return a.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[a.jsx(Sn,{}),a.jsx("section",{style:{background:"linear-gradient(135deg, var(--kb-green) 0%, var(--kb-green-light) 100%)",color:"var(--kb-white)",padding:"3rem 1rem",textAlign:"center"},children:a.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto"},children:[a.jsx("h1",{style:{marginBottom:"0.5rem"},children:"Get Kinderbucks"}),a.jsx("p",{style:{opacity:.9},children:"Exchange USD for local currency with bonus value"})]})}),a.jsx("section",{style:{padding:"3rem 1rem",background:"var(--kb-cream)",flex:1},children:a.jsx("div",{style:{maxWidth:"500px",margin:"0 auto"},children:d?a.jsxs(ge.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"card",style:{textAlign:"center",padding:"3rem 2rem"},children:[a.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:""}),a.jsx("h2",{style:{color:"var(--kb-green)",marginBottom:"1rem"},children:"Exchange Requested!"}),a.jsxs("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem"},children:["Your exchange request for ",a.jsxs("strong",{children:["$",s," USD"]})," "," ",a.jsxs("strong",{children:["$",_.toFixed(2)," Kinderbucks"]})," has been submitted."]}),a.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem",marginBottom:"2rem"},children:"Visit any exchange point to complete your transaction and receive your Kinderbucks."}),a.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[a.jsx("button",{onClick:()=>m(!1),className:"btn btn-primary",children:"Exchange More"}),a.jsx(ue,{to:"/account",className:"btn btn-secondary",children:"View Account"})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)",marginBottom:"0.25rem"},children:"Your Tier"}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(()=>{const M=x9[g]||Jt;return a.jsx(M,{size:28,color:y.color,strokeWidth:1.5})})(),a.jsx("span",{style:{fontWeight:"600",color:y.color,fontSize:"1.2rem"},children:y.name})]})]}),a.jsxs("div",{style:{textAlign:"right"},children:[a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)",marginBottom:"0.25rem"},children:"Bonus Rate"}),a.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:y.color},children:[Math.round(x*100),"%"]})]})]}),!n&&a.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"var(--kb-gray-50)",borderRadius:"8px",fontSize:"0.85rem",color:"var(--kb-gray-600)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(tV,{size:16,color:"var(--kb-gold)"})," ",a.jsx(ue,{to:"/profile",style:{color:"var(--kb-navy)"},children:"Visit businesses"})," to increase your tier and get better rates!"]})]}),a.jsxs("div",{className:"card",children:[a.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem"},children:"Exchange Calculator"}),a.jsxs("div",{style:{marginBottom:"1.5rem"},children:[a.jsx("label",{children:"Amount (USD)"}),a.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem"},children:C.map(M=>a.jsxs("button",{onClick:()=>l(M),className:s===M?"btn btn-primary":"btn btn-secondary",style:{flex:1,padding:"0.5rem"},children:["$",M]},M))}),a.jsx("input",{type:"number",value:s,onChange:M=>l(Math.max(1,Number(M.target.value))),min:"1",style:{width:"100%"}})]}),a.jsxs("div",{style:{background:"var(--kb-gray-50)",borderRadius:"12px",padding:"1.5rem",marginBottom:"1.5rem"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.75rem"},children:[a.jsx("span",{style:{color:"var(--kb-gray-600)"},children:"USD Amount"}),a.jsxs("span",{style:{fontWeight:"600"},children:["$",s.toFixed(2)]})]}),a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.75rem"},children:[a.jsxs("span",{style:{color:"var(--kb-gray-600)"},children:[y.name," Bonus (",Math.round(x*100),"%)"]}),a.jsxs("span",{style:{fontWeight:"600",color:"var(--kb-green)"},children:["+$",S.toFixed(2)]})]}),a.jsx("div",{className:"divider",style:{margin:"0.75rem 0"}}),a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsx("span",{style:{color:"var(--kb-navy)",fontWeight:"600"},children:"You Receive"}),a.jsxs("span",{style:{fontFamily:"var(--font-display)",fontSize:"1.8rem",fontWeight:"700",color:"var(--kb-gold-dark)"},children:["$",_.toFixed(2)]})]}),a.jsx("div",{style:{textAlign:"right",fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Kinderbucks"})]}),a.jsx("button",{onClick:I,disabled:c,className:"btn btn-gold",style:{width:"100%",padding:"1rem",fontSize:"1.1rem"},children:c?"Processing...":`Exchange $${s} for $${_.toFixed(2)} Kinderbucks`}),a.jsx("p",{style:{textAlign:"center",fontSize:"0.85rem",color:"var(--kb-gray-500)",marginTop:"1rem"},children:"Complete your exchange at any participating business or exchange point"})]}),a.jsxs("div",{className:"card",style:{marginTop:"1.5rem"},children:[a.jsx("h4",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Exchange Locations"}),a.jsxs("div",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem"},children:[a.jsxs("p",{style:{marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(Oo,{size:16,color:"var(--kb-green)"})," ",a.jsx("strong",{children:"OK Pantry"})," - 2 Hudson Street"]}),a.jsxs("p",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(Oo,{size:16,color:"var(--kb-green)"})," ",a.jsx("strong",{children:"Village Hall"})," - During events"]})]})]})]})})}),a.jsx(En,{})]})}const ab={curious:Jt,hooked:rr,lineAndSinker:nr,patron:zn};function k9(){var M,D;const[n,e]=j.useState(null),[t,r]=j.useState([]),[s,l]=j.useState([]),[c,f]=j.useState(!0),[d,m]=j.useState("overview");if(j.useEffect(()=>{async function R(){const K=Qh(),z=await Su(K),U=await Bi();try{const A=Mi(cn(We,"exchanges"),sl("visitorId","==",K),Vo("createdAt","desc")),E=await Ln(A);l(E.docs.map(N=>({id:N.id,...N.data()})))}catch(A){console.error("Error loading exchanges:",A)}e(z),r(U),f(!1)}R()},[]),c)return a.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[a.jsx(Sn,{}),a.jsx("div",{className:"page page-center",style:{flex:1},children:a.jsx("div",{style:{fontSize:"2rem"},children:"Loading..."})}),a.jsx(En,{})]});const g=(n==null?void 0:n.tier)||null,y=g?er[g]:null,x=((M=n==null?void 0:n.businessesVisited)==null?void 0:M.length)||0,S=yT(x),_=((D=n==null?void 0:n.businessesVisited)==null?void 0:D.map(R=>{const K=t.find(z=>z.code===R);return K?K.name:R}))||[],I=t.filter(R=>{var K;return R.isActive&&!((K=n==null?void 0:n.businessesVisited)!=null&&K.includes(R.code))}),C=s.reduce((R,K)=>R+(K.kinderbucksAmount||0),0);return a.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[a.jsx(Sn,{}),a.jsx("section",{style:{background:"var(--kb-navy)",color:"var(--kb-white)",padding:"2rem 1rem"},children:a.jsx("div",{style:{maxWidth:"800px",margin:"0 auto"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[a.jsx("div",{style:{width:"80px",height:"80px",background:y?y.color:"var(--kb-gray-500)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:(()=>{const R=g&&ab[g]?ab[g]:Jt;return a.jsx(R,{size:40,color:"white",strokeWidth:1.5})})()}),a.jsxs("div",{style:{flex:1},children:[a.jsx("div",{style:{fontSize:"0.9rem",color:"var(--kb-gray-300)",marginBottom:"0.25rem"},children:"OK Membership"}),a.jsx("h1",{style:{fontSize:"1.5rem",marginBottom:"0.25rem"},children:y?y.name:"New Member"}),a.jsx("div",{style:{fontSize:"0.9rem",color:"var(--kb-gold)"},children:y?`${Math.round(y.bonus*100)}% Exchange Bonus`:"Start exploring to earn rewards"})]}),a.jsx(ue,{to:"/exchange",className:"btn btn-gold",children:"Get Kinderbucks"})]})})}),a.jsx("div",{style:{background:"var(--kb-white)",borderBottom:"1px solid var(--kb-gray-200)",position:"sticky",top:"70px",zIndex:50},children:a.jsx("div",{style:{maxWidth:"800px",margin:"0 auto",display:"flex",gap:"2rem",padding:"0 1rem"},children:["overview","progress","history"].map(R=>a.jsx("button",{onClick:()=>m(R),style:{background:"none",border:"none",padding:"1rem 0",fontSize:"0.95rem",fontWeight:d===R?"600":"400",color:d===R?"var(--kb-navy)":"var(--kb-gray-500)",borderBottom:d===R?"2px solid var(--kb-gold)":"2px solid transparent",cursor:"pointer",textTransform:"capitalize"},children:R},R))})}),a.jsx("section",{style:{padding:"2rem 1rem",background:"var(--kb-cream)",flex:1},children:a.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[d==="overview"&&a.jsxs(ge.div,{initial:{opacity:0},animate:{opacity:1},children:[a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[a.jsxs("div",{className:"card",style:{textAlign:"center"},children:[a.jsx("div",{className:"stat-value",children:x}),a.jsx("div",{className:"stat-label",children:"Businesses Visited"})]}),a.jsxs("div",{className:"card",style:{textAlign:"center"},children:[a.jsx("div",{className:"stat-value",children:(n==null?void 0:n.totalCheckins)||0}),a.jsx("div",{className:"stat-label",children:"Total Check-ins"})]}),a.jsxs("div",{className:"card",style:{textAlign:"center"},children:[a.jsxs("div",{className:"stat-value",style:{color:"var(--kb-gold)"},children:["$",C.toFixed(0)]}),a.jsx("div",{className:"stat-label",children:"Kinderbucks Exchanged"})]})]}),a.jsxs("div",{className:"card",children:[a.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Quick Actions"}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"0.75rem"},children:[a.jsxs(ue,{to:"/exchange",className:"btn btn-gold",style:{textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[a.jsx(Zy,{size:18})," Exchange"]}),a.jsxs(ue,{to:"/businesses",className:"btn btn-secondary",style:{textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[a.jsx(Nt,{size:18})," Find Businesses"]}),a.jsxs(ue,{to:"/benefits",className:"btn btn-secondary",style:{textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[a.jsx(i0,{size:18})," View Benefits"]})]})]})]}),d==="progress"&&a.jsxs(ge.div,{initial:{opacity:0},animate:{opacity:1},children:[y&&a.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[a.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Tier Progress"}),S.nextTier?a.jsxs(a.Fragment,{children:[a.jsxs("div",{style:{marginBottom:"0.5rem"},children:[a.jsx("span",{style:{color:y.color,fontWeight:"600"},children:y.name}),a.jsx("span",{style:{color:"var(--kb-gray-400)",margin:"0 0.5rem"},children:""}),a.jsx("span",{style:{color:S.nextTier.color,fontWeight:"600"},children:S.nextTier.name})]}),a.jsx("div",{className:"progress-bar",style:{height:"12px",marginBottom:"0.5rem"},children:a.jsx("div",{className:"progress-bar-fill",style:{width:`${S.progress}%`,background:y.color}})}),a.jsxs("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:[S.remaining," more business",S.remaining!==1?"es":""," to reach ",S.nextTier.name]})]}):a.jsxs("p",{style:{color:"var(--kb-gold)",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(zn,{size:20})," Maximum tier reached! You're a Village Patron!"]})]}),a.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[a.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(bi,{size:20,color:"var(--kb-green)"})," Businesses Visited (",_.length,")"]}),_.length>0?a.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:_.map((R,K)=>a.jsxs("span",{style:{background:"#d4edda",color:"var(--kb-green)",padding:"0.4rem 0.75rem",borderRadius:"100px",fontSize:"0.85rem",display:"inline-flex",alignItems:"center",gap:"0.25rem"},children:[a.jsx(bi,{size:14})," ",R]},K))}):a.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"No businesses visited yet"})]}),I.length>0&&a.jsxs("div",{className:"card",children:[a.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(dE,{size:20,color:"var(--kb-navy)"})," Still to Explore (",I.length,")"]}),a.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:[I.slice(0,12).map(R=>a.jsx("span",{style:{background:"var(--kb-gray-100)",color:"var(--kb-gray-600)",padding:"0.4rem 0.75rem",borderRadius:"100px",fontSize:"0.85rem"},children:R.name},R.code)),I.length>12&&a.jsxs("span",{style:{color:"var(--kb-gray-500)",padding:"0.4rem"},children:["+",I.length-12," more"]})]})]})]}),d==="history"&&a.jsx(ge.div,{initial:{opacity:0},animate:{opacity:1},children:a.jsxs("div",{className:"card",children:[a.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Exchange History"}),s.length>0?a.jsx("div",{children:s.map((R,K)=>{var z,U,A,E;return a.jsxs("div",{style:{padding:"1rem 0",borderBottom:K<s.length-1?"1px solid var(--kb-gray-100)":"none",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsxs("div",{children:[a.jsxs("div",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:["$",R.usdAmount,"  $",(z=R.kinderbucksAmount)==null?void 0:z.toFixed(2)," KB"]}),a.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:[((E=(A=(U=R.createdAt)==null?void 0:U.toDate)==null?void 0:A.call(U))==null?void 0:E.toLocaleDateString())||"Pending","  ",Math.round(R.bonusRate*100),"% bonus"]})]}),a.jsx("span",{className:"badge",style:{background:R.status==="completed"?"#d4edda":"#fff3cd",color:R.status==="completed"?"var(--kb-green)":"#856404"},children:R.status})]},R.id)})}):a.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"var(--kb-gray-500)"},children:[a.jsx("p",{style:{marginBottom:"1rem"},children:"No exchanges yet"}),a.jsx(ue,{to:"/exchange",className:"btn btn-gold",children:"Make Your First Exchange"})]})]})})]})}),a.jsx(En,{})]})}const lb={curious:Jt,hooked:rr,lineAndSinker:nr,patron:zn},Ec={curious:"#888888",hooked:"#2e7d32",lineAndSinker:"#1565c0",patron:"#c9a227"};function b9(){var I,C;const{user:n,profile:e,isAuthenticated:t}=Oi(),[r,s]=j.useState(null),[l,c]=j.useState([]),[f,d]=j.useState(!0);j.useEffect(()=>{async function M(){const D=Gh(),R=await Su(D),K=await Bi();s(R),c(K.filter(z=>z.isActive)),d(!1)}M()},[n]);const m=(r==null?void 0:r.tier)||"curious",g=er[m],y=((I=r==null?void 0:r.businessesVisited)==null?void 0:I.length)||0,x=yT(y),S=((C=r==null?void 0:r.businessesVisited)==null?void 0:C.map(M=>{const D=l.find(R=>R.code===M);return D?D.name:M}))||[],_=l.filter(M=>{var D;return!((D=r==null?void 0:r.businessesVisited)!=null&&D.includes(M.code))});return a.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[a.jsx(Sn,{}),a.jsx("main",{style:{flex:1,background:"var(--kb-cream)",padding:"2rem 1rem"},children:a.jsx("div",{style:{maxWidth:"600px",margin:"0 auto"},children:f?a.jsx("div",{style:{textAlign:"center",padding:"4rem 0"},children:a.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading your profile..."})}):r?a.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[t&&e&&a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1.5rem",padding:"1rem",background:"white",borderRadius:"12px"},children:[a.jsx("div",{style:{width:"48px",height:"48px",background:"var(--kb-gray-100)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(Ga,{size:24,color:"var(--kb-gray-500)"})}),a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:e.displayName||n.email}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:n.email})]})]}),a.jsxs(ge.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.1},style:{background:`linear-gradient(135deg, ${Ec[m]} 0%, ${Ec[m]}dd 100%)`,borderRadius:"20px",padding:"2rem",color:"white",textAlign:"center",marginBottom:"1.5rem",boxShadow:"0 4px 20px rgba(0,0,0,0.2)"},children:[(()=>{const M=lb[m]||Jt;return a.jsx(M,{size:48,color:"white",strokeWidth:1.5,style:{marginBottom:"0.5rem"}})})(),a.jsx("div",{style:{fontSize:"1.8rem",fontWeight:"bold",marginBottom:"0.25rem"},children:g.name}),a.jsxs("div",{style:{opacity:.9,fontSize:"1rem"},children:[Math.round(g.bonus*100),"% Kinderbuck Exchange Bonus"]})]}),a.jsxs(ue,{to:"/card",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",width:"100%",padding:"1.25rem",background:"linear-gradient(135deg, var(--kb-gold) 0%, #d4af37 100%)",color:"var(--kb-navy)",borderRadius:"16px",fontSize:"1.25rem",fontWeight:"700",textDecoration:"none",marginBottom:"1.5rem",boxShadow:"0 4px 12px rgba(201, 162, 39, 0.3)"},children:[a.jsx(pg,{size:28}),"SHOW MY OK CARD"]}),a.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[a.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",textAlign:"center"},children:[y," Business",y!==1?"es":""," Visited"]}),x.nextTier?a.jsxs(a.Fragment,{children:[a.jsx("div",{style:{background:"var(--kb-gray-100)",borderRadius:"10px",height:"28px",overflow:"hidden",marginBottom:"0.75rem"},children:a.jsxs(ge.div,{initial:{width:0},animate:{width:`${x.progress}%`},transition:{delay:.3,duration:.8},style:{background:`linear-gradient(90deg, ${Ec[m]}, ${x.nextTier.color})`,height:"100%",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"0.85rem",fontWeight:"bold"},children:[y,"/",x.nextTier.threshold]})}),a.jsxs("p",{style:{color:"var(--kb-gray-600)",textAlign:"center"},children:[a.jsx("strong",{children:x.remaining})," more to reach"," ",a.jsx("strong",{style:{color:x.nextTier.color},children:x.nextTier.name})]})]}):a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",color:"var(--kb-gold-dark)",fontWeight:"600"},children:[a.jsx(zn,{size:20})," Maximum tier reached! You're a true Village Patron!"]})]}),S.length>0&&a.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[a.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(bi,{size:20,color:"var(--kb-green)"})," Visited"]}),a.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:S.map((M,D)=>a.jsxs("span",{style:{padding:"0.4rem 0.8rem",background:"#e8f5e9",borderRadius:"6px",color:"#2e7d32",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:[a.jsx(bi,{size:14})," ",M]},D))})]}),_.length>0&&a.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[a.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(dE,{size:20})," Still to Explore (",_.length,")"]}),a.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:[_.slice(0,10).map(M=>a.jsx("span",{style:{padding:"0.4rem 0.8rem",background:"var(--kb-gray-100)",borderRadius:"6px",color:"var(--kb-gray-600)",fontSize:"0.9rem"},children:M.name},M.code)),_.length>10&&a.jsxs("span",{style:{padding:"0.4rem 0.8rem",color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:["+",_.length-10," more"]})]}),a.jsxs(ue,{to:"/businesses",style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",marginTop:"1rem",color:"var(--kb-navy)",fontWeight:"500",fontSize:"0.9rem"},children:["View all businesses ",a.jsx(mg,{size:16})]})]}),a.jsxs("div",{style:{textAlign:"center",color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:["Total check-ins: ",r.totalCheckins||0]}),!t&&a.jsxs("div",{style:{marginTop:"2rem",padding:"1rem",background:"rgba(201, 162, 39, 0.1)",borderRadius:"12px",textAlign:"center"},children:[a.jsx("p",{style:{color:"var(--kb-gray-700)",marginBottom:"0.75rem"},children:"Sign in to save your progress across devices"}),a.jsxs(ue,{to:"/login",className:"btn btn-gold",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(ol,{size:18})," Sign In"]})]})]}):a.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[a.jsxs("div",{className:"card",style:{padding:"2rem",textAlign:"center",marginBottom:"2rem"},children:[a.jsx("div",{style:{width:"80px",height:"80px",background:"linear-gradient(135deg, var(--kb-navy) 0%, var(--kb-navy-light) 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.5rem"},children:a.jsx(i0,{size:36,color:"var(--kb-gold)"})}),a.jsx("h1",{style:{color:"var(--kb-navy)",marginBottom:"0.75rem"},children:"Welcome to Kinderbucks!"}),a.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem",fontSize:"1.05rem"},children:"You haven't checked in anywhere yet. Visit a local business and scan their QR code to start building your Kinderhooker status!"}),!t&&a.jsxs("div",{style:{background:"rgba(201, 162, 39, 0.1)",borderRadius:"12px",padding:"1rem",marginBottom:"1.5rem"},children:[a.jsx("p",{style:{color:"var(--kb-gray-700)",fontSize:"0.9rem",marginBottom:"0.75rem"},children:"Sign in to save your progress across devices"}),a.jsxs(ue,{to:"/login",className:"btn btn-gold",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(ol,{size:18})," Sign In or Create Account"]})]}),a.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap",justifyContent:"center"},children:[a.jsxs(ue,{to:"/businesses",className:"btn btn-primary",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(Oo,{size:18})," Find Businesses"]}),a.jsxs(ue,{to:"/card",className:"btn btn-gold",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(pg,{size:18})," View My Card"]})]})]}),a.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[a.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",textAlign:"center"},children:"How to Get Started"}),a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[{step:1,text:"Visit any participating Kinderhook business",icon:Nt},{step:2,text:"Scan their check-in QR code with your phone",icon:Jt},{step:3,text:"Build your tier to unlock better exchange rates",icon:Vs}].map(M=>a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[a.jsx("div",{style:{width:"44px",height:"44px",background:"var(--kb-navy)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:a.jsx(M.icon,{size:20,color:"var(--kb-gold)"})}),a.jsx("div",{style:{color:"var(--kb-gray-700)"},children:M.text})]},M.step))})]}),a.jsxs("div",{style:{marginTop:"2rem"},children:[a.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",textAlign:"center"},children:"Tier Rewards"}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.75rem"},children:Object.entries(er).map(([M,D])=>{const R=lb[M];return a.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"1rem",textAlign:"center",border:"1px solid var(--kb-gray-200)"},children:[a.jsx(R,{size:24,color:Ec[M],style:{marginBottom:"0.5rem"}}),a.jsx("div",{style:{fontWeight:"600",color:Ec[M],marginBottom:"0.25rem"},children:D.name}),a.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:[Math.round(D.bonus*100),"% bonus"]})]},M)})})]})]})})}),a.jsx(En,{})]})}function _9(){var R,K;const[n,e]=j.useState("login"),[t,r]=j.useState(""),[s,l]=j.useState(""),[c,f]=j.useState(""),[d,m]=j.useState(""),[g,y]=j.useState(!1),x=dl(),S=ir(),{isAuthenticated:_}=Oi(),M=new URLSearchParams(S.search).get("redirect")||((K=(R=S.state)==null?void 0:R.from)==null?void 0:K.pathname)||"/card",D=async z=>{z.preventDefault(),m(""),y(!0);try{if(n==="signup"){if(!c.trim()){m("Please enter your name"),y(!1);return}await U4(t,s,c)}else await W4(t,s);x(M,{replace:!0})}catch(U){console.error("Auth error:",U),U.code==="auth/email-already-in-use"?m("An account with this email already exists"):U.code==="auth/weak-password"?m("Password should be at least 6 characters"):U.code==="auth/invalid-email"?m("Please enter a valid email address"):U.code==="auth/user-not-found"||U.code==="auth/wrong-password"||U.code==="auth/invalid-credential"?m("Invalid email or password"):m("Something went wrong. Please try again.")}y(!1)};return a.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[a.jsx(Sn,{}),a.jsx("section",{style:{flex:1,background:"linear-gradient(180deg, var(--kb-cream) 0%, var(--kb-white) 100%)",padding:"3rem 1rem",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{width:"100%",maxWidth:"420px"},children:[a.jsxs("div",{className:"card",style:{padding:"2rem"},children:[a.jsxs("div",{style:{display:"flex",marginBottom:"2rem",background:"var(--kb-gray-100)",borderRadius:"10px",padding:"4px"},children:[a.jsxs("button",{onClick:()=>{e("login"),m("")},style:{flex:1,padding:"0.75rem",border:"none",borderRadius:"8px",background:n==="login"?"white":"transparent",color:n==="login"?"var(--kb-navy)":"var(--kb-gray-500)",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",boxShadow:n==="login"?"0 1px 3px rgba(0,0,0,0.1)":"none",transition:"all 0.2s"},children:[a.jsx(ol,{size:18})," Sign In"]}),a.jsxs("button",{onClick:()=>{e("signup"),m("")},style:{flex:1,padding:"0.75rem",border:"none",borderRadius:"8px",background:n==="signup"?"white":"transparent",color:n==="signup"?"var(--kb-navy)":"var(--kb-gray-500)",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",boxShadow:n==="signup"?"0 1px 3px rgba(0,0,0,0.1)":"none",transition:"all 0.2s"},children:[a.jsx(Bh,{size:18})," Sign Up"]})]}),a.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:n==="login"?"Welcome Back":"Join Kinderbucks"}),a.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.95rem"},children:n==="login"?"Sign in to access your account":"Create an account to track your Kinderhooker status"})]}),d&&a.jsxs(ge.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},style:{background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",padding:"0.75rem 1rem",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem",color:"#dc2626",fontSize:"0.9rem"},children:[a.jsx(t0,{size:18}),d]}),a.jsxs("form",{onSubmit:D,children:[n==="signup"&&a.jsxs("div",{style:{marginBottom:"1rem"},children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Your Name"}),a.jsxs("div",{style:{position:"relative"},children:[a.jsx(Ga,{size:18,color:"var(--kb-gray-400)",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)"}}),a.jsx("input",{type:"text",value:c,onChange:z=>f(z.target.value),placeholder:"Jane Smith",style:{width:"100%",paddingLeft:"40px"},required:n==="signup"})]})]}),a.jsxs("div",{style:{marginBottom:"1rem"},children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Email"}),a.jsxs("div",{style:{position:"relative"},children:[a.jsx(pE,{size:18,color:"var(--kb-gray-400)",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)"}}),a.jsx("input",{type:"email",value:t,onChange:z=>r(z.target.value),placeholder:"you@example.com",style:{width:"100%",paddingLeft:"40px"},required:!0})]})]}),a.jsxs("div",{style:{marginBottom:"1.5rem"},children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Password"}),a.jsxs("div",{style:{position:"relative"},children:[a.jsx(iV,{size:18,color:"var(--kb-gray-400)",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)"}}),a.jsx("input",{type:"password",value:s,onChange:z=>l(z.target.value),placeholder:"",style:{width:"100%",paddingLeft:"40px"},required:!0,minLength:6})]}),n==="signup"&&a.jsx("p",{style:{marginTop:"0.5rem",fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:"At least 6 characters"})]}),a.jsx("button",{type:"submit",className:"btn btn-gold",disabled:g,style:{width:"100%",padding:"0.875rem",fontSize:"1rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:g?a.jsxs(a.Fragment,{children:[a.jsx(r0,{size:20,className:"animate-spin",style:{animation:"spin 1s linear infinite"}}),n==="login"?"Signing in...":"Creating account..."]}):a.jsxs(a.Fragment,{children:[n==="login"?a.jsx(ol,{size:20}):a.jsx(Bh,{size:20}),n==="login"?"Sign In":"Create Account"]})})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",margin:"1.5rem 0",gap:"1rem"},children:[a.jsx("div",{style:{flex:1,height:"1px",background:"var(--kb-gray-200)"}}),a.jsx("span",{style:{color:"var(--kb-gray-400)",fontSize:"0.85rem"},children:"or"}),a.jsx("div",{style:{flex:1,height:"1px",background:"var(--kb-gray-200)"}})]}),a.jsxs("button",{type:"button",onClick:async()=>{m(""),y(!0);try{await $4(),x(M,{replace:!0})}catch(z){console.error("Google sign-in error:",z),z.code==="auth/popup-closed-by-user"?m("Sign-in cancelled"):m("Could not sign in with Google. Please try again.")}y(!1)},disabled:g,style:{width:"100%",padding:"0.75rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",background:"white",border:"1px solid var(--kb-gray-300)",borderRadius:"8px",cursor:"pointer",fontSize:"0.95rem",fontWeight:"500",color:"var(--kb-gray-700)",transition:"all 0.2s"},children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",children:[a.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),a.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),a.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),a.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),a.jsx("div",{style:{marginTop:"1rem"},children:a.jsx(ue,{to:"/profile",style:{display:"block",textAlign:"center",color:"var(--kb-gray-500)",fontSize:"0.85rem",textDecoration:"none"},children:"Continue as guest (limited features)"})})]}),a.jsx("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"rgba(201, 162, 39, 0.1)",borderRadius:"12px",textAlign:"center"},children:a.jsx("p",{style:{color:"var(--kb-gray-700)",fontSize:"0.9rem",margin:0},children:"Create an account to sync your Kinderhooker status across devices and never lose your tier progress!"})})]})}),a.jsx(En,{}),a.jsx("style",{children:`
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
      `})]})}const S9={curious:Jt,hooked:rr,lineAndSinker:nr,patron:zn},E9={curious:{primary:"#6b7280",secondary:"#9ca3af",bg:"#f3f4f6"},hooked:{primary:"#16a34a",secondary:"#22c55e",bg:"#dcfce7"},lineAndSinker:{primary:"#2563eb",secondary:"#3b82f6",bg:"#dbeafe"},patron:{primary:"#ca8a04",secondary:"#eab308",bg:"#fef3c7"}};function T9(){var I;const{user:n,profile:e,isAuthenticated:t}=Oi(),[r,s]=j.useState(null),[l,c]=j.useState(!0);j.useEffect(()=>{async function C(){const M=Gh(),D=await Su(M);s(D),c(!1)}C()},[n]);const f=(r==null?void 0:r.tier)||"curious",d=er[f],m=E9[f],g=S9[f],y=((I=r==null?void 0:r.businessesVisited)==null?void 0:I.length)||0,x=Math.round(d.bonus*100),S=Gh(),_=S?`OK-${S.substring(0,6).toUpperCase()}`:"OK-GUEST";return l?a.jsx("div",{style:{minHeight:"100vh",background:"var(--kb-navy)",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx("div",{style:{color:"white",fontSize:"1.5rem"},children:"Loading..."})}):a.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(180deg, var(--kb-navy) 0%, #1a3a5c 100%)",padding:"1rem",display:"flex",flexDirection:"column"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[a.jsxs(ue,{to:"/map",style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",color:"white",opacity:.8,textDecoration:"none",fontSize:"1rem"},children:[a.jsx(pD,{size:20})," Village Map"]}),a.jsx(ue,{to:"/profile",style:{color:"white",opacity:.8,textDecoration:"none",fontSize:"1rem"},children:"My Profile"})]}),a.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsxs(ge.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},style:{width:"100%",maxWidth:"380px"},children:[a.jsxs("div",{style:{background:"white",borderRadius:"20px",overflow:"hidden",boxShadow:"0 20px 60px rgba(0,0,0,0.3)",border:"3px solid var(--kb-gold)"},children:[a.jsxs("div",{style:{background:"var(--kb-navy)",padding:"1.25rem 1.5rem",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[a.jsxs("div",{children:[a.jsx("div",{style:{color:"var(--kb-gold)",fontFamily:"var(--font-display)",fontWeight:"700",fontSize:"1.5rem",letterSpacing:"0.02em"},children:"KINDERBUCKS"}),a.jsx("div",{style:{color:"rgba(255,255,255,0.7)",fontSize:"0.8rem",marginTop:"0.1rem"},children:"OK MEMBER CARD"})]}),a.jsx("div",{style:{width:"50px",height:"50px",background:"var(--kb-gold)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--kb-navy)",fontFamily:"var(--font-display)",fontWeight:"700",fontSize:"1.75rem"},children:"K"})]}),a.jsxs("div",{style:{padding:"1.5rem"},children:[a.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"600",color:"var(--kb-navy)",marginBottom:"0.25rem"},children:t&&(e!=null&&e.displayName)?e.displayName:"OK Member"}),a.jsx("div",{style:{fontFamily:"monospace",fontSize:"1.1rem",color:"var(--kb-gray-500)",marginBottom:"1.5rem"},children:_}),a.jsxs("div",{style:{background:`linear-gradient(135deg, ${m.primary} 0%, ${m.secondary} 100%)`,borderRadius:"16px",padding:"1.5rem",textAlign:"center",color:"white",marginBottom:"1.5rem"},children:[a.jsx(g,{size:40,strokeWidth:1.5,style:{marginBottom:"0.5rem"}}),a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",textTransform:"uppercase",marginBottom:"0.25rem"},children:d.name}),a.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"800",lineHeight:1},children:[x,"%"]}),a.jsx("div",{style:{fontSize:"1rem",opacity:.9,marginTop:"0.25rem"},children:"Exchange Bonus"})]}),a.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"2rem",padding:"1rem 0",borderTop:"1px solid var(--kb-gray-200)",borderBottom:"1px solid var(--kb-gray-200)",marginBottom:"1.5rem"},children:[a.jsxs("div",{style:{textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:y}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Businesses"})]}),a.jsxs("div",{style:{textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:(r==null?void 0:r.totalCheckins)||0}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Check-ins"})]})]}),a.jsxs("div",{style:{background:"var(--kb-cream)",borderRadius:"12px",padding:"1rem",textAlign:"center"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"0.5rem",color:"var(--kb-navy)",fontWeight:"600"},children:[a.jsx(br,{size:20}),"How to use"]}),a.jsxs("p",{style:{fontSize:"0.95rem",color:"var(--kb-gray-600)",margin:0,lineHeight:1.5},children:["Scan the business QR code",a.jsx("br",{}),"to check in and get your discount code"]})]})]}),a.jsx("div",{style:{background:"var(--kb-cream)",padding:"0.75rem 1.5rem",textAlign:"center",borderTop:"1px solid var(--kb-gray-200)"},children:a.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:"Village of Kinderhook  Est. 2026"})})]}),a.jsxs(ue,{to:"/businesses",className:"btn btn-gold",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",width:"100%",marginTop:"1.5rem",padding:"1rem",fontSize:"1.1rem"},children:[a.jsx(br,{size:22}),"Find a Business to Check In"]})]})})]})}const Eu="kinderbucks",I9="scans";async function C9(n){const e=St(We,Eu,n),t=await bl(e);return t.exists()?{serial:t.id,...t.data()}:null}async function xT(){const n=Mi(cn(We,Eu),Vo("serial"));return(await Ln(n)).docs.map(t=>({serial:t.id,...t.data()}))}async function A9(n,e){const t=n.map(r=>_l(St(We,Eu,r),{serial:r,denomination:e,status:"draft",scanCount:0,createdAt:Pt()}));await Promise.all(t)}async function j9(n,e,t=null){const r=St(We,Eu,n),s={status:e,issuedAt:Pt(),...t&&{issuedTo:t}};await Ir(r,s)}async function R9(n){const e=St(We,Eu,n);await Ir(e,{scanCount:Ky(1),lastScanned:Pt(),status:"active"}),await Jy(cn(We,I9),{serial:n,scannedAt:Pt(),userAgent:navigator.userAgent||null})}function wT(){const[n,e]=j.useState([]);return j.useEffect(()=>{const t=["#2d5a27","#c9a227","#4a7c43","#d4af37","#5c4033"],r=Array.from({length:50},(s,l)=>({id:l,x:Math.random()*100,color:t[Math.floor(Math.random()*t.length)],delay:Math.random()*.5,duration:2+Math.random()*2,size:8+Math.random()*8}));e(r)},[]),a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,pointerEvents:"none",overflow:"hidden",zIndex:100},children:n.map(t=>a.jsx(ge.div,{initial:{y:-20,x:`${t.x}vw`,opacity:1,rotate:0},animate:{y:"110vh",rotate:360*(Math.random()>.5?1:-1),opacity:[1,1,0]},transition:{duration:t.duration,delay:t.delay,ease:"linear"},style:{position:"absolute",width:t.size,height:t.size,background:t.color,borderRadius:Math.random()>.5?"50%":"2px"}},t.id))})}const cb={1:{bg:"#d4edda",text:"#155724"},5:{bg:"#cce5ff",text:"#004085"},10:{bg:"#e2d5e7",text:"#4a235a"},20:{bg:"#fff3cd",text:"#856404"}};function P9({kinderbuck:n}){const e=cb[n.denomination]||cb[5];return a.jsxs(ge.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",duration:.5},className:"card",style:{textAlign:"center",maxWidth:"400px",background:e.bg},children:[a.jsxs(ge.div,{initial:{y:-20},animate:{y:0},transition:{delay:.2},children:[a.jsxs("h1",{style:{color:e.text,fontSize:"3rem",marginBottom:"0.5rem"},children:["$",n.denomination]}),a.jsx("p",{style:{fontFamily:"monospace",fontSize:"1.5rem",color:e.text},children:n.serial})]}),a.jsx(ge.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},style:{marginTop:"1.5rem"},children:a.jsx("div",{style:{display:"inline-block",padding:"0.5rem 1rem",background:"rgba(255,255,255,0.7)",borderRadius:"20px",color:"var(--kb-green)",fontWeight:"bold"},children:"VERIFIED AUTHENTIC"})}),a.jsxs(ge.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},style:{marginTop:"1.5rem",fontSize:"0.9rem",opacity:.8},children:[a.jsxs("p",{children:["Status: ",a.jsx("strong",{children:n.status})]}),n.issuedAt&&a.jsxs("p",{children:["Issued: ",new Date(n.issuedAt.seconds*1e3).toLocaleDateString()]}),a.jsxs("p",{children:["Scans: ",n.scanCount||1]})]}),a.jsx(ge.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.8,type:"spring"},style:{marginTop:"1.5rem"},children:a.jsx("iframe",{src:"https://giphy.com/embed/B1txHfofr9y08bDB8b",width:"200",height:"200",frameBorder:"0",style:{borderRadius:"12px",pointerEvents:"none"},allowFullScreen:!0})})]})}function N9(){const{serial:n}=Qg(),[e,t]=j.useState(null),[r,s]=j.useState(!0),[l,c]=j.useState(null);return j.useEffect(()=>{async function f(){try{const d=await C9(n);d?(t(d),await R9(n)):c("not_found")}catch(d){console.error("Verification error:",d),c("error")}finally{s(!1)}}f()},[n]),r?a.jsxs("div",{className:"page page-center",children:[a.jsx(ge.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},style:{fontSize:"3rem"},children:"$"}),a.jsxs("p",{style:{marginTop:"1rem"},children:["Verifying ",n,"..."]})]}):l==="not_found"?a.jsxs("div",{className:"page page-center",children:[a.jsx("h1",{style:{color:"#c0392b"},children:"Not Found"}),a.jsxs("p",{children:["Serial ",a.jsx("strong",{children:n})," is not a valid Kinderbuck."]})]}):l?a.jsxs("div",{className:"page page-center",children:[a.jsx("h1",{style:{color:"#c0392b"},children:"Error"}),a.jsx("p",{children:"Something went wrong verifying this Kinderbuck."})]}):a.jsxs("div",{className:"page page-center",children:[a.jsx(wT,{}),a.jsx(P9,{kinderbuck:e})]})}const If="checkins",M9=3600*1e3;async function D9(n,e){var t;try{const r=new Date(Date.now()-M9),s=Mi(cn(We,If),sl("visitorId","==",n),sl("businessCode","==",e)),l=await Ln(s);if(l.empty)return!1;for(const c of l.docs)if((((t=c.data().timestamp)==null?void 0:t.toDate())||new Date(0))>r)return!0;return!1}catch(r){return console.error("hasRecentCheckin error (allowing checkin):",r),!1}}async function V9(n,e,t){await Jy(cn(We,If),{visitorId:n,businessCode:e,timestamp:Pt(),kinderbucksMatched:!1,boostApplied:0,memberTier:t||"curious"})}async function kT(n){try{const e=Mi(cn(We,If),sl("businessCode","==",n));return(await Ln(e)).docs.map(s=>({id:s.id,...s.data()})).sort((s,l)=>{var d,m,g,y;const c=((m=(d=s.timestamp)==null?void 0:d.toDate)==null?void 0:m.call(d))||new Date(0);return(((y=(g=l.timestamp)==null?void 0:g.toDate)==null?void 0:y.call(g))||new Date(0))-c}).slice(0,100)}catch(e){return console.error("getCheckinsByBusiness error:",e),[]}}async function L9(){try{return(await Ln(cn(We,If))).docs.map(e=>({id:e.id,...e.data()}))}catch(n){return console.error("getAllCheckins error:",n),[]}}const O9={curious:Jt,hooked:rr,lineAndSinker:nr,patron:zn},B9={curious:"#6b7280",hooked:"#16a34a",lineAndSinker:"#2563eb",patron:"#ca8a04"};function z9(n,e){const t=new Date,r=t.getHours().toString().padStart(2,"0")+t.getMinutes().toString().padStart(2,"0"),s=e.substring(0,4).toUpperCase();return`${n.substring(0,3).toUpperCase()}-${s}-${r}`}function F9(){const{businessCode:n}=Qg(),{isAuthenticated:e}=Oi(),[t,r]=j.useState(null),[s,l]=j.useState(!0),[c,f]=j.useState(null),[d,m]=j.useState(null),[g,y]=j.useState(!1),[x,S]=j.useState(!1),[_,I]=j.useState("");if(j.useEffect(()=>{async function U(){try{const A=await L0(n);if(!A){f("not_found"),l(!1);return}if(!A.isActive){f("inactive"),l(!1);return}if(r(A),!e){l(!1);return}const E=Gh();if(I(z9(n,E)),await D9(E,n)){y(!0);const B=await Su(E);B&&m({tierChanged:!1,newTier:B.tier,businessesVisited:B.businessesVisited||[],totalCheckins:B.totalCheckins||0,isNewBusiness:!1}),l(!1);return}const V=await v9(E,n);await V9(E,n,V.newTier),await p9(n),m(V),V.tierChanged&&V.newTier&&S(!0),l(!1)}catch(A){console.error("Check-in error:",A),f("error"),l(!1)}}U()},[n,e]),s)return a.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"linear-gradient(180deg, var(--kb-navy) 0%, #1a3a5c 100%)",padding:"2rem"},children:[a.jsx(ge.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:a.jsx(r0,{size:64,color:"var(--kb-gold)"})}),a.jsx("p",{style:{marginTop:"1.5rem",color:"white",fontSize:"1.25rem"},children:"Checking in..."})]});if(c==="not_found")return a.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#fef2f2",padding:"2rem",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:"?"}),a.jsx("h1",{style:{color:"#dc2626",fontSize:"1.75rem",marginBottom:"0.75rem"},children:"Business Not Found"}),a.jsx("p",{style:{color:"#7f1d1d",fontSize:"1.1rem",marginBottom:"2rem"},children:"This QR code doesn't match any participating business."}),a.jsx(ue,{to:"/",className:"btn btn-primary",style:{fontSize:"1.1rem",padding:"1rem 2rem"},children:"Go Home"})]});if(c==="inactive")return a.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#fffbeb",padding:"2rem",textAlign:"center"},children:[a.jsx("h1",{style:{color:"#d97706",fontSize:"1.75rem",marginBottom:"0.75rem"},children:"Business Not Active"}),a.jsx("p",{style:{color:"#92400e",fontSize:"1.1rem",marginBottom:"2rem"},children:"This business is not currently participating."}),a.jsx(ue,{to:"/",className:"btn btn-primary",style:{fontSize:"1.1rem",padding:"1rem 2rem"},children:"Go Home"})]});if(c)return a.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#fef2f2",padding:"2rem",textAlign:"center"},children:[a.jsx("h1",{style:{color:"#dc2626",fontSize:"1.75rem",marginBottom:"0.75rem"},children:"Something went wrong"}),a.jsx("p",{style:{color:"#7f1d1d",fontSize:"1.1rem",marginBottom:"2rem"},children:"Please try scanning again."}),a.jsx(ue,{to:"/",className:"btn btn-primary",style:{fontSize:"1.1rem",padding:"1rem 2rem"},children:"Go Home"})]});const C=(d==null?void 0:d.newTier)||"curious",M=er[C],D=B9[C],R=O9[C],K=Math.round(M.bonus*100),z=e?g?"#6b7280":D:"var(--kb-navy)";return a.jsxs("div",{style:{minHeight:"100vh",background:`linear-gradient(180deg, ${z} 0%, ${z}dd 100%)`,padding:"1.5rem",display:"flex",flexDirection:"column"},children:[x&&a.jsx(wT,{}),a.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",maxWidth:"400px",margin:"0 auto",width:"100%"},children:[g?a.jsxs(ge.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},style:{textAlign:"center",color:"white"},children:[a.jsx(Zr,{size:80,strokeWidth:1.5,style:{marginBottom:"1rem",opacity:.8}}),a.jsx("h1",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"Already Checked In"}),a.jsxs("p",{style:{fontSize:"1.25rem",opacity:.9,marginBottom:"2rem"},children:["at ",t.name]}),a.jsxs("p",{style:{fontSize:"1.1rem",opacity:.8},children:["Come back in about an hour",a.jsx("br",{}),"for another check-in!"]})]}):e?a.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{width:"100%"},children:[a.jsxs("div",{style:{textAlign:"center",color:"white",marginBottom:"1.5rem"},children:[a.jsx(ge.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.2},children:a.jsx("div",{style:{width:"80px",height:"80px",background:"rgba(255,255,255,0.2)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:a.jsx(bi,{size:48,strokeWidth:2.5})})}),a.jsx("h1",{style:{fontSize:"1.75rem",marginBottom:"0.25rem"},children:"Checked In!"}),a.jsx("p",{style:{fontSize:"1.25rem",opacity:.9},children:t.name})]}),a.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},style:{background:"white",borderRadius:"24px",padding:"2rem",textAlign:"center",boxShadow:"0 10px 40px rgba(0,0,0,0.2)"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"1rem"},children:[a.jsx(R,{size:28,color:D}),a.jsx("span",{style:{fontSize:"1.25rem",fontWeight:"700",color:D,textTransform:"uppercase"},children:M.name})]}),a.jsxs("div",{style:{background:`${D}15`,borderRadius:"16px",padding:"1.5rem",marginBottom:"1.5rem"},children:[a.jsxs("div",{style:{fontSize:"4rem",fontWeight:"800",color:D,lineHeight:1},children:[K,"%"]}),a.jsx("div",{style:{fontSize:"1.1rem",color:"var(--kb-gray-600)",marginTop:"0.25rem"},children:"Exchange Bonus"})]}),a.jsxs("div",{style:{background:"var(--kb-navy)",borderRadius:"12px",padding:"1rem",marginBottom:"1rem"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[a.jsx(xE,{size:18,color:"var(--kb-gold)"}),a.jsx("span",{style:{color:"var(--kb-gold)",fontSize:"0.85rem",fontWeight:"600"},children:"VERIFICATION CODE"})]}),a.jsx("div",{style:{fontFamily:"monospace",fontSize:"1.75rem",fontWeight:"700",color:"white",letterSpacing:"0.1em"},children:_})]}),a.jsxs("p",{style:{fontSize:"1.1rem",color:"var(--kb-gray-600)",lineHeight:1.5},children:["Show this screen to the cashier",a.jsx("br",{}),"to receive your ",a.jsxs("strong",{children:[K,"% bonus"]})]})]}),(d==null?void 0:d.tierChanged)&&a.jsxs(ge.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},style:{marginTop:"1.5rem",padding:"1rem",background:"rgba(255,255,255,0.15)",borderRadius:"12px",textAlign:"center",color:"white"},children:[a.jsx("span",{style:{fontSize:"1.25rem"},children:""}),a.jsxs("span",{style:{marginLeft:"0.5rem",fontWeight:"600"},children:["You just leveled up to ",M.name,"!"]})]})]}):a.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{width:"100%"},children:[a.jsxs("div",{style:{textAlign:"center",color:"white",marginBottom:"1.5rem"},children:[a.jsx(ge.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.2},children:a.jsx("div",{style:{width:"80px",height:"80px",background:"rgba(255,255,255,0.2)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:a.jsx(Bh,{size:40,strokeWidth:1.5})})}),a.jsxs("h1",{style:{fontSize:"1.75rem",marginBottom:"0.25rem"},children:["Welcome to ",t.name,"!"]}),a.jsx("p",{style:{fontSize:"1.1rem",opacity:.9},children:"Sign in to complete your check-in and unlock your discount"})]}),a.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},style:{background:"white",borderRadius:"24px",padding:"2rem",textAlign:"center",boxShadow:"0 10px 40px rgba(0,0,0,0.2)"},children:[a.jsx("div",{style:{width:"60px",height:"60px",background:"var(--kb-gold)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.25rem"},children:a.jsx(mE,{size:28,color:"var(--kb-navy)"})}),a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem",fontSize:"1.5rem"},children:"Your Discount is Waiting!"}),a.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"1rem",marginBottom:"1.5rem",lineHeight:1.5},children:"Create a free OK Member account to unlock your exclusive bonus discount."}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",marginBottom:"1.5rem",textAlign:"left",background:"var(--kb-cream)",borderRadius:"12px",padding:"1rem 1.25rem"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"0.95rem",color:"var(--kb-gray-700)"},children:[a.jsx("div",{style:{width:"24px",height:"24px",background:"var(--kb-green)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(bi,{size:14,color:"white"})}),"Unlock your discount code"]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"0.95rem",color:"var(--kb-gray-700)"},children:[a.jsx("div",{style:{width:"24px",height:"24px",background:"var(--kb-green)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(bi,{size:14,color:"white"})}),"Track your tier progress"]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"0.95rem",color:"var(--kb-gray-700)"},children:[a.jsx("div",{style:{width:"24px",height:"24px",background:"var(--kb-green)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(bi,{size:14,color:"white"})}),"Get your digital OK Member Card"]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"0.95rem",color:"var(--kb-gray-700)"},children:[a.jsx("div",{style:{width:"24px",height:"24px",background:"var(--kb-green)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(bi,{size:14,color:"white"})}),"Earn higher bonuses as you level up"]})]}),a.jsxs(ue,{to:`/login?redirect=/checkin/${n}`,className:"btn btn-gold",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",padding:"1rem",fontSize:"1.15rem",marginBottom:"0.75rem"},children:[a.jsx(Bh,{size:22}),"Sign Up Free"]}),a.jsxs("p",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:["Already have an account? ",a.jsx(ue,{to:`/login?redirect=/checkin/${n}`,style:{color:"var(--kb-navy)",fontWeight:"600"},children:"Sign In"})]})]})]}),a.jsxs(ge.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},style:{marginTop:"2rem",display:"flex",gap:"0.75rem"},children:[a.jsx(ue,{to:"/profile",className:"btn",style:{background:"rgba(255,255,255,0.2)",color:"white",padding:"0.875rem 1.5rem",fontSize:"1rem"},children:"My Profile"}),a.jsx(ue,{to:"/",className:"btn",style:{background:"white",color:"var(--kb-navy)",padding:"0.875rem 1.5rem",fontSize:"1rem"},children:"Home"})]})]})]})}const Cf="promoCodes";async function th(n){const e=Mi(cn(We,Cf),sl("businessCode","==",n),Vo("createdAt","desc"));return(await Ln(e)).docs.map(r=>({id:r.id,...r.data()}))}async function U9({businessCode:n,code:e,description:t,discountType:r,discountValue:s,minTier:l,expiresAt:c,usageLimit:f}){const d=`${n}-${e.toUpperCase()}`;return await _l(St(We,Cf,d),{businessCode:n,code:e.toUpperCase(),description:t,discountType:r,discountValue:s,minTier:l||null,expiresAt:c||null,usageLimit:f||null,usageCount:0,isActive:!0,createdAt:Pt()}),d}async function W9(n,e){const t=St(We,Cf,n);await Ir(t,{isActive:e})}async function $9(n){await L4(St(We,Cf,n))}function H9(){const{profile:n}=Oi(),[e,t]=j.useState(null),[r,s]=j.useState([]),[l,c]=j.useState([]),[f,d]=j.useState([]),[m,g]=j.useState([]),[y,x]=j.useState(!0),[S,_]=j.useState("overview"),[I,C]=j.useState(!1),[M,D]=j.useState(!1),[R,K]=j.useState(!1),[z,U]=j.useState(null),[A,E]=j.useState({code:"",description:"",discountType:"percent",discountValue:10,minTier:"",expiresAt:"",usageLimit:""}),[N,V]=j.useState(!1);j.useEffect(()=>{async function J(){if(!(n!=null&&n.businessCode)){x(!1);return}const[de,xe,Ie,Je,sr]=await Promise.all([L0(n.businessCode),kT(n.businessCode),th(n.businessCode),Bi(),L9()]);t(de),s(xe),c(Ie),d(Je.filter(Hs=>Hs.isActive)),g(sr),x(!1)}J()},[n==null?void 0:n.businessCode]);const B=()=>{const J=`https://harmonicsystems.github.io/kinderbucks/#/checkin/${n.businessCode}`;navigator.clipboard.writeText(J),D(!0),setTimeout(()=>D(!1),2e3)};r.filter(J=>{var Ie;const de=(Ie=J.timestamp)!=null&&Ie.toDate?J.timestamp.toDate():new Date(J.timestamp),xe=new Date;return de.toDateString()===xe.toDateString()}).length;const $=r.filter(J=>{var Ie;const de=(Ie=J.timestamp)!=null&&Ie.toDate?J.timestamp.toDate():new Date(J.timestamp),xe=new Date;return xe.setDate(xe.getDate()-7),de>xe}).length,O=r.filter(J=>{var Je;const de=(Je=J.timestamp)!=null&&Je.toDate?J.timestamp.toDate():new Date(J.timestamp),xe=new Date,Ie=new Date;return xe.setDate(xe.getDate()-7),Ie.setDate(Ie.getDate()-14),de>Ie&&de<=xe}).length,Ve=O>0?Math.round(($-O)/O*100):$>0?100:0,Ke=new Set(r.map(J=>J.visitorId)).size,at=m.length,Te=m.filter(J=>{var Ie;const de=(Ie=J.timestamp)!=null&&Ie.toDate?J.timestamp.toDate():new Date(J.timestamp),xe=new Date;return xe.setDate(xe.getDate()-7),de>xe}).length,ie=f.sort((J,de)=>(de.checkinCount||0)-(J.checkinCount||0)).slice(0,5),me=f.sort((J,de)=>(de.checkinCount||0)-(J.checkinCount||0)).findIndex(J=>J.code===(n==null?void 0:n.businessCode))+1,ce=async J=>{if(J.preventDefault(),!(!A.code||!A.description)){V(!0);try{await U9({businessCode:n.businessCode,code:A.code,description:A.description,discountType:A.discountType,discountValue:Number(A.discountValue),minTier:A.minTier||null,expiresAt:A.expiresAt?new Date(A.expiresAt):null,usageLimit:A.usageLimit?Number(A.usageLimit):null});const de=await th(n.businessCode);c(de),E({code:"",description:"",discountType:"percent",discountValue:10,minTier:"",expiresAt:"",usageLimit:""}),K(!1)}catch(de){console.error("Error creating promo:",de),alert("Error creating promo code")}V(!1)}},H=async(J,de)=>{await W9(J,!de);const xe=await th(n.businessCode);c(xe)},te=async J=>{if(!confirm("Delete this promo code?"))return;await $9(J);const de=await th(n.businessCode);c(de)};if(y)return a.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[a.jsx(Sn,{}),a.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",background:"var(--kb-cream)"},children:a.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading..."})}),a.jsx(En,{})]});if(!(n!=null&&n.businessCode))return a.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[a.jsx(Sn,{}),a.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",background:"var(--kb-cream)",padding:"2rem"},children:a.jsxs("div",{className:"card",style:{maxWidth:"400px",textAlign:"center",padding:"2rem"},children:[a.jsx(Nt,{size:48,color:"var(--kb-gray-400)",style:{marginBottom:"1rem"}}),a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"No Business Assigned"}),a.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem"},children:"Your account doesn't have a business assigned yet. Contact an administrator to get set up."}),a.jsx(ue,{to:"/",className:"btn btn-primary",children:"Go Home"})]})}),a.jsx(En,{})]});const Re=`https://harmonicsystems.github.io/kinderbucks/#/checkin/${n.businessCode}`,Pe=[{key:"overview",label:"Overview",icon:e0},{key:"qrcode",label:"QR Code",icon:br},{key:"promos",label:"Promo Codes",icon:_c},{key:"trends",label:"Village Trends",icon:Vs},{key:"guide",label:"Resource Guide",icon:Ow}],Le=[{id:"qr-setup",title:"Setting Up Your QR Code",icon:br,content:["Print your unique QR code and display it prominently at your counter or entrance","Use a stand or frame to keep it visible and accessible for customers","Consider printing multiple codes for different checkout areas","Test the code regularly to ensure it scans correctly"]},{id:"customer-flow",title:"Customer Check-in Flow",icon:vg,content:["Customers scan the QR code with their phone camera","They're taken to your check-in page (no app download needed)","If signed in, they earn a check-in toward their Kinderhooker status","Their tier badge appears so you can offer appropriate discounts"]},{id:"tier-discounts",title:"Member Tier Discounts",icon:nr,content:["Curious (0-4 check-ins): New to Kinderhook - welcome them warmly!","Hooked (5-14 check-ins): Regular visitors - consider small perks","Line & Sinker (15-29 check-ins): Loyal customers - offer meaningful discounts","Village Patron (30+ check-ins): Your best customers - VIP treatment!"]},{id:"promo-tips",title:"Creating Effective Promos",icon:_c,content:["Create tier-specific promos to reward loyalty","Set expiration dates to create urgency","Use memorable, easy-to-type codes","Track usage to see what resonates with customers"]}];return a.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[a.jsx(Sn,{}),a.jsx("main",{style:{flex:1,background:"var(--kb-cream)",padding:"2rem 1rem"},children:a.jsxs("div",{style:{maxWidth:"1100px",margin:"0 auto"},children:[a.jsx(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{marginBottom:"1.5rem"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"1rem"},children:[a.jsxs("div",{children:[a.jsx("div",{className:"badge badge-gold",style:{marginBottom:"0.5rem"},children:"Business Resource Center"}),a.jsx("h1",{style:{color:"var(--kb-navy)",marginBottom:"0.25rem"},children:(e==null?void 0:e.name)||n.businessCode}),a.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"Manage check-ins, promos, and see village trends"})]}),me>0&&a.jsxs("div",{style:{background:"linear-gradient(135deg, var(--kb-gold) 0%, var(--kb-gold-dark) 100%)",color:"white",padding:"0.75rem 1.25rem",borderRadius:"12px",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"0.75rem",opacity:.9},children:"Village Rank"}),a.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700"},children:["#",me]})]})]})}),a.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem",overflowX:"auto",paddingBottom:"0.5rem"},children:Pe.map(J=>{const de=J.icon;return a.jsxs("button",{onClick:()=>_(J.key),className:"btn",style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.6rem 1rem",background:S===J.key?"var(--kb-navy)":"white",color:S===J.key?"white":"var(--kb-gray-600)",border:"1px solid var(--kb-gray-200)",whiteSpace:"nowrap"},children:[a.jsx(de,{size:16}),J.label]},J.key)})}),S==="overview"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[a.jsx(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card",style:{padding:"1.25rem"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[a.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(39, 174, 96, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(Vs,{size:22,color:"var(--kb-green)"})}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:(e==null?void 0:e.checkinCount)||0}),a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Total Check-ins"})]})]})}),a.jsx(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card",style:{padding:"1.25rem"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[a.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(52, 152, 219, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(bf,{size:22,color:"#3498db"})}),a.jsxs("div",{children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx("span",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:$}),Ve!==0&&a.jsxs("span",{style:{fontSize:"0.75rem",padding:"0.15rem 0.4rem",borderRadius:"4px",background:Ve>0?"rgba(39, 174, 96, 0.1)":"rgba(231, 76, 60, 0.1)",color:Ve>0?"var(--kb-green)":"#e74c3c"},children:[Ve>0?"+":"",Ve,"%"]})]}),a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"This Week"})]})]})}),a.jsx(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"card",style:{padding:"1.25rem"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[a.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(201, 162, 39, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(Er,{size:22,color:"var(--kb-gold-dark)"})}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:Ke}),a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Unique Visitors"})]})]})}),a.jsx(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"card",style:{padding:"1.25rem"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[a.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(155, 89, 182, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(_c,{size:22,color:"#9b59b6"})}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:l.filter(J=>J.isActive).length}),a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Active Promos"})]})]})})]}),a.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"card",children:[a.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(Zr,{size:20})," Recent Check-ins"]}),r.length===0?a.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[a.jsx(Er,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),a.jsx("p",{children:"No check-ins yet"}),a.jsx("p",{style:{fontSize:"0.9rem"},children:"Display your QR code to start receiving check-ins!"}),a.jsx("button",{onClick:()=>_("qrcode"),className:"btn btn-gold",style:{marginTop:"1rem"},children:"View QR Code"})]}):a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:r.slice(0,10).map((J,de)=>{var Je;const xe=(Je=J.timestamp)!=null&&Je.toDate?J.timestamp.toDate():new Date(J.timestamp),Ie={"Village Patron":"#9b59b6","Line & Sinker":"#c9a227",Hooked:"#27ae60",Curious:"#3498db"};return a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"var(--kb-gray-50)",borderRadius:"8px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[a.jsx("div",{style:{width:"36px",height:"36px",background:"var(--kb-green)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(kr,{size:18,color:"white"})}),a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:"Check-in recorded"}),J.tier&&a.jsx("span",{style:{fontSize:"0.75rem",padding:"0.1rem 0.5rem",borderRadius:"4px",background:`${Ie[J.tier]||"#95a5a6"}20`,color:Ie[J.tier]||"#95a5a6",fontWeight:"500"},children:J.tier})]})]}),a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:xe.toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]},J.id||de)})})]})]}),S==="qrcode"&&a.jsx(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",style:{padding:"2rem"},children:a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"2rem",alignItems:"start"},children:[a.jsxs("div",{style:{textAlign:"center"},children:[a.jsx("div",{style:{background:"linear-gradient(135deg, var(--kb-green) 0%, #1e8449 100%)",borderRadius:"20px",padding:"4px",display:"inline-block"},children:a.jsxs("div",{style:{background:"white",borderRadius:"18px",padding:"20px"},children:[a.jsx("div",{style:{fontSize:"11px",fontWeight:"600",color:"var(--kb-green)",letterSpacing:"2px",marginBottom:"12px"},children:"CHECK IN AT"}),a.jsx(ll,{value:Re,size:180,denomination:1,showFrame:!1}),a.jsx("div",{style:{marginTop:"12px",fontWeight:"600",color:"var(--kb-navy)",fontSize:"1.1rem"},children:e==null?void 0:e.name})]})}),a.jsxs("div",{style:{marginTop:"1.5rem",display:"flex",gap:"0.5rem",justifyContent:"center",flexWrap:"wrap"},children:[a.jsxs("button",{onClick:()=>window.print(),className:"btn btn-gold",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(vE,{size:18})," Print"]}),a.jsxs("button",{onClick:B,className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[M?a.jsx(kr,{size:18}):a.jsx(n0,{size:18}),M?"Copied!":"Copy URL"]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"How Customers Use This"}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[a.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"start"},children:[a.jsx("div",{style:{width:"32px",height:"32px",background:"var(--kb-navy)",color:"white",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"600",fontSize:"0.9rem",flexShrink:0},children:"1"}),a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:"Customer scans with phone"}),a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"Using their camera app or QR reader"})]})]}),a.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"start"},children:[a.jsx("div",{style:{width:"32px",height:"32px",background:"var(--kb-navy)",color:"white",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"600",fontSize:"0.9rem",flexShrink:0},children:"2"}),a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:"Opens check-in page"}),a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"No app download required!"})]})]}),a.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"start"},children:[a.jsx("div",{style:{width:"32px",height:"32px",background:"var(--kb-navy)",color:"white",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"600",fontSize:"0.9rem",flexShrink:0},children:"3"}),a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:'They tap "Check In"'}),a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"Earns progress toward their Kinderhooker tier"})]})]}),a.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"start"},children:[a.jsx("div",{style:{width:"32px",height:"32px",background:"var(--kb-green)",color:"white",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:a.jsx(kr,{size:18})}),a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:"You see their tier badge"}),a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"Offer appropriate discounts for their loyalty level"})]})]})]}),a.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"rgba(201, 162, 39, 0.1)",borderRadius:"8px",borderLeft:"3px solid var(--kb-gold)"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--kb-gold-dark)",fontWeight:"600",marginBottom:"0.5rem"},children:[a.jsx(XD,{size:16})," Pro Tip"]}),a.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.9rem",margin:0},children:"Place your QR code near the register or on table tents so customers can check in while they wait!"})]})]})]})}),S==="promos"&&a.jsx(a.Fragment,{children:a.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",style:{marginBottom:"1.5rem"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1.5rem"},children:[a.jsxs("h3",{style:{color:"var(--kb-navy)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(_c,{size:20})," Your Promo Codes"]}),a.jsxs("button",{onClick:()=>K(!R),className:"btn btn-gold",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(yg,{size:18})," Create Promo"]})]}),R&&a.jsxs("form",{onSubmit:ce,style:{padding:"1.5rem",background:"var(--kb-gray-50)",borderRadius:"12px",marginBottom:"1.5rem"},children:[a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Code *"}),a.jsx("input",{type:"text",value:A.code,onChange:J=>E(de=>({...de,code:J.target.value.toUpperCase().replace(/[^A-Z0-9]/g,"")})),placeholder:"SUMMER20",style:{width:"100%",fontFamily:"monospace"},required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Discount Type"}),a.jsxs("select",{value:A.discountType,onChange:J=>E(de=>({...de,discountType:J.target.value})),style:{width:"100%"},children:[a.jsx("option",{value:"percent",children:"Percent Off"}),a.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:A.discountType==="percent"?"Percent Off":"Amount Off ($)"}),a.jsx("input",{type:"number",value:A.discountValue,onChange:J=>E(de=>({...de,discountValue:J.target.value})),min:"1",max:A.discountType==="percent"?100:1e3,style:{width:"100%"}})]})]}),a.jsxs("div",{style:{marginBottom:"1rem"},children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Description *"}),a.jsx("input",{type:"text",value:A.description,onChange:J=>E(de=>({...de,description:J.target.value})),placeholder:"10% off your entire purchase",style:{width:"100%"},required:!0})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Min. Tier (optional)"}),a.jsxs("select",{value:A.minTier,onChange:J=>E(de=>({...de,minTier:J.target.value})),style:{width:"100%"},children:[a.jsx("option",{value:"",children:"Any tier"}),a.jsx("option",{value:"Curious",children:"Curious"}),a.jsx("option",{value:"Hooked",children:"Hooked"}),a.jsx("option",{value:"Line & Sinker",children:"Line & Sinker"}),a.jsx("option",{value:"Village Patron",children:"Village Patron"})]})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Expires (optional)"}),a.jsx("input",{type:"date",value:A.expiresAt,onChange:J=>E(de=>({...de,expiresAt:J.target.value})),style:{width:"100%"}})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Usage Limit (optional)"}),a.jsx("input",{type:"number",value:A.usageLimit,onChange:J=>E(de=>({...de,usageLimit:J.target.value})),placeholder:"Unlimited",min:"1",style:{width:"100%"}})]})]}),a.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[a.jsx("button",{type:"submit",className:"btn btn-primary",disabled:N,children:N?"Creating...":"Create Promo Code"}),a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>K(!1),children:"Cancel"})]})]}),l.length===0?a.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[a.jsx(_c,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),a.jsx("p",{children:"No promo codes yet"}),a.jsx("p",{style:{fontSize:"0.9rem"},children:"Create your first promo to reward loyal customers!"})]}):a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:l.map(J=>a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem",background:J.isActive?"var(--kb-gray-50)":"var(--kb-gray-100)",borderRadius:"8px",opacity:J.isActive?1:.6,flexWrap:"wrap",gap:"1rem"},children:[a.jsxs("div",{children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.25rem"},children:[a.jsx("code",{style:{padding:"0.25rem 0.5rem",background:"var(--kb-navy)",color:"var(--kb-gold)",borderRadius:"4px",fontWeight:"600"},children:J.code}),a.jsxs("span",{style:{padding:"0.15rem 0.5rem",background:J.discountType==="percent"?"rgba(39, 174, 96, 0.1)":"rgba(52, 152, 219, 0.1)",color:J.discountType==="percent"?"var(--kb-green)":"#3498db",borderRadius:"4px",fontSize:"0.8rem",fontWeight:"500"},children:[J.discountType==="percent"?a.jsx(pV,{size:12,style:{marginRight:4}}):a.jsx(VD,{size:12,style:{marginRight:4}}),J.discountValue,J.discountType==="percent"?"% off":" off"]})]}),a.jsx("div",{style:{color:"var(--kb-gray-600)",fontSize:"0.9rem"},children:J.description}),a.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"0.5rem",fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:[J.minTier&&a.jsxs("span",{children:["Min tier: ",J.minTier]}),J.usageLimit&&a.jsxs("span",{children:["Limit: ",J.usageCount||0,"/",J.usageLimit]}),J.expiresAt&&a.jsxs("span",{children:["Expires: ",new Date(J.expiresAt.toDate?J.expiresAt.toDate():J.expiresAt).toLocaleDateString()]})]})]}),a.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[a.jsxs("button",{onClick:()=>H(J.id,J.isActive),className:"btn btn-secondary",style:{padding:"0.4rem 0.6rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:[J.isActive?a.jsx(WD,{size:16}):a.jsx(fE,{size:16}),J.isActive?"Disable":"Enable"]}),a.jsx("button",{onClick:()=>te(J.id),className:"btn",style:{padding:"0.4rem 0.6rem",background:"#e74c3c",color:"white"},children:a.jsx(ZV,{size:16})})]})]},J.id))})]})}),S==="trends"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[a.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",style:{padding:"1.5rem"},children:[a.jsx("h4",{style:{color:"var(--kb-gray-500)",marginBottom:"0.5rem",fontSize:"0.9rem"},children:"Village-Wide Check-ins"}),a.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"var(--kb-navy)"},children:at}),a.jsxs("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:[Te," this week across all businesses"]})]}),a.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card",style:{padding:"1.5rem"},children:[a.jsx("h4",{style:{color:"var(--kb-gray-500)",marginBottom:"0.5rem",fontSize:"0.9rem"},children:"Participating Businesses"}),a.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"var(--kb-navy)"},children:f.length}),a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Active in the Kinderbucks network"})]}),a.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card",style:{padding:"1.5rem",background:"linear-gradient(135deg, var(--kb-gold) 0%, var(--kb-gold-dark) 100%)",color:"white"},children:[a.jsx("h4",{style:{opacity:.9,marginBottom:"0.5rem",fontSize:"0.9rem"},children:"Your Market Share"}),a.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"700"},children:[at>0?Math.round(((e==null?void 0:e.checkinCount)||0)/at*100):0,"%"]}),a.jsx("div",{style:{opacity:.9,fontSize:"0.85rem"},children:"of all village check-ins"})]})]}),a.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"card",children:[a.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(nr,{size:20})," Top Businesses This Month"]}),a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:ie.map((J,de)=>{var sr;const xe=J.code===(n==null?void 0:n.businessCode),Ie=((sr=ie[0])==null?void 0:sr.checkinCount)||1,Je=(J.checkinCount||0)/Ie*100;return a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"0.75rem 1rem",background:xe?"rgba(201, 162, 39, 0.1)":"var(--kb-gray-50)",borderRadius:"8px",border:xe?"2px solid var(--kb-gold)":"none"},children:[a.jsx("div",{style:{width:"28px",height:"28px",background:de===0?"var(--kb-gold)":de===1?"#c0c0c0":de===2?"#cd7f32":"var(--kb-gray-300)",color:"white",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"600",fontSize:"0.85rem"},children:de+1}),a.jsxs("div",{style:{flex:1},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:[a.jsx("span",{style:{fontWeight:xe?"600":"500",color:"var(--kb-navy)"},children:J.name}),xe&&a.jsx("span",{style:{fontSize:"0.7rem",padding:"0.1rem 0.4rem",background:"var(--kb-gold)",color:"white",borderRadius:"4px"},children:"YOU"})]}),a.jsx("div",{style:{height:"6px",background:"var(--kb-gray-200)",borderRadius:"3px",overflow:"hidden"},children:a.jsx("div",{style:{width:`${Je}%`,height:"100%",background:xe?"var(--kb-gold)":"var(--kb-green)",borderRadius:"3px"}})})]}),a.jsx("div",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:J.checkinCount||0})]},J.code)})})]})]}),S==="guide"&&a.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",children:[a.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(Ow,{size:20})," Business Resource Guide"]}),a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:Le.map(J=>{const de=J.icon,xe=z===J.id;return a.jsxs("div",{style:{border:"1px solid var(--kb-gray-200)",borderRadius:"12px",overflow:"hidden"},children:[a.jsxs("button",{onClick:()=>U(xe?null:J.id),style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem 1.25rem",background:xe?"var(--kb-gray-50)":"white",border:"none",cursor:"pointer",textAlign:"left"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[a.jsx("div",{style:{width:"40px",height:"40px",background:"rgba(201, 162, 39, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(de,{size:20,color:"var(--kb-gold-dark)"})}),a.jsx("span",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:J.title})]}),xe?a.jsx(yD,{size:20,color:"var(--kb-gray-400)"}):a.jsx(fD,{size:20,color:"var(--kb-gray-400)"})]}),xe&&a.jsx("div",{style:{padding:"1rem 1.25rem",borderTop:"1px solid var(--kb-gray-200)"},children:a.jsx("ul",{style:{margin:0,paddingLeft:"1.25rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:J.content.map((Ie,Je)=>a.jsx("li",{style:{color:"var(--kb-gray-600)",lineHeight:1.5},children:Ie},Je))})})]},J.id)})}),a.jsxs("div",{style:{marginTop:"2rem",padding:"1.5rem",background:"linear-gradient(135deg, var(--kb-navy) 0%, var(--kb-navy-light) 100%)",borderRadius:"12px",color:"white"},children:[a.jsx("h4",{style:{marginBottom:"0.5rem"},children:"Need Help?"}),a.jsx("p",{style:{opacity:.9,marginBottom:"1rem",fontSize:"0.95rem"},children:"Questions about Kinderbucks or need assistance with your account? We're here to help!"}),a.jsx("a",{href:"mailto:support@kinderbucks.com",className:"btn",style:{background:"rgba(255,255,255,0.2)",color:"white"},children:"Contact Support"})]})]})]})}),a.jsx(En,{})]})}function un({children:n,title:e}){const t=ir(),r=dl(),{user:s,profile:l,isAdmin:c}=Oi(),f=[{to:"/admin/dashboard",label:"Dashboard",Icon:ZD},{to:"/admin/exchanges",label:"Exchanges",Icon:kf},{to:"/admin/members",label:"Members",Icon:Er},{to:"/admin/generate",label:"Generate QR",Icon:br},{to:"/admin/issue",label:"Issue Currency",Icon:Lh},{to:"/admin/businesses",label:"Businesses",Icon:Nt},{to:"/admin/users",label:"User Management",Icon:Oh}],d=async()=>{await aE(),r("/")},m=g=>t.pathname===g;return a.jsxs("div",{style:{display:"flex",minHeight:"100vh"},children:[a.jsxs("aside",{style:{width:"260px",background:"var(--kb-navy)",color:"var(--kb-white)",display:"flex",flexDirection:"column",position:"fixed",top:0,left:0,bottom:0,zIndex:100},children:[a.jsx("div",{style:{padding:"1.5rem",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:a.jsxs(ue,{to:"/map",style:{display:"flex",alignItems:"center",gap:"0.75rem",textDecoration:"none"},children:[a.jsx("div",{style:{width:"40px",height:"40px",background:"var(--kb-gold)",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--kb-navy)",fontFamily:"var(--font-display)",fontWeight:"700",fontSize:"1.2rem"},children:"K"}),a.jsxs("div",{children:[a.jsx("div",{style:{fontFamily:"var(--font-display)",fontWeight:"600",color:"var(--kb-white)",fontSize:"1.1rem"},children:"Kinderbucks"}),a.jsx("div",{style:{fontSize:"0.7rem",color:"var(--kb-gold)",textTransform:"uppercase",letterSpacing:"0.1em"},children:"Admin Portal"})]})]})}),a.jsx("nav",{style:{flex:1,padding:"1rem 0",overflowY:"auto"},children:f.map(g=>a.jsxs(ue,{to:g.to,style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.875rem 1.5rem",color:m(g.to)?"var(--kb-gold)":"var(--kb-gray-300)",background:m(g.to)?"rgba(201, 162, 39, 0.1)":"transparent",borderLeft:m(g.to)?"3px solid var(--kb-gold)":"3px solid transparent",textDecoration:"none",fontSize:"0.95rem",fontWeight:m(g.to)?"600":"400",transition:"all 0.2s"},children:[a.jsx(g.Icon,{size:20,strokeWidth:1.5}),g.label]},g.to))}),a.jsxs("div",{style:{padding:"1rem 1.5rem",borderTop:"1px solid rgba(255,255,255,0.1)"},children:[s&&a.jsxs("div",{style:{padding:"0.75rem 0",borderBottom:"1px solid rgba(255,255,255,0.1)",marginBottom:"0.75rem"},children:[a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-300)"},children:(l==null?void 0:l.displayName)||s.email}),a.jsx("div",{style:{fontSize:"0.75rem",color:"var(--kb-gray-500)"},children:(l==null?void 0:l.role)||"member"})]}),a.jsxs(ue,{to:"/map",style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.5rem 0",color:"var(--kb-gray-400)",textDecoration:"none",fontSize:"0.9rem"},children:[a.jsx(QD,{size:18}),"Back to Site"]}),s&&a.jsxs("button",{onClick:d,style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.5rem 0",color:"var(--kb-gray-400)",background:"none",border:"none",cursor:"pointer",fontSize:"0.9rem",width:"100%"},children:[a.jsx(gg,{size:18}),"Sign Out"]})]})]}),a.jsxs("main",{style:{flex:1,marginLeft:"260px",background:"var(--kb-cream)",minHeight:"100vh"},children:[a.jsx("header",{style:{background:"var(--kb-white)",borderBottom:"1px solid var(--kb-gray-200)",padding:"1.25rem 2rem",position:"sticky",top:0,zIndex:50},children:a.jsx("h1",{style:{fontFamily:"var(--font-display)",fontSize:"1.5rem",color:"var(--kb-navy)",margin:0},children:e})}),a.jsx("div",{style:{padding:"2rem"},children:n})]}),a.jsx("style",{children:`
        @media (max-width: 768px) {
          aside {
            width: 100% !important;
            position: relative !important;
            display: none;
          }
          main {
            margin-left: 0 !important;
          }
        }
      `})]})}function K9(){const[n,e]=j.useState({totalCurrency:0,inCirculation:0,circulationValue:0,pendingExchanges:0,pendingValue:0,totalMembers:0,activeBusinesses:0,totalCheckins:0}),[t,r]=j.useState([]),[s,l]=j.useState({}),[c,f]=j.useState(!0);j.useEffect(()=>{async function m(){try{const g=await xT(),y=g.filter(A=>A.status==="issued"||A.status==="active"),x={};y.forEach(A=>{const E=A.denomination||0;x[E]=(x[E]||0)+1}),l(x);const S=await Bi(),_=S.filter(A=>A.isActive),I=S.reduce((A,E)=>A+(E.checkinCount||0),0),C=Mi(cn(We,"exchanges"),sl("status","==","pending"),Vo("createdAt","desc")),D=(await Ln(C)).docs.map(A=>({id:A.id,...A.data()})),R=D.reduce((A,E)=>A+(E.kinderbucksAmount||0),0),K=Mi(cn(We,"exchanges"),Vo("createdAt","desc"),D4(5)),z=await Ln(K);r(z.docs.map(A=>({id:A.id,...A.data()})));const U=await Ln(cn(We,"members"));e({totalCurrency:g.length,inCirculation:y.length,circulationValue:y.reduce((A,E)=>A+(E.denomination||0),0),pendingExchanges:D.length,pendingValue:R,totalMembers:U.size,activeBusinesses:_.length,totalCheckins:I}),f(!1)}catch(g){console.error("Error loading dashboard data:",g),f(!1)}}m()},[]);const d=({icon:m,label:g,value:y,subtext:x,color:S,to:_})=>a.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[a.jsxs("div",{children:[a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem",marginBottom:"0.5rem"},children:g}),a.jsx("div",{style:{fontFamily:"var(--font-display)",fontSize:"2rem",fontWeight:"700",color:S||"var(--kb-navy)"},children:y}),x&&a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem",marginTop:"0.25rem"},children:x})]}),a.jsx("div",{style:{width:"48px",height:"48px",background:`${S||"var(--kb-navy)"}15`,borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(m,{size:24,color:S||"var(--kb-navy)"})})]}),_&&a.jsx(ue,{to:_,style:{display:"block",marginTop:"1rem",paddingTop:"1rem",borderTop:"1px solid var(--kb-gray-100)",color:"var(--kb-navy)",fontSize:"0.85rem",fontWeight:"500"},children:"View Details "})]});return c?a.jsx(un,{title:"Dashboard",children:a.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:a.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading dashboard..."})})}):a.jsxs(un,{title:"Dashboard",children:[a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[a.jsx(d,{icon:Zy,label:"In Circulation",value:`$${n.circulationValue.toLocaleString()}`,subtext:`${n.inCirculation} bills issued`,color:"var(--kb-green)"}),a.jsx(d,{icon:Zr,label:"Pending Exchanges",value:n.pendingExchanges,subtext:`$${n.pendingValue.toFixed(2)} value`,color:n.pendingExchanges>0?"#e67e22":"var(--kb-gray-400)",to:"/admin/exchanges"}),a.jsx(d,{icon:Er,label:"OK Members",value:n.totalMembers,subtext:`${n.totalCheckins} total check-ins`,color:"var(--kb-navy)",to:"/admin/members"}),a.jsx(d,{icon:Nt,label:"Active Businesses",value:n.activeBusinesses,color:"var(--kb-gold-dark)",to:"/admin/businesses"})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem"},children:[a.jsxs("div",{className:"card",children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[a.jsx("h3",{style:{color:"var(--kb-navy)",margin:0},children:"Recent Exchanges"}),a.jsx(ue,{to:"/admin/exchanges",style:{fontSize:"0.85rem",color:"var(--kb-navy)"},children:"View All "})]}),t.length===0?a.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"No exchanges yet"}):a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:t.map(m=>{var g,y,x,S;return a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem",background:"var(--kb-gray-50)",borderRadius:"8px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[m.status==="completed"?a.jsx(kr,{size:18,color:"var(--kb-green)"}):m.status==="pending"?a.jsx(Zr,{size:18,color:"#e67e22"}):a.jsx(t0,{size:18,color:"var(--kb-gray-400)"}),a.jsxs("div",{children:[a.jsxs("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:["$",m.usdAmount,"  $",(g=m.kinderbucksAmount)==null?void 0:g.toFixed(2)," KB"]}),a.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:((S=(x=(y=m.createdAt)==null?void 0:y.toDate)==null?void 0:x.call(y))==null?void 0:S.toLocaleDateString())||"Pending"})]})]}),a.jsx("span",{className:"badge",style:{background:m.status==="completed"?"#d4edda":m.status==="pending"?"#fff3cd":"#f8f9fa",color:m.status==="completed"?"var(--kb-green)":m.status==="pending"?"#856404":"var(--kb-gray-600)"},children:m.status})]},m.id)})})]}),a.jsxs("div",{className:"card",children:[a.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem"},children:"Circulation by Denomination"}),Object.keys(s).length===0?a.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"No currency in circulation yet"}):a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[1,5,10,20].map(m=>{const g=s[m]||0,y=Math.max(...Object.values(s),1),x=g/y*100,S={1:"#27ae60",5:"#3498db",10:"#9b59b6",20:"#c9a227"};return a.jsxs("div",{children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[a.jsxs("span",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:["$",m]}),a.jsxs("span",{style:{color:"var(--kb-gray-500)"},children:[g," bills ($",g*m,")"]})]}),a.jsx("div",{style:{height:"8px",background:"var(--kb-gray-100)",borderRadius:"4px",overflow:"hidden"},children:a.jsx("div",{style:{width:`${x}%`,height:"100%",background:S[m],borderRadius:"4px",transition:"width 0.5s ease"}})})]},m)})})]})]}),a.jsxs("div",{className:"card",style:{marginTop:"1.5rem"},children:[a.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Quick Actions"}),a.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[a.jsxs(ue,{to:"/admin/generate",className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(br,{size:18})," Generate QR Codes"]}),a.jsxs(ue,{to:"/admin/issue",className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(Lh,{size:18})," Issue Currency"]}),a.jsxs(ue,{to:"/admin/exchanges",className:"btn btn-gold",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(kf,{size:18})," Process Exchanges"]})]})]})]})}function q9(){const[n,e]=j.useState({start:1,end:100}),[t,r]=j.useState(5),[s,l]=j.useState([]),[c,f]=j.useState(!1),[d,m]=j.useState(!1),g=()=>{const _=[];for(let I=n.start;I<=n.end;I++)_.push(`KB-${String(I).padStart(4,"0")}`);l(_),m(!1)},y=async()=>{f(!0);try{await A9(s,t),m(!0)}catch(_){console.error("Error saving:",_),alert("Error saving to database")}f(!1)},x="https://harmonicsystems.github.io/kinderbucks/#/scan/",S={1:{bg:"rgba(39, 174, 96, 0.1)",text:"var(--kb-green)"},5:{bg:"rgba(52, 152, 219, 0.1)",text:"#3498db"},10:{bg:"rgba(155, 89, 182, 0.1)",text:"#9b59b6"},20:{bg:"rgba(201, 162, 39, 0.1)",text:"var(--kb-gold-dark)"}};return a.jsxs(un,{title:"Generate QR Codes",children:[a.jsxs("div",{className:"card",style:{marginBottom:"2rem"},children:[a.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(br,{size:20})," Generation Settings"]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1.5rem",marginBottom:"1.5rem"},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Start Number"}),a.jsx("input",{type:"number",value:n.start,onChange:_=>e(I=>({...I,start:Number(_.target.value)})),min:1,max:9999,style:{width:"100%"}})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"End Number"}),a.jsx("input",{type:"number",value:n.end,onChange:_=>e(I=>({...I,end:Number(_.target.value)})),min:1,max:9999,style:{width:"100%"}})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Denomination"}),a.jsxs("select",{value:t,onChange:_=>r(Number(_.target.value)),style:{width:"100%"},children:[a.jsx("option",{value:1,children:"$1"}),a.jsx("option",{value:5,children:"$5"}),a.jsx("option",{value:10,children:"$10"}),a.jsx("option",{value:20,children:"$20"})]})]})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[a.jsxs("button",{className:"btn btn-primary",onClick:g,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(br,{size:18})," Generate ",n.end-n.start+1," Codes"]}),a.jsxs("div",{style:{padding:"0.75rem 1rem",background:S[t].bg,borderRadius:"8px",color:S[t].text,fontWeight:"600"},children:["Total Value: $",(n.end-n.start+1)*t]})]})]}),s.length>0&&a.jsxs("div",{className:"card",children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[a.jsxs("div",{children:[a.jsxs("h3",{style:{color:"var(--kb-navy)",margin:0},children:["Generated: ",s.length," Kinderbucks"]}),a.jsxs("p",{style:{color:"var(--kb-gray-500)",margin:"0.25rem 0 0",fontSize:"0.9rem"},children:["$",t," denomination  Total value: $",s.length*t]})]}),a.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[d?a.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--kb-green)",fontWeight:"600"},children:[a.jsx(kr,{size:18})," Saved!"]}):a.jsxs("button",{className:"btn btn-gold",onClick:y,disabled:c,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(SV,{size:18}),c?"Saving...":"Save to Database"]}),a.jsxs("button",{className:"btn btn-secondary",onClick:()=>window.print(),style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(vE,{size:18})," Print"]})]})]}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gap:"1.5rem"},children:s.slice(0,50).map(_=>a.jsxs("div",{style:{background:"var(--kb-white)",border:"1px solid var(--kb-gray-200)",borderRadius:"12px",padding:"1rem",textAlign:"center"},children:[a.jsx(ll,{value:`${x}${_}`,size:140,denomination:t}),a.jsx("p",{style:{fontFamily:"monospace",marginTop:"0.75rem",fontSize:"0.9rem",color:"var(--kb-navy)",fontWeight:"600"},children:_})]},_))}),s.length>50&&a.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"var(--kb-gray-50)",borderRadius:"8px",textAlign:"center",color:"var(--kb-gray-600)"},children:["Showing 50 of ",s.length," codes. All will be saved and printable."]})]}),s.length===0&&a.jsxs("div",{className:"card",style:{textAlign:"center",padding:"4rem 2rem"},children:[a.jsx(br,{size:64,color:"var(--kb-gray-300)",style:{marginBottom:"1rem"}}),a.jsx("h3",{style:{color:"var(--kb-gray-500)",marginBottom:"0.5rem"},children:"No codes generated yet"}),a.jsx("p",{style:{color:"var(--kb-gray-400)"},children:"Set your range and denomination above, then click Generate."})]})]})}function G9(){const[n,e]=j.useState([]),[t,r]=j.useState(!0),[s,l]=j.useState([]),[c,f]=j.useState(""),[d,m]=j.useState(!1),[g,y]=j.useState(0),x=async()=>{const A=await xT();e(A.filter(E=>E.status==="draft"||E.status==="issued")),r(!1)};j.useEffect(()=>{x()},[]);const S=A=>{l(E=>E.includes(A)?E.filter(N=>N!==A):[...E,A])},_=()=>{const A=M.map(E=>E.serial);l(A)},I=()=>{l([])},C=async()=>{if(s.length!==0){m(!0);try{for(const A of s)await j9(A,"issued",c);y(s.length),l([]),f(""),await x(),setTimeout(()=>y(0),3e3)}catch(A){console.error("Error issuing:",A),alert("Error issuing Kinderbucks")}m(!1)}},M=n.filter(A=>A.status==="draft"),D=n.filter(A=>A.status==="issued"),R=s.reduce((A,E)=>{const N=n.find(V=>V.serial===E);return A+((N==null?void 0:N.denomination)||0)},0),z=(A=>{const E={1:[],5:[],10:[],20:[]};return A.forEach(N=>{const V=N.denomination||5;E[V]&&E[V].push(N)}),E})(M),U={1:"#27ae60",5:"#3498db",10:"#9b59b6",20:"#c9a227"};return t?a.jsx(un,{title:"Issue Currency",children:a.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:a.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading..."})})}):a.jsxs(un,{title:"Issue Currency",children:[g>0&&a.jsxs("div",{style:{position:"fixed",top:"100px",right:"2rem",background:"var(--kb-green)",color:"white",padding:"1rem 1.5rem",borderRadius:"8px",display:"flex",alignItems:"center",gap:"0.75rem",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:1e3},children:[a.jsx(kr,{size:20}),a.jsxs("span",{children:["Issued ",g," Kinderbucks successfully!"]})]}),a.jsxs("div",{className:"card",style:{marginBottom:"2rem"},children:[a.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(Lh,{size:20})," Issue to Circulation"]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:"1.5rem",alignItems:"end"},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Recipient (optional)"}),a.jsx("input",{type:"text",value:c,onChange:A=>f(A.target.value),placeholder:"Business name or exchange point",style:{width:"100%"}})]}),a.jsxs("button",{className:"btn btn-gold",onClick:C,disabled:s.length===0||d,style:{display:"flex",alignItems:"center",gap:"0.5rem",height:"42px"},children:[a.jsx(Lh,{size:18}),d?"Issuing...":`Issue ${s.length} Selected`]})]}),s.length>0&&a.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem 1rem",background:"var(--kb-gold)",borderRadius:"8px",color:"var(--kb-navy)",fontWeight:"500"},children:["Selected: ",s.length," bills  Total value: $",R]})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[a.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-gray-500)"},children:M.length}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Available (Draft)"})]}),a.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-green)"},children:D.length}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Already Issued"})]}),a.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:s.length}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Selected"})]})]}),a.jsxs("div",{className:"card",children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[a.jsxs("h3",{style:{color:"var(--kb-navy)",margin:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(Bw,{size:20})," Available to Issue (",M.length,")"]}),a.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[a.jsx("button",{className:"btn btn-secondary",onClick:_,style:{padding:"0.4rem 0.75rem",fontSize:"0.85rem"},children:"Select All"}),a.jsx("button",{className:"btn btn-secondary",onClick:I,style:{padding:"0.4rem 0.75rem",fontSize:"0.85rem"},children:"Clear"})]})]}),M.length===0?a.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[a.jsx(Bw,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),a.jsx("p",{children:"No draft Kinderbucks available."}),a.jsx("p",{style:{fontSize:"0.9rem"},children:"Generate some QR codes first."})]}):a.jsx("div",{children:[1,5,10,20].map(A=>{const E=z[A];return E.length===0?null:a.jsxs("div",{style:{marginBottom:"1.5rem"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem"},children:[a.jsxs("div",{style:{width:"24px",height:"24px",background:U[A],borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"0.75rem",fontWeight:"600"},children:["$",A]}),a.jsxs("span",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:["$",A," Bills (",E.length,")"]}),a.jsx("button",{onClick:()=>{const N=E.map(B=>B.serial),V=N.every(B=>s.includes(B));l(V?B=>B.filter($=>!N.includes($)):B=>[...new Set([...B,...N])])},style:{background:"none",border:"none",color:U[A],cursor:"pointer",fontSize:"0.85rem"},children:E.every(N=>s.includes(N.serial))?"Deselect all":"Select all"})]}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))",gap:"0.5rem"},children:E.map(N=>{const V=s.includes(N.serial);return a.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.6rem 0.75rem",background:V?`${U[A]}15`:"var(--kb-gray-50)",borderRadius:"6px",cursor:"pointer",border:V?`2px solid ${U[A]}`:"2px solid transparent",transition:"all 0.15s"},children:[V?a.jsx(VV,{size:18,color:U[A]}):a.jsx(OV,{size:18,color:"var(--kb-gray-400)"}),a.jsx("input",{type:"checkbox",checked:V,onChange:()=>S(N.serial),style:{display:"none"}}),a.jsx("span",{style:{fontFamily:"monospace",fontSize:"0.85rem",color:V?U[A]:"var(--kb-gray-600)",fontWeight:V?"600":"400"},children:N.serial})]},N.serial)})})]},A)})})]})]})}const Q9=[{code:"AVIARY",name:"The Aviary",category:"food"},{code:"MORNINGBIRD",name:"Morningbird Cafe",category:"food"},{code:"SAISONNIER",name:"Saisonnier",category:"food"},{code:"BROADST-BAGEL",name:"Broad Street Bagel Co.",category:"food"},{code:"DYAD",name:"Dyad Wine Bar",category:"food"},{code:"BOTTLE-SHOP",name:"Kinderhook Bottle Shop",category:"retail"},{code:"SAMASCOTTS",name:"Samascott's Garden Market",category:"retail"},{code:"SAMASCOTT-ORCHARDS",name:"Samascott Orchards",category:"retail"},{code:"SCHOOL-GALLERY",name:"The School | Jack Shainman Gallery",category:"arts"},{code:"FEED-SEED",name:"The Feed and Seed",category:"services"},{code:"OLD-DUTCH",name:"The Old Dutch Inn",category:"services"},{code:"VILLAGE-YOGA",name:"Village Yoga",category:"services"},{code:"WALSH-DENTISTRY",name:"Walsh & Walsh Dentistry",category:"services"}],Vp={food:{label:"Food & Drink",Icon:kE,color:"#e74c3c"},retail:{label:"Retail",Icon:wE,color:"#9b59b6"},services:{label:"Services",Icon:uE,color:"#3498db"},arts:{label:"Arts & Culture",Icon:yE,color:"#1abc9c"}};function Y9(){const[n,e]=j.useState([]),[t,r]=j.useState(!0),[s,l]=j.useState({code:"",name:"",category:"food"}),[c,f]=j.useState(!1),[d,m]=j.useState(null),[g,y]=j.useState(!1),[x,S]=j.useState(null),_=async()=>{const z=await Bi();e(z),r(!1)};j.useEffect(()=>{_()},[]);const I=async z=>{if(z.preventDefault(),!(!s.code||!s.name)){f(!0);try{await ob(s.code.toUpperCase(),s.name,s.category),l({code:"",name:"",category:"food"}),await _()}catch(U){console.error("Error creating business:",U),alert("Error creating business")}f(!1)}},C=async(z,U)=>{await g9(z,!U),await _()},M=async()=>{if(confirm("This will add all Kinderhook businesses. Continue?")){y(!0);try{for(const z of Q9)n.find(A=>A.code===z.code)||await ob(z.code,z.name,z.category);await _(),alert("Businesses seeded successfully!")}catch(z){console.error("Error seeding:",z),alert("Error seeding businesses")}y(!1)}},D=z=>{navigator.clipboard.writeText(z),S(z),setTimeout(()=>S(null),2e3)},R="https://harmonicsystems.github.io/kinderbucks/#/checkin/",K={total:n.length,active:n.filter(z=>z.isActive).length,totalCheckins:n.reduce((z,U)=>z+(U.checkinCount||0),0)};return t?a.jsx(un,{title:"Business Directory",children:a.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:a.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading..."})})}):a.jsxs(un,{title:"Business Directory",children:[a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[a.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:K.total}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Businesses"})]}),a.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-green)"},children:K.active}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Active"})]}),a.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-gold-dark)"},children:K.totalCheckins}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Check-ins"})]})]}),a.jsxs("div",{className:"card",style:{marginBottom:"2rem"},children:[a.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(yg,{size:20})," Add Business"]}),a.jsxs("form",{onSubmit:I,children:[a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1.5rem",marginBottom:"1.5rem"},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Code"}),a.jsx("input",{type:"text",value:s.code,onChange:z=>l(U=>({...U,code:z.target.value.toUpperCase().replace(/[^A-Z0-9-]/g,"")})),placeholder:"CAFE-01",style:{width:"100%",fontFamily:"monospace"}})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Name"}),a.jsx("input",{type:"text",value:s.name,onChange:z=>l(U=>({...U,name:z.target.value})),placeholder:"Village Caf",style:{width:"100%"}})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Category"}),a.jsx("select",{value:s.category,onChange:z=>l(U=>({...U,category:z.target.value})),style:{width:"100%"},children:Object.entries(Vp).map(([z,U])=>a.jsx("option",{value:z,children:U.label},z))})]})]}),a.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[a.jsxs("button",{type:"submit",className:"btn btn-primary",disabled:c||!s.code||!s.name,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(yg,{size:18})," ",c?"Adding...":"Add Business"]}),a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:M,disabled:g,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(hE,{size:18})," ",g?"Seeding...":"Seed Kinderhook Businesses"]})]})]})]}),a.jsxs("div",{className:"card",children:[a.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(Nt,{size:20})," Participating Businesses (",n.length,")"]}),n.length===0?a.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[a.jsx(Nt,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),a.jsx("p",{children:"No businesses yet. Add one above or seed the Kinderhook businesses."})]}):a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:n.map(z=>{const U=Vp[z.category]||Vp.services,A=U.Icon,E=`${R}${z.code}`;return a.jsxs("div",{style:{background:z.isActive?"var(--kb-white)":"var(--kb-gray-50)",border:`1px solid ${z.isActive,"var(--kb-gray-200)"}`,borderRadius:"12px",padding:"1.25rem",opacity:z.isActive?1:.7},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"1rem"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[a.jsx("div",{style:{width:"48px",height:"48px",background:`${U.color}15`,borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(A,{size:24,color:U.color})}),a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:"600",color:z.isActive?"var(--kb-navy)":"var(--kb-gray-500)",fontSize:"1.1rem"},children:z.name}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginTop:"0.25rem"},children:[a.jsx("span",{style:{fontFamily:"monospace",fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:z.code}),a.jsx("span",{style:{fontSize:"0.85rem",color:U.color},children:U.label})]})]})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1.5rem"},children:[a.jsxs("div",{style:{textAlign:"center"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"var(--kb-green)",fontWeight:"600"},children:[a.jsx(Vs,{size:16}),z.checkinCount||0]}),a.jsx("div",{style:{fontSize:"0.75rem",color:"var(--kb-gray-500)"},children:"check-ins"})]}),a.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[a.jsxs(ue,{to:`/admin/businesses/${z.code}`,className:"btn btn-gold",style:{padding:"0.5rem 0.75rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:[a.jsx(fE,{size:16})," Details"]}),a.jsx("button",{onClick:()=>m(d===z.code?null:z.code),className:"btn btn-secondary",style:{padding:"0.5rem 0.75rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:a.jsx(br,{size:16})}),a.jsxs("button",{onClick:()=>C(z.code,z.isActive),className:"btn",style:{padding:"0.5rem 0.75rem",background:z.isActive?"#e74c3c":"var(--kb-green)",color:"white",display:"flex",alignItems:"center",gap:"0.25rem"},children:[z.isActive?a.jsx(XV,{size:16}):a.jsx(QV,{size:16}),z.isActive?"Deactivate":"Activate"]})]})]})]}),d===z.code&&a.jsxs("div",{style:{marginTop:"1.5rem",paddingTop:"1.5rem",borderTop:"1px solid var(--kb-gray-200)",display:"flex",alignItems:"center",gap:"2rem",flexWrap:"wrap"},children:[a.jsx("div",{style:{textAlign:"center"},children:a.jsx(ll,{value:E,size:150,denomination:5,showFrame:!1})}),a.jsxs("div",{style:{flex:1,minWidth:"200px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontSize:"0.85rem"},children:"Check-in URL"}),a.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[a.jsx("input",{type:"text",value:E,readOnly:!0,style:{flex:1,fontFamily:"monospace",fontSize:"0.85rem"}}),a.jsxs("button",{onClick:()=>D(E),className:"btn btn-secondary",style:{padding:"0.5rem 0.75rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:[a.jsx(n0,{size:16}),x===E?"Copied!":"Copy"]})]}),a.jsx("p",{style:{marginTop:"0.75rem",fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Print this QR code and display it at the counter for customers to scan when they visit."})]})]})]},z.code)})})]})]})}const X9={curious:Jt,hooked:rr,lineAndSinker:nr,patron:zn};function J9(){const[n,e]=j.useState([]),[t,r]=j.useState(!0),[s,l]=j.useState("all"),[c,f]=j.useState(null),d=async()=>{try{const _=Mi(cn(We,"exchanges"),Vo("createdAt","desc")),I=await Ln(_);e(I.docs.map(C=>({id:C.id,...C.data()}))),r(!1)}catch(_){console.error("Error loading exchanges:",_),r(!1)}};j.useEffect(()=>{d()},[]);const m=async(_,I)=>{f(_);try{await Ir(St(We,"exchanges",_),{status:I,processedAt:Pt()}),await d()}catch(C){console.error("Error updating exchange:",C),alert("Error updating exchange status")}f(null)},g=s==="all"?n:n.filter(_=>_.status===s),y={total:n.length,pending:n.filter(_=>_.status==="pending").length,completed:n.filter(_=>_.status==="completed").length,cancelled:n.filter(_=>_.status==="cancelled").length,totalValue:n.filter(_=>_.status==="completed").reduce((_,I)=>_+(I.kinderbucksAmount||0),0)},x=_=>{switch(_){case"completed":return a.jsx(kr,{size:18,color:"var(--kb-green)"});case"pending":return a.jsx(Zr,{size:18,color:"#e67e22"});case"cancelled":return a.jsx(kD,{size:18,color:"#e74c3c"});default:return a.jsx(t0,{size:18,color:"var(--kb-gray-400)"})}},S=_=>{switch(_){case"completed":return{background:"#d4edda",color:"var(--kb-green)"};case"pending":return{background:"#fff3cd",color:"#856404"};case"cancelled":return{background:"#f8d7da",color:"#721c24"};default:return{background:"#f8f9fa",color:"var(--kb-gray-600)"}}};return t?a.jsx(un,{title:"Exchange Management",children:a.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:a.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading exchanges..."})})}):a.jsxs(un,{title:"Exchange Management",children:[a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[a.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"#e67e22"},children:y.pending}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Pending"})]}),a.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-green)"},children:y.completed}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Completed"})]}),a.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[a.jsxs("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-gold-dark)"},children:["$",y.totalValue.toFixed(0)]}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Exchanged"})]})]}),a.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem",flexWrap:"wrap"},children:[{value:"all",label:`All (${y.total})`},{value:"pending",label:`Pending (${y.pending})`},{value:"completed",label:`Completed (${y.completed})`},{value:"cancelled",label:`Cancelled (${y.cancelled})`}].map(_=>a.jsx("button",{onClick:()=>l(_.value),className:s===_.value?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem"},children:_.label},_.value))}),a.jsx("div",{className:"card",children:g.length===0?a.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[a.jsx(kf,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),a.jsxs("p",{children:["No ",s!=="all"?s:""," exchanges found"]})]}):a.jsxs("div",{children:[a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 150px",gap:"1rem",padding:"0.75rem 1rem",borderBottom:"2px solid var(--kb-navy)",fontWeight:"600",color:"var(--kb-navy)",fontSize:"0.85rem"},children:[a.jsx("div",{children:"Date"}),a.jsx("div",{children:"Amount"}),a.jsx("div",{children:"Tier & Bonus"}),a.jsx("div",{children:"Status"}),a.jsx("div",{children:"Actions"})]}),g.map(_=>{var C,M,D,R,K,z,U;const I=X9[_.tier]||Jt;return a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 150px",gap:"1rem",padding:"1rem",borderBottom:"1px solid var(--kb-gray-100)",alignItems:"center",background:_.status==="pending"?"rgba(230, 126, 34, 0.05)":"transparent"},children:[a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:((D=(M=(C=_.createdAt)==null?void 0:C.toDate)==null?void 0:M.call(C))==null?void 0:D.toLocaleDateString())||"Unknown"}),a.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:((z=(K=(R=_.createdAt)==null?void 0:R.toDate)==null?void 0:K.call(R))==null?void 0:z.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))||""})]}),a.jsxs("div",{children:[a.jsxs("div",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:["$",_.usdAmount," USD"]}),a.jsxs("div",{style:{fontSize:"0.9rem",color:"var(--kb-gold-dark)"},children:[" $",(U=_.kinderbucksAmount)==null?void 0:U.toFixed(2)," KB"]})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(I,{size:18,color:"var(--kb-gray-500)"}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"0.9rem",color:"var(--kb-gray-700)",textTransform:"capitalize"},children:_.tier||"curious"}),a.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--kb-green)"},children:["+",Math.round((_.bonusRate||.1)*100),"% bonus"]})]})]}),a.jsx("div",{children:a.jsxs("span",{className:"badge",style:{...S(_.status),display:"inline-flex",alignItems:"center",gap:"0.25rem"},children:[x(_.status),_.status]})}),a.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[_.status==="pending"&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>m(_.id,"completed"),disabled:c===_.id,className:"btn btn-primary",style:{padding:"0.4rem 0.75rem",fontSize:"0.8rem"},children:c===_.id?"...":"Approve"}),a.jsx("button",{onClick:()=>m(_.id,"cancelled"),disabled:c===_.id,className:"btn btn-secondary",style:{padding:"0.4rem 0.75rem",fontSize:"0.8rem"},children:"Cancel"})]}),_.status==="completed"&&a.jsx("span",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Processed"}),_.status==="cancelled"&&a.jsx("button",{onClick:()=>m(_.id,"pending"),disabled:c===_.id,className:"btn btn-secondary",style:{padding:"0.4rem 0.75rem",fontSize:"0.8rem"},children:"Reopen"})]})]},_.id)})]})})]})}const Lp={curious:Jt,hooked:rr,lineAndSinker:nr,patron:zn},Op={curious:"#888888",hooked:"#2e7d32",lineAndSinker:"#1565c0",patron:"#c9a227"};function Z9(){const[n,e]=j.useState([]),[t,r]=j.useState([]),[s,l]=j.useState(!0),[c,f]=j.useState("checkins"),[d,m]=j.useState("all");j.useEffect(()=>{async function _(){try{const C=(await Ln(cn(We,"members"))).docs.map(D=>({id:D.id,...D.data()})),M=await Bi();e(C),r(M),l(!1)}catch(I){console.error("Error loading members:",I),l(!1)}}_()},[]);const g=_=>{const I=t.find(C=>C.code===_);return I?I.name:_},y=[...n].sort((_,I)=>{var C,M,D,R,K,z;switch(c){case"checkins":return(I.totalCheckins||0)-(_.totalCheckins||0);case"businesses":return(((C=I.businessesVisited)==null?void 0:C.length)||0)-(((M=_.businessesVisited)==null?void 0:M.length)||0);case"recent":const U=((R=(D=_.lastCheckin)==null?void 0:D.toDate)==null?void 0:R.call(D))||new Date(0);return(((z=(K=I.lastCheckin)==null?void 0:K.toDate)==null?void 0:z.call(K))||new Date(0))-U;default:return 0}}),x=d==="all"?y:y.filter(_=>_.tier===d),S={total:n.length,curious:n.filter(_=>_.tier==="curious").length,hooked:n.filter(_=>_.tier==="hooked").length,lineAndSinker:n.filter(_=>_.tier==="lineAndSinker").length,patron:n.filter(_=>_.tier==="patron").length,totalCheckins:n.reduce((_,I)=>_+(I.totalCheckins||0),0)};return s?a.jsx(un,{title:"Member Management",children:a.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:a.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading members..."})})}):a.jsxs(un,{title:"Member Management",children:[a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(130px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[a.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:S.total}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Members"})]}),Object.entries(Lp).map(([_,I])=>{var C;return a.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[a.jsx(I,{size:20,color:Op[_]}),a.jsx("span",{style:{fontSize:"1.5rem",fontWeight:"700",color:Op[_]},children:S[_]})]}),a.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)",textTransform:"capitalize"},children:((C=er[_])==null?void 0:C.name)||_})]},_)})]}),a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[a.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[a.jsx("button",{onClick:()=>m("all"),className:d==="all"?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem"},children:"All"}),Object.entries(Lp).map(([_,I])=>a.jsx("button",{onClick:()=>m(_),className:d===_?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:a.jsx(I,{size:16})},_))]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx("span",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"Sort by:"}),a.jsxs("select",{value:c,onChange:_=>f(_.target.value),style:{padding:"0.5rem"},children:[a.jsx("option",{value:"checkins",children:"Most Check-ins"}),a.jsx("option",{value:"businesses",children:"Most Businesses"}),a.jsx("option",{value:"recent",children:"Recent Activity"})]})]})]}),a.jsx("div",{className:"card",children:x.length===0?a.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[a.jsx(Er,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),a.jsx("p",{children:"No members found"})]}):a.jsxs("div",{children:[a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 2fr",gap:"1rem",padding:"0.75rem 1rem",borderBottom:"2px solid var(--kb-navy)",fontWeight:"600",color:"var(--kb-navy)",fontSize:"0.85rem"},children:[a.jsx("div",{children:"Member"}),a.jsx("div",{children:"Tier"}),a.jsx("div",{children:"Activity"}),a.jsx("div",{children:"Businesses Visited"})]}),x.map(_=>{var R,K,z,U,A;const I=Lp[_.tier]||Jt,C=Op[_.tier]||"#888",M=er[_.tier]||er.curious,D=((R=_.businessesVisited)==null?void 0:R.length)||0;return a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 2fr",gap:"1rem",padding:"1rem",borderBottom:"1px solid var(--kb-gray-100)",alignItems:"center"},children:[a.jsxs("div",{children:[a.jsxs("div",{style:{fontFamily:"monospace",fontSize:"0.85rem",color:"var(--kb-gray-500)",wordBreak:"break-all"},children:[_.id.substring(0,16),"..."]}),_.lastCheckin&&a.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-400)",display:"flex",alignItems:"center",gap:"0.25rem",marginTop:"0.25rem"},children:[a.jsx(bf,{size:12}),"Last: ",((U=(z=(K=_.lastCheckin)==null?void 0:K.toDate)==null?void 0:z.call(K))==null?void 0:U.toLocaleDateString())||"Unknown"]})]}),a.jsxs("div",{children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:C,fontWeight:"600"},children:[a.jsx(I,{size:20}),M.name]}),a.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:[Math.round(M.bonus*100),"% bonus"]})]}),a.jsxs("div",{children:[a.jsxs("div",{style:{fontWeight:"600",color:"var(--kb-navy)",display:"flex",alignItems:"center",gap:"0.25rem"},children:[a.jsx(Vs,{size:16}),_.totalCheckins||0]}),a.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:"check-ins"})]}),a.jsxs("div",{children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",marginBottom:"0.5rem",color:"var(--kb-gray-600)"},children:[a.jsx(Oo,{size:14}),a.jsx("span",{style:{fontWeight:"500"},children:D}),a.jsx("span",{style:{fontSize:"0.85rem"},children:"businesses"})]}),((A=_.businessesVisited)==null?void 0:A.length)>0&&a.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.25rem"},children:[_.businessesVisited.slice(0,3).map(E=>a.jsx("span",{style:{fontSize:"0.75rem",padding:"0.15rem 0.5rem",background:"var(--kb-gray-100)",borderRadius:"4px",color:"var(--kb-gray-600)"},children:g(E)},E)),_.businessesVisited.length>3&&a.jsxs("span",{style:{fontSize:"0.75rem",color:"var(--kb-gray-400)"},children:["+",_.businessesVisited.length-3," more"]})]})]})]},_.id)})]})}),a.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"var(--kb-gray-50)",borderRadius:"8px",textAlign:"center",color:"var(--kb-gray-600)",fontSize:"0.9rem"},children:["Total of ",a.jsx("strong",{children:S.totalCheckins})," check-ins across ",a.jsx("strong",{children:S.total})," members"]})]})}const Bp={admin:{label:"Admin",color:"#dc2626",bgColor:"#fef2f2",Icon:Oh,description:"Full system access"},business:{label:"Business",color:"#2563eb",bgColor:"#eff6ff",Icon:Nt,description:"Business owner access"},member:{label:"Member",color:"var(--kb-green)",bgColor:"#f0fdf4",Icon:Ga,description:"Regular member"}};function eB(){const[n,e]=j.useState([]),[t,r]=j.useState([]),[s,l]=j.useState(!0),[c,f]=j.useState(""),[d,m]=j.useState("all"),[g,y]=j.useState(null),[x,S]=j.useState(null),[_,I]=j.useState(""),C=async()=>{const[U,A]=await Promise.all([q4(),Bi()]);e(U),r(A),l(!1)};j.useEffect(()=>{C()},[]);const M=async(U,A)=>{try{await H4(U,A),I("Role updated successfully"),setTimeout(()=>I(""),3e3),await C(),y(null)}catch(E){console.error("Error updating role:",E),alert("Error updating role")}},D=async(U,A)=>{try{await K4(U,A),I("Business assigned successfully"),setTimeout(()=>I(""),3e3),await C(),S(null)}catch(E){console.error("Error assigning business:",E),alert("Error assigning business")}},R=n.filter(U=>{var N,V;const A=((N=U.email)==null?void 0:N.toLowerCase().includes(c.toLowerCase()))||((V=U.displayName)==null?void 0:V.toLowerCase().includes(c.toLowerCase())),E=d==="all"||U.role===d;return A&&E}),K={total:n.length,admins:n.filter(U=>U.role==="admin").length,businesses:n.filter(U=>U.role==="business").length,members:n.filter(U=>U.role==="member").length},z=U=>U?(U.toDate?U.toDate():new Date(U)).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Never";return s?a.jsx(un,{title:"User Management",children:a.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:a.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading..."})})}):a.jsxs(un,{title:"User Management",children:[_&&a.jsxs("div",{style:{position:"fixed",top:"100px",right:"2rem",background:"var(--kb-green)",color:"white",padding:"1rem 1.5rem",borderRadius:"8px",display:"flex",alignItems:"center",gap:"0.75rem",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:1e3},children:[a.jsx(kr,{size:20}),a.jsx("span",{children:_})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[a.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:K.total}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Users"})]}),a.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"#dc2626"},children:K.admins}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Admins"})]}),a.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"#2563eb"},children:K.businesses}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Businesses"})]}),a.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-green)"},children:K.members}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Members"})]})]}),a.jsx("div",{className:"card",style:{marginBottom:"2rem"},children:a.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap",alignItems:"center"},children:[a.jsxs("div",{style:{flex:1,minWidth:"200px",position:"relative"},children:[a.jsx(TV,{size:18,color:"var(--kb-gray-400)",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)"}}),a.jsx("input",{type:"text",placeholder:"Search by name or email...",value:c,onChange:U=>f(U.target.value),style:{width:"100%",paddingLeft:"40px"}})]}),a.jsxs("select",{value:d,onChange:U=>m(U.target.value),style:{minWidth:"150px"},children:[a.jsx("option",{value:"all",children:"All Roles"}),a.jsx("option",{value:"admin",children:"Admins"}),a.jsx("option",{value:"business",children:"Businesses"}),a.jsx("option",{value:"member",children:"Members"})]})]})}),a.jsxs("div",{className:"card",children:[a.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(Er,{size:20})," All Users (",R.length,")"]}),R.length===0?a.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[a.jsx(Er,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),a.jsx("p",{children:"No users found"})]}):a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:R.map(U=>{const A=Bp[U.role]||Bp.member,E=A.Icon;return a.jsx("div",{style:{background:"var(--kb-gray-50)",border:"1px solid var(--kb-gray-200)",borderRadius:"12px",padding:"1.25rem"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"1rem"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[a.jsx("div",{style:{width:"48px",height:"48px",background:A.bgColor,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(E,{size:24,color:A.color})}),a.jsxs("div",{children:[a.jsxs("div",{style:{fontWeight:"600",color:"var(--kb-navy)",fontSize:"1.05rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[U.displayName||"Unnamed User",U.role==="admin"&&a.jsx(zn,{size:16,color:"#c9a227"})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:[a.jsx(pE,{size:14}),U.email]}),U.businessCode&&a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#2563eb",fontSize:"0.85rem",marginTop:"0.25rem"},children:[a.jsx(Nt,{size:14}),U.businessCode]})]})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[a.jsx("div",{style:{padding:"0.4rem 0.8rem",background:A.bgColor,color:A.color,borderRadius:"6px",fontSize:"0.85rem",fontWeight:"600"},children:A.label}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:[a.jsx(bf,{size:14}),z(U.lastLogin)]}),a.jsxs("div",{style:{position:"relative"},children:[a.jsx("button",{onClick:()=>y(g===U.id?null:U.id),className:"btn btn-secondary",style:{padding:"0.5rem"},children:a.jsx(FD,{size:18})}),g===U.id&&a.jsxs("div",{style:{position:"absolute",right:0,top:"100%",marginTop:"0.5rem",background:"white",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:100,minWidth:"180px",overflow:"hidden"},children:[a.jsx("div",{style:{padding:"0.75rem",borderBottom:"1px solid var(--kb-gray-200)"},children:a.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)",marginBottom:"0.25rem"},children:"Change Role"})}),Object.entries(Bp).map(([N,V])=>a.jsxs("button",{onClick:()=>M(U.id,N),style:{display:"flex",alignItems:"center",gap:"0.5rem",width:"100%",padding:"0.75rem 1rem",border:"none",background:U.role===N?V.bgColor:"transparent",color:"var(--kb-gray-700)",cursor:"pointer",textAlign:"left"},children:[a.jsx(V.Icon,{size:16,color:V.color}),V.label,U.role===N&&a.jsx(kr,{size:14,color:V.color,style:{marginLeft:"auto"}})]},N)),(U.role==="business"||U.role==="admin")&&a.jsxs(a.Fragment,{children:[a.jsx("div",{style:{borderTop:"1px solid var(--kb-gray-200)"}}),a.jsxs("button",{onClick:()=>{y(null),S(U.id)},style:{display:"flex",alignItems:"center",gap:"0.5rem",width:"100%",padding:"0.75rem 1rem",border:"none",background:"transparent",color:"#2563eb",cursor:"pointer",textAlign:"left"},children:[a.jsx(Nt,{size:16}),U.businessCode?"Change Business":"Assign Business"]})]})]})]})]})]})},U.id)})})]}),x&&a.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:1e3},children:a.jsxs("div",{className:"card",style:{maxWidth:"400px",width:"100%",padding:"1.5rem"},children:[a.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Assign Business"}),a.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1rem"},children:"Select a business to assign to this user:"}),a.jsx("div",{style:{maxHeight:"300px",overflowY:"auto",marginBottom:"1rem"},children:t.map(U=>a.jsxs("button",{onClick:()=>D(x,U.code),style:{display:"flex",alignItems:"center",gap:"0.75rem",width:"100%",padding:"0.75rem",border:"1px solid var(--kb-gray-200)",borderRadius:"8px",background:"white",cursor:"pointer",marginBottom:"0.5rem",textAlign:"left"},children:[a.jsx(Nt,{size:18,color:"var(--kb-navy)"}),a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:U.name}),a.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:U.code})]})]},U.code))}),a.jsx("button",{onClick:()=>S(null),className:"btn btn-secondary",style:{width:"100%"},children:"Cancel"})]})})]})}const ub={curious:Jt,hooked:rr,lineAndSinker:nr,patron:zn},db={curious:"#6b7280",hooked:"#16a34a",lineAndSinker:"#2563eb",patron:"#ca8a04"};function tB(){const{businessCode:n}=Qg(),[e,t]=j.useState(null),[r,s]=j.useState([]),[l,c]=j.useState(!0),[f,d]=j.useState(!1);j.useEffect(()=>{async function I(){const[C,M]=await Promise.all([L0(n),kT(n)]);t(C),s(M),c(!1)}I()},[n]);const m=()=>{const I=`https://harmonicsystems.github.io/kinderbucks/#/checkin/${n}`;navigator.clipboard.writeText(I),d(!0),setTimeout(()=>d(!1),2e3)},g=r.filter(I=>{var D;const C=(D=I.timestamp)!=null&&D.toDate?I.timestamp.toDate():new Date(I.timestamp),M=new Date;return C.toDateString()===M.toDateString()}).length,y=r.filter(I=>{var D;const C=(D=I.timestamp)!=null&&D.toDate?I.timestamp.toDate():new Date(I.timestamp),M=new Date;return M.setDate(M.getDate()-7),C>M}).length,x=new Set(r.map(I=>I.visitorId)).size,S=r.reduce((I,C)=>{const M=C.memberTier||"curious";return I[M]=(I[M]||0)+1,I},{});if(l)return a.jsx(un,{title:"Business Details",children:a.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:a.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading..."})})});if(!e)return a.jsx(un,{title:"Business Details",children:a.jsxs("div",{style:{textAlign:"center",padding:"4rem"},children:[a.jsx(Nt,{size:48,color:"var(--kb-gray-300)",style:{marginBottom:"1rem"}}),a.jsx("h2",{style:{color:"var(--kb-navy)"},children:"Business Not Found"}),a.jsxs("p",{style:{color:"var(--kb-gray-500)",marginBottom:"1.5rem"},children:['No business with code "',n,'" exists.']}),a.jsx(ue,{to:"/admin/businesses",className:"btn btn-primary",children:"Back to Businesses"})]})});const _=`https://harmonicsystems.github.io/kinderbucks/#/checkin/${n}`;return a.jsxs(un,{title:"Business Details",children:[a.jsxs(ue,{to:"/admin/businesses",style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",color:"var(--kb-gray-500)",marginBottom:"1.5rem",fontSize:"0.9rem"},children:[a.jsx(nD,{size:16})," Back to Directory"]}),a.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",flexWrap:"wrap",gap:"1.5rem",marginBottom:"2rem"},children:[a.jsxs("div",{children:[a.jsx("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.25rem 0.75rem",background:e.isActive?"rgba(39, 174, 96, 0.1)":"rgba(231, 76, 60, 0.1)",color:e.isActive?"var(--kb-green)":"#e74c3c",borderRadius:"6px",fontSize:"0.85rem",fontWeight:"600",marginBottom:"0.75rem"},children:e.isActive?"Active":"Inactive"}),a.jsx("h1",{style:{color:"var(--kb-navy)",marginBottom:"0.25rem",fontSize:"2rem"},children:e.name}),a.jsx("div",{style:{fontFamily:"monospace",color:"var(--kb-gray-500)"},children:n})]}),a.jsxs("div",{className:"card",style:{padding:"1.5rem",textAlign:"center"},children:[a.jsx("div",{style:{background:"white",borderRadius:"12px",padding:"12px",marginBottom:"1rem"},children:a.jsx(ll,{value:_,size:120,showFrame:!1})}),a.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[a.jsxs("button",{onClick:m,className:"btn btn-secondary",style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.25rem",fontSize:"0.85rem"},children:[a.jsx(n0,{size:14})," ",f?"Copied!":"Copy URL"]}),a.jsxs("button",{onClick:()=>window.print(),className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"0.85rem"},children:[a.jsx(hE,{size:14})," Print"]})]})]})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[a.jsx("div",{className:"card",style:{padding:"1.25rem"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[a.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(39, 174, 96, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(Vs,{size:22,color:"var(--kb-green)"})}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:e.checkinCount||0}),a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Total Check-ins"})]})]})}),a.jsx("div",{className:"card",style:{padding:"1.25rem"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[a.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(52, 152, 219, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(Zr,{size:22,color:"#3498db"})}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:g}),a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Today"})]})]})}),a.jsx("div",{className:"card",style:{padding:"1.25rem"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[a.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(155, 89, 182, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(bf,{size:22,color:"#9b59b6"})}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:y}),a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"This Week"})]})]})}),a.jsx("div",{className:"card",style:{padding:"1.25rem"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[a.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(201, 162, 39, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(Er,{size:22,color:"var(--kb-gold-dark)"})}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:x}),a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Unique Visitors"})]})]})})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem"},children:[a.jsxs("div",{className:"card",children:[a.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem"},children:"Check-ins by Member Tier"}),Object.keys(S).length===0?a.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"No check-ins yet"}):a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:["curious","hooked","lineAndSinker","patron"].map(I=>{const C=S[I]||0;if(C===0&&!S[I])return null;const M=ub[I],D=db[I],R={curious:"Curious",hooked:"Hooked",lineAndSinker:"Line & Sinker",patron:"Village Patron"},K=Math.max(...Object.values(S),1),z=C/K*100;return a.jsxs("div",{children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.5rem"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(M,{size:18,color:D}),a.jsx("span",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:R[I]})]}),a.jsx("span",{style:{color:"var(--kb-gray-500)",fontWeight:"600"},children:C})]}),a.jsx("div",{style:{height:"8px",background:"var(--kb-gray-100)",borderRadius:"4px",overflow:"hidden"},children:a.jsx("div",{style:{width:`${z}%`,height:"100%",background:D,borderRadius:"4px"}})})]},I)}).filter(Boolean)})]}),a.jsxs("div",{className:"card",children:[a.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Check-in Information"}),a.jsxs("div",{style:{marginBottom:"1rem"},children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontSize:"0.85rem"},children:"Check-in URL"}),a.jsx("input",{type:"text",value:_,readOnly:!0,style:{width:"100%",fontFamily:"monospace",fontSize:"0.85rem"}})]}),a.jsxs("div",{style:{background:"var(--kb-cream)",borderRadius:"8px",padding:"1rem"},children:[a.jsx("h4",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem",fontSize:"0.95rem"},children:"How Check-ins Work"}),a.jsxs("ul",{style:{color:"var(--kb-gray-600)",fontSize:"0.9rem",paddingLeft:"1.25rem",lineHeight:1.6},children:[a.jsx("li",{children:"Customer scans QR code with phone"}),a.jsx("li",{children:"App shows verification code + bonus %"}),a.jsx("li",{children:"Customer shows screen to cashier"}),a.jsx("li",{children:"1 hour cooldown between check-ins"})]})]})]})]}),a.jsxs("div",{className:"card",style:{marginTop:"1.5rem"},children:[a.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(Zr,{size:20})," Recent Check-ins"]}),r.length===0?a.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[a.jsx(Er,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),a.jsx("p",{children:"No check-ins recorded yet"})]}):a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:r.slice(0,25).map((I,C)=>{var K,z;const M=(K=I.timestamp)!=null&&K.toDate?I.timestamp.toDate():new Date(I.timestamp),D=ub[I.memberTier]||Jt,R=db[I.memberTier]||"#6b7280";return a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"var(--kb-gray-50)",borderRadius:"8px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[a.jsx("div",{style:{width:"36px",height:"36px",background:"var(--kb-green)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(kr,{size:18,color:"white"})}),a.jsxs("div",{children:[a.jsxs("div",{style:{fontWeight:"500",color:"var(--kb-navy)",display:"flex",alignItems:"center",gap:"0.5rem"},children:["Check-in",I.memberTier&&a.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",fontSize:"0.75rem",color:R,background:`${R}15`,padding:"0.125rem 0.5rem",borderRadius:"4px"},children:[a.jsx(D,{size:12}),I.memberTier]})]}),a.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)",fontFamily:"monospace"},children:[(z=I.visitorId)==null?void 0:z.substring(0,8),"..."]})]})]}),a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:M.toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]},I.id||C)})})]})]})}const nB="AIzaSyBTfW1zXwDOYJGEZ7ktRsLNowGvFewLKj0",rB={lat:42.3951,lng:-73.6977},bT={AVIARY:{address:"4 Hudson Street, Kinderhook, NY 12106",phone:"(518) 610-8543",website:"https://theaviarykinderhook.com",hours:{monday:"Closed",tuesday:"Closed",wednesday:"5:00 PM - 9:00 PM",thursday:"5:00 PM - 9:00 PM",friday:"5:00 PM - 10:00 PM",saturday:"5:00 PM - 10:00 PM",sunday:"5:00 PM - 9:00 PM"}},MORNINGBIRD:{address:"4 Hudson Street, Kinderhook, NY 12106",phone:"(518) 610-8543",website:"https://theaviarykinderhook.com/morningbird",hours:{monday:"Closed",tuesday:"8:00 AM - 3:00 PM",wednesday:"8:00 AM - 3:00 PM",thursday:"8:00 AM - 3:00 PM",friday:"8:00 AM - 3:00 PM",saturday:"8:00 AM - 3:00 PM",sunday:"8:00 AM - 3:00 PM"}},SAISONNIER:{address:"11 Chatham Street, Kinderhook, NY 12106",phone:"(518) 610-8100",website:"https://www.saisonnier.us",hours:{monday:"Closed",tuesday:"Closed",wednesday:"5:00 PM - 9:00 PM",thursday:"5:00 PM - 9:00 PM",friday:"5:00 PM - 10:00 PM",saturday:"11:30 AM - 2:30 PM, 5:00 PM - 10:00 PM",sunday:"11:30 AM - 2:30 PM, 5:00 PM - 9:00 PM"}},"BROADST-BAGEL":{address:"1 Broad Street, Kinderhook, NY 12106",phone:"(518) 758-8084",website:"https://broadstreetbagelco.com",hours:{monday:"7:00 AM - 2:00 PM",tuesday:"7:00 AM - 2:00 PM",wednesday:"7:00 AM - 2:00 PM",thursday:"7:00 AM - 2:00 PM",friday:"7:00 AM - 2:00 PM",saturday:"7:00 AM - 2:00 PM",sunday:"8:00 AM - 1:00 PM"}},"BOTTLE-SHOP":{address:"8 Hudson Street, Kinderhook, NY 12106",phone:"(518) 610-8111",website:"https://kinderhookbottleshop.com",hours:{monday:"12:00 PM - 7:00 PM",tuesday:"12:00 PM - 7:00 PM",wednesday:"12:00 PM - 7:00 PM",thursday:"12:00 PM - 7:00 PM",friday:"12:00 PM - 8:00 PM",saturday:"11:00 AM - 8:00 PM",sunday:"12:00 PM - 5:00 PM"}},"OLD-DUTCH":{address:"8 Broad Street, Kinderhook, NY 12106",phone:"(518) 203-3347",website:"https://theolddutchinn.com",hours:{monday:"Closed",tuesday:"Closed",wednesday:"5:00 PM - 9:00 PM",thursday:"5:00 PM - 9:00 PM",friday:"5:00 PM - 10:00 PM",saturday:"11:00 AM - 10:00 PM",sunday:"11:00 AM - 8:00 PM"}},SAMASCOTTS:{address:"65 Chatham Street, Kinderhook, NY 12106",phone:"(518) 758-9292",website:"https://www.samascott.com/gardenmarket",hours:{monday:"9:00 AM - 6:00 PM",tuesday:"9:00 AM - 6:00 PM",wednesday:"9:00 AM - 6:00 PM",thursday:"9:00 AM - 6:00 PM",friday:"9:00 AM - 6:00 PM",saturday:"9:00 AM - 6:00 PM",sunday:"9:00 AM - 5:00 PM"}},"SAMASCOTT-ORCHARDS":{address:"5 Sunset Avenue, Kinderhook, NY 12106",phone:"(518) 758-7224",website:"https://www.samascott.com",hours:{monday:"9:00 AM - 6:00 PM",tuesday:"9:00 AM - 6:00 PM",wednesday:"9:00 AM - 6:00 PM",thursday:"9:00 AM - 6:00 PM",friday:"9:00 AM - 6:00 PM",saturday:"9:00 AM - 6:00 PM",sunday:"9:00 AM - 5:00 PM"}},"SCHOOL-GALLERY":{address:"25 Broad Street, Kinderhook, NY 12106",phone:"(518) 758-1620",website:"https://jackshainman.com/the_school",hours:{monday:"Closed",tuesday:"Closed",wednesday:"11:00 AM - 6:00 PM",thursday:"11:00 AM - 6:00 PM",friday:"11:00 AM - 6:00 PM",saturday:"11:00 AM - 6:00 PM",sunday:"Closed"}},Isola:{address:"16 Hudson Street, Kinderhook, NY 12106",phone:"(518) 610-8202",website:"isolawinebar.com",hours:{monday:"Closed",tuesday:"Closed",wednesday:"4:00 PM - 9:00 PM",thursday:"4:00 PM - 9:00 PM",friday:"4:00 PM - 10:00 PM",saturday:"12:00 PM - 10:00 PM",sunday:"12:00 PM - 8:00 PM"}},"VILLAGE-YOGA":{address:"6 Hudson Street, 2nd Floor, Kinderhook, NY 12106",phone:"(518) 610-8135",website:"https://villageyoga.co",hours:{monday:"9:00 AM - 7:00 PM",tuesday:"9:00 AM - 7:00 PM",wednesday:"9:00 AM - 7:00 PM",thursday:"9:00 AM - 7:00 PM",friday:"9:00 AM - 5:00 PM",saturday:"9:00 AM - 12:00 PM",sunday:"Closed"}},"WALSH-DENTISTRY":{address:"3 Hudson Street, 2nd Floor, Kinderhook, NY 12106",phone:"(518) 758-7071",website:"https://walshdentistry.com",hours:{monday:"8:00 AM - 5:00 PM",tuesday:"8:00 AM - 5:00 PM",wednesday:"8:00 AM - 5:00 PM",thursday:"8:00 AM - 5:00 PM",friday:"8:00 AM - 3:00 PM",saturday:"Closed",sunday:"Closed"}},"FEED-SEED":{address:"22 Hudson Street, Kinderhook, NY 12106",hours:{monday:"9:00 AM - 5:00 PM",tuesday:"9:00 AM - 5:00 PM",wednesday:"9:00 AM - 5:00 PM",thursday:"9:00 AM - 5:00 PM",friday:"9:00 AM - 5:00 PM",saturday:"9:00 AM - 4:00 PM",sunday:"Closed"}}};function ks(n){if(!n)return null;const e=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],t=new Date,r=e[t.getDay()],s=n[r];if(!s||s==="Closed")return!1;const l=s.match(/(\d+):(\d+)\s*(AM|PM)/gi);if(!l||l.length<2)return null;const c=t.getHours(),f=t.getMinutes(),d=c*60+f,m=s.match(/(\d+):(\d+)\s*(AM|PM)/i);if(m){let g=parseInt(m[1]);const y=parseInt(m[2]),x=m[3].toUpperCase();x==="PM"&&g!==12&&(g+=12),x==="AM"&&g===12&&(g=0);const S=g*60+y,_=s.match(/(\d+):(\d+)\s*(AM|PM)/gi);if(_&&_.length>=2){const I=_[_.length-1].match(/(\d+):(\d+)\s*(AM|PM)/i);if(I){let C=parseInt(I[1]);const M=parseInt(I[2]),D=I[3].toUpperCase();D==="PM"&&C!==12&&(C+=12),D==="AM"&&C===12&&(C=0);const R=C*60+M;return d>=S&&d<R}}}return null}function _T(n){if(!n)return"Hours not available";const r=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][new Date().getDay()];return n[r]||"Hours not available"}function iB({businesses:n=[],onBusinessClick:e,showOpenOnly:t=!1}){const r=j.useRef(null),s=j.useRef(null),l=j.useRef([]),c=j.useRef(null),[f,d]=j.useState(null),[m,g]=j.useState(!1),[y,x]=j.useState(null),[S,_]=j.useState([]),[I,C]=j.useState(""),M=n.map(R=>({...R,...bT[R.code]})).filter(R=>R.address),D=t?S.filter(R=>ks(R.hours)):S;return j.useEffect(()=>{var K;if((K=window.google)!=null&&K.maps){g(!0);return}const R=document.createElement("script");R.src=`https://maps.googleapis.com/maps/api/js?key=${nB}&libraries=places`,R.async=!0,R.defer=!0,R.onload=()=>g(!0),R.onerror=()=>x("Failed to load Google Maps"),document.head.appendChild(R)},[]),j.useEffect(()=>{if(!(!m||!r.current||s.current))try{s.current=new window.google.maps.Map(r.current,{center:rB,zoom:16,styles:[{featureType:"poi.business",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"labels.icon",stylers:[{visibility:"off"}]}],mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!0}),c.current=new window.google.maps.places.PlacesService(s.current)}catch{x("Failed to initialize map")}},[m]),j.useEffect(()=>{if(!m||!c.current||M.length===0)return;const R=z=>new Promise(U=>{const A={query:`${z.name} Kinderhook NY`,fields:["name","geometry","formatted_address"]};c.current.findPlaceFromQuery(A,(E,N)=>{N===window.google.maps.places.PlacesServiceStatus.OK&&E[0]?U({...z,location:{lat:E[0].geometry.location.lat(),lng:E[0].geometry.location.lng()},foundAddress:E[0].formatted_address}):new window.google.maps.Geocoder().geocode({address:z.address},(B,$)=>{$==="OK"&&B[0]?U({...z,location:{lat:B[0].geometry.location.lat(),lng:B[0].geometry.location.lng()}}):(console.warn(`Could not locate: ${z.name}`),U(null))})})});(async()=>{C("Finding businesses...");const z=[];for(let U=0;U<M.length;U++){const A=M[U];C(`Locating ${A.name}...`),U>0&&await new Promise(N=>setTimeout(N,200));const E=await R(A);E&&z.push(E)}_(z),C("")})()},[m,M.length]),j.useEffect(()=>{if(!(!s.current||!m)&&(l.current.forEach(R=>R.setMap(null)),l.current=[],D.length!==0&&(D.forEach(R=>{if(!R.location)return;const K=ks(R.hours),z=new window.google.maps.Marker({position:R.location,map:s.current,title:R.name,icon:{path:window.google.maps.SymbolPath.CIRCLE,scale:12,fillColor:K===!0?"#27ae60":K===!1?"#95a5a6":"#c9a227",fillOpacity:1,strokeColor:"#ffffff",strokeWeight:3}});z.addListener("click",()=>{d(R),e&&e(R)}),l.current.push(z)}),D.length>0))){const R=new window.google.maps.LatLngBounds;D.forEach(z=>{z.location&&R.extend(z.location)}),s.current.fitBounds(R,{padding:50});const K=s.current.addListener("idle",()=>{s.current.getZoom()>17&&s.current.setZoom(17),window.google.maps.event.removeListener(K)})}},[D,m,e]),y?a.jsxs("div",{style:{background:"var(--kb-gray-100)",borderRadius:"12px",padding:"3rem",textAlign:"center",color:"var(--kb-gray-500)"},children:[a.jsx(Oo,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),a.jsx("p",{children:y})]}):a.jsxs("div",{style:{position:"relative"},children:[a.jsx("div",{ref:r,style:{width:"100%",height:"400px",borderRadius:"12px",overflow:"hidden",background:"var(--kb-gray-100)"},children:!m&&a.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"var(--kb-gray-500)"},children:"Loading map..."})}),I&&a.jsx("div",{style:{position:"absolute",top:"10px",left:"50%",transform:"translateX(-50%)",background:"white",padding:"0.5rem 1rem",borderRadius:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",fontSize:"0.85rem",color:"var(--kb-gray-600)",zIndex:10},children:I}),a.jsxs("div",{style:{display:"flex",gap:"1.5rem",justifyContent:"center",marginTop:"1rem",fontSize:"0.85rem",color:"var(--kb-gray-600)"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:"#27ae60"}}),"Open Now"]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:"#95a5a6"}}),"Closed"]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:"#c9a227"}}),"Hours Unknown"]})]}),S.length>0&&a.jsxs("div",{style:{textAlign:"center",marginTop:"0.5rem",fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:["Showing ",D.length," of ",S.length," businesses on map"]}),f&&a.jsxs("div",{style:{position:"absolute",bottom:"80px",left:"50%",transform:"translateX(-50%)",background:"white",borderRadius:"12px",padding:"1rem 1.25rem",boxShadow:"0 4px 20px rgba(0,0,0,0.15)",minWidth:"280px",maxWidth:"90%",zIndex:10},children:[a.jsx("button",{onClick:()=>d(null),style:{position:"absolute",top:"8px",right:"8px",background:"none",border:"none",fontSize:"1.25rem",cursor:"pointer",color:"var(--kb-gray-400)"},children:""}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[a.jsx("span",{style:{display:"inline-block",width:"8px",height:"8px",borderRadius:"50%",background:ks(f.hours)?"#27ae60":"#95a5a6"}}),a.jsx("span",{style:{fontSize:"0.75rem",color:ks(f.hours)?"#27ae60":"var(--kb-gray-500)",fontWeight:"600"},children:ks(f.hours)?"OPEN NOW":"CLOSED"})]}),a.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem",fontSize:"1.1rem"},children:f.name}),f.address&&a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem",color:"var(--kb-gray-600)",marginBottom:"0.25rem"},children:[a.jsx(Oo,{size:14}),f.address]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem",color:"var(--kb-gray-600)",marginBottom:"1rem"},children:[a.jsx(Zr,{size:14}),_T(f.hours)]}),f.address&&a.jsxs("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(f.address)}`,target:"_blank",rel:"noopener noreferrer",className:"btn btn-gold",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",fontSize:"0.85rem",padding:"0.5rem"},children:[a.jsx(gE,{size:14})," Get Directions"]})]})]})}const sB=42.3944,oB=-73.7059,hb={0:{icon:zw,description:"Clear sky",suggestion:"Perfect day to explore the village!"},1:{icon:zw,description:"Mainly clear",suggestion:"Great weather for a village stroll!"},2:{icon:Qd,description:"Partly cloudy",suggestion:"Nice day to visit local shops!"},3:{icon:Qd,description:"Overcast",suggestion:"Good day to cozy up at a cafe!"},45:{icon:Qd,description:"Foggy",suggestion:"Mysterious village vibes today!"},48:{icon:Qd,description:"Foggy",suggestion:"Grab a warm drink at a local cafe!"},51:{icon:xi,description:"Light drizzle",suggestion:"Pop into a shop to stay dry!"},53:{icon:xi,description:"Drizzle",suggestion:"Perfect excuse for a coffee break!"},55:{icon:xi,description:"Heavy drizzle",suggestion:"Browse the bookstore while it passes!"},61:{icon:xi,description:"Light rain",suggestion:"Duck into a local business!"},63:{icon:xi,description:"Rain",suggestion:"Great day for indoor shopping!"},65:{icon:xi,description:"Heavy rain",suggestion:"Stay cozy at a village restaurant!"},71:{icon:Pa,description:"Light snow",suggestion:"Beautiful! Warm up with hot cocoa!"},73:{icon:Pa,description:"Snow",suggestion:"Snow day! Explore the charming village!"},75:{icon:Pa,description:"Heavy snow",suggestion:"Cozy up at a local spot!"},77:{icon:Pa,description:"Snow grains",suggestion:"Winter wonderland vibes!"},80:{icon:xi,description:"Light showers",suggestion:"Quick visits between showers!"},81:{icon:xi,description:"Showers",suggestion:"Pop into shops along the way!"},82:{icon:xi,description:"Heavy showers",suggestion:"Find shelter at a cozy cafe!"},85:{icon:Pa,description:"Snow showers",suggestion:"Magical village views!"},86:{icon:Pa,description:"Heavy snow showers",suggestion:"Warm drinks are calling!"},95:{icon:vp,description:"Thunderstorm",suggestion:"Stay safe indoors!"},96:{icon:vp,description:"Thunderstorm with hail",suggestion:"Seek shelter in a shop!"},99:{icon:vp,description:"Severe thunderstorm",suggestion:"Stay safe inside!"}};function aB({compact:n=!1}){const[e,t]=j.useState(null),[r,s]=j.useState(!0),[l,c]=j.useState(null);if(j.useEffect(()=>{async function m(){var y,x,S,_;try{const I=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${sB}&longitude=${oB}&current=temperature_2m,relative_humidity_2m,weather_code,wind_speed_10m&daily=sunrise,sunset&temperature_unit=fahrenheit&wind_speed_unit=mph&timezone=America%2FNew_York`);if(!I.ok)throw new Error("Weather fetch failed");const C=await I.json(),M=(x=(y=C.daily)==null?void 0:y.sunrise)!=null&&x[0]?new Date(C.daily.sunrise[0]):null,D=(_=(S=C.daily)==null?void 0:S.sunset)!=null&&_[0]?new Date(C.daily.sunset[0]):null;t({temp:Math.round(C.current.temperature_2m),humidity:C.current.relative_humidity_2m,windSpeed:Math.round(C.current.wind_speed_10m),code:C.current.weather_code,sunrise:M,sunset:D}),s(!1)}catch(I){console.error("Weather error:",I),c("Could not load weather"),s(!1)}}m();const g=setInterval(m,1800*1e3);return()=>clearInterval(g)},[]),r)return a.jsx("div",{style:{background:"linear-gradient(135deg, #4a90d9 0%, #67b8e3 100%)",borderRadius:"12px",padding:n?"0.75rem 1rem":"1rem 1.25rem",color:"white",opacity:.7},children:"Loading weather..."});if(l||!e)return null;const f=hb[e.code]||hb[0],d=f.icon;return n?a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",background:"linear-gradient(135deg, #4a90d9 0%, #67b8e3 100%)",borderRadius:"10px",padding:"0.5rem 1rem",color:"white"},children:[a.jsx(d,{size:24}),a.jsxs("span",{style:{fontSize:"1.25rem",fontWeight:"700"},children:[e.temp,"F"]}),a.jsx("span",{style:{opacity:.9,fontSize:"0.85rem"},children:f.description})]}):a.jsxs("div",{style:{background:"linear-gradient(135deg, #4a90d9 0%, #67b8e3 100%)",borderRadius:"16px",padding:"1.25rem",color:"white"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.75rem"},children:[a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"0.8rem",opacity:.9,marginBottom:"0.25rem"},children:"Kinderhook, NY"}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsxs("span",{style:{fontSize:"2.5rem",fontWeight:"700",lineHeight:1},children:[e.temp,""]}),a.jsx("span",{style:{fontSize:"1rem"},children:"F"})]})]}),a.jsx(d,{size:56,strokeWidth:1.5})]}),a.jsx("div",{style:{fontSize:"1rem",fontWeight:"600",marginBottom:"0.5rem"},children:f.description}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem",fontSize:"0.8rem",opacity:.9,marginBottom:"1rem"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[a.jsx(BD,{size:14})," ",e.humidity,"%"]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[a.jsx(l3,{size:14})," ",e.windSpeed," mph"]}),e.sunrise&&a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[a.jsx(WV,{size:14})," ",e.sunrise.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})]}),e.sunset&&a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[a.jsx(HV,{size:14})," ",e.sunset.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})]})]}),a.jsx("div",{style:{background:"rgba(255,255,255,0.2)",borderRadius:"8px",padding:"0.75rem",fontSize:"0.9rem",fontStyle:"italic"},children:f.suggestion})]})}const zp=new Map;function lB({businessName:n,address:e,size:t="medium",style:r={}}){const[s,l]=j.useState(null),[c,f]=j.useState(!0),[d,m]=j.useState(!1),g={small:{width:80,height:80},medium:{width:150,height:100},large:{width:300,height:200}},{width:y,height:x}=g[t]||g.medium;j.useEffect(()=>{if(!n){f(!1),m(!0);return}const _=`${n}-${e}`;if(zp.has(_)){l(zp.get(_)),f(!1);return}const I=setInterval(()=>{var D,R;(R=(D=window.google)==null?void 0:D.maps)!=null&&R.places&&(clearInterval(I),M())},100),C=setTimeout(()=>{clearInterval(I),f(!1),m(!0)},5e3);async function M(){try{const D=document.createElement("div"),R=new window.google.maps.places.PlacesService(D),K=`${n} ${e||"Kinderhook NY"}`;R.findPlaceFromQuery({query:K,fields:["photos","place_id"]},(z,U)=>{var A,E;if(clearTimeout(C),U===window.google.maps.places.PlacesServiceStatus.OK&&((E=(A=z==null?void 0:z[0])==null?void 0:A.photos)==null?void 0:E.length)>0){const V=z[0].photos[0].getUrl({maxWidth:y*2,maxHeight:x*2});zp.set(_,V),l(V)}else m(!0);f(!1)})}catch(D){console.error("Place photo error:",D),m(!0),f(!1)}}return()=>{clearInterval(I),clearTimeout(C)}},[n,e,y,x]);const S={width:`${y}px`,height:`${x}px`,borderRadius:"8px",overflow:"hidden",background:"var(--kb-gray-100)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,...r};return c?a.jsxs("div",{style:S,children:[a.jsx("div",{style:{width:"24px",height:"24px",border:"2px solid var(--kb-gray-200)",borderTopColor:"var(--kb-navy)",borderRadius:"50%",animation:"spin 1s linear infinite"}}),a.jsx("style",{children:`
          @keyframes spin {
            to { transform: rotate(360deg); }
          }
        `})]}):d||!s?a.jsx("div",{style:{...S,background:"linear-gradient(135deg, var(--kb-gray-100) 0%, var(--kb-gray-200) 100%)"},children:a.jsx(Nt,{size:24,color:"var(--kb-gray-400)"})}):a.jsx("div",{style:S,children:a.jsx("img",{src:s,alt:n,style:{width:"100%",height:"100%",objectFit:"cover"},onError:()=>m(!0)})})}function cB(){const[n,e]=j.useState([]),[t,r]=j.useState(!0),[s,l]=j.useState(!1),[c,f]=j.useState("all"),[d,m]=j.useState(!1);j.useEffect(()=>{async function C(){const M=await Bi();e(M.filter(D=>D.isActive)),r(!1)}C()},[]);const g=n.map(C=>({...C,...bT[C.code]})),y=g.filter(C=>!(!C.address||s&&!ks(C.hours)||c!=="all"&&C.category!==c)),x=g.filter(C=>C.address&&ks(C.hours)),S=()=>{const M=new Date().toLocaleDateString("en-US",{weekday:"long"}),D=x.map(R=>R.name).join(", ");return`What's open in Kinderhook this ${M}? ${x.length} businesses are ready to serve you: ${D}. Show your OK Member card for bonus discounts! #Kinderbucks #ShopLocal`},_=async()=>{const C=S();if(navigator.share)try{await navigator.share({title:"What's Open in Kinderhook",text:C})}catch{}else navigator.clipboard.writeText(C),m(!0),setTimeout(()=>m(!1),2e3)},I=[{key:"all",label:"All"},{key:"food",label:"Food & Drink"},{key:"retail",label:"Retail"},{key:"services",label:"Services"},{key:"arts",label:"Arts & Culture"}];return a.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[a.jsx(Sn,{}),a.jsxs("main",{style:{flex:1,background:"var(--kb-cream)"},children:[a.jsx("section",{style:{background:"linear-gradient(135deg, var(--kb-navy) 0%, var(--kb-navy-light) 100%)",padding:"2rem 1rem",color:"white",textAlign:"center"},children:a.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[a.jsx("div",{className:"badge badge-gold",style:{marginBottom:"0.75rem"},children:"Village Directory"}),a.jsx("h1",{style:{marginBottom:"0.5rem"},children:"Explore Kinderhook"}),a.jsx("p",{style:{opacity:.8,maxWidth:"500px",margin:"0 auto"},children:"Find participating businesses, check hours, and earn rewards"})]})}),a.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto",padding:"2rem 1rem"},children:[a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[a.jsx(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:a.jsx(aB,{})}),a.jsx(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card",style:{background:"linear-gradient(135deg, var(--kb-green) 0%, #1e8449 100%)",color:"white"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"1rem"},children:[a.jsxs("div",{children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[a.jsx(Zr,{size:20}),a.jsx("span",{style:{fontWeight:"600"},children:"Open Right Now"})]}),a.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700"},children:[x.length," Businesses"]}),a.jsx("div",{style:{opacity:.9,fontSize:"0.9rem"},children:"Show your OK card for bonus discounts!"})]}),a.jsxs("button",{onClick:_,className:"btn",style:{background:"rgba(255,255,255,0.2)",color:"white",display:"flex",alignItems:"center",gap:"0.5rem"},children:[d?a.jsx(kr,{size:18}):a.jsx(AV,{size:18}),d?"Copied!":"Share"]})]})})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"1rem",marginBottom:"1.5rem"},children:[a.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:I.map(C=>a.jsx("button",{onClick:()=>f(C.key),className:"btn",style:{padding:"0.5rem 1rem",fontSize:"0.85rem",background:c===C.key?"var(--kb-navy)":"white",color:c===C.key?"white":"var(--kb-gray-600)",border:"1px solid var(--kb-gray-200)"},children:C.label},C.key))}),a.jsxs("button",{onClick:()=>l(!s),className:"btn",style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",fontSize:"0.85rem",background:s?"var(--kb-green)":"white",color:s?"white":"var(--kb-gray-600)",border:"1px solid var(--kb-gray-200)"},children:[a.jsx(KD,{size:16}),s?"Showing Open Only":"Show Open Only"]})]}),a.jsx(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},style:{marginBottom:"2rem"},children:t?a.jsx("div",{className:"card",style:{padding:"4rem",textAlign:"center",color:"var(--kb-gray-500)"},children:"Loading businesses..."}):a.jsx(iB,{businesses:c==="all"?n:n.filter(C=>C.category===c),showOpenOnly:s})}),a.jsxs("h2",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:[s?"Open Now":"All Businesses"," (",y.length,")"]}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"1rem"},children:y.map((C,M)=>{const D=ks(C.hours),R=_T(C.hours);return a.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:M*.05},className:"card",style:{padding:"1.25rem",overflow:"hidden"},children:[a.jsx("div",{style:{margin:"-1.25rem -1.25rem 1rem -1.25rem"},children:a.jsx(lB,{businessName:C.name,address:C.address,size:"large",style:{width:"100%",height:"120px",borderRadius:0}})}),a.jsxs("div",{style:{marginBottom:"0.75rem"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:[a.jsx("span",{style:{display:"inline-block",width:"8px",height:"8px",borderRadius:"50%",background:D?"#27ae60":"#95a5a6"}}),a.jsx("span",{style:{fontSize:"0.7rem",fontWeight:"600",color:D?"#27ae60":"var(--kb-gray-500)"},children:D?"OPEN NOW":"CLOSED"})]}),a.jsx("h3",{style:{color:"var(--kb-navy)",fontSize:"1.1rem",marginBottom:"0.25rem"},children:C.name})]}),C.address&&a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem",color:"var(--kb-gray-600)",marginBottom:"0.25rem"},children:[a.jsx(Oo,{size:14}),C.address]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem",color:"var(--kb-gray-600)",marginBottom:"0.5rem"},children:[a.jsx(Zr,{size:14}),"Today: ",R]}),C.phone&&a.jsxs("a",{href:`tel:${C.phone}`,style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem",color:"var(--kb-gray-600)",textDecoration:"none",marginBottom:"0.75rem"},children:[a.jsx(yV,{size:14}),C.phone]}),C.address&&a.jsxs("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(C.address)}`,target:"_blank",rel:"noopener noreferrer",className:"btn btn-gold",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",width:"100%",fontSize:"0.85rem",padding:"0.5rem"},children:[a.jsx(gE,{size:14})," Get Directions"]})]},C.code)})}),y.length===0&&!t&&a.jsxs("div",{className:"card",style:{padding:"3rem",textAlign:"center",color:"var(--kb-gray-500)"},children:[a.jsx(Nt,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),a.jsx("p",{children:"No businesses match your filters"}),a.jsx("button",{onClick:()=>{l(!1),f("all")},className:"btn btn-secondary",style:{marginTop:"1rem"},children:"Clear Filters"})]})]})]}),a.jsx(En,{})]})}function uB(){return a.jsx(Q4,{children:a.jsx(aA,{children:a.jsxs(LC,{children:[a.jsx(ht,{path:"/",element:a.jsx(K8,{})}),a.jsx(ht,{path:"/demo",element:a.jsx(J8,{})}),a.jsx(ht,{path:"/about",element:a.jsx(h9,{})}),a.jsx(ht,{path:"/benefits",element:a.jsx(m9,{})}),a.jsx(ht,{path:"/businesses",element:a.jsx(y9,{})}),a.jsx(ht,{path:"/map",element:a.jsx(cB,{})}),a.jsx(ht,{path:"/exchange",element:a.jsx(w9,{})}),a.jsx(ht,{path:"/login",element:a.jsx(_9,{})}),a.jsx(ht,{path:"/account",element:a.jsx(k9,{})}),a.jsx(ht,{path:"/profile",element:a.jsx(b9,{})}),a.jsx(ht,{path:"/card",element:a.jsx(T9,{})}),a.jsx(ht,{path:"/scan/:serial",element:a.jsx(N9,{})}),a.jsx(ht,{path:"/checkin/:businessCode",element:a.jsx(F9,{})}),a.jsx(ht,{path:"/business/dashboard",element:a.jsx(wi,{allowedRoles:["business","admin"],children:a.jsx(H9,{})})}),a.jsx(ht,{path:"/admin/dashboard",element:a.jsx(wi,{allowedRoles:["admin"],children:a.jsx(K9,{})})}),a.jsx(ht,{path:"/admin/exchanges",element:a.jsx(wi,{allowedRoles:["admin"],children:a.jsx(J9,{})})}),a.jsx(ht,{path:"/admin/members",element:a.jsx(wi,{allowedRoles:["admin"],children:a.jsx(Z9,{})})}),a.jsx(ht,{path:"/admin/generate",element:a.jsx(wi,{allowedRoles:["admin"],children:a.jsx(q9,{})})}),a.jsx(ht,{path:"/admin/issue",element:a.jsx(wi,{allowedRoles:["admin"],children:a.jsx(G9,{})})}),a.jsx(ht,{path:"/admin/businesses",element:a.jsx(wi,{allowedRoles:["admin"],children:a.jsx(Y9,{})})}),a.jsx(ht,{path:"/admin/businesses/:businessCode",element:a.jsx(wi,{allowedRoles:["admin"],children:a.jsx(tB,{})})}),a.jsx(ht,{path:"/admin/users",element:a.jsx(wi,{allowedRoles:["admin"],children:a.jsx(eB,{})})})]})})})}BI.createRoot(document.getElementById("root")).render(a.jsx(j.StrictMode,{children:a.jsx(uB,{})}));
