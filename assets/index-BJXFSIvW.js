(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();function XI(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var mp={exports:{}},Ac={},pp={exports:{}},He={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lx;function JI(){if(lx)return He;lx=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function x(H){return H===null||typeof H!="object"?null:(H=y&&H[y]||H["@@iterator"],typeof H=="function"?H:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,S={};function T(H,te,Ce){this.props=H,this.context=te,this.refs=S,this.updater=Ce||E}T.prototype.isReactComponent={},T.prototype.setState=function(H,te){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,te,"setState")},T.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function P(){}P.prototype=T.prototype;function M(H,te,Ce){this.props=H,this.context=te,this.refs=S,this.updater=Ce||E}var N=M.prototype=new P;N.constructor=M,k(N,T.prototype),N.isPureReactComponent=!0;var F=Array.isArray,$=Object.prototype.hasOwnProperty,K={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function j(H,te,Ce){var je,Oe={},Me=null,re=null;if(te!=null)for(je in te.ref!==void 0&&(re=te.ref),te.key!==void 0&&(Me=""+te.key),te)$.call(te,je)&&!A.hasOwnProperty(je)&&(Oe[je]=te[je]);var q=arguments.length-2;if(q===1)Oe.children=Ce;else if(1<q){for(var fe=Array(q),$e=0;$e<q;$e++)fe[$e]=arguments[$e+2];Oe.children=fe}if(H&&H.defaultProps)for(je in q=H.defaultProps,q)Oe[je]===void 0&&(Oe[je]=q[je]);return{$$typeof:n,type:H,key:Me,ref:re,props:Oe,_owner:K.current}}function D(H,te){return{$$typeof:n,type:H.type,key:te,ref:H.ref,props:H.props,_owner:H._owner}}function L(H){return typeof H=="object"&&H!==null&&H.$$typeof===n}function B(H){var te={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(Ce){return te[Ce]})}var U=/\/+/g;function V(H,te){return typeof H=="object"&&H!==null&&H.key!=null?B(""+H.key):te.toString(36)}function Ve(H,te,Ce,je,Oe){var Me=typeof H;(Me==="undefined"||Me==="boolean")&&(H=null);var re=!1;if(H===null)re=!0;else switch(Me){case"string":case"number":re=!0;break;case"object":switch(H.$$typeof){case n:case e:re=!0}}if(re)return re=H,Oe=Oe(re),H=je===""?"."+V(re,0):je,F(Oe)?(Ce="",H!=null&&(Ce=H.replace(U,"$&/")+"/"),Ve(Oe,te,Ce,"",function($e){return $e})):Oe!=null&&(L(Oe)&&(Oe=D(Oe,Ce+(!Oe.key||re&&re.key===Oe.key?"":(""+Oe.key).replace(U,"$&/")+"/")+H)),te.push(Oe)),1;if(re=0,je=je===""?".":je+":",F(H))for(var q=0;q<H.length;q++){Me=H[q];var fe=je+V(Me,q);re+=Ve(Me,te,Ce,fe,Oe)}else if(fe=x(H),typeof fe=="function")for(H=fe.call(H),q=0;!(Me=H.next()).done;)Me=Me.value,fe=je+V(Me,q++),re+=Ve(Me,te,Ce,fe,Oe);else if(Me==="object")throw te=String(H),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.");return re}function We(H,te,Ce){if(H==null)return H;var je=[],Oe=0;return Ve(H,je,"","",function(Me){return te.call(Ce,Me,Oe++)}),je}function rt(H){if(H._status===-1){var te=H._result;te=te(),te.then(function(Ce){(H._status===0||H._status===-1)&&(H._status=1,H._result=Ce)},function(Ce){(H._status===0||H._status===-1)&&(H._status=2,H._result=Ce)}),H._status===-1&&(H._status=0,H._result=te)}if(H._status===1)return H._result.default;throw H._result}var Te={current:null},se={transition:null},me={ReactCurrentDispatcher:Te,ReactCurrentBatchConfig:se,ReactCurrentOwner:K};function le(){throw Error("act(...) is not supported in production builds of React.")}return He.Children={map:We,forEach:function(H,te,Ce){We(H,function(){te.apply(this,arguments)},Ce)},count:function(H){var te=0;return We(H,function(){te++}),te},toArray:function(H){return We(H,function(te){return te})||[]},only:function(H){if(!L(H))throw Error("React.Children.only expected to receive a single React element child.");return H}},He.Component=T,He.Fragment=t,He.Profiler=s,He.PureComponent=M,He.StrictMode=r,He.Suspense=d,He.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=me,He.act=le,He.cloneElement=function(H,te,Ce){if(H==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+H+".");var je=k({},H.props),Oe=H.key,Me=H.ref,re=H._owner;if(te!=null){if(te.ref!==void 0&&(Me=te.ref,re=K.current),te.key!==void 0&&(Oe=""+te.key),H.type&&H.type.defaultProps)var q=H.type.defaultProps;for(fe in te)$.call(te,fe)&&!A.hasOwnProperty(fe)&&(je[fe]=te[fe]===void 0&&q!==void 0?q[fe]:te[fe])}var fe=arguments.length-2;if(fe===1)je.children=Ce;else if(1<fe){q=Array(fe);for(var $e=0;$e<fe;$e++)q[$e]=arguments[$e+2];je.children=q}return{$$typeof:n,type:H.type,key:Oe,ref:Me,props:je,_owner:re}},He.createContext=function(H){return H={$$typeof:c,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},H.Provider={$$typeof:l,_context:H},H.Consumer=H},He.createElement=j,He.createFactory=function(H){var te=j.bind(null,H);return te.type=H,te},He.createRef=function(){return{current:null}},He.forwardRef=function(H){return{$$typeof:h,render:H}},He.isValidElement=L,He.lazy=function(H){return{$$typeof:g,_payload:{_status:-1,_result:H},_init:rt}},He.memo=function(H,te){return{$$typeof:m,type:H,compare:te===void 0?null:te}},He.startTransition=function(H){var te=se.transition;se.transition={};try{H()}finally{se.transition=te}},He.unstable_act=le,He.useCallback=function(H,te){return Te.current.useCallback(H,te)},He.useContext=function(H){return Te.current.useContext(H)},He.useDebugValue=function(){},He.useDeferredValue=function(H){return Te.current.useDeferredValue(H)},He.useEffect=function(H,te){return Te.current.useEffect(H,te)},He.useId=function(){return Te.current.useId()},He.useImperativeHandle=function(H,te,Ce){return Te.current.useImperativeHandle(H,te,Ce)},He.useInsertionEffect=function(H,te){return Te.current.useInsertionEffect(H,te)},He.useLayoutEffect=function(H,te){return Te.current.useLayoutEffect(H,te)},He.useMemo=function(H,te){return Te.current.useMemo(H,te)},He.useReducer=function(H,te,Ce){return Te.current.useReducer(H,te,Ce)},He.useRef=function(H){return Te.current.useRef(H)},He.useState=function(H){return Te.current.useState(H)},He.useSyncExternalStore=function(H,te,Ce){return Te.current.useSyncExternalStore(H,te,Ce)},He.useTransition=function(){return Te.current.useTransition()},He.version="18.3.1",He}var cx;function ly(){return cx||(cx=1,pp.exports=JI()),pp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ux;function ZI(){if(ux)return Ac;ux=1;var n=ly(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(h,d,m){var g,y={},x=null,E=null;m!==void 0&&(x=""+m),d.key!==void 0&&(x=""+d.key),d.ref!==void 0&&(E=d.ref);for(g in d)r.call(d,g)&&!l.hasOwnProperty(g)&&(y[g]=d[g]);if(h&&h.defaultProps)for(g in d=h.defaultProps,d)y[g]===void 0&&(y[g]=d[g]);return{$$typeof:e,type:h,key:x,ref:E,props:y,_owner:s.current}}return Ac.Fragment=t,Ac.jsx=c,Ac.jsxs=c,Ac}var dx;function eC(){return dx||(dx=1,mp.exports=ZI()),mp.exports}var o=eC(),C=ly();const Qt=XI(C);var Jd={},gp={exports:{}},On={},yp={exports:{}},vp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hx;function tC(){return hx||(hx=1,(function(n){function e(se,me){var le=se.length;se.push(me);e:for(;0<le;){var H=le-1>>>1,te=se[H];if(0<s(te,me))se[H]=me,se[le]=te,le=H;else break e}}function t(se){return se.length===0?null:se[0]}function r(se){if(se.length===0)return null;var me=se[0],le=se.pop();if(le!==me){se[0]=le;e:for(var H=0,te=se.length,Ce=te>>>1;H<Ce;){var je=2*(H+1)-1,Oe=se[je],Me=je+1,re=se[Me];if(0>s(Oe,le))Me<te&&0>s(re,Oe)?(se[H]=re,se[Me]=le,H=Me):(se[H]=Oe,se[je]=le,H=je);else if(Me<te&&0>s(re,le))se[H]=re,se[Me]=le,H=Me;else break e}}return me}function s(se,me){var le=se.sortIndex-me.sortIndex;return le!==0?le:se.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,h=c.now();n.unstable_now=function(){return c.now()-h}}var d=[],m=[],g=1,y=null,x=3,E=!1,k=!1,S=!1,T=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(se){for(var me=t(m);me!==null;){if(me.callback===null)r(m);else if(me.startTime<=se)r(m),me.sortIndex=me.expirationTime,e(d,me);else break;me=t(m)}}function F(se){if(S=!1,N(se),!k)if(t(d)!==null)k=!0,rt($);else{var me=t(m);me!==null&&Te(F,me.startTime-se)}}function $(se,me){k=!1,S&&(S=!1,P(j),j=-1),E=!0;var le=x;try{for(N(me),y=t(d);y!==null&&(!(y.expirationTime>me)||se&&!B());){var H=y.callback;if(typeof H=="function"){y.callback=null,x=y.priorityLevel;var te=H(y.expirationTime<=me);me=n.unstable_now(),typeof te=="function"?y.callback=te:y===t(d)&&r(d),N(me)}else r(d);y=t(d)}if(y!==null)var Ce=!0;else{var je=t(m);je!==null&&Te(F,je.startTime-me),Ce=!1}return Ce}finally{y=null,x=le,E=!1}}var K=!1,A=null,j=-1,D=5,L=-1;function B(){return!(n.unstable_now()-L<D)}function U(){if(A!==null){var se=n.unstable_now();L=se;var me=!0;try{me=A(!0,se)}finally{me?V():(K=!1,A=null)}}else K=!1}var V;if(typeof M=="function")V=function(){M(U)};else if(typeof MessageChannel<"u"){var Ve=new MessageChannel,We=Ve.port2;Ve.port1.onmessage=U,V=function(){We.postMessage(null)}}else V=function(){T(U,0)};function rt(se){A=se,K||(K=!0,V())}function Te(se,me){j=T(function(){se(n.unstable_now())},me)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(se){se.callback=null},n.unstable_continueExecution=function(){k||E||(k=!0,rt($))},n.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<se?Math.floor(1e3/se):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(se){switch(x){case 1:case 2:case 3:var me=3;break;default:me=x}var le=x;x=me;try{return se()}finally{x=le}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(se,me){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var le=x;x=se;try{return me()}finally{x=le}},n.unstable_scheduleCallback=function(se,me,le){var H=n.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?H+le:H):le=H,se){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=le+te,se={id:g++,callback:me,priorityLevel:se,startTime:le,expirationTime:te,sortIndex:-1},le>H?(se.sortIndex=le,e(m,se),t(d)===null&&se===t(m)&&(S?(P(j),j=-1):S=!0,Te(F,le-H))):(se.sortIndex=te,e(d,se),k||E||(k=!0,rt($))),se},n.unstable_shouldYield=B,n.unstable_wrapCallback=function(se){var me=x;return function(){var le=x;x=me;try{return se.apply(this,arguments)}finally{x=le}}}})(vp)),vp}var fx;function nC(){return fx||(fx=1,yp.exports=tC()),yp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mx;function rC(){if(mx)return On;mx=1;var n=ly(),e=nC();function t(i){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+i,u=1;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function l(i,a){c(i,a),c(i+"Capture",a)}function c(i,a){for(s[i]=a,i=0;i<a.length;i++)r.add(a[i])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},y={};function x(i){return d.call(y,i)?!0:d.call(g,i)?!1:m.test(i)?y[i]=!0:(g[i]=!0,!1)}function E(i,a,u,p){if(u!==null&&u.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return p?!1:u!==null?!u.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function k(i,a,u,p){if(a===null||typeof a>"u"||E(i,a,u,p))return!0;if(p)return!1;if(u!==null)switch(u.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function S(i,a,u,p,v,b,I){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=p,this.attributeNamespace=v,this.mustUseProperty=u,this.propertyName=i,this.type=a,this.sanitizeURL=b,this.removeEmptyString=I}var T={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){T[i]=new S(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var a=i[0];T[a]=new S(a,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){T[i]=new S(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){T[i]=new S(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){T[i]=new S(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){T[i]=new S(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){T[i]=new S(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){T[i]=new S(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){T[i]=new S(i,5,!1,i.toLowerCase(),null,!1,!1)});var P=/[\-:]([a-z])/g;function M(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var a=i.replace(P,M);T[a]=new S(a,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var a=i.replace(P,M);T[a]=new S(a,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var a=i.replace(P,M);T[a]=new S(a,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){T[i]=new S(i,1,!1,i.toLowerCase(),null,!1,!1)}),T.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){T[i]=new S(i,1,!1,i.toLowerCase(),null,!0,!0)});function N(i,a,u,p){var v=T.hasOwnProperty(a)?T[a]:null;(v!==null?v.type!==0:p||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(k(a,u,v,p)&&(u=null),p||v===null?x(a)&&(u===null?i.removeAttribute(a):i.setAttribute(a,""+u)):v.mustUseProperty?i[v.propertyName]=u===null?v.type===3?!1:"":u:(a=v.attributeName,p=v.attributeNamespace,u===null?i.removeAttribute(a):(v=v.type,u=v===3||v===4&&u===!0?"":""+u,p?i.setAttributeNS(p,a,u):i.setAttribute(a,u))))}var F=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$=Symbol.for("react.element"),K=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),B=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),Ve=Symbol.for("react.suspense_list"),We=Symbol.for("react.memo"),rt=Symbol.for("react.lazy"),Te=Symbol.for("react.offscreen"),se=Symbol.iterator;function me(i){return i===null||typeof i!="object"?null:(i=se&&i[se]||i["@@iterator"],typeof i=="function"?i:null)}var le=Object.assign,H;function te(i){if(H===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);H=a&&a[1]||""}return`
`+H+i}var Ce=!1;function je(i,a){if(!i||Ce)return"";Ce=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(J){var p=J}Reflect.construct(i,[],a)}else{try{a.call()}catch(J){p=J}i.call(a.prototype)}else{try{throw Error()}catch(J){p=J}i()}}catch(J){if(J&&p&&typeof J.stack=="string"){for(var v=J.stack.split(`
`),b=p.stack.split(`
`),I=v.length-1,O=b.length-1;1<=I&&0<=O&&v[I]!==b[O];)O--;for(;1<=I&&0<=O;I--,O--)if(v[I]!==b[O]){if(I!==1||O!==1)do if(I--,O--,0>O||v[I]!==b[O]){var z=`
`+v[I].replace(" at new "," at ");return i.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",i.displayName)),z}while(1<=I&&0<=O);break}}}finally{Ce=!1,Error.prepareStackTrace=u}return(i=i?i.displayName||i.name:"")?te(i):""}function Oe(i){switch(i.tag){case 5:return te(i.type);case 16:return te("Lazy");case 13:return te("Suspense");case 19:return te("SuspenseList");case 0:case 2:case 15:return i=je(i.type,!1),i;case 11:return i=je(i.type.render,!1),i;case 1:return i=je(i.type,!0),i;default:return""}}function Me(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case A:return"Fragment";case K:return"Portal";case D:return"Profiler";case j:return"StrictMode";case V:return"Suspense";case Ve:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case B:return(i.displayName||"Context")+".Consumer";case L:return(i._context.displayName||"Context")+".Provider";case U:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case We:return a=i.displayName||null,a!==null?a:Me(i.type)||"Memo";case rt:a=i._payload,i=i._init;try{return Me(i(a))}catch{}}return null}function re(i){var a=i.type;switch(i.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=a.render,i=i.displayName||i.name||"",a.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Me(a);case 8:return a===j?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function q(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function fe(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function $e(i){var a=fe(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),p=""+i[a];if(!i.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var v=u.get,b=u.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return v.call(this)},set:function(I){p=""+I,b.call(this,I)}}),Object.defineProperty(i,a,{enumerable:u.enumerable}),{getValue:function(){return p},setValue:function(I){p=""+I},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function xt(i){i._valueTracker||(i._valueTracker=$e(i))}function Ht(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var u=a.getValue(),p="";return i&&(p=fe(i)?i.checked?"true":"false":i.value),i=p,i!==u?(a.setValue(i),!0):!1}function ht(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function jn(i,a){var u=a.checked;return le({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??i._wrapperState.initialChecked})}function An(i,a){var u=a.defaultValue==null?"":a.defaultValue,p=a.checked!=null?a.checked:a.defaultChecked;u=q(a.value!=null?a.value:u),i._wrapperState={initialChecked:p,initialValue:u,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function Rn(i,a){a=a.checked,a!=null&&N(i,"checked",a,!1)}function or(i,a){Rn(i,a);var u=q(a.value),p=a.type;if(u!=null)p==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+u):i.value!==""+u&&(i.value=""+u);else if(p==="submit"||p==="reset"){i.removeAttribute("value");return}a.hasOwnProperty("value")?at(i,a.type,u):a.hasOwnProperty("defaultValue")&&at(i,a.type,q(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(i.defaultChecked=!!a.defaultChecked)}function Yr(i,a,u){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var p=a.type;if(!(p!=="submit"&&p!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+i._wrapperState.initialValue,u||a===i.value||(i.value=a),i.defaultValue=a}u=i.name,u!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,u!==""&&(i.name=u)}function at(i,a,u){(a!=="number"||ht(i.ownerDocument)!==i)&&(u==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+u&&(i.defaultValue=""+u))}var lt=Array.isArray;function Hn(i,a,u,p){if(i=i.options,a){a={};for(var v=0;v<u.length;v++)a["$"+u[v]]=!0;for(u=0;u<i.length;u++)v=a.hasOwnProperty("$"+i[u].value),i[u].selected!==v&&(i[u].selected=v),v&&p&&(i[u].defaultSelected=!0)}else{for(u=""+q(u),a=null,v=0;v<i.length;v++){if(i[v].value===u){i[v].selected=!0,p&&(i[v].defaultSelected=!0);return}a!==null||i[v].disabled||(a=i[v])}a!==null&&(a.selected=!0)}}function X(i,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return le({},a,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function ye(i,a){var u=a.value;if(u==null){if(u=a.children,a=a.defaultValue,u!=null){if(a!=null)throw Error(t(92));if(lt(u)){if(1<u.length)throw Error(t(93));u=u[0]}a=u}a==null&&(a=""),u=a}i._wrapperState={initialValue:q(u)}}function Fe(i,a){var u=q(a.value),p=q(a.defaultValue);u!=null&&(u=""+u,u!==i.value&&(i.value=u),a.defaultValue==null&&i.defaultValue!==u&&(i.defaultValue=u)),p!=null&&(i.defaultValue=""+p)}function Ue(i){var a=i.textContent;a===i._wrapperState.initialValue&&a!==""&&a!==null&&(i.value=a)}function It(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Pn(i,a){return i==null||i==="http://www.w3.org/1999/xhtml"?It(a):i==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Xr,Bu=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,u,p,v){MSApp.execUnsafeLocalFunction(function(){return i(a,u,p,v)})}:i})(function(i,a){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=a;else{for(Xr=Xr||document.createElement("div"),Xr.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=Xr.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;a.firstChild;)i.appendChild(a.firstChild)}});function fo(i,a){if(a){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=a;return}}i.textContent=a}var cs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zu=["Webkit","ms","Moz","O"];Object.keys(cs).forEach(function(i){zu.forEach(function(a){a=a+i.charAt(0).toUpperCase()+i.substring(1),cs[a]=cs[i]})});function us(i,a,u){return a==null||typeof a=="boolean"||a===""?"":u||typeof a!="number"||a===0||cs.hasOwnProperty(i)&&cs[i]?(""+a).trim():a+"px"}function ca(i,a){i=i.style;for(var u in a)if(a.hasOwnProperty(u)){var p=u.indexOf("--")===0,v=us(u,a[u],p);u==="float"&&(u="cssFloat"),p?i.setProperty(u,v):i[u]=v}}var Fl=le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Tr(i,a){if(a){if(Fl[i]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function ua(i,a){if(i.indexOf("-")===-1)return typeof a.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ds=null;function da(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Si=null,Ei=null,Ct=null;function Ul(i){if(i=pc(i)){if(typeof Si!="function")throw Error(t(280));var a=i.stateNode;a&&(a=fd(a),Si(i.stateNode,i.type,a))}}function hs(i){Ei?Ct?Ct.push(i):Ct=[i]:Ei=i}function fs(){if(Ei){var i=Ei,a=Ct;if(Ct=Ei=null,Ul(i),a)for(i=0;i<a.length;i++)Ul(a[i])}}function Fu(i,a){return i(a)}function Uu(){}var Jr=!1;function Wu(i,a,u){if(Jr)return i(a,u);Jr=!0;try{return Fu(i,a,u)}finally{Jr=!1,(Ei!==null||Ct!==null)&&(Uu(),fs())}}function mo(i,a){var u=i.stateNode;if(u===null)return null;var p=fd(u);if(p===null)return null;u=p[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(i=i.type,p=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!p;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(t(231,a,typeof u));return u}var ms=!1;if(h)try{var ps={};Object.defineProperty(ps,"passive",{get:function(){ms=!0}}),window.addEventListener("test",ps,ps),window.removeEventListener("test",ps,ps)}catch{ms=!1}function $u(i,a,u,p,v,b,I,O,z){var J=Array.prototype.slice.call(arguments,3);try{a.apply(u,J)}catch(oe){this.onError(oe)}}var Ti=!1,Zr=null,ha=!1,ar=null,Hu={onError:function(i){Ti=!0,Zr=i}};function Ku(i,a,u,p,v,b,I,O,z){Ti=!1,Zr=null,$u.apply(Hu,arguments)}function Wl(i,a,u,p,v,b,I,O,z){if(Ku.apply(this,arguments),Ti){if(Ti){var J=Zr;Ti=!1,Zr=null}else throw Error(t(198));ha||(ha=!0,ar=J)}}function Ir(i){var a=i,u=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(u=a.return),i=a.return;while(i)}return a.tag===3?u:null}function $l(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function qu(i){if(Ir(i)!==i)throw Error(t(188))}function Gu(i){var a=i.alternate;if(!a){if(a=Ir(i),a===null)throw Error(t(188));return a!==i?null:i}for(var u=i,p=a;;){var v=u.return;if(v===null)break;var b=v.alternate;if(b===null){if(p=v.return,p!==null){u=p;continue}break}if(v.child===b.child){for(b=v.child;b;){if(b===u)return qu(v),i;if(b===p)return qu(v),a;b=b.sibling}throw Error(t(188))}if(u.return!==p.return)u=v,p=b;else{for(var I=!1,O=v.child;O;){if(O===u){I=!0,u=v,p=b;break}if(O===p){I=!0,p=v,u=b;break}O=O.sibling}if(!I){for(O=b.child;O;){if(O===u){I=!0,u=b,p=v;break}if(O===p){I=!0,p=b,u=v;break}O=O.sibling}if(!I)throw Error(t(189))}}if(u.alternate!==p)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?i:a}function Qu(i){return i=Gu(i),i!==null?po(i):null}function po(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var a=po(i);if(a!==null)return a;i=i.sibling}return null}var Hl=e.unstable_scheduleCallback,fa=e.unstable_cancelCallback,go=e.unstable_shouldYield,Ii=e.unstable_requestPaint,ft=e.unstable_now,Hf=e.unstable_getCurrentPriorityLevel,ma=e.unstable_ImmediatePriority,Kl=e.unstable_UserBlockingPriority,yo=e.unstable_NormalPriority,ql=e.unstable_LowPriority,pa=e.unstable_IdlePriority,vo=null,Kn=null;function Yu(i){if(Kn&&typeof Kn.onCommitFiberRoot=="function")try{Kn.onCommitFiberRoot(vo,i,void 0,(i.current.flags&128)===128)}catch{}}var qn=Math.clz32?Math.clz32:xo,ei=Math.log,lr=Math.LN2;function xo(i){return i>>>=0,i===0?32:31-(ei(i)/lr|0)|0}var ti=64,gs=4194304;function nt(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Ci(i,a){var u=i.pendingLanes;if(u===0)return 0;var p=0,v=i.suspendedLanes,b=i.pingedLanes,I=u&268435455;if(I!==0){var O=I&~v;O!==0?p=nt(O):(b&=I,b!==0&&(p=nt(b)))}else I=u&~v,I!==0?p=nt(I):b!==0&&(p=nt(b));if(p===0)return 0;if(a!==0&&a!==p&&(a&v)===0&&(v=p&-p,b=a&-a,v>=b||v===16&&(b&4194240)!==0))return a;if((p&4)!==0&&(p|=u&16),a=i.entangledLanes,a!==0)for(i=i.entanglements,a&=p;0<a;)u=31-qn(a),v=1<<u,p|=i[u],a&=~v;return p}function bo(i,a){switch(i){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wo(i,a){for(var u=i.suspendedLanes,p=i.pingedLanes,v=i.expirationTimes,b=i.pendingLanes;0<b;){var I=31-qn(b),O=1<<I,z=v[I];z===-1?((O&u)===0||(O&p)!==0)&&(v[I]=bo(O,a)):z<=a&&(i.expiredLanes|=O),b&=~O}}function Gl(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Ql(){var i=ti;return ti<<=1,(ti&4194240)===0&&(ti=64),i}function Yl(i){for(var a=[],u=0;31>u;u++)a.push(i);return a}function ko(i,a,u){i.pendingLanes|=a,a!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,a=31-qn(a),i[a]=u}function Kf(i,a){var u=i.pendingLanes&~a;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=a,i.mutableReadLanes&=a,i.entangledLanes&=a,a=i.entanglements;var p=i.eventTimes;for(i=i.expirationTimes;0<u;){var v=31-qn(u),b=1<<v;a[v]=0,p[v]=-1,i[v]=-1,u&=~b}}function Xl(i,a){var u=i.entangledLanes|=a;for(i=i.entanglements;u;){var p=31-qn(u),v=1<<p;v&a|i[p]&a&&(i[p]|=a),u&=~v}}var Ye=0;function ni(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Jl,ga,Zl,ec,tc,ri=!1,ya=[],ii=null,si=null,rn=null,_o=new Map,ji=new Map,Gn=[],Xu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ys(i,a){switch(i){case"focusin":case"focusout":ii=null;break;case"dragenter":case"dragleave":si=null;break;case"mouseover":case"mouseout":rn=null;break;case"pointerover":case"pointerout":_o.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":ji.delete(a.pointerId)}}function Cr(i,a,u,p,v,b){return i===null||i.nativeEvent!==b?(i={blockedOn:a,domEventName:u,eventSystemFlags:p,nativeEvent:b,targetContainers:[v]},a!==null&&(a=pc(a),a!==null&&ga(a)),i):(i.eventSystemFlags|=p,a=i.targetContainers,v!==null&&a.indexOf(v)===-1&&a.push(v),i)}function Ju(i,a,u,p,v){switch(a){case"focusin":return ii=Cr(ii,i,a,u,p,v),!0;case"dragenter":return si=Cr(si,i,a,u,p,v),!0;case"mouseover":return rn=Cr(rn,i,a,u,p,v),!0;case"pointerover":var b=v.pointerId;return _o.set(b,Cr(_o.get(b)||null,i,a,u,p,v)),!0;case"gotpointercapture":return b=v.pointerId,ji.set(b,Cr(ji.get(b)||null,i,a,u,p,v)),!0}return!1}function va(i){var a=Io(i.target);if(a!==null){var u=Ir(a);if(u!==null){if(a=u.tag,a===13){if(a=$l(u),a!==null){i.blockedOn=a,tc(i.priority,function(){Zl(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function ct(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var u=xa(i.domEventName,i.eventSystemFlags,a[0],i.nativeEvent);if(u===null){u=i.nativeEvent;var p=new u.constructor(u.type,u);ds=p,u.target.dispatchEvent(p),ds=null}else return a=pc(u),a!==null&&ga(a),i.blockedOn=u,!1;a.shift()}return!0}function Zu(i,a,u){ct(i)&&u.delete(a)}function qf(){ri=!1,ii!==null&&ct(ii)&&(ii=null),si!==null&&ct(si)&&(si=null),rn!==null&&ct(rn)&&(rn=null),_o.forEach(Zu),ji.forEach(Zu)}function vs(i,a){i.blockedOn===a&&(i.blockedOn=null,ri||(ri=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,qf)))}function xs(i){function a(v){return vs(v,i)}if(0<ya.length){vs(ya[0],i);for(var u=1;u<ya.length;u++){var p=ya[u];p.blockedOn===i&&(p.blockedOn=null)}}for(ii!==null&&vs(ii,i),si!==null&&vs(si,i),rn!==null&&vs(rn,i),_o.forEach(a),ji.forEach(a),u=0;u<Gn.length;u++)p=Gn[u],p.blockedOn===i&&(p.blockedOn=null);for(;0<Gn.length&&(u=Gn[0],u.blockedOn===null);)va(u),u.blockedOn===null&&Gn.shift()}var Ai=F.ReactCurrentBatchConfig,Ri=!0;function oi(i,a,u,p){var v=Ye,b=Ai.transition;Ai.transition=null;try{Ye=1,nc(i,a,u,p)}finally{Ye=v,Ai.transition=b}}function ed(i,a,u,p){var v=Ye,b=Ai.transition;Ai.transition=null;try{Ye=4,nc(i,a,u,p)}finally{Ye=v,Ai.transition=b}}function nc(i,a,u,p){if(Ri){var v=xa(i,a,u,p);if(v===null)im(i,a,p,ai,u),ys(i,p);else if(Ju(v,i,a,u,p))p.stopPropagation();else if(ys(i,p),a&4&&-1<Xu.indexOf(i)){for(;v!==null;){var b=pc(v);if(b!==null&&Jl(b),b=xa(i,a,u,p),b===null&&im(i,a,p,ai,u),b===v)break;v=b}v!==null&&p.stopPropagation()}else im(i,a,p,null,u)}}var ai=null;function xa(i,a,u,p){if(ai=null,i=da(p),i=Io(i),i!==null)if(a=Ir(i),a===null)i=null;else if(u=a.tag,u===13){if(i=$l(a),i!==null)return i;i=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null);return ai=i,null}function ba(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Hf()){case ma:return 1;case Kl:return 4;case yo:case ql:return 16;case pa:return 536870912;default:return 16}default:return 16}}var Qn=null,wa=null,Pi=null;function td(){if(Pi)return Pi;var i,a=wa,u=a.length,p,v="value"in Qn?Qn.value:Qn.textContent,b=v.length;for(i=0;i<u&&a[i]===v[i];i++);var I=u-i;for(p=1;p<=I&&a[u-p]===v[b-p];p++);return Pi=v.slice(i,1<p?1-p:void 0)}function So(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function li(){return!0}function rc(){return!1}function fn(i){function a(u,p,v,b,I){this._reactName=u,this._targetInst=v,this.type=p,this.nativeEvent=b,this.target=I,this.currentTarget=null;for(var O in i)i.hasOwnProperty(O)&&(u=i[O],this[O]=u?u(b):b[O]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?li:rc,this.isPropagationStopped=rc,this}return le(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=li)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=li)},persist:function(){},isPersistent:li}),a}var ci={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Eo=fn(ci),bs=le({},ci,{view:0,detail:0}),ka=fn(bs),_a,Sa,Yn,To=le({},bs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Be,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Yn&&(Yn&&i.type==="mousemove"?(_a=i.screenX-Yn.screenX,Sa=i.screenY-Yn.screenY):Sa=_a=0,Yn=i),_a)},movementY:function(i){return"movementY"in i?i.movementY:Sa}}),ic=fn(To),nd=le({},To,{dataTransfer:0}),rd=fn(nd),Ea=le({},bs,{relatedTarget:0}),sn=fn(Ea),id=le({},ci,{animationName:0,elapsedTime:0,pseudoElement:0}),sd=fn(id),ws=le({},ci,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),f=fn(ws),w=le({},ci,{data:0}),_=fn(w),R={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Q={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Z={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function de(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=Z[i])?!!a[i]:!1}function Be(){return de}var Pt=le({},bs,{key:function(i){if(i.key){var a=R[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=So(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Q[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Be,charCode:function(i){return i.type==="keypress"?So(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?So(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),st=fn(Pt),Bt=le({},To,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xn=fn(Bt),Ni=le({},bs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Be}),ui=fn(Ni),di=le({},ci,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ta=fn(di),sc=le({},To,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),HT=fn(sc),KT=[9,13,27,32],Gf=h&&"CompositionEvent"in window,oc=null;h&&"documentMode"in document&&(oc=document.documentMode);var qT=h&&"TextEvent"in window&&!oc,ev=h&&(!Gf||oc&&8<oc&&11>=oc),tv=" ",nv=!1;function rv(i,a){switch(i){case"keyup":return KT.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iv(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ia=!1;function GT(i,a){switch(i){case"compositionend":return iv(a);case"keypress":return a.which!==32?null:(nv=!0,tv);case"textInput":return i=a.data,i===tv&&nv?null:i;default:return null}}function QT(i,a){if(Ia)return i==="compositionend"||!Gf&&rv(i,a)?(i=td(),Pi=wa=Qn=null,Ia=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return ev&&a.locale!=="ko"?null:a.data;default:return null}}var YT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sv(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!YT[i.type]:a==="textarea"}function ov(i,a,u,p){hs(p),a=ud(a,"onChange"),0<a.length&&(u=new Eo("onChange","change",null,u,p),i.push({event:u,listeners:a}))}var ac=null,lc=null;function XT(i){Sv(i,0)}function od(i){var a=Pa(i);if(Ht(a))return i}function JT(i,a){if(i==="change")return a}var av=!1;if(h){var Qf;if(h){var Yf="oninput"in document;if(!Yf){var lv=document.createElement("div");lv.setAttribute("oninput","return;"),Yf=typeof lv.oninput=="function"}Qf=Yf}else Qf=!1;av=Qf&&(!document.documentMode||9<document.documentMode)}function cv(){ac&&(ac.detachEvent("onpropertychange",uv),lc=ac=null)}function uv(i){if(i.propertyName==="value"&&od(lc)){var a=[];ov(a,lc,i,da(i)),Wu(XT,a)}}function ZT(i,a,u){i==="focusin"?(cv(),ac=a,lc=u,ac.attachEvent("onpropertychange",uv)):i==="focusout"&&cv()}function eI(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return od(lc)}function tI(i,a){if(i==="click")return od(a)}function nI(i,a){if(i==="input"||i==="change")return od(a)}function rI(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var jr=typeof Object.is=="function"?Object.is:rI;function cc(i,a){if(jr(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var u=Object.keys(i),p=Object.keys(a);if(u.length!==p.length)return!1;for(p=0;p<u.length;p++){var v=u[p];if(!d.call(a,v)||!jr(i[v],a[v]))return!1}return!0}function dv(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function hv(i,a){var u=dv(i);i=0;for(var p;u;){if(u.nodeType===3){if(p=i+u.textContent.length,i<=a&&p>=a)return{node:u,offset:a-i};i=p}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=dv(u)}}function fv(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?fv(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function mv(){for(var i=window,a=ht();a instanceof i.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)i=a.contentWindow;else break;a=ht(i.document)}return a}function Xf(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}function iI(i){var a=mv(),u=i.focusedElem,p=i.selectionRange;if(a!==u&&u&&u.ownerDocument&&fv(u.ownerDocument.documentElement,u)){if(p!==null&&Xf(u)){if(a=p.start,i=p.end,i===void 0&&(i=a),"selectionStart"in u)u.selectionStart=a,u.selectionEnd=Math.min(i,u.value.length);else if(i=(a=u.ownerDocument||document)&&a.defaultView||window,i.getSelection){i=i.getSelection();var v=u.textContent.length,b=Math.min(p.start,v);p=p.end===void 0?b:Math.min(p.end,v),!i.extend&&b>p&&(v=p,p=b,b=v),v=hv(u,b);var I=hv(u,p);v&&I&&(i.rangeCount!==1||i.anchorNode!==v.node||i.anchorOffset!==v.offset||i.focusNode!==I.node||i.focusOffset!==I.offset)&&(a=a.createRange(),a.setStart(v.node,v.offset),i.removeAllRanges(),b>p?(i.addRange(a),i.extend(I.node,I.offset)):(a.setEnd(I.node,I.offset),i.addRange(a)))}}for(a=[],i=u;i=i.parentNode;)i.nodeType===1&&a.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<a.length;u++)i=a[u],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var sI=h&&"documentMode"in document&&11>=document.documentMode,Ca=null,Jf=null,uc=null,Zf=!1;function pv(i,a,u){var p=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Zf||Ca==null||Ca!==ht(p)||(p=Ca,"selectionStart"in p&&Xf(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),uc&&cc(uc,p)||(uc=p,p=ud(Jf,"onSelect"),0<p.length&&(a=new Eo("onSelect","select",null,a,u),i.push({event:a,listeners:p}),a.target=Ca)))}function ad(i,a){var u={};return u[i.toLowerCase()]=a.toLowerCase(),u["Webkit"+i]="webkit"+a,u["Moz"+i]="moz"+a,u}var ja={animationend:ad("Animation","AnimationEnd"),animationiteration:ad("Animation","AnimationIteration"),animationstart:ad("Animation","AnimationStart"),transitionend:ad("Transition","TransitionEnd")},em={},gv={};h&&(gv=document.createElement("div").style,"AnimationEvent"in window||(delete ja.animationend.animation,delete ja.animationiteration.animation,delete ja.animationstart.animation),"TransitionEvent"in window||delete ja.transitionend.transition);function ld(i){if(em[i])return em[i];if(!ja[i])return i;var a=ja[i],u;for(u in a)if(a.hasOwnProperty(u)&&u in gv)return em[i]=a[u];return i}var yv=ld("animationend"),vv=ld("animationiteration"),xv=ld("animationstart"),bv=ld("transitionend"),wv=new Map,kv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ks(i,a){wv.set(i,a),l(a,[i])}for(var tm=0;tm<kv.length;tm++){var nm=kv[tm],oI=nm.toLowerCase(),aI=nm[0].toUpperCase()+nm.slice(1);ks(oI,"on"+aI)}ks(yv,"onAnimationEnd"),ks(vv,"onAnimationIteration"),ks(xv,"onAnimationStart"),ks("dblclick","onDoubleClick"),ks("focusin","onFocus"),ks("focusout","onBlur"),ks(bv,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var dc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lI=new Set("cancel close invalid load scroll toggle".split(" ").concat(dc));function _v(i,a,u){var p=i.type||"unknown-event";i.currentTarget=u,Wl(p,a,void 0,i),i.currentTarget=null}function Sv(i,a){a=(a&4)!==0;for(var u=0;u<i.length;u++){var p=i[u],v=p.event;p=p.listeners;e:{var b=void 0;if(a)for(var I=p.length-1;0<=I;I--){var O=p[I],z=O.instance,J=O.currentTarget;if(O=O.listener,z!==b&&v.isPropagationStopped())break e;_v(v,O,J),b=z}else for(I=0;I<p.length;I++){if(O=p[I],z=O.instance,J=O.currentTarget,O=O.listener,z!==b&&v.isPropagationStopped())break e;_v(v,O,J),b=z}}}if(ha)throw i=ar,ha=!1,ar=null,i}function mt(i,a){var u=a[um];u===void 0&&(u=a[um]=new Set);var p=i+"__bubble";u.has(p)||(Ev(a,i,2,!1),u.add(p))}function rm(i,a,u){var p=0;a&&(p|=4),Ev(u,i,p,a)}var cd="_reactListening"+Math.random().toString(36).slice(2);function hc(i){if(!i[cd]){i[cd]=!0,r.forEach(function(u){u!=="selectionchange"&&(lI.has(u)||rm(u,!1,i),rm(u,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[cd]||(a[cd]=!0,rm("selectionchange",!1,a))}}function Ev(i,a,u,p){switch(ba(a)){case 1:var v=oi;break;case 4:v=ed;break;default:v=nc}u=v.bind(null,a,u,i),v=void 0,!ms||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(v=!0),p?v!==void 0?i.addEventListener(a,u,{capture:!0,passive:v}):i.addEventListener(a,u,!0):v!==void 0?i.addEventListener(a,u,{passive:v}):i.addEventListener(a,u,!1)}function im(i,a,u,p,v){var b=p;if((a&1)===0&&(a&2)===0&&p!==null)e:for(;;){if(p===null)return;var I=p.tag;if(I===3||I===4){var O=p.stateNode.containerInfo;if(O===v||O.nodeType===8&&O.parentNode===v)break;if(I===4)for(I=p.return;I!==null;){var z=I.tag;if((z===3||z===4)&&(z=I.stateNode.containerInfo,z===v||z.nodeType===8&&z.parentNode===v))return;I=I.return}for(;O!==null;){if(I=Io(O),I===null)return;if(z=I.tag,z===5||z===6){p=b=I;continue e}O=O.parentNode}}p=p.return}Wu(function(){var J=b,oe=da(u),ae=[];e:{var ie=wv.get(i);if(ie!==void 0){var ve=Eo,ke=i;switch(i){case"keypress":if(So(u)===0)break e;case"keydown":case"keyup":ve=st;break;case"focusin":ke="focus",ve=sn;break;case"focusout":ke="blur",ve=sn;break;case"beforeblur":case"afterblur":ve=sn;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ve=ic;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ve=rd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ve=ui;break;case yv:case vv:case xv:ve=sd;break;case bv:ve=Ta;break;case"scroll":ve=ka;break;case"wheel":ve=HT;break;case"copy":case"cut":case"paste":ve=f;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ve=Xn}var _e=(a&4)!==0,Nt=!_e&&i==="scroll",G=_e?ie!==null?ie+"Capture":null:ie;_e=[];for(var W=J,Y;W!==null;){Y=W;var ue=Y.stateNode;if(Y.tag===5&&ue!==null&&(Y=ue,G!==null&&(ue=mo(W,G),ue!=null&&_e.push(fc(W,ue,Y)))),Nt)break;W=W.return}0<_e.length&&(ie=new ve(ie,ke,null,u,oe),ae.push({event:ie,listeners:_e}))}}if((a&7)===0){e:{if(ie=i==="mouseover"||i==="pointerover",ve=i==="mouseout"||i==="pointerout",ie&&u!==ds&&(ke=u.relatedTarget||u.fromElement)&&(Io(ke)||ke[Di]))break e;if((ve||ie)&&(ie=oe.window===oe?oe:(ie=oe.ownerDocument)?ie.defaultView||ie.parentWindow:window,ve?(ke=u.relatedTarget||u.toElement,ve=J,ke=ke?Io(ke):null,ke!==null&&(Nt=Ir(ke),ke!==Nt||ke.tag!==5&&ke.tag!==6)&&(ke=null)):(ve=null,ke=J),ve!==ke)){if(_e=ic,ue="onMouseLeave",G="onMouseEnter",W="mouse",(i==="pointerout"||i==="pointerover")&&(_e=Xn,ue="onPointerLeave",G="onPointerEnter",W="pointer"),Nt=ve==null?ie:Pa(ve),Y=ke==null?ie:Pa(ke),ie=new _e(ue,W+"leave",ve,u,oe),ie.target=Nt,ie.relatedTarget=Y,ue=null,Io(oe)===J&&(_e=new _e(G,W+"enter",ke,u,oe),_e.target=Y,_e.relatedTarget=Nt,ue=_e),Nt=ue,ve&&ke)t:{for(_e=ve,G=ke,W=0,Y=_e;Y;Y=Aa(Y))W++;for(Y=0,ue=G;ue;ue=Aa(ue))Y++;for(;0<W-Y;)_e=Aa(_e),W--;for(;0<Y-W;)G=Aa(G),Y--;for(;W--;){if(_e===G||G!==null&&_e===G.alternate)break t;_e=Aa(_e),G=Aa(G)}_e=null}else _e=null;ve!==null&&Tv(ae,ie,ve,_e,!1),ke!==null&&Nt!==null&&Tv(ae,Nt,ke,_e,!0)}}e:{if(ie=J?Pa(J):window,ve=ie.nodeName&&ie.nodeName.toLowerCase(),ve==="select"||ve==="input"&&ie.type==="file")var Ee=JT;else if(sv(ie))if(av)Ee=nI;else{Ee=eI;var Ae=ZT}else(ve=ie.nodeName)&&ve.toLowerCase()==="input"&&(ie.type==="checkbox"||ie.type==="radio")&&(Ee=tI);if(Ee&&(Ee=Ee(i,J))){ov(ae,Ee,u,oe);break e}Ae&&Ae(i,ie,J),i==="focusout"&&(Ae=ie._wrapperState)&&Ae.controlled&&ie.type==="number"&&at(ie,"number",ie.value)}switch(Ae=J?Pa(J):window,i){case"focusin":(sv(Ae)||Ae.contentEditable==="true")&&(Ca=Ae,Jf=J,uc=null);break;case"focusout":uc=Jf=Ca=null;break;case"mousedown":Zf=!0;break;case"contextmenu":case"mouseup":case"dragend":Zf=!1,pv(ae,u,oe);break;case"selectionchange":if(sI)break;case"keydown":case"keyup":pv(ae,u,oe)}var Re;if(Gf)e:{switch(i){case"compositionstart":var De="onCompositionStart";break e;case"compositionend":De="onCompositionEnd";break e;case"compositionupdate":De="onCompositionUpdate";break e}De=void 0}else Ia?rv(i,u)&&(De="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(De="onCompositionStart");De&&(ev&&u.locale!=="ko"&&(Ia||De!=="onCompositionStart"?De==="onCompositionEnd"&&Ia&&(Re=td()):(Qn=oe,wa="value"in Qn?Qn.value:Qn.textContent,Ia=!0)),Ae=ud(J,De),0<Ae.length&&(De=new _(De,i,null,u,oe),ae.push({event:De,listeners:Ae}),Re?De.data=Re:(Re=iv(u),Re!==null&&(De.data=Re)))),(Re=qT?GT(i,u):QT(i,u))&&(J=ud(J,"onBeforeInput"),0<J.length&&(oe=new _("onBeforeInput","beforeinput",null,u,oe),ae.push({event:oe,listeners:J}),oe.data=Re))}Sv(ae,a)})}function fc(i,a,u){return{instance:i,listener:a,currentTarget:u}}function ud(i,a){for(var u=a+"Capture",p=[];i!==null;){var v=i,b=v.stateNode;v.tag===5&&b!==null&&(v=b,b=mo(i,u),b!=null&&p.unshift(fc(i,b,v)),b=mo(i,a),b!=null&&p.push(fc(i,b,v))),i=i.return}return p}function Aa(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Tv(i,a,u,p,v){for(var b=a._reactName,I=[];u!==null&&u!==p;){var O=u,z=O.alternate,J=O.stateNode;if(z!==null&&z===p)break;O.tag===5&&J!==null&&(O=J,v?(z=mo(u,b),z!=null&&I.unshift(fc(u,z,O))):v||(z=mo(u,b),z!=null&&I.push(fc(u,z,O)))),u=u.return}I.length!==0&&i.push({event:a,listeners:I})}var cI=/\r\n?/g,uI=/\u0000|\uFFFD/g;function Iv(i){return(typeof i=="string"?i:""+i).replace(cI,`
`).replace(uI,"")}function dd(i,a,u){if(a=Iv(a),Iv(i)!==a&&u)throw Error(t(425))}function hd(){}var sm=null,om=null;function am(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var lm=typeof setTimeout=="function"?setTimeout:void 0,dI=typeof clearTimeout=="function"?clearTimeout:void 0,Cv=typeof Promise=="function"?Promise:void 0,hI=typeof queueMicrotask=="function"?queueMicrotask:typeof Cv<"u"?function(i){return Cv.resolve(null).then(i).catch(fI)}:lm;function fI(i){setTimeout(function(){throw i})}function cm(i,a){var u=a,p=0;do{var v=u.nextSibling;if(i.removeChild(u),v&&v.nodeType===8)if(u=v.data,u==="/$"){if(p===0){i.removeChild(v),xs(a);return}p--}else u!=="$"&&u!=="$?"&&u!=="$!"||p++;u=v}while(u);xs(a)}function _s(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return i}function jv(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(a===0)return i;a--}else u==="/$"&&a++}i=i.previousSibling}return null}var Ra=Math.random().toString(36).slice(2),hi="__reactFiber$"+Ra,mc="__reactProps$"+Ra,Di="__reactContainer$"+Ra,um="__reactEvents$"+Ra,mI="__reactListeners$"+Ra,pI="__reactHandles$"+Ra;function Io(i){var a=i[hi];if(a)return a;for(var u=i.parentNode;u;){if(a=u[Di]||u[hi]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(i=jv(i);i!==null;){if(u=i[hi])return u;i=jv(i)}return a}i=u,u=i.parentNode}return null}function pc(i){return i=i[hi]||i[Di],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Pa(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function fd(i){return i[mc]||null}var dm=[],Na=-1;function Ss(i){return{current:i}}function pt(i){0>Na||(i.current=dm[Na],dm[Na]=null,Na--)}function ut(i,a){Na++,dm[Na]=i.current,i.current=a}var Es={},mn=Ss(Es),Nn=Ss(!1),Co=Es;function Da(i,a){var u=i.type.contextTypes;if(!u)return Es;var p=i.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===a)return p.__reactInternalMemoizedMaskedChildContext;var v={},b;for(b in u)v[b]=a[b];return p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=a,i.__reactInternalMemoizedMaskedChildContext=v),v}function Dn(i){return i=i.childContextTypes,i!=null}function md(){pt(Nn),pt(mn)}function Av(i,a,u){if(mn.current!==Es)throw Error(t(168));ut(mn,a),ut(Nn,u)}function Rv(i,a,u){var p=i.stateNode;if(a=a.childContextTypes,typeof p.getChildContext!="function")return u;p=p.getChildContext();for(var v in p)if(!(v in a))throw Error(t(108,re(i)||"Unknown",v));return le({},u,p)}function pd(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Es,Co=mn.current,ut(mn,i),ut(Nn,Nn.current),!0}function Pv(i,a,u){var p=i.stateNode;if(!p)throw Error(t(169));u?(i=Rv(i,a,Co),p.__reactInternalMemoizedMergedChildContext=i,pt(Nn),pt(mn),ut(mn,i)):pt(Nn),ut(Nn,u)}var Mi=null,gd=!1,hm=!1;function Nv(i){Mi===null?Mi=[i]:Mi.push(i)}function gI(i){gd=!0,Nv(i)}function Ts(){if(!hm&&Mi!==null){hm=!0;var i=0,a=Ye;try{var u=Mi;for(Ye=1;i<u.length;i++){var p=u[i];do p=p(!0);while(p!==null)}Mi=null,gd=!1}catch(v){throw Mi!==null&&(Mi=Mi.slice(i+1)),Hl(ma,Ts),v}finally{Ye=a,hm=!1}}return null}var Ma=[],Va=0,yd=null,vd=0,cr=[],ur=0,jo=null,Vi=1,Li="";function Ao(i,a){Ma[Va++]=vd,Ma[Va++]=yd,yd=i,vd=a}function Dv(i,a,u){cr[ur++]=Vi,cr[ur++]=Li,cr[ur++]=jo,jo=i;var p=Vi;i=Li;var v=32-qn(p)-1;p&=~(1<<v),u+=1;var b=32-qn(a)+v;if(30<b){var I=v-v%5;b=(p&(1<<I)-1).toString(32),p>>=I,v-=I,Vi=1<<32-qn(a)+v|u<<v|p,Li=b+i}else Vi=1<<b|u<<v|p,Li=i}function fm(i){i.return!==null&&(Ao(i,1),Dv(i,1,0))}function mm(i){for(;i===yd;)yd=Ma[--Va],Ma[Va]=null,vd=Ma[--Va],Ma[Va]=null;for(;i===jo;)jo=cr[--ur],cr[ur]=null,Li=cr[--ur],cr[ur]=null,Vi=cr[--ur],cr[ur]=null}var Jn=null,Zn=null,bt=!1,Ar=null;function Mv(i,a){var u=mr(5,null,null,0);u.elementType="DELETED",u.stateNode=a,u.return=i,a=i.deletions,a===null?(i.deletions=[u],i.flags|=16):a.push(u)}function Vv(i,a){switch(i.tag){case 5:var u=i.type;return a=a.nodeType!==1||u.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(i.stateNode=a,Jn=i,Zn=_s(a.firstChild),!0):!1;case 6:return a=i.pendingProps===""||a.nodeType!==3?null:a,a!==null?(i.stateNode=a,Jn=i,Zn=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(u=jo!==null?{id:Vi,overflow:Li}:null,i.memoizedState={dehydrated:a,treeContext:u,retryLane:1073741824},u=mr(18,null,null,0),u.stateNode=a,u.return=i,i.child=u,Jn=i,Zn=null,!0):!1;default:return!1}}function pm(i){return(i.mode&1)!==0&&(i.flags&128)===0}function gm(i){if(bt){var a=Zn;if(a){var u=a;if(!Vv(i,a)){if(pm(i))throw Error(t(418));a=_s(u.nextSibling);var p=Jn;a&&Vv(i,a)?Mv(p,u):(i.flags=i.flags&-4097|2,bt=!1,Jn=i)}}else{if(pm(i))throw Error(t(418));i.flags=i.flags&-4097|2,bt=!1,Jn=i}}}function Lv(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Jn=i}function xd(i){if(i!==Jn)return!1;if(!bt)return Lv(i),bt=!0,!1;var a;if((a=i.tag!==3)&&!(a=i.tag!==5)&&(a=i.type,a=a!=="head"&&a!=="body"&&!am(i.type,i.memoizedProps)),a&&(a=Zn)){if(pm(i))throw Ov(),Error(t(418));for(;a;)Mv(i,a),a=_s(a.nextSibling)}if(Lv(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"){if(a===0){Zn=_s(i.nextSibling);break e}a--}else u!=="$"&&u!=="$!"&&u!=="$?"||a++}i=i.nextSibling}Zn=null}}else Zn=Jn?_s(i.stateNode.nextSibling):null;return!0}function Ov(){for(var i=Zn;i;)i=_s(i.nextSibling)}function La(){Zn=Jn=null,bt=!1}function ym(i){Ar===null?Ar=[i]:Ar.push(i)}var yI=F.ReactCurrentBatchConfig;function gc(i,a,u){if(i=u.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var p=u.stateNode}if(!p)throw Error(t(147,i));var v=p,b=""+i;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===b?a.ref:(a=function(I){var O=v.refs;I===null?delete O[b]:O[b]=I},a._stringRef=b,a)}if(typeof i!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,i))}return i}function bd(i,a){throw i=Object.prototype.toString.call(a),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i))}function Bv(i){var a=i._init;return a(i._payload)}function zv(i){function a(G,W){if(i){var Y=G.deletions;Y===null?(G.deletions=[W],G.flags|=16):Y.push(W)}}function u(G,W){if(!i)return null;for(;W!==null;)a(G,W),W=W.sibling;return null}function p(G,W){for(G=new Map;W!==null;)W.key!==null?G.set(W.key,W):G.set(W.index,W),W=W.sibling;return G}function v(G,W){return G=Ds(G,W),G.index=0,G.sibling=null,G}function b(G,W,Y){return G.index=Y,i?(Y=G.alternate,Y!==null?(Y=Y.index,Y<W?(G.flags|=2,W):Y):(G.flags|=2,W)):(G.flags|=1048576,W)}function I(G){return i&&G.alternate===null&&(G.flags|=2),G}function O(G,W,Y,ue){return W===null||W.tag!==6?(W=lp(Y,G.mode,ue),W.return=G,W):(W=v(W,Y),W.return=G,W)}function z(G,W,Y,ue){var Ee=Y.type;return Ee===A?oe(G,W,Y.props.children,ue,Y.key):W!==null&&(W.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===rt&&Bv(Ee)===W.type)?(ue=v(W,Y.props),ue.ref=gc(G,W,Y),ue.return=G,ue):(ue=$d(Y.type,Y.key,Y.props,null,G.mode,ue),ue.ref=gc(G,W,Y),ue.return=G,ue)}function J(G,W,Y,ue){return W===null||W.tag!==4||W.stateNode.containerInfo!==Y.containerInfo||W.stateNode.implementation!==Y.implementation?(W=cp(Y,G.mode,ue),W.return=G,W):(W=v(W,Y.children||[]),W.return=G,W)}function oe(G,W,Y,ue,Ee){return W===null||W.tag!==7?(W=Oo(Y,G.mode,ue,Ee),W.return=G,W):(W=v(W,Y),W.return=G,W)}function ae(G,W,Y){if(typeof W=="string"&&W!==""||typeof W=="number")return W=lp(""+W,G.mode,Y),W.return=G,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case $:return Y=$d(W.type,W.key,W.props,null,G.mode,Y),Y.ref=gc(G,null,W),Y.return=G,Y;case K:return W=cp(W,G.mode,Y),W.return=G,W;case rt:var ue=W._init;return ae(G,ue(W._payload),Y)}if(lt(W)||me(W))return W=Oo(W,G.mode,Y,null),W.return=G,W;bd(G,W)}return null}function ie(G,W,Y,ue){var Ee=W!==null?W.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number")return Ee!==null?null:O(G,W,""+Y,ue);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case $:return Y.key===Ee?z(G,W,Y,ue):null;case K:return Y.key===Ee?J(G,W,Y,ue):null;case rt:return Ee=Y._init,ie(G,W,Ee(Y._payload),ue)}if(lt(Y)||me(Y))return Ee!==null?null:oe(G,W,Y,ue,null);bd(G,Y)}return null}function ve(G,W,Y,ue,Ee){if(typeof ue=="string"&&ue!==""||typeof ue=="number")return G=G.get(Y)||null,O(W,G,""+ue,Ee);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case $:return G=G.get(ue.key===null?Y:ue.key)||null,z(W,G,ue,Ee);case K:return G=G.get(ue.key===null?Y:ue.key)||null,J(W,G,ue,Ee);case rt:var Ae=ue._init;return ve(G,W,Y,Ae(ue._payload),Ee)}if(lt(ue)||me(ue))return G=G.get(Y)||null,oe(W,G,ue,Ee,null);bd(W,ue)}return null}function ke(G,W,Y,ue){for(var Ee=null,Ae=null,Re=W,De=W=0,Zt=null;Re!==null&&De<Y.length;De++){Re.index>De?(Zt=Re,Re=null):Zt=Re.sibling;var tt=ie(G,Re,Y[De],ue);if(tt===null){Re===null&&(Re=Zt);break}i&&Re&&tt.alternate===null&&a(G,Re),W=b(tt,W,De),Ae===null?Ee=tt:Ae.sibling=tt,Ae=tt,Re=Zt}if(De===Y.length)return u(G,Re),bt&&Ao(G,De),Ee;if(Re===null){for(;De<Y.length;De++)Re=ae(G,Y[De],ue),Re!==null&&(W=b(Re,W,De),Ae===null?Ee=Re:Ae.sibling=Re,Ae=Re);return bt&&Ao(G,De),Ee}for(Re=p(G,Re);De<Y.length;De++)Zt=ve(Re,G,De,Y[De],ue),Zt!==null&&(i&&Zt.alternate!==null&&Re.delete(Zt.key===null?De:Zt.key),W=b(Zt,W,De),Ae===null?Ee=Zt:Ae.sibling=Zt,Ae=Zt);return i&&Re.forEach(function(Ms){return a(G,Ms)}),bt&&Ao(G,De),Ee}function _e(G,W,Y,ue){var Ee=me(Y);if(typeof Ee!="function")throw Error(t(150));if(Y=Ee.call(Y),Y==null)throw Error(t(151));for(var Ae=Ee=null,Re=W,De=W=0,Zt=null,tt=Y.next();Re!==null&&!tt.done;De++,tt=Y.next()){Re.index>De?(Zt=Re,Re=null):Zt=Re.sibling;var Ms=ie(G,Re,tt.value,ue);if(Ms===null){Re===null&&(Re=Zt);break}i&&Re&&Ms.alternate===null&&a(G,Re),W=b(Ms,W,De),Ae===null?Ee=Ms:Ae.sibling=Ms,Ae=Ms,Re=Zt}if(tt.done)return u(G,Re),bt&&Ao(G,De),Ee;if(Re===null){for(;!tt.done;De++,tt=Y.next())tt=ae(G,tt.value,ue),tt!==null&&(W=b(tt,W,De),Ae===null?Ee=tt:Ae.sibling=tt,Ae=tt);return bt&&Ao(G,De),Ee}for(Re=p(G,Re);!tt.done;De++,tt=Y.next())tt=ve(Re,G,De,tt.value,ue),tt!==null&&(i&&tt.alternate!==null&&Re.delete(tt.key===null?De:tt.key),W=b(tt,W,De),Ae===null?Ee=tt:Ae.sibling=tt,Ae=tt);return i&&Re.forEach(function(YI){return a(G,YI)}),bt&&Ao(G,De),Ee}function Nt(G,W,Y,ue){if(typeof Y=="object"&&Y!==null&&Y.type===A&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case $:e:{for(var Ee=Y.key,Ae=W;Ae!==null;){if(Ae.key===Ee){if(Ee=Y.type,Ee===A){if(Ae.tag===7){u(G,Ae.sibling),W=v(Ae,Y.props.children),W.return=G,G=W;break e}}else if(Ae.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===rt&&Bv(Ee)===Ae.type){u(G,Ae.sibling),W=v(Ae,Y.props),W.ref=gc(G,Ae,Y),W.return=G,G=W;break e}u(G,Ae);break}else a(G,Ae);Ae=Ae.sibling}Y.type===A?(W=Oo(Y.props.children,G.mode,ue,Y.key),W.return=G,G=W):(ue=$d(Y.type,Y.key,Y.props,null,G.mode,ue),ue.ref=gc(G,W,Y),ue.return=G,G=ue)}return I(G);case K:e:{for(Ae=Y.key;W!==null;){if(W.key===Ae)if(W.tag===4&&W.stateNode.containerInfo===Y.containerInfo&&W.stateNode.implementation===Y.implementation){u(G,W.sibling),W=v(W,Y.children||[]),W.return=G,G=W;break e}else{u(G,W);break}else a(G,W);W=W.sibling}W=cp(Y,G.mode,ue),W.return=G,G=W}return I(G);case rt:return Ae=Y._init,Nt(G,W,Ae(Y._payload),ue)}if(lt(Y))return ke(G,W,Y,ue);if(me(Y))return _e(G,W,Y,ue);bd(G,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"?(Y=""+Y,W!==null&&W.tag===6?(u(G,W.sibling),W=v(W,Y),W.return=G,G=W):(u(G,W),W=lp(Y,G.mode,ue),W.return=G,G=W),I(G)):u(G,W)}return Nt}var Oa=zv(!0),Fv=zv(!1),wd=Ss(null),kd=null,Ba=null,vm=null;function xm(){vm=Ba=kd=null}function bm(i){var a=wd.current;pt(wd),i._currentValue=a}function wm(i,a,u){for(;i!==null;){var p=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,p!==null&&(p.childLanes|=a)):p!==null&&(p.childLanes&a)!==a&&(p.childLanes|=a),i===u)break;i=i.return}}function za(i,a){kd=i,vm=Ba=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&a)!==0&&(Mn=!0),i.firstContext=null)}function dr(i){var a=i._currentValue;if(vm!==i)if(i={context:i,memoizedValue:a,next:null},Ba===null){if(kd===null)throw Error(t(308));Ba=i,kd.dependencies={lanes:0,firstContext:i}}else Ba=Ba.next=i;return a}var Ro=null;function km(i){Ro===null?Ro=[i]:Ro.push(i)}function Uv(i,a,u,p){var v=a.interleaved;return v===null?(u.next=u,km(a)):(u.next=v.next,v.next=u),a.interleaved=u,Oi(i,p)}function Oi(i,a){i.lanes|=a;var u=i.alternate;for(u!==null&&(u.lanes|=a),u=i,i=i.return;i!==null;)i.childLanes|=a,u=i.alternate,u!==null&&(u.childLanes|=a),u=i,i=i.return;return u.tag===3?u.stateNode:null}var Is=!1;function _m(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Wv(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Bi(i,a){return{eventTime:i,lane:a,tag:0,payload:null,callback:null,next:null}}function Cs(i,a,u){var p=i.updateQueue;if(p===null)return null;if(p=p.shared,(Ze&2)!==0){var v=p.pending;return v===null?a.next=a:(a.next=v.next,v.next=a),p.pending=a,Oi(i,u)}return v=p.interleaved,v===null?(a.next=a,km(p)):(a.next=v.next,v.next=a),p.interleaved=a,Oi(i,u)}function _d(i,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194240)!==0)){var p=a.lanes;p&=i.pendingLanes,u|=p,a.lanes=u,Xl(i,u)}}function $v(i,a){var u=i.updateQueue,p=i.alternate;if(p!==null&&(p=p.updateQueue,u===p)){var v=null,b=null;if(u=u.firstBaseUpdate,u!==null){do{var I={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};b===null?v=b=I:b=b.next=I,u=u.next}while(u!==null);b===null?v=b=a:b=b.next=a}else v=b=a;u={baseState:p.baseState,firstBaseUpdate:v,lastBaseUpdate:b,shared:p.shared,effects:p.effects},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=a:i.next=a,u.lastBaseUpdate=a}function Sd(i,a,u,p){var v=i.updateQueue;Is=!1;var b=v.firstBaseUpdate,I=v.lastBaseUpdate,O=v.shared.pending;if(O!==null){v.shared.pending=null;var z=O,J=z.next;z.next=null,I===null?b=J:I.next=J,I=z;var oe=i.alternate;oe!==null&&(oe=oe.updateQueue,O=oe.lastBaseUpdate,O!==I&&(O===null?oe.firstBaseUpdate=J:O.next=J,oe.lastBaseUpdate=z))}if(b!==null){var ae=v.baseState;I=0,oe=J=z=null,O=b;do{var ie=O.lane,ve=O.eventTime;if((p&ie)===ie){oe!==null&&(oe=oe.next={eventTime:ve,lane:0,tag:O.tag,payload:O.payload,callback:O.callback,next:null});e:{var ke=i,_e=O;switch(ie=a,ve=u,_e.tag){case 1:if(ke=_e.payload,typeof ke=="function"){ae=ke.call(ve,ae,ie);break e}ae=ke;break e;case 3:ke.flags=ke.flags&-65537|128;case 0:if(ke=_e.payload,ie=typeof ke=="function"?ke.call(ve,ae,ie):ke,ie==null)break e;ae=le({},ae,ie);break e;case 2:Is=!0}}O.callback!==null&&O.lane!==0&&(i.flags|=64,ie=v.effects,ie===null?v.effects=[O]:ie.push(O))}else ve={eventTime:ve,lane:ie,tag:O.tag,payload:O.payload,callback:O.callback,next:null},oe===null?(J=oe=ve,z=ae):oe=oe.next=ve,I|=ie;if(O=O.next,O===null){if(O=v.shared.pending,O===null)break;ie=O,O=ie.next,ie.next=null,v.lastBaseUpdate=ie,v.shared.pending=null}}while(!0);if(oe===null&&(z=ae),v.baseState=z,v.firstBaseUpdate=J,v.lastBaseUpdate=oe,a=v.shared.interleaved,a!==null){v=a;do I|=v.lane,v=v.next;while(v!==a)}else b===null&&(v.shared.lanes=0);Do|=I,i.lanes=I,i.memoizedState=ae}}function Hv(i,a,u){if(i=a.effects,a.effects=null,i!==null)for(a=0;a<i.length;a++){var p=i[a],v=p.callback;if(v!==null){if(p.callback=null,p=u,typeof v!="function")throw Error(t(191,v));v.call(p)}}}var yc={},fi=Ss(yc),vc=Ss(yc),xc=Ss(yc);function Po(i){if(i===yc)throw Error(t(174));return i}function Sm(i,a){switch(ut(xc,a),ut(vc,i),ut(fi,yc),i=a.nodeType,i){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:Pn(null,"");break;default:i=i===8?a.parentNode:a,a=i.namespaceURI||null,i=i.tagName,a=Pn(a,i)}pt(fi),ut(fi,a)}function Fa(){pt(fi),pt(vc),pt(xc)}function Kv(i){Po(xc.current);var a=Po(fi.current),u=Pn(a,i.type);a!==u&&(ut(vc,i),ut(fi,u))}function Em(i){vc.current===i&&(pt(fi),pt(vc))}var kt=Ss(0);function Ed(i){for(var a=i;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Tm=[];function Im(){for(var i=0;i<Tm.length;i++)Tm[i]._workInProgressVersionPrimary=null;Tm.length=0}var Td=F.ReactCurrentDispatcher,Cm=F.ReactCurrentBatchConfig,No=0,_t=null,Kt=null,Xt=null,Id=!1,bc=!1,wc=0,vI=0;function pn(){throw Error(t(321))}function jm(i,a){if(a===null)return!1;for(var u=0;u<a.length&&u<i.length;u++)if(!jr(i[u],a[u]))return!1;return!0}function Am(i,a,u,p,v,b){if(No=b,_t=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Td.current=i===null||i.memoizedState===null?kI:_I,i=u(p,v),bc){b=0;do{if(bc=!1,wc=0,25<=b)throw Error(t(301));b+=1,Xt=Kt=null,a.updateQueue=null,Td.current=SI,i=u(p,v)}while(bc)}if(Td.current=Ad,a=Kt!==null&&Kt.next!==null,No=0,Xt=Kt=_t=null,Id=!1,a)throw Error(t(300));return i}function Rm(){var i=wc!==0;return wc=0,i}function mi(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xt===null?_t.memoizedState=Xt=i:Xt=Xt.next=i,Xt}function hr(){if(Kt===null){var i=_t.alternate;i=i!==null?i.memoizedState:null}else i=Kt.next;var a=Xt===null?_t.memoizedState:Xt.next;if(a!==null)Xt=a,Kt=i;else{if(i===null)throw Error(t(310));Kt=i,i={memoizedState:Kt.memoizedState,baseState:Kt.baseState,baseQueue:Kt.baseQueue,queue:Kt.queue,next:null},Xt===null?_t.memoizedState=Xt=i:Xt=Xt.next=i}return Xt}function kc(i,a){return typeof a=="function"?a(i):a}function Pm(i){var a=hr(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var p=Kt,v=p.baseQueue,b=u.pending;if(b!==null){if(v!==null){var I=v.next;v.next=b.next,b.next=I}p.baseQueue=v=b,u.pending=null}if(v!==null){b=v.next,p=p.baseState;var O=I=null,z=null,J=b;do{var oe=J.lane;if((No&oe)===oe)z!==null&&(z=z.next={lane:0,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),p=J.hasEagerState?J.eagerState:i(p,J.action);else{var ae={lane:oe,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null};z===null?(O=z=ae,I=p):z=z.next=ae,_t.lanes|=oe,Do|=oe}J=J.next}while(J!==null&&J!==b);z===null?I=p:z.next=O,jr(p,a.memoizedState)||(Mn=!0),a.memoizedState=p,a.baseState=I,a.baseQueue=z,u.lastRenderedState=p}if(i=u.interleaved,i!==null){v=i;do b=v.lane,_t.lanes|=b,Do|=b,v=v.next;while(v!==i)}else v===null&&(u.lanes=0);return[a.memoizedState,u.dispatch]}function Nm(i){var a=hr(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var p=u.dispatch,v=u.pending,b=a.memoizedState;if(v!==null){u.pending=null;var I=v=v.next;do b=i(b,I.action),I=I.next;while(I!==v);jr(b,a.memoizedState)||(Mn=!0),a.memoizedState=b,a.baseQueue===null&&(a.baseState=b),u.lastRenderedState=b}return[b,p]}function qv(){}function Gv(i,a){var u=_t,p=hr(),v=a(),b=!jr(p.memoizedState,v);if(b&&(p.memoizedState=v,Mn=!0),p=p.queue,Dm(Xv.bind(null,u,p,i),[i]),p.getSnapshot!==a||b||Xt!==null&&Xt.memoizedState.tag&1){if(u.flags|=2048,_c(9,Yv.bind(null,u,p,v,a),void 0,null),Jt===null)throw Error(t(349));(No&30)!==0||Qv(u,a,v)}return v}function Qv(i,a,u){i.flags|=16384,i={getSnapshot:a,value:u},a=_t.updateQueue,a===null?(a={lastEffect:null,stores:null},_t.updateQueue=a,a.stores=[i]):(u=a.stores,u===null?a.stores=[i]:u.push(i))}function Yv(i,a,u,p){a.value=u,a.getSnapshot=p,Jv(a)&&Zv(i)}function Xv(i,a,u){return u(function(){Jv(a)&&Zv(i)})}function Jv(i){var a=i.getSnapshot;i=i.value;try{var u=a();return!jr(i,u)}catch{return!0}}function Zv(i){var a=Oi(i,1);a!==null&&Dr(a,i,1,-1)}function e1(i){var a=mi();return typeof i=="function"&&(i=i()),a.memoizedState=a.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:kc,lastRenderedState:i},a.queue=i,i=i.dispatch=wI.bind(null,_t,i),[a.memoizedState,i]}function _c(i,a,u,p){return i={tag:i,create:a,destroy:u,deps:p,next:null},a=_t.updateQueue,a===null?(a={lastEffect:null,stores:null},_t.updateQueue=a,a.lastEffect=i.next=i):(u=a.lastEffect,u===null?a.lastEffect=i.next=i:(p=u.next,u.next=i,i.next=p,a.lastEffect=i)),i}function t1(){return hr().memoizedState}function Cd(i,a,u,p){var v=mi();_t.flags|=i,v.memoizedState=_c(1|a,u,void 0,p===void 0?null:p)}function jd(i,a,u,p){var v=hr();p=p===void 0?null:p;var b=void 0;if(Kt!==null){var I=Kt.memoizedState;if(b=I.destroy,p!==null&&jm(p,I.deps)){v.memoizedState=_c(a,u,b,p);return}}_t.flags|=i,v.memoizedState=_c(1|a,u,b,p)}function n1(i,a){return Cd(8390656,8,i,a)}function Dm(i,a){return jd(2048,8,i,a)}function r1(i,a){return jd(4,2,i,a)}function i1(i,a){return jd(4,4,i,a)}function s1(i,a){if(typeof a=="function")return i=i(),a(i),function(){a(null)};if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function o1(i,a,u){return u=u!=null?u.concat([i]):null,jd(4,4,s1.bind(null,a,i),u)}function Mm(){}function a1(i,a){var u=hr();a=a===void 0?null:a;var p=u.memoizedState;return p!==null&&a!==null&&jm(a,p[1])?p[0]:(u.memoizedState=[i,a],i)}function l1(i,a){var u=hr();a=a===void 0?null:a;var p=u.memoizedState;return p!==null&&a!==null&&jm(a,p[1])?p[0]:(i=i(),u.memoizedState=[i,a],i)}function c1(i,a,u){return(No&21)===0?(i.baseState&&(i.baseState=!1,Mn=!0),i.memoizedState=u):(jr(u,a)||(u=Ql(),_t.lanes|=u,Do|=u,i.baseState=!0),a)}function xI(i,a){var u=Ye;Ye=u!==0&&4>u?u:4,i(!0);var p=Cm.transition;Cm.transition={};try{i(!1),a()}finally{Ye=u,Cm.transition=p}}function u1(){return hr().memoizedState}function bI(i,a,u){var p=Ps(i);if(u={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null},d1(i))h1(a,u);else if(u=Uv(i,a,u,p),u!==null){var v=En();Dr(u,i,p,v),f1(u,a,p)}}function wI(i,a,u){var p=Ps(i),v={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null};if(d1(i))h1(a,v);else{var b=i.alternate;if(i.lanes===0&&(b===null||b.lanes===0)&&(b=a.lastRenderedReducer,b!==null))try{var I=a.lastRenderedState,O=b(I,u);if(v.hasEagerState=!0,v.eagerState=O,jr(O,I)){var z=a.interleaved;z===null?(v.next=v,km(a)):(v.next=z.next,z.next=v),a.interleaved=v;return}}catch{}finally{}u=Uv(i,a,v,p),u!==null&&(v=En(),Dr(u,i,p,v),f1(u,a,p))}}function d1(i){var a=i.alternate;return i===_t||a!==null&&a===_t}function h1(i,a){bc=Id=!0;var u=i.pending;u===null?a.next=a:(a.next=u.next,u.next=a),i.pending=a}function f1(i,a,u){if((u&4194240)!==0){var p=a.lanes;p&=i.pendingLanes,u|=p,a.lanes=u,Xl(i,u)}}var Ad={readContext:dr,useCallback:pn,useContext:pn,useEffect:pn,useImperativeHandle:pn,useInsertionEffect:pn,useLayoutEffect:pn,useMemo:pn,useReducer:pn,useRef:pn,useState:pn,useDebugValue:pn,useDeferredValue:pn,useTransition:pn,useMutableSource:pn,useSyncExternalStore:pn,useId:pn,unstable_isNewReconciler:!1},kI={readContext:dr,useCallback:function(i,a){return mi().memoizedState=[i,a===void 0?null:a],i},useContext:dr,useEffect:n1,useImperativeHandle:function(i,a,u){return u=u!=null?u.concat([i]):null,Cd(4194308,4,s1.bind(null,a,i),u)},useLayoutEffect:function(i,a){return Cd(4194308,4,i,a)},useInsertionEffect:function(i,a){return Cd(4,2,i,a)},useMemo:function(i,a){var u=mi();return a=a===void 0?null:a,i=i(),u.memoizedState=[i,a],i},useReducer:function(i,a,u){var p=mi();return a=u!==void 0?u(a):a,p.memoizedState=p.baseState=a,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:a},p.queue=i,i=i.dispatch=bI.bind(null,_t,i),[p.memoizedState,i]},useRef:function(i){var a=mi();return i={current:i},a.memoizedState=i},useState:e1,useDebugValue:Mm,useDeferredValue:function(i){return mi().memoizedState=i},useTransition:function(){var i=e1(!1),a=i[0];return i=xI.bind(null,i[1]),mi().memoizedState=i,[a,i]},useMutableSource:function(){},useSyncExternalStore:function(i,a,u){var p=_t,v=mi();if(bt){if(u===void 0)throw Error(t(407));u=u()}else{if(u=a(),Jt===null)throw Error(t(349));(No&30)!==0||Qv(p,a,u)}v.memoizedState=u;var b={value:u,getSnapshot:a};return v.queue=b,n1(Xv.bind(null,p,b,i),[i]),p.flags|=2048,_c(9,Yv.bind(null,p,b,u,a),void 0,null),u},useId:function(){var i=mi(),a=Jt.identifierPrefix;if(bt){var u=Li,p=Vi;u=(p&~(1<<32-qn(p)-1)).toString(32)+u,a=":"+a+"R"+u,u=wc++,0<u&&(a+="H"+u.toString(32)),a+=":"}else u=vI++,a=":"+a+"r"+u.toString(32)+":";return i.memoizedState=a},unstable_isNewReconciler:!1},_I={readContext:dr,useCallback:a1,useContext:dr,useEffect:Dm,useImperativeHandle:o1,useInsertionEffect:r1,useLayoutEffect:i1,useMemo:l1,useReducer:Pm,useRef:t1,useState:function(){return Pm(kc)},useDebugValue:Mm,useDeferredValue:function(i){var a=hr();return c1(a,Kt.memoizedState,i)},useTransition:function(){var i=Pm(kc)[0],a=hr().memoizedState;return[i,a]},useMutableSource:qv,useSyncExternalStore:Gv,useId:u1,unstable_isNewReconciler:!1},SI={readContext:dr,useCallback:a1,useContext:dr,useEffect:Dm,useImperativeHandle:o1,useInsertionEffect:r1,useLayoutEffect:i1,useMemo:l1,useReducer:Nm,useRef:t1,useState:function(){return Nm(kc)},useDebugValue:Mm,useDeferredValue:function(i){var a=hr();return Kt===null?a.memoizedState=i:c1(a,Kt.memoizedState,i)},useTransition:function(){var i=Nm(kc)[0],a=hr().memoizedState;return[i,a]},useMutableSource:qv,useSyncExternalStore:Gv,useId:u1,unstable_isNewReconciler:!1};function Rr(i,a){if(i&&i.defaultProps){a=le({},a),i=i.defaultProps;for(var u in i)a[u]===void 0&&(a[u]=i[u]);return a}return a}function Vm(i,a,u,p){a=i.memoizedState,u=u(p,a),u=u==null?a:le({},a,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var Rd={isMounted:function(i){return(i=i._reactInternals)?Ir(i)===i:!1},enqueueSetState:function(i,a,u){i=i._reactInternals;var p=En(),v=Ps(i),b=Bi(p,v);b.payload=a,u!=null&&(b.callback=u),a=Cs(i,b,v),a!==null&&(Dr(a,i,v,p),_d(a,i,v))},enqueueReplaceState:function(i,a,u){i=i._reactInternals;var p=En(),v=Ps(i),b=Bi(p,v);b.tag=1,b.payload=a,u!=null&&(b.callback=u),a=Cs(i,b,v),a!==null&&(Dr(a,i,v,p),_d(a,i,v))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var u=En(),p=Ps(i),v=Bi(u,p);v.tag=2,a!=null&&(v.callback=a),a=Cs(i,v,p),a!==null&&(Dr(a,i,p,u),_d(a,i,p))}};function m1(i,a,u,p,v,b,I){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(p,b,I):a.prototype&&a.prototype.isPureReactComponent?!cc(u,p)||!cc(v,b):!0}function p1(i,a,u){var p=!1,v=Es,b=a.contextType;return typeof b=="object"&&b!==null?b=dr(b):(v=Dn(a)?Co:mn.current,p=a.contextTypes,b=(p=p!=null)?Da(i,v):Es),a=new a(u,b),i.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Rd,i.stateNode=a,a._reactInternals=i,p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=v,i.__reactInternalMemoizedMaskedChildContext=b),a}function g1(i,a,u,p){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,p),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,p),a.state!==i&&Rd.enqueueReplaceState(a,a.state,null)}function Lm(i,a,u,p){var v=i.stateNode;v.props=u,v.state=i.memoizedState,v.refs={},_m(i);var b=a.contextType;typeof b=="object"&&b!==null?v.context=dr(b):(b=Dn(a)?Co:mn.current,v.context=Da(i,b)),v.state=i.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&(Vm(i,a,b,u),v.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(a=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),a!==v.state&&Rd.enqueueReplaceState(v,v.state,null),Sd(i,u,v,p),v.state=i.memoizedState),typeof v.componentDidMount=="function"&&(i.flags|=4194308)}function Ua(i,a){try{var u="",p=a;do u+=Oe(p),p=p.return;while(p);var v=u}catch(b){v=`
Error generating stack: `+b.message+`
`+b.stack}return{value:i,source:a,stack:v,digest:null}}function Om(i,a,u){return{value:i,source:null,stack:u??null,digest:a??null}}function Bm(i,a){try{console.error(a.value)}catch(u){setTimeout(function(){throw u})}}var EI=typeof WeakMap=="function"?WeakMap:Map;function y1(i,a,u){u=Bi(-1,u),u.tag=3,u.payload={element:null};var p=a.value;return u.callback=function(){Od||(Od=!0,ep=p),Bm(i,a)},u}function v1(i,a,u){u=Bi(-1,u),u.tag=3;var p=i.type.getDerivedStateFromError;if(typeof p=="function"){var v=a.value;u.payload=function(){return p(v)},u.callback=function(){Bm(i,a)}}var b=i.stateNode;return b!==null&&typeof b.componentDidCatch=="function"&&(u.callback=function(){Bm(i,a),typeof p!="function"&&(As===null?As=new Set([this]):As.add(this));var I=a.stack;this.componentDidCatch(a.value,{componentStack:I!==null?I:""})}),u}function x1(i,a,u){var p=i.pingCache;if(p===null){p=i.pingCache=new EI;var v=new Set;p.set(a,v)}else v=p.get(a),v===void 0&&(v=new Set,p.set(a,v));v.has(u)||(v.add(u),i=BI.bind(null,i,a,u),a.then(i,i))}function b1(i){do{var a;if((a=i.tag===13)&&(a=i.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return i;i=i.return}while(i!==null);return null}function w1(i,a,u,p,v){return(i.mode&1)===0?(i===a?i.flags|=65536:(i.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(a=Bi(-1,1),a.tag=2,Cs(u,a,1))),u.lanes|=1),i):(i.flags|=65536,i.lanes=v,i)}var TI=F.ReactCurrentOwner,Mn=!1;function Sn(i,a,u,p){a.child=i===null?Fv(a,null,u,p):Oa(a,i.child,u,p)}function k1(i,a,u,p,v){u=u.render;var b=a.ref;return za(a,v),p=Am(i,a,u,p,b,v),u=Rm(),i!==null&&!Mn?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~v,zi(i,a,v)):(bt&&u&&fm(a),a.flags|=1,Sn(i,a,p,v),a.child)}function _1(i,a,u,p,v){if(i===null){var b=u.type;return typeof b=="function"&&!ap(b)&&b.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(a.tag=15,a.type=b,S1(i,a,b,p,v)):(i=$d(u.type,null,p,a,a.mode,v),i.ref=a.ref,i.return=a,a.child=i)}if(b=i.child,(i.lanes&v)===0){var I=b.memoizedProps;if(u=u.compare,u=u!==null?u:cc,u(I,p)&&i.ref===a.ref)return zi(i,a,v)}return a.flags|=1,i=Ds(b,p),i.ref=a.ref,i.return=a,a.child=i}function S1(i,a,u,p,v){if(i!==null){var b=i.memoizedProps;if(cc(b,p)&&i.ref===a.ref)if(Mn=!1,a.pendingProps=p=b,(i.lanes&v)!==0)(i.flags&131072)!==0&&(Mn=!0);else return a.lanes=i.lanes,zi(i,a,v)}return zm(i,a,u,p,v)}function E1(i,a,u){var p=a.pendingProps,v=p.children,b=i!==null?i.memoizedState:null;if(p.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},ut($a,er),er|=u;else{if((u&1073741824)===0)return i=b!==null?b.baseLanes|u:u,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:i,cachePool:null,transitions:null},a.updateQueue=null,ut($a,er),er|=i,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=b!==null?b.baseLanes:u,ut($a,er),er|=p}else b!==null?(p=b.baseLanes|u,a.memoizedState=null):p=u,ut($a,er),er|=p;return Sn(i,a,v,u),a.child}function T1(i,a){var u=a.ref;(i===null&&u!==null||i!==null&&i.ref!==u)&&(a.flags|=512,a.flags|=2097152)}function zm(i,a,u,p,v){var b=Dn(u)?Co:mn.current;return b=Da(a,b),za(a,v),u=Am(i,a,u,p,b,v),p=Rm(),i!==null&&!Mn?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~v,zi(i,a,v)):(bt&&p&&fm(a),a.flags|=1,Sn(i,a,u,v),a.child)}function I1(i,a,u,p,v){if(Dn(u)){var b=!0;pd(a)}else b=!1;if(za(a,v),a.stateNode===null)Nd(i,a),p1(a,u,p),Lm(a,u,p,v),p=!0;else if(i===null){var I=a.stateNode,O=a.memoizedProps;I.props=O;var z=I.context,J=u.contextType;typeof J=="object"&&J!==null?J=dr(J):(J=Dn(u)?Co:mn.current,J=Da(a,J));var oe=u.getDerivedStateFromProps,ae=typeof oe=="function"||typeof I.getSnapshotBeforeUpdate=="function";ae||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(O!==p||z!==J)&&g1(a,I,p,J),Is=!1;var ie=a.memoizedState;I.state=ie,Sd(a,p,I,v),z=a.memoizedState,O!==p||ie!==z||Nn.current||Is?(typeof oe=="function"&&(Vm(a,u,oe,p),z=a.memoizedState),(O=Is||m1(a,u,O,p,ie,z,J))?(ae||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(a.flags|=4194308)):(typeof I.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=p,a.memoizedState=z),I.props=p,I.state=z,I.context=J,p=O):(typeof I.componentDidMount=="function"&&(a.flags|=4194308),p=!1)}else{I=a.stateNode,Wv(i,a),O=a.memoizedProps,J=a.type===a.elementType?O:Rr(a.type,O),I.props=J,ae=a.pendingProps,ie=I.context,z=u.contextType,typeof z=="object"&&z!==null?z=dr(z):(z=Dn(u)?Co:mn.current,z=Da(a,z));var ve=u.getDerivedStateFromProps;(oe=typeof ve=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(O!==ae||ie!==z)&&g1(a,I,p,z),Is=!1,ie=a.memoizedState,I.state=ie,Sd(a,p,I,v);var ke=a.memoizedState;O!==ae||ie!==ke||Nn.current||Is?(typeof ve=="function"&&(Vm(a,u,ve,p),ke=a.memoizedState),(J=Is||m1(a,u,J,p,ie,ke,z)||!1)?(oe||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(p,ke,z),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(p,ke,z)),typeof I.componentDidUpdate=="function"&&(a.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof I.componentDidUpdate!="function"||O===i.memoizedProps&&ie===i.memoizedState||(a.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||O===i.memoizedProps&&ie===i.memoizedState||(a.flags|=1024),a.memoizedProps=p,a.memoizedState=ke),I.props=p,I.state=ke,I.context=z,p=J):(typeof I.componentDidUpdate!="function"||O===i.memoizedProps&&ie===i.memoizedState||(a.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||O===i.memoizedProps&&ie===i.memoizedState||(a.flags|=1024),p=!1)}return Fm(i,a,u,p,b,v)}function Fm(i,a,u,p,v,b){T1(i,a);var I=(a.flags&128)!==0;if(!p&&!I)return v&&Pv(a,u,!1),zi(i,a,b);p=a.stateNode,TI.current=a;var O=I&&typeof u.getDerivedStateFromError!="function"?null:p.render();return a.flags|=1,i!==null&&I?(a.child=Oa(a,i.child,null,b),a.child=Oa(a,null,O,b)):Sn(i,a,O,b),a.memoizedState=p.state,v&&Pv(a,u,!0),a.child}function C1(i){var a=i.stateNode;a.pendingContext?Av(i,a.pendingContext,a.pendingContext!==a.context):a.context&&Av(i,a.context,!1),Sm(i,a.containerInfo)}function j1(i,a,u,p,v){return La(),ym(v),a.flags|=256,Sn(i,a,u,p),a.child}var Um={dehydrated:null,treeContext:null,retryLane:0};function Wm(i){return{baseLanes:i,cachePool:null,transitions:null}}function A1(i,a,u){var p=a.pendingProps,v=kt.current,b=!1,I=(a.flags&128)!==0,O;if((O=I)||(O=i!==null&&i.memoizedState===null?!1:(v&2)!==0),O?(b=!0,a.flags&=-129):(i===null||i.memoizedState!==null)&&(v|=1),ut(kt,v&1),i===null)return gm(a),i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((a.mode&1)===0?a.lanes=1:i.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(I=p.children,i=p.fallback,b?(p=a.mode,b=a.child,I={mode:"hidden",children:I},(p&1)===0&&b!==null?(b.childLanes=0,b.pendingProps=I):b=Hd(I,p,0,null),i=Oo(i,p,u,null),b.return=a,i.return=a,b.sibling=i,a.child=b,a.child.memoizedState=Wm(u),a.memoizedState=Um,i):$m(a,I));if(v=i.memoizedState,v!==null&&(O=v.dehydrated,O!==null))return II(i,a,I,p,O,v,u);if(b){b=p.fallback,I=a.mode,v=i.child,O=v.sibling;var z={mode:"hidden",children:p.children};return(I&1)===0&&a.child!==v?(p=a.child,p.childLanes=0,p.pendingProps=z,a.deletions=null):(p=Ds(v,z),p.subtreeFlags=v.subtreeFlags&14680064),O!==null?b=Ds(O,b):(b=Oo(b,I,u,null),b.flags|=2),b.return=a,p.return=a,p.sibling=b,a.child=p,p=b,b=a.child,I=i.child.memoizedState,I=I===null?Wm(u):{baseLanes:I.baseLanes|u,cachePool:null,transitions:I.transitions},b.memoizedState=I,b.childLanes=i.childLanes&~u,a.memoizedState=Um,p}return b=i.child,i=b.sibling,p=Ds(b,{mode:"visible",children:p.children}),(a.mode&1)===0&&(p.lanes=u),p.return=a,p.sibling=null,i!==null&&(u=a.deletions,u===null?(a.deletions=[i],a.flags|=16):u.push(i)),a.child=p,a.memoizedState=null,p}function $m(i,a){return a=Hd({mode:"visible",children:a},i.mode,0,null),a.return=i,i.child=a}function Pd(i,a,u,p){return p!==null&&ym(p),Oa(a,i.child,null,u),i=$m(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function II(i,a,u,p,v,b,I){if(u)return a.flags&256?(a.flags&=-257,p=Om(Error(t(422))),Pd(i,a,I,p)):a.memoizedState!==null?(a.child=i.child,a.flags|=128,null):(b=p.fallback,v=a.mode,p=Hd({mode:"visible",children:p.children},v,0,null),b=Oo(b,v,I,null),b.flags|=2,p.return=a,b.return=a,p.sibling=b,a.child=p,(a.mode&1)!==0&&Oa(a,i.child,null,I),a.child.memoizedState=Wm(I),a.memoizedState=Um,b);if((a.mode&1)===0)return Pd(i,a,I,null);if(v.data==="$!"){if(p=v.nextSibling&&v.nextSibling.dataset,p)var O=p.dgst;return p=O,b=Error(t(419)),p=Om(b,p,void 0),Pd(i,a,I,p)}if(O=(I&i.childLanes)!==0,Mn||O){if(p=Jt,p!==null){switch(I&-I){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=(v&(p.suspendedLanes|I))!==0?0:v,v!==0&&v!==b.retryLane&&(b.retryLane=v,Oi(i,v),Dr(p,i,v,-1))}return op(),p=Om(Error(t(421))),Pd(i,a,I,p)}return v.data==="$?"?(a.flags|=128,a.child=i.child,a=zI.bind(null,i),v._reactRetry=a,null):(i=b.treeContext,Zn=_s(v.nextSibling),Jn=a,bt=!0,Ar=null,i!==null&&(cr[ur++]=Vi,cr[ur++]=Li,cr[ur++]=jo,Vi=i.id,Li=i.overflow,jo=a),a=$m(a,p.children),a.flags|=4096,a)}function R1(i,a,u){i.lanes|=a;var p=i.alternate;p!==null&&(p.lanes|=a),wm(i.return,a,u)}function Hm(i,a,u,p,v){var b=i.memoizedState;b===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:p,tail:u,tailMode:v}:(b.isBackwards=a,b.rendering=null,b.renderingStartTime=0,b.last=p,b.tail=u,b.tailMode=v)}function P1(i,a,u){var p=a.pendingProps,v=p.revealOrder,b=p.tail;if(Sn(i,a,p.children,u),p=kt.current,(p&2)!==0)p=p&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&R1(i,u,a);else if(i.tag===19)R1(i,u,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}p&=1}if(ut(kt,p),(a.mode&1)===0)a.memoizedState=null;else switch(v){case"forwards":for(u=a.child,v=null;u!==null;)i=u.alternate,i!==null&&Ed(i)===null&&(v=u),u=u.sibling;u=v,u===null?(v=a.child,a.child=null):(v=u.sibling,u.sibling=null),Hm(a,!1,v,u,b);break;case"backwards":for(u=null,v=a.child,a.child=null;v!==null;){if(i=v.alternate,i!==null&&Ed(i)===null){a.child=v;break}i=v.sibling,v.sibling=u,u=v,v=i}Hm(a,!0,u,null,b);break;case"together":Hm(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Nd(i,a){(a.mode&1)===0&&i!==null&&(i.alternate=null,a.alternate=null,a.flags|=2)}function zi(i,a,u){if(i!==null&&(a.dependencies=i.dependencies),Do|=a.lanes,(u&a.childLanes)===0)return null;if(i!==null&&a.child!==i.child)throw Error(t(153));if(a.child!==null){for(i=a.child,u=Ds(i,i.pendingProps),a.child=u,u.return=a;i.sibling!==null;)i=i.sibling,u=u.sibling=Ds(i,i.pendingProps),u.return=a;u.sibling=null}return a.child}function CI(i,a,u){switch(a.tag){case 3:C1(a),La();break;case 5:Kv(a);break;case 1:Dn(a.type)&&pd(a);break;case 4:Sm(a,a.stateNode.containerInfo);break;case 10:var p=a.type._context,v=a.memoizedProps.value;ut(wd,p._currentValue),p._currentValue=v;break;case 13:if(p=a.memoizedState,p!==null)return p.dehydrated!==null?(ut(kt,kt.current&1),a.flags|=128,null):(u&a.child.childLanes)!==0?A1(i,a,u):(ut(kt,kt.current&1),i=zi(i,a,u),i!==null?i.sibling:null);ut(kt,kt.current&1);break;case 19:if(p=(u&a.childLanes)!==0,(i.flags&128)!==0){if(p)return P1(i,a,u);a.flags|=128}if(v=a.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),ut(kt,kt.current),p)break;return null;case 22:case 23:return a.lanes=0,E1(i,a,u)}return zi(i,a,u)}var N1,Km,D1,M1;N1=function(i,a){for(var u=a.child;u!==null;){if(u.tag===5||u.tag===6)i.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},Km=function(){},D1=function(i,a,u,p){var v=i.memoizedProps;if(v!==p){i=a.stateNode,Po(fi.current);var b=null;switch(u){case"input":v=jn(i,v),p=jn(i,p),b=[];break;case"select":v=le({},v,{value:void 0}),p=le({},p,{value:void 0}),b=[];break;case"textarea":v=X(i,v),p=X(i,p),b=[];break;default:typeof v.onClick!="function"&&typeof p.onClick=="function"&&(i.onclick=hd)}Tr(u,p);var I;u=null;for(J in v)if(!p.hasOwnProperty(J)&&v.hasOwnProperty(J)&&v[J]!=null)if(J==="style"){var O=v[J];for(I in O)O.hasOwnProperty(I)&&(u||(u={}),u[I]="")}else J!=="dangerouslySetInnerHTML"&&J!=="children"&&J!=="suppressContentEditableWarning"&&J!=="suppressHydrationWarning"&&J!=="autoFocus"&&(s.hasOwnProperty(J)?b||(b=[]):(b=b||[]).push(J,null));for(J in p){var z=p[J];if(O=v!=null?v[J]:void 0,p.hasOwnProperty(J)&&z!==O&&(z!=null||O!=null))if(J==="style")if(O){for(I in O)!O.hasOwnProperty(I)||z&&z.hasOwnProperty(I)||(u||(u={}),u[I]="");for(I in z)z.hasOwnProperty(I)&&O[I]!==z[I]&&(u||(u={}),u[I]=z[I])}else u||(b||(b=[]),b.push(J,u)),u=z;else J==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,O=O?O.__html:void 0,z!=null&&O!==z&&(b=b||[]).push(J,z)):J==="children"?typeof z!="string"&&typeof z!="number"||(b=b||[]).push(J,""+z):J!=="suppressContentEditableWarning"&&J!=="suppressHydrationWarning"&&(s.hasOwnProperty(J)?(z!=null&&J==="onScroll"&&mt("scroll",i),b||O===z||(b=[])):(b=b||[]).push(J,z))}u&&(b=b||[]).push("style",u);var J=b;(a.updateQueue=J)&&(a.flags|=4)}},M1=function(i,a,u,p){u!==p&&(a.flags|=4)};function Sc(i,a){if(!bt)switch(i.tailMode){case"hidden":a=i.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:p.sibling=null}}function gn(i){var a=i.alternate!==null&&i.alternate.child===i.child,u=0,p=0;if(a)for(var v=i.child;v!==null;)u|=v.lanes|v.childLanes,p|=v.subtreeFlags&14680064,p|=v.flags&14680064,v.return=i,v=v.sibling;else for(v=i.child;v!==null;)u|=v.lanes|v.childLanes,p|=v.subtreeFlags,p|=v.flags,v.return=i,v=v.sibling;return i.subtreeFlags|=p,i.childLanes=u,a}function jI(i,a,u){var p=a.pendingProps;switch(mm(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gn(a),null;case 1:return Dn(a.type)&&md(),gn(a),null;case 3:return p=a.stateNode,Fa(),pt(Nn),pt(mn),Im(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(i===null||i.child===null)&&(xd(a)?a.flags|=4:i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Ar!==null&&(rp(Ar),Ar=null))),Km(i,a),gn(a),null;case 5:Em(a);var v=Po(xc.current);if(u=a.type,i!==null&&a.stateNode!=null)D1(i,a,u,p,v),i.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!p){if(a.stateNode===null)throw Error(t(166));return gn(a),null}if(i=Po(fi.current),xd(a)){p=a.stateNode,u=a.type;var b=a.memoizedProps;switch(p[hi]=a,p[mc]=b,i=(a.mode&1)!==0,u){case"dialog":mt("cancel",p),mt("close",p);break;case"iframe":case"object":case"embed":mt("load",p);break;case"video":case"audio":for(v=0;v<dc.length;v++)mt(dc[v],p);break;case"source":mt("error",p);break;case"img":case"image":case"link":mt("error",p),mt("load",p);break;case"details":mt("toggle",p);break;case"input":An(p,b),mt("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!b.multiple},mt("invalid",p);break;case"textarea":ye(p,b),mt("invalid",p)}Tr(u,b),v=null;for(var I in b)if(b.hasOwnProperty(I)){var O=b[I];I==="children"?typeof O=="string"?p.textContent!==O&&(b.suppressHydrationWarning!==!0&&dd(p.textContent,O,i),v=["children",O]):typeof O=="number"&&p.textContent!==""+O&&(b.suppressHydrationWarning!==!0&&dd(p.textContent,O,i),v=["children",""+O]):s.hasOwnProperty(I)&&O!=null&&I==="onScroll"&&mt("scroll",p)}switch(u){case"input":xt(p),Yr(p,b,!0);break;case"textarea":xt(p),Ue(p);break;case"select":case"option":break;default:typeof b.onClick=="function"&&(p.onclick=hd)}p=v,a.updateQueue=p,p!==null&&(a.flags|=4)}else{I=v.nodeType===9?v:v.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=It(u)),i==="http://www.w3.org/1999/xhtml"?u==="script"?(i=I.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof p.is=="string"?i=I.createElement(u,{is:p.is}):(i=I.createElement(u),u==="select"&&(I=i,p.multiple?I.multiple=!0:p.size&&(I.size=p.size))):i=I.createElementNS(i,u),i[hi]=a,i[mc]=p,N1(i,a,!1,!1),a.stateNode=i;e:{switch(I=ua(u,p),u){case"dialog":mt("cancel",i),mt("close",i),v=p;break;case"iframe":case"object":case"embed":mt("load",i),v=p;break;case"video":case"audio":for(v=0;v<dc.length;v++)mt(dc[v],i);v=p;break;case"source":mt("error",i),v=p;break;case"img":case"image":case"link":mt("error",i),mt("load",i),v=p;break;case"details":mt("toggle",i),v=p;break;case"input":An(i,p),v=jn(i,p),mt("invalid",i);break;case"option":v=p;break;case"select":i._wrapperState={wasMultiple:!!p.multiple},v=le({},p,{value:void 0}),mt("invalid",i);break;case"textarea":ye(i,p),v=X(i,p),mt("invalid",i);break;default:v=p}Tr(u,v),O=v;for(b in O)if(O.hasOwnProperty(b)){var z=O[b];b==="style"?ca(i,z):b==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,z!=null&&Bu(i,z)):b==="children"?typeof z=="string"?(u!=="textarea"||z!=="")&&fo(i,z):typeof z=="number"&&fo(i,""+z):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(s.hasOwnProperty(b)?z!=null&&b==="onScroll"&&mt("scroll",i):z!=null&&N(i,b,z,I))}switch(u){case"input":xt(i),Yr(i,p,!1);break;case"textarea":xt(i),Ue(i);break;case"option":p.value!=null&&i.setAttribute("value",""+q(p.value));break;case"select":i.multiple=!!p.multiple,b=p.value,b!=null?Hn(i,!!p.multiple,b,!1):p.defaultValue!=null&&Hn(i,!!p.multiple,p.defaultValue,!0);break;default:typeof v.onClick=="function"&&(i.onclick=hd)}switch(u){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return gn(a),null;case 6:if(i&&a.stateNode!=null)M1(i,a,i.memoizedProps,p);else{if(typeof p!="string"&&a.stateNode===null)throw Error(t(166));if(u=Po(xc.current),Po(fi.current),xd(a)){if(p=a.stateNode,u=a.memoizedProps,p[hi]=a,(b=p.nodeValue!==u)&&(i=Jn,i!==null))switch(i.tag){case 3:dd(p.nodeValue,u,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&dd(p.nodeValue,u,(i.mode&1)!==0)}b&&(a.flags|=4)}else p=(u.nodeType===9?u:u.ownerDocument).createTextNode(p),p[hi]=a,a.stateNode=p}return gn(a),null;case 13:if(pt(kt),p=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(bt&&Zn!==null&&(a.mode&1)!==0&&(a.flags&128)===0)Ov(),La(),a.flags|=98560,b=!1;else if(b=xd(a),p!==null&&p.dehydrated!==null){if(i===null){if(!b)throw Error(t(318));if(b=a.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(t(317));b[hi]=a}else La(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;gn(a),b=!1}else Ar!==null&&(rp(Ar),Ar=null),b=!0;if(!b)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=u,a):(p=p!==null,p!==(i!==null&&i.memoizedState!==null)&&p&&(a.child.flags|=8192,(a.mode&1)!==0&&(i===null||(kt.current&1)!==0?qt===0&&(qt=3):op())),a.updateQueue!==null&&(a.flags|=4),gn(a),null);case 4:return Fa(),Km(i,a),i===null&&hc(a.stateNode.containerInfo),gn(a),null;case 10:return bm(a.type._context),gn(a),null;case 17:return Dn(a.type)&&md(),gn(a),null;case 19:if(pt(kt),b=a.memoizedState,b===null)return gn(a),null;if(p=(a.flags&128)!==0,I=b.rendering,I===null)if(p)Sc(b,!1);else{if(qt!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(I=Ed(i),I!==null){for(a.flags|=128,Sc(b,!1),p=I.updateQueue,p!==null&&(a.updateQueue=p,a.flags|=4),a.subtreeFlags=0,p=u,u=a.child;u!==null;)b=u,i=p,b.flags&=14680066,I=b.alternate,I===null?(b.childLanes=0,b.lanes=i,b.child=null,b.subtreeFlags=0,b.memoizedProps=null,b.memoizedState=null,b.updateQueue=null,b.dependencies=null,b.stateNode=null):(b.childLanes=I.childLanes,b.lanes=I.lanes,b.child=I.child,b.subtreeFlags=0,b.deletions=null,b.memoizedProps=I.memoizedProps,b.memoizedState=I.memoizedState,b.updateQueue=I.updateQueue,b.type=I.type,i=I.dependencies,b.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),u=u.sibling;return ut(kt,kt.current&1|2),a.child}i=i.sibling}b.tail!==null&&ft()>Ha&&(a.flags|=128,p=!0,Sc(b,!1),a.lanes=4194304)}else{if(!p)if(i=Ed(I),i!==null){if(a.flags|=128,p=!0,u=i.updateQueue,u!==null&&(a.updateQueue=u,a.flags|=4),Sc(b,!0),b.tail===null&&b.tailMode==="hidden"&&!I.alternate&&!bt)return gn(a),null}else 2*ft()-b.renderingStartTime>Ha&&u!==1073741824&&(a.flags|=128,p=!0,Sc(b,!1),a.lanes=4194304);b.isBackwards?(I.sibling=a.child,a.child=I):(u=b.last,u!==null?u.sibling=I:a.child=I,b.last=I)}return b.tail!==null?(a=b.tail,b.rendering=a,b.tail=a.sibling,b.renderingStartTime=ft(),a.sibling=null,u=kt.current,ut(kt,p?u&1|2:u&1),a):(gn(a),null);case 22:case 23:return sp(),p=a.memoizedState!==null,i!==null&&i.memoizedState!==null!==p&&(a.flags|=8192),p&&(a.mode&1)!==0?(er&1073741824)!==0&&(gn(a),a.subtreeFlags&6&&(a.flags|=8192)):gn(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function AI(i,a){switch(mm(a),a.tag){case 1:return Dn(a.type)&&md(),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return Fa(),pt(Nn),pt(mn),Im(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 5:return Em(a),null;case 13:if(pt(kt),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(t(340));La()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return pt(kt),null;case 4:return Fa(),null;case 10:return bm(a.type._context),null;case 22:case 23:return sp(),null;case 24:return null;default:return null}}var Dd=!1,yn=!1,RI=typeof WeakSet=="function"?WeakSet:Set,we=null;function Wa(i,a){var u=i.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(p){jt(i,a,p)}else u.current=null}function qm(i,a,u){try{u()}catch(p){jt(i,a,p)}}var V1=!1;function PI(i,a){if(sm=Ri,i=mv(),Xf(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var p=u.getSelection&&u.getSelection();if(p&&p.rangeCount!==0){u=p.anchorNode;var v=p.anchorOffset,b=p.focusNode;p=p.focusOffset;try{u.nodeType,b.nodeType}catch{u=null;break e}var I=0,O=-1,z=-1,J=0,oe=0,ae=i,ie=null;t:for(;;){for(var ve;ae!==u||v!==0&&ae.nodeType!==3||(O=I+v),ae!==b||p!==0&&ae.nodeType!==3||(z=I+p),ae.nodeType===3&&(I+=ae.nodeValue.length),(ve=ae.firstChild)!==null;)ie=ae,ae=ve;for(;;){if(ae===i)break t;if(ie===u&&++J===v&&(O=I),ie===b&&++oe===p&&(z=I),(ve=ae.nextSibling)!==null)break;ae=ie,ie=ae.parentNode}ae=ve}u=O===-1||z===-1?null:{start:O,end:z}}else u=null}u=u||{start:0,end:0}}else u=null;for(om={focusedElem:i,selectionRange:u},Ri=!1,we=a;we!==null;)if(a=we,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,we=i;else for(;we!==null;){a=we;try{var ke=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(ke!==null){var _e=ke.memoizedProps,Nt=ke.memoizedState,G=a.stateNode,W=G.getSnapshotBeforeUpdate(a.elementType===a.type?_e:Rr(a.type,_e),Nt);G.__reactInternalSnapshotBeforeUpdate=W}break;case 3:var Y=a.stateNode.containerInfo;Y.nodeType===1?Y.textContent="":Y.nodeType===9&&Y.documentElement&&Y.removeChild(Y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ue){jt(a,a.return,ue)}if(i=a.sibling,i!==null){i.return=a.return,we=i;break}we=a.return}return ke=V1,V1=!1,ke}function Ec(i,a,u){var p=a.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var v=p=p.next;do{if((v.tag&i)===i){var b=v.destroy;v.destroy=void 0,b!==void 0&&qm(a,u,b)}v=v.next}while(v!==p)}}function Md(i,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var u=a=a.next;do{if((u.tag&i)===i){var p=u.create;u.destroy=p()}u=u.next}while(u!==a)}}function Gm(i){var a=i.ref;if(a!==null){var u=i.stateNode;switch(i.tag){case 5:i=u;break;default:i=u}typeof a=="function"?a(i):a.current=i}}function L1(i){var a=i.alternate;a!==null&&(i.alternate=null,L1(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&(delete a[hi],delete a[mc],delete a[um],delete a[mI],delete a[pI])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function O1(i){return i.tag===5||i.tag===3||i.tag===4}function B1(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||O1(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Qm(i,a,u){var p=i.tag;if(p===5||p===6)i=i.stateNode,a?u.nodeType===8?u.parentNode.insertBefore(i,a):u.insertBefore(i,a):(u.nodeType===8?(a=u.parentNode,a.insertBefore(i,u)):(a=u,a.appendChild(i)),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=hd));else if(p!==4&&(i=i.child,i!==null))for(Qm(i,a,u),i=i.sibling;i!==null;)Qm(i,a,u),i=i.sibling}function Ym(i,a,u){var p=i.tag;if(p===5||p===6)i=i.stateNode,a?u.insertBefore(i,a):u.appendChild(i);else if(p!==4&&(i=i.child,i!==null))for(Ym(i,a,u),i=i.sibling;i!==null;)Ym(i,a,u),i=i.sibling}var on=null,Pr=!1;function js(i,a,u){for(u=u.child;u!==null;)z1(i,a,u),u=u.sibling}function z1(i,a,u){if(Kn&&typeof Kn.onCommitFiberUnmount=="function")try{Kn.onCommitFiberUnmount(vo,u)}catch{}switch(u.tag){case 5:yn||Wa(u,a);case 6:var p=on,v=Pr;on=null,js(i,a,u),on=p,Pr=v,on!==null&&(Pr?(i=on,u=u.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)):on.removeChild(u.stateNode));break;case 18:on!==null&&(Pr?(i=on,u=u.stateNode,i.nodeType===8?cm(i.parentNode,u):i.nodeType===1&&cm(i,u),xs(i)):cm(on,u.stateNode));break;case 4:p=on,v=Pr,on=u.stateNode.containerInfo,Pr=!0,js(i,a,u),on=p,Pr=v;break;case 0:case 11:case 14:case 15:if(!yn&&(p=u.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){v=p=p.next;do{var b=v,I=b.destroy;b=b.tag,I!==void 0&&((b&2)!==0||(b&4)!==0)&&qm(u,a,I),v=v.next}while(v!==p)}js(i,a,u);break;case 1:if(!yn&&(Wa(u,a),p=u.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=u.memoizedProps,p.state=u.memoizedState,p.componentWillUnmount()}catch(O){jt(u,a,O)}js(i,a,u);break;case 21:js(i,a,u);break;case 22:u.mode&1?(yn=(p=yn)||u.memoizedState!==null,js(i,a,u),yn=p):js(i,a,u);break;default:js(i,a,u)}}function F1(i){var a=i.updateQueue;if(a!==null){i.updateQueue=null;var u=i.stateNode;u===null&&(u=i.stateNode=new RI),a.forEach(function(p){var v=FI.bind(null,i,p);u.has(p)||(u.add(p),p.then(v,v))})}}function Nr(i,a){var u=a.deletions;if(u!==null)for(var p=0;p<u.length;p++){var v=u[p];try{var b=i,I=a,O=I;e:for(;O!==null;){switch(O.tag){case 5:on=O.stateNode,Pr=!1;break e;case 3:on=O.stateNode.containerInfo,Pr=!0;break e;case 4:on=O.stateNode.containerInfo,Pr=!0;break e}O=O.return}if(on===null)throw Error(t(160));z1(b,I,v),on=null,Pr=!1;var z=v.alternate;z!==null&&(z.return=null),v.return=null}catch(J){jt(v,a,J)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)U1(a,i),a=a.sibling}function U1(i,a){var u=i.alternate,p=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Nr(a,i),pi(i),p&4){try{Ec(3,i,i.return),Md(3,i)}catch(_e){jt(i,i.return,_e)}try{Ec(5,i,i.return)}catch(_e){jt(i,i.return,_e)}}break;case 1:Nr(a,i),pi(i),p&512&&u!==null&&Wa(u,u.return);break;case 5:if(Nr(a,i),pi(i),p&512&&u!==null&&Wa(u,u.return),i.flags&32){var v=i.stateNode;try{fo(v,"")}catch(_e){jt(i,i.return,_e)}}if(p&4&&(v=i.stateNode,v!=null)){var b=i.memoizedProps,I=u!==null?u.memoizedProps:b,O=i.type,z=i.updateQueue;if(i.updateQueue=null,z!==null)try{O==="input"&&b.type==="radio"&&b.name!=null&&Rn(v,b),ua(O,I);var J=ua(O,b);for(I=0;I<z.length;I+=2){var oe=z[I],ae=z[I+1];oe==="style"?ca(v,ae):oe==="dangerouslySetInnerHTML"?Bu(v,ae):oe==="children"?fo(v,ae):N(v,oe,ae,J)}switch(O){case"input":or(v,b);break;case"textarea":Fe(v,b);break;case"select":var ie=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!b.multiple;var ve=b.value;ve!=null?Hn(v,!!b.multiple,ve,!1):ie!==!!b.multiple&&(b.defaultValue!=null?Hn(v,!!b.multiple,b.defaultValue,!0):Hn(v,!!b.multiple,b.multiple?[]:"",!1))}v[mc]=b}catch(_e){jt(i,i.return,_e)}}break;case 6:if(Nr(a,i),pi(i),p&4){if(i.stateNode===null)throw Error(t(162));v=i.stateNode,b=i.memoizedProps;try{v.nodeValue=b}catch(_e){jt(i,i.return,_e)}}break;case 3:if(Nr(a,i),pi(i),p&4&&u!==null&&u.memoizedState.isDehydrated)try{xs(a.containerInfo)}catch(_e){jt(i,i.return,_e)}break;case 4:Nr(a,i),pi(i);break;case 13:Nr(a,i),pi(i),v=i.child,v.flags&8192&&(b=v.memoizedState!==null,v.stateNode.isHidden=b,!b||v.alternate!==null&&v.alternate.memoizedState!==null||(Zm=ft())),p&4&&F1(i);break;case 22:if(oe=u!==null&&u.memoizedState!==null,i.mode&1?(yn=(J=yn)||oe,Nr(a,i),yn=J):Nr(a,i),pi(i),p&8192){if(J=i.memoizedState!==null,(i.stateNode.isHidden=J)&&!oe&&(i.mode&1)!==0)for(we=i,oe=i.child;oe!==null;){for(ae=we=oe;we!==null;){switch(ie=we,ve=ie.child,ie.tag){case 0:case 11:case 14:case 15:Ec(4,ie,ie.return);break;case 1:Wa(ie,ie.return);var ke=ie.stateNode;if(typeof ke.componentWillUnmount=="function"){p=ie,u=ie.return;try{a=p,ke.props=a.memoizedProps,ke.state=a.memoizedState,ke.componentWillUnmount()}catch(_e){jt(p,u,_e)}}break;case 5:Wa(ie,ie.return);break;case 22:if(ie.memoizedState!==null){H1(ae);continue}}ve!==null?(ve.return=ie,we=ve):H1(ae)}oe=oe.sibling}e:for(oe=null,ae=i;;){if(ae.tag===5){if(oe===null){oe=ae;try{v=ae.stateNode,J?(b=v.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none"):(O=ae.stateNode,z=ae.memoizedProps.style,I=z!=null&&z.hasOwnProperty("display")?z.display:null,O.style.display=us("display",I))}catch(_e){jt(i,i.return,_e)}}}else if(ae.tag===6){if(oe===null)try{ae.stateNode.nodeValue=J?"":ae.memoizedProps}catch(_e){jt(i,i.return,_e)}}else if((ae.tag!==22&&ae.tag!==23||ae.memoizedState===null||ae===i)&&ae.child!==null){ae.child.return=ae,ae=ae.child;continue}if(ae===i)break e;for(;ae.sibling===null;){if(ae.return===null||ae.return===i)break e;oe===ae&&(oe=null),ae=ae.return}oe===ae&&(oe=null),ae.sibling.return=ae.return,ae=ae.sibling}}break;case 19:Nr(a,i),pi(i),p&4&&F1(i);break;case 21:break;default:Nr(a,i),pi(i)}}function pi(i){var a=i.flags;if(a&2){try{e:{for(var u=i.return;u!==null;){if(O1(u)){var p=u;break e}u=u.return}throw Error(t(160))}switch(p.tag){case 5:var v=p.stateNode;p.flags&32&&(fo(v,""),p.flags&=-33);var b=B1(i);Ym(i,b,v);break;case 3:case 4:var I=p.stateNode.containerInfo,O=B1(i);Qm(i,O,I);break;default:throw Error(t(161))}}catch(z){jt(i,i.return,z)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function NI(i,a,u){we=i,W1(i)}function W1(i,a,u){for(var p=(i.mode&1)!==0;we!==null;){var v=we,b=v.child;if(v.tag===22&&p){var I=v.memoizedState!==null||Dd;if(!I){var O=v.alternate,z=O!==null&&O.memoizedState!==null||yn;O=Dd;var J=yn;if(Dd=I,(yn=z)&&!J)for(we=v;we!==null;)I=we,z=I.child,I.tag===22&&I.memoizedState!==null?K1(v):z!==null?(z.return=I,we=z):K1(v);for(;b!==null;)we=b,W1(b),b=b.sibling;we=v,Dd=O,yn=J}$1(i)}else(v.subtreeFlags&8772)!==0&&b!==null?(b.return=v,we=b):$1(i)}}function $1(i){for(;we!==null;){var a=we;if((a.flags&8772)!==0){var u=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:yn||Md(5,a);break;case 1:var p=a.stateNode;if(a.flags&4&&!yn)if(u===null)p.componentDidMount();else{var v=a.elementType===a.type?u.memoizedProps:Rr(a.type,u.memoizedProps);p.componentDidUpdate(v,u.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var b=a.updateQueue;b!==null&&Hv(a,b,p);break;case 3:var I=a.updateQueue;if(I!==null){if(u=null,a.child!==null)switch(a.child.tag){case 5:u=a.child.stateNode;break;case 1:u=a.child.stateNode}Hv(a,I,u)}break;case 5:var O=a.stateNode;if(u===null&&a.flags&4){u=O;var z=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":z.autoFocus&&u.focus();break;case"img":z.src&&(u.src=z.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var J=a.alternate;if(J!==null){var oe=J.memoizedState;if(oe!==null){var ae=oe.dehydrated;ae!==null&&xs(ae)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}yn||a.flags&512&&Gm(a)}catch(ie){jt(a,a.return,ie)}}if(a===i){we=null;break}if(u=a.sibling,u!==null){u.return=a.return,we=u;break}we=a.return}}function H1(i){for(;we!==null;){var a=we;if(a===i){we=null;break}var u=a.sibling;if(u!==null){u.return=a.return,we=u;break}we=a.return}}function K1(i){for(;we!==null;){var a=we;try{switch(a.tag){case 0:case 11:case 15:var u=a.return;try{Md(4,a)}catch(z){jt(a,u,z)}break;case 1:var p=a.stateNode;if(typeof p.componentDidMount=="function"){var v=a.return;try{p.componentDidMount()}catch(z){jt(a,v,z)}}var b=a.return;try{Gm(a)}catch(z){jt(a,b,z)}break;case 5:var I=a.return;try{Gm(a)}catch(z){jt(a,I,z)}}}catch(z){jt(a,a.return,z)}if(a===i){we=null;break}var O=a.sibling;if(O!==null){O.return=a.return,we=O;break}we=a.return}}var DI=Math.ceil,Vd=F.ReactCurrentDispatcher,Xm=F.ReactCurrentOwner,fr=F.ReactCurrentBatchConfig,Ze=0,Jt=null,zt=null,an=0,er=0,$a=Ss(0),qt=0,Tc=null,Do=0,Ld=0,Jm=0,Ic=null,Vn=null,Zm=0,Ha=1/0,Fi=null,Od=!1,ep=null,As=null,Bd=!1,Rs=null,zd=0,Cc=0,tp=null,Fd=-1,Ud=0;function En(){return(Ze&6)!==0?ft():Fd!==-1?Fd:Fd=ft()}function Ps(i){return(i.mode&1)===0?1:(Ze&2)!==0&&an!==0?an&-an:yI.transition!==null?(Ud===0&&(Ud=Ql()),Ud):(i=Ye,i!==0||(i=window.event,i=i===void 0?16:ba(i.type)),i)}function Dr(i,a,u,p){if(50<Cc)throw Cc=0,tp=null,Error(t(185));ko(i,u,p),((Ze&2)===0||i!==Jt)&&(i===Jt&&((Ze&2)===0&&(Ld|=u),qt===4&&Ns(i,an)),Ln(i,p),u===1&&Ze===0&&(a.mode&1)===0&&(Ha=ft()+500,gd&&Ts()))}function Ln(i,a){var u=i.callbackNode;wo(i,a);var p=Ci(i,i===Jt?an:0);if(p===0)u!==null&&fa(u),i.callbackNode=null,i.callbackPriority=0;else if(a=p&-p,i.callbackPriority!==a){if(u!=null&&fa(u),a===1)i.tag===0?gI(G1.bind(null,i)):Nv(G1.bind(null,i)),hI(function(){(Ze&6)===0&&Ts()}),u=null;else{switch(ni(p)){case 1:u=ma;break;case 4:u=Kl;break;case 16:u=yo;break;case 536870912:u=pa;break;default:u=yo}u=nx(u,q1.bind(null,i))}i.callbackPriority=a,i.callbackNode=u}}function q1(i,a){if(Fd=-1,Ud=0,(Ze&6)!==0)throw Error(t(327));var u=i.callbackNode;if(Ka()&&i.callbackNode!==u)return null;var p=Ci(i,i===Jt?an:0);if(p===0)return null;if((p&30)!==0||(p&i.expiredLanes)!==0||a)a=Wd(i,p);else{a=p;var v=Ze;Ze|=2;var b=Y1();(Jt!==i||an!==a)&&(Fi=null,Ha=ft()+500,Vo(i,a));do try{LI();break}catch(O){Q1(i,O)}while(!0);xm(),Vd.current=b,Ze=v,zt!==null?a=0:(Jt=null,an=0,a=qt)}if(a!==0){if(a===2&&(v=Gl(i),v!==0&&(p=v,a=np(i,v))),a===1)throw u=Tc,Vo(i,0),Ns(i,p),Ln(i,ft()),u;if(a===6)Ns(i,p);else{if(v=i.current.alternate,(p&30)===0&&!MI(v)&&(a=Wd(i,p),a===2&&(b=Gl(i),b!==0&&(p=b,a=np(i,b))),a===1))throw u=Tc,Vo(i,0),Ns(i,p),Ln(i,ft()),u;switch(i.finishedWork=v,i.finishedLanes=p,a){case 0:case 1:throw Error(t(345));case 2:Lo(i,Vn,Fi);break;case 3:if(Ns(i,p),(p&130023424)===p&&(a=Zm+500-ft(),10<a)){if(Ci(i,0)!==0)break;if(v=i.suspendedLanes,(v&p)!==p){En(),i.pingedLanes|=i.suspendedLanes&v;break}i.timeoutHandle=lm(Lo.bind(null,i,Vn,Fi),a);break}Lo(i,Vn,Fi);break;case 4:if(Ns(i,p),(p&4194240)===p)break;for(a=i.eventTimes,v=-1;0<p;){var I=31-qn(p);b=1<<I,I=a[I],I>v&&(v=I),p&=~b}if(p=v,p=ft()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*DI(p/1960))-p,10<p){i.timeoutHandle=lm(Lo.bind(null,i,Vn,Fi),p);break}Lo(i,Vn,Fi);break;case 5:Lo(i,Vn,Fi);break;default:throw Error(t(329))}}}return Ln(i,ft()),i.callbackNode===u?q1.bind(null,i):null}function np(i,a){var u=Ic;return i.current.memoizedState.isDehydrated&&(Vo(i,a).flags|=256),i=Wd(i,a),i!==2&&(a=Vn,Vn=u,a!==null&&rp(a)),i}function rp(i){Vn===null?Vn=i:Vn.push.apply(Vn,i)}function MI(i){for(var a=i;;){if(a.flags&16384){var u=a.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var p=0;p<u.length;p++){var v=u[p],b=v.getSnapshot;v=v.value;try{if(!jr(b(),v))return!1}catch{return!1}}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Ns(i,a){for(a&=~Jm,a&=~Ld,i.suspendedLanes|=a,i.pingedLanes&=~a,i=i.expirationTimes;0<a;){var u=31-qn(a),p=1<<u;i[u]=-1,a&=~p}}function G1(i){if((Ze&6)!==0)throw Error(t(327));Ka();var a=Ci(i,0);if((a&1)===0)return Ln(i,ft()),null;var u=Wd(i,a);if(i.tag!==0&&u===2){var p=Gl(i);p!==0&&(a=p,u=np(i,p))}if(u===1)throw u=Tc,Vo(i,0),Ns(i,a),Ln(i,ft()),u;if(u===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=a,Lo(i,Vn,Fi),Ln(i,ft()),null}function ip(i,a){var u=Ze;Ze|=1;try{return i(a)}finally{Ze=u,Ze===0&&(Ha=ft()+500,gd&&Ts())}}function Mo(i){Rs!==null&&Rs.tag===0&&(Ze&6)===0&&Ka();var a=Ze;Ze|=1;var u=fr.transition,p=Ye;try{if(fr.transition=null,Ye=1,i)return i()}finally{Ye=p,fr.transition=u,Ze=a,(Ze&6)===0&&Ts()}}function sp(){er=$a.current,pt($a)}function Vo(i,a){i.finishedWork=null,i.finishedLanes=0;var u=i.timeoutHandle;if(u!==-1&&(i.timeoutHandle=-1,dI(u)),zt!==null)for(u=zt.return;u!==null;){var p=u;switch(mm(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&md();break;case 3:Fa(),pt(Nn),pt(mn),Im();break;case 5:Em(p);break;case 4:Fa();break;case 13:pt(kt);break;case 19:pt(kt);break;case 10:bm(p.type._context);break;case 22:case 23:sp()}u=u.return}if(Jt=i,zt=i=Ds(i.current,null),an=er=a,qt=0,Tc=null,Jm=Ld=Do=0,Vn=Ic=null,Ro!==null){for(a=0;a<Ro.length;a++)if(u=Ro[a],p=u.interleaved,p!==null){u.interleaved=null;var v=p.next,b=u.pending;if(b!==null){var I=b.next;b.next=v,p.next=I}u.pending=p}Ro=null}return i}function Q1(i,a){do{var u=zt;try{if(xm(),Td.current=Ad,Id){for(var p=_t.memoizedState;p!==null;){var v=p.queue;v!==null&&(v.pending=null),p=p.next}Id=!1}if(No=0,Xt=Kt=_t=null,bc=!1,wc=0,Xm.current=null,u===null||u.return===null){qt=1,Tc=a,zt=null;break}e:{var b=i,I=u.return,O=u,z=a;if(a=an,O.flags|=32768,z!==null&&typeof z=="object"&&typeof z.then=="function"){var J=z,oe=O,ae=oe.tag;if((oe.mode&1)===0&&(ae===0||ae===11||ae===15)){var ie=oe.alternate;ie?(oe.updateQueue=ie.updateQueue,oe.memoizedState=ie.memoizedState,oe.lanes=ie.lanes):(oe.updateQueue=null,oe.memoizedState=null)}var ve=b1(I);if(ve!==null){ve.flags&=-257,w1(ve,I,O,b,a),ve.mode&1&&x1(b,J,a),a=ve,z=J;var ke=a.updateQueue;if(ke===null){var _e=new Set;_e.add(z),a.updateQueue=_e}else ke.add(z);break e}else{if((a&1)===0){x1(b,J,a),op();break e}z=Error(t(426))}}else if(bt&&O.mode&1){var Nt=b1(I);if(Nt!==null){(Nt.flags&65536)===0&&(Nt.flags|=256),w1(Nt,I,O,b,a),ym(Ua(z,O));break e}}b=z=Ua(z,O),qt!==4&&(qt=2),Ic===null?Ic=[b]:Ic.push(b),b=I;do{switch(b.tag){case 3:b.flags|=65536,a&=-a,b.lanes|=a;var G=y1(b,z,a);$v(b,G);break e;case 1:O=z;var W=b.type,Y=b.stateNode;if((b.flags&128)===0&&(typeof W.getDerivedStateFromError=="function"||Y!==null&&typeof Y.componentDidCatch=="function"&&(As===null||!As.has(Y)))){b.flags|=65536,a&=-a,b.lanes|=a;var ue=v1(b,O,a);$v(b,ue);break e}}b=b.return}while(b!==null)}J1(u)}catch(Ee){a=Ee,zt===u&&u!==null&&(zt=u=u.return);continue}break}while(!0)}function Y1(){var i=Vd.current;return Vd.current=Ad,i===null?Ad:i}function op(){(qt===0||qt===3||qt===2)&&(qt=4),Jt===null||(Do&268435455)===0&&(Ld&268435455)===0||Ns(Jt,an)}function Wd(i,a){var u=Ze;Ze|=2;var p=Y1();(Jt!==i||an!==a)&&(Fi=null,Vo(i,a));do try{VI();break}catch(v){Q1(i,v)}while(!0);if(xm(),Ze=u,Vd.current=p,zt!==null)throw Error(t(261));return Jt=null,an=0,qt}function VI(){for(;zt!==null;)X1(zt)}function LI(){for(;zt!==null&&!go();)X1(zt)}function X1(i){var a=tx(i.alternate,i,er);i.memoizedProps=i.pendingProps,a===null?J1(i):zt=a,Xm.current=null}function J1(i){var a=i;do{var u=a.alternate;if(i=a.return,(a.flags&32768)===0){if(u=jI(u,a,er),u!==null){zt=u;return}}else{if(u=AI(u,a),u!==null){u.flags&=32767,zt=u;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{qt=6,zt=null;return}}if(a=a.sibling,a!==null){zt=a;return}zt=a=i}while(a!==null);qt===0&&(qt=5)}function Lo(i,a,u){var p=Ye,v=fr.transition;try{fr.transition=null,Ye=1,OI(i,a,u,p)}finally{fr.transition=v,Ye=p}return null}function OI(i,a,u,p){do Ka();while(Rs!==null);if((Ze&6)!==0)throw Error(t(327));u=i.finishedWork;var v=i.finishedLanes;if(u===null)return null;if(i.finishedWork=null,i.finishedLanes=0,u===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var b=u.lanes|u.childLanes;if(Kf(i,b),i===Jt&&(zt=Jt=null,an=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Bd||(Bd=!0,nx(yo,function(){return Ka(),null})),b=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||b){b=fr.transition,fr.transition=null;var I=Ye;Ye=1;var O=Ze;Ze|=4,Xm.current=null,PI(i,u),U1(u,i),iI(om),Ri=!!sm,om=sm=null,i.current=u,NI(u),Ii(),Ze=O,Ye=I,fr.transition=b}else i.current=u;if(Bd&&(Bd=!1,Rs=i,zd=v),b=i.pendingLanes,b===0&&(As=null),Yu(u.stateNode),Ln(i,ft()),a!==null)for(p=i.onRecoverableError,u=0;u<a.length;u++)v=a[u],p(v.value,{componentStack:v.stack,digest:v.digest});if(Od)throw Od=!1,i=ep,ep=null,i;return(zd&1)!==0&&i.tag!==0&&Ka(),b=i.pendingLanes,(b&1)!==0?i===tp?Cc++:(Cc=0,tp=i):Cc=0,Ts(),null}function Ka(){if(Rs!==null){var i=ni(zd),a=fr.transition,u=Ye;try{if(fr.transition=null,Ye=16>i?16:i,Rs===null)var p=!1;else{if(i=Rs,Rs=null,zd=0,(Ze&6)!==0)throw Error(t(331));var v=Ze;for(Ze|=4,we=i.current;we!==null;){var b=we,I=b.child;if((we.flags&16)!==0){var O=b.deletions;if(O!==null){for(var z=0;z<O.length;z++){var J=O[z];for(we=J;we!==null;){var oe=we;switch(oe.tag){case 0:case 11:case 15:Ec(8,oe,b)}var ae=oe.child;if(ae!==null)ae.return=oe,we=ae;else for(;we!==null;){oe=we;var ie=oe.sibling,ve=oe.return;if(L1(oe),oe===J){we=null;break}if(ie!==null){ie.return=ve,we=ie;break}we=ve}}}var ke=b.alternate;if(ke!==null){var _e=ke.child;if(_e!==null){ke.child=null;do{var Nt=_e.sibling;_e.sibling=null,_e=Nt}while(_e!==null)}}we=b}}if((b.subtreeFlags&2064)!==0&&I!==null)I.return=b,we=I;else e:for(;we!==null;){if(b=we,(b.flags&2048)!==0)switch(b.tag){case 0:case 11:case 15:Ec(9,b,b.return)}var G=b.sibling;if(G!==null){G.return=b.return,we=G;break e}we=b.return}}var W=i.current;for(we=W;we!==null;){I=we;var Y=I.child;if((I.subtreeFlags&2064)!==0&&Y!==null)Y.return=I,we=Y;else e:for(I=W;we!==null;){if(O=we,(O.flags&2048)!==0)try{switch(O.tag){case 0:case 11:case 15:Md(9,O)}}catch(Ee){jt(O,O.return,Ee)}if(O===I){we=null;break e}var ue=O.sibling;if(ue!==null){ue.return=O.return,we=ue;break e}we=O.return}}if(Ze=v,Ts(),Kn&&typeof Kn.onPostCommitFiberRoot=="function")try{Kn.onPostCommitFiberRoot(vo,i)}catch{}p=!0}return p}finally{Ye=u,fr.transition=a}}return!1}function Z1(i,a,u){a=Ua(u,a),a=y1(i,a,1),i=Cs(i,a,1),a=En(),i!==null&&(ko(i,1,a),Ln(i,a))}function jt(i,a,u){if(i.tag===3)Z1(i,i,u);else for(;a!==null;){if(a.tag===3){Z1(a,i,u);break}else if(a.tag===1){var p=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(As===null||!As.has(p))){i=Ua(u,i),i=v1(a,i,1),a=Cs(a,i,1),i=En(),a!==null&&(ko(a,1,i),Ln(a,i));break}}a=a.return}}function BI(i,a,u){var p=i.pingCache;p!==null&&p.delete(a),a=En(),i.pingedLanes|=i.suspendedLanes&u,Jt===i&&(an&u)===u&&(qt===4||qt===3&&(an&130023424)===an&&500>ft()-Zm?Vo(i,0):Jm|=u),Ln(i,a)}function ex(i,a){a===0&&((i.mode&1)===0?a=1:(a=gs,gs<<=1,(gs&130023424)===0&&(gs=4194304)));var u=En();i=Oi(i,a),i!==null&&(ko(i,a,u),Ln(i,u))}function zI(i){var a=i.memoizedState,u=0;a!==null&&(u=a.retryLane),ex(i,u)}function FI(i,a){var u=0;switch(i.tag){case 13:var p=i.stateNode,v=i.memoizedState;v!==null&&(u=v.retryLane);break;case 19:p=i.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(a),ex(i,u)}var tx;tx=function(i,a,u){if(i!==null)if(i.memoizedProps!==a.pendingProps||Nn.current)Mn=!0;else{if((i.lanes&u)===0&&(a.flags&128)===0)return Mn=!1,CI(i,a,u);Mn=(i.flags&131072)!==0}else Mn=!1,bt&&(a.flags&1048576)!==0&&Dv(a,vd,a.index);switch(a.lanes=0,a.tag){case 2:var p=a.type;Nd(i,a),i=a.pendingProps;var v=Da(a,mn.current);za(a,u),v=Am(null,a,p,i,v,u);var b=Rm();return a.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Dn(p)?(b=!0,pd(a)):b=!1,a.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,_m(a),v.updater=Rd,a.stateNode=v,v._reactInternals=a,Lm(a,p,i,u),a=Fm(null,a,p,!0,b,u)):(a.tag=0,bt&&b&&fm(a),Sn(null,a,v,u),a=a.child),a;case 16:p=a.elementType;e:{switch(Nd(i,a),i=a.pendingProps,v=p._init,p=v(p._payload),a.type=p,v=a.tag=WI(p),i=Rr(p,i),v){case 0:a=zm(null,a,p,i,u);break e;case 1:a=I1(null,a,p,i,u);break e;case 11:a=k1(null,a,p,i,u);break e;case 14:a=_1(null,a,p,Rr(p.type,i),u);break e}throw Error(t(306,p,""))}return a;case 0:return p=a.type,v=a.pendingProps,v=a.elementType===p?v:Rr(p,v),zm(i,a,p,v,u);case 1:return p=a.type,v=a.pendingProps,v=a.elementType===p?v:Rr(p,v),I1(i,a,p,v,u);case 3:e:{if(C1(a),i===null)throw Error(t(387));p=a.pendingProps,b=a.memoizedState,v=b.element,Wv(i,a),Sd(a,p,null,u);var I=a.memoizedState;if(p=I.element,b.isDehydrated)if(b={element:p,isDehydrated:!1,cache:I.cache,pendingSuspenseBoundaries:I.pendingSuspenseBoundaries,transitions:I.transitions},a.updateQueue.baseState=b,a.memoizedState=b,a.flags&256){v=Ua(Error(t(423)),a),a=j1(i,a,p,u,v);break e}else if(p!==v){v=Ua(Error(t(424)),a),a=j1(i,a,p,u,v);break e}else for(Zn=_s(a.stateNode.containerInfo.firstChild),Jn=a,bt=!0,Ar=null,u=Fv(a,null,p,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(La(),p===v){a=zi(i,a,u);break e}Sn(i,a,p,u)}a=a.child}return a;case 5:return Kv(a),i===null&&gm(a),p=a.type,v=a.pendingProps,b=i!==null?i.memoizedProps:null,I=v.children,am(p,v)?I=null:b!==null&&am(p,b)&&(a.flags|=32),T1(i,a),Sn(i,a,I,u),a.child;case 6:return i===null&&gm(a),null;case 13:return A1(i,a,u);case 4:return Sm(a,a.stateNode.containerInfo),p=a.pendingProps,i===null?a.child=Oa(a,null,p,u):Sn(i,a,p,u),a.child;case 11:return p=a.type,v=a.pendingProps,v=a.elementType===p?v:Rr(p,v),k1(i,a,p,v,u);case 7:return Sn(i,a,a.pendingProps,u),a.child;case 8:return Sn(i,a,a.pendingProps.children,u),a.child;case 12:return Sn(i,a,a.pendingProps.children,u),a.child;case 10:e:{if(p=a.type._context,v=a.pendingProps,b=a.memoizedProps,I=v.value,ut(wd,p._currentValue),p._currentValue=I,b!==null)if(jr(b.value,I)){if(b.children===v.children&&!Nn.current){a=zi(i,a,u);break e}}else for(b=a.child,b!==null&&(b.return=a);b!==null;){var O=b.dependencies;if(O!==null){I=b.child;for(var z=O.firstContext;z!==null;){if(z.context===p){if(b.tag===1){z=Bi(-1,u&-u),z.tag=2;var J=b.updateQueue;if(J!==null){J=J.shared;var oe=J.pending;oe===null?z.next=z:(z.next=oe.next,oe.next=z),J.pending=z}}b.lanes|=u,z=b.alternate,z!==null&&(z.lanes|=u),wm(b.return,u,a),O.lanes|=u;break}z=z.next}}else if(b.tag===10)I=b.type===a.type?null:b.child;else if(b.tag===18){if(I=b.return,I===null)throw Error(t(341));I.lanes|=u,O=I.alternate,O!==null&&(O.lanes|=u),wm(I,u,a),I=b.sibling}else I=b.child;if(I!==null)I.return=b;else for(I=b;I!==null;){if(I===a){I=null;break}if(b=I.sibling,b!==null){b.return=I.return,I=b;break}I=I.return}b=I}Sn(i,a,v.children,u),a=a.child}return a;case 9:return v=a.type,p=a.pendingProps.children,za(a,u),v=dr(v),p=p(v),a.flags|=1,Sn(i,a,p,u),a.child;case 14:return p=a.type,v=Rr(p,a.pendingProps),v=Rr(p.type,v),_1(i,a,p,v,u);case 15:return S1(i,a,a.type,a.pendingProps,u);case 17:return p=a.type,v=a.pendingProps,v=a.elementType===p?v:Rr(p,v),Nd(i,a),a.tag=1,Dn(p)?(i=!0,pd(a)):i=!1,za(a,u),p1(a,p,v),Lm(a,p,v,u),Fm(null,a,p,!0,i,u);case 19:return P1(i,a,u);case 22:return E1(i,a,u)}throw Error(t(156,a.tag))};function nx(i,a){return Hl(i,a)}function UI(i,a,u,p){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mr(i,a,u,p){return new UI(i,a,u,p)}function ap(i){return i=i.prototype,!(!i||!i.isReactComponent)}function WI(i){if(typeof i=="function")return ap(i)?1:0;if(i!=null){if(i=i.$$typeof,i===U)return 11;if(i===We)return 14}return 2}function Ds(i,a){var u=i.alternate;return u===null?(u=mr(i.tag,a,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=a,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&14680064,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,a=i.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u}function $d(i,a,u,p,v,b){var I=2;if(p=i,typeof i=="function")ap(i)&&(I=1);else if(typeof i=="string")I=5;else e:switch(i){case A:return Oo(u.children,v,b,a);case j:I=8,v|=8;break;case D:return i=mr(12,u,a,v|2),i.elementType=D,i.lanes=b,i;case V:return i=mr(13,u,a,v),i.elementType=V,i.lanes=b,i;case Ve:return i=mr(19,u,a,v),i.elementType=Ve,i.lanes=b,i;case Te:return Hd(u,v,b,a);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case L:I=10;break e;case B:I=9;break e;case U:I=11;break e;case We:I=14;break e;case rt:I=16,p=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return a=mr(I,u,a,v),a.elementType=i,a.type=p,a.lanes=b,a}function Oo(i,a,u,p){return i=mr(7,i,p,a),i.lanes=u,i}function Hd(i,a,u,p){return i=mr(22,i,p,a),i.elementType=Te,i.lanes=u,i.stateNode={isHidden:!1},i}function lp(i,a,u){return i=mr(6,i,null,a),i.lanes=u,i}function cp(i,a,u){return a=mr(4,i.children!==null?i.children:[],i.key,a),a.lanes=u,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}function $I(i,a,u,p,v){this.tag=a,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yl(0),this.expirationTimes=Yl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yl(0),this.identifierPrefix=p,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function up(i,a,u,p,v,b,I,O,z){return i=new $I(i,a,u,O,z),a===1?(a=1,b===!0&&(a|=8)):a=0,b=mr(3,null,null,a),i.current=b,b.stateNode=i,b.memoizedState={element:p,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},_m(b),i}function HI(i,a,u){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:K,key:p==null?null:""+p,children:i,containerInfo:a,implementation:u}}function rx(i){if(!i)return Es;i=i._reactInternals;e:{if(Ir(i)!==i||i.tag!==1)throw Error(t(170));var a=i;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(Dn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(i.tag===1){var u=i.type;if(Dn(u))return Rv(i,u,a)}return a}function ix(i,a,u,p,v,b,I,O,z){return i=up(u,p,!0,i,v,b,I,O,z),i.context=rx(null),u=i.current,p=En(),v=Ps(u),b=Bi(p,v),b.callback=a??null,Cs(u,b,v),i.current.lanes=v,ko(i,v,p),Ln(i,p),i}function Kd(i,a,u,p){var v=a.current,b=En(),I=Ps(v);return u=rx(u),a.context===null?a.context=u:a.pendingContext=u,a=Bi(b,I),a.payload={element:i},p=p===void 0?null:p,p!==null&&(a.callback=p),i=Cs(v,a,I),i!==null&&(Dr(i,v,I,b),_d(i,v,I)),I}function qd(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function sx(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<a?u:a}}function dp(i,a){sx(i,a),(i=i.alternate)&&sx(i,a)}function KI(){return null}var ox=typeof reportError=="function"?reportError:function(i){console.error(i)};function hp(i){this._internalRoot=i}Gd.prototype.render=hp.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(t(409));Kd(i,a,null,null)},Gd.prototype.unmount=hp.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;Mo(function(){Kd(null,i,null,null)}),a[Di]=null}};function Gd(i){this._internalRoot=i}Gd.prototype.unstable_scheduleHydration=function(i){if(i){var a=ec();i={blockedOn:null,target:i,priority:a};for(var u=0;u<Gn.length&&a!==0&&a<Gn[u].priority;u++);Gn.splice(u,0,i),u===0&&va(i)}};function fp(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Qd(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function ax(){}function qI(i,a,u,p,v){if(v){if(typeof p=="function"){var b=p;p=function(){var J=qd(I);b.call(J)}}var I=ix(a,p,i,0,null,!1,!1,"",ax);return i._reactRootContainer=I,i[Di]=I.current,hc(i.nodeType===8?i.parentNode:i),Mo(),I}for(;v=i.lastChild;)i.removeChild(v);if(typeof p=="function"){var O=p;p=function(){var J=qd(z);O.call(J)}}var z=up(i,0,!1,null,null,!1,!1,"",ax);return i._reactRootContainer=z,i[Di]=z.current,hc(i.nodeType===8?i.parentNode:i),Mo(function(){Kd(a,z,u,p)}),z}function Yd(i,a,u,p,v){var b=u._reactRootContainer;if(b){var I=b;if(typeof v=="function"){var O=v;v=function(){var z=qd(I);O.call(z)}}Kd(a,I,i,v)}else I=qI(u,a,i,v,p);return qd(I)}Jl=function(i){switch(i.tag){case 3:var a=i.stateNode;if(a.current.memoizedState.isDehydrated){var u=nt(a.pendingLanes);u!==0&&(Xl(a,u|1),Ln(a,ft()),(Ze&6)===0&&(Ha=ft()+500,Ts()))}break;case 13:Mo(function(){var p=Oi(i,1);if(p!==null){var v=En();Dr(p,i,1,v)}}),dp(i,1)}},ga=function(i){if(i.tag===13){var a=Oi(i,134217728);if(a!==null){var u=En();Dr(a,i,134217728,u)}dp(i,134217728)}},Zl=function(i){if(i.tag===13){var a=Ps(i),u=Oi(i,a);if(u!==null){var p=En();Dr(u,i,a,p)}dp(i,a)}},ec=function(){return Ye},tc=function(i,a){var u=Ye;try{return Ye=i,a()}finally{Ye=u}},Si=function(i,a,u){switch(a){case"input":if(or(i,u),a=u.name,u.type==="radio"&&a!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<u.length;a++){var p=u[a];if(p!==i&&p.form===i.form){var v=fd(p);if(!v)throw Error(t(90));Ht(p),or(p,v)}}}break;case"textarea":Fe(i,u);break;case"select":a=u.value,a!=null&&Hn(i,!!u.multiple,a,!1)}},Fu=ip,Uu=Mo;var GI={usingClientEntryPoint:!1,Events:[pc,Pa,fd,hs,fs,ip]},jc={findFiberByHostInstance:Io,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},QI={bundleType:jc.bundleType,version:jc.version,rendererPackageName:jc.rendererPackageName,rendererConfig:jc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:F.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Qu(i),i===null?null:i.stateNode},findFiberByHostInstance:jc.findFiberByHostInstance||KI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xd.isDisabled&&Xd.supportsFiber)try{vo=Xd.inject(QI),Kn=Xd}catch{}}return On.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GI,On.createPortal=function(i,a){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fp(a))throw Error(t(200));return HI(i,a,null,u)},On.createRoot=function(i,a){if(!fp(i))throw Error(t(299));var u=!1,p="",v=ox;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),a=up(i,1,!1,null,null,u,!1,p,v),i[Di]=a.current,hc(i.nodeType===8?i.parentNode:i),new hp(a)},On.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=Qu(a),i=i===null?null:i.stateNode,i},On.flushSync=function(i){return Mo(i)},On.hydrate=function(i,a,u){if(!Qd(a))throw Error(t(200));return Yd(null,i,a,!0,u)},On.hydrateRoot=function(i,a,u){if(!fp(i))throw Error(t(405));var p=u!=null&&u.hydratedSources||null,v=!1,b="",I=ox;if(u!=null&&(u.unstable_strictMode===!0&&(v=!0),u.identifierPrefix!==void 0&&(b=u.identifierPrefix),u.onRecoverableError!==void 0&&(I=u.onRecoverableError)),a=ix(a,null,i,1,u??null,v,!1,b,I),i[Di]=a.current,hc(i),p)for(i=0;i<p.length;i++)u=p[i],v=u._getVersion,v=v(u._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[u,v]:a.mutableSourceEagerHydrationData.push(u,v);return new Gd(a)},On.render=function(i,a,u){if(!Qd(a))throw Error(t(200));return Yd(null,i,a,!1,u)},On.unmountComponentAtNode=function(i){if(!Qd(i))throw Error(t(40));return i._reactRootContainer?(Mo(function(){Yd(null,null,i,!1,function(){i._reactRootContainer=null,i[Di]=null})}),!0):!1},On.unstable_batchedUpdates=ip,On.unstable_renderSubtreeIntoContainer=function(i,a,u,p){if(!Qd(u))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return Yd(i,a,u,!1,p)},On.version="18.3.1-next-f1338f8080-20240426",On}var px;function iC(){if(px)return gp.exports;px=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),gp.exports=rC(),gp.exports}var gx;function sC(){if(gx)return Jd;gx=1;var n=iC();return Jd.createRoot=n.createRoot,Jd.hydrateRoot=n.hydrateRoot,Jd}var oC=sC();/**
 * react-router v7.12.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var yx="popstate";function aC(n={}){function e(s,l){let{pathname:c="/",search:h="",hash:d=""}=ia(s.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),ig("",{pathname:c,search:h,hash:d},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(s,l){let c=s.document.querySelector("base"),h="";if(c&&c.getAttribute("href")){let d=s.location.href,m=d.indexOf("#");h=m===-1?d:d.slice(0,m)}return h+"#"+(typeof l=="string"?l:tu(l))}function r(s,l){rr(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return cC(e,t,r,n)}function wt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function rr(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function lC(){return Math.random().toString(36).substring(2,10)}function vx(n,e){return{usr:n.state,key:n.key,idx:e}}function ig(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?ia(e):e,state:t,key:e&&e.key||r||lC()}}function tu({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function ia(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function cC(n,e,t,r={}){let{window:s=document.defaultView,v5Compat:l=!1}=r,c=s.history,h="POP",d=null,m=g();m==null&&(m=0,c.replaceState({...c.state,idx:m},""));function g(){return(c.state||{idx:null}).idx}function y(){h="POP";let T=g(),P=T==null?null:T-m;m=T,d&&d({action:h,location:S.location,delta:P})}function x(T,P){h="PUSH";let M=ig(S.location,T,P);t&&t(M,T),m=g()+1;let N=vx(M,m),F=S.createHref(M);try{c.pushState(N,"",F)}catch($){if($ instanceof DOMException&&$.name==="DataCloneError")throw $;s.location.assign(F)}l&&d&&d({action:h,location:S.location,delta:1})}function E(T,P){h="REPLACE";let M=ig(S.location,T,P);t&&t(M,T),m=g();let N=vx(M,m),F=S.createHref(M);c.replaceState(N,"",F),l&&d&&d({action:h,location:S.location,delta:0})}function k(T){return uC(T)}let S={get action(){return h},get location(){return n(s,c)},listen(T){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(yx,y),d=T,()=>{s.removeEventListener(yx,y),d=null}},createHref(T){return e(s,T)},createURL:k,encodeLocation(T){let P=k(T);return{pathname:P.pathname,search:P.search,hash:P.hash}},push:x,replace:E,go(T){return c.go(T)}};return S}function uC(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),wt(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:tu(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function Pk(n,e,t="/"){return dC(n,e,t,!1)}function dC(n,e,t,r){let s=typeof e=="string"?ia(e):e,l=Ji(s.pathname||"/",t);if(l==null)return null;let c=Nk(n);hC(c);let h=null;for(let d=0;h==null&&d<c.length;++d){let m=_C(l);h=wC(c[d],m,r)}return h}function Nk(n,e=[],t=[],r="",s=!1){let l=(c,h,d=s,m)=>{let g={relativePath:m===void 0?c.path||"":m,caseSensitive:c.caseSensitive===!0,childrenIndex:h,route:c};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(r)&&d)return;wt(g.relativePath.startsWith(r),`Absolute route path "${g.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(r.length)}let y=qi([r,g.relativePath]),x=t.concat(g);c.children&&c.children.length>0&&(wt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),Nk(c.children,e,x,y,d)),!(c.path==null&&!c.index)&&e.push({path:y,score:xC(y,c.index),routesMeta:x})};return n.forEach((c,h)=>{var d;if(c.path===""||!((d=c.path)!=null&&d.includes("?")))l(c,h);else for(let m of Dk(c.path))l(c,h,!0,m)}),e}function Dk(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),l=t.replace(/\?$/,"");if(r.length===0)return s?[l,""]:[l];let c=Dk(r.join("/")),h=[];return h.push(...c.map(d=>d===""?l:[l,d].join("/"))),s&&h.push(...c),h.map(d=>n.startsWith("/")&&d===""?"/":d)}function hC(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:bC(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var fC=/^:[\w-]+$/,mC=3,pC=2,gC=1,yC=10,vC=-2,xx=n=>n==="*";function xC(n,e){let t=n.split("/"),r=t.length;return t.some(xx)&&(r+=vC),e&&(r+=pC),t.filter(s=>!xx(s)).reduce((s,l)=>s+(fC.test(l)?mC:l===""?gC:yC),r)}function bC(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function wC(n,e,t=!1){let{routesMeta:r}=n,s={},l="/",c=[];for(let h=0;h<r.length;++h){let d=r[h],m=h===r.length-1,g=l==="/"?e:e.slice(l.length)||"/",y=jh({path:d.relativePath,caseSensitive:d.caseSensitive,end:m},g),x=d.route;if(!y&&m&&t&&!r[r.length-1].route.index&&(y=jh({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!y)return null;Object.assign(s,y.params),c.push({params:s,pathname:qi([l,y.pathname]),pathnameBase:IC(qi([l,y.pathnameBase])),route:x}),y.pathnameBase!=="/"&&(l=qi([l,y.pathnameBase]))}return c}function jh(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=kC(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let l=s[0],c=l.replace(/(.)\/+$/,"$1"),h=s.slice(1);return{params:r.reduce((m,{paramName:g,isOptional:y},x)=>{if(g==="*"){let k=h[x]||"";c=l.slice(0,l.length-k.length).replace(/(.)\/+$/,"$1")}const E=h[x];return y&&!E?m[g]=void 0:m[g]=(E||"").replace(/%2F/g,"/"),m},{}),pathname:l,pathnameBase:c,pattern:n}}function kC(n,e=!1,t=!0){rr(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,h,d)=>(r.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function _C(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return rr(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Ji(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}var Mk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,SC=n=>Mk.test(n);function EC(n,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?ia(n):n,l;if(t)if(SC(t))l=t;else{if(t.includes("//")){let c=t;t=t.replace(/\/\/+/g,"/"),rr(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${t}`)}t.startsWith("/")?l=bx(t.substring(1),"/"):l=bx(t,e)}else l=e;return{pathname:l,search:CC(r),hash:jC(s)}}function bx(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function xp(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function TC(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function cy(n){let e=TC(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function uy(n,e,t,r=!1){let s;typeof n=="string"?s=ia(n):(s={...n},wt(!s.pathname||!s.pathname.includes("?"),xp("?","pathname","search",s)),wt(!s.pathname||!s.pathname.includes("#"),xp("#","pathname","hash",s)),wt(!s.search||!s.search.includes("#"),xp("#","search","hash",s)));let l=n===""||s.pathname==="",c=l?"/":s.pathname,h;if(c==null)h=t;else{let y=e.length-1;if(!r&&c.startsWith("..")){let x=c.split("/");for(;x[0]==="..";)x.shift(),y-=1;s.pathname=x.join("/")}h=y>=0?e[y]:"/"}let d=EC(s,h),m=c&&c!=="/"&&c.endsWith("/"),g=(l||c===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(m||g)&&(d.pathname+="/"),d}var qi=n=>n.join("/").replace(/\/\/+/g,"/"),IC=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),CC=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,jC=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,AC=class{constructor(n,e,t,r=!1){this.status=n,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function RC(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function PC(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Vk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Lk(n,e){let t=n;if(typeof t!="string"||!Mk.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let r=t,s=!1;if(Vk)try{let l=new URL(window.location.href),c=t.startsWith("//")?new URL(l.protocol+t):new URL(t),h=Ji(c.pathname,e);c.origin===l.origin&&h!=null?t=h+c.search+c.hash:s=!0}catch{rr(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:s,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Ok=["POST","PUT","PATCH","DELETE"];new Set(Ok);var NC=["GET",...Ok];new Set(NC);var Il=C.createContext(null);Il.displayName="DataRouter";var cf=C.createContext(null);cf.displayName="DataRouterState";var DC=C.createContext(!1),Bk=C.createContext({isTransitioning:!1});Bk.displayName="ViewTransition";var MC=C.createContext(new Map);MC.displayName="Fetchers";var VC=C.createContext(null);VC.displayName="Await";var ir=C.createContext(null);ir.displayName="Navigation";var gu=C.createContext(null);gu.displayName="Location";var Hr=C.createContext({outlet:null,matches:[],isDataRoute:!1});Hr.displayName="Route";var dy=C.createContext(null);dy.displayName="RouteError";var zk="REACT_ROUTER_ERROR",LC="REDIRECT",OC="ROUTE_ERROR_RESPONSE";function BC(n){if(n.startsWith(`${zk}:${LC}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function zC(n){if(n.startsWith(`${zk}:${OC}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new AC(e.status,e.statusText,e.data)}catch{}}function FC(n,{relative:e}={}){wt(Cl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=C.useContext(ir),{hash:s,pathname:l,search:c}=yu(n,{relative:e}),h=l;return t!=="/"&&(h=l==="/"?t:qi([t,l])),r.createHref({pathname:h,search:c,hash:s})}function Cl(){return C.useContext(gu)!=null}function Er(){return wt(Cl(),"useLocation() may be used only in the context of a <Router> component."),C.useContext(gu).location}var Fk="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Uk(n){C.useContext(ir).static||C.useLayoutEffect(n)}function io(){let{isDataRoute:n}=C.useContext(Hr);return n?ej():UC()}function UC(){wt(Cl(),"useNavigate() may be used only in the context of a <Router> component.");let n=C.useContext(Il),{basename:e,navigator:t}=C.useContext(ir),{matches:r}=C.useContext(Hr),{pathname:s}=Er(),l=JSON.stringify(cy(r)),c=C.useRef(!1);return Uk(()=>{c.current=!0}),C.useCallback((d,m={})=>{if(rr(c.current,Fk),!c.current)return;if(typeof d=="number"){t.go(d);return}let g=uy(d,JSON.parse(l),s,m.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:qi([e,g.pathname])),(m.replace?t.replace:t.push)(g,m.state,m)},[e,t,l,s,n])}C.createContext(null);function hy(){let{matches:n}=C.useContext(Hr),e=n[n.length-1];return e?e.params:{}}function yu(n,{relative:e}={}){let{matches:t}=C.useContext(Hr),{pathname:r}=Er(),s=JSON.stringify(cy(t));return C.useMemo(()=>uy(n,JSON.parse(s),r,e==="path"),[n,s,r,e])}function WC(n,e){return Wk(n,e)}function Wk(n,e,t,r,s){var M;wt(Cl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=C.useContext(ir),{matches:c}=C.useContext(Hr),h=c[c.length-1],d=h?h.params:{},m=h?h.pathname:"/",g=h?h.pathnameBase:"/",y=h&&h.route;{let N=y&&y.path||"";Hk(m,!y||N.endsWith("*")||N.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${N}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${N}"> to <Route path="${N==="/"?"*":`${N}/*`}">.`)}let x=Er(),E;if(e){let N=typeof e=="string"?ia(e):e;wt(g==="/"||((M=N.pathname)==null?void 0:M.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${N.pathname}" was given in the \`location\` prop.`),E=N}else E=x;let k=E.pathname||"/",S=k;if(g!=="/"){let N=g.replace(/^\//,"").split("/");S="/"+k.replace(/^\//,"").split("/").slice(N.length).join("/")}let T=Pk(n,{pathname:S});rr(y||T!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),rr(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let P=GC(T&&T.map(N=>Object.assign({},N,{params:Object.assign({},d,N.params),pathname:qi([g,l.encodeLocation?l.encodeLocation(N.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?g:qi([g,l.encodeLocation?l.encodeLocation(N.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:N.pathnameBase])})),c,t,r,s);return e&&P?C.createElement(gu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},P):P}function $C(){let n=ZC(),e=RC(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=C.createElement(C.Fragment,null,C.createElement("p",null," Hey developer "),C.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",C.createElement("code",{style:l},"ErrorBoundary")," or"," ",C.createElement("code",{style:l},"errorElement")," prop on your route.")),C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),t?C.createElement("pre",{style:s},t):null,c)}var HC=C.createElement($C,null),$k=class extends C.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=zC(n.digest);t&&(n=t)}let e=n!==void 0?C.createElement(Hr.Provider,{value:this.props.routeContext},C.createElement(dy.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?C.createElement(KC,{error:n},e):e}};$k.contextType=DC;var bp=new WeakMap;function KC({children:n,error:e}){let{basename:t}=C.useContext(ir);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=BC(e.digest);if(r){let s=bp.get(e);if(s)throw s;let l=Lk(r.location,t);if(Vk&&!bp.get(e))if(l.isExternal||r.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:r.replace}));throw bp.set(e,c),c}return C.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return n}function qC({routeContext:n,match:e,children:t}){let r=C.useContext(Il);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),C.createElement(Hr.Provider,{value:n},t)}function GC(n,e=[],t=null,r=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,c=t==null?void 0:t.errors;if(c!=null){let g=l.findIndex(y=>y.route.id&&(c==null?void 0:c[y.route.id])!==void 0);wt(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,g+1))}let h=!1,d=-1;if(t)for(let g=0;g<l.length;g++){let y=l[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(d=g),y.route.id){let{loaderData:x,errors:E}=t,k=y.route.loader&&!x.hasOwnProperty(y.route.id)&&(!E||E[y.route.id]===void 0);if(y.route.lazy||k){h=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}let m=t&&r?(g,y)=>{var x,E;r(g,{location:t.location,params:((E=(x=t.matches)==null?void 0:x[0])==null?void 0:E.params)??{},unstable_pattern:PC(t.matches),errorInfo:y})}:void 0;return l.reduceRight((g,y,x)=>{let E,k=!1,S=null,T=null;t&&(E=c&&y.route.id?c[y.route.id]:void 0,S=y.route.errorElement||HC,h&&(d<0&&x===0?(Hk("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),k=!0,T=null):d===x&&(k=!0,T=y.route.hydrateFallbackElement||null)));let P=e.concat(l.slice(0,x+1)),M=()=>{let N;return E?N=S:k?N=T:y.route.Component?N=C.createElement(y.route.Component,null):y.route.element?N=y.route.element:N=g,C.createElement(qC,{match:y,routeContext:{outlet:g,matches:P,isDataRoute:t!=null},children:N})};return t&&(y.route.ErrorBoundary||y.route.errorElement||x===0)?C.createElement($k,{location:t.location,revalidation:t.revalidation,component:S,error:E,children:M(),routeContext:{outlet:null,matches:P,isDataRoute:!0},onError:m}):M()},null)}function fy(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function QC(n){let e=C.useContext(Il);return wt(e,fy(n)),e}function YC(n){let e=C.useContext(cf);return wt(e,fy(n)),e}function XC(n){let e=C.useContext(Hr);return wt(e,fy(n)),e}function my(n){let e=XC(n),t=e.matches[e.matches.length-1];return wt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function JC(){return my("useRouteId")}function ZC(){var r;let n=C.useContext(dy),e=YC("useRouteError"),t=my("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function ej(){let{router:n}=QC("useNavigate"),e=my("useNavigate"),t=C.useRef(!1);return Uk(()=>{t.current=!0}),C.useCallback(async(s,l={})=>{rr(t.current,Fk),t.current&&(typeof s=="number"?await n.navigate(s):await n.navigate(s,{fromRouteId:e,...l}))},[n,e])}var wx={};function Hk(n,e,t){!e&&!wx[n]&&(wx[n]=!0,rr(!1,t))}C.memo(tj);function tj({routes:n,future:e,state:t,onError:r}){return Wk(n,void 0,t,r,e)}function nj({to:n,replace:e,state:t,relative:r}){wt(Cl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=C.useContext(ir);rr(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=C.useContext(Hr),{pathname:c}=Er(),h=io(),d=uy(n,cy(l),c,r==="path"),m=JSON.stringify(d);return C.useEffect(()=>{h(JSON.parse(m),{replace:e,state:t,relative:r})},[h,m,r,e,t]),null}function gt(n){wt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function rj({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:l=!1,unstable_useTransitions:c}){wt(!Cl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=n.replace(/^\/*/,"/"),d=C.useMemo(()=>({basename:h,navigator:s,static:l,unstable_useTransitions:c,future:{}}),[h,s,l,c]);typeof t=="string"&&(t=ia(t));let{pathname:m="/",search:g="",hash:y="",state:x=null,key:E="default"}=t,k=C.useMemo(()=>{let S=Ji(m,h);return S==null?null:{location:{pathname:S,search:g,hash:y,state:x,key:E},navigationType:r}},[h,m,g,y,x,E,r]);return rr(k!=null,`<Router basename="${h}"> is not able to match the URL "${m}${g}${y}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:C.createElement(ir.Provider,{value:d},C.createElement(gu.Provider,{children:e,value:k}))}function ij({children:n,location:e}){return WC(sg(n),e)}function sg(n,e=[]){let t=[];return C.Children.forEach(n,(r,s)=>{if(!C.isValidElement(r))return;let l=[...e,s];if(r.type===C.Fragment){t.push.apply(t,sg(r.props.children,l));return}wt(r.type===gt,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),wt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=sg(r.props.children,l)),t.push(c)}),t}var fh="get",mh="application/x-www-form-urlencoded";function uf(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function sj(n){return uf(n)&&n.tagName.toLowerCase()==="button"}function oj(n){return uf(n)&&n.tagName.toLowerCase()==="form"}function aj(n){return uf(n)&&n.tagName.toLowerCase()==="input"}function lj(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function cj(n,e){return n.button===0&&(!e||e==="_self")&&!lj(n)}var Zd=null;function uj(){if(Zd===null)try{new FormData(document.createElement("form"),0),Zd=!1}catch{Zd=!0}return Zd}var dj=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function wp(n){return n!=null&&!dj.has(n)?(rr(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${mh}"`),null):n}function hj(n,e){let t,r,s,l,c;if(oj(n)){let h=n.getAttribute("action");r=h?Ji(h,e):null,t=n.getAttribute("method")||fh,s=wp(n.getAttribute("enctype"))||mh,l=new FormData(n)}else if(sj(n)||aj(n)&&(n.type==="submit"||n.type==="image")){let h=n.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=n.getAttribute("formaction")||h.getAttribute("action");if(r=d?Ji(d,e):null,t=n.getAttribute("formmethod")||h.getAttribute("method")||fh,s=wp(n.getAttribute("formenctype"))||wp(h.getAttribute("enctype"))||mh,l=new FormData(h,n),!uj()){let{name:m,type:g,value:y}=n;if(g==="image"){let x=m?`${m}.`:"";l.append(`${x}x`,"0"),l.append(`${x}y`,"0")}else m&&l.append(m,y)}}else{if(uf(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=fh,r=null,s=mh,c=n}return l&&s==="text/plain"&&(c=l,l=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function py(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function fj(n,e,t,r){let s=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?s.pathname.endsWith("/")?s.pathname=`${s.pathname}_.${r}`:s.pathname=`${s.pathname}.${r}`:s.pathname==="/"?s.pathname=`_root.${r}`:e&&Ji(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${r}`,s}async function mj(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function pj(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function gj(n,e,t){let r=await Promise.all(n.map(async s=>{let l=e.routes[s.route.id];if(l){let c=await mj(l,t);return c.links?c.links():[]}return[]}));return bj(r.flat(1).filter(pj).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function kx(n,e,t,r,s,l){let c=(d,m)=>t[m]?d.route.id!==t[m].route.id:!0,h=(d,m)=>{var g;return t[m].pathname!==d.pathname||((g=t[m].route.path)==null?void 0:g.endsWith("*"))&&t[m].params["*"]!==d.params["*"]};return l==="assets"?e.filter((d,m)=>c(d,m)||h(d,m)):l==="data"?e.filter((d,m)=>{var y;let g=r.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(c(d,m)||h(d,m))return!0;if(d.route.shouldRevalidate){let x=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((y=t[0])==null?void 0:y.params)||{},nextUrl:new URL(n,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function yj(n,e,{includeHydrateFallback:t}={}){return vj(n.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let l=[s.module];return s.clientActionModule&&(l=l.concat(s.clientActionModule)),s.clientLoaderModule&&(l=l.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(l=l.concat(s.hydrateFallbackModule)),s.imports&&(l=l.concat(s.imports)),l}).flat(1))}function vj(n){return[...new Set(n)]}function xj(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function bj(n,e){let t=new Set;return new Set(e),n.reduce((r,s)=>{let l=JSON.stringify(xj(s));return t.has(l)||(t.add(l),r.push({key:l,link:s})),r},[])}function Kk(){let n=C.useContext(Il);return py(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function wj(){let n=C.useContext(cf);return py(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var gy=C.createContext(void 0);gy.displayName="FrameworkContext";function qk(){let n=C.useContext(gy);return py(n,"You must render this element inside a <HydratedRouter> element"),n}function kj(n,e){let t=C.useContext(gy),[r,s]=C.useState(!1),[l,c]=C.useState(!1),{onFocus:h,onBlur:d,onMouseEnter:m,onMouseLeave:g,onTouchStart:y}=e,x=C.useRef(null);C.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let S=P=>{P.forEach(M=>{c(M.isIntersecting)})},T=new IntersectionObserver(S,{threshold:.5});return x.current&&T.observe(x.current),()=>{T.disconnect()}}},[n]),C.useEffect(()=>{if(r){let S=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(S)}}},[r]);let E=()=>{s(!0)},k=()=>{s(!1),c(!1)};return t?n!=="intent"?[l,x,{}]:[l,x,{onFocus:Rc(h,E),onBlur:Rc(d,k),onMouseEnter:Rc(m,E),onMouseLeave:Rc(g,k),onTouchStart:Rc(y,E)}]:[!1,x,{}]}function Rc(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function _j({page:n,...e}){let{router:t}=Kk(),r=C.useMemo(()=>Pk(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?C.createElement(Ej,{page:n,matches:r,...e}):null}function Sj(n){let{manifest:e,routeModules:t}=qk(),[r,s]=C.useState([]);return C.useEffect(()=>{let l=!1;return gj(n,e,t).then(c=>{l||s(c)}),()=>{l=!0}},[n,e,t]),r}function Ej({page:n,matches:e,...t}){let r=Er(),{future:s,manifest:l,routeModules:c}=qk(),{basename:h}=Kk(),{loaderData:d,matches:m}=wj(),g=C.useMemo(()=>kx(n,e,m,l,r,"data"),[n,e,m,l,r]),y=C.useMemo(()=>kx(n,e,m,l,r,"assets"),[n,e,m,l,r]),x=C.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let S=new Set,T=!1;if(e.forEach(M=>{var F;let N=l.routes[M.route.id];!N||!N.hasLoader||(!g.some($=>$.route.id===M.route.id)&&M.route.id in d&&((F=c[M.route.id])!=null&&F.shouldRevalidate)||N.hasClientLoader?T=!0:S.add(M.route.id))}),S.size===0)return[];let P=fj(n,h,s.unstable_trailingSlashAwareDataRequests,"data");return T&&S.size>0&&P.searchParams.set("_routes",e.filter(M=>S.has(M.route.id)).map(M=>M.route.id).join(",")),[P.pathname+P.search]},[h,s.unstable_trailingSlashAwareDataRequests,d,r,l,g,e,n,c]),E=C.useMemo(()=>yj(y,l),[y,l]),k=Sj(y);return C.createElement(C.Fragment,null,x.map(S=>C.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...t})),E.map(S=>C.createElement("link",{key:S,rel:"modulepreload",href:S,...t})),k.map(({key:S,link:T})=>C.createElement("link",{key:S,nonce:t.nonce,...T})))}function Tj(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Ij=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Ij&&(window.__reactRouterVersion="7.12.0")}catch{}function Cj({basename:n,children:e,unstable_useTransitions:t,window:r}){let s=C.useRef();s.current==null&&(s.current=aC({window:r,v5Compat:!0}));let l=s.current,[c,h]=C.useState({action:l.action,location:l.location}),d=C.useCallback(m=>{t===!1?h(m):C.startTransition(()=>h(m))},[t]);return C.useLayoutEffect(()=>l.listen(d),[l,d]),C.createElement(rj,{basename:n,children:e,location:c.location,navigationType:c.action,navigator:l,unstable_useTransitions:t})}var Gk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,he=C.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:l,replace:c,state:h,target:d,to:m,preventScrollReset:g,viewTransition:y,unstable_defaultShouldRevalidate:x,...E},k){let{basename:S,unstable_useTransitions:T}=C.useContext(ir),P=typeof m=="string"&&Gk.test(m),M=Lk(m,S);m=M.to;let N=FC(m,{relative:s}),[F,$,K]=kj(r,E),A=Pj(m,{replace:c,state:h,target:d,preventScrollReset:g,relative:s,viewTransition:y,unstable_defaultShouldRevalidate:x,unstable_useTransitions:T});function j(L){e&&e(L),L.defaultPrevented||A(L)}let D=C.createElement("a",{...E,...K,href:M.absoluteURL||N,onClick:M.isExternal||l?e:j,ref:Tj(k,$),target:d,"data-discover":!P&&t==="render"?"true":void 0});return F&&!P?C.createElement(C.Fragment,null,D,C.createElement(_j,{page:N})):D});he.displayName="Link";var jj=C.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:l,to:c,viewTransition:h,children:d,...m},g){let y=yu(c,{relative:m.relative}),x=Er(),E=C.useContext(cf),{navigator:k,basename:S}=C.useContext(ir),T=E!=null&&Lj(y)&&h===!0,P=k.encodeLocation?k.encodeLocation(y).pathname:y.pathname,M=x.pathname,N=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;t||(M=M.toLowerCase(),N=N?N.toLowerCase():null,P=P.toLowerCase()),N&&S&&(N=Ji(N,S)||N);const F=P!=="/"&&P.endsWith("/")?P.length-1:P.length;let $=M===P||!s&&M.startsWith(P)&&M.charAt(F)==="/",K=N!=null&&(N===P||!s&&N.startsWith(P)&&N.charAt(P.length)==="/"),A={isActive:$,isPending:K,isTransitioning:T},j=$?e:void 0,D;typeof r=="function"?D=r(A):D=[r,$?"active":null,K?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let L=typeof l=="function"?l(A):l;return C.createElement(he,{...m,"aria-current":j,className:D,ref:g,style:L,to:c,viewTransition:h},typeof d=="function"?d(A):d)});jj.displayName="NavLink";var Aj=C.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:l,method:c=fh,action:h,onSubmit:d,relative:m,preventScrollReset:g,viewTransition:y,unstable_defaultShouldRevalidate:x,...E},k)=>{let{unstable_useTransitions:S}=C.useContext(ir),T=Mj(),P=Vj(h,{relative:m}),M=c.toLowerCase()==="get"?"get":"post",N=typeof h=="string"&&Gk.test(h),F=$=>{if(d&&d($),$.defaultPrevented)return;$.preventDefault();let K=$.nativeEvent.submitter,A=(K==null?void 0:K.getAttribute("formmethod"))||c,j=()=>T(K||$.currentTarget,{fetcherKey:e,method:A,navigate:t,replace:s,state:l,relative:m,preventScrollReset:g,viewTransition:y,unstable_defaultShouldRevalidate:x});S&&t!==!1?C.startTransition(()=>j()):j()};return C.createElement("form",{ref:k,method:M,action:P,onSubmit:r?d:F,...E,"data-discover":!N&&n==="render"?"true":void 0})});Aj.displayName="Form";function Rj(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Qk(n){let e=C.useContext(Il);return wt(e,Rj(n)),e}function Pj(n,{target:e,replace:t,state:r,preventScrollReset:s,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:h,unstable_useTransitions:d}={}){let m=io(),g=Er(),y=yu(n,{relative:l});return C.useCallback(x=>{if(cj(x,e)){x.preventDefault();let E=t!==void 0?t:tu(g)===tu(y),k=()=>m(n,{replace:E,state:r,preventScrollReset:s,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:h});d?C.startTransition(()=>k()):k()}},[g,m,y,t,r,e,n,s,l,c,h,d])}var Nj=0,Dj=()=>`__${String(++Nj)}__`;function Mj(){let{router:n}=Qk("useSubmit"),{basename:e}=C.useContext(ir),t=JC(),r=n.fetch,s=n.navigate;return C.useCallback(async(l,c={})=>{let{action:h,method:d,encType:m,formData:g,body:y}=hj(l,e);if(c.navigate===!1){let x=c.fetcherKey||Dj();await r(x,t,c.action||h,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:g,body:y,formMethod:c.method||d,formEncType:c.encType||m,flushSync:c.flushSync})}else await s(c.action||h,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:g,body:y,formMethod:c.method||d,formEncType:c.encType||m,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[r,s,e,t])}function Vj(n,{relative:e}={}){let{basename:t}=C.useContext(ir),r=C.useContext(Hr);wt(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),l={...yu(n||".",{relative:e})},c=Er();if(n==null){l.search=c.search;let h=new URLSearchParams(l.search),d=h.getAll("index");if(d.some(g=>g==="")){h.delete("index"),d.filter(y=>y).forEach(y=>h.append("index",y));let g=h.toString();l.search=g?`?${g}`:""}}return(!n||n===".")&&s.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:qi([t,l.pathname])),tu(l)}function Lj(n,{relative:e}={}){let t=C.useContext(Bk);wt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Qk("useViewTransitionState"),s=yu(n,{relative:e});if(!t.isTransitioning)return!1;let l=Ji(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=Ji(t.nextLocation.pathname,r)||t.nextLocation.pathname;return jh(s.pathname,c)!=null||jh(s.pathname,l)!=null}const Oj=()=>{};var _x={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},Bj=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const l=n[t++];e[r++]=String.fromCharCode((s&31)<<6|l&63)}else if(s>239&&s<365){const l=n[t++],c=n[t++],h=n[t++],d=((s&7)<<18|(l&63)<<12|(c&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const l=n[t++],c=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(l&63)<<6|c&63)}}return e.join("")},Xk={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const l=n[s],c=s+1<n.length,h=c?n[s+1]:0,d=s+2<n.length,m=d?n[s+2]:0,g=l>>2,y=(l&3)<<4|h>>4;let x=(h&15)<<2|m>>6,E=m&63;d||(E=64,c||(x=64)),r.push(t[g],t[y],t[x],t[E])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Yk(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Bj(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const l=t[n.charAt(s++)],h=s<n.length?t[n.charAt(s)]:0;++s;const m=s<n.length?t[n.charAt(s)]:64;++s;const y=s<n.length?t[n.charAt(s)]:64;if(++s,l==null||h==null||m==null||y==null)throw new zj;const x=l<<2|h>>4;if(r.push(x),m!==64){const E=h<<4&240|m>>2;if(r.push(E),y!==64){const k=m<<6&192|y;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class zj extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Fj=function(n){const e=Yk(n);return Xk.encodeByteArray(e,!0)},Ah=function(n){return Fj(n).replace(/\./g,"")},Jk=function(n){try{return Xk.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uj(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wj=()=>Uj().__FIREBASE_DEFAULTS__,$j=()=>{if(typeof process>"u"||typeof _x>"u")return;const n=_x.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Hj=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Jk(n[1]);return e&&JSON.parse(e)},df=()=>{try{return Oj()||Wj()||$j()||Hj()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Zk=n=>{var e,t;return(t=(e=df())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},Kj=n=>{const e=Zk(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},e_=()=>{var n;return(n=df())==null?void 0:n.config},t_=n=>{var e;return(e=df())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function n_(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gj(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Ah(JSON.stringify(t)),Ah(JSON.stringify(c)),""].join(".")}const $c={};function Qj(){const n={prod:[],emulator:[]};for(const e of Object.keys($c))$c[e]?n.emulator.push(e):n.prod.push(e);return n}function Yj(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Sx=!1;function r_(n,e){if(typeof window>"u"||typeof document>"u"||!jl(window.location.host)||$c[n]===e||$c[n]||Sx)return;$c[n]=e;function t(x){return`__firebase__banner__${x}`}const r="__firebase__banner",l=Qj().prod.length>0;function c(){const x=document.getElementById(r);x&&x.remove()}function h(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function d(x,E){x.setAttribute("width","24"),x.setAttribute("id",E),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function m(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{Sx=!0,c()},x}function g(x,E){x.setAttribute("id",E),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function y(){const x=Yj(r),E=t("text"),k=document.getElementById(E)||document.createElement("span"),S=t("learnmore"),T=document.getElementById(S)||document.createElement("a"),P=t("preprendIcon"),M=document.getElementById(P)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const N=x.element;h(N),g(T,S);const F=m();d(M,P),N.append(M,k,T,F),document.body.appendChild(N)}l?(k.innerText="Preview backend disconnected.",M.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(M.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Xj(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(kn())}function Jj(){var e;const n=(e=df())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Zj(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function e5(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function t5(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function n5(){const n=kn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function r5(){return!Jj()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function i5(){try{return typeof indexedDB=="object"}catch{return!1}}function s5(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var l;e(((l=s.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o5="FirebaseError";class os extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=o5,Object.setPrototypeOf(this,os.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vu.prototype.create)}}class vu{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,l=this.errors[e],c=l?a5(l,r):"Error",h=`${this.serviceName}: ${c} (${s}).`;return new os(s,h,r)}}function a5(n,e){return n.replace(l5,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const l5=/\{\$([^}]+)}/g;function c5(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Zi(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const l=n[s],c=e[s];if(Ex(l)&&Ex(c)){if(!Zi(l,c))return!1}else if(l!==c)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function Ex(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xu(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Vc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,l]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(l)}}),e}function Lc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function u5(n,e){const t=new d5(n,e);return t.subscribe.bind(t)}class d5{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");h5(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=kp),s.error===void 0&&(s.error=kp),s.complete===void 0&&(s.complete=kp);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function h5(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function kp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(n){return n&&n._delegate?n._delegate:n}class Qo{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f5{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new qj;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(p5(e))try{this.getOrInitializeService({instanceIdentifier:zo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:s});r.resolve(l)}catch{}}}}clearInstance(e=zo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=zo){return this.instances.has(e)}getOptions(e=zo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);r===h&&c.resolve(s)}return s}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const l=this.instances.get(r);return l&&e(l,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:m5(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=zo){return this.component?this.component.multipleInstances?e:zo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function m5(n){return n===zo?void 0:n}function p5(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g5{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new f5(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(qe||(qe={}));const y5={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},v5=qe.INFO,x5={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},b5=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=x5[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class yy{constructor(e){this.name=e,this._logLevel=v5,this._logHandler=b5,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?y5[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}}const w5=(n,e)=>e.some(t=>n instanceof t);let Tx,Ix;function k5(){return Tx||(Tx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _5(){return Ix||(Ix=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const i_=new WeakMap,og=new WeakMap,s_=new WeakMap,_p=new WeakMap,vy=new WeakMap;function S5(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(Ws(n.result)),s()},c=()=>{r(n.error),s()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&i_.set(t,n)}).catch(()=>{}),vy.set(e,n),e}function E5(n){if(og.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),s()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});og.set(n,e)}let ag={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return og.get(n);if(e==="objectStoreNames")return n.objectStoreNames||s_.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ws(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function T5(n){ag=n(ag)}function I5(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Sp(this),e,...t);return s_.set(r,e.sort?e.sort():[e]),Ws(r)}:_5().includes(n)?function(...e){return n.apply(Sp(this),e),Ws(i_.get(this))}:function(...e){return Ws(n.apply(Sp(this),e))}}function C5(n){return typeof n=="function"?I5(n):(n instanceof IDBTransaction&&E5(n),w5(n,k5())?new Proxy(n,ag):n)}function Ws(n){if(n instanceof IDBRequest)return S5(n);if(_p.has(n))return _p.get(n);const e=C5(n);return e!==n&&(_p.set(n,e),vy.set(e,n)),e}const Sp=n=>vy.get(n);function j5(n,e,{blocked:t,upgrade:r,blocking:s,terminated:l}={}){const c=indexedDB.open(n,e),h=Ws(c);return r&&c.addEventListener("upgradeneeded",d=>{r(Ws(c.result),d.oldVersion,d.newVersion,Ws(c.transaction),d)}),t&&c.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),h.then(d=>{l&&d.addEventListener("close",()=>l()),s&&d.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const A5=["get","getKey","getAll","getAllKeys","count"],R5=["put","add","delete","clear"],Ep=new Map;function Cx(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Ep.get(e))return Ep.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=R5.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||A5.includes(t)))return;const l=async function(c,...h){const d=this.transaction(c,s?"readwrite":"readonly");let m=d.store;return r&&(m=m.index(h.shift())),(await Promise.all([m[t](...h),s&&d.done]))[0]};return Ep.set(e,l),l}T5(n=>({...n,get:(e,t,r)=>Cx(e,t)||n.get(e,t,r),has:(e,t)=>!!Cx(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P5{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(N5(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function N5(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const lg="@firebase/app",jx="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const es=new yy("@firebase/app"),D5="@firebase/app-compat",M5="@firebase/analytics-compat",V5="@firebase/analytics",L5="@firebase/app-check-compat",O5="@firebase/app-check",B5="@firebase/auth",z5="@firebase/auth-compat",F5="@firebase/database",U5="@firebase/data-connect",W5="@firebase/database-compat",$5="@firebase/functions",H5="@firebase/functions-compat",K5="@firebase/installations",q5="@firebase/installations-compat",G5="@firebase/messaging",Q5="@firebase/messaging-compat",Y5="@firebase/performance",X5="@firebase/performance-compat",J5="@firebase/remote-config",Z5="@firebase/remote-config-compat",eA="@firebase/storage",tA="@firebase/storage-compat",nA="@firebase/firestore",rA="@firebase/ai",iA="@firebase/firestore-compat",sA="firebase",oA="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cg="[DEFAULT]",aA={[lg]:"fire-core",[D5]:"fire-core-compat",[V5]:"fire-analytics",[M5]:"fire-analytics-compat",[O5]:"fire-app-check",[L5]:"fire-app-check-compat",[B5]:"fire-auth",[z5]:"fire-auth-compat",[F5]:"fire-rtdb",[U5]:"fire-data-connect",[W5]:"fire-rtdb-compat",[$5]:"fire-fn",[H5]:"fire-fn-compat",[K5]:"fire-iid",[q5]:"fire-iid-compat",[G5]:"fire-fcm",[Q5]:"fire-fcm-compat",[Y5]:"fire-perf",[X5]:"fire-perf-compat",[J5]:"fire-rc",[Z5]:"fire-rc-compat",[eA]:"fire-gcs",[tA]:"fire-gcs-compat",[nA]:"fire-fst",[iA]:"fire-fst-compat",[rA]:"fire-vertex","fire-js":"fire-js",[sA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rh=new Map,lA=new Map,ug=new Map;function Ax(n,e){try{n.container.addComponent(e)}catch(t){es.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function dl(n){const e=n.name;if(ug.has(e))return es.debug(`There were multiple attempts to register component ${e}.`),!1;ug.set(e,n);for(const t of Rh.values())Ax(t,n);for(const t of lA.values())Ax(t,n);return!0}function xy(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function tr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$s=new vu("app","Firebase",cA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Qo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $s.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Al=oA;function o_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:cg,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw $s.create("bad-app-name",{appName:String(s)});if(t||(t=e_()),!t)throw $s.create("no-options");const l=Rh.get(s);if(l){if(Zi(t,l.options)&&Zi(r,l.config))return l;throw $s.create("duplicate-app",{appName:s})}const c=new g5(s);for(const d of ug.values())c.addComponent(d);const h=new uA(t,r,c);return Rh.set(s,h),h}function a_(n=cg){const e=Rh.get(n);if(!e&&n===cg&&e_())return o_();if(!e)throw $s.create("no-app",{appName:n});return e}function Hs(n,e,t){let r=aA[n]??n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),l=e.match(/\s|\//);if(s||l){const c=[`Unable to register library "${r}" with version "${e}":`];s&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),es.warn(c.join(" "));return}dl(new Qo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA="firebase-heartbeat-database",hA=1,nu="firebase-heartbeat-store";let Tp=null;function l_(){return Tp||(Tp=j5(dA,hA,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(nu)}catch(t){console.warn(t)}}}}).catch(n=>{throw $s.create("idb-open",{originalErrorMessage:n.message})})),Tp}async function fA(n){try{const t=(await l_()).transaction(nu),r=await t.objectStore(nu).get(c_(n));return await t.done,r}catch(e){if(e instanceof os)es.warn(e.message);else{const t=$s.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});es.warn(t.message)}}}async function Rx(n,e){try{const r=(await l_()).transaction(nu,"readwrite");await r.objectStore(nu).put(e,c_(n)),await r.done}catch(t){if(t instanceof os)es.warn(t.message);else{const r=$s.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});es.warn(r.message)}}}function c_(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA=1024,pA=30;class gA{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new vA(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Px();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:s}),this._heartbeatsCache.heartbeats.length>pA){const c=xA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){es.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Px(),{heartbeatsToSend:r,unsentEntries:s}=yA(this._heartbeatsCache.heartbeats),l=Ah(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return es.warn(t),""}}}function Px(){return new Date().toISOString().substring(0,10)}function yA(n,e=mA){const t=[];let r=n.slice();for(const s of n){const l=t.find(c=>c.agent===s.agent);if(l){if(l.dates.push(s.date),Nx(t)>e){l.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),Nx(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class vA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return i5()?s5().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await fA(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Rx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Rx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Nx(n){return Ah(JSON.stringify({version:2,heartbeats:n})).length}function xA(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(n){dl(new Qo("platform-logger",e=>new P5(e),"PRIVATE")),dl(new Qo("heartbeat",e=>new gA(e),"PRIVATE")),Hs(lg,jx,n),Hs(lg,jx,"esm2020"),Hs("fire-js","")}bA("");function u_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const wA=u_,d_=new vu("auth","Firebase",u_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ph=new yy("@firebase/auth");function kA(n,...e){Ph.logLevel<=qe.WARN&&Ph.warn(`Auth (${Al}): ${n}`,...e)}function ph(n,...e){Ph.logLevel<=qe.ERROR&&Ph.error(`Auth (${Al}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(n,...e){throw wy(n,...e)}function zr(n,...e){return wy(n,...e)}function by(n,e,t){const r={...wA(),[e]:t};return new vu("auth","Firebase",r).create(e,{appName:n.name})}function Gi(n){return by(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _A(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&wr(n,"argument-error"),by(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function wy(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return d_.create(n,...e)}function Pe(n,e,...t){if(!n)throw wy(e,...t)}function Hi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw ph(e),new Error(e)}function ts(n,e){n||Hi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dg(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function SA(){return Dx()==="http:"||Dx()==="https:"}function Dx(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(SA()||e5()||"connection"in navigator)?navigator.onLine:!0}function TA(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,t){this.shortDelay=e,this.longDelay=t,ts(t>e,"Short delay should be less than long delay!"),this.isMobile=Xj()||t5()}get(){return EA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ky(n,e){ts(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Hi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Hi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Hi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],jA=new bu(3e4,6e4);function so(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function as(n,e,t,r,s={}){return f_(n,s,async()=>{let l={},c={};r&&(e==="GET"?c=r:l={body:JSON.stringify(r)});const h=xu({key:n.config.apiKey,...c}).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const m={method:e,headers:d,...l};return Zj()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&jl(n.emulatorConfig.host)&&(m.credentials="include"),h_.fetch()(await m_(n,n.config.apiHost,t,h),m)})}async function f_(n,e,t){n._canInitEmulator=!1;const r={...IA,...e};try{const s=new RA(n),l=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw eh(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const h=l.ok?c.errorMessage:c.error.message,[d,m]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw eh(n,"credential-already-in-use",c);if(d==="EMAIL_EXISTS")throw eh(n,"email-already-in-use",c);if(d==="USER_DISABLED")throw eh(n,"user-disabled",c);const g=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw by(n,g,m);wr(n,g)}}catch(s){if(s instanceof os)throw s;wr(n,"network-request-failed",{message:String(s)})}}async function wu(n,e,t,r,s={}){const l=await as(n,e,t,r,s);return"mfaPendingCredential"in l&&wr(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function m_(n,e,t,r){const s=`${e}${t}?${r}`,l=n,c=l.config.emulator?ky(n.config,s):`${n.config.apiScheme}://${s}`;return CA.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function AA(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class RA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(zr(this.auth,"network-request-failed")),jA.get())})}}function eh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=zr(n,e,r);return s.customData._tokenResponse=t,s}function Mx(n){return n!==void 0&&n.enterprise!==void 0}class PA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return AA(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function NA(n,e){return as(n,"GET","/v2/recaptchaConfig",so(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DA(n,e){return as(n,"POST","/v1/accounts:delete",e)}async function Nh(n,e){return as(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function MA(n,e=!1){const t=Ot(n),r=await t.getIdToken(e),s=_y(r);Pe(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const l=typeof s.firebase=="object"?s.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:s,token:r,authTime:Hc(Ip(s.auth_time)),issuedAtTime:Hc(Ip(s.iat)),expirationTime:Hc(Ip(s.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Ip(n){return Number(n)*1e3}function _y(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return ph("JWT malformed, contained fewer than 3 sections"),null;try{const s=Jk(t);return s?JSON.parse(s):(ph("Failed to decode base64 JWT payload"),null)}catch(s){return ph("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Vx(n){const e=_y(n);return Pe(e,"internal-error"),Pe(typeof e.exp<"u","internal-error"),Pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hl(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof os&&VA(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function VA({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Hc(this.lastLoginAt),this.creationTime=Hc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dh(n){var y;const e=n.auth,t=await n.getIdToken(),r=await hl(n,Nh(e,{idToken:t}));Pe(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const l=(y=s.providerUserInfo)!=null&&y.length?p_(s.providerUserInfo):[],c=BA(n.providerData,l),h=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!(c!=null&&c.length),m=h?d:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new hg(s.createdAt,s.lastLoginAt),isAnonymous:m};Object.assign(n,g)}async function OA(n){const e=Ot(n);await Dh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function BA(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function p_(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zA(n,e){const t=await f_(n,{},async()=>{const r=xu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:l}=n.config,c=await m_(n,s,"/v1/token",`key=${l}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:h,body:r};return n.emulatorConfig&&jl(n.emulatorConfig.host)&&(d.credentials="include"),h_.fetch()(c,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function FA(n,e){return as(n,"POST","/v2/accounts:revokeToken",so(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(typeof e.idToken<"u","internal-error"),Pe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Vx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Pe(e.length!==0,"internal-error");const t=Vx(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:l}=await zA(e,t);this.updateTokensAndExpiration(r,s,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:l}=t,c=new rl;return r&&(Pe(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),s&&(Pe(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),l&&(Pe(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new rl,this.toJSON())}_performRefresh(){return Hi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vs(n,e){Pe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Br{constructor({uid:e,auth:t,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new LA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new hg(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await hl(this,this.stsTokenManager.getToken(this.auth,e));return Pe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return MA(this,e)}reload(){return OA(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Br({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Dh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(tr(this.auth.app))return Promise.reject(Gi(this.auth));const e=await this.getIdToken();return await hl(this,DA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,s=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,h=t.tenantId??void 0,d=t._redirectEventId??void 0,m=t.createdAt??void 0,g=t.lastLoginAt??void 0,{uid:y,emailVerified:x,isAnonymous:E,providerData:k,stsTokenManager:S}=t;Pe(y&&S,e,"internal-error");const T=rl.fromJSON(this.name,S);Pe(typeof y=="string",e,"internal-error"),Vs(r,e.name),Vs(s,e.name),Pe(typeof x=="boolean",e,"internal-error"),Pe(typeof E=="boolean",e,"internal-error"),Vs(l,e.name),Vs(c,e.name),Vs(h,e.name),Vs(d,e.name),Vs(m,e.name),Vs(g,e.name);const P=new Br({uid:y,auth:e,email:s,emailVerified:x,displayName:r,isAnonymous:E,photoURL:c,phoneNumber:l,tenantId:h,stsTokenManager:T,createdAt:m,lastLoginAt:g});return k&&Array.isArray(k)&&(P.providerData=k.map(M=>({...M}))),d&&(P._redirectEventId=d),P}static async _fromIdTokenResponse(e,t,r=!1){const s=new rl;s.updateFromServerResponse(t);const l=new Br({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Dh(l),l}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];Pe(s.localId!==void 0,"internal-error");const l=s.providerUserInfo!==void 0?p_(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!(l!=null&&l.length),h=new rl;h.updateFromIdToken(r);const d=new Br({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:c}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new hg(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(l!=null&&l.length)};return Object.assign(d,m),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lx=new Map;function Ki(n){ts(n instanceof Function,"Expected a class definition");let e=Lx.get(n);return e?(ts(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Lx.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}g_.type="NONE";const Ox=g_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gh(n,e,t){return`firebase:${n}:${e}:${t}`}class il{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:l}=this.auth;this.fullUserKey=gh(this.userKey,s.apiKey,l),this.fullPersistenceKey=gh("persistence",s.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Nh(this.auth,{idToken:e}).catch(()=>{});return t?Br._fromGetAccountInfoResponse(this.auth,t,e):null}return Br._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new il(Ki(Ox),e,r);const s=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let l=s[0]||Ki(Ox);const c=gh(r,e.config.apiKey,e.name);let h=null;for(const m of t)try{const g=await m._get(c);if(g){let y;if(typeof g=="string"){const x=await Nh(e,{idToken:g}).catch(()=>{});if(!x)break;y=await Br._fromGetAccountInfoResponse(e,x,g)}else y=Br._fromJSON(e,g);m!==l&&(h=y),l=m;break}}catch{}const d=s.filter(m=>m._shouldAllowMigration);return!l._shouldAllowMigration||!d.length?new il(l,e,r):(l=d[0],h&&await l._set(c,h.toJSON()),await Promise.all(t.map(async m=>{if(m!==l)try{await m._remove(c)}catch{}})),new il(l,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bx(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(b_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(y_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(k_(e))return"Blackberry";if(__(e))return"Webos";if(v_(e))return"Safari";if((e.includes("chrome/")||x_(e))&&!e.includes("edge/"))return"Chrome";if(w_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function y_(n=kn()){return/firefox\//i.test(n)}function v_(n=kn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function x_(n=kn()){return/crios\//i.test(n)}function b_(n=kn()){return/iemobile/i.test(n)}function w_(n=kn()){return/android/i.test(n)}function k_(n=kn()){return/blackberry/i.test(n)}function __(n=kn()){return/webos/i.test(n)}function Sy(n=kn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function UA(n=kn()){var e;return Sy(n)&&!!((e=window.navigator)!=null&&e.standalone)}function WA(){return n5()&&document.documentMode===10}function S_(n=kn()){return Sy(n)||w_(n)||__(n)||k_(n)||/windows phone/i.test(n)||b_(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(n,e=[]){let t;switch(n){case"Browser":t=Bx(kn());break;case"Worker":t=`${Bx(kn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Al}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((c,h)=>{try{const d=e(l);c(d)}catch(d){h(d)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HA(n,e={}){return as(n,"GET","/v2/passwordPolicy",so(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA=6;class qA{constructor(e){var r;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??KA,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zx(this),this.idTokenSubscription=new zx(this),this.beforeStateQueue=new $A(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=d_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ki(t)),this._initializationPromise=this.queue(async()=>{var r,s,l;if(!this._deleted&&(this.persistenceManager=await il.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Nh(this,{idToken:e}),r=await Br._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(tr(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(h,h))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,h=r==null?void 0:r._redirectEventId,d=await this.tryRedirectSignIn(e);(!c||c===h)&&(d!=null&&d.user)&&(r=d.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Dh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=TA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(tr(this.app))return Promise.reject(Gi(this));const t=e?Ot(e):null;return t&&Pe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return tr(this.app)?Promise.reject(Gi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return tr(this.app)?Promise.reject(Gi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ki(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await HA(this),t=new qA(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new vu("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await FA(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ki(e)||this._popupRedirectResolver;Pe(t,this,"argument-error"),this.redirectPersistenceManager=await il.create(this,[Ki(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pe(h,this,"internal-error"),h.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,r,s);return()=>{c=!0,d()}}else{const d=e.addObserver(t);return()=>{c=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=E_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(tr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&kA(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function oo(n){return Ot(n)}class zx{constructor(e){this.auth=e,this.observer=null,this.addObserver=u5(t=>this.observer=t)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function QA(n){hf=n}function T_(n){return hf.loadJS(n)}function YA(){return hf.recaptchaEnterpriseScript}function XA(){return hf.gapiScript}function JA(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class ZA{constructor(){this.enterprise=new eR}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class eR{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const tR="recaptcha-enterprise",I_="NO_RECAPTCHA";class nR{constructor(e){this.type=tR,this.auth=oo(e)}async verify(e="verify",t=!1){async function r(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,h)=>{NA(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const m=new PA(d);return l.tenantId==null?l._agentRecaptchaConfig=m:l._tenantRecaptchaConfigs[l.tenantId]=m,c(m.siteKey)}}).catch(d=>{h(d)})})}function s(l,c,h){const d=window.grecaptcha;Mx(d)?d.enterprise.ready(()=>{d.enterprise.execute(l,{action:e}).then(m=>{c(m)}).catch(()=>{c(I_)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ZA().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{r(this.auth).then(h=>{if(!t&&Mx(window.grecaptcha))s(h,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let d=YA();d.length!==0&&(d+=h),T_(d).then(()=>{s(h,l,c)}).catch(m=>{c(m)})}}).catch(h=>{c(h)})})}}async function Fx(n,e,t,r=!1,s=!1){const l=new nR(n);let c;if(s)c=I_;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const h={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const d=h.phoneEnrollmentInfo.phoneNumber,m=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const d=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return r?Object.assign(h,{captchaResp:c}):Object.assign(h,{captchaResponse:c}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function fg(n,e,t,r,s){var l;if((l=n._getRecaptchaConfig())!=null&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Fx(n,e,t,t==="getOobCode");return r(n,c)}else return r(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await Fx(n,e,t,t==="getOobCode");return r(n,h)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rR(n,e){const t=xy(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),l=t.getOptions();if(Zi(l,e??{}))return s;wr(s,"already-initialized")}return t.initialize({options:e})}function iR(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Ki);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function sR(n,e,t){const r=oo(n);Pe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,l=C_(e),{host:c,port:h}=oR(e),d=h===null?"":`:${h}`,m={url:`${l}//${c}${d}/`},g=Object.freeze({host:c,port:h,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Pe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Pe(Zi(m,r.config.emulator)&&Zi(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=m,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,jl(c)?(n_(`${l}//${c}${d}`),r_("Auth",!0)):aR()}function C_(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function oR(n){const e=C_(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const l=s[1];return{host:l,port:Ux(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:Ux(c)}}}function Ux(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function aR(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Hi("not implemented")}_getIdTokenResponse(e){return Hi("not implemented")}_linkToIdToken(e,t){return Hi("not implemented")}_getReauthenticationResolver(e){return Hi("not implemented")}}async function lR(n,e){return as(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cR(n,e){return wu(n,"POST","/v1/accounts:signInWithPassword",so(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uR(n,e){return wu(n,"POST","/v1/accounts:signInWithEmailLink",so(n,e))}async function dR(n,e){return wu(n,"POST","/v1/accounts:signInWithEmailLink",so(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru extends Ey{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new ru(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new ru(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return fg(e,t,"signInWithPassword",cR);case"emailLink":return uR(e,{email:this._email,oobCode:this._password});default:wr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return fg(e,r,"signUpPassword",lR);case"emailLink":return dR(e,{idToken:t,email:this._email,oobCode:this._password});default:wr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sl(n,e){return wu(n,"POST","/v1/accounts:signInWithIdp",so(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR="http://localhost";class Yo extends Ey{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Yo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):wr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...l}=t;if(!r||!s)return null;const c=new Yo(r,s);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return sl(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,sl(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,sl(e,t)}buildRequest(){const e={requestUri:hR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=xu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fR(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function mR(n){const e=Vc(Lc(n)).link,t=e?Vc(Lc(e)).deep_link_id:null,r=Vc(Lc(n)).deep_link_id;return(r?Vc(Lc(r)).link:null)||r||t||e||n}class Ty{constructor(e){const t=Vc(Lc(e)),r=t.apiKey??null,s=t.oobCode??null,l=fR(t.mode??null);Pe(r&&s&&l,"argument-error"),this.apiKey=r,this.operation=l,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=mR(e);try{return new Ty(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(){this.providerId=Rl.PROVIDER_ID}static credential(e,t){return ru._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Ty.parseLink(t);return Pe(r,"argument-error"),ru._fromEmailAndCode(e,r.code,r.tenantId)}}Rl.PROVIDER_ID="password";Rl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Rl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku extends Iy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os extends ku{constructor(){super("facebook.com")}static credential(e){return Yo._fromParams({providerId:Os.PROVIDER_ID,signInMethod:Os.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Os.credentialFromTaggedObject(e)}static credentialFromError(e){return Os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Os.credential(e.oauthAccessToken)}catch{return null}}}Os.FACEBOOK_SIGN_IN_METHOD="facebook.com";Os.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi extends ku{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Yo._fromParams({providerId:Wi.PROVIDER_ID,signInMethod:Wi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Wi.credentialFromTaggedObject(e)}static credentialFromError(e){return Wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Wi.credential(t,r)}catch{return null}}}Wi.GOOGLE_SIGN_IN_METHOD="google.com";Wi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs extends ku{constructor(){super("github.com")}static credential(e){return Yo._fromParams({providerId:Bs.PROVIDER_ID,signInMethod:Bs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Bs.credentialFromTaggedObject(e)}static credentialFromError(e){return Bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Bs.credential(e.oauthAccessToken)}catch{return null}}}Bs.GITHUB_SIGN_IN_METHOD="github.com";Bs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs extends ku{constructor(){super("twitter.com")}static credential(e,t){return Yo._fromParams({providerId:zs.PROVIDER_ID,signInMethod:zs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return zs.credentialFromTaggedObject(e)}static credentialFromError(e){return zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return zs.credential(t,r)}catch{return null}}}zs.TWITTER_SIGN_IN_METHOD="twitter.com";zs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pR(n,e){return wu(n,"POST","/v1/accounts:signUp",so(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const l=await Br._fromIdTokenResponse(e,r,s),c=Wx(r);return new Xo({user:l,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=Wx(r);return new Xo({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function Wx(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh extends os{constructor(e,t,r,s){super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Mh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new Mh(e,t,r,s)}}function j_(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Mh._fromErrorAndOperation(n,l,e,r):l})}async function gR(n,e,t=!1){const r=await hl(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Xo._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yR(n,e,t=!1){const{auth:r}=n;if(tr(r.app))return Promise.reject(Gi(r));const s="reauthenticate";try{const l=await hl(n,j_(r,s,e,n),t);Pe(l.idToken,r,"internal-error");const c=_y(l.idToken);Pe(c,r,"internal-error");const{sub:h}=c;return Pe(n.uid===h,r,"user-mismatch"),Xo._forOperation(n,s,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&wr(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A_(n,e,t=!1){if(tr(n.app))return Promise.reject(Gi(n));const r="signIn",s=await j_(n,r,e),l=await Xo._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(l.user),l}async function vR(n,e){return A_(oo(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R_(n){const e=oo(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function xR(n,e,t){if(tr(n.app))return Promise.reject(Gi(n));const r=oo(n),c=await fg(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",pR).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&R_(n),d}),h=await Xo._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(h.user),h}function bR(n,e,t){return tr(n.app)?Promise.reject(Gi(n)):vR(Ot(n),Rl.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&R_(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wR(n,e){return as(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kR(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Ot(n),l={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=await hl(r,wR(r.auth,l));r.displayName=c.displayName||null,r.photoURL=c.photoUrl||null;const h=r.providerData.find(({providerId:d})=>d==="password");h&&(h.displayName=r.displayName,h.photoURL=r.photoURL),await r._updateTokensIfNecessary(c)}function _R(n,e,t,r){return Ot(n).onIdTokenChanged(e,t,r)}function SR(n,e,t){return Ot(n).beforeAuthStateChanged(e,t)}function ER(n,e,t,r){return Ot(n).onAuthStateChanged(e,t,r)}function TR(n){return Ot(n).signOut()}const Vh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Vh,"1"),this.storage.removeItem(Vh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR=1e3,CR=10;class N_ extends P_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=S_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,h,d)=>{this.notifyListeners(c,d)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);WA()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,CR):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},IR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}N_.type="LOCAL";const jR=N_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_ extends P_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}D_.type="SESSION";const M_=D_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AR(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new ff(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:l}=t.data,c=this.handlersMap[s];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const h=Array.from(c).map(async m=>m(t.origin,l)),d=await AR(h);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ff.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cy(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let l,c;return new Promise((h,d)=>{const m=Cy("",20);s.port1.start();const g=setTimeout(()=>{d(new Error("unsupported_event"))},r);c={messageChannel:s,onMessage(y){const x=y;if(x.data.eventId===m)switch(x.data.status){case"ack":clearTimeout(g),l=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),h(x.data.response);break;default:clearTimeout(g),clearTimeout(l),d(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yi(){return window}function PR(n){yi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V_(){return typeof yi().WorkerGlobalScope<"u"&&typeof yi().importScripts=="function"}async function NR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function DR(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function MR(){return V_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_="firebaseLocalStorageDb",VR=1,Lh="firebaseLocalStorage",O_="fbase_key";class _u{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function mf(n,e){return n.transaction([Lh],e?"readwrite":"readonly").objectStore(Lh)}function LR(){const n=indexedDB.deleteDatabase(L_);return new _u(n).toPromise()}function mg(){const n=indexedDB.open(L_,VR);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Lh,{keyPath:O_})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Lh)?e(r):(r.close(),await LR(),e(await mg()))})})}async function $x(n,e,t){const r=mf(n,!0).put({[O_]:e,value:t});return new _u(r).toPromise()}async function OR(n,e){const t=mf(n,!1).get(e),r=await new _u(t).toPromise();return r===void 0?null:r.value}function Hx(n,e){const t=mf(n,!0).delete(e);return new _u(t).toPromise()}const BR=800,zR=3;class B_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await mg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>zR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return V_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ff._getInstance(MR()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await NR(),!this.activeServiceWorker)return;this.sender=new RR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||DR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await mg();return await $x(e,Vh,"1"),await Hx(e,Vh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>$x(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>OR(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Hx(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const l=mf(s,!1).getAll();return new _u(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:l}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(l)&&(this.notifyListeners(s,l),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),BR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}B_.type="LOCAL";const FR=B_;new bu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z_(n,e){return e?Ki(e):(Pe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy extends Ey{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return sl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return sl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return sl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function UR(n){return A_(n.auth,new jy(n),n.bypassAuthState)}function WR(n){const{auth:e,user:t}=n;return Pe(t,e,"internal-error"),yR(t,new jy(n),n.bypassAuthState)}async function $R(n){const{auth:e,user:t}=n;return Pe(t,e,"internal-error"),gR(t,new jy(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(e,t,r,s,l=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:l,error:c,type:h}=e;if(c){this.reject(c);return}const d={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return UR;case"linkViaPopup":case"linkViaRedirect":return $R;case"reauthViaPopup":case"reauthViaRedirect":return WR;default:wr(this.auth,"internal-error")}}resolve(e){ts(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ts(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR=new bu(2e3,1e4);async function KR(n,e,t){if(tr(n.app))return Promise.reject(zr(n,"operation-not-supported-in-this-environment"));const r=oo(n);_A(n,e,Iy);const s=z_(r,t);return new Uo(r,"signInViaPopup",e,s).executeNotNull()}class Uo extends F_{constructor(e,t,r,s,l){super(e,t,s,l),this.provider=r,this.authWindow=null,this.pollId=null,Uo.currentPopupAction&&Uo.currentPopupAction.cancel(),Uo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pe(e,this.auth,"internal-error"),e}async onExecution(){ts(this.filter.length===1,"Popup operations only handle one event");const e=Cy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(zr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(zr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Uo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if((r=(t=this.authWindow)==null?void 0:t.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(zr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,HR.get())};e()}}Uo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR="pendingRedirect",yh=new Map;class GR extends F_{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=yh.get(this.auth._key());if(!e){try{const r=await QR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}yh.set(this.auth._key(),e)}return this.bypassAuthState||yh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function QR(n,e){const t=JR(e),r=XR(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function YR(n,e){yh.set(n._key(),e)}function XR(n){return Ki(n._redirectPersistence)}function JR(n){return gh(qR,n.config.apiKey,n.name)}async function ZR(n,e,t=!1){if(tr(n.app))return Promise.reject(Gi(n));const r=oo(n),s=z_(r,e),c=await new GR(r,s,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eP=600*1e3;class tP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!nP(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!U_(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";t.onError(zr(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=eP&&this.cachedEventUids.clear(),this.cachedEventUids.has(Kx(e))}saveEventToCache(e){this.cachedEventUids.add(Kx(e)),this.lastProcessedEventTime=Date.now()}}function Kx(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function U_({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function nP(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return U_(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rP(n,e={}){return as(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sP=/^https?/;async function oP(n){if(n.config.emulator)return;const{authorizedDomains:e}=await rP(n);for(const t of e)try{if(aP(t))return}catch{}wr(n,"unauthorized-domain")}function aP(n){const e=dg(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!sP.test(t))return!1;if(iP.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lP=new bu(3e4,6e4);function qx(){const n=yi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function cP(n){return new Promise((e,t)=>{var s,l,c;function r(){qx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{qx(),t(zr(n,"network-request-failed"))},timeout:lP.get()})}if((l=(s=yi().gapi)==null?void 0:s.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((c=yi().gapi)!=null&&c.load)r();else{const h=JA("iframefcb");return yi()[h]=()=>{gapi.load?r():t(zr(n,"network-request-failed"))},T_(`${XA()}?onload=${h}`).catch(d=>t(d))}}).catch(e=>{throw vh=null,e})}let vh=null;function uP(n){return vh=vh||cP(n),vh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP=new bu(5e3,15e3),hP="__/auth/iframe",fP="emulator/auth/iframe",mP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gP(n){const e=n.config;Pe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?ky(e,fP):`https://${n.config.authDomain}/${hP}`,r={apiKey:e.apiKey,appName:n.name,v:Al},s=pP.get(n.config.apiHost);s&&(r.eid=s);const l=n._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${xu(r).slice(1)}`}async function yP(n){const e=await uP(n),t=yi().gapi;return Pe(t,n,"internal-error"),e.open({where:document.body,url:gP(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mP,dontclear:!0},r=>new Promise(async(s,l)=>{await r.restyle({setHideOnLeave:!1});const c=zr(n,"network-request-failed"),h=yi().setTimeout(()=>{l(c)},dP.get());function d(){yi().clearTimeout(h),s(r)}r.ping(d).then(d,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},xP=500,bP=600,wP="_blank",kP="http://localhost";class Gx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _P(n,e,t,r=xP,s=bP){const l=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const d={...vP,width:r.toString(),height:s.toString(),top:l,left:c},m=kn().toLowerCase();t&&(h=x_(m)?wP:t),y_(m)&&(e=e||kP,d.scrollbars="yes");const g=Object.entries(d).reduce((x,[E,k])=>`${x}${E}=${k},`,"");if(UA(m)&&h!=="_self")return SP(e||"",h),new Gx(null);const y=window.open(e||"",h,g);Pe(y,n,"popup-blocked");try{y.focus()}catch{}return new Gx(y)}function SP(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP="__/auth/handler",TP="emulator/auth/handler",IP=encodeURIComponent("fac");async function Qx(n,e,t,r,s,l){Pe(n.config.authDomain,n,"auth-domain-config-required"),Pe(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Al,eventId:s};if(e instanceof Iy){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",c5(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,y]of Object.entries({}))c[g]=y}if(e instanceof ku){const g=e.getScopes().filter(y=>y!=="");g.length>0&&(c.scopes=g.join(","))}n.tenantId&&(c.tid=n.tenantId);const h=c;for(const g of Object.keys(h))h[g]===void 0&&delete h[g];const d=await n._getAppCheckToken(),m=d?`#${IP}=${encodeURIComponent(d)}`:"";return`${CP(n)}?${xu(h).slice(1)}${m}`}function CP({config:n}){return n.emulator?ky(n,TP):`https://${n.authDomain}/${EP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cp="webStorageSupport";class jP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=M_,this._completeRedirectFn=ZR,this._overrideRedirectResult=YR}async _openPopup(e,t,r,s){var c;ts((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await Qx(e,t,r,dg(),s);return _P(e,l,Cy())}async _openRedirect(e,t,r,s){await this._originValidation(e);const l=await Qx(e,t,r,dg(),s);return PR(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:l}=this.eventManagers[t];return s?Promise.resolve(s):(ts(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await yP(e),r=new tP(e);return t.register("authEvent",s=>(Pe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Cp,{type:Cp},s=>{var c;const l=(c=s==null?void 0:s[0])==null?void 0:c[Cp];l!==void 0&&t(!!l),wr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=oP(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return S_()||v_()||Sy()}}const AP=jP;var Yx="@firebase/auth",Xx="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PP(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function NP(n){dl(new Qo("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=r.options;Pe(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:c,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:E_(n)},m=new GA(r,s,l,d);return iR(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),dl(new Qo("auth-internal",e=>{const t=oo(e.getProvider("auth").getImmediate());return(r=>new RP(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Hs(Yx,Xx,PP(n)),Hs(Yx,Xx,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DP=300,MP=t_("authIdTokenMaxAge")||DP;let Jx=null;const VP=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>MP)return;const s=t==null?void 0:t.token;Jx!==s&&(Jx=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function LP(n=a_()){const e=xy(n,"auth");if(e.isInitialized())return e.getImmediate();const t=rR(n,{popupRedirectResolver:AP,persistence:[FR,jR,M_]}),r=t_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const c=VP(l.toString());SR(t,c,()=>c(t.currentUser)),_R(t,h=>c(h))}}const s=Zk("auth");return s&&sR(t,`http://${s}`),t}function OP(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}QA({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const l=zr("internal-error");l.customData=s,t(l)},r.type="text/javascript",r.charset="UTF-8",OP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});NP("Browser");var Zx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ks,W_;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,j){function D(){}D.prototype=j.prototype,A.F=j.prototype,A.prototype=new D,A.prototype.constructor=A,A.D=function(L,B,U){for(var V=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)V[Ve-2]=arguments[Ve];return j.prototype[B].apply(L,V)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,j,D){D||(D=0);const L=Array(16);if(typeof j=="string")for(var B=0;B<16;++B)L[B]=j.charCodeAt(D++)|j.charCodeAt(D++)<<8|j.charCodeAt(D++)<<16|j.charCodeAt(D++)<<24;else for(B=0;B<16;++B)L[B]=j[D++]|j[D++]<<8|j[D++]<<16|j[D++]<<24;j=A.g[0],D=A.g[1],B=A.g[2];let U=A.g[3],V;V=j+(U^D&(B^U))+L[0]+3614090360&4294967295,j=D+(V<<7&4294967295|V>>>25),V=U+(B^j&(D^B))+L[1]+3905402710&4294967295,U=j+(V<<12&4294967295|V>>>20),V=B+(D^U&(j^D))+L[2]+606105819&4294967295,B=U+(V<<17&4294967295|V>>>15),V=D+(j^B&(U^j))+L[3]+3250441966&4294967295,D=B+(V<<22&4294967295|V>>>10),V=j+(U^D&(B^U))+L[4]+4118548399&4294967295,j=D+(V<<7&4294967295|V>>>25),V=U+(B^j&(D^B))+L[5]+1200080426&4294967295,U=j+(V<<12&4294967295|V>>>20),V=B+(D^U&(j^D))+L[6]+2821735955&4294967295,B=U+(V<<17&4294967295|V>>>15),V=D+(j^B&(U^j))+L[7]+4249261313&4294967295,D=B+(V<<22&4294967295|V>>>10),V=j+(U^D&(B^U))+L[8]+1770035416&4294967295,j=D+(V<<7&4294967295|V>>>25),V=U+(B^j&(D^B))+L[9]+2336552879&4294967295,U=j+(V<<12&4294967295|V>>>20),V=B+(D^U&(j^D))+L[10]+4294925233&4294967295,B=U+(V<<17&4294967295|V>>>15),V=D+(j^B&(U^j))+L[11]+2304563134&4294967295,D=B+(V<<22&4294967295|V>>>10),V=j+(U^D&(B^U))+L[12]+1804603682&4294967295,j=D+(V<<7&4294967295|V>>>25),V=U+(B^j&(D^B))+L[13]+4254626195&4294967295,U=j+(V<<12&4294967295|V>>>20),V=B+(D^U&(j^D))+L[14]+2792965006&4294967295,B=U+(V<<17&4294967295|V>>>15),V=D+(j^B&(U^j))+L[15]+1236535329&4294967295,D=B+(V<<22&4294967295|V>>>10),V=j+(B^U&(D^B))+L[1]+4129170786&4294967295,j=D+(V<<5&4294967295|V>>>27),V=U+(D^B&(j^D))+L[6]+3225465664&4294967295,U=j+(V<<9&4294967295|V>>>23),V=B+(j^D&(U^j))+L[11]+643717713&4294967295,B=U+(V<<14&4294967295|V>>>18),V=D+(U^j&(B^U))+L[0]+3921069994&4294967295,D=B+(V<<20&4294967295|V>>>12),V=j+(B^U&(D^B))+L[5]+3593408605&4294967295,j=D+(V<<5&4294967295|V>>>27),V=U+(D^B&(j^D))+L[10]+38016083&4294967295,U=j+(V<<9&4294967295|V>>>23),V=B+(j^D&(U^j))+L[15]+3634488961&4294967295,B=U+(V<<14&4294967295|V>>>18),V=D+(U^j&(B^U))+L[4]+3889429448&4294967295,D=B+(V<<20&4294967295|V>>>12),V=j+(B^U&(D^B))+L[9]+568446438&4294967295,j=D+(V<<5&4294967295|V>>>27),V=U+(D^B&(j^D))+L[14]+3275163606&4294967295,U=j+(V<<9&4294967295|V>>>23),V=B+(j^D&(U^j))+L[3]+4107603335&4294967295,B=U+(V<<14&4294967295|V>>>18),V=D+(U^j&(B^U))+L[8]+1163531501&4294967295,D=B+(V<<20&4294967295|V>>>12),V=j+(B^U&(D^B))+L[13]+2850285829&4294967295,j=D+(V<<5&4294967295|V>>>27),V=U+(D^B&(j^D))+L[2]+4243563512&4294967295,U=j+(V<<9&4294967295|V>>>23),V=B+(j^D&(U^j))+L[7]+1735328473&4294967295,B=U+(V<<14&4294967295|V>>>18),V=D+(U^j&(B^U))+L[12]+2368359562&4294967295,D=B+(V<<20&4294967295|V>>>12),V=j+(D^B^U)+L[5]+4294588738&4294967295,j=D+(V<<4&4294967295|V>>>28),V=U+(j^D^B)+L[8]+2272392833&4294967295,U=j+(V<<11&4294967295|V>>>21),V=B+(U^j^D)+L[11]+1839030562&4294967295,B=U+(V<<16&4294967295|V>>>16),V=D+(B^U^j)+L[14]+4259657740&4294967295,D=B+(V<<23&4294967295|V>>>9),V=j+(D^B^U)+L[1]+2763975236&4294967295,j=D+(V<<4&4294967295|V>>>28),V=U+(j^D^B)+L[4]+1272893353&4294967295,U=j+(V<<11&4294967295|V>>>21),V=B+(U^j^D)+L[7]+4139469664&4294967295,B=U+(V<<16&4294967295|V>>>16),V=D+(B^U^j)+L[10]+3200236656&4294967295,D=B+(V<<23&4294967295|V>>>9),V=j+(D^B^U)+L[13]+681279174&4294967295,j=D+(V<<4&4294967295|V>>>28),V=U+(j^D^B)+L[0]+3936430074&4294967295,U=j+(V<<11&4294967295|V>>>21),V=B+(U^j^D)+L[3]+3572445317&4294967295,B=U+(V<<16&4294967295|V>>>16),V=D+(B^U^j)+L[6]+76029189&4294967295,D=B+(V<<23&4294967295|V>>>9),V=j+(D^B^U)+L[9]+3654602809&4294967295,j=D+(V<<4&4294967295|V>>>28),V=U+(j^D^B)+L[12]+3873151461&4294967295,U=j+(V<<11&4294967295|V>>>21),V=B+(U^j^D)+L[15]+530742520&4294967295,B=U+(V<<16&4294967295|V>>>16),V=D+(B^U^j)+L[2]+3299628645&4294967295,D=B+(V<<23&4294967295|V>>>9),V=j+(B^(D|~U))+L[0]+4096336452&4294967295,j=D+(V<<6&4294967295|V>>>26),V=U+(D^(j|~B))+L[7]+1126891415&4294967295,U=j+(V<<10&4294967295|V>>>22),V=B+(j^(U|~D))+L[14]+2878612391&4294967295,B=U+(V<<15&4294967295|V>>>17),V=D+(U^(B|~j))+L[5]+4237533241&4294967295,D=B+(V<<21&4294967295|V>>>11),V=j+(B^(D|~U))+L[12]+1700485571&4294967295,j=D+(V<<6&4294967295|V>>>26),V=U+(D^(j|~B))+L[3]+2399980690&4294967295,U=j+(V<<10&4294967295|V>>>22),V=B+(j^(U|~D))+L[10]+4293915773&4294967295,B=U+(V<<15&4294967295|V>>>17),V=D+(U^(B|~j))+L[1]+2240044497&4294967295,D=B+(V<<21&4294967295|V>>>11),V=j+(B^(D|~U))+L[8]+1873313359&4294967295,j=D+(V<<6&4294967295|V>>>26),V=U+(D^(j|~B))+L[15]+4264355552&4294967295,U=j+(V<<10&4294967295|V>>>22),V=B+(j^(U|~D))+L[6]+2734768916&4294967295,B=U+(V<<15&4294967295|V>>>17),V=D+(U^(B|~j))+L[13]+1309151649&4294967295,D=B+(V<<21&4294967295|V>>>11),V=j+(B^(D|~U))+L[4]+4149444226&4294967295,j=D+(V<<6&4294967295|V>>>26),V=U+(D^(j|~B))+L[11]+3174756917&4294967295,U=j+(V<<10&4294967295|V>>>22),V=B+(j^(U|~D))+L[2]+718787259&4294967295,B=U+(V<<15&4294967295|V>>>17),V=D+(U^(B|~j))+L[9]+3951481745&4294967295,A.g[0]=A.g[0]+j&4294967295,A.g[1]=A.g[1]+(B+(V<<21&4294967295|V>>>11))&4294967295,A.g[2]=A.g[2]+B&4294967295,A.g[3]=A.g[3]+U&4294967295}r.prototype.v=function(A,j){j===void 0&&(j=A.length);const D=j-this.blockSize,L=this.C;let B=this.h,U=0;for(;U<j;){if(B==0)for(;U<=D;)s(this,A,U),U+=this.blockSize;if(typeof A=="string"){for(;U<j;)if(L[B++]=A.charCodeAt(U++),B==this.blockSize){s(this,L),B=0;break}}else for(;U<j;)if(L[B++]=A[U++],B==this.blockSize){s(this,L),B=0;break}}this.h=B,this.o+=j},r.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var j=1;j<A.length-8;++j)A[j]=0;j=this.o*8;for(var D=A.length-8;D<A.length;++D)A[D]=j&255,j/=256;for(this.v(A),A=Array(16),j=0,D=0;D<4;++D)for(let L=0;L<32;L+=8)A[j++]=this.g[D]>>>L&255;return A};function l(A,j){var D=h;return Object.prototype.hasOwnProperty.call(D,A)?D[A]:D[A]=j(A)}function c(A,j){this.h=j;const D=[];let L=!0;for(let B=A.length-1;B>=0;B--){const U=A[B]|0;L&&U==j||(D[B]=U,L=!1)}this.g=D}var h={};function d(A){return-128<=A&&A<128?l(A,function(j){return new c([j|0],j<0?-1:0)}):new c([A|0],A<0?-1:0)}function m(A){if(isNaN(A)||!isFinite(A))return y;if(A<0)return T(m(-A));const j=[];let D=1;for(let L=0;A>=D;L++)j[L]=A/D|0,D*=4294967296;return new c(j,0)}function g(A,j){if(A.length==0)throw Error("number format error: empty string");if(j=j||10,j<2||36<j)throw Error("radix out of range: "+j);if(A.charAt(0)=="-")return T(g(A.substring(1),j));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const D=m(Math.pow(j,8));let L=y;for(let U=0;U<A.length;U+=8){var B=Math.min(8,A.length-U);const V=parseInt(A.substring(U,U+B),j);B<8?(B=m(Math.pow(j,B)),L=L.j(B).add(m(V))):(L=L.j(D),L=L.add(m(V)))}return L}var y=d(0),x=d(1),E=d(16777216);n=c.prototype,n.m=function(){if(S(this))return-T(this).m();let A=0,j=1;for(let D=0;D<this.g.length;D++){const L=this.i(D);A+=(L>=0?L:4294967296+L)*j,j*=4294967296}return A},n.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(k(this))return"0";if(S(this))return"-"+T(this).toString(A);const j=m(Math.pow(A,6));var D=this;let L="";for(;;){const B=F(D,j).g;D=P(D,B.j(j));let U=((D.g.length>0?D.g[0]:D.h)>>>0).toString(A);if(D=B,k(D))return U+L;for(;U.length<6;)U="0"+U;L=U+L}},n.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function k(A){if(A.h!=0)return!1;for(let j=0;j<A.g.length;j++)if(A.g[j]!=0)return!1;return!0}function S(A){return A.h==-1}n.l=function(A){return A=P(this,A),S(A)?-1:k(A)?0:1};function T(A){const j=A.g.length,D=[];for(let L=0;L<j;L++)D[L]=~A.g[L];return new c(D,~A.h).add(x)}n.abs=function(){return S(this)?T(this):this},n.add=function(A){const j=Math.max(this.g.length,A.g.length),D=[];let L=0;for(let B=0;B<=j;B++){let U=L+(this.i(B)&65535)+(A.i(B)&65535),V=(U>>>16)+(this.i(B)>>>16)+(A.i(B)>>>16);L=V>>>16,U&=65535,V&=65535,D[B]=V<<16|U}return new c(D,D[D.length-1]&-2147483648?-1:0)};function P(A,j){return A.add(T(j))}n.j=function(A){if(k(this)||k(A))return y;if(S(this))return S(A)?T(this).j(T(A)):T(T(this).j(A));if(S(A))return T(this.j(T(A)));if(this.l(E)<0&&A.l(E)<0)return m(this.m()*A.m());const j=this.g.length+A.g.length,D=[];for(var L=0;L<2*j;L++)D[L]=0;for(L=0;L<this.g.length;L++)for(let B=0;B<A.g.length;B++){const U=this.i(L)>>>16,V=this.i(L)&65535,Ve=A.i(B)>>>16,We=A.i(B)&65535;D[2*L+2*B]+=V*We,M(D,2*L+2*B),D[2*L+2*B+1]+=U*We,M(D,2*L+2*B+1),D[2*L+2*B+1]+=V*Ve,M(D,2*L+2*B+1),D[2*L+2*B+2]+=U*Ve,M(D,2*L+2*B+2)}for(A=0;A<j;A++)D[A]=D[2*A+1]<<16|D[2*A];for(A=j;A<2*j;A++)D[A]=0;return new c(D,0)};function M(A,j){for(;(A[j]&65535)!=A[j];)A[j+1]+=A[j]>>>16,A[j]&=65535,j++}function N(A,j){this.g=A,this.h=j}function F(A,j){if(k(j))throw Error("division by zero");if(k(A))return new N(y,y);if(S(A))return j=F(T(A),j),new N(T(j.g),T(j.h));if(S(j))return j=F(A,T(j)),new N(T(j.g),j.h);if(A.g.length>30){if(S(A)||S(j))throw Error("slowDivide_ only works with positive integers.");for(var D=x,L=j;L.l(A)<=0;)D=$(D),L=$(L);var B=K(D,1),U=K(L,1);for(L=K(L,2),D=K(D,2);!k(L);){var V=U.add(L);V.l(A)<=0&&(B=B.add(D),U=V),L=K(L,1),D=K(D,1)}return j=P(A,B.j(j)),new N(B,j)}for(B=y;A.l(j)>=0;){for(D=Math.max(1,Math.floor(A.m()/j.m())),L=Math.ceil(Math.log(D)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),U=m(D),V=U.j(j);S(V)||V.l(A)>0;)D-=L,U=m(D),V=U.j(j);k(U)&&(U=x),B=B.add(U),A=P(A,V)}return new N(B,A)}n.B=function(A){return F(this,A).h},n.and=function(A){const j=Math.max(this.g.length,A.g.length),D=[];for(let L=0;L<j;L++)D[L]=this.i(L)&A.i(L);return new c(D,this.h&A.h)},n.or=function(A){const j=Math.max(this.g.length,A.g.length),D=[];for(let L=0;L<j;L++)D[L]=this.i(L)|A.i(L);return new c(D,this.h|A.h)},n.xor=function(A){const j=Math.max(this.g.length,A.g.length),D=[];for(let L=0;L<j;L++)D[L]=this.i(L)^A.i(L);return new c(D,this.h^A.h)};function $(A){const j=A.g.length+1,D=[];for(let L=0;L<j;L++)D[L]=A.i(L)<<1|A.i(L-1)>>>31;return new c(D,A.h)}function K(A,j){const D=j>>5;j%=32;const L=A.g.length-D,B=[];for(let U=0;U<L;U++)B[U]=j>0?A.i(U+D)>>>j|A.i(U+D+1)<<32-j:A.i(U+D);return new c(B,A.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,W_=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=g,Ks=c}).apply(typeof Zx<"u"?Zx:typeof self<"u"?self:typeof window<"u"?window:{});var th=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $_,Oc,H_,xh,pg,K_,q_,G_;(function(){var n,e=Object.defineProperty;function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof th=="object"&&th];for(var w=0;w<f.length;++w){var _=f[w];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=t(this);function s(f,w){if(w)e:{var _=r;f=f.split(".");for(var R=0;R<f.length-1;R++){var Q=f[R];if(!(Q in _))break e;_=_[Q]}f=f[f.length-1],R=_[f],w=w(R),w!=R&&w!=null&&e(_,f,{configurable:!0,writable:!0,value:w})}}s("Symbol.dispose",function(f){return f||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(f){return f||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(f){return f||function(w){var _=[],R;for(R in w)Object.prototype.hasOwnProperty.call(w,R)&&_.push([R,w[R]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function h(f){var w=typeof f;return w=="object"&&f!=null||w=="function"}function d(f,w,_){return f.call.apply(f.bind,arguments)}function m(f,w,_){return m=d,m.apply(null,arguments)}function g(f,w){var _=Array.prototype.slice.call(arguments,1);return function(){var R=_.slice();return R.push.apply(R,arguments),f.apply(this,R)}}function y(f,w){function _(){}_.prototype=w.prototype,f.Z=w.prototype,f.prototype=new _,f.prototype.constructor=f,f.Ob=function(R,Q,Z){for(var de=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)de[Be-2]=arguments[Be];return w.prototype[Q].apply(R,de)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?f=>f&&AsyncContext.Snapshot.wrap(f):f=>f;function E(f){const w=f.length;if(w>0){const _=Array(w);for(let R=0;R<w;R++)_[R]=f[R];return _}return[]}function k(f,w){for(let R=1;R<arguments.length;R++){const Q=arguments[R];var _=typeof Q;if(_=_!="object"?_:Q?Array.isArray(Q)?"array":_:"null",_=="array"||_=="object"&&typeof Q.length=="number"){_=f.length||0;const Z=Q.length||0;f.length=_+Z;for(let de=0;de<Z;de++)f[_+de]=Q[de]}else f.push(Q)}}class S{constructor(w,_){this.i=w,this.j=_,this.h=0,this.g=null}get(){let w;return this.h>0?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function T(f){c.setTimeout(()=>{throw f},0)}function P(){var f=A;let w=null;return f.g&&(w=f.g,f.g=f.g.next,f.g||(f.h=null),w.next=null),w}class M{constructor(){this.h=this.g=null}add(w,_){const R=N.get();R.set(w,_),this.h?this.h.next=R:this.g=R,this.h=R}}var N=new S(()=>new F,f=>f.reset());class F{constructor(){this.next=this.g=this.h=null}set(w,_){this.h=w,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let $,K=!1,A=new M,j=()=>{const f=Promise.resolve(void 0);$=()=>{f.then(D)}};function D(){for(var f;f=P();){try{f.h.call(f.g)}catch(_){T(_)}var w=N;w.j(f),w.h<100&&(w.h++,f.next=w.g,w.g=f)}K=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function B(f,w){this.type=f,this.g=this.target=w,this.defaultPrevented=!1}B.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var f=!1,w=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const _=()=>{};c.addEventListener("test",_,w),c.removeEventListener("test",_,w)}catch{}return f})();function V(f){return/^[\s\xa0]*$/.test(f)}function Ve(f,w){B.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f&&this.init(f,w)}y(Ve,B),Ve.prototype.init=function(f,w){const _=this.type=f.type,R=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;this.target=f.target||f.srcElement,this.g=w,w=f.relatedTarget,w||(_=="mouseover"?w=f.fromElement:_=="mouseout"&&(w=f.toElement)),this.relatedTarget=w,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=f.pointerType,this.state=f.state,this.i=f,f.defaultPrevented&&Ve.Z.h.call(this)},Ve.prototype.h=function(){Ve.Z.h.call(this);const f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var We="closure_listenable_"+(Math.random()*1e6|0),rt=0;function Te(f,w,_,R,Q){this.listener=f,this.proxy=null,this.src=w,this.type=_,this.capture=!!R,this.ha=Q,this.key=++rt,this.da=this.fa=!1}function se(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function me(f,w,_){for(const R in f)w.call(_,f[R],R,f)}function le(f,w){for(const _ in f)w.call(void 0,f[_],_,f)}function H(f){const w={};for(const _ in f)w[_]=f[_];return w}const te="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ce(f,w){let _,R;for(let Q=1;Q<arguments.length;Q++){R=arguments[Q];for(_ in R)f[_]=R[_];for(let Z=0;Z<te.length;Z++)_=te[Z],Object.prototype.hasOwnProperty.call(R,_)&&(f[_]=R[_])}}function je(f){this.src=f,this.g={},this.h=0}je.prototype.add=function(f,w,_,R,Q){const Z=f.toString();f=this.g[Z],f||(f=this.g[Z]=[],this.h++);const de=Me(f,w,R,Q);return de>-1?(w=f[de],_||(w.fa=!1)):(w=new Te(w,this.src,Z,!!R,Q),w.fa=_,f.push(w)),w};function Oe(f,w){const _=w.type;if(_ in f.g){var R=f.g[_],Q=Array.prototype.indexOf.call(R,w,void 0),Z;(Z=Q>=0)&&Array.prototype.splice.call(R,Q,1),Z&&(se(w),f.g[_].length==0&&(delete f.g[_],f.h--))}}function Me(f,w,_,R){for(let Q=0;Q<f.length;++Q){const Z=f[Q];if(!Z.da&&Z.listener==w&&Z.capture==!!_&&Z.ha==R)return Q}return-1}var re="closure_lm_"+(Math.random()*1e6|0),q={};function fe(f,w,_,R,Q){if(Array.isArray(w)){for(let Z=0;Z<w.length;Z++)fe(f,w[Z],_,R,Q);return null}return _=Yr(_),f&&f[We]?f.J(w,_,h(R)?!!R.capture:!1,Q):$e(f,w,_,!1,R,Q)}function $e(f,w,_,R,Q,Z){if(!w)throw Error("Invalid event type");const de=h(Q)?!!Q.capture:!!Q;let Be=Rn(f);if(Be||(f[re]=Be=new je(f)),_=Be.add(w,_,R,de,Z),_.proxy)return _;if(R=xt(),_.proxy=R,R.src=f,R.listener=_,f.addEventListener)U||(Q=de),Q===void 0&&(Q=!1),f.addEventListener(w.toString(),R,Q);else if(f.attachEvent)f.attachEvent(jn(w.toString()),R);else if(f.addListener&&f.removeListener)f.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return _}function xt(){function f(_){return w.call(f.src,f.listener,_)}const w=An;return f}function Ht(f,w,_,R,Q){if(Array.isArray(w))for(var Z=0;Z<w.length;Z++)Ht(f,w[Z],_,R,Q);else R=h(R)?!!R.capture:!!R,_=Yr(_),f&&f[We]?(f=f.i,Z=String(w).toString(),Z in f.g&&(w=f.g[Z],_=Me(w,_,R,Q),_>-1&&(se(w[_]),Array.prototype.splice.call(w,_,1),w.length==0&&(delete f.g[Z],f.h--)))):f&&(f=Rn(f))&&(w=f.g[w.toString()],f=-1,w&&(f=Me(w,_,R,Q)),(_=f>-1?w[f]:null)&&ht(_))}function ht(f){if(typeof f!="number"&&f&&!f.da){var w=f.src;if(w&&w[We])Oe(w.i,f);else{var _=f.type,R=f.proxy;w.removeEventListener?w.removeEventListener(_,R,f.capture):w.detachEvent?w.detachEvent(jn(_),R):w.addListener&&w.removeListener&&w.removeListener(R),(_=Rn(w))?(Oe(_,f),_.h==0&&(_.src=null,w[re]=null)):se(f)}}}function jn(f){return f in q?q[f]:q[f]="on"+f}function An(f,w){if(f.da)f=!0;else{w=new Ve(w,this);const _=f.listener,R=f.ha||f.src;f.fa&&ht(f),f=_.call(R,w)}return f}function Rn(f){return f=f[re],f instanceof je?f:null}var or="__closure_events_fn_"+(Math.random()*1e9>>>0);function Yr(f){return typeof f=="function"?f:(f[or]||(f[or]=function(w){return f.handleEvent(w)}),f[or])}function at(){L.call(this),this.i=new je(this),this.M=this,this.G=null}y(at,L),at.prototype[We]=!0,at.prototype.removeEventListener=function(f,w,_,R){Ht(this,f,w,_,R)};function lt(f,w){var _,R=f.G;if(R)for(_=[];R;R=R.G)_.push(R);if(f=f.M,R=w.type||w,typeof w=="string")w=new B(w,f);else if(w instanceof B)w.target=w.target||f;else{var Q=w;w=new B(R,f),Ce(w,Q)}Q=!0;let Z,de;if(_)for(de=_.length-1;de>=0;de--)Z=w.g=_[de],Q=Hn(Z,R,!0,w)&&Q;if(Z=w.g=f,Q=Hn(Z,R,!0,w)&&Q,Q=Hn(Z,R,!1,w)&&Q,_)for(de=0;de<_.length;de++)Z=w.g=_[de],Q=Hn(Z,R,!1,w)&&Q}at.prototype.N=function(){if(at.Z.N.call(this),this.i){var f=this.i;for(const w in f.g){const _=f.g[w];for(let R=0;R<_.length;R++)se(_[R]);delete f.g[w],f.h--}}this.G=null},at.prototype.J=function(f,w,_,R){return this.i.add(String(f),w,!1,_,R)},at.prototype.K=function(f,w,_,R){return this.i.add(String(f),w,!0,_,R)};function Hn(f,w,_,R){if(w=f.i.g[String(w)],!w)return!0;w=w.concat();let Q=!0;for(let Z=0;Z<w.length;++Z){const de=w[Z];if(de&&!de.da&&de.capture==_){const Be=de.listener,Pt=de.ha||de.src;de.fa&&Oe(f.i,de),Q=Be.call(Pt,R)!==!1&&Q}}return Q&&!R.defaultPrevented}function X(f,w){if(typeof f!="function")if(f&&typeof f.handleEvent=="function")f=m(f.handleEvent,f);else throw Error("Invalid listener argument");return Number(w)>2147483647?-1:c.setTimeout(f,w||0)}function ye(f){f.g=X(()=>{f.g=null,f.i&&(f.i=!1,ye(f))},f.l);const w=f.h;f.h=null,f.m.apply(null,w)}class Fe extends L{constructor(w,_){super(),this.m=w,this.l=_,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:ye(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ue(f){L.call(this),this.h=f,this.g={}}y(Ue,L);var It=[];function Pn(f){me(f.g,function(w,_){this.g.hasOwnProperty(_)&&ht(w)},f),f.g={}}Ue.prototype.N=function(){Ue.Z.N.call(this),Pn(this)},Ue.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Xr=c.JSON.stringify,Bu=c.JSON.parse,fo=class{stringify(f){return c.JSON.stringify(f,void 0)}parse(f){return c.JSON.parse(f,void 0)}};function cs(){}function zu(){}var us={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ca(){B.call(this,"d")}y(ca,B);function Fl(){B.call(this,"c")}y(Fl,B);var Tr={},ua=null;function ds(){return ua=ua||new at}Tr.Ia="serverreachability";function da(f){B.call(this,Tr.Ia,f)}y(da,B);function Si(f){const w=ds();lt(w,new da(w))}Tr.STAT_EVENT="statevent";function Ei(f,w){B.call(this,Tr.STAT_EVENT,f),this.stat=w}y(Ei,B);function Ct(f){const w=ds();lt(w,new Ei(w,f))}Tr.Ja="timingevent";function Ul(f,w){B.call(this,Tr.Ja,f),this.size=w}y(Ul,B);function hs(f,w){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){f()},w)}function fs(){this.g=!0}fs.prototype.ua=function(){this.g=!1};function Fu(f,w,_,R,Q,Z){f.info(function(){if(f.g)if(Z){var de="",Be=Z.split("&");for(let st=0;st<Be.length;st++){var Pt=Be[st].split("=");if(Pt.length>1){const Bt=Pt[0];Pt=Pt[1];const Xn=Bt.split("_");de=Xn.length>=2&&Xn[1]=="type"?de+(Bt+"="+Pt+"&"):de+(Bt+"=redacted&")}}}else de=null;else de=Z;return"XMLHTTP REQ ("+R+") [attempt "+Q+"]: "+w+`
`+_+`
`+de})}function Uu(f,w,_,R,Q,Z,de){f.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+Q+"]: "+w+`
`+_+`
`+Z+" "+de})}function Jr(f,w,_,R){f.info(function(){return"XMLHTTP TEXT ("+w+"): "+mo(f,_)+(R?" "+R:"")})}function Wu(f,w){f.info(function(){return"TIMEOUT: "+w})}fs.prototype.info=function(){};function mo(f,w){if(!f.g)return w;if(!w)return null;try{const Z=JSON.parse(w);if(Z){for(f=0;f<Z.length;f++)if(Array.isArray(Z[f])){var _=Z[f];if(!(_.length<2)){var R=_[1];if(Array.isArray(R)&&!(R.length<1)){var Q=R[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(let de=1;de<R.length;de++)R[de]=""}}}}return Xr(Z)}catch{return w}}var ms={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ps={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},$u;function Ti(){}y(Ti,cs),Ti.prototype.g=function(){return new XMLHttpRequest},$u=new Ti;function Zr(f){return encodeURIComponent(String(f))}function ha(f){var w=1;f=f.split(":");const _=[];for(;w>0&&f.length;)_.push(f.shift()),w--;return f.length&&_.push(f.join(":")),_}function ar(f,w,_,R){this.j=f,this.i=w,this.l=_,this.S=R||1,this.V=new Ue(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Hu}function Hu(){this.i=null,this.g="",this.h=!1}var Ku={},Wl={};function Ir(f,w,_){f.M=1,f.A=Ci(lr(w)),f.u=_,f.R=!0,$l(f,null)}function $l(f,w){f.F=Date.now(),po(f),f.B=lr(f.A);var _=f.B,R=f.S;Array.isArray(R)||(R=[String(R)]),ec(_.i,"t",R),f.C=0,_=f.j.L,f.h=new Hu,f.g=nd(f.j,_?w:null,!f.u),f.P>0&&(f.O=new Fe(m(f.Y,f,f.g),f.P)),w=f.V,_=f.g,R=f.ba;var Q="readystatechange";Array.isArray(Q)||(Q&&(It[0]=Q.toString()),Q=It);for(let Z=0;Z<Q.length;Z++){const de=fe(_,Q[Z],R||w.handleEvent,!1,w.h||w);if(!de)break;w.g[de.key]=de}w=f.J?H(f.J):{},f.u?(f.v||(f.v="POST"),w["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.B,f.v,f.u,w)):(f.v="GET",f.g.ea(f.B,f.v,null,w)),Si(),Fu(f.i,f.v,f.B,f.l,f.S,f.u)}ar.prototype.ba=function(f){f=f.target;const w=this.O;w&&oi(f)==3?w.j():this.Y(f)},ar.prototype.Y=function(f){try{if(f==this.g)e:{const Be=oi(this.g),Pt=this.g.ya(),st=this.g.ca();if(!(Be<3)&&(Be!=3||this.g&&(this.h.h||this.g.la()||ed(this.g)))){this.K||Be!=4||Pt==7||(Pt==8||st<=0?Si(3):Si(2)),fa(this);var w=this.g.ca();this.X=w;var _=qu(this);if(this.o=w==200,Uu(this.i,this.v,this.B,this.l,this.S,Be,w),this.o){if(this.U&&!this.L){t:{if(this.g){var R,Q=this.g;if((R=Q.g?Q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(R)){var Z=R;break t}}Z=null}if(f=Z)Jr(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ft(this,f);else{this.o=!1,this.m=3,Ct(12),Ii(this),go(this);break e}}if(this.R){f=!0;let Bt;for(;!this.K&&this.C<_.length;)if(Bt=Qu(this,_),Bt==Wl){Be==4&&(this.m=4,Ct(14),f=!1),Jr(this.i,this.l,null,"[Incomplete Response]");break}else if(Bt==Ku){this.m=4,Ct(15),Jr(this.i,this.l,_,"[Invalid Chunk]"),f=!1;break}else Jr(this.i,this.l,Bt,null),ft(this,Bt);if(Gu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Be!=4||_.length!=0||this.h.h||(this.m=1,Ct(16),f=!1),this.o=this.o&&f,!f)Jr(this.i,this.l,_,"[Invalid Chunked Response]"),Ii(this),go(this);else if(_.length>0&&!this.W){this.W=!0;var de=this.j;de.g==this&&de.aa&&!de.P&&(de.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),Eo(de),de.P=!0,Ct(11))}}else Jr(this.i,this.l,_,null),ft(this,_);Be==4&&Ii(this),this.o&&!this.K&&(Be==4?_a(this.j,this):(this.o=!1,po(this)))}else nc(this.g),w==400&&_.indexOf("Unknown SID")>0?(this.m=3,Ct(12)):(this.m=0,Ct(13)),Ii(this),go(this)}}}catch{}finally{}};function qu(f){if(!Gu(f))return f.g.la();const w=ed(f.g);if(w==="")return"";let _="";const R=w.length,Q=oi(f.g)==4;if(!f.h.i){if(typeof TextDecoder>"u")return Ii(f),go(f),"";f.h.i=new c.TextDecoder}for(let Z=0;Z<R;Z++)f.h.h=!0,_+=f.h.i.decode(w[Z],{stream:!(Q&&Z==R-1)});return w.length=0,f.h.g+=_,f.C=0,f.h.g}function Gu(f){return f.g?f.v=="GET"&&f.M!=2&&f.j.Aa:!1}function Qu(f,w){var _=f.C,R=w.indexOf(`
`,_);return R==-1?Wl:(_=Number(w.substring(_,R)),isNaN(_)?Ku:(R+=1,R+_>w.length?Wl:(w=w.slice(R,R+_),f.C=R+_,w)))}ar.prototype.cancel=function(){this.K=!0,Ii(this)};function po(f){f.T=Date.now()+f.H,Hl(f,f.H)}function Hl(f,w){if(f.D!=null)throw Error("WatchDog timer not null");f.D=hs(m(f.aa,f),w)}function fa(f){f.D&&(c.clearTimeout(f.D),f.D=null)}ar.prototype.aa=function(){this.D=null;const f=Date.now();f-this.T>=0?(Wu(this.i,this.B),this.M!=2&&(Si(),Ct(17)),Ii(this),this.m=2,go(this)):Hl(this,this.T-f)};function go(f){f.j.I==0||f.K||_a(f.j,f)}function Ii(f){fa(f);var w=f.O;w&&typeof w.dispose=="function"&&w.dispose(),f.O=null,Pn(f.V),f.g&&(w=f.g,f.g=null,w.abort(),w.dispose())}function ft(f,w){try{var _=f.j;if(_.I!=0&&(_.g==f||ql(_.h,f))){if(!f.L&&ql(_.h,f)&&_.I==3){try{var R=_.Ba.g.parse(w)}catch{R=null}if(Array.isArray(R)&&R.length==3){var Q=R;if(Q[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<f.F)ka(_),Qn(_);else break e;ci(_),Ct(18)}}else _.xa=Q[1],0<_.xa-_.K&&Q[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=hs(m(_.Va,_),6e3));yo(_.h)<=1&&_.ta&&(_.ta=void 0)}else Yn(_,11)}else if((f.L||_.g==f)&&ka(_),!V(w))for(Q=_.Ba.g.parse(w),w=0;w<Q.length;w++){let st=Q[w];const Bt=st[0];if(!(Bt<=_.K))if(_.K=Bt,st=st[1],_.I==2)if(st[0]=="c"){_.M=st[1],_.ba=st[2];const Xn=st[3];Xn!=null&&(_.ka=Xn,_.j.info("VER="+_.ka));const Ni=st[4];Ni!=null&&(_.za=Ni,_.j.info("SVER="+_.za));const ui=st[5];ui!=null&&typeof ui=="number"&&ui>0&&(R=1.5*ui,_.O=R,_.j.info("backChannelRequestTimeoutMs_="+R)),R=_;const di=f.g;if(di){const Ta=di.g?di.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ta){var Z=R.h;Z.g||Ta.indexOf("spdy")==-1&&Ta.indexOf("quic")==-1&&Ta.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(pa(Z,Z.h),Z.h=null))}if(R.G){const sc=di.g?di.g.getResponseHeader("X-HTTP-Session-Id"):null;sc&&(R.wa=sc,nt(R.J,R.G,sc))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-f.F,_.j.info("Handshake RTT: "+_.T+"ms")),R=_;var de=f;if(R.na=ic(R,R.L?R.ba:null,R.W),de.L){vo(R.h,de);var Be=de,Pt=R.O;Pt&&(Be.H=Pt),Be.D&&(fa(Be),po(Be)),R.g=de}else fn(R);_.i.length>0&&Pi(_)}else st[0]!="stop"&&st[0]!="close"||Yn(_,7);else _.I==3&&(st[0]=="stop"||st[0]=="close"?st[0]=="stop"?Yn(_,7):ba(_):st[0]!="noop"&&_.l&&_.l.qa(st),_.A=0)}}Si(4)}catch{}}var Hf=class{constructor(f,w){this.g=f,this.map=w}};function ma(f){this.l=f||10,c.PerformanceNavigationTiming?(f=c.performance.getEntriesByType("navigation"),f=f.length>0&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Kl(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function yo(f){return f.h?1:f.g?f.g.size:0}function ql(f,w){return f.h?f.h==w:f.g?f.g.has(w):!1}function pa(f,w){f.g?f.g.add(w):f.h=w}function vo(f,w){f.h&&f.h==w?f.h=null:f.g&&f.g.has(w)&&f.g.delete(w)}ma.prototype.cancel=function(){if(this.i=Kn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Kn(f){if(f.h!=null)return f.i.concat(f.h.G);if(f.g!=null&&f.g.size!==0){let w=f.i;for(const _ of f.g.values())w=w.concat(_.G);return w}return E(f.i)}var Yu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qn(f,w){if(f){f=f.split("&");for(let _=0;_<f.length;_++){const R=f[_].indexOf("=");let Q,Z=null;R>=0?(Q=f[_].substring(0,R),Z=f[_].substring(R+1)):Q=f[_],w(Q,Z?decodeURIComponent(Z.replace(/\+/g," ")):"")}}}function ei(f){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let w;f instanceof ei?(this.l=f.l,xo(this,f.j),this.o=f.o,this.g=f.g,ti(this,f.u),this.h=f.h,gs(this,tc(f.i)),this.m=f.m):f&&(w=String(f).match(Yu))?(this.l=!1,xo(this,w[1]||"",!0),this.o=bo(w[2]||""),this.g=bo(w[3]||"",!0),ti(this,w[4]),this.h=bo(w[5]||"",!0),gs(this,w[6]||"",!0),this.m=bo(w[7]||"")):(this.l=!1,this.i=new Ye(null,this.l))}ei.prototype.toString=function(){const f=[];var w=this.j;w&&f.push(wo(w,Ql,!0),":");var _=this.g;return(_||w=="file")&&(f.push("//"),(w=this.o)&&f.push(wo(w,Ql,!0),"@"),f.push(Zr(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&f.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&f.push("/"),f.push(wo(_,_.charAt(0)=="/"?ko:Yl,!0))),(_=this.i.toString())&&f.push("?",_),(_=this.m)&&f.push("#",wo(_,Xl)),f.join("")},ei.prototype.resolve=function(f){const w=lr(this);let _=!!f.j;_?xo(w,f.j):_=!!f.o,_?w.o=f.o:_=!!f.g,_?w.g=f.g:_=f.u!=null;var R=f.h;if(_)ti(w,f.u);else if(_=!!f.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var Q=w.h.lastIndexOf("/");Q!=-1&&(R=w.h.slice(0,Q+1)+R)}if(Q=R,Q==".."||Q==".")R="";else if(Q.indexOf("./")!=-1||Q.indexOf("/.")!=-1){R=Q.lastIndexOf("/",0)==0,Q=Q.split("/");const Z=[];for(let de=0;de<Q.length;){const Be=Q[de++];Be=="."?R&&de==Q.length&&Z.push(""):Be==".."?((Z.length>1||Z.length==1&&Z[0]!="")&&Z.pop(),R&&de==Q.length&&Z.push("")):(Z.push(Be),R=!0)}R=Z.join("/")}else R=Q}return _?w.h=R:_=f.i.toString()!=="",_?gs(w,tc(f.i)):_=!!f.m,_&&(w.m=f.m),w};function lr(f){return new ei(f)}function xo(f,w,_){f.j=_?bo(w,!0):w,f.j&&(f.j=f.j.replace(/:$/,""))}function ti(f,w){if(w){if(w=Number(w),isNaN(w)||w<0)throw Error("Bad port number "+w);f.u=w}else f.u=null}function gs(f,w,_){w instanceof Ye?(f.i=w,ya(f.i,f.l)):(_||(w=wo(w,Kf)),f.i=new Ye(w,f.l))}function nt(f,w,_){f.i.set(w,_)}function Ci(f){return nt(f,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),f}function bo(f,w){return f?w?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function wo(f,w,_){return typeof f=="string"?(f=encodeURI(f).replace(w,Gl),_&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Gl(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Ql=/[#\/\?@]/g,Yl=/[#\?:]/g,ko=/[#\?]/g,Kf=/[#\?@]/g,Xl=/#/g;function Ye(f,w){this.h=this.g=null,this.i=f||null,this.j=!!w}function ni(f){f.g||(f.g=new Map,f.h=0,f.i&&qn(f.i,function(w,_){f.add(decodeURIComponent(w.replace(/\+/g," ")),_)}))}n=Ye.prototype,n.add=function(f,w){ni(this),this.i=null,f=ri(this,f);let _=this.g.get(f);return _||this.g.set(f,_=[]),_.push(w),this.h+=1,this};function Jl(f,w){ni(f),w=ri(f,w),f.g.has(w)&&(f.i=null,f.h-=f.g.get(w).length,f.g.delete(w))}function ga(f,w){return ni(f),w=ri(f,w),f.g.has(w)}n.forEach=function(f,w){ni(this),this.g.forEach(function(_,R){_.forEach(function(Q){f.call(w,Q,R,this)},this)},this)};function Zl(f,w){ni(f);let _=[];if(typeof w=="string")ga(f,w)&&(_=_.concat(f.g.get(ri(f,w))));else for(f=Array.from(f.g.values()),w=0;w<f.length;w++)_=_.concat(f[w]);return _}n.set=function(f,w){return ni(this),this.i=null,f=ri(this,f),ga(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[w]),this.h+=1,this},n.get=function(f,w){return f?(f=Zl(this,f),f.length>0?String(f[0]):w):w};function ec(f,w,_){Jl(f,w),_.length>0&&(f.i=null,f.g.set(ri(f,w),E(_)),f.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],w=Array.from(this.g.keys());for(let R=0;R<w.length;R++){var _=w[R];const Q=Zr(_);_=Zl(this,_);for(let Z=0;Z<_.length;Z++){let de=Q;_[Z]!==""&&(de+="="+Zr(_[Z])),f.push(de)}}return this.i=f.join("&")};function tc(f){const w=new Ye;return w.i=f.i,f.g&&(w.g=new Map(f.g),w.h=f.h),w}function ri(f,w){return w=String(w),f.j&&(w=w.toLowerCase()),w}function ya(f,w){w&&!f.j&&(ni(f),f.i=null,f.g.forEach(function(_,R){const Q=R.toLowerCase();R!=Q&&(Jl(this,R),ec(this,Q,_))},f)),f.j=w}function ii(f,w){const _=new fs;if(c.Image){const R=new Image;R.onload=g(rn,_,"TestLoadImage: loaded",!0,w,R),R.onerror=g(rn,_,"TestLoadImage: error",!1,w,R),R.onabort=g(rn,_,"TestLoadImage: abort",!1,w,R),R.ontimeout=g(rn,_,"TestLoadImage: timeout",!1,w,R),c.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=f}else w(!1)}function si(f,w){const _=new fs,R=new AbortController,Q=setTimeout(()=>{R.abort(),rn(_,"TestPingServer: timeout",!1,w)},1e4);fetch(f,{signal:R.signal}).then(Z=>{clearTimeout(Q),Z.ok?rn(_,"TestPingServer: ok",!0,w):rn(_,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(Q),rn(_,"TestPingServer: error",!1,w)})}function rn(f,w,_,R,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),R(_)}catch{}}function _o(){this.g=new fo}function ji(f){this.i=f.Sb||null,this.h=f.ab||!1}y(ji,cs),ji.prototype.g=function(){return new Gn(this.i,this.h)};function Gn(f,w){at.call(this),this.H=f,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}y(Gn,at),n=Gn.prototype,n.open=function(f,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=f,this.D=w,this.readyState=1,Cr(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const w={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};f&&(w.body=f),(this.H||c).fetch(new Request(this.D,w)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ys(this)),this.readyState=0},n.Pa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Cr(this)),this.g&&(this.readyState=3,Cr(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Xu(this)}else f.text().then(this.Oa.bind(this),this.ga.bind(this))};function Xu(f){f.j.read().then(f.Ma.bind(f)).catch(f.ga.bind(f))}n.Ma=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var w=f.value?f.value:new Uint8Array(0);(w=this.B.decode(w,{stream:!f.done}))&&(this.response=this.responseText+=w)}f.done?ys(this):Cr(this),this.readyState==3&&Xu(this)}},n.Oa=function(f){this.g&&(this.response=this.responseText=f,ys(this))},n.Na=function(f){this.g&&(this.response=f,ys(this))},n.ga=function(){this.g&&ys(this)};function ys(f){f.readyState=4,f.l=null,f.j=null,f.B=null,Cr(f)}n.setRequestHeader=function(f,w){this.A.append(f,w)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],w=this.h.entries();for(var _=w.next();!_.done;)_=_.value,f.push(_[0]+": "+_[1]),_=w.next();return f.join(`\r
`)};function Cr(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Gn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Ju(f){let w="";return me(f,function(_,R){w+=R,w+=":",w+=_,w+=`\r
`}),w}function va(f,w,_){e:{for(R in _){var R=!1;break e}R=!0}R||(_=Ju(_),typeof f=="string"?_!=null&&Zr(_):nt(f,w,_))}function ct(f){at.call(this),this.headers=new Map,this.L=f||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}y(ct,at);var Zu=/^https?$/i,qf=["POST","PUT"];n=ct.prototype,n.Fa=function(f){this.H=f},n.ea=function(f,w,_,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);w=w?w.toUpperCase():"GET",this.D=f,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():$u.g(),this.g.onreadystatechange=x(m(this.Ca,this));try{this.B=!0,this.g.open(w,String(f),!0),this.B=!1}catch(Z){vs(this,Z);return}if(f=_||"",_=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var Q in R)_.set(Q,R[Q]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const Z of R.keys())_.set(Z,R.get(Z));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(_.keys()).find(Z=>Z.toLowerCase()=="content-type"),Q=c.FormData&&f instanceof c.FormData,!(Array.prototype.indexOf.call(qf,w,void 0)>=0)||R||Q||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,de]of _)this.g.setRequestHeader(Z,de);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(f),this.v=!1}catch(Z){vs(this,Z)}};function vs(f,w){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=w,f.o=5,xs(f),Ri(f)}function xs(f){f.A||(f.A=!0,lt(f,"complete"),lt(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=f||7,lt(this,"complete"),lt(this,"abort"),Ri(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ri(this,!0)),ct.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Ai(this):this.Xa())},n.Xa=function(){Ai(this)};function Ai(f){if(f.h&&typeof l<"u"){if(f.v&&oi(f)==4)setTimeout(f.Ca.bind(f),0);else if(lt(f,"readystatechange"),oi(f)==4){f.h=!1;try{const Z=f.ca();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var _;if(!(_=w)){var R;if(R=Z===0){let de=String(f.D).match(Yu)[1]||null;!de&&c.self&&c.self.location&&(de=c.self.location.protocol.slice(0,-1)),R=!Zu.test(de?de.toLowerCase():"")}_=R}if(_)lt(f,"complete"),lt(f,"success");else{f.o=6;try{var Q=oi(f)>2?f.g.statusText:""}catch{Q=""}f.l=Q+" ["+f.ca()+"]",xs(f)}}finally{Ri(f)}}}}function Ri(f,w){if(f.g){f.m&&(clearTimeout(f.m),f.m=null);const _=f.g;f.g=null,w||lt(f,"ready");try{_.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function oi(f){return f.g?f.g.readyState:0}n.ca=function(){try{return oi(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(f){if(this.g){var w=this.g.responseText;return f&&w.indexOf(f)==0&&(w=w.substring(f.length)),Bu(w)}};function ed(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.F){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function nc(f){const w={};f=(f.g&&oi(f)>=2&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<f.length;R++){if(V(f[R]))continue;var _=ha(f[R]);const Q=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const Z=w[Q]||[];w[Q]=Z,Z.push(_)}le(w,function(R){return R.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ai(f,w,_){return _&&_.internalChannelParams&&_.internalChannelParams[f]||w}function xa(f){this.za=0,this.i=[],this.j=new fs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ai("failFast",!1,f),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ai("baseRetryDelayMs",5e3,f),this.Za=ai("retryDelaySeedMs",1e4,f),this.Ta=ai("forwardChannelMaxRetries",2,f),this.va=ai("forwardChannelRequestTimeoutMs",2e4,f),this.ma=f&&f.xmlHttpFactory||void 0,this.Ua=f&&f.Rb||void 0,this.Aa=f&&f.useFetchStreams||!1,this.O=void 0,this.L=f&&f.supportsCrossDomainXhr||!1,this.M="",this.h=new ma(f&&f.concurrentRequestLimit),this.Ba=new _o,this.S=f&&f.fastHandshake||!1,this.R=f&&f.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=f&&f.Pb||!1,f&&f.ua&&this.j.ua(),f&&f.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&f&&f.detectBufferingProxy||!1,this.ia=void 0,f&&f.longPollingTimeout&&f.longPollingTimeout>0&&(this.ia=f.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=xa.prototype,n.ka=8,n.I=1,n.connect=function(f,w,_,R){Ct(0),this.W=f,this.H=w||{},_&&R!==void 0&&(this.H.OSID=_,this.H.OAID=R),this.F=this.X,this.J=ic(this,null,this.W),Pi(this)};function ba(f){if(wa(f),f.I==3){var w=f.V++,_=lr(f.J);if(nt(_,"SID",f.M),nt(_,"RID",w),nt(_,"TYPE","terminate"),li(f,_),w=new ar(f,f.j,w),w.M=2,w.A=Ci(lr(_)),_=!1,c.navigator&&c.navigator.sendBeacon)try{_=c.navigator.sendBeacon(w.A.toString(),"")}catch{}!_&&c.Image&&(new Image().src=w.A,_=!0),_||(w.g=nd(w.j,null),w.g.ea(w.A)),w.F=Date.now(),po(w)}To(f)}function Qn(f){f.g&&(Eo(f),f.g.cancel(),f.g=null)}function wa(f){Qn(f),f.v&&(c.clearTimeout(f.v),f.v=null),ka(f),f.h.cancel(),f.m&&(typeof f.m=="number"&&c.clearTimeout(f.m),f.m=null)}function Pi(f){if(!Kl(f.h)&&!f.m){f.m=!0;var w=f.Ea;$||j(),K||($(),K=!0),A.add(w,f),f.D=0}}function td(f,w){return yo(f.h)>=f.h.j-(f.m?1:0)?!1:f.m?(f.i=w.G.concat(f.i),!0):f.I==1||f.I==2||f.D>=(f.Sa?0:f.Ta)?!1:(f.m=hs(m(f.Ea,f,w),Sa(f,f.D)),f.D++,!0)}n.Ea=function(f){if(this.m)if(this.m=null,this.I==1){if(!f){this.V=Math.floor(Math.random()*1e5),f=this.V++;const Q=new ar(this,this.j,f);let Z=this.o;if(this.U&&(Z?(Z=H(Z),Ce(Z,this.U)):Z=this.U),this.u!==null||this.R||(Q.J=Z,Z=null),this.S)e:{for(var w=0,_=0;_<this.i.length;_++){t:{var R=this.i[_];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(w+=R,w>4096){w=_;break e}if(w===4096||_===this.i.length-1){w=_+1;break e}}w=1e3}else w=1e3;w=rc(this,Q,w),_=lr(this.J),nt(_,"RID",f),nt(_,"CVER",22),this.G&&nt(_,"X-HTTP-Session-Id",this.G),li(this,_),Z&&(this.R?w="headers="+Zr(Ju(Z))+"&"+w:this.u&&va(_,this.u,Z)),pa(this.h,Q),this.Ra&&nt(_,"TYPE","init"),this.S?(nt(_,"$req",w),nt(_,"SID","null"),Q.U=!0,Ir(Q,_,null)):Ir(Q,_,w),this.I=2}}else this.I==3&&(f?So(this,f):this.i.length==0||Kl(this.h)||So(this))};function So(f,w){var _;w?_=w.l:_=f.V++;const R=lr(f.J);nt(R,"SID",f.M),nt(R,"RID",_),nt(R,"AID",f.K),li(f,R),f.u&&f.o&&va(R,f.u,f.o),_=new ar(f,f.j,_,f.D+1),f.u===null&&(_.J=f.o),w&&(f.i=w.G.concat(f.i)),w=rc(f,_,1e3),_.H=Math.round(f.va*.5)+Math.round(f.va*.5*Math.random()),pa(f.h,_),Ir(_,R,w)}function li(f,w){f.H&&me(f.H,function(_,R){nt(w,R,_)}),f.l&&me({},function(_,R){nt(w,R,_)})}function rc(f,w,_){_=Math.min(f.i.length,_);const R=f.l?m(f.l.Ka,f.l,f):null;e:{var Q=f.i;let Be=-1;for(;;){const Pt=["count="+_];Be==-1?_>0?(Be=Q[0].g,Pt.push("ofs="+Be)):Be=0:Pt.push("ofs="+Be);let st=!0;for(let Bt=0;Bt<_;Bt++){var Z=Q[Bt].g;const Xn=Q[Bt].map;if(Z-=Be,Z<0)Be=Math.max(0,Q[Bt].g-100),st=!1;else try{Z="req"+Z+"_"||"";try{var de=Xn instanceof Map?Xn:Object.entries(Xn);for(const[Ni,ui]of de){let di=ui;h(ui)&&(di=Xr(ui)),Pt.push(Z+Ni+"="+encodeURIComponent(di))}}catch(Ni){throw Pt.push(Z+"type="+encodeURIComponent("_badmap")),Ni}}catch{R&&R(Xn)}}if(st){de=Pt.join("&");break e}}de=void 0}return f=f.i.splice(0,_),w.G=f,de}function fn(f){if(!f.g&&!f.v){f.Y=1;var w=f.Da;$||j(),K||($(),K=!0),A.add(w,f),f.A=0}}function ci(f){return f.g||f.v||f.A>=3?!1:(f.Y++,f.v=hs(m(f.Da,f),Sa(f,f.A)),f.A++,!0)}n.Da=function(){if(this.v=null,bs(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var f=4*this.T;this.j.info("BP detection timer enabled: "+f),this.B=hs(m(this.Wa,this),f)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ct(10),Qn(this),bs(this))};function Eo(f){f.B!=null&&(c.clearTimeout(f.B),f.B=null)}function bs(f){f.g=new ar(f,f.j,"rpc",f.Y),f.u===null&&(f.g.J=f.o),f.g.P=0;var w=lr(f.na);nt(w,"RID","rpc"),nt(w,"SID",f.M),nt(w,"AID",f.K),nt(w,"CI",f.F?"0":"1"),!f.F&&f.ia&&nt(w,"TO",f.ia),nt(w,"TYPE","xmlhttp"),li(f,w),f.u&&f.o&&va(w,f.u,f.o),f.O&&(f.g.H=f.O);var _=f.g;f=f.ba,_.M=1,_.A=Ci(lr(w)),_.u=null,_.R=!0,$l(_,f)}n.Va=function(){this.C!=null&&(this.C=null,Qn(this),ci(this),Ct(19))};function ka(f){f.C!=null&&(c.clearTimeout(f.C),f.C=null)}function _a(f,w){var _=null;if(f.g==w){ka(f),Eo(f),f.g=null;var R=2}else if(ql(f.h,w))_=w.G,vo(f.h,w),R=1;else return;if(f.I!=0){if(w.o)if(R==1){_=w.u?w.u.length:0,w=Date.now()-w.F;var Q=f.D;R=ds(),lt(R,new Ul(R,_)),Pi(f)}else fn(f);else if(Q=w.m,Q==3||Q==0&&w.X>0||!(R==1&&td(f,w)||R==2&&ci(f)))switch(_&&_.length>0&&(w=f.h,w.i=w.i.concat(_)),Q){case 1:Yn(f,5);break;case 4:Yn(f,10);break;case 3:Yn(f,6);break;default:Yn(f,2)}}}function Sa(f,w){let _=f.Qa+Math.floor(Math.random()*f.Za);return f.isActive()||(_*=2),_*w}function Yn(f,w){if(f.j.info("Error code "+w),w==2){var _=m(f.bb,f),R=f.Ua;const Q=!R;R=new ei(R||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||xo(R,"https"),Ci(R),Q?ii(R.toString(),_):si(R.toString(),_)}else Ct(2);f.I=0,f.l&&f.l.pa(w),To(f),wa(f)}n.bb=function(f){f?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))};function To(f){if(f.I=0,f.ja=[],f.l){const w=Kn(f.h);(w.length!=0||f.i.length!=0)&&(k(f.ja,w),k(f.ja,f.i),f.h.i.length=0,E(f.i),f.i.length=0),f.l.oa()}}function ic(f,w,_){var R=_ instanceof ei?lr(_):new ei(_);if(R.g!="")w&&(R.g=w+"."+R.g),ti(R,R.u);else{var Q=c.location;R=Q.protocol,w=w?w+"."+Q.hostname:Q.hostname,Q=+Q.port;const Z=new ei(null);R&&xo(Z,R),w&&(Z.g=w),Q&&ti(Z,Q),_&&(Z.h=_),R=Z}return _=f.G,w=f.wa,_&&w&&nt(R,_,w),nt(R,"VER",f.ka),li(f,R),R}function nd(f,w,_){if(w&&!f.L)throw Error("Can't create secondary domain capable XhrIo object.");return w=f.Aa&&!f.ma?new ct(new ji({ab:_})):new ct(f.ma),w.Fa(f.L),w}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function rd(){}n=rd.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ea(){}Ea.prototype.g=function(f,w){return new sn(f,w)};function sn(f,w){at.call(this),this.g=new xa(w),this.l=f,this.h=w&&w.messageUrlParams||null,f=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(f?f["X-WebChannel-Content-Type"]=w.messageContentType:f={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.sa&&(f?f["X-WebChannel-Client-Profile"]=w.sa:f={"X-WebChannel-Client-Profile":w.sa}),this.g.U=f,(f=w&&w.Qb)&&!V(f)&&(this.g.u=f),this.A=w&&w.supportsCrossDomainXhr||!1,this.v=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!V(w)&&(this.g.G=w,f=this.h,f!==null&&w in f&&(f=this.h,w in f&&delete f[w])),this.j=new ws(this)}y(sn,at),sn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},sn.prototype.close=function(){ba(this.g)},sn.prototype.o=function(f){var w=this.g;if(typeof f=="string"){var _={};_.__data__=f,f=_}else this.v&&(_={},_.__data__=Xr(f),f=_);w.i.push(new Hf(w.Ya++,f)),w.I==3&&Pi(w)},sn.prototype.N=function(){this.g.l=null,delete this.j,ba(this.g),delete this.g,sn.Z.N.call(this)};function id(f){ca.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var w=f.__sm__;if(w){e:{for(const _ in w){f=_;break e}f=void 0}(this.i=f)&&(f=this.i,w=w!==null&&f in w?w[f]:void 0),this.data=w}else this.data=f}y(id,ca);function sd(){Fl.call(this),this.status=1}y(sd,Fl);function ws(f){this.g=f}y(ws,rd),ws.prototype.ra=function(){lt(this.g,"a")},ws.prototype.qa=function(f){lt(this.g,new id(f))},ws.prototype.pa=function(f){lt(this.g,new sd)},ws.prototype.oa=function(){lt(this.g,"b")},Ea.prototype.createWebChannel=Ea.prototype.g,sn.prototype.send=sn.prototype.o,sn.prototype.open=sn.prototype.m,sn.prototype.close=sn.prototype.close,G_=function(){return new Ea},q_=function(){return ds()},K_=Tr,pg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ms.NO_ERROR=0,ms.TIMEOUT=8,ms.HTTP_ERROR=6,xh=ms,ps.COMPLETE="complete",H_=ps,zu.EventType=us,us.OPEN="a",us.CLOSE="b",us.ERROR="c",us.MESSAGE="d",at.prototype.listen=at.prototype.J,Oc=zu,ct.prototype.listenOnce=ct.prototype.K,ct.prototype.getLastError=ct.prototype.Ha,ct.prototype.getLastErrorCode=ct.prototype.ya,ct.prototype.getStatus=ct.prototype.ca,ct.prototype.getResponseJson=ct.prototype.La,ct.prototype.getResponseText=ct.prototype.la,ct.prototype.send=ct.prototype.ea,ct.prototype.setWithCredentials=ct.prototype.Fa,$_=ct}).apply(typeof th<"u"?th:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};xn.UNAUTHENTICATED=new xn(null),xn.GOOGLE_CREDENTIALS=new xn("google-credentials-uid"),xn.FIRST_PARTY=new xn("first-party-uid"),xn.MOCK_USER=new xn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pl="12.8.0";function BP(n){Pl=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jo=new yy("@firebase/firestore");function Ga(){return Jo.logLevel}function xe(n,...e){if(Jo.logLevel<=qe.DEBUG){const t=e.map(Ay);Jo.debug(`Firestore (${Pl}): ${n}`,...t)}}function ns(n,...e){if(Jo.logLevel<=qe.ERROR){const t=e.map(Ay);Jo.error(`Firestore (${Pl}): ${n}`,...t)}}function fl(n,...e){if(Jo.logLevel<=qe.WARN){const t=e.map(Ay);Jo.warn(`Firestore (${Pl}): ${n}`,...t)}}function Ay(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,Q_(n,r,t)}function Q_(n,e,t){let r=`FIRESTORE (${Pl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw ns(r),new Error(r)}function it(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||Q_(e,s,r)}function ze(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends os{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class zP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(xn.UNAUTHENTICATED)))}shutdown(){}}class FP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class UP{constructor(e){this.t=e,this.currentUser=xn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){it(this.o===void 0,42304);let r=this.i;const s=d=>this.i!==r?(r=this.i,t(d)):Promise.resolve();let l=new Qi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Qi,e.enqueueRetryable((()=>s(this.currentUser)))};const c=()=>{const d=l;e.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},h=d=>{xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((d=>h(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?h(d):(xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Qi)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(it(typeof r.accessToken=="string",31837,{l:r}),new Y_(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return it(e===null||typeof e=="string",2055,{h:e}),new xn(e)}}class WP{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=xn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class $P{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new WP(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(xn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class eb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class HP{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,tr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){it(this.o===void 0,3512);const r=l=>{l.error!=null&&xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,xe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const s=l=>{xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>s(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?s(l):xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new eb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(it(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new eb(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KP(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=KP(40);for(let l=0;l<s.length;++l)r.length<20&&s[l]<t&&(r+=e.charAt(s[l]%62))}return r}}function Ge(n,e){return n<e?-1:n>e?1:0}function gg(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const s=n.charAt(r),l=e.charAt(r);if(s!==l)return jp(s)===jp(l)?Ge(s,l):jp(s)?1:-1}return Ge(n.length,e.length)}const qP=55296,GP=57343;function jp(n){const e=n.charCodeAt(0);return e>=qP&&e<=GP}function ml(n,e,t){return n.length===e.length&&n.every(((r,s)=>t(r,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tb="__name__";class gi{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ne(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ne(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return gi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof gi?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const l=gi.compareSegments(e.get(s),t.get(s));if(l!==0)return l}return Ge(e.length,t.length)}static compareSegments(e,t){const r=gi.isNumericId(e),s=gi.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?gi.extractNumericId(e).compare(gi.extractNumericId(t)):gg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ks.fromString(e.substring(4,e.length-2))}}class dt extends gi{construct(e,t,r){return new dt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ge(ee.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((s=>s.length>0)))}return new dt(t)}static emptyPath(){return new dt([])}}const QP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class un extends gi{construct(e,t,r){return new un(e,t,r)}static isValidIdentifier(e){return QP.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),un.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===tb}static keyField(){return new un([tb])}static fromServerFormat(e){const t=[];let r="",s=0;const l=()=>{if(r.length===0)throw new ge(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new ge(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ge(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,s+=2}else h==="`"?(c=!c,s++):h!=="."||c?(r+=h,s++):(l(),s++)}if(l(),c)throw new ge(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new un(t)}static emptyPath(){return new un([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.path=e}static fromPath(e){return new Ie(dt.fromString(e))}static fromName(e){return new Ie(dt.fromString(e).popFirst(5))}static empty(){return new Ie(dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return dt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ie(new dt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X_(n,e,t){if(!t)throw new ge(ee.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function YP(n,e,t,r){if(e===!0&&r===!0)throw new ge(ee.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function nb(n){if(!Ie.isDocumentKey(n))throw new ge(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function rb(n){if(Ie.isDocumentKey(n))throw new ge(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function J_(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function pf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ne(12329,{type:typeof n})}function kr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ge(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=pf(n);throw new ge(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(n,e){const t={typeString:n};return e&&(t.value=e),t}function Su(n,e){if(!J_(n))throw new ge(ee.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const c=n[r];if(s&&typeof c!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${r}' field to equal '${l.value}'`;break}}if(t)throw new ge(ee.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ib=-62135596800,sb=1e6;class yt{static now(){return yt.fromMillis(Date.now())}static fromDate(e){return yt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*sb);return new yt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ge(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ge(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ib)throw new ge(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/sb}_compareTo(e){return this.seconds===e.seconds?Ge(this.nanoseconds,e.nanoseconds):Ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:yt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Su(e,yt._jsonSchema))return new yt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ib;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}yt._jsonSchemaVersion="firestore/timestamp/1.0",yt._jsonSchema={type:$t("string",yt._jsonSchemaVersion),seconds:$t("number"),nanoseconds:$t("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{static fromTimestamp(e){return new Le(e)}static min(){return new Le(new yt(0,0))}static max(){return new Le(new yt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iu=-1;function XP(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Le.fromTimestamp(r===1e9?new yt(t+1,0):new yt(t,r));return new Qs(s,Ie.empty(),e)}function JP(n){return new Qs(n.readTime,n.key,iu)}class Qs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Qs(Le.min(),Ie.empty(),iu)}static max(){return new Qs(Le.max(),Ie.empty(),iu)}}function ZP(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ie.comparator(n.documentKey,e.documentKey),t!==0?t:Ge(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nl(n){if(n.code!==ee.FAILED_PRECONDITION||n.message!==eN)throw n;xe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ne(((r,s)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,s)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ne?t:ne.resolve(t)}catch(t){return ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ne.reject(t)}static resolve(e){return new ne(((t,r)=>{t(e)}))}static reject(e){return new ne(((t,r)=>{r(e)}))}static waitFor(e){return new ne(((t,r)=>{let s=0,l=0,c=!1;e.forEach((h=>{++s,h.next((()=>{++l,c&&l===s&&t()}),(d=>r(d)))})),c=!0,l===s&&t()}))}static or(e){let t=ne.resolve(!1);for(const r of e)t=t.next((s=>s?ne.resolve(s):r()));return t}static forEach(e,t){const r=[];return e.forEach(((s,l)=>{r.push(t.call(this,s,l))})),this.waitFor(r)}static mapArray(e,t){return new ne(((r,s)=>{const l=e.length,c=new Array(l);let h=0;for(let d=0;d<l;d++){const m=d;t(e[m]).next((g=>{c[m]=g,++h,h===l&&r(c)}),(g=>s(g)))}}))}static doWhile(e,t){return new ne(((r,s)=>{const l=()=>{e()===!0?t().next((()=>{l()}),s):r()};l()}))}}function nN(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Dl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}gf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py=-1;function yf(n){return n==null}function Oh(n){return n===0&&1/n==-1/0}function rN(n){return typeof n=="number"&&Number.isInteger(n)&&!Oh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_="";function iN(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=ob(e)),e=sN(n.get(t),e);return ob(e)}function sN(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const l=n.charAt(s);switch(l){case"\0":t+="";break;case Z_:t+="";break;default:t+=l}}return t}function ob(n){return n+Z_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ab(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ao(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function eS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e,t){this.comparator=e,this.root=t||cn.EMPTY}insert(e,t){return new Tt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,cn.BLACK,null,null))}remove(e){return new Tt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,cn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nh(this.root,e,this.comparator,!1)}getReverseIterator(){return new nh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nh(this.root,e,this.comparator,!0)}}class nh{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&s&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class cn{constructor(e,t,r,s,l){this.key=e,this.value=t,this.color=r??cn.RED,this.left=s??cn.EMPTY,this.right=l??cn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,l){return new cn(e??this.key,t??this.value,r??this.color,s??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const l=r(e,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(e,t,r),null):l===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return cn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return cn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,cn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,cn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ne(27949);return e+(this.isRed()?0:1)}}cn.EMPTY=null,cn.RED=!0,cn.BLACK=!1;cn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ne(57766)}get value(){throw Ne(16141)}get color(){throw Ne(16727)}get left(){throw Ne(29726)}get right(){throw Ne(36894)}copy(e,t,r,s,l){return this}insert(e,t,r){return new cn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.comparator=e,this.data=new Tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new lb(this.data.getIterator())}getIteratorFrom(e){return new lb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Yt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=r.getNext().key;if(this.comparator(s,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Yt(this.comparator);return t.data=e,t}}class lb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e){this.fields=e,e.sort(un.comparator)}static empty(){return new nr([])}unionWith(e){let t=new Yt(un.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new nr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ml(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new tS("Invalid base64 string: "+l):l}})(e);return new dn(t)}static fromUint8Array(e){const t=(function(s){let l="";for(let c=0;c<s.length;++c)l+=String.fromCharCode(s[c]);return l})(e);return new dn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dn.EMPTY_BYTE_STRING=new dn("");const oN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ys(n){if(it(!!n,39018),typeof n=="string"){let e=0;const t=oN.exec(n);if(it(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Dt(n.seconds),nanos:Dt(n.nanos)}}function Dt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Xs(n){return typeof n=="string"?dn.fromBase64String(n):dn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS="server_timestamp",rS="__type__",iS="__previous_value__",sS="__local_write_time__";function Ny(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[rS])==null?void 0:r.stringValue)===nS}function vf(n){const e=n.mapValue.fields[iS];return Ny(e)?vf(e):e}function su(n){const e=Ys(n.mapValue.fields[sS].timestampValue);return new yt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(e,t,r,s,l,c,h,d,m,g,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=m,this.isUsingEmulator=g,this.apiKey=y}}const Bh="(default)";class ou{constructor(e,t){this.projectId=e,this.database=t||Bh}static empty(){return new ou("","")}get isDefaultDatabase(){return this.database===Bh}isEqual(e){return e instanceof ou&&e.projectId===this.projectId&&e.database===this.database}}function lN(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new ge(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ou(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS="__type__",cN="__max__",rh={mapValue:{}},aS="__vector__",zh="value";function Js(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ny(n)?4:dN(n)?9007199254740991:uN(n)?10:11:Ne(28295,{value:n})}function ki(n,e){if(n===e)return!0;const t=Js(n);if(t!==Js(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return su(n).isEqual(su(e));case 3:return(function(s,l){if(typeof s.timestampValue=="string"&&typeof l.timestampValue=="string"&&s.timestampValue.length===l.timestampValue.length)return s.timestampValue===l.timestampValue;const c=Ys(s.timestampValue),h=Ys(l.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,l){return Xs(s.bytesValue).isEqual(Xs(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,l){return Dt(s.geoPointValue.latitude)===Dt(l.geoPointValue.latitude)&&Dt(s.geoPointValue.longitude)===Dt(l.geoPointValue.longitude)})(n,e);case 2:return(function(s,l){if("integerValue"in s&&"integerValue"in l)return Dt(s.integerValue)===Dt(l.integerValue);if("doubleValue"in s&&"doubleValue"in l){const c=Dt(s.doubleValue),h=Dt(l.doubleValue);return c===h?Oh(c)===Oh(h):isNaN(c)&&isNaN(h)}return!1})(n,e);case 9:return ml(n.arrayValue.values||[],e.arrayValue.values||[],ki);case 10:case 11:return(function(s,l){const c=s.mapValue.fields||{},h=l.mapValue.fields||{};if(ab(c)!==ab(h))return!1;for(const d in c)if(c.hasOwnProperty(d)&&(h[d]===void 0||!ki(c[d],h[d])))return!1;return!0})(n,e);default:return Ne(52216,{left:n})}}function au(n,e){return(n.values||[]).find((t=>ki(t,e)))!==void 0}function pl(n,e){if(n===e)return 0;const t=Js(n),r=Js(e);if(t!==r)return Ge(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ge(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const h=Dt(l.integerValue||l.doubleValue),d=Dt(c.integerValue||c.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1})(n,e);case 3:return cb(n.timestampValue,e.timestampValue);case 4:return cb(su(n),su(e));case 5:return gg(n.stringValue,e.stringValue);case 6:return(function(l,c){const h=Xs(l),d=Xs(c);return h.compareTo(d)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const h=l.split("/"),d=c.split("/");for(let m=0;m<h.length&&m<d.length;m++){const g=Ge(h[m],d[m]);if(g!==0)return g}return Ge(h.length,d.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const h=Ge(Dt(l.latitude),Dt(c.latitude));return h!==0?h:Ge(Dt(l.longitude),Dt(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return ub(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var x,E,k,S;const h=l.fields||{},d=c.fields||{},m=(x=h[zh])==null?void 0:x.arrayValue,g=(E=d[zh])==null?void 0:E.arrayValue,y=Ge(((k=m==null?void 0:m.values)==null?void 0:k.length)||0,((S=g==null?void 0:g.values)==null?void 0:S.length)||0);return y!==0?y:ub(m,g)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===rh.mapValue&&c===rh.mapValue)return 0;if(l===rh.mapValue)return 1;if(c===rh.mapValue)return-1;const h=l.fields||{},d=Object.keys(h),m=c.fields||{},g=Object.keys(m);d.sort(),g.sort();for(let y=0;y<d.length&&y<g.length;++y){const x=gg(d[y],g[y]);if(x!==0)return x;const E=pl(h[d[y]],m[g[y]]);if(E!==0)return E}return Ge(d.length,g.length)})(n.mapValue,e.mapValue);default:throw Ne(23264,{he:t})}}function cb(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ge(n,e);const t=Ys(n),r=Ys(e),s=Ge(t.seconds,r.seconds);return s!==0?s:Ge(t.nanos,r.nanos)}function ub(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const l=pl(t[s],r[s]);if(l)return l}return Ge(t.length,r.length)}function gl(n){return yg(n)}function yg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Ys(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Xs(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ie.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",s=!0;for(const l of t.values||[])s?s=!1:r+=",",r+=yg(l);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let s="{",l=!0;for(const c of r)l?l=!1:s+=",",s+=`${c}:${yg(t.fields[c])}`;return s+"}"})(n.mapValue):Ne(61005,{value:n})}function bh(n){switch(Js(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=vf(n);return e?16+bh(e):16;case 5:return 2*n.stringValue.length;case 6:return Xs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,l)=>s+bh(l)),0)})(n.arrayValue);case 10:case 11:return(function(r){let s=0;return ao(r.fields,((l,c)=>{s+=l.length+bh(c)})),s})(n.mapValue);default:throw Ne(13486,{value:n})}}function db(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function vg(n){return!!n&&"integerValue"in n}function Dy(n){return!!n&&"arrayValue"in n}function hb(n){return!!n&&"nullValue"in n}function fb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function wh(n){return!!n&&"mapValue"in n}function uN(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[oS])==null?void 0:r.stringValue)===aS}function Kc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return ao(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Kc(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Kc(n.arrayValue.values[t]);return e}return{...n}}function dN(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===cN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.value=e}static empty(){return new zn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!wh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Kc(t)}setAll(e){let t=un.emptyPath(),r={},s=[];e.forEach(((c,h)=>{if(!t.isImmediateParentOf(h)){const d=this.getFieldsMap(t);this.applyChanges(d,r,s),r={},s=[],t=h.popLast()}c?r[h.lastSegment()]=Kc(c):s.push(h.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,r,s)}delete(e){const t=this.field(e.popLast());wh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ki(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];wh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){ao(t,((s,l)=>e[s]=l));for(const s of r)delete e[s]}clone(){return new zn(Kc(this.value))}}function lS(n){const e=[];return ao(n.fields,((t,r)=>{const s=new un([t]);if(wh(r)){const l=lS(r.mapValue).fields;if(l.length===0)e.push(s);else for(const c of l)e.push(s.child(c))}else e.push(s)})),new nr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e,t,r,s,l,c,h){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=l,this.data=c,this.documentState=h}static newInvalidDocument(e){return new bn(e,0,Le.min(),Le.min(),Le.min(),zn.empty(),0)}static newFoundDocument(e,t,r,s){return new bn(e,1,t,Le.min(),r,s,0)}static newNoDocument(e,t){return new bn(e,2,t,Le.min(),Le.min(),zn.empty(),0)}static newUnknownDocument(e,t){return new bn(e,3,t,Le.min(),Le.min(),zn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof bn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e,t){this.position=e,this.inclusive=t}}function mb(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const l=e[s],c=n.position[s];if(l.field.isKeyField()?r=Ie.comparator(Ie.fromName(c.referenceValue),t.key):r=pl(c,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function pb(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ki(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,t="asc"){this.field=e,this.dir=t}}function hN(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{}class Wt extends cS{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new mN(e,t,r):t==="array-contains"?new yN(e,r):t==="in"?new vN(e,r):t==="not-in"?new xN(e,r):t==="array-contains-any"?new bN(e,r):new Wt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new pN(e,r):new gN(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(pl(t,this.value)):t!==null&&Js(this.value)===Js(t)&&this.matchesComparison(pl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Wr extends cS{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Wr(e,t)}matches(e){return uS(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function uS(n){return n.op==="and"}function dS(n){return fN(n)&&uS(n)}function fN(n){for(const e of n.filters)if(e instanceof Wr)return!1;return!0}function xg(n){if(n instanceof Wt)return n.field.canonicalString()+n.op.toString()+gl(n.value);if(dS(n))return n.filters.map((e=>xg(e))).join(",");{const e=n.filters.map((t=>xg(t))).join(",");return`${n.op}(${e})`}}function hS(n,e){return n instanceof Wt?(function(r,s){return s instanceof Wt&&r.op===s.op&&r.field.isEqual(s.field)&&ki(r.value,s.value)})(n,e):n instanceof Wr?(function(r,s){return s instanceof Wr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((l,c,h)=>l&&hS(c,s.filters[h])),!0):!1})(n,e):void Ne(19439)}function fS(n){return n instanceof Wt?(function(t){return`${t.field.canonicalString()} ${t.op} ${gl(t.value)}`})(n):n instanceof Wr?(function(t){return t.op.toString()+" {"+t.getFilters().map(fS).join(" ,")+"}"})(n):"Filter"}class mN extends Wt{constructor(e,t,r){super(e,t,r),this.key=Ie.fromName(r.referenceValue)}matches(e){const t=Ie.comparator(e.key,this.key);return this.matchesComparison(t)}}class pN extends Wt{constructor(e,t){super(e,"in",t),this.keys=mS("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class gN extends Wt{constructor(e,t){super(e,"not-in",t),this.keys=mS("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function mS(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((r=>Ie.fromName(r.referenceValue)))}class yN extends Wt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Dy(t)&&au(t.arrayValue,this.value)}}class vN extends Wt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&au(this.value.arrayValue,t)}}class xN extends Wt{constructor(e,t){super(e,"not-in",t)}matches(e){if(au(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!au(this.value.arrayValue,t)}}class bN extends Wt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Dy(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>au(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e,t=null,r=[],s=[],l=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=l,this.startAt=c,this.endAt=h,this.Te=null}}function gb(n,e=null,t=[],r=[],s=null,l=null,c=null){return new wN(n,e,t,r,s,l,c)}function My(n){const e=ze(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>xg(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),yf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>gl(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>gl(r))).join(",")),e.Te=t}return e.Te}function Vy(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!hN(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!hS(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!pb(n.startAt,e.startAt)&&pb(n.endAt,e.endAt)}function bg(n){return Ie.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e,t=null,r=[],s=[],l=null,c="F",h=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=l,this.limitType=c,this.startAt=h,this.endAt=d,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function kN(n,e,t,r,s,l,c,h){return new Ml(n,e,t,r,s,l,c,h)}function Ly(n){return new Ml(n)}function yb(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function _N(n){return Ie.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function pS(n){return n.collectionGroup!==null}function qc(n){const e=ze(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new Yt(un.comparator);return c.filters.forEach((d=>{d.getFlattenedFilters().forEach((m=>{m.isInequality()&&(h=h.add(m.field))}))})),h})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new lu(l,r))})),t.has(un.keyField().canonicalString())||e.Ie.push(new lu(un.keyField(),r))}return e.Ie}function vi(n){const e=ze(n);return e.Ee||(e.Ee=SN(e,qc(n))),e.Ee}function SN(n,e){if(n.limitType==="F")return gb(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const l=s.dir==="desc"?"asc":"desc";return new lu(s.field,l)}));const t=n.endAt?new Fh(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Fh(n.startAt.position,n.startAt.inclusive):null;return gb(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function wg(n,e){const t=n.filters.concat([e]);return new Ml(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function EN(n,e){const t=n.explicitOrderBy.concat([e]);return new Ml(n.path,n.collectionGroup,t,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}function Uh(n,e,t){return new Ml(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function xf(n,e){return Vy(vi(n),vi(e))&&n.limitType===e.limitType}function gS(n){return`${My(vi(n))}|lt:${n.limitType}`}function Qa(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((s=>fS(s))).join(", ")}]`),yf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((s=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(s))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((s=>gl(s))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((s=>gl(s))).join(",")),`Target(${r})`})(vi(n))}; limitType=${n.limitType})`}function bf(n,e){return e.isFoundDocument()&&(function(r,s){const l=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):Ie.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(n,e)&&(function(r,s){for(const l of qc(r))if(!l.field.isKeyField()&&s.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(r,s){for(const l of r.filters)if(!l.matches(s))return!1;return!0})(n,e)&&(function(r,s){return!(r.startAt&&!(function(c,h,d){const m=mb(c,h,d);return c.inclusive?m<=0:m<0})(r.startAt,qc(r),s)||r.endAt&&!(function(c,h,d){const m=mb(c,h,d);return c.inclusive?m>=0:m>0})(r.endAt,qc(r),s))})(n,e)}function TN(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function yS(n){return(e,t)=>{let r=!1;for(const s of qc(n)){const l=IN(s,e,t);if(l!==0)return l;r=r||s.field.isKeyField()}return 0}}function IN(n,e,t){const r=n.field.isKeyField()?Ie.comparator(e.key,t.key):(function(l,c,h){const d=c.data.field(l),m=h.data.field(l);return d!==null&&m!==null?pl(d,m):Ne(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ne(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,l]of r)if(this.equalsFn(s,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return void(s[l]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ao(this.inner,((t,r)=>{for(const[s,l]of r)e(s,l)}))}isEmpty(){return eS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN=new Tt(Ie.comparator);function rs(){return CN}const vS=new Tt(Ie.comparator);function Bc(...n){let e=vS;for(const t of n)e=e.insert(t.key,t);return e}function xS(n){let e=vS;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Wo(){return Gc()}function bS(){return Gc()}function Gc(){return new sa((n=>n.toString()),((n,e)=>n.isEqual(e)))}const jN=new Tt(Ie.comparator),AN=new Yt(Ie.comparator);function Qe(...n){let e=AN;for(const t of n)e=e.add(t);return e}const RN=new Yt(Ge);function PN(){return RN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oy(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Oh(e)?"-0":e}}function wS(n){return{integerValue:""+n}}function kS(n,e){return rN(e)?wS(e):Oy(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(){this._=void 0}}function NN(n,e,t){return n instanceof cu?(function(s,l){const c={fields:{[rS]:{stringValue:nS},[sS]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return l&&Ny(l)&&(l=vf(l)),l&&(c.fields[iS]=l),{mapValue:c}})(t,e):n instanceof yl?SS(n,e):n instanceof vl?ES(n,e):(function(s,l){const c=_S(s,l),h=vb(c)+vb(s.Ae);return vg(c)&&vg(s.Ae)?wS(h):Oy(s.serializer,h)})(n,e)}function DN(n,e,t){return n instanceof yl?SS(n,e):n instanceof vl?ES(n,e):t}function _S(n,e){return n instanceof uu?(function(r){return vg(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class cu extends wf{}class yl extends wf{constructor(e){super(),this.elements=e}}function SS(n,e){const t=TS(e);for(const r of n.elements)t.some((s=>ki(s,r)))||t.push(r);return{arrayValue:{values:t}}}class vl extends wf{constructor(e){super(),this.elements=e}}function ES(n,e){let t=TS(e);for(const r of n.elements)t=t.filter((s=>!ki(s,r)));return{arrayValue:{values:t}}}class uu extends wf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function vb(n){return Dt(n.integerValue||n.doubleValue)}function TS(n){return Dy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e,t){this.field=e,this.transform=t}}function MN(n,e){return n.field.isEqual(e.field)&&(function(r,s){return r instanceof yl&&s instanceof yl||r instanceof vl&&s instanceof vl?ml(r.elements,s.elements,ki):r instanceof uu&&s instanceof uu?ki(r.Ae,s.Ae):r instanceof cu&&s instanceof cu})(n.transform,e.transform)}class VN{constructor(e,t){this.version=e,this.transformResults=t}}class Cn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Cn}static exists(e){return new Cn(void 0,e)}static updateTime(e){return new Cn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function kh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class _f{}function IS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Sf(n.key,Cn.none()):new Eu(n.key,n.data,Cn.none());{const t=n.data,r=zn.empty();let s=new Yt(un.comparator);for(let l of e.fields)if(!s.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?r.delete(l):r.set(l,c),s=s.add(l)}return new lo(n.key,r,new nr(s.toArray()),Cn.none())}}function LN(n,e,t){n instanceof Eu?(function(s,l,c){const h=s.value.clone(),d=bb(s.fieldTransforms,l,c.transformResults);h.setAll(d),l.convertToFoundDocument(c.version,h).setHasCommittedMutations()})(n,e,t):n instanceof lo?(function(s,l,c){if(!kh(s.precondition,l))return void l.convertToUnknownDocument(c.version);const h=bb(s.fieldTransforms,l,c.transformResults),d=l.data;d.setAll(CS(s)),d.setAll(h),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):(function(s,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Qc(n,e,t,r){return n instanceof Eu?(function(l,c,h,d){if(!kh(l.precondition,c))return h;const m=l.value.clone(),g=wb(l.fieldTransforms,d,c);return m.setAll(g),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null})(n,e,t,r):n instanceof lo?(function(l,c,h,d){if(!kh(l.precondition,c))return h;const m=wb(l.fieldTransforms,d,c),g=c.data;return g.setAll(CS(l)),g.setAll(m),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),h===null?null:h.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((y=>y.field)))})(n,e,t,r):(function(l,c,h){return kh(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h})(n,e,t)}function ON(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),l=_S(r.transform,s||null);l!=null&&(t===null&&(t=zn.empty()),t.set(r.field,l))}return t||null}function xb(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ml(r,s,((l,c)=>MN(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Eu extends _f{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class lo extends _f{constructor(e,t,r,s,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function CS(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function bb(n,e,t){const r=new Map;it(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let s=0;s<t.length;s++){const l=n[s],c=l.transform,h=e.data.field(l.field);r.set(l.field,DN(c,h,t[s]))}return r}function wb(n,e,t){const r=new Map;for(const s of n){const l=s.transform,c=t.data.field(s.field);r.set(s.field,NN(l,c,e))}return r}class Sf extends _f{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class BN extends _f{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const l=this.mutations[s];l.key.isEqual(e.key)&&LN(l,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Qc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Qc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=bS();return this.mutations.forEach((s=>{const l=e.get(s.key),c=l.overlayedDocument;let h=this.applyToLocalView(c,l.mutatedFields);h=t.has(s.key)?null:h;const d=IS(c,h);d!==null&&r.set(s.key,d),c.isValidDocument()||c.convertToNoDocument(Le.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Qe())}isEqual(e){return this.batchId===e.batchId&&ml(this.mutations,e.mutations,((t,r)=>xb(t,r)))&&ml(this.baseMutations,e.baseMutations,((t,r)=>xb(t,r)))}}class By{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){it(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return jN})();const l=e.mutations;for(let c=0;c<l.length;c++)s=s.insert(l[c].key,r[c].version);return new By(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft,Je;function WN(n){switch(n){case ee.OK:return Ne(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return Ne(15467,{code:n})}}function jS(n){if(n===void 0)return ns("GRPC error has no .code"),ee.UNKNOWN;switch(n){case Ft.OK:return ee.OK;case Ft.CANCELLED:return ee.CANCELLED;case Ft.UNKNOWN:return ee.UNKNOWN;case Ft.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case Ft.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case Ft.INTERNAL:return ee.INTERNAL;case Ft.UNAVAILABLE:return ee.UNAVAILABLE;case Ft.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case Ft.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case Ft.NOT_FOUND:return ee.NOT_FOUND;case Ft.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case Ft.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case Ft.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case Ft.ABORTED:return ee.ABORTED;case Ft.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case Ft.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case Ft.DATA_LOSS:return ee.DATA_LOSS;default:return Ne(39323,{code:n})}}(Je=Ft||(Ft={}))[Je.OK=0]="OK",Je[Je.CANCELLED=1]="CANCELLED",Je[Je.UNKNOWN=2]="UNKNOWN",Je[Je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Je[Je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Je[Je.NOT_FOUND=5]="NOT_FOUND",Je[Je.ALREADY_EXISTS=6]="ALREADY_EXISTS",Je[Je.PERMISSION_DENIED=7]="PERMISSION_DENIED",Je[Je.UNAUTHENTICATED=16]="UNAUTHENTICATED",Je[Je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Je[Je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Je[Je.ABORTED=10]="ABORTED",Je[Je.OUT_OF_RANGE=11]="OUT_OF_RANGE",Je[Je.UNIMPLEMENTED=12]="UNIMPLEMENTED",Je[Je.INTERNAL=13]="INTERNAL",Je[Je.UNAVAILABLE=14]="UNAVAILABLE",Je[Je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $N(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN=new Ks([4294967295,4294967295],0);function kb(n){const e=$N().encode(n),t=new W_;return t.update(e),new Uint8Array(t.digest())}function _b(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ks([t,r],0),new Ks([s,l],0)]}class zy{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new zc(`Invalid padding: ${t}`);if(r<0)throw new zc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new zc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new zc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ks.fromNumber(this.ge)}ye(e,t,r){let s=e.add(t.multiply(Ks.fromNumber(r)));return s.compare(HN)===1&&(s=new Ks([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=kb(e),[r,s]=_b(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,s,l);if(!this.we(c))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new zy(l,s,t);return r.forEach((h=>c.insert(h))),c}insert(e){if(this.ge===0)return;const t=kb(e),[r,s]=_b(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,s,l);this.be(c)}}be(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class zc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,t,r,s,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Tu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Ef(Le.min(),s,new Tt(Ge),rs(),Qe())}}class Tu{constructor(e,t,r,s,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Tu(r,t,Qe(),Qe(),Qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e,t,r,s){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=s}}class AS{constructor(e,t){this.targetId=e,this.Ce=t}}class RS{constructor(e,t,r=dn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class Sb{constructor(){this.ve=0,this.Fe=Eb(),this.Me=dn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Qe(),t=Qe(),r=Qe();return this.Fe.forEach(((s,l)=>{switch(l){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Ne(38017,{changeType:l})}})),new Tu(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=Eb()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,it(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class KN{constructor(e){this.Ge=e,this.ze=new Map,this.je=rs(),this.He=ih(),this.Je=ih(),this.Ze=new Tt(Ge)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Ne(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,r=e.Ce.count,s=this.ot(t);if(s){const l=s.target;if(bg(l))if(r===0){const c=new Ie(l.path);this.et(t,c,bn.newNoDocument(c,Le.min()))}else it(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const h=this.ut(e),d=h?this.ct(h,e,c):1;if(d!==0){this.it(t);const m=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,m)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:l=0}=t;let c,h;try{c=Xs(r).toUint8Array()}catch(d){if(d instanceof tS)return fl("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new zy(c,s,l)}catch(d){return fl(d instanceof zc?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.ge===0?null:h}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let s=0;return r.forEach((l=>{const c=this.Ge.ht(),h=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(h)||(this.et(t,l,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const h=this.ot(c);if(h){if(l.current&&bg(h.target)){const d=new Ie(h.target.path);this.It(d).has(c)||this.Et(c,d)||this.et(c,d,bn.newNoDocument(d,e))}l.Be&&(t.set(c,l.ke()),l.Ke())}}));let r=Qe();this.Je.forEach(((l,c)=>{let h=!0;c.forEachWhile((d=>{const m=this.ot(d);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(r=r.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const s=new Ef(e,t,this.Ze,this.je,r);return this.je=rs(),this.He=ih(),this.Je=ih(),this.Ze=new Tt(Ge),s}Ye(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.qe(t,1):s.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new Sb,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Yt(Ge),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Yt(Ge),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||xe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Sb),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function ih(){return new Tt(Ie.comparator)}function Eb(){return new Tt(Ie.comparator)}const qN={asc:"ASCENDING",desc:"DESCENDING"},GN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},QN={and:"AND",or:"OR"};class YN{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function kg(n,e){return n.useProto3Json||yf(e)?e:{value:e}}function Wh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function PS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function XN(n,e){return Wh(n,e.toTimestamp())}function xi(n){return it(!!n,49232),Le.fromTimestamp((function(t){const r=Ys(t);return new yt(r.seconds,r.nanos)})(n))}function Fy(n,e){return _g(n,e).canonicalString()}function _g(n,e){const t=(function(s){return new dt(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function NS(n){const e=dt.fromString(n);return it(OS(e),10190,{key:e.toString()}),e}function Sg(n,e){return Fy(n.databaseId,e.path)}function Ap(n,e){const t=NS(e);if(t.get(1)!==n.databaseId.projectId)throw new ge(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ge(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ie(MS(t))}function DS(n,e){return Fy(n.databaseId,e)}function JN(n){const e=NS(n);return e.length===4?dt.emptyPath():MS(e)}function Eg(n){return new dt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function MS(n){return it(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Tb(n,e,t){return{name:Sg(n,e),fields:t.value.mapValue.fields}}function ZN(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Ne(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],l=(function(m,g){return m.useProto3Json?(it(g===void 0||typeof g=="string",58123),dn.fromBase64String(g||"")):(it(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),dn.fromUint8Array(g||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&(function(m){const g=m.code===void 0?ee.UNKNOWN:jS(m.code);return new ge(g,m.message||"")})(c);t=new RS(r,s,l,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ap(n,r.document.name),l=xi(r.document.updateTime),c=r.document.createTime?xi(r.document.createTime):Le.min(),h=new zn({mapValue:{fields:r.document.fields}}),d=bn.newFoundDocument(s,l,c,h),m=r.targetIds||[],g=r.removedTargetIds||[];t=new _h(m,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Ap(n,r.document),l=r.readTime?xi(r.readTime):Le.min(),c=bn.newNoDocument(s,l),h=r.removedTargetIds||[];t=new _h([],h,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Ap(n,r.document),l=r.removedTargetIds||[];t=new _h([],l,s,null)}else{if(!("filter"in e))return Ne(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:l}=r,c=new UN(s,l),h=r.targetId;t=new AS(h,c)}}return t}function e4(n,e){let t;if(e instanceof Eu)t={update:Tb(n,e.key,e.value)};else if(e instanceof Sf)t={delete:Sg(n,e.key)};else if(e instanceof lo)t={update:Tb(n,e.key,e.data),updateMask:c4(e.fieldMask)};else{if(!(e instanceof BN))return Ne(16599,{dt:e.type});t={verify:Sg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(l,c){const h=c.transform;if(h instanceof cu)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof yl)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof vl)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof uu)return{fieldPath:c.field.canonicalString(),increment:h.Ae};throw Ne(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(s,l){return l.updateTime!==void 0?{updateTime:XN(s,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ne(27497)})(n,e.precondition)),t}function t4(n,e){return n&&n.length>0?(it(e!==void 0,14353),n.map((t=>(function(s,l){let c=s.updateTime?xi(s.updateTime):xi(l);return c.isEqual(Le.min())&&(c=xi(l)),new VN(c,s.transformResults||[])})(t,e)))):[]}function n4(n,e){return{documents:[DS(n,e.path)]}}function r4(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=DS(n,s);const l=(function(m){if(m.length!==0)return LS(Wr.create(m,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(m){if(m.length!==0)return m.map((g=>(function(x){return{field:Ya(x.field),direction:o4(x.dir)}})(g)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=kg(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:t,parent:s}}function i4(n){let e=JN(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){it(r===1,65062);const g=t.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let l=[];t.where&&(l=(function(y){const x=VS(y);return x instanceof Wr&&dS(x)?x.getFilters():[x]})(t.where));let c=[];t.orderBy&&(c=(function(y){return y.map((x=>(function(k){return new lu(Xa(k.field),(function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(x)))})(t.orderBy));let h=null;t.limit&&(h=(function(y){let x;return x=typeof y=="object"?y.value:y,yf(x)?null:x})(t.limit));let d=null;t.startAt&&(d=(function(y){const x=!!y.before,E=y.values||[];return new Fh(E,x)})(t.startAt));let m=null;return t.endAt&&(m=(function(y){const x=!y.before,E=y.values||[];return new Fh(E,x)})(t.endAt)),kN(e,s,c,l,h,"F",d,m)}function s4(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ne(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function VS(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Xa(t.unaryFilter.field);return Wt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Xa(t.unaryFilter.field);return Wt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Xa(t.unaryFilter.field);return Wt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Xa(t.unaryFilter.field);return Wt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ne(61313);default:return Ne(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Wt.create(Xa(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ne(58110);default:return Ne(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Wr.create(t.compositeFilter.filters.map((r=>VS(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ne(1026)}})(t.compositeFilter.op))})(n):Ne(30097,{filter:n})}function o4(n){return qN[n]}function a4(n){return GN[n]}function l4(n){return QN[n]}function Ya(n){return{fieldPath:n.canonicalString()}}function Xa(n){return un.fromServerFormat(n.fieldPath)}function LS(n){return n instanceof Wt?(function(t){if(t.op==="=="){if(fb(t.value))return{unaryFilter:{field:Ya(t.field),op:"IS_NAN"}};if(hb(t.value))return{unaryFilter:{field:Ya(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(fb(t.value))return{unaryFilter:{field:Ya(t.field),op:"IS_NOT_NAN"}};if(hb(t.value))return{unaryFilter:{field:Ya(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ya(t.field),op:a4(t.op),value:t.value}}})(n):n instanceof Wr?(function(t){const r=t.getFilters().map((s=>LS(s)));return r.length===1?r[0]:{compositeFilter:{op:l4(t.op),filters:r}}})(n):Ne(54877,{filter:n})}function c4(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function OS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function BS(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e,t,r,s,l=Le.min(),c=Le.min(),h=dn.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(e){return new Fs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Fs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(e){this.yt=e}}function d4(n){const e=i4({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Uh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4{constructor(){this.Sn=new f4}addToCollectionParentIndex(e,t){return this.Sn.add(t),ne.resolve()}getCollectionParents(e,t){return ne.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return ne.resolve()}deleteFieldIndex(e,t){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,t){return ne.resolve()}getDocumentsMatchingTarget(e,t){return ne.resolve(null)}getIndexType(e,t){return ne.resolve(0)}getFieldIndexes(e,t){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,t){return ne.resolve(Qs.min())}getMinOffsetFromCollectionGroup(e,t){return ne.resolve(Qs.min())}updateCollectionGroup(e,t,r){return ne.resolve()}updateIndexEntries(e,t){return ne.resolve()}}class f4{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Yt(dt.comparator),l=!s.has(r);return this.index[t]=s.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Yt(dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},zS=41943040;class Bn{static withCacheSize(e){return new Bn(e,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bn.DEFAULT_COLLECTION_PERCENTILE=10,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bn.DEFAULT=new Bn(zS,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bn.DISABLED=new Bn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new xl(0)}static ar(){return new xl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cb="LruGarbageCollector",m4=1048576;function jb([n,e],[t,r]){const s=Ge(n,t);return s===0?Ge(e,r):s}class p4{constructor(e){this.Pr=e,this.buffer=new Yt(jb),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();jb(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class g4{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){xe(Cb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Dl(t)?xe(Cb,"Ignoring IndexedDB error during garbage collection: ",t):await Nl(t)}await this.Ar(3e5)}))}}class y4{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return ne.resolve(gf.ce);const r=new p4(t);return this.Vr.forEachTarget(e,(s=>r.Er(s.sequenceNumber))).next((()=>this.Vr.mr(e,(s=>r.Er(s))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(xe("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(Ib)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(xe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ib):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,s,l,c,h,d,m;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((y=>(y>this.params.maximumSequenceNumbersToCollect?(xe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),s=this.params.maximumSequenceNumbersToCollect):s=y,c=Date.now(),this.nthSequenceNumber(e,s)))).next((y=>(r=y,h=Date.now(),this.removeTargets(e,r,t)))).next((y=>(l=y,d=Date.now(),this.removeOrphanedDocuments(e,r)))).next((y=>(m=Date.now(),Ga()<=qe.DEBUG&&xe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-g}ms
	Determined least recently used ${s} in `+(h-c)+`ms
	Removed ${l} targets in `+(d-h)+`ms
	Removed ${y} documents in `+(m-d)+`ms
Total Duration: ${m-g}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:l,documentsRemoved:y}))))}}function v4(n,e){return new y4(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(){this.changes=new sa((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,bn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ne.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(r!==null&&Qc(r.mutation,s,nr.empty(),yt.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Qe()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Qe()){const s=Wo();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,r).next((l=>{let c=Bc();return l.forEach(((h,d)=>{c=c.insert(h,d.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=Wo();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Qe())))}populateOverlays(e,t,r){const s=[];return r.forEach((l=>{t.has(l)||s.push(l)})),this.documentOverlayCache.getOverlays(e,s).next((l=>{l.forEach(((c,h)=>{t.set(c,h)}))}))}computeViews(e,t,r,s){let l=rs();const c=Gc(),h=(function(){return Gc()})();return t.forEach(((d,m)=>{const g=r.get(m.key);s.has(m.key)&&(g===void 0||g.mutation instanceof lo)?l=l.insert(m.key,m):g!==void 0?(c.set(m.key,g.mutation.getFieldMask()),Qc(g.mutation,m,g.mutation.getFieldMask(),yt.now())):c.set(m.key,nr.empty())})),this.recalculateAndSaveOverlays(e,l).next((d=>(d.forEach(((m,g)=>c.set(m,g))),t.forEach(((m,g)=>h.set(m,new b4(g,c.get(m)??null)))),h)))}recalculateAndSaveOverlays(e,t){const r=Gc();let s=new Tt(((c,h)=>c-h)),l=Qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const h of c)h.keys().forEach((d=>{const m=t.get(d);if(m===null)return;let g=r.get(d)||nr.empty();g=h.applyToLocalView(m,g),r.set(d,g);const y=(s.get(h.batchId)||Qe()).add(d);s=s.insert(h.batchId,y)}))})).next((()=>{const c=[],h=s.getReverseIterator();for(;h.hasNext();){const d=h.getNext(),m=d.key,g=d.value,y=bS();g.forEach((x=>{if(!l.has(x)){const E=IS(t.get(x),r.get(x));E!==null&&y.set(x,E),l=l.add(x)}})),c.push(this.documentOverlayCache.saveOverlays(e,m,y))}return ne.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,s){return _N(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):pS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next((l=>{const c=s-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-l.size):ne.resolve(Wo());let h=iu,d=l;return c.next((m=>ne.forEach(m,((g,y)=>(h<y.largestBatchId&&(h=y.largestBatchId),l.get(g)?ne.resolve():this.remoteDocumentCache.getEntry(e,g).next((x=>{d=d.insert(g,x)}))))).next((()=>this.populateOverlays(e,m,l))).next((()=>this.computeViews(e,d,m,Qe()))).next((g=>({batchId:h,changes:xS(g)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ie(t)).next((r=>{let s=Bc();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const l=t.collectionGroup;let c=Bc();return this.indexManager.getCollectionParents(e,l).next((h=>ne.forEach(h,(d=>{const m=(function(y,x){return new Ml(x,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(t,d.child(l));return this.getDocumentsMatchingCollectionQuery(e,m,r,s).next((g=>{g.forEach(((y,x)=>{c=c.insert(y,x)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,s){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,s)))).next((c=>{l.forEach(((d,m)=>{const g=m.getKey();c.get(g)===null&&(c=c.insert(g,bn.newInvalidDocument(g)))}));let h=Bc();return c.forEach(((d,m)=>{const g=l.get(d);g!==void 0&&Qc(g.mutation,m,nr.empty(),yt.now()),bf(t,m)&&(h=h.insert(d,m))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return ne.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:xi(s.createTime)}})(t)),ne.resolve()}getNamedQuery(e,t){return ne.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(s){return{name:s.name,query:d4(s.bundledQuery),readTime:xi(s.readTime)}})(t)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(){this.overlays=new Tt(Ie.comparator),this.Lr=new Map}getOverlay(e,t){return ne.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Wo();return ne.forEach(t,(s=>this.getOverlay(e,s).next((l=>{l!==null&&r.set(s,l)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((s,l)=>{this.bt(e,t,l)})),ne.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Lr.get(r);return s!==void 0&&(s.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(r)),ne.resolve()}getOverlaysForCollection(e,t,r){const s=Wo(),l=t.length+1,c=new Ie(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const d=h.getNext().value,m=d.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===l&&d.largestBatchId>r&&s.set(d.getKey(),d)}return ne.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let l=new Tt(((m,g)=>m-g));const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let g=l.get(m.largestBatchId);g===null&&(g=Wo(),l=l.insert(m.largestBatchId,g)),g.set(m.getKey(),m)}}const h=Wo(),d=l.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((m,g)=>h.set(m,g))),!(h.size()>=s)););return ne.resolve(h)}bt(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const c=this.Lr.get(s.largestBatchId).delete(r.key);this.Lr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new FN(t,r));let l=this.Lr.get(t);l===void 0&&(l=Qe(),this.Lr.set(t,l)),this.Lr.set(t,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{constructor(){this.sessionToken=dn.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(){this.kr=new Yt(en.Kr),this.qr=new Yt(en.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const r=new en(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new en(e,t))}Qr(e,t){e.forEach((r=>this.removeReference(r,t)))}Gr(e){const t=new Ie(new dt([])),r=new en(t,e),s=new en(t,e+1),l=[];return this.qr.forEachInRange([r,s],(c=>{this.Wr(c),l.push(c.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Ie(new dt([])),r=new en(t,e),s=new en(t,e+1);let l=Qe();return this.qr.forEachInRange([r,s],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new en(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class en{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Ie.comparator(e.key,t.key)||Ge(e.Hr,t.Hr)}static Ur(e,t){return Ge(e.Hr,t.Hr)||Ie.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Yt(en.Kr)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new zN(l,t,r,s);this.mutationQueue.push(c);for(const h of s)this.Jr=this.Jr.add(new en(h.key,l)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ne.resolve(c)}lookupMutationBatch(e,t){return ne.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Xr(r),l=s<0?0:s;return ne.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?Py:this.Yn-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new en(t,0),s=new en(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([r,s],(c=>{const h=this.Zr(c.Hr);l.push(h)})),ne.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Yt(Ge);return t.forEach((s=>{const l=new en(s,0),c=new en(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,c],(h=>{r=r.add(h.Hr)}))})),ne.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let l=r;Ie.isDocumentKey(l)||(l=l.child(""));const c=new en(new Ie(l),0);let h=new Yt(Ge);return this.Jr.forEachWhile((d=>{const m=d.key.path;return!!r.isPrefixOf(m)&&(m.length===s&&(h=h.add(d.Hr)),!0)}),c),ne.resolve(this.Yr(h))}Yr(e){const t=[];return e.forEach((r=>{const s=this.Zr(r);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){it(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return ne.forEach(t.mutations,(s=>{const l=new en(s.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,t){const r=new en(t,0),s=this.Jr.firstAfterOrEqual(r);return ne.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T4{constructor(e){this.ti=e,this.docs=(function(){return new Tt(Ie.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),l=s?s.size:0,c=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ne.resolve(r?r.document.mutableCopy():bn.newInvalidDocument(t))}getEntries(e,t){let r=rs();return t.forEach((s=>{const l=this.docs.get(s);r=r.insert(s,l?l.document.mutableCopy():bn.newInvalidDocument(s))})),ne.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let l=rs();const c=t.path,h=new Ie(c.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){const{key:m,value:{document:g}}=d.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||ZP(JP(g),r)<=0||(s.has(g.key)||bf(t,g))&&(l=l.insert(g.key,g.mutableCopy()))}return ne.resolve(l)}getAllFromCollectionGroup(e,t,r,s){Ne(9500)}ni(e,t){return ne.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new I4(this)}getSize(e){return ne.resolve(this.size)}}class I4 extends x4{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?t.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(r)})),ne.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(e){this.persistence=e,this.ri=new sa((t=>My(t)),Vy),this.lastRemoteSnapshotVersion=Le.min(),this.highestTargetId=0,this.ii=0,this.si=new Uy,this.targetCount=0,this.oi=xl._r()}forEachTarget(e,t){return this.ri.forEach(((r,s)=>t(s))),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),ne.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new xl(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,ne.resolve()}updateTargetData(e,t){return this.lr(t),ne.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,t,r){let s=0;const l=[];return this.ri.forEach(((c,h)=>{h.sequenceNumber<=t&&r.get(h.targetId)===null&&(this.ri.delete(c),l.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)})),ne.waitFor(l).next((()=>s))}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,t){const r=this.ri.get(t)||null;return ne.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),ne.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);const s=this.persistence.referenceDelegate,l=[];return s&&t.forEach((c=>{l.push(s.markPotentiallyOrphaned(e,c))})),ne.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),ne.resolve()}getMatchingKeysForTargetId(e,t){const r=this.si.jr(t);return ne.resolve(r)}containsKey(e,t){return ne.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(e,t){this._i={},this.overlays={},this.ai=new gf(0),this.ui=!1,this.ui=!0,this.ci=new S4,this.referenceDelegate=e(this),this.li=new C4(this),this.indexManager=new h4,this.remoteDocumentCache=(function(s){return new T4(s)})((r=>this.referenceDelegate.hi(r))),this.serializer=new u4(t),this.Pi=new k4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new _4,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new E4(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){xe("MemoryPersistence","Starting transaction:",e);const s=new j4(this.ai.next());return this.referenceDelegate.Ti(),r(s).next((l=>this.referenceDelegate.Ii(s).next((()=>l)))).toPromise().then((l=>(s.raiseOnCommittedEvent(),l)))}Ei(e,t){return ne.or(Object.values(this._i).map((r=>()=>r.containsKey(e,t))))}}class j4 extends tN{constructor(e){super(),this.currentSequenceNumber=e}}class Wy{constructor(e){this.persistence=e,this.Ri=new Uy,this.Ai=null}static Vi(e){return new Wy(e)}get di(){if(this.Ai)return this.Ai;throw Ne(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),ne.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),ne.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),ne.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((s=>this.di.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((l=>this.di.add(l.toString())))})).next((()=>r.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.di,(r=>{const s=Ie.fromPath(r);return this.mi(e,s).next((l=>{l||t.removeEntry(s,Le.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return ne.or([()=>ne.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class $h{constructor(e,t){this.persistence=e,this.fi=new sa((r=>iN(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=v4(this,t)}static Vi(e,t){return new $h(e,t)}Ti(){}Ii(e){return ne.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}mr(e,t){return ne.forEach(this.fi,((r,s)=>this.wr(e,r,s).next((l=>l?ne.resolve():t(s)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),l=s.newChangeBuffer();return s.ni(e,(c=>this.wr(e,c,t).next((h=>{h||(r++,l.removeEntry(c,Le.min()))})))).next((()=>l.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),ne.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),ne.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),ne.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=bh(e.data.value)),t}wr(e,t,r){return ne.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.fi.get(t);return ne.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=s}static Es(e,t){let r=Qe(),s=Qe();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:s=s.add(l.doc.key)}return new $y(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return r5()?8:nN(kn())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,s){const l={result:null};return this.gs(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ps(e,t,s,r).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new A4;return this.ys(e,t,c).next((h=>{if(l.result=h,this.As)return this.ws(e,t,c,h.size)}))})).next((()=>l.result))}ws(e,t,r,s){return r.documentReadCount<this.Vs?(Ga()<=qe.DEBUG&&xe("QueryEngine","SDK will not create cache indexes for query:",Qa(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ne.resolve()):(Ga()<=qe.DEBUG&&xe("QueryEngine","Query:",Qa(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(Ga()<=qe.DEBUG&&xe("QueryEngine","The SDK decides to create cache indexes for query:",Qa(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vi(t))):ne.resolve())}gs(e,t){if(yb(t))return ne.resolve(null);let r=vi(t);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=Uh(t,null,"F"),r=vi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const c=Qe(...l);return this.fs.getDocuments(e,c).next((h=>this.indexManager.getMinOffset(e,r).next((d=>{const m=this.bs(t,h);return this.Ss(t,m,c,d.readTime)?this.gs(e,Uh(t,null,"F")):this.Ds(e,m,t,d)}))))})))))}ps(e,t,r,s){return yb(t)||s.isEqual(Le.min())?ne.resolve(null):this.fs.getDocuments(e,r).next((l=>{const c=this.bs(t,l);return this.Ss(t,c,r,s)?ne.resolve(null):(Ga()<=qe.DEBUG&&xe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Qa(t)),this.Ds(e,c,t,XP(s,iu)).next((h=>h)))}))}bs(e,t){let r=new Yt(yS(e));return t.forEach(((s,l)=>{bf(e,l)&&(r=r.add(l))})),r}Ss(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(s)>0)}ys(e,t,r){return Ga()<=qe.DEBUG&&xe("QueryEngine","Using full collection scan to execute query:",Qa(t)),this.fs.getDocumentsMatchingQuery(e,t,Qs.min(),r)}Ds(e,t,r,s){return this.fs.getDocumentsMatchingQuery(e,r,s).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hy="LocalStore",P4=3e8;class N4{constructor(e,t,r,s){this.persistence=e,this.Cs=t,this.serializer=s,this.vs=new Tt(Ge),this.Fs=new sa((l=>My(l)),Vy),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new w4(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function D4(n,e,t,r){return new N4(n,e,t,r)}async function US(n,e){const t=ze(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next((l=>(s=l,t.Os(e),t.mutationQueue.getAllMutationBatches(r)))).next((l=>{const c=[],h=[];let d=Qe();for(const m of s){c.push(m.batchId);for(const g of m.mutations)d=d.add(g.key)}for(const m of l){h.push(m.batchId);for(const g of m.mutations)d=d.add(g.key)}return t.localDocuments.getDocuments(r,d).next((m=>({Ns:m,removedBatchIds:c,addedBatchIds:h})))}))}))}function M4(n,e){const t=ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(h,d,m,g){const y=m.batch,x=y.keys();let E=ne.resolve();return x.forEach((k=>{E=E.next((()=>g.getEntry(d,k))).next((S=>{const T=m.docVersions.get(k);it(T!==null,48541),S.version.compareTo(T)<0&&(y.applyToRemoteDocument(S,m),S.isValidDocument()&&(S.setReadTime(m.commitVersion),g.addEntry(S)))}))})),E.next((()=>h.mutationQueue.removeMutationBatch(d,y)))})(t,r,e,l).next((()=>l.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(h){let d=Qe();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(d=d.add(h.batch.mutations[m].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(r,s)))}))}function WS(n){const e=ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function V4(n,e){const t=ze(n),r=e.snapshotVersion;let s=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.xs.newChangeBuffer({trackRemovals:!0});s=t.vs;const h=[];e.targetChanges.forEach(((g,y)=>{const x=s.get(y);if(!x)return;h.push(t.li.removeMatchingKeys(l,g.removedDocuments,y).next((()=>t.li.addMatchingKeys(l,g.addedDocuments,y))));let E=x.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(y)!==null?E=E.withResumeToken(dn.EMPTY_BYTE_STRING,Le.min()).withLastLimboFreeSnapshotVersion(Le.min()):g.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(g.resumeToken,r)),s=s.insert(y,E),(function(S,T,P){return S.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=P4?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0})(x,E,g)&&h.push(t.li.updateTargetData(l,E))}));let d=rs(),m=Qe();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(l,g))})),h.push(L4(l,c,e.documentUpdates).next((g=>{d=g.Bs,m=g.Ls}))),!r.isEqual(Le.min())){const g=t.li.getLastRemoteSnapshotVersion(l).next((y=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,r)));h.push(g)}return ne.waitFor(h).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,d,m))).next((()=>d))})).then((l=>(t.vs=s,l)))}function L4(n,e,t){let r=Qe(),s=Qe();return t.forEach((l=>r=r.add(l))),e.getEntries(n,r).next((l=>{let c=rs();return t.forEach(((h,d)=>{const m=l.get(h);d.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(h)),d.isNoDocument()&&d.version.isEqual(Le.min())?(e.removeEntry(h,d.readTime),c=c.insert(h,d)):!m.isValidDocument()||d.version.compareTo(m.version)>0||d.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(d),c=c.insert(h,d)):xe(Hy,"Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",d.version)})),{Bs:c,Ls:s}}))}function O4(n,e){const t=ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Py),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function B4(n,e){const t=ze(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return t.li.getTargetData(r,e).next((l=>l?(s=l,ne.resolve(s)):t.li.allocateTargetId(r).next((c=>(s=new Fs(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=t.vs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r}))}async function Tg(n,e,t){const r=ze(n),s=r.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,(c=>r.persistence.referenceDelegate.removeTarget(c,s)))}catch(c){if(!Dl(c))throw c;xe(Hy,`Failed to update sequence numbers for target ${e}: ${c}`)}r.vs=r.vs.remove(e),r.Fs.delete(s.target)}function Ab(n,e,t){const r=ze(n);let s=Le.min(),l=Qe();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(d,m,g){const y=ze(d),x=y.Fs.get(g);return x!==void 0?ne.resolve(y.vs.get(x)):y.li.getTargetData(m,g)})(r,c,vi(e)).next((h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(c,h.targetId).next((d=>{l=d}))})).next((()=>r.Cs.getDocumentsMatchingQuery(c,e,t?s:Le.min(),t?l:Qe()))).next((h=>(z4(r,TN(e),h),{documents:h,ks:l})))))}function z4(n,e,t){let r=n.Ms.get(e)||Le.min();t.forEach(((s,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),n.Ms.set(e,r)}class Rb{constructor(){this.activeTargetIds=PN()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class F4{constructor(){this.vo=new Rb,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Rb,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb="ConnectivityMonitor";class Nb{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){xe(Pb,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){xe(Pb,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sh=null;function Ig(){return sh===null?sh=(function(){return 268435456+Math.round(2147483648*Math.random())})():sh++,"0x"+sh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rp="RestConnection",W4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class $4{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.$o=this.databaseId.database===Bh?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,t,r,s,l){const c=Ig(),h=this.Qo(e,t.toUriEncodedString());xe(Rp,`Sending RPC '${e}' ${c}:`,h,r);const d={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(d,s,l);const{host:m}=new URL(h),g=jl(m);return this.zo(e,h,d,r,g).then((y=>(xe(Rp,`Received RPC '${e}' ${c}: `,y),y)),(y=>{throw fl(Rp,`RPC '${e}' ${c} failed with error: `,y,"url: ",h,"request:",r),y}))}jo(e,t,r,s,l,c){return this.Wo(e,t,r,s,l)}Go(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Pl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,l)=>e[l]=s)),r&&r.headers.forEach(((s,l)=>e[l]=s))}Qo(e,t){const r=W4[e];let s=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vn="WebChannelConnection",Pc=(n,e,t)=>{n.listen(e,(r=>{try{t(r)}catch(s){setTimeout((()=>{throw s}),0)}}))};class ol extends $4{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!ol.c_){const e=q_();Pc(e,K_.STAT_EVENT,(t=>{t.stat===pg.PROXY?xe(vn,"STAT_EVENT: detected buffering proxy"):t.stat===pg.NOPROXY&&xe(vn,"STAT_EVENT: detected no buffering proxy")})),ol.c_=!0}}zo(e,t,r,s,l){const c=Ig();return new Promise(((h,d)=>{const m=new $_;m.setWithCredentials(!0),m.listenOnce(H_.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case xh.NO_ERROR:const y=m.getResponseJson();xe(vn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(y)),h(y);break;case xh.TIMEOUT:xe(vn,`RPC '${e}' ${c} timed out`),d(new ge(ee.DEADLINE_EXCEEDED,"Request time out"));break;case xh.HTTP_ERROR:const x=m.getStatus();if(xe(vn,`RPC '${e}' ${c} failed with status:`,x,"response text:",m.getResponseText()),x>0){let E=m.getResponseJson();Array.isArray(E)&&(E=E[0]);const k=E==null?void 0:E.error;if(k&&k.status&&k.message){const S=(function(P){const M=P.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(M)>=0?M:ee.UNKNOWN})(k.status);d(new ge(S,k.message))}else d(new ge(ee.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new ge(ee.UNAVAILABLE,"Connection failed."));break;default:Ne(9055,{l_:e,streamId:c,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{xe(vn,`RPC '${e}' ${c} completed.`)}}));const g=JSON.stringify(s);xe(vn,`RPC '${e}' ${c} sending request:`,s),m.send(t,"POST",g,r,15)}))}T_(e,t,r){const s=Ig(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(h.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(h.useFetchStreams=!0),this.Go(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const m=l.join("");xe(vn,`Creating RPC '${e}' stream ${s}: ${m}`,h);const g=c.createWebChannel(m,h);this.I_(g);let y=!1,x=!1;const E=new H4({Ho:k=>{x?xe(vn,`Not sending because RPC '${e}' stream ${s} is closed:`,k):(y||(xe(vn,`Opening RPC '${e}' stream ${s} transport.`),g.open(),y=!0),xe(vn,`RPC '${e}' stream ${s} sending:`,k),g.send(k))},Jo:()=>g.close()});return Pc(g,Oc.EventType.OPEN,(()=>{x||(xe(vn,`RPC '${e}' stream ${s} transport opened.`),E.i_())})),Pc(g,Oc.EventType.CLOSE,(()=>{x||(x=!0,xe(vn,`RPC '${e}' stream ${s} transport closed`),E.o_(),this.E_(g))})),Pc(g,Oc.EventType.ERROR,(k=>{x||(x=!0,fl(vn,`RPC '${e}' stream ${s} transport errored. Name:`,k.name,"Message:",k.message),E.o_(new ge(ee.UNAVAILABLE,"The operation could not be completed")))})),Pc(g,Oc.EventType.MESSAGE,(k=>{var S;if(!x){const T=k.data[0];it(!!T,16349);const P=T,M=(P==null?void 0:P.error)||((S=P[0])==null?void 0:S.error);if(M){xe(vn,`RPC '${e}' stream ${s} received error:`,M);const N=M.status;let F=(function(A){const j=Ft[A];if(j!==void 0)return jS(j)})(N),$=M.message;F===void 0&&(F=ee.INTERNAL,$="Unknown error status: "+N+" with message "+M.message),x=!0,E.o_(new ge(F,$)),g.close()}else xe(vn,`RPC '${e}' stream ${s} received:`,T),E.__(T)}})),ol.u_(),setTimeout((()=>{E.s_()}),0),E}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return G_()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K4(n){return new ol(n)}function Pp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tf(n){return new YN(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ol.c_=!1;class $S{constructor(e,t,r=1e3,s=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=s,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-r);s>0&&xe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db="PersistentStream";class HS{constructor(e,t,r,s,l,c,h,d){this.Ci=e,this.b_=r,this.S_=s,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new $S(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ee.RESOURCE_EXHAUSTED?(ns(t.toString()),ns("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===t&&this.G_(r,s)}),(r=>{e((()=>{const s=new ge(ee.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,t){const r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.H_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return xe(Db,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(xe(Db,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class q4 extends HS{constructor(e,t,r,s,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=ZN(this.serializer,e),r=(function(l){if(!("targetChange"in l))return Le.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Le.min():c.readTime?xi(c.readTime):Le.min()})(e);return this.listener.J_(t,r)}Z_(e){const t={};t.database=Eg(this.serializer),t.addTarget=(function(l,c){let h;const d=c.target;if(h=bg(d)?{documents:n4(l,d)}:{query:r4(l,d).ft},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=PS(l,c.resumeToken);const m=kg(l,c.expectedCount);m!==null&&(h.expectedCount=m)}else if(c.snapshotVersion.compareTo(Le.min())>0){h.readTime=Wh(l,c.snapshotVersion.toTimestamp());const m=kg(l,c.expectedCount);m!==null&&(h.expectedCount=m)}return h})(this.serializer,e);const r=s4(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){const t={};t.database=Eg(this.serializer),t.removeTarget=e,this.K_(t)}}class G4 extends HS{constructor(e,t,r,s,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,c),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return it(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,it(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){it(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=t4(e.writeResults,e.commitTime),r=xi(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Eg(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>e4(this.serializer,r)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q4{}class Y4 extends Q4{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ge(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,_g(t,r),s,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ge(ee.UNKNOWN,l.toString())}))}jo(e,t,r,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,h])=>this.connection.jo(e,_g(t,r),s,c,h,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ge(ee.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function X4(n,e,t,r){return new Y4(n,e,t,r)}class J4{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ns(t),this.aa=!1):xe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zo="RemoteStore";class Z4{constructor(e,t,r,s,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((c=>{r.enqueueAndForget((async()=>{oa(this)&&(xe(Zo,"Restarting streams for network reachability change."),await(async function(d){const m=ze(d);m.Ea.add(4),await Iu(m),m.Va.set("Unknown"),m.Ea.delete(4),await If(m)})(this))}))})),this.Va=new J4(r,s)}}async function If(n){if(oa(n))for(const e of n.Ra)await e(!0)}async function Iu(n){for(const e of n.Ra)await e(!1)}function KS(n,e){const t=ze(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Qy(t)?Gy(t):Vl(t).O_()&&qy(t,e))}function Ky(n,e){const t=ze(n),r=Vl(t);t.Ia.delete(e),r.O_()&&qS(t,e),t.Ia.size===0&&(r.O_()?r.L_():oa(t)&&t.Va.set("Unknown"))}function qy(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Le.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Vl(n).Z_(e)}function qS(n,e){n.da.$e(e),Vl(n).X_(e)}function Gy(n){n.da=new KN({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Vl(n).start(),n.Va.ua()}function Qy(n){return oa(n)&&!Vl(n).x_()&&n.Ia.size>0}function oa(n){return ze(n).Ea.size===0}function GS(n){n.da=void 0}async function eD(n){n.Va.set("Online")}async function tD(n){n.Ia.forEach(((e,t)=>{qy(n,e)}))}async function nD(n,e){GS(n),Qy(n)?(n.Va.ha(e),Gy(n)):n.Va.set("Unknown")}async function rD(n,e,t){if(n.Va.set("Online"),e instanceof RS&&e.state===2&&e.cause)try{await(async function(s,l){const c=l.cause;for(const h of l.targetIds)s.Ia.has(h)&&(await s.remoteSyncer.rejectListen(h,c),s.Ia.delete(h),s.da.removeTarget(h))})(n,e)}catch(r){xe(Zo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Hh(n,r)}else if(e instanceof _h?n.da.Xe(e):e instanceof AS?n.da.st(e):n.da.tt(e),!t.isEqual(Le.min()))try{const r=await WS(n.localStore);t.compareTo(r)>=0&&await(function(l,c){const h=l.da.Tt(c);return h.targetChanges.forEach(((d,m)=>{if(d.resumeToken.approximateByteSize()>0){const g=l.Ia.get(m);g&&l.Ia.set(m,g.withResumeToken(d.resumeToken,c))}})),h.targetMismatches.forEach(((d,m)=>{const g=l.Ia.get(d);if(!g)return;l.Ia.set(d,g.withResumeToken(dn.EMPTY_BYTE_STRING,g.snapshotVersion)),qS(l,d);const y=new Fs(g.target,d,m,g.sequenceNumber);qy(l,y)})),l.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(r){xe(Zo,"Failed to raise snapshot:",r),await Hh(n,r)}}async function Hh(n,e,t){if(!Dl(e))throw e;n.Ea.add(1),await Iu(n),n.Va.set("Offline"),t||(t=()=>WS(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{xe(Zo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await If(n)}))}function QS(n,e){return e().catch((t=>Hh(n,t,e)))}async function Cf(n){const e=ze(n),t=Zs(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Py;for(;iD(e);)try{const s=await O4(e.localStore,r);if(s===null){e.Ta.length===0&&t.L_();break}r=s.batchId,sD(e,s)}catch(s){await Hh(e,s)}YS(e)&&XS(e)}function iD(n){return oa(n)&&n.Ta.length<10}function sD(n,e){n.Ta.push(e);const t=Zs(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function YS(n){return oa(n)&&!Zs(n).x_()&&n.Ta.length>0}function XS(n){Zs(n).start()}async function oD(n){Zs(n).ra()}async function aD(n){const e=Zs(n);for(const t of n.Ta)e.ea(t.mutations)}async function lD(n,e,t){const r=n.Ta.shift(),s=By.from(r,e,t);await QS(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await Cf(n)}async function cD(n,e){e&&Zs(n).Y_&&await(async function(r,s){if((function(c){return WN(c)&&c!==ee.ABORTED})(s.code)){const l=r.Ta.shift();Zs(r).B_(),await QS(r,(()=>r.remoteSyncer.rejectFailedWrite(l.batchId,s))),await Cf(r)}})(n,e),YS(n)&&XS(n)}async function Mb(n,e){const t=ze(n);t.asyncQueue.verifyOperationInProgress(),xe(Zo,"RemoteStore received new credentials");const r=oa(t);t.Ea.add(3),await Iu(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await If(t)}async function uD(n,e){const t=ze(n);e?(t.Ea.delete(2),await If(t)):e||(t.Ea.add(2),await Iu(t),t.Va.set("Unknown"))}function Vl(n){return n.ma||(n.ma=(function(t,r,s){const l=ze(t);return l.sa(),new q4(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(n.datastore,n.asyncQueue,{Zo:eD.bind(null,n),Yo:tD.bind(null,n),t_:nD.bind(null,n),J_:rD.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),Qy(n)?Gy(n):n.Va.set("Unknown")):(await n.ma.stop(),GS(n))}))),n.ma}function Zs(n){return n.fa||(n.fa=(function(t,r,s){const l=ze(t);return l.sa(),new G4(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:oD.bind(null,n),t_:cD.bind(null,n),ta:aD.bind(null,n),na:lD.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await Cf(n)):(await n.fa.stop(),n.Ta.length>0&&(xe(Zo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy{constructor(e,t,r,s,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=l,this.deferred=new Qi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,l){const c=Date.now()+r,h=new Yy(e,t,c,s,l);return h.start(r),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xy(n,e){if(ns("AsyncQueue",`${e}: ${n}`),Dl(n))return new ge(ee.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{static emptySet(e){return new al(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ie.comparator(t.key,r.key):(t,r)=>Ie.comparator(t.key,r.key),this.keyedMap=Bc(),this.sortedSet=new Tt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof al)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=r.getNext().key;if(!s.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new al;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(){this.ga=new Tt(Ie.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ne(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class bl{constructor(e,t,r,s,l,c,h,d,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,s,l){const c=[];return t.forEach((h=>{c.push({type:0,doc:h})})),new bl(e,t,al.emptySet(t),c,r,s,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class hD{constructor(){this.queries=Lb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const s=ze(t),l=s.queries;s.queries=Lb(),l.forEach(((c,h)=>{for(const d of h.ba)d.onError(r)}))})(this,new ge(ee.ABORTED,"Firestore shutting down"))}}function Lb(){return new sa((n=>gS(n)),xf)}async function JS(n,e){const t=ze(n);let r=3;const s=e.query;let l=t.queries.get(s);l?!l.Sa()&&e.Da()&&(r=2):(l=new dD,r=e.Da()?0:1);try{switch(r){case 0:l.wa=await t.onListen(s,!0);break;case 1:l.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(c){const h=Xy(c,`Initialization of query '${Qa(e.query)}' failed`);return void e.onError(h)}t.queries.set(s,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Jy(t)}async function ZS(n,e){const t=ze(n),r=e.query;let s=3;const l=t.queries.get(r);if(l){const c=l.ba.indexOf(e);c>=0&&(l.ba.splice(c,1),l.ba.length===0?s=e.Da()?0:1:!l.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function fD(n,e){const t=ze(n);let r=!1;for(const s of e){const l=s.query,c=t.queries.get(l);if(c){for(const h of c.ba)h.Fa(s)&&(r=!0);c.wa=s}}r&&Jy(t)}function mD(n,e,t){const r=ze(n),s=r.queries.get(e);if(s)for(const l of s.ba)l.onError(t);r.queries.delete(e)}function Jy(n){n.Ca.forEach((e=>{e.next()}))}var Cg,Ob;(Ob=Cg||(Cg={})).Ma="default",Ob.Cache="cache";class e2{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new bl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=bl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Cg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(e){this.key=e}}class n2{constructor(e){this.key=e}}class pD{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Qe(),this.mutatedKeys=Qe(),this.eu=yS(e),this.tu=new al(this.eu)}get nu(){return this.Za}ru(e,t){const r=t?t.iu:new Vb,s=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=s,h=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((g,y)=>{const x=s.get(g),E=bf(this.query,y)?y:null,k=!!x&&this.mutatedKeys.has(x.key),S=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let T=!1;x&&E?x.data.isEqual(E.data)?k!==S&&(r.track({type:3,doc:E}),T=!0):this.su(x,E)||(r.track({type:2,doc:E}),T=!0,(d&&this.eu(E,d)>0||m&&this.eu(E,m)<0)&&(h=!0)):!x&&E?(r.track({type:0,doc:E}),T=!0):x&&!E&&(r.track({type:1,doc:x}),T=!0,(d||m)&&(h=!0)),T&&(E?(c=c.add(E),l=S?l.add(g):l.delete(g)):(c=c.delete(g),l=l.delete(g)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const g=this.query.limitType==="F"?c.last():c.first();c=c.delete(g.key),l=l.delete(g.key),r.track({type:1,doc:g})}return{tu:c,iu:r,Ss:h,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((g,y)=>(function(E,k){const S=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ne(20277,{Vt:T})}};return S(E)-S(k)})(g.type,y.type)||this.eu(g.doc,y.doc))),this.ou(r),s=s??!1;const h=t&&!s?this._u():[],d=this.Ya.size===0&&this.current&&!s?1:0,m=d!==this.Xa;return this.Xa=d,c.length!==0||m?{snapshot:new bl(this.query,e.tu,l,c,e.mutatedKeys,d===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Vb,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Qe(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const t=[];return e.forEach((r=>{this.Ya.has(r)||t.push(new n2(r))})),this.Ya.forEach((r=>{e.has(r)||t.push(new t2(r))})),t}cu(e){this.Za=e.ks,this.Ya=Qe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return bl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Zy="SyncEngine";class gD{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class yD{constructor(e){this.key=e,this.hu=!1}}class vD{constructor(e,t,r,s,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new sa((h=>gS(h)),xf),this.Iu=new Map,this.Eu=new Set,this.Ru=new Tt(Ie.comparator),this.Au=new Map,this.Vu=new Uy,this.du={},this.mu=new Map,this.fu=xl.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function xD(n,e,t=!0){const r=l2(n);let s;const l=r.Tu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),s=l.view.lu()):s=await r2(r,e,t,!0),s}async function bD(n,e){const t=l2(n);await r2(t,e,!0,!1)}async function r2(n,e,t,r){const s=await B4(n.localStore,vi(e)),l=s.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let h;return r&&(h=await wD(n,e,l,c==="current",s.resumeToken)),n.isPrimaryClient&&t&&KS(n.remoteStore,s),h}async function wD(n,e,t,r,s){n.pu=(y,x,E)=>(async function(S,T,P,M){let N=T.view.ru(P);N.Ss&&(N=await Ab(S.localStore,T.query,!1).then((({documents:A})=>T.view.ru(A,N))));const F=M&&M.targetChanges.get(T.targetId),$=M&&M.targetMismatches.get(T.targetId)!=null,K=T.view.applyChanges(N,S.isPrimaryClient,F,$);return zb(S,T.targetId,K.au),K.snapshot})(n,y,x,E);const l=await Ab(n.localStore,e,!0),c=new pD(e,l.ks),h=c.ru(l.documents),d=Tu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),m=c.applyChanges(h,n.isPrimaryClient,d);zb(n,t,m.au);const g=new gD(e,t,c);return n.Tu.set(e,g),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),m.snapshot}async function kD(n,e,t){const r=ze(n),s=r.Tu.get(e),l=r.Iu.get(s.targetId);if(l.length>1)return r.Iu.set(s.targetId,l.filter((c=>!xf(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Tg(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),t&&Ky(r.remoteStore,s.targetId),jg(r,s.targetId)})).catch(Nl)):(jg(r,s.targetId),await Tg(r.localStore,s.targetId,!0))}async function _D(n,e){const t=ze(n),r=t.Tu.get(e),s=t.Iu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Ky(t.remoteStore,r.targetId))}async function SD(n,e,t){const r=RD(n);try{const s=await(function(c,h){const d=ze(c),m=yt.now(),g=h.reduce(((E,k)=>E.add(k.key)),Qe());let y,x;return d.persistence.runTransaction("Locally write mutations","readwrite",(E=>{let k=rs(),S=Qe();return d.xs.getEntries(E,g).next((T=>{k=T,k.forEach(((P,M)=>{M.isValidDocument()||(S=S.add(P))}))})).next((()=>d.localDocuments.getOverlayedDocuments(E,k))).next((T=>{y=T;const P=[];for(const M of h){const N=ON(M,y.get(M.key).overlayedDocument);N!=null&&P.push(new lo(M.key,N,lS(N.value.mapValue),Cn.exists(!0)))}return d.mutationQueue.addMutationBatch(E,m,P,h)})).next((T=>{x=T;const P=T.applyToLocalDocumentSet(y,S);return d.documentOverlayCache.saveOverlays(E,T.batchId,P)}))})).then((()=>({batchId:x.batchId,changes:xS(y)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(c,h,d){let m=c.du[c.currentUser.toKey()];m||(m=new Tt(Ge)),m=m.insert(h,d),c.du[c.currentUser.toKey()]=m})(r,s.batchId,t),await Cu(r,s.changes),await Cf(r.remoteStore)}catch(s){const l=Xy(s,"Failed to persist write");t.reject(l)}}async function i2(n,e){const t=ze(n);try{const r=await V4(t.localStore,e);e.targetChanges.forEach(((s,l)=>{const c=t.Au.get(l);c&&(it(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c.hu=!0:s.modifiedDocuments.size>0?it(c.hu,14607):s.removedDocuments.size>0&&(it(c.hu,42227),c.hu=!1))})),await Cu(t,r,e)}catch(r){await Nl(r)}}function Bb(n,e,t){const r=ze(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Tu.forEach(((l,c)=>{const h=c.view.va(e);h.snapshot&&s.push(h.snapshot)})),(function(c,h){const d=ze(c);d.onlineState=h;let m=!1;d.queries.forEach(((g,y)=>{for(const x of y.ba)x.va(h)&&(m=!0)})),m&&Jy(d)})(r.eventManager,e),s.length&&r.Pu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function ED(n,e,t){const r=ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Au.get(e),l=s&&s.key;if(l){let c=new Tt(Ie.comparator);c=c.insert(l,bn.newNoDocument(l,Le.min()));const h=Qe().add(l),d=new Ef(Le.min(),new Map,new Tt(Ge),c,h);await i2(r,d),r.Ru=r.Ru.remove(l),r.Au.delete(e),e0(r)}else await Tg(r.localStore,e,!1).then((()=>jg(r,e,t))).catch(Nl)}async function TD(n,e){const t=ze(n),r=e.batch.batchId;try{const s=await M4(t.localStore,e);o2(t,r,null),s2(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Cu(t,s)}catch(s){await Nl(s)}}async function ID(n,e,t){const r=ze(n);try{const s=await(function(c,h){const d=ze(c);return d.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let g;return d.mutationQueue.lookupMutationBatch(m,h).next((y=>(it(y!==null,37113),g=y.keys(),d.mutationQueue.removeMutationBatch(m,y)))).next((()=>d.mutationQueue.performConsistencyCheck(m))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(m,g,h))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,g))).next((()=>d.localDocuments.getDocuments(m,g)))}))})(r.localStore,e);o2(r,e,t),s2(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Cu(r,s)}catch(s){await Nl(s)}}function s2(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function o2(n,e,t){const r=ze(n);let s=r.du[r.currentUser.toKey()];if(s){const l=s.get(e);l&&(t?l.reject(t):l.resolve(),s=s.remove(e)),r.du[r.currentUser.toKey()]=s}}function jg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((r=>{n.Vu.containsKey(r)||a2(n,r)}))}function a2(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(Ky(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),e0(n))}function zb(n,e,t){for(const r of t)r instanceof t2?(n.Vu.addReference(r.key,e),CD(n,r)):r instanceof n2?(xe(Zy,"Document no longer in limbo: "+r.key),n.Vu.removeReference(r.key,e),n.Vu.containsKey(r.key)||a2(n,r.key)):Ne(19791,{wu:r})}function CD(n,e){const t=e.key,r=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(r)||(xe(Zy,"New document in limbo: "+t),n.Eu.add(r),e0(n))}function e0(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ie(dt.fromString(e)),r=n.fu.next();n.Au.set(r,new yD(t)),n.Ru=n.Ru.insert(t,r),KS(n.remoteStore,new Fs(vi(Ly(t.path)),r,"TargetPurposeLimboResolution",gf.ce))}}async function Cu(n,e,t){const r=ze(n),s=[],l=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((h,d)=>{c.push(r.pu(d,e,t).then((m=>{var g;if((m||t)&&r.isPrimaryClient){const y=m?!m.fromCache:(g=t==null?void 0:t.targetChanges.get(d.targetId))==null?void 0:g.current;r.sharedClientState.updateQueryState(d.targetId,y?"current":"not-current")}if(m){s.push(m);const y=$y.Es(d.targetId,m);l.push(y)}})))})),await Promise.all(c),r.Pu.J_(s),await(async function(d,m){const g=ze(d);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(y=>ne.forEach(m,(x=>ne.forEach(x.Ts,(E=>g.persistence.referenceDelegate.addReference(y,x.targetId,E))).next((()=>ne.forEach(x.Is,(E=>g.persistence.referenceDelegate.removeReference(y,x.targetId,E)))))))))}catch(y){if(!Dl(y))throw y;xe(Hy,"Failed to update sequence numbers: "+y)}for(const y of m){const x=y.targetId;if(!y.fromCache){const E=g.vs.get(x),k=E.snapshotVersion,S=E.withLastLimboFreeSnapshotVersion(k);g.vs=g.vs.insert(x,S)}}})(r.localStore,l))}async function jD(n,e){const t=ze(n);if(!t.currentUser.isEqual(e)){xe(Zy,"User change. New user:",e.toKey());const r=await US(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((h=>{h.forEach((d=>{d.reject(new ge(ee.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Cu(t,r.Ns)}}function AD(n,e){const t=ze(n),r=t.Au.get(e);if(r&&r.hu)return Qe().add(r.key);{let s=Qe();const l=t.Iu.get(e);if(!l)return s;for(const c of l){const h=t.Tu.get(c);s=s.unionWith(h.view.nu)}return s}}function l2(n){const e=ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=i2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=AD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ED.bind(null,e),e.Pu.J_=fD.bind(null,e.eventManager),e.Pu.yu=mD.bind(null,e.eventManager),e}function RD(n){const e=ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=TD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ID.bind(null,e),e}class Kh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Tf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return D4(this.persistence,new R4,e.initialUser,this.serializer)}Cu(e){return new FS(Wy.Vi,this.serializer)}Du(e){return new F4}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Kh.provider={build:()=>new Kh};class PD extends Kh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){it(this.persistence.referenceDelegate instanceof $h,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new g4(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Bn.withCacheSize(this.cacheSizeBytes):Bn.DEFAULT;return new FS((r=>$h.Vi(r,t)),this.serializer)}}class Ag{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Bb(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=jD.bind(null,this.syncEngine),await uD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new hD})()}createDatastore(e){const t=Tf(e.databaseInfo.databaseId),r=K4(e.databaseInfo);return X4(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,s,l,c,h){return new Z4(r,s,l,c,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>Bb(this.syncEngine,t,0)),(function(){return Nb.v()?new Nb:new U4})())}createSyncEngine(e,t){return(function(s,l,c,h,d,m,g){const y=new vD(s,l,c,h,d,m);return g&&(y.gu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const l=ze(s);xe(Zo,"RemoteStore shutting down."),l.Ea.add(5),await Iu(l),l.Aa.shutdown(),l.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Ag.provider={build:()=>new Ag};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ns("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo="FirestoreClient";class ND{constructor(e,t,r,s,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=s,this.user=xn.UNAUTHENTICATED,this.clientId=Ry.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(async c=>{xe(eo,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(xe(eo,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Qi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Xy(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Np(n,e){n.asyncQueue.verifyOperationInProgress(),xe(eo,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async s=>{r.isEqual(s)||(await US(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Fb(n,e){n.asyncQueue.verifyOperationInProgress();const t=await DD(n);xe(eo,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>Mb(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,s)=>Mb(e.remoteStore,s))),n._onlineComponents=e}async function DD(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){xe(eo,"Using user provided OfflineComponentProvider");try{await Np(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===ee.FAILED_PRECONDITION||s.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;fl("Error using user provided cache. Falling back to memory cache: "+t),await Np(n,new Kh)}}else xe(eo,"Using default OfflineComponentProvider"),await Np(n,new PD(void 0));return n._offlineComponents}async function u2(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(xe(eo,"Using user provided OnlineComponentProvider"),await Fb(n,n._uninitializedComponentsProvider._online)):(xe(eo,"Using default OnlineComponentProvider"),await Fb(n,new Ag))),n._onlineComponents}function MD(n){return u2(n).then((e=>e.syncEngine))}async function d2(n){const e=await u2(n),t=e.eventManager;return t.onListen=xD.bind(null,e.syncEngine),t.onUnlisten=kD.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=bD.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=_D.bind(null,e.syncEngine),t}function VD(n,e,t={}){const r=new Qi;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,h,d,m){const g=new c2({next:x=>{g.Nu(),c.enqueueAndForget((()=>ZS(l,y)));const E=x.docs.has(h);!E&&x.fromCache?m.reject(new ge(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&x.fromCache&&d&&d.source==="server"?m.reject(new ge(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(x)},error:x=>m.reject(x)}),y=new e2(Ly(h.path),g,{includeMetadataChanges:!0,Ka:!0});return JS(l,y)})(await d2(n),n.asyncQueue,e,t,r))),r.promise}function LD(n,e,t={}){const r=new Qi;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,h,d,m){const g=new c2({next:x=>{g.Nu(),c.enqueueAndForget((()=>ZS(l,y))),x.fromCache&&d.source==="server"?m.reject(new ge(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(x)},error:x=>m.reject(x)}),y=new e2(h,g,{includeMetadataChanges:!0,Ka:!0});return JS(l,y)})(await d2(n),n.asyncQueue,e,t,r))),r.promise}function OD(n,e){const t=new Qi;return n.asyncQueue.enqueueAndForget((async()=>SD(await MD(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h2(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BD="ComponentProvider",Ub=new Map;function zD(n,e,t,r,s){return new aN(n,e,t,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,h2(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2="firestore.googleapis.com",Wb=!0;class $b{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ge(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=f2,this.ssl=Wb}else this.host=e.host,this.ssl=e.ssl??Wb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=zS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<m4)throw new ge(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}YP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=h2(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ge(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ge(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ge(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class jf{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $b({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $b(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new zP;switch(r.type){case"firstParty":return new $P(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ge(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=Ub.get(t);r&&(xe(BD,"Removing Datastore"),Ub.delete(t),r.terminate())})(this),Promise.resolve()}}function FD(n,e,t,r={}){var m;n=kr(n,jf);const s=jl(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},h=`${e}:${t}`;s&&(n_(`https://${h}`),r_("Firestore",!0)),l.host!==f2&&l.host!==h&&fl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...l,host:h,ssl:s,emulatorOptions:r};if(!Zi(d,c)&&(n._setSettings(d),r.mockUserToken)){let g,y;if(typeof r.mockUserToken=="string")g=r.mockUserToken,y=xn.MOCK_USER;else{g=Gj(r.mockUserToken,(m=n._app)==null?void 0:m.options.projectId);const x=r.mockUserToken.sub||r.mockUserToken.user_id;if(!x)throw new ge(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new xn(x)}n._authCredentials=new FP(new Y_(g,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new co(this.firestore,e,this._query)}}class Mt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mt(this.firestore,e,this._key)}toJSON(){return{type:Mt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Su(t,Mt._jsonSchema))return new Mt(e,r||null,new Ie(dt.fromString(t.referencePath)))}}Mt._jsonSchemaVersion="firestore/documentReference/1.0",Mt._jsonSchema={type:$t("string",Mt._jsonSchemaVersion),referencePath:$t("string")};class qs extends co{constructor(e,t,r){super(e,t,Ly(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mt(this.firestore,null,new Ie(e))}withConverter(e){return new qs(this.firestore,e,this._path)}}function ot(n,e,...t){if(n=Ot(n),X_("collection","path",e),n instanceof jf){const r=dt.fromString(e,...t);return rb(r),new qs(n,null,r)}{if(!(n instanceof Mt||n instanceof qs))throw new ge(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(dt.fromString(e,...t));return rb(r),new qs(n.firestore,null,r)}}function et(n,e,...t){if(n=Ot(n),arguments.length===1&&(e=Ry.newId()),X_("doc","path",e),n instanceof jf){const r=dt.fromString(e,...t);return nb(r),new Mt(n,null,new Ie(r))}{if(!(n instanceof Mt||n instanceof qs))throw new ge(ee.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(dt.fromString(e,...t));return nb(r),new Mt(n.firestore,n instanceof qs?n.converter:null,new Ie(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hb="AsyncQueue";class Kb{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new $S(this,"async_queue_retry"),this._c=()=>{const r=Pp();r&&xe(Hb,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Pp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Pp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Qi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Dl(e))throw e;xe(Hb,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,ns("INTERNAL UNHANDLED ERROR: ",qb(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=Yy.createAndSchedule(this,e,t,r,(l=>this.hc(l)));return this.tc.push(s),s}uc(){this.nc&&Ne(47125,{Pc:qb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function qb(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class uo extends jf{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new Kb,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Kb(e),this._firestoreClient=void 0,await e}}}function UD(n,e){const t=typeof n=="object"?n:a_(),r=typeof n=="string"?n:Bh,s=xy(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const l=Kj("firestore");l&&FD(s,...l)}return s}function Af(n){if(n._terminated)throw new ge(ee.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||WD(n),n._firestoreClient}function WD(n){var r,s,l,c;const e=n._freezeSettings(),t=zD(n._databaseId,((r=n._app)==null?void 0:r.options.appId)||"",n._persistenceKey,(s=n._app)==null?void 0:s.options.apiKey,e);n._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new ND(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(d){const m=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(m),_online:m}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new gr(dn.fromBase64String(e))}catch(t){throw new ge(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new gr(dn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:gr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Su(e,gr._jsonSchema))return gr.fromBase64String(e.bytes)}}gr._jsonSchemaVersion="firestore/bytes/1.0",gr._jsonSchema={type:$t("string",gr._jsonSchemaVersion),bytes:$t("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ge(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new un(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ge(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ge(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ge(this._lat,e._lat)||Ge(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:bi._jsonSchemaVersion}}static fromJSON(e){if(Su(e,bi._jsonSchema))return new bi(e.latitude,e.longitude)}}bi._jsonSchemaVersion="firestore/geoPoint/1.0",bi._jsonSchema={type:$t("string",bi._jsonSchemaVersion),latitude:$t("number"),longitude:$t("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==s[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Fr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Su(e,Fr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Fr(e.vectorValues);throw new ge(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Fr._jsonSchemaVersion="firestore/vectorValue/1.0",Fr._jsonSchema={type:$t("string",Fr._jsonSchemaVersion),vectorValues:$t("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $D=/^__.*__$/;class HD{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new lo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Eu(e,this.data,t,this.fieldTransforms)}}class m2{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new lo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function p2(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ne(40011,{dataSource:n})}}class Pf{constructor(e,t,r,s,l,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Pf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const t=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var s;const t=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return qh(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(p2(this.dataSource)&&$D.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class KD{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Tf(e)}createContext(e,t,r,s=!1){return new Pf({dataSource:e,methodName:t,targetDoc:r,path:un.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ju(n){const e=n._freezeSettings(),t=Tf(n._databaseId);return new KD(n._databaseId,!!e.ignoreUndefinedProperties,t)}function t0(n,e,t,r,s,l={}){const c=n.createContext(l.merge||l.mergeFields?2:0,e,t,s);o0("Data must be an object, but it was:",c,r);const h=x2(r,c);let d,m;if(l.merge)d=new nr(c.fieldMask),m=c.fieldTransforms;else if(l.mergeFields){const g=[];for(const y of l.mergeFields){const x=ea(e,y,t);if(!c.contains(x))throw new ge(ee.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);k2(g,x)||g.push(x)}d=new nr(g),m=c.fieldTransforms.filter((y=>d.covers(y.field)))}else d=null,m=c.fieldTransforms;return new HD(new zn(h),d,m)}class Nf extends aa{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Nf}}function g2(n,e,t){return new Pf({dataSource:3,targetDoc:e.settings.targetDoc,methodName:n._methodName,arrayElement:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class n0 extends aa{_toFieldTransform(e){return new kf(e.path,new cu)}isEqual(e){return e instanceof n0}}class r0 extends aa{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=g2(this,e,!0),r=this.Ac.map((l=>la(l,t))),s=new yl(r);return new kf(e.path,s)}isEqual(e){return e instanceof r0&&Zi(this.Ac,e.Ac)}}class i0 extends aa{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=g2(this,e,!0),r=this.Ac.map((l=>la(l,t))),s=new vl(r);return new kf(e.path,s)}isEqual(e){return e instanceof i0&&Zi(this.Ac,e.Ac)}}class s0 extends aa{constructor(e,t){super(e),this.Vc=t}_toFieldTransform(e){const t=new uu(e.serializer,kS(e.serializer,this.Vc));return new kf(e.path,t)}isEqual(e){return e instanceof s0&&this.Vc===e.Vc}}function y2(n,e,t,r){const s=n.createContext(1,e,t);o0("Data must be an object, but it was:",s,r);const l=[],c=zn.empty();ao(r,((d,m)=>{const g=w2(e,d,t);m=Ot(m);const y=s.childContextForFieldPath(g);if(m instanceof Nf)l.push(g);else{const x=la(m,y);x!=null&&(l.push(g),c.set(g,x))}}));const h=new nr(l);return new m2(c,h,s.fieldTransforms)}function v2(n,e,t,r,s,l){const c=n.createContext(1,e,t),h=[ea(e,r,t)],d=[s];if(l.length%2!=0)throw new ge(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<l.length;x+=2)h.push(ea(e,l[x])),d.push(l[x+1]);const m=[],g=zn.empty();for(let x=h.length-1;x>=0;--x)if(!k2(m,h[x])){const E=h[x];let k=d[x];k=Ot(k);const S=c.childContextForFieldPath(E);if(k instanceof Nf)m.push(E);else{const T=la(k,S);T!=null&&(m.push(E),g.set(E,T))}}const y=new nr(m);return new m2(g,y,c.fieldTransforms)}function qD(n,e,t,r=!1){return la(t,n.createContext(r?4:3,e))}function la(n,e){if(b2(n=Ot(n)))return o0("Unsupported field value:",e,n),x2(n,e);if(n instanceof aa)return(function(r,s){if(!p2(s.dataSource))throw s.createError(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(s);l&&s.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,s){const l=[];let c=0;for(const h of r){let d=la(h,s.childContextForArray(c));d==null&&(d={nullValue:"NULL_VALUE"}),l.push(d),c++}return{arrayValue:{values:l}}})(n,e)}return(function(r,s){if((r=Ot(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return kS(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=yt.fromDate(r);return{timestampValue:Wh(s.serializer,l)}}if(r instanceof yt){const l=new yt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Wh(s.serializer,l)}}if(r instanceof bi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof gr)return{bytesValue:PS(s.serializer,r._byteString)};if(r instanceof Mt){const l=s.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw s.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Fy(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Fr)return(function(c,h){const d=c instanceof Fr?c.toArray():c;return{mapValue:{fields:{[oS]:{stringValue:aS},[zh]:{arrayValue:{values:d.map((g=>{if(typeof g!="number")throw h.createError("VectorValues must only contain numeric values.");return Oy(h.serializer,g)}))}}}}}})(r,s);if(BS(r))return r._toProto(s.serializer);throw s.createError(`Unsupported field value: ${pf(r)}`)})(n,e)}function x2(n,e){const t={};return eS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ao(n,((r,s)=>{const l=la(s,e.childContextForField(r));l!=null&&(t[r]=l)})),{mapValue:{fields:t}}}function b2(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof yt||n instanceof bi||n instanceof gr||n instanceof Mt||n instanceof aa||n instanceof Fr||BS(n))}function o0(n,e,t){if(!b2(t)||!J_(t)){const r=pf(t);throw r==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+r)}}function ea(n,e,t){if((e=Ot(e))instanceof Rf)return e._internalPath;if(typeof e=="string")return w2(n,e);throw qh("Field path arguments must be of type string or ",n,!1,void 0,t)}const GD=new RegExp("[~\\*/\\[\\]]");function w2(n,e,t){if(e.search(GD)>=0)throw qh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Rf(...e.split("."))._internalPath}catch{throw qh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function qh(n,e,t,r,s){const l=r&&!r.isEmpty(),c=s!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(l||c)&&(d+=" (found",l&&(d+=` in field ${r}`),c&&(d+=` in document ${s}`),d+=")"),new ge(ee.INVALID_ARGUMENT,h+n+d)}function k2(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{convertValue(e,t="none"){switch(Js(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ne(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ao(e,((s,l)=>{r[s]=this.convertValue(l,t)})),r}convertVectorValue(e){var r,s,l;const t=(l=(s=(r=e.fields)==null?void 0:r[zh].arrayValue)==null?void 0:s.values)==null?void 0:l.map((c=>Dt(c.doubleValue)));return new Fr(t)}convertGeoPoint(e){return new bi(Dt(e.latitude),Dt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=vf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(su(e));default:return null}}convertTimestamp(e){const t=Ys(e);return new yt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=dt.fromString(e);it(OS(r),9688,{name:e});const s=new ou(r.get(1),r.get(3)),l=new Ie(r.popFirst(5));return s.isEqual(t)||ns(`Document ${l} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2 extends QD{constructor(e){super(),this.firestore=e}convertBytes(e){return new gr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Mt(this.firestore,null,t)}}function Xe(){return new n0("serverTimestamp")}function S2(...n){return new r0("arrayUnion",n)}function YD(...n){return new i0("arrayRemove",n)}function ta(n){return new s0("increment",n)}const Gb="@firebase/firestore",Qb="4.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e,t,r,s,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new XD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(ea("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class XD extends E2{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JD(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ge(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class a0{}class l0 extends a0{}function nn(n,e,...t){let r=[];e instanceof a0&&r.push(e),r=r.concat(t),(function(l){const c=l.filter((d=>d instanceof c0)).length,h=l.filter((d=>d instanceof Df)).length;if(c>1||c>0&&h>0)throw new ge(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)n=s._apply(n);return n}class Df extends l0{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Df(e,t,r)}_apply(e){const t=this._parse(e);return T2(e._query,t),new co(e.firestore,e.converter,wg(e._query,t))}_parse(e){const t=ju(e.firestore);return(function(l,c,h,d,m,g,y){let x;if(m.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new ge(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){Xb(y,g);const k=[];for(const S of y)k.push(Yb(d,l,S));x={arrayValue:{values:k}}}else x=Yb(d,l,y)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||Xb(y,g),x=qD(h,c,y,g==="in"||g==="not-in");return Wt.create(m,g,x)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function _n(n,e,t){const r=e,s=ea("where",n);return Df._create(s,r,t)}class c0 extends a0{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new c0(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:Wr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,l){let c=s;const h=l.getFlattenedFilters();for(const d of h)T2(c,d),c=wg(c,d)})(e._query,t),new co(e.firestore,e.converter,wg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class u0 extends l0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new u0(e,t)}_apply(e){const t=(function(s,l,c){if(s.startAt!==null)throw new ge(ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ge(ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new lu(l,c)})(e._query,this._field,this._direction);return new co(e.firestore,e.converter,EN(e._query,t))}}function is(n,e="asc"){const t=e,r=ea("orderBy",n);return u0._create(r,t)}class d0 extends l0{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new d0(e,t,r)}_apply(e){return new co(e.firestore,e.converter,Uh(e._query,this._limit,this._limitType))}}function ZD(n){return d0._create("limit",n,"F")}function Yb(n,e,t){if(typeof(t=Ot(t))=="string"){if(t==="")throw new ge(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!pS(e)&&t.indexOf("/")!==-1)throw new ge(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(dt.fromString(t));if(!Ie.isDocumentKey(r))throw new ge(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return db(n,new Ie(r))}if(t instanceof Mt)return db(n,t._key);throw new ge(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pf(t)}.`)}function Xb(n,e){if(!Array.isArray(n)||n.length===0)throw new ge(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function T2(n,e){const t=(function(s,l){for(const c of s)for(const h of c.getFlattenedFilters())if(l.indexOf(h.op)>=0)return h.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ge(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ge(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function h0(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Fc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ko extends E2{constructor(e,t,r,s,l,c){super(e,t,r,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Sh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(ea("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ko._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ko._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ko._jsonSchema={type:$t("string",Ko._jsonSchemaVersion),bundleSource:$t("string","DocumentSnapshot"),bundleName:$t("string"),bundle:$t("string")};class Sh extends Ko{data(e={}){return super.data(e)}}class ll{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Fc(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Sh(this._firestore,this._userDataWriter,r.key,r,new Fc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ge(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,l){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map((h=>{const d=new Sh(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Fc(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:d,oldIndex:-1,newIndex:c++}}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((h=>l||h.type!==3)).map((h=>{const d=new Sh(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Fc(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,g=-1;return h.type!==0&&(m=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),g=c.indexOf(h.doc.key)),{type:eM(h.type),doc:d,oldIndex:m,newIndex:g}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ll._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ry.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),s.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function eM(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ne(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ll._jsonSchemaVersion="firestore/querySnapshot/1.0",ll._jsonSchema={type:$t("string",ll._jsonSchemaVersion),bundleSource:$t("string","QuerySnapshot"),bundleName:$t("string"),bundle:$t("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ju(e)}set(e,t,r){this._verifyNotCommitted();const s=Dp(e,this._firestore),l=h0(s.converter,t,r),c=t0(this._dataReader,"WriteBatch.set",s._key,l,s.converter!==null,r);return this._mutations.push(c.toMutation(s._key,Cn.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const l=Dp(e,this._firestore);let c;return c=typeof(t=Ot(t))=="string"||t instanceof Rf?v2(this._dataReader,"WriteBatch.update",l._key,t,r,s):y2(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,Cn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Dp(e,this._firestore);return this._mutations=this._mutations.concat(new Sf(t._key,Cn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ge(ee.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Dp(n,e){if((n=Ot(n)).firestore!==e)throw new ge(ee.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kr(n){n=kr(n,Mt);const e=kr(n.firestore,uo),t=Af(e);return VD(t,n._key).then((r=>rM(e,n,r)))}function Et(n){n=kr(n,co);const e=kr(n.firestore,uo),t=Af(e),r=new _2(e);return JD(n._query),LD(t,n._query).then((s=>new ll(e,r,n,s)))}function Ll(n,e,t){n=kr(n,Mt);const r=kr(n.firestore,uo),s=h0(n.converter,e,t),l=ju(r);return Au(r,[t0(l,"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Cn.none())])}function Vt(n,e,t,...r){n=kr(n,Mt);const s=kr(n.firestore,uo),l=ju(s);let c;return c=typeof(e=Ot(e))=="string"||e instanceof Rf?v2(l,"updateDoc",n._key,e,t,r):y2(l,"updateDoc",n._key,e),Au(s,[c.toMutation(n._key,Cn.exists(!0))])}function nM(n){return Au(kr(n.firestore,uo),[new Sf(n._key,Cn.none())])}function Mf(n,e){const t=kr(n.firestore,uo),r=et(n),s=h0(n.converter,e),l=ju(n.firestore);return Au(t,[t0(l,"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,Cn.exists(!1))]).then((()=>r))}function Au(n,e){const t=Af(n);return OD(t,e)}function rM(n,e,t){const r=t.docs.get(e._key),s=new _2(n);return new Ko(n,s,e._key,r,new Fc(t.hasPendingWrites,t.fromCache),e.converter)}function I2(n){return n=kr(n,uo),Af(n),new tM(n,(e=>Au(n,e)))}(function(e,t=!0){BP(Al),dl(new Qo("firestore",((r,{instanceIdentifier:s,options:l})=>{const c=r.getProvider("app").getImmediate(),h=new uo(new UP(r.getProvider("auth-internal")),new HP(c,r.getProvider("app-check-internal")),lN(c,s),c);return l={useFetchStreams:t,...l},h._setSettings(l),h}),"PUBLIC").setMultipleInstances(!0)),Hs(Gb,Qb,e),Hs(Gb,Qb,"esm2020")})();var iM="firebase",sM="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hs(iM,sM,"app");const oM={apiKey:"AIzaSyCf4uRHqqZtYR3ZvlbHF9w59qGuEjlXcW4",authDomain:"kinderbucks-e3e8c.firebaseapp.com",projectId:"kinderbucks-e3e8c",storageBucket:"kinderbucks-e3e8c.firebasestorage.app",messagingSenderId:"18326874439",appId:"1:18326874439:web:ad902e6a1c794b2b3c4462",measurementId:"G-3JMD9HSMC3"},C2=o_(oM),Se=UD(C2),na=LP(C2),qr="users",Fn={ADMIN:"admin",BUSINESS:"business",MEMBER:"member"};function Or(n){return n?Array.isArray(n.roles)?n.roles:Array.isArray(n.role)?n.role:n.role&&typeof n.role=="string"?[n.role]:[Fn.MEMBER]:[]}function aM(n,e){return Or(n).includes(e)}async function lM(n,e,t){const s=(await xR(na,n,e)).user;return await kR(s,{displayName:t}),await Ll(et(Se,qr,s.uid),{uid:s.uid,email:s.email,displayName:t,roles:[Fn.MEMBER],createdAt:Xe(),lastLogin:Xe()}),s}async function cM(n,e){const t=await bR(na,n,e);return await Vt(et(Se,qr,t.user.uid),{lastLogin:Xe()}),t.user}async function uM(){var l;const n=new Wi,t=(await KR(na,n)).user,r=et(Se,qr,t.uid);return(await Kr(r)).exists()?await Vt(r,{lastLogin:Xe(),photoURL:t.photoURL}):await Ll(r,{uid:t.uid,email:t.email,displayName:t.displayName||((l=t.email)==null?void 0:l.split("@")[0]),photoURL:t.photoURL,roles:[Fn.MEMBER],createdAt:Xe(),lastLogin:Xe(),provider:"google"}),t}async function j2(){return TR(na)}async function Rg(n){const e=et(Se,qr,n),t=await Kr(e);return t.exists()?t.data():null}async function dM(n,e){if(!Object.values(Fn).includes(e))throw new Error("Invalid role");const t=et(Se,qr,n),r=await Kr(t);if(r.exists()){const s=r.data();if(Array.isArray(s.roles))await Vt(t,{roles:S2(e),updatedAt:Xe()});else{const l=s.role?[s.role]:[Fn.MEMBER];l.includes(e)||l.push(e),await Vt(t,{roles:l,updatedAt:Xe()})}}}async function hM(n,e){if(!Object.values(Fn).includes(e))throw new Error("Invalid role");const t=et(Se,qr,n),r=await Kr(t);if(r.exists()){const s=r.data(),l=Or(s);if(l.length===1&&l[0]===e){await Vt(t,{roles:[Fn.MEMBER],updatedAt:Xe()});return}if(Array.isArray(s.roles))await Vt(t,{roles:YD(e),updatedAt:Xe()});else{const h=(s.role?[s.role]:[Fn.MEMBER]).filter(d=>d!==e);await Vt(t,{roles:h.length>0?h:[Fn.MEMBER],updatedAt:Xe()})}}}async function fM(n,e){const t=et(Se,qr,n),r=await Kr(t);if(r.exists()){const s=r.data(),l=Or(s),c=l.includes(Fn.BUSINESS)?l:[...l,Fn.BUSINESS];await Vt(t,{roles:c,businessCode:e,updatedAt:Xe()})}}async function mM(){return(await Et(ot(Se,qr))).docs.map(e=>({id:e.id,...e.data()}))}function pM(n){return ER(na,n)}async function A2(n){const e=await Rg(n);if(!e)return{exists:!1,canDelete:!1,reason:"User not found"};const t=nn(ot(Se,"checkins"),_n("memberId","==",n)),s=(await Et(t)).size,l=nn(ot(Se,"exchanges"),_n("userId","==",n)),h=(await Et(l)).size,d=!!e.businessCode,m=s>0||h>0||d;return{exists:!0,uid:n,displayName:e.displayName,email:e.email,roles:Or(e),checkinCount:s,exchangeCount:h,isBusinessOwner:d,businessCode:e.businessCode,hasData:m,canSafeDelete:!m,reason:m?`Has ${s} check-ins, ${h} exchanges${d?", is business owner":""}`:"No associated data"}}async function gM(n,e=null,t=!1){const r=await A2(n);if(!r.exists)throw new Error("User not found");if(r.hasData&&!t)throw new Error(`Cannot delete: ${r.reason}. Use force=true to soft delete anyway.`);const s=et(Se,qr,n);return await Vt(s,{isDeleted:!0,deletedAt:Xe(),deletedBy:e}),{success:!0,wasForced:r.hasData&&t}}async function yM(n){const e=et(Se,qr,n);await Vt(e,{isDeleted:!1,deletedAt:null,deletedBy:null,restoredAt:Xe()})}async function vM(n=!1){const t=(await Et(ot(Se,qr))).docs.map(r=>({id:r.id,...r.data()}));return n?t:t.filter(r=>!r.isDeleted)}async function xM(){return(await vM(!0)).filter(e=>e.isDeleted)}const R2=C.createContext(null);function bM({children:n}){const[e,t]=C.useState(null),[r,s]=C.useState(null),[l,c]=C.useState(!0);C.useEffect(()=>{const T=pM(async P=>{if(t(P),P){const M=await Rg(P.uid);s(M)}else s(null);c(!1)});return()=>T()},[]);const h=Or(r),d=!!e,m=h.includes(Fn.ADMIN),g=h.includes(Fn.BUSINESS),y=h.includes(Fn.MEMBER)||d,S={user:e,profile:r,roles:h,loading:l,isAuthenticated:d,isAdmin:m,isBusiness:g,isMember:y,hasRole:T=>aM(r,T),hasAnyRole:(...T)=>T.some(P=>h.includes(P)),refreshProfile:async()=>{if(e){const T=await Rg(e.uid);s(T)}}};return o.jsx(R2.Provider,{value:S,children:n})}function Gr(){const n=C.useContext(R2);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n}/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wM=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),kM=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),Jb=n=>{const e=kM(n);return e.charAt(0).toUpperCase()+e.slice(1)},P2=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),_M=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var SM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EM=C.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:l,iconNode:c,...h},d)=>C.createElement("svg",{ref:d,...SM,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:P2("lucide",s),...!l&&!_M(h)&&{"aria-hidden":"true"},...h},[...c.map(([m,g])=>C.createElement(m,g)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=(n,e)=>{const t=C.forwardRef(({className:r,...s},l)=>C.createElement(EM,{ref:l,iconNode:e,className:P2(`lucide-${wM(Jb(n))}`,`lucide-${n}`,r),...s}));return t.displayName=Jb(n),t};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TM=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],N2=ce("archive",TM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IM=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],Zb=ce("arrow-down-right",IM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CM=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],D2=ce("arrow-left",CM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jM=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],Vf=ce("arrow-right-left",jM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AM=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Pg=ce("arrow-right",AM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RM=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],ew=ce("arrow-up-right",RM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PM=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],_r=ce("award",PM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],Yi=ce("banknote",NM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DM=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],tw=ce("book-open",DM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MM=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],f0=ce("briefcase",MM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VM=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],LM=ce("building-2",VM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Lf=ce("calendar",OM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BM=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],zM=ce("camera",BM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FM=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],m0=ce("chart-column",FM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UM=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],$i=ce("check",UM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WM=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],$M=ce("chevron-down",WM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HM=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],KM=ce("chevron-left",HM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qM=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],GM=ce("chevron-up",qM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Gs=ce("circle-alert",QM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YM=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Un=ce("circle-check-big",YM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],M2=ce("circle-x",XM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JM=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],vr=ce("clock",JM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZM=[["path",{d:"M6 16.326A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 .5 8.973",key:"1cez44"}],["path",{d:"m13 12-3 5h4l-3 5",key:"1t22er"}]],Mp=ce("cloud-lightning",ZM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]],Ui=ce("cloud-rain",e3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M8 15h.01",key:"a7atzg"}],["path",{d:"M8 19h.01",key:"puxtts"}],["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M12 21h.01",key:"h35vbk"}],["path",{d:"M16 15h.01",key:"rnfrdf"}],["path",{d:"M16 19h.01",key:"1vcnzz"}]],qa=ce("cloud-snow",t3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],oh=ce("cloud",n3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],i3=ce("coins",r3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],V2=ce("compass",s3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],p0=ce("copy",o3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Ng=ce("credit-card",a3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=[["path",{d:"M10.2 18H4.774a1.5 1.5 0 0 1-1.352-.97 11 11 0 0 1 .132-6.487",key:"14kkz9"}],["path",{d:"M18 10.2V4.774a1.5 1.5 0 0 0-.97-1.352 11 11 0 0 0-6.486.132",key:"1g7v07"}],["path",{d:"M18 5a4 3 0 0 1 4 3 2 2 0 0 1-2 2 10 10 0 0 0-5.139 1.42",key:"ratg6b"}],["path",{d:"M5 18a3 4 0 0 0 3 4 2 2 0 0 0 2-2 10 10 0 0 1 1.42-5.14",key:"4454f0"}],["path",{d:"M8.709 2.554a10 10 0 0 0-6.155 6.155 1.5 1.5 0 0 0 .676 1.626l9.807 5.42a2 2 0 0 0 2.718-2.718l-5.42-9.807a1.5 1.5 0 0 0-1.626-.676",key:"qmemie"}]],c3=ce("croissant",l3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],sr=ce("crown",u3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Gh=ce("dollar-sign",d3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],L2=ce("download",h3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],m3=ce("droplets",f3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],g3=ce("external-link",p3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],v3=ce("eye-off",y3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],O2=ce("eye",x3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],Yc=ce("gift",b3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],k3=ce("house",w3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],nw=ce("info",_3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],E3=ce("layout-dashboard",S3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],I3=ce("lightbulb",T3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],g0=ce("loader-circle",C3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],A3=ce("lock",j3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],wl=ce("log-in",R3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Dg=ce("log-out",P3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],B2=ce("mail",N3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],kl=ce("map-pin",D3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M3=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],V3=ce("megaphone",M3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L3=[["path",{d:"M5 12h14",key:"1ays0h"}]],O3=ce("minus",L3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B3=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],z3=ce("navigation",B3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F3=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],rw=ce("package",F3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U3=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],y0=ce("palette",U3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W3=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],$3=ce("percent",W3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H3=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],K3=ce("phone",H3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q3=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],qo=ce("plus",q3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G3=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],z2=ce("printer",G3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q3=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],Ur=ce("qr-code",Q3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y3=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],X3=ce("refresh-cw",Y3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J3=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],F2=ce("rotate-ccw",J3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z3=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],eV=ce("save",Z3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tV=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Of=ce("search",tV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nV=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Qh=ce("send",nV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rV=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],iV=ce("share-2",rV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sV=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],U2=ce("shield-check",sV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oV=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Yh=ce("shield",oV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aV=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],Bf=ce("shopping-bag",aV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lV=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],Mg=ce("smartphone",lV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cV=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],v0=ce("sparkles",cV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uV=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],dV=ce("square-check-big",uV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hV=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],fV=ce("square",hV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mV=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Sr=ce("star",mV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pV=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],Lt=ce("store",pV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gV=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],iw=ce("sun",gV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yV=[["path",{d:"M12 2v8",key:"1q4o3n"}],["path",{d:"m4.93 10.93 1.41 1.41",key:"2a7f42"}],["path",{d:"M2 18h2",key:"j10viu"}],["path",{d:"M20 18h2",key:"wocana"}],["path",{d:"m19.07 10.93-1.41 1.41",key:"15zs5n"}],["path",{d:"M22 22H2",key:"19qnx5"}],["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}],["path",{d:"M16 18a4 4 0 0 0-8 0",key:"1lzouq"}]],vV=ce("sunrise",yV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xV=[["path",{d:"M12 10V2",key:"16sf7g"}],["path",{d:"m4.93 10.93 1.41 1.41",key:"2a7f42"}],["path",{d:"M2 18h2",key:"j10viu"}],["path",{d:"M20 18h2",key:"wocana"}],["path",{d:"m19.07 10.93-1.41 1.41",key:"15zs5n"}],["path",{d:"M22 22H2",key:"19qnx5"}],["path",{d:"m16 6-4 4-4-4",key:"6wukr"}],["path",{d:"M16 18a4 4 0 0 0-8 0",key:"1lzouq"}]],bV=ce("sunset",xV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wV=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Nc=ce("tag",wV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],hn=ce("target",kV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _V=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],SV=ce("toggle-left",_V);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EV=[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],TV=ce("toggle-right",EV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IV=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],_l=ce("trash-2",IV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CV=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],to=ce("trending-up",CV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jV=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],W2=ce("triangle-alert",jV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AV=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],RV=ce("trophy",AV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PV=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Xh=ce("user-plus",PV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NV=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],cl=ce("user",NV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DV=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],$r=ce("users",DV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MV=[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]],x0=ce("utensils-crossed",MV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VV=[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]],LV=ce("wind",VV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OV=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],b0=ce("x",OV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BV=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],zV=ce("zap",BV);function Mr({children:n,allowedRoles:e=[]}){const{user:t,roles:r,loading:s,isAuthenticated:l}=Gr(),c=Er();return s?o.jsxs("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"var(--kb-cream)"},children:[o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx(g0,{size:48,color:"var(--kb-navy)",style:{animation:"spin 1s linear infinite"}}),o.jsx("p",{style:{marginTop:"1rem",color:"var(--kb-gray-500)"},children:"Loading..."})]}),o.jsx("style",{children:`
          @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
          }
        `})]}):l?e.length>0&&!e.some(d=>r.includes(d))?o.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"var(--kb-cream)",padding:"2rem"},children:o.jsxs("div",{className:"card",style:{maxWidth:"400px",textAlign:"center",padding:"2rem"},children:[o.jsx("h2",{style:{color:"#dc2626",marginBottom:"1rem"},children:"Access Denied"}),o.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem"},children:"You don't have permission to access this page."}),o.jsx("a",{href:"/",className:"btn btn-primary",children:"Go Home"})]})}):n:o.jsx(nj,{to:"/login",state:{from:c},replace:!0})}const w0=C.createContext({});function k0(n){const e=C.useRef(null);return e.current===null&&(e.current=n()),e.current}const $2=typeof window<"u",H2=$2?C.useLayoutEffect:C.useEffect,zf=C.createContext(null);function _0(n,e){n.indexOf(e)===-1&&n.push(e)}function S0(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const _i=(n,e,t)=>t>e?e:t<n?n:t;let E0=()=>{};const ss={},K2=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function q2(n){return typeof n=="object"&&n!==null}const G2=n=>/^0[^.\s]+$/u.test(n);function T0(n){let e;return()=>(e===void 0&&(e=n()),e)}const xr=n=>n,FV=(n,e)=>t=>e(n(t)),Ru=(...n)=>n.reduce(FV),du=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r};class I0{constructor(){this.subscriptions=[]}add(e){return _0(this.subscriptions,e),()=>S0(this.subscriptions,e)}notify(e,t,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,t,r);else for(let l=0;l<s;l++){const c=this.subscriptions[l];c&&c(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Xi=n=>n*1e3,yr=n=>n/1e3;function Q2(n,e){return e?n*(1e3/e):0}const Y2=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,UV=1e-7,WV=12;function $V(n,e,t,r,s){let l,c,h=0;do c=e+(t-e)/2,l=Y2(c,r,s)-n,l>0?t=c:e=c;while(Math.abs(l)>UV&&++h<WV);return c}function Pu(n,e,t,r){if(n===e&&t===r)return xr;const s=l=>$V(l,0,1,n,t);return l=>l===0||l===1?l:Y2(s(l),e,r)}const X2=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,J2=n=>e=>1-n(1-e),Z2=Pu(.33,1.53,.69,.99),C0=J2(Z2),eE=X2(C0),tE=n=>(n*=2)<1?.5*C0(n):.5*(2-Math.pow(2,-10*(n-1))),j0=n=>1-Math.sin(Math.acos(n)),nE=J2(j0),rE=X2(j0),HV=Pu(.42,0,1,1),KV=Pu(0,0,.58,1),iE=Pu(.42,0,.58,1),qV=n=>Array.isArray(n)&&typeof n[0]!="number",sE=n=>Array.isArray(n)&&typeof n[0]=="number",GV={linear:xr,easeIn:HV,easeInOut:iE,easeOut:KV,circIn:j0,circInOut:rE,circOut:nE,backIn:C0,backInOut:eE,backOut:Z2,anticipate:tE},QV=n=>typeof n=="string",sw=n=>{if(sE(n)){E0(n.length===4);const[e,t,r,s]=n;return Pu(e,t,r,s)}else if(QV(n))return GV[n];return n},ah=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function YV(n,e){let t=new Set,r=new Set,s=!1,l=!1;const c=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1};function d(g){c.has(g)&&(m.schedule(g),n()),g(h)}const m={schedule:(g,y=!1,x=!1)=>{const k=x&&s?t:r;return y&&c.add(g),k.has(g)||k.add(g),g},cancel:g=>{r.delete(g),c.delete(g)},process:g=>{if(h=g,s){l=!0;return}s=!0,[t,r]=[r,t],t.forEach(d),t.clear(),s=!1,l&&(l=!1,m.process(g))}};return m}const XV=40;function oE(n,e){let t=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},l=()=>t=!0,c=ah.reduce((N,F)=>(N[F]=YV(l),N),{}),{setup:h,read:d,resolveKeyframes:m,preUpdate:g,update:y,preRender:x,render:E,postRender:k}=c,S=()=>{const N=ss.useManualTiming?s.timestamp:performance.now();t=!1,ss.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(N-s.timestamp,XV),1)),s.timestamp=N,s.isProcessing=!0,h.process(s),d.process(s),m.process(s),g.process(s),y.process(s),x.process(s),E.process(s),k.process(s),s.isProcessing=!1,t&&e&&(r=!1,n(S))},T=()=>{t=!0,r=!0,s.isProcessing||n(S)};return{schedule:ah.reduce((N,F)=>{const $=c[F];return N[F]=(K,A=!1,j=!1)=>(t||T(),$.schedule(K,A,j)),N},{}),cancel:N=>{for(let F=0;F<ah.length;F++)c[ah[F]].cancel(N)},state:s,steps:c}}const{schedule:vt,cancel:no,state:ln,steps:Vp}=oE(typeof requestAnimationFrame<"u"?requestAnimationFrame:xr,!0);let Eh;function JV(){Eh=void 0}const Tn={now:()=>(Eh===void 0&&Tn.set(ln.isProcessing||ss.useManualTiming?ln.timestamp:performance.now()),Eh),set:n=>{Eh=n,queueMicrotask(JV)}},aE=n=>e=>typeof e=="string"&&e.startsWith(n),lE=aE("--"),ZV=aE("var(--"),A0=n=>ZV(n)?e6.test(n.split("/*")[0].trim()):!1,e6=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function ow(n){return typeof n!="string"?!1:n.split("/*")[0].includes("var(--")}const Ol={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},hu={...Ol,transform:n=>_i(0,1,n)},lh={...Ol,default:1},Xc=n=>Math.round(n*1e5)/1e5,R0=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function t6(n){return n==null}const n6=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,P0=(n,e)=>t=>!!(typeof t=="string"&&n6.test(t)&&t.startsWith(n)||e&&!t6(t)&&Object.prototype.hasOwnProperty.call(t,e)),cE=(n,e,t)=>r=>{if(typeof r!="string")return r;const[s,l,c,h]=r.match(R0);return{[n]:parseFloat(s),[e]:parseFloat(l),[t]:parseFloat(c),alpha:h!==void 0?parseFloat(h):1}},r6=n=>_i(0,255,n),Lp={...Ol,transform:n=>Math.round(r6(n))},$o={test:P0("rgb","red"),parse:cE("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+Lp.transform(n)+", "+Lp.transform(e)+", "+Lp.transform(t)+", "+Xc(hu.transform(r))+")"};function i6(n){let e="",t="",r="",s="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),s=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),s=n.substring(4,5),e+=e,t+=t,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Vg={test:P0("#"),parse:i6,transform:$o.transform},Nu=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Ls=Nu("deg"),wi=Nu("%"),be=Nu("px"),s6=Nu("vh"),o6=Nu("vw"),aw={...wi,parse:n=>wi.parse(n)/100,transform:n=>wi.transform(n*100)},Ja={test:P0("hsl","hue"),parse:cE("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+wi.transform(Xc(e))+", "+wi.transform(Xc(t))+", "+Xc(hu.transform(r))+")"},Ut={test:n=>$o.test(n)||Vg.test(n)||Ja.test(n),parse:n=>$o.test(n)?$o.parse(n):Ja.test(n)?Ja.parse(n):Vg.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?$o.transform(n):Ja.transform(n),getAnimatableNone:n=>{const e=Ut.parse(n);return e.alpha=0,Ut.transform(e)}},a6=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function l6(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(R0))==null?void 0:e.length)||0)+(((t=n.match(a6))==null?void 0:t.length)||0)>0}const uE="number",dE="color",c6="var",u6="var(",lw="${}",d6=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function fu(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},s=[];let l=0;const h=e.replace(d6,d=>(Ut.test(d)?(r.color.push(l),s.push(dE),t.push(Ut.parse(d))):d.startsWith(u6)?(r.var.push(l),s.push(c6),t.push(d)):(r.number.push(l),s.push(uE),t.push(parseFloat(d))),++l,lw)).split(lw);return{values:t,split:h,indexes:r,types:s}}function hE(n){return fu(n).values}function fE(n){const{split:e,types:t}=fu(n),r=e.length;return s=>{let l="";for(let c=0;c<r;c++)if(l+=e[c],s[c]!==void 0){const h=t[c];h===uE?l+=Xc(s[c]):h===dE?l+=Ut.transform(s[c]):l+=s[c]}return l}}const h6=n=>typeof n=="number"?0:Ut.test(n)?Ut.getAnimatableNone(n):n;function f6(n){const e=hE(n);return fE(n)(e.map(h6))}const ro={test:l6,parse:hE,createTransformer:fE,getAnimatableNone:f6};function Op(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function m6({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let s=0,l=0,c=0;if(!e)s=l=c=t;else{const h=t<.5?t*(1+e):t+e-t*e,d=2*t-h;s=Op(d,h,n+1/3),l=Op(d,h,n),c=Op(d,h,n-1/3)}return{red:Math.round(s*255),green:Math.round(l*255),blue:Math.round(c*255),alpha:r}}function Jh(n,e){return t=>t>0?e:n}const St=(n,e,t)=>n+(e-n)*t,Bp=(n,e,t)=>{const r=n*n,s=t*(e*e-r)+r;return s<0?0:Math.sqrt(s)},p6=[Vg,$o,Ja],g6=n=>p6.find(e=>e.test(n));function cw(n){const e=g6(n);if(!e)return!1;let t=e.parse(n);return e===Ja&&(t=m6(t)),t}const uw=(n,e)=>{const t=cw(n),r=cw(e);if(!t||!r)return Jh(n,e);const s={...t};return l=>(s.red=Bp(t.red,r.red,l),s.green=Bp(t.green,r.green,l),s.blue=Bp(t.blue,r.blue,l),s.alpha=St(t.alpha,r.alpha,l),$o.transform(s))},Lg=new Set(["none","hidden"]);function y6(n,e){return Lg.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function v6(n,e){return t=>St(n,e,t)}function N0(n){return typeof n=="number"?v6:typeof n=="string"?A0(n)?Jh:Ut.test(n)?uw:w6:Array.isArray(n)?mE:typeof n=="object"?Ut.test(n)?uw:x6:Jh}function mE(n,e){const t=[...n],r=t.length,s=n.map((l,c)=>N0(l)(l,e[c]));return l=>{for(let c=0;c<r;c++)t[c]=s[c](l);return t}}function x6(n,e){const t={...n,...e},r={};for(const s in t)n[s]!==void 0&&e[s]!==void 0&&(r[s]=N0(n[s])(n[s],e[s]));return s=>{for(const l in r)t[l]=r[l](s);return t}}function b6(n,e){const t=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const l=e.types[s],c=n.indexes[l][r[l]],h=n.values[c]??0;t[s]=h,r[l]++}return t}const w6=(n,e)=>{const t=ro.createTransformer(e),r=fu(n),s=fu(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?Lg.has(n)&&!s.values.length||Lg.has(e)&&!r.values.length?y6(n,e):Ru(mE(b6(r,s),s.values),t):Jh(n,e)};function pE(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?St(n,e,t):N0(n)(n,e)}const k6=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>vt.update(e,t),stop:()=>no(e),now:()=>ln.isProcessing?ln.timestamp:Tn.now()}},gE=(n,e,t=10)=>{let r="";const s=Math.max(Math.round(e/t),2);for(let l=0;l<s;l++)r+=Math.round(n(l/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Zh=2e4;function D0(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<Zh;)e+=t,r=n.next(e);return e>=Zh?1/0:e}function _6(n,e=100,t){const r=t({...n,keyframes:[0,e]}),s=Math.min(D0(r),Zh);return{type:"keyframes",ease:l=>r.next(s*l).value/e,duration:yr(s)}}const S6=5;function yE(n,e,t){const r=Math.max(e-S6,0);return Q2(t-n(r),e-r)}const Rt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},zp=.001;function E6({duration:n=Rt.duration,bounce:e=Rt.bounce,velocity:t=Rt.velocity,mass:r=Rt.mass}){let s,l,c=1-e;c=_i(Rt.minDamping,Rt.maxDamping,c),n=_i(Rt.minDuration,Rt.maxDuration,yr(n)),c<1?(s=m=>{const g=m*c,y=g*n,x=g-t,E=Og(m,c),k=Math.exp(-y);return zp-x/E*k},l=m=>{const y=m*c*n,x=y*t+t,E=Math.pow(c,2)*Math.pow(m,2)*n,k=Math.exp(-y),S=Og(Math.pow(m,2),c);return(-s(m)+zp>0?-1:1)*((x-E)*k)/S}):(s=m=>{const g=Math.exp(-m*n),y=(m-t)*n+1;return-zp+g*y},l=m=>{const g=Math.exp(-m*n),y=(t-m)*(n*n);return g*y});const h=5/n,d=I6(s,l,h);if(n=Xi(n),isNaN(d))return{stiffness:Rt.stiffness,damping:Rt.damping,duration:n};{const m=Math.pow(d,2)*r;return{stiffness:m,damping:c*2*Math.sqrt(r*m),duration:n}}}const T6=12;function I6(n,e,t){let r=t;for(let s=1;s<T6;s++)r=r-n(r)/e(r);return r}function Og(n,e){return n*Math.sqrt(1-e*e)}const C6=["duration","bounce"],j6=["stiffness","damping","mass"];function dw(n,e){return e.some(t=>n[t]!==void 0)}function A6(n){let e={velocity:Rt.velocity,stiffness:Rt.stiffness,damping:Rt.damping,mass:Rt.mass,isResolvedFromDuration:!1,...n};if(!dw(n,j6)&&dw(n,C6))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),s=r*r,l=2*_i(.05,1,1-(n.bounce||0))*Math.sqrt(s);e={...e,mass:Rt.mass,stiffness:s,damping:l}}else{const t=E6(n);e={...e,...t,mass:Rt.mass},e.isResolvedFromDuration=!0}return e}function ef(n=Rt.visualDuration,e=Rt.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:s}=t;const l=t.keyframes[0],c=t.keyframes[t.keyframes.length-1],h={done:!1,value:l},{stiffness:d,damping:m,mass:g,duration:y,velocity:x,isResolvedFromDuration:E}=A6({...t,velocity:-yr(t.velocity||0)}),k=x||0,S=m/(2*Math.sqrt(d*g)),T=c-l,P=yr(Math.sqrt(d/g)),M=Math.abs(T)<5;r||(r=M?Rt.restSpeed.granular:Rt.restSpeed.default),s||(s=M?Rt.restDelta.granular:Rt.restDelta.default);let N;if(S<1){const $=Og(P,S);N=K=>{const A=Math.exp(-S*P*K);return c-A*((k+S*P*T)/$*Math.sin($*K)+T*Math.cos($*K))}}else if(S===1)N=$=>c-Math.exp(-P*$)*(T+(k+P*T)*$);else{const $=P*Math.sqrt(S*S-1);N=K=>{const A=Math.exp(-S*P*K),j=Math.min($*K,300);return c-A*((k+S*P*T)*Math.sinh(j)+$*T*Math.cosh(j))/$}}const F={calculatedDuration:E&&y||null,next:$=>{const K=N($);if(E)h.done=$>=y;else{let A=$===0?k:0;S<1&&(A=$===0?Xi(k):yE(N,$,K));const j=Math.abs(A)<=r,D=Math.abs(c-K)<=s;h.done=j&&D}return h.value=h.done?c:K,h},toString:()=>{const $=Math.min(D0(F),Zh),K=gE(A=>F.next($*A).value,$,30);return $+"ms "+K},toTransition:()=>{}};return F}ef.applyToOptions=n=>{const e=_6(n,100,ef);return n.ease=e.ease,n.duration=Xi(e.duration),n.type="keyframes",n};function Bg({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:l=500,modifyTarget:c,min:h,max:d,restDelta:m=.5,restSpeed:g}){const y=n[0],x={done:!1,value:y},E=j=>h!==void 0&&j<h||d!==void 0&&j>d,k=j=>h===void 0?d:d===void 0||Math.abs(h-j)<Math.abs(d-j)?h:d;let S=t*e;const T=y+S,P=c===void 0?T:c(T);P!==T&&(S=P-y);const M=j=>-S*Math.exp(-j/r),N=j=>P+M(j),F=j=>{const D=M(j),L=N(j);x.done=Math.abs(D)<=m,x.value=x.done?P:L};let $,K;const A=j=>{E(x.value)&&($=j,K=ef({keyframes:[x.value,k(x.value)],velocity:yE(N,j,x.value),damping:s,stiffness:l,restDelta:m,restSpeed:g}))};return A(0),{calculatedDuration:null,next:j=>{let D=!1;return!K&&$===void 0&&(D=!0,F(j),A(j)),$!==void 0&&j>=$?K.next(j-$):(!D&&F(j),x)}}}function R6(n,e,t){const r=[],s=t||ss.mix||pE,l=n.length-1;for(let c=0;c<l;c++){let h=s(n[c],n[c+1]);if(e){const d=Array.isArray(e)?e[c]||xr:e;h=Ru(d,h)}r.push(h)}return r}function P6(n,e,{clamp:t=!0,ease:r,mixer:s}={}){const l=n.length;if(E0(l===e.length),l===1)return()=>e[0];if(l===2&&e[0]===e[1])return()=>e[1];const c=n[0]===n[1];n[0]>n[l-1]&&(n=[...n].reverse(),e=[...e].reverse());const h=R6(e,r,s),d=h.length,m=g=>{if(c&&g<n[0])return e[0];let y=0;if(d>1)for(;y<n.length-2&&!(g<n[y+1]);y++);const x=du(n[y],n[y+1],g);return h[y](x)};return t?g=>m(_i(n[0],n[l-1],g)):m}function N6(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const s=du(0,e,r);n.push(St(t,1,s))}}function D6(n){const e=[0];return N6(e,n.length-1),e}function M6(n,e){return n.map(t=>t*e)}function V6(n,e){return n.map(()=>e||iE).splice(0,n.length-1)}function Jc({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const s=qV(r)?r.map(sw):sw(r),l={done:!1,value:e[0]},c=M6(t&&t.length===e.length?t:D6(e),n),h=P6(c,e,{ease:Array.isArray(s)?s:V6(e,s)});return{calculatedDuration:n,next:d=>(l.value=h(d),l.done=d>=n,l)}}const L6=n=>n!==null;function M0(n,{repeat:e,repeatType:t="loop"},r,s=1){const l=n.filter(L6),h=s<0||e&&t!=="loop"&&e%2===1?0:l.length-1;return!h||r===void 0?l[h]:r}const O6={decay:Bg,inertia:Bg,tween:Jc,keyframes:Jc,spring:ef};function vE(n){typeof n.type=="string"&&(n.type=O6[n.type])}class V0{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const B6=n=>n/100;class L0 extends V0{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:t}=this.options;t&&t.updatedAt!==Tn.now()&&this.tick(Tn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;vE(e);const{type:t=Jc,repeat:r=0,repeatDelay:s=0,repeatType:l,velocity:c=0}=e;let{keyframes:h}=e;const d=t||Jc;d!==Jc&&typeof h[0]!="number"&&(this.mixKeyframes=Ru(B6,pE(h[0],h[1])),h=[0,100]);const m=d({...e,keyframes:h});l==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...h].reverse(),velocity:-c})),m.calculatedDuration===null&&(m.calculatedDuration=D0(m));const{calculatedDuration:g}=m;this.calculatedDuration=g,this.resolvedDuration=g+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=m}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:r,totalDuration:s,mixKeyframes:l,mirroredGenerator:c,resolvedDuration:h,calculatedDuration:d}=this;if(this.startTime===null)return r.next(0);const{delay:m=0,keyframes:g,repeat:y,repeatType:x,repeatDelay:E,type:k,onUpdate:S,finalKeyframe:T}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const P=this.currentTime-m*(this.playbackSpeed>=0?1:-1),M=this.playbackSpeed>=0?P<0:P>s;this.currentTime=Math.max(P,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let N=this.currentTime,F=r;if(y){const j=Math.min(this.currentTime,s)/h;let D=Math.floor(j),L=j%1;!L&&j>=1&&(L=1),L===1&&D--,D=Math.min(D,y+1),!!(D%2)&&(x==="reverse"?(L=1-L,E&&(L-=E/h)):x==="mirror"&&(F=c)),N=_i(0,1,L)*h}const $=M?{done:!1,value:g[0]}:F.next(N);l&&($.value=l($.value));let{done:K}=$;!M&&d!==null&&(K=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const A=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&K);return A&&k!==Bg&&($.value=M0(g,this.options,T,this.speed)),S&&S($.value),A&&this.finish(),$}then(e,t){return this.finished.then(e,t)}get duration(){return yr(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+yr(e)}get time(){return yr(this.currentTime)}set time(e){var t;e=Xi(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(t=this.driver)==null||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Tn.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=yr(this.currentTime))}play(){var s,l;if(this.isStopped)return;const{driver:e=k6,startTime:t}=this.options;this.driver||(this.driver=e(c=>this.tick(c))),(l=(s=this.options).onPlay)==null||l.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=t??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Tn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",(t=(e=this.options).onComplete)==null||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(t=(e=this.options).onCancel)==null||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(t=this.driver)==null||t.stop(),e.observe(this)}}function z6(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const Ho=n=>n*180/Math.PI,zg=n=>{const e=Ho(Math.atan2(n[1],n[0]));return Fg(e)},F6={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:zg,rotateZ:zg,skewX:n=>Ho(Math.atan(n[1])),skewY:n=>Ho(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},Fg=n=>(n=n%360,n<0&&(n+=360),n),hw=zg,fw=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),mw=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),U6={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:fw,scaleY:mw,scale:n=>(fw(n)+mw(n))/2,rotateX:n=>Fg(Ho(Math.atan2(n[6],n[5]))),rotateY:n=>Fg(Ho(Math.atan2(-n[2],n[0]))),rotateZ:hw,rotate:hw,skewX:n=>Ho(Math.atan(n[4])),skewY:n=>Ho(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function Ug(n){return n.includes("scale")?1:0}function Wg(n,e){if(!n||n==="none")return Ug(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(t)r=U6,s=t;else{const h=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=F6,s=h}if(!s)return Ug(e);const l=r[e],c=s[1].split(",").map($6);return typeof l=="function"?l(c):c[l]}const W6=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return Wg(t,e)};function $6(n){return parseFloat(n.trim())}const Bl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],zl=new Set(Bl),pw=n=>n===Ol||n===be,H6=new Set(["x","y","z"]),K6=Bl.filter(n=>!H6.has(n));function q6(n){const e=[];return K6.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const Us={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>Wg(e,"x"),y:(n,{transform:e})=>Wg(e,"y")};Us.translateX=Us.x;Us.translateY=Us.y;const Go=new Set;let $g=!1,Hg=!1,Kg=!1;function xE(){if(Hg){const n=Array.from(Go).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const s=q6(r);s.length&&(t.set(r,s),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=t.get(r);s&&s.forEach(([l,c])=>{var h;(h=r.getValue(l))==null||h.set(c)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Hg=!1,$g=!1,Go.forEach(n=>n.complete(Kg)),Go.clear()}function bE(){Go.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Hg=!0)})}function G6(){Kg=!0,bE(),xE(),Kg=!1}class O0{constructor(e,t,r,s,l,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=s,this.element=l,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(Go.add(this),$g||($g=!0,vt.read(bE),vt.resolveKeyframes(xE))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:s}=this;if(e[0]===null){const l=s==null?void 0:s.get(),c=e[e.length-1];if(l!==void 0)e[0]=l;else if(r&&t){const h=r.readValue(t,c);h!=null&&(e[0]=h)}e[0]===void 0&&(e[0]=c),s&&l===void 0&&s.set(e[0])}z6(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Go.delete(this)}cancel(){this.state==="scheduled"&&(Go.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Q6=n=>n.startsWith("--");function Y6(n,e,t){Q6(e)?n.style.setProperty(e,t):n.style[e]=t}const X6=T0(()=>window.ScrollTimeline!==void 0),J6={};function Z6(n,e){const t=T0(n);return()=>J6[e]??t()}const wE=Z6(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Uc=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,gw={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Uc([0,.65,.55,1]),circOut:Uc([.55,0,1,.45]),backIn:Uc([.31,.01,.66,-.59]),backOut:Uc([.33,1.53,.69,.99])};function kE(n,e){if(n)return typeof n=="function"?wE()?gE(n,e):"ease-out":sE(n)?Uc(n):Array.isArray(n)?n.map(t=>kE(t,e)||gw.easeOut):gw[n]}function eL(n,e,t,{delay:r=0,duration:s=300,repeat:l=0,repeatType:c="loop",ease:h="easeOut",times:d}={},m=void 0){const g={[e]:t};d&&(g.offset=d);const y=kE(h,s);Array.isArray(y)&&(g.easing=y);const x={delay:r,duration:s,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:l+1,direction:c==="reverse"?"alternate":"normal"};return m&&(x.pseudoElement=m),n.animate(g,x)}function _E(n){return typeof n=="function"&&"applyToOptions"in n}function tL({type:n,...e}){return _E(n)&&wE()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class nL extends V0{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:t,name:r,keyframes:s,pseudoElement:l,allowFlatten:c=!1,finalKeyframe:h,onComplete:d}=e;this.isPseudoElement=!!l,this.allowFlatten=c,this.options=e,E0(typeof e.type!="string");const m=tL(e);this.animation=eL(t,r,s,m,l),m.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!l){const g=M0(s,this.options,h,this.speed);this.updateMotionValue?this.updateMotionValue(g):Y6(t,r,g),this.animation.cancel()}d==null||d(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;(t=(e=this.animation).finish)==null||t.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(t=(e=this.animation).commitStyles)==null||t.call(e)}get duration(){var t,r;const e=((r=(t=this.animation.effect)==null?void 0:t.getComputedTiming)==null?void 0:r.call(t).duration)||0;return yr(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+yr(e)}get time(){return yr(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=Xi(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&X6()?(this.animation.timeline=e,xr):t(this)}}const SE={anticipate:tE,backInOut:eE,circInOut:rE};function rL(n){return n in SE}function iL(n){typeof n.ease=="string"&&rL(n.ease)&&(n.ease=SE[n.ease])}const Fp=10;class sL extends nL{constructor(e){iL(e),vE(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:r,onComplete:s,element:l,...c}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const h=new L0({...c,autoplay:!1}),d=Math.max(Fp,Tn.now()-this.startTime),m=_i(0,Fp,d-Fp);t.setWithVelocity(h.sample(Math.max(0,d-m)).value,h.sample(d).value,m),h.stop()}}const yw=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(ro.test(n)||n==="0")&&!n.startsWith("url("));function oL(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function aL(n,e,t,r){const s=n[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const l=n[n.length-1],c=yw(s,e),h=yw(l,e);return!c||!h?!1:oL(n)||(t==="spring"||_E(t))&&r}function qg(n){n.duration=0,n.type="keyframes"}const lL=new Set(["opacity","clipPath","filter","transform"]),cL=T0(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function uL(n){var g;const{motionValue:e,name:t,repeatDelay:r,repeatType:s,damping:l,type:c}=n;if(!(((g=e==null?void 0:e.owner)==null?void 0:g.current)instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:m}=e.owner.getProps();return cL()&&t&&lL.has(t)&&(t!=="transform"||!m)&&!d&&!r&&s!=="mirror"&&l!==0&&c!=="inertia"}const dL=40;class hL extends V0{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:s=0,repeatDelay:l=0,repeatType:c="loop",keyframes:h,name:d,motionValue:m,element:g,...y}){var k;super(),this.stop=()=>{var S,T;this._animation&&(this._animation.stop(),(S=this.stopTimeline)==null||S.call(this)),(T=this.keyframeResolver)==null||T.cancel()},this.createdAt=Tn.now();const x={autoplay:e,delay:t,type:r,repeat:s,repeatDelay:l,repeatType:c,name:d,motionValue:m,element:g,...y},E=(g==null?void 0:g.KeyframeResolver)||O0;this.keyframeResolver=new E(h,(S,T,P)=>this.onKeyframesResolved(S,T,x,!P),d,m,g),(k=this.keyframeResolver)==null||k.scheduleResolve()}onKeyframesResolved(e,t,r,s){var T,P;this.keyframeResolver=void 0;const{name:l,type:c,velocity:h,delay:d,isHandoff:m,onUpdate:g}=r;this.resolvedAt=Tn.now(),aL(e,l,c,h)||((ss.instantAnimations||!d)&&(g==null||g(M0(e,r,t))),e[0]=e[e.length-1],qg(r),r.repeat=0);const x={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>dL?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...r,keyframes:e},E=!m&&uL(x),k=(P=(T=x.motionValue)==null?void 0:T.owner)==null?void 0:P.current,S=E?new sL({...x,element:k}):new L0(x);S.finished.then(()=>{this.notifyFinished()}).catch(xr),this.pendingTimeline&&(this.stopTimeline=S.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=S}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),G6()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}function EE(n,e,t,r=0,s=1){const l=Array.from(n).sort((m,g)=>m.sortNodePosition(g)).indexOf(e),c=n.size,h=(c-1)*r;return typeof t=="function"?t(l,c):s===1?l*r:h-l*r}const fL=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function mL(n){const e=fL.exec(n);if(!e)return[,];const[,t,r,s]=e;return[`--${t??r}`,s]}function TE(n,e,t=1){const[r,s]=mL(n);if(!r)return;const l=window.getComputedStyle(e).getPropertyValue(r);if(l){const c=l.trim();return K2(c)?parseFloat(c):c}return A0(s)?TE(s,e,t+1):s}const pL={type:"spring",stiffness:500,damping:25,restSpeed:10},gL=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),yL={type:"keyframes",duration:.8},vL={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},xL=(n,{keyframes:e})=>e.length>2?yL:zl.has(n)?n.startsWith("scale")?gL(e[1]):pL:vL,bL=n=>n!==null;function wL(n,{repeat:e,repeatType:t="loop"},r){const s=n.filter(bL),l=e&&t!=="loop"&&e%2===1?0:s.length-1;return s[l]}function B0(n,e){return(n==null?void 0:n[e])??(n==null?void 0:n.default)??n}function kL({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:s,repeat:l,repeatType:c,repeatDelay:h,from:d,elapsed:m,...g}){return!!Object.keys(g).length}const z0=(n,e,t,r={},s,l)=>c=>{const h=B0(r,n)||{},d=h.delay||r.delay||0;let{elapsed:m=0}=r;m=m-Xi(d);const g={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...h,delay:-m,onUpdate:x=>{e.set(x),h.onUpdate&&h.onUpdate(x)},onComplete:()=>{c(),h.onComplete&&h.onComplete()},name:n,motionValue:e,element:l?void 0:s};kL(h)||Object.assign(g,xL(n,g)),g.duration&&(g.duration=Xi(g.duration)),g.repeatDelay&&(g.repeatDelay=Xi(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let y=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(qg(g),g.delay===0&&(y=!0)),(ss.instantAnimations||ss.skipAnimations)&&(y=!0,qg(g),g.delay=0),g.allowFlatten=!h.type&&!h.ease,y&&!l&&e.get()!==void 0){const x=wL(g.keyframes,h);if(x!==void 0){vt.update(()=>{g.onUpdate(x),g.onComplete()});return}}return h.isSync?new L0(g):new hL(g)};function vw(n){const e=[{},{}];return n==null||n.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function F0(n,e,t,r){if(typeof e=="function"){const[s,l]=vw(r);e=e(t!==void 0?t:n.custom,s,l)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[s,l]=vw(r);e=e(t!==void 0?t:n.custom,s,l)}return e}function ul(n,e,t){const r=n.getProps();return F0(r,e,t!==void 0?t:r.custom,n)}const IE=new Set(["width","height","top","left","right","bottom",...Bl]),xw=30,_L=n=>!isNaN(parseFloat(n));class SL{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var l;const s=Tn.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((l=this.events.change)==null||l.notify(this.current),this.dependents))for(const c of this.dependents)c.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Tn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=_L(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new I0);const r=this.events[e].add(t);return e==="change"?()=>{r(),vt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Tn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>xw)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,xw);return Q2(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;(e=this.dependents)==null||e.clear(),(t=this.events.destroy)==null||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Sl(n,e){return new SL(n,e)}const Gg=n=>Array.isArray(n);function EL(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Sl(t))}function TL(n){return Gg(n)?n[n.length-1]||0:n}function IL(n,e){const t=ul(n,e);let{transitionEnd:r={},transition:s={},...l}=t||{};l={...l,...r};for(const c in l){const h=TL(l[c]);EL(n,c,h)}}const wn=n=>!!(n&&n.getVelocity);function CL(n){return!!(wn(n)&&n.add)}function Qg(n,e){const t=n.getValue("willChange");if(CL(t))return t.add(e);if(!t&&ss.WillChange){const r=new ss.WillChange("auto");n.addValue("willChange",r),r.add(e)}}function U0(n){return n.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const jL="framerAppearId",CE="data-"+U0(jL);function jE(n){return n.props[CE]}function AL({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function AE(n,e,{delay:t=0,transitionOverride:r,type:s}={}){let{transition:l=n.getDefaultTransition(),transitionEnd:c,...h}=e;r&&(l=r);const d=[],m=s&&n.animationState&&n.animationState.getState()[s];for(const g in h){const y=n.getValue(g,n.latestValues[g]??null),x=h[g];if(x===void 0||m&&AL(m,g))continue;const E={delay:t,...B0(l||{},g)},k=y.get();if(k!==void 0&&!y.isAnimating&&!Array.isArray(x)&&x===k&&!E.velocity)continue;let S=!1;if(window.MotionHandoffAnimation){const P=jE(n);if(P){const M=window.MotionHandoffAnimation(P,g,vt);M!==null&&(E.startTime=M,S=!0)}}Qg(n,g),y.start(z0(g,y,x,n.shouldReduceMotion&&IE.has(g)?{type:!1}:E,n,S));const T=y.animation;T&&d.push(T)}return c&&Promise.all(d).then(()=>{vt.update(()=>{c&&IL(n,c)})}),d}function Yg(n,e,t={}){var d;const r=ul(n,e,t.type==="exit"?(d=n.presenceContext)==null?void 0:d.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(s=t.transitionOverride);const l=r?()=>Promise.all(AE(n,r,t)):()=>Promise.resolve(),c=n.variantChildren&&n.variantChildren.size?(m=0)=>{const{delayChildren:g=0,staggerChildren:y,staggerDirection:x}=s;return RL(n,e,m,g,y,x,t)}:()=>Promise.resolve(),{when:h}=s;if(h){const[m,g]=h==="beforeChildren"?[l,c]:[c,l];return m().then(()=>g())}else return Promise.all([l(),c(t.delay)])}function RL(n,e,t=0,r=0,s=0,l=1,c){const h=[];for(const d of n.variantChildren)d.notify("AnimationStart",e),h.push(Yg(d,e,{...c,delay:t+(typeof r=="function"?0:r)+EE(n.variantChildren,d,r,s,l)}).then(()=>d.notify("AnimationComplete",e)));return Promise.all(h)}function PL(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(l=>Yg(n,l,t));r=Promise.all(s)}else if(typeof e=="string")r=Yg(n,e,t);else{const s=typeof e=="function"?ul(n,e,t.custom):e;r=Promise.all(AE(n,s,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}const NL={test:n=>n==="auto",parse:n=>n},RE=n=>e=>e.test(n),PE=[Ol,be,wi,Ls,o6,s6,NL],bw=n=>PE.find(RE(n));function DL(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||G2(n):!0}const ML=new Set(["brightness","contrast","saturate","opacity"]);function VL(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(R0)||[];if(!r)return n;const s=t.replace(r,"");let l=ML.has(e)?1:0;return r!==t&&(l*=100),e+"("+l+s+")"}const LL=/\b([a-z-]*)\(.*?\)/gu,Xg={...ro,getAnimatableNone:n=>{const e=n.match(LL);return e?e.map(VL).join(" "):n}},ww={...Ol,transform:Math.round},OL={rotate:Ls,rotateX:Ls,rotateY:Ls,rotateZ:Ls,scale:lh,scaleX:lh,scaleY:lh,scaleZ:lh,skew:Ls,skewX:Ls,skewY:Ls,distance:be,translateX:be,translateY:be,translateZ:be,x:be,y:be,z:be,perspective:be,transformPerspective:be,opacity:hu,originX:aw,originY:aw,originZ:be},W0={borderWidth:be,borderTopWidth:be,borderRightWidth:be,borderBottomWidth:be,borderLeftWidth:be,borderRadius:be,radius:be,borderTopLeftRadius:be,borderTopRightRadius:be,borderBottomRightRadius:be,borderBottomLeftRadius:be,width:be,maxWidth:be,height:be,maxHeight:be,top:be,right:be,bottom:be,left:be,inset:be,insetBlock:be,insetBlockStart:be,insetBlockEnd:be,insetInline:be,insetInlineStart:be,insetInlineEnd:be,padding:be,paddingTop:be,paddingRight:be,paddingBottom:be,paddingLeft:be,paddingBlock:be,paddingBlockStart:be,paddingBlockEnd:be,paddingInline:be,paddingInlineStart:be,paddingInlineEnd:be,margin:be,marginTop:be,marginRight:be,marginBottom:be,marginLeft:be,marginBlock:be,marginBlockStart:be,marginBlockEnd:be,marginInline:be,marginInlineStart:be,marginInlineEnd:be,backgroundPositionX:be,backgroundPositionY:be,...OL,zIndex:ww,fillOpacity:hu,strokeOpacity:hu,numOctaves:ww},BL={...W0,color:Ut,backgroundColor:Ut,outlineColor:Ut,fill:Ut,stroke:Ut,borderColor:Ut,borderTopColor:Ut,borderRightColor:Ut,borderBottomColor:Ut,borderLeftColor:Ut,filter:Xg,WebkitFilter:Xg},NE=n=>BL[n];function DE(n,e){let t=NE(n);return t!==Xg&&(t=ro),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const zL=new Set(["auto","none","0"]);function FL(n,e,t){let r=0,s;for(;r<n.length&&!s;){const l=n[r];typeof l=="string"&&!zL.has(l)&&fu(l).values.length&&(s=n[r]),r++}if(s&&t)for(const l of e)n[l]=DE(t,s)}class UL extends O0{constructor(e,t,r,s,l){super(e,t,r,s,l,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let g=0;g<e.length;g++){let y=e[g];if(typeof y=="string"&&(y=y.trim(),A0(y))){const x=TE(y,t.current);x!==void 0&&(e[g]=x),g===e.length-1&&(this.finalKeyframe=y)}}if(this.resolveNoneKeyframes(),!IE.has(r)||e.length!==2)return;const[s,l]=e,c=bw(s),h=bw(l),d=ow(s),m=ow(l);if(d!==m&&Us[r]){this.needsMeasurement=!0;return}if(c!==h)if(pw(c)&&pw(h))for(let g=0;g<e.length;g++){const y=e[g];typeof y=="string"&&(e[g]=parseFloat(y))}else Us[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||DL(e[s]))&&r.push(s);r.length&&FL(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Us[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const s=t[t.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var h;const{element:e,name:t,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(t);s&&s.jump(this.measuredOrigin,!1);const l=r.length-1,c=r[l];r[l]=Us[t](e.measureViewportBox(),window.getComputedStyle(e.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),(h=this.removedTransforms)!=null&&h.length&&this.removedTransforms.forEach(([d,m])=>{e.getValue(d).set(m)}),this.resolveNoneKeyframes()}}function WL(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let r=document;const s=(t==null?void 0:t[n])??r.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n)}const ME=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function VE(n){return q2(n)&&"offsetHeight"in n}const{schedule:$0}=oE(queueMicrotask,!1),Lr={x:!1,y:!1};function LE(){return Lr.x||Lr.y}function $L(n){return n==="x"||n==="y"?Lr[n]?null:(Lr[n]=!0,()=>{Lr[n]=!1}):Lr.x||Lr.y?null:(Lr.x=Lr.y=!0,()=>{Lr.x=Lr.y=!1})}function OE(n,e){const t=WL(n),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[t,s,()=>r.abort()]}function kw(n){return!(n.pointerType==="touch"||LE())}function HL(n,e,t={}){const[r,s,l]=OE(n,t),c=h=>{if(!kw(h))return;const{target:d}=h,m=e(d,h);if(typeof m!="function"||!d)return;const g=y=>{kw(y)&&(m(y),d.removeEventListener("pointerleave",g))};d.addEventListener("pointerleave",g,s)};return r.forEach(h=>{h.addEventListener("pointerenter",c,s)}),l}const BE=(n,e)=>e?n===e?!0:BE(n,e.parentElement):!1,H0=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,KL=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function zE(n){return KL.has(n.tagName)||n.isContentEditable===!0}const Th=new WeakSet;function _w(n){return e=>{e.key==="Enter"&&n(e)}}function Up(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const qL=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=_w(()=>{if(Th.has(t))return;Up(t,"down");const s=_w(()=>{Up(t,"up")}),l=()=>Up(t,"cancel");t.addEventListener("keyup",s,e),t.addEventListener("blur",l,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function Sw(n){return H0(n)&&!LE()}function GL(n,e,t={}){const[r,s,l]=OE(n,t),c=h=>{const d=h.currentTarget;if(!Sw(h))return;Th.add(d);const m=e(d,h),g=(E,k)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",x),Th.has(d)&&Th.delete(d),Sw(E)&&typeof m=="function"&&m(E,{success:k})},y=E=>{g(E,d===window||d===document||t.useGlobalTarget||BE(d,E.target))},x=E=>{g(E,!1)};window.addEventListener("pointerup",y,s),window.addEventListener("pointercancel",x,s)};return r.forEach(h=>{(t.useGlobalTarget?window:h).addEventListener("pointerdown",c,s),VE(h)&&(h.addEventListener("focus",m=>qL(m,s)),!zE(h)&&!h.hasAttribute("tabindex")&&(h.tabIndex=0))}),l}function FE(n){return q2(n)&&"ownerSVGElement"in n}function QL(n){return FE(n)&&n.tagName==="svg"}const YL=[...PE,Ut,ro],XL=n=>YL.find(RE(n)),Ew=()=>({translate:0,scale:1,origin:0,originPoint:0}),Za=()=>({x:Ew(),y:Ew()}),Tw=()=>({min:0,max:0}),Gt=()=>({x:Tw(),y:Tw()}),Jg={current:null},UE={current:!1},JL=typeof window<"u";function ZL(){if(UE.current=!0,!!JL)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>Jg.current=n.matches;n.addEventListener("change",e),e()}else Jg.current=!1}const eO=new WeakMap;function Ff(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function mu(n){return typeof n=="string"||Array.isArray(n)}const K0=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],q0=["initial",...K0];function Uf(n){return Ff(n.animate)||q0.some(e=>mu(n[e]))}function WE(n){return!!(Uf(n)||n.variants)}function tO(n,e,t){for(const r in e){const s=e[r],l=t[r];if(wn(s))n.addValue(r,s);else if(wn(l))n.addValue(r,Sl(s,{owner:n}));else if(l!==s)if(n.hasValue(r)){const c=n.getValue(r);c.liveStyle===!0?c.jump(s):c.hasAnimated||c.set(s)}else{const c=n.getStaticValue(r);n.addValue(r,Sl(c!==void 0?c:s,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const Iw=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let tf={};function $E(n){tf=n}function nO(){return tf}class rO{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:l,visualState:c},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=O0,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=Tn.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,vt.render(this.render,!1,!0))};const{latestValues:d,renderState:m}=c;this.latestValues=d,this.baseTarget={...d},this.initialValues=t.initial?{...d}:{},this.renderState=m,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=h,this.blockInitialAnimation=!!l,this.isControllingVariants=Uf(t),this.isVariantNode=WE(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...y}=this.scrapeMotionValuesFromProps(t,{},this);for(const x in y){const E=y[x];d[x]!==void 0&&wn(E)&&E.set(d[x])}}mount(e){var t;this.current=e,eO.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,s)=>this.bindToMotionValue(s,r)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(UE.current||ZL(),this.shouldReduceMotion=Jg.current),(t=this.parent)==null||t.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),no(this.notifyUpdate),no(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=zl.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=t.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&vt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let l;typeof window<"u"&&window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{s(),l&&l(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in tf){const t=tf[e];if(!t)continue;const{isEnabled:r,Feature:s}=t;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const l=this.features[e];l.isMounted?l.update():(l.mount(),l.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Gt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<Iw.length;r++){const s=Iw[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const l="on"+s,c=e[l];c&&(this.propEventSubscriptions[s]=this.on(s,c))}this.prevMotionValues=tO(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=Sl(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(K2(r)||G2(r))?r=parseFloat(r):!XL(r)&&ro.test(t)&&(r=DE(e,t)),this.setBaseTarget(e,wn(r)?r.get():r)),wn(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var l;const{initial:t}=this.props;let r;if(typeof t=="string"||typeof t=="object"){const c=F0(this.props,t,(l=this.presenceContext)==null?void 0:l.custom);c&&(r=c[e])}if(t&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!wn(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new I0),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){$0.render(this.render)}}class HE extends rO{constructor(){super(...arguments),this.KeyframeResolver=UL}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){const r=e.style;return r?r[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;wn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}class ho{constructor(e){this.isMounted=!1,this.node=e}update(){}}function KE({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function iO({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function sO(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function Wp(n){return n===void 0||n===1}function Zg({scale:n,scaleX:e,scaleY:t}){return!Wp(n)||!Wp(e)||!Wp(t)}function Fo(n){return Zg(n)||qE(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function qE(n){return Cw(n.x)||Cw(n.y)}function Cw(n){return n&&n!=="0%"}function nf(n,e,t){const r=n-t,s=e*r;return t+s}function jw(n,e,t,r,s){return s!==void 0&&(n=nf(n,s,r)),nf(n,t,r)+e}function ey(n,e=0,t=1,r,s){n.min=jw(n.min,e,t,r,s),n.max=jw(n.max,e,t,r,s)}function GE(n,{x:e,y:t}){ey(n.x,e.translate,e.scale,e.originPoint),ey(n.y,t.translate,t.scale,t.originPoint)}const Aw=.999999999999,Rw=1.0000000000001;function oO(n,e,t,r=!1){const s=t.length;if(!s)return;e.x=e.y=1;let l,c;for(let h=0;h<s;h++){l=t[h],c=l.projectionDelta;const{visualElement:d}=l.options;d&&d.props.style&&d.props.style.display==="contents"||(r&&l.options.layoutScroll&&l.scroll&&l!==l.root&&tl(n,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,GE(n,c)),r&&Fo(l.latestValues)&&tl(n,l.latestValues))}e.x<Rw&&e.x>Aw&&(e.x=1),e.y<Rw&&e.y>Aw&&(e.y=1)}function el(n,e){n.min=n.min+e,n.max=n.max+e}function Pw(n,e,t,r,s=.5){const l=St(n.min,n.max,s);ey(n,e,t,l,r)}function tl(n,e){Pw(n.x,e.x,e.scaleX,e.scale,e.originX),Pw(n.y,e.y,e.scaleY,e.scale,e.originY)}function QE(n,e){return KE(sO(n.getBoundingClientRect(),e))}function aO(n,e,t){const r=QE(n,t),{scroll:s}=e;return s&&(el(r.x,s.offset.x),el(r.y,s.offset.y)),r}const lO={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},cO=Bl.length;function uO(n,e,t){let r="",s=!0;for(let l=0;l<cO;l++){const c=Bl[l],h=n[c];if(h===void 0)continue;let d=!0;if(typeof h=="number"?d=h===(c.startsWith("scale")?1:0):d=parseFloat(h)===0,!d||t){const m=ME(h,W0[c]);if(!d){s=!1;const g=lO[c]||c;r+=`${g}(${m}) `}t&&(e[c]=m)}}return r=r.trim(),t?r=t(e,s?"":r):s&&(r="none"),r}function G0(n,e,t){const{style:r,vars:s,transformOrigin:l}=n;let c=!1,h=!1;for(const d in e){const m=e[d];if(zl.has(d)){c=!0;continue}else if(lE(d)){s[d]=m;continue}else{const g=ME(m,W0[d]);d.startsWith("origin")?(h=!0,l[d]=g):r[d]=g}}if(e.transform||(c||t?r.transform=uO(e,n.transform,t):r.transform&&(r.transform="none")),h){const{originX:d="50%",originY:m="50%",originZ:g=0}=l;r.transformOrigin=`${d} ${m} ${g}`}}function YE(n,{style:e,vars:t},r,s){const l=n.style;let c;for(c in e)l[c]=e[c];s==null||s.applyProjectionStyles(l,r);for(c in t)l.setProperty(c,t[c])}function Nw(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Dc={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(be.test(n))n=parseFloat(n);else return n;const t=Nw(n,e.target.x),r=Nw(n,e.target.y);return`${t}% ${r}%`}},dO={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,s=ro.parse(n);if(s.length>5)return r;const l=ro.createTransformer(n),c=typeof s[0]!="number"?1:0,h=t.x.scale*e.x,d=t.y.scale*e.y;s[0+c]/=h,s[1+c]/=d;const m=St(h,d,.5);return typeof s[2+c]=="number"&&(s[2+c]/=m),typeof s[3+c]=="number"&&(s[3+c]/=m),l(s)}},ty={borderRadius:{...Dc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Dc,borderTopRightRadius:Dc,borderBottomLeftRadius:Dc,borderBottomRightRadius:Dc,boxShadow:dO};function XE(n,{layout:e,layoutId:t}){return zl.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!ty[n]||n==="opacity")}function Q0(n,e,t){var c;const r=n.style,s=e==null?void 0:e.style,l={};if(!r)return l;for(const h in r)(wn(r[h])||s&&wn(s[h])||XE(h,n)||((c=t==null?void 0:t.getValue(h))==null?void 0:c.liveStyle)!==void 0)&&(l[h]=r[h]);return l}function hO(n){return window.getComputedStyle(n)}class fO extends HE{constructor(){super(...arguments),this.type="html",this.renderInstance=YE}readValueFromInstance(e,t){var r;if(zl.has(t))return(r=this.projection)!=null&&r.isProjecting?Ug(t):W6(e,t);{const s=hO(e),l=(lE(t)?s.getPropertyValue(t):s[t])||0;return typeof l=="string"?l.trim():l}}measureInstanceViewportBox(e,{transformPagePoint:t}){return QE(e,t)}build(e,t,r){G0(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return Q0(e,t,r)}}const mO={offset:"stroke-dashoffset",array:"stroke-dasharray"},pO={offset:"strokeDashoffset",array:"strokeDasharray"};function gO(n,e,t=1,r=0,s=!0){n.pathLength=1;const l=s?mO:pO;n[l.offset]=be.transform(-r);const c=be.transform(e),h=be.transform(t);n[l.array]=`${c} ${h}`}const yO=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function JE(n,{attrX:e,attrY:t,attrScale:r,pathLength:s,pathSpacing:l=1,pathOffset:c=0,...h},d,m,g){if(G0(n,h,m),d){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:y,style:x}=n;y.transform&&(x.transform=y.transform,delete y.transform),(x.transform||y.transformOrigin)&&(x.transformOrigin=y.transformOrigin??"50% 50%",delete y.transformOrigin),x.transform&&(x.transformBox=(g==null?void 0:g.transformBox)??"fill-box",delete y.transformBox);for(const E of yO)y[E]!==void 0&&(x[E]=y[E],delete y[E]);e!==void 0&&(y.x=e),t!==void 0&&(y.y=t),r!==void 0&&(y.scale=r),s!==void 0&&gO(y,s,l,c,!1)}const ZE=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),eT=n=>typeof n=="string"&&n.toLowerCase()==="svg";function vO(n,e,t,r){YE(n,e,void 0,r);for(const s in e.attrs)n.setAttribute(ZE.has(s)?s:U0(s),e.attrs[s])}function tT(n,e,t){const r=Q0(n,e,t);for(const s in n)if(wn(n[s])||wn(e[s])){const l=Bl.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[l]=n[s]}return r}class xO extends HE{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Gt}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(zl.has(t)){const r=NE(t);return r&&r.default||0}return t=ZE.has(t)?t:U0(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return tT(e,t,r)}build(e,t,r){JE(e,t,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,t,r,s){vO(e,t,r,s)}mount(e){this.isSVGTag=eT(e.tagName),super.mount(e)}}const bO=q0.length;function nT(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?nT(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<bO;t++){const r=q0[t],s=n.props[r];(mu(s)||s===!1)&&(e[r]=s)}return e}function rT(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}const wO=[...K0].reverse(),kO=K0.length;function _O(n){return e=>Promise.all(e.map(({animation:t,options:r})=>PL(n,t,r)))}function SO(n){let e=_O(n),t=Dw(),r=!0;const s=d=>(m,g)=>{var x;const y=ul(n,g,d==="exit"?(x=n.presenceContext)==null?void 0:x.custom:void 0);if(y){const{transition:E,transitionEnd:k,...S}=y;m={...m,...S,...k}}return m};function l(d){e=d(n)}function c(d){const{props:m}=n,g=nT(n.parent)||{},y=[],x=new Set;let E={},k=1/0;for(let T=0;T<kO;T++){const P=wO[T],M=t[P],N=m[P]!==void 0?m[P]:g[P],F=mu(N),$=P===d?M.isActive:null;$===!1&&(k=T);let K=N===g[P]&&N!==m[P]&&F;if(K&&r&&n.manuallyAnimateOnMount&&(K=!1),M.protectedKeys={...E},!M.isActive&&$===null||!N&&!M.prevProp||Ff(N)||typeof N=="boolean")continue;const A=EO(M.prevProp,N);let j=A||P===d&&M.isActive&&!K&&F||T>k&&F,D=!1;const L=Array.isArray(N)?N:[N];let B=L.reduce(s(P),{});$===!1&&(B={});const{prevResolvedValues:U={}}=M,V={...U,...B},Ve=Te=>{j=!0,x.has(Te)&&(D=!0,x.delete(Te)),M.needsAnimating[Te]=!0;const se=n.getValue(Te);se&&(se.liveStyle=!1)};for(const Te in V){const se=B[Te],me=U[Te];if(E.hasOwnProperty(Te))continue;let le=!1;Gg(se)&&Gg(me)?le=!rT(se,me):le=se!==me,le?se!=null?Ve(Te):x.add(Te):se!==void 0&&x.has(Te)?Ve(Te):M.protectedKeys[Te]=!0}M.prevProp=N,M.prevResolvedValues=B,M.isActive&&(E={...E,...B}),r&&n.blockInitialAnimation&&(j=!1);const We=K&&A;j&&(!We||D)&&y.push(...L.map(Te=>{const se={type:P};if(typeof Te=="string"&&r&&!We&&n.manuallyAnimateOnMount&&n.parent){const{parent:me}=n,le=ul(me,Te);if(me.enteringChildren&&le){const{delayChildren:H}=le.transition||{};se.delay=EE(me.enteringChildren,n,H)}}return{animation:Te,options:se}}))}if(x.size){const T={};if(typeof m.initial!="boolean"){const P=ul(n,Array.isArray(m.initial)?m.initial[0]:m.initial);P&&P.transition&&(T.transition=P.transition)}x.forEach(P=>{const M=n.getBaseTarget(P),N=n.getValue(P);N&&(N.liveStyle=!0),T[P]=M??null}),y.push({animation:T})}let S=!!y.length;return r&&(m.initial===!1||m.initial===m.animate)&&!n.manuallyAnimateOnMount&&(S=!1),r=!1,S?e(y):Promise.resolve()}function h(d,m){var y;if(t[d].isActive===m)return Promise.resolve();(y=n.variantChildren)==null||y.forEach(x=>{var E;return(E=x.animationState)==null?void 0:E.setActive(d,m)}),t[d].isActive=m;const g=c(d);for(const x in t)t[x].protectedKeys={};return g}return{animateChanges:c,setActive:h,setAnimateFunction:l,getState:()=>t,reset:()=>{t=Dw()}}}function EO(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!rT(e,n):!1}function Bo(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Dw(){return{animate:Bo(!0),whileInView:Bo(),whileHover:Bo(),whileTap:Bo(),whileDrag:Bo(),whileFocus:Bo(),exit:Bo()}}function Mw(n,e){n.min=e.min,n.max=e.max}function Vr(n,e){Mw(n.x,e.x),Mw(n.y,e.y)}function Vw(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}const iT=1e-4,TO=1-iT,IO=1+iT,sT=.01,CO=0-sT,jO=0+sT;function In(n){return n.max-n.min}function AO(n,e,t){return Math.abs(n-e)<=t}function Lw(n,e,t,r=.5){n.origin=r,n.originPoint=St(e.min,e.max,n.origin),n.scale=In(t)/In(e),n.translate=St(t.min,t.max,n.origin)-n.originPoint,(n.scale>=TO&&n.scale<=IO||isNaN(n.scale))&&(n.scale=1),(n.translate>=CO&&n.translate<=jO||isNaN(n.translate))&&(n.translate=0)}function Zc(n,e,t,r){Lw(n.x,e.x,t.x,r?r.originX:void 0),Lw(n.y,e.y,t.y,r?r.originY:void 0)}function Ow(n,e,t){n.min=t.min+e.min,n.max=n.min+In(e)}function RO(n,e,t){Ow(n.x,e.x,t.x),Ow(n.y,e.y,t.y)}function Bw(n,e,t){n.min=e.min-t.min,n.max=n.min+In(e)}function rf(n,e,t){Bw(n.x,e.x,t.x),Bw(n.y,e.y,t.y)}function zw(n,e,t,r,s){return n-=e,n=nf(n,1/t,r),s!==void 0&&(n=nf(n,1/s,r)),n}function PO(n,e=0,t=1,r=.5,s,l=n,c=n){if(wi.test(e)&&(e=parseFloat(e),e=St(c.min,c.max,e/100)-c.min),typeof e!="number")return;let h=St(l.min,l.max,r);n===l&&(h-=e),n.min=zw(n.min,e,t,h,s),n.max=zw(n.max,e,t,h,s)}function Fw(n,e,[t,r,s],l,c){PO(n,e[t],e[r],e[s],e.scale,l,c)}const NO=["x","scaleX","originX"],DO=["y","scaleY","originY"];function Uw(n,e,t,r){Fw(n.x,e,NO,t?t.x:void 0,r?r.x:void 0),Fw(n.y,e,DO,t?t.y:void 0,r?r.y:void 0)}function Ww(n){return n.translate===0&&n.scale===1}function oT(n){return Ww(n.x)&&Ww(n.y)}function $w(n,e){return n.min===e.min&&n.max===e.max}function MO(n,e){return $w(n.x,e.x)&&$w(n.y,e.y)}function Hw(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function aT(n,e){return Hw(n.x,e.x)&&Hw(n.y,e.y)}function Kw(n){return In(n.x)/In(n.y)}function qw(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}function pr(n){return[n("x"),n("y")]}function VO(n,e,t){let r="";const s=n.x.translate/e.x,l=n.y.translate/e.y,c=(t==null?void 0:t.z)||0;if((s||l||c)&&(r=`translate3d(${s}px, ${l}px, ${c}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:m,rotate:g,rotateX:y,rotateY:x,skewX:E,skewY:k}=t;m&&(r=`perspective(${m}px) ${r}`),g&&(r+=`rotate(${g}deg) `),y&&(r+=`rotateX(${y}deg) `),x&&(r+=`rotateY(${x}deg) `),E&&(r+=`skewX(${E}deg) `),k&&(r+=`skewY(${k}deg) `)}const h=n.x.scale*e.x,d=n.y.scale*e.y;return(h!==1||d!==1)&&(r+=`scale(${h}, ${d})`),r||"none"}const lT=["TopLeft","TopRight","BottomLeft","BottomRight"],LO=lT.length,Gw=n=>typeof n=="string"?parseFloat(n):n,Qw=n=>typeof n=="number"||be.test(n);function OO(n,e,t,r,s,l){s?(n.opacity=St(0,t.opacity??1,BO(r)),n.opacityExit=St(e.opacity??1,0,zO(r))):l&&(n.opacity=St(e.opacity??1,t.opacity??1,r));for(let c=0;c<LO;c++){const h=`border${lT[c]}Radius`;let d=Yw(e,h),m=Yw(t,h);if(d===void 0&&m===void 0)continue;d||(d=0),m||(m=0),d===0||m===0||Qw(d)===Qw(m)?(n[h]=Math.max(St(Gw(d),Gw(m),r),0),(wi.test(m)||wi.test(d))&&(n[h]+="%")):n[h]=m}(e.rotate||t.rotate)&&(n.rotate=St(e.rotate||0,t.rotate||0,r))}function Yw(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const BO=cT(0,.5,nE),zO=cT(.5,.95,xr);function cT(n,e,t){return r=>r<n?0:r>e?1:t(du(n,e,r))}function FO(n,e,t){const r=wn(n)?n:Sl(n);return r.start(z0("",r,e,t)),r.animation}function pu(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}const UO=(n,e)=>n.depth-e.depth;class WO{constructor(){this.children=[],this.isDirty=!1}add(e){_0(this.children,e),this.isDirty=!0}remove(e){S0(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(UO),this.isDirty=!1,this.children.forEach(e)}}function $O(n,e){const t=Tn.now(),r=({timestamp:s})=>{const l=s-t;l>=e&&(no(r),n(l-e))};return vt.setup(r,!0),()=>no(r)}function Ih(n){return wn(n)?n.get():n}class HO{constructor(){this.members=[]}add(e){_0(this.members,e),e.scheduleRender()}remove(e){if(S0(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(s=>e===s);if(t===0)return!1;let r;for(let s=t;s>=0;s--){const l=this.members[s];if(l.isPresent!==!1){r=l;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const Ch={hasAnimatedSinceResize:!0,hasEverUpdated:!1},$p=["","X","Y","Z"],KO=1e3;let qO=0;function Hp(n,e,t,r){const{latestValues:s}=e;s[n]&&(t[n]=s[n],e.setStaticValue(n,0),r&&(r[n]=0))}function uT(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=jE(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:s,layoutId:l}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",vt,!(s||l))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&uT(r)}function dT({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(c={},h=e==null?void 0:e()){this.id=qO++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(YO),this.nodes.forEach(e8),this.nodes.forEach(t8),this.nodes.forEach(XO)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new WO)}addEventListener(c,h){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new I0),this.eventHandlers.get(c).add(h)}notifyListeners(c,...h){const d=this.eventHandlers.get(c);d&&d.notify(...h)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=FE(c)&&!QL(c),this.instance=c;const{layoutId:h,layout:d,visualElement:m}=this.options;if(m&&!m.current&&m.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||h)&&(this.isLayoutDirty=!0),n){let g,y=0;const x=()=>this.root.updateBlockedByResize=!1;vt.read(()=>{y=window.innerWidth}),n(c,()=>{const E=window.innerWidth;E!==y&&(y=E,this.root.updateBlockedByResize=!0,g&&g(),g=$O(x,250),Ch.hasAnimatedSinceResize&&(Ch.hasAnimatedSinceResize=!1,this.nodes.forEach(Zw)))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&m&&(h||d)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:y,hasRelativeLayoutChanged:x,layout:E})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const k=this.options.transition||m.getDefaultTransition()||o8,{onLayoutAnimationStart:S,onLayoutAnimationComplete:T}=m.getProps(),P=!this.targetLayout||!aT(this.targetLayout,E),M=!y&&x;if(this.options.layoutRoot||this.resumeFrom||M||y&&(P||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const N={...B0(k,"layout"),onPlay:S,onComplete:T};(m.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N),this.setAnimationOrigin(g,M)}else y||Zw(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=E})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),no(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(n8),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&uT(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const y=this.path[g];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:h,layout:d}=this.options;if(h===void 0&&!d)return;const m=this.getTransformTemplate();this.prevTransformTemplateValue=m?m(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Xw);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Jw);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(ZO),this.nodes.forEach(GO),this.nodes.forEach(QO)):this.nodes.forEach(Jw),this.clearAllSnapshots();const h=Tn.now();ln.delta=_i(0,1e3/60,h-ln.timestamp),ln.timestamp=h,ln.isProcessing=!0,Vp.update.process(ln),Vp.preRender.process(ln),Vp.render.process(ln),ln.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,$0.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(JO),this.sharedNodes.forEach(r8)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,vt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){vt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!In(this.snapshot.measuredBox.x)&&!In(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Gt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(h=!1),h&&this.instance){const d=r(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:d,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!s)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!oT(this.projectionDelta),d=this.getTransformTemplate(),m=d?d(this.latestValues,""):void 0,g=m!==this.prevTransformTemplateValue;c&&this.instance&&(h||Fo(this.latestValues)||g)&&(s(this.instance,m),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const h=this.measurePageBox();let d=this.removeElementScroll(h);return c&&(d=this.removeTransform(d)),a8(d),{animationId:this.root.animationId,measuredBox:h,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var m;const{visualElement:c}=this.options;if(!c)return Gt();const h=c.measureViewportBox();if(!(((m=this.scroll)==null?void 0:m.wasRoot)||this.path.some(l8))){const{scroll:g}=this.root;g&&(el(h.x,g.offset.x),el(h.y,g.offset.y))}return h}removeElementScroll(c){var d;const h=Gt();if(Vr(h,c),(d=this.scroll)!=null&&d.wasRoot)return h;for(let m=0;m<this.path.length;m++){const g=this.path[m],{scroll:y,options:x}=g;g!==this.root&&y&&x.layoutScroll&&(y.wasRoot&&Vr(h,c),el(h.x,y.offset.x),el(h.y,y.offset.y))}return h}applyTransform(c,h=!1){const d=Gt();Vr(d,c);for(let m=0;m<this.path.length;m++){const g=this.path[m];!h&&g.options.layoutScroll&&g.scroll&&g!==g.root&&tl(d,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),Fo(g.latestValues)&&tl(d,g.latestValues)}return Fo(this.latestValues)&&tl(d,this.latestValues),d}removeTransform(c){const h=Gt();Vr(h,c);for(let d=0;d<this.path.length;d++){const m=this.path[d];if(!m.instance||!Fo(m.latestValues))continue;Zg(m.latestValues)&&m.updateSnapshot();const g=Gt(),y=m.measurePageBox();Vr(g,y),Uw(h,m.latestValues,m.snapshot?m.snapshot.layoutBox:void 0,g)}return Fo(this.latestValues)&&Uw(h,this.latestValues),h}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ln.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){var E;const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==h;if(!(c||d&&this.isSharedProjectionDirty||this.isProjectionDirty||(E=this.parent)!=null&&E.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:y}=this.options;if(!this.layout||!(g||y))return;this.resolvedRelativeTargetAt=ln.timestamp;const x=this.getClosestProjectingParent();x&&this.linkedParentVersion!==x.layoutVersion&&!x.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(x&&x.layout?this.createRelativeTarget(x,this.layout.layoutBox,x.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Gt(),this.targetWithTransforms=Gt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),RO(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Vr(this.target,this.layout.layoutBox),GE(this.target,this.targetDelta)):Vr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?this.createRelativeTarget(x,this.target,x.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Zg(this.parent.latestValues)||qE(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(c,h,d){this.relativeParent=c,this.linkedParentVersion=c.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Gt(),this.relativeTargetOrigin=Gt(),rf(this.relativeTargetOrigin,h,d),Vr(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var k;const c=this.getLead(),h=!!this.resumingFrom||this!==c;let d=!0;if((this.isProjectionDirty||(k=this.parent)!=null&&k.isProjectionDirty)&&(d=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===ln.timestamp&&(d=!1),d)return;const{layout:m,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||g))return;Vr(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,x=this.treeScale.y;oO(this.layoutCorrected,this.treeScale,this.path,h),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=Gt());const{target:E}=c;if(!E){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Vw(this.prevProjectionDelta.x,this.projectionDelta.x),Vw(this.prevProjectionDelta.y,this.projectionDelta.y)),Zc(this.projectionDelta,this.layoutCorrected,E,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==x||!qw(this.projectionDelta.x,this.prevProjectionDelta.x)||!qw(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",E))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){var h;if((h=this.options.visualElement)==null||h.scheduleRender(),c){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Za(),this.projectionDelta=Za(),this.projectionDeltaWithTransform=Za()}setAnimationOrigin(c,h=!1){const d=this.snapshot,m=d?d.latestValues:{},g={...this.latestValues},y=Za();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const x=Gt(),E=d?d.source:void 0,k=this.layout?this.layout.source:void 0,S=E!==k,T=this.getStack(),P=!T||T.members.length<=1,M=!!(S&&!P&&this.options.crossfade===!0&&!this.path.some(s8));this.animationProgress=0;let N;this.mixTargetDelta=F=>{const $=F/1e3;ek(y.x,c.x,$),ek(y.y,c.y,$),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(rf(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),i8(this.relativeTarget,this.relativeTargetOrigin,x,$),N&&MO(this.relativeTarget,N)&&(this.isProjectionDirty=!1),N||(N=Gt()),Vr(N,this.relativeTarget)),S&&(this.animationValues=g,OO(g,m,this.latestValues,$,M,P)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=$},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){var h,d,m;this.notifyListeners("animationStart"),(h=this.currentAnimation)==null||h.stop(),(m=(d=this.resumingFrom)==null?void 0:d.currentAnimation)==null||m.stop(),this.pendingAnimation&&(no(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=vt.update(()=>{Ch.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Sl(0)),this.currentAnimation=FO(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:g=>{this.mixTargetDelta(g),c.onUpdate&&c.onUpdate(g)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(KO),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:h,target:d,layout:m,latestValues:g}=c;if(!(!h||!d||!m)){if(this!==c&&this.layout&&m&&hT(this.options.animationType,this.layout.layoutBox,m.layoutBox)){d=this.target||Gt();const y=In(this.layout.layoutBox.x);d.x.min=c.target.x.min,d.x.max=d.x.min+y;const x=In(this.layout.layoutBox.y);d.y.min=c.target.y.min,d.y.max=d.y.min+x}Vr(h,d),tl(h,g),Zc(this.projectionDeltaWithTransform,this.layoutCorrected,h,g)}}registerSharedNode(c,h){this.sharedNodes.has(c)||this.sharedNodes.set(c,new HO),this.sharedNodes.get(c).add(h);const m=h.options.initialPromotionConfig;h.promote({transition:m?m.transition:void 0,preserveFollowOpacity:m&&m.shouldPreserveFollowOpacity?m.shouldPreserveFollowOpacity(h):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){var h;const{layoutId:c}=this.options;return c?((h=this.getStack())==null?void 0:h.lead)||this:this}getPrevLead(){var h;const{layoutId:c}=this.options;return c?(h=this.getStack())==null?void 0:h.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:h,preserveFollowOpacity:d}={}){const m=this.getStack();m&&m.promote(this,d),c&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let h=!1;const{latestValues:d}=c;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(h=!0),!h)return;const m={};d.z&&Hp("z",c,m,this.animationValues);for(let g=0;g<$p.length;g++)Hp(`rotate${$p[g]}`,c,m,this.animationValues),Hp(`skew${$p[g]}`,c,m,this.animationValues);c.render();for(const g in m)c.setStaticValue(g,m[g]),this.animationValues&&(this.animationValues[g]=m[g]);c.scheduleRender()}applyProjectionStyles(c,h){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=Ih(h==null?void 0:h.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none";return}const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=Ih(h==null?void 0:h.pointerEvents)||""),this.hasProjected&&!Fo(this.latestValues)&&(c.transform=d?d({},""):"none",this.hasProjected=!1);return}c.visibility="";const g=m.animationValues||m.latestValues;this.applyTransformsToTarget();let y=VO(this.projectionDeltaWithTransform,this.treeScale,g);d&&(y=d(g,y)),c.transform=y;const{x,y:E}=this.projectionDelta;c.transformOrigin=`${x.origin*100}% ${E.origin*100}% 0`,m.animationValues?c.opacity=m===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:c.opacity=m===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const k in ty){if(g[k]===void 0)continue;const{correct:S,applyTo:T,isCSSVariable:P}=ty[k],M=y==="none"?g[k]:S(g[k],m);if(T){const N=T.length;for(let F=0;F<N;F++)c[T[F]]=M}else P?this.options.visualElement.renderState.vars[k]=M:c[k]=M}this.options.layoutId&&(c.pointerEvents=m===this?Ih(h==null?void 0:h.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>{var h;return(h=c.currentAnimation)==null?void 0:h.stop()}),this.root.nodes.forEach(Xw),this.root.sharedNodes.clear()}}}function GO(n){n.updateLayout()}function QO(n){var t;const e=((t=n.resumeFrom)==null?void 0:t.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=n.layout,{animationType:l}=n.options,c=e.source!==n.layout.source;l==="size"?pr(y=>{const x=c?e.measuredBox[y]:e.layoutBox[y],E=In(x);x.min=r[y].min,x.max=x.min+E}):hT(l,e.layoutBox,r)&&pr(y=>{const x=c?e.measuredBox[y]:e.layoutBox[y],E=In(r[y]);x.max=x.min+E,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[y].max=n.relativeTarget[y].min+E)});const h=Za();Zc(h,r,e.layoutBox);const d=Za();c?Zc(d,n.applyTransform(s,!0),e.measuredBox):Zc(d,r,e.layoutBox);const m=!oT(h);let g=!1;if(!n.resumeFrom){const y=n.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:x,layout:E}=y;if(x&&E){const k=Gt();rf(k,e.layoutBox,x.layoutBox);const S=Gt();rf(S,r,E.layoutBox),aT(k,S)||(g=!0),y.options.layoutRoot&&(n.relativeTarget=S,n.relativeTargetOrigin=k,n.relativeParent=y)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:d,layoutDelta:h,hasLayoutChanged:m,hasRelativeLayoutChanged:g})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function YO(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function XO(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function JO(n){n.clearSnapshot()}function Xw(n){n.clearMeasurements()}function Jw(n){n.isLayoutDirty=!1}function ZO(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function Zw(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function e8(n){n.resolveTargetDelta()}function t8(n){n.calcProjection()}function n8(n){n.resetSkewAndRotation()}function r8(n){n.removeLeadSnapshot()}function ek(n,e,t){n.translate=St(e.translate,0,t),n.scale=St(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function tk(n,e,t,r){n.min=St(e.min,t.min,r),n.max=St(e.max,t.max,r)}function i8(n,e,t,r){tk(n.x,e.x,t.x,r),tk(n.y,e.y,t.y,r)}function s8(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const o8={duration:.45,ease:[.4,0,.1,1]},nk=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),rk=nk("applewebkit/")&&!nk("chrome/")?Math.round:xr;function ik(n){n.min=rk(n.min),n.max=rk(n.max)}function a8(n){ik(n.x),ik(n.y)}function hT(n,e,t){return n==="position"||n==="preserve-aspect"&&!AO(Kw(e),Kw(t),.2)}function l8(n){var e;return n!==n.root&&((e=n.scroll)==null?void 0:e.wasRoot)}const c8=dT({attachResizeListener:(n,e)=>pu(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Kp={current:void 0},fT=dT({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!Kp.current){const n=new c8({});n.mount(window),n.setOptions({layoutScroll:!0}),Kp.current=n}return Kp.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),Y0=C.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function sk(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function u8(...n){return e=>{let t=!1;const r=n.map(s=>{const l=sk(s,e);return!t&&typeof l=="function"&&(t=!0),l});if(t)return()=>{for(let s=0;s<r.length;s++){const l=r[s];typeof l=="function"?l():sk(n[s],null)}}}}function d8(...n){return C.useCallback(u8(...n),n)}class h8 extends C.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=t.offsetParent,s=VE(r)&&r.offsetWidth||0,l=this.props.sizeRef.current;l.height=t.offsetHeight||0,l.width=t.offsetWidth||0,l.top=t.offsetTop,l.left=t.offsetLeft,l.right=s-l.width-l.left}return null}componentDidUpdate(){}render(){return this.props.children}}function f8({children:n,isPresent:e,anchorX:t,root:r}){var g;const s=C.useId(),l=C.useRef(null),c=C.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=C.useContext(Y0),d=((g=n.props)==null?void 0:g.ref)??(n==null?void 0:n.ref),m=d8(l,d);return C.useInsertionEffect(()=>{const{width:y,height:x,top:E,left:k,right:S}=c.current;if(e||!l.current||!y||!x)return;const T=t==="left"?`left: ${k}`:`right: ${S}`;l.current.dataset.motionPopId=s;const P=document.createElement("style");h&&(P.nonce=h);const M=r??document.head;return M.appendChild(P),P.sheet&&P.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${y}px !important;
            height: ${x}px !important;
            ${T}px !important;
            top: ${E}px !important;
          }
        `),()=>{M.contains(P)&&M.removeChild(P)}},[e]),o.jsx(h8,{isPresent:e,childRef:l,sizeRef:c,children:C.cloneElement(n,{ref:m})})}const m8=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:s,presenceAffectsLayout:l,mode:c,anchorX:h,root:d})=>{const m=k0(p8),g=C.useId();let y=!0,x=C.useMemo(()=>(y=!1,{id:g,initial:e,isPresent:t,custom:s,onExitComplete:E=>{m.set(E,!0);for(const k of m.values())if(!k)return;r&&r()},register:E=>(m.set(E,!1),()=>m.delete(E))}),[t,m,r]);return l&&y&&(x={...x}),C.useMemo(()=>{m.forEach((E,k)=>m.set(k,!1))},[t]),C.useEffect(()=>{!t&&!m.size&&r&&r()},[t]),c==="popLayout"&&(n=o.jsx(f8,{isPresent:t,anchorX:h,root:d,children:n})),o.jsx(zf.Provider,{value:x,children:n})};function p8(){return new Map}function mT(n=!0){const e=C.useContext(zf);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:s}=e,l=C.useId();C.useEffect(()=>{if(n)return s(l)},[n]);const c=C.useCallback(()=>n&&r&&r(l),[l,r,n]);return!t&&r?[!1,c]:[!0]}const ch=n=>n.key||"";function ok(n){const e=[];return C.Children.forEach(n,t=>{C.isValidElement(t)&&e.push(t)}),e}const X0=({children:n,custom:e,initial:t=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:l="sync",propagate:c=!1,anchorX:h="left",root:d})=>{const[m,g]=mT(c),y=C.useMemo(()=>ok(n),[n]),x=c&&!m?[]:y.map(ch),E=C.useRef(!0),k=C.useRef(y),S=k0(()=>new Map),T=C.useRef(new Set),[P,M]=C.useState(y),[N,F]=C.useState(y);H2(()=>{E.current=!1,k.current=y;for(let A=0;A<N.length;A++){const j=ch(N[A]);x.includes(j)?(S.delete(j),T.current.delete(j)):S.get(j)!==!0&&S.set(j,!1)}},[N,x.length,x.join("-")]);const $=[];if(y!==P){let A=[...y];for(let j=0;j<N.length;j++){const D=N[j],L=ch(D);x.includes(L)||(A.splice(j,0,D),$.push(D))}return l==="wait"&&$.length&&(A=$),F(ok(A)),M(y),null}const{forceRender:K}=C.useContext(w0);return o.jsx(o.Fragment,{children:N.map(A=>{const j=ch(A),D=c&&!m?!1:y===N||x.includes(j),L=()=>{if(T.current.has(j))return;if(T.current.add(j),S.has(j))S.set(j,!0);else return;let B=!0;S.forEach(U=>{U||(B=!1)}),B&&(K==null||K(),F(k.current),c&&(g==null||g()),r&&r())};return o.jsx(m8,{isPresent:D,initial:!E.current||t?void 0:!1,custom:e,presenceAffectsLayout:s,mode:l,root:d,onExitComplete:D?void 0:L,anchorX:h,children:A},j)})})},pT=C.createContext({strict:!1}),ak={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let lk=!1;function g8(){if(lk)return;const n={};for(const e in ak)n[e]={isEnabled:t=>ak[e].some(r=>!!t[r])};$E(n),lk=!0}function gT(){return g8(),nO()}function y8(n){const e=gT();for(const t in n)e[t]={...e[t],...n[t]};$E(e)}const v8=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function sf(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||v8.has(n)}let yT=n=>!sf(n);function x8(n){typeof n=="function"&&(yT=e=>e.startsWith("on")?!sf(e):n(e))}try{x8(require("@emotion/is-prop-valid").default)}catch{}function b8(n,e,t){const r={};for(const s in n)s==="values"&&typeof n.values=="object"||(yT(s)||t===!0&&sf(s)||!e&&!sf(s)||n.draggable&&s.startsWith("onDrag"))&&(r[s]=n[s]);return r}const Wf=C.createContext({});function w8(n,e){if(Uf(n)){const{initial:t,animate:r}=n;return{initial:t===!1||mu(t)?t:void 0,animate:mu(r)?r:void 0}}return n.inherit!==!1?e:{}}function k8(n){const{initial:e,animate:t}=w8(n,C.useContext(Wf));return C.useMemo(()=>({initial:e,animate:t}),[ck(e),ck(t)])}function ck(n){return Array.isArray(n)?n.join(" "):n}const J0=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function vT(n,e,t){for(const r in e)!wn(e[r])&&!XE(r,t)&&(n[r]=e[r])}function _8({transformTemplate:n},e){return C.useMemo(()=>{const t=J0();return G0(t,e,n),Object.assign({},t.vars,t.style)},[e])}function S8(n,e){const t=n.style||{},r={};return vT(r,t,n),Object.assign(r,_8(n,e)),r}function E8(n,e){const t={},r=S8(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}const xT=()=>({...J0(),attrs:{}});function T8(n,e,t,r){const s=C.useMemo(()=>{const l=xT();return JE(l,e,eT(r),n.transformTemplate,n.style),{...l.attrs,style:{...l.style}}},[e]);if(n.style){const l={};vT(l,n.style,n),s.style={...l,...s.style}}return s}const I8=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Z0(n){return typeof n!="string"||n.includes("-")?!1:!!(I8.indexOf(n)>-1||/[A-Z]/u.test(n))}function C8(n,e,t,{latestValues:r},s,l=!1,c){const d=(c??Z0(n)?T8:E8)(e,r,s,n),m=b8(e,typeof n=="string",l),g=n!==C.Fragment?{...m,...d,ref:t}:{},{children:y}=e,x=C.useMemo(()=>wn(y)?y.get():y,[y]);return C.createElement(n,{...g,children:x})}function j8({scrapeMotionValuesFromProps:n,createRenderState:e},t,r,s){return{latestValues:A8(t,r,s,n),renderState:e()}}function A8(n,e,t,r){const s={},l=r(n,{});for(const x in l)s[x]=Ih(l[x]);let{initial:c,animate:h}=n;const d=Uf(n),m=WE(n);e&&m&&!d&&n.inherit!==!1&&(c===void 0&&(c=e.initial),h===void 0&&(h=e.animate));let g=t?t.initial===!1:!1;g=g||c===!1;const y=g?h:c;if(y&&typeof y!="boolean"&&!Ff(y)){const x=Array.isArray(y)?y:[y];for(let E=0;E<x.length;E++){const k=F0(n,x[E]);if(k){const{transitionEnd:S,transition:T,...P}=k;for(const M in P){let N=P[M];if(Array.isArray(N)){const F=g?N.length-1:0;N=N[F]}N!==null&&(s[M]=N)}for(const M in S)s[M]=S[M]}}}return s}const bT=n=>(e,t)=>{const r=C.useContext(Wf),s=C.useContext(zf),l=()=>j8(n,e,r,s);return t?l():k0(l)},R8=bT({scrapeMotionValuesFromProps:Q0,createRenderState:J0}),P8=bT({scrapeMotionValuesFromProps:tT,createRenderState:xT}),N8=Symbol.for("motionComponentSymbol");function D8(n,e,t){const r=C.useRef(t);C.useInsertionEffect(()=>{r.current=t});const s=C.useRef(null);return C.useCallback(l=>{var h;l&&((h=n.onMount)==null||h.call(n,l)),e&&(l?e.mount(l):e.unmount());const c=r.current;if(typeof c=="function")if(l){const d=c(l);typeof d=="function"&&(s.current=d)}else s.current?(s.current(),s.current=null):c(l);else c&&(c.current=l)},[e])}const wT=C.createContext({});function Wc(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function M8(n,e,t,r,s,l){var T,P;const{visualElement:c}=C.useContext(Wf),h=C.useContext(pT),d=C.useContext(zf),m=C.useContext(Y0).reducedMotion,g=C.useRef(null);r=r||h.renderer,!g.current&&r&&(g.current=r(n,{visualState:e,parent:c,props:t,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:m,isSVG:l}));const y=g.current,x=C.useContext(wT);y&&!y.projection&&s&&(y.type==="html"||y.type==="svg")&&V8(g.current,t,s,x);const E=C.useRef(!1);C.useInsertionEffect(()=>{y&&E.current&&y.update(t,d)});const k=t[CE],S=C.useRef(!!k&&!((T=window.MotionHandoffIsComplete)!=null&&T.call(window,k))&&((P=window.MotionHasOptimisedAnimation)==null?void 0:P.call(window,k)));return H2(()=>{y&&(E.current=!0,window.MotionIsMounted=!0,y.updateFeatures(),y.scheduleRenderMicrotask(),S.current&&y.animationState&&y.animationState.animateChanges())}),C.useEffect(()=>{y&&(!S.current&&y.animationState&&y.animationState.animateChanges(),S.current&&(queueMicrotask(()=>{var M;(M=window.MotionHandoffMarkAsComplete)==null||M.call(window,k)}),S.current=!1),y.enteringChildren=void 0)}),y}function V8(n,e,t,r){const{layoutId:s,layout:l,drag:c,dragConstraints:h,layoutScroll:d,layoutRoot:m,layoutCrossfade:g}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:kT(n.parent)),n.projection.setOptions({layoutId:s,layout:l,alwaysMeasureLayout:!!c||h&&Wc(h),visualElement:n,animationType:typeof l=="string"?l:"both",initialPromotionConfig:r,crossfade:g,layoutScroll:d,layoutRoot:m})}function kT(n){if(n)return n.options.allowProjection!==!1?n.projection:kT(n.parent)}function qp(n,{forwardMotionProps:e=!1,type:t}={},r,s){r&&y8(r);const l=t?t==="svg":Z0(n),c=l?P8:R8;function h(m,g){let y;const x={...C.useContext(Y0),...m,layoutId:L8(m)},{isStatic:E}=x,k=k8(m),S=c(m,E);if(!E&&$2){O8();const T=B8(x);y=T.MeasureLayout,k.visualElement=M8(n,S,x,s,T.ProjectionNode,l)}return o.jsxs(Wf.Provider,{value:k,children:[y&&k.visualElement?o.jsx(y,{visualElement:k.visualElement,...x}):null,C8(n,m,D8(S,k.visualElement,g),S,E,e,l)]})}h.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const d=C.forwardRef(h);return d[N8]=n,d}function L8({layoutId:n}){const e=C.useContext(w0).id;return e&&n!==void 0?e+"-"+n:n}function O8(n,e){C.useContext(pT).strict}function B8(n){const e=gT(),{drag:t,layout:r}=e;if(!t&&!r)return{};const s={...t,...r};return{MeasureLayout:t!=null&&t.isEnabled(n)||r!=null&&r.isEnabled(n)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function z8(n,e){if(typeof Proxy>"u")return qp;const t=new Map,r=(l,c)=>qp(l,c,n,e),s=(l,c)=>r(l,c);return new Proxy(s,{get:(l,c)=>c==="create"?r:(t.has(c)||t.set(c,qp(c,void 0,n,e)),t.get(c))})}const F8=(n,e)=>e.isSVG??Z0(n)?new xO(e):new fO(e,{allowProjection:n!==C.Fragment});class U8 extends ho{constructor(e){super(e),e.animationState||(e.animationState=SO(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Ff(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let W8=0;class $8 extends ho{constructor(){super(...arguments),this.id=W8++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);t&&!e&&s.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const H8={animation:{Feature:U8},exit:{Feature:$8}};function Du(n){return{point:{x:n.pageX,y:n.pageY}}}const K8=n=>e=>H0(e)&&n(e,Du(e));function eu(n,e,t,r){return pu(n,e,K8(t),r)}const _T=({current:n})=>n?n.ownerDocument.defaultView:null,uk=(n,e)=>Math.abs(n-e);function q8(n,e){const t=uk(n.x,e.x),r=uk(n.y,e.y);return Math.sqrt(t**2+r**2)}const dk=new Set(["auto","scroll"]);class ST{constructor(e,t,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:l=!1,distanceThreshold:c=3,element:h}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=E=>{this.handleScroll(E.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=Qp(this.lastMoveEventInfo,this.history),k=this.startEvent!==null,S=q8(E.offset,{x:0,y:0})>=this.distanceThreshold;if(!k&&!S)return;const{point:T}=E,{timestamp:P}=ln;this.history.push({...T,timestamp:P});const{onStart:M,onMove:N}=this.handlers;k||(M&&M(this.lastMoveEvent,E),this.startEvent=this.lastMoveEvent),N&&N(this.lastMoveEvent,E)},this.handlePointerMove=(E,k)=>{this.lastMoveEvent=E,this.lastMoveEventInfo=Gp(k,this.transformPagePoint),vt.update(this.updatePoint,!0)},this.handlePointerUp=(E,k)=>{this.end();const{onEnd:S,onSessionEnd:T,resumeAnimation:P}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&P&&P(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const M=Qp(E.type==="pointercancel"?this.lastMoveEventInfo:Gp(k,this.transformPagePoint),this.history);this.startEvent&&S&&S(E,M),T&&T(E,M)},!H0(e))return;this.dragSnapToOrigin=l,this.handlers=t,this.transformPagePoint=r,this.distanceThreshold=c,this.contextWindow=s||window;const d=Du(e),m=Gp(d,this.transformPagePoint),{point:g}=m,{timestamp:y}=ln;this.history=[{...g,timestamp:y}];const{onSessionStart:x}=t;x&&x(e,Qp(m,this.history)),this.removeListeners=Ru(eu(this.contextWindow,"pointermove",this.handlePointerMove),eu(this.contextWindow,"pointerup",this.handlePointerUp),eu(this.contextWindow,"pointercancel",this.handlePointerUp)),h&&this.startScrollTracking(h)}startScrollTracking(e){let t=e.parentElement;for(;t;){const r=getComputedStyle(t);(dk.has(r.overflowX)||dk.has(r.overflowY))&&this.scrollPositions.set(t,{x:t.scrollLeft,y:t.scrollTop}),t=t.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const t=this.scrollPositions.get(e);if(!t)return;const r=e===window,s=r?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},l={x:s.x-t.x,y:s.y-t.y};l.x===0&&l.y===0||(r?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=l.x,this.lastMoveEventInfo.point.y+=l.y):this.history.length>0&&(this.history[0].x-=l.x,this.history[0].y-=l.y),this.scrollPositions.set(e,s),vt.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),no(this.updatePoint)}}function Gp(n,e){return e?{point:e(n.point)}:n}function hk(n,e){return{x:n.x-e.x,y:n.y-e.y}}function Qp({point:n},e){return{point:n,delta:hk(n,ET(e)),offset:hk(n,G8(e)),velocity:Q8(e,.1)}}function G8(n){return n[0]}function ET(n){return n[n.length-1]}function Q8(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const s=ET(n);for(;t>=0&&(r=n[t],!(s.timestamp-r.timestamp>Xi(e)));)t--;if(!r)return{x:0,y:0};const l=yr(s.timestamp-r.timestamp);if(l===0)return{x:0,y:0};const c={x:(s.x-r.x)/l,y:(s.y-r.y)/l};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function Y8(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?St(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?St(t,n,r.max):Math.min(n,t)),n}function fk(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function X8(n,{top:e,left:t,bottom:r,right:s}){return{x:fk(n.x,t,s),y:fk(n.y,e,r)}}function mk(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function J8(n,e){return{x:mk(n.x,e.x),y:mk(n.y,e.y)}}function Z8(n,e){let t=.5;const r=In(n),s=In(e);return s>r?t=du(e.min,e.max-r,n.min):r>s&&(t=du(n.min,n.max-s,e.min)),_i(0,1,t)}function e9(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const ny=.35;function t9(n=ny){return n===!1?n=0:n===!0&&(n=ny),{x:pk(n,"left","right"),y:pk(n,"top","bottom")}}function pk(n,e,t){return{min:gk(n,e),max:gk(n,t)}}function gk(n,e){return typeof n=="number"?n:n[e]||0}const n9=new WeakMap;class r9{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Gt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const l=y=>{t?(this.stopAnimation(),this.snapToCursor(Du(y).point)):this.pauseAnimation()},c=(y,x)=>{this.stopAnimation();const{drag:E,dragPropagation:k,onDragStart:S}=this.getProps();if(E&&!k&&(this.openDragLock&&this.openDragLock(),this.openDragLock=$L(E),!this.openDragLock))return;this.latestPointerEvent=y,this.latestPanInfo=x,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),pr(P=>{let M=this.getAxisMotionValue(P).get()||0;if(wi.test(M)){const{projection:N}=this.visualElement;if(N&&N.layout){const F=N.layout.layoutBox[P];F&&(M=In(F)*(parseFloat(M)/100))}}this.originPoint[P]=M}),S&&vt.postRender(()=>S(y,x)),Qg(this.visualElement,"transform");const{animationState:T}=this.visualElement;T&&T.setActive("whileDrag",!0)},h=(y,x)=>{this.latestPointerEvent=y,this.latestPanInfo=x;const{dragPropagation:E,dragDirectionLock:k,onDirectionLock:S,onDrag:T}=this.getProps();if(!E&&!this.openDragLock)return;const{offset:P}=x;if(k&&this.currentDirection===null){this.currentDirection=i9(P),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",x.point,P),this.updateAxis("y",x.point,P),this.visualElement.render(),T&&T(y,x)},d=(y,x)=>{this.latestPointerEvent=y,this.latestPanInfo=x,this.stop(y,x),this.latestPointerEvent=null,this.latestPanInfo=null},m=()=>pr(y=>{var x;return this.getAnimationState(y)==="paused"&&((x=this.getAxisMotionValue(y).animation)==null?void 0:x.play())}),{dragSnapToOrigin:g}=this.getProps();this.panSession=new ST(e,{onSessionStart:l,onStart:c,onMove:h,onSessionEnd:d,resumeAnimation:m},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,distanceThreshold:r,contextWindow:_T(this.visualElement),element:this.visualElement.current})}stop(e,t){const r=e||this.latestPointerEvent,s=t||this.latestPanInfo,l=this.isDragging;if(this.cancel(),!l||!s||!r)return;const{velocity:c}=s;this.startAnimation(c);const{onDragEnd:h}=this.getProps();h&&vt.postRender(()=>h(r,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:s}=this.getProps();if(!r||!uh(e,s,this.currentDirection))return;const l=this.getAxisMotionValue(e);let c=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(c=Y8(c,this.constraints[e],this.elastic[e])),l.set(c)}resolveConstraints(){var l;const{dragConstraints:e,dragElastic:t}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(l=this.visualElement.projection)==null?void 0:l.layout,s=this.constraints;e&&Wc(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=X8(r.layoutBox,e):this.constraints=!1,this.elastic=t9(t),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&pr(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=e9(r.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Wc(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const l=aO(r,s.root,this.visualElement.getTransformPagePoint());let c=J8(s.layout.layoutBox,l);if(t){const h=t(iO(c));this.hasMutatedConstraints=!!h,h&&(c=KE(h))}return c}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:s,dragTransition:l,dragSnapToOrigin:c,onDragTransitionEnd:h}=this.getProps(),d=this.constraints||{},m=pr(g=>{if(!uh(g,t,this.currentDirection))return;let y=d&&d[g]||{};c&&(y={min:0,max:0});const x=s?200:1e6,E=s?40:1e7,k={type:"inertia",velocity:r?e[g]:0,bounceStiffness:x,bounceDamping:E,timeConstant:750,restDelta:1,restSpeed:10,...l,...y};return this.startAxisValueAnimation(g,k)});return Promise.all(m).then(h)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return Qg(this.visualElement,e),r.start(z0(e,r,0,t,this.visualElement,!1))}stopAnimation(){pr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){pr(e=>{var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[t];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){pr(t=>{const{drag:r}=this.getProps();if(!uh(t,r,this.currentDirection))return;const{projection:s}=this.visualElement,l=this.getAxisMotionValue(t);if(s&&s.layout){const{min:c,max:h}=s.layout.layoutBox[t],d=l.get()||0;l.set(e[t]-St(c,h,.5)+d)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!Wc(t)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};pr(c=>{const h=this.getAxisMotionValue(c);if(h&&this.constraints!==!1){const d=h.get();s[c]=Z8({min:d,max:d},this.constraints[c])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),pr(c=>{if(!uh(c,e,null))return;const h=this.getAxisMotionValue(c),{min:d,max:m}=this.constraints[c];h.set(St(d,m,s[c]))})}addListeners(){if(!this.visualElement.current)return;n9.set(this.visualElement,this);const e=this.visualElement.current,t=eu(e,"pointerdown",d=>{const{drag:m,dragListener:g=!0}=this.getProps();m&&g&&!zE(d.target)&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();Wc(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,l=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),vt.read(r);const c=pu(window,"resize",()=>this.scalePositionWithinConstraints()),h=s.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:m})=>{this.isDragging&&m&&(pr(g=>{const y=this.getAxisMotionValue(g);y&&(this.originPoint[g]+=d[g].translate,y.set(y.get()+d[g].translate))}),this.visualElement.render())}));return()=>{c(),t(),l(),h&&h()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:l=!1,dragElastic:c=ny,dragMomentum:h=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:s,dragConstraints:l,dragElastic:c,dragMomentum:h}}}function uh(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function i9(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class s9 extends ho{constructor(e){super(e),this.removeGroupControls=xr,this.removeListeners=xr,this.controls=new r9(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||xr}update(){const{dragControls:e}=this.node.getProps(),{dragControls:t}=this.node.prevProps||{};e!==t&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners()}}const yk=n=>(e,t)=>{n&&vt.postRender(()=>n(e,t))};class o9 extends ho{constructor(){super(...arguments),this.removePointerDownListener=xr}onPointerDown(e){this.session=new ST(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:_T(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:yk(e),onStart:yk(t),onMove:r,onEnd:(l,c)=>{delete this.session,s&&vt.postRender(()=>s(l,c))}}}mount(){this.removePointerDownListener=eu(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let Yp=!1;class a9 extends C.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:s}=this.props,{projection:l}=e;l&&(t.group&&t.group.add(l),r&&r.register&&s&&r.register(l),Yp&&l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),Ch.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:s,isPresent:l}=this.props,{projection:c}=r;return c&&(c.isPresent=l,Yp=!0,s||e.layoutDependency!==t||t===void 0||e.isPresent!==l?c.willUpdate():this.safeToRemove(),e.isPresent!==l&&(l?c.promote():c.relegate()||vt.postRender(()=>{const h=c.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),$0.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:s}=e;Yp=!0,s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function TT(n){const[e,t]=mT(),r=C.useContext(w0);return o.jsx(a9,{...n,layoutGroup:r,switchLayoutGroup:C.useContext(wT),isPresent:e,safeToRemove:t})}const l9={pan:{Feature:o9},drag:{Feature:s9,ProjectionNode:fT,MeasureLayout:TT}};function vk(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const s="onHover"+t,l=r[s];l&&vt.postRender(()=>l(e,Du(e)))}class c9 extends ho{mount(){const{current:e}=this.node;e&&(this.unmount=HL(e,(t,r)=>(vk(this.node,r,"Start"),s=>vk(this.node,s,"End"))))}unmount(){}}class u9 extends ho{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ru(pu(this.node.current,"focus",()=>this.onFocus()),pu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function xk(n,e,t){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const s="onTap"+(t==="End"?"":t),l=r[s];l&&vt.postRender(()=>l(e,Du(e)))}class d9 extends ho{mount(){const{current:e}=this.node;e&&(this.unmount=GL(e,(t,r)=>(xk(this.node,r,"Start"),(s,{success:l})=>xk(this.node,s,l?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const ry=new WeakMap,Xp=new WeakMap,h9=n=>{const e=ry.get(n.target);e&&e(n)},f9=n=>{n.forEach(h9)};function m9({root:n,...e}){const t=n||document;Xp.has(t)||Xp.set(t,{});const r=Xp.get(t),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(f9,{root:n,...e})),r[s]}function p9(n,e,t){const r=m9(e);return ry.set(n,t),r.observe(n),()=>{ry.delete(n),r.unobserve(n)}}const g9={some:0,all:1};class y9 extends ho{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:s="some",once:l}=e,c={root:t?t.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:g9[s]},h=d=>{const{isIntersecting:m}=d;if(this.isInView===m||(this.isInView=m,l&&!m&&this.hasEnteredView))return;m&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",m);const{onViewportEnter:g,onViewportLeave:y}=this.node.getProps(),x=m?g:y;x&&x(d)};return p9(this.node.current,c,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(v9(e,t))&&this.startObserver()}unmount(){}}function v9({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const x9={inView:{Feature:y9},tap:{Feature:d9},focus:{Feature:u9},hover:{Feature:c9}},b9={layout:{ProjectionNode:fT,MeasureLayout:TT}},w9={...H8,...x9,...l9,...b9},pe=z8(w9,F8);function Wn(){var k;const n=Er(),e=io(),{user:t,profile:r,isAuthenticated:s,isAdmin:l,isBusiness:c}=Gr(),[h,d]=C.useState(!1),[m,g]=C.useState(!1),y=[{to:"/",label:"Home"},{to:"/map",label:"Directory"},{to:"/demo",label:"See Demo"},{to:"/about",label:"How It Works"},{to:"/businesses",label:"For Businesses"}],x=async()=>{await j2(),g(!1),e("/")},E=S=>n.pathname===S;return o.jsxs("header",{style:{background:"var(--kb-white)",borderBottom:"1px solid var(--kb-gray-200)",position:"sticky",top:0,zIndex:100},children:[o.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 1rem",display:"flex",alignItems:"center",justifyContent:"space-between",height:"70px"},children:[o.jsxs(he,{to:s?"/map":"/",style:{display:"flex",alignItems:"center",gap:"0.5rem",textDecoration:"none"},children:[o.jsx("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, var(--kb-navy) 0%, var(--kb-navy-light) 100%)",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--kb-gold)",fontFamily:"var(--font-display)",fontWeight:"700",fontSize:"1.2rem"},children:"K"}),o.jsxs("div",{children:[o.jsx("div",{style:{fontFamily:"var(--font-display)",fontWeight:"600",color:"var(--kb-navy)",fontSize:"1.1rem",lineHeight:1.1},children:"Kinderbucks"}),o.jsx("div",{style:{fontSize:"0.65rem",color:"var(--kb-gray-500)",textTransform:"uppercase",letterSpacing:"0.1em"},children:"Village Currency"})]})]}),o.jsx("nav",{style:{display:"flex",alignItems:"center",gap:"2rem"},className:"desktop-nav",children:y.map(S=>o.jsx(he,{to:S.to,style:{color:E(S.to)?"var(--kb-navy)":"var(--kb-gray-500)",fontWeight:E(S.to)?"600":"500",fontSize:"0.95rem",transition:"color 0.2s",borderBottom:E(S.to)?"2px solid var(--kb-gold)":"2px solid transparent",paddingBottom:"4px"},children:S.label},S.to))}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},className:"desktop-nav",children:[s?o.jsx(o.Fragment,{children:o.jsxs("div",{style:{position:"relative"},children:[o.jsxs("button",{onClick:()=>g(!m),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"var(--kb-gray-100)",border:"none",borderRadius:"8px",cursor:"pointer",color:"var(--kb-navy)",fontWeight:"500"},children:[o.jsx(cl,{size:18}),(r==null?void 0:r.displayName)||((k=t.email)==null?void 0:k.split("@")[0])]}),m&&o.jsxs("div",{style:{position:"absolute",right:0,top:"100%",marginTop:"0.5rem",background:"white",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",minWidth:"180px",zIndex:200,overflow:"hidden"},children:[o.jsxs(he,{to:"/card",onClick:()=>g(!1),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",color:"var(--kb-gold-dark)",textDecoration:"none",borderBottom:"1px solid var(--kb-gray-100)",fontWeight:"600",background:"rgba(201, 162, 39, 0.1)"},children:[o.jsx(Ng,{size:16})," My OK Card"]}),o.jsxs(he,{to:"/profile",onClick:()=>g(!1),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",color:"var(--kb-gray-700)",textDecoration:"none",borderBottom:"1px solid var(--kb-gray-100)"},children:[o.jsx(cl,{size:16})," My Profile"]}),c&&o.jsxs(he,{to:"/business/dashboard",onClick:()=>g(!1),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",color:"#2563eb",textDecoration:"none",borderBottom:"1px solid var(--kb-gray-100)"},children:[o.jsx(Lt,{size:16})," Business Dashboard"]}),l&&o.jsxs(he,{to:"/admin/dashboard",onClick:()=>g(!1),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",color:"#dc2626",textDecoration:"none",borderBottom:"1px solid var(--kb-gray-100)"},children:[o.jsx(Yh,{size:16})," Admin Portal"]}),o.jsxs("button",{onClick:x,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",color:"var(--kb-gray-600)",background:"none",border:"none",cursor:"pointer",width:"100%",textAlign:"left"},children:[o.jsx(Dg,{size:16})," Sign Out"]})]})]})}):o.jsx(o.Fragment,{children:o.jsxs(he,{to:"/login",className:"btn btn-secondary",style:{padding:"0.5rem 1rem",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(wl,{size:16})," Sign In"]})}),o.jsx(he,{to:"/exchange",className:"btn btn-gold",style:{padding:"0.5rem 1rem",fontSize:"0.9rem"},children:"Get Kinderbucks"})]}),o.jsx("button",{onClick:()=>d(!h),className:"mobile-menu-btn",style:{display:"none",background:"none",border:"none",padding:"0.5rem",cursor:"pointer"},children:o.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:h?o.jsx("path",{d:"M6 6l12 12M6 18L18 6"}):o.jsx("path",{d:"M3 12h18M3 6h18M3 18h18"})})})]}),h&&o.jsxs("div",{className:"mobile-menu",style:{background:"var(--kb-white)",borderTop:"1px solid var(--kb-gray-200)",padding:"1rem"},children:[y.map(S=>o.jsx(he,{to:S.to,onClick:()=>d(!1),style:{display:"block",padding:"0.75rem 0",color:E(S.to)?"var(--kb-navy)":"var(--kb-gray-700)",fontWeight:E(S.to)?"600":"400",borderBottom:"1px solid var(--kb-gray-100)"},children:S.label},S.to)),o.jsxs("div",{style:{marginTop:"1rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:[s?o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{padding:"0.75rem",background:"var(--kb-gray-50)",borderRadius:"8px",marginBottom:"0.5rem"},children:[o.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:(r==null?void 0:r.displayName)||t.email}),o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:(r==null?void 0:r.role)||"member"})]}),o.jsxs(he,{to:"/profile",onClick:()=>d(!1),className:"btn btn-secondary",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[o.jsx(cl,{size:16})," My Profile"]}),c&&o.jsxs(he,{to:"/business/dashboard",onClick:()=>d(!1),className:"btn",style:{background:"#2563eb",color:"white",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[o.jsx(Lt,{size:16})," Business Dashboard"]}),l&&o.jsxs(he,{to:"/admin/dashboard",onClick:()=>d(!1),className:"btn",style:{background:"#dc2626",color:"white",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[o.jsx(Yh,{size:16})," Admin Portal"]}),o.jsxs("button",{onClick:()=>{x(),d(!1)},className:"btn btn-secondary",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[o.jsx(Dg,{size:16})," Sign Out"]})]}):o.jsxs(he,{to:"/login",onClick:()=>d(!1),className:"btn btn-secondary",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[o.jsx(wl,{size:16})," Sign In"]}),o.jsx(he,{to:"/exchange",onClick:()=>d(!1),className:"btn btn-gold",children:"Get Kinderbucks"})]})]}),o.jsx("style",{children:`
        @media (max-width: 768px) {
          .desktop-nav {
            display: none !important;
          }
          .mobile-menu-btn {
            display: block !important;
          }
        }
      `})]})}function $n(){return o.jsxs("footer",{style:{background:"var(--kb-navy)",color:"var(--kb-white)",padding:"3rem 1rem 2rem",marginTop:"auto"},children:[o.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"2rem"},children:[o.jsxs("div",{children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[o.jsx("div",{style:{width:"36px",height:"36px",background:"var(--kb-gold)",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--kb-navy)",fontFamily:"var(--font-display)",fontWeight:"700"},children:"K"}),o.jsx("span",{style:{fontFamily:"var(--font-display)",fontWeight:"600",fontSize:"1.1rem"},children:"Kinderbucks"})]}),o.jsx("p",{style:{color:"var(--kb-gray-300)",fontSize:"0.9rem",lineHeight:1.6},children:"Village of Kinderhook's local currency program. Supporting local businesses, strengthening community."}),o.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.8rem",marginTop:"1rem"},children:"Est. 2026"})]}),o.jsxs("div",{children:[o.jsx("h4",{style:{color:"var(--kb-gold)",marginBottom:"1rem",fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Quick Links"}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[o.jsx(he,{to:"/demo",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"See Demo"}),o.jsx(he,{to:"/about",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"How It Works"}),o.jsx(he,{to:"/benefits",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"Member Benefits"}),o.jsx(he,{to:"/exchange",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"Get Kinderbucks"}),o.jsx(he,{to:"/businesses",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"For Businesses"})]})]}),o.jsxs("div",{children:[o.jsx("h4",{style:{color:"var(--kb-gold)",marginBottom:"1rem",fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"For Members"}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[o.jsx(he,{to:"/account",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"My Account"}),o.jsx(he,{to:"/profile",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"Kinderhooker Profile"}),o.jsx(he,{to:"/scan/KB-0001",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"Verify Currency"})]})]}),o.jsxs("div",{children:[o.jsx("h4",{style:{color:"var(--kb-gold)",marginBottom:"1rem",fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Contact"}),o.jsxs("p",{style:{color:"var(--kb-gray-300)",fontSize:"0.9rem",lineHeight:1.8},children:["Village of Kinderhook",o.jsx("br",{}),"Columbia County, NY"]})]})]}),o.jsxs("div",{style:{maxWidth:"1200px",margin:"2rem auto 0",paddingTop:"2rem",borderTop:"1px solid var(--kb-navy-light)",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"1rem"},children:[o.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.8rem"},children:" 2026 Kinderbucks. A Harmonic Systems project."}),o.jsx("div",{style:{display:"flex",gap:"1.5rem"},children:o.jsx(he,{to:"/admin/dashboard",style:{color:"var(--kb-gray-500)",fontSize:"0.8rem"},children:"Admin"})})]})]})}function k9(){const{isAuthenticated:n,loading:e}=Gr(),t=io();return C.useEffect(()=>{!e&&n&&t("/card",{replace:!0})},[n,e,t]),e?null:o.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[o.jsx(Wn,{}),o.jsx("section",{style:{background:"linear-gradient(135deg, var(--kb-navy) 0%, var(--kb-navy-light) 100%)",color:"var(--kb-white)",padding:"4rem 1rem",textAlign:"center"},children:o.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},style:{maxWidth:"800px",margin:"0 auto"},children:[o.jsx("div",{style:{display:"inline-block",background:"rgba(201, 162, 39, 0.2)",color:"var(--kb-gold)",padding:"0.5rem 1rem",borderRadius:"100px",fontSize:"0.85rem",fontWeight:"600",marginBottom:"1.5rem"},children:"Village of Kinderhook  Est. 2026"}),o.jsxs("h1",{style:{fontFamily:"var(--font-display)",fontSize:"clamp(2.5rem, 5vw, 3.5rem)",fontWeight:"700",marginBottom:"1.5rem",lineHeight:1.2},children:["Strengthen Our Village,",o.jsx("br",{}),o.jsx("span",{style:{color:"var(--kb-gold)"},children:"One Kinderbuck at a Time"})]}),o.jsx("p",{style:{fontSize:"1.2rem",color:"var(--kb-gray-300)",marginBottom:"2rem",maxWidth:"600px",margin:"0 auto 2rem"},children:"A local currency program that keeps money circulating in Kinderhook, rewards loyal customers, and strengthens our community economy."}),o.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[o.jsx(he,{to:"/exchange",className:"btn btn-gold",style:{padding:"1rem 2rem",fontSize:"1.1rem"},children:"Get Kinderbucks"}),o.jsx(he,{to:"/demo",className:"btn btn-outline",style:{padding:"1rem 2rem",fontSize:"1.1rem",borderColor:"var(--kb-white)",color:"var(--kb-white)"},children:"See Demo"})]})]})}),o.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:o.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[o.jsxs("div",{style:{textAlign:"center",marginBottom:"3rem"},children:[o.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"How Kinderbucks Works"}),o.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"Simple steps to start supporting local"})]}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"2rem"},children:[{step:"1",title:"Exchange",description:"Convert USD to Kinderbucks at participating locations or online. Members get bonus rates!",Icon:Vf},{step:"2",title:"Spend Local",description:"Use Kinderbucks at any of our 19+ participating village businesses.",Icon:Lt},{step:"3",title:"Check In",description:"Scan QR codes when you visit to build your Kinderhooker status and unlock rewards.",Icon:Ur},{step:"4",title:"Earn More",description:"Higher tiers mean better exchange rates. Village Patrons get 25% bonus!",Icon:to}].map((r,s)=>o.jsxs(pe.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:s*.1},viewport:{once:!0},className:"card",style:{textAlign:"center"},children:[o.jsx("div",{style:{width:"60px",height:"60px",background:"var(--kb-navy)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:o.jsx(r.Icon,{size:28,color:"var(--kb-gold)",strokeWidth:1.5})}),o.jsxs("div",{style:{color:"var(--kb-gold)",fontSize:"0.8rem",fontWeight:"600",marginBottom:"0.25rem"},children:["STEP ",r.step]}),o.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:r.title}),o.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.95rem"},children:r.description})]},s))})]})}),o.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:o.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[o.jsxs("div",{style:{textAlign:"center",marginBottom:"3rem"},children:[o.jsx("div",{className:"badge badge-gold",style:{marginBottom:"1rem"},children:"OK Membership"}),o.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"Become a Kinderhooker"}),o.jsx("p",{style:{color:"var(--kb-gray-500)",maxWidth:"600px",margin:"0 auto"},children:"Visit local businesses to level up your membership and unlock better exchange rates"})]}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"1.5rem"},children:[{name:"Curious",businesses:"1+",bonus:"10%",color:"#888888",Icon:hn},{name:"Hooked",businesses:"5+",bonus:"15%",color:"#2e7d32",Icon:Sr},{name:"Line & Sinker",businesses:"10+",bonus:"20%",color:"#1565c0",Icon:_r},{name:"Village Patron",businesses:"15+",bonus:"25%",color:"#c9a227",Icon:sr,featured:!0}].map((r,s)=>o.jsxs(pe.div,{initial:{opacity:0,scale:.95},whileInView:{opacity:1,scale:1},transition:{delay:s*.1},viewport:{once:!0},className:"card",style:{textAlign:"center",border:r.featured?"2px solid var(--kb-gold)":void 0,position:"relative",overflow:"hidden"},children:[r.featured&&o.jsx("div",{style:{position:"absolute",top:"10px",right:"-30px",background:"var(--kb-gold)",color:"var(--kb-navy)",padding:"0.25rem 2rem",fontSize:"0.7rem",fontWeight:"600",transform:"rotate(45deg)"},children:"BEST"}),o.jsx("div",{style:{width:"50px",height:"50px",background:`${r.color}15`,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 0.75rem"},children:o.jsx(r.Icon,{size:24,color:r.color,strokeWidth:1.5})}),o.jsx("h3",{style:{color:r.color,marginBottom:"0.5rem"},children:r.name}),o.jsxs("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem",marginBottom:"1rem"},children:[r.businesses," businesses visited"]}),o.jsxs("div",{style:{background:`${r.color}15`,borderRadius:"8px",padding:"1rem"},children:[o.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:r.color},children:r.bonus}),o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:"Exchange Bonus"})]})]},s))}),o.jsx("div",{style:{textAlign:"center",marginTop:"2rem"},children:o.jsx(he,{to:"/profile",className:"btn btn-primary",children:"View My Progress"})})]})}),o.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:o.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[o.jsxs("div",{style:{textAlign:"center",marginBottom:"3rem"},children:[o.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"Participating Businesses"}),o.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"Support these local Kinderhook establishments"})]}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"1rem"},children:["The Aviary","Morningbird Cafe","Saisonnier","Broad Street Bagel","Brooklyn Pizzeria","Isola Wine Bar","OK Pantry","Kinderhook Books","Samascott's","The School Gallery","Old Dutch Inn","Muse Aesthetics"].map((r,s)=>o.jsx("div",{style:{background:"var(--kb-white)",borderRadius:"8px",padding:"1rem",textAlign:"center",fontSize:"0.9rem",color:"var(--kb-gray-700)",border:"1px solid var(--kb-gray-200)"},children:r},s))}),o.jsx("div",{style:{textAlign:"center",marginTop:"2rem"},children:o.jsx(he,{to:"/businesses",className:"btn btn-secondary",children:"View All 19 Businesses "})})]})}),o.jsx("section",{style:{padding:"4rem 1rem",background:"linear-gradient(135deg, var(--kb-green) 0%, var(--kb-green-light) 100%)",color:"var(--kb-white)",textAlign:"center"},children:o.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto"},children:[o.jsx("h2",{style:{marginBottom:"1rem"},children:"Ready to Support Local?"}),o.jsx("p",{style:{opacity:.9,marginBottom:"2rem"},children:"Join the Kinderbucks program today and start earning rewards while strengthening our village economy."}),o.jsx("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:o.jsx(he,{to:"/exchange",className:"btn btn-gold",style:{padding:"1rem 2rem"},children:"Get Your First Kinderbucks"})})]})}),o.jsx($n,{})]})}const bk={customer:{id:"customer",title:"For Customers",subtitle:"Start supporting local in minutes",Icon:Bf,color:"var(--kb-green)",minCommitment:"Start with just $10"},business:{id:"business",title:"For Business Owners",subtitle:"Accept Kinderbucks and grow your customer base",Icon:Lt,color:"var(--kb-navy)",minCommitment:"No upfront cost to join"},association:{id:"association",title:"For the Business Association",subtitle:"Strengthen the village economy together",Icon:LM,color:"var(--kb-gold-dark)",minCommitment:"Community-driven program"}},wk=[{number:1,title:"Get Your First Kinderbucks",description:"Visit any exchange location with USD. Start with as little as $10.",visual:"exchange",details:["Visit Village Hall, OK Pantry, or The Aviary","Exchange any amount ($10, $20, $50, $100)","New members get 10% bonus automatically","Receive physical Kinderbucks bills"],tip:"First-time? You'll get $11 in Kinderbucks for every $10 USD!"},{number:2,title:"Spend at Local Businesses",description:"Use Kinderbucks like cash at 19+ participating village businesses.",visual:"spend",details:["Accepted at restaurants, shops, and services","Works just like regular currency","Businesses give change in Kinderbucks when possible","100% of your money stays in Kinderhook"],tip:"Check the business directory to plan your local shopping route!"},{number:3,title:"Check In When You Visit",description:"Scan QR codes at businesses to track your visits and earn rewards.",visual:"checkin",details:["Look for the Kinderbucks QR code at each business","Scan with your phone camera","Each unique business counts toward your tier","One check-in per business per hour"],tip:"You don't need an app - just scan and go!"},{number:4,title:"Level Up Your Membership",description:"Visit more businesses to unlock better exchange rates.",visual:"tiers",details:["Curious (1+ businesses): 10% bonus","Hooked (5+ businesses): 15% bonus","Line & Sinker (10+ businesses): 20% bonus","Village Patron (15+ businesses): 25% bonus"],tip:"At 25% bonus, $100 USD gets you $125 in Kinderbucks!"}],_9=[{number:1,title:"Register Your Business",description:"Join the program with no upfront costs or monthly fees.",visual:"register",details:["Contact the Business Association to register","Receive your unique business QR code","Get listed in the Kinderbucks directory","No fees, no contracts, no risk"],tip:"Registration takes less than 10 minutes!"},{number:2,title:"Accept Kinderbucks Payments",description:"Accept Kinderbucks just like you accept cash.",visual:"accept",details:["Kinderbucks bills have QR codes for verification","Scan any bill to verify authenticity","Make change in Kinderbucks when possible","Train staff in minutes"],tip:"Verification is instant - just scan the QR code on any bill."},{number:3,title:"Build Customer Loyalty",description:"Customers check in at your business, driving repeat visits.",visual:"loyalty",details:["Display your QR code prominently","Customers scan to record their visit","Each check-in helps customers level up","Higher tiers = more valuable customers"],tip:"Village Patrons have visited 15+ businesses - they're your most loyal customers!"},{number:4,title:"Redeem or Recirculate",description:"Use Kinderbucks at other businesses or redeem for USD.",visual:"redeem",details:["Spend at other participating businesses","Pay suppliers who accept Kinderbucks","Redeem for USD at exchange locations (1:1)","Keep money circulating locally"],tip:"Most businesses find it easier to spend than redeem - the money keeps moving!"}],S9=[{number:1,title:"Program Overview",description:"A local currency that strengthens the village economy.",visual:"overview",details:["Kinderbucks is a complementary currency for Kinderhook","Backed 1:1 by USD in a dedicated account","Bonus rates funded by interest and community investment","QR verification prevents counterfeiting"],tip:"Complementary currencies have been used successfully in communities worldwide."},{number:2,title:"Economic Impact",description:"Money that circulates locally multiplies its impact.",visual:"impact",details:["Studies show local currency circulates 3-4x more than USD","$10,000 in circulation = $30,000-40,000 in local economic activity",'Encourages "buy local" behavior',"Builds connections between businesses and residents"],tip:"Every Kinderbuck spent is guaranteed to stay in the village."},{number:3,title:"Member Engagement",description:"Tier system drives exploration of local businesses.",visual:"engagement",details:["Gamification encourages visiting new businesses","Tier bonuses reward loyal community members","Check-in data shows foot traffic patterns","Members become ambassadors for local spending"],tip:"The average member discovers 3 new businesses they didn't know about."},{number:4,title:"Administration & Growth",description:"Simple management with room to scale.",visual:"admin",details:["Digital dashboard tracks circulation and usage","New businesses join with minimal onboarding","Seasonal promotions drive engagement","Expand to neighboring communities over time"],tip:"The program is designed to be self-sustaining once established."}];function E9({step:n,isActive:e,onClick:t}){return o.jsx(pe.div,{onClick:t,whileHover:{scale:1.02},whileTap:{scale:.98},style:{background:e?"var(--kb-navy)":"var(--kb-white)",color:e?"var(--kb-white)":"var(--kb-gray-700)",borderRadius:"12px",padding:"1.25rem",cursor:"pointer",border:e?"none":"1px solid var(--kb-gray-200)",transition:"all 0.2s"},children:o.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[o.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"50%",background:e?"var(--kb-gold)":"var(--kb-gray-100)",color:e?"var(--kb-navy)":"var(--kb-gray-500)",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"700",fontSize:"1rem",flexShrink:0},children:n.number}),o.jsxs("div",{children:[o.jsx("h4",{style:{margin:0,fontSize:"1rem",fontWeight:"600",marginBottom:"0.25rem"},children:n.title}),o.jsx("p",{style:{margin:0,fontSize:"0.85rem",opacity:.8},children:n.description})]})]})})}function T9({step:n,audienceColor:e}){return o.jsxs(pe.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},style:{background:"var(--kb-white)",borderRadius:"16px",padding:"2rem",height:"100%",display:"flex",flexDirection:"column"},children:[o.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",background:`${e}15`,color:e,padding:"0.5rem 1rem",borderRadius:"100px",fontSize:"0.8rem",fontWeight:"600",marginBottom:"1rem",alignSelf:"flex-start"},children:["STEP ",n.number]}),o.jsx("h3",{style:{color:"var(--kb-navy)",fontSize:"1.5rem",marginBottom:"0.5rem"},children:n.title}),o.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem",fontSize:"1.05rem"},children:n.description}),o.jsxs("div",{style:{background:"var(--kb-cream)",borderRadius:"12px",padding:"1.5rem",marginBottom:"1.5rem",flex:1},children:[o.jsx("h4",{style:{color:"var(--kb-navy)",fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"1rem"},children:"What This Looks Like"}),o.jsx("ul",{style:{margin:0,padding:0,listStyle:"none"},children:n.details.map((t,r)=>o.jsxs("li",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",marginBottom:"0.75rem",color:"var(--kb-gray-700)"},children:[o.jsx("span",{style:{color:"var(--kb-green)",fontWeight:"600"},children:""}),t]},r))})]}),o.jsxs("div",{style:{background:"linear-gradient(135deg, var(--kb-gold) 0%, #d4af37 100%)",borderRadius:"12px",padding:"1rem 1.25rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("span",{style:{fontSize:"1.5rem"},children:""}),o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"600",color:"var(--kb-navy)",fontSize:"0.8rem",textTransform:"uppercase",marginBottom:"0.25rem"},children:"Pro Tip"}),o.jsx("div",{style:{color:"var(--kb-navy)",fontSize:"0.95rem"},children:n.tip})]})]})]},n.number)}function I9({audience:n,steps:e}){const[t,r]=C.useState(0);return o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1.5fr",gap:"2rem",minHeight:"500px"},className:"demo-flow-grid",children:[o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:e.map((s,l)=>o.jsx(E9,{step:s,isActive:t===l,onClick:()=>r(l)},s.number))}),o.jsx(X0,{mode:"wait",children:o.jsx(T9,{step:e[t],audienceColor:n.color},t)})]})}function dh({icon:n,title:e,description:t}){return o.jsxs("div",{style:{background:"var(--kb-white)",borderRadius:"12px",padding:"1.5rem",textAlign:"center",border:"1px solid var(--kb-gray-200)"},children:[o.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.75rem"},children:n}),o.jsx("h4",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:e}),o.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem",margin:0},children:t})]})}function C9(){const[n,e]=C.useState("customer"),t=bk[n],r=()=>{switch(n){case"customer":return wk;case"business":return _9;case"association":return S9;default:return wk}},l=(()=>{switch(n){case"customer":return{to:"/exchange",text:"Get Your First Kinderbucks",secondary:"/businesses",secondaryText:"Browse Businesses"};case"business":return{to:"/businesses",text:"Register Your Business",secondary:"/about",secondaryText:"Learn More"};case"association":return{to:"/about",text:"Full Program Details",secondary:"/admin/dashboard",secondaryText:"View Dashboard"};default:return{to:"/exchange",text:"Get Started"}}})();return o.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[o.jsx(Wn,{}),o.jsx("section",{style:{background:"linear-gradient(135deg, var(--kb-navy) 0%, var(--kb-navy-light) 100%)",color:"var(--kb-white)",padding:"3rem 1rem",textAlign:"center"},children:o.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{maxWidth:"800px",margin:"0 auto"},children:[o.jsx("div",{className:"badge badge-gold",style:{marginBottom:"1rem"},children:"Interactive Demo"}),o.jsx("h1",{style:{fontFamily:"var(--font-display)",fontSize:"clamp(2rem, 4vw, 2.75rem)",fontWeight:"700",marginBottom:"1rem"},children:"See How Kinderbucks Works"}),o.jsx("p",{style:{fontSize:"1.15rem",color:"var(--kb-gray-300)",maxWidth:"600px",margin:"0 auto"},children:"Choose your perspective below to see a step-by-step walkthrough of the Kinderbucks program."})]})}),o.jsx("section",{style:{background:"var(--kb-white)",padding:"2rem 1rem",borderBottom:"1px solid var(--kb-gray-200)"},children:o.jsx("div",{style:{maxWidth:"900px",margin:"0 auto"},children:o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem"},children:Object.values(bk).map(c=>{const h=c.Icon;return o.jsxs(pe.button,{onClick:()=>e(c.id),whileHover:{scale:1.02},whileTap:{scale:.98},style:{background:n===c.id?`linear-gradient(135deg, ${c.color} 0%, ${c.color}dd 100%)`:"var(--kb-cream)",color:n===c.id?"var(--kb-white)":"var(--kb-gray-700)",border:n===c.id?"none":"2px solid var(--kb-gray-200)",borderRadius:"12px",padding:"1.5rem",cursor:"pointer",textAlign:"left",transition:"all 0.2s"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[o.jsx(h,{size:28,strokeWidth:1.5}),o.jsx("span",{style:{fontWeight:"600",fontSize:"1.1rem"},children:c.title})]}),o.jsx("p",{style:{margin:0,fontSize:"0.9rem",opacity:.85},children:c.subtitle}),o.jsx("div",{style:{marginTop:"0.75rem",fontSize:"0.8rem",fontWeight:"600",opacity:n===c.id?1:.7},children:c.minCommitment})]},c.id)})})})}),o.jsx("section",{style:{background:"var(--kb-cream)",padding:"3rem 1rem",flex:1},children:o.jsx("div",{style:{maxWidth:"1100px",margin:"0 auto"},children:o.jsx(X0,{mode:"wait",children:o.jsx(pe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:o.jsx(I9,{audience:t,steps:r()})},n)})})}),o.jsx("section",{style:{background:"var(--kb-white)",padding:"3rem 1rem",borderTop:"1px solid var(--kb-gray-200)"},children:o.jsxs("div",{style:{maxWidth:"900px",margin:"0 auto"},children:[o.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[o.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"Minimal Commitment, Maximum Impact"}),o.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"Kinderbucks is designed to be easy to try and rewarding to use"})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem"},children:[o.jsx(dh,{icon:"",title:"Start with $10",description:"No minimum exchange amount. Try it with pocket change."}),o.jsx(dh,{icon:"",title:"No Fees",description:"No signup fees, no monthly costs, no hidden charges."}),o.jsx(dh,{icon:"",title:"Full Refund",description:"Businesses can redeem Kinderbucks for USD 1:1 anytime."}),o.jsx(dh,{icon:"",title:"Instant Setup",description:"Customers start immediately. Businesses onboard in minutes."})]})]})}),o.jsx("section",{style:{background:t.color,padding:"3rem 1rem",textAlign:"center"},children:o.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto"},children:[o.jsx("h2",{style:{color:"var(--kb-white)",marginBottom:"0.5rem"},children:"Ready to Get Started?"}),o.jsxs("p",{style:{color:"rgba(255,255,255,0.85)",marginBottom:"2rem"},children:[n==="customer"&&"Join hundreds of Kinderhook residents supporting local businesses.",n==="business"&&"Join 19 local businesses already accepting Kinderbucks.",n==="association"&&"See the full details of how the program operates."]}),o.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[o.jsx(he,{to:l.to,className:"btn",style:{background:"var(--kb-white)",color:t.color,padding:"1rem 2rem",fontSize:"1.1rem",fontWeight:"600"},children:l.text}),l.secondary&&o.jsx(he,{to:l.secondary,className:"btn btn-outline",style:{borderColor:"var(--kb-white)",color:"var(--kb-white)",padding:"1rem 2rem",fontSize:"1.1rem"},children:l.secondaryText})]})]})}),o.jsx($n,{}),o.jsx("style",{children:`
        @media (max-width: 900px) {
          .demo-flow-grid {
            grid-template-columns: 1fr !important;
            gap: 1.5rem !important;
          }
        }
      `})]})}var j9=Object.defineProperty,of=Object.getOwnPropertySymbols,IT=Object.prototype.hasOwnProperty,CT=Object.prototype.propertyIsEnumerable,kk=(n,e,t)=>e in n?j9(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,iy=(n,e)=>{for(var t in e||(e={}))IT.call(e,t)&&kk(n,t,e[t]);if(of)for(var t of of(e))CT.call(e,t)&&kk(n,t,e[t]);return n},sy=(n,e)=>{var t={};for(var r in n)IT.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&of)for(var r of of(n))e.indexOf(r)<0&&CT.call(n,r)&&(t[r]=n[r]);return t};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var ra;(n=>{const e=class Ke{constructor(d,m,g,y){if(this.version=d,this.errorCorrectionLevel=m,this.modules=[],this.isFunction=[],d<Ke.MIN_VERSION||d>Ke.MAX_VERSION)throw new RangeError("Version value out of range");if(y<-1||y>7)throw new RangeError("Mask value out of range");this.size=d*4+17;let x=[];for(let k=0;k<this.size;k++)x.push(!1);for(let k=0;k<this.size;k++)this.modules.push(x.slice()),this.isFunction.push(x.slice());this.drawFunctionPatterns();const E=this.addEccAndInterleave(g);if(this.drawCodewords(E),y==-1){let k=1e9;for(let S=0;S<8;S++){this.applyMask(S),this.drawFormatBits(S);const T=this.getPenaltyScore();T<k&&(y=S,k=T),this.applyMask(S)}}s(0<=y&&y<=7),this.mask=y,this.applyMask(y),this.drawFormatBits(y),this.isFunction=[]}static encodeText(d,m){const g=n.QrSegment.makeSegments(d);return Ke.encodeSegments(g,m)}static encodeBinary(d,m){const g=n.QrSegment.makeBytes(d);return Ke.encodeSegments([g],m)}static encodeSegments(d,m,g=1,y=40,x=-1,E=!0){if(!(Ke.MIN_VERSION<=g&&g<=y&&y<=Ke.MAX_VERSION)||x<-1||x>7)throw new RangeError("Invalid value");let k,S;for(k=g;;k++){const N=Ke.getNumDataCodewords(k,m)*8,F=c.getTotalBits(d,k);if(F<=N){S=F;break}if(k>=y)throw new RangeError("Data too long")}for(const N of[Ke.Ecc.MEDIUM,Ke.Ecc.QUARTILE,Ke.Ecc.HIGH])E&&S<=Ke.getNumDataCodewords(k,N)*8&&(m=N);let T=[];for(const N of d){t(N.mode.modeBits,4,T),t(N.numChars,N.mode.numCharCountBits(k),T);for(const F of N.getData())T.push(F)}s(T.length==S);const P=Ke.getNumDataCodewords(k,m)*8;s(T.length<=P),t(0,Math.min(4,P-T.length),T),t(0,(8-T.length%8)%8,T),s(T.length%8==0);for(let N=236;T.length<P;N^=253)t(N,8,T);let M=[];for(;M.length*8<T.length;)M.push(0);return T.forEach((N,F)=>M[F>>>3]|=N<<7-(F&7)),new Ke(k,m,M,x)}getModule(d,m){return 0<=d&&d<this.size&&0<=m&&m<this.size&&this.modules[m][d]}getModules(){return this.modules}drawFunctionPatterns(){for(let g=0;g<this.size;g++)this.setFunctionModule(6,g,g%2==0),this.setFunctionModule(g,6,g%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const d=this.getAlignmentPatternPositions(),m=d.length;for(let g=0;g<m;g++)for(let y=0;y<m;y++)g==0&&y==0||g==0&&y==m-1||g==m-1&&y==0||this.drawAlignmentPattern(d[g],d[y]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(d){const m=this.errorCorrectionLevel.formatBits<<3|d;let g=m;for(let x=0;x<10;x++)g=g<<1^(g>>>9)*1335;const y=(m<<10|g)^21522;s(y>>>15==0);for(let x=0;x<=5;x++)this.setFunctionModule(8,x,r(y,x));this.setFunctionModule(8,7,r(y,6)),this.setFunctionModule(8,8,r(y,7)),this.setFunctionModule(7,8,r(y,8));for(let x=9;x<15;x++)this.setFunctionModule(14-x,8,r(y,x));for(let x=0;x<8;x++)this.setFunctionModule(this.size-1-x,8,r(y,x));for(let x=8;x<15;x++)this.setFunctionModule(8,this.size-15+x,r(y,x));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let d=this.version;for(let g=0;g<12;g++)d=d<<1^(d>>>11)*7973;const m=this.version<<12|d;s(m>>>18==0);for(let g=0;g<18;g++){const y=r(m,g),x=this.size-11+g%3,E=Math.floor(g/3);this.setFunctionModule(x,E,y),this.setFunctionModule(E,x,y)}}drawFinderPattern(d,m){for(let g=-4;g<=4;g++)for(let y=-4;y<=4;y++){const x=Math.max(Math.abs(y),Math.abs(g)),E=d+y,k=m+g;0<=E&&E<this.size&&0<=k&&k<this.size&&this.setFunctionModule(E,k,x!=2&&x!=4)}}drawAlignmentPattern(d,m){for(let g=-2;g<=2;g++)for(let y=-2;y<=2;y++)this.setFunctionModule(d+y,m+g,Math.max(Math.abs(y),Math.abs(g))!=1)}setFunctionModule(d,m,g){this.modules[m][d]=g,this.isFunction[m][d]=!0}addEccAndInterleave(d){const m=this.version,g=this.errorCorrectionLevel;if(d.length!=Ke.getNumDataCodewords(m,g))throw new RangeError("Invalid argument");const y=Ke.NUM_ERROR_CORRECTION_BLOCKS[g.ordinal][m],x=Ke.ECC_CODEWORDS_PER_BLOCK[g.ordinal][m],E=Math.floor(Ke.getNumRawDataModules(m)/8),k=y-E%y,S=Math.floor(E/y);let T=[];const P=Ke.reedSolomonComputeDivisor(x);for(let N=0,F=0;N<y;N++){let $=d.slice(F,F+S-x+(N<k?0:1));F+=$.length;const K=Ke.reedSolomonComputeRemainder($,P);N<k&&$.push(0),T.push($.concat(K))}let M=[];for(let N=0;N<T[0].length;N++)T.forEach((F,$)=>{(N!=S-x||$>=k)&&M.push(F[N])});return s(M.length==E),M}drawCodewords(d){if(d.length!=Math.floor(Ke.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let m=0;for(let g=this.size-1;g>=1;g-=2){g==6&&(g=5);for(let y=0;y<this.size;y++)for(let x=0;x<2;x++){const E=g-x,S=(g+1&2)==0?this.size-1-y:y;!this.isFunction[S][E]&&m<d.length*8&&(this.modules[S][E]=r(d[m>>>3],7-(m&7)),m++)}}s(m==d.length*8)}applyMask(d){if(d<0||d>7)throw new RangeError("Mask value out of range");for(let m=0;m<this.size;m++)for(let g=0;g<this.size;g++){let y;switch(d){case 0:y=(g+m)%2==0;break;case 1:y=m%2==0;break;case 2:y=g%3==0;break;case 3:y=(g+m)%3==0;break;case 4:y=(Math.floor(g/3)+Math.floor(m/2))%2==0;break;case 5:y=g*m%2+g*m%3==0;break;case 6:y=(g*m%2+g*m%3)%2==0;break;case 7:y=((g+m)%2+g*m%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[m][g]&&y&&(this.modules[m][g]=!this.modules[m][g])}}getPenaltyScore(){let d=0;for(let x=0;x<this.size;x++){let E=!1,k=0,S=[0,0,0,0,0,0,0];for(let T=0;T<this.size;T++)this.modules[x][T]==E?(k++,k==5?d+=Ke.PENALTY_N1:k>5&&d++):(this.finderPenaltyAddHistory(k,S),E||(d+=this.finderPenaltyCountPatterns(S)*Ke.PENALTY_N3),E=this.modules[x][T],k=1);d+=this.finderPenaltyTerminateAndCount(E,k,S)*Ke.PENALTY_N3}for(let x=0;x<this.size;x++){let E=!1,k=0,S=[0,0,0,0,0,0,0];for(let T=0;T<this.size;T++)this.modules[T][x]==E?(k++,k==5?d+=Ke.PENALTY_N1:k>5&&d++):(this.finderPenaltyAddHistory(k,S),E||(d+=this.finderPenaltyCountPatterns(S)*Ke.PENALTY_N3),E=this.modules[T][x],k=1);d+=this.finderPenaltyTerminateAndCount(E,k,S)*Ke.PENALTY_N3}for(let x=0;x<this.size-1;x++)for(let E=0;E<this.size-1;E++){const k=this.modules[x][E];k==this.modules[x][E+1]&&k==this.modules[x+1][E]&&k==this.modules[x+1][E+1]&&(d+=Ke.PENALTY_N2)}let m=0;for(const x of this.modules)m=x.reduce((E,k)=>E+(k?1:0),m);const g=this.size*this.size,y=Math.ceil(Math.abs(m*20-g*10)/g)-1;return s(0<=y&&y<=9),d+=y*Ke.PENALTY_N4,s(0<=d&&d<=2568888),d}getAlignmentPatternPositions(){if(this.version==1)return[];{const d=Math.floor(this.version/7)+2,m=this.version==32?26:Math.ceil((this.version*4+4)/(d*2-2))*2;let g=[6];for(let y=this.size-7;g.length<d;y-=m)g.splice(1,0,y);return g}}static getNumRawDataModules(d){if(d<Ke.MIN_VERSION||d>Ke.MAX_VERSION)throw new RangeError("Version number out of range");let m=(16*d+128)*d+64;if(d>=2){const g=Math.floor(d/7)+2;m-=(25*g-10)*g-55,d>=7&&(m-=36)}return s(208<=m&&m<=29648),m}static getNumDataCodewords(d,m){return Math.floor(Ke.getNumRawDataModules(d)/8)-Ke.ECC_CODEWORDS_PER_BLOCK[m.ordinal][d]*Ke.NUM_ERROR_CORRECTION_BLOCKS[m.ordinal][d]}static reedSolomonComputeDivisor(d){if(d<1||d>255)throw new RangeError("Degree out of range");let m=[];for(let y=0;y<d-1;y++)m.push(0);m.push(1);let g=1;for(let y=0;y<d;y++){for(let x=0;x<m.length;x++)m[x]=Ke.reedSolomonMultiply(m[x],g),x+1<m.length&&(m[x]^=m[x+1]);g=Ke.reedSolomonMultiply(g,2)}return m}static reedSolomonComputeRemainder(d,m){let g=m.map(y=>0);for(const y of d){const x=y^g.shift();g.push(0),m.forEach((E,k)=>g[k]^=Ke.reedSolomonMultiply(E,x))}return g}static reedSolomonMultiply(d,m){if(d>>>8||m>>>8)throw new RangeError("Byte out of range");let g=0;for(let y=7;y>=0;y--)g=g<<1^(g>>>7)*285,g^=(m>>>y&1)*d;return s(g>>>8==0),g}finderPenaltyCountPatterns(d){const m=d[1];s(m<=this.size*3);const g=m>0&&d[2]==m&&d[3]==m*3&&d[4]==m&&d[5]==m;return(g&&d[0]>=m*4&&d[6]>=m?1:0)+(g&&d[6]>=m*4&&d[0]>=m?1:0)}finderPenaltyTerminateAndCount(d,m,g){return d&&(this.finderPenaltyAddHistory(m,g),m=0),m+=this.size,this.finderPenaltyAddHistory(m,g),this.finderPenaltyCountPatterns(g)}finderPenaltyAddHistory(d,m){m[0]==0&&(d+=this.size),m.pop(),m.unshift(d)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],n.QrCode=e;function t(h,d,m){if(d<0||d>31||h>>>d)throw new RangeError("Value out of range");for(let g=d-1;g>=0;g--)m.push(h>>>g&1)}function r(h,d){return(h>>>d&1)!=0}function s(h){if(!h)throw new Error("Assertion error")}const l=class At{constructor(d,m,g){if(this.mode=d,this.numChars=m,this.bitData=g,m<0)throw new RangeError("Invalid argument");this.bitData=g.slice()}static makeBytes(d){let m=[];for(const g of d)t(g,8,m);return new At(At.Mode.BYTE,d.length,m)}static makeNumeric(d){if(!At.isNumeric(d))throw new RangeError("String contains non-numeric characters");let m=[];for(let g=0;g<d.length;){const y=Math.min(d.length-g,3);t(parseInt(d.substring(g,g+y),10),y*3+1,m),g+=y}return new At(At.Mode.NUMERIC,d.length,m)}static makeAlphanumeric(d){if(!At.isAlphanumeric(d))throw new RangeError("String contains unencodable characters in alphanumeric mode");let m=[],g;for(g=0;g+2<=d.length;g+=2){let y=At.ALPHANUMERIC_CHARSET.indexOf(d.charAt(g))*45;y+=At.ALPHANUMERIC_CHARSET.indexOf(d.charAt(g+1)),t(y,11,m)}return g<d.length&&t(At.ALPHANUMERIC_CHARSET.indexOf(d.charAt(g)),6,m),new At(At.Mode.ALPHANUMERIC,d.length,m)}static makeSegments(d){return d==""?[]:At.isNumeric(d)?[At.makeNumeric(d)]:At.isAlphanumeric(d)?[At.makeAlphanumeric(d)]:[At.makeBytes(At.toUtf8ByteArray(d))]}static makeEci(d){let m=[];if(d<0)throw new RangeError("ECI assignment value out of range");if(d<128)t(d,8,m);else if(d<16384)t(2,2,m),t(d,14,m);else if(d<1e6)t(6,3,m),t(d,21,m);else throw new RangeError("ECI assignment value out of range");return new At(At.Mode.ECI,0,m)}static isNumeric(d){return At.NUMERIC_REGEX.test(d)}static isAlphanumeric(d){return At.ALPHANUMERIC_REGEX.test(d)}getData(){return this.bitData.slice()}static getTotalBits(d,m){let g=0;for(const y of d){const x=y.mode.numCharCountBits(m);if(y.numChars>=1<<x)return 1/0;g+=4+x+y.bitData.length}return g}static toUtf8ByteArray(d){d=encodeURI(d);let m=[];for(let g=0;g<d.length;g++)d.charAt(g)!="%"?m.push(d.charCodeAt(g)):(m.push(parseInt(d.substring(g+1,g+3),16)),g+=2);return m}};l.NUMERIC_REGEX=/^[0-9]*$/,l.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,l.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let c=l;n.QrSegment=l})(ra||(ra={}));(n=>{(e=>{const t=class{constructor(s,l){this.ordinal=s,this.formatBits=l}};t.LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2),e.Ecc=t})(n.QrCode||(n.QrCode={}))})(ra||(ra={}));(n=>{(e=>{const t=class{constructor(s,l){this.modeBits=s,this.numBitsCharCount=l}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};t.NUMERIC=new t(1,[10,12,14]),t.ALPHANUMERIC=new t(2,[9,11,13]),t.BYTE=new t(4,[8,16,16]),t.KANJI=new t(8,[8,10,12]),t.ECI=new t(7,[0,0,0]),e.Mode=t})(n.QrSegment||(n.QrSegment={}))})(ra||(ra={}));var nl=ra;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var A9={L:nl.QrCode.Ecc.LOW,M:nl.QrCode.Ecc.MEDIUM,Q:nl.QrCode.Ecc.QUARTILE,H:nl.QrCode.Ecc.HIGH},jT=128,AT="L",RT="#FFFFFF",PT="#000000",NT=!1,DT=1,R9=4,P9=0,N9=.1;function MT(n,e=0){const t=[];return n.forEach(function(r,s){let l=null;r.forEach(function(c,h){if(!c&&l!==null){t.push(`M${l+e} ${s+e}h${h-l}v1H${l+e}z`),l=null;return}if(h===r.length-1){if(!c)return;l===null?t.push(`M${h+e},${s+e} h1v1H${h+e}z`):t.push(`M${l+e},${s+e} h${h+1-l}v1H${l+e}z`);return}c&&l===null&&(l=h)})}),t.join("")}function VT(n,e){return n.slice().map((t,r)=>r<e.y||r>=e.y+e.h?t:t.map((s,l)=>l<e.x||l>=e.x+e.w?s:!1))}function D9(n,e,t,r){if(r==null)return null;const s=n.length+t*2,l=Math.floor(e*N9),c=s/e,h=(r.width||l)*c,d=(r.height||l)*c,m=r.x==null?n.length/2-h/2:r.x*c,g=r.y==null?n.length/2-d/2:r.y*c,y=r.opacity==null?1:r.opacity;let x=null;if(r.excavate){let k=Math.floor(m),S=Math.floor(g),T=Math.ceil(h+m-k),P=Math.ceil(d+g-S);x={x:k,y:S,w:T,h:P}}const E=r.crossOrigin;return{x:m,y:g,h:d,w:h,excavation:x,opacity:y,crossOrigin:E}}function M9(n,e){return e!=null?Math.max(Math.floor(e),0):n?R9:P9}function LT({value:n,level:e,minVersion:t,includeMargin:r,marginSize:s,imageSettings:l,size:c,boostLevel:h}){let d=Qt.useMemo(()=>{const k=(Array.isArray(n)?n:[n]).reduce((S,T)=>(S.push(...nl.QrSegment.makeSegments(T)),S),[]);return nl.QrCode.encodeSegments(k,A9[e],t,void 0,void 0,h)},[n,e,t,h]);const{cells:m,margin:g,numCells:y,calculatedImageSettings:x}=Qt.useMemo(()=>{let E=d.getModules();const k=M9(r,s),S=E.length+k*2,T=D9(E,c,k,l);return{cells:E,margin:k,numCells:S,calculatedImageSettings:T}},[d,c,l,r,s]);return{qrcode:d,margin:g,cells:m,numCells:y,calculatedImageSettings:x}}var V9=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),L9=Qt.forwardRef(function(e,t){const r=e,{value:s,size:l=jT,level:c=AT,bgColor:h=RT,fgColor:d=PT,includeMargin:m=NT,minVersion:g=DT,boostLevel:y,marginSize:x,imageSettings:E}=r,S=sy(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:T}=S,P=sy(S,["style"]),M=E==null?void 0:E.src,N=Qt.useRef(null),F=Qt.useRef(null),$=Qt.useCallback(Ve=>{N.current=Ve,typeof t=="function"?t(Ve):t&&(t.current=Ve)},[t]),[K,A]=Qt.useState(!1),{margin:j,cells:D,numCells:L,calculatedImageSettings:B}=LT({value:s,level:c,minVersion:g,boostLevel:y,includeMargin:m,marginSize:x,imageSettings:E,size:l});Qt.useEffect(()=>{if(N.current!=null){const Ve=N.current,We=Ve.getContext("2d");if(!We)return;let rt=D;const Te=F.current,se=B!=null&&Te!==null&&Te.complete&&Te.naturalHeight!==0&&Te.naturalWidth!==0;se&&B.excavation!=null&&(rt=VT(D,B.excavation));const me=window.devicePixelRatio||1;Ve.height=Ve.width=l*me;const le=l/L*me;We.scale(le,le),We.fillStyle=h,We.fillRect(0,0,L,L),We.fillStyle=d,V9?We.fill(new Path2D(MT(rt,j))):D.forEach(function(H,te){H.forEach(function(Ce,je){Ce&&We.fillRect(je+j,te+j,1,1)})}),B&&(We.globalAlpha=B.opacity),se&&We.drawImage(Te,B.x+j,B.y+j,B.w,B.h)}}),Qt.useEffect(()=>{A(!1)},[M]);const U=iy({height:l,width:l},T);let V=null;return M!=null&&(V=Qt.createElement("img",{src:M,key:M,style:{display:"none"},onLoad:()=>{A(!0)},ref:F,crossOrigin:B==null?void 0:B.crossOrigin})),Qt.createElement(Qt.Fragment,null,Qt.createElement("canvas",iy({style:U,height:l,width:l,ref:$,role:"img"},P)),V)});L9.displayName="QRCodeCanvas";var oy=Qt.forwardRef(function(e,t){const r=e,{value:s,size:l=jT,level:c=AT,bgColor:h=RT,fgColor:d=PT,includeMargin:m=NT,minVersion:g=DT,boostLevel:y,title:x,marginSize:E,imageSettings:k}=r,S=sy(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:T,cells:P,numCells:M,calculatedImageSettings:N}=LT({value:s,level:c,minVersion:g,boostLevel:y,includeMargin:m,marginSize:E,imageSettings:k,size:l});let F=P,$=null;k!=null&&N!=null&&(N.excavation!=null&&(F=VT(P,N.excavation)),$=Qt.createElement("image",{href:k.src,height:N.h,width:N.w,x:N.x+T,y:N.y+T,preserveAspectRatio:"none",opacity:N.opacity,crossOrigin:N.crossOrigin}));const K=MT(F,T);return Qt.createElement("svg",iy({height:l,width:l,viewBox:`0 0 ${M} ${M}`,ref:t,role:"img"},S),!!x&&Qt.createElement("title",null,x),Qt.createElement("path",{fill:h,d:`M0,0 h${M}v${M}H0z`,shapeRendering:"crispEdges"}),Qt.createElement("path",{fill:d,d:K,shapeRendering:"crispEdges"}),$)});oy.displayName="QRCodeSVG";const _k={1:{color:"#2d5a27",gradient:["#3d7a37","#2d5a27"],label:"ONE",accent:"#90c695"},5:{color:"#1e3a5f",gradient:["#2e5a8f","#1e3a5f"],label:"FIVE",accent:"#7ba3cc"},10:{color:"#5c2d5c",gradient:["#7c4d7c","#5c2d5c"],label:"TEN",accent:"#b89db8"},20:{color:"#8b6914",gradient:["#c9a227","#8b6914"],label:"TWENTY",accent:"#e8d48a"}};function El({value:n,size:e=128,denomination:t=5,showFrame:r=!0}){const s=_k[t]||_k[5],l=e+48,c=16;return r?o.jsx("div",{style:{width:l,background:`linear-gradient(135deg, ${s.gradient[0]} 0%, ${s.gradient[1]} 100%)`,borderRadius:c,padding:"3px",display:"inline-block",boxShadow:"0 4px 12px rgba(0,0,0,0.2)"},children:o.jsxs("div",{style:{background:"linear-gradient(135deg, #fefefe 0%, #f5f5f0 100%)",borderRadius:c-2,padding:"8px",position:"relative"},children:[o.jsx("div",{style:{textAlign:"center",marginBottom:"6px",fontFamily:'"Georgia", serif',fontSize:"10px",fontWeight:"bold",color:s.color,letterSpacing:"3px",textTransform:"uppercase"},children:"KINDERBUCKS"}),o.jsxs("div",{style:{background:"white",borderRadius:"8px",padding:"8px",border:`2px solid ${s.accent}`,position:"relative"},children:[o.jsx("div",{style:{position:"absolute",top:"4px",left:"4px",width:"12px",height:"12px",borderTop:`2px solid ${s.color}`,borderLeft:`2px solid ${s.color}`,borderRadius:"2px 0 0 0"}}),o.jsx("div",{style:{position:"absolute",top:"4px",right:"4px",width:"12px",height:"12px",borderTop:`2px solid ${s.color}`,borderRight:`2px solid ${s.color}`,borderRadius:"0 2px 0 0"}}),o.jsx("div",{style:{position:"absolute",bottom:"4px",left:"4px",width:"12px",height:"12px",borderBottom:`2px solid ${s.color}`,borderLeft:`2px solid ${s.color}`,borderRadius:"0 0 0 2px"}}),o.jsx("div",{style:{position:"absolute",bottom:"4px",right:"4px",width:"12px",height:"12px",borderBottom:`2px solid ${s.color}`,borderRight:`2px solid ${s.color}`,borderRadius:"0 0 2px 0"}}),o.jsx(oy,{value:n,size:e,level:"H",fgColor:s.color,style:{display:"block"},imageSettings:{src:`data:image/svg+xml,${encodeURIComponent(`
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="${s.color}">
                  <circle cx="12" cy="12" r="11" fill="white" stroke="${s.color}" stroke-width="1.5"/>
                  <text x="12" y="16" text-anchor="middle" font-size="12" font-weight="bold" fill="${s.color}" font-family="Georgia">K</text>
                </svg>
              `)}`,height:e*.2,width:e*.2,excavate:!0}})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"6px",padding:"0 4px"},children:[o.jsxs("span",{style:{fontFamily:'"Georgia", serif',fontSize:"14px",fontWeight:"bold",color:s.color},children:["$",t]}),o.jsx("span",{style:{fontFamily:'"Georgia", serif',fontSize:"9px",color:s.color,letterSpacing:"1px",opacity:.8},children:s.label}),o.jsxs("span",{style:{fontFamily:'"Georgia", serif',fontSize:"14px",fontWeight:"bold",color:s.color},children:["$",t]})]})]})}):o.jsx(oy,{value:n,size:e,level:"M",fgColor:s.color,style:{display:"block"}})}const O9="https://harmonicsystems.github.io/kinderbucks/#/scan/KB-0001",B9="https://harmonicsystems.github.io/kinderbucks/#/checkin/BROADST-BAGEL",z9="Broad Street Bagel Co.";function F9(){const[n,e]=C.useState(null),[t,r]=C.useState(0),[s,l]=C.useState(!1);return o.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)",overflow:"hidden"},children:o.jsxs("div",{style:{maxWidth:"1100px",margin:"0 auto"},children:[o.jsxs(pe.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},style:{textAlign:"center",marginBottom:"3rem"},children:[o.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",background:"linear-gradient(135deg, var(--kb-gold) 0%, #e8c33a 100%)",color:"var(--kb-navy)",padding:"0.5rem 1rem",borderRadius:"100px",fontSize:"0.85rem",fontWeight:"600",marginBottom:"1rem"},children:[o.jsx(zV,{size:16})," Try It Live"]}),o.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.75rem"},children:"See Kinderbucks in Action"}),o.jsx("p",{style:{color:"var(--kb-gray-600)",maxWidth:"600px",margin:"0 auto"},children:"Scan these real QR codes with your phone's camera to experience the magic"})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(320px, 1fr))",gap:"2rem",marginBottom:"3rem"},children:[o.jsxs(pe.div,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},transition:{delay:.1},viewport:{once:!0},className:"card",style:{padding:"2rem",background:"linear-gradient(180deg, #f8fbff 0%, #ffffff 100%)",border:"2px solid #e8f0ff",position:"relative",overflow:"hidden"},children:[o.jsx("div",{style:{position:"absolute",top:0,right:0,width:"80px",height:"80px",background:"linear-gradient(135deg, transparent 50%, rgba(52, 152, 219, 0.1) 50%)"}}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[o.jsx("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, #3498db 0%, #2980b9 100%)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(U2,{size:22,color:"white"})}),o.jsxs("div",{children:[o.jsx("h3",{style:{color:"var(--kb-navy)",margin:0,fontSize:"1.2rem"},children:"Verify Currency"}),o.jsx("p",{style:{color:"var(--kb-gray-500)",margin:0,fontSize:"0.85rem"},children:"Confirm authenticity instantly"})]})]}),o.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem",marginBottom:"1.5rem"},children:"Every Kinderbuck has a unique QR code. Scan to verify it's real, see its value, and track its journey through the village."}),o.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1.5rem"},children:o.jsx(pe.div,{whileHover:{scale:1.02},transition:{type:"spring",stiffness:300},children:o.jsx(El,{value:O9,size:130,denomination:5,showFrame:!0})})}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1rem",background:"rgba(52, 152, 219, 0.08)",borderRadius:"10px",marginBottom:"1rem"},children:[o.jsx(Mg,{size:20,color:"#3498db"}),o.jsx("span",{style:{color:"var(--kb-gray-700)",fontSize:"0.9rem"},children:"Point your phone camera at the QR code"})]}),o.jsxs("div",{style:{borderTop:"1px dashed var(--kb-gray-200)",paddingTop:"1rem"},children:[o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)",marginBottom:"0.5rem"},children:"You'll see:"}),o.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:["Verified","$5 Value","Active Status","Serial: KB-0001"].map((c,h)=>o.jsx("span",{style:{padding:"0.25rem 0.6rem",background:"var(--kb-gray-100)",borderRadius:"4px",fontSize:"0.8rem",color:"var(--kb-gray-600)"},children:c},h))})]})]}),o.jsxs(pe.div,{initial:{opacity:0,x:30},whileInView:{opacity:1,x:0},transition:{delay:.2},viewport:{once:!0},className:"card",style:{padding:"2rem",background:"linear-gradient(180deg, #f8fff8 0%, #ffffff 100%)",border:"2px solid #e8ffe8",position:"relative",overflow:"hidden"},children:[o.jsx("div",{style:{position:"absolute",top:0,right:0,width:"80px",height:"80px",background:"linear-gradient(135deg, transparent 50%, rgba(39, 174, 96, 0.1) 50%)"}}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[o.jsx("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, var(--kb-green) 0%, #1e8449 100%)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(Lt,{size:22,color:"white"})}),o.jsxs("div",{children:[o.jsx("h3",{style:{color:"var(--kb-navy)",margin:0,fontSize:"1.2rem"},children:"Check In"}),o.jsx("p",{style:{color:"var(--kb-gray-500)",margin:0,fontSize:"0.85rem"},children:"Record visits, earn rewards"})]})]}),o.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem",marginBottom:"1.5rem"},children:"Scan the QR code at each business you visit. Build your Kinderhooker status and unlock better exchange rates!"}),o.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1.5rem"},children:o.jsx(pe.div,{whileHover:{scale:1.02},transition:{type:"spring",stiffness:300},style:{background:"linear-gradient(135deg, var(--kb-green) 0%, #1e8449 100%)",borderRadius:"16px",padding:"3px",boxShadow:"0 4px 12px rgba(39, 174, 96, 0.3)"},children:o.jsxs("div",{style:{background:"white",borderRadius:"14px",padding:"12px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"10px",fontWeight:"600",color:"var(--kb-green)",letterSpacing:"2px",marginBottom:"8px"},children:"CHECK IN AT"}),o.jsx(El,{value:B9,size:110,denomination:1,showFrame:!1}),o.jsxs("div",{style:{marginTop:"8px",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.4rem"},children:[o.jsx(c3,{size:14,color:"var(--kb-green)"}),o.jsx("span",{style:{fontWeight:"600",color:"var(--kb-navy)",fontSize:"0.9rem"},children:z9})]})]})})}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1rem",background:"rgba(39, 174, 96, 0.08)",borderRadius:"10px",marginBottom:"1rem"},children:[o.jsx(Mg,{size:20,color:"var(--kb-green)"}),o.jsx("span",{style:{color:"var(--kb-gray-700)",fontSize:"0.9rem"},children:"Scan when you visit a business"})]}),o.jsxs("div",{style:{borderTop:"1px dashed var(--kb-gray-200)",paddingTop:"1rem"},children:[o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)",marginBottom:"0.5rem"},children:"You'll see:"}),o.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:["Check-in Recorded","+1 Business","Tier Progress","Next Reward"].map((c,h)=>o.jsx("span",{style:{padding:"0.25rem 0.6rem",background:"var(--kb-gray-100)",borderRadius:"4px",fontSize:"0.8rem",color:"var(--kb-gray-600)"},children:c},h))})]})]})]}),o.jsxs(pe.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{delay:.3},viewport:{once:!0},style:{background:"linear-gradient(135deg, var(--kb-navy) 0%, #1a3a5c 100%)",borderRadius:"20px",padding:"2rem",color:"white",position:"relative",overflow:"hidden"},children:[o.jsx("div",{style:{position:"absolute",top:"-50%",right:"-10%",width:"300px",height:"300px",background:"radial-gradient(circle, rgba(201, 162, 39, 0.1) 0%, transparent 70%)",borderRadius:"50%"}}),o.jsxs("div",{style:{position:"relative",zIndex:1},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1.5rem"},children:[o.jsx(v0,{size:20,color:"var(--kb-gold)"}),o.jsx("span",{style:{color:"var(--kb-gold)",fontWeight:"600",fontSize:"0.9rem"},children:"The Kinderbucks Loop"})]}),o.jsx("h3",{style:{fontSize:"1.5rem",marginBottom:"2rem",maxWidth:"500px"},children:"Check-ins unlock better exchange rates on currency"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem",alignItems:"center"},children:[o.jsxs(pe.div,{initial:{opacity:0},whileInView:{opacity:1},transition:{delay:.4},viewport:{once:!0},style:{display:"flex",alignItems:"center",gap:"1rem"},children:[o.jsx("div",{style:{width:"50px",height:"50px",background:"rgba(255,255,255,0.1)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:o.jsx(Lt,{size:24,color:"var(--kb-gold)"})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Visit & Check In"}),o.jsx("div",{style:{fontSize:"0.85rem",opacity:.8},children:"Scan at local businesses"})]})]}),o.jsx("div",{style:{display:"flex",justifyContent:"center"},children:o.jsx(Pg,{size:24,color:"var(--kb-gold)",style:{opacity:.5}})}),o.jsxs(pe.div,{initial:{opacity:0},whileInView:{opacity:1},transition:{delay:.5},viewport:{once:!0},style:{display:"flex",alignItems:"center",gap:"1rem"},children:[o.jsx("div",{style:{width:"50px",height:"50px",background:"rgba(255,255,255,0.1)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:o.jsx(to,{size:24,color:"var(--kb-gold)"})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Level Up"}),o.jsx("div",{style:{fontSize:"0.85rem",opacity:.8},children:"Reach new tiers"})]})]}),o.jsx("div",{style:{display:"flex",justifyContent:"center"},children:o.jsx(Pg,{size:24,color:"var(--kb-gold)",style:{opacity:.5}})}),o.jsxs(pe.div,{initial:{opacity:0},whileInView:{opacity:1},transition:{delay:.6},viewport:{once:!0},style:{display:"flex",alignItems:"center",gap:"1rem"},children:[o.jsx("div",{style:{width:"50px",height:"50px",background:"linear-gradient(135deg, var(--kb-gold) 0%, #b8922d 100%)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:o.jsx(Sr,{size:24,color:"var(--kb-navy)"})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Earn More"}),o.jsx("div",{style:{fontSize:"0.85rem",opacity:.8},children:"Up to 25% bonus!"})]})]})]}),o.jsx("div",{style:{marginTop:"2rem",display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[{name:"Curious",visits:"1+",bonus:"10%"},{name:"Hooked",visits:"5+",bonus:"15%"},{name:"Line & Sinker",visits:"10+",bonus:"20%"},{name:"Village Patron",visits:"15+",bonus:"25%",featured:!0}].map((c,h)=>o.jsxs("div",{style:{padding:"0.5rem 1rem",background:c.featured?"linear-gradient(135deg, var(--kb-gold) 0%, #b8922d 100%)":"rgba(255,255,255,0.1)",borderRadius:"8px",fontSize:"0.85rem",color:c.featured?"var(--kb-navy)":"white",fontWeight:c.featured?"600":"400"},children:[c.name,": ",c.bonus]},h))})]})]}),o.jsxs(pe.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:.4},viewport:{once:!0},style:{textAlign:"center",marginTop:"2.5rem"},children:[o.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1rem"},children:"Ready to start your Kinderhooker journey?"}),o.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[o.jsx(he,{to:"/profile",className:"btn btn-primary",children:"View My Progress"}),o.jsx(he,{to:"/businesses",className:"btn btn-secondary",children:"Find Businesses to Visit"})]})]})]})})}function U9(){return o.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[o.jsx(Wn,{}),o.jsx("section",{style:{background:"var(--kb-navy)",color:"var(--kb-white)",padding:"4rem 1rem",textAlign:"center"},children:o.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[o.jsx("h1",{style:{marginBottom:"1rem"},children:"How Kinderbucks Works"}),o.jsx("p",{style:{color:"var(--kb-gray-300)",fontSize:"1.1rem"},children:"A simple system designed to keep money local and reward community participation"})]})}),o.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:o.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[o.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem"},children:"What is Kinderbucks?"}),o.jsxs("div",{style:{color:"var(--kb-gray-700)",lineHeight:1.8},children:[o.jsxs("p",{style:{marginBottom:"1rem"},children:[o.jsx("strong",{children:"Kinderbucks"})," is a local currency program for the Village of Kinderhook, NY. It's real money  physical bills with QR codes for verification  that can only be spent at participating local businesses."]}),o.jsx("p",{style:{marginBottom:"1rem"},children:"When you exchange US dollars for Kinderbucks, you're making a commitment to spend locally. In return, you receive bonus value through our OK Membership program, turning $10 into $11, $12, or even $12.50 in local spending power."}),o.jsx("p",{children:"Every Kinderbuck spent stays in the village, circulating between businesses and residents, strengthening our local economy with each transaction."})]})]})}),o.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:o.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[o.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem",textAlign:"center"},children:"The Exchange Process"}),o.jsx("div",{style:{display:"grid",gap:"2rem",maxWidth:"700px",margin:"0 auto"},children:[{step:1,title:"Visit an Exchange Point",description:"Stop by any participating business or our central exchange location with US dollars."},{step:2,title:"Show Your Membership",description:"Scan your profile QR code or provide your phone number to apply your tier bonus."},{step:3,title:"Receive Your Kinderbucks",description:"Get physical Kinderbuck bills in $1, $5, $10, and $20 denominations with your bonus applied."},{step:4,title:"Spend Locally",description:"Use your Kinderbucks at any of our 19+ participating businesses."}].map((n,e)=>o.jsxs(pe.div,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},transition:{delay:e*.1},viewport:{once:!0},style:{display:"flex",gap:"1.5rem",alignItems:"flex-start"},children:[o.jsx("div",{style:{width:"50px",height:"50px",background:"var(--kb-navy)",color:"var(--kb-gold)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"var(--font-display)",fontWeight:"700",fontSize:"1.2rem",flexShrink:0},children:n.step}),o.jsxs("div",{children:[o.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:n.title}),o.jsx("p",{style:{color:"var(--kb-gray-600)"},children:n.description})]})]},e))})]})}),o.jsx(F9,{}),o.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:o.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[o.jsx("div",{className:"badge badge-gold",style:{marginBottom:"1rem"},children:"OK Membership"}),o.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem"},children:"The Kinderhooker Program"}),o.jsxs("div",{style:{color:"var(--kb-gray-700)",lineHeight:1.8},children:[o.jsxs("p",{style:{marginBottom:"1rem"},children:[o.jsx("strong",{children:"OK Membership"})," rewards customers who actively support local businesses. The more businesses you visit, the higher your tier  and the better your exchange rate."]}),o.jsxs("p",{style:{marginBottom:"1rem"},children:['Each participating business has a QR code. Scan it when you visit to record a "check-in." Your tier is based on how many ',o.jsx("em",{children:"unique"})," businesses you've visited, encouraging exploration of the entire village."]}),o.jsx("p",{children:`There's no cost to join. Simply start checking in at businesses, and you'll automatically become a "Kinderhooker" with access to bonus exchange rates.`})]}),o.jsxs("div",{style:{marginTop:"2rem",display:"flex",gap:"1rem",flexWrap:"wrap"},children:[o.jsx(he,{to:"/benefits",className:"btn btn-primary",children:"View All Benefits"}),o.jsx(he,{to:"/profile",className:"btn btn-secondary",children:"Check My Status"})]})]})}),o.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:o.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[o.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem"},children:"Frequently Asked Questions"}),[{q:"Is Kinderbucks real money?",a:"Kinderbucks are a local complementary currency. They have value within our participating business network but cannot be deposited in banks or used outside Kinderhook."},{q:"Can I convert Kinderbucks back to USD?",a:"Kinderbucks are designed to circulate locally. While businesses can redeem them, individual customers are encouraged to spend them at participating businesses."},{q:"What if a business closes?",a:"Kinderbucks remain valid at all other participating businesses. The program maintains reserves to ensure stability."},{q:"How do businesses benefit?",a:"Businesses receive customers committed to spending locally, gain exposure through our directory, and become part of a community-strengthening initiative."},{q:"Is there a fee to exchange?",a:"No fees. You receive full value plus your membership bonus when exchanging USD for Kinderbucks."}].map((n,e)=>o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsx("h4",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:n.q}),o.jsx("p",{style:{color:"var(--kb-gray-600)"},children:n.a})]},e))]})}),o.jsxs("section",{style:{padding:"3rem 1rem",background:"var(--kb-navy)",color:"var(--kb-white)",textAlign:"center"},children:[o.jsx("h3",{style:{marginBottom:"1rem"},children:"Ready to get started?"}),o.jsx(he,{to:"/exchange",className:"btn btn-gold",children:"Get Your Kinderbucks"})]}),o.jsx($n,{})]})}const br={curious:{name:"Curious",threshold:1,bonus:.1,color:"#888888",bgColor:"#f0f0f0",emoji:""},hooked:{name:"Hooked",threshold:5,bonus:.15,color:"#2e7d32",bgColor:"#e8f5e9",emoji:""},lineAndSinker:{name:"Line & Sinker",threshold:10,bonus:.2,color:"#1565c0",bgColor:"#e3f2fd",emoji:""},patron:{name:"Village Patron",threshold:15,bonus:.25,color:"#c9a227",bgColor:"#fff8e1",emoji:""}};function ay(n){return n>=15?"patron":n>=10?"lineAndSinker":n>=5?"hooked":n>=1?"curious":null}function W9(n){const e=["curious","hooked","lineAndSinker","patron"],t=e.indexOf(n);return t<e.length-1?e[t+1]:null}function OT(n){const e=ay(n),t=W9(e);if(!t)return{progress:100,remaining:0,nextTier:null};const r=br[t],s=e?br[e].threshold:0,l=(n-s)/(r.threshold-s)*100;return{progress:Math.min(100,Math.max(0,l)),remaining:r.threshold-n,nextTier:r}}function $9(){const n=[{Icon:i3,title:"Bonus Exchange Rates",description:"Get up to 25% extra when converting USD to Kinderbucks. A $100 exchange becomes $125 in local spending power.",highlight:"Up to 25% bonus"},{Icon:Lt,title:"Exclusive Local Deals",description:"Participating businesses offer special discounts and promotions exclusively for Kinderhooker members.",highlight:"Member-only offers"},{Icon:Sr,title:"Priority Access",description:"Higher-tier members get early access to limited events, seasonal specials, and new business openings.",highlight:"First in line"},{Icon:Yc,title:"Seasonal Bonuses",description:"Extra rewards during holidays and special village events. Double check-in points, bonus exchanges, and more.",highlight:"Special events"},{Icon:m0,title:"Impact Tracking",description:"See exactly how your spending supports local businesses and contributes to the village economy.",highlight:"Track your impact"},{Icon:$r,title:"Community Recognition",description:"Village Patrons are recognized in our annual report and invited to exclusive community appreciation events.",highlight:"Be celebrated"}];return o.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[o.jsx(Wn,{}),o.jsx("section",{style:{background:"linear-gradient(135deg, var(--kb-gold-dark) 0%, var(--kb-gold) 100%)",color:"var(--kb-navy)",padding:"4rem 1rem",textAlign:"center"},children:o.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[o.jsx("div",{className:"badge badge-navy",style:{marginBottom:"1rem"},children:"OK Membership"}),o.jsx("h1",{style:{marginBottom:"1rem"},children:"Member Benefits & Rewards"}),o.jsx("p",{style:{fontSize:"1.1rem",opacity:.9},children:"The more you support local, the more you earn. It pays to be a Kinderhooker."})]})}),o.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:o.jsxs("div",{style:{maxWidth:"1100px",margin:"0 auto"},children:[o.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem",textAlign:"center"},children:"Membership Tiers"}),o.jsx("p",{style:{color:"var(--kb-gray-500)",textAlign:"center",marginBottom:"2rem"},children:"Visit more businesses to unlock better rewards"}),o.jsx("div",{style:{overflowX:"auto"},children:o.jsxs("table",{style:{minWidth:"700px"},children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{style:{width:"25%"},children:"Tier"}),o.jsx("th",{style:{width:"20%"},children:"Requirement"}),o.jsx("th",{style:{width:"20%"},children:"Exchange Bonus"}),o.jsx("th",{style:{width:"35%"},children:"Perks"})]})}),o.jsxs("tbody",{children:[o.jsxs("tr",{children:[o.jsx("td",{children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(hn,{size:18,color:"#888"}),o.jsx("span",{style:{fontWeight:"600",color:"#888"},children:"Curious"})]})}),o.jsx("td",{children:"1+ businesses"}),o.jsx("td",{children:o.jsx("span",{style:{color:"#888",fontWeight:"600"},children:"10%"})}),o.jsx("td",{style:{fontSize:"0.9rem",color:"var(--kb-gray-600)"},children:"Basic exchange bonus, check-in tracking"})]}),o.jsxs("tr",{children:[o.jsx("td",{children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Sr,{size:18,color:"#2e7d32"}),o.jsx("span",{style:{fontWeight:"600",color:"#2e7d32"},children:"Hooked"})]})}),o.jsx("td",{children:"5+ businesses"}),o.jsx("td",{children:o.jsx("span",{style:{color:"#2e7d32",fontWeight:"600"},children:"15%"})}),o.jsx("td",{style:{fontSize:"0.9rem",color:"var(--kb-gray-600)"},children:"Seasonal bonus events, member deals"})]}),o.jsxs("tr",{children:[o.jsx("td",{children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(_r,{size:18,color:"#1565c0"}),o.jsx("span",{style:{fontWeight:"600",color:"#1565c0"},children:"Line & Sinker"})]})}),o.jsx("td",{children:"10+ businesses"}),o.jsx("td",{children:o.jsx("span",{style:{color:"#1565c0",fontWeight:"600"},children:"20%"})}),o.jsx("td",{style:{fontSize:"0.9rem",color:"var(--kb-gray-600)"},children:"Priority access, exclusive events"})]}),o.jsxs("tr",{style:{background:"rgba(201, 162, 39, 0.1)"},children:[o.jsx("td",{children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(sr,{size:18,color:"#c9a227"}),o.jsx("span",{style:{fontWeight:"600",color:"#c9a227"},children:"Village Patron"})]})}),o.jsx("td",{children:"15+ businesses"}),o.jsx("td",{children:o.jsx("span",{style:{color:"#c9a227",fontWeight:"600"},children:"25%"})}),o.jsx("td",{style:{fontSize:"0.9rem",color:"var(--kb-gray-600)"},children:"All perks + community recognition + VIP events"})]})]})]})}),o.jsx("div",{style:{textAlign:"center",marginTop:"2rem"},children:o.jsx(he,{to:"/profile",className:"btn btn-primary",children:"Check My Progress"})})]})}),o.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:o.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[o.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem",textAlign:"center"},children:"All Member Benefits"}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1.5rem"},children:n.map((e,t)=>o.jsx(pe.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:t*.1},viewport:{once:!0},className:"card",children:o.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[o.jsx("div",{style:{width:"50px",height:"50px",background:"var(--kb-navy)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:o.jsx(e.Icon,{size:24,color:"var(--kb-gold)",strokeWidth:1.5})}),o.jsxs("div",{children:[o.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"0.25rem",fontSize:"1.1rem"},children:e.title}),o.jsx("span",{className:"badge badge-gold",style:{marginBottom:"0.5rem"},children:e.highlight}),o.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem",marginTop:"0.5rem"},children:e.description})]})]})},t))})]})}),o.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:o.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto",textAlign:"center"},children:[o.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"See Your Savings"}),o.jsx("p",{style:{color:"var(--kb-gray-500)",marginBottom:"2rem"},children:"Example: Exchange $100 USD"}),o.jsx("div",{className:"card",style:{padding:"2rem"},children:o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[{tier:"Curious",bonus:10,color:"#888"},{tier:"Hooked",bonus:15,color:"#2e7d32"},{tier:"Line & Sinker",bonus:20,color:"#1565c0"},{tier:"Village Patron",bonus:25,color:"#c9a227"}].map((e,t)=>o.jsxs("div",{style:{padding:"1rem",borderRadius:"8px",background:`${e.color}10`,border:`1px solid ${e.color}30`},children:[o.jsx("div",{style:{fontSize:"0.85rem",color:e.color,fontWeight:"600"},children:e.tier}),o.jsxs("div",{style:{fontFamily:"var(--font-display)",fontSize:"1.8rem",fontWeight:"700",color:e.color},children:["$",100+e.bonus]}),o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:"in Kinderbucks"})]},t))})}),o.jsx("div",{style:{marginTop:"2rem"},children:o.jsx(he,{to:"/exchange",className:"btn btn-gold",style:{padding:"1rem 2rem"},children:"Start Exchanging"})})]})}),o.jsxs("section",{style:{padding:"3rem 1rem",background:"var(--kb-green)",color:"var(--kb-white)",textAlign:"center"},children:[o.jsx("h3",{style:{marginBottom:"1rem"},children:"Start earning rewards today"}),o.jsx("p",{style:{opacity:.9,marginBottom:"1.5rem"},children:"Visit a participating business and scan their QR code to begin"}),o.jsx(he,{to:"/businesses",className:"btn btn-gold",children:"Find Businesses Near You"})]}),o.jsx($n,{})]})}const ls="businesses",H9="checkins",K9="transactions";async function Mu(n){const e=et(Se,ls,n),t=await Kr(e);return t.exists()?{code:t.id,...t.data()}:null}async function Qr(n=!1){const e=nn(ot(Se,ls),is("name")),r=(await Et(e)).docs.map(s=>({code:s.id,...s.data()}));return n?r:r.filter(s=>!s.isDeleted)}async function q9(){return(await Qr(!0)).filter(e=>e.isDeleted)}async function Sk(n,e,t,r={}){const s={code:n,name:e,category:t,isActive:!0,checkinCount:0,createdAt:Xe()};r.address&&(s.address=r.address),r.placeId&&(s.placeId=r.placeId),r.phone&&(s.phone=r.phone),r.website&&(s.website=r.website),r.photoUrl&&(s.photoUrl=r.photoUrl),await Ll(et(Se,ls,n),s)}async function BT(n){const e=await Mu(n);if(!e)return{exists:!1,canDelete:!1,reason:"Business not found"};const t=nn(ot(Se,H9),_n("businessCode","==",n)),s=(await Et(t)).size,l=nn(ot(Se,K9),_n("businessCode","==",n)),h=(await Et(l)).size,d=e.kinderbucksBalance||0,m=s>0||h>0||d>0;return{exists:!0,code:n,name:e.name,checkinCount:s,transactionCount:h,balance:d,hasData:m,canSafeDelete:!m,reason:m?`Has ${s} check-ins, ${h} transactions, $${d} balance`:"No associated data"}}async function G9(n,e=null,t=!1){const r=await BT(n);if(!r.exists)throw new Error("Business not found");if(r.hasData&&!t)throw new Error(`Cannot delete: ${r.reason}. Use force=true to soft delete anyway.`);const s=et(Se,ls,n);return await Vt(s,{isDeleted:!0,deletedAt:Xe(),deletedBy:e,isActive:!1}),{success:!0,wasForced:r.hasData&&t}}async function Q9(n){const e=et(Se,ls,n);await Vt(e,{isDeleted:!1,deletedAt:null,deletedBy:null,restoredAt:Xe()})}async function Y9(n){const e=et(Se,ls,n);await Vt(e,{checkinCount:ta(1)})}async function X9(n,e){const t=et(Se,ls,n);await Vt(t,{isActive:e})}async function J9(n){const e=await Mu(n);return e?{...e,kinderbucksBalance:e.kinderbucksBalance||0,lifetimeAccepted:e.lifetimeAccepted||0,lifetimeRedeemed:e.lifetimeRedeemed||0}:null}async function Z9(n,e){const t=et(Se,ls,n);await Vt(t,{photoUrl:e,photoUpdatedAt:Xe()})}async function Ek(n,e){const t=et(Se,ls,n);await Vt(t,{loyaltyRewards:e,loyaltyUpdatedAt:Xe()})}const Jp={food:{label:"Food & Drink",Icon:x0,color:"#e74c3c"},retail:{label:"Retail",Icon:Bf,color:"#9b59b6"},services:{label:"Services",Icon:f0,color:"#3498db"},arts:{label:"Arts & Culture",Icon:y0,color:"#1abc9c"}};function eB(){const[n,e]=C.useState([]),[t,r]=C.useState(!0),[s,l]=C.useState("all");C.useEffect(()=>{async function d(){const m=await Qr();e(m.filter(g=>g.isActive)),r(!1)}d()},[]);const c=s==="all"?n:n.filter(d=>d.category===s),h={total:n.length,food:n.filter(d=>d.category==="food").length,retail:n.filter(d=>d.category==="retail").length};return o.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[o.jsx(Wn,{}),o.jsx("section",{style:{background:"var(--kb-navy)",color:"var(--kb-white)",padding:"4rem 1rem",textAlign:"center"},children:o.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[o.jsx("h1",{style:{marginBottom:"1rem"},children:"For Local Businesses"}),o.jsx("p",{style:{color:"var(--kb-gray-300)",fontSize:"1.1rem",marginBottom:"2rem"},children:"Join the Kinderbucks network and connect with customers committed to shopping local"}),o.jsx(he,{to:"/admin/businesses",className:"btn btn-gold",children:"Register Your Business"})]})}),o.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:o.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[o.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem",textAlign:"center"},children:"Why Accept Kinderbucks?"}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"2rem"},children:[{Icon:$r,title:"Committed Customers",description:"Kinderbucks holders have already decided to spend locally. They're not comparison shopping online."},{Icon:X3,title:"Money Stays Local",description:"Unlike credit cards that send fees elsewhere, Kinderbucks keep circulating in our village economy."},{Icon:V3,title:"Free Marketing",description:"Get listed in our business directory, featured on our homepage, and promoted to all members."},{Icon:RV,title:"Community Standing",description:"Show customers you're invested in Kinderhook's future. Participating businesses are community leaders."},{Icon:Yi,title:"Easy Redemption",description:"Redeem Kinderbucks for USD at any time through our simple merchant portal. No waiting."},{Icon:m0,title:"Customer Insights",description:"Access check-in data and understand your customers' behavior across the village."}].map((d,m)=>o.jsxs(pe.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:m*.1},viewport:{once:!0},className:"card",style:{textAlign:"center"},children:[o.jsx("div",{style:{width:"60px",height:"60px",background:"var(--kb-navy)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:o.jsx(d.Icon,{size:28,color:"var(--kb-gold)",strokeWidth:1.5})}),o.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:d.title}),o.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem"},children:d.description})]},m))})]})}),o.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:o.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[o.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem",textAlign:"center"},children:"How It Works"}),o.jsx("div",{style:{display:"grid",gap:"1.5rem"},children:[{step:1,title:"Register",desc:"Sign up as a participating business. It's free to join."},{step:2,title:"Get Your QR Code",desc:"We'll provide a unique check-in QR code for your location."},{step:3,title:"Display It",desc:"Put the QR code at your counter or entrance for customers to scan."},{step:4,title:"Accept Kinderbucks",desc:"Take Kinderbucks as payment, just like cash. Same denominations."},{step:5,title:"Redeem Anytime",desc:"Exchange accumulated Kinderbucks back to USD when you need."}].map((d,m)=>o.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center",background:"var(--kb-white)",padding:"1.5rem",borderRadius:"12px",boxShadow:"var(--shadow-sm)"},children:[o.jsx("div",{style:{width:"40px",height:"40px",background:"var(--kb-gold)",color:"var(--kb-navy)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"700",flexShrink:0},children:d.step}),o.jsxs("div",{children:[o.jsx("h4",{style:{color:"var(--kb-navy)",marginBottom:"0.25rem"},children:d.title}),o.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem",margin:0},children:d.desc})]})]},m))})]})}),o.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:o.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[o.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem",textAlign:"center"},children:"Participating Businesses"}),o.jsxs("p",{style:{color:"var(--kb-gray-500)",textAlign:"center",marginBottom:"2rem"},children:[h.total," businesses currently accepting Kinderbucks"]}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center",marginBottom:"2rem",flexWrap:"wrap"},children:[o.jsxs("button",{onClick:()=>l("all"),className:s==="all"?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem"},children:["All (",h.total,")"]}),Object.entries(Jp).map(([d,m])=>o.jsxs("button",{onClick:()=>l(d),className:s===d?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem",display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(m.Icon,{size:16})," ",m.label]},d))]}),t?o.jsx("p",{style:{textAlign:"center"},children:"Loading businesses..."}):c.length===0?o.jsxs("p",{style:{textAlign:"center",color:"var(--kb-gray-500)"},children:["No businesses found. ",o.jsx(he,{to:"/admin/businesses",children:"Add some!"})]}):o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:"1rem"},children:c.map((d,m)=>{const g=Jp[d.category]||Jp.services;return o.jsxs(pe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:m*.03},className:"card",style:{padding:"1.25rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("div",{style:{width:"40px",height:"40px",background:`${g.color}15`,borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(g.Icon,{size:20,color:g.color,strokeWidth:1.5})}),o.jsxs("div",{children:[o.jsx("h4",{style:{color:"var(--kb-navy)",margin:0,fontSize:"1rem"},children:d.name}),o.jsx("span",{style:{fontSize:"0.8rem",color:g.color},children:g.label})]})]}),d.checkinCount>0&&o.jsxs("div",{style:{marginTop:"0.75rem",fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:[d.checkinCount," check-ins"]})]},d.code)})})]})}),o.jsxs("section",{style:{padding:"3rem 1rem",background:"var(--kb-gold)",color:"var(--kb-navy)",textAlign:"center"},children:[o.jsx("h3",{style:{marginBottom:"1rem"},children:"Ready to join the network?"}),o.jsx("p",{style:{opacity:.9,marginBottom:"1.5rem"},children:"Registration is free. Start accepting Kinderbucks today."}),o.jsx(he,{to:"/admin/businesses",className:"btn btn-primary",children:"Register Your Business"})]}),o.jsx($n,{})]})}const zT="members";function af(){return na.currentUser?na.currentUser.uid:lf()}function lf(){let n=localStorage.getItem("kinderhooker_visitor_id");return n||(n="anon_"+Math.random().toString(36).substring(2,15),localStorage.setItem("kinderhooker_visitor_id",n)),n}async function Vu(n){const e=et(Se,zT,n),t=await Kr(e);return t.exists()?{visitorId:t.id,...t.data()}:null}async function tB(n,e){const t=et(Se,zT,n),r=await Kr(t);if(r.exists()){const s=r.data(),l=s.businessesVisited||[],c=!l.includes(e),h=c?l.length+1:l.length,d=ay(h),m=d!==s.tier;return await Vt(t,{businessesVisited:S2(e),totalCheckins:ta(1),tier:d,lastCheckin:Xe()}),{isNewBusiness:c,tierChanged:m,oldTier:s.tier,newTier:d,businessesVisited:c?[...l,e]:l,totalCheckins:(s.totalCheckins||0)+1}}else{const s=ay(1);return await Ll(t,{visitorId:n,tier:s,businessesVisited:[e],totalCheckins:1,createdAt:Xe(),lastCheckin:Xe(),email:null}),{isNewBusiness:!0,tierChanged:!0,oldTier:null,newTier:s,businessesVisited:[e],totalCheckins:1}}}const nB={curious:hn,hooked:Sr,lineAndSinker:_r,patron:sr};function rB(){const[n,e]=C.useState(null),[t,r]=C.useState(!0),[s,l]=C.useState(20),[c,h]=C.useState(!1),[d,m]=C.useState(!1);C.useEffect(()=>{async function P(){const M=lf(),N=await Vu(M);e(N),r(!1)}P()},[]);const g=(n==null?void 0:n.tier)||"curious",y=br[g]||br.curious,x=n?y.bonus:.1,E=s*x,k=s+E,S=async()=>{h(!0);try{await Mf(ot(Se,"exchanges"),{visitorId:lf(),usdAmount:s,bonusRate:x,bonusAmount:E,kinderbucksAmount:k,tier:g,status:"pending",createdAt:Xe()}),m(!0)}catch(P){console.error("Exchange error:",P),alert("Error submitting exchange request")}h(!1)},T=[10,20,50,100];return o.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[o.jsx(Wn,{}),o.jsx("section",{style:{background:"linear-gradient(135deg, var(--kb-green) 0%, var(--kb-green-light) 100%)",color:"var(--kb-white)",padding:"3rem 1rem",textAlign:"center"},children:o.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto"},children:[o.jsx("h1",{style:{marginBottom:"0.5rem"},children:"Get Kinderbucks"}),o.jsx("p",{style:{opacity:.9},children:"Exchange USD for local currency with bonus value"})]})}),o.jsx("section",{style:{padding:"3rem 1rem",background:"var(--kb-cream)",flex:1},children:o.jsx("div",{style:{maxWidth:"500px",margin:"0 auto"},children:d?o.jsxs(pe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"card",style:{textAlign:"center",padding:"3rem 2rem"},children:[o.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:""}),o.jsx("h2",{style:{color:"var(--kb-green)",marginBottom:"1rem"},children:"Exchange Requested!"}),o.jsxs("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem"},children:["Your exchange request for ",o.jsxs("strong",{children:["$",s," USD"]})," "," ",o.jsxs("strong",{children:["$",k.toFixed(2)," Kinderbucks"]})," has been submitted."]}),o.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem",marginBottom:"2rem"},children:"Visit any exchange point to complete your transaction and receive your Kinderbucks."}),o.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[o.jsx("button",{onClick:()=>m(!1),className:"btn btn-primary",children:"Exchange More"}),o.jsx(he,{to:"/account",className:"btn btn-secondary",children:"View Account"})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)",marginBottom:"0.25rem"},children:"Your Tier"}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(()=>{const P=nB[g]||hn;return o.jsx(P,{size:28,color:y.color,strokeWidth:1.5})})(),o.jsx("span",{style:{fontWeight:"600",color:y.color,fontSize:"1.2rem"},children:y.name})]})]}),o.jsxs("div",{style:{textAlign:"right"},children:[o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)",marginBottom:"0.25rem"},children:"Bonus Rate"}),o.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:y.color},children:[Math.round(x*100),"%"]})]})]}),!n&&o.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"var(--kb-gray-50)",borderRadius:"8px",fontSize:"0.85rem",color:"var(--kb-gray-600)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(I3,{size:16,color:"var(--kb-gold)"})," ",o.jsx(he,{to:"/profile",style:{color:"var(--kb-navy)"},children:"Visit businesses"})," to increase your tier and get better rates!"]})]}),o.jsxs("div",{className:"card",children:[o.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem"},children:"Exchange Calculator"}),o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsx("label",{children:"Amount (USD)"}),o.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem"},children:T.map(P=>o.jsxs("button",{onClick:()=>l(P),className:s===P?"btn btn-primary":"btn btn-secondary",style:{flex:1,padding:"0.5rem"},children:["$",P]},P))}),o.jsx("input",{type:"number",value:s,onChange:P=>l(Math.max(1,Number(P.target.value))),min:"1",style:{width:"100%"}})]}),o.jsxs("div",{style:{background:"var(--kb-gray-50)",borderRadius:"12px",padding:"1.5rem",marginBottom:"1.5rem"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.75rem"},children:[o.jsx("span",{style:{color:"var(--kb-gray-600)"},children:"USD Amount"}),o.jsxs("span",{style:{fontWeight:"600"},children:["$",s.toFixed(2)]})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.75rem"},children:[o.jsxs("span",{style:{color:"var(--kb-gray-600)"},children:[y.name," Bonus (",Math.round(x*100),"%)"]}),o.jsxs("span",{style:{fontWeight:"600",color:"var(--kb-green)"},children:["+$",E.toFixed(2)]})]}),o.jsx("div",{className:"divider",style:{margin:"0.75rem 0"}}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsx("span",{style:{color:"var(--kb-navy)",fontWeight:"600"},children:"You Receive"}),o.jsxs("span",{style:{fontFamily:"var(--font-display)",fontSize:"1.8rem",fontWeight:"700",color:"var(--kb-gold-dark)"},children:["$",k.toFixed(2)]})]}),o.jsx("div",{style:{textAlign:"right",fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Kinderbucks"})]}),o.jsx("button",{onClick:S,disabled:c,className:"btn btn-gold",style:{width:"100%",padding:"1rem",fontSize:"1.1rem"},children:c?"Processing...":`Exchange $${s} for $${k.toFixed(2)} Kinderbucks`}),o.jsx("p",{style:{textAlign:"center",fontSize:"0.85rem",color:"var(--kb-gray-500)",marginTop:"1rem"},children:"Complete your exchange at any participating business or exchange point"})]}),o.jsxs("div",{className:"card",style:{marginTop:"1.5rem"},children:[o.jsx("h4",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Exchange Locations"}),o.jsxs("div",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem"},children:[o.jsxs("p",{style:{marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(kl,{size:16,color:"var(--kb-green)"})," ",o.jsx("strong",{children:"OK Pantry"})," - 2 Hudson Street"]}),o.jsxs("p",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(kl,{size:16,color:"var(--kb-green)"})," ",o.jsx("strong",{children:"Village Hall"})," - During events"]})]})]})]})})}),o.jsx($n,{})]})}const Tk={curious:hn,hooked:Sr,lineAndSinker:_r,patron:sr};function iB(){var P,M;const[n,e]=C.useState(null),[t,r]=C.useState([]),[s,l]=C.useState([]),[c,h]=C.useState(!0),[d,m]=C.useState("overview");if(C.useEffect(()=>{async function N(){const F=lf(),$=await Vu(F),K=await Qr();try{const A=nn(ot(Se,"exchanges"),_n("visitorId","==",F),is("createdAt","desc")),j=await Et(A);l(j.docs.map(D=>({id:D.id,...D.data()})))}catch(A){console.error("Error loading exchanges:",A)}e($),r(K),h(!1)}N()},[]),c)return o.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[o.jsx(Wn,{}),o.jsx("div",{className:"page page-center",style:{flex:1},children:o.jsx("div",{style:{fontSize:"2rem"},children:"Loading..."})}),o.jsx($n,{})]});const g=(n==null?void 0:n.tier)||null,y=g?br[g]:null,x=((P=n==null?void 0:n.businessesVisited)==null?void 0:P.length)||0,E=OT(x),k=((M=n==null?void 0:n.businessesVisited)==null?void 0:M.map(N=>{const F=t.find($=>$.code===N);return F?F.name:N}))||[],S=t.filter(N=>{var F;return N.isActive&&!((F=n==null?void 0:n.businessesVisited)!=null&&F.includes(N.code))}),T=s.reduce((N,F)=>N+(F.kinderbucksAmount||0),0);return o.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[o.jsx(Wn,{}),o.jsx("section",{style:{background:"var(--kb-navy)",color:"var(--kb-white)",padding:"2rem 1rem"},children:o.jsx("div",{style:{maxWidth:"800px",margin:"0 auto"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[o.jsx("div",{style:{width:"80px",height:"80px",background:y?y.color:"var(--kb-gray-500)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:(()=>{const N=g&&Tk[g]?Tk[g]:hn;return o.jsx(N,{size:40,color:"white",strokeWidth:1.5})})()}),o.jsxs("div",{style:{flex:1},children:[o.jsx("div",{style:{fontSize:"0.9rem",color:"var(--kb-gray-300)",marginBottom:"0.25rem"},children:"OK Membership"}),o.jsx("h1",{style:{fontSize:"1.5rem",marginBottom:"0.25rem"},children:y?y.name:"New Member"}),o.jsx("div",{style:{fontSize:"0.9rem",color:"var(--kb-gold)"},children:y?`${Math.round(y.bonus*100)}% Exchange Bonus`:"Start exploring to earn rewards"})]}),o.jsx(he,{to:"/exchange",className:"btn btn-gold",children:"Get Kinderbucks"})]})})}),o.jsx("div",{style:{background:"var(--kb-white)",borderBottom:"1px solid var(--kb-gray-200)",position:"sticky",top:"70px",zIndex:50},children:o.jsx("div",{style:{maxWidth:"800px",margin:"0 auto",display:"flex",gap:"2rem",padding:"0 1rem"},children:["overview","progress","history"].map(N=>o.jsx("button",{onClick:()=>m(N),style:{background:"none",border:"none",padding:"1rem 0",fontSize:"0.95rem",fontWeight:d===N?"600":"400",color:d===N?"var(--kb-navy)":"var(--kb-gray-500)",borderBottom:d===N?"2px solid var(--kb-gold)":"2px solid transparent",cursor:"pointer",textTransform:"capitalize"},children:N},N))})}),o.jsx("section",{style:{padding:"2rem 1rem",background:"var(--kb-cream)",flex:1},children:o.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[d==="overview"&&o.jsxs(pe.div,{initial:{opacity:0},animate:{opacity:1},children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[o.jsxs("div",{className:"card",style:{textAlign:"center"},children:[o.jsx("div",{className:"stat-value",children:x}),o.jsx("div",{className:"stat-label",children:"Businesses Visited"})]}),o.jsxs("div",{className:"card",style:{textAlign:"center"},children:[o.jsx("div",{className:"stat-value",children:(n==null?void 0:n.totalCheckins)||0}),o.jsx("div",{className:"stat-label",children:"Total Check-ins"})]}),o.jsxs("div",{className:"card",style:{textAlign:"center"},children:[o.jsxs("div",{className:"stat-value",style:{color:"var(--kb-gold)"},children:["$",T.toFixed(0)]}),o.jsx("div",{className:"stat-label",children:"Kinderbucks Exchanged"})]})]}),o.jsxs("div",{className:"card",children:[o.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Quick Actions"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"0.75rem"},children:[o.jsxs(he,{to:"/exchange",className:"btn btn-gold",style:{textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[o.jsx(Yi,{size:18})," Exchange"]}),o.jsxs(he,{to:"/businesses",className:"btn btn-secondary",style:{textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[o.jsx(Lt,{size:18})," Find Businesses"]}),o.jsxs(he,{to:"/benefits",className:"btn btn-secondary",style:{textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[o.jsx(v0,{size:18})," View Benefits"]})]})]})]}),d==="progress"&&o.jsxs(pe.div,{initial:{opacity:0},animate:{opacity:1},children:[y&&o.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[o.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Tier Progress"}),E.nextTier?o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{marginBottom:"0.5rem"},children:[o.jsx("span",{style:{color:y.color,fontWeight:"600"},children:y.name}),o.jsx("span",{style:{color:"var(--kb-gray-400)",margin:"0 0.5rem"},children:""}),o.jsx("span",{style:{color:E.nextTier.color,fontWeight:"600"},children:E.nextTier.name})]}),o.jsx("div",{className:"progress-bar",style:{height:"12px",marginBottom:"0.5rem"},children:o.jsx("div",{className:"progress-bar-fill",style:{width:`${E.progress}%`,background:y.color}})}),o.jsxs("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:[E.remaining," more business",E.remaining!==1?"es":""," to reach ",E.nextTier.name]})]}):o.jsxs("p",{style:{color:"var(--kb-gold)",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(sr,{size:20})," Maximum tier reached! You're a Village Patron!"]})]}),o.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[o.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx($i,{size:20,color:"var(--kb-green)"})," Businesses Visited (",k.length,")"]}),k.length>0?o.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:k.map((N,F)=>o.jsxs("span",{style:{background:"#d4edda",color:"var(--kb-green)",padding:"0.4rem 0.75rem",borderRadius:"100px",fontSize:"0.85rem",display:"inline-flex",alignItems:"center",gap:"0.25rem"},children:[o.jsx($i,{size:14})," ",N]},F))}):o.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"No businesses visited yet"})]}),S.length>0&&o.jsxs("div",{className:"card",children:[o.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(V2,{size:20,color:"var(--kb-navy)"})," Still to Explore (",S.length,")"]}),o.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:[S.slice(0,12).map(N=>o.jsx("span",{style:{background:"var(--kb-gray-100)",color:"var(--kb-gray-600)",padding:"0.4rem 0.75rem",borderRadius:"100px",fontSize:"0.85rem"},children:N.name},N.code)),S.length>12&&o.jsxs("span",{style:{color:"var(--kb-gray-500)",padding:"0.4rem"},children:["+",S.length-12," more"]})]})]})]}),d==="history"&&o.jsx(pe.div,{initial:{opacity:0},animate:{opacity:1},children:o.jsxs("div",{className:"card",children:[o.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Exchange History"}),s.length>0?o.jsx("div",{children:s.map((N,F)=>{var $,K,A,j;return o.jsxs("div",{style:{padding:"1rem 0",borderBottom:F<s.length-1?"1px solid var(--kb-gray-100)":"none",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsxs("div",{children:[o.jsxs("div",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:["$",N.usdAmount,"  $",($=N.kinderbucksAmount)==null?void 0:$.toFixed(2)," KB"]}),o.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:[((j=(A=(K=N.createdAt)==null?void 0:K.toDate)==null?void 0:A.call(K))==null?void 0:j.toLocaleDateString())||"Pending","  ",Math.round(N.bonusRate*100),"% bonus"]})]}),o.jsx("span",{className:"badge",style:{background:N.status==="completed"?"#d4edda":"#fff3cd",color:N.status==="completed"?"var(--kb-green)":"#856404"},children:N.status})]},N.id)})}):o.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"var(--kb-gray-500)"},children:[o.jsx("p",{style:{marginBottom:"1rem"},children:"No exchanges yet"}),o.jsx(he,{to:"/exchange",className:"btn btn-gold",children:"Make Your First Exchange"})]})]})})]})}),o.jsx($n,{})]})}const Ik={curious:hn,hooked:Sr,lineAndSinker:_r,patron:sr},Mc={curious:"#888888",hooked:"#2e7d32",lineAndSinker:"#1565c0",patron:"#c9a227"};function sB(){var S,T;const{user:n,profile:e,isAuthenticated:t}=Gr(),[r,s]=C.useState(null),[l,c]=C.useState([]),[h,d]=C.useState(!0);C.useEffect(()=>{async function P(){const M=af(),N=await Vu(M),F=await Qr();s(N),c(F.filter($=>$.isActive)),d(!1)}P()},[n]);const m=(r==null?void 0:r.tier)||"curious",g=br[m],y=((S=r==null?void 0:r.businessesVisited)==null?void 0:S.length)||0,x=OT(y),E=((T=r==null?void 0:r.businessesVisited)==null?void 0:T.map(P=>{const M=l.find(N=>N.code===P);return M?M.name:P}))||[],k=l.filter(P=>{var M;return!((M=r==null?void 0:r.businessesVisited)!=null&&M.includes(P.code))});return o.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[o.jsx(Wn,{}),o.jsx("main",{style:{flex:1,background:"var(--kb-cream)",padding:"2rem 1rem"},children:o.jsx("div",{style:{maxWidth:"600px",margin:"0 auto"},children:h?o.jsx("div",{style:{textAlign:"center",padding:"4rem 0"},children:o.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading your profile..."})}):r?o.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[t&&e&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1.5rem",padding:"1rem",background:"white",borderRadius:"12px"},children:[o.jsx("div",{style:{width:"48px",height:"48px",background:"var(--kb-gray-100)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(cl,{size:24,color:"var(--kb-gray-500)"})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:e.displayName||n.email}),o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:n.email})]})]}),o.jsxs(pe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.1},style:{background:`linear-gradient(135deg, ${Mc[m]} 0%, ${Mc[m]}dd 100%)`,borderRadius:"20px",padding:"2rem",color:"white",textAlign:"center",marginBottom:"1.5rem",boxShadow:"0 4px 20px rgba(0,0,0,0.2)"},children:[(()=>{const P=Ik[m]||hn;return o.jsx(P,{size:48,color:"white",strokeWidth:1.5,style:{marginBottom:"0.5rem"}})})(),o.jsx("div",{style:{fontSize:"1.8rem",fontWeight:"bold",marginBottom:"0.25rem"},children:g.name}),o.jsxs("div",{style:{opacity:.9,fontSize:"1rem"},children:[Math.round(g.bonus*100),"% Kinderbuck Exchange Bonus"]})]}),o.jsxs(he,{to:"/card",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",width:"100%",padding:"1.25rem",background:"linear-gradient(135deg, var(--kb-gold) 0%, #d4af37 100%)",color:"var(--kb-navy)",borderRadius:"16px",fontSize:"1.25rem",fontWeight:"700",textDecoration:"none",marginBottom:"1.5rem",boxShadow:"0 4px 12px rgba(201, 162, 39, 0.3)"},children:[o.jsx(Ng,{size:28}),"SHOW MY OK CARD"]}),o.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[o.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",textAlign:"center"},children:[y," Business",y!==1?"es":""," Visited"]}),x.nextTier?o.jsxs(o.Fragment,{children:[o.jsx("div",{style:{background:"var(--kb-gray-100)",borderRadius:"10px",height:"28px",overflow:"hidden",marginBottom:"0.75rem"},children:o.jsxs(pe.div,{initial:{width:0},animate:{width:`${x.progress}%`},transition:{delay:.3,duration:.8},style:{background:`linear-gradient(90deg, ${Mc[m]}, ${x.nextTier.color})`,height:"100%",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"0.85rem",fontWeight:"bold"},children:[y,"/",x.nextTier.threshold]})}),o.jsxs("p",{style:{color:"var(--kb-gray-600)",textAlign:"center"},children:[o.jsx("strong",{children:x.remaining})," more to reach"," ",o.jsx("strong",{style:{color:x.nextTier.color},children:x.nextTier.name})]})]}):o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",color:"var(--kb-gold-dark)",fontWeight:"600"},children:[o.jsx(sr,{size:20})," Maximum tier reached! You're a true Village Patron!"]})]}),E.length>0&&o.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[o.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx($i,{size:20,color:"var(--kb-green)"})," Visited"]}),o.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:E.map((P,M)=>o.jsxs("span",{style:{padding:"0.4rem 0.8rem",background:"#e8f5e9",borderRadius:"6px",color:"#2e7d32",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:[o.jsx($i,{size:14})," ",P]},M))})]}),k.length>0&&o.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[o.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(V2,{size:20})," Still to Explore (",k.length,")"]}),o.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:[k.slice(0,10).map(P=>o.jsx("span",{style:{padding:"0.4rem 0.8rem",background:"var(--kb-gray-100)",borderRadius:"6px",color:"var(--kb-gray-600)",fontSize:"0.9rem"},children:P.name},P.code)),k.length>10&&o.jsxs("span",{style:{padding:"0.4rem 0.8rem",color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:["+",k.length-10," more"]})]}),o.jsxs(he,{to:"/businesses",style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",marginTop:"1rem",color:"var(--kb-navy)",fontWeight:"500",fontSize:"0.9rem"},children:["View all businesses ",o.jsx(Pg,{size:16})]})]}),o.jsxs("div",{style:{textAlign:"center",color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:["Total check-ins: ",r.totalCheckins||0]}),!t&&o.jsxs("div",{style:{marginTop:"2rem",padding:"1rem",background:"rgba(201, 162, 39, 0.1)",borderRadius:"12px",textAlign:"center"},children:[o.jsx("p",{style:{color:"var(--kb-gray-700)",marginBottom:"0.75rem"},children:"Sign in to save your progress across devices"}),o.jsxs(he,{to:"/login",className:"btn btn-gold",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(wl,{size:18})," Sign In"]})]})]}):o.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[o.jsxs("div",{className:"card",style:{padding:"2rem",textAlign:"center",marginBottom:"2rem"},children:[o.jsx("div",{style:{width:"80px",height:"80px",background:"linear-gradient(135deg, var(--kb-navy) 0%, var(--kb-navy-light) 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.5rem"},children:o.jsx(v0,{size:36,color:"var(--kb-gold)"})}),o.jsx("h1",{style:{color:"var(--kb-navy)",marginBottom:"0.75rem"},children:"Welcome to Kinderbucks!"}),o.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem",fontSize:"1.05rem"},children:"You haven't checked in anywhere yet. Visit a local business and scan their QR code to start building your Kinderhooker status!"}),!t&&o.jsxs("div",{style:{background:"rgba(201, 162, 39, 0.1)",borderRadius:"12px",padding:"1rem",marginBottom:"1.5rem"},children:[o.jsx("p",{style:{color:"var(--kb-gray-700)",fontSize:"0.9rem",marginBottom:"0.75rem"},children:"Sign in to save your progress across devices"}),o.jsxs(he,{to:"/login",className:"btn btn-gold",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(wl,{size:18})," Sign In or Create Account"]})]}),o.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap",justifyContent:"center"},children:[o.jsxs(he,{to:"/businesses",className:"btn btn-primary",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(kl,{size:18})," Find Businesses"]}),o.jsxs(he,{to:"/card",className:"btn btn-gold",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Ng,{size:18})," View My Card"]})]})]}),o.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[o.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",textAlign:"center"},children:"How to Get Started"}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[{step:1,text:"Visit any participating Kinderhook business",icon:Lt},{step:2,text:"Scan their check-in QR code with your phone",icon:hn},{step:3,text:"Build your tier to unlock better exchange rates",icon:to}].map(P=>o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[o.jsx("div",{style:{width:"44px",height:"44px",background:"var(--kb-navy)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:o.jsx(P.icon,{size:20,color:"var(--kb-gold)"})}),o.jsx("div",{style:{color:"var(--kb-gray-700)"},children:P.text})]},P.step))})]}),o.jsxs("div",{style:{marginTop:"2rem"},children:[o.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",textAlign:"center"},children:"Tier Rewards"}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.75rem"},children:Object.entries(br).map(([P,M])=>{const N=Ik[P];return o.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"1rem",textAlign:"center",border:"1px solid var(--kb-gray-200)"},children:[o.jsx(N,{size:24,color:Mc[P],style:{marginBottom:"0.5rem"}}),o.jsx("div",{style:{fontWeight:"600",color:Mc[P],marginBottom:"0.25rem"},children:M.name}),o.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:[Math.round(M.bonus*100),"% bonus"]})]},P)})})]})]})})}),o.jsx($n,{})]})}function oB(){var N,F;const[n,e]=C.useState("login"),[t,r]=C.useState(""),[s,l]=C.useState(""),[c,h]=C.useState(""),[d,m]=C.useState(""),[g,y]=C.useState(!1),x=io(),E=Er(),{isAuthenticated:k}=Gr(),P=new URLSearchParams(E.search).get("redirect")||((F=(N=E.state)==null?void 0:N.from)==null?void 0:F.pathname)||"/card",M=async $=>{$.preventDefault(),m(""),y(!0);try{if(n==="signup"){if(!c.trim()){m("Please enter your name"),y(!1);return}await lM(t,s,c)}else await cM(t,s);x(P,{replace:!0})}catch(K){console.error("Auth error:",K),K.code==="auth/email-already-in-use"?m("An account with this email already exists"):K.code==="auth/weak-password"?m("Password should be at least 6 characters"):K.code==="auth/invalid-email"?m("Please enter a valid email address"):K.code==="auth/user-not-found"||K.code==="auth/wrong-password"||K.code==="auth/invalid-credential"?m("Invalid email or password"):m("Something went wrong. Please try again.")}y(!1)};return o.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[o.jsx(Wn,{}),o.jsx("section",{style:{flex:1,background:"linear-gradient(180deg, var(--kb-cream) 0%, var(--kb-white) 100%)",padding:"3rem 1rem",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{width:"100%",maxWidth:"420px"},children:[o.jsxs("div",{className:"card",style:{padding:"2rem"},children:[o.jsxs("div",{style:{display:"flex",marginBottom:"2rem",background:"var(--kb-gray-100)",borderRadius:"10px",padding:"4px"},children:[o.jsxs("button",{onClick:()=>{e("login"),m("")},style:{flex:1,padding:"0.75rem",border:"none",borderRadius:"8px",background:n==="login"?"white":"transparent",color:n==="login"?"var(--kb-navy)":"var(--kb-gray-500)",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",boxShadow:n==="login"?"0 1px 3px rgba(0,0,0,0.1)":"none",transition:"all 0.2s"},children:[o.jsx(wl,{size:18})," Sign In"]}),o.jsxs("button",{onClick:()=>{e("signup"),m("")},style:{flex:1,padding:"0.75rem",border:"none",borderRadius:"8px",background:n==="signup"?"white":"transparent",color:n==="signup"?"var(--kb-navy)":"var(--kb-gray-500)",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",boxShadow:n==="signup"?"0 1px 3px rgba(0,0,0,0.1)":"none",transition:"all 0.2s"},children:[o.jsx(Xh,{size:18})," Sign Up"]})]}),o.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[o.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:n==="login"?"Welcome Back":"Join Kinderbucks"}),o.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.95rem"},children:n==="login"?"Sign in to access your account":"Create an account to track your Kinderhooker status"})]}),d&&o.jsxs(pe.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},style:{background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",padding:"0.75rem 1rem",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem",color:"#dc2626",fontSize:"0.9rem"},children:[o.jsx(Gs,{size:18}),d]}),o.jsxs("form",{onSubmit:M,children:[n==="signup"&&o.jsxs("div",{style:{marginBottom:"1rem"},children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Your Name"}),o.jsxs("div",{style:{position:"relative"},children:[o.jsx(cl,{size:18,color:"var(--kb-gray-400)",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)"}}),o.jsx("input",{type:"text",value:c,onChange:$=>h($.target.value),placeholder:"Jane Smith",style:{width:"100%",paddingLeft:"40px"},required:n==="signup"})]})]}),o.jsxs("div",{style:{marginBottom:"1rem"},children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Email"}),o.jsxs("div",{style:{position:"relative"},children:[o.jsx(B2,{size:18,color:"var(--kb-gray-400)",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)"}}),o.jsx("input",{type:"email",value:t,onChange:$=>r($.target.value),placeholder:"you@example.com",style:{width:"100%",paddingLeft:"40px"},required:!0})]})]}),o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Password"}),o.jsxs("div",{style:{position:"relative"},children:[o.jsx(A3,{size:18,color:"var(--kb-gray-400)",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)"}}),o.jsx("input",{type:"password",value:s,onChange:$=>l($.target.value),placeholder:"",style:{width:"100%",paddingLeft:"40px"},required:!0,minLength:6})]}),n==="signup"&&o.jsx("p",{style:{marginTop:"0.5rem",fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:"At least 6 characters"})]}),o.jsx("button",{type:"submit",className:"btn btn-gold",disabled:g,style:{width:"100%",padding:"0.875rem",fontSize:"1rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:g?o.jsxs(o.Fragment,{children:[o.jsx(g0,{size:20,className:"animate-spin",style:{animation:"spin 1s linear infinite"}}),n==="login"?"Signing in...":"Creating account..."]}):o.jsxs(o.Fragment,{children:[n==="login"?o.jsx(wl,{size:20}):o.jsx(Xh,{size:20}),n==="login"?"Sign In":"Create Account"]})})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",margin:"1.5rem 0",gap:"1rem"},children:[o.jsx("div",{style:{flex:1,height:"1px",background:"var(--kb-gray-200)"}}),o.jsx("span",{style:{color:"var(--kb-gray-400)",fontSize:"0.85rem"},children:"or"}),o.jsx("div",{style:{flex:1,height:"1px",background:"var(--kb-gray-200)"}})]}),o.jsxs("button",{type:"button",onClick:async()=>{m(""),y(!0);try{await uM(),x(P,{replace:!0})}catch($){console.error("Google sign-in error:",$),$.code==="auth/popup-closed-by-user"?m("Sign-in cancelled"):m("Could not sign in with Google. Please try again.")}y(!1)},disabled:g,style:{width:"100%",padding:"0.75rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",background:"white",border:"1px solid var(--kb-gray-300)",borderRadius:"8px",cursor:"pointer",fontSize:"0.95rem",fontWeight:"500",color:"var(--kb-gray-700)",transition:"all 0.2s"},children:[o.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",children:[o.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),o.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),o.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),o.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),o.jsx("div",{style:{marginTop:"1rem"},children:o.jsx(he,{to:"/profile",style:{display:"block",textAlign:"center",color:"var(--kb-gray-500)",fontSize:"0.85rem",textDecoration:"none"},children:"Continue as guest (limited features)"})})]}),o.jsx("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"rgba(201, 162, 39, 0.1)",borderRadius:"12px",textAlign:"center"},children:o.jsx("p",{style:{color:"var(--kb-gray-700)",fontSize:"0.9rem",margin:0},children:"Create an account to sync your Kinderhooker status across devices and never lose your tier progress!"})})]})}),o.jsx($n,{}),o.jsx("style",{children:`
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
      `})]})}const Tl="checkins",aB=3600*1e3;async function lB(n,e){var t;try{const r=new Date(Date.now()-aB),s=nn(ot(Se,Tl),_n("visitorId","==",n),_n("businessCode","==",e)),l=await Et(s);if(l.empty)return!1;for(const c of l.docs)if((((t=c.data().timestamp)==null?void 0:t.toDate())||new Date(0))>r)return!0;return!1}catch(r){return console.error("hasRecentCheckin error (allowing checkin):",r),!1}}async function cB(n,e,t){await Mf(ot(Se,Tl),{visitorId:n,businessCode:e,timestamp:Xe(),kinderbucksMatched:!1,boostApplied:0,memberTier:t||"curious"})}async function FT(n){try{const e=nn(ot(Se,Tl),_n("businessCode","==",n));return(await Et(e)).docs.map(s=>({id:s.id,...s.data()})).sort((s,l)=>{var d,m,g,y;const c=((m=(d=s.timestamp)==null?void 0:d.toDate)==null?void 0:m.call(d))||new Date(0);return(((y=(g=l.timestamp)==null?void 0:g.toDate)==null?void 0:y.call(g))||new Date(0))-c}).slice(0,100)}catch(e){return console.error("getCheckinsByBusiness error:",e),[]}}async function uB(){try{return(await Et(ot(Se,Tl))).docs.map(e=>({id:e.id,...e.data()}))}catch(n){return console.error("getAllCheckins error:",n),[]}}async function dB(n){try{let e=nn(ot(Se,Tl),_n("memberId","==",n)),t=await Et(e);return t.empty&&(e=nn(ot(Se,Tl),_n("visitorId","==",n)),t=await Et(e)),t.docs.map(r=>({id:r.id,...r.data()}))}catch(e){return console.error("getMemberCheckins error:",e),[]}}async function hB(n,e){const t=await dB(n),r={};for(const l of e)r[l.code]=l.category||"services";const s={food:0,retail:0,services:0,arts:0};for(const l of t){const c=r[l.businessCode]||"services";s[c]!==void 0&&s[c]++}return s}const fB={curious:hn,hooked:Sr,lineAndSinker:_r,patron:sr},mB={curious:{primary:"#6b7280",secondary:"#9ca3af",bg:"#f3f4f6"},hooked:{primary:"#16a34a",secondary:"#22c55e",bg:"#dcfce7"},lineAndSinker:{primary:"#2563eb",secondary:"#3b82f6",bg:"#dbeafe"},patron:{primary:"#ca8a04",secondary:"#eab308",bg:"#fef3c7"}},pB={food:{name:"Food Explorer",Icon:x0,color:"#e67e22",thresholds:[{count:3,level:"bronze",label:"Taster"},{count:10,level:"silver",label:"Regular"},{count:25,level:"gold",label:"Connoisseur"}]},retail:{name:"Shop Local Hero",Icon:Bf,color:"#3498db",thresholds:[{count:3,level:"bronze",label:"Browser"},{count:10,level:"silver",label:"Shopper"},{count:25,level:"gold",label:"VIP"}]},services:{name:"Service Supporter",Icon:f0,color:"#9b59b6",thresholds:[{count:3,level:"bronze",label:"Visitor"},{count:10,level:"silver",label:"Regular"},{count:25,level:"gold",label:"Loyal"}]},arts:{name:"Culture Seeker",Icon:y0,color:"#1abc9c",thresholds:[{count:3,level:"bronze",label:"Curious"},{count:10,level:"silver",label:"Enthusiast"},{count:25,level:"gold",label:"Patron"}]}},gB={none:{bg:"#f3f4f6",border:"#e5e7eb",text:"#9ca3af"},bronze:{bg:"#fef3e2",border:"#cd7f32",text:"#cd7f32"},silver:{bg:"#f1f5f9",border:"#a8a9ad",text:"#71717a"},gold:{bg:"#fef9c3",border:"#c9a227",text:"#92710c"}};function yB(n,e){let t="none",r=e[0],s=null;for(const l of e)if(n>=l.count){t=l.level,s=l.label;const c=e.indexOf(l)+1;r=e[c]||null}return{level:t,currentLabel:s,nextThreshold:r,count:n}}function vB(){var T;const{user:n,profile:e,isAuthenticated:t}=Gr(),[r,s]=C.useState(null),[l,c]=C.useState({food:0,retail:0,services:0,arts:0}),[h,d]=C.useState(!0);C.useEffect(()=>{async function P(){const M=af(),[N,F]=await Promise.all([Vu(M),Qr()]);if(s(N),M){const $=await hB(M,F);c($)}d(!1)}P()},[n]);const m=(r==null?void 0:r.tier)||"curious",g=br[m],y=mB[m],x=fB[m],E=((T=r==null?void 0:r.businessesVisited)==null?void 0:T.length)||0;Math.round(g.bonus*100);const k=af(),S=k?`OK-${k.substring(0,6).toUpperCase()}`:"OK-GUEST";return h?o.jsx("div",{style:{minHeight:"100vh",background:"var(--kb-navy)",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx("div",{style:{color:"white",fontSize:"1.5rem"},children:"Loading..."})}):o.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(180deg, var(--kb-navy) 0%, #1a3a5c 100%)",padding:"1rem",display:"flex",flexDirection:"column"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[o.jsxs(he,{to:"/map",style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",color:"white",opacity:.8,textDecoration:"none",fontSize:"1rem"},children:[o.jsx(KM,{size:20})," Village Map"]}),o.jsx(he,{to:"/profile",style:{color:"white",opacity:.8,textDecoration:"none",fontSize:"1rem"},children:"My Profile"})]}),o.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsxs(pe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},style:{width:"100%",maxWidth:"380px"},children:[o.jsxs("div",{style:{background:"white",borderRadius:"20px",overflow:"hidden",boxShadow:"0 20px 60px rgba(0,0,0,0.3)",border:"3px solid var(--kb-gold)"},children:[o.jsxs("div",{style:{background:"var(--kb-navy)",padding:"1.25rem 1.5rem",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[o.jsxs("div",{children:[o.jsx("div",{style:{color:"var(--kb-gold)",fontFamily:"var(--font-display)",fontWeight:"700",fontSize:"1.5rem",letterSpacing:"0.02em"},children:"KINDERBUCKS"}),o.jsx("div",{style:{color:"rgba(255,255,255,0.7)",fontSize:"0.8rem",marginTop:"0.1rem"},children:"OK MEMBER CARD"})]}),o.jsx("div",{style:{width:"50px",height:"50px",background:"var(--kb-gold)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--kb-navy)",fontFamily:"var(--font-display)",fontWeight:"700",fontSize:"1.75rem"},children:"K"})]}),o.jsxs("div",{style:{padding:"1.5rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1.5rem"},children:[o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"1.4rem",fontWeight:"600",color:"var(--kb-navy)",marginBottom:"0.15rem"},children:t&&(e!=null&&e.displayName)?e.displayName:"OK Member"}),o.jsx("div",{style:{fontFamily:"monospace",fontSize:"0.95rem",color:"var(--kb-gray-500)"},children:S})]}),o.jsxs("div",{style:{background:`linear-gradient(135deg, ${y.primary} 0%, ${y.secondary} 100%)`,borderRadius:"12px",padding:"0.5rem 0.75rem",display:"flex",alignItems:"center",gap:"0.5rem",color:"white"},children:[o.jsx(x,{size:18}),o.jsx("span",{style:{fontWeight:"600",fontSize:"0.9rem"},children:g.name})]})]}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.75rem",marginBottom:"1.5rem"},children:Object.entries(pB).map(([P,M])=>{const N=l[P]||0,F=yB(N,M.thresholds),$=gB[F.level],K=M.Icon;return o.jsxs("div",{style:{background:$.bg,border:`2px solid ${$.border}`,borderRadius:"12px",padding:"0.75rem",textAlign:"center"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.35rem",marginBottom:"0.35rem"},children:[o.jsx(K,{size:16,color:M.color}),o.jsx("span",{style:{fontSize:"0.75rem",fontWeight:"600",color:M.color,textTransform:"uppercase"},children:P})]}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:F.level==="none"?"var(--kb-gray-400)":$.text,lineHeight:1},children:N}),o.jsx("div",{style:{fontSize:"0.7rem",color:F.level==="none"?"var(--kb-gray-400)":$.text,marginTop:"0.15rem"},children:F.currentLabel||(F.nextThreshold?`${F.nextThreshold.count-N} to ${F.nextThreshold.label}`:"check-ins")})]},P)})}),o.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"2rem",padding:"0.75rem 0",borderTop:"1px solid var(--kb-gray-200)",borderBottom:"1px solid var(--kb-gray-200)",marginBottom:"1rem"},children:[o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"var(--kb-navy)"},children:E}),o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:"Businesses"})]}),o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"var(--kb-navy)"},children:(r==null?void 0:r.totalCheckins)||0}),o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:"Total Check-ins"})]})]}),o.jsxs("div",{style:{background:"var(--kb-cream)",borderRadius:"10px",padding:"0.75rem",textAlign:"center"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"0.25rem",color:"var(--kb-navy)",fontWeight:"600",fontSize:"0.9rem"},children:[o.jsx(Ur,{size:16}),"Scan QR codes to earn badges"]}),o.jsx("p",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)",margin:0},children:"Visit businesses to level up your categories"})]})]}),o.jsx("div",{style:{background:"var(--kb-cream)",padding:"0.75rem 1.5rem",textAlign:"center",borderTop:"1px solid var(--kb-gray-200)"},children:o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:"Village of Kinderhook  Est. 2026"})})]}),o.jsxs(he,{to:"/businesses",className:"btn btn-gold",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",width:"100%",marginTop:"1.5rem",padding:"1rem",fontSize:"1.1rem"},children:[o.jsx(Ur,{size:22}),"Find a Business to Check In"]})]})})]})}const Lu="kinderbucks",xB="scans";async function UT(n){const e=et(Se,Lu,n),t=await Kr(e);return t.exists()?{serial:t.id,...t.data()}:null}async function WT(){const n=nn(ot(Se,Lu),is("serial"));return(await Et(n)).docs.map(t=>({serial:t.id,...t.data()}))}async function bB(n,e){const t=n.map(r=>Ll(et(Se,Lu,r),{serial:r,denomination:e,status:"draft",scanCount:0,createdAt:Xe()}));await Promise.all(t)}async function wB(n,e,t=null){const r=et(Se,Lu,n),s={status:e,issuedAt:Xe(),...t&&{issuedTo:t}};await Vt(r,s)}async function kB(n){const e=et(Se,Lu,n);await Vt(e,{scanCount:ta(1),lastScanned:Xe(),status:"active"}),await Mf(ot(Se,xB),{serial:n,scannedAt:Xe(),userAgent:navigator.userAgent||null})}async function _B(n){const e=await UT(n);return e?e.status!=="active"?{valid:!1,error:`Kinderbuck status is "${e.status}" - must be "active"`}:e.currentHolder&&e.holderType==="business"?{valid:!1,error:"Kinderbuck is already held by a business"}:{valid:!0,kb:e}:{valid:!1,error:"Kinderbuck not found"}}function $T(){const[n,e]=C.useState([]);return C.useEffect(()=>{const t=["#2d5a27","#c9a227","#4a7c43","#d4af37","#5c4033"],r=Array.from({length:50},(s,l)=>({id:l,x:Math.random()*100,color:t[Math.floor(Math.random()*t.length)],delay:Math.random()*.5,duration:2+Math.random()*2,size:8+Math.random()*8}));e(r)},[]),o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,pointerEvents:"none",overflow:"hidden",zIndex:100},children:n.map(t=>o.jsx(pe.div,{initial:{y:-20,x:`${t.x}vw`,opacity:1,rotate:0},animate:{y:"110vh",rotate:360*(Math.random()>.5?1:-1),opacity:[1,1,0]},transition:{duration:t.duration,delay:t.delay,ease:"linear"},style:{position:"absolute",width:t.size,height:t.size,background:t.color,borderRadius:Math.random()>.5?"50%":"2px"}},t.id))})}const Ck={1:{bg:"#d4edda",text:"#155724"},5:{bg:"#cce5ff",text:"#004085"},10:{bg:"#e2d5e7",text:"#4a235a"},20:{bg:"#fff3cd",text:"#856404"}};function SB({kinderbuck:n}){const e=Ck[n.denomination]||Ck[5];return o.jsxs(pe.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",duration:.5},className:"card",style:{textAlign:"center",maxWidth:"400px",background:e.bg},children:[o.jsxs(pe.div,{initial:{y:-20},animate:{y:0},transition:{delay:.2},children:[o.jsxs("h1",{style:{color:e.text,fontSize:"3rem",marginBottom:"0.5rem"},children:["$",n.denomination]}),o.jsx("p",{style:{fontFamily:"monospace",fontSize:"1.5rem",color:e.text},children:n.serial})]}),o.jsx(pe.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},style:{marginTop:"1.5rem"},children:o.jsx("div",{style:{display:"inline-block",padding:"0.5rem 1rem",background:"rgba(255,255,255,0.7)",borderRadius:"20px",color:"var(--kb-green)",fontWeight:"bold"},children:"VERIFIED AUTHENTIC"})}),o.jsxs(pe.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},style:{marginTop:"1.5rem",fontSize:"0.9rem",opacity:.8},children:[o.jsxs("p",{children:["Status: ",o.jsx("strong",{children:n.status})]}),n.issuedAt&&o.jsxs("p",{children:["Issued: ",new Date(n.issuedAt.seconds*1e3).toLocaleDateString()]}),o.jsxs("p",{children:["Scans: ",n.scanCount||1]})]}),o.jsx(pe.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.8,type:"spring"},style:{marginTop:"1.5rem"},children:o.jsx("iframe",{src:"https://giphy.com/embed/B1txHfofr9y08bDB8b",width:"200",height:"200",frameBorder:"0",style:{borderRadius:"12px",pointerEvents:"none"},allowFullScreen:!0})})]})}function EB(){const{serial:n}=hy(),[e,t]=C.useState(null),[r,s]=C.useState(!0),[l,c]=C.useState(null);return C.useEffect(()=>{async function h(){try{const d=await UT(n);d?(t(d),await kB(n)):c("not_found")}catch(d){console.error("Verification error:",d),c("error")}finally{s(!1)}}h()},[n]),r?o.jsxs("div",{className:"page page-center",children:[o.jsx(pe.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},style:{fontSize:"3rem"},children:"$"}),o.jsxs("p",{style:{marginTop:"1rem"},children:["Verifying ",n,"..."]})]}):l==="not_found"?o.jsxs("div",{className:"page page-center",children:[o.jsx("h1",{style:{color:"#c0392b"},children:"Not Found"}),o.jsxs("p",{children:["Serial ",o.jsx("strong",{children:n})," is not a valid Kinderbuck."]})]}):l?o.jsxs("div",{className:"page page-center",children:[o.jsx("h1",{style:{color:"#c0392b"},children:"Error"}),o.jsx("p",{children:"Something went wrong verifying this Kinderbuck."})]}):o.jsxs("div",{className:"page page-center",children:[o.jsx($T,{}),o.jsx(SB,{kinderbuck:e})]})}const TB={curious:hn,hooked:Sr,lineAndSinker:_r,patron:sr},IB={curious:"#6b7280",hooked:"#16a34a",lineAndSinker:"#2563eb",patron:"#ca8a04"};function CB(n,e){const t=new Date,r=t.getHours().toString().padStart(2,"0")+t.getMinutes().toString().padStart(2,"0"),s=e.substring(0,4).toUpperCase();return`${n.substring(0,3).toUpperCase()}-${s}-${r}`}function jB(){const{businessCode:n}=hy(),{isAuthenticated:e}=Gr(),[t,r]=C.useState(null),[s,l]=C.useState(!0),[c,h]=C.useState(null),[d,m]=C.useState(null),[g,y]=C.useState(!1),[x,E]=C.useState(!1),[k,S]=C.useState("");if(C.useEffect(()=>{async function K(){try{const A=await Mu(n);if(!A){h("not_found"),l(!1);return}if(!A.isActive){h("inactive"),l(!1);return}if(r(A),!e){l(!1);return}const j=af();if(S(CB(n,j)),await lB(j,n)){y(!0);const B=await Vu(j);B&&m({tierChanged:!1,newTier:B.tier,businessesVisited:B.businessesVisited||[],totalCheckins:B.totalCheckins||0,isNewBusiness:!1}),l(!1);return}const L=await tB(j,n);await cB(j,n,L.newTier),await Y9(n),m(L),L.tierChanged&&L.newTier&&E(!0),l(!1)}catch(A){console.error("Check-in error:",A),h("error"),l(!1)}}K()},[n,e]),s)return o.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"linear-gradient(180deg, var(--kb-navy) 0%, #1a3a5c 100%)",padding:"2rem"},children:[o.jsx(pe.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:o.jsx(g0,{size:64,color:"var(--kb-gold)"})}),o.jsx("p",{style:{marginTop:"1.5rem",color:"white",fontSize:"1.25rem"},children:"Checking in..."})]});if(c==="not_found")return o.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#fef2f2",padding:"2rem",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:"?"}),o.jsx("h1",{style:{color:"#dc2626",fontSize:"1.75rem",marginBottom:"0.75rem"},children:"Business Not Found"}),o.jsx("p",{style:{color:"#7f1d1d",fontSize:"1.1rem",marginBottom:"2rem"},children:"This QR code doesn't match any participating business."}),o.jsx(he,{to:"/",className:"btn btn-primary",style:{fontSize:"1.1rem",padding:"1rem 2rem"},children:"Go Home"})]});if(c==="inactive")return o.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#fffbeb",padding:"2rem",textAlign:"center"},children:[o.jsx("h1",{style:{color:"#d97706",fontSize:"1.75rem",marginBottom:"0.75rem"},children:"Business Not Active"}),o.jsx("p",{style:{color:"#92400e",fontSize:"1.1rem",marginBottom:"2rem"},children:"This business is not currently participating."}),o.jsx(he,{to:"/",className:"btn btn-primary",style:{fontSize:"1.1rem",padding:"1rem 2rem"},children:"Go Home"})]});if(c)return o.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#fef2f2",padding:"2rem",textAlign:"center"},children:[o.jsx("h1",{style:{color:"#dc2626",fontSize:"1.75rem",marginBottom:"0.75rem"},children:"Something went wrong"}),o.jsx("p",{style:{color:"#7f1d1d",fontSize:"1.1rem",marginBottom:"2rem"},children:"Please try scanning again."}),o.jsx(he,{to:"/",className:"btn btn-primary",style:{fontSize:"1.1rem",padding:"1rem 2rem"},children:"Go Home"})]});const T=(d==null?void 0:d.newTier)||"curious",P=br[T],M=IB[T],N=TB[T],F=Math.round(P.bonus*100),$=e?g?"#6b7280":M:"var(--kb-navy)";return o.jsxs("div",{style:{minHeight:"100vh",background:`linear-gradient(180deg, ${$} 0%, ${$}dd 100%)`,padding:"1.5rem",display:"flex",flexDirection:"column"},children:[x&&o.jsx($T,{}),o.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",maxWidth:"400px",margin:"0 auto",width:"100%"},children:[g?o.jsxs(pe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},style:{textAlign:"center",color:"white"},children:[o.jsx(vr,{size:80,strokeWidth:1.5,style:{marginBottom:"1rem",opacity:.8}}),o.jsx("h1",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"Already Checked In"}),o.jsxs("p",{style:{fontSize:"1.25rem",opacity:.9,marginBottom:"2rem"},children:["at ",t.name]}),o.jsxs("p",{style:{fontSize:"1.1rem",opacity:.8},children:["Come back in about an hour",o.jsx("br",{}),"for another check-in!"]})]}):e?o.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{width:"100%"},children:[o.jsxs("div",{style:{textAlign:"center",color:"white",marginBottom:"1.5rem"},children:[o.jsx(pe.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.2},children:o.jsx("div",{style:{width:"80px",height:"80px",background:"rgba(255,255,255,0.2)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:o.jsx($i,{size:48,strokeWidth:2.5})})}),o.jsx("h1",{style:{fontSize:"1.75rem",marginBottom:"0.25rem"},children:"Checked In!"}),o.jsx("p",{style:{fontSize:"1.25rem",opacity:.9},children:t.name})]}),o.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},style:{background:"white",borderRadius:"24px",padding:"2rem",textAlign:"center",boxShadow:"0 10px 40px rgba(0,0,0,0.2)"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"1rem"},children:[o.jsx(N,{size:28,color:M}),o.jsx("span",{style:{fontSize:"1.25rem",fontWeight:"700",color:M,textTransform:"uppercase"},children:P.name})]}),o.jsxs("div",{style:{background:`${M}15`,borderRadius:"16px",padding:"1.5rem",marginBottom:"1.5rem"},children:[o.jsxs("div",{style:{fontSize:"4rem",fontWeight:"800",color:M,lineHeight:1},children:[F,"%"]}),o.jsx("div",{style:{fontSize:"1.1rem",color:"var(--kb-gray-600)",marginTop:"0.25rem"},children:"Exchange Bonus"})]}),o.jsxs("div",{style:{background:"var(--kb-navy)",borderRadius:"12px",padding:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[o.jsx(U2,{size:18,color:"var(--kb-gold)"}),o.jsx("span",{style:{color:"var(--kb-gold)",fontSize:"0.85rem",fontWeight:"600"},children:"VERIFICATION CODE"})]}),o.jsx("div",{style:{fontFamily:"monospace",fontSize:"1.75rem",fontWeight:"700",color:"white",letterSpacing:"0.1em"},children:k})]}),o.jsxs("p",{style:{fontSize:"1.1rem",color:"var(--kb-gray-600)",lineHeight:1.5},children:["Show this screen to the cashier",o.jsx("br",{}),"to receive your ",o.jsxs("strong",{children:[F,"% bonus"]})]})]}),(d==null?void 0:d.tierChanged)&&o.jsxs(pe.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},style:{marginTop:"1.5rem",padding:"1rem",background:"rgba(255,255,255,0.15)",borderRadius:"12px",textAlign:"center",color:"white"},children:[o.jsx("span",{style:{fontSize:"1.25rem"},children:""}),o.jsxs("span",{style:{marginLeft:"0.5rem",fontWeight:"600"},children:["You just leveled up to ",P.name,"!"]})]})]}):o.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{width:"100%"},children:[o.jsxs("div",{style:{textAlign:"center",color:"white",marginBottom:"1.5rem"},children:[o.jsx(pe.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.2},children:o.jsx("div",{style:{width:"80px",height:"80px",background:"rgba(255,255,255,0.2)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:o.jsx(Xh,{size:40,strokeWidth:1.5})})}),o.jsxs("h1",{style:{fontSize:"1.75rem",marginBottom:"0.25rem"},children:["Welcome to ",t.name,"!"]}),o.jsx("p",{style:{fontSize:"1.1rem",opacity:.9},children:"Sign in to complete your check-in and unlock your discount"})]}),o.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},style:{background:"white",borderRadius:"24px",padding:"2rem",textAlign:"center",boxShadow:"0 10px 40px rgba(0,0,0,0.2)"},children:[o.jsx("div",{style:{width:"60px",height:"60px",background:"var(--kb-gold)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.25rem"},children:o.jsx(Yc,{size:28,color:"var(--kb-navy)"})}),o.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem",fontSize:"1.5rem"},children:"Your Discount is Waiting!"}),o.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"1rem",marginBottom:"1.5rem",lineHeight:1.5},children:"Create a free OK Member account to unlock your exclusive bonus discount."}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",marginBottom:"1.5rem",textAlign:"left",background:"var(--kb-cream)",borderRadius:"12px",padding:"1rem 1.25rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"0.95rem",color:"var(--kb-gray-700)"},children:[o.jsx("div",{style:{width:"24px",height:"24px",background:"var(--kb-green)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx($i,{size:14,color:"white"})}),"Unlock your discount code"]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"0.95rem",color:"var(--kb-gray-700)"},children:[o.jsx("div",{style:{width:"24px",height:"24px",background:"var(--kb-green)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx($i,{size:14,color:"white"})}),"Track your tier progress"]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"0.95rem",color:"var(--kb-gray-700)"},children:[o.jsx("div",{style:{width:"24px",height:"24px",background:"var(--kb-green)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx($i,{size:14,color:"white"})}),"Get your digital OK Member Card"]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"0.95rem",color:"var(--kb-gray-700)"},children:[o.jsx("div",{style:{width:"24px",height:"24px",background:"var(--kb-green)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx($i,{size:14,color:"white"})}),"Earn higher bonuses as you level up"]})]}),o.jsxs(he,{to:`/login?redirect=/checkin/${n}`,className:"btn btn-gold",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",padding:"1rem",fontSize:"1.15rem",marginBottom:"0.75rem"},children:[o.jsx(Xh,{size:22}),"Sign Up Free"]}),o.jsxs("p",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:["Already have an account? ",o.jsx(he,{to:`/login?redirect=/checkin/${n}`,style:{color:"var(--kb-navy)",fontWeight:"600"},children:"Sign In"})]})]})]}),o.jsxs(pe.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},style:{marginTop:"2rem",display:"flex",gap:"0.75rem"},children:[o.jsx(he,{to:"/profile",className:"btn",style:{background:"rgba(255,255,255,0.2)",color:"white",padding:"0.875rem 1.5rem",fontSize:"1rem"},children:"My Profile"}),o.jsx(he,{to:"/",className:"btn",style:{background:"white",color:"var(--kb-navy)",padding:"0.875rem 1.5rem",fontSize:"1rem"},children:"Home"})]})]})]})}const $f="promoCodes";async function hh(n){const e=nn(ot(Se,$f),_n("businessCode","==",n),is("createdAt","desc"));return(await Et(e)).docs.map(r=>({id:r.id,...r.data()}))}async function AB({businessCode:n,code:e,description:t,discountType:r,discountValue:s,minTier:l,expiresAt:c,usageLimit:h}){const d=`${n}-${e.toUpperCase()}`;return await Ll(et(Se,$f,d),{businessCode:n,code:e.toUpperCase(),description:t,discountType:r,discountValue:s,minTier:l||null,expiresAt:c||null,usageLimit:h||null,usageCount:0,isActive:!0,createdAt:Xe()}),d}async function RB(n,e){const t=et(Se,$f,n);await Vt(t,{isActive:e})}async function PB(n){await nM(et(Se,$f,n))}const Ou="transactions";async function NB(n,e,t){const r=I2(Se),s=et(Se,"kinderbucks",n),l=await Kr(s);if(!l.exists())throw new Error("Kinderbuck not found");const h=l.data().denomination;r.update(s,{currentHolder:e,holderType:"business",lastTransferAt:Xe()});const d=et(Se,"businesses",e);r.update(d,{kinderbucksBalance:ta(h),lifetimeAccepted:ta(h)});const m=et(ot(Se,Ou));return r.set(m,{type:"payment",kinderbuckSerial:n,denomination:h,businessCode:e,businessName:t,amount:h,status:"completed",createdAt:Xe()}),await r.commit(),{serial:n,amount:h,businessCode:e}}async function DB(n,e=50){const t=nn(ot(Se,Ou),_n("businessCode","==",n),is("createdAt","desc"));return(await Et(t)).docs.slice(0,e).map(s=>({id:s.id,...s.data()}))}async function MB(n,e,t){return{id:(await Mf(ot(Se,Ou),{type:"redemption",businessCode:n,businessName:e,amount:t,status:"pending",createdAt:Xe()})).id,amount:t,businessCode:n}}async function VB(n,e,t){const r=et(Se,Ou,n),s=await Kr(r);if(!s.exists())throw new Error("Transaction not found");const l=s.data();if(l.status!=="pending")throw new Error("Transaction already processed");const c=I2(Se);if(c.update(r,{status:e?"approved":"rejected",processedBy:t,processedAt:Xe()}),e){const h=et(Se,"businesses",l.businessCode);c.update(h,{kinderbucksBalance:ta(-l.amount),lifetimeRedeemed:ta(l.amount)});const d=nn(ot(Se,"kinderbucks"),_n("currentHolder","==",l.businessCode),_n("status","==","active")),m=await Et(d);let g=l.amount;const y=[];for(const x of m.docs){if(g<=0)break;const E=x.data();c.update(x.ref,{status:"redeemed",redeemedAt:Xe(),redeemedInTransaction:n}),g-=E.denomination,y.push(x.id)}c.update(r,{redeemedSerials:y})}return await c.commit(),{txnId:n,approved:e,status:e?"approved":"rejected"}}async function LB(){const n=nn(ot(Se,Ou),_n("type","==","redemption"),is("createdAt","desc"));return(await Et(n)).docs.map(t=>({id:t.id,...t.data()}))}function OB({isOpen:n,onClose:e,businessCode:t,businessName:r,currentBalance:s,onSuccess:l}){const[c,h]=C.useState(""),[d,m]=C.useState(!1),[g,y]=C.useState(""),[x,E]=C.useState(!1),k=async T=>{T.preventDefault(),y("");const P=parseFloat(c);if(!P||P<=0){y("Please enter a valid amount");return}if(P>s){y(`Amount exceeds your balance of $${s}`);return}m(!0);try{await MB(t,r,P),E(!0),setTimeout(()=>{l==null||l(),e(),E(!1),h("")},2e3)}catch(M){console.error("Error creating redemption:",M),y("Failed to create redemption request")}m(!1)},S=()=>{d||(h(""),y(""),E(!1),e())};return n?o.jsx(X0,{children:o.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},onClick:S,children:o.jsxs(pe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"card",style:{maxWidth:"400px",width:"100%",padding:0,overflow:"hidden"},onClick:T=>T.stopPropagation(),children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1.25rem 1.5rem",borderBottom:"1px solid var(--kb-gray-200)",background:"var(--kb-gray-50)"},children:[o.jsxs("h3",{style:{margin:0,color:"var(--kb-navy)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Gh,{size:20}),"Request Redemption"]}),o.jsx("button",{onClick:S,style:{background:"none",border:"none",cursor:"pointer",padding:"0.25rem",color:"var(--kb-gray-500)"},children:o.jsx(b0,{size:20})})]}),o.jsx("div",{style:{padding:"1.5rem"},children:x?o.jsxs("div",{style:{textAlign:"center",padding:"2rem 0"},children:[o.jsx("div",{style:{width:"64px",height:"64px",background:"rgba(39, 174, 96, 0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:o.jsx(Un,{size:32,color:"var(--kb-green)"})}),o.jsx("h4",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"Request Submitted"}),o.jsxs("p",{style:{color:"var(--kb-gray-600)",margin:0},children:["Your redemption request for $",c," has been submitted for admin approval."]})]}):o.jsxs("form",{onSubmit:k,children:[o.jsxs("div",{style:{background:"linear-gradient(135deg, var(--kb-gold) 0%, var(--kb-gold-dark) 100%)",borderRadius:"12px",padding:"1.25rem",marginBottom:"1.5rem",color:"white",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.85rem",opacity:.9,marginBottom:"0.25rem"},children:"Available Balance"}),o.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700"},children:["$",s.toFixed(2)]})]}),o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Amount to Redeem (USD)"}),o.jsxs("div",{style:{position:"relative"},children:[o.jsx("span",{style:{position:"absolute",left:"1rem",top:"50%",transform:"translateY(-50%)",color:"var(--kb-gray-500)",fontWeight:"500"},children:"$"}),o.jsx("input",{type:"number",value:c,onChange:T=>h(T.target.value),placeholder:"0.00",min:"1",max:s,step:"0.01",style:{width:"100%",paddingLeft:"2rem",fontSize:"1.25rem",fontWeight:"500"},required:!0})]}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.75rem",flexWrap:"wrap"},children:[[25,50,100].map(T=>s>=T&&o.jsxs("button",{type:"button",onClick:()=>h(T.toString()),className:"btn btn-secondary",style:{padding:"0.4rem 0.75rem",fontSize:"0.85rem"},children:["$",T]},T)),o.jsx("button",{type:"button",onClick:()=>h(s.toString()),className:"btn btn-secondary",style:{padding:"0.4rem 0.75rem",fontSize:"0.85rem"},children:"Max"})]})]}),g&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",background:"#fef2f2",borderRadius:"8px",color:"#dc2626",marginBottom:"1rem",fontSize:"0.9rem"},children:[o.jsx(Gs,{size:18}),g]}),o.jsxs("div",{style:{padding:"1rem",background:"var(--kb-gray-50)",borderRadius:"8px",marginBottom:"1.5rem",fontSize:"0.85rem",color:"var(--kb-gray-600)"},children:[o.jsx("strong",{children:"How it works:"})," Your request will be reviewed by an administrator. Once approved, you'll receive USD equivalent and the corresponding Kinderbucks bills will be marked as redeemed."]}),o.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[o.jsx("button",{type:"button",onClick:S,className:"btn btn-secondary",style:{flex:1},disabled:d,children:"Cancel"}),o.jsx("button",{type:"submit",className:"btn btn-primary",style:{flex:1},disabled:d||!c,children:d?"Submitting...":"Submit Request"})]})]})})]})})}):null}function BB(){const{profile:n}=Gr(),e=io(),[t,r]=C.useState(null),[s,l]=C.useState([]),[c,h]=C.useState([]),[d,m]=C.useState([]),[g,y]=C.useState([]),[x,E]=C.useState([]),[k,S]=C.useState(!0),[T,P]=C.useState("overview"),[M,N]=C.useState(!1),[F,$]=C.useState(!1),[K,A]=C.useState(!1),[j,D]=C.useState(!1),[L,B]=C.useState(null),[U,V]=C.useState({code:"",description:"",discountType:"percent",discountValue:10,minTier:"",expiresAt:"",usageLimit:""}),[Ve,We]=C.useState(!1),[rt,Te]=C.useState([]),[se,me]=C.useState(!1),[le,H]=C.useState({checkinsRequired:5,reward:"",rewardType:"discount",rewardValue:10}),[te,Ce]=C.useState(!1),je=async()=>{if(!(n!=null&&n.businessCode)){S(!1);return}try{const[X,ye,Fe,Ue,It,Pn]=await Promise.all([J9(n.businessCode),FT(n.businessCode),hh(n.businessCode).catch(()=>[]),Qr(),uB(),DB(n.businessCode).catch(()=>[])]);r(X),l(ye),h(Fe),m(Ue.filter(Xr=>Xr.isActive)),y(It),E(Pn),Te((X==null?void 0:X.loyaltyRewards)||[])}catch(X){console.error("Error loading business data:",X)}S(!1)};C.useEffect(()=>{je()},[n==null?void 0:n.businessCode]);const Oe=()=>{const X=`https://harmonicsystems.github.io/kinderbucks/#/checkin/${n.businessCode}`;navigator.clipboard.writeText(X),$(!0),setTimeout(()=>$(!1),2e3)};s.filter(X=>{var Ue;const ye=(Ue=X.timestamp)!=null&&Ue.toDate?X.timestamp.toDate():new Date(X.timestamp),Fe=new Date;return ye.toDateString()===Fe.toDateString()}).length;const Me=s.filter(X=>{var Ue;const ye=(Ue=X.timestamp)!=null&&Ue.toDate?X.timestamp.toDate():new Date(X.timestamp),Fe=new Date;return Fe.setDate(Fe.getDate()-7),ye>Fe}).length,re=s.filter(X=>{var It;const ye=(It=X.timestamp)!=null&&It.toDate?X.timestamp.toDate():new Date(X.timestamp),Fe=new Date,Ue=new Date;return Fe.setDate(Fe.getDate()-7),Ue.setDate(Ue.getDate()-14),ye>Ue&&ye<=Fe}).length,q=re>0?Math.round((Me-re)/re*100):Me>0?100:0,fe=new Set(s.map(X=>X.visitorId)).size,$e=g.length,xt=g.filter(X=>{var Ue;const ye=(Ue=X.timestamp)!=null&&Ue.toDate?X.timestamp.toDate():new Date(X.timestamp),Fe=new Date;return Fe.setDate(Fe.getDate()-7),ye>Fe}).length,Ht=d.sort((X,ye)=>(ye.checkinCount||0)-(X.checkinCount||0)).slice(0,5),ht=d.sort((X,ye)=>(ye.checkinCount||0)-(X.checkinCount||0)).findIndex(X=>X.code===(n==null?void 0:n.businessCode))+1,jn=async X=>{if(X.preventDefault(),!(!U.code||!U.description)){We(!0);try{await AB({businessCode:n.businessCode,code:U.code,description:U.description,discountType:U.discountType,discountValue:Number(U.discountValue),minTier:U.minTier||null,expiresAt:U.expiresAt?new Date(U.expiresAt):null,usageLimit:U.usageLimit?Number(U.usageLimit):null});const ye=await hh(n.businessCode);h(ye),V({code:"",description:"",discountType:"percent",discountValue:10,minTier:"",expiresAt:"",usageLimit:""}),A(!1)}catch(ye){console.error("Error creating promo:",ye),alert("Error creating promo code")}We(!1)}},An=async(X,ye)=>{await RB(X,!ye);const Fe=await hh(n.businessCode);h(Fe)},Rn=async X=>{if(!confirm("Delete this promo code?"))return;await PB(X);const ye=await hh(n.businessCode);h(ye)},or=async X=>{if(X.preventDefault(),!!le.reward){Ce(!0);try{const ye={checkinsRequired:Number(le.checkinsRequired),reward:le.reward,rewardType:le.rewardType,rewardValue:Number(le.rewardValue)},Fe=[...rt,ye].sort((Ue,It)=>Ue.checkinsRequired-It.checkinsRequired);await Ek(n.businessCode,Fe),Te(Fe),H({checkinsRequired:5,reward:"",rewardType:"discount",rewardValue:10}),me(!1)}catch(ye){console.error("Error adding loyalty reward:",ye),alert("Error adding loyalty reward")}Ce(!1)}},Yr=async X=>{if(!confirm("Remove this reward tier?"))return;const ye=rt.filter((Fe,Ue)=>Ue!==X);await Ek(n.businessCode,ye),Te(ye)};if(k)return o.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[o.jsx(Wn,{}),o.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",background:"var(--kb-cream)"},children:o.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading..."})}),o.jsx($n,{})]});if(!(n!=null&&n.businessCode))return o.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[o.jsx(Wn,{}),o.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",background:"var(--kb-cream)",padding:"2rem"},children:o.jsxs("div",{className:"card",style:{maxWidth:"400px",textAlign:"center",padding:"2rem"},children:[o.jsx(Lt,{size:48,color:"var(--kb-gray-400)",style:{marginBottom:"1rem"}}),o.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"No Business Assigned"}),o.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem"},children:"Your account doesn't have a business assigned yet. Contact an administrator to get set up."}),o.jsx(he,{to:"/",className:"btn btn-primary",children:"Go Home"})]})}),o.jsx($n,{})]});const at=`https://harmonicsystems.github.io/kinderbucks/#/checkin/${n.businessCode}`,lt=[{key:"overview",label:"Overview",icon:m0},{key:"kinderbucks",label:"Kinderbucks",icon:Yi},{key:"loyalty",label:"Loyalty Rewards",icon:Yc},{key:"qrcode",label:"QR Code",icon:Ur},{key:"promos",label:"Promo Codes",icon:Nc},{key:"trends",label:"Village Trends",icon:to},{key:"guide",label:"Resource Guide",icon:tw}],Hn=[{id:"qr-setup",title:"Setting Up Your QR Code",icon:Ur,content:["Print your unique QR code and display it prominently at your counter or entrance","Use a stand or frame to keep it visible and accessible for customers","Consider printing multiple codes for different checkout areas","Test the code regularly to ensure it scans correctly"]},{id:"customer-flow",title:"Customer Check-in Flow",icon:Mg,content:["Customers scan the QR code with their phone camera","They're taken to your check-in page (no app download needed)","If signed in, they earn a check-in toward their Kinderhooker status","Their tier badge appears so you can offer appropriate discounts"]},{id:"tier-discounts",title:"Member Tier Discounts",icon:_r,content:["Curious (0-4 check-ins): New to Kinderhook - welcome them warmly!","Hooked (5-14 check-ins): Regular visitors - consider small perks","Line & Sinker (15-29 check-ins): Loyal customers - offer meaningful discounts","Village Patron (30+ check-ins): Your best customers - VIP treatment!"]},{id:"promo-tips",title:"Creating Effective Promos",icon:Nc,content:["Create tier-specific promos to reward loyalty","Set expiration dates to create urgency","Use memorable, easy-to-type codes","Track usage to see what resonates with customers"]}];return o.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[o.jsx(Wn,{}),o.jsx("main",{style:{flex:1,background:"var(--kb-cream)",padding:"2rem 1rem"},children:o.jsxs("div",{style:{maxWidth:"1100px",margin:"0 auto"},children:[o.jsx(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{marginBottom:"1.5rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"1rem"},children:[o.jsxs("div",{children:[o.jsx("div",{className:"badge badge-gold",style:{marginBottom:"0.5rem"},children:"Business Resource Center"}),o.jsx("h1",{style:{color:"var(--kb-navy)",marginBottom:"0.25rem"},children:(t==null?void 0:t.name)||n.businessCode}),o.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"Manage check-ins, promos, and see village trends"})]}),ht>0&&o.jsxs("div",{style:{background:"linear-gradient(135deg, var(--kb-gold) 0%, var(--kb-gold-dark) 100%)",color:"white",padding:"0.75rem 1.25rem",borderRadius:"12px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",opacity:.9},children:"Village Rank"}),o.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700"},children:["#",ht]})]})]})}),o.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem",overflowX:"auto",paddingBottom:"0.5rem"},children:lt.map(X=>{const ye=X.icon;return o.jsxs("button",{onClick:()=>P(X.key),className:"btn",style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.6rem 1rem",background:T===X.key?"var(--kb-navy)":"white",color:T===X.key?"white":"var(--kb-gray-600)",border:"1px solid var(--kb-gray-200)",whiteSpace:"nowrap"},children:[o.jsx(ye,{size:16}),X.label]},X.key)})}),T==="overview"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[o.jsx(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card",style:{padding:"1.25rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(39, 174, 96, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(to,{size:22,color:"var(--kb-green)"})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:(t==null?void 0:t.checkinCount)||0}),o.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Total Check-ins"})]})]})}),o.jsx(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card",style:{padding:"1.25rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(52, 152, 219, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(Lf,{size:22,color:"#3498db"})}),o.jsxs("div",{children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx("span",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:Me}),q!==0&&o.jsxs("span",{style:{fontSize:"0.75rem",padding:"0.15rem 0.4rem",borderRadius:"4px",background:q>0?"rgba(39, 174, 96, 0.1)":"rgba(231, 76, 60, 0.1)",color:q>0?"var(--kb-green)":"#e74c3c"},children:[q>0?"+":"",q,"%"]})]}),o.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"This Week"})]})]})}),o.jsx(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"card",style:{padding:"1.25rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(201, 162, 39, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx($r,{size:22,color:"var(--kb-gold-dark)"})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:fe}),o.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Unique Visitors"})]})]})}),o.jsx(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"card",style:{padding:"1.25rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(155, 89, 182, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(Nc,{size:22,color:"#9b59b6"})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:c.filter(X=>X.isActive).length}),o.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Active Promos"})]})]})})]}),o.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"card",children:[o.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(vr,{size:20})," Recent Check-ins"]}),s.length===0?o.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[o.jsx($r,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),o.jsx("p",{children:"No check-ins yet"}),o.jsx("p",{style:{fontSize:"0.9rem"},children:"Display your QR code to start receiving check-ins!"}),o.jsx("button",{onClick:()=>P("qrcode"),className:"btn btn-gold",style:{marginTop:"1rem"},children:"View QR Code"})]}):o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:s.slice(0,10).map((X,ye)=>{var It;const Fe=(It=X.timestamp)!=null&&It.toDate?X.timestamp.toDate():new Date(X.timestamp),Ue={"Village Patron":"#9b59b6","Line & Sinker":"#c9a227",Hooked:"#27ae60",Curious:"#3498db"};return o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"var(--kb-gray-50)",borderRadius:"8px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("div",{style:{width:"36px",height:"36px",background:"var(--kb-green)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(Un,{size:18,color:"white"})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:"Check-in recorded"}),X.tier&&o.jsx("span",{style:{fontSize:"0.75rem",padding:"0.1rem 0.5rem",borderRadius:"4px",background:`${Ue[X.tier]||"#95a5a6"}20`,color:Ue[X.tier]||"#95a5a6",fontWeight:"500"},children:X.tier})]})]}),o.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:Fe.toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]},X.id||ye)})})]})]}),T==="kinderbucks"&&o.jsxs(o.Fragment,{children:[o.jsx(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",style:{marginBottom:"1.5rem",background:"linear-gradient(135deg, var(--kb-gold) 0%, var(--kb-gold-dark) 100%)",color:"white",padding:"2rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"1.5rem"},children:[o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.9rem",opacity:.9,marginBottom:"0.25rem"},children:"Current Kinderbucks Balance"}),o.jsxs("div",{style:{fontSize:"3rem",fontWeight:"700",lineHeight:1},children:["$",((t==null?void 0:t.kinderbucksBalance)||0).toFixed(2)]}),o.jsx("div",{style:{fontSize:"0.85rem",opacity:.8,marginTop:"0.5rem"},children:"Available for redemption to USD"})]}),o.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[o.jsxs("button",{onClick:()=>e("/business/accept-payment"),className:"btn",style:{background:"rgba(255,255,255,0.2)",color:"white",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(qo,{size:18}),"Accept Payment"]}),o.jsxs("button",{onClick:()=>D(!0),className:"btn",style:{background:"white",color:"var(--kb-gold-dark)",display:"flex",alignItems:"center",gap:"0.5rem"},disabled:((t==null?void 0:t.kinderbucksBalance)||0)===0,children:[o.jsx(Gh,{size:18}),"Request Redemption"]})]})]})}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[o.jsx(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card",style:{padding:"1.25rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(39, 174, 96, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(Zb,{size:22,color:"var(--kb-green)"})}),o.jsxs("div",{children:[o.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"var(--kb-navy)"},children:["$",((t==null?void 0:t.lifetimeAccepted)||0).toFixed(0)]}),o.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Total Accepted"})]})]})}),o.jsx(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card",style:{padding:"1.25rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(52, 152, 219, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(ew,{size:22,color:"#3498db"})}),o.jsxs("div",{children:[o.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"var(--kb-navy)"},children:["$",((t==null?void 0:t.lifetimeRedeemed)||0).toFixed(0)]}),o.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Total Redeemed"})]})]})}),o.jsx(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"card",style:{padding:"1.25rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(155, 89, 182, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(Yi,{size:22,color:"#9b59b6"})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"var(--kb-navy)"},children:x.filter(X=>X.type==="payment").length}),o.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Payments Received"})]})]})})]}),o.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"card",children:[o.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(vr,{size:20})," Recent Transactions"]}),x.length===0?o.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[o.jsx(Yi,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),o.jsx("p",{children:"No transactions yet"}),o.jsx("p",{style:{fontSize:"0.9rem"},children:"Accept Kinderbucks payments to see them here."}),o.jsx("button",{onClick:()=>e("/business/accept-payment"),className:"btn btn-gold",style:{marginTop:"1rem"},children:"Accept First Payment"})]}):o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:x.slice(0,10).map((X,ye)=>{var It,Pn;const Fe=(It=X.createdAt)!=null&&It.toDate?X.createdAt.toDate():new Date(X.createdAt),Ue=X.type==="payment";return o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"var(--kb-gray-50)",borderRadius:"8px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("div",{style:{width:"36px",height:"36px",background:Ue?"rgba(39, 174, 96, 0.1)":"rgba(52, 152, 219, 0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:Ue?o.jsx(Zb,{size:18,color:"var(--kb-green)"}):o.jsx(ew,{size:18,color:"#3498db"})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:Ue?"Payment received":"Redemption"}),X.kinderbuckSerial&&o.jsx("span",{style:{fontSize:"0.75rem",fontFamily:"monospace",color:"var(--kb-gray-500)"},children:X.kinderbuckSerial}),X.status==="pending"&&o.jsx("span",{style:{fontSize:"0.75rem",padding:"0.1rem 0.4rem",borderRadius:"4px",background:"#fff3cd",color:"#856404",marginLeft:"0.5rem"},children:"Pending"})]})]}),o.jsxs("div",{style:{textAlign:"right"},children:[o.jsxs("div",{style:{fontWeight:"600",color:Ue?"var(--kb-green)":"#3498db"},children:[Ue?"+":"-","$",(Pn=X.amount)==null?void 0:Pn.toFixed(2)]}),o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:Fe.toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]})]},X.id||ye)})})]})]}),T==="qrcode"&&o.jsx(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",style:{padding:"2rem"},children:o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"2rem",alignItems:"start"},children:[o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{style:{background:"linear-gradient(135deg, var(--kb-green) 0%, #1e8449 100%)",borderRadius:"20px",padding:"4px",display:"inline-block"},children:o.jsxs("div",{style:{background:"white",borderRadius:"18px",padding:"20px"},children:[o.jsx("div",{style:{fontSize:"11px",fontWeight:"600",color:"var(--kb-green)",letterSpacing:"2px",marginBottom:"12px"},children:"CHECK IN AT"}),o.jsx(El,{value:at,size:180,denomination:1,showFrame:!1}),o.jsx("div",{style:{marginTop:"12px",fontWeight:"600",color:"var(--kb-navy)",fontSize:"1.1rem"},children:t==null?void 0:t.name})]})}),o.jsxs("div",{style:{marginTop:"1.5rem",display:"flex",gap:"0.5rem",justifyContent:"center",flexWrap:"wrap"},children:[o.jsxs("button",{onClick:()=>window.print(),className:"btn btn-gold",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(z2,{size:18})," Print"]}),o.jsxs("button",{onClick:Oe,className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[F?o.jsx(Un,{size:18}):o.jsx(p0,{size:18}),F?"Copied!":"Copy URL"]})]})]}),o.jsxs("div",{children:[o.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"How Customers Use This"}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[o.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"start"},children:[o.jsx("div",{style:{width:"32px",height:"32px",background:"var(--kb-navy)",color:"white",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"600",fontSize:"0.9rem",flexShrink:0},children:"1"}),o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:"Customer scans with phone"}),o.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"Using their camera app or QR reader"})]})]}),o.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"start"},children:[o.jsx("div",{style:{width:"32px",height:"32px",background:"var(--kb-navy)",color:"white",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"600",fontSize:"0.9rem",flexShrink:0},children:"2"}),o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:"Opens check-in page"}),o.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"No app download required!"})]})]}),o.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"start"},children:[o.jsx("div",{style:{width:"32px",height:"32px",background:"var(--kb-navy)",color:"white",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"600",fontSize:"0.9rem",flexShrink:0},children:"3"}),o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:'They tap "Check In"'}),o.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"Earns progress toward their Kinderhooker tier"})]})]}),o.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"start"},children:[o.jsx("div",{style:{width:"32px",height:"32px",background:"var(--kb-green)",color:"white",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:o.jsx(Un,{size:18})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:"You see their tier badge"}),o.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"Offer appropriate discounts for their loyalty level"})]})]})]}),o.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"rgba(201, 162, 39, 0.1)",borderRadius:"8px",borderLeft:"3px solid var(--kb-gold)"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--kb-gold-dark)",fontWeight:"600",marginBottom:"0.5rem"},children:[o.jsx(nw,{size:16})," Pro Tip"]}),o.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.9rem",margin:0},children:"Place your QR code near the register or on table tents so customers can check in while they wait!"})]})]})]})}),T==="loyalty"&&o.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1.5rem"},children:[o.jsxs("h3",{style:{color:"var(--kb-navy)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Yc,{size:20})," Loyalty Rewards"]}),o.jsxs("button",{onClick:()=>me(!se),className:"btn btn-gold",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(qo,{size:18})," Add Reward Tier"]})]}),o.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem"},children:"Set up rewards for customers who check in at your business. The more they visit, the better the rewards!"}),se&&o.jsxs("form",{onSubmit:or,style:{padding:"1.5rem",background:"var(--kb-gray-50)",borderRadius:"12px",marginBottom:"1.5rem"},children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Check-ins Required"}),o.jsx("input",{type:"number",min:"1",value:le.checkinsRequired,onChange:X=>H(ye=>({...ye,checkinsRequired:X.target.value})),style:{width:"100%"},required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Reward Type"}),o.jsxs("select",{value:le.rewardType,onChange:X=>H(ye=>({...ye,rewardType:X.target.value})),style:{width:"100%"},children:[o.jsx("option",{value:"discount",children:"% Discount"}),o.jsx("option",{value:"freeItem",children:"Free Item"}),o.jsx("option",{value:"credit",children:"$ Credit"})]})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:le.rewardType==="freeItem"?"Value ($)":le.rewardType==="credit"?"Credit ($)":"Discount (%)"}),o.jsx("input",{type:"number",min:"1",value:le.rewardValue,onChange:X=>H(ye=>({...ye,rewardValue:X.target.value})),style:{width:"100%"},required:!0})]})]}),o.jsxs("div",{style:{marginBottom:"1rem"},children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Reward Description *"}),o.jsx("input",{type:"text",value:le.reward,onChange:X=>H(ye=>({...ye,reward:X.target.value})),placeholder:"e.g., Free coffee, 10% off your order, $5 off...",style:{width:"100%"},required:!0})]}),o.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[o.jsx("button",{type:"submit",className:"btn btn-primary",disabled:te||!le.reward,children:te?"Saving...":"Add Reward"}),o.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>me(!1),children:"Cancel"})]})]}),rt.length===0?o.jsxs("div",{style:{textAlign:"center",padding:"3rem",background:"var(--kb-gray-50)",borderRadius:"12px"},children:[o.jsx(Yc,{size:48,color:"var(--kb-gray-300)",style:{marginBottom:"1rem"}}),o.jsx("p",{style:{color:"var(--kb-gray-500)",marginBottom:"1rem"},children:"No loyalty rewards set up yet."}),o.jsx("p",{style:{color:"var(--kb-gray-400)",fontSize:"0.9rem"},children:"Add reward tiers to incentivize repeat visits!"})]}):o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:rt.map((X,ye)=>o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem",background:"var(--kb-gray-50)",borderRadius:"10px",borderLeft:`4px solid ${X.checkinsRequired>=20?"var(--kb-gold)":X.checkinsRequired>=10?"var(--kb-green)":"var(--kb-navy)"}`},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[o.jsxs("div",{style:{width:"50px",height:"50px",background:"white",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",border:"1px solid var(--kb-gray-200)"},children:[o.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:"var(--kb-navy)",lineHeight:1},children:X.checkinsRequired}),o.jsx("div",{style:{fontSize:"0.65rem",color:"var(--kb-gray-500)"},children:"visits"})]}),o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:X.reward}),o.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:[X.rewardType==="discount"&&`${X.rewardValue}% off`,X.rewardType==="freeItem"&&`$${X.rewardValue} value`,X.rewardType==="credit"&&`$${X.rewardValue} credit`]})]})]}),o.jsx("button",{onClick:()=>Yr(ye),className:"btn",style:{padding:"0.5rem",background:"white",color:"var(--kb-gray-500)",border:"1px solid var(--kb-gray-200)"},children:o.jsx(_l,{size:16})})]},ye))}),o.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"rgba(201, 162, 39, 0.1)",borderRadius:"8px",borderLeft:"3px solid var(--kb-gold)"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--kb-gold-dark)",fontWeight:"600",marginBottom:"0.5rem"},children:[o.jsx(nw,{size:16})," How it works"]}),o.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.9rem",margin:0},children:"When customers check in, they'll see their progress toward your rewards. Staff can verify their check-in count and apply the appropriate reward!"})]})]}),T==="promos"&&o.jsx(o.Fragment,{children:o.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",style:{marginBottom:"1.5rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1.5rem"},children:[o.jsxs("h3",{style:{color:"var(--kb-navy)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Nc,{size:20})," Your Promo Codes"]}),o.jsxs("button",{onClick:()=>A(!K),className:"btn btn-gold",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(qo,{size:18})," Create Promo"]})]}),K&&o.jsxs("form",{onSubmit:jn,style:{padding:"1.5rem",background:"var(--kb-gray-50)",borderRadius:"12px",marginBottom:"1.5rem"},children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Code *"}),o.jsx("input",{type:"text",value:U.code,onChange:X=>V(ye=>({...ye,code:X.target.value.toUpperCase().replace(/[^A-Z0-9]/g,"")})),placeholder:"SUMMER20",style:{width:"100%",fontFamily:"monospace"},required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Discount Type"}),o.jsxs("select",{value:U.discountType,onChange:X=>V(ye=>({...ye,discountType:X.target.value})),style:{width:"100%"},children:[o.jsx("option",{value:"percent",children:"Percent Off"}),o.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:U.discountType==="percent"?"Percent Off":"Amount Off ($)"}),o.jsx("input",{type:"number",value:U.discountValue,onChange:X=>V(ye=>({...ye,discountValue:X.target.value})),min:"1",max:U.discountType==="percent"?100:1e3,style:{width:"100%"}})]})]}),o.jsxs("div",{style:{marginBottom:"1rem"},children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Description *"}),o.jsx("input",{type:"text",value:U.description,onChange:X=>V(ye=>({...ye,description:X.target.value})),placeholder:"10% off your entire purchase",style:{width:"100%"},required:!0})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Min. Tier (optional)"}),o.jsxs("select",{value:U.minTier,onChange:X=>V(ye=>({...ye,minTier:X.target.value})),style:{width:"100%"},children:[o.jsx("option",{value:"",children:"Any tier"}),o.jsx("option",{value:"Curious",children:"Curious"}),o.jsx("option",{value:"Hooked",children:"Hooked"}),o.jsx("option",{value:"Line & Sinker",children:"Line & Sinker"}),o.jsx("option",{value:"Village Patron",children:"Village Patron"})]})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Expires (optional)"}),o.jsx("input",{type:"date",value:U.expiresAt,onChange:X=>V(ye=>({...ye,expiresAt:X.target.value})),style:{width:"100%"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Usage Limit (optional)"}),o.jsx("input",{type:"number",value:U.usageLimit,onChange:X=>V(ye=>({...ye,usageLimit:X.target.value})),placeholder:"Unlimited",min:"1",style:{width:"100%"}})]})]}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[o.jsx("button",{type:"submit",className:"btn btn-primary",disabled:Ve,children:Ve?"Creating...":"Create Promo Code"}),o.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>A(!1),children:"Cancel"})]})]}),c.length===0?o.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[o.jsx(Nc,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),o.jsx("p",{children:"No promo codes yet"}),o.jsx("p",{style:{fontSize:"0.9rem"},children:"Create your first promo to reward loyal customers!"})]}):o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:c.map(X=>o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem",background:X.isActive?"var(--kb-gray-50)":"var(--kb-gray-100)",borderRadius:"8px",opacity:X.isActive?1:.6,flexWrap:"wrap",gap:"1rem"},children:[o.jsxs("div",{children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.25rem"},children:[o.jsx("code",{style:{padding:"0.25rem 0.5rem",background:"var(--kb-navy)",color:"var(--kb-gold)",borderRadius:"4px",fontWeight:"600"},children:X.code}),o.jsxs("span",{style:{padding:"0.15rem 0.5rem",background:X.discountType==="percent"?"rgba(39, 174, 96, 0.1)":"rgba(52, 152, 219, 0.1)",color:X.discountType==="percent"?"var(--kb-green)":"#3498db",borderRadius:"4px",fontSize:"0.8rem",fontWeight:"500"},children:[X.discountType==="percent"?o.jsx($3,{size:12,style:{marginRight:4}}):o.jsx(Gh,{size:12,style:{marginRight:4}}),X.discountValue,X.discountType==="percent"?"% off":" off"]})]}),o.jsx("div",{style:{color:"var(--kb-gray-600)",fontSize:"0.9rem"},children:X.description}),o.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"0.5rem",fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:[X.minTier&&o.jsxs("span",{children:["Min tier: ",X.minTier]}),X.usageLimit&&o.jsxs("span",{children:["Limit: ",X.usageCount||0,"/",X.usageLimit]}),X.expiresAt&&o.jsxs("span",{children:["Expires: ",new Date(X.expiresAt.toDate?X.expiresAt.toDate():X.expiresAt).toLocaleDateString()]})]})]}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[o.jsxs("button",{onClick:()=>An(X.id,X.isActive),className:"btn btn-secondary",style:{padding:"0.4rem 0.6rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:[X.isActive?o.jsx(v3,{size:16}):o.jsx(O2,{size:16}),X.isActive?"Disable":"Enable"]}),o.jsx("button",{onClick:()=>Rn(X.id),className:"btn",style:{padding:"0.4rem 0.6rem",background:"#e74c3c",color:"white"},children:o.jsx(_l,{size:16})})]})]},X.id))})]})}),T==="trends"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[o.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",style:{padding:"1.5rem"},children:[o.jsx("h4",{style:{color:"var(--kb-gray-500)",marginBottom:"0.5rem",fontSize:"0.9rem"},children:"Village-Wide Check-ins"}),o.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"var(--kb-navy)"},children:$e}),o.jsxs("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:[xt," this week across all businesses"]})]}),o.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card",style:{padding:"1.5rem"},children:[o.jsx("h4",{style:{color:"var(--kb-gray-500)",marginBottom:"0.5rem",fontSize:"0.9rem"},children:"Participating Businesses"}),o.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"var(--kb-navy)"},children:d.length}),o.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Active in the Kinderbucks network"})]}),o.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card",style:{padding:"1.5rem",background:"linear-gradient(135deg, var(--kb-gold) 0%, var(--kb-gold-dark) 100%)",color:"white"},children:[o.jsx("h4",{style:{opacity:.9,marginBottom:"0.5rem",fontSize:"0.9rem"},children:"Your Market Share"}),o.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"700"},children:[$e>0?Math.round(((t==null?void 0:t.checkinCount)||0)/$e*100):0,"%"]}),o.jsx("div",{style:{opacity:.9,fontSize:"0.85rem"},children:"of all village check-ins"})]})]}),o.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"card",children:[o.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(_r,{size:20})," Top Businesses This Month"]}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:Ht.map((X,ye)=>{var Pn;const Fe=X.code===(n==null?void 0:n.businessCode),Ue=((Pn=Ht[0])==null?void 0:Pn.checkinCount)||1,It=(X.checkinCount||0)/Ue*100;return o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"0.75rem 1rem",background:Fe?"rgba(201, 162, 39, 0.1)":"var(--kb-gray-50)",borderRadius:"8px",border:Fe?"2px solid var(--kb-gold)":"none"},children:[o.jsx("div",{style:{width:"28px",height:"28px",background:ye===0?"var(--kb-gold)":ye===1?"#c0c0c0":ye===2?"#cd7f32":"var(--kb-gray-300)",color:"white",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"600",fontSize:"0.85rem"},children:ye+1}),o.jsxs("div",{style:{flex:1},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:[o.jsx("span",{style:{fontWeight:Fe?"600":"500",color:"var(--kb-navy)"},children:X.name}),Fe&&o.jsx("span",{style:{fontSize:"0.7rem",padding:"0.1rem 0.4rem",background:"var(--kb-gold)",color:"white",borderRadius:"4px"},children:"YOU"})]}),o.jsx("div",{style:{height:"6px",background:"var(--kb-gray-200)",borderRadius:"3px",overflow:"hidden"},children:o.jsx("div",{style:{width:`${It}%`,height:"100%",background:Fe?"var(--kb-gold)":"var(--kb-green)",borderRadius:"3px"}})})]}),o.jsx("div",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:X.checkinCount||0})]},X.code)})})]})]}),T==="guide"&&o.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",children:[o.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(tw,{size:20})," Business Resource Guide"]}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:Hn.map(X=>{const ye=X.icon,Fe=L===X.id;return o.jsxs("div",{style:{border:"1px solid var(--kb-gray-200)",borderRadius:"12px",overflow:"hidden"},children:[o.jsxs("button",{onClick:()=>B(Fe?null:X.id),style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem 1.25rem",background:Fe?"var(--kb-gray-50)":"white",border:"none",cursor:"pointer",textAlign:"left"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("div",{style:{width:"40px",height:"40px",background:"rgba(201, 162, 39, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(ye,{size:20,color:"var(--kb-gold-dark)"})}),o.jsx("span",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:X.title})]}),Fe?o.jsx(GM,{size:20,color:"var(--kb-gray-400)"}):o.jsx($M,{size:20,color:"var(--kb-gray-400)"})]}),Fe&&o.jsx("div",{style:{padding:"1rem 1.25rem",borderTop:"1px solid var(--kb-gray-200)"},children:o.jsx("ul",{style:{margin:0,paddingLeft:"1.25rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:X.content.map((Ue,It)=>o.jsx("li",{style:{color:"var(--kb-gray-600)",lineHeight:1.5},children:Ue},It))})})]},X.id)})}),o.jsxs("div",{style:{marginTop:"2rem",padding:"1.5rem",background:"linear-gradient(135deg, var(--kb-navy) 0%, var(--kb-navy-light) 100%)",borderRadius:"12px",color:"white"},children:[o.jsx("h4",{style:{marginBottom:"0.5rem"},children:"Need Help?"}),o.jsx("p",{style:{opacity:.9,marginBottom:"1rem",fontSize:"0.95rem"},children:"Questions about Kinderbucks or need assistance with your account? We're here to help!"}),o.jsx("a",{href:"mailto:support@kinderbucks.com",className:"btn",style:{background:"rgba(255,255,255,0.2)",color:"white"},children:"Contact Support"})]})]})]})}),o.jsx($n,{}),o.jsx(OB,{isOpen:j,onClose:()=>D(!1),businessCode:n==null?void 0:n.businessCode,businessName:t==null?void 0:t.name,currentBalance:(t==null?void 0:t.kinderbucksBalance)||0,onSuccess:()=>je()})]})}function tn({children:n,title:e}){const t=Er(),r=io(),{user:s,profile:l,isAdmin:c}=Gr(),h=[{to:"/admin/dashboard",label:"Dashboard",Icon:E3},{to:"/admin/exchanges",label:"Exchanges",Icon:Vf},{to:"/admin/redemptions",label:"Redemptions",Icon:Yi},{to:"/admin/members",label:"Members",Icon:$r},{to:"/admin/generate",label:"Generate QR",Icon:Ur},{to:"/admin/issue",label:"Issue Currency",Icon:Qh},{to:"/admin/businesses",label:"Businesses",Icon:Lt},{to:"/admin/users",label:"User Management",Icon:Yh}],d=async()=>{await j2(),r("/")},m=g=>t.pathname===g;return o.jsxs("div",{style:{display:"flex",minHeight:"100vh"},children:[o.jsxs("aside",{style:{width:"260px",background:"var(--kb-navy)",color:"var(--kb-white)",display:"flex",flexDirection:"column",position:"fixed",top:0,left:0,bottom:0,zIndex:100},children:[o.jsx("div",{style:{padding:"1.5rem",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:o.jsxs(he,{to:"/map",style:{display:"flex",alignItems:"center",gap:"0.75rem",textDecoration:"none"},children:[o.jsx("div",{style:{width:"40px",height:"40px",background:"var(--kb-gold)",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--kb-navy)",fontFamily:"var(--font-display)",fontWeight:"700",fontSize:"1.2rem"},children:"K"}),o.jsxs("div",{children:[o.jsx("div",{style:{fontFamily:"var(--font-display)",fontWeight:"600",color:"var(--kb-white)",fontSize:"1.1rem"},children:"Kinderbucks"}),o.jsx("div",{style:{fontSize:"0.7rem",color:"var(--kb-gold)",textTransform:"uppercase",letterSpacing:"0.1em"},children:"Admin Portal"})]})]})}),o.jsx("nav",{style:{flex:1,padding:"1rem 0",overflowY:"auto"},children:h.map(g=>o.jsxs(he,{to:g.to,style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.875rem 1.5rem",color:m(g.to)?"var(--kb-gold)":"var(--kb-gray-300)",background:m(g.to)?"rgba(201, 162, 39, 0.1)":"transparent",borderLeft:m(g.to)?"3px solid var(--kb-gold)":"3px solid transparent",textDecoration:"none",fontSize:"0.95rem",fontWeight:m(g.to)?"600":"400",transition:"all 0.2s"},children:[o.jsx(g.Icon,{size:20,strokeWidth:1.5}),g.label]},g.to))}),o.jsxs("div",{style:{padding:"1rem 1.5rem",borderTop:"1px solid rgba(255,255,255,0.1)"},children:[s&&o.jsxs("div",{style:{padding:"0.75rem 0",borderBottom:"1px solid rgba(255,255,255,0.1)",marginBottom:"0.75rem"},children:[o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-300)"},children:(l==null?void 0:l.displayName)||s.email}),o.jsx("div",{style:{fontSize:"0.75rem",color:"var(--kb-gray-500)"},children:(l==null?void 0:l.role)||"member"})]}),o.jsxs(he,{to:"/map",style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.5rem 0",color:"var(--kb-gray-400)",textDecoration:"none",fontSize:"0.9rem"},children:[o.jsx(k3,{size:18}),"Back to Site"]}),s&&o.jsxs("button",{onClick:d,style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.5rem 0",color:"var(--kb-gray-400)",background:"none",border:"none",cursor:"pointer",fontSize:"0.9rem",width:"100%"},children:[o.jsx(Dg,{size:18}),"Sign Out"]})]})]}),o.jsxs("main",{style:{flex:1,marginLeft:"260px",background:"var(--kb-cream)",minHeight:"100vh"},children:[o.jsx("header",{style:{background:"var(--kb-white)",borderBottom:"1px solid var(--kb-gray-200)",padding:"1.25rem 2rem",position:"sticky",top:0,zIndex:50},children:o.jsx("h1",{style:{fontFamily:"var(--font-display)",fontSize:"1.5rem",color:"var(--kb-navy)",margin:0},children:e})}),o.jsx("div",{style:{padding:"2rem"},children:n})]}),o.jsx("style",{children:`
        @media (max-width: 768px) {
          aside {
            width: 100% !important;
            position: relative !important;
            display: none;
          }
          main {
            margin-left: 0 !important;
          }
        }
      `})]})}function zB(){const[n,e]=C.useState({totalCurrency:0,inCirculation:0,circulationValue:0,pendingExchanges:0,pendingValue:0,totalMembers:0,activeBusinesses:0,totalCheckins:0}),[t,r]=C.useState([]),[s,l]=C.useState({}),[c,h]=C.useState(!0);C.useEffect(()=>{async function m(){try{const g=await WT(),y=g.filter(A=>A.status==="issued"||A.status==="active"),x={};y.forEach(A=>{const j=A.denomination||0;x[j]=(x[j]||0)+1}),l(x);const E=await Qr(),k=E.filter(A=>A.isActive),S=E.reduce((A,j)=>A+(j.checkinCount||0),0),T=nn(ot(Se,"exchanges"),_n("status","==","pending"),is("createdAt","desc")),M=(await Et(T)).docs.map(A=>({id:A.id,...A.data()})),N=M.reduce((A,j)=>A+(j.kinderbucksAmount||0),0),F=nn(ot(Se,"exchanges"),is("createdAt","desc"),ZD(5)),$=await Et(F);r($.docs.map(A=>({id:A.id,...A.data()})));const K=await Et(ot(Se,"members"));e({totalCurrency:g.length,inCirculation:y.length,circulationValue:y.reduce((A,j)=>A+(j.denomination||0),0),pendingExchanges:M.length,pendingValue:N,totalMembers:K.size,activeBusinesses:k.length,totalCheckins:S}),h(!1)}catch(g){console.error("Error loading dashboard data:",g),h(!1)}}m()},[]);const d=({icon:m,label:g,value:y,subtext:x,color:E,to:k})=>o.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[o.jsxs("div",{children:[o.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem",marginBottom:"0.5rem"},children:g}),o.jsx("div",{style:{fontFamily:"var(--font-display)",fontSize:"2rem",fontWeight:"700",color:E||"var(--kb-navy)"},children:y}),x&&o.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem",marginTop:"0.25rem"},children:x})]}),o.jsx("div",{style:{width:"48px",height:"48px",background:`${E||"var(--kb-navy)"}15`,borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(m,{size:24,color:E||"var(--kb-navy)"})})]}),k&&o.jsx(he,{to:k,style:{display:"block",marginTop:"1rem",paddingTop:"1rem",borderTop:"1px solid var(--kb-gray-100)",color:"var(--kb-navy)",fontSize:"0.85rem",fontWeight:"500"},children:"View Details "})]});return c?o.jsx(tn,{title:"Dashboard",children:o.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:o.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading dashboard..."})})}):o.jsxs(tn,{title:"Dashboard",children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[o.jsx(d,{icon:Yi,label:"In Circulation",value:`$${n.circulationValue.toLocaleString()}`,subtext:`${n.inCirculation} bills issued`,color:"var(--kb-green)"}),o.jsx(d,{icon:vr,label:"Pending Exchanges",value:n.pendingExchanges,subtext:`$${n.pendingValue.toFixed(2)} value`,color:n.pendingExchanges>0?"#e67e22":"var(--kb-gray-400)",to:"/admin/exchanges"}),o.jsx(d,{icon:$r,label:"OK Members",value:n.totalMembers,subtext:`${n.totalCheckins} total check-ins`,color:"var(--kb-navy)",to:"/admin/members"}),o.jsx(d,{icon:Lt,label:"Active Businesses",value:n.activeBusinesses,color:"var(--kb-gold-dark)",to:"/admin/businesses"})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem"},children:[o.jsxs("div",{className:"card",children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[o.jsx("h3",{style:{color:"var(--kb-navy)",margin:0},children:"Recent Exchanges"}),o.jsx(he,{to:"/admin/exchanges",style:{fontSize:"0.85rem",color:"var(--kb-navy)"},children:"View All "})]}),t.length===0?o.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"No exchanges yet"}):o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:t.map(m=>{var g,y,x,E;return o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem",background:"var(--kb-gray-50)",borderRadius:"8px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[m.status==="completed"?o.jsx(Un,{size:18,color:"var(--kb-green)"}):m.status==="pending"?o.jsx(vr,{size:18,color:"#e67e22"}):o.jsx(Gs,{size:18,color:"var(--kb-gray-400)"}),o.jsxs("div",{children:[o.jsxs("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:["$",m.usdAmount,"  $",(g=m.kinderbucksAmount)==null?void 0:g.toFixed(2)," KB"]}),o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:((E=(x=(y=m.createdAt)==null?void 0:y.toDate)==null?void 0:x.call(y))==null?void 0:E.toLocaleDateString())||"Pending"})]})]}),o.jsx("span",{className:"badge",style:{background:m.status==="completed"?"#d4edda":m.status==="pending"?"#fff3cd":"#f8f9fa",color:m.status==="completed"?"var(--kb-green)":m.status==="pending"?"#856404":"var(--kb-gray-600)"},children:m.status})]},m.id)})})]}),o.jsxs("div",{className:"card",children:[o.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem"},children:"Circulation by Denomination"}),Object.keys(s).length===0?o.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"No currency in circulation yet"}):o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[1,5,10,20].map(m=>{const g=s[m]||0,y=Math.max(...Object.values(s),1),x=g/y*100,E={1:"#27ae60",5:"#3498db",10:"#9b59b6",20:"#c9a227"};return o.jsxs("div",{children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[o.jsxs("span",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:["$",m]}),o.jsxs("span",{style:{color:"var(--kb-gray-500)"},children:[g," bills ($",g*m,")"]})]}),o.jsx("div",{style:{height:"8px",background:"var(--kb-gray-100)",borderRadius:"4px",overflow:"hidden"},children:o.jsx("div",{style:{width:`${x}%`,height:"100%",background:E[m],borderRadius:"4px",transition:"width 0.5s ease"}})})]},m)})})]})]}),o.jsxs("div",{className:"card",style:{marginTop:"1.5rem"},children:[o.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Quick Actions"}),o.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[o.jsxs(he,{to:"/admin/generate",className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Ur,{size:18})," Generate QR Codes"]}),o.jsxs(he,{to:"/admin/issue",className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Qh,{size:18})," Issue Currency"]}),o.jsxs(he,{to:"/admin/exchanges",className:"btn btn-gold",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Vf,{size:18})," Process Exchanges"]})]})]})]})}function FB(){const[n,e]=C.useState({start:1,end:100}),[t,r]=C.useState(5),[s,l]=C.useState([]),[c,h]=C.useState(!1),[d,m]=C.useState(!1),g=()=>{const k=[];for(let S=n.start;S<=n.end;S++)k.push(`KB-${String(S).padStart(4,"0")}`);l(k),m(!1)},y=async()=>{h(!0);try{await bB(s,t),m(!0)}catch(k){console.error("Error saving:",k),alert("Error saving to database")}h(!1)},x="https://harmonicsystems.github.io/kinderbucks/#/scan/",E={1:{bg:"rgba(39, 174, 96, 0.1)",text:"var(--kb-green)"},5:{bg:"rgba(52, 152, 219, 0.1)",text:"#3498db"},10:{bg:"rgba(155, 89, 182, 0.1)",text:"#9b59b6"},20:{bg:"rgba(201, 162, 39, 0.1)",text:"var(--kb-gold-dark)"}};return o.jsxs(tn,{title:"Generate QR Codes",children:[o.jsxs("div",{className:"card",style:{marginBottom:"2rem"},children:[o.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Ur,{size:20})," Generation Settings"]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1.5rem",marginBottom:"1.5rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Start Number"}),o.jsx("input",{type:"number",value:n.start,onChange:k=>e(S=>({...S,start:Number(k.target.value)})),min:1,max:9999,style:{width:"100%"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"End Number"}),o.jsx("input",{type:"number",value:n.end,onChange:k=>e(S=>({...S,end:Number(k.target.value)})),min:1,max:9999,style:{width:"100%"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Denomination"}),o.jsxs("select",{value:t,onChange:k=>r(Number(k.target.value)),style:{width:"100%"},children:[o.jsx("option",{value:1,children:"$1"}),o.jsx("option",{value:5,children:"$5"}),o.jsx("option",{value:10,children:"$10"}),o.jsx("option",{value:20,children:"$20"})]})]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[o.jsxs("button",{className:"btn btn-primary",onClick:g,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Ur,{size:18})," Generate ",n.end-n.start+1," Codes"]}),o.jsxs("div",{style:{padding:"0.75rem 1rem",background:E[t].bg,borderRadius:"8px",color:E[t].text,fontWeight:"600"},children:["Total Value: $",(n.end-n.start+1)*t]})]})]}),s.length>0&&o.jsxs("div",{className:"card",children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[o.jsxs("div",{children:[o.jsxs("h3",{style:{color:"var(--kb-navy)",margin:0},children:["Generated: ",s.length," Kinderbucks"]}),o.jsxs("p",{style:{color:"var(--kb-gray-500)",margin:"0.25rem 0 0",fontSize:"0.9rem"},children:["$",t," denomination  Total value: $",s.length*t]})]}),o.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[d?o.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--kb-green)",fontWeight:"600"},children:[o.jsx(Un,{size:18})," Saved!"]}):o.jsxs("button",{className:"btn btn-gold",onClick:y,disabled:c,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(eV,{size:18}),c?"Saving...":"Save to Database"]}),o.jsxs("button",{className:"btn btn-secondary",onClick:()=>window.print(),style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(z2,{size:18})," Print"]})]})]}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gap:"1.5rem"},children:s.slice(0,50).map(k=>o.jsxs("div",{style:{background:"var(--kb-white)",border:"1px solid var(--kb-gray-200)",borderRadius:"12px",padding:"1rem",textAlign:"center"},children:[o.jsx(El,{value:`${x}${k}`,size:140,denomination:t}),o.jsx("p",{style:{fontFamily:"monospace",marginTop:"0.75rem",fontSize:"0.9rem",color:"var(--kb-navy)",fontWeight:"600"},children:k})]},k))}),s.length>50&&o.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"var(--kb-gray-50)",borderRadius:"8px",textAlign:"center",color:"var(--kb-gray-600)"},children:["Showing 50 of ",s.length," codes. All will be saved and printable."]})]}),s.length===0&&o.jsxs("div",{className:"card",style:{textAlign:"center",padding:"4rem 2rem"},children:[o.jsx(Ur,{size:64,color:"var(--kb-gray-300)",style:{marginBottom:"1rem"}}),o.jsx("h3",{style:{color:"var(--kb-gray-500)",marginBottom:"0.5rem"},children:"No codes generated yet"}),o.jsx("p",{style:{color:"var(--kb-gray-400)"},children:"Set your range and denomination above, then click Generate."})]})]})}function UB(){const[n,e]=C.useState([]),[t,r]=C.useState(!0),[s,l]=C.useState([]),[c,h]=C.useState(""),[d,m]=C.useState(!1),[g,y]=C.useState(0),x=async()=>{const A=await WT();e(A.filter(j=>j.status==="draft"||j.status==="issued")),r(!1)};C.useEffect(()=>{x()},[]);const E=A=>{l(j=>j.includes(A)?j.filter(D=>D!==A):[...j,A])},k=()=>{const A=P.map(j=>j.serial);l(A)},S=()=>{l([])},T=async()=>{if(s.length!==0){m(!0);try{for(const A of s)await wB(A,"issued",c);y(s.length),l([]),h(""),await x(),setTimeout(()=>y(0),3e3)}catch(A){console.error("Error issuing:",A),alert("Error issuing Kinderbucks")}m(!1)}},P=n.filter(A=>A.status==="draft"),M=n.filter(A=>A.status==="issued"),N=s.reduce((A,j)=>{const D=n.find(L=>L.serial===j);return A+((D==null?void 0:D.denomination)||0)},0),$=(A=>{const j={1:[],5:[],10:[],20:[]};return A.forEach(D=>{const L=D.denomination||5;j[L]&&j[L].push(D)}),j})(P),K={1:"#27ae60",5:"#3498db",10:"#9b59b6",20:"#c9a227"};return t?o.jsx(tn,{title:"Issue Currency",children:o.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:o.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading..."})})}):o.jsxs(tn,{title:"Issue Currency",children:[g>0&&o.jsxs("div",{style:{position:"fixed",top:"100px",right:"2rem",background:"var(--kb-green)",color:"white",padding:"1rem 1.5rem",borderRadius:"8px",display:"flex",alignItems:"center",gap:"0.75rem",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:1e3},children:[o.jsx(Un,{size:20}),o.jsxs("span",{children:["Issued ",g," Kinderbucks successfully!"]})]}),o.jsxs("div",{className:"card",style:{marginBottom:"2rem"},children:[o.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Qh,{size:20})," Issue to Circulation"]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:"1.5rem",alignItems:"end"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Recipient (optional)"}),o.jsx("input",{type:"text",value:c,onChange:A=>h(A.target.value),placeholder:"Business name or exchange point",style:{width:"100%"}})]}),o.jsxs("button",{className:"btn btn-gold",onClick:T,disabled:s.length===0||d,style:{display:"flex",alignItems:"center",gap:"0.5rem",height:"42px"},children:[o.jsx(Qh,{size:18}),d?"Issuing...":`Issue ${s.length} Selected`]})]}),s.length>0&&o.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem 1rem",background:"var(--kb-gold)",borderRadius:"8px",color:"var(--kb-navy)",fontWeight:"500"},children:["Selected: ",s.length," bills  Total value: $",N]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[o.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-gray-500)"},children:P.length}),o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Available (Draft)"})]}),o.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-green)"},children:M.length}),o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Already Issued"})]}),o.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:s.length}),o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Selected"})]})]}),o.jsxs("div",{className:"card",children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[o.jsxs("h3",{style:{color:"var(--kb-navy)",margin:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(rw,{size:20})," Available to Issue (",P.length,")"]}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[o.jsx("button",{className:"btn btn-secondary",onClick:k,style:{padding:"0.4rem 0.75rem",fontSize:"0.85rem"},children:"Select All"}),o.jsx("button",{className:"btn btn-secondary",onClick:S,style:{padding:"0.4rem 0.75rem",fontSize:"0.85rem"},children:"Clear"})]})]}),P.length===0?o.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[o.jsx(rw,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),o.jsx("p",{children:"No draft Kinderbucks available."}),o.jsx("p",{style:{fontSize:"0.9rem"},children:"Generate some QR codes first."})]}):o.jsx("div",{children:[1,5,10,20].map(A=>{const j=$[A];return j.length===0?null:o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem"},children:[o.jsxs("div",{style:{width:"24px",height:"24px",background:K[A],borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"0.75rem",fontWeight:"600"},children:["$",A]}),o.jsxs("span",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:["$",A," Bills (",j.length,")"]}),o.jsx("button",{onClick:()=>{const D=j.map(B=>B.serial),L=D.every(B=>s.includes(B));l(L?B=>B.filter(U=>!D.includes(U)):B=>[...new Set([...B,...D])])},style:{background:"none",border:"none",color:K[A],cursor:"pointer",fontSize:"0.85rem"},children:j.every(D=>s.includes(D.serial))?"Deselect all":"Select all"})]}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))",gap:"0.5rem"},children:j.map(D=>{const L=s.includes(D.serial);return o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.6rem 0.75rem",background:L?`${K[A]}15`:"var(--kb-gray-50)",borderRadius:"6px",cursor:"pointer",border:L?`2px solid ${K[A]}`:"2px solid transparent",transition:"all 0.15s"},children:[L?o.jsx(dV,{size:18,color:K[A]}):o.jsx(fV,{size:18,color:"var(--kb-gray-400)"}),o.jsx("input",{type:"checkbox",checked:L,onChange:()=>E(D.serial),style:{display:"none"}}),o.jsx("span",{style:{fontFamily:"monospace",fontSize:"0.85rem",color:L?K[A]:"var(--kb-gray-600)",fontWeight:L?"600":"400"},children:D.serial})]},D.serial)})})]},A)})})]})]})}const WB="AIzaSyBTfW1zXwDOYJGEZ7ktRsLNowGvFewLKj0";function $B(n){if(!n)return"services";const e=new Set(n);return e.has("restaurant")||e.has("cafe")||e.has("bar")||e.has("bakery")||e.has("food")||e.has("meal_takeaway")||e.has("meal_delivery")?"food":e.has("store")||e.has("shopping_mall")||e.has("clothing_store")||e.has("grocery_or_supermarket")||e.has("convenience_store")||e.has("liquor_store")||e.has("florist")||e.has("jewelry_store")||e.has("book_store")||e.has("hardware_store")?"retail":e.has("art_gallery")||e.has("museum")||e.has("movie_theater")||e.has("library")||e.has("tourist_attraction")?"arts":"services"}function HB(n){return n?n.toUpperCase().replace(/[^A-Z0-9\s]/g,"").replace(/\b(THE|AND|OF|AT|IN)\b/gi,"").trim().replace(/\s+/g,"-").substring(0,20)||"BIZ":""}function KB({onPlaceSelect:n,placeholder:e="Search for a business..."}){const[t,r]=C.useState(""),[s,l]=C.useState([]),[c,h]=C.useState(!1),[d,m]=C.useState(!1),[g,y]=C.useState(!1),x=C.useRef(null),E=C.useRef(null),k=C.useRef(null),S=C.useRef(null),T=C.useRef(null);C.useEffect(()=>{var K,A,j,D;if((A=(K=window.google)==null?void 0:K.maps)!=null&&A.places){y(!0);return}const F=document.querySelector('script[src*="maps.googleapis.com"]');if(F){F.addEventListener("load",()=>y(!0)),(D=(j=window.google)==null?void 0:j.maps)!=null&&D.places&&y(!0);return}const $=document.createElement("script");$.src=`https://maps.googleapis.com/maps/api/js?key=${WB}&libraries=places`,$.async=!0,$.defer=!0,$.onload=()=>y(!0),document.head.appendChild($)},[]),C.useEffect(()=>{if(!g)return;x.current=new window.google.maps.places.AutocompleteService;const F=document.createElement("div");E.current=new window.google.maps.places.PlacesService(F),k.current=new window.google.maps.places.AutocompleteSessionToken},[g]),C.useEffect(()=>{const F=$=>{T.current&&!T.current.contains($.target)&&S.current&&!S.current.contains($.target)&&m(!1)};return document.addEventListener("mousedown",F),()=>document.removeEventListener("mousedown",F)},[]);const P=async F=>{if(!F||F.length<2||!x.current){l([]);return}h(!0);const $={input:F,sessionToken:k.current,types:["establishment"],locationBias:{center:{lat:42.3951,lng:-73.6977},radius:5e4}};x.current.getPlacePredictions($,(K,A)=>{h(!1),A===window.google.maps.places.PlacesServiceStatus.OK&&K?(l(K),m(!0)):l([])})};C.useEffect(()=>{const F=setTimeout(()=>{P(t)},300);return()=>clearTimeout(F)},[t]);const M=F=>{if(!E.current)return;const $={placeId:F.place_id,fields:["name","formatted_address","types","geometry","formatted_phone_number","website","opening_hours","photos"],sessionToken:k.current};E.current.getDetails($,(K,A)=>{var j;if(A===window.google.maps.places.PlacesServiceStatus.OK&&K){let D=null;K.photos&&K.photos.length>0&&(D=K.photos[0].getUrl({maxWidth:400,maxHeight:300}));const L={name:K.name,address:K.formatted_address,code:HB(K.name),category:$B(K.types),phone:K.formatted_phone_number,website:K.website,photoUrl:D,location:(j=K.geometry)!=null&&j.location?{lat:K.geometry.location.lat(),lng:K.geometry.location.lng()}:null,placeId:F.place_id};n(L),r(""),l([]),m(!1),k.current=new window.google.maps.places.AutocompleteSessionToken}})},N=()=>{var F;r(""),l([]),m(!1),(F=S.current)==null||F.focus()};return o.jsxs("div",{style:{position:"relative"},children:[o.jsxs("div",{style:{position:"relative"},children:[o.jsx(Of,{size:18,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--kb-gray-400)"}}),o.jsx("input",{ref:S,type:"text",value:t,onChange:F=>r(F.target.value),onFocus:()=>s.length>0&&m(!0),placeholder:e,style:{width:"100%",paddingLeft:"40px",paddingRight:t?"36px":"12px"}}),t&&o.jsx("button",{onClick:N,style:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"var(--kb-gray-400)",padding:"4px"},children:o.jsx(b0,{size:16})})]}),d&&s.length>0&&o.jsx("div",{ref:T,style:{position:"absolute",top:"100%",left:0,right:0,marginTop:"4px",background:"white",borderRadius:"8px",boxShadow:"0 4px 20px rgba(0,0,0,0.15)",zIndex:100,maxHeight:"300px",overflowY:"auto"},children:s.map(F=>{var $,K;return o.jsxs("button",{onClick:()=>M(F),style:{width:"100%",padding:"0.75rem 1rem",background:"none",border:"none",borderBottom:"1px solid var(--kb-gray-100)",cursor:"pointer",textAlign:"left",display:"flex",alignItems:"flex-start",gap:"0.75rem"},onMouseEnter:A=>A.currentTarget.style.background="var(--kb-gray-50)",onMouseLeave:A=>A.currentTarget.style.background="none",children:[o.jsx(kl,{size:16,color:"var(--kb-gold)",style:{marginTop:"2px",flexShrink:0}}),o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:(($=F.structured_formatting)==null?void 0:$.main_text)||F.description}),o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:(K=F.structured_formatting)==null?void 0:K.secondary_text})]})]},F.place_id)})}),c&&o.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,marginTop:"4px",padding:"1rem",background:"white",borderRadius:"8px",boxShadow:"0 4px 20px rgba(0,0,0,0.15)",textAlign:"center",color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"Searching..."})]})}const qB=[{code:"AVIARY",name:"The Aviary",category:"food"},{code:"MORNINGBIRD",name:"Morningbird Cafe",category:"food"},{code:"SAISONNIER",name:"Saisonnier",category:"food"},{code:"BROADST-BAGEL",name:"Broad Street Bagel Co.",category:"food"},{code:"ISOLA",name:"Isola Wine Bar",category:"food"},{code:"BOTTLE-SHOP",name:"Kinderhook Bottle Shop",category:"retail"},{code:"SAMASCOTTS",name:"Samascott's Garden Market",category:"retail"},{code:"SAMASCOTT-ORCHARDS",name:"Samascott Orchards",category:"retail"},{code:"SCHOOL-GALLERY",name:"The School | Jack Shainman Gallery",category:"arts"},{code:"FEED-SEED",name:"The Feed and Seed",category:"services"},{code:"OLD-DUTCH",name:"The Old Dutch Inn",category:"services"},{code:"VILLAGE-YOGA",name:"Village Yoga",category:"services"},{code:"WALSH-DENTISTRY",name:"Walsh & Walsh Dentistry",category:"services"}],Zp={food:{label:"Food & Drink",Icon:x0,color:"#e74c3c"},retail:{label:"Retail",Icon:Bf,color:"#9b59b6"},services:{label:"Services",Icon:f0,color:"#3498db"},arts:{label:"Arts & Culture",Icon:y0,color:"#1abc9c"}};function GB(){var te,Ce,je,Oe,Me,re;const[n,e]=C.useState([]),[t,r]=C.useState([]),[s,l]=C.useState(!0),[c,h]=C.useState({code:"",name:"",category:"food",address:"",placeId:"",photoUrl:"",website:""}),[d,m]=C.useState(!1),[g,y]=C.useState(null),[x,E]=C.useState(!1),[k,S]=C.useState(null),[T,P]=C.useState(!1),[M,N]=C.useState(null),[F,$]=C.useState(""),[K,A]=C.useState(!1),[j,D]=C.useState(null),L=async()=>{const[q,fe]=await Promise.all([Qr(),q9()]);e(q),r(fe),l(!1)};C.useEffect(()=>{L()},[]);const B=async q=>{if(q.preventDefault(),!(!c.code||!c.name)){m(!0);try{await Sk(c.code.toUpperCase(),c.name,c.category,{address:c.address,placeId:c.placeId,photoUrl:c.photoUrl,website:c.website}),h({code:"",name:"",category:"food",address:"",placeId:"",photoUrl:"",website:""}),await L()}catch(fe){console.error("Error creating business:",fe),alert("Error creating business")}m(!1)}},U=q=>{h({code:q.code,name:q.name,category:q.category,address:q.address||"",placeId:q.placeId||"",photoUrl:q.photoUrl||"",website:q.website||""})},V=async(q,fe)=>{const $e=await BT(q);N({code:q,name:fe,info:$e}),$("")},Ve=async(q=!1)=>{if(M){A(!0);try{await G9(M.code,null,q),N(null),$(""),await L()}catch(fe){console.error("Error deleting business:",fe),alert(fe.message||"Error deleting business")}A(!1)}},We=async q=>{try{await Q9(q),await L()}catch(fe){console.error("Error restoring business:",fe),alert("Error restoring business")}},rt=async q=>{var fe,$e;if(!(($e=(fe=window.google)==null?void 0:fe.maps)!=null&&$e.places)){alert("Google Maps not loaded. Please refresh the page.");return}D(q.code);try{const xt=document.createElement("div"),Ht=new window.google.maps.places.PlacesService(xt),ht=q.placeId?{placeId:q.placeId,fields:["photos"]}:{query:`${q.name} ${q.address||"Kinderhook NY"}`,fields:["photos","place_id"]},An=await(Rn=>new Promise((or,Yr)=>{Rn.placeId?Ht.getDetails(Rn,(at,lt)=>{lt===window.google.maps.places.PlacesServiceStatus.OK?or(at):Yr(new Error("Place not found"))}):Ht.findPlaceFromQuery({query:Rn.query,fields:["photos","place_id"]},(at,lt)=>{lt===window.google.maps.places.PlacesServiceStatus.OK&&at[0]?or(at[0]):Yr(new Error("Place not found"))})}))(ht);if(An.photos&&An.photos.length>0){const Rn=An.photos[0].getUrl({maxWidth:400,maxHeight:300});await Z9(q.code,Rn),await L()}else alert("No photos found for this business on Google Places")}catch(xt){console.error("Error fetching photo:",xt),alert("Could not fetch photo. Try searching for the business manually.")}D(null)},Te=async(q,fe)=>{await X9(q,!fe),await L()},se=async()=>{if(confirm("This will add all Kinderhook businesses. Continue?")){E(!0);try{for(const q of qB)n.find($e=>$e.code===q.code)||await Sk(q.code,q.name,q.category);await L(),alert("Businesses seeded successfully!")}catch(q){console.error("Error seeding:",q),alert("Error seeding businesses")}E(!1)}},me=q=>{navigator.clipboard.writeText(q),S(q),setTimeout(()=>S(null),2e3)},le="https://harmonicsystems.github.io/kinderbucks/#/checkin/",H={total:n.length,active:n.filter(q=>q.isActive).length,totalCheckins:n.reduce((q,fe)=>q+(fe.checkinCount||0),0)};return s?o.jsx(tn,{title:"Business Directory",children:o.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:o.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading..."})})}):o.jsxs(tn,{title:"Business Directory",children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[o.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:H.total}),o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Businesses"})]}),o.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-green)"},children:H.active}),o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Active"})]}),o.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-gold-dark)"},children:H.totalCheckins}),o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Check-ins"})]})]}),o.jsxs("div",{className:"card",style:{marginBottom:"2rem"},children:[o.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(qo,{size:20})," Add Business"]}),o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:[o.jsx(Of,{size:16,style:{marginRight:"0.5rem",verticalAlign:"middle"}}),"Search Google Places"]}),o.jsx(KB,{onPlaceSelect:U,placeholder:"Search for a business by name..."}),o.jsx("p",{style:{marginTop:"0.5rem",fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Search to auto-fill details, or enter manually below"})]}),c.photoUrl&&o.jsxs("div",{style:{marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"1rem",padding:"1rem",background:"var(--kb-gray-50)",borderRadius:"8px"},children:[o.jsx("img",{src:c.photoUrl,alt:c.name,style:{width:"80px",height:"80px",objectFit:"cover",borderRadius:"8px"}}),o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:c.name}),o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:c.address}),c.website&&o.jsx("a",{href:c.website,target:"_blank",rel:"noopener noreferrer",style:{fontSize:"0.85rem",color:"var(--kb-gold-dark)"},children:c.website})]})]}),o.jsx("div",{style:{borderTop:"1px solid var(--kb-gray-200)",paddingTop:"1.5rem"},children:o.jsxs("form",{onSubmit:B,children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1.5rem",marginBottom:"1.5rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Code *"}),o.jsx("input",{type:"text",value:c.code,onChange:q=>h(fe=>({...fe,code:q.target.value.toUpperCase().replace(/[^A-Z0-9-]/g,"")})),placeholder:"CAFE-01",style:{width:"100%",fontFamily:"monospace"},required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Name *"}),o.jsx("input",{type:"text",value:c.name,onChange:q=>h(fe=>({...fe,name:q.target.value})),placeholder:"Village Caf",style:{width:"100%"},required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Category"}),o.jsx("select",{value:c.category,onChange:q=>h(fe=>({...fe,category:q.target.value})),style:{width:"100%"},children:Object.entries(Zp).map(([q,fe])=>o.jsx("option",{value:q,children:fe.label},q))})]})]}),o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Address"}),o.jsx("input",{type:"text",value:c.address,onChange:q=>h(fe=>({...fe,address:q.target.value})),placeholder:"123 Main Street, Kinderhook, NY 12106",style:{width:"100%"}})]}),o.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[o.jsxs("button",{type:"submit",className:"btn btn-primary",disabled:d||!c.code||!c.name,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(qo,{size:18})," ",d?"Adding...":"Add Business"]}),o.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:se,disabled:x,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(L2,{size:18})," ",x?"Seeding...":"Seed Kinderhook Businesses"]})]})]})})]}),o.jsxs("div",{className:"card",children:[o.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Lt,{size:20})," Participating Businesses (",n.length,")"]}),n.length===0?o.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[o.jsx(Lt,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),o.jsx("p",{children:"No businesses yet. Add one above or seed the Kinderhook businesses."})]}):o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:n.map(q=>{const fe=Zp[q.category]||Zp.services,$e=fe.Icon,xt=`${le}${q.code}`;return o.jsxs("div",{style:{background:q.isActive?"var(--kb-white)":"var(--kb-gray-50)",border:`1px solid ${q.isActive,"var(--kb-gray-200)"}`,borderRadius:"12px",padding:"1.25rem",opacity:q.isActive?1:.7},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"1rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[q.photoUrl?o.jsx("img",{src:q.photoUrl,alt:q.name,style:{width:"48px",height:"48px",objectFit:"cover",borderRadius:"10px"}}):o.jsx("div",{style:{width:"48px",height:"48px",background:`${fe.color}15`,borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx($e,{size:24,color:fe.color})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"600",color:q.isActive?"var(--kb-navy)":"var(--kb-gray-500)",fontSize:"1.1rem"},children:q.name}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginTop:"0.25rem",flexWrap:"wrap"},children:[o.jsx("span",{style:{fontFamily:"monospace",fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:q.code}),o.jsx("span",{style:{fontSize:"0.85rem",color:fe.color},children:fe.label}),q.address&&o.jsx("span",{style:{fontSize:"0.8rem",color:"var(--kb-gray-400)"},children:q.address.split(",")[0]})]})]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1.5rem"},children:[o.jsxs("div",{style:{textAlign:"center"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"var(--kb-green)",fontWeight:"600"},children:[o.jsx(to,{size:16}),q.checkinCount||0]}),o.jsx("div",{style:{fontSize:"0.75rem",color:"var(--kb-gray-500)"},children:"check-ins"})]}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[o.jsxs(he,{to:`/admin/businesses/${q.code}`,className:"btn btn-gold",style:{padding:"0.5rem 0.75rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:[o.jsx(O2,{size:16})," Details"]}),o.jsx("button",{onClick:()=>y(g===q.code?null:q.code),className:"btn btn-secondary",style:{padding:"0.5rem 0.75rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:o.jsx(Ur,{size:16})}),o.jsxs("button",{onClick:()=>Te(q.code,q.isActive),className:"btn",style:{padding:"0.5rem 0.75rem",background:q.isActive?"#e74c3c":"var(--kb-green)",color:"white",display:"flex",alignItems:"center",gap:"0.25rem"},children:[q.isActive?o.jsx(TV,{size:16}):o.jsx(SV,{size:16}),q.isActive?"Deactivate":"Activate"]}),o.jsx("button",{onClick:()=>rt(q),className:"btn",style:{padding:"0.5rem 0.75rem",background:q.photoUrl?"var(--kb-gray-100)":"rgba(201, 162, 39, 0.1)",color:q.photoUrl?"var(--kb-gray-500)":"var(--kb-gold-dark)",display:"flex",alignItems:"center"},title:q.photoUrl?"Refresh photo":"Fetch photo from Google",disabled:j===q.code,children:o.jsx(zM,{size:16,className:j===q.code?"animate-pulse":""})}),o.jsx("button",{onClick:()=>V(q.code,q.name),className:"btn",style:{padding:"0.5rem 0.75rem",background:"var(--kb-gray-100)",color:"var(--kb-gray-600)",display:"flex",alignItems:"center"},title:"Delete business",children:o.jsx(_l,{size:16})})]})]})]}),g===q.code&&o.jsxs("div",{style:{marginTop:"1.5rem",paddingTop:"1.5rem",borderTop:"1px solid var(--kb-gray-200)",display:"flex",alignItems:"center",gap:"2rem",flexWrap:"wrap"},children:[o.jsx("div",{style:{textAlign:"center"},children:o.jsx(El,{value:xt,size:150,denomination:5,showFrame:!1})}),o.jsxs("div",{style:{flex:1,minWidth:"200px"},children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontSize:"0.85rem"},children:"Check-in URL"}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[o.jsx("input",{type:"text",value:xt,readOnly:!0,style:{flex:1,fontFamily:"monospace",fontSize:"0.85rem"}}),o.jsxs("button",{onClick:()=>me(xt),className:"btn btn-secondary",style:{padding:"0.5rem 0.75rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:[o.jsx(p0,{size:16}),k===xt?"Copied!":"Copy"]})]}),o.jsx("p",{style:{marginTop:"0.75rem",fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Print this QR code and display it at the counter for customers to scan when they visit."})]})]})]},q.code)})})]}),t.length>0&&o.jsxs("div",{className:"card",style:{marginTop:"2rem"},children:[o.jsxs("button",{onClick:()=>P(!T),style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",background:"none",border:"none",cursor:"pointer",padding:0},children:[o.jsxs("h3",{style:{color:"var(--kb-gray-500)",display:"flex",alignItems:"center",gap:"0.5rem",margin:0},children:[o.jsx(N2,{size:20})," Deleted Businesses (",t.length,")"]}),o.jsx("span",{style:{color:"var(--kb-gray-400)"},children:T?"":""})]}),T&&o.jsx("div",{style:{marginTop:"1.5rem",display:"flex",flexDirection:"column",gap:"0.75rem"},children:t.map(q=>{var fe;return o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem",background:"var(--kb-gray-50)",borderRadius:"8px",opacity:.7},children:[o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"500",color:"var(--kb-gray-600)"},children:q.name}),o.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-400)"},children:[q.code,"  Deleted ",(fe=q.deletedAt)!=null&&fe.toDate?q.deletedAt.toDate().toLocaleDateString():"recently"]})]}),o.jsxs("button",{onClick:()=>We(q.code),className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(F2,{size:16})," Restore"]})]},q.code)})})]}),M&&o.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:o.jsxs("div",{className:"card",style:{maxWidth:"500px",width:"100%",padding:"2rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1.5rem"},children:[o.jsx("div",{style:{width:"48px",height:"48px",background:(te=M.info)!=null&&te.hasData?"rgba(231, 76, 60, 0.1)":"rgba(39, 174, 96, 0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:(Ce=M.info)!=null&&Ce.hasData?o.jsx(W2,{size:24,color:"#e74c3c"}):o.jsx(_l,{size:24,color:"var(--kb-green)"})}),o.jsxs("div",{children:[o.jsxs("h3",{style:{color:"var(--kb-navy)",margin:0},children:["Delete ",M.name,"?"]}),o.jsx("p",{style:{color:"var(--kb-gray-500)",margin:0,fontSize:"0.9rem"},children:(je=M.info)!=null&&je.hasData?"This business has associated data":"This business can be safely deleted"})]})]}),((Oe=M.info)==null?void 0:Oe.hasData)&&o.jsxs("div",{style:{background:"rgba(231, 76, 60, 0.05)",border:"1px solid rgba(231, 76, 60, 0.2)",borderRadius:"8px",padding:"1rem",marginBottom:"1.5rem"},children:[o.jsx("div",{style:{fontWeight:"600",color:"#c0392b",marginBottom:"0.5rem"},children:"Associated Data Found:"}),o.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem",color:"var(--kb-gray-600)"},children:[M.info.checkinCount>0&&o.jsxs("li",{children:[M.info.checkinCount," check-ins recorded"]}),M.info.transactionCount>0&&o.jsxs("li",{children:[M.info.transactionCount," transactions"]}),M.info.balance>0&&o.jsxs("li",{children:["$",M.info.balance.toFixed(2)," Kinderbucks balance"]})]}),o.jsx("p",{style:{margin:"0.75rem 0 0 0",fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"The business will be soft-deleted and can be restored later."})]}),((Me=M.info)==null?void 0:Me.hasData)&&o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:['Type "',M.name,'" to confirm:']}),o.jsx("input",{type:"text",value:F,onChange:q=>$(q.target.value),placeholder:M.name,style:{width:"100%"}})]}),o.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end"},children:[o.jsx("button",{onClick:()=>{N(null),$("")},className:"btn btn-secondary",children:"Cancel"}),(re=M.info)!=null&&re.hasData?o.jsx("button",{onClick:()=>Ve(!0),className:"btn",style:{background:"#e74c3c",color:"white"},disabled:F!==M.name||K,children:K?"Deleting...":"Delete Anyway"}):o.jsx("button",{onClick:()=>Ve(!1),className:"btn",style:{background:"#e74c3c",color:"white"},disabled:K,children:K?"Deleting...":"Delete"})]})]})})]})}const QB={curious:hn,hooked:Sr,lineAndSinker:_r,patron:sr};function YB(){const[n,e]=C.useState([]),[t,r]=C.useState(!0),[s,l]=C.useState("all"),[c,h]=C.useState(null),d=async()=>{try{const k=nn(ot(Se,"exchanges"),is("createdAt","desc")),S=await Et(k);e(S.docs.map(T=>({id:T.id,...T.data()}))),r(!1)}catch(k){console.error("Error loading exchanges:",k),r(!1)}};C.useEffect(()=>{d()},[]);const m=async(k,S)=>{h(k);try{await Vt(et(Se,"exchanges",k),{status:S,processedAt:Xe()}),await d()}catch(T){console.error("Error updating exchange:",T),alert("Error updating exchange status")}h(null)},g=s==="all"?n:n.filter(k=>k.status===s),y={total:n.length,pending:n.filter(k=>k.status==="pending").length,completed:n.filter(k=>k.status==="completed").length,cancelled:n.filter(k=>k.status==="cancelled").length,totalValue:n.filter(k=>k.status==="completed").reduce((k,S)=>k+(S.kinderbucksAmount||0),0)},x=k=>{switch(k){case"completed":return o.jsx(Un,{size:18,color:"var(--kb-green)"});case"pending":return o.jsx(vr,{size:18,color:"#e67e22"});case"cancelled":return o.jsx(M2,{size:18,color:"#e74c3c"});default:return o.jsx(Gs,{size:18,color:"var(--kb-gray-400)"})}},E=k=>{switch(k){case"completed":return{background:"#d4edda",color:"var(--kb-green)"};case"pending":return{background:"#fff3cd",color:"#856404"};case"cancelled":return{background:"#f8d7da",color:"#721c24"};default:return{background:"#f8f9fa",color:"var(--kb-gray-600)"}}};return t?o.jsx(tn,{title:"Exchange Management",children:o.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:o.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading exchanges..."})})}):o.jsxs(tn,{title:"Exchange Management",children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[o.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"#e67e22"},children:y.pending}),o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Pending"})]}),o.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-green)"},children:y.completed}),o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Completed"})]}),o.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[o.jsxs("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-gold-dark)"},children:["$",y.totalValue.toFixed(0)]}),o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Exchanged"})]})]}),o.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem",flexWrap:"wrap"},children:[{value:"all",label:`All (${y.total})`},{value:"pending",label:`Pending (${y.pending})`},{value:"completed",label:`Completed (${y.completed})`},{value:"cancelled",label:`Cancelled (${y.cancelled})`}].map(k=>o.jsx("button",{onClick:()=>l(k.value),className:s===k.value?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem"},children:k.label},k.value))}),o.jsx("div",{className:"card",children:g.length===0?o.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[o.jsx(Vf,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),o.jsxs("p",{children:["No ",s!=="all"?s:""," exchanges found"]})]}):o.jsxs("div",{children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 150px",gap:"1rem",padding:"0.75rem 1rem",borderBottom:"2px solid var(--kb-navy)",fontWeight:"600",color:"var(--kb-navy)",fontSize:"0.85rem"},children:[o.jsx("div",{children:"Date"}),o.jsx("div",{children:"Amount"}),o.jsx("div",{children:"Tier & Bonus"}),o.jsx("div",{children:"Status"}),o.jsx("div",{children:"Actions"})]}),g.map(k=>{var T,P,M,N,F,$,K;const S=QB[k.tier]||hn;return o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 150px",gap:"1rem",padding:"1rem",borderBottom:"1px solid var(--kb-gray-100)",alignItems:"center",background:k.status==="pending"?"rgba(230, 126, 34, 0.05)":"transparent"},children:[o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:((M=(P=(T=k.createdAt)==null?void 0:T.toDate)==null?void 0:P.call(T))==null?void 0:M.toLocaleDateString())||"Unknown"}),o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:(($=(F=(N=k.createdAt)==null?void 0:N.toDate)==null?void 0:F.call(N))==null?void 0:$.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))||""})]}),o.jsxs("div",{children:[o.jsxs("div",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:["$",k.usdAmount," USD"]}),o.jsxs("div",{style:{fontSize:"0.9rem",color:"var(--kb-gold-dark)"},children:[" $",(K=k.kinderbucksAmount)==null?void 0:K.toFixed(2)," KB"]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(S,{size:18,color:"var(--kb-gray-500)"}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.9rem",color:"var(--kb-gray-700)",textTransform:"capitalize"},children:k.tier||"curious"}),o.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--kb-green)"},children:["+",Math.round((k.bonusRate||.1)*100),"% bonus"]})]})]}),o.jsx("div",{children:o.jsxs("span",{className:"badge",style:{...E(k.status),display:"inline-flex",alignItems:"center",gap:"0.25rem"},children:[x(k.status),k.status]})}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[k.status==="pending"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>m(k.id,"completed"),disabled:c===k.id,className:"btn btn-primary",style:{padding:"0.4rem 0.75rem",fontSize:"0.8rem"},children:c===k.id?"...":"Approve"}),o.jsx("button",{onClick:()=>m(k.id,"cancelled"),disabled:c===k.id,className:"btn btn-secondary",style:{padding:"0.4rem 0.75rem",fontSize:"0.8rem"},children:"Cancel"})]}),k.status==="completed"&&o.jsx("span",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Processed"}),k.status==="cancelled"&&o.jsx("button",{onClick:()=>m(k.id,"pending"),disabled:c===k.id,className:"btn btn-secondary",style:{padding:"0.4rem 0.75rem",fontSize:"0.8rem"},children:"Reopen"})]})]},k.id)})]})})]})}const eg={curious:hn,hooked:Sr,lineAndSinker:_r,patron:sr},tg={curious:"#888888",hooked:"#2e7d32",lineAndSinker:"#1565c0",patron:"#c9a227"};function XB(){const[n,e]=C.useState([]),[t,r]=C.useState([]),[s,l]=C.useState(!0),[c,h]=C.useState("checkins"),[d,m]=C.useState("all");C.useEffect(()=>{async function k(){try{const T=(await Et(ot(Se,"members"))).docs.map(M=>({id:M.id,...M.data()})),P=await Qr();e(T),r(P),l(!1)}catch(S){console.error("Error loading members:",S),l(!1)}}k()},[]);const g=k=>{const S=t.find(T=>T.code===k);return S?S.name:k},y=[...n].sort((k,S)=>{var T,P,M,N,F,$;switch(c){case"checkins":return(S.totalCheckins||0)-(k.totalCheckins||0);case"businesses":return(((T=S.businessesVisited)==null?void 0:T.length)||0)-(((P=k.businessesVisited)==null?void 0:P.length)||0);case"recent":const K=((N=(M=k.lastCheckin)==null?void 0:M.toDate)==null?void 0:N.call(M))||new Date(0);return((($=(F=S.lastCheckin)==null?void 0:F.toDate)==null?void 0:$.call(F))||new Date(0))-K;default:return 0}}),x=d==="all"?y:y.filter(k=>k.tier===d),E={total:n.length,curious:n.filter(k=>k.tier==="curious").length,hooked:n.filter(k=>k.tier==="hooked").length,lineAndSinker:n.filter(k=>k.tier==="lineAndSinker").length,patron:n.filter(k=>k.tier==="patron").length,totalCheckins:n.reduce((k,S)=>k+(S.totalCheckins||0),0)};return s?o.jsx(tn,{title:"Member Management",children:o.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:o.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading members..."})})}):o.jsxs(tn,{title:"Member Management",children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(130px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[o.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:E.total}),o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Members"})]}),Object.entries(eg).map(([k,S])=>{var T;return o.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[o.jsx(S,{size:20,color:tg[k]}),o.jsx("span",{style:{fontSize:"1.5rem",fontWeight:"700",color:tg[k]},children:E[k]})]}),o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)",textTransform:"capitalize"},children:((T=br[k])==null?void 0:T.name)||k})]},k)})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[o.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[o.jsx("button",{onClick:()=>m("all"),className:d==="all"?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem"},children:"All"}),Object.entries(eg).map(([k,S])=>o.jsx("button",{onClick:()=>m(k),className:d===k?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:o.jsx(S,{size:16})},k))]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx("span",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"Sort by:"}),o.jsxs("select",{value:c,onChange:k=>h(k.target.value),style:{padding:"0.5rem"},children:[o.jsx("option",{value:"checkins",children:"Most Check-ins"}),o.jsx("option",{value:"businesses",children:"Most Businesses"}),o.jsx("option",{value:"recent",children:"Recent Activity"})]})]})]}),o.jsx("div",{className:"card",children:x.length===0?o.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[o.jsx($r,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),o.jsx("p",{children:"No members found"})]}):o.jsxs("div",{children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 2fr",gap:"1rem",padding:"0.75rem 1rem",borderBottom:"2px solid var(--kb-navy)",fontWeight:"600",color:"var(--kb-navy)",fontSize:"0.85rem"},children:[o.jsx("div",{children:"Member"}),o.jsx("div",{children:"Tier"}),o.jsx("div",{children:"Activity"}),o.jsx("div",{children:"Businesses Visited"})]}),x.map(k=>{var N,F,$,K,A;const S=eg[k.tier]||hn,T=tg[k.tier]||"#888",P=br[k.tier]||br.curious,M=((N=k.businessesVisited)==null?void 0:N.length)||0;return o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 2fr",gap:"1rem",padding:"1rem",borderBottom:"1px solid var(--kb-gray-100)",alignItems:"center"},children:[o.jsxs("div",{children:[o.jsxs("div",{style:{fontFamily:"monospace",fontSize:"0.85rem",color:"var(--kb-gray-500)",wordBreak:"break-all"},children:[k.id.substring(0,16),"..."]}),k.lastCheckin&&o.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-400)",display:"flex",alignItems:"center",gap:"0.25rem",marginTop:"0.25rem"},children:[o.jsx(Lf,{size:12}),"Last: ",((K=($=(F=k.lastCheckin)==null?void 0:F.toDate)==null?void 0:$.call(F))==null?void 0:K.toLocaleDateString())||"Unknown"]})]}),o.jsxs("div",{children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:T,fontWeight:"600"},children:[o.jsx(S,{size:20}),P.name]}),o.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:[Math.round(P.bonus*100),"% bonus"]})]}),o.jsxs("div",{children:[o.jsxs("div",{style:{fontWeight:"600",color:"var(--kb-navy)",display:"flex",alignItems:"center",gap:"0.25rem"},children:[o.jsx(to,{size:16}),k.totalCheckins||0]}),o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:"check-ins"})]}),o.jsxs("div",{children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",marginBottom:"0.5rem",color:"var(--kb-gray-600)"},children:[o.jsx(kl,{size:14}),o.jsx("span",{style:{fontWeight:"500"},children:M}),o.jsx("span",{style:{fontSize:"0.85rem"},children:"businesses"})]}),((A=k.businessesVisited)==null?void 0:A.length)>0&&o.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.25rem"},children:[k.businessesVisited.slice(0,3).map(j=>o.jsx("span",{style:{fontSize:"0.75rem",padding:"0.15rem 0.5rem",background:"var(--kb-gray-100)",borderRadius:"4px",color:"var(--kb-gray-600)"},children:g(j)},j)),k.businessesVisited.length>3&&o.jsxs("span",{style:{fontSize:"0.75rem",color:"var(--kb-gray-400)"},children:["+",k.businessesVisited.length-3," more"]})]})]})]},k.id)})]})}),o.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"var(--kb-gray-50)",borderRadius:"8px",textAlign:"center",color:"var(--kb-gray-600)",fontSize:"0.9rem"},children:["Total of ",o.jsx("strong",{children:E.totalCheckins})," check-ins across ",o.jsx("strong",{children:E.total})," members"]})]})}const ng={admin:{label:"Admin",color:"#dc2626",bgColor:"#fef2f2",Icon:Yh,description:"Full system access"},business:{label:"Business",color:"#2563eb",bgColor:"#eff6ff",Icon:Lt,description:"Business owner access"},member:{label:"Member",color:"var(--kb-green)",bgColor:"#f0fdf4",Icon:cl,description:"Regular member"}};function JB(){var H,te,Ce,je,Oe,Me;const[n,e]=C.useState([]),[t,r]=C.useState([]),[s,l]=C.useState([]),[c,h]=C.useState(!0),[d,m]=C.useState(""),[g,y]=C.useState("all"),[x,E]=C.useState(null),[k,S]=C.useState(null),[T,P]=C.useState(""),[M,N]=C.useState(null),[F,$]=C.useState(!1),[K,A]=C.useState(null),[j,D]=C.useState(""),[L,B]=C.useState(!1),U=async()=>{const[re,q,fe]=await Promise.all([mM(),Qr(),xM()]);e(re.filter($e=>!$e.isDeleted)),r(fe),l(q),h(!1)};C.useEffect(()=>{U()},[]);const V=async(re,q)=>{N(`${re}-${q}`);try{const fe=n.find(xt=>xt.id===re);Or(fe).includes(q)?await hM(re,q):await dM(re,q),P("Role updated successfully"),setTimeout(()=>P(""),3e3),await U()}catch(fe){console.error("Error updating role:",fe),alert("Error updating role")}N(null)},Ve=async(re,q)=>{try{await fM(re,q),P("Business assigned successfully"),setTimeout(()=>P(""),3e3),await U(),S(null)}catch(fe){console.error("Error assigning business:",fe),alert("Error assigning business")}},We=async re=>{const q=await A2(re.id);A({user:re,info:q}),D("")},rt=async(re=!1)=>{if(K){B(!0);try{await gM(K.user.id,null,re),A(null),D(""),P("User deleted successfully"),setTimeout(()=>P(""),3e3),await U()}catch(q){console.error("Error deleting user:",q),alert(q.message||"Error deleting user")}B(!1)}},Te=async re=>{try{await yM(re),P("User restored successfully"),setTimeout(()=>P(""),3e3),await U()}catch(q){console.error("Error restoring user:",q),alert("Error restoring user")}},se=n.filter(re=>{var $e,xt;const q=(($e=re.email)==null?void 0:$e.toLowerCase().includes(d.toLowerCase()))||((xt=re.displayName)==null?void 0:xt.toLowerCase().includes(d.toLowerCase()));if(g==="all")return q;const fe=Or(re);return q&&fe.includes(g)}),me={total:n.length,admins:n.filter(re=>Or(re).includes("admin")).length,businesses:n.filter(re=>Or(re).includes("business")).length,members:n.filter(re=>Or(re).includes("member")).length},le=re=>re?(re.toDate?re.toDate():new Date(re)).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Never";return c?o.jsx(tn,{title:"User Management",children:o.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:o.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading..."})})}):o.jsxs(tn,{title:"User Management",children:[T&&o.jsxs("div",{style:{position:"fixed",top:"100px",right:"2rem",background:"var(--kb-green)",color:"white",padding:"1rem 1.5rem",borderRadius:"8px",display:"flex",alignItems:"center",gap:"0.75rem",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:1e3},children:[o.jsx(Un,{size:20}),o.jsx("span",{children:T})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[o.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:me.total}),o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Users"})]}),o.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"#dc2626"},children:me.admins}),o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Admins"})]}),o.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"#2563eb"},children:me.businesses}),o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Business Users"})]}),o.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-green)"},children:me.members}),o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Members"})]})]}),o.jsx("div",{className:"card",style:{marginBottom:"2rem"},children:o.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap",alignItems:"center"},children:[o.jsxs("div",{style:{flex:1,minWidth:"200px",position:"relative"},children:[o.jsx(Of,{size:18,color:"var(--kb-gray-400)",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)"}}),o.jsx("input",{type:"text",placeholder:"Search by name or email...",value:d,onChange:re=>m(re.target.value),style:{width:"100%",paddingLeft:"40px"}})]}),o.jsxs("select",{value:g,onChange:re=>y(re.target.value),style:{minWidth:"150px"},children:[o.jsx("option",{value:"all",children:"All Roles"}),o.jsx("option",{value:"admin",children:"Has Admin"}),o.jsx("option",{value:"business",children:"Has Business"}),o.jsx("option",{value:"member",children:"Has Member"})]})]})}),o.jsxs("div",{className:"card",children:[o.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx($r,{size:20})," All Users (",se.length,")"]}),se.length===0?o.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[o.jsx($r,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),o.jsx("p",{children:"No users found"})]}):o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:se.map(re=>{const q=Or(re),fe=q.includes("admin")?"admin":q.includes("business")?"business":"member",$e=ng[fe],xt=$e.Icon;return o.jsxs("div",{style:{background:"var(--kb-gray-50)",border:"1px solid var(--kb-gray-200)",borderRadius:"12px",padding:"1.25rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",flexWrap:"wrap",gap:"1rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[o.jsx("div",{style:{width:"48px",height:"48px",background:$e.bgColor,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(xt,{size:24,color:$e.color})}),o.jsxs("div",{children:[o.jsxs("div",{style:{fontWeight:"600",color:"var(--kb-navy)",fontSize:"1.05rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[re.displayName||"Unnamed User",q.includes("admin")&&o.jsx(sr,{size:16,color:"#c9a227"})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:[o.jsx(B2,{size:14}),re.email]}),re.businessCode&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#2563eb",fontSize:"0.85rem",marginTop:"0.25rem"},children:[o.jsx(Lt,{size:14}),re.businessCode]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"var(--kb-gray-400)",fontSize:"0.8rem",marginTop:"0.25rem"},children:[o.jsx(Lf,{size:12}),"Last login: ",le(re.lastLogin)]})]})]}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:"0.75rem"},children:[o.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:q.map(Ht=>{const ht=ng[Ht];return ht?o.jsxs("div",{style:{padding:"0.35rem 0.75rem",background:ht.bgColor,color:ht.color,borderRadius:"6px",fontSize:"0.8rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.35rem"},children:[o.jsx(ht.Icon,{size:14}),ht.label]},Ht):null})}),o.jsx("button",{onClick:()=>E(x===re.id?null:re.id),className:"btn btn-secondary",style:{padding:"0.4rem 0.75rem",fontSize:"0.8rem"},children:x===re.id?"Done":"Edit Roles"})]})]}),x===re.id&&o.jsxs("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:"1px solid var(--kb-gray-200)"},children:[o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)",marginBottom:"0.75rem"},children:"Toggle roles for this user:"}),o.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",marginBottom:"1rem"},children:Object.entries(ng).map(([Ht,ht])=>{const jn=q.includes(Ht),An=M===`${re.id}-${Ht}`;return o.jsxs("button",{onClick:()=>V(re.id,Ht),disabled:An,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",borderRadius:"8px",border:`2px solid ${jn?ht.color:"var(--kb-gray-300)"}`,background:jn?ht.bgColor:"white",color:jn?ht.color:"var(--kb-gray-500)",cursor:An?"wait":"pointer",fontWeight:"500",fontSize:"0.9rem",opacity:An?.6:1},children:[jn?o.jsx(O3,{size:16}):o.jsx(qo,{size:16}),o.jsx(ht.Icon,{size:16}),ht.label]},Ht)})}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[q.includes("business")&&o.jsxs("button",{onClick:()=>S(re.id),className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem"},children:[o.jsx(Lt,{size:16}),re.businessCode?`Change Business (${re.businessCode})`:"Assign Business"]}),o.jsxs("button",{onClick:()=>We(re),className:"btn",style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem",background:"var(--kb-gray-100)",color:"var(--kb-gray-600)"},children:[o.jsx(_l,{size:16}),"Delete User"]})]})]})]},re.id)})})]}),t.length>0&&o.jsxs("div",{className:"card",style:{marginTop:"2rem"},children:[o.jsxs("button",{onClick:()=>$(!F),style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",background:"none",border:"none",cursor:"pointer",padding:0},children:[o.jsxs("h3",{style:{color:"var(--kb-gray-500)",display:"flex",alignItems:"center",gap:"0.5rem",margin:0},children:[o.jsx(N2,{size:20})," Deleted Users (",t.length,")"]}),o.jsx("span",{style:{color:"var(--kb-gray-400)"},children:F?"":""})]}),F&&o.jsx("div",{style:{marginTop:"1.5rem",display:"flex",flexDirection:"column",gap:"0.75rem"},children:t.map(re=>{var q;return o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem",background:"var(--kb-gray-50)",borderRadius:"8px",opacity:.7},children:[o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"500",color:"var(--kb-gray-600)"},children:re.displayName||"Unnamed User"}),o.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-400)"},children:[re.email,"  Deleted ",(q=re.deletedAt)!=null&&q.toDate?re.deletedAt.toDate().toLocaleDateString():"recently"]})]}),o.jsxs("button",{onClick:()=>Te(re.id),className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(F2,{size:16})," Restore"]})]},re.id)})})]}),k&&o.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:1e3},children:o.jsxs("div",{className:"card",style:{maxWidth:"400px",width:"100%",padding:"1.5rem"},children:[o.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Assign Business"}),o.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1rem"},children:"Select a business to assign to this user:"}),o.jsx("div",{style:{maxHeight:"300px",overflowY:"auto",marginBottom:"1rem"},children:s.map(re=>o.jsxs("button",{onClick:()=>Ve(k,re.code),style:{display:"flex",alignItems:"center",gap:"0.75rem",width:"100%",padding:"0.75rem",border:"1px solid var(--kb-gray-200)",borderRadius:"8px",background:"white",cursor:"pointer",marginBottom:"0.5rem",textAlign:"left"},children:[o.jsx(Lt,{size:18,color:"var(--kb-navy)"}),o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:re.name}),o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:re.code})]})]},re.code))}),o.jsx("button",{onClick:()=>S(null),className:"btn btn-secondary",style:{width:"100%"},children:"Cancel"})]})}),K&&o.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:o.jsxs("div",{className:"card",style:{maxWidth:"500px",width:"100%",padding:"2rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1.5rem"},children:[o.jsx("div",{style:{width:"48px",height:"48px",background:(H=K.info)!=null&&H.hasData?"rgba(231, 76, 60, 0.1)":"rgba(39, 174, 96, 0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:(te=K.info)!=null&&te.hasData?o.jsx(W2,{size:24,color:"#e74c3c"}):o.jsx(_l,{size:24,color:"var(--kb-green)"})}),o.jsxs("div",{children:[o.jsxs("h3",{style:{color:"var(--kb-navy)",margin:0},children:["Delete ",K.user.displayName||K.user.email,"?"]}),o.jsx("p",{style:{color:"var(--kb-gray-500)",margin:0,fontSize:"0.9rem"},children:(Ce=K.info)!=null&&Ce.hasData?"This user has associated data":"This user can be safely deleted"})]})]}),((je=K.info)==null?void 0:je.hasData)&&o.jsxs("div",{style:{background:"rgba(231, 76, 60, 0.05)",border:"1px solid rgba(231, 76, 60, 0.2)",borderRadius:"8px",padding:"1rem",marginBottom:"1.5rem"},children:[o.jsx("div",{style:{fontWeight:"600",color:"#c0392b",marginBottom:"0.5rem"},children:"Associated Data Found:"}),o.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem",color:"var(--kb-gray-600)"},children:[K.info.checkinCount>0&&o.jsxs("li",{children:[K.info.checkinCount," check-ins recorded"]}),K.info.exchangeCount>0&&o.jsxs("li",{children:[K.info.exchangeCount," exchange requests"]}),K.info.isBusinessOwner&&o.jsxs("li",{children:["Business owner: ",K.info.businessCode]})]}),o.jsx("p",{style:{margin:"0.75rem 0 0 0",fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"The user will be soft-deleted and can be restored later."})]}),((Oe=K.info)==null?void 0:Oe.hasData)&&o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:['Type "',K.user.email,'" to confirm:']}),o.jsx("input",{type:"text",value:j,onChange:re=>D(re.target.value),placeholder:K.user.email,style:{width:"100%"}})]}),o.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end"},children:[o.jsx("button",{onClick:()=>{A(null),D("")},className:"btn btn-secondary",children:"Cancel"}),(Me=K.info)!=null&&Me.hasData?o.jsx("button",{onClick:()=>rt(!0),className:"btn",style:{background:"#e74c3c",color:"white"},disabled:j!==K.user.email||L,children:L?"Deleting...":"Delete Anyway"}):o.jsx("button",{onClick:()=>rt(!1),className:"btn",style:{background:"#e74c3c",color:"white"},disabled:L,children:L?"Deleting...":"Delete"})]})]})})]})}const jk={curious:hn,hooked:Sr,lineAndSinker:_r,patron:sr},Ak={curious:"#6b7280",hooked:"#16a34a",lineAndSinker:"#2563eb",patron:"#ca8a04"};function ZB(){const{businessCode:n}=hy(),[e,t]=C.useState(null),[r,s]=C.useState([]),[l,c]=C.useState(!0),[h,d]=C.useState(!1);C.useEffect(()=>{async function S(){const[T,P]=await Promise.all([Mu(n),FT(n)]);t(T),s(P),c(!1)}S()},[n]);const m=()=>{const S=`https://harmonicsystems.github.io/kinderbucks/#/checkin/${n}`;navigator.clipboard.writeText(S),d(!0),setTimeout(()=>d(!1),2e3)},g=r.filter(S=>{var M;const T=(M=S.timestamp)!=null&&M.toDate?S.timestamp.toDate():new Date(S.timestamp),P=new Date;return T.toDateString()===P.toDateString()}).length,y=r.filter(S=>{var M;const T=(M=S.timestamp)!=null&&M.toDate?S.timestamp.toDate():new Date(S.timestamp),P=new Date;return P.setDate(P.getDate()-7),T>P}).length,x=new Set(r.map(S=>S.visitorId)).size,E=r.reduce((S,T)=>{const P=T.memberTier||"curious";return S[P]=(S[P]||0)+1,S},{});if(l)return o.jsx(tn,{title:"Business Details",children:o.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:o.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading..."})})});if(!e)return o.jsx(tn,{title:"Business Details",children:o.jsxs("div",{style:{textAlign:"center",padding:"4rem"},children:[o.jsx(Lt,{size:48,color:"var(--kb-gray-300)",style:{marginBottom:"1rem"}}),o.jsx("h2",{style:{color:"var(--kb-navy)"},children:"Business Not Found"}),o.jsxs("p",{style:{color:"var(--kb-gray-500)",marginBottom:"1.5rem"},children:['No business with code "',n,'" exists.']}),o.jsx(he,{to:"/admin/businesses",className:"btn btn-primary",children:"Back to Businesses"})]})});const k=`https://harmonicsystems.github.io/kinderbucks/#/checkin/${n}`;return o.jsxs(tn,{title:"Business Details",children:[o.jsxs(he,{to:"/admin/businesses",style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",color:"var(--kb-gray-500)",marginBottom:"1.5rem",fontSize:"0.9rem"},children:[o.jsx(D2,{size:16})," Back to Directory"]}),o.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",flexWrap:"wrap",gap:"1.5rem",marginBottom:"2rem"},children:[o.jsxs("div",{children:[o.jsx("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.25rem 0.75rem",background:e.isActive?"rgba(39, 174, 96, 0.1)":"rgba(231, 76, 60, 0.1)",color:e.isActive?"var(--kb-green)":"#e74c3c",borderRadius:"6px",fontSize:"0.85rem",fontWeight:"600",marginBottom:"0.75rem"},children:e.isActive?"Active":"Inactive"}),o.jsx("h1",{style:{color:"var(--kb-navy)",marginBottom:"0.25rem",fontSize:"2rem"},children:e.name}),o.jsx("div",{style:{fontFamily:"monospace",color:"var(--kb-gray-500)"},children:n})]}),o.jsxs("div",{className:"card",style:{padding:"1.5rem",textAlign:"center"},children:[o.jsx("div",{style:{background:"white",borderRadius:"12px",padding:"12px",marginBottom:"1rem"},children:o.jsx(El,{value:k,size:120,showFrame:!1})}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[o.jsxs("button",{onClick:m,className:"btn btn-secondary",style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.25rem",fontSize:"0.85rem"},children:[o.jsx(p0,{size:14})," ",h?"Copied!":"Copy URL"]}),o.jsxs("button",{onClick:()=>window.print(),className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"0.85rem"},children:[o.jsx(L2,{size:14})," Print"]})]})]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[o.jsx("div",{className:"card",style:{padding:"1.25rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(39, 174, 96, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(to,{size:22,color:"var(--kb-green)"})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:e.checkinCount||0}),o.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Total Check-ins"})]})]})}),o.jsx("div",{className:"card",style:{padding:"1.25rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(52, 152, 219, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(vr,{size:22,color:"#3498db"})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:g}),o.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Today"})]})]})}),o.jsx("div",{className:"card",style:{padding:"1.25rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(155, 89, 182, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(Lf,{size:22,color:"#9b59b6"})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:y}),o.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"This Week"})]})]})}),o.jsx("div",{className:"card",style:{padding:"1.25rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(201, 162, 39, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx($r,{size:22,color:"var(--kb-gold-dark)"})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:x}),o.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Unique Visitors"})]})]})})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem"},children:[o.jsxs("div",{className:"card",children:[o.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem"},children:"Check-ins by Member Tier"}),Object.keys(E).length===0?o.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"No check-ins yet"}):o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:["curious","hooked","lineAndSinker","patron"].map(S=>{const T=E[S]||0;if(T===0&&!E[S])return null;const P=jk[S],M=Ak[S],N={curious:"Curious",hooked:"Hooked",lineAndSinker:"Line & Sinker",patron:"Village Patron"},F=Math.max(...Object.values(E),1),$=T/F*100;return o.jsxs("div",{children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.5rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(P,{size:18,color:M}),o.jsx("span",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:N[S]})]}),o.jsx("span",{style:{color:"var(--kb-gray-500)",fontWeight:"600"},children:T})]}),o.jsx("div",{style:{height:"8px",background:"var(--kb-gray-100)",borderRadius:"4px",overflow:"hidden"},children:o.jsx("div",{style:{width:`${$}%`,height:"100%",background:M,borderRadius:"4px"}})})]},S)}).filter(Boolean)})]}),o.jsxs("div",{className:"card",children:[o.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Check-in Information"}),o.jsxs("div",{style:{marginBottom:"1rem"},children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontSize:"0.85rem"},children:"Check-in URL"}),o.jsx("input",{type:"text",value:k,readOnly:!0,style:{width:"100%",fontFamily:"monospace",fontSize:"0.85rem"}})]}),o.jsxs("div",{style:{background:"var(--kb-cream)",borderRadius:"8px",padding:"1rem"},children:[o.jsx("h4",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem",fontSize:"0.95rem"},children:"How Check-ins Work"}),o.jsxs("ul",{style:{color:"var(--kb-gray-600)",fontSize:"0.9rem",paddingLeft:"1.25rem",lineHeight:1.6},children:[o.jsx("li",{children:"Customer scans QR code with phone"}),o.jsx("li",{children:"App shows verification code + bonus %"}),o.jsx("li",{children:"Customer shows screen to cashier"}),o.jsx("li",{children:"1 hour cooldown between check-ins"})]})]})]})]}),o.jsxs("div",{className:"card",style:{marginTop:"1.5rem"},children:[o.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(vr,{size:20})," Recent Check-ins"]}),r.length===0?o.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[o.jsx($r,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),o.jsx("p",{children:"No check-ins recorded yet"})]}):o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:r.slice(0,25).map((S,T)=>{var F,$;const P=(F=S.timestamp)!=null&&F.toDate?S.timestamp.toDate():new Date(S.timestamp),M=jk[S.memberTier]||hn,N=Ak[S.memberTier]||"#6b7280";return o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"var(--kb-gray-50)",borderRadius:"8px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("div",{style:{width:"36px",height:"36px",background:"var(--kb-green)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(Un,{size:18,color:"white"})}),o.jsxs("div",{children:[o.jsxs("div",{style:{fontWeight:"500",color:"var(--kb-navy)",display:"flex",alignItems:"center",gap:"0.5rem"},children:["Check-in",S.memberTier&&o.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",fontSize:"0.75rem",color:N,background:`${N}15`,padding:"0.125rem 0.5rem",borderRadius:"4px"},children:[o.jsx(M,{size:12}),S.memberTier]})]}),o.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)",fontFamily:"monospace"},children:[($=S.visitorId)==null?void 0:$.substring(0,8),"..."]})]})]}),o.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:P.toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]},S.id||T)})})]})]})}function ez(){const{user:n}=Gr(),[e,t]=C.useState([]),[r,s]=C.useState(!0),[l,c]=C.useState("all"),[h,d]=C.useState(null),m=async()=>{try{const S=await LB();t(S),s(!1)}catch(S){console.error("Error loading redemptions:",S),s(!1)}};C.useEffect(()=>{m()},[]);const g=async(S,T)=>{d(S);try{await VB(S,T,n.uid),await m()}catch(P){console.error("Error processing redemption:",P),alert("Error processing redemption: "+P.message)}d(null)},y=l==="all"?e:e.filter(S=>S.status===l),x={total:e.length,pending:e.filter(S=>S.status==="pending").length,approved:e.filter(S=>S.status==="approved").length,rejected:e.filter(S=>S.status==="rejected").length,totalValue:e.filter(S=>S.status==="approved").reduce((S,T)=>S+(T.amount||0),0)},E=S=>{switch(S){case"approved":return o.jsx(Un,{size:18,color:"var(--kb-green)"});case"pending":return o.jsx(vr,{size:18,color:"#e67e22"});case"rejected":return o.jsx(M2,{size:18,color:"#e74c3c"});default:return o.jsx(Gs,{size:18,color:"var(--kb-gray-400)"})}},k=S=>{switch(S){case"approved":return{background:"#d4edda",color:"var(--kb-green)"};case"pending":return{background:"#fff3cd",color:"#856404"};case"rejected":return{background:"#f8d7da",color:"#721c24"};default:return{background:"#f8f9fa",color:"var(--kb-gray-600)"}}};return r?o.jsx(tn,{title:"Redemption Requests",children:o.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:o.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading redemptions..."})})}):o.jsxs(tn,{title:"Redemption Requests",children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[o.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"#e67e22"},children:x.pending}),o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Pending"})]}),o.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-green)"},children:x.approved}),o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Approved"})]}),o.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"#e74c3c"},children:x.rejected}),o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Rejected"})]}),o.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[o.jsxs("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-gold-dark)"},children:["$",x.totalValue.toFixed(0)]}),o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Redeemed"})]})]}),o.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem",flexWrap:"wrap"},children:[{value:"all",label:`All (${x.total})`},{value:"pending",label:`Pending (${x.pending})`},{value:"approved",label:`Approved (${x.approved})`},{value:"rejected",label:`Rejected (${x.rejected})`}].map(S=>o.jsx("button",{onClick:()=>c(S.value),className:l===S.value?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem"},children:S.label},S.value))}),o.jsx("div",{className:"card",children:y.length===0?o.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[o.jsx(Yi,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),o.jsxs("p",{children:["No ",l!=="all"?l:""," redemption requests"]})]}):o.jsxs("div",{children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 150px",gap:"1rem",padding:"0.75rem 1rem",borderBottom:"2px solid var(--kb-navy)",fontWeight:"600",color:"var(--kb-navy)",fontSize:"0.85rem"},children:[o.jsx("div",{children:"Date"}),o.jsx("div",{children:"Business"}),o.jsx("div",{children:"Amount"}),o.jsx("div",{children:"Status"}),o.jsx("div",{children:"Actions"})]}),y.map(S=>{var T,P,M,N,F,$,K;return o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 150px",gap:"1rem",padding:"1rem",borderBottom:"1px solid var(--kb-gray-100)",alignItems:"center",background:S.status==="pending"?"rgba(230, 126, 34, 0.05)":"transparent"},children:[o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:((M=(P=(T=S.createdAt)==null?void 0:T.toDate)==null?void 0:P.call(T))==null?void 0:M.toLocaleDateString())||"Unknown"}),o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:(($=(F=(N=S.createdAt)==null?void 0:N.toDate)==null?void 0:F.call(N))==null?void 0:$.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))||""})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Lt,{size:18,color:"var(--kb-gray-400)"}),o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:S.businessName||S.businessCode}),o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:S.businessCode})]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Gh,{size:18,color:"var(--kb-gold-dark)"}),o.jsxs("span",{style:{fontSize:"1.25rem",fontWeight:"600",color:"var(--kb-navy)"},children:["$",(K=S.amount)==null?void 0:K.toFixed(2)]})]}),o.jsx("div",{children:o.jsxs("span",{className:"badge",style:{...k(S.status),display:"inline-flex",alignItems:"center",gap:"0.25rem"},children:[E(S.status),S.status]})}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[S.status==="pending"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>g(S.id,!0),disabled:h===S.id,className:"btn btn-primary",style:{padding:"0.4rem 0.75rem",fontSize:"0.8rem"},children:h===S.id?"...":"Approve"}),o.jsx("button",{onClick:()=>g(S.id,!1),disabled:h===S.id,className:"btn btn-secondary",style:{padding:"0.4rem 0.75rem",fontSize:"0.8rem"},children:"Reject"})]}),S.status==="approved"&&o.jsx("span",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Processed"}),S.status==="rejected"&&o.jsx("span",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Rejected"})]})]},S.id)})]})})]})}function tz(){const{profile:n}=Gr(),e=io(),[t,r]=C.useState(""),[s,l]=C.useState(!1),[c,h]=C.useState(null),[d,m]=C.useState(""),[g,y]=C.useState(!1),[x,E]=C.useState(null),[k,S]=C.useState("");C.useState(()=>{async function F(){if(n!=null&&n.businessCode){const $=await Mu(n.businessCode);$&&S($.name)}}F()},[n==null?void 0:n.businessCode]);const T=async F=>{F.preventDefault(),m(""),h(null);const $=t.trim().toUpperCase();if(!$){m("Please enter a serial number");return}l(!0);try{const K=await _B($);K.valid?h(K.kb):m(K.error)}catch(K){console.error("Validation error:",K),m("Failed to validate serial number")}l(!1)},P=async()=>{if(!(!c||!(n!=null&&n.businessCode))){y(!0);try{await NB(c.serial,n.businessCode,k),E({serial:c.serial,amount:c.denomination}),h(null),r("")}catch(F){console.error("Payment error:",F),m("Failed to record payment")}y(!1)}},M=()=>{r(""),h(null),m(""),E(null)};if(!(n!=null&&n.businessCode))return o.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"var(--kb-cream)",padding:"2rem"},children:o.jsxs("div",{className:"card",style:{maxWidth:"400px",textAlign:"center",padding:"2rem"},children:[o.jsx(Gs,{size:48,color:"var(--kb-gray-400)",style:{marginBottom:"1rem"}}),o.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"No Business Assigned"}),o.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem"},children:"You need a business account to accept payments."}),o.jsx(he,{to:"/",className:"btn btn-primary",children:"Go Home"})]})});const N=F=>{switch(F){case 1:return"#27ae60";case 5:return"#3498db";case 10:return"#9b59b6";case 20:return"#e67e22";case 50:return"#c0392b";default:return"var(--kb-gold)"}};return o.jsxs("div",{style:{minHeight:"100vh",background:"var(--kb-navy)",display:"flex",flexDirection:"column"},children:[o.jsxs("header",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem 1.5rem",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:[o.jsxs(he,{to:"/business/dashboard",style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--kb-gray-300)",textDecoration:"none"},children:[o.jsx(D2,{size:20}),"Back to Dashboard"]}),o.jsx("div",{style:{color:"var(--kb-gold)",fontWeight:"500"},children:k})]}),o.jsx("main",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem"},children:o.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{width:"100%",maxWidth:"500px"},children:[x&&o.jsxs("div",{className:"card",style:{padding:"3rem 2rem",textAlign:"center"},children:[o.jsx(pe.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200,damping:15},children:o.jsx("div",{style:{width:"80px",height:"80px",background:"rgba(39, 174, 96, 0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.5rem"},children:o.jsx(Un,{size:40,color:"var(--kb-green)"})})}),o.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"Payment Accepted"}),o.jsxs("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem"},children:["$",x.amount," Kinderbuck has been added to your balance"]}),o.jsx("div",{style:{background:"var(--kb-gray-50)",borderRadius:"8px",padding:"1rem",marginBottom:"2rem",fontFamily:"monospace",fontSize:"1.25rem",color:"var(--kb-navy)"},children:x.serial}),o.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[o.jsxs("button",{onClick:M,className:"btn btn-gold",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(qo,{size:18}),"Accept Another"]}),o.jsx("button",{onClick:()=>e("/business/dashboard"),className:"btn btn-secondary",children:"Done"})]})]}),c&&!x&&o.jsxs("div",{className:"card",style:{padding:"2rem"},children:[o.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[o.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"Confirm Payment"}),o.jsx("p",{style:{color:"var(--kb-gray-600)"},children:"Review the Kinderbuck details below"})]}),o.jsx("div",{style:{background:"linear-gradient(135deg, var(--kb-cream) 0%, var(--kb-gray-100) 100%)",borderRadius:"16px",padding:"2rem",marginBottom:"1.5rem",border:`3px solid ${N(c.denomination)}`},children:o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"var(--kb-gray-500)",textTransform:"uppercase",letterSpacing:"0.1em",marginBottom:"0.5rem"},children:"Serial Number"}),o.jsx("div",{style:{fontFamily:"monospace",fontSize:"1.5rem",fontWeight:"600",color:"var(--kb-navy)",marginBottom:"1.5rem"},children:c.serial}),o.jsxs("div",{style:{fontSize:"4rem",fontWeight:"700",color:N(c.denomination),lineHeight:1},children:["$",c.denomination]}),o.jsx("div",{style:{fontSize:"0.9rem",color:"var(--kb-gray-600)",marginTop:"0.5rem"},children:"Kinderbuck"})]})}),d&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",background:"#fef2f2",borderRadius:"8px",color:"#dc2626",marginBottom:"1rem",fontSize:"0.9rem"},children:[o.jsx(Gs,{size:18}),d]}),o.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[o.jsxs("button",{onClick:M,className:"btn btn-secondary",style:{flex:1},disabled:g,children:[o.jsx(b0,{size:18,style:{marginRight:"0.5rem"}}),"Cancel"]}),o.jsx("button",{onClick:P,className:"btn btn-primary",style:{flex:1},disabled:g,children:g?"Processing...":o.jsxs(o.Fragment,{children:[o.jsx(Un,{size:18,style:{marginRight:"0.5rem"}}),"Accept $",c.denomination]})})]})]}),!c&&!x&&o.jsxs("div",{className:"card",style:{padding:"2rem"},children:[o.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[o.jsx("div",{style:{width:"64px",height:"64px",background:"rgba(201, 162, 39, 0.1)",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:o.jsx(Yi,{size:32,color:"var(--kb-gold-dark)"})}),o.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"Accept Kinderbuck Payment"}),o.jsx("p",{style:{color:"var(--kb-gray-600)"},children:"Enter the serial number from the physical bill"})]}),o.jsxs("form",{onSubmit:T,children:[o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Serial Number"}),o.jsx("input",{type:"text",value:t,onChange:F=>r(F.target.value.toUpperCase()),placeholder:"KB-0001",style:{width:"100%",fontFamily:"monospace",fontSize:"1.25rem",textAlign:"center",letterSpacing:"0.1em"},autoFocus:!0})]}),d&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",background:"#fef2f2",borderRadius:"8px",color:"#dc2626",marginBottom:"1rem",fontSize:"0.9rem"},children:[o.jsx(Gs,{size:18}),d]}),o.jsx("button",{type:"submit",className:"btn btn-gold",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",padding:"1rem",fontSize:"1.1rem"},disabled:s,children:s?"Validating...":o.jsxs(o.Fragment,{children:[o.jsx(Of,{size:20}),"Validate"]})})]}),o.jsxs("div",{style:{marginTop:"2rem",padding:"1rem",background:"var(--kb-gray-50)",borderRadius:"8px",fontSize:"0.85rem",color:"var(--kb-gray-600)"},children:[o.jsx("strong",{children:"Tip:"})," The serial number is printed on the front of the Kinderbuck bill, typically in the format KB-XXXX."]})]})]})})]})}const nz={AVIARY:{address:"4 Hudson Street, Kinderhook, NY 12106",phone:"(518) 610-8543",website:"https://theaviarykinderhook.com",hours:{monday:"Closed",tuesday:"Closed",wednesday:"5:00 PM - 9:00 PM",thursday:"5:00 PM - 9:00 PM",friday:"5:00 PM - 10:00 PM",saturday:"5:00 PM - 10:00 PM",sunday:"5:00 PM - 9:00 PM"}},MORNINGBIRD:{address:"4 Hudson Street, Kinderhook, NY 12106",phone:"(518) 610-8543",website:"https://theaviarykinderhook.com/morningbird",hours:{monday:"Closed",tuesday:"8:00 AM - 3:00 PM",wednesday:"8:00 AM - 3:00 PM",thursday:"8:00 AM - 3:00 PM",friday:"8:00 AM - 3:00 PM",saturday:"8:00 AM - 3:00 PM",sunday:"8:00 AM - 3:00 PM"}},SAISONNIER:{address:"11 Chatham Street, Kinderhook, NY 12106",phone:"(518) 610-8100",website:"https://www.saisonnier.us",hours:{monday:"Closed",tuesday:"Closed",wednesday:"5:00 PM - 9:00 PM",thursday:"5:00 PM - 9:00 PM",friday:"5:00 PM - 10:00 PM",saturday:"11:30 AM - 2:30 PM, 5:00 PM - 10:00 PM",sunday:"11:30 AM - 2:30 PM, 5:00 PM - 9:00 PM"}},"BROADST-BAGEL":{address:"1 Broad Street, Kinderhook, NY 12106",phone:"(518) 758-8084",website:"https://broadstreetbagelco.com",hours:{monday:"7:00 AM - 2:00 PM",tuesday:"7:00 AM - 2:00 PM",wednesday:"7:00 AM - 2:00 PM",thursday:"7:00 AM - 2:00 PM",friday:"7:00 AM - 2:00 PM",saturday:"7:00 AM - 2:00 PM",sunday:"8:00 AM - 1:00 PM"}},"BOTTLE-SHOP":{address:"8 Hudson Street, Kinderhook, NY 12106",phone:"(518) 610-8111",website:"https://kinderhookbottleshop.com",hours:{monday:"12:00 PM - 7:00 PM",tuesday:"12:00 PM - 7:00 PM",wednesday:"12:00 PM - 7:00 PM",thursday:"12:00 PM - 7:00 PM",friday:"12:00 PM - 8:00 PM",saturday:"11:00 AM - 8:00 PM",sunday:"12:00 PM - 5:00 PM"}},"OLD-DUTCH":{address:"8 Broad Street, Kinderhook, NY 12106",phone:"(518) 203-3347",website:"https://theolddutchinn.com",hours:{monday:"Closed",tuesday:"Closed",wednesday:"5:00 PM - 9:00 PM",thursday:"5:00 PM - 9:00 PM",friday:"5:00 PM - 10:00 PM",saturday:"11:00 AM - 10:00 PM",sunday:"11:00 AM - 8:00 PM"}},SAMASCOTTS:{address:"65 Chatham Street, Kinderhook, NY 12106",phone:"(518) 758-9292",website:"https://www.samascott.com/gardenmarket",hours:{monday:"9:00 AM - 6:00 PM",tuesday:"9:00 AM - 6:00 PM",wednesday:"9:00 AM - 6:00 PM",thursday:"9:00 AM - 6:00 PM",friday:"9:00 AM - 6:00 PM",saturday:"9:00 AM - 6:00 PM",sunday:"9:00 AM - 5:00 PM"}},"SAMASCOTT-ORCHARDS":{address:"5 Sunset Avenue, Kinderhook, NY 12106",phone:"(518) 758-7224",website:"https://www.samascott.com",hours:{monday:"9:00 AM - 6:00 PM",tuesday:"9:00 AM - 6:00 PM",wednesday:"9:00 AM - 6:00 PM",thursday:"9:00 AM - 6:00 PM",friday:"9:00 AM - 6:00 PM",saturday:"9:00 AM - 6:00 PM",sunday:"9:00 AM - 5:00 PM"}},"SCHOOL-GALLERY":{address:"25 Broad Street, Kinderhook, NY 12106",phone:"(518) 758-1620",website:"https://jackshainman.com/the_school",hours:{monday:"Closed",tuesday:"Closed",wednesday:"11:00 AM - 6:00 PM",thursday:"11:00 AM - 6:00 PM",friday:"11:00 AM - 6:00 PM",saturday:"11:00 AM - 6:00 PM",sunday:"Closed"}},ISOLA:{address:"16 Hudson Street, Kinderhook, NY 12106",phone:"(518) 567-7181",website:"https://isolawinebar.com",hours:{monday:"Closed",tuesday:"Closed",wednesday:"4:00 PM - 9:00 PM",thursday:"4:00 PM - 9:00 PM",friday:"4:00 PM - 10:00 PM",saturday:"12:00 PM - 10:00 PM",sunday:"12:00 PM - 8:00 PM"}},"VILLAGE-YOGA":{address:"6 Hudson Street, 2nd Floor, Kinderhook, NY 12106",phone:"(518) 610-8135",website:"https://villageyoga.co",hours:{monday:"9:00 AM - 7:00 PM",tuesday:"9:00 AM - 7:00 PM",wednesday:"9:00 AM - 7:00 PM",thursday:"9:00 AM - 7:00 PM",friday:"9:00 AM - 5:00 PM",saturday:"9:00 AM - 12:00 PM",sunday:"Closed"}},"WALSH-DENTISTRY":{address:"3 Hudson Street, 2nd Floor, Kinderhook, NY 12106",phone:"(518) 758-7071",website:"https://walshdentistry.com",hours:{monday:"8:00 AM - 5:00 PM",tuesday:"8:00 AM - 5:00 PM",wednesday:"8:00 AM - 5:00 PM",thursday:"8:00 AM - 5:00 PM",friday:"8:00 AM - 3:00 PM",saturday:"Closed",sunday:"Closed"}},"FEED-SEED":{address:"22 Hudson Street, Kinderhook, NY 12106",hours:{monday:"9:00 AM - 5:00 PM",tuesday:"9:00 AM - 5:00 PM",wednesday:"9:00 AM - 5:00 PM",thursday:"9:00 AM - 5:00 PM",friday:"9:00 AM - 5:00 PM",saturday:"9:00 AM - 4:00 PM",sunday:"Closed"}}};function rg(n){if(!n)return null;const e=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],t=new Date,r=e[t.getDay()],s=n[r];if(!s||s==="Closed")return!1;const l=s.match(/(\d+):(\d+)\s*(AM|PM)/gi);if(!l||l.length<2)return null;const c=t.getHours(),h=t.getMinutes(),d=c*60+h,m=s.match(/(\d+):(\d+)\s*(AM|PM)/i);if(m){let g=parseInt(m[1]);const y=parseInt(m[2]),x=m[3].toUpperCase();x==="PM"&&g!==12&&(g+=12),x==="AM"&&g===12&&(g=0);const E=g*60+y,k=s.match(/(\d+):(\d+)\s*(AM|PM)/gi);if(k&&k.length>=2){const S=k[k.length-1].match(/(\d+):(\d+)\s*(AM|PM)/i);if(S){let T=parseInt(S[1]);const P=parseInt(S[2]),M=S[3].toUpperCase();M==="PM"&&T!==12&&(T+=12),M==="AM"&&T===12&&(T=0);const N=T*60+P;return d>=E&&d<N}}}return null}function rz(n){if(!n)return"Hours not available";const r=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][new Date().getDay()];return n[r]||"Hours not available"}const iz=42.3944,sz=-73.7059,Rk={0:{icon:iw,description:"Clear sky",suggestion:"Perfect day to explore the village!"},1:{icon:iw,description:"Mainly clear",suggestion:"Great weather for a village stroll!"},2:{icon:oh,description:"Partly cloudy",suggestion:"Nice day to visit local shops!"},3:{icon:oh,description:"Overcast",suggestion:"Good day to cozy up at a cafe!"},45:{icon:oh,description:"Foggy",suggestion:"Mysterious village vibes today!"},48:{icon:oh,description:"Foggy",suggestion:"Grab a warm drink at a local cafe!"},51:{icon:Ui,description:"Light drizzle",suggestion:"Pop into a shop to stay dry!"},53:{icon:Ui,description:"Drizzle",suggestion:"Perfect excuse for a coffee break!"},55:{icon:Ui,description:"Heavy drizzle",suggestion:"Browse the bookstore while it passes!"},61:{icon:Ui,description:"Light rain",suggestion:"Duck into a local business!"},63:{icon:Ui,description:"Rain",suggestion:"Great day for indoor shopping!"},65:{icon:Ui,description:"Heavy rain",suggestion:"Stay cozy at a village restaurant!"},71:{icon:qa,description:"Light snow",suggestion:"Beautiful! Warm up with hot cocoa!"},73:{icon:qa,description:"Snow",suggestion:"Snow day! Explore the charming village!"},75:{icon:qa,description:"Heavy snow",suggestion:"Cozy up at a local spot!"},77:{icon:qa,description:"Snow grains",suggestion:"Winter wonderland vibes!"},80:{icon:Ui,description:"Light showers",suggestion:"Quick visits between showers!"},81:{icon:Ui,description:"Showers",suggestion:"Pop into shops along the way!"},82:{icon:Ui,description:"Heavy showers",suggestion:"Find shelter at a cozy cafe!"},85:{icon:qa,description:"Snow showers",suggestion:"Magical village views!"},86:{icon:qa,description:"Heavy snow showers",suggestion:"Warm drinks are calling!"},95:{icon:Mp,description:"Thunderstorm",suggestion:"Stay safe indoors!"},96:{icon:Mp,description:"Thunderstorm with hail",suggestion:"Seek shelter in a shop!"},99:{icon:Mp,description:"Severe thunderstorm",suggestion:"Stay safe inside!"}};function oz({compact:n=!1}){const[e,t]=C.useState(null),[r,s]=C.useState(!0),[l,c]=C.useState(null);if(C.useEffect(()=>{async function m(){var y,x,E,k;try{const S=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${iz}&longitude=${sz}&current=temperature_2m,relative_humidity_2m,weather_code,wind_speed_10m&daily=sunrise,sunset&temperature_unit=fahrenheit&wind_speed_unit=mph&timezone=America%2FNew_York`);if(!S.ok)throw new Error("Weather fetch failed");const T=await S.json(),P=(x=(y=T.daily)==null?void 0:y.sunrise)!=null&&x[0]?new Date(T.daily.sunrise[0]):null,M=(k=(E=T.daily)==null?void 0:E.sunset)!=null&&k[0]?new Date(T.daily.sunset[0]):null;t({temp:Math.round(T.current.temperature_2m),humidity:T.current.relative_humidity_2m,windSpeed:Math.round(T.current.wind_speed_10m),code:T.current.weather_code,sunrise:P,sunset:M}),s(!1)}catch(S){console.error("Weather error:",S),c("Could not load weather"),s(!1)}}m();const g=setInterval(m,1800*1e3);return()=>clearInterval(g)},[]),r)return o.jsx("div",{style:{background:"linear-gradient(135deg, #4a90d9 0%, #67b8e3 100%)",borderRadius:"12px",padding:n?"0.75rem 1rem":"1rem 1.25rem",color:"white",opacity:.7},children:"Loading weather..."});if(l||!e)return null;const h=Rk[e.code]||Rk[0],d=h.icon;return n?o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",background:"linear-gradient(135deg, #4a90d9 0%, #67b8e3 100%)",borderRadius:"10px",padding:"0.5rem 1rem",color:"white"},children:[o.jsx(d,{size:24}),o.jsxs("span",{style:{fontSize:"1.25rem",fontWeight:"700"},children:[e.temp,"F"]}),o.jsx("span",{style:{opacity:.9,fontSize:"0.85rem"},children:h.description})]}):o.jsxs("div",{style:{background:"linear-gradient(135deg, #4a90d9 0%, #67b8e3 100%)",borderRadius:"16px",padding:"1.25rem",color:"white"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.75rem"},children:[o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.8rem",opacity:.9,marginBottom:"0.25rem"},children:"Kinderhook, NY"}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsxs("span",{style:{fontSize:"2.5rem",fontWeight:"700",lineHeight:1},children:[e.temp,""]}),o.jsx("span",{style:{fontSize:"1rem"},children:"F"})]})]}),o.jsx(d,{size:56,strokeWidth:1.5})]}),o.jsx("div",{style:{fontSize:"1rem",fontWeight:"600",marginBottom:"0.5rem"},children:h.description}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem",fontSize:"0.8rem",opacity:.9,marginBottom:"1rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[o.jsx(m3,{size:14})," ",e.humidity,"%"]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[o.jsx(LV,{size:14})," ",e.windSpeed," mph"]}),e.sunrise&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[o.jsx(vV,{size:14})," ",e.sunrise.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})]}),e.sunset&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[o.jsx(bV,{size:14})," ",e.sunset.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})]})]}),o.jsx("div",{style:{background:"rgba(255,255,255,0.2)",borderRadius:"8px",padding:"0.75rem",fontSize:"0.9rem",fontStyle:"italic"},children:h.suggestion})]})}function az(){const[n,e]=C.useState([]),[t,r]=C.useState(!0),[s,l]=C.useState("all"),[c,h]=C.useState(!1);C.useEffect(()=>{async function k(){const S=await Qr();e(S.filter(T=>T.isActive)),r(!1)}k()},[]);const d=n.map(k=>({...k,...nz[k.code]})),m=d.filter(k=>!(!k.address||s==="open"&&!rg(k.hours))),g=d.filter(k=>k.address&&rg(k.hours)),y=()=>{const S=new Date().toLocaleDateString("en-US",{weekday:"long"}),T=g.map(P=>P.name).join(", ");return`What's open in Kinderhook this ${S}? ${g.length} businesses are ready to serve you: ${T}. Show your OK Member card for bonus discounts! #Kinderbucks #ShopLocal`},x=async()=>{const k=y();if(navigator.share)try{await navigator.share({title:"What's Open in Kinderhook",text:k})}catch{}else navigator.clipboard.writeText(k),h(!0),setTimeout(()=>h(!1),2e3)},E=k=>{switch(k){case"food":return"#e67e22";case"retail":return"#3498db";case"services":return"#9b59b6";case"arts":return"#1abc9c";default:return"var(--kb-gray-500)"}};return o.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[o.jsx(Wn,{}),o.jsxs("main",{style:{flex:1,background:"var(--kb-cream)"},children:[o.jsx("section",{style:{background:"linear-gradient(135deg, var(--kb-navy) 0%, var(--kb-navy-light) 100%)",padding:"2rem 1rem",color:"white",textAlign:"center"},children:o.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[o.jsx("div",{className:"badge badge-gold",style:{marginBottom:"0.75rem"},children:"Village Directory"}),o.jsx("h1",{style:{marginBottom:"0.5rem"},children:"Explore Kinderhook"}),o.jsx("p",{style:{opacity:.8,maxWidth:"500px",margin:"0 auto"},children:"Find participating businesses, check hours, and earn rewards"})]})}),o.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto",padding:"2rem 1rem"},children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[o.jsx(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:o.jsx(oz,{})}),o.jsx(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card",style:{background:"linear-gradient(135deg, var(--kb-green) 0%, #1e8449 100%)",color:"white"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"1rem"},children:[o.jsxs("div",{children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[o.jsx(vr,{size:20}),o.jsx("span",{style:{fontWeight:"600"},children:"Open Right Now"})]}),o.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700"},children:[g.length," Businesses"]}),o.jsx("div",{style:{opacity:.9,fontSize:"0.9rem"},children:"Show your OK card for bonus discounts!"})]}),o.jsxs("button",{onClick:x,className:"btn",style:{background:"rgba(255,255,255,0.2)",color:"white",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c?o.jsx(Un,{size:18}):o.jsx(iV,{size:18}),c?"Copied!":"Share"]})]})})]}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem"},children:[o.jsxs("button",{onClick:()=>l("all"),className:"btn",style:{padding:"0.6rem 1.25rem",fontSize:"0.9rem",background:s==="all"?"var(--kb-navy)":"white",color:s==="all"?"white":"var(--kb-gray-600)",border:"1px solid var(--kb-gray-200)"},children:["All (",d.filter(k=>k.address).length,")"]}),o.jsxs("button",{onClick:()=>l("open"),className:"btn",style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.6rem 1.25rem",fontSize:"0.9rem",background:s==="open"?"var(--kb-green)":"white",color:s==="open"?"white":"var(--kb-gray-600)",border:"1px solid var(--kb-gray-200)"},children:[o.jsx(vr,{size:16}),"Open Now (",g.length,")"]})]}),o.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:s==="open"?"Open Now":"All Businesses"}),t?o.jsx("div",{className:"card",style:{padding:"4rem",textAlign:"center",color:"var(--kb-gray-500)"},children:"Loading businesses..."}):o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"1rem"},children:m.map((k,S)=>{const T=rg(k.hours),P=rz(k.hours);return o.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:S*.05},className:"card",style:{padding:"1.25rem",overflow:"hidden"},children:[k.photoUrl&&o.jsx("div",{style:{margin:"-1.25rem -1.25rem 1rem -1.25rem"},children:o.jsx("img",{src:k.photoUrl,alt:k.name,style:{width:"100%",height:"120px",objectFit:"cover"}})}),o.jsxs("div",{style:{marginBottom:"0.75rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.25rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx("span",{style:{display:"inline-block",width:"8px",height:"8px",borderRadius:"50%",background:T?"#27ae60":"#95a5a6"}}),o.jsx("span",{style:{fontSize:"0.7rem",fontWeight:"600",color:T?"#27ae60":"var(--kb-gray-500)"},children:T?"OPEN NOW":"CLOSED"})]}),o.jsx("span",{style:{fontSize:"0.7rem",padding:"0.15rem 0.5rem",borderRadius:"4px",background:`${E(k.category)}15`,color:E(k.category),fontWeight:"500",textTransform:"capitalize"},children:k.category})]}),o.jsx("h3",{style:{color:"var(--kb-navy)",fontSize:"1.1rem",marginBottom:"0.25rem"},children:k.name})]}),k.address&&o.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.5rem",fontSize:"0.85rem",color:"var(--kb-gray-600)",marginBottom:"0.5rem"},children:[o.jsx(kl,{size:14,style:{flexShrink:0,marginTop:"2px"}}),o.jsx("span",{children:k.address})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem",color:"var(--kb-gray-600)",marginBottom:"0.5rem"},children:[o.jsx(vr,{size:14}),"Today: ",P]}),k.phone&&o.jsxs("a",{href:`tel:${k.phone}`,style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem",color:"var(--kb-gray-600)",textDecoration:"none",marginBottom:"0.75rem"},children:[o.jsx(K3,{size:14}),k.phone]}),k.website&&o.jsxs("a",{href:k.website,target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem",color:"var(--kb-gold-dark)",textDecoration:"none",marginBottom:"0.75rem"},children:[o.jsx(g3,{size:14}),"Visit Website"]}),k.address&&o.jsxs("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(k.address)}`,target:"_blank",rel:"noopener noreferrer",className:"btn btn-gold",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",width:"100%",fontSize:"0.85rem",padding:"0.5rem"},children:[o.jsx(z3,{size:14})," Get Directions"]})]},k.code)})}),m.length===0&&!t&&o.jsxs("div",{className:"card",style:{padding:"3rem",textAlign:"center",color:"var(--kb-gray-500)"},children:[o.jsx(Lt,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),o.jsx("p",{children:s==="open"?"No businesses are open right now":"No businesses found"}),s==="open"&&o.jsx("button",{onClick:()=>l("all"),className:"btn btn-secondary",style:{marginTop:"1rem"},children:"View All Businesses"})]})]})]}),o.jsx($n,{})]})}function lz(){return o.jsx(bM,{children:o.jsx(Cj,{children:o.jsxs(ij,{children:[o.jsx(gt,{path:"/",element:o.jsx(k9,{})}),o.jsx(gt,{path:"/demo",element:o.jsx(C9,{})}),o.jsx(gt,{path:"/about",element:o.jsx(U9,{})}),o.jsx(gt,{path:"/benefits",element:o.jsx($9,{})}),o.jsx(gt,{path:"/businesses",element:o.jsx(eB,{})}),o.jsx(gt,{path:"/map",element:o.jsx(az,{})}),o.jsx(gt,{path:"/exchange",element:o.jsx(rB,{})}),o.jsx(gt,{path:"/login",element:o.jsx(oB,{})}),o.jsx(gt,{path:"/account",element:o.jsx(iB,{})}),o.jsx(gt,{path:"/profile",element:o.jsx(sB,{})}),o.jsx(gt,{path:"/card",element:o.jsx(vB,{})}),o.jsx(gt,{path:"/scan/:serial",element:o.jsx(EB,{})}),o.jsx(gt,{path:"/checkin/:businessCode",element:o.jsx(jB,{})}),o.jsx(gt,{path:"/business/dashboard",element:o.jsx(Mr,{allowedRoles:["business","admin"],children:o.jsx(BB,{})})}),o.jsx(gt,{path:"/business/accept-payment",element:o.jsx(Mr,{allowedRoles:["business","admin"],children:o.jsx(tz,{})})}),o.jsx(gt,{path:"/admin/dashboard",element:o.jsx(Mr,{allowedRoles:["admin"],children:o.jsx(zB,{})})}),o.jsx(gt,{path:"/admin/exchanges",element:o.jsx(Mr,{allowedRoles:["admin"],children:o.jsx(YB,{})})}),o.jsx(gt,{path:"/admin/members",element:o.jsx(Mr,{allowedRoles:["admin"],children:o.jsx(XB,{})})}),o.jsx(gt,{path:"/admin/generate",element:o.jsx(Mr,{allowedRoles:["admin"],children:o.jsx(FB,{})})}),o.jsx(gt,{path:"/admin/issue",element:o.jsx(Mr,{allowedRoles:["admin"],children:o.jsx(UB,{})})}),o.jsx(gt,{path:"/admin/businesses",element:o.jsx(Mr,{allowedRoles:["admin"],children:o.jsx(GB,{})})}),o.jsx(gt,{path:"/admin/businesses/:businessCode",element:o.jsx(Mr,{allowedRoles:["admin"],children:o.jsx(ZB,{})})}),o.jsx(gt,{path:"/admin/users",element:o.jsx(Mr,{allowedRoles:["admin"],children:o.jsx(JB,{})})}),o.jsx(gt,{path:"/admin/redemptions",element:o.jsx(Mr,{allowedRoles:["admin"],children:o.jsx(ez,{})})})]})})})}oC.createRoot(document.getElementById("root")).render(o.jsx(C.StrictMode,{children:o.jsx(lz,{})}));
