(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function SI(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var qm={exports:{}},vc={},Gm={exports:{}},Pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z1;function EI(){if(z1)return Pe;z1=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function x(H){return H===null||typeof H!="object"?null:(H=y&&H[y]||H["@@iterator"],typeof H=="function"?H:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,T={};function E(H,ee,Ce){this.props=H,this.context=ee,this.refs=T,this.updater=Ce||S}E.prototype.isReactComponent={},E.prototype.setState=function(H,ee){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,ee,"setState")},E.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function N(){}N.prototype=E.prototype;function D(H,ee,Ce){this.props=H,this.context=ee,this.refs=T,this.updater=Ce||S}var P=D.prototype=new N;P.constructor=D,k(P,E.prototype),P.isPureReactComponent=!0;var G=Array.isArray,F=Object.prototype.hasOwnProperty,$={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function C(H,ee,Ce){var Ae,De={},Ve=null,Ge=null;if(ee!=null)for(Ae in ee.ref!==void 0&&(Ge=ee.ref),ee.key!==void 0&&(Ve=""+ee.key),ee)F.call(ee,Ae)&&!A.hasOwnProperty(Ae)&&(De[Ae]=ee[Ae]);var Ue=arguments.length-2;if(Ue===1)De.children=Ce;else if(1<Ue){for(var Xe=Array(Ue),un=0;un<Ue;un++)Xe[un]=arguments[un+2];De.children=Xe}if(H&&H.defaultProps)for(Ae in Ue=H.defaultProps,Ue)De[Ae]===void 0&&(De[Ae]=Ue[Ae]);return{$$typeof:n,type:H,key:Ve,ref:Ge,props:De,_owner:$.current}}function M(H,ee){return{$$typeof:n,type:H.type,key:ee,ref:H.ref,props:H.props,_owner:H._owner}}function L(H){return typeof H=="object"&&H!==null&&H.$$typeof===n}function B(H){var ee={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(Ce){return ee[Ce]})}var W=/\/+/g;function O(H,ee){return typeof H=="object"&&H!==null&&H.key!=null?B(""+H.key):ee.toString(36)}function Me(H,ee,Ce,Ae,De){var Ve=typeof H;(Ve==="undefined"||Ve==="boolean")&&(H=null);var Ge=!1;if(H===null)Ge=!0;else switch(Ve){case"string":case"number":Ge=!0;break;case"object":switch(H.$$typeof){case n:case e:Ge=!0}}if(Ge)return Ge=H,De=De(Ge),H=Ae===""?"."+O(Ge,0):Ae,G(De)?(Ce="",H!=null&&(Ce=H.replace(W,"$&/")+"/"),Me(De,ee,Ce,"",function(un){return un})):De!=null&&(L(De)&&(De=M(De,Ce+(!De.key||Ge&&Ge.key===De.key?"":(""+De.key).replace(W,"$&/")+"/")+H)),ee.push(De)),1;if(Ge=0,Ae=Ae===""?".":Ae+":",G(H))for(var Ue=0;Ue<H.length;Ue++){Ve=H[Ue];var Xe=Ae+O(Ve,Ue);Ge+=Me(Ve,ee,Ce,Xe,De)}else if(Xe=x(H),typeof Xe=="function")for(H=Xe.call(H),Ue=0;!(Ve=H.next()).done;)Ve=Ve.value,Xe=Ae+O(Ve,Ue++),Ge+=Me(Ve,ee,Ce,Xe,De);else if(Ve==="object")throw ee=String(H),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.");return Ge}function He(H,ee,Ce){if(H==null)return H;var Ae=[],De=0;return Me(H,Ae,"","",function(Ve){return ee.call(Ce,Ve,De++)}),Ae}function kt(H){if(H._status===-1){var ee=H._result;ee=ee(),ee.then(function(Ce){(H._status===0||H._status===-1)&&(H._status=1,H._result=Ce)},function(Ce){(H._status===0||H._status===-1)&&(H._status=2,H._result=Ce)}),H._status===-1&&(H._status=0,H._result=ee)}if(H._status===1)return H._result.default;throw H._result}var Ee={current:null},ie={transition:null},pe={ReactCurrentDispatcher:Ee,ReactCurrentBatchConfig:ie,ReactCurrentOwner:$};function le(){throw Error("act(...) is not supported in production builds of React.")}return Pe.Children={map:He,forEach:function(H,ee,Ce){He(H,function(){ee.apply(this,arguments)},Ce)},count:function(H){var ee=0;return He(H,function(){ee++}),ee},toArray:function(H){return He(H,function(ee){return ee})||[]},only:function(H){if(!L(H))throw Error("React.Children.only expected to receive a single React element child.");return H}},Pe.Component=E,Pe.Fragment=t,Pe.Profiler=s,Pe.PureComponent=D,Pe.StrictMode=r,Pe.Suspense=d,Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pe,Pe.act=le,Pe.cloneElement=function(H,ee,Ce){if(H==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+H+".");var Ae=k({},H.props),De=H.key,Ve=H.ref,Ge=H._owner;if(ee!=null){if(ee.ref!==void 0&&(Ve=ee.ref,Ge=$.current),ee.key!==void 0&&(De=""+ee.key),H.type&&H.type.defaultProps)var Ue=H.type.defaultProps;for(Xe in ee)F.call(ee,Xe)&&!A.hasOwnProperty(Xe)&&(Ae[Xe]=ee[Xe]===void 0&&Ue!==void 0?Ue[Xe]:ee[Xe])}var Xe=arguments.length-2;if(Xe===1)Ae.children=Ce;else if(1<Xe){Ue=Array(Xe);for(var un=0;un<Xe;un++)Ue[un]=arguments[un+2];Ae.children=Ue}return{$$typeof:n,type:H.type,key:De,ref:Ve,props:Ae,_owner:Ge}},Pe.createContext=function(H){return H={$$typeof:c,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},H.Provider={$$typeof:a,_context:H},H.Consumer=H},Pe.createElement=C,Pe.createFactory=function(H){var ee=C.bind(null,H);return ee.type=H,ee},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(H){return{$$typeof:f,render:H}},Pe.isValidElement=L,Pe.lazy=function(H){return{$$typeof:g,_payload:{_status:-1,_result:H},_init:kt}},Pe.memo=function(H,ee){return{$$typeof:m,type:H,compare:ee===void 0?null:ee}},Pe.startTransition=function(H){var ee=ie.transition;ie.transition={};try{H()}finally{ie.transition=ee}},Pe.unstable_act=le,Pe.useCallback=function(H,ee){return Ee.current.useCallback(H,ee)},Pe.useContext=function(H){return Ee.current.useContext(H)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(H){return Ee.current.useDeferredValue(H)},Pe.useEffect=function(H,ee){return Ee.current.useEffect(H,ee)},Pe.useId=function(){return Ee.current.useId()},Pe.useImperativeHandle=function(H,ee,Ce){return Ee.current.useImperativeHandle(H,ee,Ce)},Pe.useInsertionEffect=function(H,ee){return Ee.current.useInsertionEffect(H,ee)},Pe.useLayoutEffect=function(H,ee){return Ee.current.useLayoutEffect(H,ee)},Pe.useMemo=function(H,ee){return Ee.current.useMemo(H,ee)},Pe.useReducer=function(H,ee,Ce){return Ee.current.useReducer(H,ee,Ce)},Pe.useRef=function(H){return Ee.current.useRef(H)},Pe.useState=function(H){return Ee.current.useState(H)},Pe.useSyncExternalStore=function(H,ee,Ce){return Ee.current.useSyncExternalStore(H,ee,Ce)},Pe.useTransition=function(){return Ee.current.useTransition()},Pe.version="18.3.1",Pe}var F1;function Og(){return F1||(F1=1,Gm.exports=EI()),Gm.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U1;function TI(){if(U1)return vc;U1=1;var n=Og(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(f,d,m){var g,y={},x=null,S=null;m!==void 0&&(x=""+m),d.key!==void 0&&(x=""+d.key),d.ref!==void 0&&(S=d.ref);for(g in d)r.call(d,g)&&!a.hasOwnProperty(g)&&(y[g]=d[g]);if(f&&f.defaultProps)for(g in d=f.defaultProps,d)y[g]===void 0&&(y[g]=d[g]);return{$$typeof:e,type:f,key:x,ref:S,props:y,_owner:s.current}}return vc.Fragment=t,vc.jsx=c,vc.jsxs=c,vc}var $1;function II(){return $1||($1=1,qm.exports=TI()),qm.exports}var l=II(),R=Og();const Nt=SI(R);var zd={},Qm={exports:{}},wn={},Ym={exports:{}},Xm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W1;function CI(){return W1||(W1=1,(function(n){function e(ie,pe){var le=ie.length;ie.push(pe);e:for(;0<le;){var H=le-1>>>1,ee=ie[H];if(0<s(ee,pe))ie[H]=pe,ie[le]=ee,le=H;else break e}}function t(ie){return ie.length===0?null:ie[0]}function r(ie){if(ie.length===0)return null;var pe=ie[0],le=ie.pop();if(le!==pe){ie[0]=le;e:for(var H=0,ee=ie.length,Ce=ee>>>1;H<Ce;){var Ae=2*(H+1)-1,De=ie[Ae],Ve=Ae+1,Ge=ie[Ve];if(0>s(De,le))Ve<ee&&0>s(Ge,De)?(ie[H]=Ge,ie[Ve]=le,H=Ve):(ie[H]=De,ie[Ae]=le,H=Ae);else if(Ve<ee&&0>s(Ge,le))ie[H]=Ge,ie[Ve]=le,H=Ve;else break e}}return pe}function s(ie,pe){var le=ie.sortIndex-pe.sortIndex;return le!==0?le:ie.id-pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var c=Date,f=c.now();n.unstable_now=function(){return c.now()-f}}var d=[],m=[],g=1,y=null,x=3,S=!1,k=!1,T=!1,E=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(ie){for(var pe=t(m);pe!==null;){if(pe.callback===null)r(m);else if(pe.startTime<=ie)r(m),pe.sortIndex=pe.expirationTime,e(d,pe);else break;pe=t(m)}}function G(ie){if(T=!1,P(ie),!k)if(t(d)!==null)k=!0,kt(F);else{var pe=t(m);pe!==null&&Ee(G,pe.startTime-ie)}}function F(ie,pe){k=!1,T&&(T=!1,N(C),C=-1),S=!0;var le=x;try{for(P(pe),y=t(d);y!==null&&(!(y.expirationTime>pe)||ie&&!B());){var H=y.callback;if(typeof H=="function"){y.callback=null,x=y.priorityLevel;var ee=H(y.expirationTime<=pe);pe=n.unstable_now(),typeof ee=="function"?y.callback=ee:y===t(d)&&r(d),P(pe)}else r(d);y=t(d)}if(y!==null)var Ce=!0;else{var Ae=t(m);Ae!==null&&Ee(G,Ae.startTime-pe),Ce=!1}return Ce}finally{y=null,x=le,S=!1}}var $=!1,A=null,C=-1,M=5,L=-1;function B(){return!(n.unstable_now()-L<M)}function W(){if(A!==null){var ie=n.unstable_now();L=ie;var pe=!0;try{pe=A(!0,ie)}finally{pe?O():($=!1,A=null)}}else $=!1}var O;if(typeof D=="function")O=function(){D(W)};else if(typeof MessageChannel<"u"){var Me=new MessageChannel,He=Me.port2;Me.port1.onmessage=W,O=function(){He.postMessage(null)}}else O=function(){E(W,0)};function kt(ie){A=ie,$||($=!0,O())}function Ee(ie,pe){C=E(function(){ie(n.unstable_now())},pe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ie){ie.callback=null},n.unstable_continueExecution=function(){k||S||(k=!0,kt(F))},n.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<ie?Math.floor(1e3/ie):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(ie){switch(x){case 1:case 2:case 3:var pe=3;break;default:pe=x}var le=x;x=pe;try{return ie()}finally{x=le}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ie,pe){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var le=x;x=ie;try{return pe()}finally{x=le}},n.unstable_scheduleCallback=function(ie,pe,le){var H=n.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?H+le:H):le=H,ie){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=le+ee,ie={id:g++,callback:pe,priorityLevel:ie,startTime:le,expirationTime:ee,sortIndex:-1},le>H?(ie.sortIndex=le,e(m,ie),t(d)===null&&ie===t(m)&&(T?(N(C),C=-1):T=!0,Ee(G,le-H))):(ie.sortIndex=ee,e(d,ie),k||S||(k=!0,kt(F))),ie},n.unstable_shouldYield=B,n.unstable_wrapCallback=function(ie){var pe=x;return function(){var le=x;x=pe;try{return ie.apply(this,arguments)}finally{x=le}}}})(Xm)),Xm}var H1;function AI(){return H1||(H1=1,Ym.exports=CI()),Ym.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K1;function RI(){if(K1)return wn;K1=1;var n=Og(),e=AI();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(i,o){c(i,o),c(i+"Capture",o)}function c(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},y={};function x(i){return d.call(y,i)?!0:d.call(g,i)?!1:m.test(i)?y[i]=!0:(g[i]=!0,!1)}function S(i,o,u,p){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return p?!1:u!==null?!u.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function k(i,o,u,p){if(o===null||typeof o>"u"||S(i,o,u,p))return!0;if(p)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function T(i,o,u,p,v,w,I){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=p,this.attributeNamespace=v,this.mustUseProperty=u,this.propertyName=i,this.type=o,this.sanitizeURL=w,this.removeEmptyString=I}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){E[i]=new T(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];E[o]=new T(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){E[i]=new T(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){E[i]=new T(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){E[i]=new T(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){E[i]=new T(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){E[i]=new T(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){E[i]=new T(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){E[i]=new T(i,5,!1,i.toLowerCase(),null,!1,!1)});var N=/[\-:]([a-z])/g;function D(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(N,D);E[o]=new T(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(N,D);E[o]=new T(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(N,D);E[o]=new T(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){E[i]=new T(i,1,!1,i.toLowerCase(),null,!1,!1)}),E.xlinkHref=new T("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){E[i]=new T(i,1,!1,i.toLowerCase(),null,!0,!0)});function P(i,o,u,p){var v=E.hasOwnProperty(o)?E[o]:null;(v!==null?v.type!==0:p||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(k(o,u,v,p)&&(u=null),p||v===null?x(o)&&(u===null?i.removeAttribute(o):i.setAttribute(o,""+u)):v.mustUseProperty?i[v.propertyName]=u===null?v.type===3?!1:"":u:(o=v.attributeName,p=v.attributeNamespace,u===null?i.removeAttribute(o):(v=v.type,u=v===3||v===4&&u===!0?"":""+u,p?i.setAttributeNS(p,o,u):i.setAttribute(o,u))))}var G=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,F=Symbol.for("react.element"),$=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),B=Symbol.for("react.context"),W=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),Me=Symbol.for("react.suspense_list"),He=Symbol.for("react.memo"),kt=Symbol.for("react.lazy"),Ee=Symbol.for("react.offscreen"),ie=Symbol.iterator;function pe(i){return i===null||typeof i!="object"?null:(i=ie&&i[ie]||i["@@iterator"],typeof i=="function"?i:null)}var le=Object.assign,H;function ee(i){if(H===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);H=o&&o[1]||""}return`
`+H+i}var Ce=!1;function Ae(i,o){if(!i||Ce)return"";Ce=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(Y){var p=Y}Reflect.construct(i,[],o)}else{try{o.call()}catch(Y){p=Y}i.call(o.prototype)}else{try{throw Error()}catch(Y){p=Y}i()}}catch(Y){if(Y&&p&&typeof Y.stack=="string"){for(var v=Y.stack.split(`
`),w=p.stack.split(`
`),I=v.length-1,V=w.length-1;1<=I&&0<=V&&v[I]!==w[V];)V--;for(;1<=I&&0<=V;I--,V--)if(v[I]!==w[V]){if(I!==1||V!==1)do if(I--,V--,0>V||v[I]!==w[V]){var z=`
`+v[I].replace(" at new "," at ");return i.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",i.displayName)),z}while(1<=I&&0<=V);break}}}finally{Ce=!1,Error.prepareStackTrace=u}return(i=i?i.displayName||i.name:"")?ee(i):""}function De(i){switch(i.tag){case 5:return ee(i.type);case 16:return ee("Lazy");case 13:return ee("Suspense");case 19:return ee("SuspenseList");case 0:case 2:case 15:return i=Ae(i.type,!1),i;case 11:return i=Ae(i.type.render,!1),i;case 1:return i=Ae(i.type,!0),i;default:return""}}function Ve(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case A:return"Fragment";case $:return"Portal";case M:return"Profiler";case C:return"StrictMode";case O:return"Suspense";case Me:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case B:return(i.displayName||"Context")+".Consumer";case L:return(i._context.displayName||"Context")+".Provider";case W:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case He:return o=i.displayName||null,o!==null?o:Ve(i.type)||"Memo";case kt:o=i._payload,i=i._init;try{return Ve(i(o))}catch{}}return null}function Ge(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ve(o);case 8:return o===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Ue(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Xe(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function un(i){var o=Xe(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),p=""+i[o];if(!i.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var v=u.get,w=u.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return v.call(this)},set:function(I){p=""+I,w.call(this,I)}}),Object.defineProperty(i,o,{enumerable:u.enumerable}),{getValue:function(){return p},setValue:function(I){p=""+I},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Fo(i){i._valueTracker||(i._valueTracker=un(i))}function Sl(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var u=o.getValue(),p="";return i&&(p=Xe(i)?i.checked?"true":"false":i.value),i=p,i!==u?(o.setValue(i),!0):!1}function Li(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Uo(i,o){var u=o.checked;return le({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??i._wrapperState.initialChecked})}function Eu(i,o){var u=o.defaultValue==null?"":o.defaultValue,p=o.checked!=null?o.checked:o.defaultChecked;u=Ue(o.value!=null?o.value:u),i._wrapperState={initialChecked:p,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function $o(i,o){o=o.checked,o!=null&&P(i,"checked",o,!1)}function $s(i,o){$o(i,o);var u=Ue(o.value),p=o.type;if(u!=null)p==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+u):i.value!==""+u&&(i.value=""+u);else if(p==="submit"||p==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?bt(i,o.type,u):o.hasOwnProperty("defaultValue")&&bt(i,o.type,Ue(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function El(i,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var p=o.type;if(!(p!=="submit"&&p!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,u||o===i.value||(i.value=o),i.defaultValue=o}u=i.name,u!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,u!==""&&(i.name=u)}function bt(i,o,u){(o!=="number"||Li(i.ownerDocument)!==i)&&(u==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+u&&(i.defaultValue=""+u))}var yt=Array.isArray;function nr(i,o,u,p){if(i=i.options,o){o={};for(var v=0;v<u.length;v++)o["$"+u[v]]=!0;for(u=0;u<i.length;u++)v=o.hasOwnProperty("$"+i[u].value),i[u].selected!==v&&(i[u].selected=v),v&&p&&(i[u].defaultSelected=!0)}else{for(u=""+Ue(u),o=null,v=0;v<i.length;v++){if(i[v].value===u){i[v].selected=!0,p&&(i[v].defaultSelected=!0);return}o!==null||i[v].disabled||(o=i[v])}o!==null&&(o.selected=!0)}}function Tl(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return le({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Il(i,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(t(92));if(yt(u)){if(1<u.length)throw Error(t(93));u=u[0]}o=u}o==null&&(o=""),u=o}i._wrapperState={initialValue:Ue(u)}}function Tu(i,o){var u=Ue(o.value),p=Ue(o.defaultValue);u!=null&&(u=""+u,u!==i.value&&(i.value=u),o.defaultValue==null&&i.defaultValue!==u&&(i.defaultValue=u)),p!=null&&(i.defaultValue=""+p)}function Oi(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function Cl(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wo(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?Cl(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Bi,Iu=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,p,v){MSApp.execUnsafeLocalFunction(function(){return i(o,u,p,v)})}:i})(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(Bi=Bi||document.createElement("div"),Bi.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Bi.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function Ws(i,o){if(o){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=o;return}}i.textContent=o}var zi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Cu=["Webkit","ms","Moz","O"];Object.keys(zi).forEach(function(i){Cu.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),zi[o]=zi[i]})});function Fi(i,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||zi.hasOwnProperty(i)&&zi[i]?(""+o).trim():o+"px"}function Ho(i,o){i=i.style;for(var u in o)if(o.hasOwnProperty(u)){var p=u.indexOf("--")===0,v=Fi(u,o[u],p);u==="float"&&(u="cssFloat"),p?i.setProperty(u,v):i[u]=v}}var Al=le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rr(i,o){if(o){if(Al[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function Ko(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ui=null;function qo(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ei=null,ti=null,ft=null;function Rl(i){if(i=rc(i)){if(typeof ei!="function")throw Error(t(280));var o=i.stateNode;o&&(o=td(o),ei(i.stateNode,i.type,o))}}function $i(i){ti?ft?ft.push(i):ft=[i]:ti=i}function Wi(){if(ti){var i=ti,o=ft;if(ft=ti=null,Rl(i),o)for(i=0;i<o.length;i++)Rl(o[i])}}function Au(i,o){return i(o)}function Ru(){}var br=!1;function ju(i,o,u){if(br)return i(o,u);br=!0;try{return Au(i,o,u)}finally{br=!1,(ti!==null||ft!==null)&&(Ru(),Wi())}}function Hs(i,o){var u=i.stateNode;if(u===null)return null;var p=td(u);if(p===null)return null;u=p[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(i=i.type,p=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!p;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(t(231,o,typeof u));return u}var Hi=!1;if(f)try{var Ki={};Object.defineProperty(Ki,"passive",{get:function(){Hi=!0}}),window.addEventListener("test",Ki,Ki),window.removeEventListener("test",Ki,Ki)}catch{Hi=!1}function Pu(i,o,u,p,v,w,I,V,z){var Y=Array.prototype.slice.call(arguments,3);try{o.apply(u,Y)}catch(ne){this.onError(ne)}}var ni=!1,Sr=null,Go=!1,zn=null,Mu={onError:function(i){ni=!0,Sr=i}};function Nu(i,o,u,p,v,w,I,V,z){ni=!1,Sr=null,Pu.apply(Mu,arguments)}function jl(i,o,u,p,v,w,I,V,z){if(Nu.apply(this,arguments),ni){if(ni){var Y=Sr;ni=!1,Sr=null}else throw Error(t(198));Go||(Go=!0,zn=Y)}}function ir(i){var o=i,u=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(u=o.return),i=o.return;while(i)}return o.tag===3?u:null}function Pl(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function Du(i){if(ir(i)!==i)throw Error(t(188))}function Vu(i){var o=i.alternate;if(!o){if(o=ir(i),o===null)throw Error(t(188));return o!==i?null:i}for(var u=i,p=o;;){var v=u.return;if(v===null)break;var w=v.alternate;if(w===null){if(p=v.return,p!==null){u=p;continue}break}if(v.child===w.child){for(w=v.child;w;){if(w===u)return Du(v),i;if(w===p)return Du(v),o;w=w.sibling}throw Error(t(188))}if(u.return!==p.return)u=v,p=w;else{for(var I=!1,V=v.child;V;){if(V===u){I=!0,u=v,p=w;break}if(V===p){I=!0,p=v,u=w;break}V=V.sibling}if(!I){for(V=w.child;V;){if(V===u){I=!0,u=w,p=v;break}if(V===p){I=!0,p=w,u=v;break}V=V.sibling}if(!I)throw Error(t(189))}}if(u.alternate!==p)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?i:o}function Lu(i){return i=Vu(i),i!==null?Ks(i):null}function Ks(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=Ks(i);if(o!==null)return o;i=i.sibling}return null}var Ml=e.unstable_scheduleCallback,Qo=e.unstable_cancelCallback,qs=e.unstable_shouldYield,ri=e.unstable_requestPaint,tt=e.unstable_now,Sf=e.unstable_getCurrentPriorityLevel,Yo=e.unstable_ImmediatePriority,Nl=e.unstable_UserBlockingPriority,Gs=e.unstable_NormalPriority,Dl=e.unstable_LowPriority,Xo=e.unstable_IdlePriority,Qs=null,Tn=null;function Ou(i){if(Tn&&typeof Tn.onCommitFiberRoot=="function")try{Tn.onCommitFiberRoot(Qs,i,void 0,(i.current.flags&128)===128)}catch{}}var In=Math.clz32?Math.clz32:Ys,Er=Math.log,Fn=Math.LN2;function Ys(i){return i>>>=0,i===0?32:31-(Er(i)/Fn|0)|0}var Tr=64,qi=4194304;function Ke(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function ii(i,o){var u=i.pendingLanes;if(u===0)return 0;var p=0,v=i.suspendedLanes,w=i.pingedLanes,I=u&268435455;if(I!==0){var V=I&~v;V!==0?p=Ke(V):(w&=I,w!==0&&(p=Ke(w)))}else I=u&~v,I!==0?p=Ke(I):w!==0&&(p=Ke(w));if(p===0)return 0;if(o!==0&&o!==p&&(o&v)===0&&(v=p&-p,w=o&-o,v>=w||v===16&&(w&4194240)!==0))return o;if((p&4)!==0&&(p|=u&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=p;0<o;)u=31-In(o),v=1<<u,p|=i[u],o&=~v;return p}function Xs(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Js(i,o){for(var u=i.suspendedLanes,p=i.pingedLanes,v=i.expirationTimes,w=i.pendingLanes;0<w;){var I=31-In(w),V=1<<I,z=v[I];z===-1?((V&u)===0||(V&p)!==0)&&(v[I]=Xs(V,o)):z<=o&&(i.expiredLanes|=V),w&=~V}}function Vl(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Ll(){var i=Tr;return Tr<<=1,(Tr&4194240)===0&&(Tr=64),i}function Ol(i){for(var o=[],u=0;31>u;u++)o.push(i);return o}function Zs(i,o,u){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-In(o),i[o]=u}function Ef(i,o){var u=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var p=i.eventTimes;for(i=i.expirationTimes;0<u;){var v=31-In(u),w=1<<v;o[v]=0,p[v]=-1,i[v]=-1,u&=~w}}function Bl(i,o){var u=i.entangledLanes|=o;for(i=i.entanglements;u;){var p=31-In(u),v=1<<p;v&o|i[p]&o&&(i[p]|=o),u&=~v}}var ze=0;function Ir(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var zl,Jo,Fl,Ul,$l,Cr=!1,Zo=[],Ar=null,Rr=null,$t=null,eo=new Map,si=new Map,Cn=[],Bu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Gi(i,o){switch(i){case"focusin":case"focusout":Ar=null;break;case"dragenter":case"dragleave":Rr=null;break;case"mouseover":case"mouseout":$t=null;break;case"pointerover":case"pointerout":eo.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":si.delete(o.pointerId)}}function sr(i,o,u,p,v,w){return i===null||i.nativeEvent!==w?(i={blockedOn:o,domEventName:u,eventSystemFlags:p,nativeEvent:w,targetContainers:[v]},o!==null&&(o=rc(o),o!==null&&Jo(o)),i):(i.eventSystemFlags|=p,o=i.targetContainers,v!==null&&o.indexOf(v)===-1&&o.push(v),i)}function zu(i,o,u,p,v){switch(o){case"focusin":return Ar=sr(Ar,i,o,u,p,v),!0;case"dragenter":return Rr=sr(Rr,i,o,u,p,v),!0;case"mouseover":return $t=sr($t,i,o,u,p,v),!0;case"pointerover":var w=v.pointerId;return eo.set(w,sr(eo.get(w)||null,i,o,u,p,v)),!0;case"gotpointercapture":return w=v.pointerId,si.set(w,sr(si.get(w)||null,i,o,u,p,v)),!0}return!1}function ea(i){var o=io(i.target);if(o!==null){var u=ir(o);if(u!==null){if(o=u.tag,o===13){if(o=Pl(u),o!==null){i.blockedOn=o,$l(i.priority,function(){Fl(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Je(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var u=ta(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(u===null){u=i.nativeEvent;var p=new u.constructor(u.type,u);Ui=p,u.target.dispatchEvent(p),Ui=null}else return o=rc(u),o!==null&&Jo(o),i.blockedOn=u,!1;o.shift()}return!0}function Fu(i,o,u){Je(i)&&u.delete(o)}function Tf(){Cr=!1,Ar!==null&&Je(Ar)&&(Ar=null),Rr!==null&&Je(Rr)&&(Rr=null),$t!==null&&Je($t)&&($t=null),eo.forEach(Fu),si.forEach(Fu)}function Qi(i,o){i.blockedOn===o&&(i.blockedOn=null,Cr||(Cr=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Tf)))}function Yi(i){function o(v){return Qi(v,i)}if(0<Zo.length){Qi(Zo[0],i);for(var u=1;u<Zo.length;u++){var p=Zo[u];p.blockedOn===i&&(p.blockedOn=null)}}for(Ar!==null&&Qi(Ar,i),Rr!==null&&Qi(Rr,i),$t!==null&&Qi($t,i),eo.forEach(o),si.forEach(o),u=0;u<Cn.length;u++)p=Cn[u],p.blockedOn===i&&(p.blockedOn=null);for(;0<Cn.length&&(u=Cn[0],u.blockedOn===null);)ea(u),u.blockedOn===null&&Cn.shift()}var oi=G.ReactCurrentBatchConfig,ai=!0;function jr(i,o,u,p){var v=ze,w=oi.transition;oi.transition=null;try{ze=1,Wl(i,o,u,p)}finally{ze=v,oi.transition=w}}function Uu(i,o,u,p){var v=ze,w=oi.transition;oi.transition=null;try{ze=4,Wl(i,o,u,p)}finally{ze=v,oi.transition=w}}function Wl(i,o,u,p){if(ai){var v=ta(i,o,u,p);if(v===null)Lf(i,o,p,Pr,u),Gi(i,p);else if(zu(v,i,o,u,p))p.stopPropagation();else if(Gi(i,p),o&4&&-1<Bu.indexOf(i)){for(;v!==null;){var w=rc(v);if(w!==null&&zl(w),w=ta(i,o,u,p),w===null&&Lf(i,o,p,Pr,u),w===v)break;v=w}v!==null&&p.stopPropagation()}else Lf(i,o,p,null,u)}}var Pr=null;function ta(i,o,u,p){if(Pr=null,i=qo(p),i=io(i),i!==null)if(o=ir(i),o===null)i=null;else if(u=o.tag,u===13){if(i=Pl(o),i!==null)return i;i=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return Pr=i,null}function na(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Sf()){case Yo:return 1;case Nl:return 4;case Gs:case Dl:return 16;case Xo:return 536870912;default:return 16}default:return 16}}var An=null,ra=null,li=null;function $u(){if(li)return li;var i,o=ra,u=o.length,p,v="value"in An?An.value:An.textContent,w=v.length;for(i=0;i<u&&o[i]===v[i];i++);var I=u-i;for(p=1;p<=I&&o[u-p]===v[w-p];p++);return li=v.slice(i,1<p?1-p:void 0)}function to(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Mr(){return!0}function Hl(){return!1}function Jt(i){function o(u,p,v,w,I){this._reactName=u,this._targetInst=v,this.type=p,this.nativeEvent=w,this.target=I,this.currentTarget=null;for(var V in i)i.hasOwnProperty(V)&&(u=i[V],this[V]=u?u(w):w[V]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Mr:Hl,this.isPropagationStopped=Hl,this}return le(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Mr)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Mr)},persist:function(){},isPersistent:Mr}),o}var Nr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},no=Jt(Nr),Xi=le({},Nr,{view:0,detail:0}),ia=Jt(Xi),sa,oa,Rn,ro=le({},Xi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Re,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Rn&&(Rn&&i.type==="mousemove"?(sa=i.screenX-Rn.screenX,oa=i.screenY-Rn.screenY):oa=sa=0,Rn=i),sa)},movementY:function(i){return"movementY"in i?i.movementY:oa}}),Kl=Jt(ro),Wu=le({},ro,{dataTransfer:0}),Hu=Jt(Wu),aa=le({},Xi,{relatedTarget:0}),Wt=Jt(aa),Ku=le({},Nr,{animationName:0,elapsedTime:0,pseudoElement:0}),qu=Jt(Ku),Ji=le({},Nr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),h=Jt(Ji),_=le({},Nr,{data:0}),b=Jt(_),j={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},q={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},X={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oe(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=X[i])?!!o[i]:!1}function Re(){return oe}var vt=le({},Xi,{key:function(i){if(i.key){var o=j[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=to(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?q[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Re,charCode:function(i){return i.type==="keypress"?to(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?to(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Ye=Jt(vt),St=le({},ro,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jn=Jt(St),ci=le({},Xi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Re}),Dr=Jt(ci),Vr=le({},Nr,{propertyName:0,elapsedTime:0,pseudoElement:0}),la=Jt(Vr),ql=le({},ro,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),vT=Jt(ql),xT=[9,13,27,32],If=f&&"CompositionEvent"in window,Gl=null;f&&"documentMode"in document&&(Gl=document.documentMode);var wT=f&&"TextEvent"in window&&!Gl,P0=f&&(!If||Gl&&8<Gl&&11>=Gl),M0=" ",N0=!1;function D0(i,o){switch(i){case"keyup":return xT.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function V0(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ca=!1;function _T(i,o){switch(i){case"compositionend":return V0(o);case"keypress":return o.which!==32?null:(N0=!0,M0);case"textInput":return i=o.data,i===M0&&N0?null:i;default:return null}}function kT(i,o){if(ca)return i==="compositionend"||!If&&D0(i,o)?(i=$u(),li=ra=An=null,ca=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return P0&&o.locale!=="ko"?null:o.data;default:return null}}var bT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function L0(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!bT[i.type]:o==="textarea"}function O0(i,o,u,p){$i(p),o=Ju(o,"onChange"),0<o.length&&(u=new no("onChange","change",null,u,p),i.push({event:u,listeners:o}))}var Ql=null,Yl=null;function ST(i){nv(i,0)}function Gu(i){var o=ma(i);if(Sl(o))return i}function ET(i,o){if(i==="change")return o}var B0=!1;if(f){var Cf;if(f){var Af="oninput"in document;if(!Af){var z0=document.createElement("div");z0.setAttribute("oninput","return;"),Af=typeof z0.oninput=="function"}Cf=Af}else Cf=!1;B0=Cf&&(!document.documentMode||9<document.documentMode)}function F0(){Ql&&(Ql.detachEvent("onpropertychange",U0),Yl=Ql=null)}function U0(i){if(i.propertyName==="value"&&Gu(Yl)){var o=[];O0(o,Yl,i,qo(i)),ju(ST,o)}}function TT(i,o,u){i==="focusin"?(F0(),Ql=o,Yl=u,Ql.attachEvent("onpropertychange",U0)):i==="focusout"&&F0()}function IT(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Gu(Yl)}function CT(i,o){if(i==="click")return Gu(o)}function AT(i,o){if(i==="input"||i==="change")return Gu(o)}function RT(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var or=typeof Object.is=="function"?Object.is:RT;function Xl(i,o){if(or(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var u=Object.keys(i),p=Object.keys(o);if(u.length!==p.length)return!1;for(p=0;p<u.length;p++){var v=u[p];if(!d.call(o,v)||!or(i[v],o[v]))return!1}return!0}function $0(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function W0(i,o){var u=$0(i);i=0;for(var p;u;){if(u.nodeType===3){if(p=i+u.textContent.length,i<=o&&p>=o)return{node:u,offset:o-i};i=p}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=$0(u)}}function H0(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?H0(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function K0(){for(var i=window,o=Li();o instanceof i.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)i=o.contentWindow;else break;o=Li(i.document)}return o}function Rf(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function jT(i){var o=K0(),u=i.focusedElem,p=i.selectionRange;if(o!==u&&u&&u.ownerDocument&&H0(u.ownerDocument.documentElement,u)){if(p!==null&&Rf(u)){if(o=p.start,i=p.end,i===void 0&&(i=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(i,u.value.length);else if(i=(o=u.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var v=u.textContent.length,w=Math.min(p.start,v);p=p.end===void 0?w:Math.min(p.end,v),!i.extend&&w>p&&(v=p,p=w,w=v),v=W0(u,w);var I=W0(u,p);v&&I&&(i.rangeCount!==1||i.anchorNode!==v.node||i.anchorOffset!==v.offset||i.focusNode!==I.node||i.focusOffset!==I.offset)&&(o=o.createRange(),o.setStart(v.node,v.offset),i.removeAllRanges(),w>p?(i.addRange(o),i.extend(I.node,I.offset)):(o.setEnd(I.node,I.offset),i.addRange(o)))}}for(o=[],i=u;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)i=o[u],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var PT=f&&"documentMode"in document&&11>=document.documentMode,ua=null,jf=null,Jl=null,Pf=!1;function q0(i,o,u){var p=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Pf||ua==null||ua!==Li(p)||(p=ua,"selectionStart"in p&&Rf(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Jl&&Xl(Jl,p)||(Jl=p,p=Ju(jf,"onSelect"),0<p.length&&(o=new no("onSelect","select",null,o,u),i.push({event:o,listeners:p}),o.target=ua)))}function Qu(i,o){var u={};return u[i.toLowerCase()]=o.toLowerCase(),u["Webkit"+i]="webkit"+o,u["Moz"+i]="moz"+o,u}var da={animationend:Qu("Animation","AnimationEnd"),animationiteration:Qu("Animation","AnimationIteration"),animationstart:Qu("Animation","AnimationStart"),transitionend:Qu("Transition","TransitionEnd")},Mf={},G0={};f&&(G0=document.createElement("div").style,"AnimationEvent"in window||(delete da.animationend.animation,delete da.animationiteration.animation,delete da.animationstart.animation),"TransitionEvent"in window||delete da.transitionend.transition);function Yu(i){if(Mf[i])return Mf[i];if(!da[i])return i;var o=da[i],u;for(u in o)if(o.hasOwnProperty(u)&&u in G0)return Mf[i]=o[u];return i}var Q0=Yu("animationend"),Y0=Yu("animationiteration"),X0=Yu("animationstart"),J0=Yu("transitionend"),Z0=new Map,ev="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zi(i,o){Z0.set(i,o),a(o,[i])}for(var Nf=0;Nf<ev.length;Nf++){var Df=ev[Nf],MT=Df.toLowerCase(),NT=Df[0].toUpperCase()+Df.slice(1);Zi(MT,"on"+NT)}Zi(Q0,"onAnimationEnd"),Zi(Y0,"onAnimationIteration"),Zi(X0,"onAnimationStart"),Zi("dblclick","onDoubleClick"),Zi("focusin","onFocus"),Zi("focusout","onBlur"),Zi(J0,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DT=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zl));function tv(i,o,u){var p=i.type||"unknown-event";i.currentTarget=u,jl(p,o,void 0,i),i.currentTarget=null}function nv(i,o){o=(o&4)!==0;for(var u=0;u<i.length;u++){var p=i[u],v=p.event;p=p.listeners;e:{var w=void 0;if(o)for(var I=p.length-1;0<=I;I--){var V=p[I],z=V.instance,Y=V.currentTarget;if(V=V.listener,z!==w&&v.isPropagationStopped())break e;tv(v,V,Y),w=z}else for(I=0;I<p.length;I++){if(V=p[I],z=V.instance,Y=V.currentTarget,V=V.listener,z!==w&&v.isPropagationStopped())break e;tv(v,V,Y),w=z}}}if(Go)throw i=zn,Go=!1,zn=null,i}function nt(i,o){var u=o[$f];u===void 0&&(u=o[$f]=new Set);var p=i+"__bubble";u.has(p)||(rv(o,i,2,!1),u.add(p))}function Vf(i,o,u){var p=0;o&&(p|=4),rv(u,i,p,o)}var Xu="_reactListening"+Math.random().toString(36).slice(2);function ec(i){if(!i[Xu]){i[Xu]=!0,r.forEach(function(u){u!=="selectionchange"&&(DT.has(u)||Vf(u,!1,i),Vf(u,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Xu]||(o[Xu]=!0,Vf("selectionchange",!1,o))}}function rv(i,o,u,p){switch(na(o)){case 1:var v=jr;break;case 4:v=Uu;break;default:v=Wl}u=v.bind(null,o,u,i),v=void 0,!Hi||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(v=!0),p?v!==void 0?i.addEventListener(o,u,{capture:!0,passive:v}):i.addEventListener(o,u,!0):v!==void 0?i.addEventListener(o,u,{passive:v}):i.addEventListener(o,u,!1)}function Lf(i,o,u,p,v){var w=p;if((o&1)===0&&(o&2)===0&&p!==null)e:for(;;){if(p===null)return;var I=p.tag;if(I===3||I===4){var V=p.stateNode.containerInfo;if(V===v||V.nodeType===8&&V.parentNode===v)break;if(I===4)for(I=p.return;I!==null;){var z=I.tag;if((z===3||z===4)&&(z=I.stateNode.containerInfo,z===v||z.nodeType===8&&z.parentNode===v))return;I=I.return}for(;V!==null;){if(I=io(V),I===null)return;if(z=I.tag,z===5||z===6){p=w=I;continue e}V=V.parentNode}}p=p.return}ju(function(){var Y=w,ne=qo(u),re=[];e:{var te=Z0.get(i);if(te!==void 0){var de=no,ge=i;switch(i){case"keypress":if(to(u)===0)break e;case"keydown":case"keyup":de=Ye;break;case"focusin":ge="focus",de=Wt;break;case"focusout":ge="blur",de=Wt;break;case"beforeblur":case"afterblur":de=Wt;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=Kl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=Hu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=Dr;break;case Q0:case Y0:case X0:de=qu;break;case J0:de=la;break;case"scroll":de=ia;break;case"wheel":de=vT;break;case"copy":case"cut":case"paste":de=h;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=jn}var ye=(o&4)!==0,xt=!ye&&i==="scroll",K=ye?te!==null?te+"Capture":null:te;ye=[];for(var U=Y,Q;U!==null;){Q=U;var se=Q.stateNode;if(Q.tag===5&&se!==null&&(Q=se,K!==null&&(se=Hs(U,K),se!=null&&ye.push(tc(U,se,Q)))),xt)break;U=U.return}0<ye.length&&(te=new de(te,ge,null,u,ne),re.push({event:te,listeners:ye}))}}if((o&7)===0){e:{if(te=i==="mouseover"||i==="pointerover",de=i==="mouseout"||i==="pointerout",te&&u!==Ui&&(ge=u.relatedTarget||u.fromElement)&&(io(ge)||ge[ui]))break e;if((de||te)&&(te=ne.window===ne?ne:(te=ne.ownerDocument)?te.defaultView||te.parentWindow:window,de?(ge=u.relatedTarget||u.toElement,de=Y,ge=ge?io(ge):null,ge!==null&&(xt=ir(ge),ge!==xt||ge.tag!==5&&ge.tag!==6)&&(ge=null)):(de=null,ge=Y),de!==ge)){if(ye=Kl,se="onMouseLeave",K="onMouseEnter",U="mouse",(i==="pointerout"||i==="pointerover")&&(ye=jn,se="onPointerLeave",K="onPointerEnter",U="pointer"),xt=de==null?te:ma(de),Q=ge==null?te:ma(ge),te=new ye(se,U+"leave",de,u,ne),te.target=xt,te.relatedTarget=Q,se=null,io(ne)===Y&&(ye=new ye(K,U+"enter",ge,u,ne),ye.target=Q,ye.relatedTarget=xt,se=ye),xt=se,de&&ge)t:{for(ye=de,K=ge,U=0,Q=ye;Q;Q=ha(Q))U++;for(Q=0,se=K;se;se=ha(se))Q++;for(;0<U-Q;)ye=ha(ye),U--;for(;0<Q-U;)K=ha(K),Q--;for(;U--;){if(ye===K||K!==null&&ye===K.alternate)break t;ye=ha(ye),K=ha(K)}ye=null}else ye=null;de!==null&&iv(re,te,de,ye,!1),ge!==null&&xt!==null&&iv(re,xt,ge,ye,!0)}}e:{if(te=Y?ma(Y):window,de=te.nodeName&&te.nodeName.toLowerCase(),de==="select"||de==="input"&&te.type==="file")var xe=ET;else if(L0(te))if(B0)xe=AT;else{xe=IT;var _e=TT}else(de=te.nodeName)&&de.toLowerCase()==="input"&&(te.type==="checkbox"||te.type==="radio")&&(xe=CT);if(xe&&(xe=xe(i,Y))){O0(re,xe,u,ne);break e}_e&&_e(i,te,Y),i==="focusout"&&(_e=te._wrapperState)&&_e.controlled&&te.type==="number"&&bt(te,"number",te.value)}switch(_e=Y?ma(Y):window,i){case"focusin":(L0(_e)||_e.contentEditable==="true")&&(ua=_e,jf=Y,Jl=null);break;case"focusout":Jl=jf=ua=null;break;case"mousedown":Pf=!0;break;case"contextmenu":case"mouseup":case"dragend":Pf=!1,q0(re,u,ne);break;case"selectionchange":if(PT)break;case"keydown":case"keyup":q0(re,u,ne)}var ke;if(If)e:{switch(i){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else ca?D0(i,u)&&(Te="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(Te="onCompositionStart");Te&&(P0&&u.locale!=="ko"&&(ca||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&ca&&(ke=$u()):(An=ne,ra="value"in An?An.value:An.textContent,ca=!0)),_e=Ju(Y,Te),0<_e.length&&(Te=new b(Te,i,null,u,ne),re.push({event:Te,listeners:_e}),ke?Te.data=ke:(ke=V0(u),ke!==null&&(Te.data=ke)))),(ke=wT?_T(i,u):kT(i,u))&&(Y=Ju(Y,"onBeforeInput"),0<Y.length&&(ne=new b("onBeforeInput","beforeinput",null,u,ne),re.push({event:ne,listeners:Y}),ne.data=ke))}nv(re,o)})}function tc(i,o,u){return{instance:i,listener:o,currentTarget:u}}function Ju(i,o){for(var u=o+"Capture",p=[];i!==null;){var v=i,w=v.stateNode;v.tag===5&&w!==null&&(v=w,w=Hs(i,u),w!=null&&p.unshift(tc(i,w,v)),w=Hs(i,o),w!=null&&p.push(tc(i,w,v))),i=i.return}return p}function ha(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function iv(i,o,u,p,v){for(var w=o._reactName,I=[];u!==null&&u!==p;){var V=u,z=V.alternate,Y=V.stateNode;if(z!==null&&z===p)break;V.tag===5&&Y!==null&&(V=Y,v?(z=Hs(u,w),z!=null&&I.unshift(tc(u,z,V))):v||(z=Hs(u,w),z!=null&&I.push(tc(u,z,V)))),u=u.return}I.length!==0&&i.push({event:o,listeners:I})}var VT=/\r\n?/g,LT=/\u0000|\uFFFD/g;function sv(i){return(typeof i=="string"?i:""+i).replace(VT,`
`).replace(LT,"")}function Zu(i,o,u){if(o=sv(o),sv(i)!==o&&u)throw Error(t(425))}function ed(){}var Of=null,Bf=null;function zf(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,OT=typeof clearTimeout=="function"?clearTimeout:void 0,ov=typeof Promise=="function"?Promise:void 0,BT=typeof queueMicrotask=="function"?queueMicrotask:typeof ov<"u"?function(i){return ov.resolve(null).then(i).catch(zT)}:Ff;function zT(i){setTimeout(function(){throw i})}function Uf(i,o){var u=o,p=0;do{var v=u.nextSibling;if(i.removeChild(u),v&&v.nodeType===8)if(u=v.data,u==="/$"){if(p===0){i.removeChild(v),Yi(o);return}p--}else u!=="$"&&u!=="$?"&&u!=="$!"||p++;u=v}while(u);Yi(o)}function es(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function av(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return i;o--}else u==="/$"&&o++}i=i.previousSibling}return null}var fa=Math.random().toString(36).slice(2),Lr="__reactFiber$"+fa,nc="__reactProps$"+fa,ui="__reactContainer$"+fa,$f="__reactEvents$"+fa,FT="__reactListeners$"+fa,UT="__reactHandles$"+fa;function io(i){var o=i[Lr];if(o)return o;for(var u=i.parentNode;u;){if(o=u[ui]||u[Lr]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(i=av(i);i!==null;){if(u=i[Lr])return u;i=av(i)}return o}i=u,u=i.parentNode}return null}function rc(i){return i=i[Lr]||i[ui],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function ma(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function td(i){return i[nc]||null}var Wf=[],pa=-1;function ts(i){return{current:i}}function rt(i){0>pa||(i.current=Wf[pa],Wf[pa]=null,pa--)}function Ze(i,o){pa++,Wf[pa]=i.current,i.current=o}var ns={},Zt=ts(ns),pn=ts(!1),so=ns;function ga(i,o){var u=i.type.contextTypes;if(!u)return ns;var p=i.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===o)return p.__reactInternalMemoizedMaskedChildContext;var v={},w;for(w in u)v[w]=o[w];return p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=v),v}function gn(i){return i=i.childContextTypes,i!=null}function nd(){rt(pn),rt(Zt)}function lv(i,o,u){if(Zt.current!==ns)throw Error(t(168));Ze(Zt,o),Ze(pn,u)}function cv(i,o,u){var p=i.stateNode;if(o=o.childContextTypes,typeof p.getChildContext!="function")return u;p=p.getChildContext();for(var v in p)if(!(v in o))throw Error(t(108,Ge(i)||"Unknown",v));return le({},u,p)}function rd(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||ns,so=Zt.current,Ze(Zt,i),Ze(pn,pn.current),!0}function uv(i,o,u){var p=i.stateNode;if(!p)throw Error(t(169));u?(i=cv(i,o,so),p.__reactInternalMemoizedMergedChildContext=i,rt(pn),rt(Zt),Ze(Zt,i)):rt(pn),Ze(pn,u)}var di=null,id=!1,Hf=!1;function dv(i){di===null?di=[i]:di.push(i)}function $T(i){id=!0,dv(i)}function rs(){if(!Hf&&di!==null){Hf=!0;var i=0,o=ze;try{var u=di;for(ze=1;i<u.length;i++){var p=u[i];do p=p(!0);while(p!==null)}di=null,id=!1}catch(v){throw di!==null&&(di=di.slice(i+1)),Ml(Yo,rs),v}finally{ze=o,Hf=!1}}return null}var ya=[],va=0,sd=null,od=0,Un=[],$n=0,oo=null,hi=1,fi="";function ao(i,o){ya[va++]=od,ya[va++]=sd,sd=i,od=o}function hv(i,o,u){Un[$n++]=hi,Un[$n++]=fi,Un[$n++]=oo,oo=i;var p=hi;i=fi;var v=32-In(p)-1;p&=~(1<<v),u+=1;var w=32-In(o)+v;if(30<w){var I=v-v%5;w=(p&(1<<I)-1).toString(32),p>>=I,v-=I,hi=1<<32-In(o)+v|u<<v|p,fi=w+i}else hi=1<<w|u<<v|p,fi=i}function Kf(i){i.return!==null&&(ao(i,1),hv(i,1,0))}function qf(i){for(;i===sd;)sd=ya[--va],ya[va]=null,od=ya[--va],ya[va]=null;for(;i===oo;)oo=Un[--$n],Un[$n]=null,fi=Un[--$n],Un[$n]=null,hi=Un[--$n],Un[$n]=null}var Pn=null,Mn=null,ot=!1,ar=null;function fv(i,o){var u=qn(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=i,o=i.deletions,o===null?(i.deletions=[u],i.flags|=16):o.push(u)}function mv(i,o){switch(i.tag){case 5:var u=i.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,Pn=i,Mn=es(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,Pn=i,Mn=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=oo!==null?{id:hi,overflow:fi}:null,i.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=qn(18,null,null,0),u.stateNode=o,u.return=i,i.child=u,Pn=i,Mn=null,!0):!1;default:return!1}}function Gf(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Qf(i){if(ot){var o=Mn;if(o){var u=o;if(!mv(i,o)){if(Gf(i))throw Error(t(418));o=es(u.nextSibling);var p=Pn;o&&mv(i,o)?fv(p,u):(i.flags=i.flags&-4097|2,ot=!1,Pn=i)}}else{if(Gf(i))throw Error(t(418));i.flags=i.flags&-4097|2,ot=!1,Pn=i}}}function pv(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Pn=i}function ad(i){if(i!==Pn)return!1;if(!ot)return pv(i),ot=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!zf(i.type,i.memoizedProps)),o&&(o=Mn)){if(Gf(i))throw gv(),Error(t(418));for(;o;)fv(i,o),o=es(o.nextSibling)}if(pv(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"){if(o===0){Mn=es(i.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}i=i.nextSibling}Mn=null}}else Mn=Pn?es(i.stateNode.nextSibling):null;return!0}function gv(){for(var i=Mn;i;)i=es(i.nextSibling)}function xa(){Mn=Pn=null,ot=!1}function Yf(i){ar===null?ar=[i]:ar.push(i)}var WT=G.ReactCurrentBatchConfig;function ic(i,o,u){if(i=u.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var p=u.stateNode}if(!p)throw Error(t(147,i));var v=p,w=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===w?o.ref:(o=function(I){var V=v.refs;I===null?delete V[w]:V[w]=I},o._stringRef=w,o)}if(typeof i!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,i))}return i}function ld(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function yv(i){var o=i._init;return o(i._payload)}function vv(i){function o(K,U){if(i){var Q=K.deletions;Q===null?(K.deletions=[U],K.flags|=16):Q.push(U)}}function u(K,U){if(!i)return null;for(;U!==null;)o(K,U),U=U.sibling;return null}function p(K,U){for(K=new Map;U!==null;)U.key!==null?K.set(U.key,U):K.set(U.index,U),U=U.sibling;return K}function v(K,U){return K=ds(K,U),K.index=0,K.sibling=null,K}function w(K,U,Q){return K.index=Q,i?(Q=K.alternate,Q!==null?(Q=Q.index,Q<U?(K.flags|=2,U):Q):(K.flags|=2,U)):(K.flags|=1048576,U)}function I(K){return i&&K.alternate===null&&(K.flags|=2),K}function V(K,U,Q,se){return U===null||U.tag!==6?(U=Fm(Q,K.mode,se),U.return=K,U):(U=v(U,Q),U.return=K,U)}function z(K,U,Q,se){var xe=Q.type;return xe===A?ne(K,U,Q.props.children,se,Q.key):U!==null&&(U.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===kt&&yv(xe)===U.type)?(se=v(U,Q.props),se.ref=ic(K,U,Q),se.return=K,se):(se=Pd(Q.type,Q.key,Q.props,null,K.mode,se),se.ref=ic(K,U,Q),se.return=K,se)}function Y(K,U,Q,se){return U===null||U.tag!==4||U.stateNode.containerInfo!==Q.containerInfo||U.stateNode.implementation!==Q.implementation?(U=Um(Q,K.mode,se),U.return=K,U):(U=v(U,Q.children||[]),U.return=K,U)}function ne(K,U,Q,se,xe){return U===null||U.tag!==7?(U=go(Q,K.mode,se,xe),U.return=K,U):(U=v(U,Q),U.return=K,U)}function re(K,U,Q){if(typeof U=="string"&&U!==""||typeof U=="number")return U=Fm(""+U,K.mode,Q),U.return=K,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case F:return Q=Pd(U.type,U.key,U.props,null,K.mode,Q),Q.ref=ic(K,null,U),Q.return=K,Q;case $:return U=Um(U,K.mode,Q),U.return=K,U;case kt:var se=U._init;return re(K,se(U._payload),Q)}if(yt(U)||pe(U))return U=go(U,K.mode,Q,null),U.return=K,U;ld(K,U)}return null}function te(K,U,Q,se){var xe=U!==null?U.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number")return xe!==null?null:V(K,U,""+Q,se);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case F:return Q.key===xe?z(K,U,Q,se):null;case $:return Q.key===xe?Y(K,U,Q,se):null;case kt:return xe=Q._init,te(K,U,xe(Q._payload),se)}if(yt(Q)||pe(Q))return xe!==null?null:ne(K,U,Q,se,null);ld(K,Q)}return null}function de(K,U,Q,se,xe){if(typeof se=="string"&&se!==""||typeof se=="number")return K=K.get(Q)||null,V(U,K,""+se,xe);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case F:return K=K.get(se.key===null?Q:se.key)||null,z(U,K,se,xe);case $:return K=K.get(se.key===null?Q:se.key)||null,Y(U,K,se,xe);case kt:var _e=se._init;return de(K,U,Q,_e(se._payload),xe)}if(yt(se)||pe(se))return K=K.get(Q)||null,ne(U,K,se,xe,null);ld(U,se)}return null}function ge(K,U,Q,se){for(var xe=null,_e=null,ke=U,Te=U=0,zt=null;ke!==null&&Te<Q.length;Te++){ke.index>Te?(zt=ke,ke=null):zt=ke.sibling;var We=te(K,ke,Q[Te],se);if(We===null){ke===null&&(ke=zt);break}i&&ke&&We.alternate===null&&o(K,ke),U=w(We,U,Te),_e===null?xe=We:_e.sibling=We,_e=We,ke=zt}if(Te===Q.length)return u(K,ke),ot&&ao(K,Te),xe;if(ke===null){for(;Te<Q.length;Te++)ke=re(K,Q[Te],se),ke!==null&&(U=w(ke,U,Te),_e===null?xe=ke:_e.sibling=ke,_e=ke);return ot&&ao(K,Te),xe}for(ke=p(K,ke);Te<Q.length;Te++)zt=de(ke,K,Te,Q[Te],se),zt!==null&&(i&&zt.alternate!==null&&ke.delete(zt.key===null?Te:zt.key),U=w(zt,U,Te),_e===null?xe=zt:_e.sibling=zt,_e=zt);return i&&ke.forEach(function(hs){return o(K,hs)}),ot&&ao(K,Te),xe}function ye(K,U,Q,se){var xe=pe(Q);if(typeof xe!="function")throw Error(t(150));if(Q=xe.call(Q),Q==null)throw Error(t(151));for(var _e=xe=null,ke=U,Te=U=0,zt=null,We=Q.next();ke!==null&&!We.done;Te++,We=Q.next()){ke.index>Te?(zt=ke,ke=null):zt=ke.sibling;var hs=te(K,ke,We.value,se);if(hs===null){ke===null&&(ke=zt);break}i&&ke&&hs.alternate===null&&o(K,ke),U=w(hs,U,Te),_e===null?xe=hs:_e.sibling=hs,_e=hs,ke=zt}if(We.done)return u(K,ke),ot&&ao(K,Te),xe;if(ke===null){for(;!We.done;Te++,We=Q.next())We=re(K,We.value,se),We!==null&&(U=w(We,U,Te),_e===null?xe=We:_e.sibling=We,_e=We);return ot&&ao(K,Te),xe}for(ke=p(K,ke);!We.done;Te++,We=Q.next())We=de(ke,K,Te,We.value,se),We!==null&&(i&&We.alternate!==null&&ke.delete(We.key===null?Te:We.key),U=w(We,U,Te),_e===null?xe=We:_e.sibling=We,_e=We);return i&&ke.forEach(function(bI){return o(K,bI)}),ot&&ao(K,Te),xe}function xt(K,U,Q,se){if(typeof Q=="object"&&Q!==null&&Q.type===A&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case F:e:{for(var xe=Q.key,_e=U;_e!==null;){if(_e.key===xe){if(xe=Q.type,xe===A){if(_e.tag===7){u(K,_e.sibling),U=v(_e,Q.props.children),U.return=K,K=U;break e}}else if(_e.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===kt&&yv(xe)===_e.type){u(K,_e.sibling),U=v(_e,Q.props),U.ref=ic(K,_e,Q),U.return=K,K=U;break e}u(K,_e);break}else o(K,_e);_e=_e.sibling}Q.type===A?(U=go(Q.props.children,K.mode,se,Q.key),U.return=K,K=U):(se=Pd(Q.type,Q.key,Q.props,null,K.mode,se),se.ref=ic(K,U,Q),se.return=K,K=se)}return I(K);case $:e:{for(_e=Q.key;U!==null;){if(U.key===_e)if(U.tag===4&&U.stateNode.containerInfo===Q.containerInfo&&U.stateNode.implementation===Q.implementation){u(K,U.sibling),U=v(U,Q.children||[]),U.return=K,K=U;break e}else{u(K,U);break}else o(K,U);U=U.sibling}U=Um(Q,K.mode,se),U.return=K,K=U}return I(K);case kt:return _e=Q._init,xt(K,U,_e(Q._payload),se)}if(yt(Q))return ge(K,U,Q,se);if(pe(Q))return ye(K,U,Q,se);ld(K,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"?(Q=""+Q,U!==null&&U.tag===6?(u(K,U.sibling),U=v(U,Q),U.return=K,K=U):(u(K,U),U=Fm(Q,K.mode,se),U.return=K,K=U),I(K)):u(K,U)}return xt}var wa=vv(!0),xv=vv(!1),cd=ts(null),ud=null,_a=null,Xf=null;function Jf(){Xf=_a=ud=null}function Zf(i){var o=cd.current;rt(cd),i._currentValue=o}function em(i,o,u){for(;i!==null;){var p=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,p!==null&&(p.childLanes|=o)):p!==null&&(p.childLanes&o)!==o&&(p.childLanes|=o),i===u)break;i=i.return}}function ka(i,o){ud=i,Xf=_a=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(yn=!0),i.firstContext=null)}function Wn(i){var o=i._currentValue;if(Xf!==i)if(i={context:i,memoizedValue:o,next:null},_a===null){if(ud===null)throw Error(t(308));_a=i,ud.dependencies={lanes:0,firstContext:i}}else _a=_a.next=i;return o}var lo=null;function tm(i){lo===null?lo=[i]:lo.push(i)}function wv(i,o,u,p){var v=o.interleaved;return v===null?(u.next=u,tm(o)):(u.next=v.next,v.next=u),o.interleaved=u,mi(i,p)}function mi(i,o){i.lanes|=o;var u=i.alternate;for(u!==null&&(u.lanes|=o),u=i,i=i.return;i!==null;)i.childLanes|=o,u=i.alternate,u!==null&&(u.childLanes|=o),u=i,i=i.return;return u.tag===3?u.stateNode:null}var is=!1;function nm(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _v(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function pi(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function ss(i,o,u){var p=i.updateQueue;if(p===null)return null;if(p=p.shared,($e&2)!==0){var v=p.pending;return v===null?o.next=o:(o.next=v.next,v.next=o),p.pending=o,mi(i,u)}return v=p.interleaved,v===null?(o.next=o,tm(p)):(o.next=v.next,v.next=o),p.interleaved=o,mi(i,u)}function dd(i,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var p=o.lanes;p&=i.pendingLanes,u|=p,o.lanes=u,Bl(i,u)}}function kv(i,o){var u=i.updateQueue,p=i.alternate;if(p!==null&&(p=p.updateQueue,u===p)){var v=null,w=null;if(u=u.firstBaseUpdate,u!==null){do{var I={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};w===null?v=w=I:w=w.next=I,u=u.next}while(u!==null);w===null?v=w=o:w=w.next=o}else v=w=o;u={baseState:p.baseState,firstBaseUpdate:v,lastBaseUpdate:w,shared:p.shared,effects:p.effects},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=o:i.next=o,u.lastBaseUpdate=o}function hd(i,o,u,p){var v=i.updateQueue;is=!1;var w=v.firstBaseUpdate,I=v.lastBaseUpdate,V=v.shared.pending;if(V!==null){v.shared.pending=null;var z=V,Y=z.next;z.next=null,I===null?w=Y:I.next=Y,I=z;var ne=i.alternate;ne!==null&&(ne=ne.updateQueue,V=ne.lastBaseUpdate,V!==I&&(V===null?ne.firstBaseUpdate=Y:V.next=Y,ne.lastBaseUpdate=z))}if(w!==null){var re=v.baseState;I=0,ne=Y=z=null,V=w;do{var te=V.lane,de=V.eventTime;if((p&te)===te){ne!==null&&(ne=ne.next={eventTime:de,lane:0,tag:V.tag,payload:V.payload,callback:V.callback,next:null});e:{var ge=i,ye=V;switch(te=o,de=u,ye.tag){case 1:if(ge=ye.payload,typeof ge=="function"){re=ge.call(de,re,te);break e}re=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=ye.payload,te=typeof ge=="function"?ge.call(de,re,te):ge,te==null)break e;re=le({},re,te);break e;case 2:is=!0}}V.callback!==null&&V.lane!==0&&(i.flags|=64,te=v.effects,te===null?v.effects=[V]:te.push(V))}else de={eventTime:de,lane:te,tag:V.tag,payload:V.payload,callback:V.callback,next:null},ne===null?(Y=ne=de,z=re):ne=ne.next=de,I|=te;if(V=V.next,V===null){if(V=v.shared.pending,V===null)break;te=V,V=te.next,te.next=null,v.lastBaseUpdate=te,v.shared.pending=null}}while(!0);if(ne===null&&(z=re),v.baseState=z,v.firstBaseUpdate=Y,v.lastBaseUpdate=ne,o=v.shared.interleaved,o!==null){v=o;do I|=v.lane,v=v.next;while(v!==o)}else w===null&&(v.shared.lanes=0);ho|=I,i.lanes=I,i.memoizedState=re}}function bv(i,o,u){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var p=i[o],v=p.callback;if(v!==null){if(p.callback=null,p=u,typeof v!="function")throw Error(t(191,v));v.call(p)}}}var sc={},Or=ts(sc),oc=ts(sc),ac=ts(sc);function co(i){if(i===sc)throw Error(t(174));return i}function rm(i,o){switch(Ze(ac,o),Ze(oc,i),Ze(Or,sc),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:Wo(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=Wo(o,i)}rt(Or),Ze(Or,o)}function ba(){rt(Or),rt(oc),rt(ac)}function Sv(i){co(ac.current);var o=co(Or.current),u=Wo(o,i.type);o!==u&&(Ze(oc,i),Ze(Or,u))}function im(i){oc.current===i&&(rt(Or),rt(oc))}var lt=ts(0);function fd(i){for(var o=i;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var sm=[];function om(){for(var i=0;i<sm.length;i++)sm[i]._workInProgressVersionPrimary=null;sm.length=0}var md=G.ReactCurrentDispatcher,am=G.ReactCurrentBatchConfig,uo=0,ct=null,jt=null,Ot=null,pd=!1,lc=!1,cc=0,HT=0;function en(){throw Error(t(321))}function lm(i,o){if(o===null)return!1;for(var u=0;u<o.length&&u<i.length;u++)if(!or(i[u],o[u]))return!1;return!0}function cm(i,o,u,p,v,w){if(uo=w,ct=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,md.current=i===null||i.memoizedState===null?QT:YT,i=u(p,v),lc){w=0;do{if(lc=!1,cc=0,25<=w)throw Error(t(301));w+=1,Ot=jt=null,o.updateQueue=null,md.current=XT,i=u(p,v)}while(lc)}if(md.current=vd,o=jt!==null&&jt.next!==null,uo=0,Ot=jt=ct=null,pd=!1,o)throw Error(t(300));return i}function um(){var i=cc!==0;return cc=0,i}function Br(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?ct.memoizedState=Ot=i:Ot=Ot.next=i,Ot}function Hn(){if(jt===null){var i=ct.alternate;i=i!==null?i.memoizedState:null}else i=jt.next;var o=Ot===null?ct.memoizedState:Ot.next;if(o!==null)Ot=o,jt=i;else{if(i===null)throw Error(t(310));jt=i,i={memoizedState:jt.memoizedState,baseState:jt.baseState,baseQueue:jt.baseQueue,queue:jt.queue,next:null},Ot===null?ct.memoizedState=Ot=i:Ot=Ot.next=i}return Ot}function uc(i,o){return typeof o=="function"?o(i):o}function dm(i){var o=Hn(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var p=jt,v=p.baseQueue,w=u.pending;if(w!==null){if(v!==null){var I=v.next;v.next=w.next,w.next=I}p.baseQueue=v=w,u.pending=null}if(v!==null){w=v.next,p=p.baseState;var V=I=null,z=null,Y=w;do{var ne=Y.lane;if((uo&ne)===ne)z!==null&&(z=z.next={lane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),p=Y.hasEagerState?Y.eagerState:i(p,Y.action);else{var re={lane:ne,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null};z===null?(V=z=re,I=p):z=z.next=re,ct.lanes|=ne,ho|=ne}Y=Y.next}while(Y!==null&&Y!==w);z===null?I=p:z.next=V,or(p,o.memoizedState)||(yn=!0),o.memoizedState=p,o.baseState=I,o.baseQueue=z,u.lastRenderedState=p}if(i=u.interleaved,i!==null){v=i;do w=v.lane,ct.lanes|=w,ho|=w,v=v.next;while(v!==i)}else v===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function hm(i){var o=Hn(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var p=u.dispatch,v=u.pending,w=o.memoizedState;if(v!==null){u.pending=null;var I=v=v.next;do w=i(w,I.action),I=I.next;while(I!==v);or(w,o.memoizedState)||(yn=!0),o.memoizedState=w,o.baseQueue===null&&(o.baseState=w),u.lastRenderedState=w}return[w,p]}function Ev(){}function Tv(i,o){var u=ct,p=Hn(),v=o(),w=!or(p.memoizedState,v);if(w&&(p.memoizedState=v,yn=!0),p=p.queue,fm(Av.bind(null,u,p,i),[i]),p.getSnapshot!==o||w||Ot!==null&&Ot.memoizedState.tag&1){if(u.flags|=2048,dc(9,Cv.bind(null,u,p,v,o),void 0,null),Bt===null)throw Error(t(349));(uo&30)!==0||Iv(u,o,v)}return v}function Iv(i,o,u){i.flags|=16384,i={getSnapshot:o,value:u},o=ct.updateQueue,o===null?(o={lastEffect:null,stores:null},ct.updateQueue=o,o.stores=[i]):(u=o.stores,u===null?o.stores=[i]:u.push(i))}function Cv(i,o,u,p){o.value=u,o.getSnapshot=p,Rv(o)&&jv(i)}function Av(i,o,u){return u(function(){Rv(o)&&jv(i)})}function Rv(i){var o=i.getSnapshot;i=i.value;try{var u=o();return!or(i,u)}catch{return!0}}function jv(i){var o=mi(i,1);o!==null&&dr(o,i,1,-1)}function Pv(i){var o=Br();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:uc,lastRenderedState:i},o.queue=i,i=i.dispatch=GT.bind(null,ct,i),[o.memoizedState,i]}function dc(i,o,u,p){return i={tag:i,create:o,destroy:u,deps:p,next:null},o=ct.updateQueue,o===null?(o={lastEffect:null,stores:null},ct.updateQueue=o,o.lastEffect=i.next=i):(u=o.lastEffect,u===null?o.lastEffect=i.next=i:(p=u.next,u.next=i,i.next=p,o.lastEffect=i)),i}function Mv(){return Hn().memoizedState}function gd(i,o,u,p){var v=Br();ct.flags|=i,v.memoizedState=dc(1|o,u,void 0,p===void 0?null:p)}function yd(i,o,u,p){var v=Hn();p=p===void 0?null:p;var w=void 0;if(jt!==null){var I=jt.memoizedState;if(w=I.destroy,p!==null&&lm(p,I.deps)){v.memoizedState=dc(o,u,w,p);return}}ct.flags|=i,v.memoizedState=dc(1|o,u,w,p)}function Nv(i,o){return gd(8390656,8,i,o)}function fm(i,o){return yd(2048,8,i,o)}function Dv(i,o){return yd(4,2,i,o)}function Vv(i,o){return yd(4,4,i,o)}function Lv(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function Ov(i,o,u){return u=u!=null?u.concat([i]):null,yd(4,4,Lv.bind(null,o,i),u)}function mm(){}function Bv(i,o){var u=Hn();o=o===void 0?null:o;var p=u.memoizedState;return p!==null&&o!==null&&lm(o,p[1])?p[0]:(u.memoizedState=[i,o],i)}function zv(i,o){var u=Hn();o=o===void 0?null:o;var p=u.memoizedState;return p!==null&&o!==null&&lm(o,p[1])?p[0]:(i=i(),u.memoizedState=[i,o],i)}function Fv(i,o,u){return(uo&21)===0?(i.baseState&&(i.baseState=!1,yn=!0),i.memoizedState=u):(or(u,o)||(u=Ll(),ct.lanes|=u,ho|=u,i.baseState=!0),o)}function KT(i,o){var u=ze;ze=u!==0&&4>u?u:4,i(!0);var p=am.transition;am.transition={};try{i(!1),o()}finally{ze=u,am.transition=p}}function Uv(){return Hn().memoizedState}function qT(i,o,u){var p=cs(i);if(u={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null},$v(i))Wv(o,u);else if(u=wv(i,o,u,p),u!==null){var v=hn();dr(u,i,p,v),Hv(u,o,p)}}function GT(i,o,u){var p=cs(i),v={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null};if($v(i))Wv(o,v);else{var w=i.alternate;if(i.lanes===0&&(w===null||w.lanes===0)&&(w=o.lastRenderedReducer,w!==null))try{var I=o.lastRenderedState,V=w(I,u);if(v.hasEagerState=!0,v.eagerState=V,or(V,I)){var z=o.interleaved;z===null?(v.next=v,tm(o)):(v.next=z.next,z.next=v),o.interleaved=v;return}}catch{}finally{}u=wv(i,o,v,p),u!==null&&(v=hn(),dr(u,i,p,v),Hv(u,o,p))}}function $v(i){var o=i.alternate;return i===ct||o!==null&&o===ct}function Wv(i,o){lc=pd=!0;var u=i.pending;u===null?o.next=o:(o.next=u.next,u.next=o),i.pending=o}function Hv(i,o,u){if((u&4194240)!==0){var p=o.lanes;p&=i.pendingLanes,u|=p,o.lanes=u,Bl(i,u)}}var vd={readContext:Wn,useCallback:en,useContext:en,useEffect:en,useImperativeHandle:en,useInsertionEffect:en,useLayoutEffect:en,useMemo:en,useReducer:en,useRef:en,useState:en,useDebugValue:en,useDeferredValue:en,useTransition:en,useMutableSource:en,useSyncExternalStore:en,useId:en,unstable_isNewReconciler:!1},QT={readContext:Wn,useCallback:function(i,o){return Br().memoizedState=[i,o===void 0?null:o],i},useContext:Wn,useEffect:Nv,useImperativeHandle:function(i,o,u){return u=u!=null?u.concat([i]):null,gd(4194308,4,Lv.bind(null,o,i),u)},useLayoutEffect:function(i,o){return gd(4194308,4,i,o)},useInsertionEffect:function(i,o){return gd(4,2,i,o)},useMemo:function(i,o){var u=Br();return o=o===void 0?null:o,i=i(),u.memoizedState=[i,o],i},useReducer:function(i,o,u){var p=Br();return o=u!==void 0?u(o):o,p.memoizedState=p.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},p.queue=i,i=i.dispatch=qT.bind(null,ct,i),[p.memoizedState,i]},useRef:function(i){var o=Br();return i={current:i},o.memoizedState=i},useState:Pv,useDebugValue:mm,useDeferredValue:function(i){return Br().memoizedState=i},useTransition:function(){var i=Pv(!1),o=i[0];return i=KT.bind(null,i[1]),Br().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,u){var p=ct,v=Br();if(ot){if(u===void 0)throw Error(t(407));u=u()}else{if(u=o(),Bt===null)throw Error(t(349));(uo&30)!==0||Iv(p,o,u)}v.memoizedState=u;var w={value:u,getSnapshot:o};return v.queue=w,Nv(Av.bind(null,p,w,i),[i]),p.flags|=2048,dc(9,Cv.bind(null,p,w,u,o),void 0,null),u},useId:function(){var i=Br(),o=Bt.identifierPrefix;if(ot){var u=fi,p=hi;u=(p&~(1<<32-In(p)-1)).toString(32)+u,o=":"+o+"R"+u,u=cc++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=HT++,o=":"+o+"r"+u.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},YT={readContext:Wn,useCallback:Bv,useContext:Wn,useEffect:fm,useImperativeHandle:Ov,useInsertionEffect:Dv,useLayoutEffect:Vv,useMemo:zv,useReducer:dm,useRef:Mv,useState:function(){return dm(uc)},useDebugValue:mm,useDeferredValue:function(i){var o=Hn();return Fv(o,jt.memoizedState,i)},useTransition:function(){var i=dm(uc)[0],o=Hn().memoizedState;return[i,o]},useMutableSource:Ev,useSyncExternalStore:Tv,useId:Uv,unstable_isNewReconciler:!1},XT={readContext:Wn,useCallback:Bv,useContext:Wn,useEffect:fm,useImperativeHandle:Ov,useInsertionEffect:Dv,useLayoutEffect:Vv,useMemo:zv,useReducer:hm,useRef:Mv,useState:function(){return hm(uc)},useDebugValue:mm,useDeferredValue:function(i){var o=Hn();return jt===null?o.memoizedState=i:Fv(o,jt.memoizedState,i)},useTransition:function(){var i=hm(uc)[0],o=Hn().memoizedState;return[i,o]},useMutableSource:Ev,useSyncExternalStore:Tv,useId:Uv,unstable_isNewReconciler:!1};function lr(i,o){if(i&&i.defaultProps){o=le({},o),i=i.defaultProps;for(var u in i)o[u]===void 0&&(o[u]=i[u]);return o}return o}function pm(i,o,u,p){o=i.memoizedState,u=u(p,o),u=u==null?o:le({},o,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var xd={isMounted:function(i){return(i=i._reactInternals)?ir(i)===i:!1},enqueueSetState:function(i,o,u){i=i._reactInternals;var p=hn(),v=cs(i),w=pi(p,v);w.payload=o,u!=null&&(w.callback=u),o=ss(i,w,v),o!==null&&(dr(o,i,v,p),dd(o,i,v))},enqueueReplaceState:function(i,o,u){i=i._reactInternals;var p=hn(),v=cs(i),w=pi(p,v);w.tag=1,w.payload=o,u!=null&&(w.callback=u),o=ss(i,w,v),o!==null&&(dr(o,i,v,p),dd(o,i,v))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var u=hn(),p=cs(i),v=pi(u,p);v.tag=2,o!=null&&(v.callback=o),o=ss(i,v,p),o!==null&&(dr(o,i,p,u),dd(o,i,p))}};function Kv(i,o,u,p,v,w,I){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(p,w,I):o.prototype&&o.prototype.isPureReactComponent?!Xl(u,p)||!Xl(v,w):!0}function qv(i,o,u){var p=!1,v=ns,w=o.contextType;return typeof w=="object"&&w!==null?w=Wn(w):(v=gn(o)?so:Zt.current,p=o.contextTypes,w=(p=p!=null)?ga(i,v):ns),o=new o(u,w),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=xd,i.stateNode=o,o._reactInternals=i,p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=v,i.__reactInternalMemoizedMaskedChildContext=w),o}function Gv(i,o,u,p){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,p),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,p),o.state!==i&&xd.enqueueReplaceState(o,o.state,null)}function gm(i,o,u,p){var v=i.stateNode;v.props=u,v.state=i.memoizedState,v.refs={},nm(i);var w=o.contextType;typeof w=="object"&&w!==null?v.context=Wn(w):(w=gn(o)?so:Zt.current,v.context=ga(i,w)),v.state=i.memoizedState,w=o.getDerivedStateFromProps,typeof w=="function"&&(pm(i,o,w,u),v.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(o=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),o!==v.state&&xd.enqueueReplaceState(v,v.state,null),hd(i,u,v,p),v.state=i.memoizedState),typeof v.componentDidMount=="function"&&(i.flags|=4194308)}function Sa(i,o){try{var u="",p=o;do u+=De(p),p=p.return;while(p);var v=u}catch(w){v=`
Error generating stack: `+w.message+`
`+w.stack}return{value:i,source:o,stack:v,digest:null}}function ym(i,o,u){return{value:i,source:null,stack:u??null,digest:o??null}}function vm(i,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var JT=typeof WeakMap=="function"?WeakMap:Map;function Qv(i,o,u){u=pi(-1,u),u.tag=3,u.payload={element:null};var p=o.value;return u.callback=function(){Td||(Td=!0,Mm=p),vm(i,o)},u}function Yv(i,o,u){u=pi(-1,u),u.tag=3;var p=i.type.getDerivedStateFromError;if(typeof p=="function"){var v=o.value;u.payload=function(){return p(v)},u.callback=function(){vm(i,o)}}var w=i.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(u.callback=function(){vm(i,o),typeof p!="function"&&(as===null?as=new Set([this]):as.add(this));var I=o.stack;this.componentDidCatch(o.value,{componentStack:I!==null?I:""})}),u}function Xv(i,o,u){var p=i.pingCache;if(p===null){p=i.pingCache=new JT;var v=new Set;p.set(o,v)}else v=p.get(o),v===void 0&&(v=new Set,p.set(o,v));v.has(u)||(v.add(u),i=hI.bind(null,i,o,u),o.then(i,i))}function Jv(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function Zv(i,o,u,p,v){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=pi(-1,1),o.tag=2,ss(u,o,1))),u.lanes|=1),i):(i.flags|=65536,i.lanes=v,i)}var ZT=G.ReactCurrentOwner,yn=!1;function dn(i,o,u,p){o.child=i===null?xv(o,null,u,p):wa(o,i.child,u,p)}function e1(i,o,u,p,v){u=u.render;var w=o.ref;return ka(o,v),p=cm(i,o,u,p,w,v),u=um(),i!==null&&!yn?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~v,gi(i,o,v)):(ot&&u&&Kf(o),o.flags|=1,dn(i,o,p,v),o.child)}function t1(i,o,u,p,v){if(i===null){var w=u.type;return typeof w=="function"&&!zm(w)&&w.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=w,n1(i,o,w,p,v)):(i=Pd(u.type,null,p,o,o.mode,v),i.ref=o.ref,i.return=o,o.child=i)}if(w=i.child,(i.lanes&v)===0){var I=w.memoizedProps;if(u=u.compare,u=u!==null?u:Xl,u(I,p)&&i.ref===o.ref)return gi(i,o,v)}return o.flags|=1,i=ds(w,p),i.ref=o.ref,i.return=o,o.child=i}function n1(i,o,u,p,v){if(i!==null){var w=i.memoizedProps;if(Xl(w,p)&&i.ref===o.ref)if(yn=!1,o.pendingProps=p=w,(i.lanes&v)!==0)(i.flags&131072)!==0&&(yn=!0);else return o.lanes=i.lanes,gi(i,o,v)}return xm(i,o,u,p,v)}function r1(i,o,u){var p=o.pendingProps,v=p.children,w=i!==null?i.memoizedState:null;if(p.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ze(Ta,Nn),Nn|=u;else{if((u&1073741824)===0)return i=w!==null?w.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,Ze(Ta,Nn),Nn|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=w!==null?w.baseLanes:u,Ze(Ta,Nn),Nn|=p}else w!==null?(p=w.baseLanes|u,o.memoizedState=null):p=u,Ze(Ta,Nn),Nn|=p;return dn(i,o,v,u),o.child}function i1(i,o){var u=o.ref;(i===null&&u!==null||i!==null&&i.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function xm(i,o,u,p,v){var w=gn(u)?so:Zt.current;return w=ga(o,w),ka(o,v),u=cm(i,o,u,p,w,v),p=um(),i!==null&&!yn?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~v,gi(i,o,v)):(ot&&p&&Kf(o),o.flags|=1,dn(i,o,u,v),o.child)}function s1(i,o,u,p,v){if(gn(u)){var w=!0;rd(o)}else w=!1;if(ka(o,v),o.stateNode===null)_d(i,o),qv(o,u,p),gm(o,u,p,v),p=!0;else if(i===null){var I=o.stateNode,V=o.memoizedProps;I.props=V;var z=I.context,Y=u.contextType;typeof Y=="object"&&Y!==null?Y=Wn(Y):(Y=gn(u)?so:Zt.current,Y=ga(o,Y));var ne=u.getDerivedStateFromProps,re=typeof ne=="function"||typeof I.getSnapshotBeforeUpdate=="function";re||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(V!==p||z!==Y)&&Gv(o,I,p,Y),is=!1;var te=o.memoizedState;I.state=te,hd(o,p,I,v),z=o.memoizedState,V!==p||te!==z||pn.current||is?(typeof ne=="function"&&(pm(o,u,ne,p),z=o.memoizedState),(V=is||Kv(o,u,V,p,te,z,Y))?(re||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(o.flags|=4194308)):(typeof I.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=p,o.memoizedState=z),I.props=p,I.state=z,I.context=Y,p=V):(typeof I.componentDidMount=="function"&&(o.flags|=4194308),p=!1)}else{I=o.stateNode,_v(i,o),V=o.memoizedProps,Y=o.type===o.elementType?V:lr(o.type,V),I.props=Y,re=o.pendingProps,te=I.context,z=u.contextType,typeof z=="object"&&z!==null?z=Wn(z):(z=gn(u)?so:Zt.current,z=ga(o,z));var de=u.getDerivedStateFromProps;(ne=typeof de=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(V!==re||te!==z)&&Gv(o,I,p,z),is=!1,te=o.memoizedState,I.state=te,hd(o,p,I,v);var ge=o.memoizedState;V!==re||te!==ge||pn.current||is?(typeof de=="function"&&(pm(o,u,de,p),ge=o.memoizedState),(Y=is||Kv(o,u,Y,p,te,ge,z)||!1)?(ne||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(p,ge,z),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(p,ge,z)),typeof I.componentDidUpdate=="function"&&(o.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof I.componentDidUpdate!="function"||V===i.memoizedProps&&te===i.memoizedState||(o.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||V===i.memoizedProps&&te===i.memoizedState||(o.flags|=1024),o.memoizedProps=p,o.memoizedState=ge),I.props=p,I.state=ge,I.context=z,p=Y):(typeof I.componentDidUpdate!="function"||V===i.memoizedProps&&te===i.memoizedState||(o.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||V===i.memoizedProps&&te===i.memoizedState||(o.flags|=1024),p=!1)}return wm(i,o,u,p,w,v)}function wm(i,o,u,p,v,w){i1(i,o);var I=(o.flags&128)!==0;if(!p&&!I)return v&&uv(o,u,!1),gi(i,o,w);p=o.stateNode,ZT.current=o;var V=I&&typeof u.getDerivedStateFromError!="function"?null:p.render();return o.flags|=1,i!==null&&I?(o.child=wa(o,i.child,null,w),o.child=wa(o,null,V,w)):dn(i,o,V,w),o.memoizedState=p.state,v&&uv(o,u,!0),o.child}function o1(i){var o=i.stateNode;o.pendingContext?lv(i,o.pendingContext,o.pendingContext!==o.context):o.context&&lv(i,o.context,!1),rm(i,o.containerInfo)}function a1(i,o,u,p,v){return xa(),Yf(v),o.flags|=256,dn(i,o,u,p),o.child}var _m={dehydrated:null,treeContext:null,retryLane:0};function km(i){return{baseLanes:i,cachePool:null,transitions:null}}function l1(i,o,u){var p=o.pendingProps,v=lt.current,w=!1,I=(o.flags&128)!==0,V;if((V=I)||(V=i!==null&&i.memoizedState===null?!1:(v&2)!==0),V?(w=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(v|=1),Ze(lt,v&1),i===null)return Qf(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(I=p.children,i=p.fallback,w?(p=o.mode,w=o.child,I={mode:"hidden",children:I},(p&1)===0&&w!==null?(w.childLanes=0,w.pendingProps=I):w=Md(I,p,0,null),i=go(i,p,u,null),w.return=o,i.return=o,w.sibling=i,o.child=w,o.child.memoizedState=km(u),o.memoizedState=_m,i):bm(o,I));if(v=i.memoizedState,v!==null&&(V=v.dehydrated,V!==null))return eI(i,o,I,p,V,v,u);if(w){w=p.fallback,I=o.mode,v=i.child,V=v.sibling;var z={mode:"hidden",children:p.children};return(I&1)===0&&o.child!==v?(p=o.child,p.childLanes=0,p.pendingProps=z,o.deletions=null):(p=ds(v,z),p.subtreeFlags=v.subtreeFlags&14680064),V!==null?w=ds(V,w):(w=go(w,I,u,null),w.flags|=2),w.return=o,p.return=o,p.sibling=w,o.child=p,p=w,w=o.child,I=i.child.memoizedState,I=I===null?km(u):{baseLanes:I.baseLanes|u,cachePool:null,transitions:I.transitions},w.memoizedState=I,w.childLanes=i.childLanes&~u,o.memoizedState=_m,p}return w=i.child,i=w.sibling,p=ds(w,{mode:"visible",children:p.children}),(o.mode&1)===0&&(p.lanes=u),p.return=o,p.sibling=null,i!==null&&(u=o.deletions,u===null?(o.deletions=[i],o.flags|=16):u.push(i)),o.child=p,o.memoizedState=null,p}function bm(i,o){return o=Md({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function wd(i,o,u,p){return p!==null&&Yf(p),wa(o,i.child,null,u),i=bm(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function eI(i,o,u,p,v,w,I){if(u)return o.flags&256?(o.flags&=-257,p=ym(Error(t(422))),wd(i,o,I,p)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(w=p.fallback,v=o.mode,p=Md({mode:"visible",children:p.children},v,0,null),w=go(w,v,I,null),w.flags|=2,p.return=o,w.return=o,p.sibling=w,o.child=p,(o.mode&1)!==0&&wa(o,i.child,null,I),o.child.memoizedState=km(I),o.memoizedState=_m,w);if((o.mode&1)===0)return wd(i,o,I,null);if(v.data==="$!"){if(p=v.nextSibling&&v.nextSibling.dataset,p)var V=p.dgst;return p=V,w=Error(t(419)),p=ym(w,p,void 0),wd(i,o,I,p)}if(V=(I&i.childLanes)!==0,yn||V){if(p=Bt,p!==null){switch(I&-I){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=(v&(p.suspendedLanes|I))!==0?0:v,v!==0&&v!==w.retryLane&&(w.retryLane=v,mi(i,v),dr(p,i,v,-1))}return Bm(),p=ym(Error(t(421))),wd(i,o,I,p)}return v.data==="$?"?(o.flags|=128,o.child=i.child,o=fI.bind(null,i),v._reactRetry=o,null):(i=w.treeContext,Mn=es(v.nextSibling),Pn=o,ot=!0,ar=null,i!==null&&(Un[$n++]=hi,Un[$n++]=fi,Un[$n++]=oo,hi=i.id,fi=i.overflow,oo=o),o=bm(o,p.children),o.flags|=4096,o)}function c1(i,o,u){i.lanes|=o;var p=i.alternate;p!==null&&(p.lanes|=o),em(i.return,o,u)}function Sm(i,o,u,p,v){var w=i.memoizedState;w===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:p,tail:u,tailMode:v}:(w.isBackwards=o,w.rendering=null,w.renderingStartTime=0,w.last=p,w.tail=u,w.tailMode=v)}function u1(i,o,u){var p=o.pendingProps,v=p.revealOrder,w=p.tail;if(dn(i,o,p.children,u),p=lt.current,(p&2)!==0)p=p&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&c1(i,u,o);else if(i.tag===19)c1(i,u,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}p&=1}if(Ze(lt,p),(o.mode&1)===0)o.memoizedState=null;else switch(v){case"forwards":for(u=o.child,v=null;u!==null;)i=u.alternate,i!==null&&fd(i)===null&&(v=u),u=u.sibling;u=v,u===null?(v=o.child,o.child=null):(v=u.sibling,u.sibling=null),Sm(o,!1,v,u,w);break;case"backwards":for(u=null,v=o.child,o.child=null;v!==null;){if(i=v.alternate,i!==null&&fd(i)===null){o.child=v;break}i=v.sibling,v.sibling=u,u=v,v=i}Sm(o,!0,u,null,w);break;case"together":Sm(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function _d(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function gi(i,o,u){if(i!==null&&(o.dependencies=i.dependencies),ho|=o.lanes,(u&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,u=ds(i,i.pendingProps),o.child=u,u.return=o;i.sibling!==null;)i=i.sibling,u=u.sibling=ds(i,i.pendingProps),u.return=o;u.sibling=null}return o.child}function tI(i,o,u){switch(o.tag){case 3:o1(o),xa();break;case 5:Sv(o);break;case 1:gn(o.type)&&rd(o);break;case 4:rm(o,o.stateNode.containerInfo);break;case 10:var p=o.type._context,v=o.memoizedProps.value;Ze(cd,p._currentValue),p._currentValue=v;break;case 13:if(p=o.memoizedState,p!==null)return p.dehydrated!==null?(Ze(lt,lt.current&1),o.flags|=128,null):(u&o.child.childLanes)!==0?l1(i,o,u):(Ze(lt,lt.current&1),i=gi(i,o,u),i!==null?i.sibling:null);Ze(lt,lt.current&1);break;case 19:if(p=(u&o.childLanes)!==0,(i.flags&128)!==0){if(p)return u1(i,o,u);o.flags|=128}if(v=o.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),Ze(lt,lt.current),p)break;return null;case 22:case 23:return o.lanes=0,r1(i,o,u)}return gi(i,o,u)}var d1,Em,h1,f1;d1=function(i,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)i.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},Em=function(){},h1=function(i,o,u,p){var v=i.memoizedProps;if(v!==p){i=o.stateNode,co(Or.current);var w=null;switch(u){case"input":v=Uo(i,v),p=Uo(i,p),w=[];break;case"select":v=le({},v,{value:void 0}),p=le({},p,{value:void 0}),w=[];break;case"textarea":v=Tl(i,v),p=Tl(i,p),w=[];break;default:typeof v.onClick!="function"&&typeof p.onClick=="function"&&(i.onclick=ed)}rr(u,p);var I;u=null;for(Y in v)if(!p.hasOwnProperty(Y)&&v.hasOwnProperty(Y)&&v[Y]!=null)if(Y==="style"){var V=v[Y];for(I in V)V.hasOwnProperty(I)&&(u||(u={}),u[I]="")}else Y!=="dangerouslySetInnerHTML"&&Y!=="children"&&Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&Y!=="autoFocus"&&(s.hasOwnProperty(Y)?w||(w=[]):(w=w||[]).push(Y,null));for(Y in p){var z=p[Y];if(V=v!=null?v[Y]:void 0,p.hasOwnProperty(Y)&&z!==V&&(z!=null||V!=null))if(Y==="style")if(V){for(I in V)!V.hasOwnProperty(I)||z&&z.hasOwnProperty(I)||(u||(u={}),u[I]="");for(I in z)z.hasOwnProperty(I)&&V[I]!==z[I]&&(u||(u={}),u[I]=z[I])}else u||(w||(w=[]),w.push(Y,u)),u=z;else Y==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,V=V?V.__html:void 0,z!=null&&V!==z&&(w=w||[]).push(Y,z)):Y==="children"?typeof z!="string"&&typeof z!="number"||(w=w||[]).push(Y,""+z):Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&(s.hasOwnProperty(Y)?(z!=null&&Y==="onScroll"&&nt("scroll",i),w||V===z||(w=[])):(w=w||[]).push(Y,z))}u&&(w=w||[]).push("style",u);var Y=w;(o.updateQueue=Y)&&(o.flags|=4)}},f1=function(i,o,u,p){u!==p&&(o.flags|=4)};function hc(i,o){if(!ot)switch(i.tailMode){case"hidden":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:p.sibling=null}}function tn(i){var o=i.alternate!==null&&i.alternate.child===i.child,u=0,p=0;if(o)for(var v=i.child;v!==null;)u|=v.lanes|v.childLanes,p|=v.subtreeFlags&14680064,p|=v.flags&14680064,v.return=i,v=v.sibling;else for(v=i.child;v!==null;)u|=v.lanes|v.childLanes,p|=v.subtreeFlags,p|=v.flags,v.return=i,v=v.sibling;return i.subtreeFlags|=p,i.childLanes=u,o}function nI(i,o,u){var p=o.pendingProps;switch(qf(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(o),null;case 1:return gn(o.type)&&nd(),tn(o),null;case 3:return p=o.stateNode,ba(),rt(pn),rt(Zt),om(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(i===null||i.child===null)&&(ad(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,ar!==null&&(Vm(ar),ar=null))),Em(i,o),tn(o),null;case 5:im(o);var v=co(ac.current);if(u=o.type,i!==null&&o.stateNode!=null)h1(i,o,u,p,v),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!p){if(o.stateNode===null)throw Error(t(166));return tn(o),null}if(i=co(Or.current),ad(o)){p=o.stateNode,u=o.type;var w=o.memoizedProps;switch(p[Lr]=o,p[nc]=w,i=(o.mode&1)!==0,u){case"dialog":nt("cancel",p),nt("close",p);break;case"iframe":case"object":case"embed":nt("load",p);break;case"video":case"audio":for(v=0;v<Zl.length;v++)nt(Zl[v],p);break;case"source":nt("error",p);break;case"img":case"image":case"link":nt("error",p),nt("load",p);break;case"details":nt("toggle",p);break;case"input":Eu(p,w),nt("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!w.multiple},nt("invalid",p);break;case"textarea":Il(p,w),nt("invalid",p)}rr(u,w),v=null;for(var I in w)if(w.hasOwnProperty(I)){var V=w[I];I==="children"?typeof V=="string"?p.textContent!==V&&(w.suppressHydrationWarning!==!0&&Zu(p.textContent,V,i),v=["children",V]):typeof V=="number"&&p.textContent!==""+V&&(w.suppressHydrationWarning!==!0&&Zu(p.textContent,V,i),v=["children",""+V]):s.hasOwnProperty(I)&&V!=null&&I==="onScroll"&&nt("scroll",p)}switch(u){case"input":Fo(p),El(p,w,!0);break;case"textarea":Fo(p),Oi(p);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(p.onclick=ed)}p=v,o.updateQueue=p,p!==null&&(o.flags|=4)}else{I=v.nodeType===9?v:v.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Cl(u)),i==="http://www.w3.org/1999/xhtml"?u==="script"?(i=I.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof p.is=="string"?i=I.createElement(u,{is:p.is}):(i=I.createElement(u),u==="select"&&(I=i,p.multiple?I.multiple=!0:p.size&&(I.size=p.size))):i=I.createElementNS(i,u),i[Lr]=o,i[nc]=p,d1(i,o,!1,!1),o.stateNode=i;e:{switch(I=Ko(u,p),u){case"dialog":nt("cancel",i),nt("close",i),v=p;break;case"iframe":case"object":case"embed":nt("load",i),v=p;break;case"video":case"audio":for(v=0;v<Zl.length;v++)nt(Zl[v],i);v=p;break;case"source":nt("error",i),v=p;break;case"img":case"image":case"link":nt("error",i),nt("load",i),v=p;break;case"details":nt("toggle",i),v=p;break;case"input":Eu(i,p),v=Uo(i,p),nt("invalid",i);break;case"option":v=p;break;case"select":i._wrapperState={wasMultiple:!!p.multiple},v=le({},p,{value:void 0}),nt("invalid",i);break;case"textarea":Il(i,p),v=Tl(i,p),nt("invalid",i);break;default:v=p}rr(u,v),V=v;for(w in V)if(V.hasOwnProperty(w)){var z=V[w];w==="style"?Ho(i,z):w==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,z!=null&&Iu(i,z)):w==="children"?typeof z=="string"?(u!=="textarea"||z!=="")&&Ws(i,z):typeof z=="number"&&Ws(i,""+z):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(s.hasOwnProperty(w)?z!=null&&w==="onScroll"&&nt("scroll",i):z!=null&&P(i,w,z,I))}switch(u){case"input":Fo(i),El(i,p,!1);break;case"textarea":Fo(i),Oi(i);break;case"option":p.value!=null&&i.setAttribute("value",""+Ue(p.value));break;case"select":i.multiple=!!p.multiple,w=p.value,w!=null?nr(i,!!p.multiple,w,!1):p.defaultValue!=null&&nr(i,!!p.multiple,p.defaultValue,!0);break;default:typeof v.onClick=="function"&&(i.onclick=ed)}switch(u){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return tn(o),null;case 6:if(i&&o.stateNode!=null)f1(i,o,i.memoizedProps,p);else{if(typeof p!="string"&&o.stateNode===null)throw Error(t(166));if(u=co(ac.current),co(Or.current),ad(o)){if(p=o.stateNode,u=o.memoizedProps,p[Lr]=o,(w=p.nodeValue!==u)&&(i=Pn,i!==null))switch(i.tag){case 3:Zu(p.nodeValue,u,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Zu(p.nodeValue,u,(i.mode&1)!==0)}w&&(o.flags|=4)}else p=(u.nodeType===9?u:u.ownerDocument).createTextNode(p),p[Lr]=o,o.stateNode=p}return tn(o),null;case 13:if(rt(lt),p=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(ot&&Mn!==null&&(o.mode&1)!==0&&(o.flags&128)===0)gv(),xa(),o.flags|=98560,w=!1;else if(w=ad(o),p!==null&&p.dehydrated!==null){if(i===null){if(!w)throw Error(t(318));if(w=o.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(t(317));w[Lr]=o}else xa(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;tn(o),w=!1}else ar!==null&&(Vm(ar),ar=null),w=!0;if(!w)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=u,o):(p=p!==null,p!==(i!==null&&i.memoizedState!==null)&&p&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(lt.current&1)!==0?Pt===0&&(Pt=3):Bm())),o.updateQueue!==null&&(o.flags|=4),tn(o),null);case 4:return ba(),Em(i,o),i===null&&ec(o.stateNode.containerInfo),tn(o),null;case 10:return Zf(o.type._context),tn(o),null;case 17:return gn(o.type)&&nd(),tn(o),null;case 19:if(rt(lt),w=o.memoizedState,w===null)return tn(o),null;if(p=(o.flags&128)!==0,I=w.rendering,I===null)if(p)hc(w,!1);else{if(Pt!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(I=fd(i),I!==null){for(o.flags|=128,hc(w,!1),p=I.updateQueue,p!==null&&(o.updateQueue=p,o.flags|=4),o.subtreeFlags=0,p=u,u=o.child;u!==null;)w=u,i=p,w.flags&=14680066,I=w.alternate,I===null?(w.childLanes=0,w.lanes=i,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=I.childLanes,w.lanes=I.lanes,w.child=I.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=I.memoizedProps,w.memoizedState=I.memoizedState,w.updateQueue=I.updateQueue,w.type=I.type,i=I.dependencies,w.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),u=u.sibling;return Ze(lt,lt.current&1|2),o.child}i=i.sibling}w.tail!==null&&tt()>Ia&&(o.flags|=128,p=!0,hc(w,!1),o.lanes=4194304)}else{if(!p)if(i=fd(I),i!==null){if(o.flags|=128,p=!0,u=i.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),hc(w,!0),w.tail===null&&w.tailMode==="hidden"&&!I.alternate&&!ot)return tn(o),null}else 2*tt()-w.renderingStartTime>Ia&&u!==1073741824&&(o.flags|=128,p=!0,hc(w,!1),o.lanes=4194304);w.isBackwards?(I.sibling=o.child,o.child=I):(u=w.last,u!==null?u.sibling=I:o.child=I,w.last=I)}return w.tail!==null?(o=w.tail,w.rendering=o,w.tail=o.sibling,w.renderingStartTime=tt(),o.sibling=null,u=lt.current,Ze(lt,p?u&1|2:u&1),o):(tn(o),null);case 22:case 23:return Om(),p=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==p&&(o.flags|=8192),p&&(o.mode&1)!==0?(Nn&1073741824)!==0&&(tn(o),o.subtreeFlags&6&&(o.flags|=8192)):tn(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function rI(i,o){switch(qf(o),o.tag){case 1:return gn(o.type)&&nd(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return ba(),rt(pn),rt(Zt),om(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return im(o),null;case 13:if(rt(lt),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));xa()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return rt(lt),null;case 4:return ba(),null;case 10:return Zf(o.type._context),null;case 22:case 23:return Om(),null;case 24:return null;default:return null}}var kd=!1,nn=!1,iI=typeof WeakSet=="function"?WeakSet:Set,me=null;function Ea(i,o){var u=i.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(p){mt(i,o,p)}else u.current=null}function Tm(i,o,u){try{u()}catch(p){mt(i,o,p)}}var m1=!1;function sI(i,o){if(Of=ai,i=K0(),Rf(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var p=u.getSelection&&u.getSelection();if(p&&p.rangeCount!==0){u=p.anchorNode;var v=p.anchorOffset,w=p.focusNode;p=p.focusOffset;try{u.nodeType,w.nodeType}catch{u=null;break e}var I=0,V=-1,z=-1,Y=0,ne=0,re=i,te=null;t:for(;;){for(var de;re!==u||v!==0&&re.nodeType!==3||(V=I+v),re!==w||p!==0&&re.nodeType!==3||(z=I+p),re.nodeType===3&&(I+=re.nodeValue.length),(de=re.firstChild)!==null;)te=re,re=de;for(;;){if(re===i)break t;if(te===u&&++Y===v&&(V=I),te===w&&++ne===p&&(z=I),(de=re.nextSibling)!==null)break;re=te,te=re.parentNode}re=de}u=V===-1||z===-1?null:{start:V,end:z}}else u=null}u=u||{start:0,end:0}}else u=null;for(Bf={focusedElem:i,selectionRange:u},ai=!1,me=o;me!==null;)if(o=me,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,me=i;else for(;me!==null;){o=me;try{var ge=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(ge!==null){var ye=ge.memoizedProps,xt=ge.memoizedState,K=o.stateNode,U=K.getSnapshotBeforeUpdate(o.elementType===o.type?ye:lr(o.type,ye),xt);K.__reactInternalSnapshotBeforeUpdate=U}break;case 3:var Q=o.stateNode.containerInfo;Q.nodeType===1?Q.textContent="":Q.nodeType===9&&Q.documentElement&&Q.removeChild(Q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(se){mt(o,o.return,se)}if(i=o.sibling,i!==null){i.return=o.return,me=i;break}me=o.return}return ge=m1,m1=!1,ge}function fc(i,o,u){var p=o.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var v=p=p.next;do{if((v.tag&i)===i){var w=v.destroy;v.destroy=void 0,w!==void 0&&Tm(o,u,w)}v=v.next}while(v!==p)}}function bd(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&i)===i){var p=u.create;u.destroy=p()}u=u.next}while(u!==o)}}function Im(i){var o=i.ref;if(o!==null){var u=i.stateNode;switch(i.tag){case 5:i=u;break;default:i=u}typeof o=="function"?o(i):o.current=i}}function p1(i){var o=i.alternate;o!==null&&(i.alternate=null,p1(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[Lr],delete o[nc],delete o[$f],delete o[FT],delete o[UT])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function g1(i){return i.tag===5||i.tag===3||i.tag===4}function y1(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||g1(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Cm(i,o,u){var p=i.tag;if(p===5||p===6)i=i.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(i,o):u.insertBefore(i,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(i,u)):(o=u,o.appendChild(i)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=ed));else if(p!==4&&(i=i.child,i!==null))for(Cm(i,o,u),i=i.sibling;i!==null;)Cm(i,o,u),i=i.sibling}function Am(i,o,u){var p=i.tag;if(p===5||p===6)i=i.stateNode,o?u.insertBefore(i,o):u.appendChild(i);else if(p!==4&&(i=i.child,i!==null))for(Am(i,o,u),i=i.sibling;i!==null;)Am(i,o,u),i=i.sibling}var Ht=null,cr=!1;function os(i,o,u){for(u=u.child;u!==null;)v1(i,o,u),u=u.sibling}function v1(i,o,u){if(Tn&&typeof Tn.onCommitFiberUnmount=="function")try{Tn.onCommitFiberUnmount(Qs,u)}catch{}switch(u.tag){case 5:nn||Ea(u,o);case 6:var p=Ht,v=cr;Ht=null,os(i,o,u),Ht=p,cr=v,Ht!==null&&(cr?(i=Ht,u=u.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)):Ht.removeChild(u.stateNode));break;case 18:Ht!==null&&(cr?(i=Ht,u=u.stateNode,i.nodeType===8?Uf(i.parentNode,u):i.nodeType===1&&Uf(i,u),Yi(i)):Uf(Ht,u.stateNode));break;case 4:p=Ht,v=cr,Ht=u.stateNode.containerInfo,cr=!0,os(i,o,u),Ht=p,cr=v;break;case 0:case 11:case 14:case 15:if(!nn&&(p=u.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){v=p=p.next;do{var w=v,I=w.destroy;w=w.tag,I!==void 0&&((w&2)!==0||(w&4)!==0)&&Tm(u,o,I),v=v.next}while(v!==p)}os(i,o,u);break;case 1:if(!nn&&(Ea(u,o),p=u.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=u.memoizedProps,p.state=u.memoizedState,p.componentWillUnmount()}catch(V){mt(u,o,V)}os(i,o,u);break;case 21:os(i,o,u);break;case 22:u.mode&1?(nn=(p=nn)||u.memoizedState!==null,os(i,o,u),nn=p):os(i,o,u);break;default:os(i,o,u)}}function x1(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var u=i.stateNode;u===null&&(u=i.stateNode=new iI),o.forEach(function(p){var v=mI.bind(null,i,p);u.has(p)||(u.add(p),p.then(v,v))})}}function ur(i,o){var u=o.deletions;if(u!==null)for(var p=0;p<u.length;p++){var v=u[p];try{var w=i,I=o,V=I;e:for(;V!==null;){switch(V.tag){case 5:Ht=V.stateNode,cr=!1;break e;case 3:Ht=V.stateNode.containerInfo,cr=!0;break e;case 4:Ht=V.stateNode.containerInfo,cr=!0;break e}V=V.return}if(Ht===null)throw Error(t(160));v1(w,I,v),Ht=null,cr=!1;var z=v.alternate;z!==null&&(z.return=null),v.return=null}catch(Y){mt(v,o,Y)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)w1(o,i),o=o.sibling}function w1(i,o){var u=i.alternate,p=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(ur(o,i),zr(i),p&4){try{fc(3,i,i.return),bd(3,i)}catch(ye){mt(i,i.return,ye)}try{fc(5,i,i.return)}catch(ye){mt(i,i.return,ye)}}break;case 1:ur(o,i),zr(i),p&512&&u!==null&&Ea(u,u.return);break;case 5:if(ur(o,i),zr(i),p&512&&u!==null&&Ea(u,u.return),i.flags&32){var v=i.stateNode;try{Ws(v,"")}catch(ye){mt(i,i.return,ye)}}if(p&4&&(v=i.stateNode,v!=null)){var w=i.memoizedProps,I=u!==null?u.memoizedProps:w,V=i.type,z=i.updateQueue;if(i.updateQueue=null,z!==null)try{V==="input"&&w.type==="radio"&&w.name!=null&&$o(v,w),Ko(V,I);var Y=Ko(V,w);for(I=0;I<z.length;I+=2){var ne=z[I],re=z[I+1];ne==="style"?Ho(v,re):ne==="dangerouslySetInnerHTML"?Iu(v,re):ne==="children"?Ws(v,re):P(v,ne,re,Y)}switch(V){case"input":$s(v,w);break;case"textarea":Tu(v,w);break;case"select":var te=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!w.multiple;var de=w.value;de!=null?nr(v,!!w.multiple,de,!1):te!==!!w.multiple&&(w.defaultValue!=null?nr(v,!!w.multiple,w.defaultValue,!0):nr(v,!!w.multiple,w.multiple?[]:"",!1))}v[nc]=w}catch(ye){mt(i,i.return,ye)}}break;case 6:if(ur(o,i),zr(i),p&4){if(i.stateNode===null)throw Error(t(162));v=i.stateNode,w=i.memoizedProps;try{v.nodeValue=w}catch(ye){mt(i,i.return,ye)}}break;case 3:if(ur(o,i),zr(i),p&4&&u!==null&&u.memoizedState.isDehydrated)try{Yi(o.containerInfo)}catch(ye){mt(i,i.return,ye)}break;case 4:ur(o,i),zr(i);break;case 13:ur(o,i),zr(i),v=i.child,v.flags&8192&&(w=v.memoizedState!==null,v.stateNode.isHidden=w,!w||v.alternate!==null&&v.alternate.memoizedState!==null||(Pm=tt())),p&4&&x1(i);break;case 22:if(ne=u!==null&&u.memoizedState!==null,i.mode&1?(nn=(Y=nn)||ne,ur(o,i),nn=Y):ur(o,i),zr(i),p&8192){if(Y=i.memoizedState!==null,(i.stateNode.isHidden=Y)&&!ne&&(i.mode&1)!==0)for(me=i,ne=i.child;ne!==null;){for(re=me=ne;me!==null;){switch(te=me,de=te.child,te.tag){case 0:case 11:case 14:case 15:fc(4,te,te.return);break;case 1:Ea(te,te.return);var ge=te.stateNode;if(typeof ge.componentWillUnmount=="function"){p=te,u=te.return;try{o=p,ge.props=o.memoizedProps,ge.state=o.memoizedState,ge.componentWillUnmount()}catch(ye){mt(p,u,ye)}}break;case 5:Ea(te,te.return);break;case 22:if(te.memoizedState!==null){b1(re);continue}}de!==null?(de.return=te,me=de):b1(re)}ne=ne.sibling}e:for(ne=null,re=i;;){if(re.tag===5){if(ne===null){ne=re;try{v=re.stateNode,Y?(w=v.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(V=re.stateNode,z=re.memoizedProps.style,I=z!=null&&z.hasOwnProperty("display")?z.display:null,V.style.display=Fi("display",I))}catch(ye){mt(i,i.return,ye)}}}else if(re.tag===6){if(ne===null)try{re.stateNode.nodeValue=Y?"":re.memoizedProps}catch(ye){mt(i,i.return,ye)}}else if((re.tag!==22&&re.tag!==23||re.memoizedState===null||re===i)&&re.child!==null){re.child.return=re,re=re.child;continue}if(re===i)break e;for(;re.sibling===null;){if(re.return===null||re.return===i)break e;ne===re&&(ne=null),re=re.return}ne===re&&(ne=null),re.sibling.return=re.return,re=re.sibling}}break;case 19:ur(o,i),zr(i),p&4&&x1(i);break;case 21:break;default:ur(o,i),zr(i)}}function zr(i){var o=i.flags;if(o&2){try{e:{for(var u=i.return;u!==null;){if(g1(u)){var p=u;break e}u=u.return}throw Error(t(160))}switch(p.tag){case 5:var v=p.stateNode;p.flags&32&&(Ws(v,""),p.flags&=-33);var w=y1(i);Am(i,w,v);break;case 3:case 4:var I=p.stateNode.containerInfo,V=y1(i);Cm(i,V,I);break;default:throw Error(t(161))}}catch(z){mt(i,i.return,z)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function oI(i,o,u){me=i,_1(i)}function _1(i,o,u){for(var p=(i.mode&1)!==0;me!==null;){var v=me,w=v.child;if(v.tag===22&&p){var I=v.memoizedState!==null||kd;if(!I){var V=v.alternate,z=V!==null&&V.memoizedState!==null||nn;V=kd;var Y=nn;if(kd=I,(nn=z)&&!Y)for(me=v;me!==null;)I=me,z=I.child,I.tag===22&&I.memoizedState!==null?S1(v):z!==null?(z.return=I,me=z):S1(v);for(;w!==null;)me=w,_1(w),w=w.sibling;me=v,kd=V,nn=Y}k1(i)}else(v.subtreeFlags&8772)!==0&&w!==null?(w.return=v,me=w):k1(i)}}function k1(i){for(;me!==null;){var o=me;if((o.flags&8772)!==0){var u=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:nn||bd(5,o);break;case 1:var p=o.stateNode;if(o.flags&4&&!nn)if(u===null)p.componentDidMount();else{var v=o.elementType===o.type?u.memoizedProps:lr(o.type,u.memoizedProps);p.componentDidUpdate(v,u.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var w=o.updateQueue;w!==null&&bv(o,w,p);break;case 3:var I=o.updateQueue;if(I!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}bv(o,I,u)}break;case 5:var V=o.stateNode;if(u===null&&o.flags&4){u=V;var z=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":z.autoFocus&&u.focus();break;case"img":z.src&&(u.src=z.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var Y=o.alternate;if(Y!==null){var ne=Y.memoizedState;if(ne!==null){var re=ne.dehydrated;re!==null&&Yi(re)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}nn||o.flags&512&&Im(o)}catch(te){mt(o,o.return,te)}}if(o===i){me=null;break}if(u=o.sibling,u!==null){u.return=o.return,me=u;break}me=o.return}}function b1(i){for(;me!==null;){var o=me;if(o===i){me=null;break}var u=o.sibling;if(u!==null){u.return=o.return,me=u;break}me=o.return}}function S1(i){for(;me!==null;){var o=me;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{bd(4,o)}catch(z){mt(o,u,z)}break;case 1:var p=o.stateNode;if(typeof p.componentDidMount=="function"){var v=o.return;try{p.componentDidMount()}catch(z){mt(o,v,z)}}var w=o.return;try{Im(o)}catch(z){mt(o,w,z)}break;case 5:var I=o.return;try{Im(o)}catch(z){mt(o,I,z)}}}catch(z){mt(o,o.return,z)}if(o===i){me=null;break}var V=o.sibling;if(V!==null){V.return=o.return,me=V;break}me=o.return}}var aI=Math.ceil,Sd=G.ReactCurrentDispatcher,Rm=G.ReactCurrentOwner,Kn=G.ReactCurrentBatchConfig,$e=0,Bt=null,Et=null,Kt=0,Nn=0,Ta=ts(0),Pt=0,mc=null,ho=0,Ed=0,jm=0,pc=null,vn=null,Pm=0,Ia=1/0,yi=null,Td=!1,Mm=null,as=null,Id=!1,ls=null,Cd=0,gc=0,Nm=null,Ad=-1,Rd=0;function hn(){return($e&6)!==0?tt():Ad!==-1?Ad:Ad=tt()}function cs(i){return(i.mode&1)===0?1:($e&2)!==0&&Kt!==0?Kt&-Kt:WT.transition!==null?(Rd===0&&(Rd=Ll()),Rd):(i=ze,i!==0||(i=window.event,i=i===void 0?16:na(i.type)),i)}function dr(i,o,u,p){if(50<gc)throw gc=0,Nm=null,Error(t(185));Zs(i,u,p),(($e&2)===0||i!==Bt)&&(i===Bt&&(($e&2)===0&&(Ed|=u),Pt===4&&us(i,Kt)),xn(i,p),u===1&&$e===0&&(o.mode&1)===0&&(Ia=tt()+500,id&&rs()))}function xn(i,o){var u=i.callbackNode;Js(i,o);var p=ii(i,i===Bt?Kt:0);if(p===0)u!==null&&Qo(u),i.callbackNode=null,i.callbackPriority=0;else if(o=p&-p,i.callbackPriority!==o){if(u!=null&&Qo(u),o===1)i.tag===0?$T(T1.bind(null,i)):dv(T1.bind(null,i)),BT(function(){($e&6)===0&&rs()}),u=null;else{switch(Ir(p)){case 1:u=Yo;break;case 4:u=Nl;break;case 16:u=Gs;break;case 536870912:u=Xo;break;default:u=Gs}u=N1(u,E1.bind(null,i))}i.callbackPriority=o,i.callbackNode=u}}function E1(i,o){if(Ad=-1,Rd=0,($e&6)!==0)throw Error(t(327));var u=i.callbackNode;if(Ca()&&i.callbackNode!==u)return null;var p=ii(i,i===Bt?Kt:0);if(p===0)return null;if((p&30)!==0||(p&i.expiredLanes)!==0||o)o=jd(i,p);else{o=p;var v=$e;$e|=2;var w=C1();(Bt!==i||Kt!==o)&&(yi=null,Ia=tt()+500,mo(i,o));do try{uI();break}catch(V){I1(i,V)}while(!0);Jf(),Sd.current=w,$e=v,Et!==null?o=0:(Bt=null,Kt=0,o=Pt)}if(o!==0){if(o===2&&(v=Vl(i),v!==0&&(p=v,o=Dm(i,v))),o===1)throw u=mc,mo(i,0),us(i,p),xn(i,tt()),u;if(o===6)us(i,p);else{if(v=i.current.alternate,(p&30)===0&&!lI(v)&&(o=jd(i,p),o===2&&(w=Vl(i),w!==0&&(p=w,o=Dm(i,w))),o===1))throw u=mc,mo(i,0),us(i,p),xn(i,tt()),u;switch(i.finishedWork=v,i.finishedLanes=p,o){case 0:case 1:throw Error(t(345));case 2:po(i,vn,yi);break;case 3:if(us(i,p),(p&130023424)===p&&(o=Pm+500-tt(),10<o)){if(ii(i,0)!==0)break;if(v=i.suspendedLanes,(v&p)!==p){hn(),i.pingedLanes|=i.suspendedLanes&v;break}i.timeoutHandle=Ff(po.bind(null,i,vn,yi),o);break}po(i,vn,yi);break;case 4:if(us(i,p),(p&4194240)===p)break;for(o=i.eventTimes,v=-1;0<p;){var I=31-In(p);w=1<<I,I=o[I],I>v&&(v=I),p&=~w}if(p=v,p=tt()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*aI(p/1960))-p,10<p){i.timeoutHandle=Ff(po.bind(null,i,vn,yi),p);break}po(i,vn,yi);break;case 5:po(i,vn,yi);break;default:throw Error(t(329))}}}return xn(i,tt()),i.callbackNode===u?E1.bind(null,i):null}function Dm(i,o){var u=pc;return i.current.memoizedState.isDehydrated&&(mo(i,o).flags|=256),i=jd(i,o),i!==2&&(o=vn,vn=u,o!==null&&Vm(o)),i}function Vm(i){vn===null?vn=i:vn.push.apply(vn,i)}function lI(i){for(var o=i;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var p=0;p<u.length;p++){var v=u[p],w=v.getSnapshot;v=v.value;try{if(!or(w(),v))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function us(i,o){for(o&=~jm,o&=~Ed,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var u=31-In(o),p=1<<u;i[u]=-1,o&=~p}}function T1(i){if(($e&6)!==0)throw Error(t(327));Ca();var o=ii(i,0);if((o&1)===0)return xn(i,tt()),null;var u=jd(i,o);if(i.tag!==0&&u===2){var p=Vl(i);p!==0&&(o=p,u=Dm(i,p))}if(u===1)throw u=mc,mo(i,0),us(i,o),xn(i,tt()),u;if(u===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,po(i,vn,yi),xn(i,tt()),null}function Lm(i,o){var u=$e;$e|=1;try{return i(o)}finally{$e=u,$e===0&&(Ia=tt()+500,id&&rs())}}function fo(i){ls!==null&&ls.tag===0&&($e&6)===0&&Ca();var o=$e;$e|=1;var u=Kn.transition,p=ze;try{if(Kn.transition=null,ze=1,i)return i()}finally{ze=p,Kn.transition=u,$e=o,($e&6)===0&&rs()}}function Om(){Nn=Ta.current,rt(Ta)}function mo(i,o){i.finishedWork=null,i.finishedLanes=0;var u=i.timeoutHandle;if(u!==-1&&(i.timeoutHandle=-1,OT(u)),Et!==null)for(u=Et.return;u!==null;){var p=u;switch(qf(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&nd();break;case 3:ba(),rt(pn),rt(Zt),om();break;case 5:im(p);break;case 4:ba();break;case 13:rt(lt);break;case 19:rt(lt);break;case 10:Zf(p.type._context);break;case 22:case 23:Om()}u=u.return}if(Bt=i,Et=i=ds(i.current,null),Kt=Nn=o,Pt=0,mc=null,jm=Ed=ho=0,vn=pc=null,lo!==null){for(o=0;o<lo.length;o++)if(u=lo[o],p=u.interleaved,p!==null){u.interleaved=null;var v=p.next,w=u.pending;if(w!==null){var I=w.next;w.next=v,p.next=I}u.pending=p}lo=null}return i}function I1(i,o){do{var u=Et;try{if(Jf(),md.current=vd,pd){for(var p=ct.memoizedState;p!==null;){var v=p.queue;v!==null&&(v.pending=null),p=p.next}pd=!1}if(uo=0,Ot=jt=ct=null,lc=!1,cc=0,Rm.current=null,u===null||u.return===null){Pt=1,mc=o,Et=null;break}e:{var w=i,I=u.return,V=u,z=o;if(o=Kt,V.flags|=32768,z!==null&&typeof z=="object"&&typeof z.then=="function"){var Y=z,ne=V,re=ne.tag;if((ne.mode&1)===0&&(re===0||re===11||re===15)){var te=ne.alternate;te?(ne.updateQueue=te.updateQueue,ne.memoizedState=te.memoizedState,ne.lanes=te.lanes):(ne.updateQueue=null,ne.memoizedState=null)}var de=Jv(I);if(de!==null){de.flags&=-257,Zv(de,I,V,w,o),de.mode&1&&Xv(w,Y,o),o=de,z=Y;var ge=o.updateQueue;if(ge===null){var ye=new Set;ye.add(z),o.updateQueue=ye}else ge.add(z);break e}else{if((o&1)===0){Xv(w,Y,o),Bm();break e}z=Error(t(426))}}else if(ot&&V.mode&1){var xt=Jv(I);if(xt!==null){(xt.flags&65536)===0&&(xt.flags|=256),Zv(xt,I,V,w,o),Yf(Sa(z,V));break e}}w=z=Sa(z,V),Pt!==4&&(Pt=2),pc===null?pc=[w]:pc.push(w),w=I;do{switch(w.tag){case 3:w.flags|=65536,o&=-o,w.lanes|=o;var K=Qv(w,z,o);kv(w,K);break e;case 1:V=z;var U=w.type,Q=w.stateNode;if((w.flags&128)===0&&(typeof U.getDerivedStateFromError=="function"||Q!==null&&typeof Q.componentDidCatch=="function"&&(as===null||!as.has(Q)))){w.flags|=65536,o&=-o,w.lanes|=o;var se=Yv(w,V,o);kv(w,se);break e}}w=w.return}while(w!==null)}R1(u)}catch(xe){o=xe,Et===u&&u!==null&&(Et=u=u.return);continue}break}while(!0)}function C1(){var i=Sd.current;return Sd.current=vd,i===null?vd:i}function Bm(){(Pt===0||Pt===3||Pt===2)&&(Pt=4),Bt===null||(ho&268435455)===0&&(Ed&268435455)===0||us(Bt,Kt)}function jd(i,o){var u=$e;$e|=2;var p=C1();(Bt!==i||Kt!==o)&&(yi=null,mo(i,o));do try{cI();break}catch(v){I1(i,v)}while(!0);if(Jf(),$e=u,Sd.current=p,Et!==null)throw Error(t(261));return Bt=null,Kt=0,Pt}function cI(){for(;Et!==null;)A1(Et)}function uI(){for(;Et!==null&&!qs();)A1(Et)}function A1(i){var o=M1(i.alternate,i,Nn);i.memoizedProps=i.pendingProps,o===null?R1(i):Et=o,Rm.current=null}function R1(i){var o=i;do{var u=o.alternate;if(i=o.return,(o.flags&32768)===0){if(u=nI(u,o,Nn),u!==null){Et=u;return}}else{if(u=rI(u,o),u!==null){u.flags&=32767,Et=u;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Pt=6,Et=null;return}}if(o=o.sibling,o!==null){Et=o;return}Et=o=i}while(o!==null);Pt===0&&(Pt=5)}function po(i,o,u){var p=ze,v=Kn.transition;try{Kn.transition=null,ze=1,dI(i,o,u,p)}finally{Kn.transition=v,ze=p}return null}function dI(i,o,u,p){do Ca();while(ls!==null);if(($e&6)!==0)throw Error(t(327));u=i.finishedWork;var v=i.finishedLanes;if(u===null)return null;if(i.finishedWork=null,i.finishedLanes=0,u===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var w=u.lanes|u.childLanes;if(Ef(i,w),i===Bt&&(Et=Bt=null,Kt=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Id||(Id=!0,N1(Gs,function(){return Ca(),null})),w=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||w){w=Kn.transition,Kn.transition=null;var I=ze;ze=1;var V=$e;$e|=4,Rm.current=null,sI(i,u),w1(u,i),jT(Bf),ai=!!Of,Bf=Of=null,i.current=u,oI(u),ri(),$e=V,ze=I,Kn.transition=w}else i.current=u;if(Id&&(Id=!1,ls=i,Cd=v),w=i.pendingLanes,w===0&&(as=null),Ou(u.stateNode),xn(i,tt()),o!==null)for(p=i.onRecoverableError,u=0;u<o.length;u++)v=o[u],p(v.value,{componentStack:v.stack,digest:v.digest});if(Td)throw Td=!1,i=Mm,Mm=null,i;return(Cd&1)!==0&&i.tag!==0&&Ca(),w=i.pendingLanes,(w&1)!==0?i===Nm?gc++:(gc=0,Nm=i):gc=0,rs(),null}function Ca(){if(ls!==null){var i=Ir(Cd),o=Kn.transition,u=ze;try{if(Kn.transition=null,ze=16>i?16:i,ls===null)var p=!1;else{if(i=ls,ls=null,Cd=0,($e&6)!==0)throw Error(t(331));var v=$e;for($e|=4,me=i.current;me!==null;){var w=me,I=w.child;if((me.flags&16)!==0){var V=w.deletions;if(V!==null){for(var z=0;z<V.length;z++){var Y=V[z];for(me=Y;me!==null;){var ne=me;switch(ne.tag){case 0:case 11:case 15:fc(8,ne,w)}var re=ne.child;if(re!==null)re.return=ne,me=re;else for(;me!==null;){ne=me;var te=ne.sibling,de=ne.return;if(p1(ne),ne===Y){me=null;break}if(te!==null){te.return=de,me=te;break}me=de}}}var ge=w.alternate;if(ge!==null){var ye=ge.child;if(ye!==null){ge.child=null;do{var xt=ye.sibling;ye.sibling=null,ye=xt}while(ye!==null)}}me=w}}if((w.subtreeFlags&2064)!==0&&I!==null)I.return=w,me=I;else e:for(;me!==null;){if(w=me,(w.flags&2048)!==0)switch(w.tag){case 0:case 11:case 15:fc(9,w,w.return)}var K=w.sibling;if(K!==null){K.return=w.return,me=K;break e}me=w.return}}var U=i.current;for(me=U;me!==null;){I=me;var Q=I.child;if((I.subtreeFlags&2064)!==0&&Q!==null)Q.return=I,me=Q;else e:for(I=U;me!==null;){if(V=me,(V.flags&2048)!==0)try{switch(V.tag){case 0:case 11:case 15:bd(9,V)}}catch(xe){mt(V,V.return,xe)}if(V===I){me=null;break e}var se=V.sibling;if(se!==null){se.return=V.return,me=se;break e}me=V.return}}if($e=v,rs(),Tn&&typeof Tn.onPostCommitFiberRoot=="function")try{Tn.onPostCommitFiberRoot(Qs,i)}catch{}p=!0}return p}finally{ze=u,Kn.transition=o}}return!1}function j1(i,o,u){o=Sa(u,o),o=Qv(i,o,1),i=ss(i,o,1),o=hn(),i!==null&&(Zs(i,1,o),xn(i,o))}function mt(i,o,u){if(i.tag===3)j1(i,i,u);else for(;o!==null;){if(o.tag===3){j1(o,i,u);break}else if(o.tag===1){var p=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(as===null||!as.has(p))){i=Sa(u,i),i=Yv(o,i,1),o=ss(o,i,1),i=hn(),o!==null&&(Zs(o,1,i),xn(o,i));break}}o=o.return}}function hI(i,o,u){var p=i.pingCache;p!==null&&p.delete(o),o=hn(),i.pingedLanes|=i.suspendedLanes&u,Bt===i&&(Kt&u)===u&&(Pt===4||Pt===3&&(Kt&130023424)===Kt&&500>tt()-Pm?mo(i,0):jm|=u),xn(i,o)}function P1(i,o){o===0&&((i.mode&1)===0?o=1:(o=qi,qi<<=1,(qi&130023424)===0&&(qi=4194304)));var u=hn();i=mi(i,o),i!==null&&(Zs(i,o,u),xn(i,u))}function fI(i){var o=i.memoizedState,u=0;o!==null&&(u=o.retryLane),P1(i,u)}function mI(i,o){var u=0;switch(i.tag){case 13:var p=i.stateNode,v=i.memoizedState;v!==null&&(u=v.retryLane);break;case 19:p=i.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(o),P1(i,u)}var M1;M1=function(i,o,u){if(i!==null)if(i.memoizedProps!==o.pendingProps||pn.current)yn=!0;else{if((i.lanes&u)===0&&(o.flags&128)===0)return yn=!1,tI(i,o,u);yn=(i.flags&131072)!==0}else yn=!1,ot&&(o.flags&1048576)!==0&&hv(o,od,o.index);switch(o.lanes=0,o.tag){case 2:var p=o.type;_d(i,o),i=o.pendingProps;var v=ga(o,Zt.current);ka(o,u),v=cm(null,o,p,i,v,u);var w=um();return o.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,gn(p)?(w=!0,rd(o)):w=!1,o.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,nm(o),v.updater=xd,o.stateNode=v,v._reactInternals=o,gm(o,p,i,u),o=wm(null,o,p,!0,w,u)):(o.tag=0,ot&&w&&Kf(o),dn(null,o,v,u),o=o.child),o;case 16:p=o.elementType;e:{switch(_d(i,o),i=o.pendingProps,v=p._init,p=v(p._payload),o.type=p,v=o.tag=gI(p),i=lr(p,i),v){case 0:o=xm(null,o,p,i,u);break e;case 1:o=s1(null,o,p,i,u);break e;case 11:o=e1(null,o,p,i,u);break e;case 14:o=t1(null,o,p,lr(p.type,i),u);break e}throw Error(t(306,p,""))}return o;case 0:return p=o.type,v=o.pendingProps,v=o.elementType===p?v:lr(p,v),xm(i,o,p,v,u);case 1:return p=o.type,v=o.pendingProps,v=o.elementType===p?v:lr(p,v),s1(i,o,p,v,u);case 3:e:{if(o1(o),i===null)throw Error(t(387));p=o.pendingProps,w=o.memoizedState,v=w.element,_v(i,o),hd(o,p,null,u);var I=o.memoizedState;if(p=I.element,w.isDehydrated)if(w={element:p,isDehydrated:!1,cache:I.cache,pendingSuspenseBoundaries:I.pendingSuspenseBoundaries,transitions:I.transitions},o.updateQueue.baseState=w,o.memoizedState=w,o.flags&256){v=Sa(Error(t(423)),o),o=a1(i,o,p,u,v);break e}else if(p!==v){v=Sa(Error(t(424)),o),o=a1(i,o,p,u,v);break e}else for(Mn=es(o.stateNode.containerInfo.firstChild),Pn=o,ot=!0,ar=null,u=xv(o,null,p,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(xa(),p===v){o=gi(i,o,u);break e}dn(i,o,p,u)}o=o.child}return o;case 5:return Sv(o),i===null&&Qf(o),p=o.type,v=o.pendingProps,w=i!==null?i.memoizedProps:null,I=v.children,zf(p,v)?I=null:w!==null&&zf(p,w)&&(o.flags|=32),i1(i,o),dn(i,o,I,u),o.child;case 6:return i===null&&Qf(o),null;case 13:return l1(i,o,u);case 4:return rm(o,o.stateNode.containerInfo),p=o.pendingProps,i===null?o.child=wa(o,null,p,u):dn(i,o,p,u),o.child;case 11:return p=o.type,v=o.pendingProps,v=o.elementType===p?v:lr(p,v),e1(i,o,p,v,u);case 7:return dn(i,o,o.pendingProps,u),o.child;case 8:return dn(i,o,o.pendingProps.children,u),o.child;case 12:return dn(i,o,o.pendingProps.children,u),o.child;case 10:e:{if(p=o.type._context,v=o.pendingProps,w=o.memoizedProps,I=v.value,Ze(cd,p._currentValue),p._currentValue=I,w!==null)if(or(w.value,I)){if(w.children===v.children&&!pn.current){o=gi(i,o,u);break e}}else for(w=o.child,w!==null&&(w.return=o);w!==null;){var V=w.dependencies;if(V!==null){I=w.child;for(var z=V.firstContext;z!==null;){if(z.context===p){if(w.tag===1){z=pi(-1,u&-u),z.tag=2;var Y=w.updateQueue;if(Y!==null){Y=Y.shared;var ne=Y.pending;ne===null?z.next=z:(z.next=ne.next,ne.next=z),Y.pending=z}}w.lanes|=u,z=w.alternate,z!==null&&(z.lanes|=u),em(w.return,u,o),V.lanes|=u;break}z=z.next}}else if(w.tag===10)I=w.type===o.type?null:w.child;else if(w.tag===18){if(I=w.return,I===null)throw Error(t(341));I.lanes|=u,V=I.alternate,V!==null&&(V.lanes|=u),em(I,u,o),I=w.sibling}else I=w.child;if(I!==null)I.return=w;else for(I=w;I!==null;){if(I===o){I=null;break}if(w=I.sibling,w!==null){w.return=I.return,I=w;break}I=I.return}w=I}dn(i,o,v.children,u),o=o.child}return o;case 9:return v=o.type,p=o.pendingProps.children,ka(o,u),v=Wn(v),p=p(v),o.flags|=1,dn(i,o,p,u),o.child;case 14:return p=o.type,v=lr(p,o.pendingProps),v=lr(p.type,v),t1(i,o,p,v,u);case 15:return n1(i,o,o.type,o.pendingProps,u);case 17:return p=o.type,v=o.pendingProps,v=o.elementType===p?v:lr(p,v),_d(i,o),o.tag=1,gn(p)?(i=!0,rd(o)):i=!1,ka(o,u),qv(o,p,v),gm(o,p,v,u),wm(null,o,p,!0,i,u);case 19:return u1(i,o,u);case 22:return r1(i,o,u)}throw Error(t(156,o.tag))};function N1(i,o){return Ml(i,o)}function pI(i,o,u,p){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qn(i,o,u,p){return new pI(i,o,u,p)}function zm(i){return i=i.prototype,!(!i||!i.isReactComponent)}function gI(i){if(typeof i=="function")return zm(i)?1:0;if(i!=null){if(i=i.$$typeof,i===W)return 11;if(i===He)return 14}return 2}function ds(i,o){var u=i.alternate;return u===null?(u=qn(i.tag,o,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=o,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&14680064,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,o=i.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u}function Pd(i,o,u,p,v,w){var I=2;if(p=i,typeof i=="function")zm(i)&&(I=1);else if(typeof i=="string")I=5;else e:switch(i){case A:return go(u.children,v,w,o);case C:I=8,v|=8;break;case M:return i=qn(12,u,o,v|2),i.elementType=M,i.lanes=w,i;case O:return i=qn(13,u,o,v),i.elementType=O,i.lanes=w,i;case Me:return i=qn(19,u,o,v),i.elementType=Me,i.lanes=w,i;case Ee:return Md(u,v,w,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case L:I=10;break e;case B:I=9;break e;case W:I=11;break e;case He:I=14;break e;case kt:I=16,p=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=qn(I,u,o,v),o.elementType=i,o.type=p,o.lanes=w,o}function go(i,o,u,p){return i=qn(7,i,p,o),i.lanes=u,i}function Md(i,o,u,p){return i=qn(22,i,p,o),i.elementType=Ee,i.lanes=u,i.stateNode={isHidden:!1},i}function Fm(i,o,u){return i=qn(6,i,null,o),i.lanes=u,i}function Um(i,o,u){return o=qn(4,i.children!==null?i.children:[],i.key,o),o.lanes=u,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function yI(i,o,u,p,v){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ol(0),this.expirationTimes=Ol(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ol(0),this.identifierPrefix=p,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function $m(i,o,u,p,v,w,I,V,z){return i=new yI(i,o,u,V,z),o===1?(o=1,w===!0&&(o|=8)):o=0,w=qn(3,null,null,o),i.current=w,w.stateNode=i,w.memoizedState={element:p,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},nm(w),i}function vI(i,o,u){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$,key:p==null?null:""+p,children:i,containerInfo:o,implementation:u}}function D1(i){if(!i)return ns;i=i._reactInternals;e:{if(ir(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(gn(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var u=i.type;if(gn(u))return cv(i,u,o)}return o}function V1(i,o,u,p,v,w,I,V,z){return i=$m(u,p,!0,i,v,w,I,V,z),i.context=D1(null),u=i.current,p=hn(),v=cs(u),w=pi(p,v),w.callback=o??null,ss(u,w,v),i.current.lanes=v,Zs(i,v,p),xn(i,p),i}function Nd(i,o,u,p){var v=o.current,w=hn(),I=cs(v);return u=D1(u),o.context===null?o.context=u:o.pendingContext=u,o=pi(w,I),o.payload={element:i},p=p===void 0?null:p,p!==null&&(o.callback=p),i=ss(v,o,I),i!==null&&(dr(i,v,I,w),dd(i,v,I)),I}function Dd(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function L1(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<o?u:o}}function Wm(i,o){L1(i,o),(i=i.alternate)&&L1(i,o)}function xI(){return null}var O1=typeof reportError=="function"?reportError:function(i){console.error(i)};function Hm(i){this._internalRoot=i}Vd.prototype.render=Hm.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));Nd(i,o,null,null)},Vd.prototype.unmount=Hm.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;fo(function(){Nd(null,i,null,null)}),o[ui]=null}};function Vd(i){this._internalRoot=i}Vd.prototype.unstable_scheduleHydration=function(i){if(i){var o=Ul();i={blockedOn:null,target:i,priority:o};for(var u=0;u<Cn.length&&o!==0&&o<Cn[u].priority;u++);Cn.splice(u,0,i),u===0&&ea(i)}};function Km(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Ld(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function B1(){}function wI(i,o,u,p,v){if(v){if(typeof p=="function"){var w=p;p=function(){var Y=Dd(I);w.call(Y)}}var I=V1(o,p,i,0,null,!1,!1,"",B1);return i._reactRootContainer=I,i[ui]=I.current,ec(i.nodeType===8?i.parentNode:i),fo(),I}for(;v=i.lastChild;)i.removeChild(v);if(typeof p=="function"){var V=p;p=function(){var Y=Dd(z);V.call(Y)}}var z=$m(i,0,!1,null,null,!1,!1,"",B1);return i._reactRootContainer=z,i[ui]=z.current,ec(i.nodeType===8?i.parentNode:i),fo(function(){Nd(o,z,u,p)}),z}function Od(i,o,u,p,v){var w=u._reactRootContainer;if(w){var I=w;if(typeof v=="function"){var V=v;v=function(){var z=Dd(I);V.call(z)}}Nd(o,I,i,v)}else I=wI(u,o,i,v,p);return Dd(I)}zl=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var u=Ke(o.pendingLanes);u!==0&&(Bl(o,u|1),xn(o,tt()),($e&6)===0&&(Ia=tt()+500,rs()))}break;case 13:fo(function(){var p=mi(i,1);if(p!==null){var v=hn();dr(p,i,1,v)}}),Wm(i,1)}},Jo=function(i){if(i.tag===13){var o=mi(i,134217728);if(o!==null){var u=hn();dr(o,i,134217728,u)}Wm(i,134217728)}},Fl=function(i){if(i.tag===13){var o=cs(i),u=mi(i,o);if(u!==null){var p=hn();dr(u,i,o,p)}Wm(i,o)}},Ul=function(){return ze},$l=function(i,o){var u=ze;try{return ze=i,o()}finally{ze=u}},ei=function(i,o,u){switch(o){case"input":if($s(i,u),o=u.name,u.type==="radio"&&o!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var p=u[o];if(p!==i&&p.form===i.form){var v=td(p);if(!v)throw Error(t(90));Sl(p),$s(p,v)}}}break;case"textarea":Tu(i,u);break;case"select":o=u.value,o!=null&&nr(i,!!u.multiple,o,!1)}},Au=Lm,Ru=fo;var _I={usingClientEntryPoint:!1,Events:[rc,ma,td,$i,Wi,Lm]},yc={findFiberByHostInstance:io,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},kI={bundleType:yc.bundleType,version:yc.version,rendererPackageName:yc.rendererPackageName,rendererConfig:yc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:G.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Lu(i),i===null?null:i.stateNode},findFiberByHostInstance:yc.findFiberByHostInstance||xI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bd.isDisabled&&Bd.supportsFiber)try{Qs=Bd.inject(kI),Tn=Bd}catch{}}return wn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_I,wn.createPortal=function(i,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Km(o))throw Error(t(200));return vI(i,o,null,u)},wn.createRoot=function(i,o){if(!Km(i))throw Error(t(299));var u=!1,p="",v=O1;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onRecoverableError!==void 0&&(v=o.onRecoverableError)),o=$m(i,1,!1,null,null,u,!1,p,v),i[ui]=o.current,ec(i.nodeType===8?i.parentNode:i),new Hm(o)},wn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=Lu(o),i=i===null?null:i.stateNode,i},wn.flushSync=function(i){return fo(i)},wn.hydrate=function(i,o,u){if(!Ld(o))throw Error(t(200));return Od(null,i,o,!0,u)},wn.hydrateRoot=function(i,o,u){if(!Km(i))throw Error(t(405));var p=u!=null&&u.hydratedSources||null,v=!1,w="",I=O1;if(u!=null&&(u.unstable_strictMode===!0&&(v=!0),u.identifierPrefix!==void 0&&(w=u.identifierPrefix),u.onRecoverableError!==void 0&&(I=u.onRecoverableError)),o=V1(o,null,i,1,u??null,v,!1,w,I),i[ui]=o.current,ec(i),p)for(i=0;i<p.length;i++)u=p[i],v=u._getVersion,v=v(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,v]:o.mutableSourceEagerHydrationData.push(u,v);return new Vd(o)},wn.render=function(i,o,u){if(!Ld(o))throw Error(t(200));return Od(null,i,o,!1,u)},wn.unmountComponentAtNode=function(i){if(!Ld(i))throw Error(t(40));return i._reactRootContainer?(fo(function(){Od(null,null,i,!1,function(){i._reactRootContainer=null,i[ui]=null})}),!0):!1},wn.unstable_batchedUpdates=Lm,wn.unstable_renderSubtreeIntoContainer=function(i,o,u,p){if(!Ld(u))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return Od(i,o,u,!1,p)},wn.version="18.3.1-next-f1338f8080-20240426",wn}var q1;function jI(){if(q1)return Qm.exports;q1=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Qm.exports=RI(),Qm.exports}var G1;function PI(){if(G1)return zd;G1=1;var n=jI();return zd.createRoot=n.createRoot,zd.hydrateRoot=n.hydrateRoot,zd}var MI=PI();/**
 * react-router v7.12.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Q1="popstate";function NI(n={}){function e(s,a){let{pathname:c="/",search:f="",hash:d=""}=Vo(s.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),Vp("",{pathname:c,search:f,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(s,a){let c=s.document.querySelector("base"),f="";if(c&&c.getAttribute("href")){let d=s.location.href,m=d.indexOf("#");f=m===-1?d:d.slice(0,m)}return f+"#"+(typeof a=="string"?a:Fc(a))}function r(s,a){Ln(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return VI(e,t,r,n)}function at(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Ln(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function DI(){return Math.random().toString(36).substring(2,10)}function Y1(n,e){return{usr:n.state,key:n.key,idx:e}}function Vp(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Vo(e):e,state:t,key:e&&e.key||r||DI()}}function Fc({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Vo(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function VI(n,e,t,r={}){let{window:s=document.defaultView,v5Compat:a=!1}=r,c=s.history,f="POP",d=null,m=g();m==null&&(m=0,c.replaceState({...c.state,idx:m},""));function g(){return(c.state||{idx:null}).idx}function y(){f="POP";let E=g(),N=E==null?null:E-m;m=E,d&&d({action:f,location:T.location,delta:N})}function x(E,N){f="PUSH";let D=Vp(T.location,E,N);t&&t(D,E),m=g()+1;let P=Y1(D,m),G=T.createHref(D);try{c.pushState(P,"",G)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;s.location.assign(G)}a&&d&&d({action:f,location:T.location,delta:1})}function S(E,N){f="REPLACE";let D=Vp(T.location,E,N);t&&t(D,E),m=g();let P=Y1(D,m),G=T.createHref(D);c.replaceState(P,"",G),a&&d&&d({action:f,location:T.location,delta:0})}function k(E){return LI(E)}let T={get action(){return f},get location(){return n(s,c)},listen(E){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(Q1,y),d=E,()=>{s.removeEventListener(Q1,y),d=null}},createHref(E){return e(s,E)},createURL:k,encodeLocation(E){let N=k(E);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:x,replace:S,go(E){return c.go(E)}};return T}function LI(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),at(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Fc(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function lk(n,e,t="/"){return OI(n,e,t,!1)}function OI(n,e,t,r){let s=typeof e=="string"?Vo(e):e,a=Ci(s.pathname||"/",t);if(a==null)return null;let c=ck(n);BI(c);let f=null;for(let d=0;f==null&&d<c.length;++d){let m=YI(a);f=GI(c[d],m,r)}return f}function ck(n,e=[],t=[],r="",s=!1){let a=(c,f,d=s,m)=>{let g={relativePath:m===void 0?c.path||"":m,caseSensitive:c.caseSensitive===!0,childrenIndex:f,route:c};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(r)&&d)return;at(g.relativePath.startsWith(r),`Absolute route path "${g.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(r.length)}let y=Si([r,g.relativePath]),x=t.concat(g);c.children&&c.children.length>0&&(at(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),ck(c.children,e,x,y,d)),!(c.path==null&&!c.index)&&e.push({path:y,score:KI(y,c.index),routesMeta:x})};return n.forEach((c,f)=>{var d;if(c.path===""||!((d=c.path)!=null&&d.includes("?")))a(c,f);else for(let m of uk(c.path))a(c,f,!0,m)}),e}function uk(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let c=uk(r.join("/")),f=[];return f.push(...c.map(d=>d===""?a:[a,d].join("/"))),s&&f.push(...c),f.map(d=>n.startsWith("/")&&d===""?"/":d)}function BI(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:qI(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var zI=/^:[\w-]+$/,FI=3,UI=2,$I=1,WI=10,HI=-2,X1=n=>n==="*";function KI(n,e){let t=n.split("/"),r=t.length;return t.some(X1)&&(r+=HI),e&&(r+=UI),t.filter(s=>!X1(s)).reduce((s,a)=>s+(zI.test(a)?FI:a===""?$I:WI),r)}function qI(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function GI(n,e,t=!1){let{routesMeta:r}=n,s={},a="/",c=[];for(let f=0;f<r.length;++f){let d=r[f],m=f===r.length-1,g=a==="/"?e:e.slice(a.length)||"/",y=gh({path:d.relativePath,caseSensitive:d.caseSensitive,end:m},g),x=d.route;if(!y&&m&&t&&!r[r.length-1].route.index&&(y=gh({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!y)return null;Object.assign(s,y.params),c.push({params:s,pathname:Si([a,y.pathname]),pathnameBase:eC(Si([a,y.pathnameBase])),route:x}),y.pathnameBase!=="/"&&(a=Si([a,y.pathnameBase]))}return c}function gh(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=QI(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let a=s[0],c=a.replace(/(.)\/+$/,"$1"),f=s.slice(1);return{params:r.reduce((m,{paramName:g,isOptional:y},x)=>{if(g==="*"){let k=f[x]||"";c=a.slice(0,a.length-k.length).replace(/(.)\/+$/,"$1")}const S=f[x];return y&&!S?m[g]=void 0:m[g]=(S||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:c,pattern:n}}function QI(n,e=!1,t=!0){Ln(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,f,d)=>(r.push({paramName:f,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function YI(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ln(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Ci(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}var dk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,XI=n=>dk.test(n);function JI(n,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?Vo(n):n,a;if(t)if(XI(t))a=t;else{if(t.includes("//")){let c=t;t=t.replace(/\/\/+/g,"/"),Ln(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${t}`)}t.startsWith("/")?a=J1(t.substring(1),"/"):a=J1(t,e)}else a=e;return{pathname:a,search:tC(r),hash:nC(s)}}function J1(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Jm(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function ZI(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Bg(n){let e=ZI(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function zg(n,e,t,r=!1){let s;typeof n=="string"?s=Vo(n):(s={...n},at(!s.pathname||!s.pathname.includes("?"),Jm("?","pathname","search",s)),at(!s.pathname||!s.pathname.includes("#"),Jm("#","pathname","hash",s)),at(!s.search||!s.search.includes("#"),Jm("#","search","hash",s)));let a=n===""||s.pathname==="",c=a?"/":s.pathname,f;if(c==null)f=t;else{let y=e.length-1;if(!r&&c.startsWith("..")){let x=c.split("/");for(;x[0]==="..";)x.shift(),y-=1;s.pathname=x.join("/")}f=y>=0?e[y]:"/"}let d=JI(s,f),m=c&&c!=="/"&&c.endsWith("/"),g=(a||c===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(m||g)&&(d.pathname+="/"),d}var Si=n=>n.join("/").replace(/\/\/+/g,"/"),eC=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),tC=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,nC=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,rC=class{constructor(n,e,t,r=!1){this.status=n,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function iC(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function sC(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var hk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function fk(n,e){let t=n;if(typeof t!="string"||!dk.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let r=t,s=!1;if(hk)try{let a=new URL(window.location.href),c=t.startsWith("//")?new URL(a.protocol+t):new URL(t),f=Ci(c.pathname,e);c.origin===a.origin&&f!=null?t=f+c.search+c.hash:s=!0}catch{Ln(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:s,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var mk=["POST","PUT","PATCH","DELETE"];new Set(mk);var oC=["GET",...mk];new Set(oC);var ol=R.createContext(null);ol.displayName="DataRouter";var Gh=R.createContext(null);Gh.displayName="DataRouterState";var aC=R.createContext(!1),pk=R.createContext({isTransitioning:!1});pk.displayName="ViewTransition";var lC=R.createContext(new Map);lC.displayName="Fetchers";var cC=R.createContext(null);cC.displayName="Await";var On=R.createContext(null);On.displayName="Navigation";var iu=R.createContext(null);iu.displayName="Location";var kr=R.createContext({outlet:null,matches:[],isDataRoute:!1});kr.displayName="Route";var Fg=R.createContext(null);Fg.displayName="RouteError";var gk="REACT_ROUTER_ERROR",uC="REDIRECT",dC="ROUTE_ERROR_RESPONSE";function hC(n){if(n.startsWith(`${gk}:${uC}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function fC(n){if(n.startsWith(`${gk}:${dC}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new rC(e.status,e.statusText,e.data)}catch{}}function mC(n,{relative:e}={}){at(al(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=R.useContext(On),{hash:s,pathname:a,search:c}=su(n,{relative:e}),f=a;return t!=="/"&&(f=a==="/"?t:Si([t,a])),r.createHref({pathname:f,search:c,hash:s})}function al(){return R.useContext(iu)!=null}function tr(){return at(al(),"useLocation() may be used only in the context of a <Router> component."),R.useContext(iu).location}var yk="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function vk(n){R.useContext(On).static||R.useLayoutEffect(n)}function ll(){let{isDataRoute:n}=R.useContext(kr);return n?IC():pC()}function pC(){at(al(),"useNavigate() may be used only in the context of a <Router> component.");let n=R.useContext(ol),{basename:e,navigator:t}=R.useContext(On),{matches:r}=R.useContext(kr),{pathname:s}=tr(),a=JSON.stringify(Bg(r)),c=R.useRef(!1);return vk(()=>{c.current=!0}),R.useCallback((d,m={})=>{if(Ln(c.current,yk),!c.current)return;if(typeof d=="number"){t.go(d);return}let g=zg(d,JSON.parse(a),s,m.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Si([e,g.pathname])),(m.replace?t.replace:t.push)(g,m.state,m)},[e,t,a,s,n])}R.createContext(null);function Ug(){let{matches:n}=R.useContext(kr),e=n[n.length-1];return e?e.params:{}}function su(n,{relative:e}={}){let{matches:t}=R.useContext(kr),{pathname:r}=tr(),s=JSON.stringify(Bg(t));return R.useMemo(()=>zg(n,JSON.parse(s),r,e==="path"),[n,s,r,e])}function gC(n,e){return xk(n,e)}function xk(n,e,t,r,s){var D;at(al(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=R.useContext(On),{matches:c}=R.useContext(kr),f=c[c.length-1],d=f?f.params:{},m=f?f.pathname:"/",g=f?f.pathnameBase:"/",y=f&&f.route;{let P=y&&y.path||"";_k(m,!y||P.endsWith("*")||P.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${P}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${P}"> to <Route path="${P==="/"?"*":`${P}/*`}">.`)}let x=tr(),S;if(e){let P=typeof e=="string"?Vo(e):e;at(g==="/"||((D=P.pathname)==null?void 0:D.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${P.pathname}" was given in the \`location\` prop.`),S=P}else S=x;let k=S.pathname||"/",T=k;if(g!=="/"){let P=g.replace(/^\//,"").split("/");T="/"+k.replace(/^\//,"").split("/").slice(P.length).join("/")}let E=lk(n,{pathname:T});Ln(y||E!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),Ln(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let N=_C(E&&E.map(P=>Object.assign({},P,{params:Object.assign({},d,P.params),pathname:Si([g,a.encodeLocation?a.encodeLocation(P.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?g:Si([g,a.encodeLocation?a.encodeLocation(P.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:P.pathnameBase])})),c,t,r,s);return e&&N?R.createElement(iu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},N):N}function yC(){let n=TC(),e=iC(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=R.createElement(R.Fragment,null,R.createElement("p",null," Hey developer "),R.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",R.createElement("code",{style:a},"ErrorBoundary")," or"," ",R.createElement("code",{style:a},"errorElement")," prop on your route.")),R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),t?R.createElement("pre",{style:s},t):null,c)}var vC=R.createElement(yC,null),wk=class extends R.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=fC(n.digest);t&&(n=t)}let e=n!==void 0?R.createElement(kr.Provider,{value:this.props.routeContext},R.createElement(Fg.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?R.createElement(xC,{error:n},e):e}};wk.contextType=aC;var Zm=new WeakMap;function xC({children:n,error:e}){let{basename:t}=R.useContext(On);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=hC(e.digest);if(r){let s=Zm.get(e);if(s)throw s;let a=fk(r.location,t);if(hk&&!Zm.get(e))if(a.isExternal||r.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:r.replace}));throw Zm.set(e,c),c}return R.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return n}function wC({routeContext:n,match:e,children:t}){let r=R.useContext(ol);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),R.createElement(kr.Provider,{value:n},t)}function _C(n,e=[],t=null,r=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,c=t==null?void 0:t.errors;if(c!=null){let g=a.findIndex(y=>y.route.id&&(c==null?void 0:c[y.route.id])!==void 0);at(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),a=a.slice(0,Math.min(a.length,g+1))}let f=!1,d=-1;if(t)for(let g=0;g<a.length;g++){let y=a[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(d=g),y.route.id){let{loaderData:x,errors:S}=t,k=y.route.loader&&!x.hasOwnProperty(y.route.id)&&(!S||S[y.route.id]===void 0);if(y.route.lazy||k){f=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}let m=t&&r?(g,y)=>{var x,S;r(g,{location:t.location,params:((S=(x=t.matches)==null?void 0:x[0])==null?void 0:S.params)??{},unstable_pattern:sC(t.matches),errorInfo:y})}:void 0;return a.reduceRight((g,y,x)=>{let S,k=!1,T=null,E=null;t&&(S=c&&y.route.id?c[y.route.id]:void 0,T=y.route.errorElement||vC,f&&(d<0&&x===0?(_k("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),k=!0,E=null):d===x&&(k=!0,E=y.route.hydrateFallbackElement||null)));let N=e.concat(a.slice(0,x+1)),D=()=>{let P;return S?P=T:k?P=E:y.route.Component?P=R.createElement(y.route.Component,null):y.route.element?P=y.route.element:P=g,R.createElement(wC,{match:y,routeContext:{outlet:g,matches:N,isDataRoute:t!=null},children:P})};return t&&(y.route.ErrorBoundary||y.route.errorElement||x===0)?R.createElement(wk,{location:t.location,revalidation:t.revalidation,component:T,error:S,children:D(),routeContext:{outlet:null,matches:N,isDataRoute:!0},onError:m}):D()},null)}function $g(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function kC(n){let e=R.useContext(ol);return at(e,$g(n)),e}function bC(n){let e=R.useContext(Gh);return at(e,$g(n)),e}function SC(n){let e=R.useContext(kr);return at(e,$g(n)),e}function Wg(n){let e=SC(n),t=e.matches[e.matches.length-1];return at(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function EC(){return Wg("useRouteId")}function TC(){var r;let n=R.useContext(Fg),e=bC("useRouteError"),t=Wg("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function IC(){let{router:n}=kC("useNavigate"),e=Wg("useNavigate"),t=R.useRef(!1);return vk(()=>{t.current=!0}),R.useCallback(async(s,a={})=>{Ln(t.current,yk),t.current&&(typeof s=="number"?await n.navigate(s):await n.navigate(s,{fromRouteId:e,...a}))},[n,e])}var Z1={};function _k(n,e,t){!e&&!Z1[n]&&(Z1[n]=!0,Ln(!1,t))}R.memo(CC);function CC({routes:n,future:e,state:t,onError:r}){return xk(n,void 0,t,r,e)}function AC({to:n,replace:e,state:t,relative:r}){at(al(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=R.useContext(On);Ln(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=R.useContext(kr),{pathname:c}=tr(),f=ll(),d=zg(n,Bg(a),c,r==="path"),m=JSON.stringify(d);return R.useEffect(()=>{f(JSON.parse(m),{replace:e,state:t,relative:r})},[f,m,r,e,t]),null}function ut(n){at(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function RC({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:a=!1,unstable_useTransitions:c}){at(!al(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=n.replace(/^\/*/,"/"),d=R.useMemo(()=>({basename:f,navigator:s,static:a,unstable_useTransitions:c,future:{}}),[f,s,a,c]);typeof t=="string"&&(t=Vo(t));let{pathname:m="/",search:g="",hash:y="",state:x=null,key:S="default"}=t,k=R.useMemo(()=>{let T=Ci(m,f);return T==null?null:{location:{pathname:T,search:g,hash:y,state:x,key:S},navigationType:r}},[f,m,g,y,x,S,r]);return Ln(k!=null,`<Router basename="${f}"> is not able to match the URL "${m}${g}${y}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:R.createElement(On.Provider,{value:d},R.createElement(iu.Provider,{children:e,value:k}))}function jC({children:n,location:e}){return gC(Lp(n),e)}function Lp(n,e=[]){let t=[];return R.Children.forEach(n,(r,s)=>{if(!R.isValidElement(r))return;let a=[...e,s];if(r.type===R.Fragment){t.push.apply(t,Lp(r.props.children,a));return}at(r.type===ut,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),at(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=Lp(r.props.children,a)),t.push(c)}),t}var eh="get",th="application/x-www-form-urlencoded";function Qh(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function PC(n){return Qh(n)&&n.tagName.toLowerCase()==="button"}function MC(n){return Qh(n)&&n.tagName.toLowerCase()==="form"}function NC(n){return Qh(n)&&n.tagName.toLowerCase()==="input"}function DC(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function VC(n,e){return n.button===0&&(!e||e==="_self")&&!DC(n)}var Fd=null;function LC(){if(Fd===null)try{new FormData(document.createElement("form"),0),Fd=!1}catch{Fd=!0}return Fd}var OC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ep(n){return n!=null&&!OC.has(n)?(Ln(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${th}"`),null):n}function BC(n,e){let t,r,s,a,c;if(MC(n)){let f=n.getAttribute("action");r=f?Ci(f,e):null,t=n.getAttribute("method")||eh,s=ep(n.getAttribute("enctype"))||th,a=new FormData(n)}else if(PC(n)||NC(n)&&(n.type==="submit"||n.type==="image")){let f=n.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=n.getAttribute("formaction")||f.getAttribute("action");if(r=d?Ci(d,e):null,t=n.getAttribute("formmethod")||f.getAttribute("method")||eh,s=ep(n.getAttribute("formenctype"))||ep(f.getAttribute("enctype"))||th,a=new FormData(f,n),!LC()){let{name:m,type:g,value:y}=n;if(g==="image"){let x=m?`${m}.`:"";a.append(`${x}x`,"0"),a.append(`${x}y`,"0")}else m&&a.append(m,y)}}else{if(Qh(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=eh,r=null,s=th,c=n}return a&&s==="text/plain"&&(c=a,a=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:a,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Hg(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function zC(n,e,t,r){let s=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?s.pathname.endsWith("/")?s.pathname=`${s.pathname}_.${r}`:s.pathname=`${s.pathname}.${r}`:s.pathname==="/"?s.pathname=`_root.${r}`:e&&Ci(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${r}`,s}async function FC(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function UC(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function $C(n,e,t){let r=await Promise.all(n.map(async s=>{let a=e.routes[s.route.id];if(a){let c=await FC(a,t);return c.links?c.links():[]}return[]}));return qC(r.flat(1).filter(UC).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function ex(n,e,t,r,s,a){let c=(d,m)=>t[m]?d.route.id!==t[m].route.id:!0,f=(d,m)=>{var g;return t[m].pathname!==d.pathname||((g=t[m].route.path)==null?void 0:g.endsWith("*"))&&t[m].params["*"]!==d.params["*"]};return a==="assets"?e.filter((d,m)=>c(d,m)||f(d,m)):a==="data"?e.filter((d,m)=>{var y;let g=r.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(c(d,m)||f(d,m))return!0;if(d.route.shouldRevalidate){let x=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((y=t[0])==null?void 0:y.params)||{},nextUrl:new URL(n,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function WC(n,e,{includeHydrateFallback:t}={}){return HC(n.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let a=[s.module];return s.clientActionModule&&(a=a.concat(s.clientActionModule)),s.clientLoaderModule&&(a=a.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(a=a.concat(s.hydrateFallbackModule)),s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function HC(n){return[...new Set(n)]}function KC(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function qC(n,e){let t=new Set;return new Set(e),n.reduce((r,s)=>{let a=JSON.stringify(KC(s));return t.has(a)||(t.add(a),r.push({key:a,link:s})),r},[])}function kk(){let n=R.useContext(ol);return Hg(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function GC(){let n=R.useContext(Gh);return Hg(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Kg=R.createContext(void 0);Kg.displayName="FrameworkContext";function bk(){let n=R.useContext(Kg);return Hg(n,"You must render this element inside a <HydratedRouter> element"),n}function QC(n,e){let t=R.useContext(Kg),[r,s]=R.useState(!1),[a,c]=R.useState(!1),{onFocus:f,onBlur:d,onMouseEnter:m,onMouseLeave:g,onTouchStart:y}=e,x=R.useRef(null);R.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let T=N=>{N.forEach(D=>{c(D.isIntersecting)})},E=new IntersectionObserver(T,{threshold:.5});return x.current&&E.observe(x.current),()=>{E.disconnect()}}},[n]),R.useEffect(()=>{if(r){let T=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(T)}}},[r]);let S=()=>{s(!0)},k=()=>{s(!1),c(!1)};return t?n!=="intent"?[a,x,{}]:[a,x,{onFocus:xc(f,S),onBlur:xc(d,k),onMouseEnter:xc(m,S),onMouseLeave:xc(g,k),onTouchStart:xc(y,S)}]:[!1,x,{}]}function xc(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function YC({page:n,...e}){let{router:t}=kk(),r=R.useMemo(()=>lk(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?R.createElement(JC,{page:n,matches:r,...e}):null}function XC(n){let{manifest:e,routeModules:t}=bk(),[r,s]=R.useState([]);return R.useEffect(()=>{let a=!1;return $C(n,e,t).then(c=>{a||s(c)}),()=>{a=!0}},[n,e,t]),r}function JC({page:n,matches:e,...t}){let r=tr(),{future:s,manifest:a,routeModules:c}=bk(),{basename:f}=kk(),{loaderData:d,matches:m}=GC(),g=R.useMemo(()=>ex(n,e,m,a,r,"data"),[n,e,m,a,r]),y=R.useMemo(()=>ex(n,e,m,a,r,"assets"),[n,e,m,a,r]),x=R.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let T=new Set,E=!1;if(e.forEach(D=>{var G;let P=a.routes[D.route.id];!P||!P.hasLoader||(!g.some(F=>F.route.id===D.route.id)&&D.route.id in d&&((G=c[D.route.id])!=null&&G.shouldRevalidate)||P.hasClientLoader?E=!0:T.add(D.route.id))}),T.size===0)return[];let N=zC(n,f,s.unstable_trailingSlashAwareDataRequests,"data");return E&&T.size>0&&N.searchParams.set("_routes",e.filter(D=>T.has(D.route.id)).map(D=>D.route.id).join(",")),[N.pathname+N.search]},[f,s.unstable_trailingSlashAwareDataRequests,d,r,a,g,e,n,c]),S=R.useMemo(()=>WC(y,a),[y,a]),k=XC(y);return R.createElement(R.Fragment,null,x.map(T=>R.createElement("link",{key:T,rel:"prefetch",as:"fetch",href:T,...t})),S.map(T=>R.createElement("link",{key:T,rel:"modulepreload",href:T,...t})),k.map(({key:T,link:E})=>R.createElement("link",{key:T,nonce:t.nonce,...E})))}function ZC(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var eA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{eA&&(window.__reactRouterVersion="7.12.0")}catch{}function tA({basename:n,children:e,unstable_useTransitions:t,window:r}){let s=R.useRef();s.current==null&&(s.current=NI({window:r,v5Compat:!0}));let a=s.current,[c,f]=R.useState({action:a.action,location:a.location}),d=R.useCallback(m=>{t===!1?f(m):R.startTransition(()=>f(m))},[t]);return R.useLayoutEffect(()=>a.listen(d),[a,d]),R.createElement(RC,{basename:n,children:e,location:c.location,navigationType:c.action,navigator:a,unstable_useTransitions:t})}var Sk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ae=R.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:a,replace:c,state:f,target:d,to:m,preventScrollReset:g,viewTransition:y,unstable_defaultShouldRevalidate:x,...S},k){let{basename:T,unstable_useTransitions:E}=R.useContext(On),N=typeof m=="string"&&Sk.test(m),D=fk(m,T);m=D.to;let P=mC(m,{relative:s}),[G,F,$]=QC(r,S),A=sA(m,{replace:c,state:f,target:d,preventScrollReset:g,relative:s,viewTransition:y,unstable_defaultShouldRevalidate:x,unstable_useTransitions:E});function C(L){e&&e(L),L.defaultPrevented||A(L)}let M=R.createElement("a",{...S,...$,href:D.absoluteURL||P,onClick:D.isExternal||a?e:C,ref:ZC(k,F),target:d,"data-discover":!N&&t==="render"?"true":void 0});return G&&!N?R.createElement(R.Fragment,null,M,R.createElement(YC,{page:P})):M});ae.displayName="Link";var nA=R.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:a,to:c,viewTransition:f,children:d,...m},g){let y=su(c,{relative:m.relative}),x=tr(),S=R.useContext(Gh),{navigator:k,basename:T}=R.useContext(On),E=S!=null&&uA(y)&&f===!0,N=k.encodeLocation?k.encodeLocation(y).pathname:y.pathname,D=x.pathname,P=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;t||(D=D.toLowerCase(),P=P?P.toLowerCase():null,N=N.toLowerCase()),P&&T&&(P=Ci(P,T)||P);const G=N!=="/"&&N.endsWith("/")?N.length-1:N.length;let F=D===N||!s&&D.startsWith(N)&&D.charAt(G)==="/",$=P!=null&&(P===N||!s&&P.startsWith(N)&&P.charAt(N.length)==="/"),A={isActive:F,isPending:$,isTransitioning:E},C=F?e:void 0,M;typeof r=="function"?M=r(A):M=[r,F?"active":null,$?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let L=typeof a=="function"?a(A):a;return R.createElement(ae,{...m,"aria-current":C,className:M,ref:g,style:L,to:c,viewTransition:f},typeof d=="function"?d(A):d)});nA.displayName="NavLink";var rA=R.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:a,method:c=eh,action:f,onSubmit:d,relative:m,preventScrollReset:g,viewTransition:y,unstable_defaultShouldRevalidate:x,...S},k)=>{let{unstable_useTransitions:T}=R.useContext(On),E=lA(),N=cA(f,{relative:m}),D=c.toLowerCase()==="get"?"get":"post",P=typeof f=="string"&&Sk.test(f),G=F=>{if(d&&d(F),F.defaultPrevented)return;F.preventDefault();let $=F.nativeEvent.submitter,A=($==null?void 0:$.getAttribute("formmethod"))||c,C=()=>E($||F.currentTarget,{fetcherKey:e,method:A,navigate:t,replace:s,state:a,relative:m,preventScrollReset:g,viewTransition:y,unstable_defaultShouldRevalidate:x});T&&t!==!1?R.startTransition(()=>C()):C()};return R.createElement("form",{ref:k,method:D,action:N,onSubmit:r?d:G,...S,"data-discover":!P&&n==="render"?"true":void 0})});rA.displayName="Form";function iA(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ek(n){let e=R.useContext(ol);return at(e,iA(n)),e}function sA(n,{target:e,replace:t,state:r,preventScrollReset:s,relative:a,viewTransition:c,unstable_defaultShouldRevalidate:f,unstable_useTransitions:d}={}){let m=ll(),g=tr(),y=su(n,{relative:a});return R.useCallback(x=>{if(VC(x,e)){x.preventDefault();let S=t!==void 0?t:Fc(g)===Fc(y),k=()=>m(n,{replace:S,state:r,preventScrollReset:s,relative:a,viewTransition:c,unstable_defaultShouldRevalidate:f});d?R.startTransition(()=>k()):k()}},[g,m,y,t,r,e,n,s,a,c,f,d])}var oA=0,aA=()=>`__${String(++oA)}__`;function lA(){let{router:n}=Ek("useSubmit"),{basename:e}=R.useContext(On),t=EC(),r=n.fetch,s=n.navigate;return R.useCallback(async(a,c={})=>{let{action:f,method:d,encType:m,formData:g,body:y}=BC(a,e);if(c.navigate===!1){let x=c.fetcherKey||aA();await r(x,t,c.action||f,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:g,body:y,formMethod:c.method||d,formEncType:c.encType||m,flushSync:c.flushSync})}else await s(c.action||f,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:g,body:y,formMethod:c.method||d,formEncType:c.encType||m,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[r,s,e,t])}function cA(n,{relative:e}={}){let{basename:t}=R.useContext(On),r=R.useContext(kr);at(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),a={...su(n||".",{relative:e})},c=tr();if(n==null){a.search=c.search;let f=new URLSearchParams(a.search),d=f.getAll("index");if(d.some(g=>g==="")){f.delete("index"),d.filter(y=>y).forEach(y=>f.append("index",y));let g=f.toString();a.search=g?`?${g}`:""}}return(!n||n===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:Si([t,a.pathname])),Fc(a)}function uA(n,{relative:e}={}){let t=R.useContext(pk);at(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Ek("useViewTransitionState"),s=su(n,{relative:e});if(!t.isTransitioning)return!1;let a=Ci(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=Ci(t.nextLocation.pathname,r)||t.nextLocation.pathname;return gh(s.pathname,c)!=null||gh(s.pathname,a)!=null}const dA=()=>{};var tx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tk=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},hA=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=n[t++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=n[t++],c=n[t++],f=n[t++],d=((s&7)<<18|(a&63)<<12|(c&63)<<6|f&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const a=n[t++],c=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|c&63)}}return e.join("")},Ik={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const a=n[s],c=s+1<n.length,f=c?n[s+1]:0,d=s+2<n.length,m=d?n[s+2]:0,g=a>>2,y=(a&3)<<4|f>>4;let x=(f&15)<<2|m>>6,S=m&63;d||(S=64,c||(x=64)),r.push(t[g],t[y],t[x],t[S])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Tk(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):hA(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const a=t[n.charAt(s++)],f=s<n.length?t[n.charAt(s)]:0;++s;const m=s<n.length?t[n.charAt(s)]:64;++s;const y=s<n.length?t[n.charAt(s)]:64;if(++s,a==null||f==null||m==null||y==null)throw new fA;const x=a<<2|f>>4;if(r.push(x),m!==64){const S=f<<4&240|m>>2;if(r.push(S),y!==64){const k=m<<6&192|y;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class fA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const mA=function(n){const e=Tk(n);return Ik.encodeByteArray(e,!0)},yh=function(n){return mA(n).replace(/\./g,"")},Ck=function(n){try{return Ik.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gA=()=>pA().__FIREBASE_DEFAULTS__,yA=()=>{if(typeof process>"u"||typeof tx>"u")return;const n=tx.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},vA=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Ck(n[1]);return e&&JSON.parse(e)},Yh=()=>{try{return dA()||gA()||yA()||vA()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Ak=n=>{var e,t;return(t=(e=Yh())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},xA=n=>{const e=Ak(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Rk=()=>{var n;return(n=Yh())==null?void 0:n.config},jk=n=>{var e;return(e=Yh())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Pk(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _A(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[yh(JSON.stringify(t)),yh(JSON.stringify(c)),""].join(".")}const jc={};function kA(){const n={prod:[],emulator:[]};for(const e of Object.keys(jc))jc[e]?n.emulator.push(e):n.prod.push(e);return n}function bA(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let nx=!1;function Mk(n,e){if(typeof window>"u"||typeof document>"u"||!cl(window.location.host)||jc[n]===e||jc[n]||nx)return;jc[n]=e;function t(x){return`__firebase__banner__${x}`}const r="__firebase__banner",a=kA().prod.length>0;function c(){const x=document.getElementById(r);x&&x.remove()}function f(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function d(x,S){x.setAttribute("width","24"),x.setAttribute("id",S),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function m(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{nx=!0,c()},x}function g(x,S){x.setAttribute("id",S),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function y(){const x=bA(r),S=t("text"),k=document.getElementById(S)||document.createElement("span"),T=t("learnmore"),E=document.getElementById(T)||document.createElement("a"),N=t("preprendIcon"),D=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const P=x.element;f(P),g(E,T);const G=m();d(D,N),P.append(D,k,E,G),document.body.appendChild(P)}a?(k.innerText="Preview backend disconnected.",D.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(D.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function SA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(cn())}function EA(){var e;const n=(e=Yh())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function TA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function IA(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function CA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function AA(){const n=cn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function RA(){return!EA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jA(){try{return typeof indexedDB=="object"}catch{return!1}}function PA(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var a;e(((a=s.error)==null?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA="FirebaseError";class Ni extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=MA,Object.setPrototypeOf(this,Ni.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ou.prototype.create)}}class ou{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],c=a?NA(a,r):"Error",f=`${this.serviceName}: ${c} (${s}).`;return new Ni(s,f,r)}}function NA(n,e){return n.replace(DA,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const DA=/\{\$([^}]+)}/g;function VA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ts(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const a=n[s],c=e[s];if(rx(a)&&rx(c)){if(!Ts(a,c))return!1}else if(a!==c)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function rx(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function au(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function bc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,a]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function Sc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function LA(n,e){const t=new OA(n,e);return t.subscribe.bind(t)}class OA{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");BA(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=tp),s.error===void 0&&(s.error=tp),s.complete===void 0&&(s.complete=tp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function BA(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function tp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(n){return n&&n._delegate?n._delegate:n}class Io{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new wA;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(UA(e))try{this.getOrInitializeService({instanceIdentifier:vo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=vo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=vo){return this.instances.has(e)}getOptions(e=vo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(a);r===f&&c.resolve(s)}return s}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const a=this.instances.get(r);return a&&e(a,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:FA(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=vo){return this.component?this.component.multipleInstances?e:vo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function FA(n){return n===vo?void 0:n}function UA(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new zA(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Le||(Le={}));const WA={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},HA=Le.INFO,KA={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},qA=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=KA[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qg{constructor(e){this.name=e,this._logLevel=HA,this._logHandler=qA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?WA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const GA=(n,e)=>e.some(t=>n instanceof t);let ix,sx;function QA(){return ix||(ix=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function YA(){return sx||(sx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Nk=new WeakMap,Op=new WeakMap,Dk=new WeakMap,np=new WeakMap,Gg=new WeakMap;function XA(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",a),n.removeEventListener("error",c)},a=()=>{t(_s(n.result)),s()},c=()=>{r(n.error),s()};n.addEventListener("success",a),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&Nk.set(t,n)}).catch(()=>{}),Gg.set(e,n),e}function JA(n){if(Op.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",c),n.removeEventListener("abort",c)},a=()=>{t(),s()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",a),n.addEventListener("error",c),n.addEventListener("abort",c)});Op.set(n,e)}let Bp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Op.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Dk.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return _s(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function ZA(n){Bp=n(Bp)}function eR(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(rp(this),e,...t);return Dk.set(r,e.sort?e.sort():[e]),_s(r)}:YA().includes(n)?function(...e){return n.apply(rp(this),e),_s(Nk.get(this))}:function(...e){return _s(n.apply(rp(this),e))}}function tR(n){return typeof n=="function"?eR(n):(n instanceof IDBTransaction&&JA(n),GA(n,QA())?new Proxy(n,Bp):n)}function _s(n){if(n instanceof IDBRequest)return XA(n);if(np.has(n))return np.get(n);const e=tR(n);return e!==n&&(np.set(n,e),Gg.set(e,n)),e}const rp=n=>Gg.get(n);function nR(n,e,{blocked:t,upgrade:r,blocking:s,terminated:a}={}){const c=indexedDB.open(n,e),f=_s(c);return r&&c.addEventListener("upgradeneeded",d=>{r(_s(c.result),d.oldVersion,d.newVersion,_s(c.transaction),d)}),t&&c.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),f.then(d=>{a&&d.addEventListener("close",()=>a()),s&&d.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),f}const rR=["get","getKey","getAll","getAllKeys","count"],iR=["put","add","delete","clear"],ip=new Map;function ox(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(ip.get(e))return ip.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=iR.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||rR.includes(t)))return;const a=async function(c,...f){const d=this.transaction(c,s?"readwrite":"readonly");let m=d.store;return r&&(m=m.index(f.shift())),(await Promise.all([m[t](...f),s&&d.done]))[0]};return ip.set(e,a),a}ZA(n=>({...n,get:(e,t,r)=>ox(e,t)||n.get(e,t,r),has:(e,t)=>!!ox(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(oR(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function oR(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const zp="@firebase/app",ax="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai=new qg("@firebase/app"),aR="@firebase/app-compat",lR="@firebase/analytics-compat",cR="@firebase/analytics",uR="@firebase/app-check-compat",dR="@firebase/app-check",hR="@firebase/auth",fR="@firebase/auth-compat",mR="@firebase/database",pR="@firebase/data-connect",gR="@firebase/database-compat",yR="@firebase/functions",vR="@firebase/functions-compat",xR="@firebase/installations",wR="@firebase/installations-compat",_R="@firebase/messaging",kR="@firebase/messaging-compat",bR="@firebase/performance",SR="@firebase/performance-compat",ER="@firebase/remote-config",TR="@firebase/remote-config-compat",IR="@firebase/storage",CR="@firebase/storage-compat",AR="@firebase/firestore",RR="@firebase/ai",jR="@firebase/firestore-compat",PR="firebase",MR="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fp="[DEFAULT]",NR={[zp]:"fire-core",[aR]:"fire-core-compat",[cR]:"fire-analytics",[lR]:"fire-analytics-compat",[dR]:"fire-app-check",[uR]:"fire-app-check-compat",[hR]:"fire-auth",[fR]:"fire-auth-compat",[mR]:"fire-rtdb",[pR]:"fire-data-connect",[gR]:"fire-rtdb-compat",[yR]:"fire-fn",[vR]:"fire-fn-compat",[xR]:"fire-iid",[wR]:"fire-iid-compat",[_R]:"fire-fcm",[kR]:"fire-fcm-compat",[bR]:"fire-perf",[SR]:"fire-perf-compat",[ER]:"fire-rc",[TR]:"fire-rc-compat",[IR]:"fire-gcs",[CR]:"fire-gcs-compat",[AR]:"fire-fst",[jR]:"fire-fst-compat",[RR]:"fire-vertex","fire-js":"fire-js",[PR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vh=new Map,DR=new Map,Up=new Map;function lx(n,e){try{n.container.addComponent(e)}catch(t){Ai.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function qa(n){const e=n.name;if(Up.has(e))return Ai.debug(`There were multiple attempts to register component ${e}.`),!1;Up.set(e,n);for(const t of vh.values())lx(t,n);for(const t of DR.values())lx(t,n);return!0}function Qg(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Dn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ks=new ou("app","Firebase",VR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Io("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ks.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ul=MR;function Vk(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:Fp,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw ks.create("bad-app-name",{appName:String(s)});if(t||(t=Rk()),!t)throw ks.create("no-options");const a=vh.get(s);if(a){if(Ts(t,a.options)&&Ts(r,a.config))return a;throw ks.create("duplicate-app",{appName:s})}const c=new $A(s);for(const d of Up.values())c.addComponent(d);const f=new LR(t,r,c);return vh.set(s,f),f}function Lk(n=Fp){const e=vh.get(n);if(!e&&n===Fp&&Rk())return Vk();if(!e)throw ks.create("no-app",{appName:n});return e}function bs(n,e,t){let r=NR[n]??n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const c=[`Unable to register library "${r}" with version "${e}":`];s&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ai.warn(c.join(" "));return}qa(new Io(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR="firebase-heartbeat-database",BR=1,Uc="firebase-heartbeat-store";let sp=null;function Ok(){return sp||(sp=nR(OR,BR,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Uc)}catch(t){console.warn(t)}}}}).catch(n=>{throw ks.create("idb-open",{originalErrorMessage:n.message})})),sp}async function zR(n){try{const t=(await Ok()).transaction(Uc),r=await t.objectStore(Uc).get(Bk(n));return await t.done,r}catch(e){if(e instanceof Ni)Ai.warn(e.message);else{const t=ks.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ai.warn(t.message)}}}async function cx(n,e){try{const r=(await Ok()).transaction(Uc,"readwrite");await r.objectStore(Uc).put(e,Bk(n)),await r.done}catch(t){if(t instanceof Ni)Ai.warn(t.message);else{const r=ks.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ai.warn(r.message)}}}function Bk(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR=1024,UR=30;class $R{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new HR(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=ux();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>UR){const c=KR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ai.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=ux(),{heartbeatsToSend:r,unsentEntries:s}=WR(this._heartbeatsCache.heartbeats),a=yh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Ai.warn(t),""}}}function ux(){return new Date().toISOString().substring(0,10)}function WR(n,e=FR){const t=[];let r=n.slice();for(const s of n){const a=t.find(c=>c.agent===s.agent);if(a){if(a.dates.push(s.date),dx(t)>e){a.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),dx(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class HR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jA()?PA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await zR(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return cx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return cx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function dx(n){return yh(JSON.stringify({version:2,heartbeats:n})).length}function KR(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(n){qa(new Io("platform-logger",e=>new sR(e),"PRIVATE")),qa(new Io("heartbeat",e=>new $R(e),"PRIVATE")),bs(zp,ax,n),bs(zp,ax,"esm2020"),bs("fire-js","")}qR("");function zk(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const GR=zk,Fk=new ou("auth","Firebase",zk());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xh=new qg("@firebase/auth");function QR(n,...e){xh.logLevel<=Le.WARN&&xh.warn(`Auth (${ul}): ${n}`,...e)}function nh(n,...e){xh.logLevel<=Le.ERROR&&xh.error(`Auth (${ul}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zn(n,...e){throw Xg(n,...e)}function pr(n,...e){return Xg(n,...e)}function Yg(n,e,t){const r={...GR(),[e]:t};return new ou("auth","Firebase",r).create(e,{appName:n.name})}function Ei(n){return Yg(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function YR(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Zn(n,"argument-error"),Yg(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Xg(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Fk.create(n,...e)}function be(n,e,...t){if(!n)throw Xg(e,...t)}function ki(n){const e="INTERNAL ASSERTION FAILED: "+n;throw nh(e),new Error(e)}function Ri(n,e){n||ki(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $p(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function XR(){return hx()==="http:"||hx()==="https:"}function hx(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(XR()||IA()||"connection"in navigator)?navigator.onLine:!0}function ZR(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ri(t>e,"Short delay should be less than long delay!"),this.isMobile=SA()||CA()}get(){return JR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jg(n,e){Ri(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ki("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ki("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ki("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ej={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tj=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],nj=new lu(3e4,6e4);function Vs(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Di(n,e,t,r,s={}){return $k(n,s,async()=>{let a={},c={};r&&(e==="GET"?c=r:a={body:JSON.stringify(r)});const f=au({key:n.config.apiKey,...c}).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const m={method:e,headers:d,...a};return TA()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&cl(n.emulatorConfig.host)&&(m.credentials="include"),Uk.fetch()(await Wk(n,n.config.apiHost,t,f),m)})}async function $k(n,e,t){n._canInitEmulator=!1;const r={...ej,...e};try{const s=new ij(n),a=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw Ud(n,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const f=a.ok?c.errorMessage:c.error.message,[d,m]=f.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ud(n,"credential-already-in-use",c);if(d==="EMAIL_EXISTS")throw Ud(n,"email-already-in-use",c);if(d==="USER_DISABLED")throw Ud(n,"user-disabled",c);const g=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw Yg(n,g,m);Zn(n,g)}}catch(s){if(s instanceof Ni)throw s;Zn(n,"network-request-failed",{message:String(s)})}}async function cu(n,e,t,r,s={}){const a=await Di(n,e,t,r,s);return"mfaPendingCredential"in a&&Zn(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function Wk(n,e,t,r){const s=`${e}${t}?${r}`,a=n,c=a.config.emulator?Jg(n.config,s):`${n.config.apiScheme}://${s}`;return tj.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(c).toString():c}function rj(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ij{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(pr(this.auth,"network-request-failed")),nj.get())})}}function Ud(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=pr(n,e,r);return s.customData._tokenResponse=t,s}function fx(n){return n!==void 0&&n.enterprise!==void 0}class sj{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return rj(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function oj(n,e){return Di(n,"GET","/v2/recaptchaConfig",Vs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aj(n,e){return Di(n,"POST","/v1/accounts:delete",e)}async function wh(n,e){return Di(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function lj(n,e=!1){const t=Lt(n),r=await t.getIdToken(e),s=Zg(r);be(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,c=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:Pc(op(s.auth_time)),issuedAtTime:Pc(op(s.iat)),expirationTime:Pc(op(s.exp)),signInProvider:c||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function op(n){return Number(n)*1e3}function Zg(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return nh("JWT malformed, contained fewer than 3 sections"),null;try{const s=Ck(t);return s?JSON.parse(s):(nh("Failed to decode base64 JWT payload"),null)}catch(s){return nh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function mx(n){const e=Zg(n);return be(e,"internal-error"),be(typeof e.exp<"u","internal-error"),be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ga(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Ni&&cj(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function cj({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pc(this.lastLoginAt),this.creationTime=Pc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _h(n){var y;const e=n.auth,t=await n.getIdToken(),r=await Ga(n,wh(e,{idToken:t}));be(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const a=(y=s.providerUserInfo)!=null&&y.length?Hk(s.providerUserInfo):[],c=hj(n.providerData,a),f=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!(c!=null&&c.length),m=f?d:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Wp(s.createdAt,s.lastLoginAt),isAnonymous:m};Object.assign(n,g)}async function dj(n){const e=Lt(n);await _h(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function hj(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Hk(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fj(n,e){const t=await $k(n,{},async()=>{const r=au({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=n.config,c=await Wk(n,s,"/v1/token",`key=${a}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:f,body:r};return n.emulatorConfig&&cl(n.emulatorConfig.host)&&(d.credentials="include"),Uk.fetch()(c,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function mj(n,e){return Di(n,"POST","/v2/accounts:revokeToken",Vs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){be(e.idToken,"internal-error"),be(typeof e.idToken<"u","internal-error"),be(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):mx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){be(e.length!==0,"internal-error");const t=mx(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:a}=await fj(e,t);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:a}=t,c=new Ba;return r&&(be(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),s&&(be(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),a&&(be(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ba,this.toJSON())}_performRefresh(){return ki("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fs(n,e){be(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class mr{constructor({uid:e,auth:t,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new uj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Wp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Ga(this,this.stsTokenManager.getToken(this.auth,e));return be(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return lj(this,e)}reload(){return dj(this)}_assign(e){this!==e&&(be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new mr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await _h(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Dn(this.auth.app))return Promise.reject(Ei(this.auth));const e=await this.getIdToken();return await Ga(this,aj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,s=t.email??void 0,a=t.phoneNumber??void 0,c=t.photoURL??void 0,f=t.tenantId??void 0,d=t._redirectEventId??void 0,m=t.createdAt??void 0,g=t.lastLoginAt??void 0,{uid:y,emailVerified:x,isAnonymous:S,providerData:k,stsTokenManager:T}=t;be(y&&T,e,"internal-error");const E=Ba.fromJSON(this.name,T);be(typeof y=="string",e,"internal-error"),fs(r,e.name),fs(s,e.name),be(typeof x=="boolean",e,"internal-error"),be(typeof S=="boolean",e,"internal-error"),fs(a,e.name),fs(c,e.name),fs(f,e.name),fs(d,e.name),fs(m,e.name),fs(g,e.name);const N=new mr({uid:y,auth:e,email:s,emailVerified:x,displayName:r,isAnonymous:S,photoURL:c,phoneNumber:a,tenantId:f,stsTokenManager:E,createdAt:m,lastLoginAt:g});return k&&Array.isArray(k)&&(N.providerData=k.map(D=>({...D}))),d&&(N._redirectEventId=d),N}static async _fromIdTokenResponse(e,t,r=!1){const s=new Ba;s.updateFromServerResponse(t);const a=new mr({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await _h(a),a}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];be(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?Hk(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),f=new Ba;f.updateFromIdToken(r);const d=new mr({uid:s.localId,auth:e,stsTokenManager:f,isAnonymous:c}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Wp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(d,m),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px=new Map;function bi(n){Ri(n instanceof Function,"Expected a class definition");let e=px.get(n);return e?(Ri(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,px.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Kk.type="NONE";const gx=Kk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rh(n,e,t){return`firebase:${n}:${e}:${t}`}class za{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=rh(this.userKey,s.apiKey,a),this.fullPersistenceKey=rh("persistence",s.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await wh(this.auth,{idToken:e}).catch(()=>{});return t?mr._fromGetAccountInfoResponse(this.auth,t,e):null}return mr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new za(bi(gx),e,r);const s=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=s[0]||bi(gx);const c=rh(r,e.config.apiKey,e.name);let f=null;for(const m of t)try{const g=await m._get(c);if(g){let y;if(typeof g=="string"){const x=await wh(e,{idToken:g}).catch(()=>{});if(!x)break;y=await mr._fromGetAccountInfoResponse(e,x,g)}else y=mr._fromJSON(e,g);m!==a&&(f=y),a=m;break}}catch{}const d=s.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!d.length?new za(a,e,r):(a=d[0],f&&await a._set(c,f.toJSON()),await Promise.all(t.map(async m=>{if(m!==a)try{await m._remove(c)}catch{}})),new za(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yx(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Yk(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(qk(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Jk(e))return"Blackberry";if(Zk(e))return"Webos";if(Gk(e))return"Safari";if((e.includes("chrome/")||Qk(e))&&!e.includes("edge/"))return"Chrome";if(Xk(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function qk(n=cn()){return/firefox\//i.test(n)}function Gk(n=cn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Qk(n=cn()){return/crios\//i.test(n)}function Yk(n=cn()){return/iemobile/i.test(n)}function Xk(n=cn()){return/android/i.test(n)}function Jk(n=cn()){return/blackberry/i.test(n)}function Zk(n=cn()){return/webos/i.test(n)}function ey(n=cn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function pj(n=cn()){var e;return ey(n)&&!!((e=window.navigator)!=null&&e.standalone)}function gj(){return AA()&&document.documentMode===10}function eb(n=cn()){return ey(n)||Xk(n)||Zk(n)||Jk(n)||/windows phone/i.test(n)||Yk(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tb(n,e=[]){let t;switch(n){case"Browser":t=yx(cn());break;case"Worker":t=`${yx(cn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ul}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((c,f)=>{try{const d=e(a);c(d)}catch(d){f(d)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vj(n,e={}){return Di(n,"GET","/v2/passwordPolicy",Vs(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xj=6;class wj{constructor(e){var r;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??xj,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vx(this),this.idTokenSubscription=new vx(this),this.beforeStateQueue=new yj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Fk,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=bi(t)),this._initializationPromise=this.queue(async()=>{var r,s,a;if(!this._deleted&&(this.persistenceManager=await za.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await wh(this,{idToken:e}),r=await mr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(Dn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(a=this.redirectUser)==null?void 0:a._redirectEventId,f=r==null?void 0:r._redirectEventId,d=await this.tryRedirectSignIn(e);(!c||c===f)&&(d!=null&&d.user)&&(r=d.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await _h(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ZR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Dn(this.app))return Promise.reject(Ei(this));const t=e?Lt(e):null;return t&&be(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Dn(this.app)?Promise.reject(Ei(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Dn(this.app)?Promise.reject(Ei(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(bi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await vj(this),t=new wj(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ou("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await mj(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&bi(e)||this._popupRedirectResolver;be(t,this,"argument-error"),this.redirectPersistenceManager=await za.create(this,[bi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(be(f,this,"internal-error"),f.then(()=>{c||a(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,r,s);return()=>{c=!0,d()}}else{const d=e.addObserver(t);return()=>{c=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(Dn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&QR(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ls(n){return Lt(n)}class vx{constructor(e){this.auth=e,this.observer=null,this.addObserver=LA(t=>this.observer=t)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function kj(n){Xh=n}function nb(n){return Xh.loadJS(n)}function bj(){return Xh.recaptchaEnterpriseScript}function Sj(){return Xh.gapiScript}function Ej(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class Tj{constructor(){this.enterprise=new Ij}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Ij{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Cj="recaptcha-enterprise",rb="NO_RECAPTCHA";class Aj{constructor(e){this.type=Cj,this.auth=Ls(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(c,f)=>{oj(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const m=new sj(d);return a.tenantId==null?a._agentRecaptchaConfig=m:a._tenantRecaptchaConfigs[a.tenantId]=m,c(m.siteKey)}}).catch(d=>{f(d)})})}function s(a,c,f){const d=window.grecaptcha;fx(d)?d.enterprise.ready(()=>{d.enterprise.execute(a,{action:e}).then(m=>{c(m)}).catch(()=>{c(rb)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Tj().execute("siteKey",{action:"verify"}):new Promise((a,c)=>{r(this.auth).then(f=>{if(!t&&fx(window.grecaptcha))s(f,a,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let d=bj();d.length!==0&&(d+=f),nb(d).then(()=>{s(f,a,c)}).catch(m=>{c(m)})}}).catch(f=>{c(f)})})}}async function xx(n,e,t,r=!1,s=!1){const a=new Aj(n);let c;if(s)c=rb;else try{c=await a.verify(t)}catch{c=await a.verify(t,!0)}const f={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const d=f.phoneEnrollmentInfo.phoneNumber,m=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const d=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return r?Object.assign(f,{captchaResp:c}):Object.assign(f,{captchaResponse:c}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function Hp(n,e,t,r,s){var a;if((a=n._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await xx(n,e,t,t==="getOobCode");return r(n,c)}else return r(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await xx(n,e,t,t==="getOobCode");return r(n,f)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rj(n,e){const t=Qg(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),a=t.getOptions();if(Ts(a,e??{}))return s;Zn(s,"already-initialized")}return t.initialize({options:e})}function jj(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(bi);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Pj(n,e,t){const r=Ls(n);be(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=ib(e),{host:c,port:f}=Mj(e),d=f===null?"":`:${f}`,m={url:`${a}//${c}${d}/`},g=Object.freeze({host:c,port:f,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){be(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),be(Ts(m,r.config.emulator)&&Ts(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=m,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,cl(c)?(Pk(`${a}//${c}${d}`),Mk("Auth",!0)):Nj()}function ib(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Mj(n){const e=ib(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:wx(r.substr(a.length+1))}}else{const[a,c]=r.split(":");return{host:a,port:wx(c)}}}function wx(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function Nj(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ki("not implemented")}_getIdTokenResponse(e){return ki("not implemented")}_linkToIdToken(e,t){return ki("not implemented")}_getReauthenticationResolver(e){return ki("not implemented")}}async function Dj(n,e){return Di(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vj(n,e){return cu(n,"POST","/v1/accounts:signInWithPassword",Vs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lj(n,e){return cu(n,"POST","/v1/accounts:signInWithEmailLink",Vs(n,e))}async function Oj(n,e){return cu(n,"POST","/v1/accounts:signInWithEmailLink",Vs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c extends ty{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new $c(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new $c(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hp(e,t,"signInWithPassword",Vj);case"emailLink":return Lj(e,{email:this._email,oobCode:this._password});default:Zn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hp(e,r,"signUpPassword",Dj);case"emailLink":return Oj(e,{idToken:t,email:this._email,oobCode:this._password});default:Zn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fa(n,e){return cu(n,"POST","/v1/accounts:signInWithIdp",Vs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bj="http://localhost";class Co extends ty{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Co(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Zn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...a}=t;if(!r||!s)return null;const c=new Co(r,s);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Fa(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Fa(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Fa(e,t)}buildRequest(){const e={requestUri:Bj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=au(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zj(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Fj(n){const e=bc(Sc(n)).link,t=e?bc(Sc(e)).deep_link_id:null,r=bc(Sc(n)).deep_link_id;return(r?bc(Sc(r)).link:null)||r||t||e||n}class ny{constructor(e){const t=bc(Sc(e)),r=t.apiKey??null,s=t.oobCode??null,a=zj(t.mode??null);be(r&&s&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=Fj(e);try{return new ny(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(){this.providerId=dl.PROVIDER_ID}static credential(e,t){return $c._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=ny.parseLink(t);return be(r,"argument-error"),$c._fromEmailAndCode(e,r.code,r.tenantId)}}dl.PROVIDER_ID="password";dl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";dl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu extends ry{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps extends uu{constructor(){super("facebook.com")}static credential(e){return Co._fromParams({providerId:ps.PROVIDER_ID,signInMethod:ps.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ps.credentialFromTaggedObject(e)}static credentialFromError(e){return ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ps.credential(e.oauthAccessToken)}catch{return null}}}ps.FACEBOOK_SIGN_IN_METHOD="facebook.com";ps.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi extends uu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Co._fromParams({providerId:wi.PROVIDER_ID,signInMethod:wi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return wi.credentialFromTaggedObject(e)}static credentialFromError(e){return wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return wi.credential(t,r)}catch{return null}}}wi.GOOGLE_SIGN_IN_METHOD="google.com";wi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs extends uu{constructor(){super("github.com")}static credential(e){return Co._fromParams({providerId:gs.PROVIDER_ID,signInMethod:gs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gs.credentialFromTaggedObject(e)}static credentialFromError(e){return gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gs.credential(e.oauthAccessToken)}catch{return null}}}gs.GITHUB_SIGN_IN_METHOD="github.com";gs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys extends uu{constructor(){super("twitter.com")}static credential(e,t){return Co._fromParams({providerId:ys.PROVIDER_ID,signInMethod:ys.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ys.credentialFromTaggedObject(e)}static credentialFromError(e){return ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ys.credential(t,r)}catch{return null}}}ys.TWITTER_SIGN_IN_METHOD="twitter.com";ys.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uj(n,e){return cu(n,"POST","/v1/accounts:signUp",Vs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const a=await mr._fromIdTokenResponse(e,r,s),c=_x(r);return new Ao({user:a,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=_x(r);return new Ao({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function _x(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh extends Ni{constructor(e,t,r,s){super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,kh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new kh(e,t,r,s)}}function sb(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?kh._fromErrorAndOperation(n,a,e,r):a})}async function $j(n,e,t=!1){const r=await Ga(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ao._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wj(n,e,t=!1){const{auth:r}=n;if(Dn(r.app))return Promise.reject(Ei(r));const s="reauthenticate";try{const a=await Ga(n,sb(r,s,e,n),t);be(a.idToken,r,"internal-error");const c=Zg(a.idToken);be(c,r,"internal-error");const{sub:f}=c;return be(n.uid===f,r,"user-mismatch"),Ao._forOperation(n,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Zn(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ob(n,e,t=!1){if(Dn(n.app))return Promise.reject(Ei(n));const r="signIn",s=await sb(n,r,e),a=await Ao._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(a.user),a}async function Hj(n,e){return ob(Ls(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ab(n){const e=Ls(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Kj(n,e,t){if(Dn(n.app))return Promise.reject(Ei(n));const r=Ls(n),c=await Hp(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Uj).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&ab(n),d}),f=await Ao._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(f.user),f}function qj(n,e,t){return Dn(n.app)?Promise.reject(Ei(n)):Hj(Lt(n),dl.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ab(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gj(n,e){return Di(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qj(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Lt(n),a={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=await Ga(r,Gj(r.auth,a));r.displayName=c.displayName||null,r.photoURL=c.photoUrl||null;const f=r.providerData.find(({providerId:d})=>d==="password");f&&(f.displayName=r.displayName,f.photoURL=r.photoURL),await r._updateTokensIfNecessary(c)}function Yj(n,e,t,r){return Lt(n).onIdTokenChanged(e,t,r)}function Xj(n,e,t){return Lt(n).beforeAuthStateChanged(e,t)}function Jj(n,e,t,r){return Lt(n).onAuthStateChanged(e,t,r)}function Zj(n){return Lt(n).signOut()}const bh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(bh,"1"),this.storage.removeItem(bh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e5=1e3,t5=10;class cb extends lb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=eb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,f,d)=>{this.notifyListeners(c,d)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},a=this.storage.getItem(r);gj()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,t5):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},e5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}cb.type="LOCAL";const n5=cb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub extends lb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ub.type="SESSION";const db=ub;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r5(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new Jh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:a}=t.data,c=this.handlersMap[s];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const f=Array.from(c).map(async m=>m(t.origin,a)),d=await r5(f);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Jh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iy(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,c;return new Promise((f,d)=>{const m=iy("",20);s.port1.start();const g=setTimeout(()=>{d(new Error("unsupported_event"))},r);c={messageChannel:s,onMessage(y){const x=y;if(x.data.eventId===m)switch(x.data.status){case"ack":clearTimeout(g),a=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),f(x.data.response);break;default:clearTimeout(g),clearTimeout(a),d(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ur(){return window}function s5(n){Ur().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hb(){return typeof Ur().WorkerGlobalScope<"u"&&typeof Ur().importScripts=="function"}async function o5(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function a5(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function l5(){return hb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb="firebaseLocalStorageDb",c5=1,Sh="firebaseLocalStorage",mb="fbase_key";class du{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Zh(n,e){return n.transaction([Sh],e?"readwrite":"readonly").objectStore(Sh)}function u5(){const n=indexedDB.deleteDatabase(fb);return new du(n).toPromise()}function Kp(){const n=indexedDB.open(fb,c5);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Sh,{keyPath:mb})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Sh)?e(r):(r.close(),await u5(),e(await Kp()))})})}async function kx(n,e,t){const r=Zh(n,!0).put({[mb]:e,value:t});return new du(r).toPromise()}async function d5(n,e){const t=Zh(n,!1).get(e),r=await new du(t).toPromise();return r===void 0?null:r.value}function bx(n,e){const t=Zh(n,!0).delete(e);return new du(t).toPromise()}const h5=800,f5=3;class pb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Kp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>f5)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return hb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Jh._getInstance(l5()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await o5(),!this.activeServiceWorker)return;this.sender=new i5(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||a5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Kp();return await kx(e,bh,"1"),await bx(e,bh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>kx(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>d5(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>bx(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=Zh(s,!1).getAll();return new du(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),h5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}pb.type="LOCAL";const m5=pb;new lu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gb(n,e){return e?bi(e):(be(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy extends ty{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Fa(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Fa(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Fa(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function p5(n){return ob(n.auth,new sy(n),n.bypassAuthState)}function g5(n){const{auth:e,user:t}=n;return be(t,e,"internal-error"),Wj(t,new sy(n),n.bypassAuthState)}async function y5(n){const{auth:e,user:t}=n;return be(t,e,"internal-error"),$j(t,new sy(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(e,t,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:a,error:c,type:f}=e;if(c){this.reject(c);return}const d={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(d))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return p5;case"linkViaPopup":case"linkViaRedirect":return y5;case"reauthViaPopup":case"reauthViaRedirect":return g5;default:Zn(this.auth,"internal-error")}}resolve(e){Ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v5=new lu(2e3,1e4);async function x5(n,e,t){if(Dn(n.app))return Promise.reject(pr(n,"operation-not-supported-in-this-environment"));const r=Ls(n);YR(n,e,ry);const s=gb(r,t);return new wo(r,"signInViaPopup",e,s).executeNotNull()}class wo extends yb{constructor(e,t,r,s,a){super(e,t,s,a),this.provider=r,this.authWindow=null,this.pollId=null,wo.currentPopupAction&&wo.currentPopupAction.cancel(),wo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return be(e,this.auth,"internal-error"),e}async onExecution(){Ri(this.filter.length===1,"Popup operations only handle one event");const e=iy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(pr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(pr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,wo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if((r=(t=this.authWindow)==null?void 0:t.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,v5.get())};e()}}wo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w5="pendingRedirect",ih=new Map;class _5 extends yb{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=ih.get(this.auth._key());if(!e){try{const r=await k5(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}ih.set(this.auth._key(),e)}return this.bypassAuthState||ih.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function k5(n,e){const t=E5(e),r=S5(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function b5(n,e){ih.set(n._key(),e)}function S5(n){return bi(n._redirectPersistence)}function E5(n){return rh(w5,n.config.apiKey,n.name)}async function T5(n,e,t=!1){if(Dn(n.app))return Promise.reject(Ei(n));const r=Ls(n),s=gb(r,e),c=await new _5(r,s,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I5=600*1e3;class C5{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!A5(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!vb(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";t.onError(pr(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=I5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Sx(e))}saveEventToCache(e){this.cachedEventUids.add(Sx(e)),this.lastProcessedEventTime=Date.now()}}function Sx(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function vb({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function A5(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vb(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R5(n,e={}){return Di(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j5=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,P5=/^https?/;async function M5(n){if(n.config.emulator)return;const{authorizedDomains:e}=await R5(n);for(const t of e)try{if(N5(t))return}catch{}Zn(n,"unauthorized-domain")}function N5(n){const e=$p(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!P5.test(t))return!1;if(j5.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D5=new lu(3e4,6e4);function Ex(){const n=Ur().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function V5(n){return new Promise((e,t)=>{var s,a,c;function r(){Ex(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ex(),t(pr(n,"network-request-failed"))},timeout:D5.get()})}if((a=(s=Ur().gapi)==null?void 0:s.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((c=Ur().gapi)!=null&&c.load)r();else{const f=Ej("iframefcb");return Ur()[f]=()=>{gapi.load?r():t(pr(n,"network-request-failed"))},nb(`${Sj()}?onload=${f}`).catch(d=>t(d))}}).catch(e=>{throw sh=null,e})}let sh=null;function L5(n){return sh=sh||V5(n),sh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O5=new lu(5e3,15e3),B5="__/auth/iframe",z5="emulator/auth/iframe",F5={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},U5=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $5(n){const e=n.config;be(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Jg(e,z5):`https://${n.config.authDomain}/${B5}`,r={apiKey:e.apiKey,appName:n.name,v:ul},s=U5.get(n.config.apiHost);s&&(r.eid=s);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${au(r).slice(1)}`}async function W5(n){const e=await L5(n),t=Ur().gapi;return be(t,n,"internal-error"),e.open({where:document.body,url:$5(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:F5,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const c=pr(n,"network-request-failed"),f=Ur().setTimeout(()=>{a(c)},O5.get());function d(){Ur().clearTimeout(f),s(r)}r.ping(d).then(d,()=>{a(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H5={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},K5=500,q5=600,G5="_blank",Q5="http://localhost";class Tx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Y5(n,e,t,r=K5,s=q5){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let f="";const d={...H5,width:r.toString(),height:s.toString(),top:a,left:c},m=cn().toLowerCase();t&&(f=Qk(m)?G5:t),qk(m)&&(e=e||Q5,d.scrollbars="yes");const g=Object.entries(d).reduce((x,[S,k])=>`${x}${S}=${k},`,"");if(pj(m)&&f!=="_self")return X5(e||"",f),new Tx(null);const y=window.open(e||"",f,g);be(y,n,"popup-blocked");try{y.focus()}catch{}return new Tx(y)}function X5(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J5="__/auth/handler",Z5="emulator/auth/handler",eP=encodeURIComponent("fac");async function Ix(n,e,t,r,s,a){be(n.config.authDomain,n,"auth-domain-config-required"),be(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ul,eventId:s};if(e instanceof ry){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",VA(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,y]of Object.entries({}))c[g]=y}if(e instanceof uu){const g=e.getScopes().filter(y=>y!=="");g.length>0&&(c.scopes=g.join(","))}n.tenantId&&(c.tid=n.tenantId);const f=c;for(const g of Object.keys(f))f[g]===void 0&&delete f[g];const d=await n._getAppCheckToken(),m=d?`#${eP}=${encodeURIComponent(d)}`:"";return`${tP(n)}?${au(f).slice(1)}${m}`}function tP({config:n}){return n.emulator?Jg(n,Z5):`https://${n.authDomain}/${J5}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ap="webStorageSupport";class nP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=db,this._completeRedirectFn=T5,this._overrideRedirectResult=b5}async _openPopup(e,t,r,s){var c;Ri((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const a=await Ix(e,t,r,$p(),s);return Y5(e,a,iy())}async _openRedirect(e,t,r,s){await this._originValidation(e);const a=await Ix(e,t,r,$p(),s);return s5(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:a}=this.eventManagers[t];return s?Promise.resolve(s):(Ri(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await W5(e),r=new C5(e);return t.register("authEvent",s=>(be(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ap,{type:ap},s=>{var c;const a=(c=s==null?void 0:s[0])==null?void 0:c[ap];a!==void 0&&t(!!a),Zn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=M5(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return eb()||Gk()||ey()}}const rP=nP;var Cx="@firebase/auth",Ax="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sP(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function oP(n){qa(new Io("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=r.options;be(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:c,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tb(n)},m=new _j(r,s,a,d);return jj(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),qa(new Io("auth-internal",e=>{const t=Ls(e.getProvider("auth").getImmediate());return(r=>new iP(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),bs(Cx,Ax,sP(n)),bs(Cx,Ax,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aP=300,lP=jk("authIdTokenMaxAge")||aP;let Rx=null;const cP=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>lP)return;const s=t==null?void 0:t.token;Rx!==s&&(Rx=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function uP(n=Lk()){const e=Qg(n,"auth");if(e.isInitialized())return e.getImmediate();const t=Rj(n,{popupRedirectResolver:rP,persistence:[m5,n5,db]}),r=jk("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const c=cP(a.toString());Xj(t,c,()=>c(t.currentUser)),Yj(t,f=>c(f))}}const s=Ak("auth");return s&&Pj(t,`http://${s}`),t}function dP(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}kj({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const a=pr("internal-error");a.customData=s,t(a)},r.type="text/javascript",r.charset="UTF-8",dP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});oP("Browser");var jx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ss,xb;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,C){function M(){}M.prototype=C.prototype,A.F=C.prototype,A.prototype=new M,A.prototype.constructor=A,A.D=function(L,B,W){for(var O=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)O[Me-2]=arguments[Me];return C.prototype[B].apply(L,O)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,C,M){M||(M=0);const L=Array(16);if(typeof C=="string")for(var B=0;B<16;++B)L[B]=C.charCodeAt(M++)|C.charCodeAt(M++)<<8|C.charCodeAt(M++)<<16|C.charCodeAt(M++)<<24;else for(B=0;B<16;++B)L[B]=C[M++]|C[M++]<<8|C[M++]<<16|C[M++]<<24;C=A.g[0],M=A.g[1],B=A.g[2];let W=A.g[3],O;O=C+(W^M&(B^W))+L[0]+3614090360&4294967295,C=M+(O<<7&4294967295|O>>>25),O=W+(B^C&(M^B))+L[1]+3905402710&4294967295,W=C+(O<<12&4294967295|O>>>20),O=B+(M^W&(C^M))+L[2]+606105819&4294967295,B=W+(O<<17&4294967295|O>>>15),O=M+(C^B&(W^C))+L[3]+3250441966&4294967295,M=B+(O<<22&4294967295|O>>>10),O=C+(W^M&(B^W))+L[4]+4118548399&4294967295,C=M+(O<<7&4294967295|O>>>25),O=W+(B^C&(M^B))+L[5]+1200080426&4294967295,W=C+(O<<12&4294967295|O>>>20),O=B+(M^W&(C^M))+L[6]+2821735955&4294967295,B=W+(O<<17&4294967295|O>>>15),O=M+(C^B&(W^C))+L[7]+4249261313&4294967295,M=B+(O<<22&4294967295|O>>>10),O=C+(W^M&(B^W))+L[8]+1770035416&4294967295,C=M+(O<<7&4294967295|O>>>25),O=W+(B^C&(M^B))+L[9]+2336552879&4294967295,W=C+(O<<12&4294967295|O>>>20),O=B+(M^W&(C^M))+L[10]+4294925233&4294967295,B=W+(O<<17&4294967295|O>>>15),O=M+(C^B&(W^C))+L[11]+2304563134&4294967295,M=B+(O<<22&4294967295|O>>>10),O=C+(W^M&(B^W))+L[12]+1804603682&4294967295,C=M+(O<<7&4294967295|O>>>25),O=W+(B^C&(M^B))+L[13]+4254626195&4294967295,W=C+(O<<12&4294967295|O>>>20),O=B+(M^W&(C^M))+L[14]+2792965006&4294967295,B=W+(O<<17&4294967295|O>>>15),O=M+(C^B&(W^C))+L[15]+1236535329&4294967295,M=B+(O<<22&4294967295|O>>>10),O=C+(B^W&(M^B))+L[1]+4129170786&4294967295,C=M+(O<<5&4294967295|O>>>27),O=W+(M^B&(C^M))+L[6]+3225465664&4294967295,W=C+(O<<9&4294967295|O>>>23),O=B+(C^M&(W^C))+L[11]+643717713&4294967295,B=W+(O<<14&4294967295|O>>>18),O=M+(W^C&(B^W))+L[0]+3921069994&4294967295,M=B+(O<<20&4294967295|O>>>12),O=C+(B^W&(M^B))+L[5]+3593408605&4294967295,C=M+(O<<5&4294967295|O>>>27),O=W+(M^B&(C^M))+L[10]+38016083&4294967295,W=C+(O<<9&4294967295|O>>>23),O=B+(C^M&(W^C))+L[15]+3634488961&4294967295,B=W+(O<<14&4294967295|O>>>18),O=M+(W^C&(B^W))+L[4]+3889429448&4294967295,M=B+(O<<20&4294967295|O>>>12),O=C+(B^W&(M^B))+L[9]+568446438&4294967295,C=M+(O<<5&4294967295|O>>>27),O=W+(M^B&(C^M))+L[14]+3275163606&4294967295,W=C+(O<<9&4294967295|O>>>23),O=B+(C^M&(W^C))+L[3]+4107603335&4294967295,B=W+(O<<14&4294967295|O>>>18),O=M+(W^C&(B^W))+L[8]+1163531501&4294967295,M=B+(O<<20&4294967295|O>>>12),O=C+(B^W&(M^B))+L[13]+2850285829&4294967295,C=M+(O<<5&4294967295|O>>>27),O=W+(M^B&(C^M))+L[2]+4243563512&4294967295,W=C+(O<<9&4294967295|O>>>23),O=B+(C^M&(W^C))+L[7]+1735328473&4294967295,B=W+(O<<14&4294967295|O>>>18),O=M+(W^C&(B^W))+L[12]+2368359562&4294967295,M=B+(O<<20&4294967295|O>>>12),O=C+(M^B^W)+L[5]+4294588738&4294967295,C=M+(O<<4&4294967295|O>>>28),O=W+(C^M^B)+L[8]+2272392833&4294967295,W=C+(O<<11&4294967295|O>>>21),O=B+(W^C^M)+L[11]+1839030562&4294967295,B=W+(O<<16&4294967295|O>>>16),O=M+(B^W^C)+L[14]+4259657740&4294967295,M=B+(O<<23&4294967295|O>>>9),O=C+(M^B^W)+L[1]+2763975236&4294967295,C=M+(O<<4&4294967295|O>>>28),O=W+(C^M^B)+L[4]+1272893353&4294967295,W=C+(O<<11&4294967295|O>>>21),O=B+(W^C^M)+L[7]+4139469664&4294967295,B=W+(O<<16&4294967295|O>>>16),O=M+(B^W^C)+L[10]+3200236656&4294967295,M=B+(O<<23&4294967295|O>>>9),O=C+(M^B^W)+L[13]+681279174&4294967295,C=M+(O<<4&4294967295|O>>>28),O=W+(C^M^B)+L[0]+3936430074&4294967295,W=C+(O<<11&4294967295|O>>>21),O=B+(W^C^M)+L[3]+3572445317&4294967295,B=W+(O<<16&4294967295|O>>>16),O=M+(B^W^C)+L[6]+76029189&4294967295,M=B+(O<<23&4294967295|O>>>9),O=C+(M^B^W)+L[9]+3654602809&4294967295,C=M+(O<<4&4294967295|O>>>28),O=W+(C^M^B)+L[12]+3873151461&4294967295,W=C+(O<<11&4294967295|O>>>21),O=B+(W^C^M)+L[15]+530742520&4294967295,B=W+(O<<16&4294967295|O>>>16),O=M+(B^W^C)+L[2]+3299628645&4294967295,M=B+(O<<23&4294967295|O>>>9),O=C+(B^(M|~W))+L[0]+4096336452&4294967295,C=M+(O<<6&4294967295|O>>>26),O=W+(M^(C|~B))+L[7]+1126891415&4294967295,W=C+(O<<10&4294967295|O>>>22),O=B+(C^(W|~M))+L[14]+2878612391&4294967295,B=W+(O<<15&4294967295|O>>>17),O=M+(W^(B|~C))+L[5]+4237533241&4294967295,M=B+(O<<21&4294967295|O>>>11),O=C+(B^(M|~W))+L[12]+1700485571&4294967295,C=M+(O<<6&4294967295|O>>>26),O=W+(M^(C|~B))+L[3]+2399980690&4294967295,W=C+(O<<10&4294967295|O>>>22),O=B+(C^(W|~M))+L[10]+4293915773&4294967295,B=W+(O<<15&4294967295|O>>>17),O=M+(W^(B|~C))+L[1]+2240044497&4294967295,M=B+(O<<21&4294967295|O>>>11),O=C+(B^(M|~W))+L[8]+1873313359&4294967295,C=M+(O<<6&4294967295|O>>>26),O=W+(M^(C|~B))+L[15]+4264355552&4294967295,W=C+(O<<10&4294967295|O>>>22),O=B+(C^(W|~M))+L[6]+2734768916&4294967295,B=W+(O<<15&4294967295|O>>>17),O=M+(W^(B|~C))+L[13]+1309151649&4294967295,M=B+(O<<21&4294967295|O>>>11),O=C+(B^(M|~W))+L[4]+4149444226&4294967295,C=M+(O<<6&4294967295|O>>>26),O=W+(M^(C|~B))+L[11]+3174756917&4294967295,W=C+(O<<10&4294967295|O>>>22),O=B+(C^(W|~M))+L[2]+718787259&4294967295,B=W+(O<<15&4294967295|O>>>17),O=M+(W^(B|~C))+L[9]+3951481745&4294967295,A.g[0]=A.g[0]+C&4294967295,A.g[1]=A.g[1]+(B+(O<<21&4294967295|O>>>11))&4294967295,A.g[2]=A.g[2]+B&4294967295,A.g[3]=A.g[3]+W&4294967295}r.prototype.v=function(A,C){C===void 0&&(C=A.length);const M=C-this.blockSize,L=this.C;let B=this.h,W=0;for(;W<C;){if(B==0)for(;W<=M;)s(this,A,W),W+=this.blockSize;if(typeof A=="string"){for(;W<C;)if(L[B++]=A.charCodeAt(W++),B==this.blockSize){s(this,L),B=0;break}}else for(;W<C;)if(L[B++]=A[W++],B==this.blockSize){s(this,L),B=0;break}}this.h=B,this.o+=C},r.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var C=1;C<A.length-8;++C)A[C]=0;C=this.o*8;for(var M=A.length-8;M<A.length;++M)A[M]=C&255,C/=256;for(this.v(A),A=Array(16),C=0,M=0;M<4;++M)for(let L=0;L<32;L+=8)A[C++]=this.g[M]>>>L&255;return A};function a(A,C){var M=f;return Object.prototype.hasOwnProperty.call(M,A)?M[A]:M[A]=C(A)}function c(A,C){this.h=C;const M=[];let L=!0;for(let B=A.length-1;B>=0;B--){const W=A[B]|0;L&&W==C||(M[B]=W,L=!1)}this.g=M}var f={};function d(A){return-128<=A&&A<128?a(A,function(C){return new c([C|0],C<0?-1:0)}):new c([A|0],A<0?-1:0)}function m(A){if(isNaN(A)||!isFinite(A))return y;if(A<0)return E(m(-A));const C=[];let M=1;for(let L=0;A>=M;L++)C[L]=A/M|0,M*=4294967296;return new c(C,0)}function g(A,C){if(A.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(A.charAt(0)=="-")return E(g(A.substring(1),C));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const M=m(Math.pow(C,8));let L=y;for(let W=0;W<A.length;W+=8){var B=Math.min(8,A.length-W);const O=parseInt(A.substring(W,W+B),C);B<8?(B=m(Math.pow(C,B)),L=L.j(B).add(m(O))):(L=L.j(M),L=L.add(m(O)))}return L}var y=d(0),x=d(1),S=d(16777216);n=c.prototype,n.m=function(){if(T(this))return-E(this).m();let A=0,C=1;for(let M=0;M<this.g.length;M++){const L=this.i(M);A+=(L>=0?L:4294967296+L)*C,C*=4294967296}return A},n.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(k(this))return"0";if(T(this))return"-"+E(this).toString(A);const C=m(Math.pow(A,6));var M=this;let L="";for(;;){const B=G(M,C).g;M=N(M,B.j(C));let W=((M.g.length>0?M.g[0]:M.h)>>>0).toString(A);if(M=B,k(M))return W+L;for(;W.length<6;)W="0"+W;L=W+L}},n.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function k(A){if(A.h!=0)return!1;for(let C=0;C<A.g.length;C++)if(A.g[C]!=0)return!1;return!0}function T(A){return A.h==-1}n.l=function(A){return A=N(this,A),T(A)?-1:k(A)?0:1};function E(A){const C=A.g.length,M=[];for(let L=0;L<C;L++)M[L]=~A.g[L];return new c(M,~A.h).add(x)}n.abs=function(){return T(this)?E(this):this},n.add=function(A){const C=Math.max(this.g.length,A.g.length),M=[];let L=0;for(let B=0;B<=C;B++){let W=L+(this.i(B)&65535)+(A.i(B)&65535),O=(W>>>16)+(this.i(B)>>>16)+(A.i(B)>>>16);L=O>>>16,W&=65535,O&=65535,M[B]=O<<16|W}return new c(M,M[M.length-1]&-2147483648?-1:0)};function N(A,C){return A.add(E(C))}n.j=function(A){if(k(this)||k(A))return y;if(T(this))return T(A)?E(this).j(E(A)):E(E(this).j(A));if(T(A))return E(this.j(E(A)));if(this.l(S)<0&&A.l(S)<0)return m(this.m()*A.m());const C=this.g.length+A.g.length,M=[];for(var L=0;L<2*C;L++)M[L]=0;for(L=0;L<this.g.length;L++)for(let B=0;B<A.g.length;B++){const W=this.i(L)>>>16,O=this.i(L)&65535,Me=A.i(B)>>>16,He=A.i(B)&65535;M[2*L+2*B]+=O*He,D(M,2*L+2*B),M[2*L+2*B+1]+=W*He,D(M,2*L+2*B+1),M[2*L+2*B+1]+=O*Me,D(M,2*L+2*B+1),M[2*L+2*B+2]+=W*Me,D(M,2*L+2*B+2)}for(A=0;A<C;A++)M[A]=M[2*A+1]<<16|M[2*A];for(A=C;A<2*C;A++)M[A]=0;return new c(M,0)};function D(A,C){for(;(A[C]&65535)!=A[C];)A[C+1]+=A[C]>>>16,A[C]&=65535,C++}function P(A,C){this.g=A,this.h=C}function G(A,C){if(k(C))throw Error("division by zero");if(k(A))return new P(y,y);if(T(A))return C=G(E(A),C),new P(E(C.g),E(C.h));if(T(C))return C=G(A,E(C)),new P(E(C.g),C.h);if(A.g.length>30){if(T(A)||T(C))throw Error("slowDivide_ only works with positive integers.");for(var M=x,L=C;L.l(A)<=0;)M=F(M),L=F(L);var B=$(M,1),W=$(L,1);for(L=$(L,2),M=$(M,2);!k(L);){var O=W.add(L);O.l(A)<=0&&(B=B.add(M),W=O),L=$(L,1),M=$(M,1)}return C=N(A,B.j(C)),new P(B,C)}for(B=y;A.l(C)>=0;){for(M=Math.max(1,Math.floor(A.m()/C.m())),L=Math.ceil(Math.log(M)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),W=m(M),O=W.j(C);T(O)||O.l(A)>0;)M-=L,W=m(M),O=W.j(C);k(W)&&(W=x),B=B.add(W),A=N(A,O)}return new P(B,A)}n.B=function(A){return G(this,A).h},n.and=function(A){const C=Math.max(this.g.length,A.g.length),M=[];for(let L=0;L<C;L++)M[L]=this.i(L)&A.i(L);return new c(M,this.h&A.h)},n.or=function(A){const C=Math.max(this.g.length,A.g.length),M=[];for(let L=0;L<C;L++)M[L]=this.i(L)|A.i(L);return new c(M,this.h|A.h)},n.xor=function(A){const C=Math.max(this.g.length,A.g.length),M=[];for(let L=0;L<C;L++)M[L]=this.i(L)^A.i(L);return new c(M,this.h^A.h)};function F(A){const C=A.g.length+1,M=[];for(let L=0;L<C;L++)M[L]=A.i(L)<<1|A.i(L-1)>>>31;return new c(M,A.h)}function $(A,C){const M=C>>5;C%=32;const L=A.g.length-M,B=[];for(let W=0;W<L;W++)B[W]=C>0?A.i(W+M)>>>C|A.i(W+M+1)<<32-C:A.i(W+M);return new c(B,A.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,xb=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=g,Ss=c}).apply(typeof jx<"u"?jx:typeof self<"u"?self:typeof window<"u"?window:{});var $d=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wb,Ec,_b,oh,qp,kb,bb,Sb;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof $d=="object"&&$d];for(var _=0;_<h.length;++_){var b=h[_];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=t(this);function s(h,_){if(_)e:{var b=r;h=h.split(".");for(var j=0;j<h.length-1;j++){var q=h[j];if(!(q in b))break e;b=b[q]}h=h[h.length-1],j=b[h],_=_(j),_!=j&&_!=null&&e(b,h,{configurable:!0,writable:!0,value:_})}}s("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(h){return h||function(_){var b=[],j;for(j in _)Object.prototype.hasOwnProperty.call(_,j)&&b.push([j,_[j]]);return b}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},c=this||self;function f(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function d(h,_,b){return h.call.apply(h.bind,arguments)}function m(h,_,b){return m=d,m.apply(null,arguments)}function g(h,_){var b=Array.prototype.slice.call(arguments,1);return function(){var j=b.slice();return j.push.apply(j,arguments),h.apply(this,j)}}function y(h,_){function b(){}b.prototype=_.prototype,h.Z=_.prototype,h.prototype=new b,h.prototype.constructor=h,h.Ob=function(j,q,X){for(var oe=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)oe[Re-2]=arguments[Re];return _.prototype[q].apply(j,oe)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function S(h){const _=h.length;if(_>0){const b=Array(_);for(let j=0;j<_;j++)b[j]=h[j];return b}return[]}function k(h,_){for(let j=1;j<arguments.length;j++){const q=arguments[j];var b=typeof q;if(b=b!="object"?b:q?Array.isArray(q)?"array":b:"null",b=="array"||b=="object"&&typeof q.length=="number"){b=h.length||0;const X=q.length||0;h.length=b+X;for(let oe=0;oe<X;oe++)h[b+oe]=q[oe]}else h.push(q)}}class T{constructor(_,b){this.i=_,this.j=b,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function E(h){c.setTimeout(()=>{throw h},0)}function N(){var h=A;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class D{constructor(){this.h=this.g=null}add(_,b){const j=P.get();j.set(_,b),this.h?this.h.next=j:this.g=j,this.h=j}}var P=new T(()=>new G,h=>h.reset());class G{constructor(){this.next=this.g=this.h=null}set(_,b){this.h=_,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let F,$=!1,A=new D,C=()=>{const h=Promise.resolve(void 0);F=()=>{h.then(M)}};function M(){for(var h;h=N();){try{h.h.call(h.g)}catch(b){E(b)}var _=P;_.j(h),_.h<100&&(_.h++,h.next=_.g,_.g=h)}$=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function B(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}B.prototype.h=function(){this.defaultPrevented=!0};var W=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const b=()=>{};c.addEventListener("test",b,_),c.removeEventListener("test",b,_)}catch{}return h})();function O(h){return/^[\s\xa0]*$/.test(h)}function Me(h,_){B.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,_)}y(Me,B),Me.prototype.init=function(h,_){const b=this.type=h.type,j=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget,_||(b=="mouseover"?_=h.fromElement:b=="mouseout"&&(_=h.toElement)),this.relatedTarget=_,j?(this.clientX=j.clientX!==void 0?j.clientX:j.pageX,this.clientY=j.clientY!==void 0?j.clientY:j.pageY,this.screenX=j.screenX||0,this.screenY=j.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Me.Z.h.call(this)},Me.prototype.h=function(){Me.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var He="closure_listenable_"+(Math.random()*1e6|0),kt=0;function Ee(h,_,b,j,q){this.listener=h,this.proxy=null,this.src=_,this.type=b,this.capture=!!j,this.ha=q,this.key=++kt,this.da=this.fa=!1}function ie(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function pe(h,_,b){for(const j in h)_.call(b,h[j],j,h)}function le(h,_){for(const b in h)_.call(void 0,h[b],b,h)}function H(h){const _={};for(const b in h)_[b]=h[b];return _}const ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ce(h,_){let b,j;for(let q=1;q<arguments.length;q++){j=arguments[q];for(b in j)h[b]=j[b];for(let X=0;X<ee.length;X++)b=ee[X],Object.prototype.hasOwnProperty.call(j,b)&&(h[b]=j[b])}}function Ae(h){this.src=h,this.g={},this.h=0}Ae.prototype.add=function(h,_,b,j,q){const X=h.toString();h=this.g[X],h||(h=this.g[X]=[],this.h++);const oe=Ve(h,_,j,q);return oe>-1?(_=h[oe],b||(_.fa=!1)):(_=new Ee(_,this.src,X,!!j,q),_.fa=b,h.push(_)),_};function De(h,_){const b=_.type;if(b in h.g){var j=h.g[b],q=Array.prototype.indexOf.call(j,_,void 0),X;(X=q>=0)&&Array.prototype.splice.call(j,q,1),X&&(ie(_),h.g[b].length==0&&(delete h.g[b],h.h--))}}function Ve(h,_,b,j){for(let q=0;q<h.length;++q){const X=h[q];if(!X.da&&X.listener==_&&X.capture==!!b&&X.ha==j)return q}return-1}var Ge="closure_lm_"+(Math.random()*1e6|0),Ue={};function Xe(h,_,b,j,q){if(Array.isArray(_)){for(let X=0;X<_.length;X++)Xe(h,_[X],b,j,q);return null}return b=El(b),h&&h[He]?h.J(_,b,f(j)?!!j.capture:!1,q):un(h,_,b,!1,j,q)}function un(h,_,b,j,q,X){if(!_)throw Error("Invalid event type");const oe=f(q)?!!q.capture:!!q;let Re=$o(h);if(Re||(h[Ge]=Re=new Ae(h)),b=Re.add(_,b,j,oe,X),b.proxy)return b;if(j=Fo(),b.proxy=j,j.src=h,j.listener=b,h.addEventListener)W||(q=oe),q===void 0&&(q=!1),h.addEventListener(_.toString(),j,q);else if(h.attachEvent)h.attachEvent(Uo(_.toString()),j);else if(h.addListener&&h.removeListener)h.addListener(j);else throw Error("addEventListener and attachEvent are unavailable.");return b}function Fo(){function h(b){return _.call(h.src,h.listener,b)}const _=Eu;return h}function Sl(h,_,b,j,q){if(Array.isArray(_))for(var X=0;X<_.length;X++)Sl(h,_[X],b,j,q);else j=f(j)?!!j.capture:!!j,b=El(b),h&&h[He]?(h=h.i,X=String(_).toString(),X in h.g&&(_=h.g[X],b=Ve(_,b,j,q),b>-1&&(ie(_[b]),Array.prototype.splice.call(_,b,1),_.length==0&&(delete h.g[X],h.h--)))):h&&(h=$o(h))&&(_=h.g[_.toString()],h=-1,_&&(h=Ve(_,b,j,q)),(b=h>-1?_[h]:null)&&Li(b))}function Li(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[He])De(_.i,h);else{var b=h.type,j=h.proxy;_.removeEventListener?_.removeEventListener(b,j,h.capture):_.detachEvent?_.detachEvent(Uo(b),j):_.addListener&&_.removeListener&&_.removeListener(j),(b=$o(_))?(De(b,h),b.h==0&&(b.src=null,_[Ge]=null)):ie(h)}}}function Uo(h){return h in Ue?Ue[h]:Ue[h]="on"+h}function Eu(h,_){if(h.da)h=!0;else{_=new Me(_,this);const b=h.listener,j=h.ha||h.src;h.fa&&Li(h),h=b.call(j,_)}return h}function $o(h){return h=h[Ge],h instanceof Ae?h:null}var $s="__closure_events_fn_"+(Math.random()*1e9>>>0);function El(h){return typeof h=="function"?h:(h[$s]||(h[$s]=function(_){return h.handleEvent(_)}),h[$s])}function bt(){L.call(this),this.i=new Ae(this),this.M=this,this.G=null}y(bt,L),bt.prototype[He]=!0,bt.prototype.removeEventListener=function(h,_,b,j){Sl(this,h,_,b,j)};function yt(h,_){var b,j=h.G;if(j)for(b=[];j;j=j.G)b.push(j);if(h=h.M,j=_.type||_,typeof _=="string")_=new B(_,h);else if(_ instanceof B)_.target=_.target||h;else{var q=_;_=new B(j,h),Ce(_,q)}q=!0;let X,oe;if(b)for(oe=b.length-1;oe>=0;oe--)X=_.g=b[oe],q=nr(X,j,!0,_)&&q;if(X=_.g=h,q=nr(X,j,!0,_)&&q,q=nr(X,j,!1,_)&&q,b)for(oe=0;oe<b.length;oe++)X=_.g=b[oe],q=nr(X,j,!1,_)&&q}bt.prototype.N=function(){if(bt.Z.N.call(this),this.i){var h=this.i;for(const _ in h.g){const b=h.g[_];for(let j=0;j<b.length;j++)ie(b[j]);delete h.g[_],h.h--}}this.G=null},bt.prototype.J=function(h,_,b,j){return this.i.add(String(h),_,!1,b,j)},bt.prototype.K=function(h,_,b,j){return this.i.add(String(h),_,!0,b,j)};function nr(h,_,b,j){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();let q=!0;for(let X=0;X<_.length;++X){const oe=_[X];if(oe&&!oe.da&&oe.capture==b){const Re=oe.listener,vt=oe.ha||oe.src;oe.fa&&De(h.i,oe),q=Re.call(vt,j)!==!1&&q}}return q&&!j.defaultPrevented}function Tl(h,_){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=m(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:c.setTimeout(h,_||0)}function Il(h){h.g=Tl(()=>{h.g=null,h.i&&(h.i=!1,Il(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class Tu extends L{constructor(_,b){super(),this.m=_,this.l=b,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Il(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Oi(h){L.call(this),this.h=h,this.g={}}y(Oi,L);var Cl=[];function Wo(h){pe(h.g,function(_,b){this.g.hasOwnProperty(b)&&Li(_)},h),h.g={}}Oi.prototype.N=function(){Oi.Z.N.call(this),Wo(this)},Oi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bi=c.JSON.stringify,Iu=c.JSON.parse,Ws=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function zi(){}function Cu(){}var Fi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ho(){B.call(this,"d")}y(Ho,B);function Al(){B.call(this,"c")}y(Al,B);var rr={},Ko=null;function Ui(){return Ko=Ko||new bt}rr.Ia="serverreachability";function qo(h){B.call(this,rr.Ia,h)}y(qo,B);function ei(h){const _=Ui();yt(_,new qo(_))}rr.STAT_EVENT="statevent";function ti(h,_){B.call(this,rr.STAT_EVENT,h),this.stat=_}y(ti,B);function ft(h){const _=Ui();yt(_,new ti(_,h))}rr.Ja="timingevent";function Rl(h,_){B.call(this,rr.Ja,h),this.size=_}y(Rl,B);function $i(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},_)}function Wi(){this.g=!0}Wi.prototype.ua=function(){this.g=!1};function Au(h,_,b,j,q,X){h.info(function(){if(h.g)if(X){var oe="",Re=X.split("&");for(let Ye=0;Ye<Re.length;Ye++){var vt=Re[Ye].split("=");if(vt.length>1){const St=vt[0];vt=vt[1];const jn=St.split("_");oe=jn.length>=2&&jn[1]=="type"?oe+(St+"="+vt+"&"):oe+(St+"=redacted&")}}}else oe=null;else oe=X;return"XMLHTTP REQ ("+j+") [attempt "+q+"]: "+_+`
`+b+`
`+oe})}function Ru(h,_,b,j,q,X,oe){h.info(function(){return"XMLHTTP RESP ("+j+") [ attempt "+q+"]: "+_+`
`+b+`
`+X+" "+oe})}function br(h,_,b,j){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+Hs(h,b)+(j?" "+j:"")})}function ju(h,_){h.info(function(){return"TIMEOUT: "+_})}Wi.prototype.info=function(){};function Hs(h,_){if(!h.g)return _;if(!_)return null;try{const X=JSON.parse(_);if(X){for(h=0;h<X.length;h++)if(Array.isArray(X[h])){var b=X[h];if(!(b.length<2)){var j=b[1];if(Array.isArray(j)&&!(j.length<1)){var q=j[0];if(q!="noop"&&q!="stop"&&q!="close")for(let oe=1;oe<j.length;oe++)j[oe]=""}}}}return Bi(X)}catch{return _}}var Hi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ki={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Pu;function ni(){}y(ni,zi),ni.prototype.g=function(){return new XMLHttpRequest},Pu=new ni;function Sr(h){return encodeURIComponent(String(h))}function Go(h){var _=1;h=h.split(":");const b=[];for(;_>0&&h.length;)b.push(h.shift()),_--;return h.length&&b.push(h.join(":")),b}function zn(h,_,b,j){this.j=h,this.i=_,this.l=b,this.S=j||1,this.V=new Oi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Mu}function Mu(){this.i=null,this.g="",this.h=!1}var Nu={},jl={};function ir(h,_,b){h.M=1,h.A=ii(Fn(_)),h.u=b,h.R=!0,Pl(h,null)}function Pl(h,_){h.F=Date.now(),Ks(h),h.B=Fn(h.A);var b=h.B,j=h.S;Array.isArray(j)||(j=[String(j)]),Ul(b.i,"t",j),h.C=0,b=h.j.L,h.h=new Mu,h.g=Wu(h.j,b?_:null,!h.u),h.P>0&&(h.O=new Tu(m(h.Y,h,h.g),h.P)),_=h.V,b=h.g,j=h.ba;var q="readystatechange";Array.isArray(q)||(q&&(Cl[0]=q.toString()),q=Cl);for(let X=0;X<q.length;X++){const oe=Xe(b,q[X],j||_.handleEvent,!1,_.h||_);if(!oe)break;_.g[oe.key]=oe}_=h.J?H(h.J):{},h.u?(h.v||(h.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,_)):(h.v="GET",h.g.ea(h.B,h.v,null,_)),ei(),Au(h.i,h.v,h.B,h.l,h.S,h.u)}zn.prototype.ba=function(h){h=h.target;const _=this.O;_&&jr(h)==3?_.j():this.Y(h)},zn.prototype.Y=function(h){try{if(h==this.g)e:{const Re=jr(this.g),vt=this.g.ya(),Ye=this.g.ca();if(!(Re<3)&&(Re!=3||this.g&&(this.h.h||this.g.la()||Uu(this.g)))){this.K||Re!=4||vt==7||(vt==8||Ye<=0?ei(3):ei(2)),Qo(this);var _=this.g.ca();this.X=_;var b=Du(this);if(this.o=_==200,Ru(this.i,this.v,this.B,this.l,this.S,Re,_),this.o){if(this.U&&!this.L){t:{if(this.g){var j,q=this.g;if((j=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(j)){var X=j;break t}}X=null}if(h=X)br(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,tt(this,h);else{this.o=!1,this.m=3,ft(12),ri(this),qs(this);break e}}if(this.R){h=!0;let St;for(;!this.K&&this.C<b.length;)if(St=Lu(this,b),St==jl){Re==4&&(this.m=4,ft(14),h=!1),br(this.i,this.l,null,"[Incomplete Response]");break}else if(St==Nu){this.m=4,ft(15),br(this.i,this.l,b,"[Invalid Chunk]"),h=!1;break}else br(this.i,this.l,St,null),tt(this,St);if(Vu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Re!=4||b.length!=0||this.h.h||(this.m=1,ft(16),h=!1),this.o=this.o&&h,!h)br(this.i,this.l,b,"[Invalid Chunked Response]"),ri(this),qs(this);else if(b.length>0&&!this.W){this.W=!0;var oe=this.j;oe.g==this&&oe.aa&&!oe.P&&(oe.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),no(oe),oe.P=!0,ft(11))}}else br(this.i,this.l,b,null),tt(this,b);Re==4&&ri(this),this.o&&!this.K&&(Re==4?sa(this.j,this):(this.o=!1,Ks(this)))}else Wl(this.g),_==400&&b.indexOf("Unknown SID")>0?(this.m=3,ft(12)):(this.m=0,ft(13)),ri(this),qs(this)}}}catch{}finally{}};function Du(h){if(!Vu(h))return h.g.la();const _=Uu(h.g);if(_==="")return"";let b="";const j=_.length,q=jr(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return ri(h),qs(h),"";h.h.i=new c.TextDecoder}for(let X=0;X<j;X++)h.h.h=!0,b+=h.h.i.decode(_[X],{stream:!(q&&X==j-1)});return _.length=0,h.h.g+=b,h.C=0,h.h.g}function Vu(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Lu(h,_){var b=h.C,j=_.indexOf(`
`,b);return j==-1?jl:(b=Number(_.substring(b,j)),isNaN(b)?Nu:(j+=1,j+b>_.length?jl:(_=_.slice(j,j+b),h.C=j+b,_)))}zn.prototype.cancel=function(){this.K=!0,ri(this)};function Ks(h){h.T=Date.now()+h.H,Ml(h,h.H)}function Ml(h,_){if(h.D!=null)throw Error("WatchDog timer not null");h.D=$i(m(h.aa,h),_)}function Qo(h){h.D&&(c.clearTimeout(h.D),h.D=null)}zn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(ju(this.i,this.B),this.M!=2&&(ei(),ft(17)),ri(this),this.m=2,qs(this)):Ml(this,this.T-h)};function qs(h){h.j.I==0||h.K||sa(h.j,h)}function ri(h){Qo(h);var _=h.O;_&&typeof _.dispose=="function"&&_.dispose(),h.O=null,Wo(h.V),h.g&&(_=h.g,h.g=null,_.abort(),_.dispose())}function tt(h,_){try{var b=h.j;if(b.I!=0&&(b.g==h||Dl(b.h,h))){if(!h.L&&Dl(b.h,h)&&b.I==3){try{var j=b.Ba.g.parse(_)}catch{j=null}if(Array.isArray(j)&&j.length==3){var q=j;if(q[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<h.F)ia(b),An(b);else break e;Nr(b),ft(18)}}else b.xa=q[1],0<b.xa-b.K&&q[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=$i(m(b.Va,b),6e3));Gs(b.h)<=1&&b.ta&&(b.ta=void 0)}else Rn(b,11)}else if((h.L||b.g==h)&&ia(b),!O(_))for(q=b.Ba.g.parse(_),_=0;_<q.length;_++){let Ye=q[_];const St=Ye[0];if(!(St<=b.K))if(b.K=St,Ye=Ye[1],b.I==2)if(Ye[0]=="c"){b.M=Ye[1],b.ba=Ye[2];const jn=Ye[3];jn!=null&&(b.ka=jn,b.j.info("VER="+b.ka));const ci=Ye[4];ci!=null&&(b.za=ci,b.j.info("SVER="+b.za));const Dr=Ye[5];Dr!=null&&typeof Dr=="number"&&Dr>0&&(j=1.5*Dr,b.O=j,b.j.info("backChannelRequestTimeoutMs_="+j)),j=b;const Vr=h.g;if(Vr){const la=Vr.g?Vr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(la){var X=j.h;X.g||la.indexOf("spdy")==-1&&la.indexOf("quic")==-1&&la.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(Xo(X,X.h),X.h=null))}if(j.G){const ql=Vr.g?Vr.g.getResponseHeader("X-HTTP-Session-Id"):null;ql&&(j.wa=ql,Ke(j.J,j.G,ql))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-h.F,b.j.info("Handshake RTT: "+b.T+"ms")),j=b;var oe=h;if(j.na=Kl(j,j.L?j.ba:null,j.W),oe.L){Qs(j.h,oe);var Re=oe,vt=j.O;vt&&(Re.H=vt),Re.D&&(Qo(Re),Ks(Re)),j.g=oe}else Jt(j);b.i.length>0&&li(b)}else Ye[0]!="stop"&&Ye[0]!="close"||Rn(b,7);else b.I==3&&(Ye[0]=="stop"||Ye[0]=="close"?Ye[0]=="stop"?Rn(b,7):na(b):Ye[0]!="noop"&&b.l&&b.l.qa(Ye),b.A=0)}}ei(4)}catch{}}var Sf=class{constructor(h,_){this.g=h,this.map=_}};function Yo(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Nl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Gs(h){return h.h?1:h.g?h.g.size:0}function Dl(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function Xo(h,_){h.g?h.g.add(_):h.h=_}function Qs(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}Yo.prototype.cancel=function(){if(this.i=Tn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Tn(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const b of h.g.values())_=_.concat(b.G);return _}return S(h.i)}var Ou=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function In(h,_){if(h){h=h.split("&");for(let b=0;b<h.length;b++){const j=h[b].indexOf("=");let q,X=null;j>=0?(q=h[b].substring(0,j),X=h[b].substring(j+1)):q=h[b],_(q,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function Er(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;h instanceof Er?(this.l=h.l,Ys(this,h.j),this.o=h.o,this.g=h.g,Tr(this,h.u),this.h=h.h,qi(this,$l(h.i)),this.m=h.m):h&&(_=String(h).match(Ou))?(this.l=!1,Ys(this,_[1]||"",!0),this.o=Xs(_[2]||""),this.g=Xs(_[3]||"",!0),Tr(this,_[4]),this.h=Xs(_[5]||"",!0),qi(this,_[6]||"",!0),this.m=Xs(_[7]||"")):(this.l=!1,this.i=new ze(null,this.l))}Er.prototype.toString=function(){const h=[];var _=this.j;_&&h.push(Js(_,Ll,!0),":");var b=this.g;return(b||_=="file")&&(h.push("//"),(_=this.o)&&h.push(Js(_,Ll,!0),"@"),h.push(Sr(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&h.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&h.push("/"),h.push(Js(b,b.charAt(0)=="/"?Zs:Ol,!0))),(b=this.i.toString())&&h.push("?",b),(b=this.m)&&h.push("#",Js(b,Bl)),h.join("")},Er.prototype.resolve=function(h){const _=Fn(this);let b=!!h.j;b?Ys(_,h.j):b=!!h.o,b?_.o=h.o:b=!!h.g,b?_.g=h.g:b=h.u!=null;var j=h.h;if(b)Tr(_,h.u);else if(b=!!h.h){if(j.charAt(0)!="/")if(this.g&&!this.h)j="/"+j;else{var q=_.h.lastIndexOf("/");q!=-1&&(j=_.h.slice(0,q+1)+j)}if(q=j,q==".."||q==".")j="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){j=q.lastIndexOf("/",0)==0,q=q.split("/");const X=[];for(let oe=0;oe<q.length;){const Re=q[oe++];Re=="."?j&&oe==q.length&&X.push(""):Re==".."?((X.length>1||X.length==1&&X[0]!="")&&X.pop(),j&&oe==q.length&&X.push("")):(X.push(Re),j=!0)}j=X.join("/")}else j=q}return b?_.h=j:b=h.i.toString()!=="",b?qi(_,$l(h.i)):b=!!h.m,b&&(_.m=h.m),_};function Fn(h){return new Er(h)}function Ys(h,_,b){h.j=b?Xs(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function Tr(h,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);h.u=_}else h.u=null}function qi(h,_,b){_ instanceof ze?(h.i=_,Zo(h.i,h.l)):(b||(_=Js(_,Ef)),h.i=new ze(_,h.l))}function Ke(h,_,b){h.i.set(_,b)}function ii(h){return Ke(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Xs(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Js(h,_,b){return typeof h=="string"?(h=encodeURI(h).replace(_,Vl),b&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Vl(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Ll=/[#\/\?@]/g,Ol=/[#\?:]/g,Zs=/[#\?]/g,Ef=/[#\?@]/g,Bl=/#/g;function ze(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function Ir(h){h.g||(h.g=new Map,h.h=0,h.i&&In(h.i,function(_,b){h.add(decodeURIComponent(_.replace(/\+/g," ")),b)}))}n=ze.prototype,n.add=function(h,_){Ir(this),this.i=null,h=Cr(this,h);let b=this.g.get(h);return b||this.g.set(h,b=[]),b.push(_),this.h+=1,this};function zl(h,_){Ir(h),_=Cr(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function Jo(h,_){return Ir(h),_=Cr(h,_),h.g.has(_)}n.forEach=function(h,_){Ir(this),this.g.forEach(function(b,j){b.forEach(function(q){h.call(_,q,j,this)},this)},this)};function Fl(h,_){Ir(h);let b=[];if(typeof _=="string")Jo(h,_)&&(b=b.concat(h.g.get(Cr(h,_))));else for(h=Array.from(h.g.values()),_=0;_<h.length;_++)b=b.concat(h[_]);return b}n.set=function(h,_){return Ir(this),this.i=null,h=Cr(this,h),Jo(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},n.get=function(h,_){return h?(h=Fl(this,h),h.length>0?String(h[0]):_):_};function Ul(h,_,b){zl(h,_),b.length>0&&(h.i=null,h.g.set(Cr(h,_),S(b)),h.h+=b.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(let j=0;j<_.length;j++){var b=_[j];const q=Sr(b);b=Fl(this,b);for(let X=0;X<b.length;X++){let oe=q;b[X]!==""&&(oe+="="+Sr(b[X])),h.push(oe)}}return this.i=h.join("&")};function $l(h){const _=new ze;return _.i=h.i,h.g&&(_.g=new Map(h.g),_.h=h.h),_}function Cr(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function Zo(h,_){_&&!h.j&&(Ir(h),h.i=null,h.g.forEach(function(b,j){const q=j.toLowerCase();j!=q&&(zl(this,j),Ul(this,q,b))},h)),h.j=_}function Ar(h,_){const b=new Wi;if(c.Image){const j=new Image;j.onload=g($t,b,"TestLoadImage: loaded",!0,_,j),j.onerror=g($t,b,"TestLoadImage: error",!1,_,j),j.onabort=g($t,b,"TestLoadImage: abort",!1,_,j),j.ontimeout=g($t,b,"TestLoadImage: timeout",!1,_,j),c.setTimeout(function(){j.ontimeout&&j.ontimeout()},1e4),j.src=h}else _(!1)}function Rr(h,_){const b=new Wi,j=new AbortController,q=setTimeout(()=>{j.abort(),$t(b,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:j.signal}).then(X=>{clearTimeout(q),X.ok?$t(b,"TestPingServer: ok",!0,_):$t(b,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(q),$t(b,"TestPingServer: error",!1,_)})}function $t(h,_,b,j,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),j(b)}catch{}}function eo(){this.g=new Ws}function si(h){this.i=h.Sb||null,this.h=h.ab||!1}y(si,zi),si.prototype.g=function(){return new Cn(this.i,this.h)};function Cn(h,_){bt.call(this),this.H=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}y(Cn,bt),n=Cn.prototype,n.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=_,this.readyState=1,sr(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(_.body=h),(this.H||c).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Gi(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,sr(this)),this.g&&(this.readyState=3,sr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Bu(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Bu(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Gi(this):sr(this),this.readyState==3&&Bu(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,Gi(this))},n.Na=function(h){this.g&&(this.response=h,Gi(this))},n.ga=function(){this.g&&Gi(this)};function Gi(h){h.readyState=4,h.l=null,h.j=null,h.B=null,sr(h)}n.setRequestHeader=function(h,_){this.A.append(h,_)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var b=_.next();!b.done;)b=b.value,h.push(b[0]+": "+b[1]),b=_.next();return h.join(`\r
`)};function sr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Cn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function zu(h){let _="";return pe(h,function(b,j){_+=j,_+=":",_+=b,_+=`\r
`}),_}function ea(h,_,b){e:{for(j in b){var j=!1;break e}j=!0}j||(b=zu(b),typeof h=="string"?b!=null&&Sr(b):Ke(h,_,b))}function Je(h){bt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}y(Je,bt);var Fu=/^https?$/i,Tf=["POST","PUT"];n=Je.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,_,b,j){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Pu.g(),this.g.onreadystatechange=x(m(this.Ca,this));try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(X){Qi(this,X);return}if(h=b||"",b=new Map(this.headers),j)if(Object.getPrototypeOf(j)===Object.prototype)for(var q in j)b.set(q,j[q]);else if(typeof j.keys=="function"&&typeof j.get=="function")for(const X of j.keys())b.set(X,j.get(X));else throw Error("Unknown input type for opt_headers: "+String(j));j=Array.from(b.keys()).find(X=>X.toLowerCase()=="content-type"),q=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(Tf,_,void 0)>=0)||j||q||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,oe]of b)this.g.setRequestHeader(X,oe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(X){Qi(this,X)}};function Qi(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.o=5,Yi(h),ai(h)}function Yi(h){h.A||(h.A=!0,yt(h,"complete"),yt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,yt(this,"complete"),yt(this,"abort"),ai(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ai(this,!0)),Je.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?oi(this):this.Xa())},n.Xa=function(){oi(this)};function oi(h){if(h.h&&typeof a<"u"){if(h.v&&jr(h)==4)setTimeout(h.Ca.bind(h),0);else if(yt(h,"readystatechange"),jr(h)==4){h.h=!1;try{const X=h.ca();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var b;if(!(b=_)){var j;if(j=X===0){let oe=String(h.D).match(Ou)[1]||null;!oe&&c.self&&c.self.location&&(oe=c.self.location.protocol.slice(0,-1)),j=!Fu.test(oe?oe.toLowerCase():"")}b=j}if(b)yt(h,"complete"),yt(h,"success");else{h.o=6;try{var q=jr(h)>2?h.g.statusText:""}catch{q=""}h.l=q+" ["+h.ca()+"]",Yi(h)}}finally{ai(h)}}}}function ai(h,_){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const b=h.g;h.g=null,_||yt(h,"ready");try{b.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function jr(h){return h.g?h.g.readyState:0}n.ca=function(){try{return jr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),Iu(_)}};function Uu(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Wl(h){const _={};h=(h.g&&jr(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let j=0;j<h.length;j++){if(O(h[j]))continue;var b=Go(h[j]);const q=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const X=_[q]||[];_[q]=X,X.push(b)}le(_,function(j){return j.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Pr(h,_,b){return b&&b.internalChannelParams&&b.internalChannelParams[h]||_}function ta(h){this.za=0,this.i=[],this.j=new Wi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Pr("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Pr("baseRetryDelayMs",5e3,h),this.Za=Pr("retryDelaySeedMs",1e4,h),this.Ta=Pr("forwardChannelMaxRetries",2,h),this.va=Pr("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Yo(h&&h.concurrentRequestLimit),this.Ba=new eo,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=ta.prototype,n.ka=8,n.I=1,n.connect=function(h,_,b,j){ft(0),this.W=h,this.H=_||{},b&&j!==void 0&&(this.H.OSID=b,this.H.OAID=j),this.F=this.X,this.J=Kl(this,null,this.W),li(this)};function na(h){if(ra(h),h.I==3){var _=h.V++,b=Fn(h.J);if(Ke(b,"SID",h.M),Ke(b,"RID",_),Ke(b,"TYPE","terminate"),Mr(h,b),_=new zn(h,h.j,_),_.M=2,_.A=ii(Fn(b)),b=!1,c.navigator&&c.navigator.sendBeacon)try{b=c.navigator.sendBeacon(_.A.toString(),"")}catch{}!b&&c.Image&&(new Image().src=_.A,b=!0),b||(_.g=Wu(_.j,null),_.g.ea(_.A)),_.F=Date.now(),Ks(_)}ro(h)}function An(h){h.g&&(no(h),h.g.cancel(),h.g=null)}function ra(h){An(h),h.v&&(c.clearTimeout(h.v),h.v=null),ia(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function li(h){if(!Nl(h.h)&&!h.m){h.m=!0;var _=h.Ea;F||C(),$||(F(),$=!0),A.add(_,h),h.D=0}}function $u(h,_){return Gs(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=_.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=$i(m(h.Ea,h,_),oa(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const q=new zn(this,this.j,h);let X=this.o;if(this.U&&(X?(X=H(X),Ce(X,this.U)):X=this.U),this.u!==null||this.R||(q.J=X,X=null),this.S)e:{for(var _=0,b=0;b<this.i.length;b++){t:{var j=this.i[b];if("__data__"in j.map&&(j=j.map.__data__,typeof j=="string")){j=j.length;break t}j=void 0}if(j===void 0)break;if(_+=j,_>4096){_=b;break e}if(_===4096||b===this.i.length-1){_=b+1;break e}}_=1e3}else _=1e3;_=Hl(this,q,_),b=Fn(this.J),Ke(b,"RID",h),Ke(b,"CVER",22),this.G&&Ke(b,"X-HTTP-Session-Id",this.G),Mr(this,b),X&&(this.R?_="headers="+Sr(zu(X))+"&"+_:this.u&&ea(b,this.u,X)),Xo(this.h,q),this.Ra&&Ke(b,"TYPE","init"),this.S?(Ke(b,"$req",_),Ke(b,"SID","null"),q.U=!0,ir(q,b,null)):ir(q,b,_),this.I=2}}else this.I==3&&(h?to(this,h):this.i.length==0||Nl(this.h)||to(this))};function to(h,_){var b;_?b=_.l:b=h.V++;const j=Fn(h.J);Ke(j,"SID",h.M),Ke(j,"RID",b),Ke(j,"AID",h.K),Mr(h,j),h.u&&h.o&&ea(j,h.u,h.o),b=new zn(h,h.j,b,h.D+1),h.u===null&&(b.J=h.o),_&&(h.i=_.G.concat(h.i)),_=Hl(h,b,1e3),b.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Xo(h.h,b),ir(b,j,_)}function Mr(h,_){h.H&&pe(h.H,function(b,j){Ke(_,j,b)}),h.l&&pe({},function(b,j){Ke(_,j,b)})}function Hl(h,_,b){b=Math.min(h.i.length,b);const j=h.l?m(h.l.Ka,h.l,h):null;e:{var q=h.i;let Re=-1;for(;;){const vt=["count="+b];Re==-1?b>0?(Re=q[0].g,vt.push("ofs="+Re)):Re=0:vt.push("ofs="+Re);let Ye=!0;for(let St=0;St<b;St++){var X=q[St].g;const jn=q[St].map;if(X-=Re,X<0)Re=Math.max(0,q[St].g-100),Ye=!1;else try{X="req"+X+"_"||"";try{var oe=jn instanceof Map?jn:Object.entries(jn);for(const[ci,Dr]of oe){let Vr=Dr;f(Dr)&&(Vr=Bi(Dr)),vt.push(X+ci+"="+encodeURIComponent(Vr))}}catch(ci){throw vt.push(X+"type="+encodeURIComponent("_badmap")),ci}}catch{j&&j(jn)}}if(Ye){oe=vt.join("&");break e}}oe=void 0}return h=h.i.splice(0,b),_.G=h,oe}function Jt(h){if(!h.g&&!h.v){h.Y=1;var _=h.Da;F||C(),$||(F(),$=!0),A.add(_,h),h.A=0}}function Nr(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=$i(m(h.Da,h),oa(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,Xi(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=$i(m(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ft(10),An(this),Xi(this))};function no(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function Xi(h){h.g=new zn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var _=Fn(h.na);Ke(_,"RID","rpc"),Ke(_,"SID",h.M),Ke(_,"AID",h.K),Ke(_,"CI",h.F?"0":"1"),!h.F&&h.ia&&Ke(_,"TO",h.ia),Ke(_,"TYPE","xmlhttp"),Mr(h,_),h.u&&h.o&&ea(_,h.u,h.o),h.O&&(h.g.H=h.O);var b=h.g;h=h.ba,b.M=1,b.A=ii(Fn(_)),b.u=null,b.R=!0,Pl(b,h)}n.Va=function(){this.C!=null&&(this.C=null,An(this),Nr(this),ft(19))};function ia(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function sa(h,_){var b=null;if(h.g==_){ia(h),no(h),h.g=null;var j=2}else if(Dl(h.h,_))b=_.G,Qs(h.h,_),j=1;else return;if(h.I!=0){if(_.o)if(j==1){b=_.u?_.u.length:0,_=Date.now()-_.F;var q=h.D;j=Ui(),yt(j,new Rl(j,b)),li(h)}else Jt(h);else if(q=_.m,q==3||q==0&&_.X>0||!(j==1&&$u(h,_)||j==2&&Nr(h)))switch(b&&b.length>0&&(_=h.h,_.i=_.i.concat(b)),q){case 1:Rn(h,5);break;case 4:Rn(h,10);break;case 3:Rn(h,6);break;default:Rn(h,2)}}}function oa(h,_){let b=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(b*=2),b*_}function Rn(h,_){if(h.j.info("Error code "+_),_==2){var b=m(h.bb,h),j=h.Ua;const q=!j;j=new Er(j||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ys(j,"https"),ii(j),q?Ar(j.toString(),b):Rr(j.toString(),b)}else ft(2);h.I=0,h.l&&h.l.pa(_),ro(h),ra(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),ft(2)):(this.j.info("Failed to ping google.com"),ft(1))};function ro(h){if(h.I=0,h.ja=[],h.l){const _=Tn(h.h);(_.length!=0||h.i.length!=0)&&(k(h.ja,_),k(h.ja,h.i),h.h.i.length=0,S(h.i),h.i.length=0),h.l.oa()}}function Kl(h,_,b){var j=b instanceof Er?Fn(b):new Er(b);if(j.g!="")_&&(j.g=_+"."+j.g),Tr(j,j.u);else{var q=c.location;j=q.protocol,_=_?_+"."+q.hostname:q.hostname,q=+q.port;const X=new Er(null);j&&Ys(X,j),_&&(X.g=_),q&&Tr(X,q),b&&(X.h=b),j=X}return b=h.G,_=h.wa,b&&_&&Ke(j,b,_),Ke(j,"VER",h.ka),Mr(h,j),j}function Wu(h,_,b){if(_&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Aa&&!h.ma?new Je(new si({ab:b})):new Je(h.ma),_.Fa(h.L),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Hu(){}n=Hu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function aa(){}aa.prototype.g=function(h,_){return new Wt(h,_)};function Wt(h,_){bt.call(this),this.g=new ta(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(h?h["X-WebChannel-Client-Profile"]=_.sa:h={"X-WebChannel-Client-Profile":_.sa}),this.g.U=h,(h=_&&_.Qb)&&!O(h)&&(this.g.u=h),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!O(_)&&(this.g.G=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new Ji(this)}y(Wt,bt),Wt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Wt.prototype.close=function(){na(this.g)},Wt.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var b={};b.__data__=h,h=b}else this.v&&(b={},b.__data__=Bi(h),h=b);_.i.push(new Sf(_.Ya++,h)),_.I==3&&li(_)},Wt.prototype.N=function(){this.g.l=null,delete this.j,na(this.g),delete this.g,Wt.Z.N.call(this)};function Ku(h){Ho.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const b in _){h=b;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}y(Ku,Ho);function qu(){Al.call(this),this.status=1}y(qu,Al);function Ji(h){this.g=h}y(Ji,Hu),Ji.prototype.ra=function(){yt(this.g,"a")},Ji.prototype.qa=function(h){yt(this.g,new Ku(h))},Ji.prototype.pa=function(h){yt(this.g,new qu)},Ji.prototype.oa=function(){yt(this.g,"b")},aa.prototype.createWebChannel=aa.prototype.g,Wt.prototype.send=Wt.prototype.o,Wt.prototype.open=Wt.prototype.m,Wt.prototype.close=Wt.prototype.close,Sb=function(){return new aa},bb=function(){return Ui()},kb=rr,qp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Hi.NO_ERROR=0,Hi.TIMEOUT=8,Hi.HTTP_ERROR=6,oh=Hi,Ki.COMPLETE="complete",_b=Ki,Cu.EventType=Fi,Fi.OPEN="a",Fi.CLOSE="b",Fi.ERROR="c",Fi.MESSAGE="d",bt.prototype.listen=bt.prototype.J,Ec=Cu,Je.prototype.listenOnce=Je.prototype.K,Je.prototype.getLastError=Je.prototype.Ha,Je.prototype.getLastErrorCode=Je.prototype.ya,Je.prototype.getStatus=Je.prototype.ca,Je.prototype.getResponseJson=Je.prototype.La,Je.prototype.getResponseText=Je.prototype.la,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Fa,wb=Je}).apply(typeof $d<"u"?$d:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};sn.UNAUTHENTICATED=new sn(null),sn.GOOGLE_CREDENTIALS=new sn("google-credentials-uid"),sn.FIRST_PARTY=new sn("first-party-uid"),sn.MOCK_USER=new sn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hl="12.8.0";function hP(n){hl=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro=new qg("@firebase/firestore");function Ra(){return Ro.logLevel}function he(n,...e){if(Ro.logLevel<=Le.DEBUG){const t=e.map(oy);Ro.debug(`Firestore (${hl}): ${n}`,...t)}}function ji(n,...e){if(Ro.logLevel<=Le.ERROR){const t=e.map(oy);Ro.error(`Firestore (${hl}): ${n}`,...t)}}function Qa(n,...e){if(Ro.logLevel<=Le.WARN){const t=e.map(oy);Ro.warn(`Firestore (${hl}): ${n}`,...t)}}function oy(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,Eb(n,r,t)}function Eb(n,e,t){let r=`FIRESTORE (${hl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw ji(r),new Error(r)}function Qe(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||Eb(e,s,r)}function je(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ue extends Ni{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class fP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(sn.UNAUTHENTICATED)))}shutdown(){}}class mP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class pP{constructor(e){this.t=e,this.currentUser=sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Qe(this.o===void 0,42304);let r=this.i;const s=d=>this.i!==r?(r=this.i,t(d)):Promise.resolve();let a=new Ti;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Ti,e.enqueueRetryable((()=>s(this.currentUser)))};const c=()=>{const d=a;e.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},f=d=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((d=>f(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?f(d):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ti)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Qe(typeof r.accessToken=="string",31837,{l:r}),new Tb(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string",2055,{h:e}),new sn(e)}}class gP{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=sn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class yP{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new gP(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(sn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Px{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vP{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Dn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Qe(this.o===void 0,3512);const r=a=>{a.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.m;return this.m=a.token,he("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const s=a=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>s(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Px(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Qe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Px(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xP(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=xP(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<t&&(r+=e.charAt(s[a]%62))}return r}}function Oe(n,e){return n<e?-1:n>e?1:0}function Gp(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const s=n.charAt(r),a=e.charAt(r);if(s!==a)return lp(s)===lp(a)?Oe(s,a):lp(s)?1:-1}return Oe(n.length,e.length)}const wP=55296,_P=57343;function lp(n){const e=n.charCodeAt(0);return e>=wP&&e<=_P}function Ya(n,e,t){return n.length===e.length&&n.every(((r,s)=>t(r,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx="__name__";class Fr{constructor(e,t,r){t===void 0?t=0:t>e.length&&Se(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Se(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Fr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Fr?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const a=Fr.compareSegments(e.get(s),t.get(s));if(a!==0)return a}return Oe(e.length,t.length)}static compareSegments(e,t){const r=Fr.isNumericId(e),s=Fr.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?Fr.extractNumericId(e).compare(Fr.extractNumericId(t)):Gp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ss.fromString(e.substring(4,e.length-2))}}class et extends Fr{construct(e,t,r){return new et(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ue(J.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((s=>s.length>0)))}return new et(t)}static emptyPath(){return new et([])}}const kP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qt extends Fr{construct(e,t,r){return new Qt(e,t,r)}static isValidIdentifier(e){return kP.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Mx}static keyField(){return new Qt([Mx])}static fromServerFormat(e){const t=[];let r="",s=0;const a=()=>{if(r.length===0)throw new ue(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;s<e.length;){const f=e[s];if(f==="\\"){if(s+1===e.length)throw new ue(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ue(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,s+=2}else f==="`"?(c=!c,s++):f!=="."||c?(r+=f,s++):(a(),s++)}if(a(),c)throw new ue(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qt(t)}static emptyPath(){return new Qt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.path=e}static fromPath(e){return new we(et.fromString(e))}static fromName(e){return new we(et.fromString(e).popFirst(5))}static empty(){return new we(et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return et.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new et(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(n,e,t){if(!t)throw new ue(J.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function bP(n,e,t,r){if(e===!0&&r===!0)throw new ue(J.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Nx(n){if(!we.isDocumentKey(n))throw new ue(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Dx(n){if(we.isDocumentKey(n))throw new ue(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Cb(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function ef(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Se(12329,{type:typeof n})}function Gr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ue(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ef(n);throw new ue(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(n,e){const t={typeString:n};return e&&(t.value=e),t}function hu(n,e){if(!Cb(n))throw new ue(J.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const c=n[r];if(s&&typeof c!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(a!==void 0&&c!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new ue(J.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx=-62135596800,Lx=1e6;class it{static now(){return it.fromMillis(Date.now())}static fromDate(e){return it.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Lx);return new it(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ue(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ue(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Vx)throw new ue(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ue(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Lx}_compareTo(e){return this.seconds===e.seconds?Oe(this.nanoseconds,e.nanoseconds):Oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:it._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(hu(e,it._jsonSchema))return new it(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Vx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}it._jsonSchemaVersion="firestore/timestamp/1.0",it._jsonSchema={type:At("string",it._jsonSchemaVersion),seconds:At("number"),nanoseconds:At("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{static fromTimestamp(e){return new Ie(e)}static min(){return new Ie(new it(0,0))}static max(){return new Ie(new it(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wc=-1;function SP(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Ie.fromTimestamp(r===1e9?new it(t+1,0):new it(t,r));return new Is(s,we.empty(),e)}function EP(n){return new Is(n.readTime,n.key,Wc)}class Is{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Is(Ie.min(),we.empty(),Wc)}static max(){return new Is(Ie.max(),we.empty(),Wc)}}function TP(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=we.comparator(n.documentKey,e.documentKey),t!==0?t:Oe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class CP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fl(n){if(n.code!==J.FAILED_PRECONDITION||n.message!==IP)throw n;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Z(((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Z?t:Z.resolve(t)}catch(t){return Z.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Z.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Z.reject(t)}static resolve(e){return new Z(((t,r)=>{t(e)}))}static reject(e){return new Z(((t,r)=>{r(e)}))}static waitFor(e){return new Z(((t,r)=>{let s=0,a=0,c=!1;e.forEach((f=>{++s,f.next((()=>{++a,c&&a===s&&t()}),(d=>r(d)))})),c=!0,a===s&&t()}))}static or(e){let t=Z.resolve(!1);for(const r of e)t=t.next((s=>s?Z.resolve(s):r()));return t}static forEach(e,t){const r=[];return e.forEach(((s,a)=>{r.push(t.call(this,s,a))})),this.waitFor(r)}static mapArray(e,t){return new Z(((r,s)=>{const a=e.length,c=new Array(a);let f=0;for(let d=0;d<a;d++){const m=d;t(e[m]).next((g=>{c[m]=g,++f,f===a&&r(c)}),(g=>s(g)))}}))}static doWhile(e,t){return new Z(((r,s)=>{const a=()=>{e()===!0?t().next((()=>{a()}),s):r()};a()}))}}function AP(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ml(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}tf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ly=-1;function nf(n){return n==null}function Eh(n){return n===0&&1/n==-1/0}function RP(n){return typeof n=="number"&&Number.isInteger(n)&&!Eh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ab="";function jP(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Ox(e)),e=PP(n.get(t),e);return Ox(e)}function PP(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const a=n.charAt(s);switch(a){case"\0":t+="";break;case Ab:t+="";break;default:t+=a}}return t}function Ox(n){return n+Ab+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bx(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Os(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Rb(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,t){this.comparator=e,this.root=t||Gt.EMPTY}insert(e,t){return new ht(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Gt.BLACK,null,null))}remove(e){return new ht(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wd(this.root,e,this.comparator,!0)}}class Wd{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gt{constructor(e,t,r,s,a){this.key=e,this.value=t,this.color=r??Gt.RED,this.left=s??Gt.EMPTY,this.right=a??Gt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,a){return new Gt(e??this.key,t??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,t,r),null):a===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Gt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Gt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Se(27949);return e+(this.isRed()?0:1)}}Gt.EMPTY=null,Gt.RED=!0,Gt.BLACK=!1;Gt.EMPTY=new class{constructor(){this.size=0}get key(){throw Se(57766)}get value(){throw Se(16141)}get color(){throw Se(16727)}get left(){throw Se(29726)}get right(){throw Se(36894)}copy(e,t,r,s,a){return this}insert(e,t,r){return new Gt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.comparator=e,this.data=new ht(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new zx(this.data.getIterator())}getIteratorFrom(e){return new zx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Dt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Dt(this.comparator);return t.data=e,t}}class zx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.fields=e,e.sort(Qt.comparator)}static empty(){return new Vn([])}unionWith(e){let t=new Dt(Qt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Vn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ya(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new jb("Invalid base64 string: "+a):a}})(e);return new Yt(t)}static fromUint8Array(e){const t=(function(s){let a="";for(let c=0;c<s.length;++c)a+=String.fromCharCode(s[c]);return a})(e);return new Yt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Yt.EMPTY_BYTE_STRING=new Yt("");const MP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cs(n){if(Qe(!!n,39018),typeof n=="string"){let e=0;const t=MP.exec(n);if(Qe(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:wt(n.seconds),nanos:wt(n.nanos)}}function wt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function As(n){return typeof n=="string"?Yt.fromBase64String(n):Yt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb="server_timestamp",Mb="__type__",Nb="__previous_value__",Db="__local_write_time__";function cy(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[Mb])==null?void 0:r.stringValue)===Pb}function rf(n){const e=n.mapValue.fields[Nb];return cy(e)?rf(e):e}function Hc(n){const e=Cs(n.mapValue.fields[Db].timestampValue);return new it(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(e,t,r,s,a,c,f,d,m,g,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=d,this.useFetchStreams=m,this.isUsingEmulator=g,this.apiKey=y}}const Th="(default)";class Kc{constructor(e,t){this.projectId=e,this.database=t||Th}static empty(){return new Kc("","")}get isDefaultDatabase(){return this.database===Th}isEqual(e){return e instanceof Kc&&e.projectId===this.projectId&&e.database===this.database}}function DP(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new ue(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kc(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vb="__type__",VP="__max__",Hd={mapValue:{}},Lb="__vector__",Ih="value";function Rs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?cy(n)?4:OP(n)?9007199254740991:LP(n)?10:11:Se(28295,{value:n})}function Qr(n,e){if(n===e)return!0;const t=Rs(n);if(t!==Rs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Hc(n).isEqual(Hc(e));case 3:return(function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const c=Cs(s.timestampValue),f=Cs(a.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,a){return As(s.bytesValue).isEqual(As(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,a){return wt(s.geoPointValue.latitude)===wt(a.geoPointValue.latitude)&&wt(s.geoPointValue.longitude)===wt(a.geoPointValue.longitude)})(n,e);case 2:return(function(s,a){if("integerValue"in s&&"integerValue"in a)return wt(s.integerValue)===wt(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const c=wt(s.doubleValue),f=wt(a.doubleValue);return c===f?Eh(c)===Eh(f):isNaN(c)&&isNaN(f)}return!1})(n,e);case 9:return Ya(n.arrayValue.values||[],e.arrayValue.values||[],Qr);case 10:case 11:return(function(s,a){const c=s.mapValue.fields||{},f=a.mapValue.fields||{};if(Bx(c)!==Bx(f))return!1;for(const d in c)if(c.hasOwnProperty(d)&&(f[d]===void 0||!Qr(c[d],f[d])))return!1;return!0})(n,e);default:return Se(52216,{left:n})}}function qc(n,e){return(n.values||[]).find((t=>Qr(t,e)))!==void 0}function Xa(n,e){if(n===e)return 0;const t=Rs(n),r=Rs(e);if(t!==r)return Oe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Oe(n.booleanValue,e.booleanValue);case 2:return(function(a,c){const f=wt(a.integerValue||a.doubleValue),d=wt(c.integerValue||c.doubleValue);return f<d?-1:f>d?1:f===d?0:isNaN(f)?isNaN(d)?0:-1:1})(n,e);case 3:return Fx(n.timestampValue,e.timestampValue);case 4:return Fx(Hc(n),Hc(e));case 5:return Gp(n.stringValue,e.stringValue);case 6:return(function(a,c){const f=As(a),d=As(c);return f.compareTo(d)})(n.bytesValue,e.bytesValue);case 7:return(function(a,c){const f=a.split("/"),d=c.split("/");for(let m=0;m<f.length&&m<d.length;m++){const g=Oe(f[m],d[m]);if(g!==0)return g}return Oe(f.length,d.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,c){const f=Oe(wt(a.latitude),wt(c.latitude));return f!==0?f:Oe(wt(a.longitude),wt(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Ux(n.arrayValue,e.arrayValue);case 10:return(function(a,c){var x,S,k,T;const f=a.fields||{},d=c.fields||{},m=(x=f[Ih])==null?void 0:x.arrayValue,g=(S=d[Ih])==null?void 0:S.arrayValue,y=Oe(((k=m==null?void 0:m.values)==null?void 0:k.length)||0,((T=g==null?void 0:g.values)==null?void 0:T.length)||0);return y!==0?y:Ux(m,g)})(n.mapValue,e.mapValue);case 11:return(function(a,c){if(a===Hd.mapValue&&c===Hd.mapValue)return 0;if(a===Hd.mapValue)return 1;if(c===Hd.mapValue)return-1;const f=a.fields||{},d=Object.keys(f),m=c.fields||{},g=Object.keys(m);d.sort(),g.sort();for(let y=0;y<d.length&&y<g.length;++y){const x=Gp(d[y],g[y]);if(x!==0)return x;const S=Xa(f[d[y]],m[g[y]]);if(S!==0)return S}return Oe(d.length,g.length)})(n.mapValue,e.mapValue);default:throw Se(23264,{he:t})}}function Fx(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Oe(n,e);const t=Cs(n),r=Cs(e),s=Oe(t.seconds,r.seconds);return s!==0?s:Oe(t.nanos,r.nanos)}function Ux(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const a=Xa(t[s],r[s]);if(a)return a}return Oe(t.length,r.length)}function Ja(n){return Qp(n)}function Qp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Cs(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return As(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return we.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",s=!0;for(const a of t.values||[])s?s=!1:r+=",",r+=Qp(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let s="{",a=!0;for(const c of r)a?a=!1:s+=",",s+=`${c}:${Qp(t.fields[c])}`;return s+"}"})(n.mapValue):Se(61005,{value:n})}function ah(n){switch(Rs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=rf(n);return e?16+ah(e):16;case 5:return 2*n.stringValue.length;case 6:return As(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,a)=>s+ah(a)),0)})(n.arrayValue);case 10:case 11:return(function(r){let s=0;return Os(r.fields,((a,c)=>{s+=a.length+ah(c)})),s})(n.mapValue);default:throw Se(13486,{value:n})}}function $x(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Yp(n){return!!n&&"integerValue"in n}function uy(n){return!!n&&"arrayValue"in n}function Wx(n){return!!n&&"nullValue"in n}function Hx(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function lh(n){return!!n&&"mapValue"in n}function LP(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[Vb])==null?void 0:r.stringValue)===Lb}function Mc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Os(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Mc(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Mc(n.arrayValue.values[t]);return e}return{...n}}function OP(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===VP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.value=e}static empty(){return new kn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!lh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Mc(t)}setAll(e){let t=Qt.emptyPath(),r={},s=[];e.forEach(((c,f)=>{if(!t.isImmediateParentOf(f)){const d=this.getFieldsMap(t);this.applyChanges(d,r,s),r={},s=[],t=f.popLast()}c?r[f.lastSegment()]=Mc(c):s.push(f.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,r,s)}delete(e){const t=this.field(e.popLast());lh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Qr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];lh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Os(t,((s,a)=>e[s]=a));for(const s of r)delete e[s]}clone(){return new kn(Mc(this.value))}}function Ob(n){const e=[];return Os(n.fields,((t,r)=>{const s=new Qt([t]);if(lh(r)){const a=Ob(r.mapValue).fields;if(a.length===0)e.push(s);else for(const c of a)e.push(s.child(c))}else e.push(s)})),new Vn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e,t,r,s,a,c,f){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=a,this.data=c,this.documentState=f}static newInvalidDocument(e){return new on(e,0,Ie.min(),Ie.min(),Ie.min(),kn.empty(),0)}static newFoundDocument(e,t,r,s){return new on(e,1,t,Ie.min(),r,s,0)}static newNoDocument(e,t){return new on(e,2,t,Ie.min(),Ie.min(),kn.empty(),0)}static newUnknownDocument(e,t){return new on(e,3,t,Ie.min(),Ie.min(),kn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=kn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=kn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof on&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new on(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,t){this.position=e,this.inclusive=t}}function Kx(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const a=e[s],c=n.position[s];if(a.field.isKeyField()?r=we.comparator(we.fromName(c.referenceValue),t.key):r=Xa(c,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function qx(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Qr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e,t="asc"){this.field=e,this.dir=t}}function BP(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{}class Ct extends Bb{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new FP(e,t,r):t==="array-contains"?new WP(e,r):t==="in"?new HP(e,r):t==="not-in"?new KP(e,r):t==="array-contains-any"?new qP(e,r):new Ct(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new UP(e,r):new $P(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Xa(t,this.value)):t!==null&&Rs(this.value)===Rs(t)&&this.matchesComparison(Xa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class xr extends Bb{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new xr(e,t)}matches(e){return zb(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function zb(n){return n.op==="and"}function Fb(n){return zP(n)&&zb(n)}function zP(n){for(const e of n.filters)if(e instanceof xr)return!1;return!0}function Xp(n){if(n instanceof Ct)return n.field.canonicalString()+n.op.toString()+Ja(n.value);if(Fb(n))return n.filters.map((e=>Xp(e))).join(",");{const e=n.filters.map((t=>Xp(t))).join(",");return`${n.op}(${e})`}}function Ub(n,e){return n instanceof Ct?(function(r,s){return s instanceof Ct&&r.op===s.op&&r.field.isEqual(s.field)&&Qr(r.value,s.value)})(n,e):n instanceof xr?(function(r,s){return s instanceof xr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((a,c,f)=>a&&Ub(c,s.filters[f])),!0):!1})(n,e):void Se(19439)}function $b(n){return n instanceof Ct?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ja(t.value)}`})(n):n instanceof xr?(function(t){return t.op.toString()+" {"+t.getFilters().map($b).join(" ,")+"}"})(n):"Filter"}class FP extends Ct{constructor(e,t,r){super(e,t,r),this.key=we.fromName(r.referenceValue)}matches(e){const t=we.comparator(e.key,this.key);return this.matchesComparison(t)}}class UP extends Ct{constructor(e,t){super(e,"in",t),this.keys=Wb("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class $P extends Ct{constructor(e,t){super(e,"not-in",t),this.keys=Wb("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Wb(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((r=>we.fromName(r.referenceValue)))}class WP extends Ct{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return uy(t)&&qc(t.arrayValue,this.value)}}class HP extends Ct{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&qc(this.value.arrayValue,t)}}class KP extends Ct{constructor(e,t){super(e,"not-in",t)}matches(e){if(qc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!qc(this.value.arrayValue,t)}}class qP extends Ct{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!uy(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>qc(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(e,t=null,r=[],s=[],a=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=c,this.endAt=f,this.Te=null}}function Gx(n,e=null,t=[],r=[],s=null,a=null,c=null){return new GP(n,e,t,r,s,a,c)}function dy(n){const e=je(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Xp(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),nf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Ja(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Ja(r))).join(",")),e.Te=t}return e.Te}function hy(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!BP(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Ub(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!qx(n.startAt,e.startAt)&&qx(n.endAt,e.endAt)}function Jp(n){return we.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e,t=null,r=[],s=[],a=null,c="F",f=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=c,this.startAt=f,this.endAt=d,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function QP(n,e,t,r,s,a,c,f){return new pl(n,e,t,r,s,a,c,f)}function fy(n){return new pl(n)}function Qx(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function YP(n){return we.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Hb(n){return n.collectionGroup!==null}function Nc(n){const e=je(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new Dt(Qt.comparator);return c.filters.forEach((d=>{d.getFlattenedFilters().forEach((m=>{m.isInequality()&&(f=f.add(m.field))}))})),f})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Gc(a,r))})),t.has(Qt.keyField().canonicalString())||e.Ie.push(new Gc(Qt.keyField(),r))}return e.Ie}function $r(n){const e=je(n);return e.Ee||(e.Ee=XP(e,Nc(n))),e.Ee}function XP(n,e){if(n.limitType==="F")return Gx(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const a=s.dir==="desc"?"asc":"desc";return new Gc(s.field,a)}));const t=n.endAt?new Ch(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ch(n.startAt.position,n.startAt.inclusive):null;return Gx(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Zp(n,e){const t=n.filters.concat([e]);return new pl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function JP(n,e){const t=n.explicitOrderBy.concat([e]);return new pl(n.path,n.collectionGroup,t,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}function Ah(n,e,t){return new pl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function sf(n,e){return hy($r(n),$r(e))&&n.limitType===e.limitType}function Kb(n){return`${dy($r(n))}|lt:${n.limitType}`}function ja(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((s=>$b(s))).join(", ")}]`),nf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((s=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(s))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((s=>Ja(s))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((s=>Ja(s))).join(",")),`Target(${r})`})($r(n))}; limitType=${n.limitType})`}function of(n,e){return e.isFoundDocument()&&(function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):we.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,e)&&(function(r,s){for(const a of Nc(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0})(n,e)&&(function(r,s){return!(r.startAt&&!(function(c,f,d){const m=Kx(c,f,d);return c.inclusive?m<=0:m<0})(r.startAt,Nc(r),s)||r.endAt&&!(function(c,f,d){const m=Kx(c,f,d);return c.inclusive?m>=0:m>0})(r.endAt,Nc(r),s))})(n,e)}function ZP(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function qb(n){return(e,t)=>{let r=!1;for(const s of Nc(n)){const a=eM(s,e,t);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function eM(n,e,t){const r=n.field.isKeyField()?we.comparator(e.key,t.key):(function(a,c,f){const d=c.data.field(a),m=f.data.field(a);return d!==null&&m!==null?Xa(d,m):Se(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Se(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Os(this.inner,((t,r)=>{for(const[s,a]of r)e(s,a)}))}isEmpty(){return Rb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tM=new ht(we.comparator);function Pi(){return tM}const Gb=new ht(we.comparator);function Tc(...n){let e=Gb;for(const t of n)e=e.insert(t.key,t);return e}function Qb(n){let e=Gb;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function _o(){return Dc()}function Yb(){return Dc()}function Dc(){return new Lo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const nM=new ht(we.comparator),rM=new Dt(we.comparator);function Be(...n){let e=rM;for(const t of n)e=e.add(t);return e}const iM=new Dt(Oe);function sM(){return iM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function my(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Eh(e)?"-0":e}}function Xb(n){return{integerValue:""+n}}function Jb(n,e){return RP(e)?Xb(e):my(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(){this._=void 0}}function oM(n,e,t){return n instanceof Qc?(function(s,a){const c={fields:{[Mb]:{stringValue:Pb},[Db]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&cy(a)&&(a=rf(a)),a&&(c.fields[Nb]=a),{mapValue:c}})(t,e):n instanceof Za?eS(n,e):n instanceof Yc?tS(n,e):(function(s,a){const c=Zb(s,a),f=Yx(c)+Yx(s.Ae);return Yp(c)&&Yp(s.Ae)?Xb(f):my(s.serializer,f)})(n,e)}function aM(n,e,t){return n instanceof Za?eS(n,e):n instanceof Yc?tS(n,e):t}function Zb(n,e){return n instanceof Xc?(function(r){return Yp(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class Qc extends af{}class Za extends af{constructor(e){super(),this.elements=e}}function eS(n,e){const t=nS(e);for(const r of n.elements)t.some((s=>Qr(s,r)))||t.push(r);return{arrayValue:{values:t}}}class Yc extends af{constructor(e){super(),this.elements=e}}function tS(n,e){let t=nS(e);for(const r of n.elements)t=t.filter((s=>!Qr(s,r)));return{arrayValue:{values:t}}}class Xc extends af{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Yx(n){return wt(n.integerValue||n.doubleValue)}function nS(n){return uy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(e,t){this.field=e,this.transform=t}}function lM(n,e){return n.field.isEqual(e.field)&&(function(r,s){return r instanceof Za&&s instanceof Za||r instanceof Yc&&s instanceof Yc?Ya(r.elements,s.elements,Qr):r instanceof Xc&&s instanceof Xc?Qr(r.Ae,s.Ae):r instanceof Qc&&s instanceof Qc})(n.transform,e.transform)}class cM{constructor(e,t){this.version=e,this.transformResults=t}}class gr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new gr}static exists(e){return new gr(void 0,e)}static updateTime(e){return new gr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ch(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class lf{}function rS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new sS(n.key,gr.none()):new fu(n.key,n.data,gr.none());{const t=n.data,r=kn.empty();let s=new Dt(Qt.comparator);for(let a of e.fields)if(!s.has(a)){let c=t.field(a);c===null&&a.length>1&&(a=a.popLast(),c=t.field(a)),c===null?r.delete(a):r.set(a,c),s=s.add(a)}return new Bs(n.key,r,new Vn(s.toArray()),gr.none())}}function uM(n,e,t){n instanceof fu?(function(s,a,c){const f=s.value.clone(),d=Jx(s.fieldTransforms,a,c.transformResults);f.setAll(d),a.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(n,e,t):n instanceof Bs?(function(s,a,c){if(!ch(s.precondition,a))return void a.convertToUnknownDocument(c.version);const f=Jx(s.fieldTransforms,a,c.transformResults),d=a.data;d.setAll(iS(s)),d.setAll(f),a.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):(function(s,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Vc(n,e,t,r){return n instanceof fu?(function(a,c,f,d){if(!ch(a.precondition,c))return f;const m=a.value.clone(),g=Zx(a.fieldTransforms,d,c);return m.setAll(g),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null})(n,e,t,r):n instanceof Bs?(function(a,c,f,d){if(!ch(a.precondition,c))return f;const m=Zx(a.fieldTransforms,d,c),g=c.data;return g.setAll(iS(a)),g.setAll(m),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),f===null?null:f.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((y=>y.field)))})(n,e,t,r):(function(a,c,f){return ch(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f})(n,e,t)}function dM(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),a=Zb(r.transform,s||null);a!=null&&(t===null&&(t=kn.empty()),t.set(r.field,a))}return t||null}function Xx(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ya(r,s,((a,c)=>lM(a,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class fu extends lf{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Bs extends lf{constructor(e,t,r,s,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function iS(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function Jx(n,e,t){const r=new Map;Qe(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let s=0;s<t.length;s++){const a=n[s],c=a.transform,f=e.data.field(a.field);r.set(a.field,aM(c,f,t[s]))}return r}function Zx(n,e,t){const r=new Map;for(const s of n){const a=s.transform,c=t.data.field(s.field);r.set(s.field,oM(a,c,e))}return r}class sS extends lf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hM extends lf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&uM(a,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Vc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Vc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Yb();return this.mutations.forEach((s=>{const a=e.get(s.key),c=a.overlayedDocument;let f=this.applyToLocalView(c,a.mutatedFields);f=t.has(s.key)?null:f;const d=rS(c,f);d!==null&&r.set(s.key,d),c.isValidDocument()||c.convertToNoDocument(Ie.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Be())}isEqual(e){return this.batchId===e.batchId&&Ya(this.mutations,e.mutations,((t,r)=>Xx(t,r)))&&Ya(this.baseMutations,e.baseMutations,((t,r)=>Xx(t,r)))}}class gy{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Qe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return nM})();const a=e.mutations;for(let c=0;c<a.length;c++)s=s.insert(a[c].key,r[c].version);return new gy(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tt,Fe;function gM(n){switch(n){case J.OK:return Se(64938);case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return Se(15467,{code:n})}}function oS(n){if(n===void 0)return ji("GRPC error has no .code"),J.UNKNOWN;switch(n){case Tt.OK:return J.OK;case Tt.CANCELLED:return J.CANCELLED;case Tt.UNKNOWN:return J.UNKNOWN;case Tt.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case Tt.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case Tt.INTERNAL:return J.INTERNAL;case Tt.UNAVAILABLE:return J.UNAVAILABLE;case Tt.UNAUTHENTICATED:return J.UNAUTHENTICATED;case Tt.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case Tt.NOT_FOUND:return J.NOT_FOUND;case Tt.ALREADY_EXISTS:return J.ALREADY_EXISTS;case Tt.PERMISSION_DENIED:return J.PERMISSION_DENIED;case Tt.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case Tt.ABORTED:return J.ABORTED;case Tt.OUT_OF_RANGE:return J.OUT_OF_RANGE;case Tt.UNIMPLEMENTED:return J.UNIMPLEMENTED;case Tt.DATA_LOSS:return J.DATA_LOSS;default:return Se(39323,{code:n})}}(Fe=Tt||(Tt={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vM=new Ss([4294967295,4294967295],0);function ew(n){const e=yM().encode(n),t=new xb;return t.update(e),new Uint8Array(t.digest())}function tw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Ss([t,r],0),new Ss([s,a],0)]}class yy{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ic(`Invalid padding: ${t}`);if(r<0)throw new Ic(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ic(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ic(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ss.fromNumber(this.ge)}ye(e,t,r){let s=e.add(t.multiply(Ss.fromNumber(r)));return s.compare(vM)===1&&(s=new Ss([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=ew(e),[r,s]=tw(t);for(let a=0;a<this.hashCount;a++){const c=this.ye(r,s,a);if(!this.we(c))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new yy(a,s,t);return r.forEach((f=>c.insert(f))),c}insert(e){if(this.ge===0)return;const t=ew(e),[r,s]=tw(t);for(let a=0;a<this.hashCount;a++){const c=this.ye(r,s,a);this.be(c)}}be(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Ic extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e,t,r,s,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,mu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new cf(Ie.min(),s,new ht(Oe),Pi(),Be())}}class mu{constructor(e,t,r,s,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new mu(r,t,Be(),Be(),Be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e,t,r,s){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=s}}class aS{constructor(e,t){this.targetId=e,this.Ce=t}}class lS{constructor(e,t,r=Yt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class nw{constructor(){this.ve=0,this.Fe=rw(),this.Me=Yt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Be(),t=Be(),r=Be();return this.Fe.forEach(((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Se(38017,{changeType:a})}})),new mu(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=rw()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Qe(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class xM{constructor(e){this.Ge=e,this.ze=new Map,this.je=Pi(),this.He=Kd(),this.Je=Kd(),this.Ze=new ht(Oe)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Se(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,r=e.Ce.count,s=this.ot(t);if(s){const a=s.target;if(Jp(a))if(r===0){const c=new we(a.path);this.et(t,c,on.newNoDocument(c,Ie.min()))}else Qe(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const f=this.ut(e),d=f?this.ct(f,e,c):1;if(d!==0){this.it(t);const m=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,m)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=t;let c,f;try{c=As(r).toUint8Array()}catch(d){if(d instanceof jb)return Qa("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{f=new yy(c,s,a)}catch(d){return Qa(d instanceof Ic?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return f.ge===0?null:f}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let s=0;return r.forEach((a=>{const c=this.Ge.ht(),f=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(f)||(this.et(t,a,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((a,c)=>{const f=this.ot(c);if(f){if(a.current&&Jp(f.target)){const d=new we(f.target.path);this.It(d).has(c)||this.Et(c,d)||this.et(c,d,on.newNoDocument(d,e))}a.Be&&(t.set(c,a.ke()),a.Ke())}}));let r=Be();this.Je.forEach(((a,c)=>{let f=!0;c.forEachWhile((d=>{const m=this.ot(d);return!m||m.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(r=r.add(a))})),this.je.forEach(((a,c)=>c.setReadTime(e)));const s=new cf(e,t,this.Ze,this.je,r);return this.je=Pi(),this.He=Kd(),this.Je=Kd(),this.Ze=new ht(Oe),s}Ye(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.qe(t,1):s.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new nw,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Dt(Oe),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Dt(Oe),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||he("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new nw),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Kd(){return new ht(we.comparator)}function rw(){return new ht(we.comparator)}const wM={asc:"ASCENDING",desc:"DESCENDING"},_M={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kM={and:"AND",or:"OR"};class bM{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function eg(n,e){return n.useProto3Json||nf(e)?e:{value:e}}function Rh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function SM(n,e){return Rh(n,e.toTimestamp())}function Wr(n){return Qe(!!n,49232),Ie.fromTimestamp((function(t){const r=Cs(t);return new it(r.seconds,r.nanos)})(n))}function vy(n,e){return tg(n,e).canonicalString()}function tg(n,e){const t=(function(s){return new et(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function uS(n){const e=et.fromString(n);return Qe(pS(e),10190,{key:e.toString()}),e}function ng(n,e){return vy(n.databaseId,e.path)}function cp(n,e){const t=uS(e);if(t.get(1)!==n.databaseId.projectId)throw new ue(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ue(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new we(hS(t))}function dS(n,e){return vy(n.databaseId,e)}function EM(n){const e=uS(n);return e.length===4?et.emptyPath():hS(e)}function rg(n){return new et(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function hS(n){return Qe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function iw(n,e,t){return{name:ng(n,e),fields:t.value.mapValue.fields}}function TM(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Se(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=(function(m,g){return m.useProto3Json?(Qe(g===void 0||typeof g=="string",58123),Yt.fromBase64String(g||"")):(Qe(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),Yt.fromUint8Array(g||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&(function(m){const g=m.code===void 0?J.UNKNOWN:oS(m.code);return new ue(g,m.message||"")})(c);t=new lS(r,s,a,f||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=cp(n,r.document.name),a=Wr(r.document.updateTime),c=r.document.createTime?Wr(r.document.createTime):Ie.min(),f=new kn({mapValue:{fields:r.document.fields}}),d=on.newFoundDocument(s,a,c,f),m=r.targetIds||[],g=r.removedTargetIds||[];t=new uh(m,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=cp(n,r.document),a=r.readTime?Wr(r.readTime):Ie.min(),c=on.newNoDocument(s,a),f=r.removedTargetIds||[];t=new uh([],f,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=cp(n,r.document),a=r.removedTargetIds||[];t=new uh([],a,s,null)}else{if(!("filter"in e))return Se(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,c=new pM(s,a),f=r.targetId;t=new aS(f,c)}}return t}function IM(n,e){let t;if(e instanceof fu)t={update:iw(n,e.key,e.value)};else if(e instanceof sS)t={delete:ng(n,e.key)};else if(e instanceof Bs)t={update:iw(n,e.key,e.data),updateMask:VM(e.fieldMask)};else{if(!(e instanceof hM))return Se(16599,{dt:e.type});t={verify:ng(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(a,c){const f=c.transform;if(f instanceof Qc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Za)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Yc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Xc)return{fieldPath:c.field.canonicalString(),increment:f.Ae};throw Se(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(s,a){return a.updateTime!==void 0?{updateTime:SM(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Se(27497)})(n,e.precondition)),t}function CM(n,e){return n&&n.length>0?(Qe(e!==void 0,14353),n.map((t=>(function(s,a){let c=s.updateTime?Wr(s.updateTime):Wr(a);return c.isEqual(Ie.min())&&(c=Wr(a)),new cM(c,s.transformResults||[])})(t,e)))):[]}function AM(n,e){return{documents:[dS(n,e.path)]}}function RM(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=dS(n,s);const a=(function(m){if(m.length!==0)return mS(xr.create(m,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const c=(function(m){if(m.length!==0)return m.map((g=>(function(x){return{field:Pa(x.field),direction:MM(x.dir)}})(g)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const f=eg(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:t,parent:s}}function jM(n){let e=EM(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Qe(r===1,65062);const g=t.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let a=[];t.where&&(a=(function(y){const x=fS(y);return x instanceof xr&&Fb(x)?x.getFilters():[x]})(t.where));let c=[];t.orderBy&&(c=(function(y){return y.map((x=>(function(k){return new Gc(Ma(k.field),(function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(x)))})(t.orderBy));let f=null;t.limit&&(f=(function(y){let x;return x=typeof y=="object"?y.value:y,nf(x)?null:x})(t.limit));let d=null;t.startAt&&(d=(function(y){const x=!!y.before,S=y.values||[];return new Ch(S,x)})(t.startAt));let m=null;return t.endAt&&(m=(function(y){const x=!y.before,S=y.values||[];return new Ch(S,x)})(t.endAt)),QP(e,s,c,a,f,"F",d,m)}function PM(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function fS(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Ma(t.unaryFilter.field);return Ct.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ma(t.unaryFilter.field);return Ct.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Ma(t.unaryFilter.field);return Ct.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Ma(t.unaryFilter.field);return Ct.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Se(61313);default:return Se(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ct.create(Ma(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Se(58110);default:return Se(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return xr.create(t.compositeFilter.filters.map((r=>fS(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Se(1026)}})(t.compositeFilter.op))})(n):Se(30097,{filter:n})}function MM(n){return wM[n]}function NM(n){return _M[n]}function DM(n){return kM[n]}function Pa(n){return{fieldPath:n.canonicalString()}}function Ma(n){return Qt.fromServerFormat(n.fieldPath)}function mS(n){return n instanceof Ct?(function(t){if(t.op==="=="){if(Hx(t.value))return{unaryFilter:{field:Pa(t.field),op:"IS_NAN"}};if(Wx(t.value))return{unaryFilter:{field:Pa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Hx(t.value))return{unaryFilter:{field:Pa(t.field),op:"IS_NOT_NAN"}};if(Wx(t.value))return{unaryFilter:{field:Pa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Pa(t.field),op:NM(t.op),value:t.value}}})(n):n instanceof xr?(function(t){const r=t.getFilters().map((s=>mS(s)));return r.length===1?r[0]:{compositeFilter:{op:DM(t.op),filters:r}}})(n):Se(54877,{filter:n})}function VM(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function pS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function gS(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e,t,r,s,a=Ie.min(),c=Ie.min(),f=Yt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=d}withSequenceNumber(e){return new xs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new xs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new xs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new xs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(e){this.yt=e}}function OM(n){const e=jM({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Ah(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(){this.Sn=new zM}addToCollectionParentIndex(e,t){return this.Sn.add(t),Z.resolve()}getCollectionParents(e,t){return Z.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return Z.resolve()}deleteFieldIndex(e,t){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,t){return Z.resolve()}getDocumentsMatchingTarget(e,t){return Z.resolve(null)}getIndexType(e,t){return Z.resolve(0)}getFieldIndexes(e,t){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,t){return Z.resolve(Is.min())}getMinOffsetFromCollectionGroup(e,t){return Z.resolve(Is.min())}updateCollectionGroup(e,t,r){return Z.resolve()}updateIndexEntries(e,t){return Z.resolve()}}class zM{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Dt(et.comparator),a=!s.has(r);return this.index[t]=s.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Dt(et.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},yS=41943040;class _n{static withCacheSize(e){return new _n(e,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_n.DEFAULT_COLLECTION_PERCENTILE=10,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_n.DEFAULT=new _n(yS,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_n.DISABLED=new _n(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new el(0)}static ar(){return new el(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow="LruGarbageCollector",FM=1048576;function aw([n,e],[t,r]){const s=Oe(n,t);return s===0?Oe(e,r):s}class UM{constructor(e){this.Pr=e,this.buffer=new Dt(aw),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();aw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class $M{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){he(ow,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ml(t)?he(ow,"Ignoring IndexedDB error during garbage collection: ",t):await fl(t)}await this.Ar(3e5)}))}}class WM{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return Z.resolve(tf.ce);const r=new UM(t);return this.Vr.forEachTarget(e,(s=>r.Er(s.sequenceNumber))).next((()=>this.Vr.mr(e,(s=>r.Er(s))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(sw)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),sw):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,s,a,c,f,d,m;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((y=>(y>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),s=this.params.maximumSequenceNumbersToCollect):s=y,c=Date.now(),this.nthSequenceNumber(e,s)))).next((y=>(r=y,f=Date.now(),this.removeTargets(e,r,t)))).next((y=>(a=y,d=Date.now(),this.removeOrphanedDocuments(e,r)))).next((y=>(m=Date.now(),Ra()<=Le.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-g}ms
	Determined least recently used ${s} in `+(f-c)+`ms
	Removed ${a} targets in `+(d-f)+`ms
	Removed ${y} documents in `+(m-d)+`ms
Total Duration: ${m-g}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:y}))))}}function HM(n,e){return new WM(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(){this.changes=new Lo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,on.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?Z.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(r!==null&&Vc(r.mutation,s,Vn.empty(),it.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Be()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Be()){const s=_o();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,r).next((a=>{let c=Tc();return a.forEach(((f,d)=>{c=c.insert(f,d.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=_o();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Be())))}populateOverlays(e,t,r){const s=[];return r.forEach((a=>{t.has(a)||s.push(a)})),this.documentOverlayCache.getOverlays(e,s).next((a=>{a.forEach(((c,f)=>{t.set(c,f)}))}))}computeViews(e,t,r,s){let a=Pi();const c=Dc(),f=(function(){return Dc()})();return t.forEach(((d,m)=>{const g=r.get(m.key);s.has(m.key)&&(g===void 0||g.mutation instanceof Bs)?a=a.insert(m.key,m):g!==void 0?(c.set(m.key,g.mutation.getFieldMask()),Vc(g.mutation,m,g.mutation.getFieldMask(),it.now())):c.set(m.key,Vn.empty())})),this.recalculateAndSaveOverlays(e,a).next((d=>(d.forEach(((m,g)=>c.set(m,g))),t.forEach(((m,g)=>f.set(m,new qM(g,c.get(m)??null)))),f)))}recalculateAndSaveOverlays(e,t){const r=Dc();let s=new ht(((c,f)=>c-f)),a=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const f of c)f.keys().forEach((d=>{const m=t.get(d);if(m===null)return;let g=r.get(d)||Vn.empty();g=f.applyToLocalView(m,g),r.set(d,g);const y=(s.get(f.batchId)||Be()).add(d);s=s.insert(f.batchId,y)}))})).next((()=>{const c=[],f=s.getReverseIterator();for(;f.hasNext();){const d=f.getNext(),m=d.key,g=d.value,y=Yb();g.forEach((x=>{if(!a.has(x)){const S=rS(t.get(x),r.get(x));S!==null&&y.set(x,S),a=a.add(x)}})),c.push(this.documentOverlayCache.saveOverlays(e,m,y))}return Z.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,s){return YP(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Hb(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next((a=>{const c=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-a.size):Z.resolve(_o());let f=Wc,d=a;return c.next((m=>Z.forEach(m,((g,y)=>(f<y.largestBatchId&&(f=y.largestBatchId),a.get(g)?Z.resolve():this.remoteDocumentCache.getEntry(e,g).next((x=>{d=d.insert(g,x)}))))).next((()=>this.populateOverlays(e,m,a))).next((()=>this.computeViews(e,d,m,Be()))).next((g=>({batchId:f,changes:Qb(g)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new we(t)).next((r=>{let s=Tc();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const a=t.collectionGroup;let c=Tc();return this.indexManager.getCollectionParents(e,a).next((f=>Z.forEach(f,(d=>{const m=(function(y,x){return new pl(x,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(t,d.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,r,s).next((g=>{g.forEach(((y,x)=>{c=c.insert(y,x)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,s)))).next((c=>{a.forEach(((d,m)=>{const g=m.getKey();c.get(g)===null&&(c=c.insert(g,on.newInvalidDocument(g)))}));let f=Tc();return c.forEach(((d,m)=>{const g=a.get(d);g!==void 0&&Vc(g.mutation,m,Vn.empty(),it.now()),of(t,m)&&(f=f.insert(d,m))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return Z.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Wr(s.createTime)}})(t)),Z.resolve()}getNamedQuery(e,t){return Z.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(s){return{name:s.name,query:OM(s.bundledQuery),readTime:Wr(s.readTime)}})(t)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(){this.overlays=new ht(we.comparator),this.Lr=new Map}getOverlay(e,t){return Z.resolve(this.overlays.get(t))}getOverlays(e,t){const r=_o();return Z.forEach(t,(s=>this.getOverlay(e,s).next((a=>{a!==null&&r.set(s,a)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((s,a)=>{this.bt(e,t,a)})),Z.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Lr.get(r);return s!==void 0&&(s.forEach((a=>this.overlays=this.overlays.remove(a))),this.Lr.delete(r)),Z.resolve()}getOverlaysForCollection(e,t,r){const s=_o(),a=t.length+1,c=new we(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const d=f.getNext().value,m=d.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&d.largestBatchId>r&&s.set(d.getKey(),d)}return Z.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let a=new ht(((m,g)=>m-g));const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let g=a.get(m.largestBatchId);g===null&&(g=_o(),a=a.insert(m.largestBatchId,g)),g.set(m.getKey(),m)}}const f=_o(),d=a.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((m,g)=>f.set(m,g))),!(f.size()>=s)););return Z.resolve(f)}bt(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const c=this.Lr.get(s.largestBatchId).delete(r.key);this.Lr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new mM(t,r));let a=this.Lr.get(t);a===void 0&&(a=Be(),this.Lr.set(t,a)),this.Lr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(){this.sessionToken=Yt.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(){this.kr=new Dt(Ft.Kr),this.qr=new Dt(Ft.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const r=new Ft(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new Ft(e,t))}Qr(e,t){e.forEach((r=>this.removeReference(r,t)))}Gr(e){const t=new we(new et([])),r=new Ft(t,e),s=new Ft(t,e+1),a=[];return this.qr.forEachInRange([r,s],(c=>{this.Wr(c),a.push(c.key)})),a}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new we(new et([])),r=new Ft(t,e),s=new Ft(t,e+1);let a=Be();return this.qr.forEachInRange([r,s],(c=>{a=a.add(c.key)})),a}containsKey(e){const t=new Ft(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Ft{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return we.comparator(e.key,t.key)||Oe(e.Hr,t.Hr)}static Ur(e,t){return Oe(e.Hr,t.Hr)||we.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Dt(Ft.Kr)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const a=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new fM(a,t,r,s);this.mutationQueue.push(c);for(const f of s)this.Jr=this.Jr.add(new Ft(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return Z.resolve(c)}lookupMutationBatch(e,t){return Z.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Xr(r),a=s<0?0:s;return Z.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?ly:this.Yn-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ft(t,0),s=new Ft(t,Number.POSITIVE_INFINITY),a=[];return this.Jr.forEachInRange([r,s],(c=>{const f=this.Zr(c.Hr);a.push(f)})),Z.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Dt(Oe);return t.forEach((s=>{const a=new Ft(s,0),c=new Ft(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([a,c],(f=>{r=r.add(f.Hr)}))})),Z.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let a=r;we.isDocumentKey(a)||(a=a.child(""));const c=new Ft(new we(a),0);let f=new Dt(Oe);return this.Jr.forEachWhile((d=>{const m=d.key.path;return!!r.isPrefixOf(m)&&(m.length===s&&(f=f.add(d.Hr)),!0)}),c),Z.resolve(this.Yr(f))}Yr(e){const t=[];return e.forEach((r=>{const s=this.Zr(r);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){Qe(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return Z.forEach(t.mutations,(s=>{const a=new Ft(s.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,t){const r=new Ft(t,0),s=this.Jr.firstAfterOrEqual(r);return Z.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(e){this.ti=e,this.docs=(function(){return new ht(we.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),a=s?s.size:0,c=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Z.resolve(r?r.document.mutableCopy():on.newInvalidDocument(t))}getEntries(e,t){let r=Pi();return t.forEach((s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():on.newInvalidDocument(s))})),Z.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let a=Pi();const c=t.path,f=new we(c.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(f);for(;d.hasNext();){const{key:m,value:{document:g}}=d.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||TP(EP(g),r)<=0||(s.has(g.key)||of(t,g))&&(a=a.insert(g.key,g.mutableCopy()))}return Z.resolve(a)}getAllFromCollectionGroup(e,t,r,s){Se(9500)}ni(e,t){return Z.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new eN(this)}getSize(e){return Z.resolve(this.size)}}class eN extends KM{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?t.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(r)})),Z.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(e){this.persistence=e,this.ri=new Lo((t=>dy(t)),hy),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.ii=0,this.si=new xy,this.targetCount=0,this.oi=el._r()}forEachTarget(e,t){return this.ri.forEach(((r,s)=>t(s))),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),Z.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new el(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,Z.resolve()}updateTargetData(e,t){return this.lr(t),Z.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,t,r){let s=0;const a=[];return this.ri.forEach(((c,f)=>{f.sequenceNumber<=t&&r.get(f.targetId)===null&&(this.ri.delete(c),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),s++)})),Z.waitFor(a).next((()=>s))}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,t){const r=this.ri.get(t)||null;return Z.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),Z.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);const s=this.persistence.referenceDelegate,a=[];return s&&t.forEach((c=>{a.push(s.markPotentiallyOrphaned(e,c))})),Z.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),Z.resolve()}getMatchingKeysForTargetId(e,t){const r=this.si.jr(t);return Z.resolve(r)}containsKey(e,t){return Z.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(e,t){this._i={},this.overlays={},this.ai=new tf(0),this.ui=!1,this.ui=!0,this.ci=new XM,this.referenceDelegate=e(this),this.li=new tN(this),this.indexManager=new BM,this.remoteDocumentCache=(function(s){return new ZM(s)})((r=>this.referenceDelegate.hi(r))),this.serializer=new LM(t),this.Pi=new QM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new YM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new JM(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){he("MemoryPersistence","Starting transaction:",e);const s=new nN(this.ai.next());return this.referenceDelegate.Ti(),r(s).next((a=>this.referenceDelegate.Ii(s).next((()=>a)))).toPromise().then((a=>(s.raiseOnCommittedEvent(),a)))}Ei(e,t){return Z.or(Object.values(this._i).map((r=>()=>r.containsKey(e,t))))}}class nN extends CP{constructor(e){super(),this.currentSequenceNumber=e}}class wy{constructor(e){this.persistence=e,this.Ri=new xy,this.Ai=null}static Vi(e){return new wy(e)}get di(){if(this.Ai)return this.Ai;throw Se(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),Z.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),Z.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),Z.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((s=>this.di.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((a=>this.di.add(a.toString())))})).next((()=>r.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.di,(r=>{const s=we.fromPath(r);return this.mi(e,s).next((a=>{a||t.removeEntry(s,Ie.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return Z.or([()=>Z.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class jh{constructor(e,t){this.persistence=e,this.fi=new Lo((r=>jP(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=HM(this,t)}static Vi(e,t){return new jh(e,t)}Ti(){}Ii(e){return Z.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}mr(e,t){return Z.forEach(this.fi,((r,s)=>this.wr(e,r,s).next((a=>a?Z.resolve():t(s)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ni(e,(c=>this.wr(e,c,t).next((f=>{f||(r++,a.removeEntry(c,Ie.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),Z.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),Z.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),Z.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ah(e.data.value)),t}wr(e,t,r){return Z.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.fi.get(t);return Z.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=s}static Es(e,t){let r=Be(),s=Be();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new _y(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return RA()?8:AP(cn())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,s){const a={result:null};return this.gs(e,t).next((c=>{a.result=c})).next((()=>{if(!a.result)return this.ps(e,t,s,r).next((c=>{a.result=c}))})).next((()=>{if(a.result)return;const c=new rN;return this.ys(e,t,c).next((f=>{if(a.result=f,this.As)return this.ws(e,t,c,f.size)}))})).next((()=>a.result))}ws(e,t,r,s){return r.documentReadCount<this.Vs?(Ra()<=Le.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",ja(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Z.resolve()):(Ra()<=Le.DEBUG&&he("QueryEngine","Query:",ja(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(Ra()<=Le.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",ja(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,$r(t))):Z.resolve())}gs(e,t){if(Qx(t))return Z.resolve(null);let r=$r(t);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=Ah(t,null,"F"),r=$r(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const c=Be(...a);return this.fs.getDocuments(e,c).next((f=>this.indexManager.getMinOffset(e,r).next((d=>{const m=this.bs(t,f);return this.Ss(t,m,c,d.readTime)?this.gs(e,Ah(t,null,"F")):this.Ds(e,m,t,d)}))))})))))}ps(e,t,r,s){return Qx(t)||s.isEqual(Ie.min())?Z.resolve(null):this.fs.getDocuments(e,r).next((a=>{const c=this.bs(t,a);return this.Ss(t,c,r,s)?Z.resolve(null):(Ra()<=Le.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ja(t)),this.Ds(e,c,t,SP(s,Wc)).next((f=>f)))}))}bs(e,t){let r=new Dt(qb(e));return t.forEach(((s,a)=>{of(e,a)&&(r=r.add(a))})),r}Ss(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}ys(e,t,r){return Ra()<=Le.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",ja(t)),this.fs.getDocumentsMatchingQuery(e,t,Is.min(),r)}Ds(e,t,r,s){return this.fs.getDocumentsMatchingQuery(e,r,s).next((a=>(t.forEach((c=>{a=a.insert(c.key,c)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ky="LocalStore",sN=3e8;class oN{constructor(e,t,r,s){this.persistence=e,this.Cs=t,this.serializer=s,this.vs=new ht(Oe),this.Fs=new Lo((a=>dy(a)),hy),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new GM(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function aN(n,e,t,r){return new oN(n,e,t,r)}async function xS(n,e){const t=je(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next((a=>(s=a,t.Os(e),t.mutationQueue.getAllMutationBatches(r)))).next((a=>{const c=[],f=[];let d=Be();for(const m of s){c.push(m.batchId);for(const g of m.mutations)d=d.add(g.key)}for(const m of a){f.push(m.batchId);for(const g of m.mutations)d=d.add(g.key)}return t.localDocuments.getDocuments(r,d).next((m=>({Ns:m,removedBatchIds:c,addedBatchIds:f})))}))}))}function lN(n,e){const t=je(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),a=t.xs.newChangeBuffer({trackRemovals:!0});return(function(f,d,m,g){const y=m.batch,x=y.keys();let S=Z.resolve();return x.forEach((k=>{S=S.next((()=>g.getEntry(d,k))).next((T=>{const E=m.docVersions.get(k);Qe(E!==null,48541),T.version.compareTo(E)<0&&(y.applyToRemoteDocument(T,m),T.isValidDocument()&&(T.setReadTime(m.commitVersion),g.addEntry(T)))}))})),S.next((()=>f.mutationQueue.removeMutationBatch(d,y)))})(t,r,e,a).next((()=>a.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(f){let d=Be();for(let m=0;m<f.mutationResults.length;++m)f.mutationResults[m].transformResults.length>0&&(d=d.add(f.batch.mutations[m].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(r,s)))}))}function wS(n){const e=je(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function cN(n,e){const t=je(n),r=e.snapshotVersion;let s=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const c=t.xs.newChangeBuffer({trackRemovals:!0});s=t.vs;const f=[];e.targetChanges.forEach(((g,y)=>{const x=s.get(y);if(!x)return;f.push(t.li.removeMatchingKeys(a,g.removedDocuments,y).next((()=>t.li.addMatchingKeys(a,g.addedDocuments,y))));let S=x.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(y)!==null?S=S.withResumeToken(Yt.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):g.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(g.resumeToken,r)),s=s.insert(y,S),(function(T,E,N){return T.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=sN?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0})(x,S,g)&&f.push(t.li.updateTargetData(a,S))}));let d=Pi(),m=Be();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(a,g))})),f.push(uN(a,c,e.documentUpdates).next((g=>{d=g.Bs,m=g.Ls}))),!r.isEqual(Ie.min())){const g=t.li.getLastRemoteSnapshotVersion(a).next((y=>t.li.setTargetsMetadata(a,a.currentSequenceNumber,r)));f.push(g)}return Z.waitFor(f).next((()=>c.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,d,m))).next((()=>d))})).then((a=>(t.vs=s,a)))}function uN(n,e,t){let r=Be(),s=Be();return t.forEach((a=>r=r.add(a))),e.getEntries(n,r).next((a=>{let c=Pi();return t.forEach(((f,d)=>{const m=a.get(f);d.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(f)),d.isNoDocument()&&d.version.isEqual(Ie.min())?(e.removeEntry(f,d.readTime),c=c.insert(f,d)):!m.isValidDocument()||d.version.compareTo(m.version)>0||d.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(d),c=c.insert(f,d)):he(ky,"Ignoring outdated watch update for ",f,". Current version:",m.version," Watch version:",d.version)})),{Bs:c,Ls:s}}))}function dN(n,e){const t=je(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=ly),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function hN(n,e){const t=je(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return t.li.getTargetData(r,e).next((a=>a?(s=a,Z.resolve(s)):t.li.allocateTargetId(r).next((c=>(s=new xs(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=t.vs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r}))}async function ig(n,e,t){const r=je(n),s=r.vs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,(c=>r.persistence.referenceDelegate.removeTarget(c,s)))}catch(c){if(!ml(c))throw c;he(ky,`Failed to update sequence numbers for target ${e}: ${c}`)}r.vs=r.vs.remove(e),r.Fs.delete(s.target)}function lw(n,e,t){const r=je(n);let s=Ie.min(),a=Be();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(d,m,g){const y=je(d),x=y.Fs.get(g);return x!==void 0?Z.resolve(y.vs.get(x)):y.li.getTargetData(m,g)})(r,c,$r(e)).next((f=>{if(f)return s=f.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(c,f.targetId).next((d=>{a=d}))})).next((()=>r.Cs.getDocumentsMatchingQuery(c,e,t?s:Ie.min(),t?a:Be()))).next((f=>(fN(r,ZP(e),f),{documents:f,ks:a})))))}function fN(n,e,t){let r=n.Ms.get(e)||Ie.min();t.forEach(((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),n.Ms.set(e,r)}class cw{constructor(){this.activeTargetIds=sM()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class mN{constructor(){this.vo=new cw,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new cw,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uw="ConnectivityMonitor";class dw{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){he(uw,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){he(uw,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qd=null;function sg(){return qd===null?qd=(function(){return 268435456+Math.round(2147483648*Math.random())})():qd++,"0x"+qd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const up="RestConnection",gN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class yN{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.$o=this.databaseId.database===Th?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,t,r,s,a){const c=sg(),f=this.Qo(e,t.toUriEncodedString());he(up,`Sending RPC '${e}' ${c}:`,f,r);const d={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(d,s,a);const{host:m}=new URL(f),g=cl(m);return this.zo(e,f,d,r,g).then((y=>(he(up,`Received RPC '${e}' ${c}: `,y),y)),(y=>{throw Qa(up,`RPC '${e}' ${c} failed with error: `,y,"url: ",f,"request:",r),y}))}jo(e,t,r,s,a,c){return this.Wo(e,t,r,s,a)}Go(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+hl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,a)=>e[a]=s)),r&&r.headers.forEach(((s,a)=>e[a]=s))}Qo(e,t){const r=gN[e];let s=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rn="WebChannelConnection",wc=(n,e,t)=>{n.listen(e,(r=>{try{t(r)}catch(s){setTimeout((()=>{throw s}),0)}}))};class Ua extends yN{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Ua.c_){const e=bb();wc(e,kb.STAT_EVENT,(t=>{t.stat===qp.PROXY?he(rn,"STAT_EVENT: detected buffering proxy"):t.stat===qp.NOPROXY&&he(rn,"STAT_EVENT: detected no buffering proxy")})),Ua.c_=!0}}zo(e,t,r,s,a){const c=sg();return new Promise(((f,d)=>{const m=new wb;m.setWithCredentials(!0),m.listenOnce(_b.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case oh.NO_ERROR:const y=m.getResponseJson();he(rn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(y)),f(y);break;case oh.TIMEOUT:he(rn,`RPC '${e}' ${c} timed out`),d(new ue(J.DEADLINE_EXCEEDED,"Request time out"));break;case oh.HTTP_ERROR:const x=m.getStatus();if(he(rn,`RPC '${e}' ${c} failed with status:`,x,"response text:",m.getResponseText()),x>0){let S=m.getResponseJson();Array.isArray(S)&&(S=S[0]);const k=S==null?void 0:S.error;if(k&&k.status&&k.message){const T=(function(N){const D=N.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(D)>=0?D:J.UNKNOWN})(k.status);d(new ue(T,k.message))}else d(new ue(J.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new ue(J.UNAVAILABLE,"Connection failed."));break;default:Se(9055,{l_:e,streamId:c,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{he(rn,`RPC '${e}' ${c} completed.`)}}));const g=JSON.stringify(s);he(rn,`RPC '${e}' ${c} sending request:`,s),m.send(t,"POST",g,r,15)}))}T_(e,t,r){const s=sg(),a=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(f.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Go(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const m=a.join("");he(rn,`Creating RPC '${e}' stream ${s}: ${m}`,f);const g=c.createWebChannel(m,f);this.I_(g);let y=!1,x=!1;const S=new vN({Ho:k=>{x?he(rn,`Not sending because RPC '${e}' stream ${s} is closed:`,k):(y||(he(rn,`Opening RPC '${e}' stream ${s} transport.`),g.open(),y=!0),he(rn,`RPC '${e}' stream ${s} sending:`,k),g.send(k))},Jo:()=>g.close()});return wc(g,Ec.EventType.OPEN,(()=>{x||(he(rn,`RPC '${e}' stream ${s} transport opened.`),S.i_())})),wc(g,Ec.EventType.CLOSE,(()=>{x||(x=!0,he(rn,`RPC '${e}' stream ${s} transport closed`),S.o_(),this.E_(g))})),wc(g,Ec.EventType.ERROR,(k=>{x||(x=!0,Qa(rn,`RPC '${e}' stream ${s} transport errored. Name:`,k.name,"Message:",k.message),S.o_(new ue(J.UNAVAILABLE,"The operation could not be completed")))})),wc(g,Ec.EventType.MESSAGE,(k=>{var T;if(!x){const E=k.data[0];Qe(!!E,16349);const N=E,D=(N==null?void 0:N.error)||((T=N[0])==null?void 0:T.error);if(D){he(rn,`RPC '${e}' stream ${s} received error:`,D);const P=D.status;let G=(function(A){const C=Tt[A];if(C!==void 0)return oS(C)})(P),F=D.message;G===void 0&&(G=J.INTERNAL,F="Unknown error status: "+P+" with message "+D.message),x=!0,S.o_(new ue(G,F)),g.close()}else he(rn,`RPC '${e}' stream ${s} received:`,E),S.__(E)}})),Ua.u_(),setTimeout((()=>{S.s_()}),0),S}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Sb()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xN(n){return new Ua(n)}function dp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uf(n){return new bM(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ua.c_=!1;class _S{constructor(e,t,r=1e3,s=1.5,a=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=s,this.V_=a,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-r);s>0&&he("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw="PersistentStream";class kS{constructor(e,t,r,s,a,c,f,d){this.Ci=e,this.b_=r,this.S_=s,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new _S(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===J.RESOURCE_EXHAUSTED?(ji(t.toString()),ji("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===t&&this.G_(r,s)}),(r=>{e((()=>{const s=new ue(J.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,t){const r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.H_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return he(hw,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(he(hw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class wN extends kS{constructor(e,t,r,s,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,c),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=TM(this.serializer,e),r=(function(a){if(!("targetChange"in a))return Ie.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?Ie.min():c.readTime?Wr(c.readTime):Ie.min()})(e);return this.listener.J_(t,r)}Z_(e){const t={};t.database=rg(this.serializer),t.addTarget=(function(a,c){let f;const d=c.target;if(f=Jp(d)?{documents:AM(a,d)}:{query:RM(a,d).ft},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=cS(a,c.resumeToken);const m=eg(a,c.expectedCount);m!==null&&(f.expectedCount=m)}else if(c.snapshotVersion.compareTo(Ie.min())>0){f.readTime=Rh(a,c.snapshotVersion.toTimestamp());const m=eg(a,c.expectedCount);m!==null&&(f.expectedCount=m)}return f})(this.serializer,e);const r=PM(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){const t={};t.database=rg(this.serializer),t.removeTarget=e,this.K_(t)}}class _N extends kS{constructor(e,t,r,s,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,c),this.serializer=a}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=CM(e.writeResults,e.commitTime),r=Wr(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=rg(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>IM(this.serializer,r)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{}class bN extends kN{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ue(J.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,c])=>this.connection.Wo(e,tg(t,r),s,a,c))).catch((a=>{throw a.name==="FirebaseError"?(a.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ue(J.UNKNOWN,a.toString())}))}jo(e,t,r,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.jo(e,tg(t,r),s,c,f,a))).catch((c=>{throw c.name==="FirebaseError"?(c.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ue(J.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function SN(n,e,t,r){return new bN(n,e,t,r)}class EN{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ji(t),this.aa=!1):he("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo="RemoteStore";class TN{constructor(e,t,r,s,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=a,this.Aa.Mo((c=>{r.enqueueAndForget((async()=>{Oo(this)&&(he(jo,"Restarting streams for network reachability change."),await(async function(d){const m=je(d);m.Ea.add(4),await pu(m),m.Va.set("Unknown"),m.Ea.delete(4),await df(m)})(this))}))})),this.Va=new EN(r,s)}}async function df(n){if(Oo(n))for(const e of n.Ra)await e(!0)}async function pu(n){for(const e of n.Ra)await e(!1)}function bS(n,e){const t=je(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Ty(t)?Ey(t):gl(t).O_()&&Sy(t,e))}function by(n,e){const t=je(n),r=gl(t);t.Ia.delete(e),r.O_()&&SS(t,e),t.Ia.size===0&&(r.O_()?r.L_():Oo(t)&&t.Va.set("Unknown"))}function Sy(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}gl(n).Z_(e)}function SS(n,e){n.da.$e(e),gl(n).X_(e)}function Ey(n){n.da=new xM({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),gl(n).start(),n.Va.ua()}function Ty(n){return Oo(n)&&!gl(n).x_()&&n.Ia.size>0}function Oo(n){return je(n).Ea.size===0}function ES(n){n.da=void 0}async function IN(n){n.Va.set("Online")}async function CN(n){n.Ia.forEach(((e,t)=>{Sy(n,e)}))}async function AN(n,e){ES(n),Ty(n)?(n.Va.ha(e),Ey(n)):n.Va.set("Unknown")}async function RN(n,e,t){if(n.Va.set("Online"),e instanceof lS&&e.state===2&&e.cause)try{await(async function(s,a){const c=a.cause;for(const f of a.targetIds)s.Ia.has(f)&&(await s.remoteSyncer.rejectListen(f,c),s.Ia.delete(f),s.da.removeTarget(f))})(n,e)}catch(r){he(jo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ph(n,r)}else if(e instanceof uh?n.da.Xe(e):e instanceof aS?n.da.st(e):n.da.tt(e),!t.isEqual(Ie.min()))try{const r=await wS(n.localStore);t.compareTo(r)>=0&&await(function(a,c){const f=a.da.Tt(c);return f.targetChanges.forEach(((d,m)=>{if(d.resumeToken.approximateByteSize()>0){const g=a.Ia.get(m);g&&a.Ia.set(m,g.withResumeToken(d.resumeToken,c))}})),f.targetMismatches.forEach(((d,m)=>{const g=a.Ia.get(d);if(!g)return;a.Ia.set(d,g.withResumeToken(Yt.EMPTY_BYTE_STRING,g.snapshotVersion)),SS(a,d);const y=new xs(g.target,d,m,g.sequenceNumber);Sy(a,y)})),a.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(r){he(jo,"Failed to raise snapshot:",r),await Ph(n,r)}}async function Ph(n,e,t){if(!ml(e))throw e;n.Ea.add(1),await pu(n),n.Va.set("Offline"),t||(t=()=>wS(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{he(jo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await df(n)}))}function TS(n,e){return e().catch((t=>Ph(n,t,e)))}async function hf(n){const e=je(n),t=js(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ly;for(;jN(e);)try{const s=await dN(e.localStore,r);if(s===null){e.Ta.length===0&&t.L_();break}r=s.batchId,PN(e,s)}catch(s){await Ph(e,s)}IS(e)&&CS(e)}function jN(n){return Oo(n)&&n.Ta.length<10}function PN(n,e){n.Ta.push(e);const t=js(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function IS(n){return Oo(n)&&!js(n).x_()&&n.Ta.length>0}function CS(n){js(n).start()}async function MN(n){js(n).ra()}async function NN(n){const e=js(n);for(const t of n.Ta)e.ea(t.mutations)}async function DN(n,e,t){const r=n.Ta.shift(),s=gy.from(r,e,t);await TS(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await hf(n)}async function VN(n,e){e&&js(n).Y_&&await(async function(r,s){if((function(c){return gM(c)&&c!==J.ABORTED})(s.code)){const a=r.Ta.shift();js(r).B_(),await TS(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s))),await hf(r)}})(n,e),IS(n)&&CS(n)}async function fw(n,e){const t=je(n);t.asyncQueue.verifyOperationInProgress(),he(jo,"RemoteStore received new credentials");const r=Oo(t);t.Ea.add(3),await pu(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await df(t)}async function LN(n,e){const t=je(n);e?(t.Ea.delete(2),await df(t)):e||(t.Ea.add(2),await pu(t),t.Va.set("Unknown"))}function gl(n){return n.ma||(n.ma=(function(t,r,s){const a=je(t);return a.sa(),new wN(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(n.datastore,n.asyncQueue,{Zo:IN.bind(null,n),Yo:CN.bind(null,n),t_:AN.bind(null,n),J_:RN.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),Ty(n)?Ey(n):n.Va.set("Unknown")):(await n.ma.stop(),ES(n))}))),n.ma}function js(n){return n.fa||(n.fa=(function(t,r,s){const a=je(t);return a.sa(),new _N(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:MN.bind(null,n),t_:VN.bind(null,n),ta:NN.bind(null,n),na:DN.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await hf(n)):(await n.fa.stop(),n.Ta.length>0&&(he(jo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(e,t,r,s,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new Ti,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,a){const c=Date.now()+r,f=new Iy(e,t,c,s,a);return f.start(r),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ue(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cy(n,e){if(ji("AsyncQueue",`${e}: ${n}`),ml(n))return new ue(J.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{static emptySet(e){return new $a(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||we.comparator(t.key,r.key):(t,r)=>we.comparator(t.key,r.key),this.keyedMap=Tc(),this.sortedSet=new ht(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof $a)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new $a;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(){this.ga=new ht(we.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Se(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class tl{constructor(e,t,r,s,a,c,f,d,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=d,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,s,a){const c=[];return t.forEach((f=>{c.push({type:0,doc:f})})),new tl(e,t,$a.emptySet(t),c,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class BN{constructor(){this.queries=pw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const s=je(t),a=s.queries;s.queries=pw(),a.forEach(((c,f)=>{for(const d of f.ba)d.onError(r)}))})(this,new ue(J.ABORTED,"Firestore shutting down"))}}function pw(){return new Lo((n=>Kb(n)),sf)}async function AS(n,e){const t=je(n);let r=3;const s=e.query;let a=t.queries.get(s);a?!a.Sa()&&e.Da()&&(r=2):(a=new ON,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await t.onListen(s,!0);break;case 1:a.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(c){const f=Cy(c,`Initialization of query '${ja(e.query)}' failed`);return void e.onError(f)}t.queries.set(s,a),a.ba.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&Ay(t)}async function RS(n,e){const t=je(n),r=e.query;let s=3;const a=t.queries.get(r);if(a){const c=a.ba.indexOf(e);c>=0&&(a.ba.splice(c,1),a.ba.length===0?s=e.Da()?0:1:!a.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function zN(n,e){const t=je(n);let r=!1;for(const s of e){const a=s.query,c=t.queries.get(a);if(c){for(const f of c.ba)f.Fa(s)&&(r=!0);c.wa=s}}r&&Ay(t)}function FN(n,e,t){const r=je(n),s=r.queries.get(e);if(s)for(const a of s.ba)a.onError(t);r.queries.delete(e)}function Ay(n){n.Ca.forEach((e=>{e.next()}))}var og,gw;(gw=og||(og={})).Ma="default",gw.Cache="cache";class jS{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new tl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=tl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==og.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e){this.key=e}}class MS{constructor(e){this.key=e}}class UN{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Be(),this.mutatedKeys=Be(),this.eu=qb(e),this.tu=new $a(this.eu)}get nu(){return this.Za}ru(e,t){const r=t?t.iu:new mw,s=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,c=s,f=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((g,y)=>{const x=s.get(g),S=of(this.query,y)?y:null,k=!!x&&this.mutatedKeys.has(x.key),T=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let E=!1;x&&S?x.data.isEqual(S.data)?k!==T&&(r.track({type:3,doc:S}),E=!0):this.su(x,S)||(r.track({type:2,doc:S}),E=!0,(d&&this.eu(S,d)>0||m&&this.eu(S,m)<0)&&(f=!0)):!x&&S?(r.track({type:0,doc:S}),E=!0):x&&!S&&(r.track({type:1,doc:x}),E=!0,(d||m)&&(f=!0)),E&&(S?(c=c.add(S),a=T?a.add(g):a.delete(g)):(c=c.delete(g),a=a.delete(g)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const g=this.query.limitType==="F"?c.last():c.first();c=c.delete(g.key),a=a.delete(g.key),r.track({type:1,doc:g})}return{tu:c,iu:r,Ss:f,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((g,y)=>(function(S,k){const T=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se(20277,{Vt:E})}};return T(S)-T(k)})(g.type,y.type)||this.eu(g.doc,y.doc))),this.ou(r),s=s??!1;const f=t&&!s?this._u():[],d=this.Ya.size===0&&this.current&&!s?1:0,m=d!==this.Xa;return this.Xa=d,c.length!==0||m?{snapshot:new tl(this.query,e.tu,a,c,e.mutatedKeys,d===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new mw,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Be(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const t=[];return e.forEach((r=>{this.Ya.has(r)||t.push(new MS(r))})),this.Ya.forEach((r=>{e.has(r)||t.push(new PS(r))})),t}cu(e){this.Za=e.ks,this.Ya=Be();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return tl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Ry="SyncEngine";class $N{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class WN{constructor(e){this.key=e,this.hu=!1}}class HN{constructor(e,t,r,s,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Lo((f=>Kb(f)),sf),this.Iu=new Map,this.Eu=new Set,this.Ru=new ht(we.comparator),this.Au=new Map,this.Vu=new xy,this.du={},this.mu=new Map,this.fu=el.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function KN(n,e,t=!0){const r=BS(n);let s;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.lu()):s=await NS(r,e,t,!0),s}async function qN(n,e){const t=BS(n);await NS(t,e,!0,!1)}async function NS(n,e,t,r){const s=await hN(n.localStore,$r(e)),a=s.targetId,c=n.sharedClientState.addLocalQueryTarget(a,t);let f;return r&&(f=await GN(n,e,a,c==="current",s.resumeToken)),n.isPrimaryClient&&t&&bS(n.remoteStore,s),f}async function GN(n,e,t,r,s){n.pu=(y,x,S)=>(async function(T,E,N,D){let P=E.view.ru(N);P.Ss&&(P=await lw(T.localStore,E.query,!1).then((({documents:A})=>E.view.ru(A,P))));const G=D&&D.targetChanges.get(E.targetId),F=D&&D.targetMismatches.get(E.targetId)!=null,$=E.view.applyChanges(P,T.isPrimaryClient,G,F);return vw(T,E.targetId,$.au),$.snapshot})(n,y,x,S);const a=await lw(n.localStore,e,!0),c=new UN(e,a.ks),f=c.ru(a.documents),d=mu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),m=c.applyChanges(f,n.isPrimaryClient,d);vw(n,t,m.au);const g=new $N(e,t,c);return n.Tu.set(e,g),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),m.snapshot}async function QN(n,e,t){const r=je(n),s=r.Tu.get(e),a=r.Iu.get(s.targetId);if(a.length>1)return r.Iu.set(s.targetId,a.filter((c=>!sf(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await ig(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),t&&by(r.remoteStore,s.targetId),ag(r,s.targetId)})).catch(fl)):(ag(r,s.targetId),await ig(r.localStore,s.targetId,!0))}async function YN(n,e){const t=je(n),r=t.Tu.get(e),s=t.Iu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),by(t.remoteStore,r.targetId))}async function XN(n,e,t){const r=iD(n);try{const s=await(function(c,f){const d=je(c),m=it.now(),g=f.reduce(((S,k)=>S.add(k.key)),Be());let y,x;return d.persistence.runTransaction("Locally write mutations","readwrite",(S=>{let k=Pi(),T=Be();return d.xs.getEntries(S,g).next((E=>{k=E,k.forEach(((N,D)=>{D.isValidDocument()||(T=T.add(N))}))})).next((()=>d.localDocuments.getOverlayedDocuments(S,k))).next((E=>{y=E;const N=[];for(const D of f){const P=dM(D,y.get(D.key).overlayedDocument);P!=null&&N.push(new Bs(D.key,P,Ob(P.value.mapValue),gr.exists(!0)))}return d.mutationQueue.addMutationBatch(S,m,N,f)})).next((E=>{x=E;const N=E.applyToLocalDocumentSet(y,T);return d.documentOverlayCache.saveOverlays(S,E.batchId,N)}))})).then((()=>({batchId:x.batchId,changes:Qb(y)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(c,f,d){let m=c.du[c.currentUser.toKey()];m||(m=new ht(Oe)),m=m.insert(f,d),c.du[c.currentUser.toKey()]=m})(r,s.batchId,t),await gu(r,s.changes),await hf(r.remoteStore)}catch(s){const a=Cy(s,"Failed to persist write");t.reject(a)}}async function DS(n,e){const t=je(n);try{const r=await cN(t.localStore,e);e.targetChanges.forEach(((s,a)=>{const c=t.Au.get(a);c&&(Qe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c.hu=!0:s.modifiedDocuments.size>0?Qe(c.hu,14607):s.removedDocuments.size>0&&(Qe(c.hu,42227),c.hu=!1))})),await gu(t,r,e)}catch(r){await fl(r)}}function yw(n,e,t){const r=je(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Tu.forEach(((a,c)=>{const f=c.view.va(e);f.snapshot&&s.push(f.snapshot)})),(function(c,f){const d=je(c);d.onlineState=f;let m=!1;d.queries.forEach(((g,y)=>{for(const x of y.ba)x.va(f)&&(m=!0)})),m&&Ay(d)})(r.eventManager,e),s.length&&r.Pu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function JN(n,e,t){const r=je(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Au.get(e),a=s&&s.key;if(a){let c=new ht(we.comparator);c=c.insert(a,on.newNoDocument(a,Ie.min()));const f=Be().add(a),d=new cf(Ie.min(),new Map,new ht(Oe),c,f);await DS(r,d),r.Ru=r.Ru.remove(a),r.Au.delete(e),jy(r)}else await ig(r.localStore,e,!1).then((()=>ag(r,e,t))).catch(fl)}async function ZN(n,e){const t=je(n),r=e.batch.batchId;try{const s=await lN(t.localStore,e);LS(t,r,null),VS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await gu(t,s)}catch(s){await fl(s)}}async function eD(n,e,t){const r=je(n);try{const s=await(function(c,f){const d=je(c);return d.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let g;return d.mutationQueue.lookupMutationBatch(m,f).next((y=>(Qe(y!==null,37113),g=y.keys(),d.mutationQueue.removeMutationBatch(m,y)))).next((()=>d.mutationQueue.performConsistencyCheck(m))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(m,g,f))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,g))).next((()=>d.localDocuments.getDocuments(m,g)))}))})(r.localStore,e);LS(r,e,t),VS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await gu(r,s)}catch(s){await fl(s)}}function VS(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function LS(n,e,t){const r=je(n);let s=r.du[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(t?a.reject(t):a.resolve(),s=s.remove(e)),r.du[r.currentUser.toKey()]=s}}function ag(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((r=>{n.Vu.containsKey(r)||OS(n,r)}))}function OS(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(by(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),jy(n))}function vw(n,e,t){for(const r of t)r instanceof PS?(n.Vu.addReference(r.key,e),tD(n,r)):r instanceof MS?(he(Ry,"Document no longer in limbo: "+r.key),n.Vu.removeReference(r.key,e),n.Vu.containsKey(r.key)||OS(n,r.key)):Se(19791,{wu:r})}function tD(n,e){const t=e.key,r=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(r)||(he(Ry,"New document in limbo: "+t),n.Eu.add(r),jy(n))}function jy(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new we(et.fromString(e)),r=n.fu.next();n.Au.set(r,new WN(t)),n.Ru=n.Ru.insert(t,r),bS(n.remoteStore,new xs($r(fy(t.path)),r,"TargetPurposeLimboResolution",tf.ce))}}async function gu(n,e,t){const r=je(n),s=[],a=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((f,d)=>{c.push(r.pu(d,e,t).then((m=>{var g;if((m||t)&&r.isPrimaryClient){const y=m?!m.fromCache:(g=t==null?void 0:t.targetChanges.get(d.targetId))==null?void 0:g.current;r.sharedClientState.updateQueryState(d.targetId,y?"current":"not-current")}if(m){s.push(m);const y=_y.Es(d.targetId,m);a.push(y)}})))})),await Promise.all(c),r.Pu.J_(s),await(async function(d,m){const g=je(d);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(y=>Z.forEach(m,(x=>Z.forEach(x.Ts,(S=>g.persistence.referenceDelegate.addReference(y,x.targetId,S))).next((()=>Z.forEach(x.Is,(S=>g.persistence.referenceDelegate.removeReference(y,x.targetId,S)))))))))}catch(y){if(!ml(y))throw y;he(ky,"Failed to update sequence numbers: "+y)}for(const y of m){const x=y.targetId;if(!y.fromCache){const S=g.vs.get(x),k=S.snapshotVersion,T=S.withLastLimboFreeSnapshotVersion(k);g.vs=g.vs.insert(x,T)}}})(r.localStore,a))}async function nD(n,e){const t=je(n);if(!t.currentUser.isEqual(e)){he(Ry,"User change. New user:",e.toKey());const r=await xS(t.localStore,e);t.currentUser=e,(function(a,c){a.mu.forEach((f=>{f.forEach((d=>{d.reject(new ue(J.CANCELLED,c))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await gu(t,r.Ns)}}function rD(n,e){const t=je(n),r=t.Au.get(e);if(r&&r.hu)return Be().add(r.key);{let s=Be();const a=t.Iu.get(e);if(!a)return s;for(const c of a){const f=t.Tu.get(c);s=s.unionWith(f.view.nu)}return s}}function BS(n){const e=je(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=DS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=JN.bind(null,e),e.Pu.J_=zN.bind(null,e.eventManager),e.Pu.yu=FN.bind(null,e.eventManager),e}function iD(n){const e=je(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ZN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=eD.bind(null,e),e}class Mh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=uf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return aN(this.persistence,new iN,e.initialUser,this.serializer)}Cu(e){return new vS(wy.Vi,this.serializer)}Du(e){return new mN}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Mh.provider={build:()=>new Mh};class sD extends Mh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Qe(this.persistence.referenceDelegate instanceof jh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new $M(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?_n.withCacheSize(this.cacheSizeBytes):_n.DEFAULT;return new vS((r=>jh.Vi(r,t)),this.serializer)}}class lg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>yw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=nD.bind(null,this.syncEngine),await LN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new BN})()}createDatastore(e){const t=uf(e.databaseInfo.databaseId),r=xN(e.databaseInfo);return SN(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,s,a,c,f){return new TN(r,s,a,c,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>yw(this.syncEngine,t,0)),(function(){return dw.v()?new dw:new pN})())}createSyncEngine(e,t){return(function(s,a,c,f,d,m,g){const y=new HN(s,a,c,f,d,m);return g&&(y.gu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const a=je(s);he(jo,"RemoteStore shutting down."),a.Ea.add(5),await pu(a),a.Aa.shutdown(),a.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}lg.provider={build:()=>new lg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ji("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps="FirestoreClient";class oD{constructor(e,t,r,s,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=s,this.user=sn.UNAUTHENTICATED,this.clientId=ay.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async c=>{he(Ps,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(he(Ps,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ti;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Cy(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function hp(n,e){n.asyncQueue.verifyOperationInProgress(),he(Ps,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async s=>{r.isEqual(s)||(await xS(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function xw(n,e){n.asyncQueue.verifyOperationInProgress();const t=await aD(n);he(Ps,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>fw(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,s)=>fw(e.remoteStore,s))),n._onlineComponents=e}async function aD(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){he(Ps,"Using user provided OfflineComponentProvider");try{await hp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===J.FAILED_PRECONDITION||s.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;Qa("Error using user provided cache. Falling back to memory cache: "+t),await hp(n,new Mh)}}else he(Ps,"Using default OfflineComponentProvider"),await hp(n,new sD(void 0));return n._offlineComponents}async function FS(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(he(Ps,"Using user provided OnlineComponentProvider"),await xw(n,n._uninitializedComponentsProvider._online)):(he(Ps,"Using default OnlineComponentProvider"),await xw(n,new lg))),n._onlineComponents}function lD(n){return FS(n).then((e=>e.syncEngine))}async function US(n){const e=await FS(n),t=e.eventManager;return t.onListen=KN.bind(null,e.syncEngine),t.onUnlisten=QN.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=qN.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=YN.bind(null,e.syncEngine),t}function cD(n,e,t={}){const r=new Ti;return n.asyncQueue.enqueueAndForget((async()=>(function(a,c,f,d,m){const g=new zS({next:x=>{g.Nu(),c.enqueueAndForget((()=>RS(a,y)));const S=x.docs.has(f);!S&&x.fromCache?m.reject(new ue(J.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&x.fromCache&&d&&d.source==="server"?m.reject(new ue(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(x)},error:x=>m.reject(x)}),y=new jS(fy(f.path),g,{includeMetadataChanges:!0,Ka:!0});return AS(a,y)})(await US(n),n.asyncQueue,e,t,r))),r.promise}function uD(n,e,t={}){const r=new Ti;return n.asyncQueue.enqueueAndForget((async()=>(function(a,c,f,d,m){const g=new zS({next:x=>{g.Nu(),c.enqueueAndForget((()=>RS(a,y))),x.fromCache&&d.source==="server"?m.reject(new ue(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(x)},error:x=>m.reject(x)}),y=new jS(f,g,{includeMetadataChanges:!0,Ka:!0});return AS(a,y)})(await US(n),n.asyncQueue,e,t,r))),r.promise}function dD(n,e){const t=new Ti;return n.asyncQueue.enqueueAndForget((async()=>XN(await lD(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $S(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hD="ComponentProvider",ww=new Map;function fD(n,e,t,r,s){return new NP(n,e,t,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,$S(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS="firestore.googleapis.com",_w=!0;class kw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ue(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=WS,this.ssl=_w}else this.host=e.host,this.ssl=e.ssl??_w;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=yS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<FM)throw new ue(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}bP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$S(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ue(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ue(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ue(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ff{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ue(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ue(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new fP;switch(r.type){case"firstParty":return new yP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ue(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=ww.get(t);r&&(he(hD,"Removing Datastore"),ww.delete(t),r.terminate())})(this),Promise.resolve()}}function mD(n,e,t,r={}){var m;n=Gr(n,ff);const s=cl(e),a=n._getSettings(),c={...a,emulatorOptions:n._getEmulatorOptions()},f=`${e}:${t}`;s&&(Pk(`https://${f}`),Mk("Firestore",!0)),a.host!==WS&&a.host!==f&&Qa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...a,host:f,ssl:s,emulatorOptions:r};if(!Ts(d,c)&&(n._setSettings(d),r.mockUserToken)){let g,y;if(typeof r.mockUserToken=="string")g=r.mockUserToken,y=sn.MOCK_USER;else{g=_A(r.mockUserToken,(m=n._app)==null?void 0:m.options.projectId);const x=r.mockUserToken.sub||r.mockUserToken.user_id;if(!x)throw new ue(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new sn(x)}n._authCredentials=new mP(new Tb(g,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new zs(this.firestore,e,this._query)}}class _t{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Es(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _t(this.firestore,e,this._key)}toJSON(){return{type:_t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(hu(t,_t._jsonSchema))return new _t(e,r||null,new we(et.fromString(t.referencePath)))}}_t._jsonSchemaVersion="firestore/documentReference/1.0",_t._jsonSchema={type:At("string",_t._jsonSchemaVersion),referencePath:At("string")};class Es extends zs{constructor(e,t,r){super(e,t,fy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _t(this.firestore,null,new we(e))}withConverter(e){return new Es(this.firestore,e,this._path)}}function bn(n,e,...t){if(n=Lt(n),Ib("collection","path",e),n instanceof ff){const r=et.fromString(e,...t);return Dx(r),new Es(n,null,r)}{if(!(n instanceof _t||n instanceof Es))throw new ue(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(et.fromString(e,...t));return Dx(r),new Es(n.firestore,null,r)}}function Ut(n,e,...t){if(n=Lt(n),arguments.length===1&&(e=ay.newId()),Ib("doc","path",e),n instanceof ff){const r=et.fromString(e,...t);return Nx(r),new _t(n,null,new we(r))}{if(!(n instanceof _t||n instanceof Es))throw new ue(J.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(et.fromString(e,...t));return Nx(r),new _t(n.firestore,n instanceof Es?n.converter:null,new we(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bw="AsyncQueue";class Sw{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new _S(this,"async_queue_retry"),this._c=()=>{const r=dp();r&&he(bw,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=dp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=dp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ti;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!ml(e))throw e;he(bw,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,ji("INTERNAL UNHANDLED ERROR: ",Ew(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=Iy.createAndSchedule(this,e,t,r,(a=>this.hc(a)));return this.tc.push(s),s}uc(){this.nc&&Se(47125,{Pc:Ew(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Ew(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class yl extends ff{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new Sw,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Sw(e),this._firestoreClient=void 0,await e}}}function pD(n,e){const t=typeof n=="object"?n:Lk(),r=typeof n=="string"?n:Th,s=Qg(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=xA("firestore");a&&mD(s,...a)}return s}function Py(n){if(n._terminated)throw new ue(J.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||gD(n),n._firestoreClient}function gD(n){var r,s,a,c;const e=n._freezeSettings(),t=fD(n._databaseId,((r=n._app)==null?void 0:r.options.appId)||"",n._persistenceKey,(s=n._app)==null?void 0:s.options.apiKey,e);n._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new oD(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(d){const m=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(m),_online:m}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qn(Yt.fromBase64String(e))}catch(t){throw new ue(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Qn(Yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Qn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(hu(e,Qn._jsonSchema))return Qn.fromBase64String(e.bytes)}}Qn._jsonSchemaVersion="firestore/bytes/1.0",Qn._jsonSchema={type:At("string",Qn._jsonSchemaVersion),bytes:At("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ue(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ue(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ue(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Oe(this._lat,e._lat)||Oe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Hr._jsonSchemaVersion}}static fromJSON(e){if(hu(e,Hr._jsonSchema))return new Hr(e.latitude,e.longitude)}}Hr._jsonSchemaVersion="firestore/geoPoint/1.0",Hr._jsonSchema={type:At("string",Hr._jsonSchemaVersion),latitude:At("number"),longitude:At("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:yr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(hu(e,yr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new yr(e.vectorValues);throw new ue(J.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}yr._jsonSchemaVersion="firestore/vectorValue/1.0",yr._jsonSchema={type:At("string",yr._jsonSchemaVersion),vectorValues:At("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD=/^__.*__$/;class vD{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Bs(e,this.data,this.fieldMask,t,this.fieldTransforms):new fu(e,this.data,t,this.fieldTransforms)}}class HS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Bs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function KS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se(40011,{dataSource:n})}}class mf{constructor(e,t,r,s,a,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.validatePath(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new mf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const t=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var s;const t=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Nh(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(KS(this.dataSource)&&yD.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class xD{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||uf(e)}createContext(e,t,r,s=!1){return new mf({dataSource:e,methodName:t,targetDoc:r,path:Qt.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function pf(n){const e=n._freezeSettings(),t=uf(n._databaseId);return new xD(n._databaseId,!!e.ignoreUndefinedProperties,t)}function qS(n,e,t,r,s,a={}){const c=n.createContext(a.merge||a.mergeFields?2:0,e,t,s);Ly("Data must be an object, but it was:",c,r);const f=GS(r,c);let d,m;if(a.merge)d=new Vn(c.fieldMask),m=c.fieldTransforms;else if(a.mergeFields){const g=[];for(const y of a.mergeFields){const x=Po(e,y,t);if(!c.contains(x))throw new ue(J.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);XS(g,x)||g.push(x)}d=new Vn(g),m=c.fieldTransforms.filter((y=>d.covers(y.field)))}else d=null,m=c.fieldTransforms;return new vD(new kn(f),d,m)}class gf extends vl{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gf}}function wD(n,e,t){return new mf({dataSource:3,targetDoc:e.settings.targetDoc,methodName:n._methodName,arrayElement:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Ny extends vl{_toFieldTransform(e){return new py(e.path,new Qc)}isEqual(e){return e instanceof Ny}}class Dy extends vl{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=wD(this,e,!0),r=this.Ac.map((a=>xl(a,t))),s=new Za(r);return new py(e.path,s)}isEqual(e){return e instanceof Dy&&Ts(this.Ac,e.Ac)}}class Vy extends vl{constructor(e,t){super(e),this.Vc=t}_toFieldTransform(e){const t=new Xc(e.serializer,Jb(e.serializer,this.Vc));return new py(e.path,t)}isEqual(e){return e instanceof Vy&&this.Vc===e.Vc}}function _D(n,e,t,r){const s=n.createContext(1,e,t);Ly("Data must be an object, but it was:",s,r);const a=[],c=kn.empty();Os(r,((d,m)=>{const g=YS(e,d,t);m=Lt(m);const y=s.childContextForFieldPath(g);if(m instanceof gf)a.push(g);else{const x=xl(m,y);x!=null&&(a.push(g),c.set(g,x))}}));const f=new Vn(a);return new HS(c,f,s.fieldTransforms)}function kD(n,e,t,r,s,a){const c=n.createContext(1,e,t),f=[Po(e,r,t)],d=[s];if(a.length%2!=0)throw new ue(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<a.length;x+=2)f.push(Po(e,a[x])),d.push(a[x+1]);const m=[],g=kn.empty();for(let x=f.length-1;x>=0;--x)if(!XS(m,f[x])){const S=f[x];let k=d[x];k=Lt(k);const T=c.childContextForFieldPath(S);if(k instanceof gf)m.push(S);else{const E=xl(k,T);E!=null&&(m.push(S),g.set(S,E))}}const y=new Vn(m);return new HS(g,y,c.fieldTransforms)}function bD(n,e,t,r=!1){return xl(t,n.createContext(r?4:3,e))}function xl(n,e){if(QS(n=Lt(n)))return Ly("Unsupported field value:",e,n),GS(n,e);if(n instanceof vl)return(function(r,s){if(!KS(s.dataSource))throw s.createError(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,s){const a=[];let c=0;for(const f of r){let d=xl(f,s.childContextForArray(c));d==null&&(d={nullValue:"NULL_VALUE"}),a.push(d),c++}return{arrayValue:{values:a}}})(n,e)}return(function(r,s){if((r=Lt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Jb(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=it.fromDate(r);return{timestampValue:Rh(s.serializer,a)}}if(r instanceof it){const a=new it(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Rh(s.serializer,a)}}if(r instanceof Hr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Qn)return{bytesValue:cS(s.serializer,r._byteString)};if(r instanceof _t){const a=s.databaseId,c=r.firestore._databaseId;if(!c.isEqual(a))throw s.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:vy(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof yr)return(function(c,f){const d=c instanceof yr?c.toArray():c;return{mapValue:{fields:{[Vb]:{stringValue:Lb},[Ih]:{arrayValue:{values:d.map((g=>{if(typeof g!="number")throw f.createError("VectorValues must only contain numeric values.");return my(f.serializer,g)}))}}}}}})(r,s);if(gS(r))return r._toProto(s.serializer);throw s.createError(`Unsupported field value: ${ef(r)}`)})(n,e)}function GS(n,e){const t={};return Rb(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Os(n,((r,s)=>{const a=xl(s,e.childContextForField(r));a!=null&&(t[r]=a)})),{mapValue:{fields:t}}}function QS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof it||n instanceof Hr||n instanceof Qn||n instanceof _t||n instanceof vl||n instanceof yr||gS(n))}function Ly(n,e,t){if(!QS(t)||!Cb(t)){const r=ef(t);throw r==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+r)}}function Po(n,e,t){if((e=Lt(e))instanceof My)return e._internalPath;if(typeof e=="string")return YS(n,e);throw Nh("Field path arguments must be of type string or ",n,!1,void 0,t)}const SD=new RegExp("[~\\*/\\[\\]]");function YS(n,e,t){if(e.search(SD)>=0)throw Nh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new My(...e.split("."))._internalPath}catch{throw Nh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Nh(n,e,t,r,s){const a=r&&!r.isEmpty(),c=s!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let d="";return(a||c)&&(d+=" (found",a&&(d+=` in field ${r}`),c&&(d+=` in document ${s}`),d+=")"),new ue(J.INVALID_ARGUMENT,f+n+d)}function XS(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{convertValue(e,t="none"){switch(Rs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(As(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Se(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Os(e,((s,a)=>{r[s]=this.convertValue(a,t)})),r}convertVectorValue(e){var r,s,a;const t=(a=(s=(r=e.fields)==null?void 0:r[Ih].arrayValue)==null?void 0:s.values)==null?void 0:a.map((c=>wt(c.doubleValue)));return new yr(t)}convertGeoPoint(e){return new Hr(wt(e.latitude),wt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=rf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Hc(e));default:return null}}convertTimestamp(e){const t=Cs(e);return new it(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=et.fromString(e);Qe(pS(r),9688,{name:e});const s=new Kc(r.get(1),r.get(3)),a=new we(r.popFirst(5));return s.isEqual(t)||ji(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS extends ED{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new _t(this.firestore,null,t)}}function Vt(){return new Ny("serverTimestamp")}function TD(...n){return new Dy("arrayUnion",n)}function Oy(n){return new Vy("increment",n)}const Tw="@firebase/firestore",Iw="4.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e,t,r,s,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new _t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ID(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(Po("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class ID extends ZS{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CD(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ue(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class By{}class zy extends By{}function Ms(n,e,...t){let r=[];e instanceof By&&r.push(e),r=r.concat(t),(function(a){const c=a.filter((d=>d instanceof Fy)).length,f=a.filter((d=>d instanceof yf)).length;if(c>1||c>0&&f>0)throw new ue(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)n=s._apply(n);return n}class yf extends zy{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new yf(e,t,r)}_apply(e){const t=this._parse(e);return eE(e._query,t),new zs(e.firestore,e.converter,Zp(e._query,t))}_parse(e){const t=pf(e.firestore);return(function(a,c,f,d,m,g,y){let x;if(m.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new ue(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){Aw(y,g);const k=[];for(const T of y)k.push(Cw(d,a,T));x={arrayValue:{values:k}}}else x=Cw(d,a,y)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||Aw(y,g),x=bD(f,c,y,g==="in"||g==="not-in");return Ct.create(m,g,x)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Jc(n,e,t){const r=e,s=Po("where",n);return yf._create(s,r,t)}class Fy extends By{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Fy(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:xr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,a){let c=s;const f=a.getFlattenedFilters();for(const d of f)eE(c,d),c=Zp(c,d)})(e._query,t),new zs(e.firestore,e.converter,Zp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Uy extends zy{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Uy(e,t)}_apply(e){const t=(function(s,a,c){if(s.startAt!==null)throw new ue(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ue(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Gc(a,c)})(e._query,this._field,this._direction);return new zs(e.firestore,e.converter,JP(e._query,t))}}function nl(n,e="asc"){const t=e,r=Po("orderBy",n);return Uy._create(r,t)}class $y extends zy{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new $y(e,t,r)}_apply(e){return new zs(e.firestore,e.converter,Ah(e._query,this._limit,this._limitType))}}function AD(n){return $y._create("limit",n,"F")}function Cw(n,e,t){if(typeof(t=Lt(t))=="string"){if(t==="")throw new ue(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Hb(e)&&t.indexOf("/")!==-1)throw new ue(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(et.fromString(t));if(!we.isDocumentKey(r))throw new ue(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return $x(n,new we(r))}if(t instanceof _t)return $x(n,t._key);throw new ue(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ef(t)}.`)}function Aw(n,e){if(!Array.isArray(n)||n.length===0)throw new ue(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function eE(n,e){const t=(function(s,a){for(const c of s)for(const f of c.getFlattenedFilters())if(a.indexOf(f.op)>=0)return f.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ue(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ue(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function tE(n,e,t){let r;return r=n?n.toFirestore(e):e,r}class Cc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class So extends ZS{constructor(e,t,r,s,a,c){super(e,t,r,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new dh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Po("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(J.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=So._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}So._jsonSchemaVersion="firestore/documentSnapshot/1.0",So._jsonSchema={type:At("string",So._jsonSchemaVersion),bundleSource:At("string","DocumentSnapshot"),bundleName:At("string"),bundle:At("string")};class dh extends So{data(e={}){return super.data(e)}}class Wa{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Cc(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new dh(this._firestore,this._userDataWriter,r.key,r,new Cc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ue(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,a){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map((f=>{const d=new dh(s._firestore,s._userDataWriter,f.doc.key,f.doc,new Cc(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);return f.doc,{type:"added",doc:d,oldIndex:-1,newIndex:c++}}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((f=>a||f.type!==3)).map((f=>{const d=new dh(s._firestore,s._userDataWriter,f.doc.key,f.doc,new Cc(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,g=-1;return f.type!==0&&(m=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),g=c.indexOf(f.doc.key)),{type:RD(f.type),doc:d,oldIndex:m,newIndex:g}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(J.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Wa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ay.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function RD(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wa._jsonSchemaVersion="firestore/querySnapshot/1.0",Wa._jsonSchema={type:At("string",Wa._jsonSchemaVersion),bundleSource:At("string","QuerySnapshot"),bundleName:At("string"),bundle:At("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wl(n){n=Gr(n,_t);const e=Gr(n.firestore,yl),t=Py(e);return cD(t,n._key).then((r=>jD(e,n,r)))}function vr(n){n=Gr(n,zs);const e=Gr(n.firestore,yl),t=Py(e),r=new JS(e);return CD(n._query),uD(t,n._query).then((s=>new Wa(e,r,n,s)))}function yu(n,e,t){n=Gr(n,_t);const r=Gr(n.firestore,yl),s=tE(n.converter,e),a=pf(r);return Hy(r,[qS(a,"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,gr.none())])}function Jr(n,e,t,...r){n=Gr(n,_t);const s=Gr(n.firestore,yl),a=pf(s);let c;return c=typeof(e=Lt(e))=="string"||e instanceof My?kD(a,"updateDoc",n._key,e,t,r):_D(a,"updateDoc",n._key,e),Hy(s,[c.toMutation(n._key,gr.exists(!0))])}function Wy(n,e){const t=Gr(n.firestore,yl),r=Ut(n),s=tE(n.converter,e),a=pf(n.firestore);return Hy(t,[qS(a,"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,gr.exists(!1))]).then((()=>r))}function Hy(n,e){const t=Py(n);return dD(t,e)}function jD(n,e,t){const r=t.docs.get(e._key),s=new JS(n);return new So(n,s,e._key,r,new Cc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){hP(ul),qa(new Io("firestore",((r,{instanceIdentifier:s,options:a})=>{const c=r.getProvider("app").getImmediate(),f=new yl(new pP(r.getProvider("auth-internal")),new vP(c,r.getProvider("app-check-internal")),DP(c,s),c);return a={useFetchStreams:t,...a},f._setSettings(a),f}),"PUBLIC").setMultipleInstances(!0)),bs(Tw,Iw,e),bs(Tw,Iw,"esm2020")})();var PD="firebase",MD="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bs(PD,MD,"app");const ND={apiKey:"AIzaSyCf4uRHqqZtYR3ZvlbHF9w59qGuEjlXcW4",authDomain:"kinderbucks-e3e8c.firebaseapp.com",projectId:"kinderbucks-e3e8c",storageBucket:"kinderbucks-e3e8c.firebasestorage.app",messagingSenderId:"18326874439",appId:"1:18326874439:web:ad902e6a1c794b2b3c4462",measurementId:"G-3JMD9HSMC3"},nE=Vk(ND),qe=pD(nE),Mo=uP(nE),Bo="users",Eo={ADMIN:"admin",BUSINESS:"business",MEMBER:"member"};async function DD(n,e,t){const s=(await Kj(Mo,n,e)).user;return await Qj(s,{displayName:t}),await yu(Ut(qe,Bo,s.uid),{uid:s.uid,email:s.email,displayName:t,role:Eo.MEMBER,createdAt:Vt(),lastLogin:Vt()}),s}async function VD(n,e){const t=await qj(Mo,n,e);return await Jr(Ut(qe,Bo,t.user.uid),{lastLogin:Vt()}),t.user}async function LD(){var a;const n=new wi,t=(await x5(Mo,n)).user,r=Ut(qe,Bo,t.uid);return(await wl(r)).exists()?await Jr(r,{lastLogin:Vt(),photoURL:t.photoURL}):await yu(r,{uid:t.uid,email:t.email,displayName:t.displayName||((a=t.email)==null?void 0:a.split("@")[0]),photoURL:t.photoURL,role:Eo.MEMBER,createdAt:Vt(),lastLogin:Vt(),provider:"google"}),t}async function rE(){return Zj(Mo)}async function Rw(n){const e=Ut(qe,Bo,n),t=await wl(e);return t.exists()?t.data():null}async function OD(n,e){if(!Object.values(Eo).includes(e))throw new Error("Invalid role");await Jr(Ut(qe,Bo,n),{role:e,updatedAt:Vt()})}async function BD(n,e){await Jr(Ut(qe,Bo,n),{role:Eo.BUSINESS,businessCode:e,updatedAt:Vt()})}async function zD(){return(await vr(bn(qe,Bo))).docs.map(e=>({id:e.id,...e.data()}))}function FD(n){return Jj(Mo,n)}const iE=R.createContext(null);function UD({children:n}){const[e,t]=R.useState(null),[r,s]=R.useState(null),[a,c]=R.useState(!0);R.useEffect(()=>{const k=FD(async T=>{if(t(T),T){const E=await Rw(T.uid);s(E)}else s(null);c(!1)});return()=>k()},[]);const f=!!e,d=(r==null?void 0:r.role)===Eo.ADMIN,m=(r==null?void 0:r.role)===Eo.BUSINESS,g=(r==null?void 0:r.role)===Eo.MEMBER,S={user:e,profile:r,loading:a,isAuthenticated:f,isAdmin:d,isBusiness:m,isMember:g,hasRole:(...k)=>r?k.includes(r.role):!1,refreshProfile:async()=>{if(e){const k=await Rw(e.uid);s(k)}}};return l.jsx(iE.Provider,{value:S,children:n})}function Vi(){const n=R.useContext(iE);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n}/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $D=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),WD=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),jw=n=>{const e=WD(n);return e.charAt(0).toUpperCase()+e.slice(1)},sE=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),HD=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var KD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qD=R.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:c,...f},d)=>R.createElement("svg",{ref:d,...KD,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:sE("lucide",s),...!a&&!HD(f)&&{"aria-hidden":"true"},...f},[...c.map(([m,g])=>R.createElement(m,g)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=(n,e)=>{const t=R.forwardRef(({className:r,...s},a)=>R.createElement(qD,{ref:a,iconNode:e,className:sE(`lucide-${$D(jw(n))}`,`lucide-${n}`,r),...s}));return t.displayName=jw(n),t};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GD=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],QD=ce("arrow-left",GD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YD=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],vf=ce("arrow-right-left",YD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XD=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],cg=ce("arrow-right",XD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JD=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Zr=ce("award",JD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZD=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],Ky=ce("banknote",ZD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],oE=ce("briefcase",e4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],xf=ce("calendar",t4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],aE=ce("chart-column",n4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],_i=ce("check",r4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],s4=ce("chevron-left",i4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],qy=ce("circle-alert",o4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Yr=ce("circle-check-big",a4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],c4=ce("circle-x",l4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],wr=ce("clock",u4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d4=[["path",{d:"M6 16.326A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 .5 8.973",key:"1cez44"}],["path",{d:"m13 12-3 5h4l-3 5",key:"1t22er"}]],fp=ce("cloud-lightning",d4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]],vi=ce("cloud-rain",h4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M8 15h.01",key:"a7atzg"}],["path",{d:"M8 19h.01",key:"puxtts"}],["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M12 21h.01",key:"h35vbk"}],["path",{d:"M16 15h.01",key:"rnfrdf"}],["path",{d:"M16 19h.01",key:"1vcnzz"}]],Aa=ce("cloud-snow",f4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m4=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],Gd=ce("cloud",m4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p4=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],g4=ce("coins",p4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],lE=ce("compass",y4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Gy=ce("copy",v4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],ug=ce("credit-card",x4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=[["path",{d:"M10.2 18H4.774a1.5 1.5 0 0 1-1.352-.97 11 11 0 0 1 .132-6.487",key:"14kkz9"}],["path",{d:"M18 10.2V4.774a1.5 1.5 0 0 0-.97-1.352 11 11 0 0 0-6.486.132",key:"1g7v07"}],["path",{d:"M18 5a4 3 0 0 1 4 3 2 2 0 0 1-2 2 10 10 0 0 0-5.139 1.42",key:"ratg6b"}],["path",{d:"M5 18a3 4 0 0 0 3 4 2 2 0 0 0 2-2 10 10 0 0 1 1.42-5.14",key:"4454f0"}],["path",{d:"M8.709 2.554a10 10 0 0 0-6.155 6.155 1.5 1.5 0 0 0 .676 1.626l9.807 5.42a2 2 0 0 0 2.718-2.718l-5.42-9.807a1.5 1.5 0 0 0-1.626-.676",key:"qmemie"}]],_4=ce("croissant",w4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Bn=ce("crown",k4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Qy=ce("download",b4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],E4=ce("droplets",S4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],I4=ce("ellipsis-vertical",T4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],A4=ce("eye",C4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],j4=ce("funnel",R4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],cE=ce("gift",P4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],N4=ce("house",M4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],V4=ce("layout-dashboard",D4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],O4=ce("lightbulb",L4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Yy=ce("loader-circle",B4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],F4=ce("lock",z4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],rl=ce("log-in",U4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],dg=ce("log-out",$4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],uE=ce("mail",W4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],No=ce("map-pin",H4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],q4=ce("megaphone",K4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],dE=ce("navigation",G4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Pw=ce("package",Q4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],hE=ce("palette",Y4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],J4=ce("phone",X4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Mw=ce("plus",Z4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eV=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],tV=ce("printer",eV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nV=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],Kr=ce("qr-code",nV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rV=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],iV=ce("refresh-cw",rV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sV=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],oV=ce("save",sV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aV=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],lV=ce("search",aV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cV=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Dh=ce("send",cV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uV=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],dV=ce("share-2",uV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hV=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],fE=ce("shield-check",hV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fV=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Vh=ce("shield",fV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mV=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],mE=ce("shopping-bag",mV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pV=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],Nw=ce("smartphone",pV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gV=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Xy=ce("sparkles",gV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yV=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],vV=ce("square-check-big",yV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xV=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],wV=ce("square",xV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _V=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],er=ce("star",_V);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kV=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],Rt=ce("store",kV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bV=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Dw=ce("sun",bV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SV=[["path",{d:"M12 2v8",key:"1q4o3n"}],["path",{d:"m4.93 10.93 1.41 1.41",key:"2a7f42"}],["path",{d:"M2 18h2",key:"j10viu"}],["path",{d:"M20 18h2",key:"wocana"}],["path",{d:"m19.07 10.93-1.41 1.41",key:"15zs5n"}],["path",{d:"M22 22H2",key:"19qnx5"}],["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}],["path",{d:"M16 18a4 4 0 0 0-8 0",key:"1lzouq"}]],EV=ce("sunrise",SV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TV=[["path",{d:"M12 10V2",key:"16sf7g"}],["path",{d:"m4.93 10.93 1.41 1.41",key:"2a7f42"}],["path",{d:"M2 18h2",key:"j10viu"}],["path",{d:"M20 18h2",key:"wocana"}],["path",{d:"m19.07 10.93-1.41 1.41",key:"15zs5n"}],["path",{d:"M22 22H2",key:"19qnx5"}],["path",{d:"m16 6-4 4-4-4",key:"6wukr"}],["path",{d:"M16 18a4 4 0 0 0-8 0",key:"1lzouq"}]],IV=ce("sunset",TV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Xt=ce("target",CV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AV=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],RV=ce("toggle-left",AV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jV=[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],PV=ce("toggle-right",jV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MV=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],zo=ce("trending-up",MV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NV=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],DV=ce("trophy",NV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VV=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Lh=ce("user-plus",VV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LV=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Ha=ce("user",LV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OV=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],_r=ce("users",OV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BV=[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]],pE=ce("utensils-crossed",BV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zV=[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]],FV=ce("wind",zV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UV=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],$V=ce("zap",UV);function xi({children:n,allowedRoles:e=[]}){const{user:t,profile:r,loading:s,isAuthenticated:a}=Vi(),c=tr();return s?l.jsxs("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"var(--kb-cream)"},children:[l.jsxs("div",{style:{textAlign:"center"},children:[l.jsx(Yy,{size:48,color:"var(--kb-navy)",style:{animation:"spin 1s linear infinite"}}),l.jsx("p",{style:{marginTop:"1rem",color:"var(--kb-gray-500)"},children:"Loading..."})]}),l.jsx("style",{children:`
          @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
          }
        `})]}):a?e.length>0&&r&&!e.includes(r.role)?l.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"var(--kb-cream)",padding:"2rem"},children:l.jsxs("div",{className:"card",style:{maxWidth:"400px",textAlign:"center",padding:"2rem"},children:[l.jsx("h2",{style:{color:"#dc2626",marginBottom:"1rem"},children:"Access Denied"}),l.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem"},children:"You don't have permission to access this page."}),l.jsx("a",{href:"/",className:"btn btn-primary",children:"Go Home"})]})}):n:l.jsx(AC,{to:"/login",state:{from:c},replace:!0})}const Jy=R.createContext({});function Zy(n){const e=R.useRef(null);return e.current===null&&(e.current=n()),e.current}const gE=typeof window<"u",yE=gE?R.useLayoutEffect:R.useEffect,wf=R.createContext(null);function e0(n,e){n.indexOf(e)===-1&&n.push(e)}function t0(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Xr=(n,e,t)=>t>e?e:t<n?n:t;let n0=()=>{};const Mi={},vE=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function xE(n){return typeof n=="object"&&n!==null}const wE=n=>/^0[^.\s]+$/u.test(n);function r0(n){let e;return()=>(e===void 0&&(e=n()),e)}const Xn=n=>n,WV=(n,e)=>t=>e(n(t)),vu=(...n)=>n.reduce(WV),Zc=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r};class i0{constructor(){this.subscriptions=[]}add(e){return e0(this.subscriptions,e),()=>t0(this.subscriptions,e)}notify(e,t,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,t,r);else for(let a=0;a<s;a++){const c=this.subscriptions[a];c&&c(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ii=n=>n*1e3,Yn=n=>n/1e3;function _E(n,e){return e?n*(1e3/e):0}const kE=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,HV=1e-7,KV=12;function qV(n,e,t,r,s){let a,c,f=0;do c=e+(t-e)/2,a=kE(c,r,s)-n,a>0?t=c:e=c;while(Math.abs(a)>HV&&++f<KV);return c}function xu(n,e,t,r){if(n===e&&t===r)return Xn;const s=a=>qV(a,0,1,n,t);return a=>a===0||a===1?a:kE(s(a),e,r)}const bE=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,SE=n=>e=>1-n(1-e),EE=xu(.33,1.53,.69,.99),s0=SE(EE),TE=bE(s0),IE=n=>(n*=2)<1?.5*s0(n):.5*(2-Math.pow(2,-10*(n-1))),o0=n=>1-Math.sin(Math.acos(n)),CE=SE(o0),AE=bE(o0),GV=xu(.42,0,1,1),QV=xu(0,0,.58,1),RE=xu(.42,0,.58,1),YV=n=>Array.isArray(n)&&typeof n[0]!="number",jE=n=>Array.isArray(n)&&typeof n[0]=="number",XV={linear:Xn,easeIn:GV,easeInOut:RE,easeOut:QV,circIn:o0,circInOut:AE,circOut:CE,backIn:s0,backInOut:TE,backOut:EE,anticipate:IE},JV=n=>typeof n=="string",Vw=n=>{if(jE(n)){n0(n.length===4);const[e,t,r,s]=n;return xu(e,t,r,s)}else if(JV(n))return XV[n];return n},Qd=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function ZV(n,e){let t=new Set,r=new Set,s=!1,a=!1;const c=new WeakSet;let f={delta:0,timestamp:0,isProcessing:!1};function d(g){c.has(g)&&(m.schedule(g),n()),g(f)}const m={schedule:(g,y=!1,x=!1)=>{const k=x&&s?t:r;return y&&c.add(g),k.has(g)||k.add(g),g},cancel:g=>{r.delete(g),c.delete(g)},process:g=>{if(f=g,s){a=!0;return}s=!0,[t,r]=[r,t],t.forEach(d),t.clear(),s=!1,a&&(a=!1,m.process(g))}};return m}const e3=40;function PE(n,e){let t=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>t=!0,c=Qd.reduce((P,G)=>(P[G]=ZV(a),P),{}),{setup:f,read:d,resolveKeyframes:m,preUpdate:g,update:y,preRender:x,render:S,postRender:k}=c,T=()=>{const P=Mi.useManualTiming?s.timestamp:performance.now();t=!1,Mi.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(P-s.timestamp,e3),1)),s.timestamp=P,s.isProcessing=!0,f.process(s),d.process(s),m.process(s),g.process(s),y.process(s),x.process(s),S.process(s),k.process(s),s.isProcessing=!1,t&&e&&(r=!1,n(T))},E=()=>{t=!0,r=!0,s.isProcessing||n(T)};return{schedule:Qd.reduce((P,G)=>{const F=c[G];return P[G]=($,A=!1,C=!1)=>(t||E(),F.schedule($,A,C)),P},{}),cancel:P=>{for(let G=0;G<Qd.length;G++)c[Qd[G]].cancel(P)},state:s,steps:c}}const{schedule:st,cancel:Ns,state:qt,steps:mp}=PE(typeof requestAnimationFrame<"u"?requestAnimationFrame:Xn,!0);let hh;function t3(){hh=void 0}const fn={now:()=>(hh===void 0&&fn.set(qt.isProcessing||Mi.useManualTiming?qt.timestamp:performance.now()),hh),set:n=>{hh=n,queueMicrotask(t3)}},ME=n=>e=>typeof e=="string"&&e.startsWith(n),NE=ME("--"),n3=ME("var(--"),a0=n=>n3(n)?r3.test(n.split("/*")[0].trim()):!1,r3=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function Lw(n){return typeof n!="string"?!1:n.split("/*")[0].includes("var(--")}const _l={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},eu={..._l,transform:n=>Xr(0,1,n)},Yd={..._l,default:1},Lc=n=>Math.round(n*1e5)/1e5,l0=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function i3(n){return n==null}const s3=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,c0=(n,e)=>t=>!!(typeof t=="string"&&s3.test(t)&&t.startsWith(n)||e&&!i3(t)&&Object.prototype.hasOwnProperty.call(t,e)),DE=(n,e,t)=>r=>{if(typeof r!="string")return r;const[s,a,c,f]=r.match(l0);return{[n]:parseFloat(s),[e]:parseFloat(a),[t]:parseFloat(c),alpha:f!==void 0?parseFloat(f):1}},o3=n=>Xr(0,255,n),pp={..._l,transform:n=>Math.round(o3(n))},ko={test:c0("rgb","red"),parse:DE("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+pp.transform(n)+", "+pp.transform(e)+", "+pp.transform(t)+", "+Lc(eu.transform(r))+")"};function a3(n){let e="",t="",r="",s="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),s=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),s=n.substring(4,5),e+=e,t+=t,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const hg={test:c0("#"),parse:a3,transform:ko.transform},wu=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),ms=wu("deg"),qr=wu("%"),fe=wu("px"),l3=wu("vh"),c3=wu("vw"),Ow={...qr,parse:n=>qr.parse(n)/100,transform:n=>qr.transform(n*100)},Na={test:c0("hsl","hue"),parse:DE("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+qr.transform(Lc(e))+", "+qr.transform(Lc(t))+", "+Lc(eu.transform(r))+")"},It={test:n=>ko.test(n)||hg.test(n)||Na.test(n),parse:n=>ko.test(n)?ko.parse(n):Na.test(n)?Na.parse(n):hg.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?ko.transform(n):Na.transform(n),getAnimatableNone:n=>{const e=It.parse(n);return e.alpha=0,It.transform(e)}},u3=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function d3(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(l0))==null?void 0:e.length)||0)+(((t=n.match(u3))==null?void 0:t.length)||0)>0}const VE="number",LE="color",h3="var",f3="var(",Bw="${}",m3=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function tu(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},s=[];let a=0;const f=e.replace(m3,d=>(It.test(d)?(r.color.push(a),s.push(LE),t.push(It.parse(d))):d.startsWith(f3)?(r.var.push(a),s.push(h3),t.push(d)):(r.number.push(a),s.push(VE),t.push(parseFloat(d))),++a,Bw)).split(Bw);return{values:t,split:f,indexes:r,types:s}}function OE(n){return tu(n).values}function BE(n){const{split:e,types:t}=tu(n),r=e.length;return s=>{let a="";for(let c=0;c<r;c++)if(a+=e[c],s[c]!==void 0){const f=t[c];f===VE?a+=Lc(s[c]):f===LE?a+=It.transform(s[c]):a+=s[c]}return a}}const p3=n=>typeof n=="number"?0:It.test(n)?It.getAnimatableNone(n):n;function g3(n){const e=OE(n);return BE(n)(e.map(p3))}const Ds={test:d3,parse:OE,createTransformer:BE,getAnimatableNone:g3};function gp(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function y3({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let s=0,a=0,c=0;if(!e)s=a=c=t;else{const f=t<.5?t*(1+e):t+e-t*e,d=2*t-f;s=gp(d,f,n+1/3),a=gp(d,f,n),c=gp(d,f,n-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(c*255),alpha:r}}function Oh(n,e){return t=>t>0?e:n}const dt=(n,e,t)=>n+(e-n)*t,yp=(n,e,t)=>{const r=n*n,s=t*(e*e-r)+r;return s<0?0:Math.sqrt(s)},v3=[hg,ko,Na],x3=n=>v3.find(e=>e.test(n));function zw(n){const e=x3(n);if(!e)return!1;let t=e.parse(n);return e===Na&&(t=y3(t)),t}const Fw=(n,e)=>{const t=zw(n),r=zw(e);if(!t||!r)return Oh(n,e);const s={...t};return a=>(s.red=yp(t.red,r.red,a),s.green=yp(t.green,r.green,a),s.blue=yp(t.blue,r.blue,a),s.alpha=dt(t.alpha,r.alpha,a),ko.transform(s))},fg=new Set(["none","hidden"]);function w3(n,e){return fg.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function _3(n,e){return t=>dt(n,e,t)}function u0(n){return typeof n=="number"?_3:typeof n=="string"?a0(n)?Oh:It.test(n)?Fw:S3:Array.isArray(n)?zE:typeof n=="object"?It.test(n)?Fw:k3:Oh}function zE(n,e){const t=[...n],r=t.length,s=n.map((a,c)=>u0(a)(a,e[c]));return a=>{for(let c=0;c<r;c++)t[c]=s[c](a);return t}}function k3(n,e){const t={...n,...e},r={};for(const s in t)n[s]!==void 0&&e[s]!==void 0&&(r[s]=u0(n[s])(n[s],e[s]));return s=>{for(const a in r)t[a]=r[a](s);return t}}function b3(n,e){const t=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const a=e.types[s],c=n.indexes[a][r[a]],f=n.values[c]??0;t[s]=f,r[a]++}return t}const S3=(n,e)=>{const t=Ds.createTransformer(e),r=tu(n),s=tu(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?fg.has(n)&&!s.values.length||fg.has(e)&&!r.values.length?w3(n,e):vu(zE(b3(r,s),s.values),t):Oh(n,e)};function FE(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?dt(n,e,t):u0(n)(n,e)}const E3=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>st.update(e,t),stop:()=>Ns(e),now:()=>qt.isProcessing?qt.timestamp:fn.now()}},UE=(n,e,t=10)=>{let r="";const s=Math.max(Math.round(e/t),2);for(let a=0;a<s;a++)r+=Math.round(n(a/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Bh=2e4;function d0(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<Bh;)e+=t,r=n.next(e);return e>=Bh?1/0:e}function T3(n,e=100,t){const r=t({...n,keyframes:[0,e]}),s=Math.min(d0(r),Bh);return{type:"keyframes",ease:a=>r.next(s*a).value/e,duration:Yn(s)}}const I3=5;function $E(n,e,t){const r=Math.max(e-I3,0);return _E(t-n(r),e-r)}const gt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},vp=.001;function C3({duration:n=gt.duration,bounce:e=gt.bounce,velocity:t=gt.velocity,mass:r=gt.mass}){let s,a,c=1-e;c=Xr(gt.minDamping,gt.maxDamping,c),n=Xr(gt.minDuration,gt.maxDuration,Yn(n)),c<1?(s=m=>{const g=m*c,y=g*n,x=g-t,S=mg(m,c),k=Math.exp(-y);return vp-x/S*k},a=m=>{const y=m*c*n,x=y*t+t,S=Math.pow(c,2)*Math.pow(m,2)*n,k=Math.exp(-y),T=mg(Math.pow(m,2),c);return(-s(m)+vp>0?-1:1)*((x-S)*k)/T}):(s=m=>{const g=Math.exp(-m*n),y=(m-t)*n+1;return-vp+g*y},a=m=>{const g=Math.exp(-m*n),y=(t-m)*(n*n);return g*y});const f=5/n,d=R3(s,a,f);if(n=Ii(n),isNaN(d))return{stiffness:gt.stiffness,damping:gt.damping,duration:n};{const m=Math.pow(d,2)*r;return{stiffness:m,damping:c*2*Math.sqrt(r*m),duration:n}}}const A3=12;function R3(n,e,t){let r=t;for(let s=1;s<A3;s++)r=r-n(r)/e(r);return r}function mg(n,e){return n*Math.sqrt(1-e*e)}const j3=["duration","bounce"],P3=["stiffness","damping","mass"];function Uw(n,e){return e.some(t=>n[t]!==void 0)}function M3(n){let e={velocity:gt.velocity,stiffness:gt.stiffness,damping:gt.damping,mass:gt.mass,isResolvedFromDuration:!1,...n};if(!Uw(n,P3)&&Uw(n,j3))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),s=r*r,a=2*Xr(.05,1,1-(n.bounce||0))*Math.sqrt(s);e={...e,mass:gt.mass,stiffness:s,damping:a}}else{const t=C3(n);e={...e,...t,mass:gt.mass},e.isResolvedFromDuration=!0}return e}function zh(n=gt.visualDuration,e=gt.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:s}=t;const a=t.keyframes[0],c=t.keyframes[t.keyframes.length-1],f={done:!1,value:a},{stiffness:d,damping:m,mass:g,duration:y,velocity:x,isResolvedFromDuration:S}=M3({...t,velocity:-Yn(t.velocity||0)}),k=x||0,T=m/(2*Math.sqrt(d*g)),E=c-a,N=Yn(Math.sqrt(d/g)),D=Math.abs(E)<5;r||(r=D?gt.restSpeed.granular:gt.restSpeed.default),s||(s=D?gt.restDelta.granular:gt.restDelta.default);let P;if(T<1){const F=mg(N,T);P=$=>{const A=Math.exp(-T*N*$);return c-A*((k+T*N*E)/F*Math.sin(F*$)+E*Math.cos(F*$))}}else if(T===1)P=F=>c-Math.exp(-N*F)*(E+(k+N*E)*F);else{const F=N*Math.sqrt(T*T-1);P=$=>{const A=Math.exp(-T*N*$),C=Math.min(F*$,300);return c-A*((k+T*N*E)*Math.sinh(C)+F*E*Math.cosh(C))/F}}const G={calculatedDuration:S&&y||null,next:F=>{const $=P(F);if(S)f.done=F>=y;else{let A=F===0?k:0;T<1&&(A=F===0?Ii(k):$E(P,F,$));const C=Math.abs(A)<=r,M=Math.abs(c-$)<=s;f.done=C&&M}return f.value=f.done?c:$,f},toString:()=>{const F=Math.min(d0(G),Bh),$=UE(A=>G.next(F*A).value,F,30);return F+"ms "+$},toTransition:()=>{}};return G}zh.applyToOptions=n=>{const e=T3(n,100,zh);return n.ease=e.ease,n.duration=Ii(e.duration),n.type="keyframes",n};function pg({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:c,min:f,max:d,restDelta:m=.5,restSpeed:g}){const y=n[0],x={done:!1,value:y},S=C=>f!==void 0&&C<f||d!==void 0&&C>d,k=C=>f===void 0?d:d===void 0||Math.abs(f-C)<Math.abs(d-C)?f:d;let T=t*e;const E=y+T,N=c===void 0?E:c(E);N!==E&&(T=N-y);const D=C=>-T*Math.exp(-C/r),P=C=>N+D(C),G=C=>{const M=D(C),L=P(C);x.done=Math.abs(M)<=m,x.value=x.done?N:L};let F,$;const A=C=>{S(x.value)&&(F=C,$=zh({keyframes:[x.value,k(x.value)],velocity:$E(P,C,x.value),damping:s,stiffness:a,restDelta:m,restSpeed:g}))};return A(0),{calculatedDuration:null,next:C=>{let M=!1;return!$&&F===void 0&&(M=!0,G(C),A(C)),F!==void 0&&C>=F?$.next(C-F):(!M&&G(C),x)}}}function N3(n,e,t){const r=[],s=t||Mi.mix||FE,a=n.length-1;for(let c=0;c<a;c++){let f=s(n[c],n[c+1]);if(e){const d=Array.isArray(e)?e[c]||Xn:e;f=vu(d,f)}r.push(f)}return r}function D3(n,e,{clamp:t=!0,ease:r,mixer:s}={}){const a=n.length;if(n0(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const c=n[0]===n[1];n[0]>n[a-1]&&(n=[...n].reverse(),e=[...e].reverse());const f=N3(e,r,s),d=f.length,m=g=>{if(c&&g<n[0])return e[0];let y=0;if(d>1)for(;y<n.length-2&&!(g<n[y+1]);y++);const x=Zc(n[y],n[y+1],g);return f[y](x)};return t?g=>m(Xr(n[0],n[a-1],g)):m}function V3(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const s=Zc(0,e,r);n.push(dt(t,1,s))}}function L3(n){const e=[0];return V3(e,n.length-1),e}function O3(n,e){return n.map(t=>t*e)}function B3(n,e){return n.map(()=>e||RE).splice(0,n.length-1)}function Oc({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const s=YV(r)?r.map(Vw):Vw(r),a={done:!1,value:e[0]},c=O3(t&&t.length===e.length?t:L3(e),n),f=D3(c,e,{ease:Array.isArray(s)?s:B3(e,s)});return{calculatedDuration:n,next:d=>(a.value=f(d),a.done=d>=n,a)}}const z3=n=>n!==null;function h0(n,{repeat:e,repeatType:t="loop"},r,s=1){const a=n.filter(z3),f=s<0||e&&t!=="loop"&&e%2===1?0:a.length-1;return!f||r===void 0?a[f]:r}const F3={decay:pg,inertia:pg,tween:Oc,keyframes:Oc,spring:zh};function WE(n){typeof n.type=="string"&&(n.type=F3[n.type])}class f0{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const U3=n=>n/100;class m0 extends f0{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:t}=this.options;t&&t.updatedAt!==fn.now()&&this.tick(fn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;WE(e);const{type:t=Oc,repeat:r=0,repeatDelay:s=0,repeatType:a,velocity:c=0}=e;let{keyframes:f}=e;const d=t||Oc;d!==Oc&&typeof f[0]!="number"&&(this.mixKeyframes=vu(U3,FE(f[0],f[1])),f=[0,100]);const m=d({...e,keyframes:f});a==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...f].reverse(),velocity:-c})),m.calculatedDuration===null&&(m.calculatedDuration=d0(m));const{calculatedDuration:g}=m;this.calculatedDuration=g,this.resolvedDuration=g+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=m}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:r,totalDuration:s,mixKeyframes:a,mirroredGenerator:c,resolvedDuration:f,calculatedDuration:d}=this;if(this.startTime===null)return r.next(0);const{delay:m=0,keyframes:g,repeat:y,repeatType:x,repeatDelay:S,type:k,onUpdate:T,finalKeyframe:E}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const N=this.currentTime-m*(this.playbackSpeed>=0?1:-1),D=this.playbackSpeed>=0?N<0:N>s;this.currentTime=Math.max(N,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let P=this.currentTime,G=r;if(y){const C=Math.min(this.currentTime,s)/f;let M=Math.floor(C),L=C%1;!L&&C>=1&&(L=1),L===1&&M--,M=Math.min(M,y+1),!!(M%2)&&(x==="reverse"?(L=1-L,S&&(L-=S/f)):x==="mirror"&&(G=c)),P=Xr(0,1,L)*f}const F=D?{done:!1,value:g[0]}:G.next(P);a&&(F.value=a(F.value));let{done:$}=F;!D&&d!==null&&($=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const A=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&$);return A&&k!==pg&&(F.value=h0(g,this.options,E,this.speed)),T&&T(F.value),A&&this.finish(),F}then(e,t){return this.finished.then(e,t)}get duration(){return Yn(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Yn(e)}get time(){return Yn(this.currentTime)}set time(e){var t;e=Ii(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(t=this.driver)==null||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(fn.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Yn(this.currentTime))}play(){var s,a;if(this.isStopped)return;const{driver:e=E3,startTime:t}=this.options;this.driver||(this.driver=e(c=>this.tick(c))),(a=(s=this.options).onPlay)==null||a.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=t??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(fn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",(t=(e=this.options).onComplete)==null||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(t=(e=this.options).onCancel)==null||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(t=this.driver)==null||t.stop(),e.observe(this)}}function $3(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const bo=n=>n*180/Math.PI,gg=n=>{const e=bo(Math.atan2(n[1],n[0]));return yg(e)},W3={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:gg,rotateZ:gg,skewX:n=>bo(Math.atan(n[1])),skewY:n=>bo(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},yg=n=>(n=n%360,n<0&&(n+=360),n),$w=gg,Ww=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),Hw=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),H3={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Ww,scaleY:Hw,scale:n=>(Ww(n)+Hw(n))/2,rotateX:n=>yg(bo(Math.atan2(n[6],n[5]))),rotateY:n=>yg(bo(Math.atan2(-n[2],n[0]))),rotateZ:$w,rotate:$w,skewX:n=>bo(Math.atan(n[4])),skewY:n=>bo(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function vg(n){return n.includes("scale")?1:0}function xg(n,e){if(!n||n==="none")return vg(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(t)r=H3,s=t;else{const f=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=W3,s=f}if(!s)return vg(e);const a=r[e],c=s[1].split(",").map(q3);return typeof a=="function"?a(c):c[a]}const K3=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return xg(t,e)};function q3(n){return parseFloat(n.trim())}const kl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],bl=new Set(kl),Kw=n=>n===_l||n===fe,G3=new Set(["x","y","z"]),Q3=kl.filter(n=>!G3.has(n));function Y3(n){const e=[];return Q3.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const ws={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>xg(e,"x"),y:(n,{transform:e})=>xg(e,"y")};ws.translateX=ws.x;ws.translateY=ws.y;const To=new Set;let wg=!1,_g=!1,kg=!1;function HE(){if(_g){const n=Array.from(To).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const s=Y3(r);s.length&&(t.set(r,s),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=t.get(r);s&&s.forEach(([a,c])=>{var f;(f=r.getValue(a))==null||f.set(c)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}_g=!1,wg=!1,To.forEach(n=>n.complete(kg)),To.clear()}function KE(){To.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(_g=!0)})}function X3(){kg=!0,KE(),HE(),kg=!1}class p0{constructor(e,t,r,s,a,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=s,this.element=a,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(To.add(this),wg||(wg=!0,st.read(KE),st.resolveKeyframes(HE))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:s}=this;if(e[0]===null){const a=s==null?void 0:s.get(),c=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&t){const f=r.readValue(t,c);f!=null&&(e[0]=f)}e[0]===void 0&&(e[0]=c),s&&a===void 0&&s.set(e[0])}$3(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),To.delete(this)}cancel(){this.state==="scheduled"&&(To.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const J3=n=>n.startsWith("--");function Z3(n,e,t){J3(e)?n.style.setProperty(e,t):n.style[e]=t}const eL=r0(()=>window.ScrollTimeline!==void 0),tL={};function nL(n,e){const t=r0(n);return()=>tL[e]??t()}const qE=nL(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ac=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,qw={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ac([0,.65,.55,1]),circOut:Ac([.55,0,1,.45]),backIn:Ac([.31,.01,.66,-.59]),backOut:Ac([.33,1.53,.69,.99])};function GE(n,e){if(n)return typeof n=="function"?qE()?UE(n,e):"ease-out":jE(n)?Ac(n):Array.isArray(n)?n.map(t=>GE(t,e)||qw.easeOut):qw[n]}function rL(n,e,t,{delay:r=0,duration:s=300,repeat:a=0,repeatType:c="loop",ease:f="easeOut",times:d}={},m=void 0){const g={[e]:t};d&&(g.offset=d);const y=GE(f,s);Array.isArray(y)&&(g.easing=y);const x={delay:r,duration:s,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:a+1,direction:c==="reverse"?"alternate":"normal"};return m&&(x.pseudoElement=m),n.animate(g,x)}function QE(n){return typeof n=="function"&&"applyToOptions"in n}function iL({type:n,...e}){return QE(n)&&qE()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class sL extends f0{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:t,name:r,keyframes:s,pseudoElement:a,allowFlatten:c=!1,finalKeyframe:f,onComplete:d}=e;this.isPseudoElement=!!a,this.allowFlatten=c,this.options=e,n0(typeof e.type!="string");const m=iL(e);this.animation=rL(t,r,s,m,a),m.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const g=h0(s,this.options,f,this.speed);this.updateMotionValue?this.updateMotionValue(g):Z3(t,r,g),this.animation.cancel()}d==null||d(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;(t=(e=this.animation).finish)==null||t.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(t=(e=this.animation).commitStyles)==null||t.call(e)}get duration(){var t,r;const e=((r=(t=this.animation.effect)==null?void 0:t.getComputedTiming)==null?void 0:r.call(t).duration)||0;return Yn(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Yn(e)}get time(){return Yn(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=Ii(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&eL()?(this.animation.timeline=e,Xn):t(this)}}const YE={anticipate:IE,backInOut:TE,circInOut:AE};function oL(n){return n in YE}function aL(n){typeof n.ease=="string"&&oL(n.ease)&&(n.ease=YE[n.ease])}const xp=10;class lL extends sL{constructor(e){aL(e),WE(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:r,onComplete:s,element:a,...c}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const f=new m0({...c,autoplay:!1}),d=Math.max(xp,fn.now()-this.startTime),m=Xr(0,xp,d-xp);t.setWithVelocity(f.sample(Math.max(0,d-m)).value,f.sample(d).value,m),f.stop()}}const Gw=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Ds.test(n)||n==="0")&&!n.startsWith("url("));function cL(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function uL(n,e,t,r){const s=n[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const a=n[n.length-1],c=Gw(s,e),f=Gw(a,e);return!c||!f?!1:cL(n)||(t==="spring"||QE(t))&&r}function bg(n){n.duration=0,n.type="keyframes"}const dL=new Set(["opacity","clipPath","filter","transform"]),hL=r0(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function fL(n){var g;const{motionValue:e,name:t,repeatDelay:r,repeatType:s,damping:a,type:c}=n;if(!(((g=e==null?void 0:e.owner)==null?void 0:g.current)instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:m}=e.owner.getProps();return hL()&&t&&dL.has(t)&&(t!=="transform"||!m)&&!d&&!r&&s!=="mirror"&&a!==0&&c!=="inertia"}const mL=40;class pL extends f0{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:c="loop",keyframes:f,name:d,motionValue:m,element:g,...y}){var k;super(),this.stop=()=>{var T,E;this._animation&&(this._animation.stop(),(T=this.stopTimeline)==null||T.call(this)),(E=this.keyframeResolver)==null||E.cancel()},this.createdAt=fn.now();const x={autoplay:e,delay:t,type:r,repeat:s,repeatDelay:a,repeatType:c,name:d,motionValue:m,element:g,...y},S=(g==null?void 0:g.KeyframeResolver)||p0;this.keyframeResolver=new S(f,(T,E,N)=>this.onKeyframesResolved(T,E,x,!N),d,m,g),(k=this.keyframeResolver)==null||k.scheduleResolve()}onKeyframesResolved(e,t,r,s){var E,N;this.keyframeResolver=void 0;const{name:a,type:c,velocity:f,delay:d,isHandoff:m,onUpdate:g}=r;this.resolvedAt=fn.now(),uL(e,a,c,f)||((Mi.instantAnimations||!d)&&(g==null||g(h0(e,r,t))),e[0]=e[e.length-1],bg(r),r.repeat=0);const x={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>mL?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...r,keyframes:e},S=!m&&fL(x),k=(N=(E=x.motionValue)==null?void 0:E.owner)==null?void 0:N.current,T=S?new lL({...x,element:k}):new m0(x);T.finished.then(()=>{this.notifyFinished()}).catch(Xn),this.pendingTimeline&&(this.stopTimeline=T.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=T}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),X3()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}function XE(n,e,t,r=0,s=1){const a=Array.from(n).sort((m,g)=>m.sortNodePosition(g)).indexOf(e),c=n.size,f=(c-1)*r;return typeof t=="function"?t(a,c):s===1?a*r:f-a*r}const gL=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function yL(n){const e=gL.exec(n);if(!e)return[,];const[,t,r,s]=e;return[`--${t??r}`,s]}function JE(n,e,t=1){const[r,s]=yL(n);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const c=a.trim();return vE(c)?parseFloat(c):c}return a0(s)?JE(s,e,t+1):s}const vL={type:"spring",stiffness:500,damping:25,restSpeed:10},xL=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),wL={type:"keyframes",duration:.8},_L={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},kL=(n,{keyframes:e})=>e.length>2?wL:bl.has(n)?n.startsWith("scale")?xL(e[1]):vL:_L,bL=n=>n!==null;function SL(n,{repeat:e,repeatType:t="loop"},r){const s=n.filter(bL),a=e&&t!=="loop"&&e%2===1?0:s.length-1;return s[a]}function g0(n,e){return(n==null?void 0:n[e])??(n==null?void 0:n.default)??n}function EL({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:s,repeat:a,repeatType:c,repeatDelay:f,from:d,elapsed:m,...g}){return!!Object.keys(g).length}const y0=(n,e,t,r={},s,a)=>c=>{const f=g0(r,n)||{},d=f.delay||r.delay||0;let{elapsed:m=0}=r;m=m-Ii(d);const g={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...f,delay:-m,onUpdate:x=>{e.set(x),f.onUpdate&&f.onUpdate(x)},onComplete:()=>{c(),f.onComplete&&f.onComplete()},name:n,motionValue:e,element:a?void 0:s};EL(f)||Object.assign(g,kL(n,g)),g.duration&&(g.duration=Ii(g.duration)),g.repeatDelay&&(g.repeatDelay=Ii(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let y=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(bg(g),g.delay===0&&(y=!0)),(Mi.instantAnimations||Mi.skipAnimations)&&(y=!0,bg(g),g.delay=0),g.allowFlatten=!f.type&&!f.ease,y&&!a&&e.get()!==void 0){const x=SL(g.keyframes,f);if(x!==void 0){st.update(()=>{g.onUpdate(x),g.onComplete()});return}}return f.isSync?new m0(g):new pL(g)};function Qw(n){const e=[{},{}];return n==null||n.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function v0(n,e,t,r){if(typeof e=="function"){const[s,a]=Qw(r);e=e(t!==void 0?t:n.custom,s,a)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[s,a]=Qw(r);e=e(t!==void 0?t:n.custom,s,a)}return e}function Ka(n,e,t){const r=n.getProps();return v0(r,e,t!==void 0?t:r.custom,n)}const ZE=new Set(["width","height","top","left","right","bottom",...kl]),Yw=30,TL=n=>!isNaN(parseFloat(n));class IL{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var a;const s=fn.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((a=this.events.change)==null||a.notify(this.current),this.dependents))for(const c of this.dependents)c.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=fn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=TL(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new i0);const r=this.events[e].add(t);return e==="change"?()=>{r(),st.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=fn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Yw)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,Yw);return _E(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;(e=this.dependents)==null||e.clear(),(t=this.events.destroy)==null||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function il(n,e){return new IL(n,e)}const Sg=n=>Array.isArray(n);function CL(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,il(t))}function AL(n){return Sg(n)?n[n.length-1]||0:n}function RL(n,e){const t=Ka(n,e);let{transitionEnd:r={},transition:s={},...a}=t||{};a={...a,...r};for(const c in a){const f=AL(a[c]);CL(n,c,f)}}const an=n=>!!(n&&n.getVelocity);function jL(n){return!!(an(n)&&n.add)}function Eg(n,e){const t=n.getValue("willChange");if(jL(t))return t.add(e);if(!t&&Mi.WillChange){const r=new Mi.WillChange("auto");n.addValue("willChange",r),r.add(e)}}function x0(n){return n.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const PL="framerAppearId",e2="data-"+x0(PL);function t2(n){return n.props[e2]}function ML({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function n2(n,e,{delay:t=0,transitionOverride:r,type:s}={}){let{transition:a=n.getDefaultTransition(),transitionEnd:c,...f}=e;r&&(a=r);const d=[],m=s&&n.animationState&&n.animationState.getState()[s];for(const g in f){const y=n.getValue(g,n.latestValues[g]??null),x=f[g];if(x===void 0||m&&ML(m,g))continue;const S={delay:t,...g0(a||{},g)},k=y.get();if(k!==void 0&&!y.isAnimating&&!Array.isArray(x)&&x===k&&!S.velocity)continue;let T=!1;if(window.MotionHandoffAnimation){const N=t2(n);if(N){const D=window.MotionHandoffAnimation(N,g,st);D!==null&&(S.startTime=D,T=!0)}}Eg(n,g),y.start(y0(g,y,x,n.shouldReduceMotion&&ZE.has(g)?{type:!1}:S,n,T));const E=y.animation;E&&d.push(E)}return c&&Promise.all(d).then(()=>{st.update(()=>{c&&RL(n,c)})}),d}function Tg(n,e,t={}){var d;const r=Ka(n,e,t.type==="exit"?(d=n.presenceContext)==null?void 0:d.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(s=t.transitionOverride);const a=r?()=>Promise.all(n2(n,r,t)):()=>Promise.resolve(),c=n.variantChildren&&n.variantChildren.size?(m=0)=>{const{delayChildren:g=0,staggerChildren:y,staggerDirection:x}=s;return NL(n,e,m,g,y,x,t)}:()=>Promise.resolve(),{when:f}=s;if(f){const[m,g]=f==="beforeChildren"?[a,c]:[c,a];return m().then(()=>g())}else return Promise.all([a(),c(t.delay)])}function NL(n,e,t=0,r=0,s=0,a=1,c){const f=[];for(const d of n.variantChildren)d.notify("AnimationStart",e),f.push(Tg(d,e,{...c,delay:t+(typeof r=="function"?0:r)+XE(n.variantChildren,d,r,s,a)}).then(()=>d.notify("AnimationComplete",e)));return Promise.all(f)}function DL(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(a=>Tg(n,a,t));r=Promise.all(s)}else if(typeof e=="string")r=Tg(n,e,t);else{const s=typeof e=="function"?Ka(n,e,t.custom):e;r=Promise.all(n2(n,s,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}const VL={test:n=>n==="auto",parse:n=>n},r2=n=>e=>e.test(n),i2=[_l,fe,qr,ms,c3,l3,VL],Xw=n=>i2.find(r2(n));function LL(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||wE(n):!0}const OL=new Set(["brightness","contrast","saturate","opacity"]);function BL(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(l0)||[];if(!r)return n;const s=t.replace(r,"");let a=OL.has(e)?1:0;return r!==t&&(a*=100),e+"("+a+s+")"}const zL=/\b([a-z-]*)\(.*?\)/gu,Ig={...Ds,getAnimatableNone:n=>{const e=n.match(zL);return e?e.map(BL).join(" "):n}},Jw={..._l,transform:Math.round},FL={rotate:ms,rotateX:ms,rotateY:ms,rotateZ:ms,scale:Yd,scaleX:Yd,scaleY:Yd,scaleZ:Yd,skew:ms,skewX:ms,skewY:ms,distance:fe,translateX:fe,translateY:fe,translateZ:fe,x:fe,y:fe,z:fe,perspective:fe,transformPerspective:fe,opacity:eu,originX:Ow,originY:Ow,originZ:fe},w0={borderWidth:fe,borderTopWidth:fe,borderRightWidth:fe,borderBottomWidth:fe,borderLeftWidth:fe,borderRadius:fe,radius:fe,borderTopLeftRadius:fe,borderTopRightRadius:fe,borderBottomRightRadius:fe,borderBottomLeftRadius:fe,width:fe,maxWidth:fe,height:fe,maxHeight:fe,top:fe,right:fe,bottom:fe,left:fe,inset:fe,insetBlock:fe,insetBlockStart:fe,insetBlockEnd:fe,insetInline:fe,insetInlineStart:fe,insetInlineEnd:fe,padding:fe,paddingTop:fe,paddingRight:fe,paddingBottom:fe,paddingLeft:fe,paddingBlock:fe,paddingBlockStart:fe,paddingBlockEnd:fe,paddingInline:fe,paddingInlineStart:fe,paddingInlineEnd:fe,margin:fe,marginTop:fe,marginRight:fe,marginBottom:fe,marginLeft:fe,marginBlock:fe,marginBlockStart:fe,marginBlockEnd:fe,marginInline:fe,marginInlineStart:fe,marginInlineEnd:fe,backgroundPositionX:fe,backgroundPositionY:fe,...FL,zIndex:Jw,fillOpacity:eu,strokeOpacity:eu,numOctaves:Jw},UL={...w0,color:It,backgroundColor:It,outlineColor:It,fill:It,stroke:It,borderColor:It,borderTopColor:It,borderRightColor:It,borderBottomColor:It,borderLeftColor:It,filter:Ig,WebkitFilter:Ig},s2=n=>UL[n];function o2(n,e){let t=s2(n);return t!==Ig&&(t=Ds),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const $L=new Set(["auto","none","0"]);function WL(n,e,t){let r=0,s;for(;r<n.length&&!s;){const a=n[r];typeof a=="string"&&!$L.has(a)&&tu(a).values.length&&(s=n[r]),r++}if(s&&t)for(const a of e)n[a]=o2(t,s)}class HL extends p0{constructor(e,t,r,s,a){super(e,t,r,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let g=0;g<e.length;g++){let y=e[g];if(typeof y=="string"&&(y=y.trim(),a0(y))){const x=JE(y,t.current);x!==void 0&&(e[g]=x),g===e.length-1&&(this.finalKeyframe=y)}}if(this.resolveNoneKeyframes(),!ZE.has(r)||e.length!==2)return;const[s,a]=e,c=Xw(s),f=Xw(a),d=Lw(s),m=Lw(a);if(d!==m&&ws[r]){this.needsMeasurement=!0;return}if(c!==f)if(Kw(c)&&Kw(f))for(let g=0;g<e.length;g++){const y=e[g];typeof y=="string"&&(e[g]=parseFloat(y))}else ws[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||LL(e[s]))&&r.push(s);r.length&&WL(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ws[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const s=t[t.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var f;const{element:e,name:t,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(t);s&&s.jump(this.measuredOrigin,!1);const a=r.length-1,c=r[a];r[a]=ws[t](e.measureViewportBox(),window.getComputedStyle(e.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),(f=this.removedTransforms)!=null&&f.length&&this.removedTransforms.forEach(([d,m])=>{e.getValue(d).set(m)}),this.resolveNoneKeyframes()}}function KL(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let r=document;const s=(t==null?void 0:t[n])??r.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n)}const a2=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function l2(n){return xE(n)&&"offsetHeight"in n}const{schedule:_0}=PE(queueMicrotask,!1),fr={x:!1,y:!1};function c2(){return fr.x||fr.y}function qL(n){return n==="x"||n==="y"?fr[n]?null:(fr[n]=!0,()=>{fr[n]=!1}):fr.x||fr.y?null:(fr.x=fr.y=!0,()=>{fr.x=fr.y=!1})}function u2(n,e){const t=KL(n),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[t,s,()=>r.abort()]}function Zw(n){return!(n.pointerType==="touch"||c2())}function GL(n,e,t={}){const[r,s,a]=u2(n,t),c=f=>{if(!Zw(f))return;const{target:d}=f,m=e(d,f);if(typeof m!="function"||!d)return;const g=y=>{Zw(y)&&(m(y),d.removeEventListener("pointerleave",g))};d.addEventListener("pointerleave",g,s)};return r.forEach(f=>{f.addEventListener("pointerenter",c,s)}),a}const d2=(n,e)=>e?n===e?!0:d2(n,e.parentElement):!1,k0=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,QL=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function h2(n){return QL.has(n.tagName)||n.isContentEditable===!0}const fh=new WeakSet;function e_(n){return e=>{e.key==="Enter"&&n(e)}}function wp(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const YL=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=e_(()=>{if(fh.has(t))return;wp(t,"down");const s=e_(()=>{wp(t,"up")}),a=()=>wp(t,"cancel");t.addEventListener("keyup",s,e),t.addEventListener("blur",a,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function t_(n){return k0(n)&&!c2()}function XL(n,e,t={}){const[r,s,a]=u2(n,t),c=f=>{const d=f.currentTarget;if(!t_(f))return;fh.add(d);const m=e(d,f),g=(S,k)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",x),fh.has(d)&&fh.delete(d),t_(S)&&typeof m=="function"&&m(S,{success:k})},y=S=>{g(S,d===window||d===document||t.useGlobalTarget||d2(d,S.target))},x=S=>{g(S,!1)};window.addEventListener("pointerup",y,s),window.addEventListener("pointercancel",x,s)};return r.forEach(f=>{(t.useGlobalTarget?window:f).addEventListener("pointerdown",c,s),l2(f)&&(f.addEventListener("focus",m=>YL(m,s)),!h2(f)&&!f.hasAttribute("tabindex")&&(f.tabIndex=0))}),a}function f2(n){return xE(n)&&"ownerSVGElement"in n}function JL(n){return f2(n)&&n.tagName==="svg"}const ZL=[...i2,It,Ds],e6=n=>ZL.find(r2(n)),n_=()=>({translate:0,scale:1,origin:0,originPoint:0}),Da=()=>({x:n_(),y:n_()}),r_=()=>({min:0,max:0}),Mt=()=>({x:r_(),y:r_()}),Cg={current:null},m2={current:!1},t6=typeof window<"u";function n6(){if(m2.current=!0,!!t6)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>Cg.current=n.matches;n.addEventListener("change",e),e()}else Cg.current=!1}const r6=new WeakMap;function _f(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function nu(n){return typeof n=="string"||Array.isArray(n)}const b0=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],S0=["initial",...b0];function kf(n){return _f(n.animate)||S0.some(e=>nu(n[e]))}function p2(n){return!!(kf(n)||n.variants)}function i6(n,e,t){for(const r in e){const s=e[r],a=t[r];if(an(s))n.addValue(r,s);else if(an(a))n.addValue(r,il(s,{owner:n}));else if(a!==s)if(n.hasValue(r)){const c=n.getValue(r);c.liveStyle===!0?c.jump(s):c.hasAnimated||c.set(s)}else{const c=n.getStaticValue(r);n.addValue(r,il(c!==void 0?c:s,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const i_=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let Fh={};function g2(n){Fh=n}function s6(){return Fh}class o6{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:a,visualState:c},f={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=p0,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=fn.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,st.render(this.render,!1,!0))};const{latestValues:d,renderState:m}=c;this.latestValues=d,this.baseTarget={...d},this.initialValues=t.initial?{...d}:{},this.renderState=m,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=f,this.blockInitialAnimation=!!a,this.isControllingVariants=kf(t),this.isVariantNode=p2(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...y}=this.scrapeMotionValuesFromProps(t,{},this);for(const x in y){const S=y[x];d[x]!==void 0&&an(S)&&S.set(d[x])}}mount(e){var t;this.current=e,r6.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,s)=>this.bindToMotionValue(s,r)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(m2.current||n6(),this.shouldReduceMotion=Cg.current),(t=this.parent)==null||t.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),Ns(this.notifyUpdate),Ns(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=bl.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=t.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&st.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;typeof window<"u"&&window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{s(),a&&a(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Fh){const t=Fh[e];if(!t)continue;const{isEnabled:r,Feature:s}=t;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Mt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<i_.length;r++){const s=i_[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,c=e[a];c&&(this.propEventSubscriptions[s]=this.on(s,c))}this.prevMotionValues=i6(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=il(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(vE(r)||wE(r))?r=parseFloat(r):!e6(r)&&Ds.test(t)&&(r=o2(e,t)),this.setBaseTarget(e,an(r)?r.get():r)),an(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var a;const{initial:t}=this.props;let r;if(typeof t=="string"||typeof t=="object"){const c=v0(this.props,t,(a=this.presenceContext)==null?void 0:a.custom);c&&(r=c[e])}if(t&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!an(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new i0),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){_0.render(this.render)}}class y2 extends o6{constructor(){super(...arguments),this.KeyframeResolver=HL}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){const r=e.style;return r?r[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;an(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}class Fs{constructor(e){this.isMounted=!1,this.node=e}update(){}}function v2({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function a6({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function l6(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function _p(n){return n===void 0||n===1}function Ag({scale:n,scaleX:e,scaleY:t}){return!_p(n)||!_p(e)||!_p(t)}function xo(n){return Ag(n)||x2(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function x2(n){return s_(n.x)||s_(n.y)}function s_(n){return n&&n!=="0%"}function Uh(n,e,t){const r=n-t,s=e*r;return t+s}function o_(n,e,t,r,s){return s!==void 0&&(n=Uh(n,s,r)),Uh(n,t,r)+e}function Rg(n,e=0,t=1,r,s){n.min=o_(n.min,e,t,r,s),n.max=o_(n.max,e,t,r,s)}function w2(n,{x:e,y:t}){Rg(n.x,e.translate,e.scale,e.originPoint),Rg(n.y,t.translate,t.scale,t.originPoint)}const a_=.999999999999,l_=1.0000000000001;function c6(n,e,t,r=!1){const s=t.length;if(!s)return;e.x=e.y=1;let a,c;for(let f=0;f<s;f++){a=t[f],c=a.projectionDelta;const{visualElement:d}=a.options;d&&d.props.style&&d.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&La(n,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,w2(n,c)),r&&xo(a.latestValues)&&La(n,a.latestValues))}e.x<l_&&e.x>a_&&(e.x=1),e.y<l_&&e.y>a_&&(e.y=1)}function Va(n,e){n.min=n.min+e,n.max=n.max+e}function c_(n,e,t,r,s=.5){const a=dt(n.min,n.max,s);Rg(n,e,t,a,r)}function La(n,e){c_(n.x,e.x,e.scaleX,e.scale,e.originX),c_(n.y,e.y,e.scaleY,e.scale,e.originY)}function _2(n,e){return v2(l6(n.getBoundingClientRect(),e))}function u6(n,e,t){const r=_2(n,t),{scroll:s}=e;return s&&(Va(r.x,s.offset.x),Va(r.y,s.offset.y)),r}const d6={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},h6=kl.length;function f6(n,e,t){let r="",s=!0;for(let a=0;a<h6;a++){const c=kl[a],f=n[c];if(f===void 0)continue;let d=!0;if(typeof f=="number"?d=f===(c.startsWith("scale")?1:0):d=parseFloat(f)===0,!d||t){const m=a2(f,w0[c]);if(!d){s=!1;const g=d6[c]||c;r+=`${g}(${m}) `}t&&(e[c]=m)}}return r=r.trim(),t?r=t(e,s?"":r):s&&(r="none"),r}function E0(n,e,t){const{style:r,vars:s,transformOrigin:a}=n;let c=!1,f=!1;for(const d in e){const m=e[d];if(bl.has(d)){c=!0;continue}else if(NE(d)){s[d]=m;continue}else{const g=a2(m,w0[d]);d.startsWith("origin")?(f=!0,a[d]=g):r[d]=g}}if(e.transform||(c||t?r.transform=f6(e,n.transform,t):r.transform&&(r.transform="none")),f){const{originX:d="50%",originY:m="50%",originZ:g=0}=a;r.transformOrigin=`${d} ${m} ${g}`}}function k2(n,{style:e,vars:t},r,s){const a=n.style;let c;for(c in e)a[c]=e[c];s==null||s.applyProjectionStyles(a,r);for(c in t)a.setProperty(c,t[c])}function u_(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const _c={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(fe.test(n))n=parseFloat(n);else return n;const t=u_(n,e.target.x),r=u_(n,e.target.y);return`${t}% ${r}%`}},m6={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,s=Ds.parse(n);if(s.length>5)return r;const a=Ds.createTransformer(n),c=typeof s[0]!="number"?1:0,f=t.x.scale*e.x,d=t.y.scale*e.y;s[0+c]/=f,s[1+c]/=d;const m=dt(f,d,.5);return typeof s[2+c]=="number"&&(s[2+c]/=m),typeof s[3+c]=="number"&&(s[3+c]/=m),a(s)}},jg={borderRadius:{..._c,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:_c,borderTopRightRadius:_c,borderBottomLeftRadius:_c,borderBottomRightRadius:_c,boxShadow:m6};function b2(n,{layout:e,layoutId:t}){return bl.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!jg[n]||n==="opacity")}function T0(n,e,t){var c;const r=n.style,s=e==null?void 0:e.style,a={};if(!r)return a;for(const f in r)(an(r[f])||s&&an(s[f])||b2(f,n)||((c=t==null?void 0:t.getValue(f))==null?void 0:c.liveStyle)!==void 0)&&(a[f]=r[f]);return a}function p6(n){return window.getComputedStyle(n)}class g6 extends y2{constructor(){super(...arguments),this.type="html",this.renderInstance=k2}readValueFromInstance(e,t){var r;if(bl.has(t))return(r=this.projection)!=null&&r.isProjecting?vg(t):K3(e,t);{const s=p6(e),a=(NE(t)?s.getPropertyValue(t):s[t])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:t}){return _2(e,t)}build(e,t,r){E0(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return T0(e,t,r)}}const y6={offset:"stroke-dashoffset",array:"stroke-dasharray"},v6={offset:"strokeDashoffset",array:"strokeDasharray"};function x6(n,e,t=1,r=0,s=!0){n.pathLength=1;const a=s?y6:v6;n[a.offset]=fe.transform(-r);const c=fe.transform(e),f=fe.transform(t);n[a.array]=`${c} ${f}`}const w6=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function S2(n,{attrX:e,attrY:t,attrScale:r,pathLength:s,pathSpacing:a=1,pathOffset:c=0,...f},d,m,g){if(E0(n,f,m),d){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:y,style:x}=n;y.transform&&(x.transform=y.transform,delete y.transform),(x.transform||y.transformOrigin)&&(x.transformOrigin=y.transformOrigin??"50% 50%",delete y.transformOrigin),x.transform&&(x.transformBox=(g==null?void 0:g.transformBox)??"fill-box",delete y.transformBox);for(const S of w6)y[S]!==void 0&&(x[S]=y[S],delete y[S]);e!==void 0&&(y.x=e),t!==void 0&&(y.y=t),r!==void 0&&(y.scale=r),s!==void 0&&x6(y,s,a,c,!1)}const E2=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),T2=n=>typeof n=="string"&&n.toLowerCase()==="svg";function _6(n,e,t,r){k2(n,e,void 0,r);for(const s in e.attrs)n.setAttribute(E2.has(s)?s:x0(s),e.attrs[s])}function I2(n,e,t){const r=T0(n,e,t);for(const s in n)if(an(n[s])||an(e[s])){const a=kl.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[a]=n[s]}return r}class k6 extends y2{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Mt}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(bl.has(t)){const r=s2(t);return r&&r.default||0}return t=E2.has(t)?t:x0(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return I2(e,t,r)}build(e,t,r){S2(e,t,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,t,r,s){_6(e,t,r,s)}mount(e){this.isSVGTag=T2(e.tagName),super.mount(e)}}const b6=S0.length;function C2(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?C2(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<b6;t++){const r=S0[t],s=n.props[r];(nu(s)||s===!1)&&(e[r]=s)}return e}function A2(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}const S6=[...b0].reverse(),E6=b0.length;function T6(n){return e=>Promise.all(e.map(({animation:t,options:r})=>DL(n,t,r)))}function I6(n){let e=T6(n),t=d_(),r=!0;const s=d=>(m,g)=>{var x;const y=Ka(n,g,d==="exit"?(x=n.presenceContext)==null?void 0:x.custom:void 0);if(y){const{transition:S,transitionEnd:k,...T}=y;m={...m,...T,...k}}return m};function a(d){e=d(n)}function c(d){const{props:m}=n,g=C2(n.parent)||{},y=[],x=new Set;let S={},k=1/0;for(let E=0;E<E6;E++){const N=S6[E],D=t[N],P=m[N]!==void 0?m[N]:g[N],G=nu(P),F=N===d?D.isActive:null;F===!1&&(k=E);let $=P===g[N]&&P!==m[N]&&G;if($&&r&&n.manuallyAnimateOnMount&&($=!1),D.protectedKeys={...S},!D.isActive&&F===null||!P&&!D.prevProp||_f(P)||typeof P=="boolean")continue;const A=C6(D.prevProp,P);let C=A||N===d&&D.isActive&&!$&&G||E>k&&G,M=!1;const L=Array.isArray(P)?P:[P];let B=L.reduce(s(N),{});F===!1&&(B={});const{prevResolvedValues:W={}}=D,O={...W,...B},Me=Ee=>{C=!0,x.has(Ee)&&(M=!0,x.delete(Ee)),D.needsAnimating[Ee]=!0;const ie=n.getValue(Ee);ie&&(ie.liveStyle=!1)};for(const Ee in O){const ie=B[Ee],pe=W[Ee];if(S.hasOwnProperty(Ee))continue;let le=!1;Sg(ie)&&Sg(pe)?le=!A2(ie,pe):le=ie!==pe,le?ie!=null?Me(Ee):x.add(Ee):ie!==void 0&&x.has(Ee)?Me(Ee):D.protectedKeys[Ee]=!0}D.prevProp=P,D.prevResolvedValues=B,D.isActive&&(S={...S,...B}),r&&n.blockInitialAnimation&&(C=!1);const He=$&&A;C&&(!He||M)&&y.push(...L.map(Ee=>{const ie={type:N};if(typeof Ee=="string"&&r&&!He&&n.manuallyAnimateOnMount&&n.parent){const{parent:pe}=n,le=Ka(pe,Ee);if(pe.enteringChildren&&le){const{delayChildren:H}=le.transition||{};ie.delay=XE(pe.enteringChildren,n,H)}}return{animation:Ee,options:ie}}))}if(x.size){const E={};if(typeof m.initial!="boolean"){const N=Ka(n,Array.isArray(m.initial)?m.initial[0]:m.initial);N&&N.transition&&(E.transition=N.transition)}x.forEach(N=>{const D=n.getBaseTarget(N),P=n.getValue(N);P&&(P.liveStyle=!0),E[N]=D??null}),y.push({animation:E})}let T=!!y.length;return r&&(m.initial===!1||m.initial===m.animate)&&!n.manuallyAnimateOnMount&&(T=!1),r=!1,T?e(y):Promise.resolve()}function f(d,m){var y;if(t[d].isActive===m)return Promise.resolve();(y=n.variantChildren)==null||y.forEach(x=>{var S;return(S=x.animationState)==null?void 0:S.setActive(d,m)}),t[d].isActive=m;const g=c(d);for(const x in t)t[x].protectedKeys={};return g}return{animateChanges:c,setActive:f,setAnimateFunction:a,getState:()=>t,reset:()=>{t=d_()}}}function C6(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!A2(e,n):!1}function yo(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function d_(){return{animate:yo(!0),whileInView:yo(),whileHover:yo(),whileTap:yo(),whileDrag:yo(),whileFocus:yo(),exit:yo()}}function h_(n,e){n.min=e.min,n.max=e.max}function hr(n,e){h_(n.x,e.x),h_(n.y,e.y)}function f_(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}const R2=1e-4,A6=1-R2,R6=1+R2,j2=.01,j6=0-j2,P6=0+j2;function mn(n){return n.max-n.min}function M6(n,e,t){return Math.abs(n-e)<=t}function m_(n,e,t,r=.5){n.origin=r,n.originPoint=dt(e.min,e.max,n.origin),n.scale=mn(t)/mn(e),n.translate=dt(t.min,t.max,n.origin)-n.originPoint,(n.scale>=A6&&n.scale<=R6||isNaN(n.scale))&&(n.scale=1),(n.translate>=j6&&n.translate<=P6||isNaN(n.translate))&&(n.translate=0)}function Bc(n,e,t,r){m_(n.x,e.x,t.x,r?r.originX:void 0),m_(n.y,e.y,t.y,r?r.originY:void 0)}function p_(n,e,t){n.min=t.min+e.min,n.max=n.min+mn(e)}function N6(n,e,t){p_(n.x,e.x,t.x),p_(n.y,e.y,t.y)}function g_(n,e,t){n.min=e.min-t.min,n.max=n.min+mn(e)}function $h(n,e,t){g_(n.x,e.x,t.x),g_(n.y,e.y,t.y)}function y_(n,e,t,r,s){return n-=e,n=Uh(n,1/t,r),s!==void 0&&(n=Uh(n,1/s,r)),n}function D6(n,e=0,t=1,r=.5,s,a=n,c=n){if(qr.test(e)&&(e=parseFloat(e),e=dt(c.min,c.max,e/100)-c.min),typeof e!="number")return;let f=dt(a.min,a.max,r);n===a&&(f-=e),n.min=y_(n.min,e,t,f,s),n.max=y_(n.max,e,t,f,s)}function v_(n,e,[t,r,s],a,c){D6(n,e[t],e[r],e[s],e.scale,a,c)}const V6=["x","scaleX","originX"],L6=["y","scaleY","originY"];function x_(n,e,t,r){v_(n.x,e,V6,t?t.x:void 0,r?r.x:void 0),v_(n.y,e,L6,t?t.y:void 0,r?r.y:void 0)}function w_(n){return n.translate===0&&n.scale===1}function P2(n){return w_(n.x)&&w_(n.y)}function __(n,e){return n.min===e.min&&n.max===e.max}function O6(n,e){return __(n.x,e.x)&&__(n.y,e.y)}function k_(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function M2(n,e){return k_(n.x,e.x)&&k_(n.y,e.y)}function b_(n){return mn(n.x)/mn(n.y)}function S_(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}function Gn(n){return[n("x"),n("y")]}function B6(n,e,t){let r="";const s=n.x.translate/e.x,a=n.y.translate/e.y,c=(t==null?void 0:t.z)||0;if((s||a||c)&&(r=`translate3d(${s}px, ${a}px, ${c}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:m,rotate:g,rotateX:y,rotateY:x,skewX:S,skewY:k}=t;m&&(r=`perspective(${m}px) ${r}`),g&&(r+=`rotate(${g}deg) `),y&&(r+=`rotateX(${y}deg) `),x&&(r+=`rotateY(${x}deg) `),S&&(r+=`skewX(${S}deg) `),k&&(r+=`skewY(${k}deg) `)}const f=n.x.scale*e.x,d=n.y.scale*e.y;return(f!==1||d!==1)&&(r+=`scale(${f}, ${d})`),r||"none"}const N2=["TopLeft","TopRight","BottomLeft","BottomRight"],z6=N2.length,E_=n=>typeof n=="string"?parseFloat(n):n,T_=n=>typeof n=="number"||fe.test(n);function F6(n,e,t,r,s,a){s?(n.opacity=dt(0,t.opacity??1,U6(r)),n.opacityExit=dt(e.opacity??1,0,$6(r))):a&&(n.opacity=dt(e.opacity??1,t.opacity??1,r));for(let c=0;c<z6;c++){const f=`border${N2[c]}Radius`;let d=I_(e,f),m=I_(t,f);if(d===void 0&&m===void 0)continue;d||(d=0),m||(m=0),d===0||m===0||T_(d)===T_(m)?(n[f]=Math.max(dt(E_(d),E_(m),r),0),(qr.test(m)||qr.test(d))&&(n[f]+="%")):n[f]=m}(e.rotate||t.rotate)&&(n.rotate=dt(e.rotate||0,t.rotate||0,r))}function I_(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const U6=D2(0,.5,CE),$6=D2(.5,.95,Xn);function D2(n,e,t){return r=>r<n?0:r>e?1:t(Zc(n,e,r))}function W6(n,e,t){const r=an(n)?n:il(n);return r.start(y0("",r,e,t)),r.animation}function ru(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}const H6=(n,e)=>n.depth-e.depth;class K6{constructor(){this.children=[],this.isDirty=!1}add(e){e0(this.children,e),this.isDirty=!0}remove(e){t0(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(H6),this.isDirty=!1,this.children.forEach(e)}}function q6(n,e){const t=fn.now(),r=({timestamp:s})=>{const a=s-t;a>=e&&(Ns(r),n(a-e))};return st.setup(r,!0),()=>Ns(r)}function mh(n){return an(n)?n.get():n}class G6{constructor(){this.members=[]}add(e){e0(this.members,e),e.scheduleRender()}remove(e){if(t0(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(s=>e===s);if(t===0)return!1;let r;for(let s=t;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const ph={hasAnimatedSinceResize:!0,hasEverUpdated:!1},kp=["","X","Y","Z"],Q6=1e3;let Y6=0;function bp(n,e,t,r){const{latestValues:s}=e;s[n]&&(t[n]=s[n],e.setStaticValue(n,0),r&&(r[n]=0))}function V2(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=t2(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:s,layoutId:a}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",st,!(s||a))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&V2(r)}function L2({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(c={},f=e==null?void 0:e()){this.id=Y6++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Z6),this.nodes.forEach(rO),this.nodes.forEach(iO),this.nodes.forEach(eO)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=f?f.root||f:this,this.path=f?[...f.path,f]:[],this.parent=f,this.depth=f?f.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new K6)}addEventListener(c,f){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new i0),this.eventHandlers.get(c).add(f)}notifyListeners(c,...f){const d=this.eventHandlers.get(c);d&&d.notify(...f)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=f2(c)&&!JL(c),this.instance=c;const{layoutId:f,layout:d,visualElement:m}=this.options;if(m&&!m.current&&m.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||f)&&(this.isLayoutDirty=!0),n){let g,y=0;const x=()=>this.root.updateBlockedByResize=!1;st.read(()=>{y=window.innerWidth}),n(c,()=>{const S=window.innerWidth;S!==y&&(y=S,this.root.updateBlockedByResize=!0,g&&g(),g=q6(x,250),ph.hasAnimatedSinceResize&&(ph.hasAnimatedSinceResize=!1,this.nodes.forEach(R_)))})}f&&this.root.registerSharedNode(f,this),this.options.animate!==!1&&m&&(f||d)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:y,hasRelativeLayoutChanged:x,layout:S})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const k=this.options.transition||m.getDefaultTransition()||cO,{onLayoutAnimationStart:T,onLayoutAnimationComplete:E}=m.getProps(),N=!this.targetLayout||!M2(this.targetLayout,S),D=!y&&x;if(this.options.layoutRoot||this.resumeFrom||D||y&&(N||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const P={...g0(k,"layout"),onPlay:T,onComplete:E};(m.shouldReduceMotion||this.options.layoutRoot)&&(P.delay=0,P.type=!1),this.startAnimation(P),this.setAnimationOrigin(g,D)}else y||R_(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=S})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ns(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(sO),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&V2(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const y=this.path[g];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:f,layout:d}=this.options;if(f===void 0&&!d)return;const m=this.getTransformTemplate();this.prevTransformTemplateValue=m?m(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(C_);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(A_);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(nO),this.nodes.forEach(X6),this.nodes.forEach(J6)):this.nodes.forEach(A_),this.clearAllSnapshots();const f=fn.now();qt.delta=Xr(0,1e3/60,f-qt.timestamp),qt.timestamp=f,qt.isProcessing=!0,mp.update.process(qt),mp.preRender.process(qt),mp.render.process(qt),qt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,_0.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(tO),this.sharedNodes.forEach(oO)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,st.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){st.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!mn(this.snapshot.measuredBox.x)&&!mn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Mt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:f}=this.options;f&&f.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let f=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(f=!1),f&&this.instance){const d=r(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:d,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!s)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,f=this.projectionDelta&&!P2(this.projectionDelta),d=this.getTransformTemplate(),m=d?d(this.latestValues,""):void 0,g=m!==this.prevTransformTemplateValue;c&&this.instance&&(f||xo(this.latestValues)||g)&&(s(this.instance,m),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const f=this.measurePageBox();let d=this.removeElementScroll(f);return c&&(d=this.removeTransform(d)),uO(d),{animationId:this.root.animationId,measuredBox:f,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var m;const{visualElement:c}=this.options;if(!c)return Mt();const f=c.measureViewportBox();if(!(((m=this.scroll)==null?void 0:m.wasRoot)||this.path.some(dO))){const{scroll:g}=this.root;g&&(Va(f.x,g.offset.x),Va(f.y,g.offset.y))}return f}removeElementScroll(c){var d;const f=Mt();if(hr(f,c),(d=this.scroll)!=null&&d.wasRoot)return f;for(let m=0;m<this.path.length;m++){const g=this.path[m],{scroll:y,options:x}=g;g!==this.root&&y&&x.layoutScroll&&(y.wasRoot&&hr(f,c),Va(f.x,y.offset.x),Va(f.y,y.offset.y))}return f}applyTransform(c,f=!1){const d=Mt();hr(d,c);for(let m=0;m<this.path.length;m++){const g=this.path[m];!f&&g.options.layoutScroll&&g.scroll&&g!==g.root&&La(d,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),xo(g.latestValues)&&La(d,g.latestValues)}return xo(this.latestValues)&&La(d,this.latestValues),d}removeTransform(c){const f=Mt();hr(f,c);for(let d=0;d<this.path.length;d++){const m=this.path[d];if(!m.instance||!xo(m.latestValues))continue;Ag(m.latestValues)&&m.updateSnapshot();const g=Mt(),y=m.measurePageBox();hr(g,y),x_(f,m.latestValues,m.snapshot?m.snapshot.layoutBox:void 0,g)}return xo(this.latestValues)&&x_(f,this.latestValues),f}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==qt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){var S;const f=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=f.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=f.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=f.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==f;if(!(c||d&&this.isSharedProjectionDirty||this.isProjectionDirty||(S=this.parent)!=null&&S.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:y}=this.options;if(!this.layout||!(g||y))return;this.resolvedRelativeTargetAt=qt.timestamp;const x=this.getClosestProjectingParent();x&&this.linkedParentVersion!==x.layoutVersion&&!x.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(x&&x.layout?this.createRelativeTarget(x,this.layout.layoutBox,x.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Mt(),this.targetWithTransforms=Mt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),N6(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):hr(this.target,this.layout.layoutBox),w2(this.target,this.targetDelta)):hr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?this.createRelativeTarget(x,this.target,x.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Ag(this.parent.latestValues)||x2(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(c,f,d){this.relativeParent=c,this.linkedParentVersion=c.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Mt(),this.relativeTargetOrigin=Mt(),$h(this.relativeTargetOrigin,f,d),hr(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var k;const c=this.getLead(),f=!!this.resumingFrom||this!==c;let d=!0;if((this.isProjectionDirty||(k=this.parent)!=null&&k.isProjectionDirty)&&(d=!1),f&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===qt.timestamp&&(d=!1),d)return;const{layout:m,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||g))return;hr(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,x=this.treeScale.y;c6(this.layoutCorrected,this.treeScale,this.path,f),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=Mt());const{target:S}=c;if(!S){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(f_(this.prevProjectionDelta.x,this.projectionDelta.x),f_(this.prevProjectionDelta.y,this.projectionDelta.y)),Bc(this.projectionDelta,this.layoutCorrected,S,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==x||!S_(this.projectionDelta.x,this.prevProjectionDelta.x)||!S_(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",S))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){var f;if((f=this.options.visualElement)==null||f.scheduleRender(),c){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Da(),this.projectionDelta=Da(),this.projectionDeltaWithTransform=Da()}setAnimationOrigin(c,f=!1){const d=this.snapshot,m=d?d.latestValues:{},g={...this.latestValues},y=Da();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!f;const x=Mt(),S=d?d.source:void 0,k=this.layout?this.layout.source:void 0,T=S!==k,E=this.getStack(),N=!E||E.members.length<=1,D=!!(T&&!N&&this.options.crossfade===!0&&!this.path.some(lO));this.animationProgress=0;let P;this.mixTargetDelta=G=>{const F=G/1e3;j_(y.x,c.x,F),j_(y.y,c.y,F),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&($h(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),aO(this.relativeTarget,this.relativeTargetOrigin,x,F),P&&O6(this.relativeTarget,P)&&(this.isProjectionDirty=!1),P||(P=Mt()),hr(P,this.relativeTarget)),T&&(this.animationValues=g,F6(g,m,this.latestValues,F,D,N)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=F},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){var f,d,m;this.notifyListeners("animationStart"),(f=this.currentAnimation)==null||f.stop(),(m=(d=this.resumingFrom)==null?void 0:d.currentAnimation)==null||m.stop(),this.pendingAnimation&&(Ns(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=st.update(()=>{ph.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=il(0)),this.currentAnimation=W6(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:g=>{this.mixTargetDelta(g),c.onUpdate&&c.onUpdate(g)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Q6),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:f,target:d,layout:m,latestValues:g}=c;if(!(!f||!d||!m)){if(this!==c&&this.layout&&m&&O2(this.options.animationType,this.layout.layoutBox,m.layoutBox)){d=this.target||Mt();const y=mn(this.layout.layoutBox.x);d.x.min=c.target.x.min,d.x.max=d.x.min+y;const x=mn(this.layout.layoutBox.y);d.y.min=c.target.y.min,d.y.max=d.y.min+x}hr(f,d),La(f,g),Bc(this.projectionDeltaWithTransform,this.layoutCorrected,f,g)}}registerSharedNode(c,f){this.sharedNodes.has(c)||this.sharedNodes.set(c,new G6),this.sharedNodes.get(c).add(f);const m=f.options.initialPromotionConfig;f.promote({transition:m?m.transition:void 0,preserveFollowOpacity:m&&m.shouldPreserveFollowOpacity?m.shouldPreserveFollowOpacity(f):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){var f;const{layoutId:c}=this.options;return c?((f=this.getStack())==null?void 0:f.lead)||this:this}getPrevLead(){var f;const{layoutId:c}=this.options;return c?(f=this.getStack())==null?void 0:f.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:f,preserveFollowOpacity:d}={}){const m=this.getStack();m&&m.promote(this,d),c&&(this.projectionDelta=void 0,this.needsReset=!0),f&&this.setOptions({transition:f})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let f=!1;const{latestValues:d}=c;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(f=!0),!f)return;const m={};d.z&&bp("z",c,m,this.animationValues);for(let g=0;g<kp.length;g++)bp(`rotate${kp[g]}`,c,m,this.animationValues),bp(`skew${kp[g]}`,c,m,this.animationValues);c.render();for(const g in m)c.setStaticValue(g,m[g]),this.animationValues&&(this.animationValues[g]=m[g]);c.scheduleRender()}applyProjectionStyles(c,f){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=mh(f==null?void 0:f.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none";return}const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=mh(f==null?void 0:f.pointerEvents)||""),this.hasProjected&&!xo(this.latestValues)&&(c.transform=d?d({},""):"none",this.hasProjected=!1);return}c.visibility="";const g=m.animationValues||m.latestValues;this.applyTransformsToTarget();let y=B6(this.projectionDeltaWithTransform,this.treeScale,g);d&&(y=d(g,y)),c.transform=y;const{x,y:S}=this.projectionDelta;c.transformOrigin=`${x.origin*100}% ${S.origin*100}% 0`,m.animationValues?c.opacity=m===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:c.opacity=m===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const k in jg){if(g[k]===void 0)continue;const{correct:T,applyTo:E,isCSSVariable:N}=jg[k],D=y==="none"?g[k]:T(g[k],m);if(E){const P=E.length;for(let G=0;G<P;G++)c[E[G]]=D}else N?this.options.visualElement.renderState.vars[k]=D:c[k]=D}this.options.layoutId&&(c.pointerEvents=m===this?mh(f==null?void 0:f.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>{var f;return(f=c.currentAnimation)==null?void 0:f.stop()}),this.root.nodes.forEach(C_),this.root.sharedNodes.clear()}}}function X6(n){n.updateLayout()}function J6(n){var t;const e=((t=n.resumeFrom)==null?void 0:t.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=n.layout,{animationType:a}=n.options,c=e.source!==n.layout.source;a==="size"?Gn(y=>{const x=c?e.measuredBox[y]:e.layoutBox[y],S=mn(x);x.min=r[y].min,x.max=x.min+S}):O2(a,e.layoutBox,r)&&Gn(y=>{const x=c?e.measuredBox[y]:e.layoutBox[y],S=mn(r[y]);x.max=x.min+S,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[y].max=n.relativeTarget[y].min+S)});const f=Da();Bc(f,r,e.layoutBox);const d=Da();c?Bc(d,n.applyTransform(s,!0),e.measuredBox):Bc(d,r,e.layoutBox);const m=!P2(f);let g=!1;if(!n.resumeFrom){const y=n.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:x,layout:S}=y;if(x&&S){const k=Mt();$h(k,e.layoutBox,x.layoutBox);const T=Mt();$h(T,r,S.layoutBox),M2(k,T)||(g=!0),y.options.layoutRoot&&(n.relativeTarget=T,n.relativeTargetOrigin=k,n.relativeParent=y)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:d,layoutDelta:f,hasLayoutChanged:m,hasRelativeLayoutChanged:g})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function Z6(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function eO(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function tO(n){n.clearSnapshot()}function C_(n){n.clearMeasurements()}function A_(n){n.isLayoutDirty=!1}function nO(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function R_(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function rO(n){n.resolveTargetDelta()}function iO(n){n.calcProjection()}function sO(n){n.resetSkewAndRotation()}function oO(n){n.removeLeadSnapshot()}function j_(n,e,t){n.translate=dt(e.translate,0,t),n.scale=dt(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function P_(n,e,t,r){n.min=dt(e.min,t.min,r),n.max=dt(e.max,t.max,r)}function aO(n,e,t,r){P_(n.x,e.x,t.x,r),P_(n.y,e.y,t.y,r)}function lO(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const cO={duration:.45,ease:[.4,0,.1,1]},M_=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),N_=M_("applewebkit/")&&!M_("chrome/")?Math.round:Xn;function D_(n){n.min=N_(n.min),n.max=N_(n.max)}function uO(n){D_(n.x),D_(n.y)}function O2(n,e,t){return n==="position"||n==="preserve-aspect"&&!M6(b_(e),b_(t),.2)}function dO(n){var e;return n!==n.root&&((e=n.scroll)==null?void 0:e.wasRoot)}const hO=L2({attachResizeListener:(n,e)=>ru(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Sp={current:void 0},B2=L2({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!Sp.current){const n=new hO({});n.mount(window),n.setOptions({layoutScroll:!0}),Sp.current=n}return Sp.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),I0=R.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function V_(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function fO(...n){return e=>{let t=!1;const r=n.map(s=>{const a=V_(s,e);return!t&&typeof a=="function"&&(t=!0),a});if(t)return()=>{for(let s=0;s<r.length;s++){const a=r[s];typeof a=="function"?a():V_(n[s],null)}}}}function mO(...n){return R.useCallback(fO(...n),n)}class pO extends R.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=t.offsetParent,s=l2(r)&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=t.offsetHeight||0,a.width=t.offsetWidth||0,a.top=t.offsetTop,a.left=t.offsetLeft,a.right=s-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function gO({children:n,isPresent:e,anchorX:t,root:r}){var g;const s=R.useId(),a=R.useRef(null),c=R.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:f}=R.useContext(I0),d=((g=n.props)==null?void 0:g.ref)??(n==null?void 0:n.ref),m=mO(a,d);return R.useInsertionEffect(()=>{const{width:y,height:x,top:S,left:k,right:T}=c.current;if(e||!a.current||!y||!x)return;const E=t==="left"?`left: ${k}`:`right: ${T}`;a.current.dataset.motionPopId=s;const N=document.createElement("style");f&&(N.nonce=f);const D=r??document.head;return D.appendChild(N),N.sheet&&N.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${y}px !important;
            height: ${x}px !important;
            ${E}px !important;
            top: ${S}px !important;
          }
        `),()=>{D.contains(N)&&D.removeChild(N)}},[e]),l.jsx(pO,{isPresent:e,childRef:a,sizeRef:c,children:R.cloneElement(n,{ref:m})})}const yO=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:s,presenceAffectsLayout:a,mode:c,anchorX:f,root:d})=>{const m=Zy(vO),g=R.useId();let y=!0,x=R.useMemo(()=>(y=!1,{id:g,initial:e,isPresent:t,custom:s,onExitComplete:S=>{m.set(S,!0);for(const k of m.values())if(!k)return;r&&r()},register:S=>(m.set(S,!1),()=>m.delete(S))}),[t,m,r]);return a&&y&&(x={...x}),R.useMemo(()=>{m.forEach((S,k)=>m.set(k,!1))},[t]),R.useEffect(()=>{!t&&!m.size&&r&&r()},[t]),c==="popLayout"&&(n=l.jsx(gO,{isPresent:t,anchorX:f,root:d,children:n})),l.jsx(wf.Provider,{value:x,children:n})};function vO(){return new Map}function z2(n=!0){const e=R.useContext(wf);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:s}=e,a=R.useId();R.useEffect(()=>{if(n)return s(a)},[n]);const c=R.useCallback(()=>n&&r&&r(a),[a,r,n]);return!t&&r?[!1,c]:[!0]}const Xd=n=>n.key||"";function L_(n){const e=[];return R.Children.forEach(n,t=>{R.isValidElement(t)&&e.push(t)}),e}const F2=({children:n,custom:e,initial:t=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:a="sync",propagate:c=!1,anchorX:f="left",root:d})=>{const[m,g]=z2(c),y=R.useMemo(()=>L_(n),[n]),x=c&&!m?[]:y.map(Xd),S=R.useRef(!0),k=R.useRef(y),T=Zy(()=>new Map),E=R.useRef(new Set),[N,D]=R.useState(y),[P,G]=R.useState(y);yE(()=>{S.current=!1,k.current=y;for(let A=0;A<P.length;A++){const C=Xd(P[A]);x.includes(C)?(T.delete(C),E.current.delete(C)):T.get(C)!==!0&&T.set(C,!1)}},[P,x.length,x.join("-")]);const F=[];if(y!==N){let A=[...y];for(let C=0;C<P.length;C++){const M=P[C],L=Xd(M);x.includes(L)||(A.splice(C,0,M),F.push(M))}return a==="wait"&&F.length&&(A=F),G(L_(A)),D(y),null}const{forceRender:$}=R.useContext(Jy);return l.jsx(l.Fragment,{children:P.map(A=>{const C=Xd(A),M=c&&!m?!1:y===P||x.includes(C),L=()=>{if(E.current.has(C))return;if(E.current.add(C),T.has(C))T.set(C,!0);else return;let B=!0;T.forEach(W=>{W||(B=!1)}),B&&($==null||$(),G(k.current),c&&(g==null||g()),r&&r())};return l.jsx(yO,{isPresent:M,initial:!S.current||t?void 0:!1,custom:e,presenceAffectsLayout:s,mode:a,root:d,onExitComplete:M?void 0:L,anchorX:f,children:A},C)})})},U2=R.createContext({strict:!1}),O_={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let B_=!1;function xO(){if(B_)return;const n={};for(const e in O_)n[e]={isEnabled:t=>O_[e].some(r=>!!t[r])};g2(n),B_=!0}function $2(){return xO(),s6()}function wO(n){const e=$2();for(const t in n)e[t]={...e[t],...n[t]};g2(e)}const _O=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Wh(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||_O.has(n)}let W2=n=>!Wh(n);function kO(n){typeof n=="function"&&(W2=e=>e.startsWith("on")?!Wh(e):n(e))}try{kO(require("@emotion/is-prop-valid").default)}catch{}function bO(n,e,t){const r={};for(const s in n)s==="values"&&typeof n.values=="object"||(W2(s)||t===!0&&Wh(s)||!e&&!Wh(s)||n.draggable&&s.startsWith("onDrag"))&&(r[s]=n[s]);return r}const bf=R.createContext({});function SO(n,e){if(kf(n)){const{initial:t,animate:r}=n;return{initial:t===!1||nu(t)?t:void 0,animate:nu(r)?r:void 0}}return n.inherit!==!1?e:{}}function EO(n){const{initial:e,animate:t}=SO(n,R.useContext(bf));return R.useMemo(()=>({initial:e,animate:t}),[z_(e),z_(t)])}function z_(n){return Array.isArray(n)?n.join(" "):n}const C0=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function H2(n,e,t){for(const r in e)!an(e[r])&&!b2(r,t)&&(n[r]=e[r])}function TO({transformTemplate:n},e){return R.useMemo(()=>{const t=C0();return E0(t,e,n),Object.assign({},t.vars,t.style)},[e])}function IO(n,e){const t=n.style||{},r={};return H2(r,t,n),Object.assign(r,TO(n,e)),r}function CO(n,e){const t={},r=IO(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}const K2=()=>({...C0(),attrs:{}});function AO(n,e,t,r){const s=R.useMemo(()=>{const a=K2();return S2(a,e,T2(r),n.transformTemplate,n.style),{...a.attrs,style:{...a.style}}},[e]);if(n.style){const a={};H2(a,n.style,n),s.style={...a,...s.style}}return s}const RO=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function A0(n){return typeof n!="string"||n.includes("-")?!1:!!(RO.indexOf(n)>-1||/[A-Z]/u.test(n))}function jO(n,e,t,{latestValues:r},s,a=!1,c){const d=(c??A0(n)?AO:CO)(e,r,s,n),m=bO(e,typeof n=="string",a),g=n!==R.Fragment?{...m,...d,ref:t}:{},{children:y}=e,x=R.useMemo(()=>an(y)?y.get():y,[y]);return R.createElement(n,{...g,children:x})}function PO({scrapeMotionValuesFromProps:n,createRenderState:e},t,r,s){return{latestValues:MO(t,r,s,n),renderState:e()}}function MO(n,e,t,r){const s={},a=r(n,{});for(const x in a)s[x]=mh(a[x]);let{initial:c,animate:f}=n;const d=kf(n),m=p2(n);e&&m&&!d&&n.inherit!==!1&&(c===void 0&&(c=e.initial),f===void 0&&(f=e.animate));let g=t?t.initial===!1:!1;g=g||c===!1;const y=g?f:c;if(y&&typeof y!="boolean"&&!_f(y)){const x=Array.isArray(y)?y:[y];for(let S=0;S<x.length;S++){const k=v0(n,x[S]);if(k){const{transitionEnd:T,transition:E,...N}=k;for(const D in N){let P=N[D];if(Array.isArray(P)){const G=g?P.length-1:0;P=P[G]}P!==null&&(s[D]=P)}for(const D in T)s[D]=T[D]}}}return s}const q2=n=>(e,t)=>{const r=R.useContext(bf),s=R.useContext(wf),a=()=>PO(n,e,r,s);return t?a():Zy(a)},NO=q2({scrapeMotionValuesFromProps:T0,createRenderState:C0}),DO=q2({scrapeMotionValuesFromProps:I2,createRenderState:K2}),VO=Symbol.for("motionComponentSymbol");function LO(n,e,t){const r=R.useRef(t);R.useInsertionEffect(()=>{r.current=t});const s=R.useRef(null);return R.useCallback(a=>{var f;a&&((f=n.onMount)==null||f.call(n,a)),e&&(a?e.mount(a):e.unmount());const c=r.current;if(typeof c=="function")if(a){const d=c(a);typeof d=="function"&&(s.current=d)}else s.current?(s.current(),s.current=null):c(a);else c&&(c.current=a)},[e])}const G2=R.createContext({});function Rc(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function OO(n,e,t,r,s,a){var E,N;const{visualElement:c}=R.useContext(bf),f=R.useContext(U2),d=R.useContext(wf),m=R.useContext(I0).reducedMotion,g=R.useRef(null);r=r||f.renderer,!g.current&&r&&(g.current=r(n,{visualState:e,parent:c,props:t,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:m,isSVG:a}));const y=g.current,x=R.useContext(G2);y&&!y.projection&&s&&(y.type==="html"||y.type==="svg")&&BO(g.current,t,s,x);const S=R.useRef(!1);R.useInsertionEffect(()=>{y&&S.current&&y.update(t,d)});const k=t[e2],T=R.useRef(!!k&&!((E=window.MotionHandoffIsComplete)!=null&&E.call(window,k))&&((N=window.MotionHasOptimisedAnimation)==null?void 0:N.call(window,k)));return yE(()=>{y&&(S.current=!0,window.MotionIsMounted=!0,y.updateFeatures(),y.scheduleRenderMicrotask(),T.current&&y.animationState&&y.animationState.animateChanges())}),R.useEffect(()=>{y&&(!T.current&&y.animationState&&y.animationState.animateChanges(),T.current&&(queueMicrotask(()=>{var D;(D=window.MotionHandoffMarkAsComplete)==null||D.call(window,k)}),T.current=!1),y.enteringChildren=void 0)}),y}function BO(n,e,t,r){const{layoutId:s,layout:a,drag:c,dragConstraints:f,layoutScroll:d,layoutRoot:m,layoutCrossfade:g}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:Q2(n.parent)),n.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!c||f&&Rc(f),visualElement:n,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:g,layoutScroll:d,layoutRoot:m})}function Q2(n){if(n)return n.options.allowProjection!==!1?n.projection:Q2(n.parent)}function Ep(n,{forwardMotionProps:e=!1,type:t}={},r,s){r&&wO(r);const a=t?t==="svg":A0(n),c=a?DO:NO;function f(m,g){let y;const x={...R.useContext(I0),...m,layoutId:zO(m)},{isStatic:S}=x,k=EO(m),T=c(m,S);if(!S&&gE){FO();const E=UO(x);y=E.MeasureLayout,k.visualElement=OO(n,T,x,s,E.ProjectionNode,a)}return l.jsxs(bf.Provider,{value:k,children:[y&&k.visualElement?l.jsx(y,{visualElement:k.visualElement,...x}):null,jO(n,m,LO(T,k.visualElement,g),T,S,e,a)]})}f.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const d=R.forwardRef(f);return d[VO]=n,d}function zO({layoutId:n}){const e=R.useContext(Jy).id;return e&&n!==void 0?e+"-"+n:n}function FO(n,e){R.useContext(U2).strict}function UO(n){const e=$2(),{drag:t,layout:r}=e;if(!t&&!r)return{};const s={...t,...r};return{MeasureLayout:t!=null&&t.isEnabled(n)||r!=null&&r.isEnabled(n)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function $O(n,e){if(typeof Proxy>"u")return Ep;const t=new Map,r=(a,c)=>Ep(a,c,n,e),s=(a,c)=>r(a,c);return new Proxy(s,{get:(a,c)=>c==="create"?r:(t.has(c)||t.set(c,Ep(c,void 0,n,e)),t.get(c))})}const WO=(n,e)=>e.isSVG??A0(n)?new k6(e):new g6(e,{allowProjection:n!==R.Fragment});class HO extends Fs{constructor(e){super(e),e.animationState||(e.animationState=I6(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();_f(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let KO=0;class qO extends Fs{constructor(){super(...arguments),this.id=KO++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);t&&!e&&s.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const GO={animation:{Feature:HO},exit:{Feature:qO}};function _u(n){return{point:{x:n.pageX,y:n.pageY}}}const QO=n=>e=>k0(e)&&n(e,_u(e));function zc(n,e,t,r){return ru(n,e,QO(t),r)}const Y2=({current:n})=>n?n.ownerDocument.defaultView:null,F_=(n,e)=>Math.abs(n-e);function YO(n,e){const t=F_(n.x,e.x),r=F_(n.y,e.y);return Math.sqrt(t**2+r**2)}const U_=new Set(["auto","scroll"]);class X2{constructor(e,t,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:a=!1,distanceThreshold:c=3,element:f}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=S=>{this.handleScroll(S.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=Ip(this.lastMoveEventInfo,this.history),k=this.startEvent!==null,T=YO(S.offset,{x:0,y:0})>=this.distanceThreshold;if(!k&&!T)return;const{point:E}=S,{timestamp:N}=qt;this.history.push({...E,timestamp:N});const{onStart:D,onMove:P}=this.handlers;k||(D&&D(this.lastMoveEvent,S),this.startEvent=this.lastMoveEvent),P&&P(this.lastMoveEvent,S)},this.handlePointerMove=(S,k)=>{this.lastMoveEvent=S,this.lastMoveEventInfo=Tp(k,this.transformPagePoint),st.update(this.updatePoint,!0)},this.handlePointerUp=(S,k)=>{this.end();const{onEnd:T,onSessionEnd:E,resumeAnimation:N}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&N&&N(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const D=Ip(S.type==="pointercancel"?this.lastMoveEventInfo:Tp(k,this.transformPagePoint),this.history);this.startEvent&&T&&T(S,D),E&&E(S,D)},!k0(e))return;this.dragSnapToOrigin=a,this.handlers=t,this.transformPagePoint=r,this.distanceThreshold=c,this.contextWindow=s||window;const d=_u(e),m=Tp(d,this.transformPagePoint),{point:g}=m,{timestamp:y}=qt;this.history=[{...g,timestamp:y}];const{onSessionStart:x}=t;x&&x(e,Ip(m,this.history)),this.removeListeners=vu(zc(this.contextWindow,"pointermove",this.handlePointerMove),zc(this.contextWindow,"pointerup",this.handlePointerUp),zc(this.contextWindow,"pointercancel",this.handlePointerUp)),f&&this.startScrollTracking(f)}startScrollTracking(e){let t=e.parentElement;for(;t;){const r=getComputedStyle(t);(U_.has(r.overflowX)||U_.has(r.overflowY))&&this.scrollPositions.set(t,{x:t.scrollLeft,y:t.scrollTop}),t=t.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const t=this.scrollPositions.get(e);if(!t)return;const r=e===window,s=r?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},a={x:s.x-t.x,y:s.y-t.y};a.x===0&&a.y===0||(r?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=a.x,this.lastMoveEventInfo.point.y+=a.y):this.history.length>0&&(this.history[0].x-=a.x,this.history[0].y-=a.y),this.scrollPositions.set(e,s),st.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),Ns(this.updatePoint)}}function Tp(n,e){return e?{point:e(n.point)}:n}function $_(n,e){return{x:n.x-e.x,y:n.y-e.y}}function Ip({point:n},e){return{point:n,delta:$_(n,J2(e)),offset:$_(n,XO(e)),velocity:JO(e,.1)}}function XO(n){return n[0]}function J2(n){return n[n.length-1]}function JO(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const s=J2(n);for(;t>=0&&(r=n[t],!(s.timestamp-r.timestamp>Ii(e)));)t--;if(!r)return{x:0,y:0};const a=Yn(s.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const c={x:(s.x-r.x)/a,y:(s.y-r.y)/a};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function ZO(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?dt(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?dt(t,n,r.max):Math.min(n,t)),n}function W_(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function e9(n,{top:e,left:t,bottom:r,right:s}){return{x:W_(n.x,t,s),y:W_(n.y,e,r)}}function H_(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function t9(n,e){return{x:H_(n.x,e.x),y:H_(n.y,e.y)}}function n9(n,e){let t=.5;const r=mn(n),s=mn(e);return s>r?t=Zc(e.min,e.max-r,n.min):r>s&&(t=Zc(n.min,n.max-s,e.min)),Xr(0,1,t)}function r9(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const Pg=.35;function i9(n=Pg){return n===!1?n=0:n===!0&&(n=Pg),{x:K_(n,"left","right"),y:K_(n,"top","bottom")}}function K_(n,e,t){return{min:q_(n,e),max:q_(n,t)}}function q_(n,e){return typeof n=="number"?n:n[e]||0}const s9=new WeakMap;class o9{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Mt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=y=>{t?(this.stopAnimation(),this.snapToCursor(_u(y).point)):this.pauseAnimation()},c=(y,x)=>{this.stopAnimation();const{drag:S,dragPropagation:k,onDragStart:T}=this.getProps();if(S&&!k&&(this.openDragLock&&this.openDragLock(),this.openDragLock=qL(S),!this.openDragLock))return;this.latestPointerEvent=y,this.latestPanInfo=x,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Gn(N=>{let D=this.getAxisMotionValue(N).get()||0;if(qr.test(D)){const{projection:P}=this.visualElement;if(P&&P.layout){const G=P.layout.layoutBox[N];G&&(D=mn(G)*(parseFloat(D)/100))}}this.originPoint[N]=D}),T&&st.postRender(()=>T(y,x)),Eg(this.visualElement,"transform");const{animationState:E}=this.visualElement;E&&E.setActive("whileDrag",!0)},f=(y,x)=>{this.latestPointerEvent=y,this.latestPanInfo=x;const{dragPropagation:S,dragDirectionLock:k,onDirectionLock:T,onDrag:E}=this.getProps();if(!S&&!this.openDragLock)return;const{offset:N}=x;if(k&&this.currentDirection===null){this.currentDirection=a9(N),this.currentDirection!==null&&T&&T(this.currentDirection);return}this.updateAxis("x",x.point,N),this.updateAxis("y",x.point,N),this.visualElement.render(),E&&E(y,x)},d=(y,x)=>{this.latestPointerEvent=y,this.latestPanInfo=x,this.stop(y,x),this.latestPointerEvent=null,this.latestPanInfo=null},m=()=>Gn(y=>{var x;return this.getAnimationState(y)==="paused"&&((x=this.getAxisMotionValue(y).animation)==null?void 0:x.play())}),{dragSnapToOrigin:g}=this.getProps();this.panSession=new X2(e,{onSessionStart:a,onStart:c,onMove:f,onSessionEnd:d,resumeAnimation:m},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,distanceThreshold:r,contextWindow:Y2(this.visualElement),element:this.visualElement.current})}stop(e,t){const r=e||this.latestPointerEvent,s=t||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!s||!r)return;const{velocity:c}=s;this.startAnimation(c);const{onDragEnd:f}=this.getProps();f&&st.postRender(()=>f(r,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:s}=this.getProps();if(!r||!Jd(e,s,this.currentDirection))return;const a=this.getAxisMotionValue(e);let c=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(c=ZO(c,this.constraints[e],this.elastic[e])),a.set(c)}resolveConstraints(){var a;const{dragConstraints:e,dragElastic:t}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(a=this.visualElement.projection)==null?void 0:a.layout,s=this.constraints;e&&Rc(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=e9(r.layoutBox,e):this.constraints=!1,this.elastic=i9(t),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Gn(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=r9(r.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Rc(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=u6(r,s.root,this.visualElement.getTransformPagePoint());let c=t9(s.layout.layoutBox,a);if(t){const f=t(a6(c));this.hasMutatedConstraints=!!f,f&&(c=v2(f))}return c}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:s,dragTransition:a,dragSnapToOrigin:c,onDragTransitionEnd:f}=this.getProps(),d=this.constraints||{},m=Gn(g=>{if(!Jd(g,t,this.currentDirection))return;let y=d&&d[g]||{};c&&(y={min:0,max:0});const x=s?200:1e6,S=s?40:1e7,k={type:"inertia",velocity:r?e[g]:0,bounceStiffness:x,bounceDamping:S,timeConstant:750,restDelta:1,restSpeed:10,...a,...y};return this.startAxisValueAnimation(g,k)});return Promise.all(m).then(f)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return Eg(this.visualElement,e),r.start(y0(e,r,0,t,this.visualElement,!1))}stopAnimation(){Gn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Gn(e=>{var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[t];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Gn(t=>{const{drag:r}=this.getProps();if(!Jd(t,r,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(t);if(s&&s.layout){const{min:c,max:f}=s.layout.layoutBox[t],d=a.get()||0;a.set(e[t]-dt(c,f,.5)+d)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!Rc(t)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Gn(c=>{const f=this.getAxisMotionValue(c);if(f&&this.constraints!==!1){const d=f.get();s[c]=n9({min:d,max:d},this.constraints[c])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Gn(c=>{if(!Jd(c,e,null))return;const f=this.getAxisMotionValue(c),{min:d,max:m}=this.constraints[c];f.set(dt(d,m,s[c]))})}addListeners(){if(!this.visualElement.current)return;s9.set(this.visualElement,this);const e=this.visualElement.current,t=zc(e,"pointerdown",d=>{const{drag:m,dragListener:g=!0}=this.getProps();m&&g&&!h2(d.target)&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();Rc(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),st.read(r);const c=ru(window,"resize",()=>this.scalePositionWithinConstraints()),f=s.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:m})=>{this.isDragging&&m&&(Gn(g=>{const y=this.getAxisMotionValue(g);y&&(this.originPoint[g]+=d[g].translate,y.set(y.get()+d[g].translate))}),this.visualElement.render())}));return()=>{c(),t(),a(),f&&f()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:c=Pg,dragMomentum:f=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:s,dragConstraints:a,dragElastic:c,dragMomentum:f}}}function Jd(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function a9(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class l9 extends Fs{constructor(e){super(e),this.removeGroupControls=Xn,this.removeListeners=Xn,this.controls=new o9(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Xn}update(){const{dragControls:e}=this.node.getProps(),{dragControls:t}=this.node.prevProps||{};e!==t&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners()}}const G_=n=>(e,t)=>{n&&st.postRender(()=>n(e,t))};class c9 extends Fs{constructor(){super(...arguments),this.removePointerDownListener=Xn}onPointerDown(e){this.session=new X2(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Y2(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:G_(e),onStart:G_(t),onMove:r,onEnd:(a,c)=>{delete this.session,s&&st.postRender(()=>s(a,c))}}}mount(){this.removePointerDownListener=zc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let Cp=!1;class u9 extends R.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:s}=this.props,{projection:a}=e;a&&(t.group&&t.group.add(a),r&&r.register&&s&&r.register(a),Cp&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),ph.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:s,isPresent:a}=this.props,{projection:c}=r;return c&&(c.isPresent=a,Cp=!0,s||e.layoutDependency!==t||t===void 0||e.isPresent!==a?c.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?c.promote():c.relegate()||st.postRender(()=>{const f=c.getStack();(!f||!f.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),_0.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:s}=e;Cp=!0,s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Z2(n){const[e,t]=z2(),r=R.useContext(Jy);return l.jsx(u9,{...n,layoutGroup:r,switchLayoutGroup:R.useContext(G2),isPresent:e,safeToRemove:t})}const d9={pan:{Feature:c9},drag:{Feature:l9,ProjectionNode:B2,MeasureLayout:Z2}};function Q_(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const s="onHover"+t,a=r[s];a&&st.postRender(()=>a(e,_u(e)))}class h9 extends Fs{mount(){const{current:e}=this.node;e&&(this.unmount=GL(e,(t,r)=>(Q_(this.node,r,"Start"),s=>Q_(this.node,s,"End"))))}unmount(){}}class f9 extends Fs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=vu(ru(this.node.current,"focus",()=>this.onFocus()),ru(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Y_(n,e,t){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const s="onTap"+(t==="End"?"":t),a=r[s];a&&st.postRender(()=>a(e,_u(e)))}class m9 extends Fs{mount(){const{current:e}=this.node;e&&(this.unmount=XL(e,(t,r)=>(Y_(this.node,r,"Start"),(s,{success:a})=>Y_(this.node,s,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Mg=new WeakMap,Ap=new WeakMap,p9=n=>{const e=Mg.get(n.target);e&&e(n)},g9=n=>{n.forEach(p9)};function y9({root:n,...e}){const t=n||document;Ap.has(t)||Ap.set(t,{});const r=Ap.get(t),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(g9,{root:n,...e})),r[s]}function v9(n,e,t){const r=y9(e);return Mg.set(n,t),r.observe(n),()=>{Mg.delete(n),r.unobserve(n)}}const x9={some:0,all:1};class w9 extends Fs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:s="some",once:a}=e,c={root:t?t.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:x9[s]},f=d=>{const{isIntersecting:m}=d;if(this.isInView===m||(this.isInView=m,a&&!m&&this.hasEnteredView))return;m&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",m);const{onViewportEnter:g,onViewportLeave:y}=this.node.getProps(),x=m?g:y;x&&x(d)};return v9(this.node.current,c,f)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(_9(e,t))&&this.startObserver()}unmount(){}}function _9({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const k9={inView:{Feature:w9},tap:{Feature:m9},focus:{Feature:f9},hover:{Feature:h9}},b9={layout:{ProjectionNode:B2,MeasureLayout:Z2}},S9={...GO,...k9,...d9,...b9},ve=$O(S9,WO);function Sn(){var k;const n=tr(),e=ll(),{user:t,profile:r,isAuthenticated:s,isAdmin:a,isBusiness:c}=Vi(),[f,d]=R.useState(!1),[m,g]=R.useState(!1),y=[{to:"/",label:"Home"},{to:"/map",label:"Village Map"},{to:"/demo",label:"See Demo"},{to:"/about",label:"How It Works"},{to:"/businesses",label:"For Businesses"}],x=async()=>{await rE(),g(!1),e("/")},S=T=>n.pathname===T;return l.jsxs("header",{style:{background:"var(--kb-white)",borderBottom:"1px solid var(--kb-gray-200)",position:"sticky",top:0,zIndex:100},children:[l.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 1rem",display:"flex",alignItems:"center",justifyContent:"space-between",height:"70px"},children:[l.jsxs(ae,{to:s?"/map":"/",style:{display:"flex",alignItems:"center",gap:"0.5rem",textDecoration:"none"},children:[l.jsx("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, var(--kb-navy) 0%, var(--kb-navy-light) 100%)",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--kb-gold)",fontFamily:"var(--font-display)",fontWeight:"700",fontSize:"1.2rem"},children:"K"}),l.jsxs("div",{children:[l.jsx("div",{style:{fontFamily:"var(--font-display)",fontWeight:"600",color:"var(--kb-navy)",fontSize:"1.1rem",lineHeight:1.1},children:"Kinderbucks"}),l.jsx("div",{style:{fontSize:"0.65rem",color:"var(--kb-gray-500)",textTransform:"uppercase",letterSpacing:"0.1em"},children:"Village Currency"})]})]}),l.jsx("nav",{style:{display:"flex",alignItems:"center",gap:"2rem"},className:"desktop-nav",children:y.map(T=>l.jsx(ae,{to:T.to,style:{color:S(T.to)?"var(--kb-navy)":"var(--kb-gray-500)",fontWeight:S(T.to)?"600":"500",fontSize:"0.95rem",transition:"color 0.2s",borderBottom:S(T.to)?"2px solid var(--kb-gold)":"2px solid transparent",paddingBottom:"4px"},children:T.label},T.to))}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},className:"desktop-nav",children:[s?l.jsx(l.Fragment,{children:l.jsxs("div",{style:{position:"relative"},children:[l.jsxs("button",{onClick:()=>g(!m),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"var(--kb-gray-100)",border:"none",borderRadius:"8px",cursor:"pointer",color:"var(--kb-navy)",fontWeight:"500"},children:[l.jsx(Ha,{size:18}),(r==null?void 0:r.displayName)||((k=t.email)==null?void 0:k.split("@")[0])]}),m&&l.jsxs("div",{style:{position:"absolute",right:0,top:"100%",marginTop:"0.5rem",background:"white",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",minWidth:"180px",zIndex:200,overflow:"hidden"},children:[l.jsxs(ae,{to:"/card",onClick:()=>g(!1),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",color:"var(--kb-gold-dark)",textDecoration:"none",borderBottom:"1px solid var(--kb-gray-100)",fontWeight:"600",background:"rgba(201, 162, 39, 0.1)"},children:[l.jsx(ug,{size:16})," My OK Card"]}),l.jsxs(ae,{to:"/profile",onClick:()=>g(!1),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",color:"var(--kb-gray-700)",textDecoration:"none",borderBottom:"1px solid var(--kb-gray-100)"},children:[l.jsx(Ha,{size:16})," My Profile"]}),c&&l.jsxs(ae,{to:"/business/dashboard",onClick:()=>g(!1),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",color:"#2563eb",textDecoration:"none",borderBottom:"1px solid var(--kb-gray-100)"},children:[l.jsx(Rt,{size:16})," Business Dashboard"]}),a&&l.jsxs(ae,{to:"/admin/dashboard",onClick:()=>g(!1),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",color:"#dc2626",textDecoration:"none",borderBottom:"1px solid var(--kb-gray-100)"},children:[l.jsx(Vh,{size:16})," Admin Portal"]}),l.jsxs("button",{onClick:x,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",color:"var(--kb-gray-600)",background:"none",border:"none",cursor:"pointer",width:"100%",textAlign:"left"},children:[l.jsx(dg,{size:16})," Sign Out"]})]})]})}):l.jsx(l.Fragment,{children:l.jsxs(ae,{to:"/login",className:"btn btn-secondary",style:{padding:"0.5rem 1rem",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(rl,{size:16})," Sign In"]})}),l.jsx(ae,{to:"/exchange",className:"btn btn-gold",style:{padding:"0.5rem 1rem",fontSize:"0.9rem"},children:"Get Kinderbucks"})]}),l.jsx("button",{onClick:()=>d(!f),className:"mobile-menu-btn",style:{display:"none",background:"none",border:"none",padding:"0.5rem",cursor:"pointer"},children:l.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:f?l.jsx("path",{d:"M6 6l12 12M6 18L18 6"}):l.jsx("path",{d:"M3 12h18M3 6h18M3 18h18"})})})]}),f&&l.jsxs("div",{className:"mobile-menu",style:{background:"var(--kb-white)",borderTop:"1px solid var(--kb-gray-200)",padding:"1rem"},children:[y.map(T=>l.jsx(ae,{to:T.to,onClick:()=>d(!1),style:{display:"block",padding:"0.75rem 0",color:S(T.to)?"var(--kb-navy)":"var(--kb-gray-700)",fontWeight:S(T.to)?"600":"400",borderBottom:"1px solid var(--kb-gray-100)"},children:T.label},T.to)),l.jsxs("div",{style:{marginTop:"1rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:[s?l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{padding:"0.75rem",background:"var(--kb-gray-50)",borderRadius:"8px",marginBottom:"0.5rem"},children:[l.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:(r==null?void 0:r.displayName)||t.email}),l.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:(r==null?void 0:r.role)||"member"})]}),l.jsxs(ae,{to:"/profile",onClick:()=>d(!1),className:"btn btn-secondary",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[l.jsx(Ha,{size:16})," My Profile"]}),c&&l.jsxs(ae,{to:"/business/dashboard",onClick:()=>d(!1),className:"btn",style:{background:"#2563eb",color:"white",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[l.jsx(Rt,{size:16})," Business Dashboard"]}),a&&l.jsxs(ae,{to:"/admin/dashboard",onClick:()=>d(!1),className:"btn",style:{background:"#dc2626",color:"white",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[l.jsx(Vh,{size:16})," Admin Portal"]}),l.jsxs("button",{onClick:()=>{x(),d(!1)},className:"btn btn-secondary",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[l.jsx(dg,{size:16})," Sign Out"]})]}):l.jsxs(ae,{to:"/login",onClick:()=>d(!1),className:"btn btn-secondary",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[l.jsx(rl,{size:16})," Sign In"]}),l.jsx(ae,{to:"/exchange",onClick:()=>d(!1),className:"btn btn-gold",children:"Get Kinderbucks"})]})]}),l.jsx("style",{children:`
        @media (max-width: 768px) {
          .desktop-nav {
            display: none !important;
          }
          .mobile-menu-btn {
            display: block !important;
          }
        }
      `})]})}function En(){return l.jsxs("footer",{style:{background:"var(--kb-navy)",color:"var(--kb-white)",padding:"3rem 1rem 2rem",marginTop:"auto"},children:[l.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"2rem"},children:[l.jsxs("div",{children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[l.jsx("div",{style:{width:"36px",height:"36px",background:"var(--kb-gold)",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--kb-navy)",fontFamily:"var(--font-display)",fontWeight:"700"},children:"K"}),l.jsx("span",{style:{fontFamily:"var(--font-display)",fontWeight:"600",fontSize:"1.1rem"},children:"Kinderbucks"})]}),l.jsx("p",{style:{color:"var(--kb-gray-300)",fontSize:"0.9rem",lineHeight:1.6},children:"Village of Kinderhook's local currency program. Supporting local businesses, strengthening community."}),l.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.8rem",marginTop:"1rem"},children:"Est. 2026"})]}),l.jsxs("div",{children:[l.jsx("h4",{style:{color:"var(--kb-gold)",marginBottom:"1rem",fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Quick Links"}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[l.jsx(ae,{to:"/demo",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"See Demo"}),l.jsx(ae,{to:"/about",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"How It Works"}),l.jsx(ae,{to:"/benefits",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"Member Benefits"}),l.jsx(ae,{to:"/exchange",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"Get Kinderbucks"}),l.jsx(ae,{to:"/businesses",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"For Businesses"})]})]}),l.jsxs("div",{children:[l.jsx("h4",{style:{color:"var(--kb-gold)",marginBottom:"1rem",fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"For Members"}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[l.jsx(ae,{to:"/account",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"My Account"}),l.jsx(ae,{to:"/profile",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"Kinderhooker Profile"}),l.jsx(ae,{to:"/scan/KB-0001",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"Verify Currency"})]})]}),l.jsxs("div",{children:[l.jsx("h4",{style:{color:"var(--kb-gold)",marginBottom:"1rem",fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Contact"}),l.jsxs("p",{style:{color:"var(--kb-gray-300)",fontSize:"0.9rem",lineHeight:1.8},children:["Village of Kinderhook",l.jsx("br",{}),"Columbia County, NY"]})]})]}),l.jsxs("div",{style:{maxWidth:"1200px",margin:"2rem auto 0",paddingTop:"2rem",borderTop:"1px solid var(--kb-navy-light)",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"1rem"},children:[l.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.8rem"},children:" 2026 Kinderbucks. A Harmonic Systems project."}),l.jsx("div",{style:{display:"flex",gap:"1.5rem"},children:l.jsx(ae,{to:"/admin/dashboard",style:{color:"var(--kb-gray-500)",fontSize:"0.8rem"},children:"Admin"})})]})]})}function E9(){const{isAuthenticated:n,loading:e}=Vi(),t=ll();return R.useEffect(()=>{!e&&n&&t("/card",{replace:!0})},[n,e,t]),e?null:l.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[l.jsx(Sn,{}),l.jsx("section",{style:{background:"linear-gradient(135deg, var(--kb-navy) 0%, var(--kb-navy-light) 100%)",color:"var(--kb-white)",padding:"4rem 1rem",textAlign:"center"},children:l.jsxs(ve.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},style:{maxWidth:"800px",margin:"0 auto"},children:[l.jsx("div",{style:{display:"inline-block",background:"rgba(201, 162, 39, 0.2)",color:"var(--kb-gold)",padding:"0.5rem 1rem",borderRadius:"100px",fontSize:"0.85rem",fontWeight:"600",marginBottom:"1.5rem"},children:"Village of Kinderhook  Est. 2026"}),l.jsxs("h1",{style:{fontFamily:"var(--font-display)",fontSize:"clamp(2.5rem, 5vw, 3.5rem)",fontWeight:"700",marginBottom:"1.5rem",lineHeight:1.2},children:["Strengthen Our Village,",l.jsx("br",{}),l.jsx("span",{style:{color:"var(--kb-gold)"},children:"One Kinderbuck at a Time"})]}),l.jsx("p",{style:{fontSize:"1.2rem",color:"var(--kb-gray-300)",marginBottom:"2rem",maxWidth:"600px",margin:"0 auto 2rem"},children:"A local currency program that keeps money circulating in Kinderhook, rewards loyal customers, and strengthens our community economy."}),l.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[l.jsx(ae,{to:"/exchange",className:"btn btn-gold",style:{padding:"1rem 2rem",fontSize:"1.1rem"},children:"Get Kinderbucks"}),l.jsx(ae,{to:"/demo",className:"btn btn-outline",style:{padding:"1rem 2rem",fontSize:"1.1rem",borderColor:"var(--kb-white)",color:"var(--kb-white)"},children:"See Demo"})]})]})}),l.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:l.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[l.jsxs("div",{style:{textAlign:"center",marginBottom:"3rem"},children:[l.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"How Kinderbucks Works"}),l.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"Simple steps to start supporting local"})]}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"2rem"},children:[{step:"1",title:"Exchange",description:"Convert USD to Kinderbucks at participating locations or online. Members get bonus rates!",Icon:vf},{step:"2",title:"Spend Local",description:"Use Kinderbucks at any of our 19+ participating village businesses.",Icon:Rt},{step:"3",title:"Check In",description:"Scan QR codes when you visit to build your Kinderhooker status and unlock rewards.",Icon:Kr},{step:"4",title:"Earn More",description:"Higher tiers mean better exchange rates. Village Patrons get 25% bonus!",Icon:zo}].map((r,s)=>l.jsxs(ve.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:s*.1},viewport:{once:!0},className:"card",style:{textAlign:"center"},children:[l.jsx("div",{style:{width:"60px",height:"60px",background:"var(--kb-navy)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:l.jsx(r.Icon,{size:28,color:"var(--kb-gold)",strokeWidth:1.5})}),l.jsxs("div",{style:{color:"var(--kb-gold)",fontSize:"0.8rem",fontWeight:"600",marginBottom:"0.25rem"},children:["STEP ",r.step]}),l.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:r.title}),l.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.95rem"},children:r.description})]},s))})]})}),l.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:l.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[l.jsxs("div",{style:{textAlign:"center",marginBottom:"3rem"},children:[l.jsx("div",{className:"badge badge-gold",style:{marginBottom:"1rem"},children:"OK Membership"}),l.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"Become a Kinderhooker"}),l.jsx("p",{style:{color:"var(--kb-gray-500)",maxWidth:"600px",margin:"0 auto"},children:"Visit local businesses to level up your membership and unlock better exchange rates"})]}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"1.5rem"},children:[{name:"Curious",businesses:"1+",bonus:"10%",color:"#888888",Icon:Xt},{name:"Hooked",businesses:"5+",bonus:"15%",color:"#2e7d32",Icon:er},{name:"Line & Sinker",businesses:"10+",bonus:"20%",color:"#1565c0",Icon:Zr},{name:"Village Patron",businesses:"15+",bonus:"25%",color:"#c9a227",Icon:Bn,featured:!0}].map((r,s)=>l.jsxs(ve.div,{initial:{opacity:0,scale:.95},whileInView:{opacity:1,scale:1},transition:{delay:s*.1},viewport:{once:!0},className:"card",style:{textAlign:"center",border:r.featured?"2px solid var(--kb-gold)":void 0,position:"relative",overflow:"hidden"},children:[r.featured&&l.jsx("div",{style:{position:"absolute",top:"10px",right:"-30px",background:"var(--kb-gold)",color:"var(--kb-navy)",padding:"0.25rem 2rem",fontSize:"0.7rem",fontWeight:"600",transform:"rotate(45deg)"},children:"BEST"}),l.jsx("div",{style:{width:"50px",height:"50px",background:`${r.color}15`,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 0.75rem"},children:l.jsx(r.Icon,{size:24,color:r.color,strokeWidth:1.5})}),l.jsx("h3",{style:{color:r.color,marginBottom:"0.5rem"},children:r.name}),l.jsxs("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem",marginBottom:"1rem"},children:[r.businesses," businesses visited"]}),l.jsxs("div",{style:{background:`${r.color}15`,borderRadius:"8px",padding:"1rem"},children:[l.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:r.color},children:r.bonus}),l.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:"Exchange Bonus"})]})]},s))}),l.jsx("div",{style:{textAlign:"center",marginTop:"2rem"},children:l.jsx(ae,{to:"/profile",className:"btn btn-primary",children:"View My Progress"})})]})}),l.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:l.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[l.jsxs("div",{style:{textAlign:"center",marginBottom:"3rem"},children:[l.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"Participating Businesses"}),l.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"Support these local Kinderhook establishments"})]}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"1rem"},children:["The Aviary","Morningbird Cafe","Saisonnier","Broad Street Bagel","Brooklyn Pizzeria","Isola Wine Bar","OK Pantry","Kinderhook Books","Samascott's","The School Gallery","Old Dutch Inn","Muse Aesthetics"].map((r,s)=>l.jsx("div",{style:{background:"var(--kb-white)",borderRadius:"8px",padding:"1rem",textAlign:"center",fontSize:"0.9rem",color:"var(--kb-gray-700)",border:"1px solid var(--kb-gray-200)"},children:r},s))}),l.jsx("div",{style:{textAlign:"center",marginTop:"2rem"},children:l.jsx(ae,{to:"/businesses",className:"btn btn-secondary",children:"View All 19 Businesses "})})]})}),l.jsx("section",{style:{padding:"4rem 1rem",background:"linear-gradient(135deg, var(--kb-green) 0%, var(--kb-green-light) 100%)",color:"var(--kb-white)",textAlign:"center"},children:l.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto"},children:[l.jsx("h2",{style:{marginBottom:"1rem"},children:"Ready to Support Local?"}),l.jsx("p",{style:{opacity:.9,marginBottom:"2rem"},children:"Join the Kinderbucks program today and start earning rewards while strengthening our village economy."}),l.jsx("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:l.jsx(ae,{to:"/exchange",className:"btn btn-gold",style:{padding:"1rem 2rem"},children:"Get Your First Kinderbucks"})})]})}),l.jsx(En,{})]})}const X_={customer:{id:"customer",title:"For Customers",subtitle:"Start supporting local in minutes",icon:"",color:"var(--kb-green)",minCommitment:"Start with just $10"},business:{id:"business",title:"For Business Owners",subtitle:"Accept Kinderbucks and grow your customer base",icon:"",color:"var(--kb-navy)",minCommitment:"No upfront cost to join"},association:{id:"association",title:"For the Business Association",subtitle:"Strengthen the village economy together",icon:"",color:"var(--kb-gold)",minCommitment:"Community-driven program"}},J_=[{number:1,title:"Get Your First Kinderbucks",description:"Visit any exchange location with USD. Start with as little as $10.",visual:"exchange",details:["Visit Village Hall, OK Pantry, or The Aviary","Exchange any amount ($10, $20, $50, $100)","New members get 10% bonus automatically","Receive physical Kinderbucks bills"],tip:"First-time? You'll get $11 in Kinderbucks for every $10 USD!"},{number:2,title:"Spend at Local Businesses",description:"Use Kinderbucks like cash at 19+ participating village businesses.",visual:"spend",details:["Accepted at restaurants, shops, and services","Works just like regular currency","Businesses give change in Kinderbucks when possible","100% of your money stays in Kinderhook"],tip:"Check the business directory to plan your local shopping route!"},{number:3,title:"Check In When You Visit",description:"Scan QR codes at businesses to track your visits and earn rewards.",visual:"checkin",details:["Look for the Kinderbucks QR code at each business","Scan with your phone camera","Each unique business counts toward your tier","One check-in per business per hour"],tip:"You don't need an app - just scan and go!"},{number:4,title:"Level Up Your Membership",description:"Visit more businesses to unlock better exchange rates.",visual:"tiers",details:["Curious (1+ businesses): 10% bonus","Hooked (5+ businesses): 15% bonus","Line & Sinker (10+ businesses): 20% bonus","Village Patron (15+ businesses): 25% bonus"],tip:"At 25% bonus, $100 USD gets you $125 in Kinderbucks!"}],T9=[{number:1,title:"Register Your Business",description:"Join the program with no upfront costs or monthly fees.",visual:"register",details:["Contact the Business Association to register","Receive your unique business QR code","Get listed in the Kinderbucks directory","No fees, no contracts, no risk"],tip:"Registration takes less than 10 minutes!"},{number:2,title:"Accept Kinderbucks Payments",description:"Accept Kinderbucks just like you accept cash.",visual:"accept",details:["Kinderbucks bills have QR codes for verification","Scan any bill to verify authenticity","Make change in Kinderbucks when possible","Train staff in minutes"],tip:"Verification is instant - just scan the QR code on any bill."},{number:3,title:"Build Customer Loyalty",description:"Customers check in at your business, driving repeat visits.",visual:"loyalty",details:["Display your QR code prominently","Customers scan to record their visit","Each check-in helps customers level up","Higher tiers = more valuable customers"],tip:"Village Patrons have visited 15+ businesses - they're your most loyal customers!"},{number:4,title:"Redeem or Recirculate",description:"Use Kinderbucks at other businesses or redeem for USD.",visual:"redeem",details:["Spend at other participating businesses","Pay suppliers who accept Kinderbucks","Redeem for USD at exchange locations (1:1)","Keep money circulating locally"],tip:"Most businesses find it easier to spend than redeem - the money keeps moving!"}],I9=[{number:1,title:"Program Overview",description:"A local currency that strengthens the village economy.",visual:"overview",details:["Kinderbucks is a complementary currency for Kinderhook","Backed 1:1 by USD in a dedicated account","Bonus rates funded by interest and community investment","QR verification prevents counterfeiting"],tip:"Complementary currencies have been used successfully in communities worldwide."},{number:2,title:"Economic Impact",description:"Money that circulates locally multiplies its impact.",visual:"impact",details:["Studies show local currency circulates 3-4x more than USD","$10,000 in circulation = $30,000-40,000 in local economic activity",'Encourages "buy local" behavior',"Builds connections between businesses and residents"],tip:"Every Kinderbuck spent is guaranteed to stay in the village."},{number:3,title:"Member Engagement",description:"Tier system drives exploration of local businesses.",visual:"engagement",details:["Gamification encourages visiting new businesses","Tier bonuses reward loyal community members","Check-in data shows foot traffic patterns","Members become ambassadors for local spending"],tip:"The average member discovers 3 new businesses they didn't know about."},{number:4,title:"Administration & Growth",description:"Simple management with room to scale.",visual:"admin",details:["Digital dashboard tracks circulation and usage","New businesses join with minimal onboarding","Seasonal promotions drive engagement","Expand to neighboring communities over time"],tip:"The program is designed to be self-sustaining once established."}];function C9({step:n,isActive:e,onClick:t}){return l.jsx(ve.div,{onClick:t,whileHover:{scale:1.02},whileTap:{scale:.98},style:{background:e?"var(--kb-navy)":"var(--kb-white)",color:e?"var(--kb-white)":"var(--kb-gray-700)",borderRadius:"12px",padding:"1.25rem",cursor:"pointer",border:e?"none":"1px solid var(--kb-gray-200)",transition:"all 0.2s"},children:l.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[l.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"50%",background:e?"var(--kb-gold)":"var(--kb-gray-100)",color:e?"var(--kb-navy)":"var(--kb-gray-500)",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"700",fontSize:"1rem",flexShrink:0},children:n.number}),l.jsxs("div",{children:[l.jsx("h4",{style:{margin:0,fontSize:"1rem",fontWeight:"600",marginBottom:"0.25rem"},children:n.title}),l.jsx("p",{style:{margin:0,fontSize:"0.85rem",opacity:.8},children:n.description})]})]})})}function A9({step:n,audienceColor:e}){return l.jsxs(ve.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},style:{background:"var(--kb-white)",borderRadius:"16px",padding:"2rem",height:"100%",display:"flex",flexDirection:"column"},children:[l.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",background:`${e}15`,color:e,padding:"0.5rem 1rem",borderRadius:"100px",fontSize:"0.8rem",fontWeight:"600",marginBottom:"1rem",alignSelf:"flex-start"},children:["STEP ",n.number]}),l.jsx("h3",{style:{color:"var(--kb-navy)",fontSize:"1.5rem",marginBottom:"0.5rem"},children:n.title}),l.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem",fontSize:"1.05rem"},children:n.description}),l.jsxs("div",{style:{background:"var(--kb-cream)",borderRadius:"12px",padding:"1.5rem",marginBottom:"1.5rem",flex:1},children:[l.jsx("h4",{style:{color:"var(--kb-navy)",fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"1rem"},children:"What This Looks Like"}),l.jsx("ul",{style:{margin:0,padding:0,listStyle:"none"},children:n.details.map((t,r)=>l.jsxs("li",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",marginBottom:"0.75rem",color:"var(--kb-gray-700)"},children:[l.jsx("span",{style:{color:"var(--kb-green)",fontWeight:"600"},children:""}),t]},r))})]}),l.jsxs("div",{style:{background:"linear-gradient(135deg, var(--kb-gold) 0%, #d4af37 100%)",borderRadius:"12px",padding:"1rem 1.25rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[l.jsx("span",{style:{fontSize:"1.5rem"},children:""}),l.jsxs("div",{children:[l.jsx("div",{style:{fontWeight:"600",color:"var(--kb-navy)",fontSize:"0.8rem",textTransform:"uppercase",marginBottom:"0.25rem"},children:"Pro Tip"}),l.jsx("div",{style:{color:"var(--kb-navy)",fontSize:"0.95rem"},children:n.tip})]})]})]},n.number)}function R9({audience:n,steps:e}){const[t,r]=R.useState(0);return l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1.5fr",gap:"2rem",minHeight:"500px"},className:"demo-flow-grid",children:[l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:e.map((s,a)=>l.jsx(C9,{step:s,isActive:t===a,onClick:()=>r(a)},s.number))}),l.jsx(F2,{mode:"wait",children:l.jsx(A9,{step:e[t],audienceColor:n.color},t)})]})}function Zd({icon:n,title:e,description:t}){return l.jsxs("div",{style:{background:"var(--kb-white)",borderRadius:"12px",padding:"1.5rem",textAlign:"center",border:"1px solid var(--kb-gray-200)"},children:[l.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.75rem"},children:n}),l.jsx("h4",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:e}),l.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem",margin:0},children:t})]})}function j9(){const[n,e]=R.useState("customer"),t=X_[n],r=()=>{switch(n){case"customer":return J_;case"business":return T9;case"association":return I9;default:return J_}},a=(()=>{switch(n){case"customer":return{to:"/exchange",text:"Get Your First Kinderbucks",secondary:"/businesses",secondaryText:"Browse Businesses"};case"business":return{to:"/businesses",text:"Register Your Business",secondary:"/about",secondaryText:"Learn More"};case"association":return{to:"/about",text:"Full Program Details",secondary:"/admin/dashboard",secondaryText:"View Dashboard"};default:return{to:"/exchange",text:"Get Started"}}})();return l.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[l.jsx(Sn,{}),l.jsx("section",{style:{background:"linear-gradient(135deg, var(--kb-navy) 0%, var(--kb-navy-light) 100%)",color:"var(--kb-white)",padding:"3rem 1rem",textAlign:"center"},children:l.jsxs(ve.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{maxWidth:"800px",margin:"0 auto"},children:[l.jsx("div",{className:"badge badge-gold",style:{marginBottom:"1rem"},children:"Interactive Demo"}),l.jsx("h1",{style:{fontFamily:"var(--font-display)",fontSize:"clamp(2rem, 4vw, 2.75rem)",fontWeight:"700",marginBottom:"1rem"},children:"See How Kinderbucks Works"}),l.jsx("p",{style:{fontSize:"1.15rem",color:"var(--kb-gray-300)",maxWidth:"600px",margin:"0 auto"},children:"Choose your perspective below to see a step-by-step walkthrough of the Kinderbucks program."})]})}),l.jsx("section",{style:{background:"var(--kb-white)",padding:"2rem 1rem",borderBottom:"1px solid var(--kb-gray-200)"},children:l.jsx("div",{style:{maxWidth:"900px",margin:"0 auto"},children:l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem"},children:Object.values(X_).map(c=>l.jsxs(ve.button,{onClick:()=>e(c.id),whileHover:{scale:1.02},whileTap:{scale:.98},style:{background:n===c.id?`linear-gradient(135deg, ${c.color} 0%, ${c.color}dd 100%)`:"var(--kb-cream)",color:n===c.id?"var(--kb-white)":"var(--kb-gray-700)",border:n===c.id?"none":"2px solid var(--kb-gray-200)",borderRadius:"12px",padding:"1.5rem",cursor:"pointer",textAlign:"left",transition:"all 0.2s"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[l.jsx("span",{style:{fontSize:"1.5rem"},children:c.icon}),l.jsx("span",{style:{fontWeight:"600",fontSize:"1.1rem"},children:c.title})]}),l.jsx("p",{style:{margin:0,fontSize:"0.9rem",opacity:.85},children:c.subtitle}),l.jsx("div",{style:{marginTop:"0.75rem",fontSize:"0.8rem",fontWeight:"600",opacity:n===c.id?1:.7},children:c.minCommitment})]},c.id))})})}),l.jsx("section",{style:{background:"var(--kb-cream)",padding:"3rem 1rem",flex:1},children:l.jsx("div",{style:{maxWidth:"1100px",margin:"0 auto"},children:l.jsx(F2,{mode:"wait",children:l.jsx(ve.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:l.jsx(R9,{audience:t,steps:r()})},n)})})}),l.jsx("section",{style:{background:"var(--kb-white)",padding:"3rem 1rem",borderTop:"1px solid var(--kb-gray-200)"},children:l.jsxs("div",{style:{maxWidth:"900px",margin:"0 auto"},children:[l.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[l.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"Minimal Commitment, Maximum Impact"}),l.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"Kinderbucks is designed to be easy to try and rewarding to use"})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem"},children:[l.jsx(Zd,{icon:"",title:"Start with $10",description:"No minimum exchange amount. Try it with pocket change."}),l.jsx(Zd,{icon:"",title:"No Fees",description:"No signup fees, no monthly costs, no hidden charges."}),l.jsx(Zd,{icon:"",title:"Full Refund",description:"Businesses can redeem Kinderbucks for USD 1:1 anytime."}),l.jsx(Zd,{icon:"",title:"Instant Setup",description:"Customers start immediately. Businesses onboard in minutes."})]})]})}),l.jsx("section",{style:{background:t.color,padding:"3rem 1rem",textAlign:"center"},children:l.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto"},children:[l.jsx("h2",{style:{color:"var(--kb-white)",marginBottom:"0.5rem"},children:"Ready to Get Started?"}),l.jsxs("p",{style:{color:"rgba(255,255,255,0.85)",marginBottom:"2rem"},children:[n==="customer"&&"Join hundreds of Kinderhook residents supporting local businesses.",n==="business"&&"Join 19 local businesses already accepting Kinderbucks.",n==="association"&&"See the full details of how the program operates."]}),l.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[l.jsx(ae,{to:a.to,className:"btn",style:{background:"var(--kb-white)",color:t.color,padding:"1rem 2rem",fontSize:"1.1rem",fontWeight:"600"},children:a.text}),a.secondary&&l.jsx(ae,{to:a.secondary,className:"btn btn-outline",style:{borderColor:"var(--kb-white)",color:"var(--kb-white)",padding:"1rem 2rem",fontSize:"1.1rem"},children:a.secondaryText})]})]})}),l.jsx(En,{}),l.jsx("style",{children:`
        @media (max-width: 768px) {
          .demo-flow-grid {
            grid-template-columns: 1fr !important;
          }
        }
      `})]})}var P9=Object.defineProperty,Hh=Object.getOwnPropertySymbols,eT=Object.prototype.hasOwnProperty,tT=Object.prototype.propertyIsEnumerable,Z_=(n,e,t)=>e in n?P9(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ng=(n,e)=>{for(var t in e||(e={}))eT.call(e,t)&&Z_(n,t,e[t]);if(Hh)for(var t of Hh(e))tT.call(e,t)&&Z_(n,t,e[t]);return n},Dg=(n,e)=>{var t={};for(var r in n)eT.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&Hh)for(var r of Hh(n))e.indexOf(r)<0&&tT.call(n,r)&&(t[r]=n[r]);return t};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Do;(n=>{const e=class Ne{constructor(d,m,g,y){if(this.version=d,this.errorCorrectionLevel=m,this.modules=[],this.isFunction=[],d<Ne.MIN_VERSION||d>Ne.MAX_VERSION)throw new RangeError("Version value out of range");if(y<-1||y>7)throw new RangeError("Mask value out of range");this.size=d*4+17;let x=[];for(let k=0;k<this.size;k++)x.push(!1);for(let k=0;k<this.size;k++)this.modules.push(x.slice()),this.isFunction.push(x.slice());this.drawFunctionPatterns();const S=this.addEccAndInterleave(g);if(this.drawCodewords(S),y==-1){let k=1e9;for(let T=0;T<8;T++){this.applyMask(T),this.drawFormatBits(T);const E=this.getPenaltyScore();E<k&&(y=T,k=E),this.applyMask(T)}}s(0<=y&&y<=7),this.mask=y,this.applyMask(y),this.drawFormatBits(y),this.isFunction=[]}static encodeText(d,m){const g=n.QrSegment.makeSegments(d);return Ne.encodeSegments(g,m)}static encodeBinary(d,m){const g=n.QrSegment.makeBytes(d);return Ne.encodeSegments([g],m)}static encodeSegments(d,m,g=1,y=40,x=-1,S=!0){if(!(Ne.MIN_VERSION<=g&&g<=y&&y<=Ne.MAX_VERSION)||x<-1||x>7)throw new RangeError("Invalid value");let k,T;for(k=g;;k++){const P=Ne.getNumDataCodewords(k,m)*8,G=c.getTotalBits(d,k);if(G<=P){T=G;break}if(k>=y)throw new RangeError("Data too long")}for(const P of[Ne.Ecc.MEDIUM,Ne.Ecc.QUARTILE,Ne.Ecc.HIGH])S&&T<=Ne.getNumDataCodewords(k,P)*8&&(m=P);let E=[];for(const P of d){t(P.mode.modeBits,4,E),t(P.numChars,P.mode.numCharCountBits(k),E);for(const G of P.getData())E.push(G)}s(E.length==T);const N=Ne.getNumDataCodewords(k,m)*8;s(E.length<=N),t(0,Math.min(4,N-E.length),E),t(0,(8-E.length%8)%8,E),s(E.length%8==0);for(let P=236;E.length<N;P^=253)t(P,8,E);let D=[];for(;D.length*8<E.length;)D.push(0);return E.forEach((P,G)=>D[G>>>3]|=P<<7-(G&7)),new Ne(k,m,D,x)}getModule(d,m){return 0<=d&&d<this.size&&0<=m&&m<this.size&&this.modules[m][d]}getModules(){return this.modules}drawFunctionPatterns(){for(let g=0;g<this.size;g++)this.setFunctionModule(6,g,g%2==0),this.setFunctionModule(g,6,g%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const d=this.getAlignmentPatternPositions(),m=d.length;for(let g=0;g<m;g++)for(let y=0;y<m;y++)g==0&&y==0||g==0&&y==m-1||g==m-1&&y==0||this.drawAlignmentPattern(d[g],d[y]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(d){const m=this.errorCorrectionLevel.formatBits<<3|d;let g=m;for(let x=0;x<10;x++)g=g<<1^(g>>>9)*1335;const y=(m<<10|g)^21522;s(y>>>15==0);for(let x=0;x<=5;x++)this.setFunctionModule(8,x,r(y,x));this.setFunctionModule(8,7,r(y,6)),this.setFunctionModule(8,8,r(y,7)),this.setFunctionModule(7,8,r(y,8));for(let x=9;x<15;x++)this.setFunctionModule(14-x,8,r(y,x));for(let x=0;x<8;x++)this.setFunctionModule(this.size-1-x,8,r(y,x));for(let x=8;x<15;x++)this.setFunctionModule(8,this.size-15+x,r(y,x));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let d=this.version;for(let g=0;g<12;g++)d=d<<1^(d>>>11)*7973;const m=this.version<<12|d;s(m>>>18==0);for(let g=0;g<18;g++){const y=r(m,g),x=this.size-11+g%3,S=Math.floor(g/3);this.setFunctionModule(x,S,y),this.setFunctionModule(S,x,y)}}drawFinderPattern(d,m){for(let g=-4;g<=4;g++)for(let y=-4;y<=4;y++){const x=Math.max(Math.abs(y),Math.abs(g)),S=d+y,k=m+g;0<=S&&S<this.size&&0<=k&&k<this.size&&this.setFunctionModule(S,k,x!=2&&x!=4)}}drawAlignmentPattern(d,m){for(let g=-2;g<=2;g++)for(let y=-2;y<=2;y++)this.setFunctionModule(d+y,m+g,Math.max(Math.abs(y),Math.abs(g))!=1)}setFunctionModule(d,m,g){this.modules[m][d]=g,this.isFunction[m][d]=!0}addEccAndInterleave(d){const m=this.version,g=this.errorCorrectionLevel;if(d.length!=Ne.getNumDataCodewords(m,g))throw new RangeError("Invalid argument");const y=Ne.NUM_ERROR_CORRECTION_BLOCKS[g.ordinal][m],x=Ne.ECC_CODEWORDS_PER_BLOCK[g.ordinal][m],S=Math.floor(Ne.getNumRawDataModules(m)/8),k=y-S%y,T=Math.floor(S/y);let E=[];const N=Ne.reedSolomonComputeDivisor(x);for(let P=0,G=0;P<y;P++){let F=d.slice(G,G+T-x+(P<k?0:1));G+=F.length;const $=Ne.reedSolomonComputeRemainder(F,N);P<k&&F.push(0),E.push(F.concat($))}let D=[];for(let P=0;P<E[0].length;P++)E.forEach((G,F)=>{(P!=T-x||F>=k)&&D.push(G[P])});return s(D.length==S),D}drawCodewords(d){if(d.length!=Math.floor(Ne.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let m=0;for(let g=this.size-1;g>=1;g-=2){g==6&&(g=5);for(let y=0;y<this.size;y++)for(let x=0;x<2;x++){const S=g-x,T=(g+1&2)==0?this.size-1-y:y;!this.isFunction[T][S]&&m<d.length*8&&(this.modules[T][S]=r(d[m>>>3],7-(m&7)),m++)}}s(m==d.length*8)}applyMask(d){if(d<0||d>7)throw new RangeError("Mask value out of range");for(let m=0;m<this.size;m++)for(let g=0;g<this.size;g++){let y;switch(d){case 0:y=(g+m)%2==0;break;case 1:y=m%2==0;break;case 2:y=g%3==0;break;case 3:y=(g+m)%3==0;break;case 4:y=(Math.floor(g/3)+Math.floor(m/2))%2==0;break;case 5:y=g*m%2+g*m%3==0;break;case 6:y=(g*m%2+g*m%3)%2==0;break;case 7:y=((g+m)%2+g*m%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[m][g]&&y&&(this.modules[m][g]=!this.modules[m][g])}}getPenaltyScore(){let d=0;for(let x=0;x<this.size;x++){let S=!1,k=0,T=[0,0,0,0,0,0,0];for(let E=0;E<this.size;E++)this.modules[x][E]==S?(k++,k==5?d+=Ne.PENALTY_N1:k>5&&d++):(this.finderPenaltyAddHistory(k,T),S||(d+=this.finderPenaltyCountPatterns(T)*Ne.PENALTY_N3),S=this.modules[x][E],k=1);d+=this.finderPenaltyTerminateAndCount(S,k,T)*Ne.PENALTY_N3}for(let x=0;x<this.size;x++){let S=!1,k=0,T=[0,0,0,0,0,0,0];for(let E=0;E<this.size;E++)this.modules[E][x]==S?(k++,k==5?d+=Ne.PENALTY_N1:k>5&&d++):(this.finderPenaltyAddHistory(k,T),S||(d+=this.finderPenaltyCountPatterns(T)*Ne.PENALTY_N3),S=this.modules[E][x],k=1);d+=this.finderPenaltyTerminateAndCount(S,k,T)*Ne.PENALTY_N3}for(let x=0;x<this.size-1;x++)for(let S=0;S<this.size-1;S++){const k=this.modules[x][S];k==this.modules[x][S+1]&&k==this.modules[x+1][S]&&k==this.modules[x+1][S+1]&&(d+=Ne.PENALTY_N2)}let m=0;for(const x of this.modules)m=x.reduce((S,k)=>S+(k?1:0),m);const g=this.size*this.size,y=Math.ceil(Math.abs(m*20-g*10)/g)-1;return s(0<=y&&y<=9),d+=y*Ne.PENALTY_N4,s(0<=d&&d<=2568888),d}getAlignmentPatternPositions(){if(this.version==1)return[];{const d=Math.floor(this.version/7)+2,m=this.version==32?26:Math.ceil((this.version*4+4)/(d*2-2))*2;let g=[6];for(let y=this.size-7;g.length<d;y-=m)g.splice(1,0,y);return g}}static getNumRawDataModules(d){if(d<Ne.MIN_VERSION||d>Ne.MAX_VERSION)throw new RangeError("Version number out of range");let m=(16*d+128)*d+64;if(d>=2){const g=Math.floor(d/7)+2;m-=(25*g-10)*g-55,d>=7&&(m-=36)}return s(208<=m&&m<=29648),m}static getNumDataCodewords(d,m){return Math.floor(Ne.getNumRawDataModules(d)/8)-Ne.ECC_CODEWORDS_PER_BLOCK[m.ordinal][d]*Ne.NUM_ERROR_CORRECTION_BLOCKS[m.ordinal][d]}static reedSolomonComputeDivisor(d){if(d<1||d>255)throw new RangeError("Degree out of range");let m=[];for(let y=0;y<d-1;y++)m.push(0);m.push(1);let g=1;for(let y=0;y<d;y++){for(let x=0;x<m.length;x++)m[x]=Ne.reedSolomonMultiply(m[x],g),x+1<m.length&&(m[x]^=m[x+1]);g=Ne.reedSolomonMultiply(g,2)}return m}static reedSolomonComputeRemainder(d,m){let g=m.map(y=>0);for(const y of d){const x=y^g.shift();g.push(0),m.forEach((S,k)=>g[k]^=Ne.reedSolomonMultiply(S,x))}return g}static reedSolomonMultiply(d,m){if(d>>>8||m>>>8)throw new RangeError("Byte out of range");let g=0;for(let y=7;y>=0;y--)g=g<<1^(g>>>7)*285,g^=(m>>>y&1)*d;return s(g>>>8==0),g}finderPenaltyCountPatterns(d){const m=d[1];s(m<=this.size*3);const g=m>0&&d[2]==m&&d[3]==m*3&&d[4]==m&&d[5]==m;return(g&&d[0]>=m*4&&d[6]>=m?1:0)+(g&&d[6]>=m*4&&d[0]>=m?1:0)}finderPenaltyTerminateAndCount(d,m,g){return d&&(this.finderPenaltyAddHistory(m,g),m=0),m+=this.size,this.finderPenaltyAddHistory(m,g),this.finderPenaltyCountPatterns(g)}finderPenaltyAddHistory(d,m){m[0]==0&&(d+=this.size),m.pop(),m.unshift(d)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],n.QrCode=e;function t(f,d,m){if(d<0||d>31||f>>>d)throw new RangeError("Value out of range");for(let g=d-1;g>=0;g--)m.push(f>>>g&1)}function r(f,d){return(f>>>d&1)!=0}function s(f){if(!f)throw new Error("Assertion error")}const a=class pt{constructor(d,m,g){if(this.mode=d,this.numChars=m,this.bitData=g,m<0)throw new RangeError("Invalid argument");this.bitData=g.slice()}static makeBytes(d){let m=[];for(const g of d)t(g,8,m);return new pt(pt.Mode.BYTE,d.length,m)}static makeNumeric(d){if(!pt.isNumeric(d))throw new RangeError("String contains non-numeric characters");let m=[];for(let g=0;g<d.length;){const y=Math.min(d.length-g,3);t(parseInt(d.substring(g,g+y),10),y*3+1,m),g+=y}return new pt(pt.Mode.NUMERIC,d.length,m)}static makeAlphanumeric(d){if(!pt.isAlphanumeric(d))throw new RangeError("String contains unencodable characters in alphanumeric mode");let m=[],g;for(g=0;g+2<=d.length;g+=2){let y=pt.ALPHANUMERIC_CHARSET.indexOf(d.charAt(g))*45;y+=pt.ALPHANUMERIC_CHARSET.indexOf(d.charAt(g+1)),t(y,11,m)}return g<d.length&&t(pt.ALPHANUMERIC_CHARSET.indexOf(d.charAt(g)),6,m),new pt(pt.Mode.ALPHANUMERIC,d.length,m)}static makeSegments(d){return d==""?[]:pt.isNumeric(d)?[pt.makeNumeric(d)]:pt.isAlphanumeric(d)?[pt.makeAlphanumeric(d)]:[pt.makeBytes(pt.toUtf8ByteArray(d))]}static makeEci(d){let m=[];if(d<0)throw new RangeError("ECI assignment value out of range");if(d<128)t(d,8,m);else if(d<16384)t(2,2,m),t(d,14,m);else if(d<1e6)t(6,3,m),t(d,21,m);else throw new RangeError("ECI assignment value out of range");return new pt(pt.Mode.ECI,0,m)}static isNumeric(d){return pt.NUMERIC_REGEX.test(d)}static isAlphanumeric(d){return pt.ALPHANUMERIC_REGEX.test(d)}getData(){return this.bitData.slice()}static getTotalBits(d,m){let g=0;for(const y of d){const x=y.mode.numCharCountBits(m);if(y.numChars>=1<<x)return 1/0;g+=4+x+y.bitData.length}return g}static toUtf8ByteArray(d){d=encodeURI(d);let m=[];for(let g=0;g<d.length;g++)d.charAt(g)!="%"?m.push(d.charCodeAt(g)):(m.push(parseInt(d.substring(g+1,g+3),16)),g+=2);return m}};a.NUMERIC_REGEX=/^[0-9]*$/,a.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,a.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let c=a;n.QrSegment=a})(Do||(Do={}));(n=>{(e=>{const t=class{constructor(s,a){this.ordinal=s,this.formatBits=a}};t.LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2),e.Ecc=t})(n.QrCode||(n.QrCode={}))})(Do||(Do={}));(n=>{(e=>{const t=class{constructor(s,a){this.modeBits=s,this.numBitsCharCount=a}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};t.NUMERIC=new t(1,[10,12,14]),t.ALPHANUMERIC=new t(2,[9,11,13]),t.BYTE=new t(4,[8,16,16]),t.KANJI=new t(8,[8,10,12]),t.ECI=new t(7,[0,0,0]),e.Mode=t})(n.QrSegment||(n.QrSegment={}))})(Do||(Do={}));var Oa=Do;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var M9={L:Oa.QrCode.Ecc.LOW,M:Oa.QrCode.Ecc.MEDIUM,Q:Oa.QrCode.Ecc.QUARTILE,H:Oa.QrCode.Ecc.HIGH},nT=128,rT="L",iT="#FFFFFF",sT="#000000",oT=!1,aT=1,N9=4,D9=0,V9=.1;function lT(n,e=0){const t=[];return n.forEach(function(r,s){let a=null;r.forEach(function(c,f){if(!c&&a!==null){t.push(`M${a+e} ${s+e}h${f-a}v1H${a+e}z`),a=null;return}if(f===r.length-1){if(!c)return;a===null?t.push(`M${f+e},${s+e} h1v1H${f+e}z`):t.push(`M${a+e},${s+e} h${f+1-a}v1H${a+e}z`);return}c&&a===null&&(a=f)})}),t.join("")}function cT(n,e){return n.slice().map((t,r)=>r<e.y||r>=e.y+e.h?t:t.map((s,a)=>a<e.x||a>=e.x+e.w?s:!1))}function L9(n,e,t,r){if(r==null)return null;const s=n.length+t*2,a=Math.floor(e*V9),c=s/e,f=(r.width||a)*c,d=(r.height||a)*c,m=r.x==null?n.length/2-f/2:r.x*c,g=r.y==null?n.length/2-d/2:r.y*c,y=r.opacity==null?1:r.opacity;let x=null;if(r.excavate){let k=Math.floor(m),T=Math.floor(g),E=Math.ceil(f+m-k),N=Math.ceil(d+g-T);x={x:k,y:T,w:E,h:N}}const S=r.crossOrigin;return{x:m,y:g,h:d,w:f,excavation:x,opacity:y,crossOrigin:S}}function O9(n,e){return e!=null?Math.max(Math.floor(e),0):n?N9:D9}function uT({value:n,level:e,minVersion:t,includeMargin:r,marginSize:s,imageSettings:a,size:c,boostLevel:f}){let d=Nt.useMemo(()=>{const k=(Array.isArray(n)?n:[n]).reduce((T,E)=>(T.push(...Oa.QrSegment.makeSegments(E)),T),[]);return Oa.QrCode.encodeSegments(k,M9[e],t,void 0,void 0,f)},[n,e,t,f]);const{cells:m,margin:g,numCells:y,calculatedImageSettings:x}=Nt.useMemo(()=>{let S=d.getModules();const k=O9(r,s),T=S.length+k*2,E=L9(S,c,k,a);return{cells:S,margin:k,numCells:T,calculatedImageSettings:E}},[d,c,a,r,s]);return{qrcode:d,margin:g,cells:m,numCells:y,calculatedImageSettings:x}}var B9=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),z9=Nt.forwardRef(function(e,t){const r=e,{value:s,size:a=nT,level:c=rT,bgColor:f=iT,fgColor:d=sT,includeMargin:m=oT,minVersion:g=aT,boostLevel:y,marginSize:x,imageSettings:S}=r,T=Dg(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:E}=T,N=Dg(T,["style"]),D=S==null?void 0:S.src,P=Nt.useRef(null),G=Nt.useRef(null),F=Nt.useCallback(Me=>{P.current=Me,typeof t=="function"?t(Me):t&&(t.current=Me)},[t]),[$,A]=Nt.useState(!1),{margin:C,cells:M,numCells:L,calculatedImageSettings:B}=uT({value:s,level:c,minVersion:g,boostLevel:y,includeMargin:m,marginSize:x,imageSettings:S,size:a});Nt.useEffect(()=>{if(P.current!=null){const Me=P.current,He=Me.getContext("2d");if(!He)return;let kt=M;const Ee=G.current,ie=B!=null&&Ee!==null&&Ee.complete&&Ee.naturalHeight!==0&&Ee.naturalWidth!==0;ie&&B.excavation!=null&&(kt=cT(M,B.excavation));const pe=window.devicePixelRatio||1;Me.height=Me.width=a*pe;const le=a/L*pe;He.scale(le,le),He.fillStyle=f,He.fillRect(0,0,L,L),He.fillStyle=d,B9?He.fill(new Path2D(lT(kt,C))):M.forEach(function(H,ee){H.forEach(function(Ce,Ae){Ce&&He.fillRect(Ae+C,ee+C,1,1)})}),B&&(He.globalAlpha=B.opacity),ie&&He.drawImage(Ee,B.x+C,B.y+C,B.w,B.h)}}),Nt.useEffect(()=>{A(!1)},[D]);const W=Ng({height:a,width:a},E);let O=null;return D!=null&&(O=Nt.createElement("img",{src:D,key:D,style:{display:"none"},onLoad:()=>{A(!0)},ref:G,crossOrigin:B==null?void 0:B.crossOrigin})),Nt.createElement(Nt.Fragment,null,Nt.createElement("canvas",Ng({style:W,height:a,width:a,ref:F,role:"img"},N)),O)});z9.displayName="QRCodeCanvas";var Vg=Nt.forwardRef(function(e,t){const r=e,{value:s,size:a=nT,level:c=rT,bgColor:f=iT,fgColor:d=sT,includeMargin:m=oT,minVersion:g=aT,boostLevel:y,title:x,marginSize:S,imageSettings:k}=r,T=Dg(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:E,cells:N,numCells:D,calculatedImageSettings:P}=uT({value:s,level:c,minVersion:g,boostLevel:y,includeMargin:m,marginSize:S,imageSettings:k,size:a});let G=N,F=null;k!=null&&P!=null&&(P.excavation!=null&&(G=cT(N,P.excavation)),F=Nt.createElement("image",{href:k.src,height:P.h,width:P.w,x:P.x+E,y:P.y+E,preserveAspectRatio:"none",opacity:P.opacity,crossOrigin:P.crossOrigin}));const $=lT(G,E);return Nt.createElement("svg",Ng({height:a,width:a,viewBox:`0 0 ${D} ${D}`,ref:t,role:"img"},T),!!x&&Nt.createElement("title",null,x),Nt.createElement("path",{fill:f,d:`M0,0 h${D}v${D}H0z`,shapeRendering:"crispEdges"}),Nt.createElement("path",{fill:d,d:$,shapeRendering:"crispEdges"}),F)});Vg.displayName="QRCodeSVG";const ek={1:{color:"#2d5a27",gradient:["#3d7a37","#2d5a27"],label:"ONE",accent:"#90c695"},5:{color:"#1e3a5f",gradient:["#2e5a8f","#1e3a5f"],label:"FIVE",accent:"#7ba3cc"},10:{color:"#5c2d5c",gradient:["#7c4d7c","#5c2d5c"],label:"TEN",accent:"#b89db8"},20:{color:"#8b6914",gradient:["#c9a227","#8b6914"],label:"TWENTY",accent:"#e8d48a"}};function sl({value:n,size:e=128,denomination:t=5,showFrame:r=!0}){const s=ek[t]||ek[5],a=e+48,c=16;return r?l.jsx("div",{style:{width:a,background:`linear-gradient(135deg, ${s.gradient[0]} 0%, ${s.gradient[1]} 100%)`,borderRadius:c,padding:"3px",display:"inline-block",boxShadow:"0 4px 12px rgba(0,0,0,0.2)"},children:l.jsxs("div",{style:{background:"linear-gradient(135deg, #fefefe 0%, #f5f5f0 100%)",borderRadius:c-2,padding:"8px",position:"relative"},children:[l.jsx("div",{style:{textAlign:"center",marginBottom:"6px",fontFamily:'"Georgia", serif',fontSize:"10px",fontWeight:"bold",color:s.color,letterSpacing:"3px",textTransform:"uppercase"},children:"KINDERBUCKS"}),l.jsxs("div",{style:{background:"white",borderRadius:"8px",padding:"8px",border:`2px solid ${s.accent}`,position:"relative"},children:[l.jsx("div",{style:{position:"absolute",top:"4px",left:"4px",width:"12px",height:"12px",borderTop:`2px solid ${s.color}`,borderLeft:`2px solid ${s.color}`,borderRadius:"2px 0 0 0"}}),l.jsx("div",{style:{position:"absolute",top:"4px",right:"4px",width:"12px",height:"12px",borderTop:`2px solid ${s.color}`,borderRight:`2px solid ${s.color}`,borderRadius:"0 2px 0 0"}}),l.jsx("div",{style:{position:"absolute",bottom:"4px",left:"4px",width:"12px",height:"12px",borderBottom:`2px solid ${s.color}`,borderLeft:`2px solid ${s.color}`,borderRadius:"0 0 0 2px"}}),l.jsx("div",{style:{position:"absolute",bottom:"4px",right:"4px",width:"12px",height:"12px",borderBottom:`2px solid ${s.color}`,borderRight:`2px solid ${s.color}`,borderRadius:"0 0 2px 0"}}),l.jsx(Vg,{value:n,size:e,level:"H",fgColor:s.color,style:{display:"block"},imageSettings:{src:`data:image/svg+xml,${encodeURIComponent(`
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="${s.color}">
                  <circle cx="12" cy="12" r="11" fill="white" stroke="${s.color}" stroke-width="1.5"/>
                  <text x="12" y="16" text-anchor="middle" font-size="12" font-weight="bold" fill="${s.color}" font-family="Georgia">K</text>
                </svg>
              `)}`,height:e*.2,width:e*.2,excavate:!0}})]}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"6px",padding:"0 4px"},children:[l.jsxs("span",{style:{fontFamily:'"Georgia", serif',fontSize:"14px",fontWeight:"bold",color:s.color},children:["$",t]}),l.jsx("span",{style:{fontFamily:'"Georgia", serif',fontSize:"9px",color:s.color,letterSpacing:"1px",opacity:.8},children:s.label}),l.jsxs("span",{style:{fontFamily:'"Georgia", serif',fontSize:"14px",fontWeight:"bold",color:s.color},children:["$",t]})]})]})}):l.jsx(Vg,{value:n,size:e,level:"M",fgColor:s.color,style:{display:"block"}})}const F9="https://harmonicsystems.github.io/kinderbucks/#/scan/KB-0001",U9="https://harmonicsystems.github.io/kinderbucks/#/checkin/BROADST-BAGEL",$9="Broad Street Bagel Co.";function W9(){const[n,e]=R.useState(null),[t,r]=R.useState(0),[s,a]=R.useState(!1);return l.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)",overflow:"hidden"},children:l.jsxs("div",{style:{maxWidth:"1100px",margin:"0 auto"},children:[l.jsxs(ve.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},style:{textAlign:"center",marginBottom:"3rem"},children:[l.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",background:"linear-gradient(135deg, var(--kb-gold) 0%, #e8c33a 100%)",color:"var(--kb-navy)",padding:"0.5rem 1rem",borderRadius:"100px",fontSize:"0.85rem",fontWeight:"600",marginBottom:"1rem"},children:[l.jsx($V,{size:16})," Try It Live"]}),l.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.75rem"},children:"See Kinderbucks in Action"}),l.jsx("p",{style:{color:"var(--kb-gray-600)",maxWidth:"600px",margin:"0 auto"},children:"Scan these real QR codes with your phone's camera to experience the magic"})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(320px, 1fr))",gap:"2rem",marginBottom:"3rem"},children:[l.jsxs(ve.div,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},transition:{delay:.1},viewport:{once:!0},className:"card",style:{padding:"2rem",background:"linear-gradient(180deg, #f8fbff 0%, #ffffff 100%)",border:"2px solid #e8f0ff",position:"relative",overflow:"hidden"},children:[l.jsx("div",{style:{position:"absolute",top:0,right:0,width:"80px",height:"80px",background:"linear-gradient(135deg, transparent 50%, rgba(52, 152, 219, 0.1) 50%)"}}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[l.jsx("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, #3498db 0%, #2980b9 100%)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(fE,{size:22,color:"white"})}),l.jsxs("div",{children:[l.jsx("h3",{style:{color:"var(--kb-navy)",margin:0,fontSize:"1.2rem"},children:"Verify Currency"}),l.jsx("p",{style:{color:"var(--kb-gray-500)",margin:0,fontSize:"0.85rem"},children:"Confirm authenticity instantly"})]})]}),l.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem",marginBottom:"1.5rem"},children:"Every Kinderbuck has a unique QR code. Scan to verify it's real, see its value, and track its journey through the village."}),l.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1.5rem"},children:l.jsx(ve.div,{whileHover:{scale:1.02},transition:{type:"spring",stiffness:300},children:l.jsx(sl,{value:F9,size:130,denomination:5,showFrame:!0})})}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1rem",background:"rgba(52, 152, 219, 0.08)",borderRadius:"10px",marginBottom:"1rem"},children:[l.jsx(Nw,{size:20,color:"#3498db"}),l.jsx("span",{style:{color:"var(--kb-gray-700)",fontSize:"0.9rem"},children:"Point your phone camera at the QR code"})]}),l.jsxs("div",{style:{borderTop:"1px dashed var(--kb-gray-200)",paddingTop:"1rem"},children:[l.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)",marginBottom:"0.5rem"},children:"You'll see:"}),l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:["Verified","$5 Value","Active Status","Serial: KB-0001"].map((c,f)=>l.jsx("span",{style:{padding:"0.25rem 0.6rem",background:"var(--kb-gray-100)",borderRadius:"4px",fontSize:"0.8rem",color:"var(--kb-gray-600)"},children:c},f))})]})]}),l.jsxs(ve.div,{initial:{opacity:0,x:30},whileInView:{opacity:1,x:0},transition:{delay:.2},viewport:{once:!0},className:"card",style:{padding:"2rem",background:"linear-gradient(180deg, #f8fff8 0%, #ffffff 100%)",border:"2px solid #e8ffe8",position:"relative",overflow:"hidden"},children:[l.jsx("div",{style:{position:"absolute",top:0,right:0,width:"80px",height:"80px",background:"linear-gradient(135deg, transparent 50%, rgba(39, 174, 96, 0.1) 50%)"}}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[l.jsx("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, var(--kb-green) 0%, #1e8449 100%)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(Rt,{size:22,color:"white"})}),l.jsxs("div",{children:[l.jsx("h3",{style:{color:"var(--kb-navy)",margin:0,fontSize:"1.2rem"},children:"Check In"}),l.jsx("p",{style:{color:"var(--kb-gray-500)",margin:0,fontSize:"0.85rem"},children:"Record visits, earn rewards"})]})]}),l.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem",marginBottom:"1.5rem"},children:"Scan the QR code at each business you visit. Build your Kinderhooker status and unlock better exchange rates!"}),l.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1.5rem"},children:l.jsx(ve.div,{whileHover:{scale:1.02},transition:{type:"spring",stiffness:300},style:{background:"linear-gradient(135deg, var(--kb-green) 0%, #1e8449 100%)",borderRadius:"16px",padding:"3px",boxShadow:"0 4px 12px rgba(39, 174, 96, 0.3)"},children:l.jsxs("div",{style:{background:"white",borderRadius:"14px",padding:"12px",textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"10px",fontWeight:"600",color:"var(--kb-green)",letterSpacing:"2px",marginBottom:"8px"},children:"CHECK IN AT"}),l.jsx(sl,{value:U9,size:110,denomination:1,showFrame:!1}),l.jsxs("div",{style:{marginTop:"8px",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.4rem"},children:[l.jsx(_4,{size:14,color:"var(--kb-green)"}),l.jsx("span",{style:{fontWeight:"600",color:"var(--kb-navy)",fontSize:"0.9rem"},children:$9})]})]})})}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1rem",background:"rgba(39, 174, 96, 0.08)",borderRadius:"10px",marginBottom:"1rem"},children:[l.jsx(Nw,{size:20,color:"var(--kb-green)"}),l.jsx("span",{style:{color:"var(--kb-gray-700)",fontSize:"0.9rem"},children:"Scan when you visit a business"})]}),l.jsxs("div",{style:{borderTop:"1px dashed var(--kb-gray-200)",paddingTop:"1rem"},children:[l.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)",marginBottom:"0.5rem"},children:"You'll see:"}),l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:["Check-in Recorded","+1 Business","Tier Progress","Next Reward"].map((c,f)=>l.jsx("span",{style:{padding:"0.25rem 0.6rem",background:"var(--kb-gray-100)",borderRadius:"4px",fontSize:"0.8rem",color:"var(--kb-gray-600)"},children:c},f))})]})]})]}),l.jsxs(ve.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{delay:.3},viewport:{once:!0},style:{background:"linear-gradient(135deg, var(--kb-navy) 0%, #1a3a5c 100%)",borderRadius:"20px",padding:"2rem",color:"white",position:"relative",overflow:"hidden"},children:[l.jsx("div",{style:{position:"absolute",top:"-50%",right:"-10%",width:"300px",height:"300px",background:"radial-gradient(circle, rgba(201, 162, 39, 0.1) 0%, transparent 70%)",borderRadius:"50%"}}),l.jsxs("div",{style:{position:"relative",zIndex:1},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1.5rem"},children:[l.jsx(Xy,{size:20,color:"var(--kb-gold)"}),l.jsx("span",{style:{color:"var(--kb-gold)",fontWeight:"600",fontSize:"0.9rem"},children:"The Kinderbucks Loop"})]}),l.jsx("h3",{style:{fontSize:"1.5rem",marginBottom:"2rem",maxWidth:"500px"},children:"Check-ins unlock better exchange rates on currency"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem",alignItems:"center"},children:[l.jsxs(ve.div,{initial:{opacity:0},whileInView:{opacity:1},transition:{delay:.4},viewport:{once:!0},style:{display:"flex",alignItems:"center",gap:"1rem"},children:[l.jsx("div",{style:{width:"50px",height:"50px",background:"rgba(255,255,255,0.1)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:l.jsx(Rt,{size:24,color:"var(--kb-gold)"})}),l.jsxs("div",{children:[l.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Visit & Check In"}),l.jsx("div",{style:{fontSize:"0.85rem",opacity:.8},children:"Scan at local businesses"})]})]}),l.jsx("div",{style:{display:"flex",justifyContent:"center"},children:l.jsx(cg,{size:24,color:"var(--kb-gold)",style:{opacity:.5}})}),l.jsxs(ve.div,{initial:{opacity:0},whileInView:{opacity:1},transition:{delay:.5},viewport:{once:!0},style:{display:"flex",alignItems:"center",gap:"1rem"},children:[l.jsx("div",{style:{width:"50px",height:"50px",background:"rgba(255,255,255,0.1)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:l.jsx(zo,{size:24,color:"var(--kb-gold)"})}),l.jsxs("div",{children:[l.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Level Up"}),l.jsx("div",{style:{fontSize:"0.85rem",opacity:.8},children:"Reach new tiers"})]})]}),l.jsx("div",{style:{display:"flex",justifyContent:"center"},children:l.jsx(cg,{size:24,color:"var(--kb-gold)",style:{opacity:.5}})}),l.jsxs(ve.div,{initial:{opacity:0},whileInView:{opacity:1},transition:{delay:.6},viewport:{once:!0},style:{display:"flex",alignItems:"center",gap:"1rem"},children:[l.jsx("div",{style:{width:"50px",height:"50px",background:"linear-gradient(135deg, var(--kb-gold) 0%, #b8922d 100%)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:l.jsx(er,{size:24,color:"var(--kb-navy)"})}),l.jsxs("div",{children:[l.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Earn More"}),l.jsx("div",{style:{fontSize:"0.85rem",opacity:.8},children:"Up to 25% bonus!"})]})]})]}),l.jsx("div",{style:{marginTop:"2rem",display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[{name:"Curious",visits:"1+",bonus:"10%"},{name:"Hooked",visits:"5+",bonus:"15%"},{name:"Line & Sinker",visits:"10+",bonus:"20%"},{name:"Village Patron",visits:"15+",bonus:"25%",featured:!0}].map((c,f)=>l.jsxs("div",{style:{padding:"0.5rem 1rem",background:c.featured?"linear-gradient(135deg, var(--kb-gold) 0%, #b8922d 100%)":"rgba(255,255,255,0.1)",borderRadius:"8px",fontSize:"0.85rem",color:c.featured?"var(--kb-navy)":"white",fontWeight:c.featured?"600":"400"},children:[c.name,": ",c.bonus]},f))})]})]}),l.jsxs(ve.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:.4},viewport:{once:!0},style:{textAlign:"center",marginTop:"2.5rem"},children:[l.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1rem"},children:"Ready to start your Kinderhooker journey?"}),l.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[l.jsx(ae,{to:"/profile",className:"btn btn-primary",children:"View My Progress"}),l.jsx(ae,{to:"/businesses",className:"btn btn-secondary",children:"Find Businesses to Visit"})]})]})]})})}function H9(){return l.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[l.jsx(Sn,{}),l.jsx("section",{style:{background:"var(--kb-navy)",color:"var(--kb-white)",padding:"4rem 1rem",textAlign:"center"},children:l.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[l.jsx("h1",{style:{marginBottom:"1rem"},children:"How Kinderbucks Works"}),l.jsx("p",{style:{color:"var(--kb-gray-300)",fontSize:"1.1rem"},children:"A simple system designed to keep money local and reward community participation"})]})}),l.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:l.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[l.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem"},children:"What is Kinderbucks?"}),l.jsxs("div",{style:{color:"var(--kb-gray-700)",lineHeight:1.8},children:[l.jsxs("p",{style:{marginBottom:"1rem"},children:[l.jsx("strong",{children:"Kinderbucks"})," is a local currency program for the Village of Kinderhook, NY. It's real money  physical bills with QR codes for verification  that can only be spent at participating local businesses."]}),l.jsx("p",{style:{marginBottom:"1rem"},children:"When you exchange US dollars for Kinderbucks, you're making a commitment to spend locally. In return, you receive bonus value through our OK Membership program, turning $10 into $11, $12, or even $12.50 in local spending power."}),l.jsx("p",{children:"Every Kinderbuck spent stays in the village, circulating between businesses and residents, strengthening our local economy with each transaction."})]})]})}),l.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:l.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[l.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem",textAlign:"center"},children:"The Exchange Process"}),l.jsx("div",{style:{display:"grid",gap:"2rem",maxWidth:"700px",margin:"0 auto"},children:[{step:1,title:"Visit an Exchange Point",description:"Stop by any participating business or our central exchange location with US dollars."},{step:2,title:"Show Your Membership",description:"Scan your profile QR code or provide your phone number to apply your tier bonus."},{step:3,title:"Receive Your Kinderbucks",description:"Get physical Kinderbuck bills in $1, $5, $10, and $20 denominations with your bonus applied."},{step:4,title:"Spend Locally",description:"Use your Kinderbucks at any of our 19+ participating businesses."}].map((n,e)=>l.jsxs(ve.div,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},transition:{delay:e*.1},viewport:{once:!0},style:{display:"flex",gap:"1.5rem",alignItems:"flex-start"},children:[l.jsx("div",{style:{width:"50px",height:"50px",background:"var(--kb-navy)",color:"var(--kb-gold)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"var(--font-display)",fontWeight:"700",fontSize:"1.2rem",flexShrink:0},children:n.step}),l.jsxs("div",{children:[l.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:n.title}),l.jsx("p",{style:{color:"var(--kb-gray-600)"},children:n.description})]})]},e))})]})}),l.jsx(W9,{}),l.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:l.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[l.jsx("div",{className:"badge badge-gold",style:{marginBottom:"1rem"},children:"OK Membership"}),l.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem"},children:"The Kinderhooker Program"}),l.jsxs("div",{style:{color:"var(--kb-gray-700)",lineHeight:1.8},children:[l.jsxs("p",{style:{marginBottom:"1rem"},children:[l.jsx("strong",{children:"OK Membership"})," rewards customers who actively support local businesses. The more businesses you visit, the higher your tier  and the better your exchange rate."]}),l.jsxs("p",{style:{marginBottom:"1rem"},children:['Each participating business has a QR code. Scan it when you visit to record a "check-in." Your tier is based on how many ',l.jsx("em",{children:"unique"})," businesses you've visited, encouraging exploration of the entire village."]}),l.jsx("p",{children:`There's no cost to join. Simply start checking in at businesses, and you'll automatically become a "Kinderhooker" with access to bonus exchange rates.`})]}),l.jsxs("div",{style:{marginTop:"2rem",display:"flex",gap:"1rem",flexWrap:"wrap"},children:[l.jsx(ae,{to:"/benefits",className:"btn btn-primary",children:"View All Benefits"}),l.jsx(ae,{to:"/profile",className:"btn btn-secondary",children:"Check My Status"})]})]})}),l.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:l.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[l.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem"},children:"Frequently Asked Questions"}),[{q:"Is Kinderbucks real money?",a:"Kinderbucks are a local complementary currency. They have value within our participating business network but cannot be deposited in banks or used outside Kinderhook."},{q:"Can I convert Kinderbucks back to USD?",a:"Kinderbucks are designed to circulate locally. While businesses can redeem them, individual customers are encouraged to spend them at participating businesses."},{q:"What if a business closes?",a:"Kinderbucks remain valid at all other participating businesses. The program maintains reserves to ensure stability."},{q:"How do businesses benefit?",a:"Businesses receive customers committed to spending locally, gain exposure through our directory, and become part of a community-strengthening initiative."},{q:"Is there a fee to exchange?",a:"No fees. You receive full value plus your membership bonus when exchanging USD for Kinderbucks."}].map((n,e)=>l.jsxs("div",{style:{marginBottom:"1.5rem"},children:[l.jsx("h4",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:n.q}),l.jsx("p",{style:{color:"var(--kb-gray-600)"},children:n.a})]},e))]})}),l.jsxs("section",{style:{padding:"3rem 1rem",background:"var(--kb-navy)",color:"var(--kb-white)",textAlign:"center"},children:[l.jsx("h3",{style:{marginBottom:"1rem"},children:"Ready to get started?"}),l.jsx(ae,{to:"/exchange",className:"btn btn-gold",children:"Get Your Kinderbucks"})]}),l.jsx(En,{})]})}const Jn={curious:{name:"Curious",threshold:1,bonus:.1,color:"#888888",bgColor:"#f0f0f0",emoji:""},hooked:{name:"Hooked",threshold:5,bonus:.15,color:"#2e7d32",bgColor:"#e8f5e9",emoji:""},lineAndSinker:{name:"Line & Sinker",threshold:10,bonus:.2,color:"#1565c0",bgColor:"#e3f2fd",emoji:""},patron:{name:"Village Patron",threshold:15,bonus:.25,color:"#c9a227",bgColor:"#fff8e1",emoji:""}};function Lg(n){return n>=15?"patron":n>=10?"lineAndSinker":n>=5?"hooked":n>=1?"curious":null}function K9(n){const e=["curious","hooked","lineAndSinker","patron"],t=e.indexOf(n);return t<e.length-1?e[t+1]:null}function dT(n){const e=Lg(n),t=K9(e);if(!t)return{progress:100,remaining:0,nextTier:null};const r=Jn[t],s=e?Jn[e].threshold:0,a=(n-s)/(r.threshold-s)*100;return{progress:Math.min(100,Math.max(0,a)),remaining:r.threshold-n,nextTier:r}}function q9(){const n=[{Icon:g4,title:"Bonus Exchange Rates",description:"Get up to 25% extra when converting USD to Kinderbucks. A $100 exchange becomes $125 in local spending power.",highlight:"Up to 25% bonus"},{Icon:Rt,title:"Exclusive Local Deals",description:"Participating businesses offer special discounts and promotions exclusively for Kinderhooker members.",highlight:"Member-only offers"},{Icon:er,title:"Priority Access",description:"Higher-tier members get early access to limited events, seasonal specials, and new business openings.",highlight:"First in line"},{Icon:cE,title:"Seasonal Bonuses",description:"Extra rewards during holidays and special village events. Double check-in points, bonus exchanges, and more.",highlight:"Special events"},{Icon:aE,title:"Impact Tracking",description:"See exactly how your spending supports local businesses and contributes to the village economy.",highlight:"Track your impact"},{Icon:_r,title:"Community Recognition",description:"Village Patrons are recognized in our annual report and invited to exclusive community appreciation events.",highlight:"Be celebrated"}];return l.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[l.jsx(Sn,{}),l.jsx("section",{style:{background:"linear-gradient(135deg, var(--kb-gold-dark) 0%, var(--kb-gold) 100%)",color:"var(--kb-navy)",padding:"4rem 1rem",textAlign:"center"},children:l.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[l.jsx("div",{className:"badge badge-navy",style:{marginBottom:"1rem"},children:"OK Membership"}),l.jsx("h1",{style:{marginBottom:"1rem"},children:"Member Benefits & Rewards"}),l.jsx("p",{style:{fontSize:"1.1rem",opacity:.9},children:"The more you support local, the more you earn. It pays to be a Kinderhooker."})]})}),l.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:l.jsxs("div",{style:{maxWidth:"1100px",margin:"0 auto"},children:[l.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem",textAlign:"center"},children:"Membership Tiers"}),l.jsx("p",{style:{color:"var(--kb-gray-500)",textAlign:"center",marginBottom:"2rem"},children:"Visit more businesses to unlock better rewards"}),l.jsx("div",{style:{overflowX:"auto"},children:l.jsxs("table",{style:{minWidth:"700px"},children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{style:{width:"25%"},children:"Tier"}),l.jsx("th",{style:{width:"20%"},children:"Requirement"}),l.jsx("th",{style:{width:"20%"},children:"Exchange Bonus"}),l.jsx("th",{style:{width:"35%"},children:"Perks"})]})}),l.jsxs("tbody",{children:[l.jsxs("tr",{children:[l.jsx("td",{children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(Xt,{size:18,color:"#888"}),l.jsx("span",{style:{fontWeight:"600",color:"#888"},children:"Curious"})]})}),l.jsx("td",{children:"1+ businesses"}),l.jsx("td",{children:l.jsx("span",{style:{color:"#888",fontWeight:"600"},children:"10%"})}),l.jsx("td",{style:{fontSize:"0.9rem",color:"var(--kb-gray-600)"},children:"Basic exchange bonus, check-in tracking"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(er,{size:18,color:"#2e7d32"}),l.jsx("span",{style:{fontWeight:"600",color:"#2e7d32"},children:"Hooked"})]})}),l.jsx("td",{children:"5+ businesses"}),l.jsx("td",{children:l.jsx("span",{style:{color:"#2e7d32",fontWeight:"600"},children:"15%"})}),l.jsx("td",{style:{fontSize:"0.9rem",color:"var(--kb-gray-600)"},children:"Seasonal bonus events, member deals"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(Zr,{size:18,color:"#1565c0"}),l.jsx("span",{style:{fontWeight:"600",color:"#1565c0"},children:"Line & Sinker"})]})}),l.jsx("td",{children:"10+ businesses"}),l.jsx("td",{children:l.jsx("span",{style:{color:"#1565c0",fontWeight:"600"},children:"20%"})}),l.jsx("td",{style:{fontSize:"0.9rem",color:"var(--kb-gray-600)"},children:"Priority access, exclusive events"})]}),l.jsxs("tr",{style:{background:"rgba(201, 162, 39, 0.1)"},children:[l.jsx("td",{children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(Bn,{size:18,color:"#c9a227"}),l.jsx("span",{style:{fontWeight:"600",color:"#c9a227"},children:"Village Patron"})]})}),l.jsx("td",{children:"15+ businesses"}),l.jsx("td",{children:l.jsx("span",{style:{color:"#c9a227",fontWeight:"600"},children:"25%"})}),l.jsx("td",{style:{fontSize:"0.9rem",color:"var(--kb-gray-600)"},children:"All perks + community recognition + VIP events"})]})]})]})}),l.jsx("div",{style:{textAlign:"center",marginTop:"2rem"},children:l.jsx(ae,{to:"/profile",className:"btn btn-primary",children:"Check My Progress"})})]})}),l.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:l.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[l.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem",textAlign:"center"},children:"All Member Benefits"}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1.5rem"},children:n.map((e,t)=>l.jsx(ve.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:t*.1},viewport:{once:!0},className:"card",children:l.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[l.jsx("div",{style:{width:"50px",height:"50px",background:"var(--kb-navy)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:l.jsx(e.Icon,{size:24,color:"var(--kb-gold)",strokeWidth:1.5})}),l.jsxs("div",{children:[l.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"0.25rem",fontSize:"1.1rem"},children:e.title}),l.jsx("span",{className:"badge badge-gold",style:{marginBottom:"0.5rem"},children:e.highlight}),l.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem",marginTop:"0.5rem"},children:e.description})]})]})},t))})]})}),l.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:l.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto",textAlign:"center"},children:[l.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"See Your Savings"}),l.jsx("p",{style:{color:"var(--kb-gray-500)",marginBottom:"2rem"},children:"Example: Exchange $100 USD"}),l.jsx("div",{className:"card",style:{padding:"2rem"},children:l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[{tier:"Curious",bonus:10,color:"#888"},{tier:"Hooked",bonus:15,color:"#2e7d32"},{tier:"Line & Sinker",bonus:20,color:"#1565c0"},{tier:"Village Patron",bonus:25,color:"#c9a227"}].map((e,t)=>l.jsxs("div",{style:{padding:"1rem",borderRadius:"8px",background:`${e.color}10`,border:`1px solid ${e.color}30`},children:[l.jsx("div",{style:{fontSize:"0.85rem",color:e.color,fontWeight:"600"},children:e.tier}),l.jsxs("div",{style:{fontFamily:"var(--font-display)",fontSize:"1.8rem",fontWeight:"700",color:e.color},children:["$",100+e.bonus]}),l.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:"in Kinderbucks"})]},t))})}),l.jsx("div",{style:{marginTop:"2rem"},children:l.jsx(ae,{to:"/exchange",className:"btn btn-gold",style:{padding:"1rem 2rem"},children:"Start Exchanging"})})]})}),l.jsxs("section",{style:{padding:"3rem 1rem",background:"var(--kb-green)",color:"var(--kb-white)",textAlign:"center"},children:[l.jsx("h3",{style:{marginBottom:"1rem"},children:"Start earning rewards today"}),l.jsx("p",{style:{opacity:.9,marginBottom:"1.5rem"},children:"Visit a participating business and scan their QR code to begin"}),l.jsx(ae,{to:"/businesses",className:"btn btn-gold",children:"Find Businesses Near You"})]}),l.jsx(En,{})]})}const ku="businesses";async function R0(n){const e=Ut(qe,ku,n),t=await wl(e);return t.exists()?{code:t.id,...t.data()}:null}async function Us(){const n=Ms(bn(qe,ku),nl("name"));return(await vr(n)).docs.map(t=>({code:t.id,...t.data()}))}async function tk(n,e,t){await yu(Ut(qe,ku,n),{code:n,name:e,category:t,isActive:!0,checkinCount:0,createdAt:Vt()})}async function G9(n){const e=Ut(qe,ku,n);await Jr(e,{checkinCount:Oy(1)})}async function Q9(n,e){const t=Ut(qe,ku,n);await Jr(t,{isActive:e})}const Rp={food:{label:"Food & Drink",Icon:pE,color:"#e74c3c"},retail:{label:"Retail",Icon:mE,color:"#9b59b6"},services:{label:"Services",Icon:oE,color:"#3498db"},arts:{label:"Arts & Culture",Icon:hE,color:"#1abc9c"}};function Y9(){const[n,e]=R.useState([]),[t,r]=R.useState(!0),[s,a]=R.useState("all");R.useEffect(()=>{async function d(){const m=await Us();e(m.filter(g=>g.isActive)),r(!1)}d()},[]);const c=s==="all"?n:n.filter(d=>d.category===s),f={total:n.length,food:n.filter(d=>d.category==="food").length,retail:n.filter(d=>d.category==="retail").length};return l.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[l.jsx(Sn,{}),l.jsx("section",{style:{background:"var(--kb-navy)",color:"var(--kb-white)",padding:"4rem 1rem",textAlign:"center"},children:l.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[l.jsx("h1",{style:{marginBottom:"1rem"},children:"For Local Businesses"}),l.jsx("p",{style:{color:"var(--kb-gray-300)",fontSize:"1.1rem",marginBottom:"2rem"},children:"Join the Kinderbucks network and connect with customers committed to shopping local"}),l.jsx(ae,{to:"/admin/businesses",className:"btn btn-gold",children:"Register Your Business"})]})}),l.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:l.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[l.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem",textAlign:"center"},children:"Why Accept Kinderbucks?"}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"2rem"},children:[{Icon:_r,title:"Committed Customers",description:"Kinderbucks holders have already decided to spend locally. They're not comparison shopping online."},{Icon:iV,title:"Money Stays Local",description:"Unlike credit cards that send fees elsewhere, Kinderbucks keep circulating in our village economy."},{Icon:q4,title:"Free Marketing",description:"Get listed in our business directory, featured on our homepage, and promoted to all members."},{Icon:DV,title:"Community Standing",description:"Show customers you're invested in Kinderhook's future. Participating businesses are community leaders."},{Icon:Ky,title:"Easy Redemption",description:"Redeem Kinderbucks for USD at any time through our simple merchant portal. No waiting."},{Icon:aE,title:"Customer Insights",description:"Access check-in data and understand your customers' behavior across the village."}].map((d,m)=>l.jsxs(ve.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:m*.1},viewport:{once:!0},className:"card",style:{textAlign:"center"},children:[l.jsx("div",{style:{width:"60px",height:"60px",background:"var(--kb-navy)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:l.jsx(d.Icon,{size:28,color:"var(--kb-gold)",strokeWidth:1.5})}),l.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:d.title}),l.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem"},children:d.description})]},m))})]})}),l.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:l.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[l.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem",textAlign:"center"},children:"How It Works"}),l.jsx("div",{style:{display:"grid",gap:"1.5rem"},children:[{step:1,title:"Register",desc:"Sign up as a participating business. It's free to join."},{step:2,title:"Get Your QR Code",desc:"We'll provide a unique check-in QR code for your location."},{step:3,title:"Display It",desc:"Put the QR code at your counter or entrance for customers to scan."},{step:4,title:"Accept Kinderbucks",desc:"Take Kinderbucks as payment, just like cash. Same denominations."},{step:5,title:"Redeem Anytime",desc:"Exchange accumulated Kinderbucks back to USD when you need."}].map((d,m)=>l.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center",background:"var(--kb-white)",padding:"1.5rem",borderRadius:"12px",boxShadow:"var(--shadow-sm)"},children:[l.jsx("div",{style:{width:"40px",height:"40px",background:"var(--kb-gold)",color:"var(--kb-navy)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"700",flexShrink:0},children:d.step}),l.jsxs("div",{children:[l.jsx("h4",{style:{color:"var(--kb-navy)",marginBottom:"0.25rem"},children:d.title}),l.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem",margin:0},children:d.desc})]})]},m))})]})}),l.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:l.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[l.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem",textAlign:"center"},children:"Participating Businesses"}),l.jsxs("p",{style:{color:"var(--kb-gray-500)",textAlign:"center",marginBottom:"2rem"},children:[f.total," businesses currently accepting Kinderbucks"]}),l.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center",marginBottom:"2rem",flexWrap:"wrap"},children:[l.jsxs("button",{onClick:()=>a("all"),className:s==="all"?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem"},children:["All (",f.total,")"]}),Object.entries(Rp).map(([d,m])=>l.jsxs("button",{onClick:()=>a(d),className:s===d?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem",display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(m.Icon,{size:16})," ",m.label]},d))]}),t?l.jsx("p",{style:{textAlign:"center"},children:"Loading businesses..."}):c.length===0?l.jsxs("p",{style:{textAlign:"center",color:"var(--kb-gray-500)"},children:["No businesses found. ",l.jsx(ae,{to:"/admin/businesses",children:"Add some!"})]}):l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:"1rem"},children:c.map((d,m)=>{const g=Rp[d.category]||Rp.services;return l.jsxs(ve.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:m*.03},className:"card",style:{padding:"1.25rem"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[l.jsx("div",{style:{width:"40px",height:"40px",background:`${g.color}15`,borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(g.Icon,{size:20,color:g.color,strokeWidth:1.5})}),l.jsxs("div",{children:[l.jsx("h4",{style:{color:"var(--kb-navy)",margin:0,fontSize:"1rem"},children:d.name}),l.jsx("span",{style:{fontSize:"0.8rem",color:g.color},children:g.label})]})]}),d.checkinCount>0&&l.jsxs("div",{style:{marginTop:"0.75rem",fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:[d.checkinCount," check-ins"]})]},d.code)})})]})}),l.jsxs("section",{style:{padding:"3rem 1rem",background:"var(--kb-gold)",color:"var(--kb-navy)",textAlign:"center"},children:[l.jsx("h3",{style:{marginBottom:"1rem"},children:"Ready to join the network?"}),l.jsx("p",{style:{opacity:.9,marginBottom:"1.5rem"},children:"Registration is free. Start accepting Kinderbucks today."}),l.jsx(ae,{to:"/admin/businesses",className:"btn btn-primary",children:"Register Your Business"})]}),l.jsx(En,{})]})}const hT="members";function Kh(){return Mo.currentUser?Mo.currentUser.uid:qh()}function qh(){let n=localStorage.getItem("kinderhooker_visitor_id");return n||(n="anon_"+Math.random().toString(36).substring(2,15),localStorage.setItem("kinderhooker_visitor_id",n)),n}async function bu(n){const e=Ut(qe,hT,n),t=await wl(e);return t.exists()?{visitorId:t.id,...t.data()}:null}async function X9(n,e){const t=Ut(qe,hT,n),r=await wl(t);if(r.exists()){const s=r.data(),a=s.businessesVisited||[],c=!a.includes(e),f=c?a.length+1:a.length,d=Lg(f),m=d!==s.tier;return await Jr(t,{businessesVisited:TD(e),totalCheckins:Oy(1),tier:d,lastCheckin:Vt()}),{isNewBusiness:c,tierChanged:m,oldTier:s.tier,newTier:d,businessesVisited:c?[...a,e]:a,totalCheckins:(s.totalCheckins||0)+1}}else{const s=Lg(1);return await yu(t,{visitorId:n,tier:s,businessesVisited:[e],totalCheckins:1,createdAt:Vt(),lastCheckin:Vt(),email:null}),{isNewBusiness:!0,tierChanged:!0,oldTier:null,newTier:s,businessesVisited:[e],totalCheckins:1}}}const J9={curious:Xt,hooked:er,lineAndSinker:Zr,patron:Bn};function Z9(){const[n,e]=R.useState(null),[t,r]=R.useState(!0),[s,a]=R.useState(20),[c,f]=R.useState(!1),[d,m]=R.useState(!1);R.useEffect(()=>{async function N(){const D=qh(),P=await bu(D);e(P),r(!1)}N()},[]);const g=(n==null?void 0:n.tier)||"curious",y=Jn[g]||Jn.curious,x=n?y.bonus:.1,S=s*x,k=s+S,T=async()=>{f(!0);try{await Wy(bn(qe,"exchanges"),{visitorId:qh(),usdAmount:s,bonusRate:x,bonusAmount:S,kinderbucksAmount:k,tier:g,status:"pending",createdAt:Vt()}),m(!0)}catch(N){console.error("Exchange error:",N),alert("Error submitting exchange request")}f(!1)},E=[10,20,50,100];return l.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[l.jsx(Sn,{}),l.jsx("section",{style:{background:"linear-gradient(135deg, var(--kb-green) 0%, var(--kb-green-light) 100%)",color:"var(--kb-white)",padding:"3rem 1rem",textAlign:"center"},children:l.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto"},children:[l.jsx("h1",{style:{marginBottom:"0.5rem"},children:"Get Kinderbucks"}),l.jsx("p",{style:{opacity:.9},children:"Exchange USD for local currency with bonus value"})]})}),l.jsx("section",{style:{padding:"3rem 1rem",background:"var(--kb-cream)",flex:1},children:l.jsx("div",{style:{maxWidth:"500px",margin:"0 auto"},children:d?l.jsxs(ve.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"card",style:{textAlign:"center",padding:"3rem 2rem"},children:[l.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:""}),l.jsx("h2",{style:{color:"var(--kb-green)",marginBottom:"1rem"},children:"Exchange Requested!"}),l.jsxs("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem"},children:["Your exchange request for ",l.jsxs("strong",{children:["$",s," USD"]})," "," ",l.jsxs("strong",{children:["$",k.toFixed(2)," Kinderbucks"]})," has been submitted."]}),l.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem",marginBottom:"2rem"},children:"Visit any exchange point to complete your transaction and receive your Kinderbucks."}),l.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[l.jsx("button",{onClick:()=>m(!1),className:"btn btn-primary",children:"Exchange More"}),l.jsx(ae,{to:"/account",className:"btn btn-secondary",children:"View Account"})]})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)",marginBottom:"0.25rem"},children:"Your Tier"}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(()=>{const N=J9[g]||Xt;return l.jsx(N,{size:28,color:y.color,strokeWidth:1.5})})(),l.jsx("span",{style:{fontWeight:"600",color:y.color,fontSize:"1.2rem"},children:y.name})]})]}),l.jsxs("div",{style:{textAlign:"right"},children:[l.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)",marginBottom:"0.25rem"},children:"Bonus Rate"}),l.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:y.color},children:[Math.round(x*100),"%"]})]})]}),!n&&l.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"var(--kb-gray-50)",borderRadius:"8px",fontSize:"0.85rem",color:"var(--kb-gray-600)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(O4,{size:16,color:"var(--kb-gold)"})," ",l.jsx(ae,{to:"/profile",style:{color:"var(--kb-navy)"},children:"Visit businesses"})," to increase your tier and get better rates!"]})]}),l.jsxs("div",{className:"card",children:[l.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem"},children:"Exchange Calculator"}),l.jsxs("div",{style:{marginBottom:"1.5rem"},children:[l.jsx("label",{children:"Amount (USD)"}),l.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem"},children:E.map(N=>l.jsxs("button",{onClick:()=>a(N),className:s===N?"btn btn-primary":"btn btn-secondary",style:{flex:1,padding:"0.5rem"},children:["$",N]},N))}),l.jsx("input",{type:"number",value:s,onChange:N=>a(Math.max(1,Number(N.target.value))),min:"1",style:{width:"100%"}})]}),l.jsxs("div",{style:{background:"var(--kb-gray-50)",borderRadius:"12px",padding:"1.5rem",marginBottom:"1.5rem"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.75rem"},children:[l.jsx("span",{style:{color:"var(--kb-gray-600)"},children:"USD Amount"}),l.jsxs("span",{style:{fontWeight:"600"},children:["$",s.toFixed(2)]})]}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.75rem"},children:[l.jsxs("span",{style:{color:"var(--kb-gray-600)"},children:[y.name," Bonus (",Math.round(x*100),"%)"]}),l.jsxs("span",{style:{fontWeight:"600",color:"var(--kb-green)"},children:["+$",S.toFixed(2)]})]}),l.jsx("div",{className:"divider",style:{margin:"0.75rem 0"}}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[l.jsx("span",{style:{color:"var(--kb-navy)",fontWeight:"600"},children:"You Receive"}),l.jsxs("span",{style:{fontFamily:"var(--font-display)",fontSize:"1.8rem",fontWeight:"700",color:"var(--kb-gold-dark)"},children:["$",k.toFixed(2)]})]}),l.jsx("div",{style:{textAlign:"right",fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Kinderbucks"})]}),l.jsx("button",{onClick:T,disabled:c,className:"btn btn-gold",style:{width:"100%",padding:"1rem",fontSize:"1.1rem"},children:c?"Processing...":`Exchange $${s} for $${k.toFixed(2)} Kinderbucks`}),l.jsx("p",{style:{textAlign:"center",fontSize:"0.85rem",color:"var(--kb-gray-500)",marginTop:"1rem"},children:"Complete your exchange at any participating business or exchange point"})]}),l.jsxs("div",{className:"card",style:{marginTop:"1.5rem"},children:[l.jsx("h4",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Exchange Locations"}),l.jsxs("div",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem"},children:[l.jsxs("p",{style:{marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(No,{size:16,color:"var(--kb-green)"})," ",l.jsx("strong",{children:"OK Pantry"})," - 2 Hudson Street"]}),l.jsxs("p",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(No,{size:16,color:"var(--kb-green)"})," ",l.jsx("strong",{children:"Village Hall"})," - During events"]})]})]})]})})}),l.jsx(En,{})]})}const nk={curious:Xt,hooked:er,lineAndSinker:Zr,patron:Bn};function e8(){var N,D;const[n,e]=R.useState(null),[t,r]=R.useState([]),[s,a]=R.useState([]),[c,f]=R.useState(!0),[d,m]=R.useState("overview");if(R.useEffect(()=>{async function P(){const G=qh(),F=await bu(G),$=await Us();try{const A=Ms(bn(qe,"exchanges"),Jc("visitorId","==",G),nl("createdAt","desc")),C=await vr(A);a(C.docs.map(M=>({id:M.id,...M.data()})))}catch(A){console.error("Error loading exchanges:",A)}e(F),r($),f(!1)}P()},[]),c)return l.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[l.jsx(Sn,{}),l.jsx("div",{className:"page page-center",style:{flex:1},children:l.jsx("div",{style:{fontSize:"2rem"},children:"Loading..."})}),l.jsx(En,{})]});const g=(n==null?void 0:n.tier)||null,y=g?Jn[g]:null,x=((N=n==null?void 0:n.businessesVisited)==null?void 0:N.length)||0,S=dT(x),k=((D=n==null?void 0:n.businessesVisited)==null?void 0:D.map(P=>{const G=t.find(F=>F.code===P);return G?G.name:P}))||[],T=t.filter(P=>{var G;return P.isActive&&!((G=n==null?void 0:n.businessesVisited)!=null&&G.includes(P.code))}),E=s.reduce((P,G)=>P+(G.kinderbucksAmount||0),0);return l.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[l.jsx(Sn,{}),l.jsx("section",{style:{background:"var(--kb-navy)",color:"var(--kb-white)",padding:"2rem 1rem"},children:l.jsx("div",{style:{maxWidth:"800px",margin:"0 auto"},children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[l.jsx("div",{style:{width:"80px",height:"80px",background:y?y.color:"var(--kb-gray-500)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:(()=>{const P=g&&nk[g]?nk[g]:Xt;return l.jsx(P,{size:40,color:"white",strokeWidth:1.5})})()}),l.jsxs("div",{style:{flex:1},children:[l.jsx("div",{style:{fontSize:"0.9rem",color:"var(--kb-gray-300)",marginBottom:"0.25rem"},children:"OK Membership"}),l.jsx("h1",{style:{fontSize:"1.5rem",marginBottom:"0.25rem"},children:y?y.name:"New Member"}),l.jsx("div",{style:{fontSize:"0.9rem",color:"var(--kb-gold)"},children:y?`${Math.round(y.bonus*100)}% Exchange Bonus`:"Start exploring to earn rewards"})]}),l.jsx(ae,{to:"/exchange",className:"btn btn-gold",children:"Get Kinderbucks"})]})})}),l.jsx("div",{style:{background:"var(--kb-white)",borderBottom:"1px solid var(--kb-gray-200)",position:"sticky",top:"70px",zIndex:50},children:l.jsx("div",{style:{maxWidth:"800px",margin:"0 auto",display:"flex",gap:"2rem",padding:"0 1rem"},children:["overview","progress","history"].map(P=>l.jsx("button",{onClick:()=>m(P),style:{background:"none",border:"none",padding:"1rem 0",fontSize:"0.95rem",fontWeight:d===P?"600":"400",color:d===P?"var(--kb-navy)":"var(--kb-gray-500)",borderBottom:d===P?"2px solid var(--kb-gold)":"2px solid transparent",cursor:"pointer",textTransform:"capitalize"},children:P},P))})}),l.jsx("section",{style:{padding:"2rem 1rem",background:"var(--kb-cream)",flex:1},children:l.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[d==="overview"&&l.jsxs(ve.div,{initial:{opacity:0},animate:{opacity:1},children:[l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[l.jsxs("div",{className:"card",style:{textAlign:"center"},children:[l.jsx("div",{className:"stat-value",children:x}),l.jsx("div",{className:"stat-label",children:"Businesses Visited"})]}),l.jsxs("div",{className:"card",style:{textAlign:"center"},children:[l.jsx("div",{className:"stat-value",children:(n==null?void 0:n.totalCheckins)||0}),l.jsx("div",{className:"stat-label",children:"Total Check-ins"})]}),l.jsxs("div",{className:"card",style:{textAlign:"center"},children:[l.jsxs("div",{className:"stat-value",style:{color:"var(--kb-gold)"},children:["$",E.toFixed(0)]}),l.jsx("div",{className:"stat-label",children:"Kinderbucks Exchanged"})]})]}),l.jsxs("div",{className:"card",children:[l.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Quick Actions"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"0.75rem"},children:[l.jsxs(ae,{to:"/exchange",className:"btn btn-gold",style:{textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[l.jsx(Ky,{size:18})," Exchange"]}),l.jsxs(ae,{to:"/businesses",className:"btn btn-secondary",style:{textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[l.jsx(Rt,{size:18})," Find Businesses"]}),l.jsxs(ae,{to:"/benefits",className:"btn btn-secondary",style:{textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[l.jsx(Xy,{size:18})," View Benefits"]})]})]})]}),d==="progress"&&l.jsxs(ve.div,{initial:{opacity:0},animate:{opacity:1},children:[y&&l.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[l.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Tier Progress"}),S.nextTier?l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{marginBottom:"0.5rem"},children:[l.jsx("span",{style:{color:y.color,fontWeight:"600"},children:y.name}),l.jsx("span",{style:{color:"var(--kb-gray-400)",margin:"0 0.5rem"},children:""}),l.jsx("span",{style:{color:S.nextTier.color,fontWeight:"600"},children:S.nextTier.name})]}),l.jsx("div",{className:"progress-bar",style:{height:"12px",marginBottom:"0.5rem"},children:l.jsx("div",{className:"progress-bar-fill",style:{width:`${S.progress}%`,background:y.color}})}),l.jsxs("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:[S.remaining," more business",S.remaining!==1?"es":""," to reach ",S.nextTier.name]})]}):l.jsxs("p",{style:{color:"var(--kb-gold)",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(Bn,{size:20})," Maximum tier reached! You're a Village Patron!"]})]}),l.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[l.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(_i,{size:20,color:"var(--kb-green)"})," Businesses Visited (",k.length,")"]}),k.length>0?l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:k.map((P,G)=>l.jsxs("span",{style:{background:"#d4edda",color:"var(--kb-green)",padding:"0.4rem 0.75rem",borderRadius:"100px",fontSize:"0.85rem",display:"inline-flex",alignItems:"center",gap:"0.25rem"},children:[l.jsx(_i,{size:14})," ",P]},G))}):l.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"No businesses visited yet"})]}),T.length>0&&l.jsxs("div",{className:"card",children:[l.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(lE,{size:20,color:"var(--kb-navy)"})," Still to Explore (",T.length,")"]}),l.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:[T.slice(0,12).map(P=>l.jsx("span",{style:{background:"var(--kb-gray-100)",color:"var(--kb-gray-600)",padding:"0.4rem 0.75rem",borderRadius:"100px",fontSize:"0.85rem"},children:P.name},P.code)),T.length>12&&l.jsxs("span",{style:{color:"var(--kb-gray-500)",padding:"0.4rem"},children:["+",T.length-12," more"]})]})]})]}),d==="history"&&l.jsx(ve.div,{initial:{opacity:0},animate:{opacity:1},children:l.jsxs("div",{className:"card",children:[l.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Exchange History"}),s.length>0?l.jsx("div",{children:s.map((P,G)=>{var F,$,A,C;return l.jsxs("div",{style:{padding:"1rem 0",borderBottom:G<s.length-1?"1px solid var(--kb-gray-100)":"none",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[l.jsxs("div",{children:[l.jsxs("div",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:["$",P.usdAmount,"  $",(F=P.kinderbucksAmount)==null?void 0:F.toFixed(2)," KB"]}),l.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:[((C=(A=($=P.createdAt)==null?void 0:$.toDate)==null?void 0:A.call($))==null?void 0:C.toLocaleDateString())||"Pending","  ",Math.round(P.bonusRate*100),"% bonus"]})]}),l.jsx("span",{className:"badge",style:{background:P.status==="completed"?"#d4edda":"#fff3cd",color:P.status==="completed"?"var(--kb-green)":"#856404"},children:P.status})]},P.id)})}):l.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"var(--kb-gray-500)"},children:[l.jsx("p",{style:{marginBottom:"1rem"},children:"No exchanges yet"}),l.jsx(ae,{to:"/exchange",className:"btn btn-gold",children:"Make Your First Exchange"})]})]})})]})}),l.jsx(En,{})]})}const rk={curious:Xt,hooked:er,lineAndSinker:Zr,patron:Bn},kc={curious:"#888888",hooked:"#2e7d32",lineAndSinker:"#1565c0",patron:"#c9a227"};function t8(){var T,E;const{user:n,profile:e,isAuthenticated:t}=Vi(),[r,s]=R.useState(null),[a,c]=R.useState([]),[f,d]=R.useState(!0);R.useEffect(()=>{async function N(){const D=Kh(),P=await bu(D),G=await Us();s(P),c(G.filter(F=>F.isActive)),d(!1)}N()},[n]);const m=(r==null?void 0:r.tier)||"curious",g=Jn[m],y=((T=r==null?void 0:r.businessesVisited)==null?void 0:T.length)||0,x=dT(y),S=((E=r==null?void 0:r.businessesVisited)==null?void 0:E.map(N=>{const D=a.find(P=>P.code===N);return D?D.name:N}))||[],k=a.filter(N=>{var D;return!((D=r==null?void 0:r.businessesVisited)!=null&&D.includes(N.code))});return l.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[l.jsx(Sn,{}),l.jsx("main",{style:{flex:1,background:"var(--kb-cream)",padding:"2rem 1rem"},children:l.jsx("div",{style:{maxWidth:"600px",margin:"0 auto"},children:f?l.jsx("div",{style:{textAlign:"center",padding:"4rem 0"},children:l.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading your profile..."})}):r?l.jsxs(ve.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[t&&e&&l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1.5rem",padding:"1rem",background:"white",borderRadius:"12px"},children:[l.jsx("div",{style:{width:"48px",height:"48px",background:"var(--kb-gray-100)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(Ha,{size:24,color:"var(--kb-gray-500)"})}),l.jsxs("div",{children:[l.jsx("div",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:e.displayName||n.email}),l.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:n.email})]})]}),l.jsxs(ve.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.1},style:{background:`linear-gradient(135deg, ${kc[m]} 0%, ${kc[m]}dd 100%)`,borderRadius:"20px",padding:"2rem",color:"white",textAlign:"center",marginBottom:"1.5rem",boxShadow:"0 4px 20px rgba(0,0,0,0.2)"},children:[(()=>{const N=rk[m]||Xt;return l.jsx(N,{size:48,color:"white",strokeWidth:1.5,style:{marginBottom:"0.5rem"}})})(),l.jsx("div",{style:{fontSize:"1.8rem",fontWeight:"bold",marginBottom:"0.25rem"},children:g.name}),l.jsxs("div",{style:{opacity:.9,fontSize:"1rem"},children:[Math.round(g.bonus*100),"% Kinderbuck Exchange Bonus"]})]}),l.jsxs(ae,{to:"/card",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",width:"100%",padding:"1.25rem",background:"linear-gradient(135deg, var(--kb-gold) 0%, #d4af37 100%)",color:"var(--kb-navy)",borderRadius:"16px",fontSize:"1.25rem",fontWeight:"700",textDecoration:"none",marginBottom:"1.5rem",boxShadow:"0 4px 12px rgba(201, 162, 39, 0.3)"},children:[l.jsx(ug,{size:28}),"SHOW MY OK CARD"]}),l.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[l.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",textAlign:"center"},children:[y," Business",y!==1?"es":""," Visited"]}),x.nextTier?l.jsxs(l.Fragment,{children:[l.jsx("div",{style:{background:"var(--kb-gray-100)",borderRadius:"10px",height:"28px",overflow:"hidden",marginBottom:"0.75rem"},children:l.jsxs(ve.div,{initial:{width:0},animate:{width:`${x.progress}%`},transition:{delay:.3,duration:.8},style:{background:`linear-gradient(90deg, ${kc[m]}, ${x.nextTier.color})`,height:"100%",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"0.85rem",fontWeight:"bold"},children:[y,"/",x.nextTier.threshold]})}),l.jsxs("p",{style:{color:"var(--kb-gray-600)",textAlign:"center"},children:[l.jsx("strong",{children:x.remaining})," more to reach"," ",l.jsx("strong",{style:{color:x.nextTier.color},children:x.nextTier.name})]})]}):l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",color:"var(--kb-gold-dark)",fontWeight:"600"},children:[l.jsx(Bn,{size:20})," Maximum tier reached! You're a true Village Patron!"]})]}),S.length>0&&l.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[l.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(_i,{size:20,color:"var(--kb-green)"})," Visited"]}),l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:S.map((N,D)=>l.jsxs("span",{style:{padding:"0.4rem 0.8rem",background:"#e8f5e9",borderRadius:"6px",color:"#2e7d32",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:[l.jsx(_i,{size:14})," ",N]},D))})]}),k.length>0&&l.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[l.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(lE,{size:20})," Still to Explore (",k.length,")"]}),l.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:[k.slice(0,10).map(N=>l.jsx("span",{style:{padding:"0.4rem 0.8rem",background:"var(--kb-gray-100)",borderRadius:"6px",color:"var(--kb-gray-600)",fontSize:"0.9rem"},children:N.name},N.code)),k.length>10&&l.jsxs("span",{style:{padding:"0.4rem 0.8rem",color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:["+",k.length-10," more"]})]}),l.jsxs(ae,{to:"/businesses",style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",marginTop:"1rem",color:"var(--kb-navy)",fontWeight:"500",fontSize:"0.9rem"},children:["View all businesses ",l.jsx(cg,{size:16})]})]}),l.jsxs("div",{style:{textAlign:"center",color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:["Total check-ins: ",r.totalCheckins||0]}),!t&&l.jsxs("div",{style:{marginTop:"2rem",padding:"1rem",background:"rgba(201, 162, 39, 0.1)",borderRadius:"12px",textAlign:"center"},children:[l.jsx("p",{style:{color:"var(--kb-gray-700)",marginBottom:"0.75rem"},children:"Sign in to save your progress across devices"}),l.jsxs(ae,{to:"/login",className:"btn btn-gold",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(rl,{size:18})," Sign In"]})]})]}):l.jsxs(ve.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[l.jsxs("div",{className:"card",style:{padding:"2rem",textAlign:"center",marginBottom:"2rem"},children:[l.jsx("div",{style:{width:"80px",height:"80px",background:"linear-gradient(135deg, var(--kb-navy) 0%, var(--kb-navy-light) 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.5rem"},children:l.jsx(Xy,{size:36,color:"var(--kb-gold)"})}),l.jsx("h1",{style:{color:"var(--kb-navy)",marginBottom:"0.75rem"},children:"Welcome to Kinderbucks!"}),l.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem",fontSize:"1.05rem"},children:"You haven't checked in anywhere yet. Visit a local business and scan their QR code to start building your Kinderhooker status!"}),!t&&l.jsxs("div",{style:{background:"rgba(201, 162, 39, 0.1)",borderRadius:"12px",padding:"1rem",marginBottom:"1.5rem"},children:[l.jsx("p",{style:{color:"var(--kb-gray-700)",fontSize:"0.9rem",marginBottom:"0.75rem"},children:"Sign in to save your progress across devices"}),l.jsxs(ae,{to:"/login",className:"btn btn-gold",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(rl,{size:18})," Sign In or Create Account"]})]}),l.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap",justifyContent:"center"},children:[l.jsxs(ae,{to:"/businesses",className:"btn btn-primary",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(No,{size:18})," Find Businesses"]}),l.jsxs(ae,{to:"/card",className:"btn btn-gold",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(ug,{size:18})," View My Card"]})]})]}),l.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[l.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",textAlign:"center"},children:"How to Get Started"}),l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[{step:1,text:"Visit any participating Kinderhook business",icon:Rt},{step:2,text:"Scan their check-in QR code with your phone",icon:Xt},{step:3,text:"Build your tier to unlock better exchange rates",icon:zo}].map(N=>l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[l.jsx("div",{style:{width:"44px",height:"44px",background:"var(--kb-navy)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:l.jsx(N.icon,{size:20,color:"var(--kb-gold)"})}),l.jsx("div",{style:{color:"var(--kb-gray-700)"},children:N.text})]},N.step))})]}),l.jsxs("div",{style:{marginTop:"2rem"},children:[l.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",textAlign:"center"},children:"Tier Rewards"}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.75rem"},children:Object.entries(Jn).map(([N,D])=>{const P=rk[N];return l.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"1rem",textAlign:"center",border:"1px solid var(--kb-gray-200)"},children:[l.jsx(P,{size:24,color:kc[N],style:{marginBottom:"0.5rem"}}),l.jsx("div",{style:{fontWeight:"600",color:kc[N],marginBottom:"0.25rem"},children:D.name}),l.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:[Math.round(D.bonus*100),"% bonus"]})]},N)})})]})]})})}),l.jsx(En,{})]})}function n8(){var P,G;const[n,e]=R.useState("login"),[t,r]=R.useState(""),[s,a]=R.useState(""),[c,f]=R.useState(""),[d,m]=R.useState(""),[g,y]=R.useState(!1),x=ll(),S=tr(),{isAuthenticated:k}=Vi(),N=new URLSearchParams(S.search).get("redirect")||((G=(P=S.state)==null?void 0:P.from)==null?void 0:G.pathname)||"/card",D=async F=>{F.preventDefault(),m(""),y(!0);try{if(n==="signup"){if(!c.trim()){m("Please enter your name"),y(!1);return}await DD(t,s,c)}else await VD(t,s);x(N,{replace:!0})}catch($){console.error("Auth error:",$),$.code==="auth/email-already-in-use"?m("An account with this email already exists"):$.code==="auth/weak-password"?m("Password should be at least 6 characters"):$.code==="auth/invalid-email"?m("Please enter a valid email address"):$.code==="auth/user-not-found"||$.code==="auth/wrong-password"||$.code==="auth/invalid-credential"?m("Invalid email or password"):m("Something went wrong. Please try again.")}y(!1)};return l.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[l.jsx(Sn,{}),l.jsx("section",{style:{flex:1,background:"linear-gradient(180deg, var(--kb-cream) 0%, var(--kb-white) 100%)",padding:"3rem 1rem",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsxs(ve.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{width:"100%",maxWidth:"420px"},children:[l.jsxs("div",{className:"card",style:{padding:"2rem"},children:[l.jsxs("div",{style:{display:"flex",marginBottom:"2rem",background:"var(--kb-gray-100)",borderRadius:"10px",padding:"4px"},children:[l.jsxs("button",{onClick:()=>{e("login"),m("")},style:{flex:1,padding:"0.75rem",border:"none",borderRadius:"8px",background:n==="login"?"white":"transparent",color:n==="login"?"var(--kb-navy)":"var(--kb-gray-500)",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",boxShadow:n==="login"?"0 1px 3px rgba(0,0,0,0.1)":"none",transition:"all 0.2s"},children:[l.jsx(rl,{size:18})," Sign In"]}),l.jsxs("button",{onClick:()=>{e("signup"),m("")},style:{flex:1,padding:"0.75rem",border:"none",borderRadius:"8px",background:n==="signup"?"white":"transparent",color:n==="signup"?"var(--kb-navy)":"var(--kb-gray-500)",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",boxShadow:n==="signup"?"0 1px 3px rgba(0,0,0,0.1)":"none",transition:"all 0.2s"},children:[l.jsx(Lh,{size:18})," Sign Up"]})]}),l.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[l.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:n==="login"?"Welcome Back":"Join Kinderbucks"}),l.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.95rem"},children:n==="login"?"Sign in to access your account":"Create an account to track your Kinderhooker status"})]}),d&&l.jsxs(ve.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},style:{background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",padding:"0.75rem 1rem",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem",color:"#dc2626",fontSize:"0.9rem"},children:[l.jsx(qy,{size:18}),d]}),l.jsxs("form",{onSubmit:D,children:[n==="signup"&&l.jsxs("div",{style:{marginBottom:"1rem"},children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Your Name"}),l.jsxs("div",{style:{position:"relative"},children:[l.jsx(Ha,{size:18,color:"var(--kb-gray-400)",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)"}}),l.jsx("input",{type:"text",value:c,onChange:F=>f(F.target.value),placeholder:"Jane Smith",style:{width:"100%",paddingLeft:"40px"},required:n==="signup"})]})]}),l.jsxs("div",{style:{marginBottom:"1rem"},children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Email"}),l.jsxs("div",{style:{position:"relative"},children:[l.jsx(uE,{size:18,color:"var(--kb-gray-400)",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)"}}),l.jsx("input",{type:"email",value:t,onChange:F=>r(F.target.value),placeholder:"you@example.com",style:{width:"100%",paddingLeft:"40px"},required:!0})]})]}),l.jsxs("div",{style:{marginBottom:"1.5rem"},children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Password"}),l.jsxs("div",{style:{position:"relative"},children:[l.jsx(F4,{size:18,color:"var(--kb-gray-400)",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)"}}),l.jsx("input",{type:"password",value:s,onChange:F=>a(F.target.value),placeholder:"",style:{width:"100%",paddingLeft:"40px"},required:!0,minLength:6})]}),n==="signup"&&l.jsx("p",{style:{marginTop:"0.5rem",fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:"At least 6 characters"})]}),l.jsx("button",{type:"submit",className:"btn btn-gold",disabled:g,style:{width:"100%",padding:"0.875rem",fontSize:"1rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:g?l.jsxs(l.Fragment,{children:[l.jsx(Yy,{size:20,className:"animate-spin",style:{animation:"spin 1s linear infinite"}}),n==="login"?"Signing in...":"Creating account..."]}):l.jsxs(l.Fragment,{children:[n==="login"?l.jsx(rl,{size:20}):l.jsx(Lh,{size:20}),n==="login"?"Sign In":"Create Account"]})})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",margin:"1.5rem 0",gap:"1rem"},children:[l.jsx("div",{style:{flex:1,height:"1px",background:"var(--kb-gray-200)"}}),l.jsx("span",{style:{color:"var(--kb-gray-400)",fontSize:"0.85rem"},children:"or"}),l.jsx("div",{style:{flex:1,height:"1px",background:"var(--kb-gray-200)"}})]}),l.jsxs("button",{type:"button",onClick:async()=>{m(""),y(!0);try{await LD(),x(N,{replace:!0})}catch(F){console.error("Google sign-in error:",F),F.code==="auth/popup-closed-by-user"?m("Sign-in cancelled"):m("Could not sign in with Google. Please try again.")}y(!1)},disabled:g,style:{width:"100%",padding:"0.75rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",background:"white",border:"1px solid var(--kb-gray-300)",borderRadius:"8px",cursor:"pointer",fontSize:"0.95rem",fontWeight:"500",color:"var(--kb-gray-700)",transition:"all 0.2s"},children:[l.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",children:[l.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),l.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),l.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),l.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),l.jsx("div",{style:{marginTop:"1rem"},children:l.jsx(ae,{to:"/profile",style:{display:"block",textAlign:"center",color:"var(--kb-gray-500)",fontSize:"0.85rem",textDecoration:"none"},children:"Continue as guest (limited features)"})})]}),l.jsx("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"rgba(201, 162, 39, 0.1)",borderRadius:"12px",textAlign:"center"},children:l.jsx("p",{style:{color:"var(--kb-gray-700)",fontSize:"0.9rem",margin:0},children:"Create an account to sync your Kinderhooker status across devices and never lose your tier progress!"})})]})}),l.jsx(En,{}),l.jsx("style",{children:`
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
      `})]})}const r8={curious:Xt,hooked:er,lineAndSinker:Zr,patron:Bn},i8={curious:{primary:"#6b7280",secondary:"#9ca3af",bg:"#f3f4f6"},hooked:{primary:"#16a34a",secondary:"#22c55e",bg:"#dcfce7"},lineAndSinker:{primary:"#2563eb",secondary:"#3b82f6",bg:"#dbeafe"},patron:{primary:"#ca8a04",secondary:"#eab308",bg:"#fef3c7"}};function s8(){var T;const{user:n,profile:e,isAuthenticated:t}=Vi(),[r,s]=R.useState(null),[a,c]=R.useState(!0);R.useEffect(()=>{async function E(){const N=Kh(),D=await bu(N);s(D),c(!1)}E()},[n]);const f=(r==null?void 0:r.tier)||"curious",d=Jn[f],m=i8[f],g=r8[f],y=((T=r==null?void 0:r.businessesVisited)==null?void 0:T.length)||0,x=Math.round(d.bonus*100),S=Kh(),k=S?`OK-${S.substring(0,6).toUpperCase()}`:"OK-GUEST";return a?l.jsx("div",{style:{minHeight:"100vh",background:"var(--kb-navy)",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx("div",{style:{color:"white",fontSize:"1.5rem"},children:"Loading..."})}):l.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(180deg, var(--kb-navy) 0%, #1a3a5c 100%)",padding:"1rem",display:"flex",flexDirection:"column"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[l.jsxs(ae,{to:"/map",style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",color:"white",opacity:.8,textDecoration:"none",fontSize:"1rem"},children:[l.jsx(s4,{size:20})," Village Map"]}),l.jsx(ae,{to:"/profile",style:{color:"white",opacity:.8,textDecoration:"none",fontSize:"1rem"},children:"My Profile"})]}),l.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsxs(ve.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},style:{width:"100%",maxWidth:"380px"},children:[l.jsxs("div",{style:{background:"white",borderRadius:"20px",overflow:"hidden",boxShadow:"0 20px 60px rgba(0,0,0,0.3)",border:"3px solid var(--kb-gold)"},children:[l.jsxs("div",{style:{background:"var(--kb-navy)",padding:"1.25rem 1.5rem",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[l.jsxs("div",{children:[l.jsx("div",{style:{color:"var(--kb-gold)",fontFamily:"var(--font-display)",fontWeight:"700",fontSize:"1.5rem",letterSpacing:"0.02em"},children:"KINDERBUCKS"}),l.jsx("div",{style:{color:"rgba(255,255,255,0.7)",fontSize:"0.8rem",marginTop:"0.1rem"},children:"OK MEMBER CARD"})]}),l.jsx("div",{style:{width:"50px",height:"50px",background:"var(--kb-gold)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--kb-navy)",fontFamily:"var(--font-display)",fontWeight:"700",fontSize:"1.75rem"},children:"K"})]}),l.jsxs("div",{style:{padding:"1.5rem"},children:[l.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"600",color:"var(--kb-navy)",marginBottom:"0.25rem"},children:t&&(e!=null&&e.displayName)?e.displayName:"OK Member"}),l.jsx("div",{style:{fontFamily:"monospace",fontSize:"1.1rem",color:"var(--kb-gray-500)",marginBottom:"1.5rem"},children:k}),l.jsxs("div",{style:{background:`linear-gradient(135deg, ${m.primary} 0%, ${m.secondary} 100%)`,borderRadius:"16px",padding:"1.5rem",textAlign:"center",color:"white",marginBottom:"1.5rem"},children:[l.jsx(g,{size:40,strokeWidth:1.5,style:{marginBottom:"0.5rem"}}),l.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",textTransform:"uppercase",marginBottom:"0.25rem"},children:d.name}),l.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"800",lineHeight:1},children:[x,"%"]}),l.jsx("div",{style:{fontSize:"1rem",opacity:.9,marginTop:"0.25rem"},children:"Exchange Bonus"})]}),l.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"2rem",padding:"1rem 0",borderTop:"1px solid var(--kb-gray-200)",borderBottom:"1px solid var(--kb-gray-200)",marginBottom:"1.5rem"},children:[l.jsxs("div",{style:{textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:y}),l.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Businesses"})]}),l.jsxs("div",{style:{textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:(r==null?void 0:r.totalCheckins)||0}),l.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Check-ins"})]})]}),l.jsxs("div",{style:{background:"var(--kb-cream)",borderRadius:"12px",padding:"1rem",textAlign:"center"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"0.5rem",color:"var(--kb-navy)",fontWeight:"600"},children:[l.jsx(Kr,{size:20}),"How to use"]}),l.jsxs("p",{style:{fontSize:"0.95rem",color:"var(--kb-gray-600)",margin:0,lineHeight:1.5},children:["Scan the business QR code",l.jsx("br",{}),"to check in and get your discount code"]})]})]}),l.jsx("div",{style:{background:"var(--kb-cream)",padding:"0.75rem 1.5rem",textAlign:"center",borderTop:"1px solid var(--kb-gray-200)"},children:l.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:"Village of Kinderhook  Est. 2026"})})]}),l.jsxs(ae,{to:"/businesses",className:"btn btn-gold",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",width:"100%",marginTop:"1.5rem",padding:"1rem",fontSize:"1.1rem"},children:[l.jsx(Kr,{size:22}),"Find a Business to Check In"]})]})})]})}const Su="kinderbucks",o8="scans";async function a8(n){const e=Ut(qe,Su,n),t=await wl(e);return t.exists()?{serial:t.id,...t.data()}:null}async function fT(){const n=Ms(bn(qe,Su),nl("serial"));return(await vr(n)).docs.map(t=>({serial:t.id,...t.data()}))}async function l8(n,e){const t=n.map(r=>yu(Ut(qe,Su,r),{serial:r,denomination:e,status:"draft",scanCount:0,createdAt:Vt()}));await Promise.all(t)}async function c8(n,e,t=null){const r=Ut(qe,Su,n),s={status:e,issuedAt:Vt(),...t&&{issuedTo:t}};await Jr(r,s)}async function u8(n){const e=Ut(qe,Su,n);await Jr(e,{scanCount:Oy(1),lastScanned:Vt(),status:"active"}),await Wy(bn(qe,o8),{serial:n,scannedAt:Vt(),userAgent:navigator.userAgent||null})}function mT(){const[n,e]=R.useState([]);return R.useEffect(()=>{const t=["#2d5a27","#c9a227","#4a7c43","#d4af37","#5c4033"],r=Array.from({length:50},(s,a)=>({id:a,x:Math.random()*100,color:t[Math.floor(Math.random()*t.length)],delay:Math.random()*.5,duration:2+Math.random()*2,size:8+Math.random()*8}));e(r)},[]),l.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,pointerEvents:"none",overflow:"hidden",zIndex:100},children:n.map(t=>l.jsx(ve.div,{initial:{y:-20,x:`${t.x}vw`,opacity:1,rotate:0},animate:{y:"110vh",rotate:360*(Math.random()>.5?1:-1),opacity:[1,1,0]},transition:{duration:t.duration,delay:t.delay,ease:"linear"},style:{position:"absolute",width:t.size,height:t.size,background:t.color,borderRadius:Math.random()>.5?"50%":"2px"}},t.id))})}const ik={1:{bg:"#d4edda",text:"#155724"},5:{bg:"#cce5ff",text:"#004085"},10:{bg:"#e2d5e7",text:"#4a235a"},20:{bg:"#fff3cd",text:"#856404"}};function d8({kinderbuck:n}){const e=ik[n.denomination]||ik[5];return l.jsxs(ve.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",duration:.5},className:"card",style:{textAlign:"center",maxWidth:"400px",background:e.bg},children:[l.jsxs(ve.div,{initial:{y:-20},animate:{y:0},transition:{delay:.2},children:[l.jsxs("h1",{style:{color:e.text,fontSize:"3rem",marginBottom:"0.5rem"},children:["$",n.denomination]}),l.jsx("p",{style:{fontFamily:"monospace",fontSize:"1.5rem",color:e.text},children:n.serial})]}),l.jsx(ve.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},style:{marginTop:"1.5rem"},children:l.jsx("div",{style:{display:"inline-block",padding:"0.5rem 1rem",background:"rgba(255,255,255,0.7)",borderRadius:"20px",color:"var(--kb-green)",fontWeight:"bold"},children:"VERIFIED AUTHENTIC"})}),l.jsxs(ve.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},style:{marginTop:"1.5rem",fontSize:"0.9rem",opacity:.8},children:[l.jsxs("p",{children:["Status: ",l.jsx("strong",{children:n.status})]}),n.issuedAt&&l.jsxs("p",{children:["Issued: ",new Date(n.issuedAt.seconds*1e3).toLocaleDateString()]}),l.jsxs("p",{children:["Scans: ",n.scanCount||1]})]}),l.jsx(ve.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.8,type:"spring"},style:{marginTop:"1.5rem"},children:l.jsx("iframe",{src:"https://giphy.com/embed/B1txHfofr9y08bDB8b",width:"200",height:"200",frameBorder:"0",style:{borderRadius:"12px",pointerEvents:"none"},allowFullScreen:!0})})]})}function h8(){const{serial:n}=Ug(),[e,t]=R.useState(null),[r,s]=R.useState(!0),[a,c]=R.useState(null);return R.useEffect(()=>{async function f(){try{const d=await a8(n);d?(t(d),await u8(n)):c("not_found")}catch(d){console.error("Verification error:",d),c("error")}finally{s(!1)}}f()},[n]),r?l.jsxs("div",{className:"page page-center",children:[l.jsx(ve.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},style:{fontSize:"3rem"},children:"$"}),l.jsxs("p",{style:{marginTop:"1rem"},children:["Verifying ",n,"..."]})]}):a==="not_found"?l.jsxs("div",{className:"page page-center",children:[l.jsx("h1",{style:{color:"#c0392b"},children:"Not Found"}),l.jsxs("p",{children:["Serial ",l.jsx("strong",{children:n})," is not a valid Kinderbuck."]})]}):a?l.jsxs("div",{className:"page page-center",children:[l.jsx("h1",{style:{color:"#c0392b"},children:"Error"}),l.jsx("p",{children:"Something went wrong verifying this Kinderbuck."})]}):l.jsxs("div",{className:"page page-center",children:[l.jsx(mT,{}),l.jsx(d8,{kinderbuck:e})]})}const j0="checkins",f8=3600*1e3;async function m8(n,e){var t;try{const r=new Date(Date.now()-f8),s=Ms(bn(qe,j0),Jc("visitorId","==",n),Jc("businessCode","==",e)),a=await vr(s);if(a.empty)return!1;for(const c of a.docs)if((((t=c.data().timestamp)==null?void 0:t.toDate())||new Date(0))>r)return!0;return!1}catch(r){return console.error("hasRecentCheckin error (allowing checkin):",r),!1}}async function p8(n,e,t){await Wy(bn(qe,j0),{visitorId:n,businessCode:e,timestamp:Vt(),kinderbucksMatched:!1,boostApplied:0,memberTier:t||"curious"})}async function pT(n){try{const e=Ms(bn(qe,j0),Jc("businessCode","==",n));return(await vr(e)).docs.map(s=>({id:s.id,...s.data()})).sort((s,a)=>{var d,m,g,y;const c=((m=(d=s.timestamp)==null?void 0:d.toDate)==null?void 0:m.call(d))||new Date(0);return(((y=(g=a.timestamp)==null?void 0:g.toDate)==null?void 0:y.call(g))||new Date(0))-c}).slice(0,100)}catch(e){return console.error("getCheckinsByBusiness error:",e),[]}}const g8={curious:Xt,hooked:er,lineAndSinker:Zr,patron:Bn},y8={curious:"#6b7280",hooked:"#16a34a",lineAndSinker:"#2563eb",patron:"#ca8a04"};function v8(n,e){const t=new Date,r=t.getHours().toString().padStart(2,"0")+t.getMinutes().toString().padStart(2,"0"),s=e.substring(0,4).toUpperCase();return`${n.substring(0,3).toUpperCase()}-${s}-${r}`}function x8(){const{businessCode:n}=Ug(),{isAuthenticated:e}=Vi(),[t,r]=R.useState(null),[s,a]=R.useState(!0),[c,f]=R.useState(null),[d,m]=R.useState(null),[g,y]=R.useState(!1),[x,S]=R.useState(!1),[k,T]=R.useState("");if(R.useEffect(()=>{async function $(){try{const A=await R0(n);if(!A){f("not_found"),a(!1);return}if(!A.isActive){f("inactive"),a(!1);return}if(r(A),!e){a(!1);return}const C=Kh();if(T(v8(n,C)),await m8(C,n)){y(!0);const B=await bu(C);B&&m({tierChanged:!1,newTier:B.tier,businessesVisited:B.businessesVisited||[],totalCheckins:B.totalCheckins||0,isNewBusiness:!1}),a(!1);return}const L=await X9(C,n);await p8(C,n,L.newTier),await G9(n),m(L),L.tierChanged&&L.newTier&&S(!0),a(!1)}catch(A){console.error("Check-in error:",A),f("error"),a(!1)}}$()},[n,e]),s)return l.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"linear-gradient(180deg, var(--kb-navy) 0%, #1a3a5c 100%)",padding:"2rem"},children:[l.jsx(ve.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:l.jsx(Yy,{size:64,color:"var(--kb-gold)"})}),l.jsx("p",{style:{marginTop:"1.5rem",color:"white",fontSize:"1.25rem"},children:"Checking in..."})]});if(c==="not_found")return l.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#fef2f2",padding:"2rem",textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:"?"}),l.jsx("h1",{style:{color:"#dc2626",fontSize:"1.75rem",marginBottom:"0.75rem"},children:"Business Not Found"}),l.jsx("p",{style:{color:"#7f1d1d",fontSize:"1.1rem",marginBottom:"2rem"},children:"This QR code doesn't match any participating business."}),l.jsx(ae,{to:"/",className:"btn btn-primary",style:{fontSize:"1.1rem",padding:"1rem 2rem"},children:"Go Home"})]});if(c==="inactive")return l.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#fffbeb",padding:"2rem",textAlign:"center"},children:[l.jsx("h1",{style:{color:"#d97706",fontSize:"1.75rem",marginBottom:"0.75rem"},children:"Business Not Active"}),l.jsx("p",{style:{color:"#92400e",fontSize:"1.1rem",marginBottom:"2rem"},children:"This business is not currently participating."}),l.jsx(ae,{to:"/",className:"btn btn-primary",style:{fontSize:"1.1rem",padding:"1rem 2rem"},children:"Go Home"})]});if(c)return l.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#fef2f2",padding:"2rem",textAlign:"center"},children:[l.jsx("h1",{style:{color:"#dc2626",fontSize:"1.75rem",marginBottom:"0.75rem"},children:"Something went wrong"}),l.jsx("p",{style:{color:"#7f1d1d",fontSize:"1.1rem",marginBottom:"2rem"},children:"Please try scanning again."}),l.jsx(ae,{to:"/",className:"btn btn-primary",style:{fontSize:"1.1rem",padding:"1rem 2rem"},children:"Go Home"})]});const E=(d==null?void 0:d.newTier)||"curious",N=Jn[E],D=y8[E],P=g8[E],G=Math.round(N.bonus*100),F=e?g?"#6b7280":D:"var(--kb-navy)";return l.jsxs("div",{style:{minHeight:"100vh",background:`linear-gradient(180deg, ${F} 0%, ${F}dd 100%)`,padding:"1.5rem",display:"flex",flexDirection:"column"},children:[x&&l.jsx(mT,{}),l.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",maxWidth:"400px",margin:"0 auto",width:"100%"},children:[g?l.jsxs(ve.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},style:{textAlign:"center",color:"white"},children:[l.jsx(wr,{size:80,strokeWidth:1.5,style:{marginBottom:"1rem",opacity:.8}}),l.jsx("h1",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"Already Checked In"}),l.jsxs("p",{style:{fontSize:"1.25rem",opacity:.9,marginBottom:"2rem"},children:["at ",t.name]}),l.jsxs("p",{style:{fontSize:"1.1rem",opacity:.8},children:["Come back in about an hour",l.jsx("br",{}),"for another check-in!"]})]}):e?l.jsxs(ve.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{width:"100%"},children:[l.jsxs("div",{style:{textAlign:"center",color:"white",marginBottom:"1.5rem"},children:[l.jsx(ve.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.2},children:l.jsx("div",{style:{width:"80px",height:"80px",background:"rgba(255,255,255,0.2)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:l.jsx(_i,{size:48,strokeWidth:2.5})})}),l.jsx("h1",{style:{fontSize:"1.75rem",marginBottom:"0.25rem"},children:"Checked In!"}),l.jsx("p",{style:{fontSize:"1.25rem",opacity:.9},children:t.name})]}),l.jsxs(ve.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},style:{background:"white",borderRadius:"24px",padding:"2rem",textAlign:"center",boxShadow:"0 10px 40px rgba(0,0,0,0.2)"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"1rem"},children:[l.jsx(P,{size:28,color:D}),l.jsx("span",{style:{fontSize:"1.25rem",fontWeight:"700",color:D,textTransform:"uppercase"},children:N.name})]}),l.jsxs("div",{style:{background:`${D}15`,borderRadius:"16px",padding:"1.5rem",marginBottom:"1.5rem"},children:[l.jsxs("div",{style:{fontSize:"4rem",fontWeight:"800",color:D,lineHeight:1},children:[G,"%"]}),l.jsx("div",{style:{fontSize:"1.1rem",color:"var(--kb-gray-600)",marginTop:"0.25rem"},children:"Exchange Bonus"})]}),l.jsxs("div",{style:{background:"var(--kb-navy)",borderRadius:"12px",padding:"1rem",marginBottom:"1rem"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[l.jsx(fE,{size:18,color:"var(--kb-gold)"}),l.jsx("span",{style:{color:"var(--kb-gold)",fontSize:"0.85rem",fontWeight:"600"},children:"VERIFICATION CODE"})]}),l.jsx("div",{style:{fontFamily:"monospace",fontSize:"1.75rem",fontWeight:"700",color:"white",letterSpacing:"0.1em"},children:k})]}),l.jsxs("p",{style:{fontSize:"1.1rem",color:"var(--kb-gray-600)",lineHeight:1.5},children:["Show this screen to the cashier",l.jsx("br",{}),"to receive your ",l.jsxs("strong",{children:[G,"% bonus"]})]})]}),(d==null?void 0:d.tierChanged)&&l.jsxs(ve.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},style:{marginTop:"1.5rem",padding:"1rem",background:"rgba(255,255,255,0.15)",borderRadius:"12px",textAlign:"center",color:"white"},children:[l.jsx("span",{style:{fontSize:"1.25rem"},children:""}),l.jsxs("span",{style:{marginLeft:"0.5rem",fontWeight:"600"},children:["You just leveled up to ",N.name,"!"]})]})]}):l.jsxs(ve.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{width:"100%"},children:[l.jsxs("div",{style:{textAlign:"center",color:"white",marginBottom:"1.5rem"},children:[l.jsx(ve.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.2},children:l.jsx("div",{style:{width:"80px",height:"80px",background:"rgba(255,255,255,0.2)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:l.jsx(Lh,{size:40,strokeWidth:1.5})})}),l.jsxs("h1",{style:{fontSize:"1.75rem",marginBottom:"0.25rem"},children:["Welcome to ",t.name,"!"]}),l.jsx("p",{style:{fontSize:"1.1rem",opacity:.9},children:"Sign in to complete your check-in and unlock your discount"})]}),l.jsxs(ve.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},style:{background:"white",borderRadius:"24px",padding:"2rem",textAlign:"center",boxShadow:"0 10px 40px rgba(0,0,0,0.2)"},children:[l.jsx("div",{style:{width:"60px",height:"60px",background:"var(--kb-gold)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.25rem"},children:l.jsx(cE,{size:28,color:"var(--kb-navy)"})}),l.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem",fontSize:"1.5rem"},children:"Your Discount is Waiting!"}),l.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"1rem",marginBottom:"1.5rem",lineHeight:1.5},children:"Create a free OK Member account to unlock your exclusive bonus discount."}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",marginBottom:"1.5rem",textAlign:"left",background:"var(--kb-cream)",borderRadius:"12px",padding:"1rem 1.25rem"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"0.95rem",color:"var(--kb-gray-700)"},children:[l.jsx("div",{style:{width:"24px",height:"24px",background:"var(--kb-green)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(_i,{size:14,color:"white"})}),"Unlock your discount code"]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"0.95rem",color:"var(--kb-gray-700)"},children:[l.jsx("div",{style:{width:"24px",height:"24px",background:"var(--kb-green)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(_i,{size:14,color:"white"})}),"Track your tier progress"]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"0.95rem",color:"var(--kb-gray-700)"},children:[l.jsx("div",{style:{width:"24px",height:"24px",background:"var(--kb-green)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(_i,{size:14,color:"white"})}),"Get your digital OK Member Card"]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"0.95rem",color:"var(--kb-gray-700)"},children:[l.jsx("div",{style:{width:"24px",height:"24px",background:"var(--kb-green)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(_i,{size:14,color:"white"})}),"Earn higher bonuses as you level up"]})]}),l.jsxs(ae,{to:`/login?redirect=/checkin/${n}`,className:"btn btn-gold",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",padding:"1rem",fontSize:"1.15rem",marginBottom:"0.75rem"},children:[l.jsx(Lh,{size:22}),"Sign Up Free"]}),l.jsxs("p",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:["Already have an account? ",l.jsx(ae,{to:`/login?redirect=/checkin/${n}`,style:{color:"var(--kb-navy)",fontWeight:"600"},children:"Sign In"})]})]})]}),l.jsxs(ve.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},style:{marginTop:"2rem",display:"flex",gap:"0.75rem"},children:[l.jsx(ae,{to:"/profile",className:"btn",style:{background:"rgba(255,255,255,0.2)",color:"white",padding:"0.875rem 1.5rem",fontSize:"1rem"},children:"My Profile"}),l.jsx(ae,{to:"/",className:"btn",style:{background:"white",color:"var(--kb-navy)",padding:"0.875rem 1.5rem",fontSize:"1rem"},children:"Home"})]})]})]})}function w8(){const{profile:n}=Vi(),[e,t]=R.useState(null),[r,s]=R.useState([]),[a,c]=R.useState(!0),[f,d]=R.useState(!1),[m,g]=R.useState(!1);R.useEffect(()=>{async function E(){if(!(n!=null&&n.businessCode)){c(!1);return}const[N,D]=await Promise.all([R0(n.businessCode),pT(n.businessCode)]);t(N),s(D),c(!1)}E()},[n==null?void 0:n.businessCode]);const y=()=>{const E=`https://harmonicsystems.github.io/kinderbucks/#/checkin/${n.businessCode}`;navigator.clipboard.writeText(E),g(!0),setTimeout(()=>g(!1),2e3)},x=r.filter(E=>{var P;const N=(P=E.timestamp)!=null&&P.toDate?E.timestamp.toDate():new Date(E.timestamp),D=new Date;return N.toDateString()===D.toDateString()}).length,S=r.filter(E=>{var P;const N=(P=E.timestamp)!=null&&P.toDate?E.timestamp.toDate():new Date(E.timestamp),D=new Date;return D.setDate(D.getDate()-7),N>D}).length,k=new Set(r.map(E=>E.visitorId)).size;if(a)return l.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[l.jsx(Sn,{}),l.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",background:"var(--kb-cream)"},children:l.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading..."})}),l.jsx(En,{})]});if(!(n!=null&&n.businessCode))return l.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[l.jsx(Sn,{}),l.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",background:"var(--kb-cream)",padding:"2rem"},children:l.jsxs("div",{className:"card",style:{maxWidth:"400px",textAlign:"center",padding:"2rem"},children:[l.jsx(Rt,{size:48,color:"var(--kb-gray-400)",style:{marginBottom:"1rem"}}),l.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"No Business Assigned"}),l.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem"},children:"Your account doesn't have a business assigned yet. Contact an administrator to get set up."}),l.jsx(ae,{to:"/",className:"btn btn-primary",children:"Go Home"})]})}),l.jsx(En,{})]});const T=`https://harmonicsystems.github.io/kinderbucks/#/checkin/${n.businessCode}`;return l.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[l.jsx(Sn,{}),l.jsx("main",{style:{flex:1,background:"var(--kb-cream)",padding:"2rem 1rem"},children:l.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[l.jsx(ve.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{marginBottom:"2rem"},children:l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"1rem"},children:[l.jsxs("div",{children:[l.jsx("div",{className:"badge badge-gold",style:{marginBottom:"0.5rem"},children:"Business Dashboard"}),l.jsx("h1",{style:{color:"var(--kb-navy)",marginBottom:"0.25rem"},children:(e==null?void 0:e.name)||n.businessCode}),l.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"Manage your Kinderbucks check-ins"})]}),l.jsxs("button",{onClick:()=>d(!f),className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(Kr,{size:18}),f?"Hide QR Code":"Show QR Code"]})]})}),f&&l.jsx(ve.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"card",style:{marginBottom:"2rem",padding:"2rem"},children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"2rem",flexWrap:"wrap"},children:[l.jsx("div",{style:{textAlign:"center"},children:l.jsx("div",{style:{background:"linear-gradient(135deg, var(--kb-green) 0%, #1e8449 100%)",borderRadius:"16px",padding:"3px",display:"inline-block"},children:l.jsxs("div",{style:{background:"white",borderRadius:"14px",padding:"16px"},children:[l.jsx("div",{style:{fontSize:"10px",fontWeight:"600",color:"var(--kb-green)",letterSpacing:"2px",marginBottom:"8px"},children:"CHECK IN AT"}),l.jsx(sl,{value:T,size:150,denomination:1,showFrame:!1}),l.jsx("div",{style:{marginTop:"8px",fontWeight:"600",color:"var(--kb-navy)"},children:e==null?void 0:e.name})]})})}),l.jsxs("div",{style:{flex:1,minWidth:"250px"},children:[l.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Display This QR Code"}),l.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1rem"},children:"Print and display this QR code at your counter. Customers can scan it with their phone to check in and build their Kinderhooker status."}),l.jsxs("div",{style:{marginBottom:"1rem"},children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontSize:"0.85rem"},children:"Check-in URL"}),l.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[l.jsx("input",{type:"text",value:T,readOnly:!0,style:{flex:1,fontFamily:"monospace",fontSize:"0.85rem"}}),l.jsxs("button",{onClick:y,className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[m?l.jsx(Yr,{size:16}):l.jsx(Gy,{size:16}),m?"Copied!":"Copy"]})]})]}),l.jsxs("button",{onClick:()=>window.print(),className:"btn btn-gold",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(Qy,{size:18})," Print QR Code"]})]})]})}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[l.jsx(ve.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card",style:{padding:"1.5rem"},children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[l.jsx("div",{style:{width:"50px",height:"50px",background:"rgba(39, 174, 96, 0.1)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(zo,{size:24,color:"var(--kb-green)"})}),l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"var(--kb-navy)"},children:(e==null?void 0:e.checkinCount)||0}),l.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"Total Check-ins"})]})]})}),l.jsx(ve.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card",style:{padding:"1.5rem"},children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[l.jsx("div",{style:{width:"50px",height:"50px",background:"rgba(52, 152, 219, 0.1)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(wr,{size:24,color:"#3498db"})}),l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"var(--kb-navy)"},children:x}),l.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"Today"})]})]})}),l.jsx(ve.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"card",style:{padding:"1.5rem"},children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[l.jsx("div",{style:{width:"50px",height:"50px",background:"rgba(155, 89, 182, 0.1)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(xf,{size:24,color:"#9b59b6"})}),l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"var(--kb-navy)"},children:S}),l.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"This Week"})]})]})}),l.jsx(ve.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"card",style:{padding:"1.5rem"},children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[l.jsx("div",{style:{width:"50px",height:"50px",background:"rgba(201, 162, 39, 0.1)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(_r,{size:24,color:"var(--kb-gold-dark)"})}),l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"var(--kb-navy)"},children:k}),l.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"Unique Visitors"})]})]})})]}),l.jsxs(ve.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"card",children:[l.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(wr,{size:20})," Recent Check-ins"]}),r.length===0?l.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[l.jsx(_r,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),l.jsx("p",{children:"No check-ins yet"}),l.jsx("p",{style:{fontSize:"0.9rem"},children:"Display your QR code to start receiving check-ins!"})]}):l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:r.slice(0,20).map((E,N)=>{var P;const D=(P=E.timestamp)!=null&&P.toDate?E.timestamp.toDate():new Date(E.timestamp);return l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"var(--kb-gray-50)",borderRadius:"8px"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[l.jsx("div",{style:{width:"36px",height:"36px",background:"var(--kb-green)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(Yr,{size:18,color:"white"})}),l.jsxs("div",{children:[l.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:"Check-in recorded"}),l.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:E.tier&&`${E.tier} member`})]})]}),l.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:D.toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]},E.id||N)})})]})]})}),l.jsx(En,{})]})}function ln({children:n,title:e}){const t=tr(),r=ll(),{user:s,profile:a,isAdmin:c}=Vi(),f=[{to:"/admin/dashboard",label:"Dashboard",Icon:V4},{to:"/admin/exchanges",label:"Exchanges",Icon:vf},{to:"/admin/members",label:"Members",Icon:_r},{to:"/admin/generate",label:"Generate QR",Icon:Kr},{to:"/admin/issue",label:"Issue Currency",Icon:Dh},{to:"/admin/businesses",label:"Businesses",Icon:Rt},{to:"/admin/users",label:"User Management",Icon:Vh}],d=async()=>{await rE(),r("/")},m=g=>t.pathname===g;return l.jsxs("div",{style:{display:"flex",minHeight:"100vh"},children:[l.jsxs("aside",{style:{width:"260px",background:"var(--kb-navy)",color:"var(--kb-white)",display:"flex",flexDirection:"column",position:"fixed",top:0,left:0,bottom:0,zIndex:100},children:[l.jsx("div",{style:{padding:"1.5rem",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:l.jsxs(ae,{to:"/map",style:{display:"flex",alignItems:"center",gap:"0.75rem",textDecoration:"none"},children:[l.jsx("div",{style:{width:"40px",height:"40px",background:"var(--kb-gold)",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--kb-navy)",fontFamily:"var(--font-display)",fontWeight:"700",fontSize:"1.2rem"},children:"K"}),l.jsxs("div",{children:[l.jsx("div",{style:{fontFamily:"var(--font-display)",fontWeight:"600",color:"var(--kb-white)",fontSize:"1.1rem"},children:"Kinderbucks"}),l.jsx("div",{style:{fontSize:"0.7rem",color:"var(--kb-gold)",textTransform:"uppercase",letterSpacing:"0.1em"},children:"Admin Portal"})]})]})}),l.jsx("nav",{style:{flex:1,padding:"1rem 0",overflowY:"auto"},children:f.map(g=>l.jsxs(ae,{to:g.to,style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.875rem 1.5rem",color:m(g.to)?"var(--kb-gold)":"var(--kb-gray-300)",background:m(g.to)?"rgba(201, 162, 39, 0.1)":"transparent",borderLeft:m(g.to)?"3px solid var(--kb-gold)":"3px solid transparent",textDecoration:"none",fontSize:"0.95rem",fontWeight:m(g.to)?"600":"400",transition:"all 0.2s"},children:[l.jsx(g.Icon,{size:20,strokeWidth:1.5}),g.label]},g.to))}),l.jsxs("div",{style:{padding:"1rem 1.5rem",borderTop:"1px solid rgba(255,255,255,0.1)"},children:[s&&l.jsxs("div",{style:{padding:"0.75rem 0",borderBottom:"1px solid rgba(255,255,255,0.1)",marginBottom:"0.75rem"},children:[l.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-300)"},children:(a==null?void 0:a.displayName)||s.email}),l.jsx("div",{style:{fontSize:"0.75rem",color:"var(--kb-gray-500)"},children:(a==null?void 0:a.role)||"member"})]}),l.jsxs(ae,{to:"/map",style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.5rem 0",color:"var(--kb-gray-400)",textDecoration:"none",fontSize:"0.9rem"},children:[l.jsx(N4,{size:18}),"Back to Site"]}),s&&l.jsxs("button",{onClick:d,style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.5rem 0",color:"var(--kb-gray-400)",background:"none",border:"none",cursor:"pointer",fontSize:"0.9rem",width:"100%"},children:[l.jsx(dg,{size:18}),"Sign Out"]})]})]}),l.jsxs("main",{style:{flex:1,marginLeft:"260px",background:"var(--kb-cream)",minHeight:"100vh"},children:[l.jsx("header",{style:{background:"var(--kb-white)",borderBottom:"1px solid var(--kb-gray-200)",padding:"1.25rem 2rem",position:"sticky",top:0,zIndex:50},children:l.jsx("h1",{style:{fontFamily:"var(--font-display)",fontSize:"1.5rem",color:"var(--kb-navy)",margin:0},children:e})}),l.jsx("div",{style:{padding:"2rem"},children:n})]}),l.jsx("style",{children:`
        @media (max-width: 768px) {
          aside {
            width: 100% !important;
            position: relative !important;
            display: none;
          }
          main {
            margin-left: 0 !important;
          }
        }
      `})]})}function _8(){const[n,e]=R.useState({totalCurrency:0,inCirculation:0,circulationValue:0,pendingExchanges:0,pendingValue:0,totalMembers:0,activeBusinesses:0,totalCheckins:0}),[t,r]=R.useState([]),[s,a]=R.useState({}),[c,f]=R.useState(!0);R.useEffect(()=>{async function m(){try{const g=await fT(),y=g.filter(A=>A.status==="issued"||A.status==="active"),x={};y.forEach(A=>{const C=A.denomination||0;x[C]=(x[C]||0)+1}),a(x);const S=await Us(),k=S.filter(A=>A.isActive),T=S.reduce((A,C)=>A+(C.checkinCount||0),0),E=Ms(bn(qe,"exchanges"),Jc("status","==","pending"),nl("createdAt","desc")),D=(await vr(E)).docs.map(A=>({id:A.id,...A.data()})),P=D.reduce((A,C)=>A+(C.kinderbucksAmount||0),0),G=Ms(bn(qe,"exchanges"),nl("createdAt","desc"),AD(5)),F=await vr(G);r(F.docs.map(A=>({id:A.id,...A.data()})));const $=await vr(bn(qe,"members"));e({totalCurrency:g.length,inCirculation:y.length,circulationValue:y.reduce((A,C)=>A+(C.denomination||0),0),pendingExchanges:D.length,pendingValue:P,totalMembers:$.size,activeBusinesses:k.length,totalCheckins:T}),f(!1)}catch(g){console.error("Error loading dashboard data:",g),f(!1)}}m()},[]);const d=({icon:m,label:g,value:y,subtext:x,color:S,to:k})=>l.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[l.jsxs("div",{children:[l.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem",marginBottom:"0.5rem"},children:g}),l.jsx("div",{style:{fontFamily:"var(--font-display)",fontSize:"2rem",fontWeight:"700",color:S||"var(--kb-navy)"},children:y}),x&&l.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem",marginTop:"0.25rem"},children:x})]}),l.jsx("div",{style:{width:"48px",height:"48px",background:`${S||"var(--kb-navy)"}15`,borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(m,{size:24,color:S||"var(--kb-navy)"})})]}),k&&l.jsx(ae,{to:k,style:{display:"block",marginTop:"1rem",paddingTop:"1rem",borderTop:"1px solid var(--kb-gray-100)",color:"var(--kb-navy)",fontSize:"0.85rem",fontWeight:"500"},children:"View Details "})]});return c?l.jsx(ln,{title:"Dashboard",children:l.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:l.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading dashboard..."})})}):l.jsxs(ln,{title:"Dashboard",children:[l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[l.jsx(d,{icon:Ky,label:"In Circulation",value:`$${n.circulationValue.toLocaleString()}`,subtext:`${n.inCirculation} bills issued`,color:"var(--kb-green)"}),l.jsx(d,{icon:wr,label:"Pending Exchanges",value:n.pendingExchanges,subtext:`$${n.pendingValue.toFixed(2)} value`,color:n.pendingExchanges>0?"#e67e22":"var(--kb-gray-400)",to:"/admin/exchanges"}),l.jsx(d,{icon:_r,label:"OK Members",value:n.totalMembers,subtext:`${n.totalCheckins} total check-ins`,color:"var(--kb-navy)",to:"/admin/members"}),l.jsx(d,{icon:Rt,label:"Active Businesses",value:n.activeBusinesses,color:"var(--kb-gold-dark)",to:"/admin/businesses"})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem"},children:[l.jsxs("div",{className:"card",children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[l.jsx("h3",{style:{color:"var(--kb-navy)",margin:0},children:"Recent Exchanges"}),l.jsx(ae,{to:"/admin/exchanges",style:{fontSize:"0.85rem",color:"var(--kb-navy)"},children:"View All "})]}),t.length===0?l.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"No exchanges yet"}):l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:t.map(m=>{var g,y,x,S;return l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem",background:"var(--kb-gray-50)",borderRadius:"8px"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[m.status==="completed"?l.jsx(Yr,{size:18,color:"var(--kb-green)"}):m.status==="pending"?l.jsx(wr,{size:18,color:"#e67e22"}):l.jsx(qy,{size:18,color:"var(--kb-gray-400)"}),l.jsxs("div",{children:[l.jsxs("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:["$",m.usdAmount,"  $",(g=m.kinderbucksAmount)==null?void 0:g.toFixed(2)," KB"]}),l.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:((S=(x=(y=m.createdAt)==null?void 0:y.toDate)==null?void 0:x.call(y))==null?void 0:S.toLocaleDateString())||"Pending"})]})]}),l.jsx("span",{className:"badge",style:{background:m.status==="completed"?"#d4edda":m.status==="pending"?"#fff3cd":"#f8f9fa",color:m.status==="completed"?"var(--kb-green)":m.status==="pending"?"#856404":"var(--kb-gray-600)"},children:m.status})]},m.id)})})]}),l.jsxs("div",{className:"card",children:[l.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem"},children:"Circulation by Denomination"}),Object.keys(s).length===0?l.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"No currency in circulation yet"}):l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[1,5,10,20].map(m=>{const g=s[m]||0,y=Math.max(...Object.values(s),1),x=g/y*100,S={1:"#27ae60",5:"#3498db",10:"#9b59b6",20:"#c9a227"};return l.jsxs("div",{children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[l.jsxs("span",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:["$",m]}),l.jsxs("span",{style:{color:"var(--kb-gray-500)"},children:[g," bills ($",g*m,")"]})]}),l.jsx("div",{style:{height:"8px",background:"var(--kb-gray-100)",borderRadius:"4px",overflow:"hidden"},children:l.jsx("div",{style:{width:`${x}%`,height:"100%",background:S[m],borderRadius:"4px",transition:"width 0.5s ease"}})})]},m)})})]})]}),l.jsxs("div",{className:"card",style:{marginTop:"1.5rem"},children:[l.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Quick Actions"}),l.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[l.jsxs(ae,{to:"/admin/generate",className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(Kr,{size:18})," Generate QR Codes"]}),l.jsxs(ae,{to:"/admin/issue",className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(Dh,{size:18})," Issue Currency"]}),l.jsxs(ae,{to:"/admin/exchanges",className:"btn btn-gold",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(vf,{size:18})," Process Exchanges"]})]})]})]})}function k8(){const[n,e]=R.useState({start:1,end:100}),[t,r]=R.useState(5),[s,a]=R.useState([]),[c,f]=R.useState(!1),[d,m]=R.useState(!1),g=()=>{const k=[];for(let T=n.start;T<=n.end;T++)k.push(`KB-${String(T).padStart(4,"0")}`);a(k),m(!1)},y=async()=>{f(!0);try{await l8(s,t),m(!0)}catch(k){console.error("Error saving:",k),alert("Error saving to database")}f(!1)},x="https://harmonicsystems.github.io/kinderbucks/#/scan/",S={1:{bg:"rgba(39, 174, 96, 0.1)",text:"var(--kb-green)"},5:{bg:"rgba(52, 152, 219, 0.1)",text:"#3498db"},10:{bg:"rgba(155, 89, 182, 0.1)",text:"#9b59b6"},20:{bg:"rgba(201, 162, 39, 0.1)",text:"var(--kb-gold-dark)"}};return l.jsxs(ln,{title:"Generate QR Codes",children:[l.jsxs("div",{className:"card",style:{marginBottom:"2rem"},children:[l.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(Kr,{size:20})," Generation Settings"]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1.5rem",marginBottom:"1.5rem"},children:[l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Start Number"}),l.jsx("input",{type:"number",value:n.start,onChange:k=>e(T=>({...T,start:Number(k.target.value)})),min:1,max:9999,style:{width:"100%"}})]}),l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"End Number"}),l.jsx("input",{type:"number",value:n.end,onChange:k=>e(T=>({...T,end:Number(k.target.value)})),min:1,max:9999,style:{width:"100%"}})]}),l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Denomination"}),l.jsxs("select",{value:t,onChange:k=>r(Number(k.target.value)),style:{width:"100%"},children:[l.jsx("option",{value:1,children:"$1"}),l.jsx("option",{value:5,children:"$5"}),l.jsx("option",{value:10,children:"$10"}),l.jsx("option",{value:20,children:"$20"})]})]})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[l.jsxs("button",{className:"btn btn-primary",onClick:g,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(Kr,{size:18})," Generate ",n.end-n.start+1," Codes"]}),l.jsxs("div",{style:{padding:"0.75rem 1rem",background:S[t].bg,borderRadius:"8px",color:S[t].text,fontWeight:"600"},children:["Total Value: $",(n.end-n.start+1)*t]})]})]}),s.length>0&&l.jsxs("div",{className:"card",children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[l.jsxs("div",{children:[l.jsxs("h3",{style:{color:"var(--kb-navy)",margin:0},children:["Generated: ",s.length," Kinderbucks"]}),l.jsxs("p",{style:{color:"var(--kb-gray-500)",margin:"0.25rem 0 0",fontSize:"0.9rem"},children:["$",t," denomination  Total value: $",s.length*t]})]}),l.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[d?l.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--kb-green)",fontWeight:"600"},children:[l.jsx(Yr,{size:18})," Saved!"]}):l.jsxs("button",{className:"btn btn-gold",onClick:y,disabled:c,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(oV,{size:18}),c?"Saving...":"Save to Database"]}),l.jsxs("button",{className:"btn btn-secondary",onClick:()=>window.print(),style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(tV,{size:18})," Print"]})]})]}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gap:"1.5rem"},children:s.slice(0,50).map(k=>l.jsxs("div",{style:{background:"var(--kb-white)",border:"1px solid var(--kb-gray-200)",borderRadius:"12px",padding:"1rem",textAlign:"center"},children:[l.jsx(sl,{value:`${x}${k}`,size:140,denomination:t}),l.jsx("p",{style:{fontFamily:"monospace",marginTop:"0.75rem",fontSize:"0.9rem",color:"var(--kb-navy)",fontWeight:"600"},children:k})]},k))}),s.length>50&&l.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"var(--kb-gray-50)",borderRadius:"8px",textAlign:"center",color:"var(--kb-gray-600)"},children:["Showing 50 of ",s.length," codes. All will be saved and printable."]})]}),s.length===0&&l.jsxs("div",{className:"card",style:{textAlign:"center",padding:"4rem 2rem"},children:[l.jsx(Kr,{size:64,color:"var(--kb-gray-300)",style:{marginBottom:"1rem"}}),l.jsx("h3",{style:{color:"var(--kb-gray-500)",marginBottom:"0.5rem"},children:"No codes generated yet"}),l.jsx("p",{style:{color:"var(--kb-gray-400)"},children:"Set your range and denomination above, then click Generate."})]})]})}function b8(){const[n,e]=R.useState([]),[t,r]=R.useState(!0),[s,a]=R.useState([]),[c,f]=R.useState(""),[d,m]=R.useState(!1),[g,y]=R.useState(0),x=async()=>{const A=await fT();e(A.filter(C=>C.status==="draft"||C.status==="issued")),r(!1)};R.useEffect(()=>{x()},[]);const S=A=>{a(C=>C.includes(A)?C.filter(M=>M!==A):[...C,A])},k=()=>{const A=N.map(C=>C.serial);a(A)},T=()=>{a([])},E=async()=>{if(s.length!==0){m(!0);try{for(const A of s)await c8(A,"issued",c);y(s.length),a([]),f(""),await x(),setTimeout(()=>y(0),3e3)}catch(A){console.error("Error issuing:",A),alert("Error issuing Kinderbucks")}m(!1)}},N=n.filter(A=>A.status==="draft"),D=n.filter(A=>A.status==="issued"),P=s.reduce((A,C)=>{const M=n.find(L=>L.serial===C);return A+((M==null?void 0:M.denomination)||0)},0),F=(A=>{const C={1:[],5:[],10:[],20:[]};return A.forEach(M=>{const L=M.denomination||5;C[L]&&C[L].push(M)}),C})(N),$={1:"#27ae60",5:"#3498db",10:"#9b59b6",20:"#c9a227"};return t?l.jsx(ln,{title:"Issue Currency",children:l.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:l.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading..."})})}):l.jsxs(ln,{title:"Issue Currency",children:[g>0&&l.jsxs("div",{style:{position:"fixed",top:"100px",right:"2rem",background:"var(--kb-green)",color:"white",padding:"1rem 1.5rem",borderRadius:"8px",display:"flex",alignItems:"center",gap:"0.75rem",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:1e3},children:[l.jsx(Yr,{size:20}),l.jsxs("span",{children:["Issued ",g," Kinderbucks successfully!"]})]}),l.jsxs("div",{className:"card",style:{marginBottom:"2rem"},children:[l.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(Dh,{size:20})," Issue to Circulation"]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:"1.5rem",alignItems:"end"},children:[l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Recipient (optional)"}),l.jsx("input",{type:"text",value:c,onChange:A=>f(A.target.value),placeholder:"Business name or exchange point",style:{width:"100%"}})]}),l.jsxs("button",{className:"btn btn-gold",onClick:E,disabled:s.length===0||d,style:{display:"flex",alignItems:"center",gap:"0.5rem",height:"42px"},children:[l.jsx(Dh,{size:18}),d?"Issuing...":`Issue ${s.length} Selected`]})]}),s.length>0&&l.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem 1rem",background:"var(--kb-gold)",borderRadius:"8px",color:"var(--kb-navy)",fontWeight:"500"},children:["Selected: ",s.length," bills  Total value: $",P]})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[l.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-gray-500)"},children:N.length}),l.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Available (Draft)"})]}),l.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-green)"},children:D.length}),l.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Already Issued"})]}),l.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:s.length}),l.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Selected"})]})]}),l.jsxs("div",{className:"card",children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[l.jsxs("h3",{style:{color:"var(--kb-navy)",margin:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(Pw,{size:20})," Available to Issue (",N.length,")"]}),l.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[l.jsx("button",{className:"btn btn-secondary",onClick:k,style:{padding:"0.4rem 0.75rem",fontSize:"0.85rem"},children:"Select All"}),l.jsx("button",{className:"btn btn-secondary",onClick:T,style:{padding:"0.4rem 0.75rem",fontSize:"0.85rem"},children:"Clear"})]})]}),N.length===0?l.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[l.jsx(Pw,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),l.jsx("p",{children:"No draft Kinderbucks available."}),l.jsx("p",{style:{fontSize:"0.9rem"},children:"Generate some QR codes first."})]}):l.jsx("div",{children:[1,5,10,20].map(A=>{const C=F[A];return C.length===0?null:l.jsxs("div",{style:{marginBottom:"1.5rem"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem"},children:[l.jsxs("div",{style:{width:"24px",height:"24px",background:$[A],borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"0.75rem",fontWeight:"600"},children:["$",A]}),l.jsxs("span",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:["$",A," Bills (",C.length,")"]}),l.jsx("button",{onClick:()=>{const M=C.map(B=>B.serial),L=M.every(B=>s.includes(B));a(L?B=>B.filter(W=>!M.includes(W)):B=>[...new Set([...B,...M])])},style:{background:"none",border:"none",color:$[A],cursor:"pointer",fontSize:"0.85rem"},children:C.every(M=>s.includes(M.serial))?"Deselect all":"Select all"})]}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))",gap:"0.5rem"},children:C.map(M=>{const L=s.includes(M.serial);return l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.6rem 0.75rem",background:L?`${$[A]}15`:"var(--kb-gray-50)",borderRadius:"6px",cursor:"pointer",border:L?`2px solid ${$[A]}`:"2px solid transparent",transition:"all 0.15s"},children:[L?l.jsx(vV,{size:18,color:$[A]}):l.jsx(wV,{size:18,color:"var(--kb-gray-400)"}),l.jsx("input",{type:"checkbox",checked:L,onChange:()=>S(M.serial),style:{display:"none"}}),l.jsx("span",{style:{fontFamily:"monospace",fontSize:"0.85rem",color:L?$[A]:"var(--kb-gray-600)",fontWeight:L?"600":"400"},children:M.serial})]},M.serial)})})]},A)})})]})]})}const S8=[{code:"AVIARY",name:"The Aviary",category:"food"},{code:"MORNINGBIRD",name:"Morningbird Cafe",category:"food"},{code:"SAISONNIER",name:"Saisonnier",category:"food"},{code:"BROADST-BAGEL",name:"Broad Street Bagel Co.",category:"food"},{code:"BROOKLYN-PIZZA",name:"The Brooklyn Pizzeria",category:"food"},{code:"ISOLA",name:"Isola Wine Bar",category:"food"},{code:"HAMRAHS",name:"Hamrah's Lebanese Foods",category:"food"},{code:"OK-PANTRY",name:"OK Pantry",category:"retail"},{code:"BOTTLE-SHOP",name:"Kinderhook Bottle Shop",category:"retail"},{code:"BOOKS",name:"Kinderhook Books",category:"retail"},{code:"SAMASCOTTS",name:"Samascott's Garden Market",category:"retail"},{code:"SCHOOL-GALLERY",name:"The School | Jack Shainman Gallery",category:"arts"},{code:"SEPTEMBER",name:"September Gallery",category:"arts"},{code:"OLD-DUTCH",name:"Old Dutch Inn",category:"services"},{code:"MUSE",name:"Muse Aesthetics",category:"services"},{code:"PILATES",name:"Julia Jayne Pilates",category:"services"},{code:"HISTORICAL",name:"Columbia County Historical Society",category:"arts"},{code:"FEED-SEED",name:"The Feed and Seed",category:"retail"}],jp={food:{label:"Food & Drink",Icon:pE,color:"#e74c3c"},retail:{label:"Retail",Icon:mE,color:"#9b59b6"},services:{label:"Services",Icon:oE,color:"#3498db"},arts:{label:"Arts & Culture",Icon:hE,color:"#1abc9c"}};function E8(){const[n,e]=R.useState([]),[t,r]=R.useState(!0),[s,a]=R.useState({code:"",name:"",category:"food"}),[c,f]=R.useState(!1),[d,m]=R.useState(null),[g,y]=R.useState(!1),[x,S]=R.useState(null),k=async()=>{const F=await Us();e(F),r(!1)};R.useEffect(()=>{k()},[]);const T=async F=>{if(F.preventDefault(),!(!s.code||!s.name)){f(!0);try{await tk(s.code.toUpperCase(),s.name,s.category),a({code:"",name:"",category:"food"}),await k()}catch($){console.error("Error creating business:",$),alert("Error creating business")}f(!1)}},E=async(F,$)=>{await Q9(F,!$),await k()},N=async()=>{if(confirm("This will add all Kinderhook businesses. Continue?")){y(!0);try{for(const F of S8)n.find(A=>A.code===F.code)||await tk(F.code,F.name,F.category);await k(),alert("Businesses seeded successfully!")}catch(F){console.error("Error seeding:",F),alert("Error seeding businesses")}y(!1)}},D=F=>{navigator.clipboard.writeText(F),S(F),setTimeout(()=>S(null),2e3)},P="https://harmonicsystems.github.io/kinderbucks/#/checkin/",G={total:n.length,active:n.filter(F=>F.isActive).length,totalCheckins:n.reduce((F,$)=>F+($.checkinCount||0),0)};return t?l.jsx(ln,{title:"Business Directory",children:l.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:l.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading..."})})}):l.jsxs(ln,{title:"Business Directory",children:[l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[l.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:G.total}),l.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Businesses"})]}),l.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-green)"},children:G.active}),l.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Active"})]}),l.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-gold-dark)"},children:G.totalCheckins}),l.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Check-ins"})]})]}),l.jsxs("div",{className:"card",style:{marginBottom:"2rem"},children:[l.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(Mw,{size:20})," Add Business"]}),l.jsxs("form",{onSubmit:T,children:[l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1.5rem",marginBottom:"1.5rem"},children:[l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Code"}),l.jsx("input",{type:"text",value:s.code,onChange:F=>a($=>({...$,code:F.target.value.toUpperCase().replace(/[^A-Z0-9-]/g,"")})),placeholder:"CAFE-01",style:{width:"100%",fontFamily:"monospace"}})]}),l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Name"}),l.jsx("input",{type:"text",value:s.name,onChange:F=>a($=>({...$,name:F.target.value})),placeholder:"Village Caf",style:{width:"100%"}})]}),l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Category"}),l.jsx("select",{value:s.category,onChange:F=>a($=>({...$,category:F.target.value})),style:{width:"100%"},children:Object.entries(jp).map(([F,$])=>l.jsx("option",{value:F,children:$.label},F))})]})]}),l.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[l.jsxs("button",{type:"submit",className:"btn btn-primary",disabled:c||!s.code||!s.name,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(Mw,{size:18})," ",c?"Adding...":"Add Business"]}),l.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:N,disabled:g,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(Qy,{size:18})," ",g?"Seeding...":"Seed Kinderhook Businesses"]})]})]})]}),l.jsxs("div",{className:"card",children:[l.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(Rt,{size:20})," Participating Businesses (",n.length,")"]}),n.length===0?l.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[l.jsx(Rt,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),l.jsx("p",{children:"No businesses yet. Add one above or seed the Kinderhook businesses."})]}):l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:n.map(F=>{const $=jp[F.category]||jp.services,A=$.Icon,C=`${P}${F.code}`;return l.jsxs("div",{style:{background:F.isActive?"var(--kb-white)":"var(--kb-gray-50)",border:`1px solid ${F.isActive,"var(--kb-gray-200)"}`,borderRadius:"12px",padding:"1.25rem",opacity:F.isActive?1:.7},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"1rem"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[l.jsx("div",{style:{width:"48px",height:"48px",background:`${$.color}15`,borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(A,{size:24,color:$.color})}),l.jsxs("div",{children:[l.jsx("div",{style:{fontWeight:"600",color:F.isActive?"var(--kb-navy)":"var(--kb-gray-500)",fontSize:"1.1rem"},children:F.name}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginTop:"0.25rem"},children:[l.jsx("span",{style:{fontFamily:"monospace",fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:F.code}),l.jsx("span",{style:{fontSize:"0.85rem",color:$.color},children:$.label})]})]})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1.5rem"},children:[l.jsxs("div",{style:{textAlign:"center"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"var(--kb-green)",fontWeight:"600"},children:[l.jsx(zo,{size:16}),F.checkinCount||0]}),l.jsx("div",{style:{fontSize:"0.75rem",color:"var(--kb-gray-500)"},children:"check-ins"})]}),l.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[l.jsxs(ae,{to:`/admin/businesses/${F.code}`,className:"btn btn-gold",style:{padding:"0.5rem 0.75rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:[l.jsx(A4,{size:16})," Details"]}),l.jsx("button",{onClick:()=>m(d===F.code?null:F.code),className:"btn btn-secondary",style:{padding:"0.5rem 0.75rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:l.jsx(Kr,{size:16})}),l.jsxs("button",{onClick:()=>E(F.code,F.isActive),className:"btn",style:{padding:"0.5rem 0.75rem",background:F.isActive?"#e74c3c":"var(--kb-green)",color:"white",display:"flex",alignItems:"center",gap:"0.25rem"},children:[F.isActive?l.jsx(PV,{size:16}):l.jsx(RV,{size:16}),F.isActive?"Deactivate":"Activate"]})]})]})]}),d===F.code&&l.jsxs("div",{style:{marginTop:"1.5rem",paddingTop:"1.5rem",borderTop:"1px solid var(--kb-gray-200)",display:"flex",alignItems:"center",gap:"2rem",flexWrap:"wrap"},children:[l.jsx("div",{style:{textAlign:"center"},children:l.jsx(sl,{value:C,size:150,denomination:5,showFrame:!1})}),l.jsxs("div",{style:{flex:1,minWidth:"200px"},children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontSize:"0.85rem"},children:"Check-in URL"}),l.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[l.jsx("input",{type:"text",value:C,readOnly:!0,style:{flex:1,fontFamily:"monospace",fontSize:"0.85rem"}}),l.jsxs("button",{onClick:()=>D(C),className:"btn btn-secondary",style:{padding:"0.5rem 0.75rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:[l.jsx(Gy,{size:16}),x===C?"Copied!":"Copy"]})]}),l.jsx("p",{style:{marginTop:"0.75rem",fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Print this QR code and display it at the counter for customers to scan when they visit."})]})]})]},F.code)})})]})]})}const T8={curious:Xt,hooked:er,lineAndSinker:Zr,patron:Bn};function I8(){const[n,e]=R.useState([]),[t,r]=R.useState(!0),[s,a]=R.useState("all"),[c,f]=R.useState(null),d=async()=>{try{const k=Ms(bn(qe,"exchanges"),nl("createdAt","desc")),T=await vr(k);e(T.docs.map(E=>({id:E.id,...E.data()}))),r(!1)}catch(k){console.error("Error loading exchanges:",k),r(!1)}};R.useEffect(()=>{d()},[]);const m=async(k,T)=>{f(k);try{await Jr(Ut(qe,"exchanges",k),{status:T,processedAt:Vt()}),await d()}catch(E){console.error("Error updating exchange:",E),alert("Error updating exchange status")}f(null)},g=s==="all"?n:n.filter(k=>k.status===s),y={total:n.length,pending:n.filter(k=>k.status==="pending").length,completed:n.filter(k=>k.status==="completed").length,cancelled:n.filter(k=>k.status==="cancelled").length,totalValue:n.filter(k=>k.status==="completed").reduce((k,T)=>k+(T.kinderbucksAmount||0),0)},x=k=>{switch(k){case"completed":return l.jsx(Yr,{size:18,color:"var(--kb-green)"});case"pending":return l.jsx(wr,{size:18,color:"#e67e22"});case"cancelled":return l.jsx(c4,{size:18,color:"#e74c3c"});default:return l.jsx(qy,{size:18,color:"var(--kb-gray-400)"})}},S=k=>{switch(k){case"completed":return{background:"#d4edda",color:"var(--kb-green)"};case"pending":return{background:"#fff3cd",color:"#856404"};case"cancelled":return{background:"#f8d7da",color:"#721c24"};default:return{background:"#f8f9fa",color:"var(--kb-gray-600)"}}};return t?l.jsx(ln,{title:"Exchange Management",children:l.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:l.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading exchanges..."})})}):l.jsxs(ln,{title:"Exchange Management",children:[l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[l.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"#e67e22"},children:y.pending}),l.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Pending"})]}),l.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-green)"},children:y.completed}),l.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Completed"})]}),l.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[l.jsxs("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-gold-dark)"},children:["$",y.totalValue.toFixed(0)]}),l.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Exchanged"})]})]}),l.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem",flexWrap:"wrap"},children:[{value:"all",label:`All (${y.total})`},{value:"pending",label:`Pending (${y.pending})`},{value:"completed",label:`Completed (${y.completed})`},{value:"cancelled",label:`Cancelled (${y.cancelled})`}].map(k=>l.jsx("button",{onClick:()=>a(k.value),className:s===k.value?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem"},children:k.label},k.value))}),l.jsx("div",{className:"card",children:g.length===0?l.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[l.jsx(vf,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),l.jsxs("p",{children:["No ",s!=="all"?s:""," exchanges found"]})]}):l.jsxs("div",{children:[l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 150px",gap:"1rem",padding:"0.75rem 1rem",borderBottom:"2px solid var(--kb-navy)",fontWeight:"600",color:"var(--kb-navy)",fontSize:"0.85rem"},children:[l.jsx("div",{children:"Date"}),l.jsx("div",{children:"Amount"}),l.jsx("div",{children:"Tier & Bonus"}),l.jsx("div",{children:"Status"}),l.jsx("div",{children:"Actions"})]}),g.map(k=>{var E,N,D,P,G,F,$;const T=T8[k.tier]||Xt;return l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 150px",gap:"1rem",padding:"1rem",borderBottom:"1px solid var(--kb-gray-100)",alignItems:"center",background:k.status==="pending"?"rgba(230, 126, 34, 0.05)":"transparent"},children:[l.jsxs("div",{children:[l.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:((D=(N=(E=k.createdAt)==null?void 0:E.toDate)==null?void 0:N.call(E))==null?void 0:D.toLocaleDateString())||"Unknown"}),l.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:((F=(G=(P=k.createdAt)==null?void 0:P.toDate)==null?void 0:G.call(P))==null?void 0:F.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))||""})]}),l.jsxs("div",{children:[l.jsxs("div",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:["$",k.usdAmount," USD"]}),l.jsxs("div",{style:{fontSize:"0.9rem",color:"var(--kb-gold-dark)"},children:[" $",($=k.kinderbucksAmount)==null?void 0:$.toFixed(2)," KB"]})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(T,{size:18,color:"var(--kb-gray-500)"}),l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"0.9rem",color:"var(--kb-gray-700)",textTransform:"capitalize"},children:k.tier||"curious"}),l.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--kb-green)"},children:["+",Math.round((k.bonusRate||.1)*100),"% bonus"]})]})]}),l.jsx("div",{children:l.jsxs("span",{className:"badge",style:{...S(k.status),display:"inline-flex",alignItems:"center",gap:"0.25rem"},children:[x(k.status),k.status]})}),l.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[k.status==="pending"&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>m(k.id,"completed"),disabled:c===k.id,className:"btn btn-primary",style:{padding:"0.4rem 0.75rem",fontSize:"0.8rem"},children:c===k.id?"...":"Approve"}),l.jsx("button",{onClick:()=>m(k.id,"cancelled"),disabled:c===k.id,className:"btn btn-secondary",style:{padding:"0.4rem 0.75rem",fontSize:"0.8rem"},children:"Cancel"})]}),k.status==="completed"&&l.jsx("span",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Processed"}),k.status==="cancelled"&&l.jsx("button",{onClick:()=>m(k.id,"pending"),disabled:c===k.id,className:"btn btn-secondary",style:{padding:"0.4rem 0.75rem",fontSize:"0.8rem"},children:"Reopen"})]})]},k.id)})]})})]})}const Pp={curious:Xt,hooked:er,lineAndSinker:Zr,patron:Bn},Mp={curious:"#888888",hooked:"#2e7d32",lineAndSinker:"#1565c0",patron:"#c9a227"};function C8(){const[n,e]=R.useState([]),[t,r]=R.useState([]),[s,a]=R.useState(!0),[c,f]=R.useState("checkins"),[d,m]=R.useState("all");R.useEffect(()=>{async function k(){try{const E=(await vr(bn(qe,"members"))).docs.map(D=>({id:D.id,...D.data()})),N=await Us();e(E),r(N),a(!1)}catch(T){console.error("Error loading members:",T),a(!1)}}k()},[]);const g=k=>{const T=t.find(E=>E.code===k);return T?T.name:k},y=[...n].sort((k,T)=>{var E,N,D,P,G,F;switch(c){case"checkins":return(T.totalCheckins||0)-(k.totalCheckins||0);case"businesses":return(((E=T.businessesVisited)==null?void 0:E.length)||0)-(((N=k.businessesVisited)==null?void 0:N.length)||0);case"recent":const $=((P=(D=k.lastCheckin)==null?void 0:D.toDate)==null?void 0:P.call(D))||new Date(0);return(((F=(G=T.lastCheckin)==null?void 0:G.toDate)==null?void 0:F.call(G))||new Date(0))-$;default:return 0}}),x=d==="all"?y:y.filter(k=>k.tier===d),S={total:n.length,curious:n.filter(k=>k.tier==="curious").length,hooked:n.filter(k=>k.tier==="hooked").length,lineAndSinker:n.filter(k=>k.tier==="lineAndSinker").length,patron:n.filter(k=>k.tier==="patron").length,totalCheckins:n.reduce((k,T)=>k+(T.totalCheckins||0),0)};return s?l.jsx(ln,{title:"Member Management",children:l.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:l.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading members..."})})}):l.jsxs(ln,{title:"Member Management",children:[l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(130px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[l.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:S.total}),l.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Members"})]}),Object.entries(Pp).map(([k,T])=>{var E;return l.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[l.jsx(T,{size:20,color:Mp[k]}),l.jsx("span",{style:{fontSize:"1.5rem",fontWeight:"700",color:Mp[k]},children:S[k]})]}),l.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)",textTransform:"capitalize"},children:((E=Jn[k])==null?void 0:E.name)||k})]},k)})]}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[l.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[l.jsx("button",{onClick:()=>m("all"),className:d==="all"?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem"},children:"All"}),Object.entries(Pp).map(([k,T])=>l.jsx("button",{onClick:()=>m(k),className:d===k?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:l.jsx(T,{size:16})},k))]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx("span",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"Sort by:"}),l.jsxs("select",{value:c,onChange:k=>f(k.target.value),style:{padding:"0.5rem"},children:[l.jsx("option",{value:"checkins",children:"Most Check-ins"}),l.jsx("option",{value:"businesses",children:"Most Businesses"}),l.jsx("option",{value:"recent",children:"Recent Activity"})]})]})]}),l.jsx("div",{className:"card",children:x.length===0?l.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[l.jsx(_r,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),l.jsx("p",{children:"No members found"})]}):l.jsxs("div",{children:[l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 2fr",gap:"1rem",padding:"0.75rem 1rem",borderBottom:"2px solid var(--kb-navy)",fontWeight:"600",color:"var(--kb-navy)",fontSize:"0.85rem"},children:[l.jsx("div",{children:"Member"}),l.jsx("div",{children:"Tier"}),l.jsx("div",{children:"Activity"}),l.jsx("div",{children:"Businesses Visited"})]}),x.map(k=>{var P,G,F,$,A;const T=Pp[k.tier]||Xt,E=Mp[k.tier]||"#888",N=Jn[k.tier]||Jn.curious,D=((P=k.businessesVisited)==null?void 0:P.length)||0;return l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 2fr",gap:"1rem",padding:"1rem",borderBottom:"1px solid var(--kb-gray-100)",alignItems:"center"},children:[l.jsxs("div",{children:[l.jsxs("div",{style:{fontFamily:"monospace",fontSize:"0.85rem",color:"var(--kb-gray-500)",wordBreak:"break-all"},children:[k.id.substring(0,16),"..."]}),k.lastCheckin&&l.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-400)",display:"flex",alignItems:"center",gap:"0.25rem",marginTop:"0.25rem"},children:[l.jsx(xf,{size:12}),"Last: ",(($=(F=(G=k.lastCheckin)==null?void 0:G.toDate)==null?void 0:F.call(G))==null?void 0:$.toLocaleDateString())||"Unknown"]})]}),l.jsxs("div",{children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:E,fontWeight:"600"},children:[l.jsx(T,{size:20}),N.name]}),l.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:[Math.round(N.bonus*100),"% bonus"]})]}),l.jsxs("div",{children:[l.jsxs("div",{style:{fontWeight:"600",color:"var(--kb-navy)",display:"flex",alignItems:"center",gap:"0.25rem"},children:[l.jsx(zo,{size:16}),k.totalCheckins||0]}),l.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:"check-ins"})]}),l.jsxs("div",{children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",marginBottom:"0.5rem",color:"var(--kb-gray-600)"},children:[l.jsx(No,{size:14}),l.jsx("span",{style:{fontWeight:"500"},children:D}),l.jsx("span",{style:{fontSize:"0.85rem"},children:"businesses"})]}),((A=k.businessesVisited)==null?void 0:A.length)>0&&l.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.25rem"},children:[k.businessesVisited.slice(0,3).map(C=>l.jsx("span",{style:{fontSize:"0.75rem",padding:"0.15rem 0.5rem",background:"var(--kb-gray-100)",borderRadius:"4px",color:"var(--kb-gray-600)"},children:g(C)},C)),k.businessesVisited.length>3&&l.jsxs("span",{style:{fontSize:"0.75rem",color:"var(--kb-gray-400)"},children:["+",k.businessesVisited.length-3," more"]})]})]})]},k.id)})]})}),l.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"var(--kb-gray-50)",borderRadius:"8px",textAlign:"center",color:"var(--kb-gray-600)",fontSize:"0.9rem"},children:["Total of ",l.jsx("strong",{children:S.totalCheckins})," check-ins across ",l.jsx("strong",{children:S.total})," members"]})]})}const Np={admin:{label:"Admin",color:"#dc2626",bgColor:"#fef2f2",Icon:Vh,description:"Full system access"},business:{label:"Business",color:"#2563eb",bgColor:"#eff6ff",Icon:Rt,description:"Business owner access"},member:{label:"Member",color:"var(--kb-green)",bgColor:"#f0fdf4",Icon:Ha,description:"Regular member"}};function A8(){const[n,e]=R.useState([]),[t,r]=R.useState([]),[s,a]=R.useState(!0),[c,f]=R.useState(""),[d,m]=R.useState("all"),[g,y]=R.useState(null),[x,S]=R.useState(null),[k,T]=R.useState(""),E=async()=>{const[$,A]=await Promise.all([zD(),Us()]);e($),r(A),a(!1)};R.useEffect(()=>{E()},[]);const N=async($,A)=>{try{await OD($,A),T("Role updated successfully"),setTimeout(()=>T(""),3e3),await E(),y(null)}catch(C){console.error("Error updating role:",C),alert("Error updating role")}},D=async($,A)=>{try{await BD($,A),T("Business assigned successfully"),setTimeout(()=>T(""),3e3),await E(),S(null)}catch(C){console.error("Error assigning business:",C),alert("Error assigning business")}},P=n.filter($=>{var M,L;const A=((M=$.email)==null?void 0:M.toLowerCase().includes(c.toLowerCase()))||((L=$.displayName)==null?void 0:L.toLowerCase().includes(c.toLowerCase())),C=d==="all"||$.role===d;return A&&C}),G={total:n.length,admins:n.filter($=>$.role==="admin").length,businesses:n.filter($=>$.role==="business").length,members:n.filter($=>$.role==="member").length},F=$=>$?($.toDate?$.toDate():new Date($)).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Never";return s?l.jsx(ln,{title:"User Management",children:l.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:l.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading..."})})}):l.jsxs(ln,{title:"User Management",children:[k&&l.jsxs("div",{style:{position:"fixed",top:"100px",right:"2rem",background:"var(--kb-green)",color:"white",padding:"1rem 1.5rem",borderRadius:"8px",display:"flex",alignItems:"center",gap:"0.75rem",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:1e3},children:[l.jsx(Yr,{size:20}),l.jsx("span",{children:k})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[l.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:G.total}),l.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Users"})]}),l.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"#dc2626"},children:G.admins}),l.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Admins"})]}),l.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"#2563eb"},children:G.businesses}),l.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Businesses"})]}),l.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-green)"},children:G.members}),l.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Members"})]})]}),l.jsx("div",{className:"card",style:{marginBottom:"2rem"},children:l.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap",alignItems:"center"},children:[l.jsxs("div",{style:{flex:1,minWidth:"200px",position:"relative"},children:[l.jsx(lV,{size:18,color:"var(--kb-gray-400)",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)"}}),l.jsx("input",{type:"text",placeholder:"Search by name or email...",value:c,onChange:$=>f($.target.value),style:{width:"100%",paddingLeft:"40px"}})]}),l.jsxs("select",{value:d,onChange:$=>m($.target.value),style:{minWidth:"150px"},children:[l.jsx("option",{value:"all",children:"All Roles"}),l.jsx("option",{value:"admin",children:"Admins"}),l.jsx("option",{value:"business",children:"Businesses"}),l.jsx("option",{value:"member",children:"Members"})]})]})}),l.jsxs("div",{className:"card",children:[l.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(_r,{size:20})," All Users (",P.length,")"]}),P.length===0?l.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[l.jsx(_r,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),l.jsx("p",{children:"No users found"})]}):l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:P.map($=>{const A=Np[$.role]||Np.member,C=A.Icon;return l.jsx("div",{style:{background:"var(--kb-gray-50)",border:"1px solid var(--kb-gray-200)",borderRadius:"12px",padding:"1.25rem"},children:l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"1rem"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[l.jsx("div",{style:{width:"48px",height:"48px",background:A.bgColor,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(C,{size:24,color:A.color})}),l.jsxs("div",{children:[l.jsxs("div",{style:{fontWeight:"600",color:"var(--kb-navy)",fontSize:"1.05rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[$.displayName||"Unnamed User",$.role==="admin"&&l.jsx(Bn,{size:16,color:"#c9a227"})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:[l.jsx(uE,{size:14}),$.email]}),$.businessCode&&l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#2563eb",fontSize:"0.85rem",marginTop:"0.25rem"},children:[l.jsx(Rt,{size:14}),$.businessCode]})]})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[l.jsx("div",{style:{padding:"0.4rem 0.8rem",background:A.bgColor,color:A.color,borderRadius:"6px",fontSize:"0.85rem",fontWeight:"600"},children:A.label}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:[l.jsx(xf,{size:14}),F($.lastLogin)]}),l.jsxs("div",{style:{position:"relative"},children:[l.jsx("button",{onClick:()=>y(g===$.id?null:$.id),className:"btn btn-secondary",style:{padding:"0.5rem"},children:l.jsx(I4,{size:18})}),g===$.id&&l.jsxs("div",{style:{position:"absolute",right:0,top:"100%",marginTop:"0.5rem",background:"white",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:100,minWidth:"180px",overflow:"hidden"},children:[l.jsx("div",{style:{padding:"0.75rem",borderBottom:"1px solid var(--kb-gray-200)"},children:l.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)",marginBottom:"0.25rem"},children:"Change Role"})}),Object.entries(Np).map(([M,L])=>l.jsxs("button",{onClick:()=>N($.id,M),style:{display:"flex",alignItems:"center",gap:"0.5rem",width:"100%",padding:"0.75rem 1rem",border:"none",background:$.role===M?L.bgColor:"transparent",color:"var(--kb-gray-700)",cursor:"pointer",textAlign:"left"},children:[l.jsx(L.Icon,{size:16,color:L.color}),L.label,$.role===M&&l.jsx(Yr,{size:14,color:L.color,style:{marginLeft:"auto"}})]},M)),$.role==="business"&&l.jsxs(l.Fragment,{children:[l.jsx("div",{style:{borderTop:"1px solid var(--kb-gray-200)"}}),l.jsxs("button",{onClick:()=>{y(null),S($.id)},style:{display:"flex",alignItems:"center",gap:"0.5rem",width:"100%",padding:"0.75rem 1rem",border:"none",background:"transparent",color:"#2563eb",cursor:"pointer",textAlign:"left"},children:[l.jsx(Rt,{size:16}),"Assign Business"]})]})]})]})]})]})},$.id)})})]}),x&&l.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:1e3},children:l.jsxs("div",{className:"card",style:{maxWidth:"400px",width:"100%",padding:"1.5rem"},children:[l.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Assign Business"}),l.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1rem"},children:"Select a business to assign to this user:"}),l.jsx("div",{style:{maxHeight:"300px",overflowY:"auto",marginBottom:"1rem"},children:t.map($=>l.jsxs("button",{onClick:()=>D(x,$.code),style:{display:"flex",alignItems:"center",gap:"0.75rem",width:"100%",padding:"0.75rem",border:"1px solid var(--kb-gray-200)",borderRadius:"8px",background:"white",cursor:"pointer",marginBottom:"0.5rem",textAlign:"left"},children:[l.jsx(Rt,{size:18,color:"var(--kb-navy)"}),l.jsxs("div",{children:[l.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:$.name}),l.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:$.code})]})]},$.code))}),l.jsx("button",{onClick:()=>S(null),className:"btn btn-secondary",style:{width:"100%"},children:"Cancel"})]})})]})}const sk={curious:Xt,hooked:er,lineAndSinker:Zr,patron:Bn},ok={curious:"#6b7280",hooked:"#16a34a",lineAndSinker:"#2563eb",patron:"#ca8a04"};function R8(){const{businessCode:n}=Ug(),[e,t]=R.useState(null),[r,s]=R.useState([]),[a,c]=R.useState(!0),[f,d]=R.useState(!1);R.useEffect(()=>{async function T(){const[E,N]=await Promise.all([R0(n),pT(n)]);t(E),s(N),c(!1)}T()},[n]);const m=()=>{const T=`https://harmonicsystems.github.io/kinderbucks/#/checkin/${n}`;navigator.clipboard.writeText(T),d(!0),setTimeout(()=>d(!1),2e3)},g=r.filter(T=>{var D;const E=(D=T.timestamp)!=null&&D.toDate?T.timestamp.toDate():new Date(T.timestamp),N=new Date;return E.toDateString()===N.toDateString()}).length,y=r.filter(T=>{var D;const E=(D=T.timestamp)!=null&&D.toDate?T.timestamp.toDate():new Date(T.timestamp),N=new Date;return N.setDate(N.getDate()-7),E>N}).length,x=new Set(r.map(T=>T.visitorId)).size,S=r.reduce((T,E)=>{const N=E.memberTier||"curious";return T[N]=(T[N]||0)+1,T},{});if(a)return l.jsx(ln,{title:"Business Details",children:l.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:l.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading..."})})});if(!e)return l.jsx(ln,{title:"Business Details",children:l.jsxs("div",{style:{textAlign:"center",padding:"4rem"},children:[l.jsx(Rt,{size:48,color:"var(--kb-gray-300)",style:{marginBottom:"1rem"}}),l.jsx("h2",{style:{color:"var(--kb-navy)"},children:"Business Not Found"}),l.jsxs("p",{style:{color:"var(--kb-gray-500)",marginBottom:"1.5rem"},children:['No business with code "',n,'" exists.']}),l.jsx(ae,{to:"/admin/businesses",className:"btn btn-primary",children:"Back to Businesses"})]})});const k=`https://harmonicsystems.github.io/kinderbucks/#/checkin/${n}`;return l.jsxs(ln,{title:"Business Details",children:[l.jsxs(ae,{to:"/admin/businesses",style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",color:"var(--kb-gray-500)",marginBottom:"1.5rem",fontSize:"0.9rem"},children:[l.jsx(QD,{size:16})," Back to Directory"]}),l.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",flexWrap:"wrap",gap:"1.5rem",marginBottom:"2rem"},children:[l.jsxs("div",{children:[l.jsx("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.25rem 0.75rem",background:e.isActive?"rgba(39, 174, 96, 0.1)":"rgba(231, 76, 60, 0.1)",color:e.isActive?"var(--kb-green)":"#e74c3c",borderRadius:"6px",fontSize:"0.85rem",fontWeight:"600",marginBottom:"0.75rem"},children:e.isActive?"Active":"Inactive"}),l.jsx("h1",{style:{color:"var(--kb-navy)",marginBottom:"0.25rem",fontSize:"2rem"},children:e.name}),l.jsx("div",{style:{fontFamily:"monospace",color:"var(--kb-gray-500)"},children:n})]}),l.jsxs("div",{className:"card",style:{padding:"1.5rem",textAlign:"center"},children:[l.jsx("div",{style:{background:"white",borderRadius:"12px",padding:"12px",marginBottom:"1rem"},children:l.jsx(sl,{value:k,size:120,showFrame:!1})}),l.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[l.jsxs("button",{onClick:m,className:"btn btn-secondary",style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.25rem",fontSize:"0.85rem"},children:[l.jsx(Gy,{size:14})," ",f?"Copied!":"Copy URL"]}),l.jsxs("button",{onClick:()=>window.print(),className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"0.85rem"},children:[l.jsx(Qy,{size:14})," Print"]})]})]})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[l.jsx("div",{className:"card",style:{padding:"1.25rem"},children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[l.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(39, 174, 96, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(zo,{size:22,color:"var(--kb-green)"})}),l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:e.checkinCount||0}),l.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Total Check-ins"})]})]})}),l.jsx("div",{className:"card",style:{padding:"1.25rem"},children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[l.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(52, 152, 219, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(wr,{size:22,color:"#3498db"})}),l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:g}),l.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Today"})]})]})}),l.jsx("div",{className:"card",style:{padding:"1.25rem"},children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[l.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(155, 89, 182, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(xf,{size:22,color:"#9b59b6"})}),l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:y}),l.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"This Week"})]})]})}),l.jsx("div",{className:"card",style:{padding:"1.25rem"},children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[l.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(201, 162, 39, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(_r,{size:22,color:"var(--kb-gold-dark)"})}),l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:x}),l.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Unique Visitors"})]})]})})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem"},children:[l.jsxs("div",{className:"card",children:[l.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem"},children:"Check-ins by Member Tier"}),Object.keys(S).length===0?l.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"No check-ins yet"}):l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:["curious","hooked","lineAndSinker","patron"].map(T=>{const E=S[T]||0;if(E===0&&!S[T])return null;const N=sk[T],D=ok[T],P={curious:"Curious",hooked:"Hooked",lineAndSinker:"Line & Sinker",patron:"Village Patron"},G=Math.max(...Object.values(S),1),F=E/G*100;return l.jsxs("div",{children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.5rem"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(N,{size:18,color:D}),l.jsx("span",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:P[T]})]}),l.jsx("span",{style:{color:"var(--kb-gray-500)",fontWeight:"600"},children:E})]}),l.jsx("div",{style:{height:"8px",background:"var(--kb-gray-100)",borderRadius:"4px",overflow:"hidden"},children:l.jsx("div",{style:{width:`${F}%`,height:"100%",background:D,borderRadius:"4px"}})})]},T)}).filter(Boolean)})]}),l.jsxs("div",{className:"card",children:[l.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Check-in Information"}),l.jsxs("div",{style:{marginBottom:"1rem"},children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontSize:"0.85rem"},children:"Check-in URL"}),l.jsx("input",{type:"text",value:k,readOnly:!0,style:{width:"100%",fontFamily:"monospace",fontSize:"0.85rem"}})]}),l.jsxs("div",{style:{background:"var(--kb-cream)",borderRadius:"8px",padding:"1rem"},children:[l.jsx("h4",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem",fontSize:"0.95rem"},children:"How Check-ins Work"}),l.jsxs("ul",{style:{color:"var(--kb-gray-600)",fontSize:"0.9rem",paddingLeft:"1.25rem",lineHeight:1.6},children:[l.jsx("li",{children:"Customer scans QR code with phone"}),l.jsx("li",{children:"App shows verification code + bonus %"}),l.jsx("li",{children:"Customer shows screen to cashier"}),l.jsx("li",{children:"1 hour cooldown between check-ins"})]})]})]})]}),l.jsxs("div",{className:"card",style:{marginTop:"1.5rem"},children:[l.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(wr,{size:20})," Recent Check-ins"]}),r.length===0?l.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[l.jsx(_r,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),l.jsx("p",{children:"No check-ins recorded yet"})]}):l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:r.slice(0,25).map((T,E)=>{var G,F;const N=(G=T.timestamp)!=null&&G.toDate?T.timestamp.toDate():new Date(T.timestamp),D=sk[T.memberTier]||Xt,P=ok[T.memberTier]||"#6b7280";return l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"var(--kb-gray-50)",borderRadius:"8px"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[l.jsx("div",{style:{width:"36px",height:"36px",background:"var(--kb-green)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(Yr,{size:18,color:"white"})}),l.jsxs("div",{children:[l.jsxs("div",{style:{fontWeight:"500",color:"var(--kb-navy)",display:"flex",alignItems:"center",gap:"0.5rem"},children:["Check-in",T.memberTier&&l.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",fontSize:"0.75rem",color:P,background:`${P}15`,padding:"0.125rem 0.5rem",borderRadius:"4px"},children:[l.jsx(D,{size:12}),T.memberTier]})]}),l.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)",fontFamily:"monospace"},children:[(F=T.visitorId)==null?void 0:F.substring(0,8),"..."]})]})]}),l.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:N.toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]},T.id||E)})})]})]})}const j8="AIzaSyBTfW1zXwDOYJGEZ7ktRsLNowGvFewLKj0",P8={lat:42.3951,lng:-73.6977},gT={"BROADST-BAGEL":{address:"4 Broad St, Kinderhook, NY 12106",location:{lat:42.3949,lng:-73.6981},phone:"(518) 758-1133",hours:{monday:"7:00 AM - 2:00 PM",tuesday:"7:00 AM - 2:00 PM",wednesday:"7:00 AM - 2:00 PM",thursday:"7:00 AM - 2:00 PM",friday:"7:00 AM - 2:00 PM",saturday:"7:00 AM - 2:00 PM",sunday:"8:00 AM - 1:00 PM"}},MORNINGBIRD:{address:"19 Hudson St, Kinderhook, NY 12106",location:{lat:42.3943,lng:-73.6985},phone:"(518) 758-1866",hours:{monday:"Closed",tuesday:"8:00 AM - 3:00 PM",wednesday:"8:00 AM - 3:00 PM",thursday:"8:00 AM - 3:00 PM",friday:"8:00 AM - 3:00 PM",saturday:"8:00 AM - 3:00 PM",sunday:"8:00 AM - 3:00 PM"}},AVIARY:{address:"6 Hudson St, Kinderhook, NY 12106",location:{lat:42.3956,lng:-73.6972},hours:{monday:"Closed",tuesday:"Closed",wednesday:"5:00 PM - 9:00 PM",thursday:"5:00 PM - 9:00 PM",friday:"5:00 PM - 10:00 PM",saturday:"5:00 PM - 10:00 PM",sunday:"5:00 PM - 9:00 PM"}},SAISONNIER:{address:"4 Hudson St, Kinderhook, NY 12106",location:{lat:42.3958,lng:-73.697},hours:{monday:"Closed",tuesday:"Closed",wednesday:"5:00 PM - 9:00 PM",thursday:"5:00 PM - 9:00 PM",friday:"5:00 PM - 10:00 PM",saturday:"11:30 AM - 2:30 PM, 5:00 PM - 10:00 PM",sunday:"11:30 AM - 2:30 PM, 5:00 PM - 9:00 PM"}},"BROOKLYN-PIZZA":{address:"15 Chatham St, Kinderhook, NY 12106",location:{lat:42.3962,lng:-73.6965},phone:"(518) 758-6555",hours:{monday:"11:00 AM - 9:00 PM",tuesday:"11:00 AM - 9:00 PM",wednesday:"11:00 AM - 9:00 PM",thursday:"11:00 AM - 9:00 PM",friday:"11:00 AM - 10:00 PM",saturday:"11:00 AM - 10:00 PM",sunday:"12:00 PM - 9:00 PM"}},"OK-PANTRY":{address:"9 Hudson St, Kinderhook, NY 12106",location:{lat:42.3954,lng:-73.6975},hours:{monday:"10:00 AM - 6:00 PM",tuesday:"10:00 AM - 6:00 PM",wednesday:"10:00 AM - 6:00 PM",thursday:"10:00 AM - 6:00 PM",friday:"10:00 AM - 6:00 PM",saturday:"10:00 AM - 5:00 PM",sunday:"Closed"}},BOOKS:{address:"8 Broad St, Kinderhook, NY 12106",location:{lat:42.3947,lng:-73.6983},hours:{monday:"Closed",tuesday:"11:00 AM - 5:00 PM",wednesday:"11:00 AM - 5:00 PM",thursday:"11:00 AM - 5:00 PM",friday:"11:00 AM - 5:00 PM",saturday:"11:00 AM - 5:00 PM",sunday:"12:00 PM - 4:00 PM"}},ISOLA:{address:"15 Hudson St, Kinderhook, NY 12106",location:{lat:42.3945,lng:-73.6983},hours:{monday:"Closed",tuesday:"Closed",wednesday:"4:00 PM - 9:00 PM",thursday:"4:00 PM - 9:00 PM",friday:"4:00 PM - 10:00 PM",saturday:"12:00 PM - 10:00 PM",sunday:"12:00 PM - 8:00 PM"}},"OLD-DUTCH":{address:"3 Albany Ave, Kinderhook, NY 12106",location:{lat:42.3952,lng:-73.6979},hours:{monday:"Closed",tuesday:"Closed",wednesday:"5:00 PM - 9:00 PM",thursday:"5:00 PM - 9:00 PM",friday:"5:00 PM - 10:00 PM",saturday:"11:00 AM - 10:00 PM",sunday:"11:00 AM - 8:00 PM"}},SAMASCOTTS:{address:"5 Sunset Ave, Kinderhook, NY 12106",location:{lat:42.3938,lng:-73.6995},hours:{monday:"9:00 AM - 6:00 PM",tuesday:"9:00 AM - 6:00 PM",wednesday:"9:00 AM - 6:00 PM",thursday:"9:00 AM - 6:00 PM",friday:"9:00 AM - 6:00 PM",saturday:"9:00 AM - 6:00 PM",sunday:"9:00 AM - 5:00 PM"}},"BOTTLE-SHOP":{address:"6 Broad St, Kinderhook, NY 12106",location:{lat:42.3948,lng:-73.6982},hours:{monday:"12:00 PM - 7:00 PM",tuesday:"12:00 PM - 7:00 PM",wednesday:"12:00 PM - 7:00 PM",thursday:"12:00 PM - 7:00 PM",friday:"12:00 PM - 8:00 PM",saturday:"11:00 AM - 8:00 PM",sunday:"12:00 PM - 5:00 PM"}},HAMRAHS:{address:"1 Albany Ave, Kinderhook, NY 12106",location:{lat:42.3953,lng:-73.6976},hours:{monday:"Closed",tuesday:"11:00 AM - 8:00 PM",wednesday:"11:00 AM - 8:00 PM",thursday:"11:00 AM - 8:00 PM",friday:"11:00 AM - 9:00 PM",saturday:"11:00 AM - 9:00 PM",sunday:"11:00 AM - 8:00 PM"}},"SCHOOL-GALLERY":{address:"25 Broad St, Kinderhook, NY 12106",location:{lat:42.394,lng:-73.699},hours:{monday:"Closed",tuesday:"Closed",wednesday:"11:00 AM - 6:00 PM",thursday:"11:00 AM - 6:00 PM",friday:"11:00 AM - 6:00 PM",saturday:"11:00 AM - 6:00 PM",sunday:"Closed"}},SEPTEMBER:{address:"17 Hudson St, Kinderhook, NY 12106",location:{lat:42.3944,lng:-73.6984},hours:{monday:"Closed",tuesday:"Closed",wednesday:"12:00 PM - 5:00 PM",thursday:"12:00 PM - 5:00 PM",friday:"12:00 PM - 5:00 PM",saturday:"12:00 PM - 5:00 PM",sunday:"12:00 PM - 5:00 PM"}},MUSE:{address:"7 Hudson St, Kinderhook, NY 12106",location:{lat:42.3955,lng:-73.6973},hours:{monday:"10:00 AM - 6:00 PM",tuesday:"10:00 AM - 6:00 PM",wednesday:"10:00 AM - 6:00 PM",thursday:"10:00 AM - 6:00 PM",friday:"10:00 AM - 6:00 PM",saturday:"10:00 AM - 4:00 PM",sunday:"Closed"}},PILATES:{address:"5 Hudson St, Kinderhook, NY 12106",location:{lat:42.3957,lng:-73.6971},hours:{monday:"9:00 AM - 7:00 PM",tuesday:"9:00 AM - 7:00 PM",wednesday:"9:00 AM - 7:00 PM",thursday:"9:00 AM - 7:00 PM",friday:"9:00 AM - 5:00 PM",saturday:"9:00 AM - 12:00 PM",sunday:"Closed"}},HISTORICAL:{address:"5 Albany Ave, Kinderhook, NY 12106",location:{lat:42.395,lng:-73.698},hours:{monday:"Closed",tuesday:"Closed",wednesday:"10:00 AM - 4:00 PM",thursday:"10:00 AM - 4:00 PM",friday:"10:00 AM - 4:00 PM",saturday:"10:00 AM - 4:00 PM",sunday:"12:00 PM - 4:00 PM"}},"FEED-SEED":{address:"22 Hudson St, Kinderhook, NY 12106",location:{lat:42.394,lng:-73.6988},hours:{monday:"9:00 AM - 5:00 PM",tuesday:"9:00 AM - 5:00 PM",wednesday:"9:00 AM - 5:00 PM",thursday:"9:00 AM - 5:00 PM",friday:"9:00 AM - 5:00 PM",saturday:"9:00 AM - 4:00 PM",sunday:"Closed"}}};function vs(n){if(!n)return null;const e=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],t=new Date,r=e[t.getDay()],s=n[r];if(!s||s==="Closed")return!1;const a=s.match(/(\d+):(\d+)\s*(AM|PM)/gi);if(!a||a.length<2)return null;const c=t.getHours(),f=t.getMinutes(),d=c*60+f,m=s.match(/(\d+):(\d+)\s*(AM|PM)/i);if(m){let g=parseInt(m[1]);const y=parseInt(m[2]),x=m[3].toUpperCase();x==="PM"&&g!==12&&(g+=12),x==="AM"&&g===12&&(g=0);const S=g*60+y,k=s.match(/(\d+):(\d+)\s*(AM|PM)/gi);if(k&&k.length>=2){const T=k[k.length-1].match(/(\d+):(\d+)\s*(AM|PM)/i);if(T){let E=parseInt(T[1]);const N=parseInt(T[2]),D=T[3].toUpperCase();D==="PM"&&E!==12&&(E+=12),D==="AM"&&E===12&&(E=0);const P=E*60+N;return d>=S&&d<P}}}return null}function yT(n){if(!n)return"Hours not available";const r=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][new Date().getDay()];return n[r]||"Hours not available"}function M8({businesses:n=[],onBusinessClick:e,showOpenOnly:t=!1}){const r=R.useRef(null),s=R.useRef(null),a=R.useRef([]),[c,f]=R.useState(null),[d,m]=R.useState(!1),[g,y]=R.useState(null),x=n.map(k=>({...k,...gT[k.code]})).filter(k=>k.location),S=t?x.filter(k=>vs(k.hours)):x;return R.useEffect(()=>{var T;if((T=window.google)!=null&&T.maps){m(!0);return}const k=document.createElement("script");k.src=`https://maps.googleapis.com/maps/api/js?key=${j8}&libraries=places`,k.async=!0,k.defer=!0,k.onload=()=>m(!0),k.onerror=()=>y("Failed to load Google Maps"),document.head.appendChild(k)},[]),R.useEffect(()=>{if(!(!d||!r.current||s.current))try{s.current=new window.google.maps.Map(r.current,{center:P8,zoom:17,styles:[{featureType:"poi.business",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"labels.icon",stylers:[{visibility:"off"}]}],mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!0})}catch{y("Failed to initialize map")}},[d]),R.useEffect(()=>{if(!(!s.current||!d||S.length===0)&&(a.current.forEach(k=>k.setMap(null)),a.current=[],S.forEach(k=>{if(!k.location)return;const T=vs(k.hours),E=new window.google.maps.Marker({position:k.location,map:s.current,title:k.name,icon:{path:window.google.maps.SymbolPath.CIRCLE,scale:12,fillColor:T===!0?"#27ae60":T===!1?"#95a5a6":"#c9a227",fillOpacity:1,strokeColor:"#ffffff",strokeWeight:3}});E.addListener("click",()=>{f(k),e&&e(k)}),a.current.push(E)}),S.length>0)){const k=new window.google.maps.LatLngBounds;S.forEach(T=>{T.location&&k.extend(T.location)}),s.current.fitBounds(k)}},[S.length,d,e]),g?l.jsxs("div",{style:{background:"var(--kb-gray-100)",borderRadius:"12px",padding:"3rem",textAlign:"center",color:"var(--kb-gray-500)"},children:[l.jsx(No,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),l.jsx("p",{children:g})]}):l.jsxs("div",{style:{position:"relative"},children:[l.jsx("div",{ref:r,style:{width:"100%",height:"400px",borderRadius:"12px",overflow:"hidden",background:"var(--kb-gray-100)"},children:!d&&l.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"var(--kb-gray-500)"},children:"Loading map..."})}),l.jsxs("div",{style:{display:"flex",gap:"1.5rem",justifyContent:"center",marginTop:"1rem",fontSize:"0.85rem",color:"var(--kb-gray-600)"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:"#27ae60"}}),"Open Now"]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:"#95a5a6"}}),"Closed"]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:"#c9a227"}}),"Hours Unknown"]})]}),c&&l.jsxs("div",{style:{position:"absolute",bottom:"60px",left:"50%",transform:"translateX(-50%)",background:"white",borderRadius:"12px",padding:"1rem 1.25rem",boxShadow:"0 4px 20px rgba(0,0,0,0.15)",minWidth:"280px",maxWidth:"90%",zIndex:10},children:[l.jsx("button",{onClick:()=>f(null),style:{position:"absolute",top:"8px",right:"8px",background:"none",border:"none",fontSize:"1.25rem",cursor:"pointer",color:"var(--kb-gray-400)"},children:""}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[l.jsx("span",{style:{display:"inline-block",width:"8px",height:"8px",borderRadius:"50%",background:vs(c.hours)?"#27ae60":"#95a5a6"}}),l.jsx("span",{style:{fontSize:"0.75rem",color:vs(c.hours)?"#27ae60":"var(--kb-gray-500)",fontWeight:"600"},children:vs(c.hours)?"OPEN NOW":"CLOSED"})]}),l.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem",fontSize:"1.1rem"},children:c.name}),c.address&&l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem",color:"var(--kb-gray-600)",marginBottom:"0.25rem"},children:[l.jsx(No,{size:14}),c.address]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem",color:"var(--kb-gray-600)",marginBottom:"1rem"},children:[l.jsx(wr,{size:14}),yT(c.hours)]}),c.address&&l.jsxs("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(c.address)}`,target:"_blank",rel:"noopener noreferrer",className:"btn btn-gold",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",fontSize:"0.85rem",padding:"0.5rem"},children:[l.jsx(dE,{size:14})," Get Directions"]})]})]})}const N8=42.3944,D8=-73.7059,ak={0:{icon:Dw,description:"Clear sky",suggestion:"Perfect day to explore the village!"},1:{icon:Dw,description:"Mainly clear",suggestion:"Great weather for a village stroll!"},2:{icon:Gd,description:"Partly cloudy",suggestion:"Nice day to visit local shops!"},3:{icon:Gd,description:"Overcast",suggestion:"Good day to cozy up at a cafe!"},45:{icon:Gd,description:"Foggy",suggestion:"Mysterious village vibes today!"},48:{icon:Gd,description:"Foggy",suggestion:"Grab a warm drink at a local cafe!"},51:{icon:vi,description:"Light drizzle",suggestion:"Pop into a shop to stay dry!"},53:{icon:vi,description:"Drizzle",suggestion:"Perfect excuse for a coffee break!"},55:{icon:vi,description:"Heavy drizzle",suggestion:"Browse the bookstore while it passes!"},61:{icon:vi,description:"Light rain",suggestion:"Duck into a local business!"},63:{icon:vi,description:"Rain",suggestion:"Great day for indoor shopping!"},65:{icon:vi,description:"Heavy rain",suggestion:"Stay cozy at a village restaurant!"},71:{icon:Aa,description:"Light snow",suggestion:"Beautiful! Warm up with hot cocoa!"},73:{icon:Aa,description:"Snow",suggestion:"Snow day! Explore the charming village!"},75:{icon:Aa,description:"Heavy snow",suggestion:"Cozy up at a local spot!"},77:{icon:Aa,description:"Snow grains",suggestion:"Winter wonderland vibes!"},80:{icon:vi,description:"Light showers",suggestion:"Quick visits between showers!"},81:{icon:vi,description:"Showers",suggestion:"Pop into shops along the way!"},82:{icon:vi,description:"Heavy showers",suggestion:"Find shelter at a cozy cafe!"},85:{icon:Aa,description:"Snow showers",suggestion:"Magical village views!"},86:{icon:Aa,description:"Heavy snow showers",suggestion:"Warm drinks are calling!"},95:{icon:fp,description:"Thunderstorm",suggestion:"Stay safe indoors!"},96:{icon:fp,description:"Thunderstorm with hail",suggestion:"Seek shelter in a shop!"},99:{icon:fp,description:"Severe thunderstorm",suggestion:"Stay safe inside!"}};function V8({compact:n=!1}){const[e,t]=R.useState(null),[r,s]=R.useState(!0),[a,c]=R.useState(null);if(R.useEffect(()=>{async function m(){var y,x,S,k;try{const T=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${N8}&longitude=${D8}&current=temperature_2m,relative_humidity_2m,weather_code,wind_speed_10m&daily=sunrise,sunset&temperature_unit=fahrenheit&wind_speed_unit=mph&timezone=America%2FNew_York`);if(!T.ok)throw new Error("Weather fetch failed");const E=await T.json(),N=(x=(y=E.daily)==null?void 0:y.sunrise)!=null&&x[0]?new Date(E.daily.sunrise[0]):null,D=(k=(S=E.daily)==null?void 0:S.sunset)!=null&&k[0]?new Date(E.daily.sunset[0]):null;t({temp:Math.round(E.current.temperature_2m),humidity:E.current.relative_humidity_2m,windSpeed:Math.round(E.current.wind_speed_10m),code:E.current.weather_code,sunrise:N,sunset:D}),s(!1)}catch(T){console.error("Weather error:",T),c("Could not load weather"),s(!1)}}m();const g=setInterval(m,1800*1e3);return()=>clearInterval(g)},[]),r)return l.jsx("div",{style:{background:"linear-gradient(135deg, #4a90d9 0%, #67b8e3 100%)",borderRadius:"12px",padding:n?"0.75rem 1rem":"1rem 1.25rem",color:"white",opacity:.7},children:"Loading weather..."});if(a||!e)return null;const f=ak[e.code]||ak[0],d=f.icon;return n?l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",background:"linear-gradient(135deg, #4a90d9 0%, #67b8e3 100%)",borderRadius:"10px",padding:"0.5rem 1rem",color:"white"},children:[l.jsx(d,{size:24}),l.jsxs("span",{style:{fontSize:"1.25rem",fontWeight:"700"},children:[e.temp,"F"]}),l.jsx("span",{style:{opacity:.9,fontSize:"0.85rem"},children:f.description})]}):l.jsxs("div",{style:{background:"linear-gradient(135deg, #4a90d9 0%, #67b8e3 100%)",borderRadius:"16px",padding:"1.25rem",color:"white"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.75rem"},children:[l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"0.8rem",opacity:.9,marginBottom:"0.25rem"},children:"Kinderhook, NY"}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsxs("span",{style:{fontSize:"2.5rem",fontWeight:"700",lineHeight:1},children:[e.temp,""]}),l.jsx("span",{style:{fontSize:"1rem"},children:"F"})]})]}),l.jsx(d,{size:56,strokeWidth:1.5})]}),l.jsx("div",{style:{fontSize:"1rem",fontWeight:"600",marginBottom:"0.5rem"},children:f.description}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem",fontSize:"0.8rem",opacity:.9,marginBottom:"1rem"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[l.jsx(E4,{size:14})," ",e.humidity,"%"]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[l.jsx(FV,{size:14})," ",e.windSpeed," mph"]}),e.sunrise&&l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[l.jsx(EV,{size:14})," ",e.sunrise.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})]}),e.sunset&&l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[l.jsx(IV,{size:14})," ",e.sunset.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})]})]}),l.jsx("div",{style:{background:"rgba(255,255,255,0.2)",borderRadius:"8px",padding:"0.75rem",fontSize:"0.9rem",fontStyle:"italic"},children:f.suggestion})]})}const Dp=new Map;function L8({businessName:n,address:e,size:t="medium",style:r={}}){const[s,a]=R.useState(null),[c,f]=R.useState(!0),[d,m]=R.useState(!1),g={small:{width:80,height:80},medium:{width:150,height:100},large:{width:300,height:200}},{width:y,height:x}=g[t]||g.medium;R.useEffect(()=>{if(!n){f(!1),m(!0);return}const k=`${n}-${e}`;if(Dp.has(k)){a(Dp.get(k)),f(!1);return}const T=setInterval(()=>{var D,P;(P=(D=window.google)==null?void 0:D.maps)!=null&&P.places&&(clearInterval(T),N())},100),E=setTimeout(()=>{clearInterval(T),f(!1),m(!0)},5e3);async function N(){try{const D=document.createElement("div"),P=new window.google.maps.places.PlacesService(D),G=`${n} ${e||"Kinderhook NY"}`;P.findPlaceFromQuery({query:G,fields:["photos","place_id"]},(F,$)=>{var A,C;if(clearTimeout(E),$===window.google.maps.places.PlacesServiceStatus.OK&&((C=(A=F==null?void 0:F[0])==null?void 0:A.photos)==null?void 0:C.length)>0){const L=F[0].photos[0].getUrl({maxWidth:y*2,maxHeight:x*2});Dp.set(k,L),a(L)}else m(!0);f(!1)})}catch(D){console.error("Place photo error:",D),m(!0),f(!1)}}return()=>{clearInterval(T),clearTimeout(E)}},[n,e,y,x]);const S={width:`${y}px`,height:`${x}px`,borderRadius:"8px",overflow:"hidden",background:"var(--kb-gray-100)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,...r};return c?l.jsxs("div",{style:S,children:[l.jsx("div",{style:{width:"24px",height:"24px",border:"2px solid var(--kb-gray-200)",borderTopColor:"var(--kb-navy)",borderRadius:"50%",animation:"spin 1s linear infinite"}}),l.jsx("style",{children:`
          @keyframes spin {
            to { transform: rotate(360deg); }
          }
        `})]}):d||!s?l.jsx("div",{style:{...S,background:"linear-gradient(135deg, var(--kb-gray-100) 0%, var(--kb-gray-200) 100%)"},children:l.jsx(Rt,{size:24,color:"var(--kb-gray-400)"})}):l.jsx("div",{style:S,children:l.jsx("img",{src:s,alt:n,style:{width:"100%",height:"100%",objectFit:"cover"},onError:()=>m(!0)})})}function O8(){const[n,e]=R.useState([]),[t,r]=R.useState(!0),[s,a]=R.useState(!1),[c,f]=R.useState("all"),[d,m]=R.useState(!1);R.useEffect(()=>{async function E(){const N=await Us();e(N.filter(D=>D.isActive)),r(!1)}E()},[]);const g=n.map(E=>({...E,...gT[E.code]})),y=g.filter(E=>!(!E.address||s&&!vs(E.hours)||c!=="all"&&E.category!==c)),x=g.filter(E=>E.address&&vs(E.hours)),S=()=>{const N=new Date().toLocaleDateString("en-US",{weekday:"long"}),D=x.map(P=>P.name).join(", ");return`What's open in Kinderhook this ${N}? ${x.length} businesses are ready to serve you: ${D}. Show your OK Member card for bonus discounts! #Kinderbucks #ShopLocal`},k=async()=>{const E=S();if(navigator.share)try{await navigator.share({title:"What's Open in Kinderhook",text:E})}catch{}else navigator.clipboard.writeText(E),m(!0),setTimeout(()=>m(!1),2e3)},T=[{key:"all",label:"All"},{key:"food",label:"Food & Drink"},{key:"retail",label:"Retail"},{key:"services",label:"Services"},{key:"arts",label:"Arts & Culture"}];return l.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[l.jsx(Sn,{}),l.jsxs("main",{style:{flex:1,background:"var(--kb-cream)"},children:[l.jsx("section",{style:{background:"linear-gradient(135deg, var(--kb-navy) 0%, var(--kb-navy-light) 100%)",padding:"2rem 1rem",color:"white",textAlign:"center"},children:l.jsxs(ve.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[l.jsx("div",{className:"badge badge-gold",style:{marginBottom:"0.75rem"},children:"Village Directory"}),l.jsx("h1",{style:{marginBottom:"0.5rem"},children:"Explore Kinderhook"}),l.jsx("p",{style:{opacity:.8,maxWidth:"500px",margin:"0 auto"},children:"Find participating businesses, check hours, and earn rewards"})]})}),l.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto",padding:"2rem 1rem"},children:[l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[l.jsx(ve.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:l.jsx(V8,{})}),l.jsx(ve.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card",style:{background:"linear-gradient(135deg, var(--kb-green) 0%, #1e8449 100%)",color:"white"},children:l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"1rem"},children:[l.jsxs("div",{children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[l.jsx(wr,{size:20}),l.jsx("span",{style:{fontWeight:"600"},children:"Open Right Now"})]}),l.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700"},children:[x.length," Businesses"]}),l.jsx("div",{style:{opacity:.9,fontSize:"0.9rem"},children:"Show your OK card for bonus discounts!"})]}),l.jsxs("button",{onClick:k,className:"btn",style:{background:"rgba(255,255,255,0.2)",color:"white",display:"flex",alignItems:"center",gap:"0.5rem"},children:[d?l.jsx(Yr,{size:18}):l.jsx(dV,{size:18}),d?"Copied!":"Share"]})]})})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"1rem",marginBottom:"1.5rem"},children:[l.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:T.map(E=>l.jsx("button",{onClick:()=>f(E.key),className:"btn",style:{padding:"0.5rem 1rem",fontSize:"0.85rem",background:c===E.key?"var(--kb-navy)":"white",color:c===E.key?"white":"var(--kb-gray-600)",border:"1px solid var(--kb-gray-200)"},children:E.label},E.key))}),l.jsxs("button",{onClick:()=>a(!s),className:"btn",style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",fontSize:"0.85rem",background:s?"var(--kb-green)":"white",color:s?"white":"var(--kb-gray-600)",border:"1px solid var(--kb-gray-200)"},children:[l.jsx(j4,{size:16}),s?"Showing Open Only":"Show Open Only"]})]}),l.jsx(ve.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},style:{marginBottom:"2rem"},children:t?l.jsx("div",{className:"card",style:{padding:"4rem",textAlign:"center",color:"var(--kb-gray-500)"},children:"Loading businesses..."}):l.jsx(M8,{businesses:c==="all"?n:n.filter(E=>E.category===c),showOpenOnly:s})}),l.jsxs("h2",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:[s?"Open Now":"All Businesses"," (",y.length,")"]}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"1rem"},children:y.map((E,N)=>{const D=vs(E.hours),P=yT(E.hours);return l.jsxs(ve.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:N*.05},className:"card",style:{padding:"1.25rem",overflow:"hidden"},children:[l.jsx("div",{style:{margin:"-1.25rem -1.25rem 1rem -1.25rem"},children:l.jsx(L8,{businessName:E.name,address:E.address,size:"large",style:{width:"100%",height:"120px",borderRadius:0}})}),l.jsxs("div",{style:{marginBottom:"0.75rem"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:[l.jsx("span",{style:{display:"inline-block",width:"8px",height:"8px",borderRadius:"50%",background:D?"#27ae60":"#95a5a6"}}),l.jsx("span",{style:{fontSize:"0.7rem",fontWeight:"600",color:D?"#27ae60":"var(--kb-gray-500)"},children:D?"OPEN NOW":"CLOSED"})]}),l.jsx("h3",{style:{color:"var(--kb-navy)",fontSize:"1.1rem",marginBottom:"0.25rem"},children:E.name})]}),E.address&&l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem",color:"var(--kb-gray-600)",marginBottom:"0.25rem"},children:[l.jsx(No,{size:14}),E.address]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem",color:"var(--kb-gray-600)",marginBottom:"0.5rem"},children:[l.jsx(wr,{size:14}),"Today: ",P]}),E.phone&&l.jsxs("a",{href:`tel:${E.phone}`,style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem",color:"var(--kb-gray-600)",textDecoration:"none",marginBottom:"0.75rem"},children:[l.jsx(J4,{size:14}),E.phone]}),E.address&&l.jsxs("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(E.address)}`,target:"_blank",rel:"noopener noreferrer",className:"btn btn-gold",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",width:"100%",fontSize:"0.85rem",padding:"0.5rem"},children:[l.jsx(dE,{size:14})," Get Directions"]})]},E.code)})}),y.length===0&&!t&&l.jsxs("div",{className:"card",style:{padding:"3rem",textAlign:"center",color:"var(--kb-gray-500)"},children:[l.jsx(Rt,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),l.jsx("p",{children:"No businesses match your filters"}),l.jsx("button",{onClick:()=>{a(!1),f("all")},className:"btn btn-secondary",style:{marginTop:"1rem"},children:"Clear Filters"})]})]})]}),l.jsx(En,{})]})}function B8(){return l.jsx(UD,{children:l.jsx(tA,{children:l.jsxs(jC,{children:[l.jsx(ut,{path:"/",element:l.jsx(E9,{})}),l.jsx(ut,{path:"/demo",element:l.jsx(j9,{})}),l.jsx(ut,{path:"/about",element:l.jsx(H9,{})}),l.jsx(ut,{path:"/benefits",element:l.jsx(q9,{})}),l.jsx(ut,{path:"/businesses",element:l.jsx(Y9,{})}),l.jsx(ut,{path:"/map",element:l.jsx(O8,{})}),l.jsx(ut,{path:"/exchange",element:l.jsx(Z9,{})}),l.jsx(ut,{path:"/login",element:l.jsx(n8,{})}),l.jsx(ut,{path:"/account",element:l.jsx(e8,{})}),l.jsx(ut,{path:"/profile",element:l.jsx(t8,{})}),l.jsx(ut,{path:"/card",element:l.jsx(s8,{})}),l.jsx(ut,{path:"/scan/:serial",element:l.jsx(h8,{})}),l.jsx(ut,{path:"/checkin/:businessCode",element:l.jsx(x8,{})}),l.jsx(ut,{path:"/business/dashboard",element:l.jsx(xi,{allowedRoles:["business","admin"],children:l.jsx(w8,{})})}),l.jsx(ut,{path:"/admin/dashboard",element:l.jsx(xi,{allowedRoles:["admin"],children:l.jsx(_8,{})})}),l.jsx(ut,{path:"/admin/exchanges",element:l.jsx(xi,{allowedRoles:["admin"],children:l.jsx(I8,{})})}),l.jsx(ut,{path:"/admin/members",element:l.jsx(xi,{allowedRoles:["admin"],children:l.jsx(C8,{})})}),l.jsx(ut,{path:"/admin/generate",element:l.jsx(xi,{allowedRoles:["admin"],children:l.jsx(k8,{})})}),l.jsx(ut,{path:"/admin/issue",element:l.jsx(xi,{allowedRoles:["admin"],children:l.jsx(b8,{})})}),l.jsx(ut,{path:"/admin/businesses",element:l.jsx(xi,{allowedRoles:["admin"],children:l.jsx(E8,{})})}),l.jsx(ut,{path:"/admin/businesses/:businessCode",element:l.jsx(xi,{allowedRoles:["admin"],children:l.jsx(R8,{})})}),l.jsx(ut,{path:"/admin/users",element:l.jsx(xi,{allowedRoles:["admin"],children:l.jsx(A8,{})})})]})})})}MI.createRoot(document.getElementById("root")).render(l.jsx(R.StrictMode,{children:l.jsx(B8,{})}));
