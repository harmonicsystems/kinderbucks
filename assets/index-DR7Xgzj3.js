(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function ZI(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Bp={exports:{}},hc={},Fp={exports:{}},je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b1;function e2(){if(b1)return je;b1=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.iterator;function w(U){return U===null||typeof U!="object"?null:(U=v&&U[v]||U["@@iterator"],typeof U=="function"?U:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,C={};function I(U,ee,Ce){this.props=U,this.context=ee,this.refs=C,this.updater=Ce||T}I.prototype.isReactComponent={},I.prototype.setState=function(U,ee){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,ee,"setState")},I.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function V(){}V.prototype=I.prototype;function B(U,ee,Ce){this.props=U,this.context=ee,this.refs=C,this.updater=Ce||T}var P=B.prototype=new V;P.constructor=B,k(P,I.prototype),P.isPureReactComponent=!0;var G=Array.isArray,$=Object.prototype.hasOwnProperty,H={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function b(U,ee,Ce){var Ae,Ve={},Me=null,Ge=null;if(ee!=null)for(Ae in ee.ref!==void 0&&(Ge=ee.ref),ee.key!==void 0&&(Me=""+ee.key),ee)$.call(ee,Ae)&&!A.hasOwnProperty(Ae)&&(Ve[Ae]=ee[Ae]);var Ue=arguments.length-2;if(Ue===1)Ve.children=Ce;else if(1<Ue){for(var Xe=Array(Ue),cn=0;cn<Ue;cn++)Xe[cn]=arguments[cn+2];Ve.children=Xe}if(U&&U.defaultProps)for(Ae in Ue=U.defaultProps,Ue)Ve[Ae]===void 0&&(Ve[Ae]=Ue[Ae]);return{$$typeof:n,type:U,key:Me,ref:Ge,props:Ve,_owner:H.current}}function j(U,ee){return{$$typeof:n,type:U.type,key:ee,ref:U.ref,props:U.props,_owner:U._owner}}function L(U){return typeof U=="object"&&U!==null&&U.$$typeof===n}function O(U){var ee={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(Ce){return ee[Ce]})}var W=/\/+/g;function M(U,ee){return typeof U=="object"&&U!==null&&U.key!=null?O(""+U.key):ee.toString(36)}function Ne(U,ee,Ce,Ae,Ve){var Me=typeof U;(Me==="undefined"||Me==="boolean")&&(U=null);var Ge=!1;if(U===null)Ge=!0;else switch(Me){case"string":case"number":Ge=!0;break;case"object":switch(U.$$typeof){case n:case e:Ge=!0}}if(Ge)return Ge=U,Ve=Ve(Ge),U=Ae===""?"."+M(Ge,0):Ae,G(Ve)?(Ce="",U!=null&&(Ce=U.replace(W,"$&/")+"/"),Ne(Ve,ee,Ce,"",function(cn){return cn})):Ve!=null&&(L(Ve)&&(Ve=j(Ve,Ce+(!Ve.key||Ge&&Ge.key===Ve.key?"":(""+Ve.key).replace(W,"$&/")+"/")+U)),ee.push(Ve)),1;if(Ge=0,Ae=Ae===""?".":Ae+":",G(U))for(var Ue=0;Ue<U.length;Ue++){Me=U[Ue];var Xe=Ae+M(Me,Ue);Ge+=Ne(Me,ee,Ce,Xe,Ve)}else if(Xe=w(U),typeof Xe=="function")for(U=Xe.call(U),Ue=0;!(Me=U.next()).done;)Me=Me.value,Xe=Ae+M(Me,Ue++),Ge+=Ne(Me,ee,Ce,Xe,Ve);else if(Me==="object")throw ee=String(U),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.");return Ge}function He(U,ee,Ce){if(U==null)return U;var Ae=[],Ve=0;return Ne(U,Ae,"","",function(Me){return ee.call(Ce,Me,Ve++)}),Ae}function wt(U){if(U._status===-1){var ee=U._result;ee=ee(),ee.then(function(Ce){(U._status===0||U._status===-1)&&(U._status=1,U._result=Ce)},function(Ce){(U._status===0||U._status===-1)&&(U._status=2,U._result=Ce)}),U._status===-1&&(U._status=0,U._result=ee)}if(U._status===1)return U._result.default;throw U._result}var Se={current:null},ie={transition:null},pe={ReactCurrentDispatcher:Se,ReactCurrentBatchConfig:ie,ReactCurrentOwner:H};function ae(){throw Error("act(...) is not supported in production builds of React.")}return je.Children={map:He,forEach:function(U,ee,Ce){He(U,function(){ee.apply(this,arguments)},Ce)},count:function(U){var ee=0;return He(U,function(){ee++}),ee},toArray:function(U){return He(U,function(ee){return ee})||[]},only:function(U){if(!L(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},je.Component=I,je.Fragment=t,je.Profiler=s,je.PureComponent=B,je.StrictMode=r,je.Suspense=d,je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pe,je.act=ae,je.cloneElement=function(U,ee,Ce){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var Ae=k({},U.props),Ve=U.key,Me=U.ref,Ge=U._owner;if(ee!=null){if(ee.ref!==void 0&&(Me=ee.ref,Ge=H.current),ee.key!==void 0&&(Ve=""+ee.key),U.type&&U.type.defaultProps)var Ue=U.type.defaultProps;for(Xe in ee)$.call(ee,Xe)&&!A.hasOwnProperty(Xe)&&(Ae[Xe]=ee[Xe]===void 0&&Ue!==void 0?Ue[Xe]:ee[Xe])}var Xe=arguments.length-2;if(Xe===1)Ae.children=Ce;else if(1<Xe){Ue=Array(Xe);for(var cn=0;cn<Xe;cn++)Ue[cn]=arguments[cn+2];Ae.children=Ue}return{$$typeof:n,type:U.type,key:Ve,ref:Me,props:Ae,_owner:Ge}},je.createContext=function(U){return U={$$typeof:l,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:a,_context:U},U.Consumer=U},je.createElement=b,je.createFactory=function(U){var ee=b.bind(null,U);return ee.type=U,ee},je.createRef=function(){return{current:null}},je.forwardRef=function(U){return{$$typeof:f,render:U}},je.isValidElement=L,je.lazy=function(U){return{$$typeof:g,_payload:{_status:-1,_result:U},_init:wt}},je.memo=function(U,ee){return{$$typeof:m,type:U,compare:ee===void 0?null:ee}},je.startTransition=function(U){var ee=ie.transition;ie.transition={};try{U()}finally{ie.transition=ee}},je.unstable_act=ae,je.useCallback=function(U,ee){return Se.current.useCallback(U,ee)},je.useContext=function(U){return Se.current.useContext(U)},je.useDebugValue=function(){},je.useDeferredValue=function(U){return Se.current.useDeferredValue(U)},je.useEffect=function(U,ee){return Se.current.useEffect(U,ee)},je.useId=function(){return Se.current.useId()},je.useImperativeHandle=function(U,ee,Ce){return Se.current.useImperativeHandle(U,ee,Ce)},je.useInsertionEffect=function(U,ee){return Se.current.useInsertionEffect(U,ee)},je.useLayoutEffect=function(U,ee){return Se.current.useLayoutEffect(U,ee)},je.useMemo=function(U,ee){return Se.current.useMemo(U,ee)},je.useReducer=function(U,ee,Ce){return Se.current.useReducer(U,ee,Ce)},je.useRef=function(U){return Se.current.useRef(U)},je.useState=function(U){return Se.current.useState(U)},je.useSyncExternalStore=function(U,ee,Ce){return Se.current.useSyncExternalStore(U,ee,Ce)},je.useTransition=function(){return Se.current.useTransition()},je.version="18.3.1",je}var I1;function Cg(){return I1||(I1=1,Fp.exports=e2()),Fp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C1;function t2(){if(C1)return hc;C1=1;var n=Cg(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(f,d,m){var g,v={},w=null,T=null;m!==void 0&&(w=""+m),d.key!==void 0&&(w=""+d.key),d.ref!==void 0&&(T=d.ref);for(g in d)r.call(d,g)&&!a.hasOwnProperty(g)&&(v[g]=d[g]);if(f&&f.defaultProps)for(g in d=f.defaultProps,d)v[g]===void 0&&(v[g]=d[g]);return{$$typeof:e,type:f,key:w,ref:T,props:v,_owner:s.current}}return hc.Fragment=t,hc.jsx=l,hc.jsxs=l,hc}var A1;function n2(){return A1||(A1=1,Bp.exports=t2()),Bp.exports}var c=n2(),N=Cg();const Nt=ZI(N);var Od={},zp={exports:{}},xn={},Up={exports:{}},$p={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R1;function r2(){return R1||(R1=1,(function(n){function e(ie,pe){var ae=ie.length;ie.push(pe);e:for(;0<ae;){var U=ae-1>>>1,ee=ie[U];if(0<s(ee,pe))ie[U]=pe,ie[ae]=ee,ae=U;else break e}}function t(ie){return ie.length===0?null:ie[0]}function r(ie){if(ie.length===0)return null;var pe=ie[0],ae=ie.pop();if(ae!==pe){ie[0]=ae;e:for(var U=0,ee=ie.length,Ce=ee>>>1;U<Ce;){var Ae=2*(U+1)-1,Ve=ie[Ae],Me=Ae+1,Ge=ie[Me];if(0>s(Ve,ae))Me<ee&&0>s(Ge,Ve)?(ie[U]=Ge,ie[Me]=ae,U=Me):(ie[U]=Ve,ie[Ae]=ae,U=Ae);else if(Me<ee&&0>s(Ge,ae))ie[U]=Ge,ie[Me]=ae,U=Me;else break e}}return pe}function s(ie,pe){var ae=ie.sortIndex-pe.sortIndex;return ae!==0?ae:ie.id-pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var l=Date,f=l.now();n.unstable_now=function(){return l.now()-f}}var d=[],m=[],g=1,v=null,w=3,T=!1,k=!1,C=!1,I=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(ie){for(var pe=t(m);pe!==null;){if(pe.callback===null)r(m);else if(pe.startTime<=ie)r(m),pe.sortIndex=pe.expirationTime,e(d,pe);else break;pe=t(m)}}function G(ie){if(C=!1,P(ie),!k)if(t(d)!==null)k=!0,wt($);else{var pe=t(m);pe!==null&&Se(G,pe.startTime-ie)}}function $(ie,pe){k=!1,C&&(C=!1,V(b),b=-1),T=!0;var ae=w;try{for(P(pe),v=t(d);v!==null&&(!(v.expirationTime>pe)||ie&&!O());){var U=v.callback;if(typeof U=="function"){v.callback=null,w=v.priorityLevel;var ee=U(v.expirationTime<=pe);pe=n.unstable_now(),typeof ee=="function"?v.callback=ee:v===t(d)&&r(d),P(pe)}else r(d);v=t(d)}if(v!==null)var Ce=!0;else{var Ae=t(m);Ae!==null&&Se(G,Ae.startTime-pe),Ce=!1}return Ce}finally{v=null,w=ae,T=!1}}var H=!1,A=null,b=-1,j=5,L=-1;function O(){return!(n.unstable_now()-L<j)}function W(){if(A!==null){var ie=n.unstable_now();L=ie;var pe=!0;try{pe=A(!0,ie)}finally{pe?M():(H=!1,A=null)}}else H=!1}var M;if(typeof B=="function")M=function(){B(W)};else if(typeof MessageChannel<"u"){var Ne=new MessageChannel,He=Ne.port2;Ne.port1.onmessage=W,M=function(){He.postMessage(null)}}else M=function(){I(W,0)};function wt(ie){A=ie,H||(H=!0,M())}function Se(ie,pe){b=I(function(){ie(n.unstable_now())},pe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ie){ie.callback=null},n.unstable_continueExecution=function(){k||T||(k=!0,wt($))},n.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<ie?Math.floor(1e3/ie):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(ie){switch(w){case 1:case 2:case 3:var pe=3;break;default:pe=w}var ae=w;w=pe;try{return ie()}finally{w=ae}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ie,pe){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var ae=w;w=ie;try{return pe()}finally{w=ae}},n.unstable_scheduleCallback=function(ie,pe,ae){var U=n.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?U+ae:U):ae=U,ie){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=ae+ee,ie={id:g++,callback:pe,priorityLevel:ie,startTime:ae,expirationTime:ee,sortIndex:-1},ae>U?(ie.sortIndex=ae,e(m,ie),t(d)===null&&ie===t(m)&&(C?(V(b),b=-1):C=!0,Se(G,ae-U))):(ie.sortIndex=ee,e(d,ie),k||T||(k=!0,wt($))),ie},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(ie){var pe=w;return function(){var ae=w;w=pe;try{return ie.apply(this,arguments)}finally{w=ae}}}})($p)),$p}var P1;function i2(){return P1||(P1=1,Up.exports=r2()),Up.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j1;function s2(){if(j1)return xn;j1=1;var n=Cg(),e=i2();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(i,o){l(i,o),l(i+"Capture",o)}function l(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},v={};function w(i){return d.call(v,i)?!0:d.call(g,i)?!1:m.test(i)?v[i]=!0:(g[i]=!0,!1)}function T(i,o,u,p){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return p?!1:u!==null?!u.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function k(i,o,u,p){if(o===null||typeof o>"u"||T(i,o,u,p))return!0;if(p)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function C(i,o,u,p,y,x,S){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=p,this.attributeNamespace=y,this.mustUseProperty=u,this.propertyName=i,this.type=o,this.sanitizeURL=x,this.removeEmptyString=S}var I={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){I[i]=new C(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];I[o]=new C(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){I[i]=new C(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){I[i]=new C(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){I[i]=new C(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){I[i]=new C(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){I[i]=new C(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){I[i]=new C(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){I[i]=new C(i,5,!1,i.toLowerCase(),null,!1,!1)});var V=/[\-:]([a-z])/g;function B(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(V,B);I[o]=new C(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(V,B);I[o]=new C(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(V,B);I[o]=new C(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){I[i]=new C(i,1,!1,i.toLowerCase(),null,!1,!1)}),I.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){I[i]=new C(i,1,!1,i.toLowerCase(),null,!0,!0)});function P(i,o,u,p){var y=I.hasOwnProperty(o)?I[o]:null;(y!==null?y.type!==0:p||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(k(o,u,y,p)&&(u=null),p||y===null?w(o)&&(u===null?i.removeAttribute(o):i.setAttribute(o,""+u)):y.mustUseProperty?i[y.propertyName]=u===null?y.type===3?!1:"":u:(o=y.attributeName,p=y.attributeNamespace,u===null?i.removeAttribute(o):(y=y.type,u=y===3||y===4&&u===!0?"":""+u,p?i.setAttributeNS(p,o,u):i.setAttribute(o,u))))}var G=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$=Symbol.for("react.element"),H=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),O=Symbol.for("react.context"),W=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),Ne=Symbol.for("react.suspense_list"),He=Symbol.for("react.memo"),wt=Symbol.for("react.lazy"),Se=Symbol.for("react.offscreen"),ie=Symbol.iterator;function pe(i){return i===null||typeof i!="object"?null:(i=ie&&i[ie]||i["@@iterator"],typeof i=="function"?i:null)}var ae=Object.assign,U;function ee(i){if(U===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);U=o&&o[1]||""}return`
`+U+i}var Ce=!1;function Ae(i,o){if(!i||Ce)return"";Ce=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(Y){var p=Y}Reflect.construct(i,[],o)}else{try{o.call()}catch(Y){p=Y}i.call(o.prototype)}else{try{throw Error()}catch(Y){p=Y}i()}}catch(Y){if(Y&&p&&typeof Y.stack=="string"){for(var y=Y.stack.split(`
`),x=p.stack.split(`
`),S=y.length-1,D=x.length-1;1<=S&&0<=D&&y[S]!==x[D];)D--;for(;1<=S&&0<=D;S--,D--)if(y[S]!==x[D]){if(S!==1||D!==1)do if(S--,D--,0>D||y[S]!==x[D]){var F=`
`+y[S].replace(" at new "," at ");return i.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",i.displayName)),F}while(1<=S&&0<=D);break}}}finally{Ce=!1,Error.prepareStackTrace=u}return(i=i?i.displayName||i.name:"")?ee(i):""}function Ve(i){switch(i.tag){case 5:return ee(i.type);case 16:return ee("Lazy");case 13:return ee("Suspense");case 19:return ee("SuspenseList");case 0:case 2:case 15:return i=Ae(i.type,!1),i;case 11:return i=Ae(i.type.render,!1),i;case 1:return i=Ae(i.type,!0),i;default:return""}}function Me(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case A:return"Fragment";case H:return"Portal";case j:return"Profiler";case b:return"StrictMode";case M:return"Suspense";case Ne:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case O:return(i.displayName||"Context")+".Consumer";case L:return(i._context.displayName||"Context")+".Provider";case W:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case He:return o=i.displayName||null,o!==null?o:Me(i.type)||"Memo";case wt:o=i._payload,i=i._init;try{return Me(i(o))}catch{}}return null}function Ge(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Me(o);case 8:return o===b?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Ue(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Xe(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function cn(i){var o=Xe(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),p=""+i[o];if(!i.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var y=u.get,x=u.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return y.call(this)},set:function(S){p=""+S,x.call(this,S)}}),Object.defineProperty(i,o,{enumerable:u.enumerable}),{getValue:function(){return p},setValue:function(S){p=""+S},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Mo(i){i._valueTracker||(i._valueTracker=cn(i))}function vl(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var u=o.getValue(),p="";return i&&(p=Xe(i)?i.checked?"true":"false":i.value),i=p,i!==u?(o.setValue(i),!0):!1}function Ri(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Lo(i,o){var u=o.checked;return ae({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??i._wrapperState.initialChecked})}function ku(i,o){var u=o.defaultValue==null?"":o.defaultValue,p=o.checked!=null?o.checked:o.defaultChecked;u=Ue(o.value!=null?o.value:u),i._wrapperState={initialChecked:p,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Oo(i,o){o=o.checked,o!=null&&P(i,"checked",o,!1)}function Os(i,o){Oo(i,o);var u=Ue(o.value),p=o.type;if(u!=null)p==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+u):i.value!==""+u&&(i.value=""+u);else if(p==="submit"||p==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?Et(i,o.type,u):o.hasOwnProperty("defaultValue")&&Et(i,o.type,Ue(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function xl(i,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var p=o.type;if(!(p!=="submit"&&p!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,u||o===i.value||(i.value=o),i.defaultValue=o}u=i.name,u!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,u!==""&&(i.name=u)}function Et(i,o,u){(o!=="number"||Ri(i.ownerDocument)!==i)&&(u==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+u&&(i.defaultValue=""+u))}var gt=Array.isArray;function tr(i,o,u,p){if(i=i.options,o){o={};for(var y=0;y<u.length;y++)o["$"+u[y]]=!0;for(u=0;u<i.length;u++)y=o.hasOwnProperty("$"+i[u].value),i[u].selected!==y&&(i[u].selected=y),y&&p&&(i[u].defaultSelected=!0)}else{for(u=""+Ue(u),o=null,y=0;y<i.length;y++){if(i[y].value===u){i[y].selected=!0,p&&(i[y].defaultSelected=!0);return}o!==null||i[y].disabled||(o=i[y])}o!==null&&(o.selected=!0)}}function _l(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return ae({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function wl(i,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(t(92));if(gt(u)){if(1<u.length)throw Error(t(93));u=u[0]}o=u}o==null&&(o=""),u=o}i._wrapperState={initialValue:Ue(u)}}function Tu(i,o){var u=Ue(o.value),p=Ue(o.defaultValue);u!=null&&(u=""+u,u!==i.value&&(i.value=u),o.defaultValue==null&&i.defaultValue!==u&&(i.defaultValue=u)),p!=null&&(i.defaultValue=""+p)}function Pi(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function El(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Bo(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?El(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var ji,Su=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,p,y){MSApp.execUnsafeLocalFunction(function(){return i(o,u,p,y)})}:i})(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(ji=ji||document.createElement("div"),ji.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=ji.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function Bs(i,o){if(o){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=o;return}}i.textContent=o}var Ni={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bu=["Webkit","ms","Moz","O"];Object.keys(Ni).forEach(function(i){bu.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),Ni[o]=Ni[i]})});function Di(i,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||Ni.hasOwnProperty(i)&&Ni[i]?(""+o).trim():o+"px"}function Fo(i,o){i=i.style;for(var u in o)if(o.hasOwnProperty(u)){var p=u.indexOf("--")===0,y=Di(u,o[u],p);u==="float"&&(u="cssFloat"),p?i.setProperty(u,y):i[u]=y}}var kl=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nr(i,o){if(o){if(kl[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function zo(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vi=null;function Uo(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Qr=null,Yr=null,ht=null;function Tl(i){if(i=Xl(i)){if(typeof Qr!="function")throw Error(t(280));var o=i.stateNode;o&&(o=Zu(o),Qr(i.stateNode,i.type,o))}}function Mi(i){Yr?ht?ht.push(i):ht=[i]:Yr=i}function Li(){if(Yr){var i=Yr,o=ht;if(ht=Yr=null,Tl(i),o)for(i=0;i<o.length;i++)Tl(o[i])}}function Iu(i,o){return i(o)}function Cu(){}var wr=!1;function Au(i,o,u){if(wr)return i(o,u);wr=!0;try{return Iu(i,o,u)}finally{wr=!1,(Yr!==null||ht!==null)&&(Cu(),Li())}}function Fs(i,o){var u=i.stateNode;if(u===null)return null;var p=Zu(u);if(p===null)return null;u=p[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(i=i.type,p=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!p;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(t(231,o,typeof u));return u}var Oi=!1;if(f)try{var Bi={};Object.defineProperty(Bi,"passive",{get:function(){Oi=!0}}),window.addEventListener("test",Bi,Bi),window.removeEventListener("test",Bi,Bi)}catch{Oi=!1}function Ru(i,o,u,p,y,x,S,D,F){var Y=Array.prototype.slice.call(arguments,3);try{o.apply(u,Y)}catch(ne){this.onError(ne)}}var Xr=!1,Er=null,$o=!1,On=null,Pu={onError:function(i){Xr=!0,Er=i}};function ju(i,o,u,p,y,x,S,D,F){Xr=!1,Er=null,Ru.apply(Pu,arguments)}function Sl(i,o,u,p,y,x,S,D,F){if(ju.apply(this,arguments),Xr){if(Xr){var Y=Er;Xr=!1,Er=null}else throw Error(t(198));$o||($o=!0,On=Y)}}function rr(i){var o=i,u=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(u=o.return),i=o.return;while(i)}return o.tag===3?u:null}function bl(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function Nu(i){if(rr(i)!==i)throw Error(t(188))}function Du(i){var o=i.alternate;if(!o){if(o=rr(i),o===null)throw Error(t(188));return o!==i?null:i}for(var u=i,p=o;;){var y=u.return;if(y===null)break;var x=y.alternate;if(x===null){if(p=y.return,p!==null){u=p;continue}break}if(y.child===x.child){for(x=y.child;x;){if(x===u)return Nu(y),i;if(x===p)return Nu(y),o;x=x.sibling}throw Error(t(188))}if(u.return!==p.return)u=y,p=x;else{for(var S=!1,D=y.child;D;){if(D===u){S=!0,u=y,p=x;break}if(D===p){S=!0,p=y,u=x;break}D=D.sibling}if(!S){for(D=x.child;D;){if(D===u){S=!0,u=x,p=y;break}if(D===p){S=!0,p=x,u=y;break}D=D.sibling}if(!S)throw Error(t(189))}}if(u.alternate!==p)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?i:o}function Vu(i){return i=Du(i),i!==null?zs(i):null}function zs(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=zs(i);if(o!==null)return o;i=i.sibling}return null}var Il=e.unstable_scheduleCallback,Wo=e.unstable_cancelCallback,Us=e.unstable_shouldYield,Jr=e.unstable_requestPaint,tt=e.unstable_now,gf=e.unstable_getCurrentPriorityLevel,Ho=e.unstable_ImmediatePriority,Cl=e.unstable_UserBlockingPriority,$s=e.unstable_NormalPriority,Al=e.unstable_LowPriority,Ko=e.unstable_IdlePriority,Ws=null,kn=null;function Mu(i){if(kn&&typeof kn.onCommitFiberRoot=="function")try{kn.onCommitFiberRoot(Ws,i,void 0,(i.current.flags&128)===128)}catch{}}var Tn=Math.clz32?Math.clz32:Hs,kr=Math.log,Bn=Math.LN2;function Hs(i){return i>>>=0,i===0?32:31-(kr(i)/Bn|0)|0}var Tr=64,Fi=4194304;function Ke(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Zr(i,o){var u=i.pendingLanes;if(u===0)return 0;var p=0,y=i.suspendedLanes,x=i.pingedLanes,S=u&268435455;if(S!==0){var D=S&~y;D!==0?p=Ke(D):(x&=S,x!==0&&(p=Ke(x)))}else S=u&~y,S!==0?p=Ke(S):x!==0&&(p=Ke(x));if(p===0)return 0;if(o!==0&&o!==p&&(o&y)===0&&(y=p&-p,x=o&-o,y>=x||y===16&&(x&4194240)!==0))return o;if((p&4)!==0&&(p|=u&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=p;0<o;)u=31-Tn(o),y=1<<u,p|=i[u],o&=~y;return p}function Ks(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qs(i,o){for(var u=i.suspendedLanes,p=i.pingedLanes,y=i.expirationTimes,x=i.pendingLanes;0<x;){var S=31-Tn(x),D=1<<S,F=y[S];F===-1?((D&u)===0||(D&p)!==0)&&(y[S]=Ks(D,o)):F<=o&&(i.expiredLanes|=D),x&=~D}}function Rl(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Pl(){var i=Tr;return Tr<<=1,(Tr&4194240)===0&&(Tr=64),i}function jl(i){for(var o=[],u=0;31>u;u++)o.push(i);return o}function Gs(i,o,u){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-Tn(o),i[o]=u}function yf(i,o){var u=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var p=i.eventTimes;for(i=i.expirationTimes;0<u;){var y=31-Tn(u),x=1<<y;o[y]=0,p[y]=-1,i[y]=-1,u&=~x}}function Nl(i,o){var u=i.entangledLanes|=o;for(i=i.entanglements;u;){var p=31-Tn(u),y=1<<p;y&o|i[p]&o&&(i[p]|=o),u&=~y}}var Fe=0;function Sr(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Dl,qo,Vl,Ml,Ll,br=!1,Go=[],Ir=null,Cr=null,Ut=null,Qs=new Map,ei=new Map,Sn=[],Lu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zi(i,o){switch(i){case"focusin":case"focusout":Ir=null;break;case"dragenter":case"dragleave":Cr=null;break;case"mouseover":case"mouseout":Ut=null;break;case"pointerover":case"pointerout":Qs.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":ei.delete(o.pointerId)}}function ir(i,o,u,p,y,x){return i===null||i.nativeEvent!==x?(i={blockedOn:o,domEventName:u,eventSystemFlags:p,nativeEvent:x,targetContainers:[y]},o!==null&&(o=Xl(o),o!==null&&qo(o)),i):(i.eventSystemFlags|=p,o=i.targetContainers,y!==null&&o.indexOf(y)===-1&&o.push(y),i)}function Ou(i,o,u,p,y){switch(o){case"focusin":return Ir=ir(Ir,i,o,u,p,y),!0;case"dragenter":return Cr=ir(Cr,i,o,u,p,y),!0;case"mouseover":return Ut=ir(Ut,i,o,u,p,y),!0;case"pointerover":var x=y.pointerId;return Qs.set(x,ir(Qs.get(x)||null,i,o,u,p,y)),!0;case"gotpointercapture":return x=y.pointerId,ei.set(x,ir(ei.get(x)||null,i,o,u,p,y)),!0}return!1}function Qo(i){var o=Zs(i.target);if(o!==null){var u=rr(o);if(u!==null){if(o=u.tag,o===13){if(o=bl(u),o!==null){i.blockedOn=o,Ll(i.priority,function(){Vl(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Je(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var u=Yo(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(u===null){u=i.nativeEvent;var p=new u.constructor(u.type,u);Vi=p,u.target.dispatchEvent(p),Vi=null}else return o=Xl(u),o!==null&&qo(o),i.blockedOn=u,!1;o.shift()}return!0}function Bu(i,o,u){Je(i)&&u.delete(o)}function vf(){br=!1,Ir!==null&&Je(Ir)&&(Ir=null),Cr!==null&&Je(Cr)&&(Cr=null),Ut!==null&&Je(Ut)&&(Ut=null),Qs.forEach(Bu),ei.forEach(Bu)}function Ui(i,o){i.blockedOn===o&&(i.blockedOn=null,br||(br=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,vf)))}function $i(i){function o(y){return Ui(y,i)}if(0<Go.length){Ui(Go[0],i);for(var u=1;u<Go.length;u++){var p=Go[u];p.blockedOn===i&&(p.blockedOn=null)}}for(Ir!==null&&Ui(Ir,i),Cr!==null&&Ui(Cr,i),Ut!==null&&Ui(Ut,i),Qs.forEach(o),ei.forEach(o),u=0;u<Sn.length;u++)p=Sn[u],p.blockedOn===i&&(p.blockedOn=null);for(;0<Sn.length&&(u=Sn[0],u.blockedOn===null);)Qo(u),u.blockedOn===null&&Sn.shift()}var ti=G.ReactCurrentBatchConfig,ni=!0;function Ar(i,o,u,p){var y=Fe,x=ti.transition;ti.transition=null;try{Fe=1,Ol(i,o,u,p)}finally{Fe=y,ti.transition=x}}function Fu(i,o,u,p){var y=Fe,x=ti.transition;ti.transition=null;try{Fe=4,Ol(i,o,u,p)}finally{Fe=y,ti.transition=x}}function Ol(i,o,u,p){if(ni){var y=Yo(i,o,u,p);if(y===null)Af(i,o,p,Rr,u),zi(i,p);else if(Ou(y,i,o,u,p))p.stopPropagation();else if(zi(i,p),o&4&&-1<Lu.indexOf(i)){for(;y!==null;){var x=Xl(y);if(x!==null&&Dl(x),x=Yo(i,o,u,p),x===null&&Af(i,o,p,Rr,u),x===y)break;y=x}y!==null&&p.stopPropagation()}else Af(i,o,p,null,u)}}var Rr=null;function Yo(i,o,u,p){if(Rr=null,i=Uo(p),i=Zs(i),i!==null)if(o=rr(i),o===null)i=null;else if(u=o.tag,u===13){if(i=bl(o),i!==null)return i;i=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return Rr=i,null}function Xo(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gf()){case Ho:return 1;case Cl:return 4;case $s:case Al:return 16;case Ko:return 536870912;default:return 16}default:return 16}}var bn=null,Jo=null,ri=null;function zu(){if(ri)return ri;var i,o=Jo,u=o.length,p,y="value"in bn?bn.value:bn.textContent,x=y.length;for(i=0;i<u&&o[i]===y[i];i++);var S=u-i;for(p=1;p<=S&&o[u-p]===y[x-p];p++);return ri=y.slice(i,1<p?1-p:void 0)}function Ys(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Pr(){return!0}function Bl(){return!1}function Jt(i){function o(u,p,y,x,S){this._reactName=u,this._targetInst=y,this.type=p,this.nativeEvent=x,this.target=S,this.currentTarget=null;for(var D in i)i.hasOwnProperty(D)&&(u=i[D],this[D]=u?u(x):x[D]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?Pr:Bl,this.isPropagationStopped=Bl,this}return ae(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Pr)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Pr)},persist:function(){},isPersistent:Pr}),o}var jr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xs=Jt(jr),Wi=ae({},jr,{view:0,detail:0}),Zo=Jt(Wi),ea,ta,In,Js=ae({},Wi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Re,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==In&&(In&&i.type==="mousemove"?(ea=i.screenX-In.screenX,ta=i.screenY-In.screenY):ta=ea=0,In=i),ea)},movementY:function(i){return"movementY"in i?i.movementY:ta}}),Fl=Jt(Js),Uu=ae({},Js,{dataTransfer:0}),$u=Jt(Uu),na=ae({},Wi,{relatedTarget:0}),$t=Jt(na),Wu=ae({},jr,{animationName:0,elapsedTime:0,pseudoElement:0}),Hu=Jt(Wu),Hi=ae({},jr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),h=Jt(Hi),_=ae({},jr,{data:0}),E=Jt(_),R={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},q={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},X={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oe(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=X[i])?!!o[i]:!1}function Re(){return oe}var yt=ae({},Wi,{key:function(i){if(i.key){var o=R[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Ys(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?q[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Re,charCode:function(i){return i.type==="keypress"?Ys(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Ys(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Ye=Jt(yt),kt=ae({},Js,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cn=Jt(kt),ii=ae({},Wi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Re}),Nr=Jt(ii),Dr=ae({},jr,{propertyName:0,elapsedTime:0,pseudoElement:0}),ra=Jt(Dr),zl=ae({},Js,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),qb=Jt(zl),Gb=[9,13,27,32],xf=f&&"CompositionEvent"in window,Ul=null;f&&"documentMode"in document&&(Ul=document.documentMode);var Qb=f&&"TextEvent"in window&&!Ul,v0=f&&(!xf||Ul&&8<Ul&&11>=Ul),x0=" ",_0=!1;function w0(i,o){switch(i){case"keyup":return Gb.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function E0(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ia=!1;function Yb(i,o){switch(i){case"compositionend":return E0(o);case"keypress":return o.which!==32?null:(_0=!0,x0);case"textInput":return i=o.data,i===x0&&_0?null:i;default:return null}}function Xb(i,o){if(ia)return i==="compositionend"||!xf&&w0(i,o)?(i=zu(),ri=Jo=bn=null,ia=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return v0&&o.locale!=="ko"?null:o.data;default:return null}}var Jb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function k0(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!Jb[i.type]:o==="textarea"}function T0(i,o,u,p){Mi(p),o=Yu(o,"onChange"),0<o.length&&(u=new Xs("onChange","change",null,u,p),i.push({event:u,listeners:o}))}var $l=null,Wl=null;function Zb(i){U0(i,0)}function Ku(i){var o=ca(i);if(vl(o))return i}function eI(i,o){if(i==="change")return o}var S0=!1;if(f){var _f;if(f){var wf="oninput"in document;if(!wf){var b0=document.createElement("div");b0.setAttribute("oninput","return;"),wf=typeof b0.oninput=="function"}_f=wf}else _f=!1;S0=_f&&(!document.documentMode||9<document.documentMode)}function I0(){$l&&($l.detachEvent("onpropertychange",C0),Wl=$l=null)}function C0(i){if(i.propertyName==="value"&&Ku(Wl)){var o=[];T0(o,Wl,i,Uo(i)),Au(Zb,o)}}function tI(i,o,u){i==="focusin"?(I0(),$l=o,Wl=u,$l.attachEvent("onpropertychange",C0)):i==="focusout"&&I0()}function nI(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Ku(Wl)}function rI(i,o){if(i==="click")return Ku(o)}function iI(i,o){if(i==="input"||i==="change")return Ku(o)}function sI(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var sr=typeof Object.is=="function"?Object.is:sI;function Hl(i,o){if(sr(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var u=Object.keys(i),p=Object.keys(o);if(u.length!==p.length)return!1;for(p=0;p<u.length;p++){var y=u[p];if(!d.call(o,y)||!sr(i[y],o[y]))return!1}return!0}function A0(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function R0(i,o){var u=A0(i);i=0;for(var p;u;){if(u.nodeType===3){if(p=i+u.textContent.length,i<=o&&p>=o)return{node:u,offset:o-i};i=p}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=A0(u)}}function P0(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?P0(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function j0(){for(var i=window,o=Ri();o instanceof i.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)i=o.contentWindow;else break;o=Ri(i.document)}return o}function Ef(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function oI(i){var o=j0(),u=i.focusedElem,p=i.selectionRange;if(o!==u&&u&&u.ownerDocument&&P0(u.ownerDocument.documentElement,u)){if(p!==null&&Ef(u)){if(o=p.start,i=p.end,i===void 0&&(i=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(i,u.value.length);else if(i=(o=u.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var y=u.textContent.length,x=Math.min(p.start,y);p=p.end===void 0?x:Math.min(p.end,y),!i.extend&&x>p&&(y=p,p=x,x=y),y=R0(u,x);var S=R0(u,p);y&&S&&(i.rangeCount!==1||i.anchorNode!==y.node||i.anchorOffset!==y.offset||i.focusNode!==S.node||i.focusOffset!==S.offset)&&(o=o.createRange(),o.setStart(y.node,y.offset),i.removeAllRanges(),x>p?(i.addRange(o),i.extend(S.node,S.offset)):(o.setEnd(S.node,S.offset),i.addRange(o)))}}for(o=[],i=u;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)i=o[u],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var aI=f&&"documentMode"in document&&11>=document.documentMode,sa=null,kf=null,Kl=null,Tf=!1;function N0(i,o,u){var p=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Tf||sa==null||sa!==Ri(p)||(p=sa,"selectionStart"in p&&Ef(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Kl&&Hl(Kl,p)||(Kl=p,p=Yu(kf,"onSelect"),0<p.length&&(o=new Xs("onSelect","select",null,o,u),i.push({event:o,listeners:p}),o.target=sa)))}function qu(i,o){var u={};return u[i.toLowerCase()]=o.toLowerCase(),u["Webkit"+i]="webkit"+o,u["Moz"+i]="moz"+o,u}var oa={animationend:qu("Animation","AnimationEnd"),animationiteration:qu("Animation","AnimationIteration"),animationstart:qu("Animation","AnimationStart"),transitionend:qu("Transition","TransitionEnd")},Sf={},D0={};f&&(D0=document.createElement("div").style,"AnimationEvent"in window||(delete oa.animationend.animation,delete oa.animationiteration.animation,delete oa.animationstart.animation),"TransitionEvent"in window||delete oa.transitionend.transition);function Gu(i){if(Sf[i])return Sf[i];if(!oa[i])return i;var o=oa[i],u;for(u in o)if(o.hasOwnProperty(u)&&u in D0)return Sf[i]=o[u];return i}var V0=Gu("animationend"),M0=Gu("animationiteration"),L0=Gu("animationstart"),O0=Gu("transitionend"),B0=new Map,F0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ki(i,o){B0.set(i,o),a(o,[i])}for(var bf=0;bf<F0.length;bf++){var If=F0[bf],lI=If.toLowerCase(),cI=If[0].toUpperCase()+If.slice(1);Ki(lI,"on"+cI)}Ki(V0,"onAnimationEnd"),Ki(M0,"onAnimationIteration"),Ki(L0,"onAnimationStart"),Ki("dblclick","onDoubleClick"),Ki("focusin","onFocus"),Ki("focusout","onBlur"),Ki(O0,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ql="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uI=new Set("cancel close invalid load scroll toggle".split(" ").concat(ql));function z0(i,o,u){var p=i.type||"unknown-event";i.currentTarget=u,Sl(p,o,void 0,i),i.currentTarget=null}function U0(i,o){o=(o&4)!==0;for(var u=0;u<i.length;u++){var p=i[u],y=p.event;p=p.listeners;e:{var x=void 0;if(o)for(var S=p.length-1;0<=S;S--){var D=p[S],F=D.instance,Y=D.currentTarget;if(D=D.listener,F!==x&&y.isPropagationStopped())break e;z0(y,D,Y),x=F}else for(S=0;S<p.length;S++){if(D=p[S],F=D.instance,Y=D.currentTarget,D=D.listener,F!==x&&y.isPropagationStopped())break e;z0(y,D,Y),x=F}}}if($o)throw i=On,$o=!1,On=null,i}function nt(i,o){var u=o[Vf];u===void 0&&(u=o[Vf]=new Set);var p=i+"__bubble";u.has(p)||($0(o,i,2,!1),u.add(p))}function Cf(i,o,u){var p=0;o&&(p|=4),$0(u,i,p,o)}var Qu="_reactListening"+Math.random().toString(36).slice(2);function Gl(i){if(!i[Qu]){i[Qu]=!0,r.forEach(function(u){u!=="selectionchange"&&(uI.has(u)||Cf(u,!1,i),Cf(u,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Qu]||(o[Qu]=!0,Cf("selectionchange",!1,o))}}function $0(i,o,u,p){switch(Xo(o)){case 1:var y=Ar;break;case 4:y=Fu;break;default:y=Ol}u=y.bind(null,o,u,i),y=void 0,!Oi||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(y=!0),p?y!==void 0?i.addEventListener(o,u,{capture:!0,passive:y}):i.addEventListener(o,u,!0):y!==void 0?i.addEventListener(o,u,{passive:y}):i.addEventListener(o,u,!1)}function Af(i,o,u,p,y){var x=p;if((o&1)===0&&(o&2)===0&&p!==null)e:for(;;){if(p===null)return;var S=p.tag;if(S===3||S===4){var D=p.stateNode.containerInfo;if(D===y||D.nodeType===8&&D.parentNode===y)break;if(S===4)for(S=p.return;S!==null;){var F=S.tag;if((F===3||F===4)&&(F=S.stateNode.containerInfo,F===y||F.nodeType===8&&F.parentNode===y))return;S=S.return}for(;D!==null;){if(S=Zs(D),S===null)return;if(F=S.tag,F===5||F===6){p=x=S;continue e}D=D.parentNode}}p=p.return}Au(function(){var Y=x,ne=Uo(u),re=[];e:{var te=B0.get(i);if(te!==void 0){var ce=Xs,me=i;switch(i){case"keypress":if(Ys(u)===0)break e;case"keydown":case"keyup":ce=Ye;break;case"focusin":me="focus",ce=$t;break;case"focusout":me="blur",ce=$t;break;case"beforeblur":case"afterblur":ce=$t;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=Fl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=$u;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=Nr;break;case V0:case M0:case L0:ce=Hu;break;case O0:ce=ra;break;case"scroll":ce=Zo;break;case"wheel":ce=qb;break;case"copy":case"cut":case"paste":ce=h;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=Cn}var ge=(o&4)!==0,vt=!ge&&i==="scroll",K=ge?te!==null?te+"Capture":null:te;ge=[];for(var z=Y,Q;z!==null;){Q=z;var se=Q.stateNode;if(Q.tag===5&&se!==null&&(Q=se,K!==null&&(se=Fs(z,K),se!=null&&ge.push(Ql(z,se,Q)))),vt)break;z=z.return}0<ge.length&&(te=new ce(te,me,null,u,ne),re.push({event:te,listeners:ge}))}}if((o&7)===0){e:{if(te=i==="mouseover"||i==="pointerover",ce=i==="mouseout"||i==="pointerout",te&&u!==Vi&&(me=u.relatedTarget||u.fromElement)&&(Zs(me)||me[si]))break e;if((ce||te)&&(te=ne.window===ne?ne:(te=ne.ownerDocument)?te.defaultView||te.parentWindow:window,ce?(me=u.relatedTarget||u.toElement,ce=Y,me=me?Zs(me):null,me!==null&&(vt=rr(me),me!==vt||me.tag!==5&&me.tag!==6)&&(me=null)):(ce=null,me=Y),ce!==me)){if(ge=Fl,se="onMouseLeave",K="onMouseEnter",z="mouse",(i==="pointerout"||i==="pointerover")&&(ge=Cn,se="onPointerLeave",K="onPointerEnter",z="pointer"),vt=ce==null?te:ca(ce),Q=me==null?te:ca(me),te=new ge(se,z+"leave",ce,u,ne),te.target=vt,te.relatedTarget=Q,se=null,Zs(ne)===Y&&(ge=new ge(K,z+"enter",me,u,ne),ge.target=Q,ge.relatedTarget=vt,se=ge),vt=se,ce&&me)t:{for(ge=ce,K=me,z=0,Q=ge;Q;Q=aa(Q))z++;for(Q=0,se=K;se;se=aa(se))Q++;for(;0<z-Q;)ge=aa(ge),z--;for(;0<Q-z;)K=aa(K),Q--;for(;z--;){if(ge===K||K!==null&&ge===K.alternate)break t;ge=aa(ge),K=aa(K)}ge=null}else ge=null;ce!==null&&W0(re,te,ce,ge,!1),me!==null&&vt!==null&&W0(re,vt,me,ge,!0)}}e:{if(te=Y?ca(Y):window,ce=te.nodeName&&te.nodeName.toLowerCase(),ce==="select"||ce==="input"&&te.type==="file")var ye=eI;else if(k0(te))if(S0)ye=iI;else{ye=nI;var _e=tI}else(ce=te.nodeName)&&ce.toLowerCase()==="input"&&(te.type==="checkbox"||te.type==="radio")&&(ye=rI);if(ye&&(ye=ye(i,Y))){T0(re,ye,u,ne);break e}_e&&_e(i,te,Y),i==="focusout"&&(_e=te._wrapperState)&&_e.controlled&&te.type==="number"&&Et(te,"number",te.value)}switch(_e=Y?ca(Y):window,i){case"focusin":(k0(_e)||_e.contentEditable==="true")&&(sa=_e,kf=Y,Kl=null);break;case"focusout":Kl=kf=sa=null;break;case"mousedown":Tf=!0;break;case"contextmenu":case"mouseup":case"dragend":Tf=!1,N0(re,u,ne);break;case"selectionchange":if(aI)break;case"keydown":case"keyup":N0(re,u,ne)}var we;if(xf)e:{switch(i){case"compositionstart":var be="onCompositionStart";break e;case"compositionend":be="onCompositionEnd";break e;case"compositionupdate":be="onCompositionUpdate";break e}be=void 0}else ia?w0(i,u)&&(be="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(be="onCompositionStart");be&&(v0&&u.locale!=="ko"&&(ia||be!=="onCompositionStart"?be==="onCompositionEnd"&&ia&&(we=zu()):(bn=ne,Jo="value"in bn?bn.value:bn.textContent,ia=!0)),_e=Yu(Y,be),0<_e.length&&(be=new E(be,i,null,u,ne),re.push({event:be,listeners:_e}),we?be.data=we:(we=E0(u),we!==null&&(be.data=we)))),(we=Qb?Yb(i,u):Xb(i,u))&&(Y=Yu(Y,"onBeforeInput"),0<Y.length&&(ne=new E("onBeforeInput","beforeinput",null,u,ne),re.push({event:ne,listeners:Y}),ne.data=we))}U0(re,o)})}function Ql(i,o,u){return{instance:i,listener:o,currentTarget:u}}function Yu(i,o){for(var u=o+"Capture",p=[];i!==null;){var y=i,x=y.stateNode;y.tag===5&&x!==null&&(y=x,x=Fs(i,u),x!=null&&p.unshift(Ql(i,x,y)),x=Fs(i,o),x!=null&&p.push(Ql(i,x,y))),i=i.return}return p}function aa(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function W0(i,o,u,p,y){for(var x=o._reactName,S=[];u!==null&&u!==p;){var D=u,F=D.alternate,Y=D.stateNode;if(F!==null&&F===p)break;D.tag===5&&Y!==null&&(D=Y,y?(F=Fs(u,x),F!=null&&S.unshift(Ql(u,F,D))):y||(F=Fs(u,x),F!=null&&S.push(Ql(u,F,D)))),u=u.return}S.length!==0&&i.push({event:o,listeners:S})}var dI=/\r\n?/g,hI=/\u0000|\uFFFD/g;function H0(i){return(typeof i=="string"?i:""+i).replace(dI,`
`).replace(hI,"")}function Xu(i,o,u){if(o=H0(o),H0(i)!==o&&u)throw Error(t(425))}function Ju(){}var Rf=null,Pf=null;function jf(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Nf=typeof setTimeout=="function"?setTimeout:void 0,fI=typeof clearTimeout=="function"?clearTimeout:void 0,K0=typeof Promise=="function"?Promise:void 0,pI=typeof queueMicrotask=="function"?queueMicrotask:typeof K0<"u"?function(i){return K0.resolve(null).then(i).catch(mI)}:Nf;function mI(i){setTimeout(function(){throw i})}function Df(i,o){var u=o,p=0;do{var y=u.nextSibling;if(i.removeChild(u),y&&y.nodeType===8)if(u=y.data,u==="/$"){if(p===0){i.removeChild(y),$i(o);return}p--}else u!=="$"&&u!=="$?"&&u!=="$!"||p++;u=y}while(u);$i(o)}function qi(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function q0(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return i;o--}else u==="/$"&&o++}i=i.previousSibling}return null}var la=Math.random().toString(36).slice(2),Vr="__reactFiber$"+la,Yl="__reactProps$"+la,si="__reactContainer$"+la,Vf="__reactEvents$"+la,gI="__reactListeners$"+la,yI="__reactHandles$"+la;function Zs(i){var o=i[Vr];if(o)return o;for(var u=i.parentNode;u;){if(o=u[si]||u[Vr]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(i=q0(i);i!==null;){if(u=i[Vr])return u;i=q0(i)}return o}i=u,u=i.parentNode}return null}function Xl(i){return i=i[Vr]||i[si],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function ca(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function Zu(i){return i[Yl]||null}var Mf=[],ua=-1;function Gi(i){return{current:i}}function rt(i){0>ua||(i.current=Mf[ua],Mf[ua]=null,ua--)}function Ze(i,o){ua++,Mf[ua]=i.current,i.current=o}var Qi={},Zt=Gi(Qi),pn=Gi(!1),eo=Qi;function da(i,o){var u=i.type.contextTypes;if(!u)return Qi;var p=i.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===o)return p.__reactInternalMemoizedMaskedChildContext;var y={},x;for(x in u)y[x]=o[x];return p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=y),y}function mn(i){return i=i.childContextTypes,i!=null}function ed(){rt(pn),rt(Zt)}function G0(i,o,u){if(Zt.current!==Qi)throw Error(t(168));Ze(Zt,o),Ze(pn,u)}function Q0(i,o,u){var p=i.stateNode;if(o=o.childContextTypes,typeof p.getChildContext!="function")return u;p=p.getChildContext();for(var y in p)if(!(y in o))throw Error(t(108,Ge(i)||"Unknown",y));return ae({},u,p)}function td(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Qi,eo=Zt.current,Ze(Zt,i),Ze(pn,pn.current),!0}function Y0(i,o,u){var p=i.stateNode;if(!p)throw Error(t(169));u?(i=Q0(i,o,eo),p.__reactInternalMemoizedMergedChildContext=i,rt(pn),rt(Zt),Ze(Zt,i)):rt(pn),Ze(pn,u)}var oi=null,nd=!1,Lf=!1;function X0(i){oi===null?oi=[i]:oi.push(i)}function vI(i){nd=!0,X0(i)}function Yi(){if(!Lf&&oi!==null){Lf=!0;var i=0,o=Fe;try{var u=oi;for(Fe=1;i<u.length;i++){var p=u[i];do p=p(!0);while(p!==null)}oi=null,nd=!1}catch(y){throw oi!==null&&(oi=oi.slice(i+1)),Il(Ho,Yi),y}finally{Fe=o,Lf=!1}}return null}var ha=[],fa=0,rd=null,id=0,Fn=[],zn=0,to=null,ai=1,li="";function no(i,o){ha[fa++]=id,ha[fa++]=rd,rd=i,id=o}function J0(i,o,u){Fn[zn++]=ai,Fn[zn++]=li,Fn[zn++]=to,to=i;var p=ai;i=li;var y=32-Tn(p)-1;p&=~(1<<y),u+=1;var x=32-Tn(o)+y;if(30<x){var S=y-y%5;x=(p&(1<<S)-1).toString(32),p>>=S,y-=S,ai=1<<32-Tn(o)+y|u<<y|p,li=x+i}else ai=1<<x|u<<y|p,li=i}function Of(i){i.return!==null&&(no(i,1),J0(i,1,0))}function Bf(i){for(;i===rd;)rd=ha[--fa],ha[fa]=null,id=ha[--fa],ha[fa]=null;for(;i===to;)to=Fn[--zn],Fn[zn]=null,li=Fn[--zn],Fn[zn]=null,ai=Fn[--zn],Fn[zn]=null}var An=null,Rn=null,ot=!1,or=null;function Z0(i,o){var u=Hn(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=i,o=i.deletions,o===null?(i.deletions=[u],i.flags|=16):o.push(u)}function ev(i,o){switch(i.tag){case 5:var u=i.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,An=i,Rn=qi(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,An=i,Rn=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=to!==null?{id:ai,overflow:li}:null,i.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=Hn(18,null,null,0),u.stateNode=o,u.return=i,i.child=u,An=i,Rn=null,!0):!1;default:return!1}}function Ff(i){return(i.mode&1)!==0&&(i.flags&128)===0}function zf(i){if(ot){var o=Rn;if(o){var u=o;if(!ev(i,o)){if(Ff(i))throw Error(t(418));o=qi(u.nextSibling);var p=An;o&&ev(i,o)?Z0(p,u):(i.flags=i.flags&-4097|2,ot=!1,An=i)}}else{if(Ff(i))throw Error(t(418));i.flags=i.flags&-4097|2,ot=!1,An=i}}}function tv(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;An=i}function sd(i){if(i!==An)return!1;if(!ot)return tv(i),ot=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!jf(i.type,i.memoizedProps)),o&&(o=Rn)){if(Ff(i))throw nv(),Error(t(418));for(;o;)Z0(i,o),o=qi(o.nextSibling)}if(tv(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"){if(o===0){Rn=qi(i.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}i=i.nextSibling}Rn=null}}else Rn=An?qi(i.stateNode.nextSibling):null;return!0}function nv(){for(var i=Rn;i;)i=qi(i.nextSibling)}function pa(){Rn=An=null,ot=!1}function Uf(i){or===null?or=[i]:or.push(i)}var xI=G.ReactCurrentBatchConfig;function Jl(i,o,u){if(i=u.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var p=u.stateNode}if(!p)throw Error(t(147,i));var y=p,x=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===x?o.ref:(o=function(S){var D=y.refs;S===null?delete D[x]:D[x]=S},o._stringRef=x,o)}if(typeof i!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,i))}return i}function od(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function rv(i){var o=i._init;return o(i._payload)}function iv(i){function o(K,z){if(i){var Q=K.deletions;Q===null?(K.deletions=[z],K.flags|=16):Q.push(z)}}function u(K,z){if(!i)return null;for(;z!==null;)o(K,z),z=z.sibling;return null}function p(K,z){for(K=new Map;z!==null;)z.key!==null?K.set(z.key,z):K.set(z.index,z),z=z.sibling;return K}function y(K,z){return K=is(K,z),K.index=0,K.sibling=null,K}function x(K,z,Q){return K.index=Q,i?(Q=K.alternate,Q!==null?(Q=Q.index,Q<z?(K.flags|=2,z):Q):(K.flags|=2,z)):(K.flags|=1048576,z)}function S(K){return i&&K.alternate===null&&(K.flags|=2),K}function D(K,z,Q,se){return z===null||z.tag!==6?(z=Np(Q,K.mode,se),z.return=K,z):(z=y(z,Q),z.return=K,z)}function F(K,z,Q,se){var ye=Q.type;return ye===A?ne(K,z,Q.props.children,se,Q.key):z!==null&&(z.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===wt&&rv(ye)===z.type)?(se=y(z,Q.props),se.ref=Jl(K,z,Q),se.return=K,se):(se=Rd(Q.type,Q.key,Q.props,null,K.mode,se),se.ref=Jl(K,z,Q),se.return=K,se)}function Y(K,z,Q,se){return z===null||z.tag!==4||z.stateNode.containerInfo!==Q.containerInfo||z.stateNode.implementation!==Q.implementation?(z=Dp(Q,K.mode,se),z.return=K,z):(z=y(z,Q.children||[]),z.return=K,z)}function ne(K,z,Q,se,ye){return z===null||z.tag!==7?(z=uo(Q,K.mode,se,ye),z.return=K,z):(z=y(z,Q),z.return=K,z)}function re(K,z,Q){if(typeof z=="string"&&z!==""||typeof z=="number")return z=Np(""+z,K.mode,Q),z.return=K,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case $:return Q=Rd(z.type,z.key,z.props,null,K.mode,Q),Q.ref=Jl(K,null,z),Q.return=K,Q;case H:return z=Dp(z,K.mode,Q),z.return=K,z;case wt:var se=z._init;return re(K,se(z._payload),Q)}if(gt(z)||pe(z))return z=uo(z,K.mode,Q,null),z.return=K,z;od(K,z)}return null}function te(K,z,Q,se){var ye=z!==null?z.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number")return ye!==null?null:D(K,z,""+Q,se);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case $:return Q.key===ye?F(K,z,Q,se):null;case H:return Q.key===ye?Y(K,z,Q,se):null;case wt:return ye=Q._init,te(K,z,ye(Q._payload),se)}if(gt(Q)||pe(Q))return ye!==null?null:ne(K,z,Q,se,null);od(K,Q)}return null}function ce(K,z,Q,se,ye){if(typeof se=="string"&&se!==""||typeof se=="number")return K=K.get(Q)||null,D(z,K,""+se,ye);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case $:return K=K.get(se.key===null?Q:se.key)||null,F(z,K,se,ye);case H:return K=K.get(se.key===null?Q:se.key)||null,Y(z,K,se,ye);case wt:var _e=se._init;return ce(K,z,Q,_e(se._payload),ye)}if(gt(se)||pe(se))return K=K.get(Q)||null,ne(z,K,se,ye,null);od(z,se)}return null}function me(K,z,Q,se){for(var ye=null,_e=null,we=z,be=z=0,Bt=null;we!==null&&be<Q.length;be++){we.index>be?(Bt=we,we=null):Bt=we.sibling;var We=te(K,we,Q[be],se);if(We===null){we===null&&(we=Bt);break}i&&we&&We.alternate===null&&o(K,we),z=x(We,z,be),_e===null?ye=We:_e.sibling=We,_e=We,we=Bt}if(be===Q.length)return u(K,we),ot&&no(K,be),ye;if(we===null){for(;be<Q.length;be++)we=re(K,Q[be],se),we!==null&&(z=x(we,z,be),_e===null?ye=we:_e.sibling=we,_e=we);return ot&&no(K,be),ye}for(we=p(K,we);be<Q.length;be++)Bt=ce(we,K,be,Q[be],se),Bt!==null&&(i&&Bt.alternate!==null&&we.delete(Bt.key===null?be:Bt.key),z=x(Bt,z,be),_e===null?ye=Bt:_e.sibling=Bt,_e=Bt);return i&&we.forEach(function(ss){return o(K,ss)}),ot&&no(K,be),ye}function ge(K,z,Q,se){var ye=pe(Q);if(typeof ye!="function")throw Error(t(150));if(Q=ye.call(Q),Q==null)throw Error(t(151));for(var _e=ye=null,we=z,be=z=0,Bt=null,We=Q.next();we!==null&&!We.done;be++,We=Q.next()){we.index>be?(Bt=we,we=null):Bt=we.sibling;var ss=te(K,we,We.value,se);if(ss===null){we===null&&(we=Bt);break}i&&we&&ss.alternate===null&&o(K,we),z=x(ss,z,be),_e===null?ye=ss:_e.sibling=ss,_e=ss,we=Bt}if(We.done)return u(K,we),ot&&no(K,be),ye;if(we===null){for(;!We.done;be++,We=Q.next())We=re(K,We.value,se),We!==null&&(z=x(We,z,be),_e===null?ye=We:_e.sibling=We,_e=We);return ot&&no(K,be),ye}for(we=p(K,we);!We.done;be++,We=Q.next())We=ce(we,K,be,We.value,se),We!==null&&(i&&We.alternate!==null&&we.delete(We.key===null?be:We.key),z=x(We,z,be),_e===null?ye=We:_e.sibling=We,_e=We);return i&&we.forEach(function(JI){return o(K,JI)}),ot&&no(K,be),ye}function vt(K,z,Q,se){if(typeof Q=="object"&&Q!==null&&Q.type===A&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case $:e:{for(var ye=Q.key,_e=z;_e!==null;){if(_e.key===ye){if(ye=Q.type,ye===A){if(_e.tag===7){u(K,_e.sibling),z=y(_e,Q.props.children),z.return=K,K=z;break e}}else if(_e.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===wt&&rv(ye)===_e.type){u(K,_e.sibling),z=y(_e,Q.props),z.ref=Jl(K,_e,Q),z.return=K,K=z;break e}u(K,_e);break}else o(K,_e);_e=_e.sibling}Q.type===A?(z=uo(Q.props.children,K.mode,se,Q.key),z.return=K,K=z):(se=Rd(Q.type,Q.key,Q.props,null,K.mode,se),se.ref=Jl(K,z,Q),se.return=K,K=se)}return S(K);case H:e:{for(_e=Q.key;z!==null;){if(z.key===_e)if(z.tag===4&&z.stateNode.containerInfo===Q.containerInfo&&z.stateNode.implementation===Q.implementation){u(K,z.sibling),z=y(z,Q.children||[]),z.return=K,K=z;break e}else{u(K,z);break}else o(K,z);z=z.sibling}z=Dp(Q,K.mode,se),z.return=K,K=z}return S(K);case wt:return _e=Q._init,vt(K,z,_e(Q._payload),se)}if(gt(Q))return me(K,z,Q,se);if(pe(Q))return ge(K,z,Q,se);od(K,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"?(Q=""+Q,z!==null&&z.tag===6?(u(K,z.sibling),z=y(z,Q),z.return=K,K=z):(u(K,z),z=Np(Q,K.mode,se),z.return=K,K=z),S(K)):u(K,z)}return vt}var ma=iv(!0),sv=iv(!1),ad=Gi(null),ld=null,ga=null,$f=null;function Wf(){$f=ga=ld=null}function Hf(i){var o=ad.current;rt(ad),i._currentValue=o}function Kf(i,o,u){for(;i!==null;){var p=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,p!==null&&(p.childLanes|=o)):p!==null&&(p.childLanes&o)!==o&&(p.childLanes|=o),i===u)break;i=i.return}}function ya(i,o){ld=i,$f=ga=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(gn=!0),i.firstContext=null)}function Un(i){var o=i._currentValue;if($f!==i)if(i={context:i,memoizedValue:o,next:null},ga===null){if(ld===null)throw Error(t(308));ga=i,ld.dependencies={lanes:0,firstContext:i}}else ga=ga.next=i;return o}var ro=null;function qf(i){ro===null?ro=[i]:ro.push(i)}function ov(i,o,u,p){var y=o.interleaved;return y===null?(u.next=u,qf(o)):(u.next=y.next,y.next=u),o.interleaved=u,ci(i,p)}function ci(i,o){i.lanes|=o;var u=i.alternate;for(u!==null&&(u.lanes|=o),u=i,i=i.return;i!==null;)i.childLanes|=o,u=i.alternate,u!==null&&(u.childLanes|=o),u=i,i=i.return;return u.tag===3?u.stateNode:null}var Xi=!1;function Gf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function av(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function ui(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function Ji(i,o,u){var p=i.updateQueue;if(p===null)return null;if(p=p.shared,($e&2)!==0){var y=p.pending;return y===null?o.next=o:(o.next=y.next,y.next=o),p.pending=o,ci(i,u)}return y=p.interleaved,y===null?(o.next=o,qf(p)):(o.next=y.next,y.next=o),p.interleaved=o,ci(i,u)}function cd(i,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var p=o.lanes;p&=i.pendingLanes,u|=p,o.lanes=u,Nl(i,u)}}function lv(i,o){var u=i.updateQueue,p=i.alternate;if(p!==null&&(p=p.updateQueue,u===p)){var y=null,x=null;if(u=u.firstBaseUpdate,u!==null){do{var S={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};x===null?y=x=S:x=x.next=S,u=u.next}while(u!==null);x===null?y=x=o:x=x.next=o}else y=x=o;u={baseState:p.baseState,firstBaseUpdate:y,lastBaseUpdate:x,shared:p.shared,effects:p.effects},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=o:i.next=o,u.lastBaseUpdate=o}function ud(i,o,u,p){var y=i.updateQueue;Xi=!1;var x=y.firstBaseUpdate,S=y.lastBaseUpdate,D=y.shared.pending;if(D!==null){y.shared.pending=null;var F=D,Y=F.next;F.next=null,S===null?x=Y:S.next=Y,S=F;var ne=i.alternate;ne!==null&&(ne=ne.updateQueue,D=ne.lastBaseUpdate,D!==S&&(D===null?ne.firstBaseUpdate=Y:D.next=Y,ne.lastBaseUpdate=F))}if(x!==null){var re=y.baseState;S=0,ne=Y=F=null,D=x;do{var te=D.lane,ce=D.eventTime;if((p&te)===te){ne!==null&&(ne=ne.next={eventTime:ce,lane:0,tag:D.tag,payload:D.payload,callback:D.callback,next:null});e:{var me=i,ge=D;switch(te=o,ce=u,ge.tag){case 1:if(me=ge.payload,typeof me=="function"){re=me.call(ce,re,te);break e}re=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=ge.payload,te=typeof me=="function"?me.call(ce,re,te):me,te==null)break e;re=ae({},re,te);break e;case 2:Xi=!0}}D.callback!==null&&D.lane!==0&&(i.flags|=64,te=y.effects,te===null?y.effects=[D]:te.push(D))}else ce={eventTime:ce,lane:te,tag:D.tag,payload:D.payload,callback:D.callback,next:null},ne===null?(Y=ne=ce,F=re):ne=ne.next=ce,S|=te;if(D=D.next,D===null){if(D=y.shared.pending,D===null)break;te=D,D=te.next,te.next=null,y.lastBaseUpdate=te,y.shared.pending=null}}while(!0);if(ne===null&&(F=re),y.baseState=F,y.firstBaseUpdate=Y,y.lastBaseUpdate=ne,o=y.shared.interleaved,o!==null){y=o;do S|=y.lane,y=y.next;while(y!==o)}else x===null&&(y.shared.lanes=0);oo|=S,i.lanes=S,i.memoizedState=re}}function cv(i,o,u){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var p=i[o],y=p.callback;if(y!==null){if(p.callback=null,p=u,typeof y!="function")throw Error(t(191,y));y.call(p)}}}var Zl={},Mr=Gi(Zl),ec=Gi(Zl),tc=Gi(Zl);function io(i){if(i===Zl)throw Error(t(174));return i}function Qf(i,o){switch(Ze(tc,o),Ze(ec,i),Ze(Mr,Zl),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:Bo(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=Bo(o,i)}rt(Mr),Ze(Mr,o)}function va(){rt(Mr),rt(ec),rt(tc)}function uv(i){io(tc.current);var o=io(Mr.current),u=Bo(o,i.type);o!==u&&(Ze(ec,i),Ze(Mr,u))}function Yf(i){ec.current===i&&(rt(Mr),rt(ec))}var lt=Gi(0);function dd(i){for(var o=i;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Xf=[];function Jf(){for(var i=0;i<Xf.length;i++)Xf[i]._workInProgressVersionPrimary=null;Xf.length=0}var hd=G.ReactCurrentDispatcher,Zf=G.ReactCurrentBatchConfig,so=0,ct=null,Rt=null,Lt=null,fd=!1,nc=!1,rc=0,_I=0;function en(){throw Error(t(321))}function ep(i,o){if(o===null)return!1;for(var u=0;u<o.length&&u<i.length;u++)if(!sr(i[u],o[u]))return!1;return!0}function tp(i,o,u,p,y,x){if(so=x,ct=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,hd.current=i===null||i.memoizedState===null?TI:SI,i=u(p,y),nc){x=0;do{if(nc=!1,rc=0,25<=x)throw Error(t(301));x+=1,Lt=Rt=null,o.updateQueue=null,hd.current=bI,i=u(p,y)}while(nc)}if(hd.current=gd,o=Rt!==null&&Rt.next!==null,so=0,Lt=Rt=ct=null,fd=!1,o)throw Error(t(300));return i}function np(){var i=rc!==0;return rc=0,i}function Lr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lt===null?ct.memoizedState=Lt=i:Lt=Lt.next=i,Lt}function $n(){if(Rt===null){var i=ct.alternate;i=i!==null?i.memoizedState:null}else i=Rt.next;var o=Lt===null?ct.memoizedState:Lt.next;if(o!==null)Lt=o,Rt=i;else{if(i===null)throw Error(t(310));Rt=i,i={memoizedState:Rt.memoizedState,baseState:Rt.baseState,baseQueue:Rt.baseQueue,queue:Rt.queue,next:null},Lt===null?ct.memoizedState=Lt=i:Lt=Lt.next=i}return Lt}function ic(i,o){return typeof o=="function"?o(i):o}function rp(i){var o=$n(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var p=Rt,y=p.baseQueue,x=u.pending;if(x!==null){if(y!==null){var S=y.next;y.next=x.next,x.next=S}p.baseQueue=y=x,u.pending=null}if(y!==null){x=y.next,p=p.baseState;var D=S=null,F=null,Y=x;do{var ne=Y.lane;if((so&ne)===ne)F!==null&&(F=F.next={lane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),p=Y.hasEagerState?Y.eagerState:i(p,Y.action);else{var re={lane:ne,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null};F===null?(D=F=re,S=p):F=F.next=re,ct.lanes|=ne,oo|=ne}Y=Y.next}while(Y!==null&&Y!==x);F===null?S=p:F.next=D,sr(p,o.memoizedState)||(gn=!0),o.memoizedState=p,o.baseState=S,o.baseQueue=F,u.lastRenderedState=p}if(i=u.interleaved,i!==null){y=i;do x=y.lane,ct.lanes|=x,oo|=x,y=y.next;while(y!==i)}else y===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function ip(i){var o=$n(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var p=u.dispatch,y=u.pending,x=o.memoizedState;if(y!==null){u.pending=null;var S=y=y.next;do x=i(x,S.action),S=S.next;while(S!==y);sr(x,o.memoizedState)||(gn=!0),o.memoizedState=x,o.baseQueue===null&&(o.baseState=x),u.lastRenderedState=x}return[x,p]}function dv(){}function hv(i,o){var u=ct,p=$n(),y=o(),x=!sr(p.memoizedState,y);if(x&&(p.memoizedState=y,gn=!0),p=p.queue,sp(mv.bind(null,u,p,i),[i]),p.getSnapshot!==o||x||Lt!==null&&Lt.memoizedState.tag&1){if(u.flags|=2048,sc(9,pv.bind(null,u,p,y,o),void 0,null),Ot===null)throw Error(t(349));(so&30)!==0||fv(u,o,y)}return y}function fv(i,o,u){i.flags|=16384,i={getSnapshot:o,value:u},o=ct.updateQueue,o===null?(o={lastEffect:null,stores:null},ct.updateQueue=o,o.stores=[i]):(u=o.stores,u===null?o.stores=[i]:u.push(i))}function pv(i,o,u,p){o.value=u,o.getSnapshot=p,gv(o)&&yv(i)}function mv(i,o,u){return u(function(){gv(o)&&yv(i)})}function gv(i){var o=i.getSnapshot;i=i.value;try{var u=o();return!sr(i,u)}catch{return!0}}function yv(i){var o=ci(i,1);o!==null&&ur(o,i,1,-1)}function vv(i){var o=Lr();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ic,lastRenderedState:i},o.queue=i,i=i.dispatch=kI.bind(null,ct,i),[o.memoizedState,i]}function sc(i,o,u,p){return i={tag:i,create:o,destroy:u,deps:p,next:null},o=ct.updateQueue,o===null?(o={lastEffect:null,stores:null},ct.updateQueue=o,o.lastEffect=i.next=i):(u=o.lastEffect,u===null?o.lastEffect=i.next=i:(p=u.next,u.next=i,i.next=p,o.lastEffect=i)),i}function xv(){return $n().memoizedState}function pd(i,o,u,p){var y=Lr();ct.flags|=i,y.memoizedState=sc(1|o,u,void 0,p===void 0?null:p)}function md(i,o,u,p){var y=$n();p=p===void 0?null:p;var x=void 0;if(Rt!==null){var S=Rt.memoizedState;if(x=S.destroy,p!==null&&ep(p,S.deps)){y.memoizedState=sc(o,u,x,p);return}}ct.flags|=i,y.memoizedState=sc(1|o,u,x,p)}function _v(i,o){return pd(8390656,8,i,o)}function sp(i,o){return md(2048,8,i,o)}function wv(i,o){return md(4,2,i,o)}function Ev(i,o){return md(4,4,i,o)}function kv(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function Tv(i,o,u){return u=u!=null?u.concat([i]):null,md(4,4,kv.bind(null,o,i),u)}function op(){}function Sv(i,o){var u=$n();o=o===void 0?null:o;var p=u.memoizedState;return p!==null&&o!==null&&ep(o,p[1])?p[0]:(u.memoizedState=[i,o],i)}function bv(i,o){var u=$n();o=o===void 0?null:o;var p=u.memoizedState;return p!==null&&o!==null&&ep(o,p[1])?p[0]:(i=i(),u.memoizedState=[i,o],i)}function Iv(i,o,u){return(so&21)===0?(i.baseState&&(i.baseState=!1,gn=!0),i.memoizedState=u):(sr(u,o)||(u=Pl(),ct.lanes|=u,oo|=u,i.baseState=!0),o)}function wI(i,o){var u=Fe;Fe=u!==0&&4>u?u:4,i(!0);var p=Zf.transition;Zf.transition={};try{i(!1),o()}finally{Fe=u,Zf.transition=p}}function Cv(){return $n().memoizedState}function EI(i,o,u){var p=ns(i);if(u={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null},Av(i))Rv(o,u);else if(u=ov(i,o,u,p),u!==null){var y=dn();ur(u,i,p,y),Pv(u,o,p)}}function kI(i,o,u){var p=ns(i),y={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null};if(Av(i))Rv(o,y);else{var x=i.alternate;if(i.lanes===0&&(x===null||x.lanes===0)&&(x=o.lastRenderedReducer,x!==null))try{var S=o.lastRenderedState,D=x(S,u);if(y.hasEagerState=!0,y.eagerState=D,sr(D,S)){var F=o.interleaved;F===null?(y.next=y,qf(o)):(y.next=F.next,F.next=y),o.interleaved=y;return}}catch{}finally{}u=ov(i,o,y,p),u!==null&&(y=dn(),ur(u,i,p,y),Pv(u,o,p))}}function Av(i){var o=i.alternate;return i===ct||o!==null&&o===ct}function Rv(i,o){nc=fd=!0;var u=i.pending;u===null?o.next=o:(o.next=u.next,u.next=o),i.pending=o}function Pv(i,o,u){if((u&4194240)!==0){var p=o.lanes;p&=i.pendingLanes,u|=p,o.lanes=u,Nl(i,u)}}var gd={readContext:Un,useCallback:en,useContext:en,useEffect:en,useImperativeHandle:en,useInsertionEffect:en,useLayoutEffect:en,useMemo:en,useReducer:en,useRef:en,useState:en,useDebugValue:en,useDeferredValue:en,useTransition:en,useMutableSource:en,useSyncExternalStore:en,useId:en,unstable_isNewReconciler:!1},TI={readContext:Un,useCallback:function(i,o){return Lr().memoizedState=[i,o===void 0?null:o],i},useContext:Un,useEffect:_v,useImperativeHandle:function(i,o,u){return u=u!=null?u.concat([i]):null,pd(4194308,4,kv.bind(null,o,i),u)},useLayoutEffect:function(i,o){return pd(4194308,4,i,o)},useInsertionEffect:function(i,o){return pd(4,2,i,o)},useMemo:function(i,o){var u=Lr();return o=o===void 0?null:o,i=i(),u.memoizedState=[i,o],i},useReducer:function(i,o,u){var p=Lr();return o=u!==void 0?u(o):o,p.memoizedState=p.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},p.queue=i,i=i.dispatch=EI.bind(null,ct,i),[p.memoizedState,i]},useRef:function(i){var o=Lr();return i={current:i},o.memoizedState=i},useState:vv,useDebugValue:op,useDeferredValue:function(i){return Lr().memoizedState=i},useTransition:function(){var i=vv(!1),o=i[0];return i=wI.bind(null,i[1]),Lr().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,u){var p=ct,y=Lr();if(ot){if(u===void 0)throw Error(t(407));u=u()}else{if(u=o(),Ot===null)throw Error(t(349));(so&30)!==0||fv(p,o,u)}y.memoizedState=u;var x={value:u,getSnapshot:o};return y.queue=x,_v(mv.bind(null,p,x,i),[i]),p.flags|=2048,sc(9,pv.bind(null,p,x,u,o),void 0,null),u},useId:function(){var i=Lr(),o=Ot.identifierPrefix;if(ot){var u=li,p=ai;u=(p&~(1<<32-Tn(p)-1)).toString(32)+u,o=":"+o+"R"+u,u=rc++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=_I++,o=":"+o+"r"+u.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},SI={readContext:Un,useCallback:Sv,useContext:Un,useEffect:sp,useImperativeHandle:Tv,useInsertionEffect:wv,useLayoutEffect:Ev,useMemo:bv,useReducer:rp,useRef:xv,useState:function(){return rp(ic)},useDebugValue:op,useDeferredValue:function(i){var o=$n();return Iv(o,Rt.memoizedState,i)},useTransition:function(){var i=rp(ic)[0],o=$n().memoizedState;return[i,o]},useMutableSource:dv,useSyncExternalStore:hv,useId:Cv,unstable_isNewReconciler:!1},bI={readContext:Un,useCallback:Sv,useContext:Un,useEffect:sp,useImperativeHandle:Tv,useInsertionEffect:wv,useLayoutEffect:Ev,useMemo:bv,useReducer:ip,useRef:xv,useState:function(){return ip(ic)},useDebugValue:op,useDeferredValue:function(i){var o=$n();return Rt===null?o.memoizedState=i:Iv(o,Rt.memoizedState,i)},useTransition:function(){var i=ip(ic)[0],o=$n().memoizedState;return[i,o]},useMutableSource:dv,useSyncExternalStore:hv,useId:Cv,unstable_isNewReconciler:!1};function ar(i,o){if(i&&i.defaultProps){o=ae({},o),i=i.defaultProps;for(var u in i)o[u]===void 0&&(o[u]=i[u]);return o}return o}function ap(i,o,u,p){o=i.memoizedState,u=u(p,o),u=u==null?o:ae({},o,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var yd={isMounted:function(i){return(i=i._reactInternals)?rr(i)===i:!1},enqueueSetState:function(i,o,u){i=i._reactInternals;var p=dn(),y=ns(i),x=ui(p,y);x.payload=o,u!=null&&(x.callback=u),o=Ji(i,x,y),o!==null&&(ur(o,i,y,p),cd(o,i,y))},enqueueReplaceState:function(i,o,u){i=i._reactInternals;var p=dn(),y=ns(i),x=ui(p,y);x.tag=1,x.payload=o,u!=null&&(x.callback=u),o=Ji(i,x,y),o!==null&&(ur(o,i,y,p),cd(o,i,y))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var u=dn(),p=ns(i),y=ui(u,p);y.tag=2,o!=null&&(y.callback=o),o=Ji(i,y,p),o!==null&&(ur(o,i,p,u),cd(o,i,p))}};function jv(i,o,u,p,y,x,S){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(p,x,S):o.prototype&&o.prototype.isPureReactComponent?!Hl(u,p)||!Hl(y,x):!0}function Nv(i,o,u){var p=!1,y=Qi,x=o.contextType;return typeof x=="object"&&x!==null?x=Un(x):(y=mn(o)?eo:Zt.current,p=o.contextTypes,x=(p=p!=null)?da(i,y):Qi),o=new o(u,x),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=yd,i.stateNode=o,o._reactInternals=i,p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=y,i.__reactInternalMemoizedMaskedChildContext=x),o}function Dv(i,o,u,p){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,p),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,p),o.state!==i&&yd.enqueueReplaceState(o,o.state,null)}function lp(i,o,u,p){var y=i.stateNode;y.props=u,y.state=i.memoizedState,y.refs={},Gf(i);var x=o.contextType;typeof x=="object"&&x!==null?y.context=Un(x):(x=mn(o)?eo:Zt.current,y.context=da(i,x)),y.state=i.memoizedState,x=o.getDerivedStateFromProps,typeof x=="function"&&(ap(i,o,x,u),y.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(o=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),o!==y.state&&yd.enqueueReplaceState(y,y.state,null),ud(i,u,y,p),y.state=i.memoizedState),typeof y.componentDidMount=="function"&&(i.flags|=4194308)}function xa(i,o){try{var u="",p=o;do u+=Ve(p),p=p.return;while(p);var y=u}catch(x){y=`
Error generating stack: `+x.message+`
`+x.stack}return{value:i,source:o,stack:y,digest:null}}function cp(i,o,u){return{value:i,source:null,stack:u??null,digest:o??null}}function up(i,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var II=typeof WeakMap=="function"?WeakMap:Map;function Vv(i,o,u){u=ui(-1,u),u.tag=3,u.payload={element:null};var p=o.value;return u.callback=function(){Td||(Td=!0,Sp=p),up(i,o)},u}function Mv(i,o,u){u=ui(-1,u),u.tag=3;var p=i.type.getDerivedStateFromError;if(typeof p=="function"){var y=o.value;u.payload=function(){return p(y)},u.callback=function(){up(i,o)}}var x=i.stateNode;return x!==null&&typeof x.componentDidCatch=="function"&&(u.callback=function(){up(i,o),typeof p!="function"&&(es===null?es=new Set([this]):es.add(this));var S=o.stack;this.componentDidCatch(o.value,{componentStack:S!==null?S:""})}),u}function Lv(i,o,u){var p=i.pingCache;if(p===null){p=i.pingCache=new II;var y=new Set;p.set(o,y)}else y=p.get(o),y===void 0&&(y=new Set,p.set(o,y));y.has(u)||(y.add(u),i=zI.bind(null,i,o,u),o.then(i,i))}function Ov(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function Bv(i,o,u,p,y){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=ui(-1,1),o.tag=2,Ji(u,o,1))),u.lanes|=1),i):(i.flags|=65536,i.lanes=y,i)}var CI=G.ReactCurrentOwner,gn=!1;function un(i,o,u,p){o.child=i===null?sv(o,null,u,p):ma(o,i.child,u,p)}function Fv(i,o,u,p,y){u=u.render;var x=o.ref;return ya(o,y),p=tp(i,o,u,p,x,y),u=np(),i!==null&&!gn?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~y,di(i,o,y)):(ot&&u&&Of(o),o.flags|=1,un(i,o,p,y),o.child)}function zv(i,o,u,p,y){if(i===null){var x=u.type;return typeof x=="function"&&!jp(x)&&x.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=x,Uv(i,o,x,p,y)):(i=Rd(u.type,null,p,o,o.mode,y),i.ref=o.ref,i.return=o,o.child=i)}if(x=i.child,(i.lanes&y)===0){var S=x.memoizedProps;if(u=u.compare,u=u!==null?u:Hl,u(S,p)&&i.ref===o.ref)return di(i,o,y)}return o.flags|=1,i=is(x,p),i.ref=o.ref,i.return=o,o.child=i}function Uv(i,o,u,p,y){if(i!==null){var x=i.memoizedProps;if(Hl(x,p)&&i.ref===o.ref)if(gn=!1,o.pendingProps=p=x,(i.lanes&y)!==0)(i.flags&131072)!==0&&(gn=!0);else return o.lanes=i.lanes,di(i,o,y)}return dp(i,o,u,p,y)}function $v(i,o,u){var p=o.pendingProps,y=p.children,x=i!==null?i.memoizedState:null;if(p.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ze(wa,Pn),Pn|=u;else{if((u&1073741824)===0)return i=x!==null?x.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,Ze(wa,Pn),Pn|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=x!==null?x.baseLanes:u,Ze(wa,Pn),Pn|=p}else x!==null?(p=x.baseLanes|u,o.memoizedState=null):p=u,Ze(wa,Pn),Pn|=p;return un(i,o,y,u),o.child}function Wv(i,o){var u=o.ref;(i===null&&u!==null||i!==null&&i.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function dp(i,o,u,p,y){var x=mn(u)?eo:Zt.current;return x=da(o,x),ya(o,y),u=tp(i,o,u,p,x,y),p=np(),i!==null&&!gn?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~y,di(i,o,y)):(ot&&p&&Of(o),o.flags|=1,un(i,o,u,y),o.child)}function Hv(i,o,u,p,y){if(mn(u)){var x=!0;td(o)}else x=!1;if(ya(o,y),o.stateNode===null)xd(i,o),Nv(o,u,p),lp(o,u,p,y),p=!0;else if(i===null){var S=o.stateNode,D=o.memoizedProps;S.props=D;var F=S.context,Y=u.contextType;typeof Y=="object"&&Y!==null?Y=Un(Y):(Y=mn(u)?eo:Zt.current,Y=da(o,Y));var ne=u.getDerivedStateFromProps,re=typeof ne=="function"||typeof S.getSnapshotBeforeUpdate=="function";re||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(D!==p||F!==Y)&&Dv(o,S,p,Y),Xi=!1;var te=o.memoizedState;S.state=te,ud(o,p,S,y),F=o.memoizedState,D!==p||te!==F||pn.current||Xi?(typeof ne=="function"&&(ap(o,u,ne,p),F=o.memoizedState),(D=Xi||jv(o,u,D,p,te,F,Y))?(re||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(o.flags|=4194308)):(typeof S.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=p,o.memoizedState=F),S.props=p,S.state=F,S.context=Y,p=D):(typeof S.componentDidMount=="function"&&(o.flags|=4194308),p=!1)}else{S=o.stateNode,av(i,o),D=o.memoizedProps,Y=o.type===o.elementType?D:ar(o.type,D),S.props=Y,re=o.pendingProps,te=S.context,F=u.contextType,typeof F=="object"&&F!==null?F=Un(F):(F=mn(u)?eo:Zt.current,F=da(o,F));var ce=u.getDerivedStateFromProps;(ne=typeof ce=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(D!==re||te!==F)&&Dv(o,S,p,F),Xi=!1,te=o.memoizedState,S.state=te,ud(o,p,S,y);var me=o.memoizedState;D!==re||te!==me||pn.current||Xi?(typeof ce=="function"&&(ap(o,u,ce,p),me=o.memoizedState),(Y=Xi||jv(o,u,Y,p,te,me,F)||!1)?(ne||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(p,me,F),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(p,me,F)),typeof S.componentDidUpdate=="function"&&(o.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof S.componentDidUpdate!="function"||D===i.memoizedProps&&te===i.memoizedState||(o.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||D===i.memoizedProps&&te===i.memoizedState||(o.flags|=1024),o.memoizedProps=p,o.memoizedState=me),S.props=p,S.state=me,S.context=F,p=Y):(typeof S.componentDidUpdate!="function"||D===i.memoizedProps&&te===i.memoizedState||(o.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||D===i.memoizedProps&&te===i.memoizedState||(o.flags|=1024),p=!1)}return hp(i,o,u,p,x,y)}function hp(i,o,u,p,y,x){Wv(i,o);var S=(o.flags&128)!==0;if(!p&&!S)return y&&Y0(o,u,!1),di(i,o,x);p=o.stateNode,CI.current=o;var D=S&&typeof u.getDerivedStateFromError!="function"?null:p.render();return o.flags|=1,i!==null&&S?(o.child=ma(o,i.child,null,x),o.child=ma(o,null,D,x)):un(i,o,D,x),o.memoizedState=p.state,y&&Y0(o,u,!0),o.child}function Kv(i){var o=i.stateNode;o.pendingContext?G0(i,o.pendingContext,o.pendingContext!==o.context):o.context&&G0(i,o.context,!1),Qf(i,o.containerInfo)}function qv(i,o,u,p,y){return pa(),Uf(y),o.flags|=256,un(i,o,u,p),o.child}var fp={dehydrated:null,treeContext:null,retryLane:0};function pp(i){return{baseLanes:i,cachePool:null,transitions:null}}function Gv(i,o,u){var p=o.pendingProps,y=lt.current,x=!1,S=(o.flags&128)!==0,D;if((D=S)||(D=i!==null&&i.memoizedState===null?!1:(y&2)!==0),D?(x=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(y|=1),Ze(lt,y&1),i===null)return zf(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(S=p.children,i=p.fallback,x?(p=o.mode,x=o.child,S={mode:"hidden",children:S},(p&1)===0&&x!==null?(x.childLanes=0,x.pendingProps=S):x=Pd(S,p,0,null),i=uo(i,p,u,null),x.return=o,i.return=o,x.sibling=i,o.child=x,o.child.memoizedState=pp(u),o.memoizedState=fp,i):mp(o,S));if(y=i.memoizedState,y!==null&&(D=y.dehydrated,D!==null))return AI(i,o,S,p,D,y,u);if(x){x=p.fallback,S=o.mode,y=i.child,D=y.sibling;var F={mode:"hidden",children:p.children};return(S&1)===0&&o.child!==y?(p=o.child,p.childLanes=0,p.pendingProps=F,o.deletions=null):(p=is(y,F),p.subtreeFlags=y.subtreeFlags&14680064),D!==null?x=is(D,x):(x=uo(x,S,u,null),x.flags|=2),x.return=o,p.return=o,p.sibling=x,o.child=p,p=x,x=o.child,S=i.child.memoizedState,S=S===null?pp(u):{baseLanes:S.baseLanes|u,cachePool:null,transitions:S.transitions},x.memoizedState=S,x.childLanes=i.childLanes&~u,o.memoizedState=fp,p}return x=i.child,i=x.sibling,p=is(x,{mode:"visible",children:p.children}),(o.mode&1)===0&&(p.lanes=u),p.return=o,p.sibling=null,i!==null&&(u=o.deletions,u===null?(o.deletions=[i],o.flags|=16):u.push(i)),o.child=p,o.memoizedState=null,p}function mp(i,o){return o=Pd({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function vd(i,o,u,p){return p!==null&&Uf(p),ma(o,i.child,null,u),i=mp(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function AI(i,o,u,p,y,x,S){if(u)return o.flags&256?(o.flags&=-257,p=cp(Error(t(422))),vd(i,o,S,p)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(x=p.fallback,y=o.mode,p=Pd({mode:"visible",children:p.children},y,0,null),x=uo(x,y,S,null),x.flags|=2,p.return=o,x.return=o,p.sibling=x,o.child=p,(o.mode&1)!==0&&ma(o,i.child,null,S),o.child.memoizedState=pp(S),o.memoizedState=fp,x);if((o.mode&1)===0)return vd(i,o,S,null);if(y.data==="$!"){if(p=y.nextSibling&&y.nextSibling.dataset,p)var D=p.dgst;return p=D,x=Error(t(419)),p=cp(x,p,void 0),vd(i,o,S,p)}if(D=(S&i.childLanes)!==0,gn||D){if(p=Ot,p!==null){switch(S&-S){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=(y&(p.suspendedLanes|S))!==0?0:y,y!==0&&y!==x.retryLane&&(x.retryLane=y,ci(i,y),ur(p,i,y,-1))}return Pp(),p=cp(Error(t(421))),vd(i,o,S,p)}return y.data==="$?"?(o.flags|=128,o.child=i.child,o=UI.bind(null,i),y._reactRetry=o,null):(i=x.treeContext,Rn=qi(y.nextSibling),An=o,ot=!0,or=null,i!==null&&(Fn[zn++]=ai,Fn[zn++]=li,Fn[zn++]=to,ai=i.id,li=i.overflow,to=o),o=mp(o,p.children),o.flags|=4096,o)}function Qv(i,o,u){i.lanes|=o;var p=i.alternate;p!==null&&(p.lanes|=o),Kf(i.return,o,u)}function gp(i,o,u,p,y){var x=i.memoizedState;x===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:p,tail:u,tailMode:y}:(x.isBackwards=o,x.rendering=null,x.renderingStartTime=0,x.last=p,x.tail=u,x.tailMode=y)}function Yv(i,o,u){var p=o.pendingProps,y=p.revealOrder,x=p.tail;if(un(i,o,p.children,u),p=lt.current,(p&2)!==0)p=p&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Qv(i,u,o);else if(i.tag===19)Qv(i,u,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}p&=1}if(Ze(lt,p),(o.mode&1)===0)o.memoizedState=null;else switch(y){case"forwards":for(u=o.child,y=null;u!==null;)i=u.alternate,i!==null&&dd(i)===null&&(y=u),u=u.sibling;u=y,u===null?(y=o.child,o.child=null):(y=u.sibling,u.sibling=null),gp(o,!1,y,u,x);break;case"backwards":for(u=null,y=o.child,o.child=null;y!==null;){if(i=y.alternate,i!==null&&dd(i)===null){o.child=y;break}i=y.sibling,y.sibling=u,u=y,y=i}gp(o,!0,u,null,x);break;case"together":gp(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function xd(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function di(i,o,u){if(i!==null&&(o.dependencies=i.dependencies),oo|=o.lanes,(u&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,u=is(i,i.pendingProps),o.child=u,u.return=o;i.sibling!==null;)i=i.sibling,u=u.sibling=is(i,i.pendingProps),u.return=o;u.sibling=null}return o.child}function RI(i,o,u){switch(o.tag){case 3:Kv(o),pa();break;case 5:uv(o);break;case 1:mn(o.type)&&td(o);break;case 4:Qf(o,o.stateNode.containerInfo);break;case 10:var p=o.type._context,y=o.memoizedProps.value;Ze(ad,p._currentValue),p._currentValue=y;break;case 13:if(p=o.memoizedState,p!==null)return p.dehydrated!==null?(Ze(lt,lt.current&1),o.flags|=128,null):(u&o.child.childLanes)!==0?Gv(i,o,u):(Ze(lt,lt.current&1),i=di(i,o,u),i!==null?i.sibling:null);Ze(lt,lt.current&1);break;case 19:if(p=(u&o.childLanes)!==0,(i.flags&128)!==0){if(p)return Yv(i,o,u);o.flags|=128}if(y=o.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),Ze(lt,lt.current),p)break;return null;case 22:case 23:return o.lanes=0,$v(i,o,u)}return di(i,o,u)}var Xv,yp,Jv,Zv;Xv=function(i,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)i.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},yp=function(){},Jv=function(i,o,u,p){var y=i.memoizedProps;if(y!==p){i=o.stateNode,io(Mr.current);var x=null;switch(u){case"input":y=Lo(i,y),p=Lo(i,p),x=[];break;case"select":y=ae({},y,{value:void 0}),p=ae({},p,{value:void 0}),x=[];break;case"textarea":y=_l(i,y),p=_l(i,p),x=[];break;default:typeof y.onClick!="function"&&typeof p.onClick=="function"&&(i.onclick=Ju)}nr(u,p);var S;u=null;for(Y in y)if(!p.hasOwnProperty(Y)&&y.hasOwnProperty(Y)&&y[Y]!=null)if(Y==="style"){var D=y[Y];for(S in D)D.hasOwnProperty(S)&&(u||(u={}),u[S]="")}else Y!=="dangerouslySetInnerHTML"&&Y!=="children"&&Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&Y!=="autoFocus"&&(s.hasOwnProperty(Y)?x||(x=[]):(x=x||[]).push(Y,null));for(Y in p){var F=p[Y];if(D=y!=null?y[Y]:void 0,p.hasOwnProperty(Y)&&F!==D&&(F!=null||D!=null))if(Y==="style")if(D){for(S in D)!D.hasOwnProperty(S)||F&&F.hasOwnProperty(S)||(u||(u={}),u[S]="");for(S in F)F.hasOwnProperty(S)&&D[S]!==F[S]&&(u||(u={}),u[S]=F[S])}else u||(x||(x=[]),x.push(Y,u)),u=F;else Y==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,D=D?D.__html:void 0,F!=null&&D!==F&&(x=x||[]).push(Y,F)):Y==="children"?typeof F!="string"&&typeof F!="number"||(x=x||[]).push(Y,""+F):Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&(s.hasOwnProperty(Y)?(F!=null&&Y==="onScroll"&&nt("scroll",i),x||D===F||(x=[])):(x=x||[]).push(Y,F))}u&&(x=x||[]).push("style",u);var Y=x;(o.updateQueue=Y)&&(o.flags|=4)}},Zv=function(i,o,u,p){u!==p&&(o.flags|=4)};function oc(i,o){if(!ot)switch(i.tailMode){case"hidden":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:p.sibling=null}}function tn(i){var o=i.alternate!==null&&i.alternate.child===i.child,u=0,p=0;if(o)for(var y=i.child;y!==null;)u|=y.lanes|y.childLanes,p|=y.subtreeFlags&14680064,p|=y.flags&14680064,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)u|=y.lanes|y.childLanes,p|=y.subtreeFlags,p|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=p,i.childLanes=u,o}function PI(i,o,u){var p=o.pendingProps;switch(Bf(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(o),null;case 1:return mn(o.type)&&ed(),tn(o),null;case 3:return p=o.stateNode,va(),rt(pn),rt(Zt),Jf(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(i===null||i.child===null)&&(sd(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,or!==null&&(Cp(or),or=null))),yp(i,o),tn(o),null;case 5:Yf(o);var y=io(tc.current);if(u=o.type,i!==null&&o.stateNode!=null)Jv(i,o,u,p,y),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!p){if(o.stateNode===null)throw Error(t(166));return tn(o),null}if(i=io(Mr.current),sd(o)){p=o.stateNode,u=o.type;var x=o.memoizedProps;switch(p[Vr]=o,p[Yl]=x,i=(o.mode&1)!==0,u){case"dialog":nt("cancel",p),nt("close",p);break;case"iframe":case"object":case"embed":nt("load",p);break;case"video":case"audio":for(y=0;y<ql.length;y++)nt(ql[y],p);break;case"source":nt("error",p);break;case"img":case"image":case"link":nt("error",p),nt("load",p);break;case"details":nt("toggle",p);break;case"input":ku(p,x),nt("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!x.multiple},nt("invalid",p);break;case"textarea":wl(p,x),nt("invalid",p)}nr(u,x),y=null;for(var S in x)if(x.hasOwnProperty(S)){var D=x[S];S==="children"?typeof D=="string"?p.textContent!==D&&(x.suppressHydrationWarning!==!0&&Xu(p.textContent,D,i),y=["children",D]):typeof D=="number"&&p.textContent!==""+D&&(x.suppressHydrationWarning!==!0&&Xu(p.textContent,D,i),y=["children",""+D]):s.hasOwnProperty(S)&&D!=null&&S==="onScroll"&&nt("scroll",p)}switch(u){case"input":Mo(p),xl(p,x,!0);break;case"textarea":Mo(p),Pi(p);break;case"select":case"option":break;default:typeof x.onClick=="function"&&(p.onclick=Ju)}p=y,o.updateQueue=p,p!==null&&(o.flags|=4)}else{S=y.nodeType===9?y:y.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=El(u)),i==="http://www.w3.org/1999/xhtml"?u==="script"?(i=S.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof p.is=="string"?i=S.createElement(u,{is:p.is}):(i=S.createElement(u),u==="select"&&(S=i,p.multiple?S.multiple=!0:p.size&&(S.size=p.size))):i=S.createElementNS(i,u),i[Vr]=o,i[Yl]=p,Xv(i,o,!1,!1),o.stateNode=i;e:{switch(S=zo(u,p),u){case"dialog":nt("cancel",i),nt("close",i),y=p;break;case"iframe":case"object":case"embed":nt("load",i),y=p;break;case"video":case"audio":for(y=0;y<ql.length;y++)nt(ql[y],i);y=p;break;case"source":nt("error",i),y=p;break;case"img":case"image":case"link":nt("error",i),nt("load",i),y=p;break;case"details":nt("toggle",i),y=p;break;case"input":ku(i,p),y=Lo(i,p),nt("invalid",i);break;case"option":y=p;break;case"select":i._wrapperState={wasMultiple:!!p.multiple},y=ae({},p,{value:void 0}),nt("invalid",i);break;case"textarea":wl(i,p),y=_l(i,p),nt("invalid",i);break;default:y=p}nr(u,y),D=y;for(x in D)if(D.hasOwnProperty(x)){var F=D[x];x==="style"?Fo(i,F):x==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,F!=null&&Su(i,F)):x==="children"?typeof F=="string"?(u!=="textarea"||F!=="")&&Bs(i,F):typeof F=="number"&&Bs(i,""+F):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(s.hasOwnProperty(x)?F!=null&&x==="onScroll"&&nt("scroll",i):F!=null&&P(i,x,F,S))}switch(u){case"input":Mo(i),xl(i,p,!1);break;case"textarea":Mo(i),Pi(i);break;case"option":p.value!=null&&i.setAttribute("value",""+Ue(p.value));break;case"select":i.multiple=!!p.multiple,x=p.value,x!=null?tr(i,!!p.multiple,x,!1):p.defaultValue!=null&&tr(i,!!p.multiple,p.defaultValue,!0);break;default:typeof y.onClick=="function"&&(i.onclick=Ju)}switch(u){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return tn(o),null;case 6:if(i&&o.stateNode!=null)Zv(i,o,i.memoizedProps,p);else{if(typeof p!="string"&&o.stateNode===null)throw Error(t(166));if(u=io(tc.current),io(Mr.current),sd(o)){if(p=o.stateNode,u=o.memoizedProps,p[Vr]=o,(x=p.nodeValue!==u)&&(i=An,i!==null))switch(i.tag){case 3:Xu(p.nodeValue,u,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Xu(p.nodeValue,u,(i.mode&1)!==0)}x&&(o.flags|=4)}else p=(u.nodeType===9?u:u.ownerDocument).createTextNode(p),p[Vr]=o,o.stateNode=p}return tn(o),null;case 13:if(rt(lt),p=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(ot&&Rn!==null&&(o.mode&1)!==0&&(o.flags&128)===0)nv(),pa(),o.flags|=98560,x=!1;else if(x=sd(o),p!==null&&p.dehydrated!==null){if(i===null){if(!x)throw Error(t(318));if(x=o.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(t(317));x[Vr]=o}else pa(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;tn(o),x=!1}else or!==null&&(Cp(or),or=null),x=!0;if(!x)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=u,o):(p=p!==null,p!==(i!==null&&i.memoizedState!==null)&&p&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(lt.current&1)!==0?Pt===0&&(Pt=3):Pp())),o.updateQueue!==null&&(o.flags|=4),tn(o),null);case 4:return va(),yp(i,o),i===null&&Gl(o.stateNode.containerInfo),tn(o),null;case 10:return Hf(o.type._context),tn(o),null;case 17:return mn(o.type)&&ed(),tn(o),null;case 19:if(rt(lt),x=o.memoizedState,x===null)return tn(o),null;if(p=(o.flags&128)!==0,S=x.rendering,S===null)if(p)oc(x,!1);else{if(Pt!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(S=dd(i),S!==null){for(o.flags|=128,oc(x,!1),p=S.updateQueue,p!==null&&(o.updateQueue=p,o.flags|=4),o.subtreeFlags=0,p=u,u=o.child;u!==null;)x=u,i=p,x.flags&=14680066,S=x.alternate,S===null?(x.childLanes=0,x.lanes=i,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=S.childLanes,x.lanes=S.lanes,x.child=S.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=S.memoizedProps,x.memoizedState=S.memoizedState,x.updateQueue=S.updateQueue,x.type=S.type,i=S.dependencies,x.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),u=u.sibling;return Ze(lt,lt.current&1|2),o.child}i=i.sibling}x.tail!==null&&tt()>Ea&&(o.flags|=128,p=!0,oc(x,!1),o.lanes=4194304)}else{if(!p)if(i=dd(S),i!==null){if(o.flags|=128,p=!0,u=i.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),oc(x,!0),x.tail===null&&x.tailMode==="hidden"&&!S.alternate&&!ot)return tn(o),null}else 2*tt()-x.renderingStartTime>Ea&&u!==1073741824&&(o.flags|=128,p=!0,oc(x,!1),o.lanes=4194304);x.isBackwards?(S.sibling=o.child,o.child=S):(u=x.last,u!==null?u.sibling=S:o.child=S,x.last=S)}return x.tail!==null?(o=x.tail,x.rendering=o,x.tail=o.sibling,x.renderingStartTime=tt(),o.sibling=null,u=lt.current,Ze(lt,p?u&1|2:u&1),o):(tn(o),null);case 22:case 23:return Rp(),p=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==p&&(o.flags|=8192),p&&(o.mode&1)!==0?(Pn&1073741824)!==0&&(tn(o),o.subtreeFlags&6&&(o.flags|=8192)):tn(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function jI(i,o){switch(Bf(o),o.tag){case 1:return mn(o.type)&&ed(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return va(),rt(pn),rt(Zt),Jf(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return Yf(o),null;case 13:if(rt(lt),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));pa()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return rt(lt),null;case 4:return va(),null;case 10:return Hf(o.type._context),null;case 22:case 23:return Rp(),null;case 24:return null;default:return null}}var _d=!1,nn=!1,NI=typeof WeakSet=="function"?WeakSet:Set,fe=null;function _a(i,o){var u=i.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(p){ft(i,o,p)}else u.current=null}function vp(i,o,u){try{u()}catch(p){ft(i,o,p)}}var e1=!1;function DI(i,o){if(Rf=ni,i=j0(),Ef(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var p=u.getSelection&&u.getSelection();if(p&&p.rangeCount!==0){u=p.anchorNode;var y=p.anchorOffset,x=p.focusNode;p=p.focusOffset;try{u.nodeType,x.nodeType}catch{u=null;break e}var S=0,D=-1,F=-1,Y=0,ne=0,re=i,te=null;t:for(;;){for(var ce;re!==u||y!==0&&re.nodeType!==3||(D=S+y),re!==x||p!==0&&re.nodeType!==3||(F=S+p),re.nodeType===3&&(S+=re.nodeValue.length),(ce=re.firstChild)!==null;)te=re,re=ce;for(;;){if(re===i)break t;if(te===u&&++Y===y&&(D=S),te===x&&++ne===p&&(F=S),(ce=re.nextSibling)!==null)break;re=te,te=re.parentNode}re=ce}u=D===-1||F===-1?null:{start:D,end:F}}else u=null}u=u||{start:0,end:0}}else u=null;for(Pf={focusedElem:i,selectionRange:u},ni=!1,fe=o;fe!==null;)if(o=fe,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,fe=i;else for(;fe!==null;){o=fe;try{var me=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(me!==null){var ge=me.memoizedProps,vt=me.memoizedState,K=o.stateNode,z=K.getSnapshotBeforeUpdate(o.elementType===o.type?ge:ar(o.type,ge),vt);K.__reactInternalSnapshotBeforeUpdate=z}break;case 3:var Q=o.stateNode.containerInfo;Q.nodeType===1?Q.textContent="":Q.nodeType===9&&Q.documentElement&&Q.removeChild(Q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(se){ft(o,o.return,se)}if(i=o.sibling,i!==null){i.return=o.return,fe=i;break}fe=o.return}return me=e1,e1=!1,me}function ac(i,o,u){var p=o.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var y=p=p.next;do{if((y.tag&i)===i){var x=y.destroy;y.destroy=void 0,x!==void 0&&vp(o,u,x)}y=y.next}while(y!==p)}}function wd(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&i)===i){var p=u.create;u.destroy=p()}u=u.next}while(u!==o)}}function xp(i){var o=i.ref;if(o!==null){var u=i.stateNode;switch(i.tag){case 5:i=u;break;default:i=u}typeof o=="function"?o(i):o.current=i}}function t1(i){var o=i.alternate;o!==null&&(i.alternate=null,t1(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[Vr],delete o[Yl],delete o[Vf],delete o[gI],delete o[yI])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function n1(i){return i.tag===5||i.tag===3||i.tag===4}function r1(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||n1(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function _p(i,o,u){var p=i.tag;if(p===5||p===6)i=i.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(i,o):u.insertBefore(i,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(i,u)):(o=u,o.appendChild(i)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=Ju));else if(p!==4&&(i=i.child,i!==null))for(_p(i,o,u),i=i.sibling;i!==null;)_p(i,o,u),i=i.sibling}function wp(i,o,u){var p=i.tag;if(p===5||p===6)i=i.stateNode,o?u.insertBefore(i,o):u.appendChild(i);else if(p!==4&&(i=i.child,i!==null))for(wp(i,o,u),i=i.sibling;i!==null;)wp(i,o,u),i=i.sibling}var Wt=null,lr=!1;function Zi(i,o,u){for(u=u.child;u!==null;)i1(i,o,u),u=u.sibling}function i1(i,o,u){if(kn&&typeof kn.onCommitFiberUnmount=="function")try{kn.onCommitFiberUnmount(Ws,u)}catch{}switch(u.tag){case 5:nn||_a(u,o);case 6:var p=Wt,y=lr;Wt=null,Zi(i,o,u),Wt=p,lr=y,Wt!==null&&(lr?(i=Wt,u=u.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)):Wt.removeChild(u.stateNode));break;case 18:Wt!==null&&(lr?(i=Wt,u=u.stateNode,i.nodeType===8?Df(i.parentNode,u):i.nodeType===1&&Df(i,u),$i(i)):Df(Wt,u.stateNode));break;case 4:p=Wt,y=lr,Wt=u.stateNode.containerInfo,lr=!0,Zi(i,o,u),Wt=p,lr=y;break;case 0:case 11:case 14:case 15:if(!nn&&(p=u.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){y=p=p.next;do{var x=y,S=x.destroy;x=x.tag,S!==void 0&&((x&2)!==0||(x&4)!==0)&&vp(u,o,S),y=y.next}while(y!==p)}Zi(i,o,u);break;case 1:if(!nn&&(_a(u,o),p=u.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=u.memoizedProps,p.state=u.memoizedState,p.componentWillUnmount()}catch(D){ft(u,o,D)}Zi(i,o,u);break;case 21:Zi(i,o,u);break;case 22:u.mode&1?(nn=(p=nn)||u.memoizedState!==null,Zi(i,o,u),nn=p):Zi(i,o,u);break;default:Zi(i,o,u)}}function s1(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var u=i.stateNode;u===null&&(u=i.stateNode=new NI),o.forEach(function(p){var y=$I.bind(null,i,p);u.has(p)||(u.add(p),p.then(y,y))})}}function cr(i,o){var u=o.deletions;if(u!==null)for(var p=0;p<u.length;p++){var y=u[p];try{var x=i,S=o,D=S;e:for(;D!==null;){switch(D.tag){case 5:Wt=D.stateNode,lr=!1;break e;case 3:Wt=D.stateNode.containerInfo,lr=!0;break e;case 4:Wt=D.stateNode.containerInfo,lr=!0;break e}D=D.return}if(Wt===null)throw Error(t(160));i1(x,S,y),Wt=null,lr=!1;var F=y.alternate;F!==null&&(F.return=null),y.return=null}catch(Y){ft(y,o,Y)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)o1(o,i),o=o.sibling}function o1(i,o){var u=i.alternate,p=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(cr(o,i),Or(i),p&4){try{ac(3,i,i.return),wd(3,i)}catch(ge){ft(i,i.return,ge)}try{ac(5,i,i.return)}catch(ge){ft(i,i.return,ge)}}break;case 1:cr(o,i),Or(i),p&512&&u!==null&&_a(u,u.return);break;case 5:if(cr(o,i),Or(i),p&512&&u!==null&&_a(u,u.return),i.flags&32){var y=i.stateNode;try{Bs(y,"")}catch(ge){ft(i,i.return,ge)}}if(p&4&&(y=i.stateNode,y!=null)){var x=i.memoizedProps,S=u!==null?u.memoizedProps:x,D=i.type,F=i.updateQueue;if(i.updateQueue=null,F!==null)try{D==="input"&&x.type==="radio"&&x.name!=null&&Oo(y,x),zo(D,S);var Y=zo(D,x);for(S=0;S<F.length;S+=2){var ne=F[S],re=F[S+1];ne==="style"?Fo(y,re):ne==="dangerouslySetInnerHTML"?Su(y,re):ne==="children"?Bs(y,re):P(y,ne,re,Y)}switch(D){case"input":Os(y,x);break;case"textarea":Tu(y,x);break;case"select":var te=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!x.multiple;var ce=x.value;ce!=null?tr(y,!!x.multiple,ce,!1):te!==!!x.multiple&&(x.defaultValue!=null?tr(y,!!x.multiple,x.defaultValue,!0):tr(y,!!x.multiple,x.multiple?[]:"",!1))}y[Yl]=x}catch(ge){ft(i,i.return,ge)}}break;case 6:if(cr(o,i),Or(i),p&4){if(i.stateNode===null)throw Error(t(162));y=i.stateNode,x=i.memoizedProps;try{y.nodeValue=x}catch(ge){ft(i,i.return,ge)}}break;case 3:if(cr(o,i),Or(i),p&4&&u!==null&&u.memoizedState.isDehydrated)try{$i(o.containerInfo)}catch(ge){ft(i,i.return,ge)}break;case 4:cr(o,i),Or(i);break;case 13:cr(o,i),Or(i),y=i.child,y.flags&8192&&(x=y.memoizedState!==null,y.stateNode.isHidden=x,!x||y.alternate!==null&&y.alternate.memoizedState!==null||(Tp=tt())),p&4&&s1(i);break;case 22:if(ne=u!==null&&u.memoizedState!==null,i.mode&1?(nn=(Y=nn)||ne,cr(o,i),nn=Y):cr(o,i),Or(i),p&8192){if(Y=i.memoizedState!==null,(i.stateNode.isHidden=Y)&&!ne&&(i.mode&1)!==0)for(fe=i,ne=i.child;ne!==null;){for(re=fe=ne;fe!==null;){switch(te=fe,ce=te.child,te.tag){case 0:case 11:case 14:case 15:ac(4,te,te.return);break;case 1:_a(te,te.return);var me=te.stateNode;if(typeof me.componentWillUnmount=="function"){p=te,u=te.return;try{o=p,me.props=o.memoizedProps,me.state=o.memoizedState,me.componentWillUnmount()}catch(ge){ft(p,u,ge)}}break;case 5:_a(te,te.return);break;case 22:if(te.memoizedState!==null){c1(re);continue}}ce!==null?(ce.return=te,fe=ce):c1(re)}ne=ne.sibling}e:for(ne=null,re=i;;){if(re.tag===5){if(ne===null){ne=re;try{y=re.stateNode,Y?(x=y.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none"):(D=re.stateNode,F=re.memoizedProps.style,S=F!=null&&F.hasOwnProperty("display")?F.display:null,D.style.display=Di("display",S))}catch(ge){ft(i,i.return,ge)}}}else if(re.tag===6){if(ne===null)try{re.stateNode.nodeValue=Y?"":re.memoizedProps}catch(ge){ft(i,i.return,ge)}}else if((re.tag!==22&&re.tag!==23||re.memoizedState===null||re===i)&&re.child!==null){re.child.return=re,re=re.child;continue}if(re===i)break e;for(;re.sibling===null;){if(re.return===null||re.return===i)break e;ne===re&&(ne=null),re=re.return}ne===re&&(ne=null),re.sibling.return=re.return,re=re.sibling}}break;case 19:cr(o,i),Or(i),p&4&&s1(i);break;case 21:break;default:cr(o,i),Or(i)}}function Or(i){var o=i.flags;if(o&2){try{e:{for(var u=i.return;u!==null;){if(n1(u)){var p=u;break e}u=u.return}throw Error(t(160))}switch(p.tag){case 5:var y=p.stateNode;p.flags&32&&(Bs(y,""),p.flags&=-33);var x=r1(i);wp(i,x,y);break;case 3:case 4:var S=p.stateNode.containerInfo,D=r1(i);_p(i,D,S);break;default:throw Error(t(161))}}catch(F){ft(i,i.return,F)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function VI(i,o,u){fe=i,a1(i)}function a1(i,o,u){for(var p=(i.mode&1)!==0;fe!==null;){var y=fe,x=y.child;if(y.tag===22&&p){var S=y.memoizedState!==null||_d;if(!S){var D=y.alternate,F=D!==null&&D.memoizedState!==null||nn;D=_d;var Y=nn;if(_d=S,(nn=F)&&!Y)for(fe=y;fe!==null;)S=fe,F=S.child,S.tag===22&&S.memoizedState!==null?u1(y):F!==null?(F.return=S,fe=F):u1(y);for(;x!==null;)fe=x,a1(x),x=x.sibling;fe=y,_d=D,nn=Y}l1(i)}else(y.subtreeFlags&8772)!==0&&x!==null?(x.return=y,fe=x):l1(i)}}function l1(i){for(;fe!==null;){var o=fe;if((o.flags&8772)!==0){var u=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:nn||wd(5,o);break;case 1:var p=o.stateNode;if(o.flags&4&&!nn)if(u===null)p.componentDidMount();else{var y=o.elementType===o.type?u.memoizedProps:ar(o.type,u.memoizedProps);p.componentDidUpdate(y,u.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var x=o.updateQueue;x!==null&&cv(o,x,p);break;case 3:var S=o.updateQueue;if(S!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}cv(o,S,u)}break;case 5:var D=o.stateNode;if(u===null&&o.flags&4){u=D;var F=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":F.autoFocus&&u.focus();break;case"img":F.src&&(u.src=F.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var Y=o.alternate;if(Y!==null){var ne=Y.memoizedState;if(ne!==null){var re=ne.dehydrated;re!==null&&$i(re)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}nn||o.flags&512&&xp(o)}catch(te){ft(o,o.return,te)}}if(o===i){fe=null;break}if(u=o.sibling,u!==null){u.return=o.return,fe=u;break}fe=o.return}}function c1(i){for(;fe!==null;){var o=fe;if(o===i){fe=null;break}var u=o.sibling;if(u!==null){u.return=o.return,fe=u;break}fe=o.return}}function u1(i){for(;fe!==null;){var o=fe;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{wd(4,o)}catch(F){ft(o,u,F)}break;case 1:var p=o.stateNode;if(typeof p.componentDidMount=="function"){var y=o.return;try{p.componentDidMount()}catch(F){ft(o,y,F)}}var x=o.return;try{xp(o)}catch(F){ft(o,x,F)}break;case 5:var S=o.return;try{xp(o)}catch(F){ft(o,S,F)}}}catch(F){ft(o,o.return,F)}if(o===i){fe=null;break}var D=o.sibling;if(D!==null){D.return=o.return,fe=D;break}fe=o.return}}var MI=Math.ceil,Ed=G.ReactCurrentDispatcher,Ep=G.ReactCurrentOwner,Wn=G.ReactCurrentBatchConfig,$e=0,Ot=null,Tt=null,Ht=0,Pn=0,wa=Gi(0),Pt=0,lc=null,oo=0,kd=0,kp=0,cc=null,yn=null,Tp=0,Ea=1/0,hi=null,Td=!1,Sp=null,es=null,Sd=!1,ts=null,bd=0,uc=0,bp=null,Id=-1,Cd=0;function dn(){return($e&6)!==0?tt():Id!==-1?Id:Id=tt()}function ns(i){return(i.mode&1)===0?1:($e&2)!==0&&Ht!==0?Ht&-Ht:xI.transition!==null?(Cd===0&&(Cd=Pl()),Cd):(i=Fe,i!==0||(i=window.event,i=i===void 0?16:Xo(i.type)),i)}function ur(i,o,u,p){if(50<uc)throw uc=0,bp=null,Error(t(185));Gs(i,u,p),(($e&2)===0||i!==Ot)&&(i===Ot&&(($e&2)===0&&(kd|=u),Pt===4&&rs(i,Ht)),vn(i,p),u===1&&$e===0&&(o.mode&1)===0&&(Ea=tt()+500,nd&&Yi()))}function vn(i,o){var u=i.callbackNode;qs(i,o);var p=Zr(i,i===Ot?Ht:0);if(p===0)u!==null&&Wo(u),i.callbackNode=null,i.callbackPriority=0;else if(o=p&-p,i.callbackPriority!==o){if(u!=null&&Wo(u),o===1)i.tag===0?vI(h1.bind(null,i)):X0(h1.bind(null,i)),pI(function(){($e&6)===0&&Yi()}),u=null;else{switch(Sr(p)){case 1:u=Ho;break;case 4:u=Cl;break;case 16:u=$s;break;case 536870912:u=Ko;break;default:u=$s}u=_1(u,d1.bind(null,i))}i.callbackPriority=o,i.callbackNode=u}}function d1(i,o){if(Id=-1,Cd=0,($e&6)!==0)throw Error(t(327));var u=i.callbackNode;if(ka()&&i.callbackNode!==u)return null;var p=Zr(i,i===Ot?Ht:0);if(p===0)return null;if((p&30)!==0||(p&i.expiredLanes)!==0||o)o=Ad(i,p);else{o=p;var y=$e;$e|=2;var x=p1();(Ot!==i||Ht!==o)&&(hi=null,Ea=tt()+500,lo(i,o));do try{BI();break}catch(D){f1(i,D)}while(!0);Wf(),Ed.current=x,$e=y,Tt!==null?o=0:(Ot=null,Ht=0,o=Pt)}if(o!==0){if(o===2&&(y=Rl(i),y!==0&&(p=y,o=Ip(i,y))),o===1)throw u=lc,lo(i,0),rs(i,p),vn(i,tt()),u;if(o===6)rs(i,p);else{if(y=i.current.alternate,(p&30)===0&&!LI(y)&&(o=Ad(i,p),o===2&&(x=Rl(i),x!==0&&(p=x,o=Ip(i,x))),o===1))throw u=lc,lo(i,0),rs(i,p),vn(i,tt()),u;switch(i.finishedWork=y,i.finishedLanes=p,o){case 0:case 1:throw Error(t(345));case 2:co(i,yn,hi);break;case 3:if(rs(i,p),(p&130023424)===p&&(o=Tp+500-tt(),10<o)){if(Zr(i,0)!==0)break;if(y=i.suspendedLanes,(y&p)!==p){dn(),i.pingedLanes|=i.suspendedLanes&y;break}i.timeoutHandle=Nf(co.bind(null,i,yn,hi),o);break}co(i,yn,hi);break;case 4:if(rs(i,p),(p&4194240)===p)break;for(o=i.eventTimes,y=-1;0<p;){var S=31-Tn(p);x=1<<S,S=o[S],S>y&&(y=S),p&=~x}if(p=y,p=tt()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*MI(p/1960))-p,10<p){i.timeoutHandle=Nf(co.bind(null,i,yn,hi),p);break}co(i,yn,hi);break;case 5:co(i,yn,hi);break;default:throw Error(t(329))}}}return vn(i,tt()),i.callbackNode===u?d1.bind(null,i):null}function Ip(i,o){var u=cc;return i.current.memoizedState.isDehydrated&&(lo(i,o).flags|=256),i=Ad(i,o),i!==2&&(o=yn,yn=u,o!==null&&Cp(o)),i}function Cp(i){yn===null?yn=i:yn.push.apply(yn,i)}function LI(i){for(var o=i;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var p=0;p<u.length;p++){var y=u[p],x=y.getSnapshot;y=y.value;try{if(!sr(x(),y))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function rs(i,o){for(o&=~kp,o&=~kd,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var u=31-Tn(o),p=1<<u;i[u]=-1,o&=~p}}function h1(i){if(($e&6)!==0)throw Error(t(327));ka();var o=Zr(i,0);if((o&1)===0)return vn(i,tt()),null;var u=Ad(i,o);if(i.tag!==0&&u===2){var p=Rl(i);p!==0&&(o=p,u=Ip(i,p))}if(u===1)throw u=lc,lo(i,0),rs(i,o),vn(i,tt()),u;if(u===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,co(i,yn,hi),vn(i,tt()),null}function Ap(i,o){var u=$e;$e|=1;try{return i(o)}finally{$e=u,$e===0&&(Ea=tt()+500,nd&&Yi())}}function ao(i){ts!==null&&ts.tag===0&&($e&6)===0&&ka();var o=$e;$e|=1;var u=Wn.transition,p=Fe;try{if(Wn.transition=null,Fe=1,i)return i()}finally{Fe=p,Wn.transition=u,$e=o,($e&6)===0&&Yi()}}function Rp(){Pn=wa.current,rt(wa)}function lo(i,o){i.finishedWork=null,i.finishedLanes=0;var u=i.timeoutHandle;if(u!==-1&&(i.timeoutHandle=-1,fI(u)),Tt!==null)for(u=Tt.return;u!==null;){var p=u;switch(Bf(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&ed();break;case 3:va(),rt(pn),rt(Zt),Jf();break;case 5:Yf(p);break;case 4:va();break;case 13:rt(lt);break;case 19:rt(lt);break;case 10:Hf(p.type._context);break;case 22:case 23:Rp()}u=u.return}if(Ot=i,Tt=i=is(i.current,null),Ht=Pn=o,Pt=0,lc=null,kp=kd=oo=0,yn=cc=null,ro!==null){for(o=0;o<ro.length;o++)if(u=ro[o],p=u.interleaved,p!==null){u.interleaved=null;var y=p.next,x=u.pending;if(x!==null){var S=x.next;x.next=y,p.next=S}u.pending=p}ro=null}return i}function f1(i,o){do{var u=Tt;try{if(Wf(),hd.current=gd,fd){for(var p=ct.memoizedState;p!==null;){var y=p.queue;y!==null&&(y.pending=null),p=p.next}fd=!1}if(so=0,Lt=Rt=ct=null,nc=!1,rc=0,Ep.current=null,u===null||u.return===null){Pt=1,lc=o,Tt=null;break}e:{var x=i,S=u.return,D=u,F=o;if(o=Ht,D.flags|=32768,F!==null&&typeof F=="object"&&typeof F.then=="function"){var Y=F,ne=D,re=ne.tag;if((ne.mode&1)===0&&(re===0||re===11||re===15)){var te=ne.alternate;te?(ne.updateQueue=te.updateQueue,ne.memoizedState=te.memoizedState,ne.lanes=te.lanes):(ne.updateQueue=null,ne.memoizedState=null)}var ce=Ov(S);if(ce!==null){ce.flags&=-257,Bv(ce,S,D,x,o),ce.mode&1&&Lv(x,Y,o),o=ce,F=Y;var me=o.updateQueue;if(me===null){var ge=new Set;ge.add(F),o.updateQueue=ge}else me.add(F);break e}else{if((o&1)===0){Lv(x,Y,o),Pp();break e}F=Error(t(426))}}else if(ot&&D.mode&1){var vt=Ov(S);if(vt!==null){(vt.flags&65536)===0&&(vt.flags|=256),Bv(vt,S,D,x,o),Uf(xa(F,D));break e}}x=F=xa(F,D),Pt!==4&&(Pt=2),cc===null?cc=[x]:cc.push(x),x=S;do{switch(x.tag){case 3:x.flags|=65536,o&=-o,x.lanes|=o;var K=Vv(x,F,o);lv(x,K);break e;case 1:D=F;var z=x.type,Q=x.stateNode;if((x.flags&128)===0&&(typeof z.getDerivedStateFromError=="function"||Q!==null&&typeof Q.componentDidCatch=="function"&&(es===null||!es.has(Q)))){x.flags|=65536,o&=-o,x.lanes|=o;var se=Mv(x,D,o);lv(x,se);break e}}x=x.return}while(x!==null)}g1(u)}catch(ye){o=ye,Tt===u&&u!==null&&(Tt=u=u.return);continue}break}while(!0)}function p1(){var i=Ed.current;return Ed.current=gd,i===null?gd:i}function Pp(){(Pt===0||Pt===3||Pt===2)&&(Pt=4),Ot===null||(oo&268435455)===0&&(kd&268435455)===0||rs(Ot,Ht)}function Ad(i,o){var u=$e;$e|=2;var p=p1();(Ot!==i||Ht!==o)&&(hi=null,lo(i,o));do try{OI();break}catch(y){f1(i,y)}while(!0);if(Wf(),$e=u,Ed.current=p,Tt!==null)throw Error(t(261));return Ot=null,Ht=0,Pt}function OI(){for(;Tt!==null;)m1(Tt)}function BI(){for(;Tt!==null&&!Us();)m1(Tt)}function m1(i){var o=x1(i.alternate,i,Pn);i.memoizedProps=i.pendingProps,o===null?g1(i):Tt=o,Ep.current=null}function g1(i){var o=i;do{var u=o.alternate;if(i=o.return,(o.flags&32768)===0){if(u=PI(u,o,Pn),u!==null){Tt=u;return}}else{if(u=jI(u,o),u!==null){u.flags&=32767,Tt=u;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Pt=6,Tt=null;return}}if(o=o.sibling,o!==null){Tt=o;return}Tt=o=i}while(o!==null);Pt===0&&(Pt=5)}function co(i,o,u){var p=Fe,y=Wn.transition;try{Wn.transition=null,Fe=1,FI(i,o,u,p)}finally{Wn.transition=y,Fe=p}return null}function FI(i,o,u,p){do ka();while(ts!==null);if(($e&6)!==0)throw Error(t(327));u=i.finishedWork;var y=i.finishedLanes;if(u===null)return null;if(i.finishedWork=null,i.finishedLanes=0,u===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var x=u.lanes|u.childLanes;if(yf(i,x),i===Ot&&(Tt=Ot=null,Ht=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Sd||(Sd=!0,_1($s,function(){return ka(),null})),x=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||x){x=Wn.transition,Wn.transition=null;var S=Fe;Fe=1;var D=$e;$e|=4,Ep.current=null,DI(i,u),o1(u,i),oI(Pf),ni=!!Rf,Pf=Rf=null,i.current=u,VI(u),Jr(),$e=D,Fe=S,Wn.transition=x}else i.current=u;if(Sd&&(Sd=!1,ts=i,bd=y),x=i.pendingLanes,x===0&&(es=null),Mu(u.stateNode),vn(i,tt()),o!==null)for(p=i.onRecoverableError,u=0;u<o.length;u++)y=o[u],p(y.value,{componentStack:y.stack,digest:y.digest});if(Td)throw Td=!1,i=Sp,Sp=null,i;return(bd&1)!==0&&i.tag!==0&&ka(),x=i.pendingLanes,(x&1)!==0?i===bp?uc++:(uc=0,bp=i):uc=0,Yi(),null}function ka(){if(ts!==null){var i=Sr(bd),o=Wn.transition,u=Fe;try{if(Wn.transition=null,Fe=16>i?16:i,ts===null)var p=!1;else{if(i=ts,ts=null,bd=0,($e&6)!==0)throw Error(t(331));var y=$e;for($e|=4,fe=i.current;fe!==null;){var x=fe,S=x.child;if((fe.flags&16)!==0){var D=x.deletions;if(D!==null){for(var F=0;F<D.length;F++){var Y=D[F];for(fe=Y;fe!==null;){var ne=fe;switch(ne.tag){case 0:case 11:case 15:ac(8,ne,x)}var re=ne.child;if(re!==null)re.return=ne,fe=re;else for(;fe!==null;){ne=fe;var te=ne.sibling,ce=ne.return;if(t1(ne),ne===Y){fe=null;break}if(te!==null){te.return=ce,fe=te;break}fe=ce}}}var me=x.alternate;if(me!==null){var ge=me.child;if(ge!==null){me.child=null;do{var vt=ge.sibling;ge.sibling=null,ge=vt}while(ge!==null)}}fe=x}}if((x.subtreeFlags&2064)!==0&&S!==null)S.return=x,fe=S;else e:for(;fe!==null;){if(x=fe,(x.flags&2048)!==0)switch(x.tag){case 0:case 11:case 15:ac(9,x,x.return)}var K=x.sibling;if(K!==null){K.return=x.return,fe=K;break e}fe=x.return}}var z=i.current;for(fe=z;fe!==null;){S=fe;var Q=S.child;if((S.subtreeFlags&2064)!==0&&Q!==null)Q.return=S,fe=Q;else e:for(S=z;fe!==null;){if(D=fe,(D.flags&2048)!==0)try{switch(D.tag){case 0:case 11:case 15:wd(9,D)}}catch(ye){ft(D,D.return,ye)}if(D===S){fe=null;break e}var se=D.sibling;if(se!==null){se.return=D.return,fe=se;break e}fe=D.return}}if($e=y,Yi(),kn&&typeof kn.onPostCommitFiberRoot=="function")try{kn.onPostCommitFiberRoot(Ws,i)}catch{}p=!0}return p}finally{Fe=u,Wn.transition=o}}return!1}function y1(i,o,u){o=xa(u,o),o=Vv(i,o,1),i=Ji(i,o,1),o=dn(),i!==null&&(Gs(i,1,o),vn(i,o))}function ft(i,o,u){if(i.tag===3)y1(i,i,u);else for(;o!==null;){if(o.tag===3){y1(o,i,u);break}else if(o.tag===1){var p=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(es===null||!es.has(p))){i=xa(u,i),i=Mv(o,i,1),o=Ji(o,i,1),i=dn(),o!==null&&(Gs(o,1,i),vn(o,i));break}}o=o.return}}function zI(i,o,u){var p=i.pingCache;p!==null&&p.delete(o),o=dn(),i.pingedLanes|=i.suspendedLanes&u,Ot===i&&(Ht&u)===u&&(Pt===4||Pt===3&&(Ht&130023424)===Ht&&500>tt()-Tp?lo(i,0):kp|=u),vn(i,o)}function v1(i,o){o===0&&((i.mode&1)===0?o=1:(o=Fi,Fi<<=1,(Fi&130023424)===0&&(Fi=4194304)));var u=dn();i=ci(i,o),i!==null&&(Gs(i,o,u),vn(i,u))}function UI(i){var o=i.memoizedState,u=0;o!==null&&(u=o.retryLane),v1(i,u)}function $I(i,o){var u=0;switch(i.tag){case 13:var p=i.stateNode,y=i.memoizedState;y!==null&&(u=y.retryLane);break;case 19:p=i.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(o),v1(i,u)}var x1;x1=function(i,o,u){if(i!==null)if(i.memoizedProps!==o.pendingProps||pn.current)gn=!0;else{if((i.lanes&u)===0&&(o.flags&128)===0)return gn=!1,RI(i,o,u);gn=(i.flags&131072)!==0}else gn=!1,ot&&(o.flags&1048576)!==0&&J0(o,id,o.index);switch(o.lanes=0,o.tag){case 2:var p=o.type;xd(i,o),i=o.pendingProps;var y=da(o,Zt.current);ya(o,u),y=tp(null,o,p,i,y,u);var x=np();return o.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,mn(p)?(x=!0,td(o)):x=!1,o.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,Gf(o),y.updater=yd,o.stateNode=y,y._reactInternals=o,lp(o,p,i,u),o=hp(null,o,p,!0,x,u)):(o.tag=0,ot&&x&&Of(o),un(null,o,y,u),o=o.child),o;case 16:p=o.elementType;e:{switch(xd(i,o),i=o.pendingProps,y=p._init,p=y(p._payload),o.type=p,y=o.tag=HI(p),i=ar(p,i),y){case 0:o=dp(null,o,p,i,u);break e;case 1:o=Hv(null,o,p,i,u);break e;case 11:o=Fv(null,o,p,i,u);break e;case 14:o=zv(null,o,p,ar(p.type,i),u);break e}throw Error(t(306,p,""))}return o;case 0:return p=o.type,y=o.pendingProps,y=o.elementType===p?y:ar(p,y),dp(i,o,p,y,u);case 1:return p=o.type,y=o.pendingProps,y=o.elementType===p?y:ar(p,y),Hv(i,o,p,y,u);case 3:e:{if(Kv(o),i===null)throw Error(t(387));p=o.pendingProps,x=o.memoizedState,y=x.element,av(i,o),ud(o,p,null,u);var S=o.memoizedState;if(p=S.element,x.isDehydrated)if(x={element:p,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},o.updateQueue.baseState=x,o.memoizedState=x,o.flags&256){y=xa(Error(t(423)),o),o=qv(i,o,p,u,y);break e}else if(p!==y){y=xa(Error(t(424)),o),o=qv(i,o,p,u,y);break e}else for(Rn=qi(o.stateNode.containerInfo.firstChild),An=o,ot=!0,or=null,u=sv(o,null,p,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(pa(),p===y){o=di(i,o,u);break e}un(i,o,p,u)}o=o.child}return o;case 5:return uv(o),i===null&&zf(o),p=o.type,y=o.pendingProps,x=i!==null?i.memoizedProps:null,S=y.children,jf(p,y)?S=null:x!==null&&jf(p,x)&&(o.flags|=32),Wv(i,o),un(i,o,S,u),o.child;case 6:return i===null&&zf(o),null;case 13:return Gv(i,o,u);case 4:return Qf(o,o.stateNode.containerInfo),p=o.pendingProps,i===null?o.child=ma(o,null,p,u):un(i,o,p,u),o.child;case 11:return p=o.type,y=o.pendingProps,y=o.elementType===p?y:ar(p,y),Fv(i,o,p,y,u);case 7:return un(i,o,o.pendingProps,u),o.child;case 8:return un(i,o,o.pendingProps.children,u),o.child;case 12:return un(i,o,o.pendingProps.children,u),o.child;case 10:e:{if(p=o.type._context,y=o.pendingProps,x=o.memoizedProps,S=y.value,Ze(ad,p._currentValue),p._currentValue=S,x!==null)if(sr(x.value,S)){if(x.children===y.children&&!pn.current){o=di(i,o,u);break e}}else for(x=o.child,x!==null&&(x.return=o);x!==null;){var D=x.dependencies;if(D!==null){S=x.child;for(var F=D.firstContext;F!==null;){if(F.context===p){if(x.tag===1){F=ui(-1,u&-u),F.tag=2;var Y=x.updateQueue;if(Y!==null){Y=Y.shared;var ne=Y.pending;ne===null?F.next=F:(F.next=ne.next,ne.next=F),Y.pending=F}}x.lanes|=u,F=x.alternate,F!==null&&(F.lanes|=u),Kf(x.return,u,o),D.lanes|=u;break}F=F.next}}else if(x.tag===10)S=x.type===o.type?null:x.child;else if(x.tag===18){if(S=x.return,S===null)throw Error(t(341));S.lanes|=u,D=S.alternate,D!==null&&(D.lanes|=u),Kf(S,u,o),S=x.sibling}else S=x.child;if(S!==null)S.return=x;else for(S=x;S!==null;){if(S===o){S=null;break}if(x=S.sibling,x!==null){x.return=S.return,S=x;break}S=S.return}x=S}un(i,o,y.children,u),o=o.child}return o;case 9:return y=o.type,p=o.pendingProps.children,ya(o,u),y=Un(y),p=p(y),o.flags|=1,un(i,o,p,u),o.child;case 14:return p=o.type,y=ar(p,o.pendingProps),y=ar(p.type,y),zv(i,o,p,y,u);case 15:return Uv(i,o,o.type,o.pendingProps,u);case 17:return p=o.type,y=o.pendingProps,y=o.elementType===p?y:ar(p,y),xd(i,o),o.tag=1,mn(p)?(i=!0,td(o)):i=!1,ya(o,u),Nv(o,p,y),lp(o,p,y,u),hp(null,o,p,!0,i,u);case 19:return Yv(i,o,u);case 22:return $v(i,o,u)}throw Error(t(156,o.tag))};function _1(i,o){return Il(i,o)}function WI(i,o,u,p){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hn(i,o,u,p){return new WI(i,o,u,p)}function jp(i){return i=i.prototype,!(!i||!i.isReactComponent)}function HI(i){if(typeof i=="function")return jp(i)?1:0;if(i!=null){if(i=i.$$typeof,i===W)return 11;if(i===He)return 14}return 2}function is(i,o){var u=i.alternate;return u===null?(u=Hn(i.tag,o,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=o,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&14680064,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,o=i.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u}function Rd(i,o,u,p,y,x){var S=2;if(p=i,typeof i=="function")jp(i)&&(S=1);else if(typeof i=="string")S=5;else e:switch(i){case A:return uo(u.children,y,x,o);case b:S=8,y|=8;break;case j:return i=Hn(12,u,o,y|2),i.elementType=j,i.lanes=x,i;case M:return i=Hn(13,u,o,y),i.elementType=M,i.lanes=x,i;case Ne:return i=Hn(19,u,o,y),i.elementType=Ne,i.lanes=x,i;case Se:return Pd(u,y,x,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case L:S=10;break e;case O:S=9;break e;case W:S=11;break e;case He:S=14;break e;case wt:S=16,p=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=Hn(S,u,o,y),o.elementType=i,o.type=p,o.lanes=x,o}function uo(i,o,u,p){return i=Hn(7,i,p,o),i.lanes=u,i}function Pd(i,o,u,p){return i=Hn(22,i,p,o),i.elementType=Se,i.lanes=u,i.stateNode={isHidden:!1},i}function Np(i,o,u){return i=Hn(6,i,null,o),i.lanes=u,i}function Dp(i,o,u){return o=Hn(4,i.children!==null?i.children:[],i.key,o),o.lanes=u,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function KI(i,o,u,p,y){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jl(0),this.expirationTimes=jl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jl(0),this.identifierPrefix=p,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function Vp(i,o,u,p,y,x,S,D,F){return i=new KI(i,o,u,D,F),o===1?(o=1,x===!0&&(o|=8)):o=0,x=Hn(3,null,null,o),i.current=x,x.stateNode=i,x.memoizedState={element:p,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gf(x),i}function qI(i,o,u){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:H,key:p==null?null:""+p,children:i,containerInfo:o,implementation:u}}function w1(i){if(!i)return Qi;i=i._reactInternals;e:{if(rr(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(mn(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var u=i.type;if(mn(u))return Q0(i,u,o)}return o}function E1(i,o,u,p,y,x,S,D,F){return i=Vp(u,p,!0,i,y,x,S,D,F),i.context=w1(null),u=i.current,p=dn(),y=ns(u),x=ui(p,y),x.callback=o??null,Ji(u,x,y),i.current.lanes=y,Gs(i,y,p),vn(i,p),i}function jd(i,o,u,p){var y=o.current,x=dn(),S=ns(y);return u=w1(u),o.context===null?o.context=u:o.pendingContext=u,o=ui(x,S),o.payload={element:i},p=p===void 0?null:p,p!==null&&(o.callback=p),i=Ji(y,o,S),i!==null&&(ur(i,y,S,x),cd(i,y,S)),S}function Nd(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function k1(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<o?u:o}}function Mp(i,o){k1(i,o),(i=i.alternate)&&k1(i,o)}function GI(){return null}var T1=typeof reportError=="function"?reportError:function(i){console.error(i)};function Lp(i){this._internalRoot=i}Dd.prototype.render=Lp.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));jd(i,o,null,null)},Dd.prototype.unmount=Lp.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;ao(function(){jd(null,i,null,null)}),o[si]=null}};function Dd(i){this._internalRoot=i}Dd.prototype.unstable_scheduleHydration=function(i){if(i){var o=Ml();i={blockedOn:null,target:i,priority:o};for(var u=0;u<Sn.length&&o!==0&&o<Sn[u].priority;u++);Sn.splice(u,0,i),u===0&&Qo(i)}};function Op(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Vd(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function S1(){}function QI(i,o,u,p,y){if(y){if(typeof p=="function"){var x=p;p=function(){var Y=Nd(S);x.call(Y)}}var S=E1(o,p,i,0,null,!1,!1,"",S1);return i._reactRootContainer=S,i[si]=S.current,Gl(i.nodeType===8?i.parentNode:i),ao(),S}for(;y=i.lastChild;)i.removeChild(y);if(typeof p=="function"){var D=p;p=function(){var Y=Nd(F);D.call(Y)}}var F=Vp(i,0,!1,null,null,!1,!1,"",S1);return i._reactRootContainer=F,i[si]=F.current,Gl(i.nodeType===8?i.parentNode:i),ao(function(){jd(o,F,u,p)}),F}function Md(i,o,u,p,y){var x=u._reactRootContainer;if(x){var S=x;if(typeof y=="function"){var D=y;y=function(){var F=Nd(S);D.call(F)}}jd(o,S,i,y)}else S=QI(u,o,i,y,p);return Nd(S)}Dl=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var u=Ke(o.pendingLanes);u!==0&&(Nl(o,u|1),vn(o,tt()),($e&6)===0&&(Ea=tt()+500,Yi()))}break;case 13:ao(function(){var p=ci(i,1);if(p!==null){var y=dn();ur(p,i,1,y)}}),Mp(i,1)}},qo=function(i){if(i.tag===13){var o=ci(i,134217728);if(o!==null){var u=dn();ur(o,i,134217728,u)}Mp(i,134217728)}},Vl=function(i){if(i.tag===13){var o=ns(i),u=ci(i,o);if(u!==null){var p=dn();ur(u,i,o,p)}Mp(i,o)}},Ml=function(){return Fe},Ll=function(i,o){var u=Fe;try{return Fe=i,o()}finally{Fe=u}},Qr=function(i,o,u){switch(o){case"input":if(Os(i,u),o=u.name,u.type==="radio"&&o!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var p=u[o];if(p!==i&&p.form===i.form){var y=Zu(p);if(!y)throw Error(t(90));vl(p),Os(p,y)}}}break;case"textarea":Tu(i,u);break;case"select":o=u.value,o!=null&&tr(i,!!u.multiple,o,!1)}},Iu=Ap,Cu=ao;var YI={usingClientEntryPoint:!1,Events:[Xl,ca,Zu,Mi,Li,Ap]},dc={findFiberByHostInstance:Zs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},XI={bundleType:dc.bundleType,version:dc.version,rendererPackageName:dc.rendererPackageName,rendererConfig:dc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:G.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Vu(i),i===null?null:i.stateNode},findFiberByHostInstance:dc.findFiberByHostInstance||GI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ld=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ld.isDisabled&&Ld.supportsFiber)try{Ws=Ld.inject(XI),kn=Ld}catch{}}return xn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=YI,xn.createPortal=function(i,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Op(o))throw Error(t(200));return qI(i,o,null,u)},xn.createRoot=function(i,o){if(!Op(i))throw Error(t(299));var u=!1,p="",y=T1;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onRecoverableError!==void 0&&(y=o.onRecoverableError)),o=Vp(i,1,!1,null,null,u,!1,p,y),i[si]=o.current,Gl(i.nodeType===8?i.parentNode:i),new Lp(o)},xn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=Vu(o),i=i===null?null:i.stateNode,i},xn.flushSync=function(i){return ao(i)},xn.hydrate=function(i,o,u){if(!Vd(o))throw Error(t(200));return Md(null,i,o,!0,u)},xn.hydrateRoot=function(i,o,u){if(!Op(i))throw Error(t(405));var p=u!=null&&u.hydratedSources||null,y=!1,x="",S=T1;if(u!=null&&(u.unstable_strictMode===!0&&(y=!0),u.identifierPrefix!==void 0&&(x=u.identifierPrefix),u.onRecoverableError!==void 0&&(S=u.onRecoverableError)),o=E1(o,null,i,1,u??null,y,!1,x,S),i[si]=o.current,Gl(i),p)for(i=0;i<p.length;i++)u=p[i],y=u._getVersion,y=y(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,y]:o.mutableSourceEagerHydrationData.push(u,y);return new Dd(o)},xn.render=function(i,o,u){if(!Vd(o))throw Error(t(200));return Md(null,i,o,!1,u)},xn.unmountComponentAtNode=function(i){if(!Vd(i))throw Error(t(40));return i._reactRootContainer?(ao(function(){Md(null,null,i,!1,function(){i._reactRootContainer=null,i[si]=null})}),!0):!1},xn.unstable_batchedUpdates=Ap,xn.unstable_renderSubtreeIntoContainer=function(i,o,u,p){if(!Vd(u))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return Md(i,o,u,!1,p)},xn.version="18.3.1-next-f1338f8080-20240426",xn}var N1;function o2(){if(N1)return zp.exports;N1=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),zp.exports=s2(),zp.exports}var D1;function a2(){if(D1)return Od;D1=1;var n=o2();return Od.createRoot=n.createRoot,Od.hydrateRoot=n.hydrateRoot,Od}var l2=a2();/**
 * react-router v7.12.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var V1="popstate";function c2(n={}){function e(s,a){let{pathname:l="/",search:f="",hash:d=""}=Ro(s.location.hash.substring(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),bm("",{pathname:l,search:f,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(s,a){let l=s.document.querySelector("base"),f="";if(l&&l.getAttribute("href")){let d=s.location.href,m=d.indexOf("#");f=m===-1?d:d.slice(0,m)}return f+"#"+(typeof a=="string"?a:Mc(a))}function r(s,a){Dn(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return d2(e,t,r,n)}function at(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Dn(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function u2(){return Math.random().toString(36).substring(2,10)}function M1(n,e){return{usr:n.state,key:n.key,idx:e}}function bm(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Ro(e):e,state:t,key:e&&e.key||r||u2()}}function Mc({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Ro(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function d2(n,e,t,r={}){let{window:s=document.defaultView,v5Compat:a=!1}=r,l=s.history,f="POP",d=null,m=g();m==null&&(m=0,l.replaceState({...l.state,idx:m},""));function g(){return(l.state||{idx:null}).idx}function v(){f="POP";let I=g(),V=I==null?null:I-m;m=I,d&&d({action:f,location:C.location,delta:V})}function w(I,V){f="PUSH";let B=bm(C.location,I,V);t&&t(B,I),m=g()+1;let P=M1(B,m),G=C.createHref(B);try{l.pushState(P,"",G)}catch($){if($ instanceof DOMException&&$.name==="DataCloneError")throw $;s.location.assign(G)}a&&d&&d({action:f,location:C.location,delta:1})}function T(I,V){f="REPLACE";let B=bm(C.location,I,V);t&&t(B,I),m=g();let P=M1(B,m),G=C.createHref(B);l.replaceState(P,"",G),a&&d&&d({action:f,location:C.location,delta:0})}function k(I){return h2(I)}let C={get action(){return f},get location(){return n(s,l)},listen(I){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(V1,v),d=I,()=>{s.removeEventListener(V1,v),d=null}},createHref(I){return e(s,I)},createURL:k,encodeLocation(I){let V=k(I);return{pathname:V.pathname,search:V.search,hash:V.hash}},push:w,replace:T,go(I){return l.go(I)}};return C}function h2(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),at(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Mc(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function Uw(n,e,t="/"){return f2(n,e,t,!1)}function f2(n,e,t,r){let s=typeof e=="string"?Ro(e):e,a=_i(s.pathname||"/",t);if(a==null)return null;let l=$w(n);p2(l);let f=null;for(let d=0;f==null&&d<l.length;++d){let m=S2(a);f=k2(l[d],m,r)}return f}function $w(n,e=[],t=[],r="",s=!1){let a=(l,f,d=s,m)=>{let g={relativePath:m===void 0?l.path||"":m,caseSensitive:l.caseSensitive===!0,childrenIndex:f,route:l};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(r)&&d)return;at(g.relativePath.startsWith(r),`Absolute route path "${g.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(r.length)}let v=gi([r,g.relativePath]),w=t.concat(g);l.children&&l.children.length>0&&(at(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),$w(l.children,e,w,v,d)),!(l.path==null&&!l.index)&&e.push({path:v,score:w2(v,l.index),routesMeta:w})};return n.forEach((l,f)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))a(l,f);else for(let m of Ww(l.path))a(l,f,!0,m)}),e}function Ww(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let l=Ww(r.join("/")),f=[];return f.push(...l.map(d=>d===""?a:[a,d].join("/"))),s&&f.push(...l),f.map(d=>n.startsWith("/")&&d===""?"/":d)}function p2(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:E2(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var m2=/^:[\w-]+$/,g2=3,y2=2,v2=1,x2=10,_2=-2,L1=n=>n==="*";function w2(n,e){let t=n.split("/"),r=t.length;return t.some(L1)&&(r+=_2),e&&(r+=y2),t.filter(s=>!L1(s)).reduce((s,a)=>s+(m2.test(a)?g2:a===""?v2:x2),r)}function E2(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function k2(n,e,t=!1){let{routesMeta:r}=n,s={},a="/",l=[];for(let f=0;f<r.length;++f){let d=r[f],m=f===r.length-1,g=a==="/"?e:e.slice(a.length)||"/",v=dh({path:d.relativePath,caseSensitive:d.caseSensitive,end:m},g),w=d.route;if(!v&&m&&t&&!r[r.length-1].route.index&&(v=dh({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!v)return null;Object.assign(s,v.params),l.push({params:s,pathname:gi([a,v.pathname]),pathnameBase:A2(gi([a,v.pathnameBase])),route:w}),v.pathnameBase!=="/"&&(a=gi([a,v.pathnameBase]))}return l}function dh(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=T2(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let a=s[0],l=a.replace(/(.)\/+$/,"$1"),f=s.slice(1);return{params:r.reduce((m,{paramName:g,isOptional:v},w)=>{if(g==="*"){let k=f[w]||"";l=a.slice(0,a.length-k.length).replace(/(.)\/+$/,"$1")}const T=f[w];return v&&!T?m[g]=void 0:m[g]=(T||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:l,pattern:n}}function T2(n,e=!1,t=!0){Dn(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,f,d)=>(r.push({paramName:f,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function S2(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Dn(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function _i(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}var Hw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,b2=n=>Hw.test(n);function I2(n,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?Ro(n):n,a;if(t)if(b2(t))a=t;else{if(t.includes("//")){let l=t;t=t.replace(/\/\/+/g,"/"),Dn(!1,`Pathnames cannot have embedded double slashes - normalizing ${l} -> ${t}`)}t.startsWith("/")?a=O1(t.substring(1),"/"):a=O1(t,e)}else a=e;return{pathname:a,search:R2(r),hash:P2(s)}}function O1(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Wp(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function C2(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Ag(n){let e=C2(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function Rg(n,e,t,r=!1){let s;typeof n=="string"?s=Ro(n):(s={...n},at(!s.pathname||!s.pathname.includes("?"),Wp("?","pathname","search",s)),at(!s.pathname||!s.pathname.includes("#"),Wp("#","pathname","hash",s)),at(!s.search||!s.search.includes("#"),Wp("#","search","hash",s)));let a=n===""||s.pathname==="",l=a?"/":s.pathname,f;if(l==null)f=t;else{let v=e.length-1;if(!r&&l.startsWith("..")){let w=l.split("/");for(;w[0]==="..";)w.shift(),v-=1;s.pathname=w.join("/")}f=v>=0?e[v]:"/"}let d=I2(s,f),m=l&&l!=="/"&&l.endsWith("/"),g=(a||l===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(m||g)&&(d.pathname+="/"),d}var gi=n=>n.join("/").replace(/\/\/+/g,"/"),A2=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),R2=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,P2=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,j2=class{constructor(n,e,t,r=!1){this.status=n,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function N2(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function D2(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Kw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function qw(n,e){let t=n;if(typeof t!="string"||!Hw.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let r=t,s=!1;if(Kw)try{let a=new URL(window.location.href),l=t.startsWith("//")?new URL(a.protocol+t):new URL(t),f=_i(l.pathname,e);l.origin===a.origin&&f!=null?t=f+l.search+l.hash:s=!0}catch{Dn(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:s,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Gw=["POST","PUT","PATCH","DELETE"];new Set(Gw);var V2=["GET",...Gw];new Set(V2);var el=N.createContext(null);el.displayName="DataRouter";var zh=N.createContext(null);zh.displayName="DataRouterState";var M2=N.createContext(!1),Qw=N.createContext({isTransitioning:!1});Qw.displayName="ViewTransition";var L2=N.createContext(new Map);L2.displayName="Fetchers";var O2=N.createContext(null);O2.displayName="Await";var Mn=N.createContext(null);Mn.displayName="Navigation";var nu=N.createContext(null);nu.displayName="Location";var _r=N.createContext({outlet:null,matches:[],isDataRoute:!1});_r.displayName="Route";var Pg=N.createContext(null);Pg.displayName="RouteError";var Yw="REACT_ROUTER_ERROR",B2="REDIRECT",F2="ROUTE_ERROR_RESPONSE";function z2(n){if(n.startsWith(`${Yw}:${B2}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function U2(n){if(n.startsWith(`${Yw}:${F2}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new j2(e.status,e.statusText,e.data)}catch{}}function $2(n,{relative:e}={}){at(tl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=N.useContext(Mn),{hash:s,pathname:a,search:l}=iu(n,{relative:e}),f=a;return t!=="/"&&(f=a==="/"?t:gi([t,a])),r.createHref({pathname:f,search:l,hash:s})}function tl(){return N.useContext(nu)!=null}function er(){return at(tl(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(nu).location}var Xw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Jw(n){N.useContext(Mn).static||N.useLayoutEffect(n)}function ru(){let{isDataRoute:n}=N.useContext(_r);return n?nC():W2()}function W2(){at(tl(),"useNavigate() may be used only in the context of a <Router> component.");let n=N.useContext(el),{basename:e,navigator:t}=N.useContext(Mn),{matches:r}=N.useContext(_r),{pathname:s}=er(),a=JSON.stringify(Ag(r)),l=N.useRef(!1);return Jw(()=>{l.current=!0}),N.useCallback((d,m={})=>{if(Dn(l.current,Xw),!l.current)return;if(typeof d=="number"){t.go(d);return}let g=Rg(d,JSON.parse(a),s,m.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:gi([e,g.pathname])),(m.replace?t.replace:t.push)(g,m.state,m)},[e,t,a,s,n])}N.createContext(null);function Zw(){let{matches:n}=N.useContext(_r),e=n[n.length-1];return e?e.params:{}}function iu(n,{relative:e}={}){let{matches:t}=N.useContext(_r),{pathname:r}=er(),s=JSON.stringify(Ag(t));return N.useMemo(()=>Rg(n,JSON.parse(s),r,e==="path"),[n,s,r,e])}function H2(n,e){return eE(n,e)}function eE(n,e,t,r,s){var B;at(tl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=N.useContext(Mn),{matches:l}=N.useContext(_r),f=l[l.length-1],d=f?f.params:{},m=f?f.pathname:"/",g=f?f.pathnameBase:"/",v=f&&f.route;{let P=v&&v.path||"";nE(m,!v||P.endsWith("*")||P.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${P}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${P}"> to <Route path="${P==="/"?"*":`${P}/*`}">.`)}let w=er(),T;if(e){let P=typeof e=="string"?Ro(e):e;at(g==="/"||((B=P.pathname)==null?void 0:B.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${P.pathname}" was given in the \`location\` prop.`),T=P}else T=w;let k=T.pathname||"/",C=k;if(g!=="/"){let P=g.replace(/^\//,"").split("/");C="/"+k.replace(/^\//,"").split("/").slice(P.length).join("/")}let I=Uw(n,{pathname:C});Dn(v||I!=null,`No routes matched location "${T.pathname}${T.search}${T.hash}" `),Dn(I==null||I[I.length-1].route.element!==void 0||I[I.length-1].route.Component!==void 0||I[I.length-1].route.lazy!==void 0,`Matched leaf route at location "${T.pathname}${T.search}${T.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let V=Y2(I&&I.map(P=>Object.assign({},P,{params:Object.assign({},d,P.params),pathname:gi([g,a.encodeLocation?a.encodeLocation(P.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?g:gi([g,a.encodeLocation?a.encodeLocation(P.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:P.pathnameBase])})),l,t,r,s);return e&&V?N.createElement(nu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...T},navigationType:"POP"}},V):V}function K2(){let n=tC(),e=N2(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=N.createElement(N.Fragment,null,N.createElement("p",null," Hey developer "),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:a},"ErrorBoundary")," or"," ",N.createElement("code",{style:a},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),t?N.createElement("pre",{style:s},t):null,l)}var q2=N.createElement(K2,null),tE=class extends N.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=U2(n.digest);t&&(n=t)}let e=n!==void 0?N.createElement(_r.Provider,{value:this.props.routeContext},N.createElement(Pg.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?N.createElement(G2,{error:n},e):e}};tE.contextType=M2;var Hp=new WeakMap;function G2({children:n,error:e}){let{basename:t}=N.useContext(Mn);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=z2(e.digest);if(r){let s=Hp.get(e);if(s)throw s;let a=qw(r.location,t);if(Kw&&!Hp.get(e))if(a.isExternal||r.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const l=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:r.replace}));throw Hp.set(e,l),l}return N.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return n}function Q2({routeContext:n,match:e,children:t}){let r=N.useContext(el);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),N.createElement(_r.Provider,{value:n},t)}function Y2(n,e=[],t=null,r=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,l=t==null?void 0:t.errors;if(l!=null){let g=a.findIndex(v=>v.route.id&&(l==null?void 0:l[v.route.id])!==void 0);at(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,g+1))}let f=!1,d=-1;if(t)for(let g=0;g<a.length;g++){let v=a[g];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(d=g),v.route.id){let{loaderData:w,errors:T}=t,k=v.route.loader&&!w.hasOwnProperty(v.route.id)&&(!T||T[v.route.id]===void 0);if(v.route.lazy||k){f=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}let m=t&&r?(g,v)=>{var w,T;r(g,{location:t.location,params:((T=(w=t.matches)==null?void 0:w[0])==null?void 0:T.params)??{},unstable_pattern:D2(t.matches),errorInfo:v})}:void 0;return a.reduceRight((g,v,w)=>{let T,k=!1,C=null,I=null;t&&(T=l&&v.route.id?l[v.route.id]:void 0,C=v.route.errorElement||q2,f&&(d<0&&w===0?(nE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),k=!0,I=null):d===w&&(k=!0,I=v.route.hydrateFallbackElement||null)));let V=e.concat(a.slice(0,w+1)),B=()=>{let P;return T?P=C:k?P=I:v.route.Component?P=N.createElement(v.route.Component,null):v.route.element?P=v.route.element:P=g,N.createElement(Q2,{match:v,routeContext:{outlet:g,matches:V,isDataRoute:t!=null},children:P})};return t&&(v.route.ErrorBoundary||v.route.errorElement||w===0)?N.createElement(tE,{location:t.location,revalidation:t.revalidation,component:C,error:T,children:B(),routeContext:{outlet:null,matches:V,isDataRoute:!0},onError:m}):B()},null)}function jg(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function X2(n){let e=N.useContext(el);return at(e,jg(n)),e}function J2(n){let e=N.useContext(zh);return at(e,jg(n)),e}function Z2(n){let e=N.useContext(_r);return at(e,jg(n)),e}function Ng(n){let e=Z2(n),t=e.matches[e.matches.length-1];return at(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function eC(){return Ng("useRouteId")}function tC(){var r;let n=N.useContext(Pg),e=J2("useRouteError"),t=Ng("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function nC(){let{router:n}=X2("useNavigate"),e=Ng("useNavigate"),t=N.useRef(!1);return Jw(()=>{t.current=!0}),N.useCallback(async(s,a={})=>{Dn(t.current,Xw),t.current&&(typeof s=="number"?await n.navigate(s):await n.navigate(s,{fromRouteId:e,...a}))},[n,e])}var B1={};function nE(n,e,t){!e&&!B1[n]&&(B1[n]=!0,Dn(!1,t))}N.memo(rC);function rC({routes:n,future:e,state:t,onError:r}){return eE(n,void 0,t,r,e)}function iC({to:n,replace:e,state:t,relative:r}){at(tl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=N.useContext(Mn);Dn(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=N.useContext(_r),{pathname:l}=er(),f=ru(),d=Rg(n,Ag(a),l,r==="path"),m=JSON.stringify(d);return N.useEffect(()=>{f(JSON.parse(m),{replace:e,state:t,relative:r})},[f,m,r,e,t]),null}function St(n){at(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function sC({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:a=!1,unstable_useTransitions:l}){at(!tl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=n.replace(/^\/*/,"/"),d=N.useMemo(()=>({basename:f,navigator:s,static:a,unstable_useTransitions:l,future:{}}),[f,s,a,l]);typeof t=="string"&&(t=Ro(t));let{pathname:m="/",search:g="",hash:v="",state:w=null,key:T="default"}=t,k=N.useMemo(()=>{let C=_i(m,f);return C==null?null:{location:{pathname:C,search:g,hash:v,state:w,key:T},navigationType:r}},[f,m,g,v,w,T,r]);return Dn(k!=null,`<Router basename="${f}"> is not able to match the URL "${m}${g}${v}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:N.createElement(Mn.Provider,{value:d},N.createElement(nu.Provider,{children:e,value:k}))}function oC({children:n,location:e}){return H2(Im(n),e)}function Im(n,e=[]){let t=[];return N.Children.forEach(n,(r,s)=>{if(!N.isValidElement(r))return;let a=[...e,s];if(r.type===N.Fragment){t.push.apply(t,Im(r.props.children,a));return}at(r.type===St,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),at(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=Im(r.props.children,a)),t.push(l)}),t}var Qd="get",Yd="application/x-www-form-urlencoded";function Uh(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function aC(n){return Uh(n)&&n.tagName.toLowerCase()==="button"}function lC(n){return Uh(n)&&n.tagName.toLowerCase()==="form"}function cC(n){return Uh(n)&&n.tagName.toLowerCase()==="input"}function uC(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function dC(n,e){return n.button===0&&(!e||e==="_self")&&!uC(n)}var Bd=null;function hC(){if(Bd===null)try{new FormData(document.createElement("form"),0),Bd=!1}catch{Bd=!0}return Bd}var fC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Kp(n){return n!=null&&!fC.has(n)?(Dn(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Yd}"`),null):n}function pC(n,e){let t,r,s,a,l;if(lC(n)){let f=n.getAttribute("action");r=f?_i(f,e):null,t=n.getAttribute("method")||Qd,s=Kp(n.getAttribute("enctype"))||Yd,a=new FormData(n)}else if(aC(n)||cC(n)&&(n.type==="submit"||n.type==="image")){let f=n.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=n.getAttribute("formaction")||f.getAttribute("action");if(r=d?_i(d,e):null,t=n.getAttribute("formmethod")||f.getAttribute("method")||Qd,s=Kp(n.getAttribute("formenctype"))||Kp(f.getAttribute("enctype"))||Yd,a=new FormData(f,n),!hC()){let{name:m,type:g,value:v}=n;if(g==="image"){let w=m?`${m}.`:"";a.append(`${w}x`,"0"),a.append(`${w}y`,"0")}else m&&a.append(m,v)}}else{if(Uh(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Qd,r=null,s=Yd,l=n}return a&&s==="text/plain"&&(l=a,a=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:a,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Dg(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function mC(n,e,t,r){let s=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?s.pathname.endsWith("/")?s.pathname=`${s.pathname}_.${r}`:s.pathname=`${s.pathname}.${r}`:s.pathname==="/"?s.pathname=`_root.${r}`:e&&_i(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${r}`,s}async function gC(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function yC(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function vC(n,e,t){let r=await Promise.all(n.map(async s=>{let a=e.routes[s.route.id];if(a){let l=await gC(a,t);return l.links?l.links():[]}return[]}));return EC(r.flat(1).filter(yC).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function F1(n,e,t,r,s,a){let l=(d,m)=>t[m]?d.route.id!==t[m].route.id:!0,f=(d,m)=>{var g;return t[m].pathname!==d.pathname||((g=t[m].route.path)==null?void 0:g.endsWith("*"))&&t[m].params["*"]!==d.params["*"]};return a==="assets"?e.filter((d,m)=>l(d,m)||f(d,m)):a==="data"?e.filter((d,m)=>{var v;let g=r.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(l(d,m)||f(d,m))return!0;if(d.route.shouldRevalidate){let w=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((v=t[0])==null?void 0:v.params)||{},nextUrl:new URL(n,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function xC(n,e,{includeHydrateFallback:t}={}){return _C(n.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let a=[s.module];return s.clientActionModule&&(a=a.concat(s.clientActionModule)),s.clientLoaderModule&&(a=a.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(a=a.concat(s.hydrateFallbackModule)),s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function _C(n){return[...new Set(n)]}function wC(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function EC(n,e){let t=new Set;return new Set(e),n.reduce((r,s)=>{let a=JSON.stringify(wC(s));return t.has(a)||(t.add(a),r.push({key:a,link:s})),r},[])}function rE(){let n=N.useContext(el);return Dg(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function kC(){let n=N.useContext(zh);return Dg(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Vg=N.createContext(void 0);Vg.displayName="FrameworkContext";function iE(){let n=N.useContext(Vg);return Dg(n,"You must render this element inside a <HydratedRouter> element"),n}function TC(n,e){let t=N.useContext(Vg),[r,s]=N.useState(!1),[a,l]=N.useState(!1),{onFocus:f,onBlur:d,onMouseEnter:m,onMouseLeave:g,onTouchStart:v}=e,w=N.useRef(null);N.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let C=V=>{V.forEach(B=>{l(B.isIntersecting)})},I=new IntersectionObserver(C,{threshold:.5});return w.current&&I.observe(w.current),()=>{I.disconnect()}}},[n]),N.useEffect(()=>{if(r){let C=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(C)}}},[r]);let T=()=>{s(!0)},k=()=>{s(!1),l(!1)};return t?n!=="intent"?[a,w,{}]:[a,w,{onFocus:fc(f,T),onBlur:fc(d,k),onMouseEnter:fc(m,T),onMouseLeave:fc(g,k),onTouchStart:fc(v,T)}]:[!1,w,{}]}function fc(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function SC({page:n,...e}){let{router:t}=rE(),r=N.useMemo(()=>Uw(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?N.createElement(IC,{page:n,matches:r,...e}):null}function bC(n){let{manifest:e,routeModules:t}=iE(),[r,s]=N.useState([]);return N.useEffect(()=>{let a=!1;return vC(n,e,t).then(l=>{a||s(l)}),()=>{a=!0}},[n,e,t]),r}function IC({page:n,matches:e,...t}){let r=er(),{future:s,manifest:a,routeModules:l}=iE(),{basename:f}=rE(),{loaderData:d,matches:m}=kC(),g=N.useMemo(()=>F1(n,e,m,a,r,"data"),[n,e,m,a,r]),v=N.useMemo(()=>F1(n,e,m,a,r,"assets"),[n,e,m,a,r]),w=N.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let C=new Set,I=!1;if(e.forEach(B=>{var G;let P=a.routes[B.route.id];!P||!P.hasLoader||(!g.some($=>$.route.id===B.route.id)&&B.route.id in d&&((G=l[B.route.id])!=null&&G.shouldRevalidate)||P.hasClientLoader?I=!0:C.add(B.route.id))}),C.size===0)return[];let V=mC(n,f,s.unstable_trailingSlashAwareDataRequests,"data");return I&&C.size>0&&V.searchParams.set("_routes",e.filter(B=>C.has(B.route.id)).map(B=>B.route.id).join(",")),[V.pathname+V.search]},[f,s.unstable_trailingSlashAwareDataRequests,d,r,a,g,e,n,l]),T=N.useMemo(()=>xC(v,a),[v,a]),k=bC(v);return N.createElement(N.Fragment,null,w.map(C=>N.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...t})),T.map(C=>N.createElement("link",{key:C,rel:"modulepreload",href:C,...t})),k.map(({key:C,link:I})=>N.createElement("link",{key:C,nonce:t.nonce,...I})))}function CC(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var AC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{AC&&(window.__reactRouterVersion="7.12.0")}catch{}function RC({basename:n,children:e,unstable_useTransitions:t,window:r}){let s=N.useRef();s.current==null&&(s.current=c2({window:r,v5Compat:!0}));let a=s.current,[l,f]=N.useState({action:a.action,location:a.location}),d=N.useCallback(m=>{t===!1?f(m):N.startTransition(()=>f(m))},[t]);return N.useLayoutEffect(()=>a.listen(d),[a,d]),N.createElement(sC,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:a,unstable_useTransitions:t})}var sE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ue=N.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:a,replace:l,state:f,target:d,to:m,preventScrollReset:g,viewTransition:v,unstable_defaultShouldRevalidate:w,...T},k){let{basename:C,unstable_useTransitions:I}=N.useContext(Mn),V=typeof m=="string"&&sE.test(m),B=qw(m,C);m=B.to;let P=$2(m,{relative:s}),[G,$,H]=TC(r,T),A=DC(m,{replace:l,state:f,target:d,preventScrollReset:g,relative:s,viewTransition:v,unstable_defaultShouldRevalidate:w,unstable_useTransitions:I});function b(L){e&&e(L),L.defaultPrevented||A(L)}let j=N.createElement("a",{...T,...H,href:B.absoluteURL||P,onClick:B.isExternal||a?e:b,ref:CC(k,$),target:d,"data-discover":!V&&t==="render"?"true":void 0});return G&&!V?N.createElement(N.Fragment,null,j,N.createElement(SC,{page:P})):j});ue.displayName="Link";var PC=N.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:a,to:l,viewTransition:f,children:d,...m},g){let v=iu(l,{relative:m.relative}),w=er(),T=N.useContext(zh),{navigator:k,basename:C}=N.useContext(Mn),I=T!=null&&BC(v)&&f===!0,V=k.encodeLocation?k.encodeLocation(v).pathname:v.pathname,B=w.pathname,P=T&&T.navigation&&T.navigation.location?T.navigation.location.pathname:null;t||(B=B.toLowerCase(),P=P?P.toLowerCase():null,V=V.toLowerCase()),P&&C&&(P=_i(P,C)||P);const G=V!=="/"&&V.endsWith("/")?V.length-1:V.length;let $=B===V||!s&&B.startsWith(V)&&B.charAt(G)==="/",H=P!=null&&(P===V||!s&&P.startsWith(V)&&P.charAt(V.length)==="/"),A={isActive:$,isPending:H,isTransitioning:I},b=$?e:void 0,j;typeof r=="function"?j=r(A):j=[r,$?"active":null,H?"pending":null,I?"transitioning":null].filter(Boolean).join(" ");let L=typeof a=="function"?a(A):a;return N.createElement(ue,{...m,"aria-current":b,className:j,ref:g,style:L,to:l,viewTransition:f},typeof d=="function"?d(A):d)});PC.displayName="NavLink";var jC=N.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:a,method:l=Qd,action:f,onSubmit:d,relative:m,preventScrollReset:g,viewTransition:v,unstable_defaultShouldRevalidate:w,...T},k)=>{let{unstable_useTransitions:C}=N.useContext(Mn),I=LC(),V=OC(f,{relative:m}),B=l.toLowerCase()==="get"?"get":"post",P=typeof f=="string"&&sE.test(f),G=$=>{if(d&&d($),$.defaultPrevented)return;$.preventDefault();let H=$.nativeEvent.submitter,A=(H==null?void 0:H.getAttribute("formmethod"))||l,b=()=>I(H||$.currentTarget,{fetcherKey:e,method:A,navigate:t,replace:s,state:a,relative:m,preventScrollReset:g,viewTransition:v,unstable_defaultShouldRevalidate:w});C&&t!==!1?N.startTransition(()=>b()):b()};return N.createElement("form",{ref:k,method:B,action:V,onSubmit:r?d:G,...T,"data-discover":!P&&n==="render"?"true":void 0})});jC.displayName="Form";function NC(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function oE(n){let e=N.useContext(el);return at(e,NC(n)),e}function DC(n,{target:e,replace:t,state:r,preventScrollReset:s,relative:a,viewTransition:l,unstable_defaultShouldRevalidate:f,unstable_useTransitions:d}={}){let m=ru(),g=er(),v=iu(n,{relative:a});return N.useCallback(w=>{if(dC(w,e)){w.preventDefault();let T=t!==void 0?t:Mc(g)===Mc(v),k=()=>m(n,{replace:T,state:r,preventScrollReset:s,relative:a,viewTransition:l,unstable_defaultShouldRevalidate:f});d?N.startTransition(()=>k()):k()}},[g,m,v,t,r,e,n,s,a,l,f,d])}var VC=0,MC=()=>`__${String(++VC)}__`;function LC(){let{router:n}=oE("useSubmit"),{basename:e}=N.useContext(Mn),t=eC(),r=n.fetch,s=n.navigate;return N.useCallback(async(a,l={})=>{let{action:f,method:d,encType:m,formData:g,body:v}=pC(a,e);if(l.navigate===!1){let w=l.fetcherKey||MC();await r(w,t,l.action||f,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:g,body:v,formMethod:l.method||d,formEncType:l.encType||m,flushSync:l.flushSync})}else await s(l.action||f,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:g,body:v,formMethod:l.method||d,formEncType:l.encType||m,replace:l.replace,state:l.state,fromRouteId:t,flushSync:l.flushSync,viewTransition:l.viewTransition})},[r,s,e,t])}function OC(n,{relative:e}={}){let{basename:t}=N.useContext(Mn),r=N.useContext(_r);at(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),a={...iu(n||".",{relative:e})},l=er();if(n==null){a.search=l.search;let f=new URLSearchParams(a.search),d=f.getAll("index");if(d.some(g=>g==="")){f.delete("index"),d.filter(v=>v).forEach(v=>f.append("index",v));let g=f.toString();a.search=g?`?${g}`:""}}return(!n||n===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:gi([t,a.pathname])),Mc(a)}function BC(n,{relative:e}={}){let t=N.useContext(Qw);at(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=oE("useViewTransitionState"),s=iu(n,{relative:e});if(!t.isTransitioning)return!1;let a=_i(t.currentLocation.pathname,r)||t.currentLocation.pathname,l=_i(t.nextLocation.pathname,r)||t.nextLocation.pathname;return dh(s.pathname,l)!=null||dh(s.pathname,a)!=null}const FC=()=>{};var z1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},zC=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=n[t++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=n[t++],l=n[t++],f=n[t++],d=((s&7)<<18|(a&63)<<12|(l&63)<<6|f&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const a=n[t++],l=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|l&63)}}return e.join("")},lE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const a=n[s],l=s+1<n.length,f=l?n[s+1]:0,d=s+2<n.length,m=d?n[s+2]:0,g=a>>2,v=(a&3)<<4|f>>4;let w=(f&15)<<2|m>>6,T=m&63;d||(T=64,l||(w=64)),r.push(t[g],t[v],t[w],t[T])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(aE(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):zC(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const a=t[n.charAt(s++)],f=s<n.length?t[n.charAt(s)]:0;++s;const m=s<n.length?t[n.charAt(s)]:64;++s;const v=s<n.length?t[n.charAt(s)]:64;if(++s,a==null||f==null||m==null||v==null)throw new UC;const w=a<<2|f>>4;if(r.push(w),m!==64){const T=f<<4&240|m>>2;if(r.push(T),v!==64){const k=m<<6&192|v;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class UC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $C=function(n){const e=aE(n);return lE.encodeByteArray(e,!0)},hh=function(n){return $C(n).replace(/\./g,"")},cE=function(n){try{return lE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC=()=>WC().__FIREBASE_DEFAULTS__,KC=()=>{if(typeof process>"u"||typeof z1>"u")return;const n=z1.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},qC=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&cE(n[1]);return e&&JSON.parse(e)},$h=()=>{try{return FC()||HC()||KC()||qC()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},uE=n=>{var e,t;return(t=(e=$h())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},GC=n=>{const e=uE(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},dE=()=>{var n;return(n=$h())==null?void 0:n.config},hE=n=>{var e;return(e=$h())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function fE(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YC(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[hh(JSON.stringify(t)),hh(JSON.stringify(l)),""].join(".")}const Sc={};function XC(){const n={prod:[],emulator:[]};for(const e of Object.keys(Sc))Sc[e]?n.emulator.push(e):n.prod.push(e);return n}function JC(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let U1=!1;function pE(n,e){if(typeof window>"u"||typeof document>"u"||!nl(window.location.host)||Sc[n]===e||Sc[n]||U1)return;Sc[n]=e;function t(w){return`__firebase__banner__${w}`}const r="__firebase__banner",a=XC().prod.length>0;function l(){const w=document.getElementById(r);w&&w.remove()}function f(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function d(w,T){w.setAttribute("width","24"),w.setAttribute("id",T),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function m(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{U1=!0,l()},w}function g(w,T){w.setAttribute("id",T),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function v(){const w=JC(r),T=t("text"),k=document.getElementById(T)||document.createElement("span"),C=t("learnmore"),I=document.getElementById(C)||document.createElement("a"),V=t("preprendIcon"),B=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const P=w.element;f(P),g(I,C);const G=m();d(B,V),P.append(B,k,I,G),document.body.appendChild(P)}a?(k.innerText="Preview backend disconnected.",B.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(B.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ZC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ln())}function eA(){var e;const n=(e=$h())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function tA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function nA(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function rA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function iA(){const n=ln();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function sA(){return!eA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function oA(){try{return typeof indexedDB=="object"}catch{return!1}}function aA(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var a;e(((a=s.error)==null?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA="FirebaseError";class Ii extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=lA,Object.setPrototypeOf(this,Ii.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,su.prototype.create)}}class su{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],l=a?cA(a,r):"Error",f=`${this.serviceName}: ${l} (${s}).`;return new Ii(s,f,r)}}function cA(n,e){return n.replace(uA,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const uA=/\{\$([^}]+)}/g;function dA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function _s(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const a=n[s],l=e[s];if($1(a)&&$1(l)){if(!_s(a,l))return!1}else if(a!==l)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function $1(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ou(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function yc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,a]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function vc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function hA(n,e){const t=new fA(n,e);return t.subscribe.bind(t)}class fA{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");pA(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=qp),s.error===void 0&&(s.error=qp),s.complete===void 0&&(s.complete=qp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pA(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function qp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(n){return n&&n._delegate?n._delegate:n}class Eo{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new QC;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(yA(e))try{this.getOrInitializeService({instanceIdentifier:fo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=fo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=fo){return this.instances.has(e)}getOptions(e=fo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,l]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(a);r===f&&l.resolve(s)}return s}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const a=this.instances.get(r);return a&&e(a,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:gA(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=fo){return this.component?this.component.multipleInstances?e:fo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function gA(n){return n===fo?void 0:n}function yA(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new mA(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Le||(Le={}));const xA={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},_A=Le.INFO,wA={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},EA=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=wA[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Mg{constructor(e){this.name=e,this._logLevel=_A,this._logHandler=EA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?xA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const kA=(n,e)=>e.some(t=>n instanceof t);let W1,H1;function TA(){return W1||(W1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function SA(){return H1||(H1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const mE=new WeakMap,Cm=new WeakMap,gE=new WeakMap,Gp=new WeakMap,Lg=new WeakMap;function bA(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",a),n.removeEventListener("error",l)},a=()=>{t(ps(n.result)),s()},l=()=>{r(n.error),s()};n.addEventListener("success",a),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&mE.set(t,n)}).catch(()=>{}),Lg.set(e,n),e}function IA(n){if(Cm.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",l),n.removeEventListener("abort",l)},a=()=>{t(),s()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",a),n.addEventListener("error",l),n.addEventListener("abort",l)});Cm.set(n,e)}let Am={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Cm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||gE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ps(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function CA(n){Am=n(Am)}function AA(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Qp(this),e,...t);return gE.set(r,e.sort?e.sort():[e]),ps(r)}:SA().includes(n)?function(...e){return n.apply(Qp(this),e),ps(mE.get(this))}:function(...e){return ps(n.apply(Qp(this),e))}}function RA(n){return typeof n=="function"?AA(n):(n instanceof IDBTransaction&&IA(n),kA(n,TA())?new Proxy(n,Am):n)}function ps(n){if(n instanceof IDBRequest)return bA(n);if(Gp.has(n))return Gp.get(n);const e=RA(n);return e!==n&&(Gp.set(n,e),Lg.set(e,n)),e}const Qp=n=>Lg.get(n);function PA(n,e,{blocked:t,upgrade:r,blocking:s,terminated:a}={}){const l=indexedDB.open(n,e),f=ps(l);return r&&l.addEventListener("upgradeneeded",d=>{r(ps(l.result),d.oldVersion,d.newVersion,ps(l.transaction),d)}),t&&l.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),f.then(d=>{a&&d.addEventListener("close",()=>a()),s&&d.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),f}const jA=["get","getKey","getAll","getAllKeys","count"],NA=["put","add","delete","clear"],Yp=new Map;function K1(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Yp.get(e))return Yp.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=NA.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||jA.includes(t)))return;const a=async function(l,...f){const d=this.transaction(l,s?"readwrite":"readonly");let m=d.store;return r&&(m=m.index(f.shift())),(await Promise.all([m[t](...f),s&&d.done]))[0]};return Yp.set(e,a),a}CA(n=>({...n,get:(e,t,r)=>K1(e,t)||n.get(e,t,r),has:(e,t)=>!!K1(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(VA(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function VA(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Rm="@firebase/app",q1="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi=new Mg("@firebase/app"),MA="@firebase/app-compat",LA="@firebase/analytics-compat",OA="@firebase/analytics",BA="@firebase/app-check-compat",FA="@firebase/app-check",zA="@firebase/auth",UA="@firebase/auth-compat",$A="@firebase/database",WA="@firebase/data-connect",HA="@firebase/database-compat",KA="@firebase/functions",qA="@firebase/functions-compat",GA="@firebase/installations",QA="@firebase/installations-compat",YA="@firebase/messaging",XA="@firebase/messaging-compat",JA="@firebase/performance",ZA="@firebase/performance-compat",eR="@firebase/remote-config",tR="@firebase/remote-config-compat",nR="@firebase/storage",rR="@firebase/storage-compat",iR="@firebase/firestore",sR="@firebase/ai",oR="@firebase/firestore-compat",aR="firebase",lR="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pm="[DEFAULT]",cR={[Rm]:"fire-core",[MA]:"fire-core-compat",[OA]:"fire-analytics",[LA]:"fire-analytics-compat",[FA]:"fire-app-check",[BA]:"fire-app-check-compat",[zA]:"fire-auth",[UA]:"fire-auth-compat",[$A]:"fire-rtdb",[WA]:"fire-data-connect",[HA]:"fire-rtdb-compat",[KA]:"fire-fn",[qA]:"fire-fn-compat",[GA]:"fire-iid",[QA]:"fire-iid-compat",[YA]:"fire-fcm",[XA]:"fire-fcm-compat",[JA]:"fire-perf",[ZA]:"fire-perf-compat",[eR]:"fire-rc",[tR]:"fire-rc-compat",[nR]:"fire-gcs",[rR]:"fire-gcs-compat",[iR]:"fire-fst",[oR]:"fire-fst-compat",[sR]:"fire-vertex","fire-js":"fire-js",[aR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fh=new Map,uR=new Map,jm=new Map;function G1(n,e){try{n.container.addComponent(e)}catch(t){wi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function za(n){const e=n.name;if(jm.has(e))return wi.debug(`There were multiple attempts to register component ${e}.`),!1;jm.set(e,n);for(const t of fh.values())G1(t,n);for(const t of uR.values())G1(t,n);return!0}function Og(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function jn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ms=new su("app","Firebase",dR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Eo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ms.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rl=lR;function yE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:Pm,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw ms.create("bad-app-name",{appName:String(s)});if(t||(t=dE()),!t)throw ms.create("no-options");const a=fh.get(s);if(a){if(_s(t,a.options)&&_s(r,a.config))return a;throw ms.create("duplicate-app",{appName:s})}const l=new vA(s);for(const d of jm.values())l.addComponent(d);const f=new hR(t,r,l);return fh.set(s,f),f}function vE(n=Pm){const e=fh.get(n);if(!e&&n===Pm&&dE())return yE();if(!e)throw ms.create("no-app",{appName:n});return e}function gs(n,e,t){let r=cR[n]??n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const l=[`Unable to register library "${r}" with version "${e}":`];s&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wi.warn(l.join(" "));return}za(new Eo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR="firebase-heartbeat-database",pR=1,Lc="firebase-heartbeat-store";let Xp=null;function xE(){return Xp||(Xp=PA(fR,pR,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Lc)}catch(t){console.warn(t)}}}}).catch(n=>{throw ms.create("idb-open",{originalErrorMessage:n.message})})),Xp}async function mR(n){try{const t=(await xE()).transaction(Lc),r=await t.objectStore(Lc).get(_E(n));return await t.done,r}catch(e){if(e instanceof Ii)wi.warn(e.message);else{const t=ms.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});wi.warn(t.message)}}}async function Q1(n,e){try{const r=(await xE()).transaction(Lc,"readwrite");await r.objectStore(Lc).put(e,_E(n)),await r.done}catch(t){if(t instanceof Ii)wi.warn(t.message);else{const r=ms.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});wi.warn(r.message)}}}function _E(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR=1024,yR=30;class vR{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new _R(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Y1();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>yR){const l=wR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){wi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Y1(),{heartbeatsToSend:r,unsentEntries:s}=xR(this._heartbeatsCache.heartbeats),a=hh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return wi.warn(t),""}}}function Y1(){return new Date().toISOString().substring(0,10)}function xR(n,e=gR){const t=[];let r=n.slice();for(const s of n){const a=t.find(l=>l.agent===s.agent);if(a){if(a.dates.push(s.date),X1(t)>e){a.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),X1(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class _R{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return oA()?aA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await mR(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Q1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Q1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function X1(n){return hh(JSON.stringify({version:2,heartbeats:n})).length}function wR(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ER(n){za(new Eo("platform-logger",e=>new DA(e),"PRIVATE")),za(new Eo("heartbeat",e=>new vR(e),"PRIVATE")),gs(Rm,q1,n),gs(Rm,q1,"esm2020"),gs("fire-js","")}ER("");function wE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const kR=wE,EE=new su("auth","Firebase",wE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ph=new Mg("@firebase/auth");function TR(n,...e){ph.logLevel<=Le.WARN&&ph.warn(`Auth (${rl}): ${n}`,...e)}function Xd(n,...e){ph.logLevel<=Le.ERROR&&ph.error(`Auth (${rl}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zn(n,...e){throw Fg(n,...e)}function pr(n,...e){return Fg(n,...e)}function Bg(n,e,t){const r={...kR(),[e]:t};return new su("auth","Firebase",r).create(e,{appName:n.name})}function yi(n){return Bg(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function SR(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Zn(n,"argument-error"),Bg(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Fg(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return EE.create(n,...e)}function ke(n,e,...t){if(!n)throw Fg(e,...t)}function pi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Xd(e),new Error(e)}function Ei(n,e){n||pi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nm(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function bR(){return J1()==="http:"||J1()==="https:"}function J1(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(bR()||nA()||"connection"in navigator)?navigator.onLine:!0}function CR(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ei(t>e,"Short delay should be less than long delay!"),this.isMobile=ZC()||rA()}get(){return IR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zg(n,e){Ei(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;pi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;pi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;pi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],PR=new au(3e4,6e4);function js(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Ci(n,e,t,r,s={}){return TE(n,s,async()=>{let a={},l={};r&&(e==="GET"?l=r:a={body:JSON.stringify(r)});const f=ou({key:n.config.apiKey,...l}).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const m={method:e,headers:d,...a};return tA()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&nl(n.emulatorConfig.host)&&(m.credentials="include"),kE.fetch()(await SE(n,n.config.apiHost,t,f),m)})}async function TE(n,e,t){n._canInitEmulator=!1;const r={...AR,...e};try{const s=new NR(n),a=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw Fd(n,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const f=a.ok?l.errorMessage:l.error.message,[d,m]=f.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Fd(n,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw Fd(n,"email-already-in-use",l);if(d==="USER_DISABLED")throw Fd(n,"user-disabled",l);const g=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw Bg(n,g,m);Zn(n,g)}}catch(s){if(s instanceof Ii)throw s;Zn(n,"network-request-failed",{message:String(s)})}}async function lu(n,e,t,r,s={}){const a=await Ci(n,e,t,r,s);return"mfaPendingCredential"in a&&Zn(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function SE(n,e,t,r){const s=`${e}${t}?${r}`,a=n,l=a.config.emulator?zg(n.config,s):`${n.config.apiScheme}://${s}`;return RR.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}function jR(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class NR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(pr(this.auth,"network-request-failed")),PR.get())})}}function Fd(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=pr(n,e,r);return s.customData._tokenResponse=t,s}function Z1(n){return n!==void 0&&n.enterprise!==void 0}class DR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return jR(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function VR(n,e){return Ci(n,"GET","/v2/recaptchaConfig",js(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MR(n,e){return Ci(n,"POST","/v1/accounts:delete",e)}async function mh(n,e){return Ci(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function LR(n,e=!1){const t=Mt(n),r=await t.getIdToken(e),s=Ug(r);ke(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,l=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:bc(Jp(s.auth_time)),issuedAtTime:bc(Jp(s.iat)),expirationTime:bc(Jp(s.exp)),signInProvider:l||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Jp(n){return Number(n)*1e3}function Ug(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Xd("JWT malformed, contained fewer than 3 sections"),null;try{const s=cE(t);return s?JSON.parse(s):(Xd("Failed to decode base64 JWT payload"),null)}catch(s){return Xd("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function ex(n){const e=Ug(n);return ke(e,"internal-error"),ke(typeof e.exp<"u","internal-error"),ke(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ua(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Ii&&OR(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function OR({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=bc(this.lastLoginAt),this.creationTime=bc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gh(n){var v;const e=n.auth,t=await n.getIdToken(),r=await Ua(n,mh(e,{idToken:t}));ke(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const a=(v=s.providerUserInfo)!=null&&v.length?bE(s.providerUserInfo):[],l=zR(n.providerData,a),f=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!(l!=null&&l.length),m=f?d:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Dm(s.createdAt,s.lastLoginAt),isAnonymous:m};Object.assign(n,g)}async function FR(n){const e=Mt(n);await gh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function zR(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function bE(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UR(n,e){const t=await TE(n,{},async()=>{const r=ou({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=n.config,l=await SE(n,s,"/v1/token",`key=${a}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:f,body:r};return n.emulatorConfig&&nl(n.emulatorConfig.host)&&(d.credentials="include"),kE.fetch()(l,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function $R(n,e){return Ci(n,"POST","/v2/accounts:revokeToken",js(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ke(e.idToken,"internal-error"),ke(typeof e.idToken<"u","internal-error"),ke(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ex(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ke(e.length!==0,"internal-error");const t=ex(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ke(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:a}=await UR(e,t);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:a}=t,l=new Na;return r&&(ke(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),s&&(ke(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),a&&(ke(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Na,this.toJSON())}_performRefresh(){return pi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function os(n,e){ke(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class fr{constructor({uid:e,auth:t,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new BR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Dm(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Ua(this,this.stsTokenManager.getToken(this.auth,e));return ke(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return LR(this,e)}reload(){return FR(this)}_assign(e){this!==e&&(ke(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new fr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await gh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jn(this.auth.app))return Promise.reject(yi(this.auth));const e=await this.getIdToken();return await Ua(this,MR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,s=t.email??void 0,a=t.phoneNumber??void 0,l=t.photoURL??void 0,f=t.tenantId??void 0,d=t._redirectEventId??void 0,m=t.createdAt??void 0,g=t.lastLoginAt??void 0,{uid:v,emailVerified:w,isAnonymous:T,providerData:k,stsTokenManager:C}=t;ke(v&&C,e,"internal-error");const I=Na.fromJSON(this.name,C);ke(typeof v=="string",e,"internal-error"),os(r,e.name),os(s,e.name),ke(typeof w=="boolean",e,"internal-error"),ke(typeof T=="boolean",e,"internal-error"),os(a,e.name),os(l,e.name),os(f,e.name),os(d,e.name),os(m,e.name),os(g,e.name);const V=new fr({uid:v,auth:e,email:s,emailVerified:w,displayName:r,isAnonymous:T,photoURL:l,phoneNumber:a,tenantId:f,stsTokenManager:I,createdAt:m,lastLoginAt:g});return k&&Array.isArray(k)&&(V.providerData=k.map(B=>({...B}))),d&&(V._redirectEventId=d),V}static async _fromIdTokenResponse(e,t,r=!1){const s=new Na;s.updateFromServerResponse(t);const a=new fr({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await gh(a),a}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];ke(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?bE(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),f=new Na;f.updateFromIdToken(r);const d=new fr({uid:s.localId,auth:e,stsTokenManager:f,isAnonymous:l}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Dm(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(d,m),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx=new Map;function mi(n){Ei(n instanceof Function,"Expected a class definition");let e=tx.get(n);return e?(Ei(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,tx.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}IE.type="NONE";const nx=IE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jd(n,e,t){return`firebase:${n}:${e}:${t}`}class Da{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=Jd(this.userKey,s.apiKey,a),this.fullPersistenceKey=Jd("persistence",s.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await mh(this.auth,{idToken:e}).catch(()=>{});return t?fr._fromGetAccountInfoResponse(this.auth,t,e):null}return fr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Da(mi(nx),e,r);const s=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=s[0]||mi(nx);const l=Jd(r,e.config.apiKey,e.name);let f=null;for(const m of t)try{const g=await m._get(l);if(g){let v;if(typeof g=="string"){const w=await mh(e,{idToken:g}).catch(()=>{});if(!w)break;v=await fr._fromGetAccountInfoResponse(e,w,g)}else v=fr._fromJSON(e,g);m!==a&&(f=v),a=m;break}}catch{}const d=s.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!d.length?new Da(a,e,r):(a=d[0],f&&await a._set(l,f.toJSON()),await Promise.all(t.map(async m=>{if(m!==a)try{await m._remove(l)}catch{}})),new Da(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rx(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(PE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(CE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(NE(e))return"Blackberry";if(DE(e))return"Webos";if(AE(e))return"Safari";if((e.includes("chrome/")||RE(e))&&!e.includes("edge/"))return"Chrome";if(jE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function CE(n=ln()){return/firefox\//i.test(n)}function AE(n=ln()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function RE(n=ln()){return/crios\//i.test(n)}function PE(n=ln()){return/iemobile/i.test(n)}function jE(n=ln()){return/android/i.test(n)}function NE(n=ln()){return/blackberry/i.test(n)}function DE(n=ln()){return/webos/i.test(n)}function $g(n=ln()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function WR(n=ln()){var e;return $g(n)&&!!((e=window.navigator)!=null&&e.standalone)}function HR(){return iA()&&document.documentMode===10}function VE(n=ln()){return $g(n)||jE(n)||DE(n)||NE(n)||/windows phone/i.test(n)||PE(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ME(n,e=[]){let t;switch(n){case"Browser":t=rx(ln());break;case"Worker":t=`${rx(ln())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${rl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((l,f)=>{try{const d=e(a);l(d)}catch(d){f(d)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qR(n,e={}){return Ci(n,"GET","/v2/passwordPolicy",js(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR=6;class QR{constructor(e){var r;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??GR,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ix(this),this.idTokenSubscription=new ix(this),this.beforeStateQueue=new KR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=EE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=mi(t)),this._initializationPromise=this.queue(async()=>{var r,s,a;if(!this._deleted&&(this.persistenceManager=await Da.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await mh(this,{idToken:e}),r=await fr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(jn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(a=this.redirectUser)==null?void 0:a._redirectEventId,f=r==null?void 0:r._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===f)&&(d!=null&&d.user)&&(r=d.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ke(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await gh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=CR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(jn(this.app))return Promise.reject(yi(this));const t=e?Mt(e):null;return t&&ke(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ke(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return jn(this.app)?Promise.reject(yi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return jn(this.app)?Promise.reject(yi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(mi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await qR(this),t=new QR(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new su("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await $R(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&mi(e)||this._popupRedirectResolver;ke(t,this,"argument-error"),this.redirectPersistenceManager=await Da.create(this,[mi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let l=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(ke(f,this,"internal-error"),f.then(()=>{l||a(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,r,s);return()=>{l=!0,d()}}else{const d=e.addObserver(t);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ME(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(jn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&TR(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ns(n){return Mt(n)}class ix{constructor(e){this.auth=e,this.observer=null,this.addObserver=hA(t=>this.observer=t)}get next(){return ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function XR(n){Wh=n}function LE(n){return Wh.loadJS(n)}function JR(){return Wh.recaptchaEnterpriseScript}function ZR(){return Wh.gapiScript}function eP(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class tP{constructor(){this.enterprise=new nP}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class nP{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const rP="recaptcha-enterprise",OE="NO_RECAPTCHA";class iP{constructor(e){this.type=rP,this.auth=Ns(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,f)=>{VR(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const m=new DR(d);return a.tenantId==null?a._agentRecaptchaConfig=m:a._tenantRecaptchaConfigs[a.tenantId]=m,l(m.siteKey)}}).catch(d=>{f(d)})})}function s(a,l,f){const d=window.grecaptcha;Z1(d)?d.enterprise.ready(()=>{d.enterprise.execute(a,{action:e}).then(m=>{l(m)}).catch(()=>{l(OE)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new tP().execute("siteKey",{action:"verify"}):new Promise((a,l)=>{r(this.auth).then(f=>{if(!t&&Z1(window.grecaptcha))s(f,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=JR();d.length!==0&&(d+=f),LE(d).then(()=>{s(f,a,l)}).catch(m=>{l(m)})}}).catch(f=>{l(f)})})}}async function sx(n,e,t,r=!1,s=!1){const a=new iP(n);let l;if(s)l=OE;else try{l=await a.verify(t)}catch{l=await a.verify(t,!0)}const f={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const d=f.phoneEnrollmentInfo.phoneNumber,m=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:m,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const d=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return r?Object.assign(f,{captchaResp:l}):Object.assign(f,{captchaResponse:l}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function Vm(n,e,t,r,s){var a;if((a=n._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await sx(n,e,t,t==="getOobCode");return r(n,l)}else return r(n,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await sx(n,e,t,t==="getOobCode");return r(n,f)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sP(n,e){const t=Og(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),a=t.getOptions();if(_s(a,e??{}))return s;Zn(s,"already-initialized")}return t.initialize({options:e})}function oP(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(mi);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function aP(n,e,t){const r=Ns(n);ke(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=BE(e),{host:l,port:f}=lP(e),d=f===null?"":`:${f}`,m={url:`${a}//${l}${d}/`},g=Object.freeze({host:l,port:f,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ke(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ke(_s(m,r.config.emulator)&&_s(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=m,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,nl(l)?(fE(`${a}//${l}${d}`),pE("Auth",!0)):cP()}function BE(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function lP(n){const e=BE(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:ox(r.substr(a.length+1))}}else{const[a,l]=r.split(":");return{host:a,port:ox(l)}}}function ox(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function cP(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return pi("not implemented")}_getIdTokenResponse(e){return pi("not implemented")}_linkToIdToken(e,t){return pi("not implemented")}_getReauthenticationResolver(e){return pi("not implemented")}}async function uP(n,e){return Ci(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dP(n,e){return lu(n,"POST","/v1/accounts:signInWithPassword",js(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hP(n,e){return lu(n,"POST","/v1/accounts:signInWithEmailLink",js(n,e))}async function fP(n,e){return lu(n,"POST","/v1/accounts:signInWithEmailLink",js(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc extends Wg{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Oc(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Oc(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vm(e,t,"signInWithPassword",dP);case"emailLink":return hP(e,{email:this._email,oobCode:this._password});default:Zn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vm(e,r,"signUpPassword",uP);case"emailLink":return fP(e,{idToken:t,email:this._email,oobCode:this._password});default:Zn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Va(n,e){return lu(n,"POST","/v1/accounts:signInWithIdp",js(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pP="http://localhost";class ko extends Wg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ko(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Zn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...a}=t;if(!r||!s)return null;const l=new ko(r,s);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return Va(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Va(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Va(e,t)}buildRequest(){const e={requestUri:pP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ou(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mP(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function gP(n){const e=yc(vc(n)).link,t=e?yc(vc(e)).deep_link_id:null,r=yc(vc(n)).deep_link_id;return(r?yc(vc(r)).link:null)||r||t||e||n}class Hg{constructor(e){const t=yc(vc(e)),r=t.apiKey??null,s=t.oobCode??null,a=mP(t.mode??null);ke(r&&s&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=gP(e);try{return new Hg(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(){this.providerId=il.PROVIDER_ID}static credential(e,t){return Oc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Hg.parseLink(t);return ke(r,"argument-error"),Oc._fromEmailAndCode(e,r.code,r.tenantId)}}il.PROVIDER_ID="password";il.EMAIL_PASSWORD_SIGN_IN_METHOD="password";il.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu extends Kg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends cu{constructor(){super("facebook.com")}static credential(e){return ko._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cs.credential(e.oauthAccessToken)}catch{return null}}}cs.FACEBOOK_SIGN_IN_METHOD="facebook.com";cs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi extends cu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ko._fromParams({providerId:fi.PROVIDER_ID,signInMethod:fi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return fi.credentialFromTaggedObject(e)}static credentialFromError(e){return fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return fi.credential(t,r)}catch{return null}}}fi.GOOGLE_SIGN_IN_METHOD="google.com";fi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us extends cu{constructor(){super("github.com")}static credential(e){return ko._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return us.credential(e.oauthAccessToken)}catch{return null}}}us.GITHUB_SIGN_IN_METHOD="github.com";us.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds extends cu{constructor(){super("twitter.com")}static credential(e,t){return ko._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ds.credentialFromTaggedObject(e)}static credentialFromError(e){return ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ds.credential(t,r)}catch{return null}}}ds.TWITTER_SIGN_IN_METHOD="twitter.com";ds.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yP(n,e){return lu(n,"POST","/v1/accounts:signUp",js(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const a=await fr._fromIdTokenResponse(e,r,s),l=ax(r);return new To({user:a,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=ax(r);return new To({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function ax(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh extends Ii{constructor(e,t,r,s){super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,yh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new yh(e,t,r,s)}}function FE(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?yh._fromErrorAndOperation(n,a,e,r):a})}async function vP(n,e,t=!1){const r=await Ua(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return To._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xP(n,e,t=!1){const{auth:r}=n;if(jn(r.app))return Promise.reject(yi(r));const s="reauthenticate";try{const a=await Ua(n,FE(r,s,e,n),t);ke(a.idToken,r,"internal-error");const l=Ug(a.idToken);ke(l,r,"internal-error");const{sub:f}=l;return ke(n.uid===f,r,"user-mismatch"),To._forOperation(n,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Zn(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zE(n,e,t=!1){if(jn(n.app))return Promise.reject(yi(n));const r="signIn",s=await FE(n,r,e),a=await To._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(a.user),a}async function _P(n,e){return zE(Ns(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UE(n){const e=Ns(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function wP(n,e,t){if(jn(n.app))return Promise.reject(yi(n));const r=Ns(n),l=await Vm(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",yP).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&UE(n),d}),f=await To._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(f.user),f}function EP(n,e,t){return jn(n.app)?Promise.reject(yi(n)):_P(Mt(n),il.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&UE(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kP(n,e){return Ci(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TP(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Mt(n),a={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},l=await Ua(r,kP(r.auth,a));r.displayName=l.displayName||null,r.photoURL=l.photoUrl||null;const f=r.providerData.find(({providerId:d})=>d==="password");f&&(f.displayName=r.displayName,f.photoURL=r.photoURL),await r._updateTokensIfNecessary(l)}function SP(n,e,t,r){return Mt(n).onIdTokenChanged(e,t,r)}function bP(n,e,t){return Mt(n).beforeAuthStateChanged(e,t)}function IP(n,e,t,r){return Mt(n).onAuthStateChanged(e,t,r)}function CP(n){return Mt(n).signOut()}const vh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(vh,"1"),this.storage.removeItem(vh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AP=1e3,RP=10;class WE extends $E{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=VE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,f,d)=>{this.notifyListeners(l,d)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},a=this.storage.getItem(r);HR()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,RP):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},AP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}WE.type="LOCAL";const PP=WE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE extends $E{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}HE.type="SESSION";const KE=HE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jP(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new Hh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:a}=t.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const f=Array.from(l).map(async m=>m(t.origin,a)),d=await jP(f);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Hh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qg(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,l;return new Promise((f,d)=>{const m=qg("",20);s.port1.start();const g=setTimeout(()=>{d(new Error("unsupported_event"))},r);l={messageChannel:s,onMessage(v){const w=v;if(w.data.eventId===m)switch(w.data.status){case"ack":clearTimeout(g),a=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),f(w.data.response);break;default:clearTimeout(g),clearTimeout(a),d(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(){return window}function DP(n){Fr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qE(){return typeof Fr().WorkerGlobalScope<"u"&&typeof Fr().importScripts=="function"}async function VP(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function MP(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function LP(){return qE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GE="firebaseLocalStorageDb",OP=1,xh="firebaseLocalStorage",QE="fbase_key";class uu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Kh(n,e){return n.transaction([xh],e?"readwrite":"readonly").objectStore(xh)}function BP(){const n=indexedDB.deleteDatabase(GE);return new uu(n).toPromise()}function Mm(){const n=indexedDB.open(GE,OP);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(xh,{keyPath:QE})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(xh)?e(r):(r.close(),await BP(),e(await Mm()))})})}async function lx(n,e,t){const r=Kh(n,!0).put({[QE]:e,value:t});return new uu(r).toPromise()}async function FP(n,e){const t=Kh(n,!1).get(e),r=await new uu(t).toPromise();return r===void 0?null:r.value}function cx(n,e){const t=Kh(n,!0).delete(e);return new uu(t).toPromise()}const zP=800,UP=3;class YE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Mm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>UP)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return qE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Hh._getInstance(LP()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await VP(),!this.activeServiceWorker)return;this.sender=new NP(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||MP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Mm();return await lx(e,vh,"1"),await cx(e,vh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>lx(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>FP(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>cx(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=Kh(s,!1).getAll();return new uu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),zP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}YE.type="LOCAL";const $P=YE;new au(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XE(n,e){return e?mi(e):(ke(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg extends Wg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Va(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Va(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Va(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function WP(n){return zE(n.auth,new Gg(n),n.bypassAuthState)}function HP(n){const{auth:e,user:t}=n;return ke(t,e,"internal-error"),xP(t,new Gg(n),n.bypassAuthState)}async function KP(n){const{auth:e,user:t}=n;return ke(t,e,"internal-error"),vP(t,new Gg(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(e,t,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:a,error:l,type:f}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(d))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return WP;case"linkViaPopup":case"linkViaRedirect":return KP;case"reauthViaPopup":case"reauthViaRedirect":return HP;default:Zn(this.auth,"internal-error")}}resolve(e){Ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qP=new au(2e3,1e4);async function GP(n,e,t){if(jn(n.app))return Promise.reject(pr(n,"operation-not-supported-in-this-environment"));const r=Ns(n);SR(n,e,Kg);const s=XE(r,t);return new mo(r,"signInViaPopup",e,s).executeNotNull()}class mo extends JE{constructor(e,t,r,s,a){super(e,t,s,a),this.provider=r,this.authWindow=null,this.pollId=null,mo.currentPopupAction&&mo.currentPopupAction.cancel(),mo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ke(e,this.auth,"internal-error"),e}async onExecution(){Ei(this.filter.length===1,"Popup operations only handle one event");const e=qg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(pr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(pr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,mo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if((r=(t=this.authWindow)==null?void 0:t.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,qP.get())};e()}}mo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP="pendingRedirect",Zd=new Map;class YP extends JE{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Zd.get(this.auth._key());if(!e){try{const r=await XP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Zd.set(this.auth._key(),e)}return this.bypassAuthState||Zd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function XP(n,e){const t=ej(e),r=ZP(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function JP(n,e){Zd.set(n._key(),e)}function ZP(n){return mi(n._redirectPersistence)}function ej(n){return Jd(QP,n.config.apiKey,n.name)}async function tj(n,e,t=!1){if(jn(n.app))return Promise.reject(yi(n));const r=Ns(n),s=XE(r,e),l=await new YP(r,s,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nj=600*1e3;class rj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ij(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!ZE(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";t.onError(pr(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=nj&&this.cachedEventUids.clear(),this.cachedEventUids.has(ux(e))}saveEventToCache(e){this.cachedEventUids.add(ux(e)),this.lastProcessedEventTime=Date.now()}}function ux(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function ZE({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function ij(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ZE(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sj(n,e={}){return Ci(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,aj=/^https?/;async function lj(n){if(n.config.emulator)return;const{authorizedDomains:e}=await sj(n);for(const t of e)try{if(cj(t))return}catch{}Zn(n,"unauthorized-domain")}function cj(n){const e=Nm(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!aj.test(t))return!1;if(oj.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uj=new au(3e4,6e4);function dx(){const n=Fr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function dj(n){return new Promise((e,t)=>{var s,a,l;function r(){dx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{dx(),t(pr(n,"network-request-failed"))},timeout:uj.get()})}if((a=(s=Fr().gapi)==null?void 0:s.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((l=Fr().gapi)!=null&&l.load)r();else{const f=eP("iframefcb");return Fr()[f]=()=>{gapi.load?r():t(pr(n,"network-request-failed"))},LE(`${ZR()}?onload=${f}`).catch(d=>t(d))}}).catch(e=>{throw eh=null,e})}let eh=null;function hj(n){return eh=eh||dj(n),eh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fj=new au(5e3,15e3),pj="__/auth/iframe",mj="emulator/auth/iframe",gj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vj(n){const e=n.config;ke(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?zg(e,mj):`https://${n.config.authDomain}/${pj}`,r={apiKey:e.apiKey,appName:n.name,v:rl},s=yj.get(n.config.apiHost);s&&(r.eid=s);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${ou(r).slice(1)}`}async function xj(n){const e=await hj(n),t=Fr().gapi;return ke(t,n,"internal-error"),e.open({where:document.body,url:vj(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gj,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const l=pr(n,"network-request-failed"),f=Fr().setTimeout(()=>{a(l)},fj.get());function d(){Fr().clearTimeout(f),s(r)}r.ping(d).then(d,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _j={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},wj=500,Ej=600,kj="_blank",Tj="http://localhost";class hx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Sj(n,e,t,r=wj,s=Ej){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let f="";const d={..._j,width:r.toString(),height:s.toString(),top:a,left:l},m=ln().toLowerCase();t&&(f=RE(m)?kj:t),CE(m)&&(e=e||Tj,d.scrollbars="yes");const g=Object.entries(d).reduce((w,[T,k])=>`${w}${T}=${k},`,"");if(WR(m)&&f!=="_self")return bj(e||"",f),new hx(null);const v=window.open(e||"",f,g);ke(v,n,"popup-blocked");try{v.focus()}catch{}return new hx(v)}function bj(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ij="__/auth/handler",Cj="emulator/auth/handler",Aj=encodeURIComponent("fac");async function fx(n,e,t,r,s,a){ke(n.config.authDomain,n,"auth-domain-config-required"),ke(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:rl,eventId:s};if(e instanceof Kg){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",dA(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,v]of Object.entries({}))l[g]=v}if(e instanceof cu){const g=e.getScopes().filter(v=>v!=="");g.length>0&&(l.scopes=g.join(","))}n.tenantId&&(l.tid=n.tenantId);const f=l;for(const g of Object.keys(f))f[g]===void 0&&delete f[g];const d=await n._getAppCheckToken(),m=d?`#${Aj}=${encodeURIComponent(d)}`:"";return`${Rj(n)}?${ou(f).slice(1)}${m}`}function Rj({config:n}){return n.emulator?zg(n,Cj):`https://${n.authDomain}/${Ij}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zp="webStorageSupport";class Pj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=KE,this._completeRedirectFn=tj,this._overrideRedirectResult=JP}async _openPopup(e,t,r,s){var l;Ei((l=this.eventManagers[e._key()])==null?void 0:l.manager,"_initialize() not called before _openPopup()");const a=await fx(e,t,r,Nm(),s);return Sj(e,a,qg())}async _openRedirect(e,t,r,s){await this._originValidation(e);const a=await fx(e,t,r,Nm(),s);return DP(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:a}=this.eventManagers[t];return s?Promise.resolve(s):(Ei(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await xj(e),r=new rj(e);return t.register("authEvent",s=>(ke(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Zp,{type:Zp},s=>{var l;const a=(l=s==null?void 0:s[0])==null?void 0:l[Zp];a!==void 0&&t(!!a),Zn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=lj(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return VE()||AE()||$g()}}const jj=Pj;var px="@firebase/auth",mx="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dj(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Vj(n){za(new Eo("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:f}=r.options;ke(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:l,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ME(n)},m=new YR(r,s,a,d);return oP(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),za(new Eo("auth-internal",e=>{const t=Ns(e.getProvider("auth").getImmediate());return(r=>new Nj(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),gs(px,mx,Dj(n)),gs(px,mx,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mj=300,Lj=hE("authIdTokenMaxAge")||Mj;let gx=null;const Oj=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Lj)return;const s=t==null?void 0:t.token;gx!==s&&(gx=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Bj(n=vE()){const e=Og(n,"auth");if(e.isInitialized())return e.getImmediate();const t=sP(n,{popupRedirectResolver:jj,persistence:[$P,PP,KE]}),r=hE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const l=Oj(a.toString());bP(t,l,()=>l(t.currentUser)),SP(t,f=>l(f))}}const s=uE("auth");return s&&aP(t,`http://${s}`),t}function Fj(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}XR({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const a=pr("internal-error");a.customData=s,t(a)},r.type="text/javascript",r.charset="UTF-8",Fj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Vj("Browser");var yx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ys,ek;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,b){function j(){}j.prototype=b.prototype,A.F=b.prototype,A.prototype=new j,A.prototype.constructor=A,A.D=function(L,O,W){for(var M=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)M[Ne-2]=arguments[Ne];return b.prototype[O].apply(L,M)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,b,j){j||(j=0);const L=Array(16);if(typeof b=="string")for(var O=0;O<16;++O)L[O]=b.charCodeAt(j++)|b.charCodeAt(j++)<<8|b.charCodeAt(j++)<<16|b.charCodeAt(j++)<<24;else for(O=0;O<16;++O)L[O]=b[j++]|b[j++]<<8|b[j++]<<16|b[j++]<<24;b=A.g[0],j=A.g[1],O=A.g[2];let W=A.g[3],M;M=b+(W^j&(O^W))+L[0]+3614090360&4294967295,b=j+(M<<7&4294967295|M>>>25),M=W+(O^b&(j^O))+L[1]+3905402710&4294967295,W=b+(M<<12&4294967295|M>>>20),M=O+(j^W&(b^j))+L[2]+606105819&4294967295,O=W+(M<<17&4294967295|M>>>15),M=j+(b^O&(W^b))+L[3]+3250441966&4294967295,j=O+(M<<22&4294967295|M>>>10),M=b+(W^j&(O^W))+L[4]+4118548399&4294967295,b=j+(M<<7&4294967295|M>>>25),M=W+(O^b&(j^O))+L[5]+1200080426&4294967295,W=b+(M<<12&4294967295|M>>>20),M=O+(j^W&(b^j))+L[6]+2821735955&4294967295,O=W+(M<<17&4294967295|M>>>15),M=j+(b^O&(W^b))+L[7]+4249261313&4294967295,j=O+(M<<22&4294967295|M>>>10),M=b+(W^j&(O^W))+L[8]+1770035416&4294967295,b=j+(M<<7&4294967295|M>>>25),M=W+(O^b&(j^O))+L[9]+2336552879&4294967295,W=b+(M<<12&4294967295|M>>>20),M=O+(j^W&(b^j))+L[10]+4294925233&4294967295,O=W+(M<<17&4294967295|M>>>15),M=j+(b^O&(W^b))+L[11]+2304563134&4294967295,j=O+(M<<22&4294967295|M>>>10),M=b+(W^j&(O^W))+L[12]+1804603682&4294967295,b=j+(M<<7&4294967295|M>>>25),M=W+(O^b&(j^O))+L[13]+4254626195&4294967295,W=b+(M<<12&4294967295|M>>>20),M=O+(j^W&(b^j))+L[14]+2792965006&4294967295,O=W+(M<<17&4294967295|M>>>15),M=j+(b^O&(W^b))+L[15]+1236535329&4294967295,j=O+(M<<22&4294967295|M>>>10),M=b+(O^W&(j^O))+L[1]+4129170786&4294967295,b=j+(M<<5&4294967295|M>>>27),M=W+(j^O&(b^j))+L[6]+3225465664&4294967295,W=b+(M<<9&4294967295|M>>>23),M=O+(b^j&(W^b))+L[11]+643717713&4294967295,O=W+(M<<14&4294967295|M>>>18),M=j+(W^b&(O^W))+L[0]+3921069994&4294967295,j=O+(M<<20&4294967295|M>>>12),M=b+(O^W&(j^O))+L[5]+3593408605&4294967295,b=j+(M<<5&4294967295|M>>>27),M=W+(j^O&(b^j))+L[10]+38016083&4294967295,W=b+(M<<9&4294967295|M>>>23),M=O+(b^j&(W^b))+L[15]+3634488961&4294967295,O=W+(M<<14&4294967295|M>>>18),M=j+(W^b&(O^W))+L[4]+3889429448&4294967295,j=O+(M<<20&4294967295|M>>>12),M=b+(O^W&(j^O))+L[9]+568446438&4294967295,b=j+(M<<5&4294967295|M>>>27),M=W+(j^O&(b^j))+L[14]+3275163606&4294967295,W=b+(M<<9&4294967295|M>>>23),M=O+(b^j&(W^b))+L[3]+4107603335&4294967295,O=W+(M<<14&4294967295|M>>>18),M=j+(W^b&(O^W))+L[8]+1163531501&4294967295,j=O+(M<<20&4294967295|M>>>12),M=b+(O^W&(j^O))+L[13]+2850285829&4294967295,b=j+(M<<5&4294967295|M>>>27),M=W+(j^O&(b^j))+L[2]+4243563512&4294967295,W=b+(M<<9&4294967295|M>>>23),M=O+(b^j&(W^b))+L[7]+1735328473&4294967295,O=W+(M<<14&4294967295|M>>>18),M=j+(W^b&(O^W))+L[12]+2368359562&4294967295,j=O+(M<<20&4294967295|M>>>12),M=b+(j^O^W)+L[5]+4294588738&4294967295,b=j+(M<<4&4294967295|M>>>28),M=W+(b^j^O)+L[8]+2272392833&4294967295,W=b+(M<<11&4294967295|M>>>21),M=O+(W^b^j)+L[11]+1839030562&4294967295,O=W+(M<<16&4294967295|M>>>16),M=j+(O^W^b)+L[14]+4259657740&4294967295,j=O+(M<<23&4294967295|M>>>9),M=b+(j^O^W)+L[1]+2763975236&4294967295,b=j+(M<<4&4294967295|M>>>28),M=W+(b^j^O)+L[4]+1272893353&4294967295,W=b+(M<<11&4294967295|M>>>21),M=O+(W^b^j)+L[7]+4139469664&4294967295,O=W+(M<<16&4294967295|M>>>16),M=j+(O^W^b)+L[10]+3200236656&4294967295,j=O+(M<<23&4294967295|M>>>9),M=b+(j^O^W)+L[13]+681279174&4294967295,b=j+(M<<4&4294967295|M>>>28),M=W+(b^j^O)+L[0]+3936430074&4294967295,W=b+(M<<11&4294967295|M>>>21),M=O+(W^b^j)+L[3]+3572445317&4294967295,O=W+(M<<16&4294967295|M>>>16),M=j+(O^W^b)+L[6]+76029189&4294967295,j=O+(M<<23&4294967295|M>>>9),M=b+(j^O^W)+L[9]+3654602809&4294967295,b=j+(M<<4&4294967295|M>>>28),M=W+(b^j^O)+L[12]+3873151461&4294967295,W=b+(M<<11&4294967295|M>>>21),M=O+(W^b^j)+L[15]+530742520&4294967295,O=W+(M<<16&4294967295|M>>>16),M=j+(O^W^b)+L[2]+3299628645&4294967295,j=O+(M<<23&4294967295|M>>>9),M=b+(O^(j|~W))+L[0]+4096336452&4294967295,b=j+(M<<6&4294967295|M>>>26),M=W+(j^(b|~O))+L[7]+1126891415&4294967295,W=b+(M<<10&4294967295|M>>>22),M=O+(b^(W|~j))+L[14]+2878612391&4294967295,O=W+(M<<15&4294967295|M>>>17),M=j+(W^(O|~b))+L[5]+4237533241&4294967295,j=O+(M<<21&4294967295|M>>>11),M=b+(O^(j|~W))+L[12]+1700485571&4294967295,b=j+(M<<6&4294967295|M>>>26),M=W+(j^(b|~O))+L[3]+2399980690&4294967295,W=b+(M<<10&4294967295|M>>>22),M=O+(b^(W|~j))+L[10]+4293915773&4294967295,O=W+(M<<15&4294967295|M>>>17),M=j+(W^(O|~b))+L[1]+2240044497&4294967295,j=O+(M<<21&4294967295|M>>>11),M=b+(O^(j|~W))+L[8]+1873313359&4294967295,b=j+(M<<6&4294967295|M>>>26),M=W+(j^(b|~O))+L[15]+4264355552&4294967295,W=b+(M<<10&4294967295|M>>>22),M=O+(b^(W|~j))+L[6]+2734768916&4294967295,O=W+(M<<15&4294967295|M>>>17),M=j+(W^(O|~b))+L[13]+1309151649&4294967295,j=O+(M<<21&4294967295|M>>>11),M=b+(O^(j|~W))+L[4]+4149444226&4294967295,b=j+(M<<6&4294967295|M>>>26),M=W+(j^(b|~O))+L[11]+3174756917&4294967295,W=b+(M<<10&4294967295|M>>>22),M=O+(b^(W|~j))+L[2]+718787259&4294967295,O=W+(M<<15&4294967295|M>>>17),M=j+(W^(O|~b))+L[9]+3951481745&4294967295,A.g[0]=A.g[0]+b&4294967295,A.g[1]=A.g[1]+(O+(M<<21&4294967295|M>>>11))&4294967295,A.g[2]=A.g[2]+O&4294967295,A.g[3]=A.g[3]+W&4294967295}r.prototype.v=function(A,b){b===void 0&&(b=A.length);const j=b-this.blockSize,L=this.C;let O=this.h,W=0;for(;W<b;){if(O==0)for(;W<=j;)s(this,A,W),W+=this.blockSize;if(typeof A=="string"){for(;W<b;)if(L[O++]=A.charCodeAt(W++),O==this.blockSize){s(this,L),O=0;break}}else for(;W<b;)if(L[O++]=A[W++],O==this.blockSize){s(this,L),O=0;break}}this.h=O,this.o+=b},r.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var b=1;b<A.length-8;++b)A[b]=0;b=this.o*8;for(var j=A.length-8;j<A.length;++j)A[j]=b&255,b/=256;for(this.v(A),A=Array(16),b=0,j=0;j<4;++j)for(let L=0;L<32;L+=8)A[b++]=this.g[j]>>>L&255;return A};function a(A,b){var j=f;return Object.prototype.hasOwnProperty.call(j,A)?j[A]:j[A]=b(A)}function l(A,b){this.h=b;const j=[];let L=!0;for(let O=A.length-1;O>=0;O--){const W=A[O]|0;L&&W==b||(j[O]=W,L=!1)}this.g=j}var f={};function d(A){return-128<=A&&A<128?a(A,function(b){return new l([b|0],b<0?-1:0)}):new l([A|0],A<0?-1:0)}function m(A){if(isNaN(A)||!isFinite(A))return v;if(A<0)return I(m(-A));const b=[];let j=1;for(let L=0;A>=j;L++)b[L]=A/j|0,j*=4294967296;return new l(b,0)}function g(A,b){if(A.length==0)throw Error("number format error: empty string");if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(A.charAt(0)=="-")return I(g(A.substring(1),b));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const j=m(Math.pow(b,8));let L=v;for(let W=0;W<A.length;W+=8){var O=Math.min(8,A.length-W);const M=parseInt(A.substring(W,W+O),b);O<8?(O=m(Math.pow(b,O)),L=L.j(O).add(m(M))):(L=L.j(j),L=L.add(m(M)))}return L}var v=d(0),w=d(1),T=d(16777216);n=l.prototype,n.m=function(){if(C(this))return-I(this).m();let A=0,b=1;for(let j=0;j<this.g.length;j++){const L=this.i(j);A+=(L>=0?L:4294967296+L)*b,b*=4294967296}return A},n.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(k(this))return"0";if(C(this))return"-"+I(this).toString(A);const b=m(Math.pow(A,6));var j=this;let L="";for(;;){const O=G(j,b).g;j=V(j,O.j(b));let W=((j.g.length>0?j.g[0]:j.h)>>>0).toString(A);if(j=O,k(j))return W+L;for(;W.length<6;)W="0"+W;L=W+L}},n.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function k(A){if(A.h!=0)return!1;for(let b=0;b<A.g.length;b++)if(A.g[b]!=0)return!1;return!0}function C(A){return A.h==-1}n.l=function(A){return A=V(this,A),C(A)?-1:k(A)?0:1};function I(A){const b=A.g.length,j=[];for(let L=0;L<b;L++)j[L]=~A.g[L];return new l(j,~A.h).add(w)}n.abs=function(){return C(this)?I(this):this},n.add=function(A){const b=Math.max(this.g.length,A.g.length),j=[];let L=0;for(let O=0;O<=b;O++){let W=L+(this.i(O)&65535)+(A.i(O)&65535),M=(W>>>16)+(this.i(O)>>>16)+(A.i(O)>>>16);L=M>>>16,W&=65535,M&=65535,j[O]=M<<16|W}return new l(j,j[j.length-1]&-2147483648?-1:0)};function V(A,b){return A.add(I(b))}n.j=function(A){if(k(this)||k(A))return v;if(C(this))return C(A)?I(this).j(I(A)):I(I(this).j(A));if(C(A))return I(this.j(I(A)));if(this.l(T)<0&&A.l(T)<0)return m(this.m()*A.m());const b=this.g.length+A.g.length,j=[];for(var L=0;L<2*b;L++)j[L]=0;for(L=0;L<this.g.length;L++)for(let O=0;O<A.g.length;O++){const W=this.i(L)>>>16,M=this.i(L)&65535,Ne=A.i(O)>>>16,He=A.i(O)&65535;j[2*L+2*O]+=M*He,B(j,2*L+2*O),j[2*L+2*O+1]+=W*He,B(j,2*L+2*O+1),j[2*L+2*O+1]+=M*Ne,B(j,2*L+2*O+1),j[2*L+2*O+2]+=W*Ne,B(j,2*L+2*O+2)}for(A=0;A<b;A++)j[A]=j[2*A+1]<<16|j[2*A];for(A=b;A<2*b;A++)j[A]=0;return new l(j,0)};function B(A,b){for(;(A[b]&65535)!=A[b];)A[b+1]+=A[b]>>>16,A[b]&=65535,b++}function P(A,b){this.g=A,this.h=b}function G(A,b){if(k(b))throw Error("division by zero");if(k(A))return new P(v,v);if(C(A))return b=G(I(A),b),new P(I(b.g),I(b.h));if(C(b))return b=G(A,I(b)),new P(I(b.g),b.h);if(A.g.length>30){if(C(A)||C(b))throw Error("slowDivide_ only works with positive integers.");for(var j=w,L=b;L.l(A)<=0;)j=$(j),L=$(L);var O=H(j,1),W=H(L,1);for(L=H(L,2),j=H(j,2);!k(L);){var M=W.add(L);M.l(A)<=0&&(O=O.add(j),W=M),L=H(L,1),j=H(j,1)}return b=V(A,O.j(b)),new P(O,b)}for(O=v;A.l(b)>=0;){for(j=Math.max(1,Math.floor(A.m()/b.m())),L=Math.ceil(Math.log(j)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),W=m(j),M=W.j(b);C(M)||M.l(A)>0;)j-=L,W=m(j),M=W.j(b);k(W)&&(W=w),O=O.add(W),A=V(A,M)}return new P(O,A)}n.B=function(A){return G(this,A).h},n.and=function(A){const b=Math.max(this.g.length,A.g.length),j=[];for(let L=0;L<b;L++)j[L]=this.i(L)&A.i(L);return new l(j,this.h&A.h)},n.or=function(A){const b=Math.max(this.g.length,A.g.length),j=[];for(let L=0;L<b;L++)j[L]=this.i(L)|A.i(L);return new l(j,this.h|A.h)},n.xor=function(A){const b=Math.max(this.g.length,A.g.length),j=[];for(let L=0;L<b;L++)j[L]=this.i(L)^A.i(L);return new l(j,this.h^A.h)};function $(A){const b=A.g.length+1,j=[];for(let L=0;L<b;L++)j[L]=A.i(L)<<1|A.i(L-1)>>>31;return new l(j,A.h)}function H(A,b){const j=b>>5;b%=32;const L=A.g.length-j,O=[];for(let W=0;W<L;W++)O[W]=b>0?A.i(W+j)>>>b|A.i(W+j+1)<<32-b:A.i(W+j);return new l(O,A.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,ek=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=m,l.fromString=g,ys=l}).apply(typeof yx<"u"?yx:typeof self<"u"?self:typeof window<"u"?window:{});var zd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var tk,xc,nk,th,Lm,rk,ik,sk;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof zd=="object"&&zd];for(var _=0;_<h.length;++_){var E=h[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=t(this);function s(h,_){if(_)e:{var E=r;h=h.split(".");for(var R=0;R<h.length-1;R++){var q=h[R];if(!(q in E))break e;E=E[q]}h=h[h.length-1],R=E[h],_=_(R),_!=R&&_!=null&&e(E,h,{configurable:!0,writable:!0,value:_})}}s("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(h){return h||function(_){var E=[],R;for(R in _)Object.prototype.hasOwnProperty.call(_,R)&&E.push([R,_[R]]);return E}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function f(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function d(h,_,E){return h.call.apply(h.bind,arguments)}function m(h,_,E){return m=d,m.apply(null,arguments)}function g(h,_){var E=Array.prototype.slice.call(arguments,1);return function(){var R=E.slice();return R.push.apply(R,arguments),h.apply(this,R)}}function v(h,_){function E(){}E.prototype=_.prototype,h.Z=_.prototype,h.prototype=new E,h.prototype.constructor=h,h.Ob=function(R,q,X){for(var oe=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)oe[Re-2]=arguments[Re];return _.prototype[q].apply(R,oe)}}var w=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function T(h){const _=h.length;if(_>0){const E=Array(_);for(let R=0;R<_;R++)E[R]=h[R];return E}return[]}function k(h,_){for(let R=1;R<arguments.length;R++){const q=arguments[R];var E=typeof q;if(E=E!="object"?E:q?Array.isArray(q)?"array":E:"null",E=="array"||E=="object"&&typeof q.length=="number"){E=h.length||0;const X=q.length||0;h.length=E+X;for(let oe=0;oe<X;oe++)h[E+oe]=q[oe]}else h.push(q)}}class C{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function I(h){l.setTimeout(()=>{throw h},0)}function V(){var h=A;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class B{constructor(){this.h=this.g=null}add(_,E){const R=P.get();R.set(_,E),this.h?this.h.next=R:this.g=R,this.h=R}}var P=new C(()=>new G,h=>h.reset());class G{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let $,H=!1,A=new B,b=()=>{const h=Promise.resolve(void 0);$=()=>{h.then(j)}};function j(){for(var h;h=V();){try{h.h.call(h.g)}catch(E){I(E)}var _=P;_.j(h),_.h<100&&(_.h++,h.next=_.g,_.g=h)}H=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var W=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};l.addEventListener("test",E,_),l.removeEventListener("test",E,_)}catch{}return h})();function M(h){return/^[\s\xa0]*$/.test(h)}function Ne(h,_){O.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,_)}v(Ne,O),Ne.prototype.init=function(h,_){const E=this.type=h.type,R=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget,_||(E=="mouseover"?_=h.fromElement:E=="mouseout"&&(_=h.toElement)),this.relatedTarget=_,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Ne.Z.h.call(this)},Ne.prototype.h=function(){Ne.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var He="closure_listenable_"+(Math.random()*1e6|0),wt=0;function Se(h,_,E,R,q){this.listener=h,this.proxy=null,this.src=_,this.type=E,this.capture=!!R,this.ha=q,this.key=++wt,this.da=this.fa=!1}function ie(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function pe(h,_,E){for(const R in h)_.call(E,h[R],R,h)}function ae(h,_){for(const E in h)_.call(void 0,h[E],E,h)}function U(h){const _={};for(const E in h)_[E]=h[E];return _}const ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ce(h,_){let E,R;for(let q=1;q<arguments.length;q++){R=arguments[q];for(E in R)h[E]=R[E];for(let X=0;X<ee.length;X++)E=ee[X],Object.prototype.hasOwnProperty.call(R,E)&&(h[E]=R[E])}}function Ae(h){this.src=h,this.g={},this.h=0}Ae.prototype.add=function(h,_,E,R,q){const X=h.toString();h=this.g[X],h||(h=this.g[X]=[],this.h++);const oe=Me(h,_,R,q);return oe>-1?(_=h[oe],E||(_.fa=!1)):(_=new Se(_,this.src,X,!!R,q),_.fa=E,h.push(_)),_};function Ve(h,_){const E=_.type;if(E in h.g){var R=h.g[E],q=Array.prototype.indexOf.call(R,_,void 0),X;(X=q>=0)&&Array.prototype.splice.call(R,q,1),X&&(ie(_),h.g[E].length==0&&(delete h.g[E],h.h--))}}function Me(h,_,E,R){for(let q=0;q<h.length;++q){const X=h[q];if(!X.da&&X.listener==_&&X.capture==!!E&&X.ha==R)return q}return-1}var Ge="closure_lm_"+(Math.random()*1e6|0),Ue={};function Xe(h,_,E,R,q){if(Array.isArray(_)){for(let X=0;X<_.length;X++)Xe(h,_[X],E,R,q);return null}return E=xl(E),h&&h[He]?h.J(_,E,f(R)?!!R.capture:!1,q):cn(h,_,E,!1,R,q)}function cn(h,_,E,R,q,X){if(!_)throw Error("Invalid event type");const oe=f(q)?!!q.capture:!!q;let Re=Oo(h);if(Re||(h[Ge]=Re=new Ae(h)),E=Re.add(_,E,R,oe,X),E.proxy)return E;if(R=Mo(),E.proxy=R,R.src=h,R.listener=E,h.addEventListener)W||(q=oe),q===void 0&&(q=!1),h.addEventListener(_.toString(),R,q);else if(h.attachEvent)h.attachEvent(Lo(_.toString()),R);else if(h.addListener&&h.removeListener)h.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Mo(){function h(E){return _.call(h.src,h.listener,E)}const _=ku;return h}function vl(h,_,E,R,q){if(Array.isArray(_))for(var X=0;X<_.length;X++)vl(h,_[X],E,R,q);else R=f(R)?!!R.capture:!!R,E=xl(E),h&&h[He]?(h=h.i,X=String(_).toString(),X in h.g&&(_=h.g[X],E=Me(_,E,R,q),E>-1&&(ie(_[E]),Array.prototype.splice.call(_,E,1),_.length==0&&(delete h.g[X],h.h--)))):h&&(h=Oo(h))&&(_=h.g[_.toString()],h=-1,_&&(h=Me(_,E,R,q)),(E=h>-1?_[h]:null)&&Ri(E))}function Ri(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[He])Ve(_.i,h);else{var E=h.type,R=h.proxy;_.removeEventListener?_.removeEventListener(E,R,h.capture):_.detachEvent?_.detachEvent(Lo(E),R):_.addListener&&_.removeListener&&_.removeListener(R),(E=Oo(_))?(Ve(E,h),E.h==0&&(E.src=null,_[Ge]=null)):ie(h)}}}function Lo(h){return h in Ue?Ue[h]:Ue[h]="on"+h}function ku(h,_){if(h.da)h=!0;else{_=new Ne(_,this);const E=h.listener,R=h.ha||h.src;h.fa&&Ri(h),h=E.call(R,_)}return h}function Oo(h){return h=h[Ge],h instanceof Ae?h:null}var Os="__closure_events_fn_"+(Math.random()*1e9>>>0);function xl(h){return typeof h=="function"?h:(h[Os]||(h[Os]=function(_){return h.handleEvent(_)}),h[Os])}function Et(){L.call(this),this.i=new Ae(this),this.M=this,this.G=null}v(Et,L),Et.prototype[He]=!0,Et.prototype.removeEventListener=function(h,_,E,R){vl(this,h,_,E,R)};function gt(h,_){var E,R=h.G;if(R)for(E=[];R;R=R.G)E.push(R);if(h=h.M,R=_.type||_,typeof _=="string")_=new O(_,h);else if(_ instanceof O)_.target=_.target||h;else{var q=_;_=new O(R,h),Ce(_,q)}q=!0;let X,oe;if(E)for(oe=E.length-1;oe>=0;oe--)X=_.g=E[oe],q=tr(X,R,!0,_)&&q;if(X=_.g=h,q=tr(X,R,!0,_)&&q,q=tr(X,R,!1,_)&&q,E)for(oe=0;oe<E.length;oe++)X=_.g=E[oe],q=tr(X,R,!1,_)&&q}Et.prototype.N=function(){if(Et.Z.N.call(this),this.i){var h=this.i;for(const _ in h.g){const E=h.g[_];for(let R=0;R<E.length;R++)ie(E[R]);delete h.g[_],h.h--}}this.G=null},Et.prototype.J=function(h,_,E,R){return this.i.add(String(h),_,!1,E,R)},Et.prototype.K=function(h,_,E,R){return this.i.add(String(h),_,!0,E,R)};function tr(h,_,E,R){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();let q=!0;for(let X=0;X<_.length;++X){const oe=_[X];if(oe&&!oe.da&&oe.capture==E){const Re=oe.listener,yt=oe.ha||oe.src;oe.fa&&Ve(h.i,oe),q=Re.call(yt,R)!==!1&&q}}return q&&!R.defaultPrevented}function _l(h,_){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=m(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:l.setTimeout(h,_||0)}function wl(h){h.g=_l(()=>{h.g=null,h.i&&(h.i=!1,wl(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class Tu extends L{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:wl(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pi(h){L.call(this),this.h=h,this.g={}}v(Pi,L);var El=[];function Bo(h){pe(h.g,function(_,E){this.g.hasOwnProperty(E)&&Ri(_)},h),h.g={}}Pi.prototype.N=function(){Pi.Z.N.call(this),Bo(this)},Pi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ji=l.JSON.stringify,Su=l.JSON.parse,Bs=class{stringify(h){return l.JSON.stringify(h,void 0)}parse(h){return l.JSON.parse(h,void 0)}};function Ni(){}function bu(){}var Di={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Fo(){O.call(this,"d")}v(Fo,O);function kl(){O.call(this,"c")}v(kl,O);var nr={},zo=null;function Vi(){return zo=zo||new Et}nr.Ia="serverreachability";function Uo(h){O.call(this,nr.Ia,h)}v(Uo,O);function Qr(h){const _=Vi();gt(_,new Uo(_))}nr.STAT_EVENT="statevent";function Yr(h,_){O.call(this,nr.STAT_EVENT,h),this.stat=_}v(Yr,O);function ht(h){const _=Vi();gt(_,new Yr(_,h))}nr.Ja="timingevent";function Tl(h,_){O.call(this,nr.Ja,h),this.size=_}v(Tl,O);function Mi(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){h()},_)}function Li(){this.g=!0}Li.prototype.ua=function(){this.g=!1};function Iu(h,_,E,R,q,X){h.info(function(){if(h.g)if(X){var oe="",Re=X.split("&");for(let Ye=0;Ye<Re.length;Ye++){var yt=Re[Ye].split("=");if(yt.length>1){const kt=yt[0];yt=yt[1];const Cn=kt.split("_");oe=Cn.length>=2&&Cn[1]=="type"?oe+(kt+"="+yt+"&"):oe+(kt+"=redacted&")}}}else oe=null;else oe=X;return"XMLHTTP REQ ("+R+") [attempt "+q+"]: "+_+`
`+E+`
`+oe})}function Cu(h,_,E,R,q,X,oe){h.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+q+"]: "+_+`
`+E+`
`+X+" "+oe})}function wr(h,_,E,R){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+Fs(h,E)+(R?" "+R:"")})}function Au(h,_){h.info(function(){return"TIMEOUT: "+_})}Li.prototype.info=function(){};function Fs(h,_){if(!h.g)return _;if(!_)return null;try{const X=JSON.parse(_);if(X){for(h=0;h<X.length;h++)if(Array.isArray(X[h])){var E=X[h];if(!(E.length<2)){var R=E[1];if(Array.isArray(R)&&!(R.length<1)){var q=R[0];if(q!="noop"&&q!="stop"&&q!="close")for(let oe=1;oe<R.length;oe++)R[oe]=""}}}}return ji(X)}catch{return _}}var Oi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Bi={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ru;function Xr(){}v(Xr,Ni),Xr.prototype.g=function(){return new XMLHttpRequest},Ru=new Xr;function Er(h){return encodeURIComponent(String(h))}function $o(h){var _=1;h=h.split(":");const E=[];for(;_>0&&h.length;)E.push(h.shift()),_--;return h.length&&E.push(h.join(":")),E}function On(h,_,E,R){this.j=h,this.i=_,this.l=E,this.S=R||1,this.V=new Pi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Pu}function Pu(){this.i=null,this.g="",this.h=!1}var ju={},Sl={};function rr(h,_,E){h.M=1,h.A=Zr(Bn(_)),h.u=E,h.R=!0,bl(h,null)}function bl(h,_){h.F=Date.now(),zs(h),h.B=Bn(h.A);var E=h.B,R=h.S;Array.isArray(R)||(R=[String(R)]),Ml(E.i,"t",R),h.C=0,E=h.j.L,h.h=new Pu,h.g=Uu(h.j,E?_:null,!h.u),h.P>0&&(h.O=new Tu(m(h.Y,h,h.g),h.P)),_=h.V,E=h.g,R=h.ba;var q="readystatechange";Array.isArray(q)||(q&&(El[0]=q.toString()),q=El);for(let X=0;X<q.length;X++){const oe=Xe(E,q[X],R||_.handleEvent,!1,_.h||_);if(!oe)break;_.g[oe.key]=oe}_=h.J?U(h.J):{},h.u?(h.v||(h.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,_)):(h.v="GET",h.g.ea(h.B,h.v,null,_)),Qr(),Iu(h.i,h.v,h.B,h.l,h.S,h.u)}On.prototype.ba=function(h){h=h.target;const _=this.O;_&&Ar(h)==3?_.j():this.Y(h)},On.prototype.Y=function(h){try{if(h==this.g)e:{const Re=Ar(this.g),yt=this.g.ya(),Ye=this.g.ca();if(!(Re<3)&&(Re!=3||this.g&&(this.h.h||this.g.la()||Fu(this.g)))){this.K||Re!=4||yt==7||(yt==8||Ye<=0?Qr(3):Qr(2)),Wo(this);var _=this.g.ca();this.X=_;var E=Nu(this);if(this.o=_==200,Cu(this.i,this.v,this.B,this.l,this.S,Re,_),this.o){if(this.U&&!this.L){t:{if(this.g){var R,q=this.g;if((R=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(R)){var X=R;break t}}X=null}if(h=X)wr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,tt(this,h);else{this.o=!1,this.m=3,ht(12),Jr(this),Us(this);break e}}if(this.R){h=!0;let kt;for(;!this.K&&this.C<E.length;)if(kt=Vu(this,E),kt==Sl){Re==4&&(this.m=4,ht(14),h=!1),wr(this.i,this.l,null,"[Incomplete Response]");break}else if(kt==ju){this.m=4,ht(15),wr(this.i,this.l,E,"[Invalid Chunk]"),h=!1;break}else wr(this.i,this.l,kt,null),tt(this,kt);if(Du(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Re!=4||E.length!=0||this.h.h||(this.m=1,ht(16),h=!1),this.o=this.o&&h,!h)wr(this.i,this.l,E,"[Invalid Chunked Response]"),Jr(this),Us(this);else if(E.length>0&&!this.W){this.W=!0;var oe=this.j;oe.g==this&&oe.aa&&!oe.P&&(oe.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),Xs(oe),oe.P=!0,ht(11))}}else wr(this.i,this.l,E,null),tt(this,E);Re==4&&Jr(this),this.o&&!this.K&&(Re==4?ea(this.j,this):(this.o=!1,zs(this)))}else Ol(this.g),_==400&&E.indexOf("Unknown SID")>0?(this.m=3,ht(12)):(this.m=0,ht(13)),Jr(this),Us(this)}}}catch{}finally{}};function Nu(h){if(!Du(h))return h.g.la();const _=Fu(h.g);if(_==="")return"";let E="";const R=_.length,q=Ar(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Jr(h),Us(h),"";h.h.i=new l.TextDecoder}for(let X=0;X<R;X++)h.h.h=!0,E+=h.h.i.decode(_[X],{stream:!(q&&X==R-1)});return _.length=0,h.h.g+=E,h.C=0,h.h.g}function Du(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Vu(h,_){var E=h.C,R=_.indexOf(`
`,E);return R==-1?Sl:(E=Number(_.substring(E,R)),isNaN(E)?ju:(R+=1,R+E>_.length?Sl:(_=_.slice(R,R+E),h.C=R+E,_)))}On.prototype.cancel=function(){this.K=!0,Jr(this)};function zs(h){h.T=Date.now()+h.H,Il(h,h.H)}function Il(h,_){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Mi(m(h.aa,h),_)}function Wo(h){h.D&&(l.clearTimeout(h.D),h.D=null)}On.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Au(this.i,this.B),this.M!=2&&(Qr(),ht(17)),Jr(this),this.m=2,Us(this)):Il(this,this.T-h)};function Us(h){h.j.I==0||h.K||ea(h.j,h)}function Jr(h){Wo(h);var _=h.O;_&&typeof _.dispose=="function"&&_.dispose(),h.O=null,Bo(h.V),h.g&&(_=h.g,h.g=null,_.abort(),_.dispose())}function tt(h,_){try{var E=h.j;if(E.I!=0&&(E.g==h||Al(E.h,h))){if(!h.L&&Al(E.h,h)&&E.I==3){try{var R=E.Ba.g.parse(_)}catch{R=null}if(Array.isArray(R)&&R.length==3){var q=R;if(q[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<h.F)Zo(E),bn(E);else break e;jr(E),ht(18)}}else E.xa=q[1],0<E.xa-E.K&&q[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=Mi(m(E.Va,E),6e3));$s(E.h)<=1&&E.ta&&(E.ta=void 0)}else In(E,11)}else if((h.L||E.g==h)&&Zo(E),!M(_))for(q=E.Ba.g.parse(_),_=0;_<q.length;_++){let Ye=q[_];const kt=Ye[0];if(!(kt<=E.K))if(E.K=kt,Ye=Ye[1],E.I==2)if(Ye[0]=="c"){E.M=Ye[1],E.ba=Ye[2];const Cn=Ye[3];Cn!=null&&(E.ka=Cn,E.j.info("VER="+E.ka));const ii=Ye[4];ii!=null&&(E.za=ii,E.j.info("SVER="+E.za));const Nr=Ye[5];Nr!=null&&typeof Nr=="number"&&Nr>0&&(R=1.5*Nr,E.O=R,E.j.info("backChannelRequestTimeoutMs_="+R)),R=E;const Dr=h.g;if(Dr){const ra=Dr.g?Dr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ra){var X=R.h;X.g||ra.indexOf("spdy")==-1&&ra.indexOf("quic")==-1&&ra.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(Ko(X,X.h),X.h=null))}if(R.G){const zl=Dr.g?Dr.g.getResponseHeader("X-HTTP-Session-Id"):null;zl&&(R.wa=zl,Ke(R.J,R.G,zl))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-h.F,E.j.info("Handshake RTT: "+E.T+"ms")),R=E;var oe=h;if(R.na=Fl(R,R.L?R.ba:null,R.W),oe.L){Ws(R.h,oe);var Re=oe,yt=R.O;yt&&(Re.H=yt),Re.D&&(Wo(Re),zs(Re)),R.g=oe}else Jt(R);E.i.length>0&&ri(E)}else Ye[0]!="stop"&&Ye[0]!="close"||In(E,7);else E.I==3&&(Ye[0]=="stop"||Ye[0]=="close"?Ye[0]=="stop"?In(E,7):Xo(E):Ye[0]!="noop"&&E.l&&E.l.qa(Ye),E.A=0)}}Qr(4)}catch{}}var gf=class{constructor(h,_){this.g=h,this.map=_}};function Ho(h){this.l=h||10,l.PerformanceNavigationTiming?(h=l.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Cl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function $s(h){return h.h?1:h.g?h.g.size:0}function Al(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function Ko(h,_){h.g?h.g.add(_):h.h=_}function Ws(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}Ho.prototype.cancel=function(){if(this.i=kn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function kn(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const E of h.g.values())_=_.concat(E.G);return _}return T(h.i)}var Mu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Tn(h,_){if(h){h=h.split("&");for(let E=0;E<h.length;E++){const R=h[E].indexOf("=");let q,X=null;R>=0?(q=h[E].substring(0,R),X=h[E].substring(R+1)):q=h[E],_(q,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function kr(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;h instanceof kr?(this.l=h.l,Hs(this,h.j),this.o=h.o,this.g=h.g,Tr(this,h.u),this.h=h.h,Fi(this,Ll(h.i)),this.m=h.m):h&&(_=String(h).match(Mu))?(this.l=!1,Hs(this,_[1]||"",!0),this.o=Ks(_[2]||""),this.g=Ks(_[3]||"",!0),Tr(this,_[4]),this.h=Ks(_[5]||"",!0),Fi(this,_[6]||"",!0),this.m=Ks(_[7]||"")):(this.l=!1,this.i=new Fe(null,this.l))}kr.prototype.toString=function(){const h=[];var _=this.j;_&&h.push(qs(_,Pl,!0),":");var E=this.g;return(E||_=="file")&&(h.push("//"),(_=this.o)&&h.push(qs(_,Pl,!0),"@"),h.push(Er(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&h.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(qs(E,E.charAt(0)=="/"?Gs:jl,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",qs(E,Nl)),h.join("")},kr.prototype.resolve=function(h){const _=Bn(this);let E=!!h.j;E?Hs(_,h.j):E=!!h.o,E?_.o=h.o:E=!!h.g,E?_.g=h.g:E=h.u!=null;var R=h.h;if(E)Tr(_,h.u);else if(E=!!h.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var q=_.h.lastIndexOf("/");q!=-1&&(R=_.h.slice(0,q+1)+R)}if(q=R,q==".."||q==".")R="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){R=q.lastIndexOf("/",0)==0,q=q.split("/");const X=[];for(let oe=0;oe<q.length;){const Re=q[oe++];Re=="."?R&&oe==q.length&&X.push(""):Re==".."?((X.length>1||X.length==1&&X[0]!="")&&X.pop(),R&&oe==q.length&&X.push("")):(X.push(Re),R=!0)}R=X.join("/")}else R=q}return E?_.h=R:E=h.i.toString()!=="",E?Fi(_,Ll(h.i)):E=!!h.m,E&&(_.m=h.m),_};function Bn(h){return new kr(h)}function Hs(h,_,E){h.j=E?Ks(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function Tr(h,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);h.u=_}else h.u=null}function Fi(h,_,E){_ instanceof Fe?(h.i=_,Go(h.i,h.l)):(E||(_=qs(_,yf)),h.i=new Fe(_,h.l))}function Ke(h,_,E){h.i.set(_,E)}function Zr(h){return Ke(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Ks(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function qs(h,_,E){return typeof h=="string"?(h=encodeURI(h).replace(_,Rl),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Rl(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Pl=/[#\/\?@]/g,jl=/[#\?:]/g,Gs=/[#\?]/g,yf=/[#\?@]/g,Nl=/#/g;function Fe(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function Sr(h){h.g||(h.g=new Map,h.h=0,h.i&&Tn(h.i,function(_,E){h.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}n=Fe.prototype,n.add=function(h,_){Sr(this),this.i=null,h=br(this,h);let E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(_),this.h+=1,this};function Dl(h,_){Sr(h),_=br(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function qo(h,_){return Sr(h),_=br(h,_),h.g.has(_)}n.forEach=function(h,_){Sr(this),this.g.forEach(function(E,R){E.forEach(function(q){h.call(_,q,R,this)},this)},this)};function Vl(h,_){Sr(h);let E=[];if(typeof _=="string")qo(h,_)&&(E=E.concat(h.g.get(br(h,_))));else for(h=Array.from(h.g.values()),_=0;_<h.length;_++)E=E.concat(h[_]);return E}n.set=function(h,_){return Sr(this),this.i=null,h=br(this,h),qo(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},n.get=function(h,_){return h?(h=Vl(this,h),h.length>0?String(h[0]):_):_};function Ml(h,_,E){Dl(h,_),E.length>0&&(h.i=null,h.g.set(br(h,_),T(E)),h.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(let R=0;R<_.length;R++){var E=_[R];const q=Er(E);E=Vl(this,E);for(let X=0;X<E.length;X++){let oe=q;E[X]!==""&&(oe+="="+Er(E[X])),h.push(oe)}}return this.i=h.join("&")};function Ll(h){const _=new Fe;return _.i=h.i,h.g&&(_.g=new Map(h.g),_.h=h.h),_}function br(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function Go(h,_){_&&!h.j&&(Sr(h),h.i=null,h.g.forEach(function(E,R){const q=R.toLowerCase();R!=q&&(Dl(this,R),Ml(this,q,E))},h)),h.j=_}function Ir(h,_){const E=new Li;if(l.Image){const R=new Image;R.onload=g(Ut,E,"TestLoadImage: loaded",!0,_,R),R.onerror=g(Ut,E,"TestLoadImage: error",!1,_,R),R.onabort=g(Ut,E,"TestLoadImage: abort",!1,_,R),R.ontimeout=g(Ut,E,"TestLoadImage: timeout",!1,_,R),l.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=h}else _(!1)}function Cr(h,_){const E=new Li,R=new AbortController,q=setTimeout(()=>{R.abort(),Ut(E,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:R.signal}).then(X=>{clearTimeout(q),X.ok?Ut(E,"TestPingServer: ok",!0,_):Ut(E,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(q),Ut(E,"TestPingServer: error",!1,_)})}function Ut(h,_,E,R,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),R(E)}catch{}}function Qs(){this.g=new Bs}function ei(h){this.i=h.Sb||null,this.h=h.ab||!1}v(ei,Ni),ei.prototype.g=function(){return new Sn(this.i,this.h)};function Sn(h,_){Et.call(this),this.H=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(Sn,Et),n=Sn.prototype,n.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=_,this.readyState=1,ir(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(_.body=h),(this.H||l).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,zi(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ir(this)),this.g&&(this.readyState=3,ir(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Lu(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Lu(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?zi(this):ir(this),this.readyState==3&&Lu(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,zi(this))},n.Na=function(h){this.g&&(this.response=h,zi(this))},n.ga=function(){this.g&&zi(this)};function zi(h){h.readyState=4,h.l=null,h.j=null,h.B=null,ir(h)}n.setRequestHeader=function(h,_){this.A.append(h,_)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var E=_.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=_.next();return h.join(`\r
`)};function ir(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Sn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Ou(h){let _="";return pe(h,function(E,R){_+=R,_+=":",_+=E,_+=`\r
`}),_}function Qo(h,_,E){e:{for(R in E){var R=!1;break e}R=!0}R||(E=Ou(E),typeof h=="string"?E!=null&&Er(E):Ke(h,_,E))}function Je(h){Et.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(Je,Et);var Bu=/^https?$/i,vf=["POST","PUT"];n=Je.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,_,E,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ru.g(),this.g.onreadystatechange=w(m(this.Ca,this));try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(X){Ui(this,X);return}if(h=E||"",E=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var q in R)E.set(q,R[q]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const X of R.keys())E.set(X,R.get(X));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(E.keys()).find(X=>X.toLowerCase()=="content-type"),q=l.FormData&&h instanceof l.FormData,!(Array.prototype.indexOf.call(vf,_,void 0)>=0)||R||q||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,oe]of E)this.g.setRequestHeader(X,oe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(X){Ui(this,X)}};function Ui(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.o=5,$i(h),ni(h)}function $i(h){h.A||(h.A=!0,gt(h,"complete"),gt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,gt(this,"complete"),gt(this,"abort"),ni(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ni(this,!0)),Je.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?ti(this):this.Xa())},n.Xa=function(){ti(this)};function ti(h){if(h.h&&typeof a<"u"){if(h.v&&Ar(h)==4)setTimeout(h.Ca.bind(h),0);else if(gt(h,"readystatechange"),Ar(h)==4){h.h=!1;try{const X=h.ca();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var E;if(!(E=_)){var R;if(R=X===0){let oe=String(h.D).match(Mu)[1]||null;!oe&&l.self&&l.self.location&&(oe=l.self.location.protocol.slice(0,-1)),R=!Bu.test(oe?oe.toLowerCase():"")}E=R}if(E)gt(h,"complete"),gt(h,"success");else{h.o=6;try{var q=Ar(h)>2?h.g.statusText:""}catch{q=""}h.l=q+" ["+h.ca()+"]",$i(h)}}finally{ni(h)}}}}function ni(h,_){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const E=h.g;h.g=null,_||gt(h,"ready");try{E.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Ar(h){return h.g?h.g.readyState:0}n.ca=function(){try{return Ar(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),Su(_)}};function Fu(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Ol(h){const _={};h=(h.g&&Ar(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<h.length;R++){if(M(h[R]))continue;var E=$o(h[R]);const q=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const X=_[q]||[];_[q]=X,X.push(E)}ae(_,function(R){return R.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Rr(h,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||_}function Yo(h){this.za=0,this.i=[],this.j=new Li,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Rr("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Rr("baseRetryDelayMs",5e3,h),this.Za=Rr("retryDelaySeedMs",1e4,h),this.Ta=Rr("forwardChannelMaxRetries",2,h),this.va=Rr("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Ho(h&&h.concurrentRequestLimit),this.Ba=new Qs,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Yo.prototype,n.ka=8,n.I=1,n.connect=function(h,_,E,R){ht(0),this.W=h,this.H=_||{},E&&R!==void 0&&(this.H.OSID=E,this.H.OAID=R),this.F=this.X,this.J=Fl(this,null,this.W),ri(this)};function Xo(h){if(Jo(h),h.I==3){var _=h.V++,E=Bn(h.J);if(Ke(E,"SID",h.M),Ke(E,"RID",_),Ke(E,"TYPE","terminate"),Pr(h,E),_=new On(h,h.j,_),_.M=2,_.A=Zr(Bn(E)),E=!1,l.navigator&&l.navigator.sendBeacon)try{E=l.navigator.sendBeacon(_.A.toString(),"")}catch{}!E&&l.Image&&(new Image().src=_.A,E=!0),E||(_.g=Uu(_.j,null),_.g.ea(_.A)),_.F=Date.now(),zs(_)}Js(h)}function bn(h){h.g&&(Xs(h),h.g.cancel(),h.g=null)}function Jo(h){bn(h),h.v&&(l.clearTimeout(h.v),h.v=null),Zo(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&l.clearTimeout(h.m),h.m=null)}function ri(h){if(!Cl(h.h)&&!h.m){h.m=!0;var _=h.Ea;$||b(),H||($(),H=!0),A.add(_,h),h.D=0}}function zu(h,_){return $s(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=_.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Mi(m(h.Ea,h,_),ta(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const q=new On(this,this.j,h);let X=this.o;if(this.U&&(X?(X=U(X),Ce(X,this.U)):X=this.U),this.u!==null||this.R||(q.J=X,X=null),this.S)e:{for(var _=0,E=0;E<this.i.length;E++){t:{var R=this.i[E];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(_+=R,_>4096){_=E;break e}if(_===4096||E===this.i.length-1){_=E+1;break e}}_=1e3}else _=1e3;_=Bl(this,q,_),E=Bn(this.J),Ke(E,"RID",h),Ke(E,"CVER",22),this.G&&Ke(E,"X-HTTP-Session-Id",this.G),Pr(this,E),X&&(this.R?_="headers="+Er(Ou(X))+"&"+_:this.u&&Qo(E,this.u,X)),Ko(this.h,q),this.Ra&&Ke(E,"TYPE","init"),this.S?(Ke(E,"$req",_),Ke(E,"SID","null"),q.U=!0,rr(q,E,null)):rr(q,E,_),this.I=2}}else this.I==3&&(h?Ys(this,h):this.i.length==0||Cl(this.h)||Ys(this))};function Ys(h,_){var E;_?E=_.l:E=h.V++;const R=Bn(h.J);Ke(R,"SID",h.M),Ke(R,"RID",E),Ke(R,"AID",h.K),Pr(h,R),h.u&&h.o&&Qo(R,h.u,h.o),E=new On(h,h.j,E,h.D+1),h.u===null&&(E.J=h.o),_&&(h.i=_.G.concat(h.i)),_=Bl(h,E,1e3),E.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Ko(h.h,E),rr(E,R,_)}function Pr(h,_){h.H&&pe(h.H,function(E,R){Ke(_,R,E)}),h.l&&pe({},function(E,R){Ke(_,R,E)})}function Bl(h,_,E){E=Math.min(h.i.length,E);const R=h.l?m(h.l.Ka,h.l,h):null;e:{var q=h.i;let Re=-1;for(;;){const yt=["count="+E];Re==-1?E>0?(Re=q[0].g,yt.push("ofs="+Re)):Re=0:yt.push("ofs="+Re);let Ye=!0;for(let kt=0;kt<E;kt++){var X=q[kt].g;const Cn=q[kt].map;if(X-=Re,X<0)Re=Math.max(0,q[kt].g-100),Ye=!1;else try{X="req"+X+"_"||"";try{var oe=Cn instanceof Map?Cn:Object.entries(Cn);for(const[ii,Nr]of oe){let Dr=Nr;f(Nr)&&(Dr=ji(Nr)),yt.push(X+ii+"="+encodeURIComponent(Dr))}}catch(ii){throw yt.push(X+"type="+encodeURIComponent("_badmap")),ii}}catch{R&&R(Cn)}}if(Ye){oe=yt.join("&");break e}}oe=void 0}return h=h.i.splice(0,E),_.G=h,oe}function Jt(h){if(!h.g&&!h.v){h.Y=1;var _=h.Da;$||b(),H||($(),H=!0),A.add(_,h),h.A=0}}function jr(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Mi(m(h.Da,h),ta(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,Wi(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Mi(m(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ht(10),bn(this),Wi(this))};function Xs(h){h.B!=null&&(l.clearTimeout(h.B),h.B=null)}function Wi(h){h.g=new On(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var _=Bn(h.na);Ke(_,"RID","rpc"),Ke(_,"SID",h.M),Ke(_,"AID",h.K),Ke(_,"CI",h.F?"0":"1"),!h.F&&h.ia&&Ke(_,"TO",h.ia),Ke(_,"TYPE","xmlhttp"),Pr(h,_),h.u&&h.o&&Qo(_,h.u,h.o),h.O&&(h.g.H=h.O);var E=h.g;h=h.ba,E.M=1,E.A=Zr(Bn(_)),E.u=null,E.R=!0,bl(E,h)}n.Va=function(){this.C!=null&&(this.C=null,bn(this),jr(this),ht(19))};function Zo(h){h.C!=null&&(l.clearTimeout(h.C),h.C=null)}function ea(h,_){var E=null;if(h.g==_){Zo(h),Xs(h),h.g=null;var R=2}else if(Al(h.h,_))E=_.G,Ws(h.h,_),R=1;else return;if(h.I!=0){if(_.o)if(R==1){E=_.u?_.u.length:0,_=Date.now()-_.F;var q=h.D;R=Vi(),gt(R,new Tl(R,E)),ri(h)}else Jt(h);else if(q=_.m,q==3||q==0&&_.X>0||!(R==1&&zu(h,_)||R==2&&jr(h)))switch(E&&E.length>0&&(_=h.h,_.i=_.i.concat(E)),q){case 1:In(h,5);break;case 4:In(h,10);break;case 3:In(h,6);break;default:In(h,2)}}}function ta(h,_){let E=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(E*=2),E*_}function In(h,_){if(h.j.info("Error code "+_),_==2){var E=m(h.bb,h),R=h.Ua;const q=!R;R=new kr(R||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Hs(R,"https"),Zr(R),q?Ir(R.toString(),E):Cr(R.toString(),E)}else ht(2);h.I=0,h.l&&h.l.pa(_),Js(h),Jo(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),ht(2)):(this.j.info("Failed to ping google.com"),ht(1))};function Js(h){if(h.I=0,h.ja=[],h.l){const _=kn(h.h);(_.length!=0||h.i.length!=0)&&(k(h.ja,_),k(h.ja,h.i),h.h.i.length=0,T(h.i),h.i.length=0),h.l.oa()}}function Fl(h,_,E){var R=E instanceof kr?Bn(E):new kr(E);if(R.g!="")_&&(R.g=_+"."+R.g),Tr(R,R.u);else{var q=l.location;R=q.protocol,_=_?_+"."+q.hostname:q.hostname,q=+q.port;const X=new kr(null);R&&Hs(X,R),_&&(X.g=_),q&&Tr(X,q),E&&(X.h=E),R=X}return E=h.G,_=h.wa,E&&_&&Ke(R,E,_),Ke(R,"VER",h.ka),Pr(h,R),R}function Uu(h,_,E){if(_&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Aa&&!h.ma?new Je(new ei({ab:E})):new Je(h.ma),_.Fa(h.L),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function $u(){}n=$u.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function na(){}na.prototype.g=function(h,_){return new $t(h,_)};function $t(h,_){Et.call(this),this.g=new Yo(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(h?h["X-WebChannel-Client-Profile"]=_.sa:h={"X-WebChannel-Client-Profile":_.sa}),this.g.U=h,(h=_&&_.Qb)&&!M(h)&&(this.g.u=h),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!M(_)&&(this.g.G=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new Hi(this)}v($t,Et),$t.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},$t.prototype.close=function(){Xo(this.g)},$t.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.v&&(E={},E.__data__=ji(h),h=E);_.i.push(new gf(_.Ya++,h)),_.I==3&&ri(_)},$t.prototype.N=function(){this.g.l=null,delete this.j,Xo(this.g),delete this.g,$t.Z.N.call(this)};function Wu(h){Fo.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const E in _){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}v(Wu,Fo);function Hu(){kl.call(this),this.status=1}v(Hu,kl);function Hi(h){this.g=h}v(Hi,$u),Hi.prototype.ra=function(){gt(this.g,"a")},Hi.prototype.qa=function(h){gt(this.g,new Wu(h))},Hi.prototype.pa=function(h){gt(this.g,new Hu)},Hi.prototype.oa=function(){gt(this.g,"b")},na.prototype.createWebChannel=na.prototype.g,$t.prototype.send=$t.prototype.o,$t.prototype.open=$t.prototype.m,$t.prototype.close=$t.prototype.close,sk=function(){return new na},ik=function(){return Vi()},rk=nr,Lm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Oi.NO_ERROR=0,Oi.TIMEOUT=8,Oi.HTTP_ERROR=6,th=Oi,Bi.COMPLETE="complete",nk=Bi,bu.EventType=Di,Di.OPEN="a",Di.CLOSE="b",Di.ERROR="c",Di.MESSAGE="d",Et.prototype.listen=Et.prototype.J,xc=bu,Je.prototype.listenOnce=Je.prototype.K,Je.prototype.getLastError=Je.prototype.Ha,Je.prototype.getLastErrorCode=Je.prototype.ya,Je.prototype.getStatus=Je.prototype.ca,Je.prototype.getResponseJson=Je.prototype.La,Je.prototype.getResponseText=Je.prototype.la,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Fa,tk=Je}).apply(typeof zd<"u"?zd:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};sn.UNAUTHENTICATED=new sn(null),sn.GOOGLE_CREDENTIALS=new sn("google-credentials-uid"),sn.FIRST_PARTY=new sn("first-party-uid"),sn.MOCK_USER=new sn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sl="12.8.0";function zj(n){sl=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const So=new Mg("@firebase/firestore");function Ta(){return So.logLevel}function de(n,...e){if(So.logLevel<=Le.DEBUG){const t=e.map(Qg);So.debug(`Firestore (${sl}): ${n}`,...t)}}function ki(n,...e){if(So.logLevel<=Le.ERROR){const t=e.map(Qg);So.error(`Firestore (${sl}): ${n}`,...t)}}function $a(n,...e){if(So.logLevel<=Le.WARN){const t=e.map(Qg);So.warn(`Firestore (${sl}): ${n}`,...t)}}function Qg(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,ok(n,r,t)}function ok(n,e,t){let r=`FIRESTORE (${sl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw ki(r),new Error(r)}function Qe(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||ok(e,s,r)}function Pe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends Ii{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Uj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(sn.UNAUTHENTICATED)))}shutdown(){}}class $j{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Wj{constructor(e){this.t=e,this.currentUser=sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Qe(this.o===void 0,42304);let r=this.i;const s=d=>this.i!==r?(r=this.i,t(d)):Promise.resolve();let a=new vi;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new vi,e.enqueueRetryable((()=>s(this.currentUser)))};const l=()=>{const d=a;e.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},f=d=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((d=>f(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?f(d):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new vi)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Qe(typeof r.accessToken=="string",31837,{l:r}),new ak(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string",2055,{h:e}),new sn(e)}}class Hj{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=sn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class Kj{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Hj(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(sn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class vx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qj{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,jn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Qe(this.o===void 0,3512);const r=a=>{a.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.m;return this.m=a.token,de("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const s=a=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>s(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new vx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Qe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new vx(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gj(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=Gj(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<t&&(r+=e.charAt(s[a]%62))}return r}}function Oe(n,e){return n<e?-1:n>e?1:0}function Om(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const s=n.charAt(r),a=e.charAt(r);if(s!==a)return em(s)===em(a)?Oe(s,a):em(s)?1:-1}return Oe(n.length,e.length)}const Qj=55296,Yj=57343;function em(n){const e=n.charCodeAt(0);return e>=Qj&&e<=Yj}function Wa(n,e,t){return n.length===e.length&&n.every(((r,s)=>t(r,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx="__name__";class Br{constructor(e,t,r){t===void 0?t=0:t>e.length&&Te(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Te(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Br.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Br?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const a=Br.compareSegments(e.get(s),t.get(s));if(a!==0)return a}return Oe(e.length,t.length)}static compareSegments(e,t){const r=Br.isNumericId(e),s=Br.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?Br.extractNumericId(e).compare(Br.extractNumericId(t)):Om(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ys.fromString(e.substring(4,e.length-2))}}class et extends Br{construct(e,t,r){return new et(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new le(J.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((s=>s.length>0)))}return new et(t)}static emptyPath(){return new et([])}}const Xj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Gt extends Br{construct(e,t,r){return new Gt(e,t,r)}static isValidIdentifier(e){return Xj.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Gt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===xx}static keyField(){return new Gt([xx])}static fromServerFormat(e){const t=[];let r="",s=0;const a=()=>{if(r.length===0)throw new le(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;s<e.length;){const f=e[s];if(f==="\\"){if(s+1===e.length)throw new le(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new le(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,s+=2}else f==="`"?(l=!l,s++):f!=="."||l?(r+=f,s++):(a(),s++)}if(a(),l)throw new le(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Gt(t)}static emptyPath(){return new Gt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.path=e}static fromPath(e){return new xe(et.fromString(e))}static fromName(e){return new xe(et.fromString(e).popFirst(5))}static empty(){return new xe(et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return et.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xe(new et(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lk(n,e,t){if(!t)throw new le(J.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Jj(n,e,t,r){if(e===!0&&r===!0)throw new le(J.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function _x(n){if(!xe.isDocumentKey(n))throw new le(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function wx(n){if(xe.isDocumentKey(n))throw new le(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ck(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function qh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Te(12329,{type:typeof n})}function Hr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new le(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=qh(n);throw new le(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Zj(n,e){if(e<=0)throw new le(J.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(n,e){const t={typeString:n};return e&&(t.value=e),t}function du(n,e){if(!ck(n))throw new le(J.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const l=n[r];if(s&&typeof l!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(a!==void 0&&l!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new le(J.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex=-62135596800,kx=1e6;class it{static now(){return it.fromMillis(Date.now())}static fromDate(e){return it.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*kx);return new it(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new le(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new le(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Ex)throw new le(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/kx}_compareTo(e){return this.seconds===e.seconds?Oe(this.nanoseconds,e.nanoseconds):Oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:it._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(du(e,it._jsonSchema))return new it(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Ex;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}it._jsonSchemaVersion="firestore/timestamp/1.0",it._jsonSchema={type:At("string",it._jsonSchemaVersion),seconds:At("number"),nanoseconds:At("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{static fromTimestamp(e){return new Ie(e)}static min(){return new Ie(new it(0,0))}static max(){return new Ie(new it(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bc=-1;function e5(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Ie.fromTimestamp(r===1e9?new it(t+1,0):new it(t,r));return new ws(s,xe.empty(),e)}function t5(n){return new ws(n.readTime,n.key,Bc)}class ws{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ws(Ie.min(),xe.empty(),Bc)}static max(){return new ws(Ie.max(),xe.empty(),Bc)}}function n5(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=xe.comparator(n.documentKey,e.documentKey),t!==0?t:Oe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class i5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ol(n){if(n.code!==J.FAILED_PRECONDITION||n.message!==r5)throw n;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Z(((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Z?t:Z.resolve(t)}catch(t){return Z.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Z.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Z.reject(t)}static resolve(e){return new Z(((t,r)=>{t(e)}))}static reject(e){return new Z(((t,r)=>{r(e)}))}static waitFor(e){return new Z(((t,r)=>{let s=0,a=0,l=!1;e.forEach((f=>{++s,f.next((()=>{++a,l&&a===s&&t()}),(d=>r(d)))})),l=!0,a===s&&t()}))}static or(e){let t=Z.resolve(!1);for(const r of e)t=t.next((s=>s?Z.resolve(s):r()));return t}static forEach(e,t){const r=[];return e.forEach(((s,a)=>{r.push(t.call(this,s,a))})),this.waitFor(r)}static mapArray(e,t){return new Z(((r,s)=>{const a=e.length,l=new Array(a);let f=0;for(let d=0;d<a;d++){const m=d;t(e[m]).next((g=>{l[m]=g,++f,f===a&&r(l)}),(g=>s(g)))}}))}static doWhile(e,t){return new Z(((r,s)=>{const a=()=>{e()===!0?t().next((()=>{a()}),s):r()};a()}))}}function s5(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function al(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Gh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xg=-1;function Qh(n){return n==null}function _h(n){return n===0&&1/n==-1/0}function o5(n){return typeof n=="number"&&Number.isInteger(n)&&!_h(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uk="";function a5(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Tx(e)),e=l5(n.get(t),e);return Tx(e)}function l5(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const a=n.charAt(s);switch(a){case"\0":t+="";break;case uk:t+="";break;default:t+=a}}return t}function Tx(n){return n+uk+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sx(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ds(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function dk(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,t){this.comparator=e,this.root=t||qt.EMPTY}insert(e,t){return new dt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,qt.BLACK,null,null))}remove(e){return new dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ud(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ud(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ud(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ud(this.root,e,this.comparator,!0)}}class Ud{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class qt{constructor(e,t,r,s,a){this.key=e,this.value=t,this.color=r??qt.RED,this.left=s??qt.EMPTY,this.right=a??qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,a){return new qt(e??this.key,t??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,t,r),null):a===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return qt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}}qt.EMPTY=null,qt.RED=!0,qt.BLACK=!1;qt.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(e,t,r,s,a){return this}insert(e,t,r){return new qt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.comparator=e,this.data=new dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new bx(this.data.getIterator())}getIteratorFrom(e){return new bx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Dt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Dt(this.comparator);return t.data=e,t}}class bx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.fields=e,e.sort(Gt.comparator)}static empty(){return new Nn([])}unionWith(e){let t=new Dt(Gt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Nn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Wa(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new hk("Invalid base64 string: "+a):a}})(e);return new Yt(t)}static fromUint8Array(e){const t=(function(s){let a="";for(let l=0;l<s.length;++l)a+=String.fromCharCode(s[l]);return a})(e);return new Yt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Yt.EMPTY_BYTE_STRING=new Yt("");const c5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Es(n){if(Qe(!!n,39018),typeof n=="string"){let e=0;const t=c5.exec(n);if(Qe(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:xt(n.seconds),nanos:xt(n.nanos)}}function xt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ks(n){return typeof n=="string"?Yt.fromBase64String(n):Yt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk="server_timestamp",pk="__type__",mk="__previous_value__",gk="__local_write_time__";function Jg(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[pk])==null?void 0:r.stringValue)===fk}function Yh(n){const e=n.mapValue.fields[mk];return Jg(e)?Yh(e):e}function Fc(n){const e=Es(n.mapValue.fields[gk].timestampValue);return new it(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u5{constructor(e,t,r,s,a,l,f,d,m,g,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=f,this.longPollingOptions=d,this.useFetchStreams=m,this.isUsingEmulator=g,this.apiKey=v}}const wh="(default)";class zc{constructor(e,t){this.projectId=e,this.database=t||wh}static empty(){return new zc("","")}get isDefaultDatabase(){return this.database===wh}isEqual(e){return e instanceof zc&&e.projectId===this.projectId&&e.database===this.database}}function d5(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new le(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zc(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk="__type__",h5="__max__",$d={mapValue:{}},vk="__vector__",Eh="value";function Ts(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Jg(n)?4:p5(n)?9007199254740991:f5(n)?10:11:Te(28295,{value:n})}function Kr(n,e){if(n===e)return!0;const t=Ts(n);if(t!==Ts(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Fc(n).isEqual(Fc(e));case 3:return(function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const l=Es(s.timestampValue),f=Es(a.timestampValue);return l.seconds===f.seconds&&l.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,a){return ks(s.bytesValue).isEqual(ks(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,a){return xt(s.geoPointValue.latitude)===xt(a.geoPointValue.latitude)&&xt(s.geoPointValue.longitude)===xt(a.geoPointValue.longitude)})(n,e);case 2:return(function(s,a){if("integerValue"in s&&"integerValue"in a)return xt(s.integerValue)===xt(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const l=xt(s.doubleValue),f=xt(a.doubleValue);return l===f?_h(l)===_h(f):isNaN(l)&&isNaN(f)}return!1})(n,e);case 9:return Wa(n.arrayValue.values||[],e.arrayValue.values||[],Kr);case 10:case 11:return(function(s,a){const l=s.mapValue.fields||{},f=a.mapValue.fields||{};if(Sx(l)!==Sx(f))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(f[d]===void 0||!Kr(l[d],f[d])))return!1;return!0})(n,e);default:return Te(52216,{left:n})}}function Uc(n,e){return(n.values||[]).find((t=>Kr(t,e)))!==void 0}function Ha(n,e){if(n===e)return 0;const t=Ts(n),r=Ts(e);if(t!==r)return Oe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Oe(n.booleanValue,e.booleanValue);case 2:return(function(a,l){const f=xt(a.integerValue||a.doubleValue),d=xt(l.integerValue||l.doubleValue);return f<d?-1:f>d?1:f===d?0:isNaN(f)?isNaN(d)?0:-1:1})(n,e);case 3:return Ix(n.timestampValue,e.timestampValue);case 4:return Ix(Fc(n),Fc(e));case 5:return Om(n.stringValue,e.stringValue);case 6:return(function(a,l){const f=ks(a),d=ks(l);return f.compareTo(d)})(n.bytesValue,e.bytesValue);case 7:return(function(a,l){const f=a.split("/"),d=l.split("/");for(let m=0;m<f.length&&m<d.length;m++){const g=Oe(f[m],d[m]);if(g!==0)return g}return Oe(f.length,d.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,l){const f=Oe(xt(a.latitude),xt(l.latitude));return f!==0?f:Oe(xt(a.longitude),xt(l.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Cx(n.arrayValue,e.arrayValue);case 10:return(function(a,l){var w,T,k,C;const f=a.fields||{},d=l.fields||{},m=(w=f[Eh])==null?void 0:w.arrayValue,g=(T=d[Eh])==null?void 0:T.arrayValue,v=Oe(((k=m==null?void 0:m.values)==null?void 0:k.length)||0,((C=g==null?void 0:g.values)==null?void 0:C.length)||0);return v!==0?v:Cx(m,g)})(n.mapValue,e.mapValue);case 11:return(function(a,l){if(a===$d.mapValue&&l===$d.mapValue)return 0;if(a===$d.mapValue)return 1;if(l===$d.mapValue)return-1;const f=a.fields||{},d=Object.keys(f),m=l.fields||{},g=Object.keys(m);d.sort(),g.sort();for(let v=0;v<d.length&&v<g.length;++v){const w=Om(d[v],g[v]);if(w!==0)return w;const T=Ha(f[d[v]],m[g[v]]);if(T!==0)return T}return Oe(d.length,g.length)})(n.mapValue,e.mapValue);default:throw Te(23264,{he:t})}}function Ix(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Oe(n,e);const t=Es(n),r=Es(e),s=Oe(t.seconds,r.seconds);return s!==0?s:Oe(t.nanos,r.nanos)}function Cx(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const a=Ha(t[s],r[s]);if(a)return a}return Oe(t.length,r.length)}function Ka(n){return Bm(n)}function Bm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Es(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ks(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return xe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",s=!0;for(const a of t.values||[])s?s=!1:r+=",",r+=Bm(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let s="{",a=!0;for(const l of r)a?a=!1:s+=",",s+=`${l}:${Bm(t.fields[l])}`;return s+"}"})(n.mapValue):Te(61005,{value:n})}function nh(n){switch(Ts(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Yh(n);return e?16+nh(e):16;case 5:return 2*n.stringValue.length;case 6:return ks(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,a)=>s+nh(a)),0)})(n.arrayValue);case 10:case 11:return(function(r){let s=0;return Ds(r.fields,((a,l)=>{s+=a.length+nh(l)})),s})(n.mapValue);default:throw Te(13486,{value:n})}}function Ax(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Fm(n){return!!n&&"integerValue"in n}function Zg(n){return!!n&&"arrayValue"in n}function Rx(n){return!!n&&"nullValue"in n}function Px(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function rh(n){return!!n&&"mapValue"in n}function f5(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[yk])==null?void 0:r.stringValue)===vk}function Ic(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ds(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Ic(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ic(n.arrayValue.values[t]);return e}return{...n}}function p5(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===h5}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.value=e}static empty(){return new wn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!rh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ic(t)}setAll(e){let t=Gt.emptyPath(),r={},s=[];e.forEach(((l,f)=>{if(!t.isImmediateParentOf(f)){const d=this.getFieldsMap(t);this.applyChanges(d,r,s),r={},s=[],t=f.popLast()}l?r[f.lastSegment()]=Ic(l):s.push(f.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,r,s)}delete(e){const t=this.field(e.popLast());rh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Kr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];rh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Ds(t,((s,a)=>e[s]=a));for(const s of r)delete e[s]}clone(){return new wn(Ic(this.value))}}function xk(n){const e=[];return Ds(n.fields,((t,r)=>{const s=new Gt([t]);if(rh(r)){const a=xk(r.mapValue).fields;if(a.length===0)e.push(s);else for(const l of a)e.push(s.child(l))}else e.push(s)})),new Nn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e,t,r,s,a,l,f){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=a,this.data=l,this.documentState=f}static newInvalidDocument(e){return new on(e,0,Ie.min(),Ie.min(),Ie.min(),wn.empty(),0)}static newFoundDocument(e,t,r,s){return new on(e,1,t,Ie.min(),r,s,0)}static newNoDocument(e,t){return new on(e,2,t,Ie.min(),Ie.min(),wn.empty(),0)}static newUnknownDocument(e,t){return new on(e,3,t,Ie.min(),Ie.min(),wn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof on&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new on(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,t){this.position=e,this.inclusive=t}}function jx(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const a=e[s],l=n.position[s];if(a.field.isKeyField()?r=xe.comparator(xe.fromName(l.referenceValue),t.key):r=Ha(l,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function Nx(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Kr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e,t="asc"){this.field=e,this.dir=t}}function m5(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{}class Ct extends _k{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new y5(e,t,r):t==="array-contains"?new _5(e,r):t==="in"?new w5(e,r):t==="not-in"?new E5(e,r):t==="array-contains-any"?new k5(e,r):new Ct(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new v5(e,r):new x5(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ha(t,this.value)):t!==null&&Ts(this.value)===Ts(t)&&this.matchesComparison(Ha(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vr extends _k{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new vr(e,t)}matches(e){return wk(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function wk(n){return n.op==="and"}function Ek(n){return g5(n)&&wk(n)}function g5(n){for(const e of n.filters)if(e instanceof vr)return!1;return!0}function zm(n){if(n instanceof Ct)return n.field.canonicalString()+n.op.toString()+Ka(n.value);if(Ek(n))return n.filters.map((e=>zm(e))).join(",");{const e=n.filters.map((t=>zm(t))).join(",");return`${n.op}(${e})`}}function kk(n,e){return n instanceof Ct?(function(r,s){return s instanceof Ct&&r.op===s.op&&r.field.isEqual(s.field)&&Kr(r.value,s.value)})(n,e):n instanceof vr?(function(r,s){return s instanceof vr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((a,l,f)=>a&&kk(l,s.filters[f])),!0):!1})(n,e):void Te(19439)}function Tk(n){return n instanceof Ct?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ka(t.value)}`})(n):n instanceof vr?(function(t){return t.op.toString()+" {"+t.getFilters().map(Tk).join(" ,")+"}"})(n):"Filter"}class y5 extends Ct{constructor(e,t,r){super(e,t,r),this.key=xe.fromName(r.referenceValue)}matches(e){const t=xe.comparator(e.key,this.key);return this.matchesComparison(t)}}class v5 extends Ct{constructor(e,t){super(e,"in",t),this.keys=Sk("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class x5 extends Ct{constructor(e,t){super(e,"not-in",t),this.keys=Sk("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Sk(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((r=>xe.fromName(r.referenceValue)))}class _5 extends Ct{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Zg(t)&&Uc(t.arrayValue,this.value)}}class w5 extends Ct{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Uc(this.value.arrayValue,t)}}class E5 extends Ct{constructor(e,t){super(e,"not-in",t)}matches(e){if(Uc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Uc(this.value.arrayValue,t)}}class k5 extends Ct{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Zg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Uc(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T5{constructor(e,t=null,r=[],s=[],a=null,l=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=l,this.endAt=f,this.Te=null}}function Dx(n,e=null,t=[],r=[],s=null,a=null,l=null){return new T5(n,e,t,r,s,a,l)}function ey(n){const e=Pe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>zm(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),Qh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Ka(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Ka(r))).join(",")),e.Te=t}return e.Te}function ty(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!m5(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!kk(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Nx(n.startAt,e.startAt)&&Nx(n.endAt,e.endAt)}function Um(n){return xe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(e,t=null,r=[],s=[],a=null,l="F",f=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=l,this.startAt=f,this.endAt=d,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function S5(n,e,t,r,s,a,l,f){return new ll(n,e,t,r,s,a,l,f)}function ny(n){return new ll(n)}function Vx(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function b5(n){return xe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function bk(n){return n.collectionGroup!==null}function Cc(n){const e=Pe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let f=new Dt(Gt.comparator);return l.filters.forEach((d=>{d.getFlattenedFilters().forEach((m=>{m.isInequality()&&(f=f.add(m.field))}))})),f})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new $c(a,r))})),t.has(Gt.keyField().canonicalString())||e.Ie.push(new $c(Gt.keyField(),r))}return e.Ie}function zr(n){const e=Pe(n);return e.Ee||(e.Ee=I5(e,Cc(n))),e.Ee}function I5(n,e){if(n.limitType==="F")return Dx(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const a=s.dir==="desc"?"asc":"desc";return new $c(s.field,a)}));const t=n.endAt?new kh(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new kh(n.startAt.position,n.startAt.inclusive):null;return Dx(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function $m(n,e){const t=n.filters.concat([e]);return new ll(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function C5(n,e){const t=n.explicitOrderBy.concat([e]);return new ll(n.path,n.collectionGroup,t,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}function Th(n,e,t){return new ll(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Xh(n,e){return ty(zr(n),zr(e))&&n.limitType===e.limitType}function Ik(n){return`${ey(zr(n))}|lt:${n.limitType}`}function Sa(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((s=>Tk(s))).join(", ")}]`),Qh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((s=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(s))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((s=>Ka(s))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((s=>Ka(s))).join(",")),`Target(${r})`})(zr(n))}; limitType=${n.limitType})`}function Jh(n,e){return e.isFoundDocument()&&(function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):xe.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,e)&&(function(r,s){for(const a of Cc(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0})(n,e)&&(function(r,s){return!(r.startAt&&!(function(l,f,d){const m=jx(l,f,d);return l.inclusive?m<=0:m<0})(r.startAt,Cc(r),s)||r.endAt&&!(function(l,f,d){const m=jx(l,f,d);return l.inclusive?m>=0:m>0})(r.endAt,Cc(r),s))})(n,e)}function A5(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Ck(n){return(e,t)=>{let r=!1;for(const s of Cc(n)){const a=R5(s,e,t);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function R5(n,e,t){const r=n.field.isKeyField()?xe.comparator(e.key,t.key):(function(a,l,f){const d=l.data.field(a),m=f.data.field(a);return d!==null&&m!==null?Ha(d,m):Te(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Te(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ds(this.inner,((t,r)=>{for(const[s,a]of r)e(s,a)}))}isEmpty(){return dk(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P5=new dt(xe.comparator);function Ti(){return P5}const Ak=new dt(xe.comparator);function _c(...n){let e=Ak;for(const t of n)e=e.insert(t.key,t);return e}function Rk(n){let e=Ak;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function go(){return Ac()}function Pk(){return Ac()}function Ac(){return new Po((n=>n.toString()),((n,e)=>n.isEqual(e)))}const j5=new dt(xe.comparator),N5=new Dt(xe.comparator);function Be(...n){let e=N5;for(const t of n)e=e.add(t);return e}const D5=new Dt(Oe);function V5(){return D5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ry(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_h(e)?"-0":e}}function jk(n){return{integerValue:""+n}}function Nk(n,e){return o5(e)?jk(e):ry(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(){this._=void 0}}function M5(n,e,t){return n instanceof Wc?(function(s,a){const l={fields:{[pk]:{stringValue:fk},[gk]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Jg(a)&&(a=Yh(a)),a&&(l.fields[mk]=a),{mapValue:l}})(t,e):n instanceof qa?Vk(n,e):n instanceof Hc?Mk(n,e):(function(s,a){const l=Dk(s,a),f=Mx(l)+Mx(s.Ae);return Fm(l)&&Fm(s.Ae)?jk(f):ry(s.serializer,f)})(n,e)}function L5(n,e,t){return n instanceof qa?Vk(n,e):n instanceof Hc?Mk(n,e):t}function Dk(n,e){return n instanceof Kc?(function(r){return Fm(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class Wc extends Zh{}class qa extends Zh{constructor(e){super(),this.elements=e}}function Vk(n,e){const t=Lk(e);for(const r of n.elements)t.some((s=>Kr(s,r)))||t.push(r);return{arrayValue:{values:t}}}class Hc extends Zh{constructor(e){super(),this.elements=e}}function Mk(n,e){let t=Lk(e);for(const r of n.elements)t=t.filter((s=>!Kr(s,r)));return{arrayValue:{values:t}}}class Kc extends Zh{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Mx(n){return xt(n.integerValue||n.doubleValue)}function Lk(n){return Zg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(e,t){this.field=e,this.transform=t}}function O5(n,e){return n.field.isEqual(e.field)&&(function(r,s){return r instanceof qa&&s instanceof qa||r instanceof Hc&&s instanceof Hc?Wa(r.elements,s.elements,Kr):r instanceof Kc&&s instanceof Kc?Kr(r.Ae,s.Ae):r instanceof Wc&&s instanceof Wc})(n.transform,e.transform)}class B5{constructor(e,t){this.version=e,this.transformResults=t}}class mr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new mr}static exists(e){return new mr(void 0,e)}static updateTime(e){return new mr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ih(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class ef{}function Ok(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Fk(n.key,mr.none()):new hu(n.key,n.data,mr.none());{const t=n.data,r=wn.empty();let s=new Dt(Gt.comparator);for(let a of e.fields)if(!s.has(a)){let l=t.field(a);l===null&&a.length>1&&(a=a.popLast(),l=t.field(a)),l===null?r.delete(a):r.set(a,l),s=s.add(a)}return new Vs(n.key,r,new Nn(s.toArray()),mr.none())}}function F5(n,e,t){n instanceof hu?(function(s,a,l){const f=s.value.clone(),d=Ox(s.fieldTransforms,a,l.transformResults);f.setAll(d),a.convertToFoundDocument(l.version,f).setHasCommittedMutations()})(n,e,t):n instanceof Vs?(function(s,a,l){if(!ih(s.precondition,a))return void a.convertToUnknownDocument(l.version);const f=Ox(s.fieldTransforms,a,l.transformResults),d=a.data;d.setAll(Bk(s)),d.setAll(f),a.convertToFoundDocument(l.version,d).setHasCommittedMutations()})(n,e,t):(function(s,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function Rc(n,e,t,r){return n instanceof hu?(function(a,l,f,d){if(!ih(a.precondition,l))return f;const m=a.value.clone(),g=Bx(a.fieldTransforms,d,l);return m.setAll(g),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),null})(n,e,t,r):n instanceof Vs?(function(a,l,f,d){if(!ih(a.precondition,l))return f;const m=Bx(a.fieldTransforms,d,l),g=l.data;return g.setAll(Bk(a)),g.setAll(m),l.convertToFoundDocument(l.version,g).setHasLocalMutations(),f===null?null:f.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((v=>v.field)))})(n,e,t,r):(function(a,l,f){return ih(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):f})(n,e,t)}function z5(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),a=Dk(r.transform,s||null);a!=null&&(t===null&&(t=wn.empty()),t.set(r.field,a))}return t||null}function Lx(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Wa(r,s,((a,l)=>O5(a,l)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class hu extends ef{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Vs extends ef{constructor(e,t,r,s,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Bk(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function Ox(n,e,t){const r=new Map;Qe(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let s=0;s<t.length;s++){const a=n[s],l=a.transform,f=e.data.field(a.field);r.set(a.field,L5(l,f,t[s]))}return r}function Bx(n,e,t){const r=new Map;for(const s of n){const a=s.transform,l=t.data.field(s.field);r.set(s.field,M5(a,l,e))}return r}class Fk extends ef{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class U5 extends ef{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $5{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&F5(a,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Rc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Rc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Pk();return this.mutations.forEach((s=>{const a=e.get(s.key),l=a.overlayedDocument;let f=this.applyToLocalView(l,a.mutatedFields);f=t.has(s.key)?null:f;const d=Ok(l,f);d!==null&&r.set(s.key,d),l.isValidDocument()||l.convertToNoDocument(Ie.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Be())}isEqual(e){return this.batchId===e.batchId&&Wa(this.mutations,e.mutations,((t,r)=>Lx(t,r)))&&Wa(this.baseMutations,e.baseMutations,((t,r)=>Lx(t,r)))}}class sy{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Qe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return j5})();const a=e.mutations;for(let l=0;l<a.length;l++)s=s.insert(a[l].key,r[l].version);return new sy(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W5{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bt,ze;function K5(n){switch(n){case J.OK:return Te(64938);case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return Te(15467,{code:n})}}function zk(n){if(n===void 0)return ki("GRPC error has no .code"),J.UNKNOWN;switch(n){case bt.OK:return J.OK;case bt.CANCELLED:return J.CANCELLED;case bt.UNKNOWN:return J.UNKNOWN;case bt.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case bt.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case bt.INTERNAL:return J.INTERNAL;case bt.UNAVAILABLE:return J.UNAVAILABLE;case bt.UNAUTHENTICATED:return J.UNAUTHENTICATED;case bt.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case bt.NOT_FOUND:return J.NOT_FOUND;case bt.ALREADY_EXISTS:return J.ALREADY_EXISTS;case bt.PERMISSION_DENIED:return J.PERMISSION_DENIED;case bt.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case bt.ABORTED:return J.ABORTED;case bt.OUT_OF_RANGE:return J.OUT_OF_RANGE;case bt.UNIMPLEMENTED:return J.UNIMPLEMENTED;case bt.DATA_LOSS:return J.DATA_LOSS;default:return Te(39323,{code:n})}}(ze=bt||(bt={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q5(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G5=new ys([4294967295,4294967295],0);function Fx(n){const e=q5().encode(n),t=new ek;return t.update(e),new Uint8Array(t.digest())}function zx(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new ys([t,r],0),new ys([s,a],0)]}class oy{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new wc(`Invalid padding: ${t}`);if(r<0)throw new wc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new wc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new wc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ys.fromNumber(this.ge)}ye(e,t,r){let s=e.add(t.multiply(ys.fromNumber(r)));return s.compare(G5)===1&&(s=new ys([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Fx(e),[r,s]=zx(t);for(let a=0;a<this.hashCount;a++){const l=this.ye(r,s,a);if(!this.we(l))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new oy(a,s,t);return r.forEach((f=>l.insert(f))),l}insert(e){if(this.ge===0)return;const t=Fx(e),[r,s]=zx(t);for(let a=0;a<this.hashCount;a++){const l=this.ye(r,s,a);this.be(l)}}be(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class wc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,t,r,s,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,fu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new tf(Ie.min(),s,new dt(Oe),Ti(),Be())}}class fu{constructor(e,t,r,s,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new fu(r,t,Be(),Be(),Be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e,t,r,s){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=s}}class Uk{constructor(e,t){this.targetId=e,this.Ce=t}}class $k{constructor(e,t,r=Yt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class Ux{constructor(){this.ve=0,this.Fe=$x(),this.Me=Yt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Be(),t=Be(),r=Be();return this.Fe.forEach(((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Te(38017,{changeType:a})}})),new fu(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=$x()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Qe(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class Q5{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ti(),this.He=Wd(),this.Je=Wd(),this.Ze=new dt(Oe)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Te(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,r=e.Ce.count,s=this.ot(t);if(s){const a=s.target;if(Um(a))if(r===0){const l=new xe(a.path);this.et(t,l,on.newNoDocument(l,Ie.min()))}else Qe(r===1,20013,{expectedCount:r});else{const l=this._t(t);if(l!==r){const f=this.ut(e),d=f?this.ct(f,e,l):1;if(d!==0){this.it(t);const m=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,m)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=t;let l,f;try{l=ks(r).toUint8Array()}catch(d){if(d instanceof hk)return $a("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{f=new oy(l,s,a)}catch(d){return $a(d instanceof wc?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return f.ge===0?null:f}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let s=0;return r.forEach((a=>{const l=this.Ge.ht(),f=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(f)||(this.et(t,a,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((a,l)=>{const f=this.ot(l);if(f){if(a.current&&Um(f.target)){const d=new xe(f.target.path);this.It(d).has(l)||this.Et(l,d)||this.et(l,d,on.newNoDocument(d,e))}a.Be&&(t.set(l,a.ke()),a.Ke())}}));let r=Be();this.Je.forEach(((a,l)=>{let f=!0;l.forEachWhile((d=>{const m=this.ot(d);return!m||m.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(r=r.add(a))})),this.je.forEach(((a,l)=>l.setReadTime(e)));const s=new tf(e,t,this.Ze,this.je,r);return this.je=Ti(),this.He=Wd(),this.Je=Wd(),this.Ze=new dt(Oe),s}Ye(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.qe(t,1):s.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new Ux,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Dt(Oe),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Dt(Oe),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||de("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Ux),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Wd(){return new dt(xe.comparator)}function $x(){return new dt(xe.comparator)}const Y5={asc:"ASCENDING",desc:"DESCENDING"},X5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},J5={and:"AND",or:"OR"};class Z5{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Wm(n,e){return n.useProto3Json||Qh(e)?e:{value:e}}function Sh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Wk(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function eN(n,e){return Sh(n,e.toTimestamp())}function Ur(n){return Qe(!!n,49232),Ie.fromTimestamp((function(t){const r=Es(t);return new it(r.seconds,r.nanos)})(n))}function ay(n,e){return Hm(n,e).canonicalString()}function Hm(n,e){const t=(function(s){return new et(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function Hk(n){const e=et.fromString(n);return Qe(Yk(e),10190,{key:e.toString()}),e}function Km(n,e){return ay(n.databaseId,e.path)}function tm(n,e){const t=Hk(e);if(t.get(1)!==n.databaseId.projectId)throw new le(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new le(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new xe(qk(t))}function Kk(n,e){return ay(n.databaseId,e)}function tN(n){const e=Hk(n);return e.length===4?et.emptyPath():qk(e)}function qm(n){return new et(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function qk(n){return Qe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Wx(n,e,t){return{name:Km(n,e),fields:t.value.mapValue.fields}}function nN(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Te(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=(function(m,g){return m.useProto3Json?(Qe(g===void 0||typeof g=="string",58123),Yt.fromBase64String(g||"")):(Qe(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),Yt.fromUint8Array(g||new Uint8Array))})(n,e.targetChange.resumeToken),l=e.targetChange.cause,f=l&&(function(m){const g=m.code===void 0?J.UNKNOWN:zk(m.code);return new le(g,m.message||"")})(l);t=new $k(r,s,a,f||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=tm(n,r.document.name),a=Ur(r.document.updateTime),l=r.document.createTime?Ur(r.document.createTime):Ie.min(),f=new wn({mapValue:{fields:r.document.fields}}),d=on.newFoundDocument(s,a,l,f),m=r.targetIds||[],g=r.removedTargetIds||[];t=new sh(m,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=tm(n,r.document),a=r.readTime?Ur(r.readTime):Ie.min(),l=on.newNoDocument(s,a),f=r.removedTargetIds||[];t=new sh([],f,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=tm(n,r.document),a=r.removedTargetIds||[];t=new sh([],a,s,null)}else{if(!("filter"in e))return Te(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,l=new H5(s,a),f=r.targetId;t=new Uk(f,l)}}return t}function rN(n,e){let t;if(e instanceof hu)t={update:Wx(n,e.key,e.value)};else if(e instanceof Fk)t={delete:Km(n,e.key)};else if(e instanceof Vs)t={update:Wx(n,e.key,e.data),updateMask:hN(e.fieldMask)};else{if(!(e instanceof U5))return Te(16599,{dt:e.type});t={verify:Km(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(a,l){const f=l.transform;if(f instanceof Wc)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof qa)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Hc)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Kc)return{fieldPath:l.field.canonicalString(),increment:f.Ae};throw Te(20930,{transform:l.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(s,a){return a.updateTime!==void 0?{updateTime:eN(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Te(27497)})(n,e.precondition)),t}function iN(n,e){return n&&n.length>0?(Qe(e!==void 0,14353),n.map((t=>(function(s,a){let l=s.updateTime?Ur(s.updateTime):Ur(a);return l.isEqual(Ie.min())&&(l=Ur(a)),new B5(l,s.transformResults||[])})(t,e)))):[]}function sN(n,e){return{documents:[Kk(n,e.path)]}}function oN(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Kk(n,s);const a=(function(m){if(m.length!==0)return Qk(vr.create(m,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const l=(function(m){if(m.length!==0)return m.map((g=>(function(w){return{field:ba(w.field),direction:cN(w.dir)}})(g)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const f=Wm(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:t,parent:s}}function aN(n){let e=tN(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Qe(r===1,65062);const g=t.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let a=[];t.where&&(a=(function(v){const w=Gk(v);return w instanceof vr&&Ek(w)?w.getFilters():[w]})(t.where));let l=[];t.orderBy&&(l=(function(v){return v.map((w=>(function(k){return new $c(Ia(k.field),(function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(w)))})(t.orderBy));let f=null;t.limit&&(f=(function(v){let w;return w=typeof v=="object"?v.value:v,Qh(w)?null:w})(t.limit));let d=null;t.startAt&&(d=(function(v){const w=!!v.before,T=v.values||[];return new kh(T,w)})(t.startAt));let m=null;return t.endAt&&(m=(function(v){const w=!v.before,T=v.values||[];return new kh(T,w)})(t.endAt)),S5(e,s,l,a,f,"F",d,m)}function lN(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Gk(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Ia(t.unaryFilter.field);return Ct.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ia(t.unaryFilter.field);return Ct.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Ia(t.unaryFilter.field);return Ct.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Ia(t.unaryFilter.field);return Ct.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ct.create(Ia(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return vr.create(t.compositeFilter.filters.map((r=>Gk(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Te(1026)}})(t.compositeFilter.op))})(n):Te(30097,{filter:n})}function cN(n){return Y5[n]}function uN(n){return X5[n]}function dN(n){return J5[n]}function ba(n){return{fieldPath:n.canonicalString()}}function Ia(n){return Gt.fromServerFormat(n.fieldPath)}function Qk(n){return n instanceof Ct?(function(t){if(t.op==="=="){if(Px(t.value))return{unaryFilter:{field:ba(t.field),op:"IS_NAN"}};if(Rx(t.value))return{unaryFilter:{field:ba(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Px(t.value))return{unaryFilter:{field:ba(t.field),op:"IS_NOT_NAN"}};if(Rx(t.value))return{unaryFilter:{field:ba(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ba(t.field),op:uN(t.op),value:t.value}}})(n):n instanceof vr?(function(t){const r=t.getFilters().map((s=>Qk(s)));return r.length===1?r[0]:{compositeFilter:{op:dN(t.op),filters:r}}})(n):Te(54877,{filter:n})}function hN(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Yk(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function Xk(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e,t,r,s,a=Ie.min(),l=Ie.min(),f=Yt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=f,this.expectedCount=d}withSequenceNumber(e){return new hs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new hs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(e){this.yt=e}}function pN(n){const e=aN({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Th(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(){this.Sn=new gN}addToCollectionParentIndex(e,t){return this.Sn.add(t),Z.resolve()}getCollectionParents(e,t){return Z.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return Z.resolve()}deleteFieldIndex(e,t){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,t){return Z.resolve()}getDocumentsMatchingTarget(e,t){return Z.resolve(null)}getIndexType(e,t){return Z.resolve(0)}getFieldIndexes(e,t){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,t){return Z.resolve(ws.min())}getMinOffsetFromCollectionGroup(e,t){return Z.resolve(ws.min())}updateCollectionGroup(e,t,r){return Z.resolve()}updateIndexEntries(e,t){return Z.resolve()}}class gN{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Dt(et.comparator),a=!s.has(r);return this.index[t]=s.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Dt(et.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Jk=41943040;class _n{static withCacheSize(e){return new _n(e,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_n.DEFAULT_COLLECTION_PERCENTILE=10,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_n.DEFAULT=new _n(Jk,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_n.DISABLED=new _n(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Ga(0)}static ar(){return new Ga(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kx="LruGarbageCollector",yN=1048576;function qx([n,e],[t,r]){const s=Oe(n,t);return s===0?Oe(e,r):s}class vN{constructor(e){this.Pr=e,this.buffer=new Dt(qx),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();qx(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class xN{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){de(Kx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){al(t)?de(Kx,"Ignoring IndexedDB error during garbage collection: ",t):await ol(t)}await this.Ar(3e5)}))}}class _N{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return Z.resolve(Gh.ce);const r=new vN(t);return this.Vr.forEachTarget(e,(s=>r.Er(s.sequenceNumber))).next((()=>this.Vr.mr(e,(s=>r.Er(s))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(Hx)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Hx):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,s,a,l,f,d,m;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),s=this.params.maximumSequenceNumbersToCollect):s=v,l=Date.now(),this.nthSequenceNumber(e,s)))).next((v=>(r=v,f=Date.now(),this.removeTargets(e,r,t)))).next((v=>(a=v,d=Date.now(),this.removeOrphanedDocuments(e,r)))).next((v=>(m=Date.now(),Ta()<=Le.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-g}ms
	Determined least recently used ${s} in `+(f-l)+`ms
	Removed ${a} targets in `+(d-f)+`ms
	Removed ${v} documents in `+(m-d)+`ms
Total Duration: ${m-g}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:v}))))}}function wN(n,e){return new _N(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(){this.changes=new Po((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,on.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?Z.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(r!==null&&Rc(r.mutation,s,Nn.empty(),it.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Be()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Be()){const s=go();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,r).next((a=>{let l=_c();return a.forEach(((f,d)=>{l=l.insert(f,d.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const r=go();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Be())))}populateOverlays(e,t,r){const s=[];return r.forEach((a=>{t.has(a)||s.push(a)})),this.documentOverlayCache.getOverlays(e,s).next((a=>{a.forEach(((l,f)=>{t.set(l,f)}))}))}computeViews(e,t,r,s){let a=Ti();const l=Ac(),f=(function(){return Ac()})();return t.forEach(((d,m)=>{const g=r.get(m.key);s.has(m.key)&&(g===void 0||g.mutation instanceof Vs)?a=a.insert(m.key,m):g!==void 0?(l.set(m.key,g.mutation.getFieldMask()),Rc(g.mutation,m,g.mutation.getFieldMask(),it.now())):l.set(m.key,Nn.empty())})),this.recalculateAndSaveOverlays(e,a).next((d=>(d.forEach(((m,g)=>l.set(m,g))),t.forEach(((m,g)=>f.set(m,new kN(g,l.get(m)??null)))),f)))}recalculateAndSaveOverlays(e,t){const r=Ac();let s=new dt(((l,f)=>l-f)),a=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const f of l)f.keys().forEach((d=>{const m=t.get(d);if(m===null)return;let g=r.get(d)||Nn.empty();g=f.applyToLocalView(m,g),r.set(d,g);const v=(s.get(f.batchId)||Be()).add(d);s=s.insert(f.batchId,v)}))})).next((()=>{const l=[],f=s.getReverseIterator();for(;f.hasNext();){const d=f.getNext(),m=d.key,g=d.value,v=Pk();g.forEach((w=>{if(!a.has(w)){const T=Ok(t.get(w),r.get(w));T!==null&&v.set(w,T),a=a.add(w)}})),l.push(this.documentOverlayCache.saveOverlays(e,m,v))}return Z.waitFor(l)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,s){return b5(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):bk(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next((a=>{const l=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-a.size):Z.resolve(go());let f=Bc,d=a;return l.next((m=>Z.forEach(m,((g,v)=>(f<v.largestBatchId&&(f=v.largestBatchId),a.get(g)?Z.resolve():this.remoteDocumentCache.getEntry(e,g).next((w=>{d=d.insert(g,w)}))))).next((()=>this.populateOverlays(e,m,a))).next((()=>this.computeViews(e,d,m,Be()))).next((g=>({batchId:f,changes:Rk(g)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new xe(t)).next((r=>{let s=_c();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const a=t.collectionGroup;let l=_c();return this.indexManager.getCollectionParents(e,a).next((f=>Z.forEach(f,(d=>{const m=(function(v,w){return new ll(w,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(t,d.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,r,s).next((g=>{g.forEach(((v,w)=>{l=l.insert(v,w)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,s)))).next((l=>{a.forEach(((d,m)=>{const g=m.getKey();l.get(g)===null&&(l=l.insert(g,on.newInvalidDocument(g)))}));let f=_c();return l.forEach(((d,m)=>{const g=a.get(d);g!==void 0&&Rc(g.mutation,m,Nn.empty(),it.now()),Jh(t,m)&&(f=f.insert(d,m))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return Z.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Ur(s.createTime)}})(t)),Z.resolve()}getNamedQuery(e,t){return Z.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(s){return{name:s.name,query:pN(s.bundledQuery),readTime:Ur(s.readTime)}})(t)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(){this.overlays=new dt(xe.comparator),this.Lr=new Map}getOverlay(e,t){return Z.resolve(this.overlays.get(t))}getOverlays(e,t){const r=go();return Z.forEach(t,(s=>this.getOverlay(e,s).next((a=>{a!==null&&r.set(s,a)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((s,a)=>{this.bt(e,t,a)})),Z.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Lr.get(r);return s!==void 0&&(s.forEach((a=>this.overlays=this.overlays.remove(a))),this.Lr.delete(r)),Z.resolve()}getOverlaysForCollection(e,t,r){const s=go(),a=t.length+1,l=new xe(t.child("")),f=this.overlays.getIteratorFrom(l);for(;f.hasNext();){const d=f.getNext().value,m=d.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&d.largestBatchId>r&&s.set(d.getKey(),d)}return Z.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let a=new dt(((m,g)=>m-g));const l=this.overlays.getIterator();for(;l.hasNext();){const m=l.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let g=a.get(m.largestBatchId);g===null&&(g=go(),a=a.insert(m.largestBatchId,g)),g.set(m.getKey(),m)}}const f=go(),d=a.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((m,g)=>f.set(m,g))),!(f.size()>=s)););return Z.resolve(f)}bt(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const l=this.Lr.get(s.largestBatchId).delete(r.key);this.Lr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new W5(t,r));let a=this.Lr.get(t);a===void 0&&(a=Be(),this.Lr.set(t,a)),this.Lr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(){this.sessionToken=Yt.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(){this.kr=new Dt(Ft.Kr),this.qr=new Dt(Ft.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const r=new Ft(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new Ft(e,t))}Qr(e,t){e.forEach((r=>this.removeReference(r,t)))}Gr(e){const t=new xe(new et([])),r=new Ft(t,e),s=new Ft(t,e+1),a=[];return this.qr.forEachInRange([r,s],(l=>{this.Wr(l),a.push(l.key)})),a}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new xe(new et([])),r=new Ft(t,e),s=new Ft(t,e+1);let a=Be();return this.qr.forEachInRange([r,s],(l=>{a=a.add(l.key)})),a}containsKey(e){const t=new Ft(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Ft{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return xe.comparator(e.key,t.key)||Oe(e.Hr,t.Hr)}static Ur(e,t){return Oe(e.Hr,t.Hr)||xe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Dt(Ft.Kr)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const a=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new $5(a,t,r,s);this.mutationQueue.push(l);for(const f of s)this.Jr=this.Jr.add(new Ft(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return Z.resolve(l)}lookupMutationBatch(e,t){return Z.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Xr(r),a=s<0?0:s;return Z.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?Xg:this.Yn-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ft(t,0),s=new Ft(t,Number.POSITIVE_INFINITY),a=[];return this.Jr.forEachInRange([r,s],(l=>{const f=this.Zr(l.Hr);a.push(f)})),Z.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Dt(Oe);return t.forEach((s=>{const a=new Ft(s,0),l=new Ft(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([a,l],(f=>{r=r.add(f.Hr)}))})),Z.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let a=r;xe.isDocumentKey(a)||(a=a.child(""));const l=new Ft(new xe(a),0);let f=new Dt(Oe);return this.Jr.forEachWhile((d=>{const m=d.key.path;return!!r.isPrefixOf(m)&&(m.length===s&&(f=f.add(d.Hr)),!0)}),l),Z.resolve(this.Yr(f))}Yr(e){const t=[];return e.forEach((r=>{const s=this.Zr(r);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){Qe(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return Z.forEach(t.mutations,(s=>{const a=new Ft(s.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,t){const r=new Ft(t,0),s=this.Jr.firstAfterOrEqual(r);return Z.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e){this.ti=e,this.docs=(function(){return new dt(xe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),a=s?s.size:0,l=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Z.resolve(r?r.document.mutableCopy():on.newInvalidDocument(t))}getEntries(e,t){let r=Ti();return t.forEach((s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():on.newInvalidDocument(s))})),Z.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let a=Ti();const l=t.path,f=new xe(l.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(f);for(;d.hasNext();){const{key:m,value:{document:g}}=d.getNext();if(!l.isPrefixOf(m.path))break;m.path.length>l.length+1||n5(t5(g),r)<=0||(s.has(g.key)||Jh(t,g))&&(a=a.insert(g.key,g.mutableCopy()))}return Z.resolve(a)}getAllFromCollectionGroup(e,t,r,s){Te(9500)}ni(e,t){return Z.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new RN(this)}getSize(e){return Z.resolve(this.size)}}class RN extends EN{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?t.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(r)})),Z.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e){this.persistence=e,this.ri=new Po((t=>ey(t)),ty),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.ii=0,this.si=new ly,this.targetCount=0,this.oi=Ga._r()}forEachTarget(e,t){return this.ri.forEach(((r,s)=>t(s))),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),Z.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Ga(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,Z.resolve()}updateTargetData(e,t){return this.lr(t),Z.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,t,r){let s=0;const a=[];return this.ri.forEach(((l,f)=>{f.sequenceNumber<=t&&r.get(f.targetId)===null&&(this.ri.delete(l),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),s++)})),Z.waitFor(a).next((()=>s))}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,t){const r=this.ri.get(t)||null;return Z.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),Z.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);const s=this.persistence.referenceDelegate,a=[];return s&&t.forEach((l=>{a.push(s.markPotentiallyOrphaned(e,l))})),Z.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),Z.resolve()}getMatchingKeysForTargetId(e,t){const r=this.si.jr(t);return Z.resolve(r)}containsKey(e,t){return Z.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(e,t){this._i={},this.overlays={},this.ai=new Gh(0),this.ui=!1,this.ui=!0,this.ci=new IN,this.referenceDelegate=e(this),this.li=new PN(this),this.indexManager=new mN,this.remoteDocumentCache=(function(s){return new AN(s)})((r=>this.referenceDelegate.hi(r))),this.serializer=new fN(t),this.Pi=new SN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new bN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new CN(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){de("MemoryPersistence","Starting transaction:",e);const s=new jN(this.ai.next());return this.referenceDelegate.Ti(),r(s).next((a=>this.referenceDelegate.Ii(s).next((()=>a)))).toPromise().then((a=>(s.raiseOnCommittedEvent(),a)))}Ei(e,t){return Z.or(Object.values(this._i).map((r=>()=>r.containsKey(e,t))))}}class jN extends i5{constructor(e){super(),this.currentSequenceNumber=e}}class cy{constructor(e){this.persistence=e,this.Ri=new ly,this.Ai=null}static Vi(e){return new cy(e)}get di(){if(this.Ai)return this.Ai;throw Te(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),Z.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),Z.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),Z.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((s=>this.di.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((a=>this.di.add(a.toString())))})).next((()=>r.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.di,(r=>{const s=xe.fromPath(r);return this.mi(e,s).next((a=>{a||t.removeEntry(s,Ie.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return Z.or([()=>Z.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class bh{constructor(e,t){this.persistence=e,this.fi=new Po((r=>a5(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=wN(this,t)}static Vi(e,t){return new bh(e,t)}Ti(){}Ii(e){return Z.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}mr(e,t){return Z.forEach(this.fi,((r,s)=>this.wr(e,r,s).next((a=>a?Z.resolve():t(s)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ni(e,(l=>this.wr(e,l,t).next((f=>{f||(r++,a.removeEntry(l,Ie.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),Z.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),Z.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),Z.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=nh(e.data.value)),t}wr(e,t,r){return Z.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.fi.get(t);return Z.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=s}static Es(e,t){let r=Be(),s=Be();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new uy(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return sA()?8:s5(ln())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,s){const a={result:null};return this.gs(e,t).next((l=>{a.result=l})).next((()=>{if(!a.result)return this.ps(e,t,s,r).next((l=>{a.result=l}))})).next((()=>{if(a.result)return;const l=new NN;return this.ys(e,t,l).next((f=>{if(a.result=f,this.As)return this.ws(e,t,l,f.size)}))})).next((()=>a.result))}ws(e,t,r,s){return r.documentReadCount<this.Vs?(Ta()<=Le.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",Sa(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Z.resolve()):(Ta()<=Le.DEBUG&&de("QueryEngine","Query:",Sa(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(Ta()<=Le.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",Sa(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zr(t))):Z.resolve())}gs(e,t){if(Vx(t))return Z.resolve(null);let r=zr(t);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=Th(t,null,"F"),r=zr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const l=Be(...a);return this.fs.getDocuments(e,l).next((f=>this.indexManager.getMinOffset(e,r).next((d=>{const m=this.bs(t,f);return this.Ss(t,m,l,d.readTime)?this.gs(e,Th(t,null,"F")):this.Ds(e,m,t,d)}))))})))))}ps(e,t,r,s){return Vx(t)||s.isEqual(Ie.min())?Z.resolve(null):this.fs.getDocuments(e,r).next((a=>{const l=this.bs(t,a);return this.Ss(t,l,r,s)?Z.resolve(null):(Ta()<=Le.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Sa(t)),this.Ds(e,l,t,e5(s,Bc)).next((f=>f)))}))}bs(e,t){let r=new Dt(Ck(e));return t.forEach(((s,a)=>{Jh(e,a)&&(r=r.add(a))})),r}Ss(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}ys(e,t,r){return Ta()<=Le.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",Sa(t)),this.fs.getDocumentsMatchingQuery(e,t,ws.min(),r)}Ds(e,t,r,s){return this.fs.getDocumentsMatchingQuery(e,r,s).next((a=>(t.forEach((l=>{a=a.insert(l.key,l)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dy="LocalStore",VN=3e8;class MN{constructor(e,t,r,s){this.persistence=e,this.Cs=t,this.serializer=s,this.vs=new dt(Oe),this.Fs=new Po((a=>ey(a)),ty),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new TN(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function LN(n,e,t,r){return new MN(n,e,t,r)}async function eT(n,e){const t=Pe(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next((a=>(s=a,t.Os(e),t.mutationQueue.getAllMutationBatches(r)))).next((a=>{const l=[],f=[];let d=Be();for(const m of s){l.push(m.batchId);for(const g of m.mutations)d=d.add(g.key)}for(const m of a){f.push(m.batchId);for(const g of m.mutations)d=d.add(g.key)}return t.localDocuments.getDocuments(r,d).next((m=>({Ns:m,removedBatchIds:l,addedBatchIds:f})))}))}))}function ON(n,e){const t=Pe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),a=t.xs.newChangeBuffer({trackRemovals:!0});return(function(f,d,m,g){const v=m.batch,w=v.keys();let T=Z.resolve();return w.forEach((k=>{T=T.next((()=>g.getEntry(d,k))).next((C=>{const I=m.docVersions.get(k);Qe(I!==null,48541),C.version.compareTo(I)<0&&(v.applyToRemoteDocument(C,m),C.isValidDocument()&&(C.setReadTime(m.commitVersion),g.addEntry(C)))}))})),T.next((()=>f.mutationQueue.removeMutationBatch(d,v)))})(t,r,e,a).next((()=>a.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(f){let d=Be();for(let m=0;m<f.mutationResults.length;++m)f.mutationResults[m].transformResults.length>0&&(d=d.add(f.batch.mutations[m].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(r,s)))}))}function tT(n){const e=Pe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function BN(n,e){const t=Pe(n),r=e.snapshotVersion;let s=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const l=t.xs.newChangeBuffer({trackRemovals:!0});s=t.vs;const f=[];e.targetChanges.forEach(((g,v)=>{const w=s.get(v);if(!w)return;f.push(t.li.removeMatchingKeys(a,g.removedDocuments,v).next((()=>t.li.addMatchingKeys(a,g.addedDocuments,v))));let T=w.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(v)!==null?T=T.withResumeToken(Yt.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):g.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(g.resumeToken,r)),s=s.insert(v,T),(function(C,I,V){return C.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=VN?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0})(w,T,g)&&f.push(t.li.updateTargetData(a,T))}));let d=Ti(),m=Be();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(a,g))})),f.push(FN(a,l,e.documentUpdates).next((g=>{d=g.Bs,m=g.Ls}))),!r.isEqual(Ie.min())){const g=t.li.getLastRemoteSnapshotVersion(a).next((v=>t.li.setTargetsMetadata(a,a.currentSequenceNumber,r)));f.push(g)}return Z.waitFor(f).next((()=>l.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,d,m))).next((()=>d))})).then((a=>(t.vs=s,a)))}function FN(n,e,t){let r=Be(),s=Be();return t.forEach((a=>r=r.add(a))),e.getEntries(n,r).next((a=>{let l=Ti();return t.forEach(((f,d)=>{const m=a.get(f);d.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(f)),d.isNoDocument()&&d.version.isEqual(Ie.min())?(e.removeEntry(f,d.readTime),l=l.insert(f,d)):!m.isValidDocument()||d.version.compareTo(m.version)>0||d.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(d),l=l.insert(f,d)):de(dy,"Ignoring outdated watch update for ",f,". Current version:",m.version," Watch version:",d.version)})),{Bs:l,Ls:s}}))}function zN(n,e){const t=Pe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Xg),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function UN(n,e){const t=Pe(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return t.li.getTargetData(r,e).next((a=>a?(s=a,Z.resolve(s)):t.li.allocateTargetId(r).next((l=>(s=new hs(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=t.vs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r}))}async function Gm(n,e,t){const r=Pe(n),s=r.vs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,(l=>r.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!al(l))throw l;de(dy,`Failed to update sequence numbers for target ${e}: ${l}`)}r.vs=r.vs.remove(e),r.Fs.delete(s.target)}function Gx(n,e,t){const r=Pe(n);let s=Ie.min(),a=Be();return r.persistence.runTransaction("Execute query","readwrite",(l=>(function(d,m,g){const v=Pe(d),w=v.Fs.get(g);return w!==void 0?Z.resolve(v.vs.get(w)):v.li.getTargetData(m,g)})(r,l,zr(e)).next((f=>{if(f)return s=f.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(l,f.targetId).next((d=>{a=d}))})).next((()=>r.Cs.getDocumentsMatchingQuery(l,e,t?s:Ie.min(),t?a:Be()))).next((f=>($N(r,A5(e),f),{documents:f,ks:a})))))}function $N(n,e,t){let r=n.Ms.get(e)||Ie.min();t.forEach(((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),n.Ms.set(e,r)}class Qx{constructor(){this.activeTargetIds=V5()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class WN{constructor(){this.vo=new Qx,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Qx,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx="ConnectivityMonitor";class Xx{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){de(Yx,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){de(Yx,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hd=null;function Qm(){return Hd===null?Hd=(function(){return 268435456+Math.round(2147483648*Math.random())})():Hd++,"0x"+Hd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm="RestConnection",KN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class qN{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.$o=this.databaseId.database===wh?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,t,r,s,a){const l=Qm(),f=this.Qo(e,t.toUriEncodedString());de(nm,`Sending RPC '${e}' ${l}:`,f,r);const d={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(d,s,a);const{host:m}=new URL(f),g=nl(m);return this.zo(e,f,d,r,g).then((v=>(de(nm,`Received RPC '${e}' ${l}: `,v),v)),(v=>{throw $a(nm,`RPC '${e}' ${l} failed with error: `,v,"url: ",f,"request:",r),v}))}jo(e,t,r,s,a,l){return this.Wo(e,t,r,s,a)}Go(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+sl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,a)=>e[a]=s)),r&&r.headers.forEach(((s,a)=>e[a]=s))}Qo(e,t){const r=KN[e];let s=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rn="WebChannelConnection",pc=(n,e,t)=>{n.listen(e,(r=>{try{t(r)}catch(s){setTimeout((()=>{throw s}),0)}}))};class Ma extends qN{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Ma.c_){const e=ik();pc(e,rk.STAT_EVENT,(t=>{t.stat===Lm.PROXY?de(rn,"STAT_EVENT: detected buffering proxy"):t.stat===Lm.NOPROXY&&de(rn,"STAT_EVENT: detected no buffering proxy")})),Ma.c_=!0}}zo(e,t,r,s,a){const l=Qm();return new Promise(((f,d)=>{const m=new tk;m.setWithCredentials(!0),m.listenOnce(nk.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case th.NO_ERROR:const v=m.getResponseJson();de(rn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(v)),f(v);break;case th.TIMEOUT:de(rn,`RPC '${e}' ${l} timed out`),d(new le(J.DEADLINE_EXCEEDED,"Request time out"));break;case th.HTTP_ERROR:const w=m.getStatus();if(de(rn,`RPC '${e}' ${l} failed with status:`,w,"response text:",m.getResponseText()),w>0){let T=m.getResponseJson();Array.isArray(T)&&(T=T[0]);const k=T==null?void 0:T.error;if(k&&k.status&&k.message){const C=(function(V){const B=V.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(B)>=0?B:J.UNKNOWN})(k.status);d(new le(C,k.message))}else d(new le(J.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new le(J.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{l_:e,streamId:l,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{de(rn,`RPC '${e}' ${l} completed.`)}}));const g=JSON.stringify(s);de(rn,`RPC '${e}' ${l} sending request:`,s),m.send(t,"POST",g,r,15)}))}T_(e,t,r){const s=Qm(),a=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=this.createWebChannelTransport(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(f.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Go(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const m=a.join("");de(rn,`Creating RPC '${e}' stream ${s}: ${m}`,f);const g=l.createWebChannel(m,f);this.I_(g);let v=!1,w=!1;const T=new GN({Ho:k=>{w?de(rn,`Not sending because RPC '${e}' stream ${s} is closed:`,k):(v||(de(rn,`Opening RPC '${e}' stream ${s} transport.`),g.open(),v=!0),de(rn,`RPC '${e}' stream ${s} sending:`,k),g.send(k))},Jo:()=>g.close()});return pc(g,xc.EventType.OPEN,(()=>{w||(de(rn,`RPC '${e}' stream ${s} transport opened.`),T.i_())})),pc(g,xc.EventType.CLOSE,(()=>{w||(w=!0,de(rn,`RPC '${e}' stream ${s} transport closed`),T.o_(),this.E_(g))})),pc(g,xc.EventType.ERROR,(k=>{w||(w=!0,$a(rn,`RPC '${e}' stream ${s} transport errored. Name:`,k.name,"Message:",k.message),T.o_(new le(J.UNAVAILABLE,"The operation could not be completed")))})),pc(g,xc.EventType.MESSAGE,(k=>{var C;if(!w){const I=k.data[0];Qe(!!I,16349);const V=I,B=(V==null?void 0:V.error)||((C=V[0])==null?void 0:C.error);if(B){de(rn,`RPC '${e}' stream ${s} received error:`,B);const P=B.status;let G=(function(A){const b=bt[A];if(b!==void 0)return zk(b)})(P),$=B.message;G===void 0&&(G=J.INTERNAL,$="Unknown error status: "+P+" with message "+B.message),w=!0,T.o_(new le(G,$)),g.close()}else de(rn,`RPC '${e}' stream ${s} received:`,I),T.__(I)}})),Ma.u_(),setTimeout((()=>{T.s_()}),0),T}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return sk()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QN(n){return new Ma(n)}function rm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nf(n){return new Z5(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ma.c_=!1;class nT{constructor(e,t,r=1e3,s=1.5,a=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=s,this.V_=a,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-r);s>0&&de("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx="PersistentStream";class rT{constructor(e,t,r,s,a,l,f,d){this.Ci=e,this.b_=r,this.S_=s,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=f,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new nT(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===J.RESOURCE_EXHAUSTED?(ki(t.toString()),ki("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===t&&this.G_(r,s)}),(r=>{e((()=>{const s=new le(J.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,t){const r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.H_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return de(Jx,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(de(Jx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class YN extends rT{constructor(e,t,r,s,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,l),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=nN(this.serializer,e),r=(function(a){if(!("targetChange"in a))return Ie.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?Ie.min():l.readTime?Ur(l.readTime):Ie.min()})(e);return this.listener.J_(t,r)}Z_(e){const t={};t.database=qm(this.serializer),t.addTarget=(function(a,l){let f;const d=l.target;if(f=Um(d)?{documents:sN(a,d)}:{query:oN(a,d).ft},f.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){f.resumeToken=Wk(a,l.resumeToken);const m=Wm(a,l.expectedCount);m!==null&&(f.expectedCount=m)}else if(l.snapshotVersion.compareTo(Ie.min())>0){f.readTime=Sh(a,l.snapshotVersion.toTimestamp());const m=Wm(a,l.expectedCount);m!==null&&(f.expectedCount=m)}return f})(this.serializer,e);const r=lN(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){const t={};t.database=qm(this.serializer),t.removeTarget=e,this.K_(t)}}class XN extends rT{constructor(e,t,r,s,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,l),this.serializer=a}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=iN(e.writeResults,e.commitTime),r=Ur(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=qm(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>rN(this.serializer,r)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{}class ZN extends JN{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new le(J.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Wo(e,Hm(t,r),s,a,l))).catch((a=>{throw a.name==="FirebaseError"?(a.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new le(J.UNKNOWN,a.toString())}))}jo(e,t,r,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,f])=>this.connection.jo(e,Hm(t,r),s,l,f,a))).catch((l=>{throw l.name==="FirebaseError"?(l.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new le(J.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function eD(n,e,t,r){return new ZN(n,e,t,r)}class tD{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ki(t),this.aa=!1):de("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo="RemoteStore";class nD{constructor(e,t,r,s,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=a,this.Aa.Mo((l=>{r.enqueueAndForget((async()=>{jo(this)&&(de(bo,"Restarting streams for network reachability change."),await(async function(d){const m=Pe(d);m.Ea.add(4),await pu(m),m.Va.set("Unknown"),m.Ea.delete(4),await rf(m)})(this))}))})),this.Va=new tD(r,s)}}async function rf(n){if(jo(n))for(const e of n.Ra)await e(!0)}async function pu(n){for(const e of n.Ra)await e(!1)}function iT(n,e){const t=Pe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),my(t)?py(t):cl(t).O_()&&fy(t,e))}function hy(n,e){const t=Pe(n),r=cl(t);t.Ia.delete(e),r.O_()&&sT(t,e),t.Ia.size===0&&(r.O_()?r.L_():jo(t)&&t.Va.set("Unknown"))}function fy(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}cl(n).Z_(e)}function sT(n,e){n.da.$e(e),cl(n).X_(e)}function py(n){n.da=new Q5({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),cl(n).start(),n.Va.ua()}function my(n){return jo(n)&&!cl(n).x_()&&n.Ia.size>0}function jo(n){return Pe(n).Ea.size===0}function oT(n){n.da=void 0}async function rD(n){n.Va.set("Online")}async function iD(n){n.Ia.forEach(((e,t)=>{fy(n,e)}))}async function sD(n,e){oT(n),my(n)?(n.Va.ha(e),py(n)):n.Va.set("Unknown")}async function oD(n,e,t){if(n.Va.set("Online"),e instanceof $k&&e.state===2&&e.cause)try{await(async function(s,a){const l=a.cause;for(const f of a.targetIds)s.Ia.has(f)&&(await s.remoteSyncer.rejectListen(f,l),s.Ia.delete(f),s.da.removeTarget(f))})(n,e)}catch(r){de(bo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ih(n,r)}else if(e instanceof sh?n.da.Xe(e):e instanceof Uk?n.da.st(e):n.da.tt(e),!t.isEqual(Ie.min()))try{const r=await tT(n.localStore);t.compareTo(r)>=0&&await(function(a,l){const f=a.da.Tt(l);return f.targetChanges.forEach(((d,m)=>{if(d.resumeToken.approximateByteSize()>0){const g=a.Ia.get(m);g&&a.Ia.set(m,g.withResumeToken(d.resumeToken,l))}})),f.targetMismatches.forEach(((d,m)=>{const g=a.Ia.get(d);if(!g)return;a.Ia.set(d,g.withResumeToken(Yt.EMPTY_BYTE_STRING,g.snapshotVersion)),sT(a,d);const v=new hs(g.target,d,m,g.sequenceNumber);fy(a,v)})),a.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(r){de(bo,"Failed to raise snapshot:",r),await Ih(n,r)}}async function Ih(n,e,t){if(!al(e))throw e;n.Ea.add(1),await pu(n),n.Va.set("Offline"),t||(t=()=>tT(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{de(bo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await rf(n)}))}function aT(n,e){return e().catch((t=>Ih(n,t,e)))}async function sf(n){const e=Pe(n),t=Ss(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Xg;for(;aD(e);)try{const s=await zN(e.localStore,r);if(s===null){e.Ta.length===0&&t.L_();break}r=s.batchId,lD(e,s)}catch(s){await Ih(e,s)}lT(e)&&cT(e)}function aD(n){return jo(n)&&n.Ta.length<10}function lD(n,e){n.Ta.push(e);const t=Ss(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function lT(n){return jo(n)&&!Ss(n).x_()&&n.Ta.length>0}function cT(n){Ss(n).start()}async function cD(n){Ss(n).ra()}async function uD(n){const e=Ss(n);for(const t of n.Ta)e.ea(t.mutations)}async function dD(n,e,t){const r=n.Ta.shift(),s=sy.from(r,e,t);await aT(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await sf(n)}async function hD(n,e){e&&Ss(n).Y_&&await(async function(r,s){if((function(l){return K5(l)&&l!==J.ABORTED})(s.code)){const a=r.Ta.shift();Ss(r).B_(),await aT(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s))),await sf(r)}})(n,e),lT(n)&&cT(n)}async function Zx(n,e){const t=Pe(n);t.asyncQueue.verifyOperationInProgress(),de(bo,"RemoteStore received new credentials");const r=jo(t);t.Ea.add(3),await pu(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await rf(t)}async function fD(n,e){const t=Pe(n);e?(t.Ea.delete(2),await rf(t)):e||(t.Ea.add(2),await pu(t),t.Va.set("Unknown"))}function cl(n){return n.ma||(n.ma=(function(t,r,s){const a=Pe(t);return a.sa(),new YN(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(n.datastore,n.asyncQueue,{Zo:rD.bind(null,n),Yo:iD.bind(null,n),t_:sD.bind(null,n),J_:oD.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),my(n)?py(n):n.Va.set("Unknown")):(await n.ma.stop(),oT(n))}))),n.ma}function Ss(n){return n.fa||(n.fa=(function(t,r,s){const a=Pe(t);return a.sa(),new XN(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:cD.bind(null,n),t_:hD.bind(null,n),ta:uD.bind(null,n),na:dD.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await sf(n)):(await n.fa.stop(),n.Ta.length>0&&(de(bo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(e,t,r,s,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new vi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,a){const l=Date.now()+r,f=new gy(e,t,l,s,a);return f.start(r),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yy(n,e){if(ki("AsyncQueue",`${e}: ${n}`),al(n))return new le(J.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{static emptySet(e){return new La(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||xe.comparator(t.key,r.key):(t,r)=>xe.comparator(t.key,r.key),this.keyedMap=_c(),this.sortedSet=new dt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof La)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new La;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(){this.ga=new dt(xe.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Te(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Qa{constructor(e,t,r,s,a,l,f,d,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=f,this.excludesMetadataChanges=d,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,s,a){const l=[];return t.forEach((f=>{l.push({type:0,doc:f})})),new Qa(e,t,La.emptySet(t),l,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class mD{constructor(){this.queries=t_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const s=Pe(t),a=s.queries;s.queries=t_(),a.forEach(((l,f)=>{for(const d of f.ba)d.onError(r)}))})(this,new le(J.ABORTED,"Firestore shutting down"))}}function t_(){return new Po((n=>Ik(n)),Xh)}async function uT(n,e){const t=Pe(n);let r=3;const s=e.query;let a=t.queries.get(s);a?!a.Sa()&&e.Da()&&(r=2):(a=new pD,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await t.onListen(s,!0);break;case 1:a.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(l){const f=yy(l,`Initialization of query '${Sa(e.query)}' failed`);return void e.onError(f)}t.queries.set(s,a),a.ba.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&vy(t)}async function dT(n,e){const t=Pe(n),r=e.query;let s=3;const a=t.queries.get(r);if(a){const l=a.ba.indexOf(e);l>=0&&(a.ba.splice(l,1),a.ba.length===0?s=e.Da()?0:1:!a.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function gD(n,e){const t=Pe(n);let r=!1;for(const s of e){const a=s.query,l=t.queries.get(a);if(l){for(const f of l.ba)f.Fa(s)&&(r=!0);l.wa=s}}r&&vy(t)}function yD(n,e,t){const r=Pe(n),s=r.queries.get(e);if(s)for(const a of s.ba)a.onError(t);r.queries.delete(e)}function vy(n){n.Ca.forEach((e=>{e.next()}))}var Ym,n_;(n_=Ym||(Ym={})).Ma="default",n_.Cache="cache";class hT{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Qa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Qa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Ym.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(e){this.key=e}}class pT{constructor(e){this.key=e}}class vD{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Be(),this.mutatedKeys=Be(),this.eu=Ck(e),this.tu=new La(this.eu)}get nu(){return this.Za}ru(e,t){const r=t?t.iu:new e_,s=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,l=s,f=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((g,v)=>{const w=s.get(g),T=Jh(this.query,v)?v:null,k=!!w&&this.mutatedKeys.has(w.key),C=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let I=!1;w&&T?w.data.isEqual(T.data)?k!==C&&(r.track({type:3,doc:T}),I=!0):this.su(w,T)||(r.track({type:2,doc:T}),I=!0,(d&&this.eu(T,d)>0||m&&this.eu(T,m)<0)&&(f=!0)):!w&&T?(r.track({type:0,doc:T}),I=!0):w&&!T&&(r.track({type:1,doc:w}),I=!0,(d||m)&&(f=!0)),I&&(T?(l=l.add(T),a=C?a.add(g):a.delete(g)):(l=l.delete(g),a=a.delete(g)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const g=this.query.limitType==="F"?l.last():l.first();l=l.delete(g.key),a=a.delete(g.key),r.track({type:1,doc:g})}return{tu:l,iu:r,Ss:f,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((g,v)=>(function(T,k){const C=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te(20277,{Vt:I})}};return C(T)-C(k)})(g.type,v.type)||this.eu(g.doc,v.doc))),this.ou(r),s=s??!1;const f=t&&!s?this._u():[],d=this.Ya.size===0&&this.current&&!s?1:0,m=d!==this.Xa;return this.Xa=d,l.length!==0||m?{snapshot:new Qa(this.query,e.tu,a,l,e.mutatedKeys,d===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new e_,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Be(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const t=[];return e.forEach((r=>{this.Ya.has(r)||t.push(new pT(r))})),this.Ya.forEach((r=>{e.has(r)||t.push(new fT(r))})),t}cu(e){this.Za=e.ks,this.Ya=Be();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Qa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const xy="SyncEngine";class xD{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class _D{constructor(e){this.key=e,this.hu=!1}}class wD{constructor(e,t,r,s,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Po((f=>Ik(f)),Xh),this.Iu=new Map,this.Eu=new Set,this.Ru=new dt(xe.comparator),this.Au=new Map,this.Vu=new ly,this.du={},this.mu=new Map,this.fu=Ga.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function ED(n,e,t=!0){const r=_T(n);let s;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.lu()):s=await mT(r,e,t,!0),s}async function kD(n,e){const t=_T(n);await mT(t,e,!0,!1)}async function mT(n,e,t,r){const s=await UN(n.localStore,zr(e)),a=s.targetId,l=n.sharedClientState.addLocalQueryTarget(a,t);let f;return r&&(f=await TD(n,e,a,l==="current",s.resumeToken)),n.isPrimaryClient&&t&&iT(n.remoteStore,s),f}async function TD(n,e,t,r,s){n.pu=(v,w,T)=>(async function(C,I,V,B){let P=I.view.ru(V);P.Ss&&(P=await Gx(C.localStore,I.query,!1).then((({documents:A})=>I.view.ru(A,P))));const G=B&&B.targetChanges.get(I.targetId),$=B&&B.targetMismatches.get(I.targetId)!=null,H=I.view.applyChanges(P,C.isPrimaryClient,G,$);return i_(C,I.targetId,H.au),H.snapshot})(n,v,w,T);const a=await Gx(n.localStore,e,!0),l=new vD(e,a.ks),f=l.ru(a.documents),d=fu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),m=l.applyChanges(f,n.isPrimaryClient,d);i_(n,t,m.au);const g=new xD(e,t,l);return n.Tu.set(e,g),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),m.snapshot}async function SD(n,e,t){const r=Pe(n),s=r.Tu.get(e),a=r.Iu.get(s.targetId);if(a.length>1)return r.Iu.set(s.targetId,a.filter((l=>!Xh(l,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Gm(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),t&&hy(r.remoteStore,s.targetId),Xm(r,s.targetId)})).catch(ol)):(Xm(r,s.targetId),await Gm(r.localStore,s.targetId,!0))}async function bD(n,e){const t=Pe(n),r=t.Tu.get(e),s=t.Iu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),hy(t.remoteStore,r.targetId))}async function ID(n,e,t){const r=DD(n);try{const s=await(function(l,f){const d=Pe(l),m=it.now(),g=f.reduce(((T,k)=>T.add(k.key)),Be());let v,w;return d.persistence.runTransaction("Locally write mutations","readwrite",(T=>{let k=Ti(),C=Be();return d.xs.getEntries(T,g).next((I=>{k=I,k.forEach(((V,B)=>{B.isValidDocument()||(C=C.add(V))}))})).next((()=>d.localDocuments.getOverlayedDocuments(T,k))).next((I=>{v=I;const V=[];for(const B of f){const P=z5(B,v.get(B.key).overlayedDocument);P!=null&&V.push(new Vs(B.key,P,xk(P.value.mapValue),mr.exists(!0)))}return d.mutationQueue.addMutationBatch(T,m,V,f)})).next((I=>{w=I;const V=I.applyToLocalDocumentSet(v,C);return d.documentOverlayCache.saveOverlays(T,I.batchId,V)}))})).then((()=>({batchId:w.batchId,changes:Rk(v)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(l,f,d){let m=l.du[l.currentUser.toKey()];m||(m=new dt(Oe)),m=m.insert(f,d),l.du[l.currentUser.toKey()]=m})(r,s.batchId,t),await mu(r,s.changes),await sf(r.remoteStore)}catch(s){const a=yy(s,"Failed to persist write");t.reject(a)}}async function gT(n,e){const t=Pe(n);try{const r=await BN(t.localStore,e);e.targetChanges.forEach(((s,a)=>{const l=t.Au.get(a);l&&(Qe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.hu=!0:s.modifiedDocuments.size>0?Qe(l.hu,14607):s.removedDocuments.size>0&&(Qe(l.hu,42227),l.hu=!1))})),await mu(t,r,e)}catch(r){await ol(r)}}function r_(n,e,t){const r=Pe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Tu.forEach(((a,l)=>{const f=l.view.va(e);f.snapshot&&s.push(f.snapshot)})),(function(l,f){const d=Pe(l);d.onlineState=f;let m=!1;d.queries.forEach(((g,v)=>{for(const w of v.ba)w.va(f)&&(m=!0)})),m&&vy(d)})(r.eventManager,e),s.length&&r.Pu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function CD(n,e,t){const r=Pe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Au.get(e),a=s&&s.key;if(a){let l=new dt(xe.comparator);l=l.insert(a,on.newNoDocument(a,Ie.min()));const f=Be().add(a),d=new tf(Ie.min(),new Map,new dt(Oe),l,f);await gT(r,d),r.Ru=r.Ru.remove(a),r.Au.delete(e),_y(r)}else await Gm(r.localStore,e,!1).then((()=>Xm(r,e,t))).catch(ol)}async function AD(n,e){const t=Pe(n),r=e.batch.batchId;try{const s=await ON(t.localStore,e);vT(t,r,null),yT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await mu(t,s)}catch(s){await ol(s)}}async function RD(n,e,t){const r=Pe(n);try{const s=await(function(l,f){const d=Pe(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let g;return d.mutationQueue.lookupMutationBatch(m,f).next((v=>(Qe(v!==null,37113),g=v.keys(),d.mutationQueue.removeMutationBatch(m,v)))).next((()=>d.mutationQueue.performConsistencyCheck(m))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(m,g,f))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,g))).next((()=>d.localDocuments.getDocuments(m,g)))}))})(r.localStore,e);vT(r,e,t),yT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await mu(r,s)}catch(s){await ol(s)}}function yT(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function vT(n,e,t){const r=Pe(n);let s=r.du[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(t?a.reject(t):a.resolve(),s=s.remove(e)),r.du[r.currentUser.toKey()]=s}}function Xm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((r=>{n.Vu.containsKey(r)||xT(n,r)}))}function xT(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(hy(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),_y(n))}function i_(n,e,t){for(const r of t)r instanceof fT?(n.Vu.addReference(r.key,e),PD(n,r)):r instanceof pT?(de(xy,"Document no longer in limbo: "+r.key),n.Vu.removeReference(r.key,e),n.Vu.containsKey(r.key)||xT(n,r.key)):Te(19791,{wu:r})}function PD(n,e){const t=e.key,r=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(r)||(de(xy,"New document in limbo: "+t),n.Eu.add(r),_y(n))}function _y(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new xe(et.fromString(e)),r=n.fu.next();n.Au.set(r,new _D(t)),n.Ru=n.Ru.insert(t,r),iT(n.remoteStore,new hs(zr(ny(t.path)),r,"TargetPurposeLimboResolution",Gh.ce))}}async function mu(n,e,t){const r=Pe(n),s=[],a=[],l=[];r.Tu.isEmpty()||(r.Tu.forEach(((f,d)=>{l.push(r.pu(d,e,t).then((m=>{var g;if((m||t)&&r.isPrimaryClient){const v=m?!m.fromCache:(g=t==null?void 0:t.targetChanges.get(d.targetId))==null?void 0:g.current;r.sharedClientState.updateQueryState(d.targetId,v?"current":"not-current")}if(m){s.push(m);const v=uy.Es(d.targetId,m);a.push(v)}})))})),await Promise.all(l),r.Pu.J_(s),await(async function(d,m){const g=Pe(d);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>Z.forEach(m,(w=>Z.forEach(w.Ts,(T=>g.persistence.referenceDelegate.addReference(v,w.targetId,T))).next((()=>Z.forEach(w.Is,(T=>g.persistence.referenceDelegate.removeReference(v,w.targetId,T)))))))))}catch(v){if(!al(v))throw v;de(dy,"Failed to update sequence numbers: "+v)}for(const v of m){const w=v.targetId;if(!v.fromCache){const T=g.vs.get(w),k=T.snapshotVersion,C=T.withLastLimboFreeSnapshotVersion(k);g.vs=g.vs.insert(w,C)}}})(r.localStore,a))}async function jD(n,e){const t=Pe(n);if(!t.currentUser.isEqual(e)){de(xy,"User change. New user:",e.toKey());const r=await eT(t.localStore,e);t.currentUser=e,(function(a,l){a.mu.forEach((f=>{f.forEach((d=>{d.reject(new le(J.CANCELLED,l))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await mu(t,r.Ns)}}function ND(n,e){const t=Pe(n),r=t.Au.get(e);if(r&&r.hu)return Be().add(r.key);{let s=Be();const a=t.Iu.get(e);if(!a)return s;for(const l of a){const f=t.Tu.get(l);s=s.unionWith(f.view.nu)}return s}}function _T(n){const e=Pe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=gT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ND.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=CD.bind(null,e),e.Pu.J_=gD.bind(null,e.eventManager),e.Pu.yu=yD.bind(null,e.eventManager),e}function DD(n){const e=Pe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=AD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=RD.bind(null,e),e}class Ch{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=nf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return LN(this.persistence,new DN,e.initialUser,this.serializer)}Cu(e){return new Zk(cy.Vi,this.serializer)}Du(e){return new WN}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ch.provider={build:()=>new Ch};class VD extends Ch{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Qe(this.persistence.referenceDelegate instanceof bh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new xN(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?_n.withCacheSize(this.cacheSizeBytes):_n.DEFAULT;return new Zk((r=>bh.Vi(r,t)),this.serializer)}}class Jm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>r_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=jD.bind(null,this.syncEngine),await fD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new mD})()}createDatastore(e){const t=nf(e.databaseInfo.databaseId),r=QN(e.databaseInfo);return eD(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,s,a,l,f){return new nD(r,s,a,l,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>r_(this.syncEngine,t,0)),(function(){return Xx.v()?new Xx:new HN})())}createSyncEngine(e,t){return(function(s,a,l,f,d,m,g){const v=new wD(s,a,l,f,d,m);return g&&(v.gu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const a=Pe(s);de(bo,"RemoteStore shutting down."),a.Ea.add(5),await pu(a),a.Aa.shutdown(),a.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Jm.provider={build:()=>new Jm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ki("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs="FirestoreClient";class MD{constructor(e,t,r,s,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=s,this.user=sn.UNAUTHENTICATED,this.clientId=Yg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async l=>{de(bs,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(r,(l=>(de(bs,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=yy(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function im(n,e){n.asyncQueue.verifyOperationInProgress(),de(bs,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async s=>{r.isEqual(s)||(await eT(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function s_(n,e){n.asyncQueue.verifyOperationInProgress();const t=await LD(n);de(bs,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>Zx(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,s)=>Zx(e.remoteStore,s))),n._onlineComponents=e}async function LD(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){de(bs,"Using user provided OfflineComponentProvider");try{await im(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===J.FAILED_PRECONDITION||s.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;$a("Error using user provided cache. Falling back to memory cache: "+t),await im(n,new Ch)}}else de(bs,"Using default OfflineComponentProvider"),await im(n,new VD(void 0));return n._offlineComponents}async function ET(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(de(bs,"Using user provided OnlineComponentProvider"),await s_(n,n._uninitializedComponentsProvider._online)):(de(bs,"Using default OnlineComponentProvider"),await s_(n,new Jm))),n._onlineComponents}function OD(n){return ET(n).then((e=>e.syncEngine))}async function kT(n){const e=await ET(n),t=e.eventManager;return t.onListen=ED.bind(null,e.syncEngine),t.onUnlisten=SD.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=kD.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=bD.bind(null,e.syncEngine),t}function BD(n,e,t={}){const r=new vi;return n.asyncQueue.enqueueAndForget((async()=>(function(a,l,f,d,m){const g=new wT({next:w=>{g.Nu(),l.enqueueAndForget((()=>dT(a,v)));const T=w.docs.has(f);!T&&w.fromCache?m.reject(new le(J.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&w.fromCache&&d&&d.source==="server"?m.reject(new le(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(w)},error:w=>m.reject(w)}),v=new hT(ny(f.path),g,{includeMetadataChanges:!0,Ka:!0});return uT(a,v)})(await kT(n),n.asyncQueue,e,t,r))),r.promise}function FD(n,e,t={}){const r=new vi;return n.asyncQueue.enqueueAndForget((async()=>(function(a,l,f,d,m){const g=new wT({next:w=>{g.Nu(),l.enqueueAndForget((()=>dT(a,v))),w.fromCache&&d.source==="server"?m.reject(new le(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(w)},error:w=>m.reject(w)}),v=new hT(f,g,{includeMetadataChanges:!0,Ka:!0});return uT(a,v)})(await kT(n),n.asyncQueue,e,t,r))),r.promise}function zD(n,e){const t=new vi;return n.asyncQueue.enqueueAndForget((async()=>ID(await OD(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UD="ComponentProvider",o_=new Map;function $D(n,e,t,r,s){return new u5(n,e,t,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,TT(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST="firestore.googleapis.com",a_=!0;class l_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new le(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ST,this.ssl=a_}else this.host=e.host,this.ssl=e.ssl??a_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Jk;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<yN)throw new le(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Jj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=TT(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new le(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new le(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new le(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class of{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new l_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new l_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Uj;switch(r.type){case"firstParty":return new Kj(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new le(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=o_.get(t);r&&(de(UD,"Removing Datastore"),o_.delete(t),r.terminate())})(this),Promise.resolve()}}function WD(n,e,t,r={}){var m;n=Hr(n,of);const s=nl(e),a=n._getSettings(),l={...a,emulatorOptions:n._getEmulatorOptions()},f=`${e}:${t}`;s&&(fE(`https://${f}`),pE("Firestore",!0)),a.host!==ST&&a.host!==f&&$a("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...a,host:f,ssl:s,emulatorOptions:r};if(!_s(d,l)&&(n._setSettings(d),r.mockUserToken)){let g,v;if(typeof r.mockUserToken=="string")g=r.mockUserToken,v=sn.MOCK_USER;else{g=YC(r.mockUserToken,(m=n._app)==null?void 0:m.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new le(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new sn(w)}n._authCredentials=new $j(new ak(g,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ms(this.firestore,e,this._query)}}class _t{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _t(this.firestore,e,this._key)}toJSON(){return{type:_t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(du(t,_t._jsonSchema))return new _t(e,r||null,new xe(et.fromString(t.referencePath)))}}_t._jsonSchemaVersion="firestore/documentReference/1.0",_t._jsonSchema={type:At("string",_t._jsonSchemaVersion),referencePath:At("string")};class vs extends Ms{constructor(e,t,r){super(e,t,ny(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _t(this.firestore,null,new xe(e))}withConverter(e){return new vs(this.firestore,e,this._path)}}function En(n,e,...t){if(n=Mt(n),lk("collection","path",e),n instanceof of){const r=et.fromString(e,...t);return wx(r),new vs(n,null,r)}{if(!(n instanceof _t||n instanceof vs))throw new le(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(et.fromString(e,...t));return wx(r),new vs(n.firestore,null,r)}}function zt(n,e,...t){if(n=Mt(n),arguments.length===1&&(e=Yg.newId()),lk("doc","path",e),n instanceof of){const r=et.fromString(e,...t);return _x(r),new _t(n,null,new xe(r))}{if(!(n instanceof _t||n instanceof vs))throw new le(J.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(et.fromString(e,...t));return _x(r),new _t(n.firestore,n instanceof vs?n.converter:null,new xe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_="AsyncQueue";class u_{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new nT(this,"async_queue_retry"),this._c=()=>{const r=rm();r&&de(c_,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=rm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=rm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new vi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!al(e))throw e;de(c_,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,ki("INTERNAL UNHANDLED ERROR: ",d_(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=gy.createAndSchedule(this,e,t,r,(a=>this.hc(a)));return this.tc.push(s),s}uc(){this.nc&&Te(47125,{Pc:d_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function d_(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class ul extends of{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new u_,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new u_(e),this._firestoreClient=void 0,await e}}}function HD(n,e){const t=typeof n=="object"?n:vE(),r=typeof n=="string"?n:wh,s=Og(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=GC("firestore");a&&WD(s,...a)}return s}function wy(n){if(n._terminated)throw new le(J.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||KD(n),n._firestoreClient}function KD(n){var r,s,a,l;const e=n._freezeSettings(),t=$D(n._databaseId,((r=n._app)==null?void 0:r.options.appId)||"",n._persistenceKey,(s=n._app)==null?void 0:s.options.apiKey,e);n._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new MD(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(d){const m=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(m),_online:m}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qn(Yt.fromBase64String(e))}catch(t){throw new le(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new qn(Yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:qn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(du(e,qn._jsonSchema))return qn.fromBase64String(e.bytes)}}qn._jsonSchemaVersion="firestore/bytes/1.0",qn._jsonSchema={type:At("string",qn._jsonSchemaVersion),bytes:At("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new le(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new le(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new le(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Oe(this._lat,e._lat)||Oe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:$r._jsonSchemaVersion}}static fromJSON(e){if(du(e,$r._jsonSchema))return new $r(e.latitude,e.longitude)}}$r._jsonSchemaVersion="firestore/geoPoint/1.0",$r._jsonSchema={type:At("string",$r._jsonSchemaVersion),latitude:At("number"),longitude:At("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:gr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(du(e,gr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new gr(e.vectorValues);throw new le(J.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}gr._jsonSchemaVersion="firestore/vectorValue/1.0",gr._jsonSchema={type:At("string",gr._jsonSchemaVersion),vectorValues:At("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD=/^__.*__$/;class GD{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Vs(e,this.data,this.fieldMask,t,this.fieldTransforms):new hu(e,this.data,t,this.fieldTransforms)}}class bT{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Vs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function IT(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{dataSource:n})}}class af{constructor(e,t,r,s,a,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.validatePath(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new af({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const t=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var s;const t=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Ah(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(IT(this.dataSource)&&qD.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class QD{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||nf(e)}createContext(e,t,r,s=!1){return new af({dataSource:e,methodName:t,targetDoc:r,path:Gt.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function lf(n){const e=n._freezeSettings(),t=nf(n._databaseId);return new QD(n._databaseId,!!e.ignoreUndefinedProperties,t)}function CT(n,e,t,r,s,a={}){const l=n.createContext(a.merge||a.mergeFields?2:0,e,t,s);by("Data must be an object, but it was:",l,r);const f=AT(r,l);let d,m;if(a.merge)d=new Nn(l.fieldMask),m=l.fieldTransforms;else if(a.mergeFields){const g=[];for(const v of a.mergeFields){const w=Io(e,v,t);if(!l.contains(w))throw new le(J.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);jT(g,w)||g.push(w)}d=new Nn(g),m=l.fieldTransforms.filter((v=>d.covers(v.field)))}else d=null,m=l.fieldTransforms;return new GD(new wn(f),d,m)}class cf extends dl{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof cf}}function YD(n,e,t){return new af({dataSource:3,targetDoc:e.settings.targetDoc,methodName:n._methodName,arrayElement:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class ky extends dl{_toFieldTransform(e){return new iy(e.path,new Wc)}isEqual(e){return e instanceof ky}}class Ty extends dl{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=YD(this,e,!0),r=this.Ac.map((a=>hl(a,t))),s=new qa(r);return new iy(e.path,s)}isEqual(e){return e instanceof Ty&&_s(this.Ac,e.Ac)}}class Sy extends dl{constructor(e,t){super(e),this.Vc=t}_toFieldTransform(e){const t=new Kc(e.serializer,Nk(e.serializer,this.Vc));return new iy(e.path,t)}isEqual(e){return e instanceof Sy&&this.Vc===e.Vc}}function XD(n,e,t,r){const s=n.createContext(1,e,t);by("Data must be an object, but it was:",s,r);const a=[],l=wn.empty();Ds(r,((d,m)=>{const g=PT(e,d,t);m=Mt(m);const v=s.childContextForFieldPath(g);if(m instanceof cf)a.push(g);else{const w=hl(m,v);w!=null&&(a.push(g),l.set(g,w))}}));const f=new Nn(a);return new bT(l,f,s.fieldTransforms)}function JD(n,e,t,r,s,a){const l=n.createContext(1,e,t),f=[Io(e,r,t)],d=[s];if(a.length%2!=0)throw new le(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<a.length;w+=2)f.push(Io(e,a[w])),d.push(a[w+1]);const m=[],g=wn.empty();for(let w=f.length-1;w>=0;--w)if(!jT(m,f[w])){const T=f[w];let k=d[w];k=Mt(k);const C=l.childContextForFieldPath(T);if(k instanceof cf)m.push(T);else{const I=hl(k,C);I!=null&&(m.push(T),g.set(T,I))}}const v=new Nn(m);return new bT(g,v,l.fieldTransforms)}function ZD(n,e,t,r=!1){return hl(t,n.createContext(r?4:3,e))}function hl(n,e){if(RT(n=Mt(n)))return by("Unsupported field value:",e,n),AT(n,e);if(n instanceof dl)return(function(r,s){if(!IT(s.dataSource))throw s.createError(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,s){const a=[];let l=0;for(const f of r){let d=hl(f,s.childContextForArray(l));d==null&&(d={nullValue:"NULL_VALUE"}),a.push(d),l++}return{arrayValue:{values:a}}})(n,e)}return(function(r,s){if((r=Mt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Nk(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=it.fromDate(r);return{timestampValue:Sh(s.serializer,a)}}if(r instanceof it){const a=new it(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Sh(s.serializer,a)}}if(r instanceof $r)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof qn)return{bytesValue:Wk(s.serializer,r._byteString)};if(r instanceof _t){const a=s.databaseId,l=r.firestore._databaseId;if(!l.isEqual(a))throw s.createError(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:ay(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof gr)return(function(l,f){const d=l instanceof gr?l.toArray():l;return{mapValue:{fields:{[yk]:{stringValue:vk},[Eh]:{arrayValue:{values:d.map((g=>{if(typeof g!="number")throw f.createError("VectorValues must only contain numeric values.");return ry(f.serializer,g)}))}}}}}})(r,s);if(Xk(r))return r._toProto(s.serializer);throw s.createError(`Unsupported field value: ${qh(r)}`)})(n,e)}function AT(n,e){const t={};return dk(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ds(n,((r,s)=>{const a=hl(s,e.childContextForField(r));a!=null&&(t[r]=a)})),{mapValue:{fields:t}}}function RT(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof it||n instanceof $r||n instanceof qn||n instanceof _t||n instanceof dl||n instanceof gr||Xk(n))}function by(n,e,t){if(!RT(t)||!ck(t)){const r=qh(t);throw r==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+r)}}function Io(n,e,t){if((e=Mt(e))instanceof Ey)return e._internalPath;if(typeof e=="string")return PT(n,e);throw Ah("Field path arguments must be of type string or ",n,!1,void 0,t)}const eV=new RegExp("[~\\*/\\[\\]]");function PT(n,e,t){if(e.search(eV)>=0)throw Ah(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ey(...e.split("."))._internalPath}catch{throw Ah(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ah(n,e,t,r,s){const a=r&&!r.isEmpty(),l=s!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let d="";return(a||l)&&(d+=" (found",a&&(d+=` in field ${r}`),l&&(d+=` in document ${s}`),d+=")"),new le(J.INVALID_ARGUMENT,f+n+d)}function jT(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{convertValue(e,t="none"){switch(Ts(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ks(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Te(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ds(e,((s,a)=>{r[s]=this.convertValue(a,t)})),r}convertVectorValue(e){var r,s,a;const t=(a=(s=(r=e.fields)==null?void 0:r[Eh].arrayValue)==null?void 0:s.values)==null?void 0:a.map((l=>xt(l.doubleValue)));return new gr(t)}convertGeoPoint(e){return new $r(xt(e.latitude),xt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Yh(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Fc(e));default:return null}}convertTimestamp(e){const t=Es(e);return new it(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=et.fromString(e);Qe(Yk(r),9688,{name:e});const s=new zc(r.get(1),r.get(3)),a=new xe(r.popFirst(5));return s.isEqual(t)||ki(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT extends tV{constructor(e){super(),this.firestore=e}convertBytes(e){return new qn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new _t(this.firestore,null,t)}}function Vt(){return new ky("serverTimestamp")}function nV(...n){return new Ty("arrayUnion",n)}function Iy(n){return new Sy("increment",n)}const h_="@firebase/firestore",f_="4.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(e,t,r,s,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new _t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new rV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(Io("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class rV extends DT{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iV(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new le(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Cy{}class Ay extends Cy{}function Is(n,e,...t){let r=[];e instanceof Cy&&r.push(e),r=r.concat(t),(function(a){const l=a.filter((d=>d instanceof Ry)).length,f=a.filter((d=>d instanceof uf)).length;if(l>1||l>0&&f>0)throw new le(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)n=s._apply(n);return n}class uf extends Ay{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new uf(e,t,r)}_apply(e){const t=this._parse(e);return VT(e._query,t),new Ms(e.firestore,e.converter,$m(e._query,t))}_parse(e){const t=lf(e.firestore);return(function(a,l,f,d,m,g,v){let w;if(m.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new le(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){m_(v,g);const k=[];for(const C of v)k.push(p_(d,a,C));w={arrayValue:{values:k}}}else w=p_(d,a,v)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||m_(v,g),w=ZD(f,l,v,g==="in"||g==="not-in");return Ct.create(m,g,w)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function qc(n,e,t){const r=e,s=Io("where",n);return uf._create(s,r,t)}class Ry extends Cy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ry(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:vr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,a){let l=s;const f=a.getFlattenedFilters();for(const d of f)VT(l,d),l=$m(l,d)})(e._query,t),new Ms(e.firestore,e.converter,$m(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Py extends Ay{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Py(e,t)}_apply(e){const t=(function(s,a,l){if(s.startAt!==null)throw new le(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new le(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new $c(a,l)})(e._query,this._field,this._direction);return new Ms(e.firestore,e.converter,C5(e._query,t))}}function Cs(n,e="asc"){const t=e,r=Io("orderBy",n);return Py._create(r,t)}class jy extends Ay{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new jy(e,t,r)}_apply(e){return new Ms(e.firestore,e.converter,Th(e._query,this._limit,this._limitType))}}function Ny(n){return Zj("limit",n),jy._create("limit",n,"F")}function p_(n,e,t){if(typeof(t=Mt(t))=="string"){if(t==="")throw new le(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bk(e)&&t.indexOf("/")!==-1)throw new le(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(et.fromString(t));if(!xe.isDocumentKey(r))throw new le(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ax(n,new xe(r))}if(t instanceof _t)return Ax(n,t._key);throw new le(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qh(t)}.`)}function m_(n,e){if(!Array.isArray(n)||n.length===0)throw new le(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function VT(n,e){const t=(function(s,a){for(const l of s)for(const f of l.getFlattenedFilters())if(a.indexOf(f.op)>=0)return f.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new le(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new le(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function MT(n,e,t){let r;return r=n?n.toFirestore(e):e,r}class Ec{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xo extends DT{constructor(e,t,r,s,a,l){super(e,t,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new oh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Io("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new le(J.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=xo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}xo._jsonSchemaVersion="firestore/documentSnapshot/1.0",xo._jsonSchema={type:At("string",xo._jsonSchemaVersion),bundleSource:At("string","DocumentSnapshot"),bundleName:At("string"),bundle:At("string")};class oh extends xo{data(e={}){return super.data(e)}}class Oa{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Ec(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new oh(this._firestore,this._userDataWriter,r.key,r,new Ec(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new le(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,a){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map((f=>{const d=new oh(s._firestore,s._userDataWriter,f.doc.key,f.doc,new Ec(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);return f.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((f=>a||f.type!==3)).map((f=>{const d=new oh(s._firestore,s._userDataWriter,f.doc.key,f.doc,new Ec(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,g=-1;return f.type!==0&&(m=l.indexOf(f.doc.key),l=l.delete(f.doc.key)),f.type!==1&&(l=l.add(f.doc),g=l.indexOf(f.doc.key)),{type:sV(f.type),doc:d,oldIndex:m,newIndex:g}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new le(J.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Oa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Yg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function sV(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Oa._jsonSchemaVersion="firestore/querySnapshot/1.0",Oa._jsonSchema={type:At("string",Oa._jsonSchemaVersion),bundleSource:At("string","QuerySnapshot"),bundleName:At("string"),bundle:At("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fl(n){n=Hr(n,_t);const e=Hr(n.firestore,ul),t=wy(e);return BD(t,n._key).then((r=>oV(e,n,r)))}function yr(n){n=Hr(n,Ms);const e=Hr(n.firestore,ul),t=wy(e),r=new NT(e);return iV(n._query),FD(t,n._query).then((s=>new Oa(e,r,n,s)))}function gu(n,e,t){n=Hr(n,_t);const r=Hr(n.firestore,ul),s=MT(n.converter,e),a=lf(r);return Vy(r,[CT(a,"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,mr.none())])}function Gr(n,e,t,...r){n=Hr(n,_t);const s=Hr(n.firestore,ul),a=lf(s);let l;return l=typeof(e=Mt(e))=="string"||e instanceof Ey?JD(a,"updateDoc",n._key,e,t,r):XD(a,"updateDoc",n._key,e),Vy(s,[l.toMutation(n._key,mr.exists(!0))])}function Dy(n,e){const t=Hr(n.firestore,ul),r=zt(n),s=MT(n.converter,e),a=lf(n.firestore);return Vy(t,[CT(a,"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,mr.exists(!1))]).then((()=>r))}function Vy(n,e){const t=wy(n);return zD(t,e)}function oV(n,e,t){const r=t.docs.get(e._key),s=new NT(n);return new xo(n,s,e._key,r,new Ec(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){zj(rl),za(new Eo("firestore",((r,{instanceIdentifier:s,options:a})=>{const l=r.getProvider("app").getImmediate(),f=new ul(new Wj(r.getProvider("auth-internal")),new qj(l,r.getProvider("app-check-internal")),d5(l,s),l);return a={useFetchStreams:t,...a},f._setSettings(a),f}),"PUBLIC").setMultipleInstances(!0)),gs(h_,f_,e),gs(h_,f_,"esm2020")})();var aV="firebase",lV="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gs(aV,lV,"app");const cV={apiKey:"AIzaSyCf4uRHqqZtYR3ZvlbHF9w59qGuEjlXcW4",authDomain:"kinderbucks-e3e8c.firebaseapp.com",projectId:"kinderbucks-e3e8c",storageBucket:"kinderbucks-e3e8c.firebasestorage.app",messagingSenderId:"18326874439",appId:"1:18326874439:web:ad902e6a1c794b2b3c4462",measurementId:"G-3JMD9HSMC3"},LT=yE(cV),qe=HD(LT),Co=Bj(LT),No="users",_o={ADMIN:"admin",BUSINESS:"business",MEMBER:"member"};async function uV(n,e,t){const s=(await wP(Co,n,e)).user;return await TP(s,{displayName:t}),await gu(zt(qe,No,s.uid),{uid:s.uid,email:s.email,displayName:t,role:_o.MEMBER,createdAt:Vt(),lastLogin:Vt()}),s}async function dV(n,e){const t=await EP(Co,n,e);return await Gr(zt(qe,No,t.user.uid),{lastLogin:Vt()}),t.user}async function hV(){var a;const n=new fi,t=(await GP(Co,n)).user,r=zt(qe,No,t.uid);return(await fl(r)).exists()?await Gr(r,{lastLogin:Vt(),photoURL:t.photoURL}):await gu(r,{uid:t.uid,email:t.email,displayName:t.displayName||((a=t.email)==null?void 0:a.split("@")[0]),photoURL:t.photoURL,role:_o.MEMBER,createdAt:Vt(),lastLogin:Vt(),provider:"google"}),t}async function OT(){return CP(Co)}async function g_(n){const e=zt(qe,No,n),t=await fl(e);return t.exists()?t.data():null}async function fV(n,e){if(!Object.values(_o).includes(e))throw new Error("Invalid role");await Gr(zt(qe,No,n),{role:e,updatedAt:Vt()})}async function pV(n,e){await Gr(zt(qe,No,n),{role:_o.BUSINESS,businessCode:e,updatedAt:Vt()})}async function mV(){return(await yr(En(qe,No))).docs.map(e=>({id:e.id,...e.data()}))}function gV(n){return IP(Co,n)}const BT=N.createContext(null);function yV({children:n}){const[e,t]=N.useState(null),[r,s]=N.useState(null),[a,l]=N.useState(!0);N.useEffect(()=>{const k=gV(async C=>{if(t(C),C){const I=await g_(C.uid);s(I)}else s(null);l(!1)});return()=>k()},[]);const f=!!e,d=(r==null?void 0:r.role)===_o.ADMIN,m=(r==null?void 0:r.role)===_o.BUSINESS,g=(r==null?void 0:r.role)===_o.MEMBER,T={user:e,profile:r,loading:a,isAuthenticated:f,isAdmin:d,isBusiness:m,isMember:g,hasRole:(...k)=>r?k.includes(r.role):!1,refreshProfile:async()=>{if(e){const k=await g_(e.uid);s(k)}}};return c.jsx(BT.Provider,{value:T,children:n})}function Do(){const n=N.useContext(BT);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n}/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vV=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),xV=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),y_=n=>{const e=xV(n);return e.charAt(0).toUpperCase()+e.slice(1)},FT=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),_V=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var wV={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EV=N.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:l,...f},d)=>N.createElement("svg",{ref:d,...wV,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:FT("lucide",s),...!a&&!_V(f)&&{"aria-hidden":"true"},...f},[...l.map(([m,g])=>N.createElement(m,g)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=(n,e)=>{const t=N.forwardRef(({className:r,...s},a)=>N.createElement(EV,{ref:a,iconNode:e,className:FT(`lucide-${vV(y_(n))}`,`lucide-${n}`,r),...s}));return t.displayName=y_(n),t};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kV=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],df=ve("arrow-right-left",kV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TV=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Zm=ve("arrow-right",TV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SV=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Ai=ve("award",SV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bV=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],My=ve("banknote",bV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IV=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],zT=ve("briefcase",IV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CV=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Ly=ve("calendar",CV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AV=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],UT=ve("chart-column",AV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RV=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Gc=ve("check",RV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PV=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],jV=ve("chevron-left",PV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Oy=ve("circle-alert",NV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DV=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],As=ve("circle-check-big",DV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],MV=ve("circle-x",VV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LV=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ya=ve("clock",LV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OV=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],BV=ve("coins",OV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FV=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],$T=ve("compass",FV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zV=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],WT=ve("copy",zV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UV=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],eg=ve("credit-card",UV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $V=[["path",{d:"M10.2 18H4.774a1.5 1.5 0 0 1-1.352-.97 11 11 0 0 1 .132-6.487",key:"14kkz9"}],["path",{d:"M18 10.2V4.774a1.5 1.5 0 0 0-.97-1.352 11 11 0 0 0-6.486.132",key:"1g7v07"}],["path",{d:"M18 5a4 3 0 0 1 4 3 2 2 0 0 1-2 2 10 10 0 0 0-5.139 1.42",key:"ratg6b"}],["path",{d:"M5 18a3 4 0 0 0 3 4 2 2 0 0 0 2-2 10 10 0 0 1 1.42-5.14",key:"4454f0"}],["path",{d:"M8.709 2.554a10 10 0 0 0-6.155 6.155 1.5 1.5 0 0 0 .676 1.626l9.807 5.42a2 2 0 0 0 2.718-2.718l-5.42-9.807a1.5 1.5 0 0 0-1.626-.676",key:"qmemie"}]],WV=ve("croissant",$V);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HV=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Ln=ve("crown",HV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KV=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],HT=ve("download",KV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qV=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],GV=ve("ellipsis-vertical",qV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QV=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],YV=ve("gift",QV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XV=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],JV=ve("house",XV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZV=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],eM=ve("layout-dashboard",ZV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tM=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],nM=ve("lightbulb",tM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rM=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],By=ve("loader-circle",rM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iM=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],sM=ve("lock",iM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oM=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],Xa=ve("log-in",oM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aM=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],tg=ve("log-out",aM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lM=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],KT=ve("mail",lM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cM=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Pc=ve("map-pin",cM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uM=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],dM=ve("megaphone",uM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hM=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],v_=ve("package",hM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fM=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],qT=ve("palette",fM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pM=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],x_=ve("plus",pM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mM=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],gM=ve("printer",mM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yM=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],xs=ve("qr-code",yM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vM=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],xM=ve("refresh-cw",vM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _M=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],wM=ve("save",_M);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EM=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],kM=ve("search",EM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TM=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Rh=ve("send",TM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SM=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],bM=ve("shield-check",SM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IM=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Ph=ve("shield",IM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CM=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],GT=ve("shopping-bag",CM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AM=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],__=ve("smartphone",AM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RM=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],hf=ve("sparkles",RM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PM=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],jM=ve("square-check-big",PM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],DM=ve("square",NM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VM=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],xr=ve("star",VM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MM=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],Qt=ve("store",MM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Xt=ve("target",LM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],BM=ve("toggle-left",OM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FM=[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],zM=ve("toggle-right",FM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UM=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],pl=ve("trending-up",UM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $M=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],WM=ve("trophy",$M);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HM=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],w_=ve("user-plus",HM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KM=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Ba=ve("user",KM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qM=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Si=ve("users",qM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]],QT=ve("utensils-crossed",GM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QM=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],YM=ve("zap",QM);function as({children:n,allowedRoles:e=[]}){const{user:t,profile:r,loading:s,isAuthenticated:a}=Do(),l=er();return s?c.jsxs("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"var(--kb-cream)"},children:[c.jsxs("div",{style:{textAlign:"center"},children:[c.jsx(By,{size:48,color:"var(--kb-navy)",style:{animation:"spin 1s linear infinite"}}),c.jsx("p",{style:{marginTop:"1rem",color:"var(--kb-gray-500)"},children:"Loading..."})]}),c.jsx("style",{children:`
          @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
          }
        `})]}):a?e.length>0&&r&&!e.includes(r.role)?c.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"var(--kb-cream)",padding:"2rem"},children:c.jsxs("div",{className:"card",style:{maxWidth:"400px",textAlign:"center",padding:"2rem"},children:[c.jsx("h2",{style:{color:"#dc2626",marginBottom:"1rem"},children:"Access Denied"}),c.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem"},children:"You don't have permission to access this page."}),c.jsx("a",{href:"/",className:"btn btn-primary",children:"Go Home"})]})}):n:c.jsx(iC,{to:"/login",state:{from:l},replace:!0})}const YT=N.createContext({});function XM(n){const e=N.useRef(null);return e.current===null&&(e.current=n()),e.current}const XT=typeof window<"u",JM=XT?N.useLayoutEffect:N.useEffect,Fy=N.createContext(null);function zy(n,e){n.indexOf(e)===-1&&n.push(e)}function Uy(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const qr=(n,e,t)=>t>e?e:t<n?n:t;let $y=()=>{};const bi={},JT=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function ZT(n){return typeof n=="object"&&n!==null}const eS=n=>/^0[^.\s]+$/u.test(n);function Wy(n){let e;return()=>(e===void 0&&(e=n()),e)}const Qn=n=>n,ZM=(n,e)=>t=>e(n(t)),yu=(...n)=>n.reduce(ZM),Qc=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r};class Hy{constructor(){this.subscriptions=[]}add(e){return zy(this.subscriptions,e),()=>Uy(this.subscriptions,e)}notify(e,t,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,t,r);else for(let a=0;a<s;a++){const l=this.subscriptions[a];l&&l(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const xi=n=>n*1e3,Gn=n=>n/1e3;function tS(n,e){return e?n*(1e3/e):0}const nS=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,e4=1e-7,t4=12;function n4(n,e,t,r,s){let a,l,f=0;do l=e+(t-e)/2,a=nS(l,r,s)-n,a>0?t=l:e=l;while(Math.abs(a)>e4&&++f<t4);return l}function vu(n,e,t,r){if(n===e&&t===r)return Qn;const s=a=>n4(a,0,1,n,t);return a=>a===0||a===1?a:nS(s(a),e,r)}const rS=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,iS=n=>e=>1-n(1-e),sS=vu(.33,1.53,.69,.99),Ky=iS(sS),oS=rS(Ky),aS=n=>(n*=2)<1?.5*Ky(n):.5*(2-Math.pow(2,-10*(n-1))),qy=n=>1-Math.sin(Math.acos(n)),lS=iS(qy),cS=rS(qy),r4=vu(.42,0,1,1),i4=vu(0,0,.58,1),uS=vu(.42,0,.58,1),s4=n=>Array.isArray(n)&&typeof n[0]!="number",dS=n=>Array.isArray(n)&&typeof n[0]=="number",o4={linear:Qn,easeIn:r4,easeInOut:uS,easeOut:i4,circIn:qy,circInOut:cS,circOut:lS,backIn:Ky,backInOut:oS,backOut:sS,anticipate:aS},a4=n=>typeof n=="string",E_=n=>{if(dS(n)){$y(n.length===4);const[e,t,r,s]=n;return vu(e,t,r,s)}else if(a4(n))return o4[n];return n},Kd=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function l4(n,e){let t=new Set,r=new Set,s=!1,a=!1;const l=new WeakSet;let f={delta:0,timestamp:0,isProcessing:!1};function d(g){l.has(g)&&(m.schedule(g),n()),g(f)}const m={schedule:(g,v=!1,w=!1)=>{const k=w&&s?t:r;return v&&l.add(g),k.has(g)||k.add(g),g},cancel:g=>{r.delete(g),l.delete(g)},process:g=>{if(f=g,s){a=!0;return}s=!0,[t,r]=[r,t],t.forEach(d),t.clear(),s=!1,a&&(a=!1,m.process(g))}};return m}const c4=40;function hS(n,e){let t=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>t=!0,l=Kd.reduce((P,G)=>(P[G]=l4(a),P),{}),{setup:f,read:d,resolveKeyframes:m,preUpdate:g,update:v,preRender:w,render:T,postRender:k}=l,C=()=>{const P=bi.useManualTiming?s.timestamp:performance.now();t=!1,bi.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(P-s.timestamp,c4),1)),s.timestamp=P,s.isProcessing=!0,f.process(s),d.process(s),m.process(s),g.process(s),v.process(s),w.process(s),T.process(s),k.process(s),s.isProcessing=!1,t&&e&&(r=!1,n(C))},I=()=>{t=!0,r=!0,s.isProcessing||n(C)};return{schedule:Kd.reduce((P,G)=>{const $=l[G];return P[G]=(H,A=!1,b=!1)=>(t||I(),$.schedule(H,A,b)),P},{}),cancel:P=>{for(let G=0;G<Kd.length;G++)l[Kd[G]].cancel(P)},state:s,steps:l}}const{schedule:st,cancel:Rs,state:Kt,steps:sm}=hS(typeof requestAnimationFrame<"u"?requestAnimationFrame:Qn,!0);let ah;function u4(){ah=void 0}const hn={now:()=>(ah===void 0&&hn.set(Kt.isProcessing||bi.useManualTiming?Kt.timestamp:performance.now()),ah),set:n=>{ah=n,queueMicrotask(u4)}},fS=n=>e=>typeof e=="string"&&e.startsWith(n),pS=fS("--"),d4=fS("var(--"),Gy=n=>d4(n)?h4.test(n.split("/*")[0].trim()):!1,h4=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function k_(n){return typeof n!="string"?!1:n.split("/*")[0].includes("var(--")}const ml={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Yc={...ml,transform:n=>qr(0,1,n)},qd={...ml,default:1},jc=n=>Math.round(n*1e5)/1e5,Qy=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function f4(n){return n==null}const p4=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Yy=(n,e)=>t=>!!(typeof t=="string"&&p4.test(t)&&t.startsWith(n)||e&&!f4(t)&&Object.prototype.hasOwnProperty.call(t,e)),mS=(n,e,t)=>r=>{if(typeof r!="string")return r;const[s,a,l,f]=r.match(Qy);return{[n]:parseFloat(s),[e]:parseFloat(a),[t]:parseFloat(l),alpha:f!==void 0?parseFloat(f):1}},m4=n=>qr(0,255,n),om={...ml,transform:n=>Math.round(m4(n))},yo={test:Yy("rgb","red"),parse:mS("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+om.transform(n)+", "+om.transform(e)+", "+om.transform(t)+", "+jc(Yc.transform(r))+")"};function g4(n){let e="",t="",r="",s="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),s=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),s=n.substring(4,5),e+=e,t+=t,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const ng={test:Yy("#"),parse:g4,transform:yo.transform},xu=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),ls=xu("deg"),Wr=xu("%"),he=xu("px"),y4=xu("vh"),v4=xu("vw"),T_={...Wr,parse:n=>Wr.parse(n)/100,transform:n=>Wr.transform(n*100)},Ca={test:Yy("hsl","hue"),parse:mS("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+Wr.transform(jc(e))+", "+Wr.transform(jc(t))+", "+jc(Yc.transform(r))+")"},It={test:n=>yo.test(n)||ng.test(n)||Ca.test(n),parse:n=>yo.test(n)?yo.parse(n):Ca.test(n)?Ca.parse(n):ng.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?yo.transform(n):Ca.transform(n),getAnimatableNone:n=>{const e=It.parse(n);return e.alpha=0,It.transform(e)}},x4=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function _4(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(Qy))==null?void 0:e.length)||0)+(((t=n.match(x4))==null?void 0:t.length)||0)>0}const gS="number",yS="color",w4="var",E4="var(",S_="${}",k4=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Xc(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},s=[];let a=0;const f=e.replace(k4,d=>(It.test(d)?(r.color.push(a),s.push(yS),t.push(It.parse(d))):d.startsWith(E4)?(r.var.push(a),s.push(w4),t.push(d)):(r.number.push(a),s.push(gS),t.push(parseFloat(d))),++a,S_)).split(S_);return{values:t,split:f,indexes:r,types:s}}function vS(n){return Xc(n).values}function xS(n){const{split:e,types:t}=Xc(n),r=e.length;return s=>{let a="";for(let l=0;l<r;l++)if(a+=e[l],s[l]!==void 0){const f=t[l];f===gS?a+=jc(s[l]):f===yS?a+=It.transform(s[l]):a+=s[l]}return a}}const T4=n=>typeof n=="number"?0:It.test(n)?It.getAnimatableNone(n):n;function S4(n){const e=vS(n);return xS(n)(e.map(T4))}const Ps={test:_4,parse:vS,createTransformer:xS,getAnimatableNone:S4};function am(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function b4({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let s=0,a=0,l=0;if(!e)s=a=l=t;else{const f=t<.5?t*(1+e):t+e-t*e,d=2*t-f;s=am(d,f,n+1/3),a=am(d,f,n),l=am(d,f,n-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(l*255),alpha:r}}function jh(n,e){return t=>t>0?e:n}const ut=(n,e,t)=>n+(e-n)*t,lm=(n,e,t)=>{const r=n*n,s=t*(e*e-r)+r;return s<0?0:Math.sqrt(s)},I4=[ng,yo,Ca],C4=n=>I4.find(e=>e.test(n));function b_(n){const e=C4(n);if(!e)return!1;let t=e.parse(n);return e===Ca&&(t=b4(t)),t}const I_=(n,e)=>{const t=b_(n),r=b_(e);if(!t||!r)return jh(n,e);const s={...t};return a=>(s.red=lm(t.red,r.red,a),s.green=lm(t.green,r.green,a),s.blue=lm(t.blue,r.blue,a),s.alpha=ut(t.alpha,r.alpha,a),yo.transform(s))},rg=new Set(["none","hidden"]);function A4(n,e){return rg.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function R4(n,e){return t=>ut(n,e,t)}function Xy(n){return typeof n=="number"?R4:typeof n=="string"?Gy(n)?jh:It.test(n)?I_:N4:Array.isArray(n)?_S:typeof n=="object"?It.test(n)?I_:P4:jh}function _S(n,e){const t=[...n],r=t.length,s=n.map((a,l)=>Xy(a)(a,e[l]));return a=>{for(let l=0;l<r;l++)t[l]=s[l](a);return t}}function P4(n,e){const t={...n,...e},r={};for(const s in t)n[s]!==void 0&&e[s]!==void 0&&(r[s]=Xy(n[s])(n[s],e[s]));return s=>{for(const a in r)t[a]=r[a](s);return t}}function j4(n,e){const t=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const a=e.types[s],l=n.indexes[a][r[a]],f=n.values[l]??0;t[s]=f,r[a]++}return t}const N4=(n,e)=>{const t=Ps.createTransformer(e),r=Xc(n),s=Xc(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?rg.has(n)&&!s.values.length||rg.has(e)&&!r.values.length?A4(n,e):yu(_S(j4(r,s),s.values),t):jh(n,e)};function wS(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?ut(n,e,t):Xy(n)(n,e)}const D4=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>st.update(e,t),stop:()=>Rs(e),now:()=>Kt.isProcessing?Kt.timestamp:hn.now()}},ES=(n,e,t=10)=>{let r="";const s=Math.max(Math.round(e/t),2);for(let a=0;a<s;a++)r+=Math.round(n(a/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Nh=2e4;function Jy(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<Nh;)e+=t,r=n.next(e);return e>=Nh?1/0:e}function V4(n,e=100,t){const r=t({...n,keyframes:[0,e]}),s=Math.min(Jy(r),Nh);return{type:"keyframes",ease:a=>r.next(s*a).value/e,duration:Gn(s)}}const M4=5;function kS(n,e,t){const r=Math.max(e-M4,0);return tS(t-n(r),e-r)}const mt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},cm=.001;function L4({duration:n=mt.duration,bounce:e=mt.bounce,velocity:t=mt.velocity,mass:r=mt.mass}){let s,a,l=1-e;l=qr(mt.minDamping,mt.maxDamping,l),n=qr(mt.minDuration,mt.maxDuration,Gn(n)),l<1?(s=m=>{const g=m*l,v=g*n,w=g-t,T=ig(m,l),k=Math.exp(-v);return cm-w/T*k},a=m=>{const v=m*l*n,w=v*t+t,T=Math.pow(l,2)*Math.pow(m,2)*n,k=Math.exp(-v),C=ig(Math.pow(m,2),l);return(-s(m)+cm>0?-1:1)*((w-T)*k)/C}):(s=m=>{const g=Math.exp(-m*n),v=(m-t)*n+1;return-cm+g*v},a=m=>{const g=Math.exp(-m*n),v=(t-m)*(n*n);return g*v});const f=5/n,d=B4(s,a,f);if(n=xi(n),isNaN(d))return{stiffness:mt.stiffness,damping:mt.damping,duration:n};{const m=Math.pow(d,2)*r;return{stiffness:m,damping:l*2*Math.sqrt(r*m),duration:n}}}const O4=12;function B4(n,e,t){let r=t;for(let s=1;s<O4;s++)r=r-n(r)/e(r);return r}function ig(n,e){return n*Math.sqrt(1-e*e)}const F4=["duration","bounce"],z4=["stiffness","damping","mass"];function C_(n,e){return e.some(t=>n[t]!==void 0)}function U4(n){let e={velocity:mt.velocity,stiffness:mt.stiffness,damping:mt.damping,mass:mt.mass,isResolvedFromDuration:!1,...n};if(!C_(n,z4)&&C_(n,F4))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),s=r*r,a=2*qr(.05,1,1-(n.bounce||0))*Math.sqrt(s);e={...e,mass:mt.mass,stiffness:s,damping:a}}else{const t=L4(n);e={...e,...t,mass:mt.mass},e.isResolvedFromDuration=!0}return e}function Dh(n=mt.visualDuration,e=mt.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:s}=t;const a=t.keyframes[0],l=t.keyframes[t.keyframes.length-1],f={done:!1,value:a},{stiffness:d,damping:m,mass:g,duration:v,velocity:w,isResolvedFromDuration:T}=U4({...t,velocity:-Gn(t.velocity||0)}),k=w||0,C=m/(2*Math.sqrt(d*g)),I=l-a,V=Gn(Math.sqrt(d/g)),B=Math.abs(I)<5;r||(r=B?mt.restSpeed.granular:mt.restSpeed.default),s||(s=B?mt.restDelta.granular:mt.restDelta.default);let P;if(C<1){const $=ig(V,C);P=H=>{const A=Math.exp(-C*V*H);return l-A*((k+C*V*I)/$*Math.sin($*H)+I*Math.cos($*H))}}else if(C===1)P=$=>l-Math.exp(-V*$)*(I+(k+V*I)*$);else{const $=V*Math.sqrt(C*C-1);P=H=>{const A=Math.exp(-C*V*H),b=Math.min($*H,300);return l-A*((k+C*V*I)*Math.sinh(b)+$*I*Math.cosh(b))/$}}const G={calculatedDuration:T&&v||null,next:$=>{const H=P($);if(T)f.done=$>=v;else{let A=$===0?k:0;C<1&&(A=$===0?xi(k):kS(P,$,H));const b=Math.abs(A)<=r,j=Math.abs(l-H)<=s;f.done=b&&j}return f.value=f.done?l:H,f},toString:()=>{const $=Math.min(Jy(G),Nh),H=ES(A=>G.next($*A).value,$,30);return $+"ms "+H},toTransition:()=>{}};return G}Dh.applyToOptions=n=>{const e=V4(n,100,Dh);return n.ease=e.ease,n.duration=xi(e.duration),n.type="keyframes",n};function sg({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:l,min:f,max:d,restDelta:m=.5,restSpeed:g}){const v=n[0],w={done:!1,value:v},T=b=>f!==void 0&&b<f||d!==void 0&&b>d,k=b=>f===void 0?d:d===void 0||Math.abs(f-b)<Math.abs(d-b)?f:d;let C=t*e;const I=v+C,V=l===void 0?I:l(I);V!==I&&(C=V-v);const B=b=>-C*Math.exp(-b/r),P=b=>V+B(b),G=b=>{const j=B(b),L=P(b);w.done=Math.abs(j)<=m,w.value=w.done?V:L};let $,H;const A=b=>{T(w.value)&&($=b,H=Dh({keyframes:[w.value,k(w.value)],velocity:kS(P,b,w.value),damping:s,stiffness:a,restDelta:m,restSpeed:g}))};return A(0),{calculatedDuration:null,next:b=>{let j=!1;return!H&&$===void 0&&(j=!0,G(b),A(b)),$!==void 0&&b>=$?H.next(b-$):(!j&&G(b),w)}}}function $4(n,e,t){const r=[],s=t||bi.mix||wS,a=n.length-1;for(let l=0;l<a;l++){let f=s(n[l],n[l+1]);if(e){const d=Array.isArray(e)?e[l]||Qn:e;f=yu(d,f)}r.push(f)}return r}function W4(n,e,{clamp:t=!0,ease:r,mixer:s}={}){const a=n.length;if($y(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const l=n[0]===n[1];n[0]>n[a-1]&&(n=[...n].reverse(),e=[...e].reverse());const f=$4(e,r,s),d=f.length,m=g=>{if(l&&g<n[0])return e[0];let v=0;if(d>1)for(;v<n.length-2&&!(g<n[v+1]);v++);const w=Qc(n[v],n[v+1],g);return f[v](w)};return t?g=>m(qr(n[0],n[a-1],g)):m}function H4(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const s=Qc(0,e,r);n.push(ut(t,1,s))}}function K4(n){const e=[0];return H4(e,n.length-1),e}function q4(n,e){return n.map(t=>t*e)}function G4(n,e){return n.map(()=>e||uS).splice(0,n.length-1)}function Nc({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const s=s4(r)?r.map(E_):E_(r),a={done:!1,value:e[0]},l=q4(t&&t.length===e.length?t:K4(e),n),f=W4(l,e,{ease:Array.isArray(s)?s:G4(e,s)});return{calculatedDuration:n,next:d=>(a.value=f(d),a.done=d>=n,a)}}const Q4=n=>n!==null;function Zy(n,{repeat:e,repeatType:t="loop"},r,s=1){const a=n.filter(Q4),f=s<0||e&&t!=="loop"&&e%2===1?0:a.length-1;return!f||r===void 0?a[f]:r}const Y4={decay:sg,inertia:sg,tween:Nc,keyframes:Nc,spring:Dh};function TS(n){typeof n.type=="string"&&(n.type=Y4[n.type])}class e0{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const X4=n=>n/100;class t0 extends e0{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:t}=this.options;t&&t.updatedAt!==hn.now()&&this.tick(hn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;TS(e);const{type:t=Nc,repeat:r=0,repeatDelay:s=0,repeatType:a,velocity:l=0}=e;let{keyframes:f}=e;const d=t||Nc;d!==Nc&&typeof f[0]!="number"&&(this.mixKeyframes=yu(X4,wS(f[0],f[1])),f=[0,100]);const m=d({...e,keyframes:f});a==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...f].reverse(),velocity:-l})),m.calculatedDuration===null&&(m.calculatedDuration=Jy(m));const{calculatedDuration:g}=m;this.calculatedDuration=g,this.resolvedDuration=g+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=m}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:r,totalDuration:s,mixKeyframes:a,mirroredGenerator:l,resolvedDuration:f,calculatedDuration:d}=this;if(this.startTime===null)return r.next(0);const{delay:m=0,keyframes:g,repeat:v,repeatType:w,repeatDelay:T,type:k,onUpdate:C,finalKeyframe:I}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const V=this.currentTime-m*(this.playbackSpeed>=0?1:-1),B=this.playbackSpeed>=0?V<0:V>s;this.currentTime=Math.max(V,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let P=this.currentTime,G=r;if(v){const b=Math.min(this.currentTime,s)/f;let j=Math.floor(b),L=b%1;!L&&b>=1&&(L=1),L===1&&j--,j=Math.min(j,v+1),!!(j%2)&&(w==="reverse"?(L=1-L,T&&(L-=T/f)):w==="mirror"&&(G=l)),P=qr(0,1,L)*f}const $=B?{done:!1,value:g[0]}:G.next(P);a&&($.value=a($.value));let{done:H}=$;!B&&d!==null&&(H=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const A=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&H);return A&&k!==sg&&($.value=Zy(g,this.options,I,this.speed)),C&&C($.value),A&&this.finish(),$}then(e,t){return this.finished.then(e,t)}get duration(){return Gn(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Gn(e)}get time(){return Gn(this.currentTime)}set time(e){var t;e=xi(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(t=this.driver)==null||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(hn.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Gn(this.currentTime))}play(){var s,a;if(this.isStopped)return;const{driver:e=D4,startTime:t}=this.options;this.driver||(this.driver=e(l=>this.tick(l))),(a=(s=this.options).onPlay)==null||a.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=t??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(hn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",(t=(e=this.options).onComplete)==null||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(t=(e=this.options).onCancel)==null||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(t=this.driver)==null||t.stop(),e.observe(this)}}function J4(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const vo=n=>n*180/Math.PI,og=n=>{const e=vo(Math.atan2(n[1],n[0]));return ag(e)},Z4={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:og,rotateZ:og,skewX:n=>vo(Math.atan(n[1])),skewY:n=>vo(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},ag=n=>(n=n%360,n<0&&(n+=360),n),A_=og,R_=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),P_=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),eL={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:R_,scaleY:P_,scale:n=>(R_(n)+P_(n))/2,rotateX:n=>ag(vo(Math.atan2(n[6],n[5]))),rotateY:n=>ag(vo(Math.atan2(-n[2],n[0]))),rotateZ:A_,rotate:A_,skewX:n=>vo(Math.atan(n[4])),skewY:n=>vo(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function lg(n){return n.includes("scale")?1:0}function cg(n,e){if(!n||n==="none")return lg(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(t)r=eL,s=t;else{const f=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Z4,s=f}if(!s)return lg(e);const a=r[e],l=s[1].split(",").map(nL);return typeof a=="function"?a(l):l[a]}const tL=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return cg(t,e)};function nL(n){return parseFloat(n.trim())}const gl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],yl=new Set(gl),j_=n=>n===ml||n===he,rL=new Set(["x","y","z"]),iL=gl.filter(n=>!rL.has(n));function sL(n){const e=[];return iL.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const fs={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>cg(e,"x"),y:(n,{transform:e})=>cg(e,"y")};fs.translateX=fs.x;fs.translateY=fs.y;const wo=new Set;let ug=!1,dg=!1,hg=!1;function SS(){if(dg){const n=Array.from(wo).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const s=sL(r);s.length&&(t.set(r,s),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=t.get(r);s&&s.forEach(([a,l])=>{var f;(f=r.getValue(a))==null||f.set(l)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}dg=!1,ug=!1,wo.forEach(n=>n.complete(hg)),wo.clear()}function bS(){wo.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(dg=!0)})}function oL(){hg=!0,bS(),SS(),hg=!1}class n0{constructor(e,t,r,s,a,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=s,this.element=a,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(wo.add(this),ug||(ug=!0,st.read(bS),st.resolveKeyframes(SS))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:s}=this;if(e[0]===null){const a=s==null?void 0:s.get(),l=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&t){const f=r.readValue(t,l);f!=null&&(e[0]=f)}e[0]===void 0&&(e[0]=l),s&&a===void 0&&s.set(e[0])}J4(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),wo.delete(this)}cancel(){this.state==="scheduled"&&(wo.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const aL=n=>n.startsWith("--");function lL(n,e,t){aL(e)?n.style.setProperty(e,t):n.style[e]=t}const cL=Wy(()=>window.ScrollTimeline!==void 0),uL={};function dL(n,e){const t=Wy(n);return()=>uL[e]??t()}const IS=dL(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),kc=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,N_={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:kc([0,.65,.55,1]),circOut:kc([.55,0,1,.45]),backIn:kc([.31,.01,.66,-.59]),backOut:kc([.33,1.53,.69,.99])};function CS(n,e){if(n)return typeof n=="function"?IS()?ES(n,e):"ease-out":dS(n)?kc(n):Array.isArray(n)?n.map(t=>CS(t,e)||N_.easeOut):N_[n]}function hL(n,e,t,{delay:r=0,duration:s=300,repeat:a=0,repeatType:l="loop",ease:f="easeOut",times:d}={},m=void 0){const g={[e]:t};d&&(g.offset=d);const v=CS(f,s);Array.isArray(v)&&(g.easing=v);const w={delay:r,duration:s,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:a+1,direction:l==="reverse"?"alternate":"normal"};return m&&(w.pseudoElement=m),n.animate(g,w)}function AS(n){return typeof n=="function"&&"applyToOptions"in n}function fL({type:n,...e}){return AS(n)&&IS()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class pL extends e0{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:t,name:r,keyframes:s,pseudoElement:a,allowFlatten:l=!1,finalKeyframe:f,onComplete:d}=e;this.isPseudoElement=!!a,this.allowFlatten=l,this.options=e,$y(typeof e.type!="string");const m=fL(e);this.animation=hL(t,r,s,m,a),m.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const g=Zy(s,this.options,f,this.speed);this.updateMotionValue?this.updateMotionValue(g):lL(t,r,g),this.animation.cancel()}d==null||d(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;(t=(e=this.animation).finish)==null||t.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(t=(e=this.animation).commitStyles)==null||t.call(e)}get duration(){var t,r;const e=((r=(t=this.animation.effect)==null?void 0:t.getComputedTiming)==null?void 0:r.call(t).duration)||0;return Gn(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Gn(e)}get time(){return Gn(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=xi(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&cL()?(this.animation.timeline=e,Qn):t(this)}}const RS={anticipate:aS,backInOut:oS,circInOut:cS};function mL(n){return n in RS}function gL(n){typeof n.ease=="string"&&mL(n.ease)&&(n.ease=RS[n.ease])}const um=10;class yL extends pL{constructor(e){gL(e),TS(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:r,onComplete:s,element:a,...l}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const f=new t0({...l,autoplay:!1}),d=Math.max(um,hn.now()-this.startTime),m=qr(0,um,d-um);t.setWithVelocity(f.sample(Math.max(0,d-m)).value,f.sample(d).value,m),f.stop()}}const D_=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Ps.test(n)||n==="0")&&!n.startsWith("url("));function vL(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function xL(n,e,t,r){const s=n[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const a=n[n.length-1],l=D_(s,e),f=D_(a,e);return!l||!f?!1:vL(n)||(t==="spring"||AS(t))&&r}function fg(n){n.duration=0,n.type="keyframes"}const _L=new Set(["opacity","clipPath","filter","transform"]),wL=Wy(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function EL(n){var g;const{motionValue:e,name:t,repeatDelay:r,repeatType:s,damping:a,type:l}=n;if(!(((g=e==null?void 0:e.owner)==null?void 0:g.current)instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:m}=e.owner.getProps();return wL()&&t&&_L.has(t)&&(t!=="transform"||!m)&&!d&&!r&&s!=="mirror"&&a!==0&&l!=="inertia"}const kL=40;class TL extends e0{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:l="loop",keyframes:f,name:d,motionValue:m,element:g,...v}){var k;super(),this.stop=()=>{var C,I;this._animation&&(this._animation.stop(),(C=this.stopTimeline)==null||C.call(this)),(I=this.keyframeResolver)==null||I.cancel()},this.createdAt=hn.now();const w={autoplay:e,delay:t,type:r,repeat:s,repeatDelay:a,repeatType:l,name:d,motionValue:m,element:g,...v},T=(g==null?void 0:g.KeyframeResolver)||n0;this.keyframeResolver=new T(f,(C,I,V)=>this.onKeyframesResolved(C,I,w,!V),d,m,g),(k=this.keyframeResolver)==null||k.scheduleResolve()}onKeyframesResolved(e,t,r,s){var I,V;this.keyframeResolver=void 0;const{name:a,type:l,velocity:f,delay:d,isHandoff:m,onUpdate:g}=r;this.resolvedAt=hn.now(),xL(e,a,l,f)||((bi.instantAnimations||!d)&&(g==null||g(Zy(e,r,t))),e[0]=e[e.length-1],fg(r),r.repeat=0);const w={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>kL?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...r,keyframes:e},T=!m&&EL(w),k=(V=(I=w.motionValue)==null?void 0:I.owner)==null?void 0:V.current,C=T?new yL({...w,element:k}):new t0(w);C.finished.then(()=>{this.notifyFinished()}).catch(Qn),this.pendingTimeline&&(this.stopTimeline=C.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=C}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),oL()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}function PS(n,e,t,r=0,s=1){const a=Array.from(n).sort((m,g)=>m.sortNodePosition(g)).indexOf(e),l=n.size,f=(l-1)*r;return typeof t=="function"?t(a,l):s===1?a*r:f-a*r}const SL=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function bL(n){const e=SL.exec(n);if(!e)return[,];const[,t,r,s]=e;return[`--${t??r}`,s]}function jS(n,e,t=1){const[r,s]=bL(n);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const l=a.trim();return JT(l)?parseFloat(l):l}return Gy(s)?jS(s,e,t+1):s}const IL={type:"spring",stiffness:500,damping:25,restSpeed:10},CL=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),AL={type:"keyframes",duration:.8},RL={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},PL=(n,{keyframes:e})=>e.length>2?AL:yl.has(n)?n.startsWith("scale")?CL(e[1]):IL:RL,jL=n=>n!==null;function NL(n,{repeat:e,repeatType:t="loop"},r){const s=n.filter(jL),a=e&&t!=="loop"&&e%2===1?0:s.length-1;return s[a]}function r0(n,e){return(n==null?void 0:n[e])??(n==null?void 0:n.default)??n}function DL({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:s,repeat:a,repeatType:l,repeatDelay:f,from:d,elapsed:m,...g}){return!!Object.keys(g).length}const i0=(n,e,t,r={},s,a)=>l=>{const f=r0(r,n)||{},d=f.delay||r.delay||0;let{elapsed:m=0}=r;m=m-xi(d);const g={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...f,delay:-m,onUpdate:w=>{e.set(w),f.onUpdate&&f.onUpdate(w)},onComplete:()=>{l(),f.onComplete&&f.onComplete()},name:n,motionValue:e,element:a?void 0:s};DL(f)||Object.assign(g,PL(n,g)),g.duration&&(g.duration=xi(g.duration)),g.repeatDelay&&(g.repeatDelay=xi(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let v=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(fg(g),g.delay===0&&(v=!0)),(bi.instantAnimations||bi.skipAnimations)&&(v=!0,fg(g),g.delay=0),g.allowFlatten=!f.type&&!f.ease,v&&!a&&e.get()!==void 0){const w=NL(g.keyframes,f);if(w!==void 0){st.update(()=>{g.onUpdate(w),g.onComplete()});return}}return f.isSync?new t0(g):new TL(g)};function V_(n){const e=[{},{}];return n==null||n.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function s0(n,e,t,r){if(typeof e=="function"){const[s,a]=V_(r);e=e(t!==void 0?t:n.custom,s,a)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[s,a]=V_(r);e=e(t!==void 0?t:n.custom,s,a)}return e}function Fa(n,e,t){const r=n.getProps();return s0(r,e,t!==void 0?t:r.custom,n)}const NS=new Set(["width","height","top","left","right","bottom",...gl]),M_=30,VL=n=>!isNaN(parseFloat(n));class ML{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var a;const s=hn.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((a=this.events.change)==null||a.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=hn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=VL(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Hy);const r=this.events[e].add(t);return e==="change"?()=>{r(),st.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=hn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>M_)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,M_);return tS(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;(e=this.dependents)==null||e.clear(),(t=this.events.destroy)==null||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ja(n,e){return new ML(n,e)}const pg=n=>Array.isArray(n);function LL(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Ja(t))}function OL(n){return pg(n)?n[n.length-1]||0:n}function BL(n,e){const t=Fa(n,e);let{transitionEnd:r={},transition:s={},...a}=t||{};a={...a,...r};for(const l in a){const f=OL(a[l]);LL(n,l,f)}}const an=n=>!!(n&&n.getVelocity);function FL(n){return!!(an(n)&&n.add)}function mg(n,e){const t=n.getValue("willChange");if(FL(t))return t.add(e);if(!t&&bi.WillChange){const r=new bi.WillChange("auto");n.addValue("willChange",r),r.add(e)}}function o0(n){return n.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const zL="framerAppearId",DS="data-"+o0(zL);function VS(n){return n.props[DS]}function UL({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function MS(n,e,{delay:t=0,transitionOverride:r,type:s}={}){let{transition:a=n.getDefaultTransition(),transitionEnd:l,...f}=e;r&&(a=r);const d=[],m=s&&n.animationState&&n.animationState.getState()[s];for(const g in f){const v=n.getValue(g,n.latestValues[g]??null),w=f[g];if(w===void 0||m&&UL(m,g))continue;const T={delay:t,...r0(a||{},g)},k=v.get();if(k!==void 0&&!v.isAnimating&&!Array.isArray(w)&&w===k&&!T.velocity)continue;let C=!1;if(window.MotionHandoffAnimation){const V=VS(n);if(V){const B=window.MotionHandoffAnimation(V,g,st);B!==null&&(T.startTime=B,C=!0)}}mg(n,g),v.start(i0(g,v,w,n.shouldReduceMotion&&NS.has(g)?{type:!1}:T,n,C));const I=v.animation;I&&d.push(I)}return l&&Promise.all(d).then(()=>{st.update(()=>{l&&BL(n,l)})}),d}function gg(n,e,t={}){var d;const r=Fa(n,e,t.type==="exit"?(d=n.presenceContext)==null?void 0:d.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(s=t.transitionOverride);const a=r?()=>Promise.all(MS(n,r,t)):()=>Promise.resolve(),l=n.variantChildren&&n.variantChildren.size?(m=0)=>{const{delayChildren:g=0,staggerChildren:v,staggerDirection:w}=s;return $L(n,e,m,g,v,w,t)}:()=>Promise.resolve(),{when:f}=s;if(f){const[m,g]=f==="beforeChildren"?[a,l]:[l,a];return m().then(()=>g())}else return Promise.all([a(),l(t.delay)])}function $L(n,e,t=0,r=0,s=0,a=1,l){const f=[];for(const d of n.variantChildren)d.notify("AnimationStart",e),f.push(gg(d,e,{...l,delay:t+(typeof r=="function"?0:r)+PS(n.variantChildren,d,r,s,a)}).then(()=>d.notify("AnimationComplete",e)));return Promise.all(f)}function WL(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(a=>gg(n,a,t));r=Promise.all(s)}else if(typeof e=="string")r=gg(n,e,t);else{const s=typeof e=="function"?Fa(n,e,t.custom):e;r=Promise.all(MS(n,s,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}const HL={test:n=>n==="auto",parse:n=>n},LS=n=>e=>e.test(n),OS=[ml,he,Wr,ls,v4,y4,HL],L_=n=>OS.find(LS(n));function KL(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||eS(n):!0}const qL=new Set(["brightness","contrast","saturate","opacity"]);function GL(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(Qy)||[];if(!r)return n;const s=t.replace(r,"");let a=qL.has(e)?1:0;return r!==t&&(a*=100),e+"("+a+s+")"}const QL=/\b([a-z-]*)\(.*?\)/gu,yg={...Ps,getAnimatableNone:n=>{const e=n.match(QL);return e?e.map(GL).join(" "):n}},O_={...ml,transform:Math.round},YL={rotate:ls,rotateX:ls,rotateY:ls,rotateZ:ls,scale:qd,scaleX:qd,scaleY:qd,scaleZ:qd,skew:ls,skewX:ls,skewY:ls,distance:he,translateX:he,translateY:he,translateZ:he,x:he,y:he,z:he,perspective:he,transformPerspective:he,opacity:Yc,originX:T_,originY:T_,originZ:he},a0={borderWidth:he,borderTopWidth:he,borderRightWidth:he,borderBottomWidth:he,borderLeftWidth:he,borderRadius:he,radius:he,borderTopLeftRadius:he,borderTopRightRadius:he,borderBottomRightRadius:he,borderBottomLeftRadius:he,width:he,maxWidth:he,height:he,maxHeight:he,top:he,right:he,bottom:he,left:he,inset:he,insetBlock:he,insetBlockStart:he,insetBlockEnd:he,insetInline:he,insetInlineStart:he,insetInlineEnd:he,padding:he,paddingTop:he,paddingRight:he,paddingBottom:he,paddingLeft:he,paddingBlock:he,paddingBlockStart:he,paddingBlockEnd:he,paddingInline:he,paddingInlineStart:he,paddingInlineEnd:he,margin:he,marginTop:he,marginRight:he,marginBottom:he,marginLeft:he,marginBlock:he,marginBlockStart:he,marginBlockEnd:he,marginInline:he,marginInlineStart:he,marginInlineEnd:he,backgroundPositionX:he,backgroundPositionY:he,...YL,zIndex:O_,fillOpacity:Yc,strokeOpacity:Yc,numOctaves:O_},XL={...a0,color:It,backgroundColor:It,outlineColor:It,fill:It,stroke:It,borderColor:It,borderTopColor:It,borderRightColor:It,borderBottomColor:It,borderLeftColor:It,filter:yg,WebkitFilter:yg},BS=n=>XL[n];function FS(n,e){let t=BS(n);return t!==yg&&(t=Ps),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const JL=new Set(["auto","none","0"]);function ZL(n,e,t){let r=0,s;for(;r<n.length&&!s;){const a=n[r];typeof a=="string"&&!JL.has(a)&&Xc(a).values.length&&(s=n[r]),r++}if(s&&t)for(const a of e)n[a]=FS(t,s)}class e3 extends n0{constructor(e,t,r,s,a){super(e,t,r,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let g=0;g<e.length;g++){let v=e[g];if(typeof v=="string"&&(v=v.trim(),Gy(v))){const w=jS(v,t.current);w!==void 0&&(e[g]=w),g===e.length-1&&(this.finalKeyframe=v)}}if(this.resolveNoneKeyframes(),!NS.has(r)||e.length!==2)return;const[s,a]=e,l=L_(s),f=L_(a),d=k_(s),m=k_(a);if(d!==m&&fs[r]){this.needsMeasurement=!0;return}if(l!==f)if(j_(l)&&j_(f))for(let g=0;g<e.length;g++){const v=e[g];typeof v=="string"&&(e[g]=parseFloat(v))}else fs[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||KL(e[s]))&&r.push(s);r.length&&ZL(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=fs[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const s=t[t.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var f;const{element:e,name:t,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(t);s&&s.jump(this.measuredOrigin,!1);const a=r.length-1,l=r[a];r[a]=fs[t](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),(f=this.removedTransforms)!=null&&f.length&&this.removedTransforms.forEach(([d,m])=>{e.getValue(d).set(m)}),this.resolveNoneKeyframes()}}function t3(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let r=document;const s=(t==null?void 0:t[n])??r.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n)}const zS=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function n3(n){return ZT(n)&&"offsetHeight"in n}const{schedule:l0}=hS(queueMicrotask,!1),hr={x:!1,y:!1};function US(){return hr.x||hr.y}function r3(n){return n==="x"||n==="y"?hr[n]?null:(hr[n]=!0,()=>{hr[n]=!1}):hr.x||hr.y?null:(hr.x=hr.y=!0,()=>{hr.x=hr.y=!1})}function $S(n,e){const t=t3(n),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[t,s,()=>r.abort()]}function B_(n){return!(n.pointerType==="touch"||US())}function i3(n,e,t={}){const[r,s,a]=$S(n,t),l=f=>{if(!B_(f))return;const{target:d}=f,m=e(d,f);if(typeof m!="function"||!d)return;const g=v=>{B_(v)&&(m(v),d.removeEventListener("pointerleave",g))};d.addEventListener("pointerleave",g,s)};return r.forEach(f=>{f.addEventListener("pointerenter",l,s)}),a}const WS=(n,e)=>e?n===e?!0:WS(n,e.parentElement):!1,c0=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,s3=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function HS(n){return s3.has(n.tagName)||n.isContentEditable===!0}const lh=new WeakSet;function F_(n){return e=>{e.key==="Enter"&&n(e)}}function dm(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const o3=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=F_(()=>{if(lh.has(t))return;dm(t,"down");const s=F_(()=>{dm(t,"up")}),a=()=>dm(t,"cancel");t.addEventListener("keyup",s,e),t.addEventListener("blur",a,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function z_(n){return c0(n)&&!US()}function a3(n,e,t={}){const[r,s,a]=$S(n,t),l=f=>{const d=f.currentTarget;if(!z_(f))return;lh.add(d);const m=e(d,f),g=(T,k)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",w),lh.has(d)&&lh.delete(d),z_(T)&&typeof m=="function"&&m(T,{success:k})},v=T=>{g(T,d===window||d===document||t.useGlobalTarget||WS(d,T.target))},w=T=>{g(T,!1)};window.addEventListener("pointerup",v,s),window.addEventListener("pointercancel",w,s)};return r.forEach(f=>{(t.useGlobalTarget?window:f).addEventListener("pointerdown",l,s),n3(f)&&(f.addEventListener("focus",m=>o3(m,s)),!HS(f)&&!f.hasAttribute("tabindex")&&(f.tabIndex=0))}),a}function KS(n){return ZT(n)&&"ownerSVGElement"in n}function l3(n){return KS(n)&&n.tagName==="svg"}const c3=[...OS,It,Ps],u3=n=>c3.find(LS(n)),U_=()=>({translate:0,scale:1,origin:0,originPoint:0}),Aa=()=>({x:U_(),y:U_()}),$_=()=>({min:0,max:0}),jt=()=>({x:$_(),y:$_()}),vg={current:null},qS={current:!1},d3=typeof window<"u";function h3(){if(qS.current=!0,!!d3)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>vg.current=n.matches;n.addEventListener("change",e),e()}else vg.current=!1}const f3=new WeakMap;function ff(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function Jc(n){return typeof n=="string"||Array.isArray(n)}const u0=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],d0=["initial",...u0];function pf(n){return ff(n.animate)||d0.some(e=>Jc(n[e]))}function GS(n){return!!(pf(n)||n.variants)}function p3(n,e,t){for(const r in e){const s=e[r],a=t[r];if(an(s))n.addValue(r,s);else if(an(a))n.addValue(r,Ja(s,{owner:n}));else if(a!==s)if(n.hasValue(r)){const l=n.getValue(r);l.liveStyle===!0?l.jump(s):l.hasAnimated||l.set(s)}else{const l=n.getStaticValue(r);n.addValue(r,Ja(l!==void 0?l:s,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const W_=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let Vh={};function QS(n){Vh=n}function m3(){return Vh}class g3{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:a,visualState:l},f={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=n0,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const w=hn.now();this.renderScheduledAt<w&&(this.renderScheduledAt=w,st.render(this.render,!1,!0))};const{latestValues:d,renderState:m}=l;this.latestValues=d,this.baseTarget={...d},this.initialValues=t.initial?{...d}:{},this.renderState=m,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=f,this.blockInitialAnimation=!!a,this.isControllingVariants=pf(t),this.isVariantNode=GS(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...v}=this.scrapeMotionValuesFromProps(t,{},this);for(const w in v){const T=v[w];d[w]!==void 0&&an(T)&&T.set(d[w])}}mount(e){var t;this.current=e,f3.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,s)=>this.bindToMotionValue(s,r)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(qS.current||h3(),this.shouldReduceMotion=vg.current),(t=this.parent)==null||t.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),Rs(this.notifyUpdate),Rs(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=yl.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=t.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&st.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;typeof window<"u"&&window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{s(),a&&a(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Vh){const t=Vh[e];if(!t)continue;const{isEnabled:r,Feature:s}=t;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):jt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<W_.length;r++){const s=W_[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,l=e[a];l&&(this.propEventSubscriptions[s]=this.on(s,l))}this.prevMotionValues=p3(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=Ja(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(JT(r)||eS(r))?r=parseFloat(r):!u3(r)&&Ps.test(t)&&(r=FS(e,t)),this.setBaseTarget(e,an(r)?r.get():r)),an(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var a;const{initial:t}=this.props;let r;if(typeof t=="string"||typeof t=="object"){const l=s0(this.props,t,(a=this.presenceContext)==null?void 0:a.custom);l&&(r=l[e])}if(t&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!an(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new Hy),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){l0.render(this.render)}}class YS extends g3{constructor(){super(...arguments),this.KeyframeResolver=e3}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){const r=e.style;return r?r[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;an(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}class Ls{constructor(e){this.isMounted=!1,this.node=e}update(){}}function XS({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function y3({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function v3(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function hm(n){return n===void 0||n===1}function xg({scale:n,scaleX:e,scaleY:t}){return!hm(n)||!hm(e)||!hm(t)}function po(n){return xg(n)||JS(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function JS(n){return H_(n.x)||H_(n.y)}function H_(n){return n&&n!=="0%"}function Mh(n,e,t){const r=n-t,s=e*r;return t+s}function K_(n,e,t,r,s){return s!==void 0&&(n=Mh(n,s,r)),Mh(n,t,r)+e}function _g(n,e=0,t=1,r,s){n.min=K_(n.min,e,t,r,s),n.max=K_(n.max,e,t,r,s)}function ZS(n,{x:e,y:t}){_g(n.x,e.translate,e.scale,e.originPoint),_g(n.y,t.translate,t.scale,t.originPoint)}const q_=.999999999999,G_=1.0000000000001;function x3(n,e,t,r=!1){const s=t.length;if(!s)return;e.x=e.y=1;let a,l;for(let f=0;f<s;f++){a=t[f],l=a.projectionDelta;const{visualElement:d}=a.options;d&&d.props.style&&d.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Pa(n,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,ZS(n,l)),r&&po(a.latestValues)&&Pa(n,a.latestValues))}e.x<G_&&e.x>q_&&(e.x=1),e.y<G_&&e.y>q_&&(e.y=1)}function Ra(n,e){n.min=n.min+e,n.max=n.max+e}function Q_(n,e,t,r,s=.5){const a=ut(n.min,n.max,s);_g(n,e,t,a,r)}function Pa(n,e){Q_(n.x,e.x,e.scaleX,e.scale,e.originX),Q_(n.y,e.y,e.scaleY,e.scale,e.originY)}function eb(n,e){return XS(v3(n.getBoundingClientRect(),e))}function _3(n,e,t){const r=eb(n,t),{scroll:s}=e;return s&&(Ra(r.x,s.offset.x),Ra(r.y,s.offset.y)),r}const w3={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},E3=gl.length;function k3(n,e,t){let r="",s=!0;for(let a=0;a<E3;a++){const l=gl[a],f=n[l];if(f===void 0)continue;let d=!0;if(typeof f=="number"?d=f===(l.startsWith("scale")?1:0):d=parseFloat(f)===0,!d||t){const m=zS(f,a0[l]);if(!d){s=!1;const g=w3[l]||l;r+=`${g}(${m}) `}t&&(e[l]=m)}}return r=r.trim(),t?r=t(e,s?"":r):s&&(r="none"),r}function h0(n,e,t){const{style:r,vars:s,transformOrigin:a}=n;let l=!1,f=!1;for(const d in e){const m=e[d];if(yl.has(d)){l=!0;continue}else if(pS(d)){s[d]=m;continue}else{const g=zS(m,a0[d]);d.startsWith("origin")?(f=!0,a[d]=g):r[d]=g}}if(e.transform||(l||t?r.transform=k3(e,n.transform,t):r.transform&&(r.transform="none")),f){const{originX:d="50%",originY:m="50%",originZ:g=0}=a;r.transformOrigin=`${d} ${m} ${g}`}}function tb(n,{style:e,vars:t},r,s){const a=n.style;let l;for(l in e)a[l]=e[l];s==null||s.applyProjectionStyles(a,r);for(l in t)a.setProperty(l,t[l])}function Y_(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const mc={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(he.test(n))n=parseFloat(n);else return n;const t=Y_(n,e.target.x),r=Y_(n,e.target.y);return`${t}% ${r}%`}},T3={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,s=Ps.parse(n);if(s.length>5)return r;const a=Ps.createTransformer(n),l=typeof s[0]!="number"?1:0,f=t.x.scale*e.x,d=t.y.scale*e.y;s[0+l]/=f,s[1+l]/=d;const m=ut(f,d,.5);return typeof s[2+l]=="number"&&(s[2+l]/=m),typeof s[3+l]=="number"&&(s[3+l]/=m),a(s)}},wg={borderRadius:{...mc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:mc,borderTopRightRadius:mc,borderBottomLeftRadius:mc,borderBottomRightRadius:mc,boxShadow:T3};function nb(n,{layout:e,layoutId:t}){return yl.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!wg[n]||n==="opacity")}function f0(n,e,t){var l;const r=n.style,s=e==null?void 0:e.style,a={};if(!r)return a;for(const f in r)(an(r[f])||s&&an(s[f])||nb(f,n)||((l=t==null?void 0:t.getValue(f))==null?void 0:l.liveStyle)!==void 0)&&(a[f]=r[f]);return a}function S3(n){return window.getComputedStyle(n)}class b3 extends YS{constructor(){super(...arguments),this.type="html",this.renderInstance=tb}readValueFromInstance(e,t){var r;if(yl.has(t))return(r=this.projection)!=null&&r.isProjecting?lg(t):tL(e,t);{const s=S3(e),a=(pS(t)?s.getPropertyValue(t):s[t])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:t}){return eb(e,t)}build(e,t,r){h0(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return f0(e,t,r)}}const I3={offset:"stroke-dashoffset",array:"stroke-dasharray"},C3={offset:"strokeDashoffset",array:"strokeDasharray"};function A3(n,e,t=1,r=0,s=!0){n.pathLength=1;const a=s?I3:C3;n[a.offset]=he.transform(-r);const l=he.transform(e),f=he.transform(t);n[a.array]=`${l} ${f}`}const R3=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function rb(n,{attrX:e,attrY:t,attrScale:r,pathLength:s,pathSpacing:a=1,pathOffset:l=0,...f},d,m,g){if(h0(n,f,m),d){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:v,style:w}=n;v.transform&&(w.transform=v.transform,delete v.transform),(w.transform||v.transformOrigin)&&(w.transformOrigin=v.transformOrigin??"50% 50%",delete v.transformOrigin),w.transform&&(w.transformBox=(g==null?void 0:g.transformBox)??"fill-box",delete v.transformBox);for(const T of R3)v[T]!==void 0&&(w[T]=v[T],delete v[T]);e!==void 0&&(v.x=e),t!==void 0&&(v.y=t),r!==void 0&&(v.scale=r),s!==void 0&&A3(v,s,a,l,!1)}const ib=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),sb=n=>typeof n=="string"&&n.toLowerCase()==="svg";function P3(n,e,t,r){tb(n,e,void 0,r);for(const s in e.attrs)n.setAttribute(ib.has(s)?s:o0(s),e.attrs[s])}function ob(n,e,t){const r=f0(n,e,t);for(const s in n)if(an(n[s])||an(e[s])){const a=gl.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[a]=n[s]}return r}class j3 extends YS{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=jt}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(yl.has(t)){const r=BS(t);return r&&r.default||0}return t=ib.has(t)?t:o0(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return ob(e,t,r)}build(e,t,r){rb(e,t,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,t,r,s){P3(e,t,r,s)}mount(e){this.isSVGTag=sb(e.tagName),super.mount(e)}}const N3=d0.length;function ab(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?ab(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<N3;t++){const r=d0[t],s=n.props[r];(Jc(s)||s===!1)&&(e[r]=s)}return e}function lb(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}const D3=[...u0].reverse(),V3=u0.length;function M3(n){return e=>Promise.all(e.map(({animation:t,options:r})=>WL(n,t,r)))}function L3(n){let e=M3(n),t=X_(),r=!0;const s=d=>(m,g)=>{var w;const v=Fa(n,g,d==="exit"?(w=n.presenceContext)==null?void 0:w.custom:void 0);if(v){const{transition:T,transitionEnd:k,...C}=v;m={...m,...C,...k}}return m};function a(d){e=d(n)}function l(d){const{props:m}=n,g=ab(n.parent)||{},v=[],w=new Set;let T={},k=1/0;for(let I=0;I<V3;I++){const V=D3[I],B=t[V],P=m[V]!==void 0?m[V]:g[V],G=Jc(P),$=V===d?B.isActive:null;$===!1&&(k=I);let H=P===g[V]&&P!==m[V]&&G;if(H&&r&&n.manuallyAnimateOnMount&&(H=!1),B.protectedKeys={...T},!B.isActive&&$===null||!P&&!B.prevProp||ff(P)||typeof P=="boolean")continue;const A=O3(B.prevProp,P);let b=A||V===d&&B.isActive&&!H&&G||I>k&&G,j=!1;const L=Array.isArray(P)?P:[P];let O=L.reduce(s(V),{});$===!1&&(O={});const{prevResolvedValues:W={}}=B,M={...W,...O},Ne=Se=>{b=!0,w.has(Se)&&(j=!0,w.delete(Se)),B.needsAnimating[Se]=!0;const ie=n.getValue(Se);ie&&(ie.liveStyle=!1)};for(const Se in M){const ie=O[Se],pe=W[Se];if(T.hasOwnProperty(Se))continue;let ae=!1;pg(ie)&&pg(pe)?ae=!lb(ie,pe):ae=ie!==pe,ae?ie!=null?Ne(Se):w.add(Se):ie!==void 0&&w.has(Se)?Ne(Se):B.protectedKeys[Se]=!0}B.prevProp=P,B.prevResolvedValues=O,B.isActive&&(T={...T,...O}),r&&n.blockInitialAnimation&&(b=!1);const He=H&&A;b&&(!He||j)&&v.push(...L.map(Se=>{const ie={type:V};if(typeof Se=="string"&&r&&!He&&n.manuallyAnimateOnMount&&n.parent){const{parent:pe}=n,ae=Fa(pe,Se);if(pe.enteringChildren&&ae){const{delayChildren:U}=ae.transition||{};ie.delay=PS(pe.enteringChildren,n,U)}}return{animation:Se,options:ie}}))}if(w.size){const I={};if(typeof m.initial!="boolean"){const V=Fa(n,Array.isArray(m.initial)?m.initial[0]:m.initial);V&&V.transition&&(I.transition=V.transition)}w.forEach(V=>{const B=n.getBaseTarget(V),P=n.getValue(V);P&&(P.liveStyle=!0),I[V]=B??null}),v.push({animation:I})}let C=!!v.length;return r&&(m.initial===!1||m.initial===m.animate)&&!n.manuallyAnimateOnMount&&(C=!1),r=!1,C?e(v):Promise.resolve()}function f(d,m){var v;if(t[d].isActive===m)return Promise.resolve();(v=n.variantChildren)==null||v.forEach(w=>{var T;return(T=w.animationState)==null?void 0:T.setActive(d,m)}),t[d].isActive=m;const g=l(d);for(const w in t)t[w].protectedKeys={};return g}return{animateChanges:l,setActive:f,setAnimateFunction:a,getState:()=>t,reset:()=>{t=X_()}}}function O3(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!lb(e,n):!1}function ho(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function X_(){return{animate:ho(!0),whileInView:ho(),whileHover:ho(),whileTap:ho(),whileDrag:ho(),whileFocus:ho(),exit:ho()}}function J_(n,e){n.min=e.min,n.max=e.max}function dr(n,e){J_(n.x,e.x),J_(n.y,e.y)}function Z_(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}const cb=1e-4,B3=1-cb,F3=1+cb,ub=.01,z3=0-ub,U3=0+ub;function fn(n){return n.max-n.min}function $3(n,e,t){return Math.abs(n-e)<=t}function ew(n,e,t,r=.5){n.origin=r,n.originPoint=ut(e.min,e.max,n.origin),n.scale=fn(t)/fn(e),n.translate=ut(t.min,t.max,n.origin)-n.originPoint,(n.scale>=B3&&n.scale<=F3||isNaN(n.scale))&&(n.scale=1),(n.translate>=z3&&n.translate<=U3||isNaN(n.translate))&&(n.translate=0)}function Dc(n,e,t,r){ew(n.x,e.x,t.x,r?r.originX:void 0),ew(n.y,e.y,t.y,r?r.originY:void 0)}function tw(n,e,t){n.min=t.min+e.min,n.max=n.min+fn(e)}function W3(n,e,t){tw(n.x,e.x,t.x),tw(n.y,e.y,t.y)}function nw(n,e,t){n.min=e.min-t.min,n.max=n.min+fn(e)}function Lh(n,e,t){nw(n.x,e.x,t.x),nw(n.y,e.y,t.y)}function rw(n,e,t,r,s){return n-=e,n=Mh(n,1/t,r),s!==void 0&&(n=Mh(n,1/s,r)),n}function H3(n,e=0,t=1,r=.5,s,a=n,l=n){if(Wr.test(e)&&(e=parseFloat(e),e=ut(l.min,l.max,e/100)-l.min),typeof e!="number")return;let f=ut(a.min,a.max,r);n===a&&(f-=e),n.min=rw(n.min,e,t,f,s),n.max=rw(n.max,e,t,f,s)}function iw(n,e,[t,r,s],a,l){H3(n,e[t],e[r],e[s],e.scale,a,l)}const K3=["x","scaleX","originX"],q3=["y","scaleY","originY"];function sw(n,e,t,r){iw(n.x,e,K3,t?t.x:void 0,r?r.x:void 0),iw(n.y,e,q3,t?t.y:void 0,r?r.y:void 0)}function ow(n){return n.translate===0&&n.scale===1}function db(n){return ow(n.x)&&ow(n.y)}function aw(n,e){return n.min===e.min&&n.max===e.max}function G3(n,e){return aw(n.x,e.x)&&aw(n.y,e.y)}function lw(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function hb(n,e){return lw(n.x,e.x)&&lw(n.y,e.y)}function cw(n){return fn(n.x)/fn(n.y)}function uw(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}function Kn(n){return[n("x"),n("y")]}function Q3(n,e,t){let r="";const s=n.x.translate/e.x,a=n.y.translate/e.y,l=(t==null?void 0:t.z)||0;if((s||a||l)&&(r=`translate3d(${s}px, ${a}px, ${l}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:m,rotate:g,rotateX:v,rotateY:w,skewX:T,skewY:k}=t;m&&(r=`perspective(${m}px) ${r}`),g&&(r+=`rotate(${g}deg) `),v&&(r+=`rotateX(${v}deg) `),w&&(r+=`rotateY(${w}deg) `),T&&(r+=`skewX(${T}deg) `),k&&(r+=`skewY(${k}deg) `)}const f=n.x.scale*e.x,d=n.y.scale*e.y;return(f!==1||d!==1)&&(r+=`scale(${f}, ${d})`),r||"none"}const fb=["TopLeft","TopRight","BottomLeft","BottomRight"],Y3=fb.length,dw=n=>typeof n=="string"?parseFloat(n):n,hw=n=>typeof n=="number"||he.test(n);function X3(n,e,t,r,s,a){s?(n.opacity=ut(0,t.opacity??1,J3(r)),n.opacityExit=ut(e.opacity??1,0,Z3(r))):a&&(n.opacity=ut(e.opacity??1,t.opacity??1,r));for(let l=0;l<Y3;l++){const f=`border${fb[l]}Radius`;let d=fw(e,f),m=fw(t,f);if(d===void 0&&m===void 0)continue;d||(d=0),m||(m=0),d===0||m===0||hw(d)===hw(m)?(n[f]=Math.max(ut(dw(d),dw(m),r),0),(Wr.test(m)||Wr.test(d))&&(n[f]+="%")):n[f]=m}(e.rotate||t.rotate)&&(n.rotate=ut(e.rotate||0,t.rotate||0,r))}function fw(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const J3=pb(0,.5,lS),Z3=pb(.5,.95,Qn);function pb(n,e,t){return r=>r<n?0:r>e?1:t(Qc(n,e,r))}function eO(n,e,t){const r=an(n)?n:Ja(n);return r.start(i0("",r,e,t)),r.animation}function Zc(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}const tO=(n,e)=>n.depth-e.depth;class nO{constructor(){this.children=[],this.isDirty=!1}add(e){zy(this.children,e),this.isDirty=!0}remove(e){Uy(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(tO),this.isDirty=!1,this.children.forEach(e)}}function rO(n,e){const t=hn.now(),r=({timestamp:s})=>{const a=s-t;a>=e&&(Rs(r),n(a-e))};return st.setup(r,!0),()=>Rs(r)}function ch(n){return an(n)?n.get():n}class iO{constructor(){this.members=[]}add(e){zy(this.members,e),e.scheduleRender()}remove(e){if(Uy(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(s=>e===s);if(t===0)return!1;let r;for(let s=t;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const uh={hasAnimatedSinceResize:!0,hasEverUpdated:!1},fm=["","X","Y","Z"],sO=1e3;let oO=0;function pm(n,e,t,r){const{latestValues:s}=e;s[n]&&(t[n]=s[n],e.setStaticValue(n,0),r&&(r[n]=0))}function mb(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=VS(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:s,layoutId:a}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",st,!(s||a))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&mb(r)}function gb({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(l={},f=e==null?void 0:e()){this.id=oO++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(cO),this.nodes.forEach(fO),this.nodes.forEach(pO),this.nodes.forEach(uO)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=f?f.root||f:this,this.path=f?[...f.path,f]:[],this.parent=f,this.depth=f?f.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new nO)}addEventListener(l,f){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new Hy),this.eventHandlers.get(l).add(f)}notifyListeners(l,...f){const d=this.eventHandlers.get(l);d&&d.notify(...f)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=KS(l)&&!l3(l),this.instance=l;const{layoutId:f,layout:d,visualElement:m}=this.options;if(m&&!m.current&&m.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||f)&&(this.isLayoutDirty=!0),n){let g,v=0;const w=()=>this.root.updateBlockedByResize=!1;st.read(()=>{v=window.innerWidth}),n(l,()=>{const T=window.innerWidth;T!==v&&(v=T,this.root.updateBlockedByResize=!0,g&&g(),g=rO(w,250),uh.hasAnimatedSinceResize&&(uh.hasAnimatedSinceResize=!1,this.nodes.forEach(gw)))})}f&&this.root.registerSharedNode(f,this),this.options.animate!==!1&&m&&(f||d)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:v,hasRelativeLayoutChanged:w,layout:T})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const k=this.options.transition||m.getDefaultTransition()||xO,{onLayoutAnimationStart:C,onLayoutAnimationComplete:I}=m.getProps(),V=!this.targetLayout||!hb(this.targetLayout,T),B=!v&&w;if(this.options.layoutRoot||this.resumeFrom||B||v&&(V||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const P={...r0(k,"layout"),onPlay:C,onComplete:I};(m.shouldReduceMotion||this.options.layoutRoot)&&(P.delay=0,P.type=!1),this.startAnimation(P),this.setAnimationOrigin(g,B)}else v||gw(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=T})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Rs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(mO),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&mb(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const v=this.path[g];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:f,layout:d}=this.options;if(f===void 0&&!d)return;const m=this.getTransformTemplate();this.prevTransformTemplateValue=m?m(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(pw);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(mw);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(hO),this.nodes.forEach(aO),this.nodes.forEach(lO)):this.nodes.forEach(mw),this.clearAllSnapshots();const f=hn.now();Kt.delta=qr(0,1e3/60,f-Kt.timestamp),Kt.timestamp=f,Kt.isProcessing=!0,sm.update.process(Kt),sm.preRender.process(Kt),sm.render.process(Kt),Kt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,l0.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(dO),this.sharedNodes.forEach(gO)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,st.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){st.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!fn(this.snapshot.measuredBox.x)&&!fn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=jt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:f}=this.options;f&&f.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let f=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(f=!1),f&&this.instance){const d=r(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:d,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!s)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,f=this.projectionDelta&&!db(this.projectionDelta),d=this.getTransformTemplate(),m=d?d(this.latestValues,""):void 0,g=m!==this.prevTransformTemplateValue;l&&this.instance&&(f||po(this.latestValues)||g)&&(s(this.instance,m),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const f=this.measurePageBox();let d=this.removeElementScroll(f);return l&&(d=this.removeTransform(d)),_O(d),{animationId:this.root.animationId,measuredBox:f,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var m;const{visualElement:l}=this.options;if(!l)return jt();const f=l.measureViewportBox();if(!(((m=this.scroll)==null?void 0:m.wasRoot)||this.path.some(wO))){const{scroll:g}=this.root;g&&(Ra(f.x,g.offset.x),Ra(f.y,g.offset.y))}return f}removeElementScroll(l){var d;const f=jt();if(dr(f,l),(d=this.scroll)!=null&&d.wasRoot)return f;for(let m=0;m<this.path.length;m++){const g=this.path[m],{scroll:v,options:w}=g;g!==this.root&&v&&w.layoutScroll&&(v.wasRoot&&dr(f,l),Ra(f.x,v.offset.x),Ra(f.y,v.offset.y))}return f}applyTransform(l,f=!1){const d=jt();dr(d,l);for(let m=0;m<this.path.length;m++){const g=this.path[m];!f&&g.options.layoutScroll&&g.scroll&&g!==g.root&&Pa(d,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),po(g.latestValues)&&Pa(d,g.latestValues)}return po(this.latestValues)&&Pa(d,this.latestValues),d}removeTransform(l){const f=jt();dr(f,l);for(let d=0;d<this.path.length;d++){const m=this.path[d];if(!m.instance||!po(m.latestValues))continue;xg(m.latestValues)&&m.updateSnapshot();const g=jt(),v=m.measurePageBox();dr(g,v),sw(f,m.latestValues,m.snapshot?m.snapshot.layoutBox:void 0,g)}return po(this.latestValues)&&sw(f,this.latestValues),f}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Kt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var T;const f=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=f.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=f.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=f.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==f;if(!(l||d&&this.isSharedProjectionDirty||this.isProjectionDirty||(T=this.parent)!=null&&T.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:v}=this.options;if(!this.layout||!(g||v))return;this.resolvedRelativeTargetAt=Kt.timestamp;const w=this.getClosestProjectingParent();w&&this.linkedParentVersion!==w.layoutVersion&&!w.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(w&&w.layout?this.createRelativeTarget(w,this.layout.layoutBox,w.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=jt(),this.targetWithTransforms=jt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),W3(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):dr(this.target,this.layout.layoutBox),ZS(this.target,this.targetDelta)):dr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,w&&!!w.resumingFrom==!!this.resumingFrom&&!w.options.layoutScroll&&w.target&&this.animationProgress!==1?this.createRelativeTarget(w,this.target,w.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||xg(this.parent.latestValues)||JS(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(l,f,d){this.relativeParent=l,this.linkedParentVersion=l.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=jt(),this.relativeTargetOrigin=jt(),Lh(this.relativeTargetOrigin,f,d),dr(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var k;const l=this.getLead(),f=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||(k=this.parent)!=null&&k.isProjectionDirty)&&(d=!1),f&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===Kt.timestamp&&(d=!1),d)return;const{layout:m,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||g))return;dr(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,w=this.treeScale.y;x3(this.layoutCorrected,this.treeScale,this.path,f),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=jt());const{target:T}=l;if(!T){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Z_(this.prevProjectionDelta.x,this.projectionDelta.x),Z_(this.prevProjectionDelta.y,this.projectionDelta.y)),Dc(this.projectionDelta,this.layoutCorrected,T,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==w||!uw(this.projectionDelta.x,this.prevProjectionDelta.x)||!uw(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",T))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var f;if((f=this.options.visualElement)==null||f.scheduleRender(),l){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Aa(),this.projectionDelta=Aa(),this.projectionDeltaWithTransform=Aa()}setAnimationOrigin(l,f=!1){const d=this.snapshot,m=d?d.latestValues:{},g={...this.latestValues},v=Aa();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!f;const w=jt(),T=d?d.source:void 0,k=this.layout?this.layout.source:void 0,C=T!==k,I=this.getStack(),V=!I||I.members.length<=1,B=!!(C&&!V&&this.options.crossfade===!0&&!this.path.some(vO));this.animationProgress=0;let P;this.mixTargetDelta=G=>{const $=G/1e3;yw(v.x,l.x,$),yw(v.y,l.y,$),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Lh(w,this.layout.layoutBox,this.relativeParent.layout.layoutBox),yO(this.relativeTarget,this.relativeTargetOrigin,w,$),P&&G3(this.relativeTarget,P)&&(this.isProjectionDirty=!1),P||(P=jt()),dr(P,this.relativeTarget)),C&&(this.animationValues=g,X3(g,m,this.latestValues,$,B,V)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=$},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){var f,d,m;this.notifyListeners("animationStart"),(f=this.currentAnimation)==null||f.stop(),(m=(d=this.resumingFrom)==null?void 0:d.currentAnimation)==null||m.stop(),this.pendingAnimation&&(Rs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=st.update(()=>{uh.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ja(0)),this.currentAnimation=eO(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:g=>{this.mixTargetDelta(g),l.onUpdate&&l.onUpdate(g)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(sO),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:f,target:d,layout:m,latestValues:g}=l;if(!(!f||!d||!m)){if(this!==l&&this.layout&&m&&yb(this.options.animationType,this.layout.layoutBox,m.layoutBox)){d=this.target||jt();const v=fn(this.layout.layoutBox.x);d.x.min=l.target.x.min,d.x.max=d.x.min+v;const w=fn(this.layout.layoutBox.y);d.y.min=l.target.y.min,d.y.max=d.y.min+w}dr(f,d),Pa(f,g),Dc(this.projectionDeltaWithTransform,this.layoutCorrected,f,g)}}registerSharedNode(l,f){this.sharedNodes.has(l)||this.sharedNodes.set(l,new iO),this.sharedNodes.get(l).add(f);const m=f.options.initialPromotionConfig;f.promote({transition:m?m.transition:void 0,preserveFollowOpacity:m&&m.shouldPreserveFollowOpacity?m.shouldPreserveFollowOpacity(f):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var f;const{layoutId:l}=this.options;return l?((f=this.getStack())==null?void 0:f.lead)||this:this}getPrevLead(){var f;const{layoutId:l}=this.options;return l?(f=this.getStack())==null?void 0:f.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:f,preserveFollowOpacity:d}={}){const m=this.getStack();m&&m.promote(this,d),l&&(this.projectionDelta=void 0,this.needsReset=!0),f&&this.setOptions({transition:f})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let f=!1;const{latestValues:d}=l;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(f=!0),!f)return;const m={};d.z&&pm("z",l,m,this.animationValues);for(let g=0;g<fm.length;g++)pm(`rotate${fm[g]}`,l,m,this.animationValues),pm(`skew${fm[g]}`,l,m,this.animationValues);l.render();for(const g in m)l.setStaticValue(g,m[g]),this.animationValues&&(this.animationValues[g]=m[g]);l.scheduleRender()}applyProjectionStyles(l,f){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=ch(f==null?void 0:f.pointerEvents)||"",l.transform=d?d(this.latestValues,""):"none";return}const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=ch(f==null?void 0:f.pointerEvents)||""),this.hasProjected&&!po(this.latestValues)&&(l.transform=d?d({},""):"none",this.hasProjected=!1);return}l.visibility="";const g=m.animationValues||m.latestValues;this.applyTransformsToTarget();let v=Q3(this.projectionDeltaWithTransform,this.treeScale,g);d&&(v=d(g,v)),l.transform=v;const{x:w,y:T}=this.projectionDelta;l.transformOrigin=`${w.origin*100}% ${T.origin*100}% 0`,m.animationValues?l.opacity=m===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:l.opacity=m===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const k in wg){if(g[k]===void 0)continue;const{correct:C,applyTo:I,isCSSVariable:V}=wg[k],B=v==="none"?g[k]:C(g[k],m);if(I){const P=I.length;for(let G=0;G<P;G++)l[I[G]]=B}else V?this.options.visualElement.renderState.vars[k]=B:l[k]=B}this.options.layoutId&&(l.pointerEvents=m===this?ch(f==null?void 0:f.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var f;return(f=l.currentAnimation)==null?void 0:f.stop()}),this.root.nodes.forEach(pw),this.root.sharedNodes.clear()}}}function aO(n){n.updateLayout()}function lO(n){var t;const e=((t=n.resumeFrom)==null?void 0:t.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=n.layout,{animationType:a}=n.options,l=e.source!==n.layout.source;a==="size"?Kn(v=>{const w=l?e.measuredBox[v]:e.layoutBox[v],T=fn(w);w.min=r[v].min,w.max=w.min+T}):yb(a,e.layoutBox,r)&&Kn(v=>{const w=l?e.measuredBox[v]:e.layoutBox[v],T=fn(r[v]);w.max=w.min+T,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[v].max=n.relativeTarget[v].min+T)});const f=Aa();Dc(f,r,e.layoutBox);const d=Aa();l?Dc(d,n.applyTransform(s,!0),e.measuredBox):Dc(d,r,e.layoutBox);const m=!db(f);let g=!1;if(!n.resumeFrom){const v=n.getClosestProjectingParent();if(v&&!v.resumeFrom){const{snapshot:w,layout:T}=v;if(w&&T){const k=jt();Lh(k,e.layoutBox,w.layoutBox);const C=jt();Lh(C,r,T.layoutBox),hb(k,C)||(g=!0),v.options.layoutRoot&&(n.relativeTarget=C,n.relativeTargetOrigin=k,n.relativeParent=v)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:d,layoutDelta:f,hasLayoutChanged:m,hasRelativeLayoutChanged:g})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function cO(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function uO(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function dO(n){n.clearSnapshot()}function pw(n){n.clearMeasurements()}function mw(n){n.isLayoutDirty=!1}function hO(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function gw(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function fO(n){n.resolveTargetDelta()}function pO(n){n.calcProjection()}function mO(n){n.resetSkewAndRotation()}function gO(n){n.removeLeadSnapshot()}function yw(n,e,t){n.translate=ut(e.translate,0,t),n.scale=ut(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function vw(n,e,t,r){n.min=ut(e.min,t.min,r),n.max=ut(e.max,t.max,r)}function yO(n,e,t,r){vw(n.x,e.x,t.x,r),vw(n.y,e.y,t.y,r)}function vO(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const xO={duration:.45,ease:[.4,0,.1,1]},xw=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),_w=xw("applewebkit/")&&!xw("chrome/")?Math.round:Qn;function ww(n){n.min=_w(n.min),n.max=_w(n.max)}function _O(n){ww(n.x),ww(n.y)}function yb(n,e,t){return n==="position"||n==="preserve-aspect"&&!$3(cw(e),cw(t),.2)}function wO(n){var e;return n!==n.root&&((e=n.scroll)==null?void 0:e.wasRoot)}const EO=gb({attachResizeListener:(n,e)=>Zc(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),mm={current:void 0},vb=gb({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!mm.current){const n=new EO({});n.mount(window),n.setOptions({layoutScroll:!0}),mm.current=n}return mm.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),xb=N.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function kO(n=!0){const e=N.useContext(Fy);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:s}=e,a=N.useId();N.useEffect(()=>{if(n)return s(a)},[n]);const l=N.useCallback(()=>n&&r&&r(a),[a,r,n]);return!t&&r?[!1,l]:[!0]}const _b=N.createContext({strict:!1}),Ew={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let kw=!1;function TO(){if(kw)return;const n={};for(const e in Ew)n[e]={isEnabled:t=>Ew[e].some(r=>!!t[r])};QS(n),kw=!0}function wb(){return TO(),m3()}function SO(n){const e=wb();for(const t in n)e[t]={...e[t],...n[t]};QS(e)}const bO=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Oh(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||bO.has(n)}let Eb=n=>!Oh(n);function IO(n){typeof n=="function"&&(Eb=e=>e.startsWith("on")?!Oh(e):n(e))}try{IO(require("@emotion/is-prop-valid").default)}catch{}function CO(n,e,t){const r={};for(const s in n)s==="values"&&typeof n.values=="object"||(Eb(s)||t===!0&&Oh(s)||!e&&!Oh(s)||n.draggable&&s.startsWith("onDrag"))&&(r[s]=n[s]);return r}const mf=N.createContext({});function AO(n,e){if(pf(n)){const{initial:t,animate:r}=n;return{initial:t===!1||Jc(t)?t:void 0,animate:Jc(r)?r:void 0}}return n.inherit!==!1?e:{}}function RO(n){const{initial:e,animate:t}=AO(n,N.useContext(mf));return N.useMemo(()=>({initial:e,animate:t}),[Tw(e),Tw(t)])}function Tw(n){return Array.isArray(n)?n.join(" "):n}const p0=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function kb(n,e,t){for(const r in e)!an(e[r])&&!nb(r,t)&&(n[r]=e[r])}function PO({transformTemplate:n},e){return N.useMemo(()=>{const t=p0();return h0(t,e,n),Object.assign({},t.vars,t.style)},[e])}function jO(n,e){const t=n.style||{},r={};return kb(r,t,n),Object.assign(r,PO(n,e)),r}function NO(n,e){const t={},r=jO(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}const Tb=()=>({...p0(),attrs:{}});function DO(n,e,t,r){const s=N.useMemo(()=>{const a=Tb();return rb(a,e,sb(r),n.transformTemplate,n.style),{...a.attrs,style:{...a.style}}},[e]);if(n.style){const a={};kb(a,n.style,n),s.style={...a,...s.style}}return s}const VO=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function m0(n){return typeof n!="string"||n.includes("-")?!1:!!(VO.indexOf(n)>-1||/[A-Z]/u.test(n))}function MO(n,e,t,{latestValues:r},s,a=!1,l){const d=(l??m0(n)?DO:NO)(e,r,s,n),m=CO(e,typeof n=="string",a),g=n!==N.Fragment?{...m,...d,ref:t}:{},{children:v}=e,w=N.useMemo(()=>an(v)?v.get():v,[v]);return N.createElement(n,{...g,children:w})}function LO({scrapeMotionValuesFromProps:n,createRenderState:e},t,r,s){return{latestValues:OO(t,r,s,n),renderState:e()}}function OO(n,e,t,r){const s={},a=r(n,{});for(const w in a)s[w]=ch(a[w]);let{initial:l,animate:f}=n;const d=pf(n),m=GS(n);e&&m&&!d&&n.inherit!==!1&&(l===void 0&&(l=e.initial),f===void 0&&(f=e.animate));let g=t?t.initial===!1:!1;g=g||l===!1;const v=g?f:l;if(v&&typeof v!="boolean"&&!ff(v)){const w=Array.isArray(v)?v:[v];for(let T=0;T<w.length;T++){const k=s0(n,w[T]);if(k){const{transitionEnd:C,transition:I,...V}=k;for(const B in V){let P=V[B];if(Array.isArray(P)){const G=g?P.length-1:0;P=P[G]}P!==null&&(s[B]=P)}for(const B in C)s[B]=C[B]}}}return s}const Sb=n=>(e,t)=>{const r=N.useContext(mf),s=N.useContext(Fy),a=()=>LO(n,e,r,s);return t?a():XM(a)},BO=Sb({scrapeMotionValuesFromProps:f0,createRenderState:p0}),FO=Sb({scrapeMotionValuesFromProps:ob,createRenderState:Tb}),zO=Symbol.for("motionComponentSymbol");function UO(n,e,t){const r=N.useRef(t);N.useInsertionEffect(()=>{r.current=t});const s=N.useRef(null);return N.useCallback(a=>{var f;a&&((f=n.onMount)==null||f.call(n,a)),e&&(a?e.mount(a):e.unmount());const l=r.current;if(typeof l=="function")if(a){const d=l(a);typeof d=="function"&&(s.current=d)}else s.current?(s.current(),s.current=null):l(a);else l&&(l.current=a)},[e])}const bb=N.createContext({});function Tc(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function $O(n,e,t,r,s,a){var I,V;const{visualElement:l}=N.useContext(mf),f=N.useContext(_b),d=N.useContext(Fy),m=N.useContext(xb).reducedMotion,g=N.useRef(null);r=r||f.renderer,!g.current&&r&&(g.current=r(n,{visualState:e,parent:l,props:t,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:m,isSVG:a}));const v=g.current,w=N.useContext(bb);v&&!v.projection&&s&&(v.type==="html"||v.type==="svg")&&WO(g.current,t,s,w);const T=N.useRef(!1);N.useInsertionEffect(()=>{v&&T.current&&v.update(t,d)});const k=t[DS],C=N.useRef(!!k&&!((I=window.MotionHandoffIsComplete)!=null&&I.call(window,k))&&((V=window.MotionHasOptimisedAnimation)==null?void 0:V.call(window,k)));return JM(()=>{v&&(T.current=!0,window.MotionIsMounted=!0,v.updateFeatures(),v.scheduleRenderMicrotask(),C.current&&v.animationState&&v.animationState.animateChanges())}),N.useEffect(()=>{v&&(!C.current&&v.animationState&&v.animationState.animateChanges(),C.current&&(queueMicrotask(()=>{var B;(B=window.MotionHandoffMarkAsComplete)==null||B.call(window,k)}),C.current=!1),v.enteringChildren=void 0)}),v}function WO(n,e,t,r){const{layoutId:s,layout:a,drag:l,dragConstraints:f,layoutScroll:d,layoutRoot:m,layoutCrossfade:g}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:Ib(n.parent)),n.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!l||f&&Tc(f),visualElement:n,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:g,layoutScroll:d,layoutRoot:m})}function Ib(n){if(n)return n.options.allowProjection!==!1?n.projection:Ib(n.parent)}function gm(n,{forwardMotionProps:e=!1,type:t}={},r,s){r&&SO(r);const a=t?t==="svg":m0(n),l=a?FO:BO;function f(m,g){let v;const w={...N.useContext(xb),...m,layoutId:HO(m)},{isStatic:T}=w,k=RO(m),C=l(m,T);if(!T&&XT){KO();const I=qO(w);v=I.MeasureLayout,k.visualElement=$O(n,C,w,s,I.ProjectionNode,a)}return c.jsxs(mf.Provider,{value:k,children:[v&&k.visualElement?c.jsx(v,{visualElement:k.visualElement,...w}):null,MO(n,m,UO(C,k.visualElement,g),C,T,e,a)]})}f.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const d=N.forwardRef(f);return d[zO]=n,d}function HO({layoutId:n}){const e=N.useContext(YT).id;return e&&n!==void 0?e+"-"+n:n}function KO(n,e){N.useContext(_b).strict}function qO(n){const e=wb(),{drag:t,layout:r}=e;if(!t&&!r)return{};const s={...t,...r};return{MeasureLayout:t!=null&&t.isEnabled(n)||r!=null&&r.isEnabled(n)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function GO(n,e){if(typeof Proxy>"u")return gm;const t=new Map,r=(a,l)=>gm(a,l,n,e),s=(a,l)=>r(a,l);return new Proxy(s,{get:(a,l)=>l==="create"?r:(t.has(l)||t.set(l,gm(l,void 0,n,e)),t.get(l))})}const QO=(n,e)=>e.isSVG??m0(n)?new j3(e):new b3(e,{allowProjection:n!==N.Fragment});class YO extends Ls{constructor(e){super(e),e.animationState||(e.animationState=L3(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();ff(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let XO=0;class JO extends Ls{constructor(){super(...arguments),this.id=XO++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);t&&!e&&s.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const ZO={animation:{Feature:YO},exit:{Feature:JO}};function _u(n){return{point:{x:n.pageX,y:n.pageY}}}const e6=n=>e=>c0(e)&&n(e,_u(e));function Vc(n,e,t,r){return Zc(n,e,e6(t),r)}const Cb=({current:n})=>n?n.ownerDocument.defaultView:null,Sw=(n,e)=>Math.abs(n-e);function t6(n,e){const t=Sw(n.x,e.x),r=Sw(n.y,e.y);return Math.sqrt(t**2+r**2)}const bw=new Set(["auto","scroll"]);class Ab{constructor(e,t,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:a=!1,distanceThreshold:l=3,element:f}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=T=>{this.handleScroll(T.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=vm(this.lastMoveEventInfo,this.history),k=this.startEvent!==null,C=t6(T.offset,{x:0,y:0})>=this.distanceThreshold;if(!k&&!C)return;const{point:I}=T,{timestamp:V}=Kt;this.history.push({...I,timestamp:V});const{onStart:B,onMove:P}=this.handlers;k||(B&&B(this.lastMoveEvent,T),this.startEvent=this.lastMoveEvent),P&&P(this.lastMoveEvent,T)},this.handlePointerMove=(T,k)=>{this.lastMoveEvent=T,this.lastMoveEventInfo=ym(k,this.transformPagePoint),st.update(this.updatePoint,!0)},this.handlePointerUp=(T,k)=>{this.end();const{onEnd:C,onSessionEnd:I,resumeAnimation:V}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&V&&V(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const B=vm(T.type==="pointercancel"?this.lastMoveEventInfo:ym(k,this.transformPagePoint),this.history);this.startEvent&&C&&C(T,B),I&&I(T,B)},!c0(e))return;this.dragSnapToOrigin=a,this.handlers=t,this.transformPagePoint=r,this.distanceThreshold=l,this.contextWindow=s||window;const d=_u(e),m=ym(d,this.transformPagePoint),{point:g}=m,{timestamp:v}=Kt;this.history=[{...g,timestamp:v}];const{onSessionStart:w}=t;w&&w(e,vm(m,this.history)),this.removeListeners=yu(Vc(this.contextWindow,"pointermove",this.handlePointerMove),Vc(this.contextWindow,"pointerup",this.handlePointerUp),Vc(this.contextWindow,"pointercancel",this.handlePointerUp)),f&&this.startScrollTracking(f)}startScrollTracking(e){let t=e.parentElement;for(;t;){const r=getComputedStyle(t);(bw.has(r.overflowX)||bw.has(r.overflowY))&&this.scrollPositions.set(t,{x:t.scrollLeft,y:t.scrollTop}),t=t.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const t=this.scrollPositions.get(e);if(!t)return;const r=e===window,s=r?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},a={x:s.x-t.x,y:s.y-t.y};a.x===0&&a.y===0||(r?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=a.x,this.lastMoveEventInfo.point.y+=a.y):this.history.length>0&&(this.history[0].x-=a.x,this.history[0].y-=a.y),this.scrollPositions.set(e,s),st.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),Rs(this.updatePoint)}}function ym(n,e){return e?{point:e(n.point)}:n}function Iw(n,e){return{x:n.x-e.x,y:n.y-e.y}}function vm({point:n},e){return{point:n,delta:Iw(n,Rb(e)),offset:Iw(n,n6(e)),velocity:r6(e,.1)}}function n6(n){return n[0]}function Rb(n){return n[n.length-1]}function r6(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const s=Rb(n);for(;t>=0&&(r=n[t],!(s.timestamp-r.timestamp>xi(e)));)t--;if(!r)return{x:0,y:0};const a=Gn(s.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const l={x:(s.x-r.x)/a,y:(s.y-r.y)/a};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function i6(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?ut(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?ut(t,n,r.max):Math.min(n,t)),n}function Cw(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function s6(n,{top:e,left:t,bottom:r,right:s}){return{x:Cw(n.x,t,s),y:Cw(n.y,e,r)}}function Aw(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function o6(n,e){return{x:Aw(n.x,e.x),y:Aw(n.y,e.y)}}function a6(n,e){let t=.5;const r=fn(n),s=fn(e);return s>r?t=Qc(e.min,e.max-r,n.min):r>s&&(t=Qc(n.min,n.max-s,e.min)),qr(0,1,t)}function l6(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const Eg=.35;function c6(n=Eg){return n===!1?n=0:n===!0&&(n=Eg),{x:Rw(n,"left","right"),y:Rw(n,"top","bottom")}}function Rw(n,e,t){return{min:Pw(n,e),max:Pw(n,t)}}function Pw(n,e){return typeof n=="number"?n:n[e]||0}const u6=new WeakMap;class d6{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=jt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=v=>{t?(this.stopAnimation(),this.snapToCursor(_u(v).point)):this.pauseAnimation()},l=(v,w)=>{this.stopAnimation();const{drag:T,dragPropagation:k,onDragStart:C}=this.getProps();if(T&&!k&&(this.openDragLock&&this.openDragLock(),this.openDragLock=r3(T),!this.openDragLock))return;this.latestPointerEvent=v,this.latestPanInfo=w,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Kn(V=>{let B=this.getAxisMotionValue(V).get()||0;if(Wr.test(B)){const{projection:P}=this.visualElement;if(P&&P.layout){const G=P.layout.layoutBox[V];G&&(B=fn(G)*(parseFloat(B)/100))}}this.originPoint[V]=B}),C&&st.postRender(()=>C(v,w)),mg(this.visualElement,"transform");const{animationState:I}=this.visualElement;I&&I.setActive("whileDrag",!0)},f=(v,w)=>{this.latestPointerEvent=v,this.latestPanInfo=w;const{dragPropagation:T,dragDirectionLock:k,onDirectionLock:C,onDrag:I}=this.getProps();if(!T&&!this.openDragLock)return;const{offset:V}=w;if(k&&this.currentDirection===null){this.currentDirection=h6(V),this.currentDirection!==null&&C&&C(this.currentDirection);return}this.updateAxis("x",w.point,V),this.updateAxis("y",w.point,V),this.visualElement.render(),I&&I(v,w)},d=(v,w)=>{this.latestPointerEvent=v,this.latestPanInfo=w,this.stop(v,w),this.latestPointerEvent=null,this.latestPanInfo=null},m=()=>Kn(v=>{var w;return this.getAnimationState(v)==="paused"&&((w=this.getAxisMotionValue(v).animation)==null?void 0:w.play())}),{dragSnapToOrigin:g}=this.getProps();this.panSession=new Ab(e,{onSessionStart:a,onStart:l,onMove:f,onSessionEnd:d,resumeAnimation:m},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,distanceThreshold:r,contextWindow:Cb(this.visualElement),element:this.visualElement.current})}stop(e,t){const r=e||this.latestPointerEvent,s=t||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!s||!r)return;const{velocity:l}=s;this.startAnimation(l);const{onDragEnd:f}=this.getProps();f&&st.postRender(()=>f(r,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:s}=this.getProps();if(!r||!Gd(e,s,this.currentDirection))return;const a=this.getAxisMotionValue(e);let l=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(l=i6(l,this.constraints[e],this.elastic[e])),a.set(l)}resolveConstraints(){var a;const{dragConstraints:e,dragElastic:t}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(a=this.visualElement.projection)==null?void 0:a.layout,s=this.constraints;e&&Tc(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=s6(r.layoutBox,e):this.constraints=!1,this.elastic=c6(t),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Kn(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=l6(r.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Tc(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=_3(r,s.root,this.visualElement.getTransformPagePoint());let l=o6(s.layout.layoutBox,a);if(t){const f=t(y3(l));this.hasMutatedConstraints=!!f,f&&(l=XS(f))}return l}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:s,dragTransition:a,dragSnapToOrigin:l,onDragTransitionEnd:f}=this.getProps(),d=this.constraints||{},m=Kn(g=>{if(!Gd(g,t,this.currentDirection))return;let v=d&&d[g]||{};l&&(v={min:0,max:0});const w=s?200:1e6,T=s?40:1e7,k={type:"inertia",velocity:r?e[g]:0,bounceStiffness:w,bounceDamping:T,timeConstant:750,restDelta:1,restSpeed:10,...a,...v};return this.startAxisValueAnimation(g,k)});return Promise.all(m).then(f)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return mg(this.visualElement,e),r.start(i0(e,r,0,t,this.visualElement,!1))}stopAnimation(){Kn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Kn(e=>{var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[t];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Kn(t=>{const{drag:r}=this.getProps();if(!Gd(t,r,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(t);if(s&&s.layout){const{min:l,max:f}=s.layout.layoutBox[t],d=a.get()||0;a.set(e[t]-ut(l,f,.5)+d)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!Tc(t)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Kn(l=>{const f=this.getAxisMotionValue(l);if(f&&this.constraints!==!1){const d=f.get();s[l]=a6({min:d,max:d},this.constraints[l])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Kn(l=>{if(!Gd(l,e,null))return;const f=this.getAxisMotionValue(l),{min:d,max:m}=this.constraints[l];f.set(ut(d,m,s[l]))})}addListeners(){if(!this.visualElement.current)return;u6.set(this.visualElement,this);const e=this.visualElement.current,t=Vc(e,"pointerdown",d=>{const{drag:m,dragListener:g=!0}=this.getProps();m&&g&&!HS(d.target)&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();Tc(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),st.read(r);const l=Zc(window,"resize",()=>this.scalePositionWithinConstraints()),f=s.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:m})=>{this.isDragging&&m&&(Kn(g=>{const v=this.getAxisMotionValue(g);v&&(this.originPoint[g]+=d[g].translate,v.set(v.get()+d[g].translate))}),this.visualElement.render())}));return()=>{l(),t(),a(),f&&f()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:l=Eg,dragMomentum:f=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:s,dragConstraints:a,dragElastic:l,dragMomentum:f}}}function Gd(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function h6(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class f6 extends Ls{constructor(e){super(e),this.removeGroupControls=Qn,this.removeListeners=Qn,this.controls=new d6(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Qn}update(){const{dragControls:e}=this.node.getProps(),{dragControls:t}=this.node.prevProps||{};e!==t&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners()}}const jw=n=>(e,t)=>{n&&st.postRender(()=>n(e,t))};class p6 extends Ls{constructor(){super(...arguments),this.removePointerDownListener=Qn}onPointerDown(e){this.session=new Ab(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Cb(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:jw(e),onStart:jw(t),onMove:r,onEnd:(a,l)=>{delete this.session,s&&st.postRender(()=>s(a,l))}}}mount(){this.removePointerDownListener=Vc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let xm=!1;class m6 extends N.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:s}=this.props,{projection:a}=e;a&&(t.group&&t.group.add(a),r&&r.register&&s&&r.register(a),xm&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),uh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:s,isPresent:a}=this.props,{projection:l}=r;return l&&(l.isPresent=a,xm=!0,s||e.layoutDependency!==t||t===void 0||e.isPresent!==a?l.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?l.promote():l.relegate()||st.postRender(()=>{const f=l.getStack();(!f||!f.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),l0.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:s}=e;xm=!0,s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Pb(n){const[e,t]=kO(),r=N.useContext(YT);return c.jsx(m6,{...n,layoutGroup:r,switchLayoutGroup:N.useContext(bb),isPresent:e,safeToRemove:t})}const g6={pan:{Feature:p6},drag:{Feature:f6,ProjectionNode:vb,MeasureLayout:Pb}};function Nw(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const s="onHover"+t,a=r[s];a&&st.postRender(()=>a(e,_u(e)))}class y6 extends Ls{mount(){const{current:e}=this.node;e&&(this.unmount=i3(e,(t,r)=>(Nw(this.node,r,"Start"),s=>Nw(this.node,s,"End"))))}unmount(){}}class v6 extends Ls{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=yu(Zc(this.node.current,"focus",()=>this.onFocus()),Zc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Dw(n,e,t){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const s="onTap"+(t==="End"?"":t),a=r[s];a&&st.postRender(()=>a(e,_u(e)))}class x6 extends Ls{mount(){const{current:e}=this.node;e&&(this.unmount=a3(e,(t,r)=>(Dw(this.node,r,"Start"),(s,{success:a})=>Dw(this.node,s,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const kg=new WeakMap,_m=new WeakMap,_6=n=>{const e=kg.get(n.target);e&&e(n)},w6=n=>{n.forEach(_6)};function E6({root:n,...e}){const t=n||document;_m.has(t)||_m.set(t,{});const r=_m.get(t),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(w6,{root:n,...e})),r[s]}function k6(n,e,t){const r=E6(e);return kg.set(n,t),r.observe(n),()=>{kg.delete(n),r.unobserve(n)}}const T6={some:0,all:1};class S6 extends Ls{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:s="some",once:a}=e,l={root:t?t.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:T6[s]},f=d=>{const{isIntersecting:m}=d;if(this.isInView===m||(this.isInView=m,a&&!m&&this.hasEnteredView))return;m&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",m);const{onViewportEnter:g,onViewportLeave:v}=this.node.getProps(),w=m?g:v;w&&w(d)};return k6(this.node.current,l,f)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(b6(e,t))&&this.startObserver()}unmount(){}}function b6({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const I6={inView:{Feature:S6},tap:{Feature:x6},focus:{Feature:v6},hover:{Feature:y6}},C6={layout:{ProjectionNode:vb,MeasureLayout:Pb}},A6={...ZO,...I6,...g6,...C6},Ee=GO(A6,QO);function Yn(){var k;const n=er(),e=ru(),{user:t,profile:r,isAuthenticated:s,isAdmin:a,isBusiness:l}=Do(),[f,d]=N.useState(!1),[m,g]=N.useState(!1),v=[{to:"/",label:"Home"},{to:"/about",label:"How It Works"},{to:"/benefits",label:"Benefits"},{to:"/businesses",label:"For Businesses"}],w=async()=>{await OT(),g(!1),e("/")},T=C=>n.pathname===C;return c.jsxs("header",{style:{background:"var(--kb-white)",borderBottom:"1px solid var(--kb-gray-200)",position:"sticky",top:0,zIndex:100},children:[c.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 1rem",display:"flex",alignItems:"center",justifyContent:"space-between",height:"70px"},children:[c.jsxs(ue,{to:"/",style:{display:"flex",alignItems:"center",gap:"0.5rem",textDecoration:"none"},children:[c.jsx("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, var(--kb-navy) 0%, var(--kb-navy-light) 100%)",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--kb-gold)",fontFamily:"var(--font-display)",fontWeight:"700",fontSize:"1.2rem"},children:"K"}),c.jsxs("div",{children:[c.jsx("div",{style:{fontFamily:"var(--font-display)",fontWeight:"600",color:"var(--kb-navy)",fontSize:"1.1rem",lineHeight:1.1},children:"Kinderbucks"}),c.jsx("div",{style:{fontSize:"0.65rem",color:"var(--kb-gray-500)",textTransform:"uppercase",letterSpacing:"0.1em"},children:"Village Currency"})]})]}),c.jsx("nav",{style:{display:"flex",alignItems:"center",gap:"2rem"},className:"desktop-nav",children:v.map(C=>c.jsx(ue,{to:C.to,style:{color:T(C.to)?"var(--kb-navy)":"var(--kb-gray-500)",fontWeight:T(C.to)?"600":"500",fontSize:"0.95rem",transition:"color 0.2s",borderBottom:T(C.to)?"2px solid var(--kb-gold)":"2px solid transparent",paddingBottom:"4px"},children:C.label},C.to))}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},className:"desktop-nav",children:[s?c.jsx(c.Fragment,{children:c.jsxs("div",{style:{position:"relative"},children:[c.jsxs("button",{onClick:()=>g(!m),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"var(--kb-gray-100)",border:"none",borderRadius:"8px",cursor:"pointer",color:"var(--kb-navy)",fontWeight:"500"},children:[c.jsx(Ba,{size:18}),(r==null?void 0:r.displayName)||((k=t.email)==null?void 0:k.split("@")[0])]}),m&&c.jsxs("div",{style:{position:"absolute",right:0,top:"100%",marginTop:"0.5rem",background:"white",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",minWidth:"180px",zIndex:200,overflow:"hidden"},children:[c.jsxs(ue,{to:"/card",onClick:()=>g(!1),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",color:"var(--kb-gold-dark)",textDecoration:"none",borderBottom:"1px solid var(--kb-gray-100)",fontWeight:"600",background:"rgba(201, 162, 39, 0.1)"},children:[c.jsx(eg,{size:16})," My OK Card"]}),c.jsxs(ue,{to:"/profile",onClick:()=>g(!1),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",color:"var(--kb-gray-700)",textDecoration:"none",borderBottom:"1px solid var(--kb-gray-100)"},children:[c.jsx(Ba,{size:16})," My Profile"]}),l&&c.jsxs(ue,{to:"/business/dashboard",onClick:()=>g(!1),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",color:"#2563eb",textDecoration:"none",borderBottom:"1px solid var(--kb-gray-100)"},children:[c.jsx(Qt,{size:16})," Business Dashboard"]}),a&&c.jsxs(ue,{to:"/admin/dashboard",onClick:()=>g(!1),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",color:"#dc2626",textDecoration:"none",borderBottom:"1px solid var(--kb-gray-100)"},children:[c.jsx(Ph,{size:16})," Admin Portal"]}),c.jsxs("button",{onClick:w,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",color:"var(--kb-gray-600)",background:"none",border:"none",cursor:"pointer",width:"100%",textAlign:"left"},children:[c.jsx(tg,{size:16})," Sign Out"]})]})]})}):c.jsx(c.Fragment,{children:c.jsxs(ue,{to:"/login",className:"btn btn-secondary",style:{padding:"0.5rem 1rem",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(Xa,{size:16})," Sign In"]})}),c.jsx(ue,{to:"/exchange",className:"btn btn-gold",style:{padding:"0.5rem 1rem",fontSize:"0.9rem"},children:"Get Kinderbucks"})]}),c.jsx("button",{onClick:()=>d(!f),className:"mobile-menu-btn",style:{display:"none",background:"none",border:"none",padding:"0.5rem",cursor:"pointer"},children:c.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:f?c.jsx("path",{d:"M6 6l12 12M6 18L18 6"}):c.jsx("path",{d:"M3 12h18M3 6h18M3 18h18"})})})]}),f&&c.jsxs("div",{className:"mobile-menu",style:{background:"var(--kb-white)",borderTop:"1px solid var(--kb-gray-200)",padding:"1rem"},children:[v.map(C=>c.jsx(ue,{to:C.to,onClick:()=>d(!1),style:{display:"block",padding:"0.75rem 0",color:T(C.to)?"var(--kb-navy)":"var(--kb-gray-700)",fontWeight:T(C.to)?"600":"400",borderBottom:"1px solid var(--kb-gray-100)"},children:C.label},C.to)),c.jsxs("div",{style:{marginTop:"1rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:[s?c.jsxs(c.Fragment,{children:[c.jsxs("div",{style:{padding:"0.75rem",background:"var(--kb-gray-50)",borderRadius:"8px",marginBottom:"0.5rem"},children:[c.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:(r==null?void 0:r.displayName)||t.email}),c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:(r==null?void 0:r.role)||"member"})]}),c.jsxs(ue,{to:"/profile",onClick:()=>d(!1),className:"btn btn-secondary",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[c.jsx(Ba,{size:16})," My Profile"]}),l&&c.jsxs(ue,{to:"/business/dashboard",onClick:()=>d(!1),className:"btn",style:{background:"#2563eb",color:"white",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[c.jsx(Qt,{size:16})," Business Dashboard"]}),a&&c.jsxs(ue,{to:"/admin/dashboard",onClick:()=>d(!1),className:"btn",style:{background:"#dc2626",color:"white",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[c.jsx(Ph,{size:16})," Admin Portal"]}),c.jsxs("button",{onClick:()=>{w(),d(!1)},className:"btn btn-secondary",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[c.jsx(tg,{size:16})," Sign Out"]})]}):c.jsxs(ue,{to:"/login",onClick:()=>d(!1),className:"btn btn-secondary",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[c.jsx(Xa,{size:16})," Sign In"]}),c.jsx(ue,{to:"/exchange",onClick:()=>d(!1),className:"btn btn-gold",children:"Get Kinderbucks"})]})]}),c.jsx("style",{children:`
        @media (max-width: 768px) {
          .desktop-nav {
            display: none !important;
          }
          .mobile-menu-btn {
            display: block !important;
          }
        }
      `})]})}function Xn(){return c.jsxs("footer",{style:{background:"var(--kb-navy)",color:"var(--kb-white)",padding:"3rem 1rem 2rem",marginTop:"auto"},children:[c.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"2rem"},children:[c.jsxs("div",{children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[c.jsx("div",{style:{width:"36px",height:"36px",background:"var(--kb-gold)",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--kb-navy)",fontFamily:"var(--font-display)",fontWeight:"700"},children:"K"}),c.jsx("span",{style:{fontFamily:"var(--font-display)",fontWeight:"600",fontSize:"1.1rem"},children:"Kinderbucks"})]}),c.jsx("p",{style:{color:"var(--kb-gray-300)",fontSize:"0.9rem",lineHeight:1.6},children:"Village of Kinderhook's local currency program. Supporting local businesses, strengthening community."}),c.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.8rem",marginTop:"1rem"},children:"Est. 2026"})]}),c.jsxs("div",{children:[c.jsx("h4",{style:{color:"var(--kb-gold)",marginBottom:"1rem",fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Quick Links"}),c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[c.jsx(ue,{to:"/about",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"How It Works"}),c.jsx(ue,{to:"/benefits",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"Member Benefits"}),c.jsx(ue,{to:"/exchange",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"Get Kinderbucks"}),c.jsx(ue,{to:"/businesses",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"For Businesses"})]})]}),c.jsxs("div",{children:[c.jsx("h4",{style:{color:"var(--kb-gold)",marginBottom:"1rem",fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"For Members"}),c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[c.jsx(ue,{to:"/account",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"My Account"}),c.jsx(ue,{to:"/profile",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"Kinderhooker Profile"}),c.jsx(ue,{to:"/scan/KB-0001",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"Verify Currency"})]})]}),c.jsxs("div",{children:[c.jsx("h4",{style:{color:"var(--kb-gold)",marginBottom:"1rem",fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Contact"}),c.jsxs("p",{style:{color:"var(--kb-gray-300)",fontSize:"0.9rem",lineHeight:1.8},children:["Village of Kinderhook",c.jsx("br",{}),"Columbia County, NY"]})]})]}),c.jsxs("div",{style:{maxWidth:"1200px",margin:"2rem auto 0",paddingTop:"2rem",borderTop:"1px solid var(--kb-navy-light)",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"1rem"},children:[c.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.8rem"},children:" 2026 Kinderbucks. A Harmonic Systems project."}),c.jsx("div",{style:{display:"flex",gap:"1.5rem"},children:c.jsx(ue,{to:"/admin/dashboard",style:{color:"var(--kb-gray-500)",fontSize:"0.8rem"},children:"Admin"})})]})]})}function R6(){return c.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[c.jsx(Yn,{}),c.jsx("section",{style:{background:"linear-gradient(135deg, var(--kb-navy) 0%, var(--kb-navy-light) 100%)",color:"var(--kb-white)",padding:"4rem 1rem",textAlign:"center"},children:c.jsxs(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},style:{maxWidth:"800px",margin:"0 auto"},children:[c.jsx("div",{style:{display:"inline-block",background:"rgba(201, 162, 39, 0.2)",color:"var(--kb-gold)",padding:"0.5rem 1rem",borderRadius:"100px",fontSize:"0.85rem",fontWeight:"600",marginBottom:"1.5rem"},children:"Village of Kinderhook  Est. 2026"}),c.jsxs("h1",{style:{fontFamily:"var(--font-display)",fontSize:"clamp(2.5rem, 5vw, 3.5rem)",fontWeight:"700",marginBottom:"1.5rem",lineHeight:1.2},children:["Strengthen Our Village,",c.jsx("br",{}),c.jsx("span",{style:{color:"var(--kb-gold)"},children:"One Kinderbuck at a Time"})]}),c.jsx("p",{style:{fontSize:"1.2rem",color:"var(--kb-gray-300)",marginBottom:"2rem",maxWidth:"600px",margin:"0 auto 2rem"},children:"A local currency program that keeps money circulating in Kinderhook, rewards loyal customers, and strengthens our community economy."}),c.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[c.jsx(ue,{to:"/exchange",className:"btn btn-gold",style:{padding:"1rem 2rem",fontSize:"1.1rem"},children:"Get Kinderbucks"}),c.jsx(ue,{to:"/about",className:"btn btn-outline",style:{padding:"1rem 2rem",fontSize:"1.1rem",borderColor:"var(--kb-white)",color:"var(--kb-white)"},children:"Learn How It Works"})]})]})}),c.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:c.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[c.jsxs("div",{style:{textAlign:"center",marginBottom:"3rem"},children:[c.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"How Kinderbucks Works"}),c.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"Simple steps to start supporting local"})]}),c.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"2rem"},children:[{step:"1",title:"Exchange",description:"Convert USD to Kinderbucks at participating locations or online. Members get bonus rates!",Icon:df},{step:"2",title:"Spend Local",description:"Use Kinderbucks at any of our 19+ participating village businesses.",Icon:Qt},{step:"3",title:"Check In",description:"Scan QR codes when you visit to build your Kinderhooker status and unlock rewards.",Icon:xs},{step:"4",title:"Earn More",description:"Higher tiers mean better exchange rates. Village Patrons get 25% bonus!",Icon:pl}].map((n,e)=>c.jsxs(Ee.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:e*.1},viewport:{once:!0},className:"card",style:{textAlign:"center"},children:[c.jsx("div",{style:{width:"60px",height:"60px",background:"var(--kb-navy)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:c.jsx(n.Icon,{size:28,color:"var(--kb-gold)",strokeWidth:1.5})}),c.jsxs("div",{style:{color:"var(--kb-gold)",fontSize:"0.8rem",fontWeight:"600",marginBottom:"0.25rem"},children:["STEP ",n.step]}),c.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:n.title}),c.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.95rem"},children:n.description})]},e))})]})}),c.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:c.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[c.jsxs("div",{style:{textAlign:"center",marginBottom:"3rem"},children:[c.jsx("div",{className:"badge badge-gold",style:{marginBottom:"1rem"},children:"OK Membership"}),c.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"Become a Kinderhooker"}),c.jsx("p",{style:{color:"var(--kb-gray-500)",maxWidth:"600px",margin:"0 auto"},children:"Visit local businesses to level up your membership and unlock better exchange rates"})]}),c.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"1.5rem"},children:[{name:"Curious",businesses:"1+",bonus:"10%",color:"#888888",Icon:Xt},{name:"Hooked",businesses:"5+",bonus:"15%",color:"#2e7d32",Icon:xr},{name:"Line & Sinker",businesses:"10+",bonus:"20%",color:"#1565c0",Icon:Ai},{name:"Village Patron",businesses:"15+",bonus:"25%",color:"#c9a227",Icon:Ln,featured:!0}].map((n,e)=>c.jsxs(Ee.div,{initial:{opacity:0,scale:.95},whileInView:{opacity:1,scale:1},transition:{delay:e*.1},viewport:{once:!0},className:"card",style:{textAlign:"center",border:n.featured?"2px solid var(--kb-gold)":void 0,position:"relative",overflow:"hidden"},children:[n.featured&&c.jsx("div",{style:{position:"absolute",top:"10px",right:"-30px",background:"var(--kb-gold)",color:"var(--kb-navy)",padding:"0.25rem 2rem",fontSize:"0.7rem",fontWeight:"600",transform:"rotate(45deg)"},children:"BEST"}),c.jsx("div",{style:{width:"50px",height:"50px",background:`${n.color}15`,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 0.75rem"},children:c.jsx(n.Icon,{size:24,color:n.color,strokeWidth:1.5})}),c.jsx("h3",{style:{color:n.color,marginBottom:"0.5rem"},children:n.name}),c.jsxs("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem",marginBottom:"1rem"},children:[n.businesses," businesses visited"]}),c.jsxs("div",{style:{background:`${n.color}15`,borderRadius:"8px",padding:"1rem"},children:[c.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:n.color},children:n.bonus}),c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:"Exchange Bonus"})]})]},e))}),c.jsx("div",{style:{textAlign:"center",marginTop:"2rem"},children:c.jsx(ue,{to:"/profile",className:"btn btn-primary",children:"View My Progress"})})]})}),c.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:c.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[c.jsxs("div",{style:{textAlign:"center",marginBottom:"3rem"},children:[c.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"Participating Businesses"}),c.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"Support these local Kinderhook establishments"})]}),c.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"1rem"},children:["The Aviary","Morningbird Cafe","Saisonnier","Broad Street Bagel","Brooklyn Pizzeria","Isola Wine Bar","OK Pantry","Kinderhook Books","Samascott's","The School Gallery","Old Dutch Inn","Muse Aesthetics"].map((n,e)=>c.jsx("div",{style:{background:"var(--kb-white)",borderRadius:"8px",padding:"1rem",textAlign:"center",fontSize:"0.9rem",color:"var(--kb-gray-700)",border:"1px solid var(--kb-gray-200)"},children:n},e))}),c.jsx("div",{style:{textAlign:"center",marginTop:"2rem"},children:c.jsx(ue,{to:"/businesses",className:"btn btn-secondary",children:"View All 19 Businesses "})})]})}),c.jsx("section",{style:{padding:"4rem 1rem",background:"linear-gradient(135deg, var(--kb-green) 0%, var(--kb-green-light) 100%)",color:"var(--kb-white)",textAlign:"center"},children:c.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto"},children:[c.jsx("h2",{style:{marginBottom:"1rem"},children:"Ready to Support Local?"}),c.jsx("p",{style:{opacity:.9,marginBottom:"2rem"},children:"Join the Kinderbucks program today and start earning rewards while strengthening our village economy."}),c.jsx("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:c.jsx(ue,{to:"/exchange",className:"btn btn-gold",style:{padding:"1rem 2rem"},children:"Get Your First Kinderbucks"})})]})}),c.jsx(Xn,{})]})}var P6=Object.defineProperty,Bh=Object.getOwnPropertySymbols,jb=Object.prototype.hasOwnProperty,Nb=Object.prototype.propertyIsEnumerable,Vw=(n,e,t)=>e in n?P6(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Tg=(n,e)=>{for(var t in e||(e={}))jb.call(e,t)&&Vw(n,t,e[t]);if(Bh)for(var t of Bh(e))Nb.call(e,t)&&Vw(n,t,e[t]);return n},Sg=(n,e)=>{var t={};for(var r in n)jb.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&Bh)for(var r of Bh(n))e.indexOf(r)<0&&Nb.call(n,r)&&(t[r]=n[r]);return t};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Ao;(n=>{const e=class De{constructor(d,m,g,v){if(this.version=d,this.errorCorrectionLevel=m,this.modules=[],this.isFunction=[],d<De.MIN_VERSION||d>De.MAX_VERSION)throw new RangeError("Version value out of range");if(v<-1||v>7)throw new RangeError("Mask value out of range");this.size=d*4+17;let w=[];for(let k=0;k<this.size;k++)w.push(!1);for(let k=0;k<this.size;k++)this.modules.push(w.slice()),this.isFunction.push(w.slice());this.drawFunctionPatterns();const T=this.addEccAndInterleave(g);if(this.drawCodewords(T),v==-1){let k=1e9;for(let C=0;C<8;C++){this.applyMask(C),this.drawFormatBits(C);const I=this.getPenaltyScore();I<k&&(v=C,k=I),this.applyMask(C)}}s(0<=v&&v<=7),this.mask=v,this.applyMask(v),this.drawFormatBits(v),this.isFunction=[]}static encodeText(d,m){const g=n.QrSegment.makeSegments(d);return De.encodeSegments(g,m)}static encodeBinary(d,m){const g=n.QrSegment.makeBytes(d);return De.encodeSegments([g],m)}static encodeSegments(d,m,g=1,v=40,w=-1,T=!0){if(!(De.MIN_VERSION<=g&&g<=v&&v<=De.MAX_VERSION)||w<-1||w>7)throw new RangeError("Invalid value");let k,C;for(k=g;;k++){const P=De.getNumDataCodewords(k,m)*8,G=l.getTotalBits(d,k);if(G<=P){C=G;break}if(k>=v)throw new RangeError("Data too long")}for(const P of[De.Ecc.MEDIUM,De.Ecc.QUARTILE,De.Ecc.HIGH])T&&C<=De.getNumDataCodewords(k,P)*8&&(m=P);let I=[];for(const P of d){t(P.mode.modeBits,4,I),t(P.numChars,P.mode.numCharCountBits(k),I);for(const G of P.getData())I.push(G)}s(I.length==C);const V=De.getNumDataCodewords(k,m)*8;s(I.length<=V),t(0,Math.min(4,V-I.length),I),t(0,(8-I.length%8)%8,I),s(I.length%8==0);for(let P=236;I.length<V;P^=253)t(P,8,I);let B=[];for(;B.length*8<I.length;)B.push(0);return I.forEach((P,G)=>B[G>>>3]|=P<<7-(G&7)),new De(k,m,B,w)}getModule(d,m){return 0<=d&&d<this.size&&0<=m&&m<this.size&&this.modules[m][d]}getModules(){return this.modules}drawFunctionPatterns(){for(let g=0;g<this.size;g++)this.setFunctionModule(6,g,g%2==0),this.setFunctionModule(g,6,g%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const d=this.getAlignmentPatternPositions(),m=d.length;for(let g=0;g<m;g++)for(let v=0;v<m;v++)g==0&&v==0||g==0&&v==m-1||g==m-1&&v==0||this.drawAlignmentPattern(d[g],d[v]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(d){const m=this.errorCorrectionLevel.formatBits<<3|d;let g=m;for(let w=0;w<10;w++)g=g<<1^(g>>>9)*1335;const v=(m<<10|g)^21522;s(v>>>15==0);for(let w=0;w<=5;w++)this.setFunctionModule(8,w,r(v,w));this.setFunctionModule(8,7,r(v,6)),this.setFunctionModule(8,8,r(v,7)),this.setFunctionModule(7,8,r(v,8));for(let w=9;w<15;w++)this.setFunctionModule(14-w,8,r(v,w));for(let w=0;w<8;w++)this.setFunctionModule(this.size-1-w,8,r(v,w));for(let w=8;w<15;w++)this.setFunctionModule(8,this.size-15+w,r(v,w));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let d=this.version;for(let g=0;g<12;g++)d=d<<1^(d>>>11)*7973;const m=this.version<<12|d;s(m>>>18==0);for(let g=0;g<18;g++){const v=r(m,g),w=this.size-11+g%3,T=Math.floor(g/3);this.setFunctionModule(w,T,v),this.setFunctionModule(T,w,v)}}drawFinderPattern(d,m){for(let g=-4;g<=4;g++)for(let v=-4;v<=4;v++){const w=Math.max(Math.abs(v),Math.abs(g)),T=d+v,k=m+g;0<=T&&T<this.size&&0<=k&&k<this.size&&this.setFunctionModule(T,k,w!=2&&w!=4)}}drawAlignmentPattern(d,m){for(let g=-2;g<=2;g++)for(let v=-2;v<=2;v++)this.setFunctionModule(d+v,m+g,Math.max(Math.abs(v),Math.abs(g))!=1)}setFunctionModule(d,m,g){this.modules[m][d]=g,this.isFunction[m][d]=!0}addEccAndInterleave(d){const m=this.version,g=this.errorCorrectionLevel;if(d.length!=De.getNumDataCodewords(m,g))throw new RangeError("Invalid argument");const v=De.NUM_ERROR_CORRECTION_BLOCKS[g.ordinal][m],w=De.ECC_CODEWORDS_PER_BLOCK[g.ordinal][m],T=Math.floor(De.getNumRawDataModules(m)/8),k=v-T%v,C=Math.floor(T/v);let I=[];const V=De.reedSolomonComputeDivisor(w);for(let P=0,G=0;P<v;P++){let $=d.slice(G,G+C-w+(P<k?0:1));G+=$.length;const H=De.reedSolomonComputeRemainder($,V);P<k&&$.push(0),I.push($.concat(H))}let B=[];for(let P=0;P<I[0].length;P++)I.forEach((G,$)=>{(P!=C-w||$>=k)&&B.push(G[P])});return s(B.length==T),B}drawCodewords(d){if(d.length!=Math.floor(De.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let m=0;for(let g=this.size-1;g>=1;g-=2){g==6&&(g=5);for(let v=0;v<this.size;v++)for(let w=0;w<2;w++){const T=g-w,C=(g+1&2)==0?this.size-1-v:v;!this.isFunction[C][T]&&m<d.length*8&&(this.modules[C][T]=r(d[m>>>3],7-(m&7)),m++)}}s(m==d.length*8)}applyMask(d){if(d<0||d>7)throw new RangeError("Mask value out of range");for(let m=0;m<this.size;m++)for(let g=0;g<this.size;g++){let v;switch(d){case 0:v=(g+m)%2==0;break;case 1:v=m%2==0;break;case 2:v=g%3==0;break;case 3:v=(g+m)%3==0;break;case 4:v=(Math.floor(g/3)+Math.floor(m/2))%2==0;break;case 5:v=g*m%2+g*m%3==0;break;case 6:v=(g*m%2+g*m%3)%2==0;break;case 7:v=((g+m)%2+g*m%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[m][g]&&v&&(this.modules[m][g]=!this.modules[m][g])}}getPenaltyScore(){let d=0;for(let w=0;w<this.size;w++){let T=!1,k=0,C=[0,0,0,0,0,0,0];for(let I=0;I<this.size;I++)this.modules[w][I]==T?(k++,k==5?d+=De.PENALTY_N1:k>5&&d++):(this.finderPenaltyAddHistory(k,C),T||(d+=this.finderPenaltyCountPatterns(C)*De.PENALTY_N3),T=this.modules[w][I],k=1);d+=this.finderPenaltyTerminateAndCount(T,k,C)*De.PENALTY_N3}for(let w=0;w<this.size;w++){let T=!1,k=0,C=[0,0,0,0,0,0,0];for(let I=0;I<this.size;I++)this.modules[I][w]==T?(k++,k==5?d+=De.PENALTY_N1:k>5&&d++):(this.finderPenaltyAddHistory(k,C),T||(d+=this.finderPenaltyCountPatterns(C)*De.PENALTY_N3),T=this.modules[I][w],k=1);d+=this.finderPenaltyTerminateAndCount(T,k,C)*De.PENALTY_N3}for(let w=0;w<this.size-1;w++)for(let T=0;T<this.size-1;T++){const k=this.modules[w][T];k==this.modules[w][T+1]&&k==this.modules[w+1][T]&&k==this.modules[w+1][T+1]&&(d+=De.PENALTY_N2)}let m=0;for(const w of this.modules)m=w.reduce((T,k)=>T+(k?1:0),m);const g=this.size*this.size,v=Math.ceil(Math.abs(m*20-g*10)/g)-1;return s(0<=v&&v<=9),d+=v*De.PENALTY_N4,s(0<=d&&d<=2568888),d}getAlignmentPatternPositions(){if(this.version==1)return[];{const d=Math.floor(this.version/7)+2,m=this.version==32?26:Math.ceil((this.version*4+4)/(d*2-2))*2;let g=[6];for(let v=this.size-7;g.length<d;v-=m)g.splice(1,0,v);return g}}static getNumRawDataModules(d){if(d<De.MIN_VERSION||d>De.MAX_VERSION)throw new RangeError("Version number out of range");let m=(16*d+128)*d+64;if(d>=2){const g=Math.floor(d/7)+2;m-=(25*g-10)*g-55,d>=7&&(m-=36)}return s(208<=m&&m<=29648),m}static getNumDataCodewords(d,m){return Math.floor(De.getNumRawDataModules(d)/8)-De.ECC_CODEWORDS_PER_BLOCK[m.ordinal][d]*De.NUM_ERROR_CORRECTION_BLOCKS[m.ordinal][d]}static reedSolomonComputeDivisor(d){if(d<1||d>255)throw new RangeError("Degree out of range");let m=[];for(let v=0;v<d-1;v++)m.push(0);m.push(1);let g=1;for(let v=0;v<d;v++){for(let w=0;w<m.length;w++)m[w]=De.reedSolomonMultiply(m[w],g),w+1<m.length&&(m[w]^=m[w+1]);g=De.reedSolomonMultiply(g,2)}return m}static reedSolomonComputeRemainder(d,m){let g=m.map(v=>0);for(const v of d){const w=v^g.shift();g.push(0),m.forEach((T,k)=>g[k]^=De.reedSolomonMultiply(T,w))}return g}static reedSolomonMultiply(d,m){if(d>>>8||m>>>8)throw new RangeError("Byte out of range");let g=0;for(let v=7;v>=0;v--)g=g<<1^(g>>>7)*285,g^=(m>>>v&1)*d;return s(g>>>8==0),g}finderPenaltyCountPatterns(d){const m=d[1];s(m<=this.size*3);const g=m>0&&d[2]==m&&d[3]==m*3&&d[4]==m&&d[5]==m;return(g&&d[0]>=m*4&&d[6]>=m?1:0)+(g&&d[6]>=m*4&&d[0]>=m?1:0)}finderPenaltyTerminateAndCount(d,m,g){return d&&(this.finderPenaltyAddHistory(m,g),m=0),m+=this.size,this.finderPenaltyAddHistory(m,g),this.finderPenaltyCountPatterns(g)}finderPenaltyAddHistory(d,m){m[0]==0&&(d+=this.size),m.pop(),m.unshift(d)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],n.QrCode=e;function t(f,d,m){if(d<0||d>31||f>>>d)throw new RangeError("Value out of range");for(let g=d-1;g>=0;g--)m.push(f>>>g&1)}function r(f,d){return(f>>>d&1)!=0}function s(f){if(!f)throw new Error("Assertion error")}const a=class pt{constructor(d,m,g){if(this.mode=d,this.numChars=m,this.bitData=g,m<0)throw new RangeError("Invalid argument");this.bitData=g.slice()}static makeBytes(d){let m=[];for(const g of d)t(g,8,m);return new pt(pt.Mode.BYTE,d.length,m)}static makeNumeric(d){if(!pt.isNumeric(d))throw new RangeError("String contains non-numeric characters");let m=[];for(let g=0;g<d.length;){const v=Math.min(d.length-g,3);t(parseInt(d.substring(g,g+v),10),v*3+1,m),g+=v}return new pt(pt.Mode.NUMERIC,d.length,m)}static makeAlphanumeric(d){if(!pt.isAlphanumeric(d))throw new RangeError("String contains unencodable characters in alphanumeric mode");let m=[],g;for(g=0;g+2<=d.length;g+=2){let v=pt.ALPHANUMERIC_CHARSET.indexOf(d.charAt(g))*45;v+=pt.ALPHANUMERIC_CHARSET.indexOf(d.charAt(g+1)),t(v,11,m)}return g<d.length&&t(pt.ALPHANUMERIC_CHARSET.indexOf(d.charAt(g)),6,m),new pt(pt.Mode.ALPHANUMERIC,d.length,m)}static makeSegments(d){return d==""?[]:pt.isNumeric(d)?[pt.makeNumeric(d)]:pt.isAlphanumeric(d)?[pt.makeAlphanumeric(d)]:[pt.makeBytes(pt.toUtf8ByteArray(d))]}static makeEci(d){let m=[];if(d<0)throw new RangeError("ECI assignment value out of range");if(d<128)t(d,8,m);else if(d<16384)t(2,2,m),t(d,14,m);else if(d<1e6)t(6,3,m),t(d,21,m);else throw new RangeError("ECI assignment value out of range");return new pt(pt.Mode.ECI,0,m)}static isNumeric(d){return pt.NUMERIC_REGEX.test(d)}static isAlphanumeric(d){return pt.ALPHANUMERIC_REGEX.test(d)}getData(){return this.bitData.slice()}static getTotalBits(d,m){let g=0;for(const v of d){const w=v.mode.numCharCountBits(m);if(v.numChars>=1<<w)return 1/0;g+=4+w+v.bitData.length}return g}static toUtf8ByteArray(d){d=encodeURI(d);let m=[];for(let g=0;g<d.length;g++)d.charAt(g)!="%"?m.push(d.charCodeAt(g)):(m.push(parseInt(d.substring(g+1,g+3),16)),g+=2);return m}};a.NUMERIC_REGEX=/^[0-9]*$/,a.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,a.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let l=a;n.QrSegment=a})(Ao||(Ao={}));(n=>{(e=>{const t=class{constructor(s,a){this.ordinal=s,this.formatBits=a}};t.LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2),e.Ecc=t})(n.QrCode||(n.QrCode={}))})(Ao||(Ao={}));(n=>{(e=>{const t=class{constructor(s,a){this.modeBits=s,this.numBitsCharCount=a}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};t.NUMERIC=new t(1,[10,12,14]),t.ALPHANUMERIC=new t(2,[9,11,13]),t.BYTE=new t(4,[8,16,16]),t.KANJI=new t(8,[8,10,12]),t.ECI=new t(7,[0,0,0]),e.Mode=t})(n.QrSegment||(n.QrSegment={}))})(Ao||(Ao={}));var ja=Ao;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var j6={L:ja.QrCode.Ecc.LOW,M:ja.QrCode.Ecc.MEDIUM,Q:ja.QrCode.Ecc.QUARTILE,H:ja.QrCode.Ecc.HIGH},Db=128,Vb="L",Mb="#FFFFFF",Lb="#000000",Ob=!1,Bb=1,N6=4,D6=0,V6=.1;function Fb(n,e=0){const t=[];return n.forEach(function(r,s){let a=null;r.forEach(function(l,f){if(!l&&a!==null){t.push(`M${a+e} ${s+e}h${f-a}v1H${a+e}z`),a=null;return}if(f===r.length-1){if(!l)return;a===null?t.push(`M${f+e},${s+e} h1v1H${f+e}z`):t.push(`M${a+e},${s+e} h${f+1-a}v1H${a+e}z`);return}l&&a===null&&(a=f)})}),t.join("")}function zb(n,e){return n.slice().map((t,r)=>r<e.y||r>=e.y+e.h?t:t.map((s,a)=>a<e.x||a>=e.x+e.w?s:!1))}function M6(n,e,t,r){if(r==null)return null;const s=n.length+t*2,a=Math.floor(e*V6),l=s/e,f=(r.width||a)*l,d=(r.height||a)*l,m=r.x==null?n.length/2-f/2:r.x*l,g=r.y==null?n.length/2-d/2:r.y*l,v=r.opacity==null?1:r.opacity;let w=null;if(r.excavate){let k=Math.floor(m),C=Math.floor(g),I=Math.ceil(f+m-k),V=Math.ceil(d+g-C);w={x:k,y:C,w:I,h:V}}const T=r.crossOrigin;return{x:m,y:g,h:d,w:f,excavation:w,opacity:v,crossOrigin:T}}function L6(n,e){return e!=null?Math.max(Math.floor(e),0):n?N6:D6}function Ub({value:n,level:e,minVersion:t,includeMargin:r,marginSize:s,imageSettings:a,size:l,boostLevel:f}){let d=Nt.useMemo(()=>{const k=(Array.isArray(n)?n:[n]).reduce((C,I)=>(C.push(...ja.QrSegment.makeSegments(I)),C),[]);return ja.QrCode.encodeSegments(k,j6[e],t,void 0,void 0,f)},[n,e,t,f]);const{cells:m,margin:g,numCells:v,calculatedImageSettings:w}=Nt.useMemo(()=>{let T=d.getModules();const k=L6(r,s),C=T.length+k*2,I=M6(T,l,k,a);return{cells:T,margin:k,numCells:C,calculatedImageSettings:I}},[d,l,a,r,s]);return{qrcode:d,margin:g,cells:m,numCells:v,calculatedImageSettings:w}}var O6=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),B6=Nt.forwardRef(function(e,t){const r=e,{value:s,size:a=Db,level:l=Vb,bgColor:f=Mb,fgColor:d=Lb,includeMargin:m=Ob,minVersion:g=Bb,boostLevel:v,marginSize:w,imageSettings:T}=r,C=Sg(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:I}=C,V=Sg(C,["style"]),B=T==null?void 0:T.src,P=Nt.useRef(null),G=Nt.useRef(null),$=Nt.useCallback(Ne=>{P.current=Ne,typeof t=="function"?t(Ne):t&&(t.current=Ne)},[t]),[H,A]=Nt.useState(!1),{margin:b,cells:j,numCells:L,calculatedImageSettings:O}=Ub({value:s,level:l,minVersion:g,boostLevel:v,includeMargin:m,marginSize:w,imageSettings:T,size:a});Nt.useEffect(()=>{if(P.current!=null){const Ne=P.current,He=Ne.getContext("2d");if(!He)return;let wt=j;const Se=G.current,ie=O!=null&&Se!==null&&Se.complete&&Se.naturalHeight!==0&&Se.naturalWidth!==0;ie&&O.excavation!=null&&(wt=zb(j,O.excavation));const pe=window.devicePixelRatio||1;Ne.height=Ne.width=a*pe;const ae=a/L*pe;He.scale(ae,ae),He.fillStyle=f,He.fillRect(0,0,L,L),He.fillStyle=d,O6?He.fill(new Path2D(Fb(wt,b))):j.forEach(function(U,ee){U.forEach(function(Ce,Ae){Ce&&He.fillRect(Ae+b,ee+b,1,1)})}),O&&(He.globalAlpha=O.opacity),ie&&He.drawImage(Se,O.x+b,O.y+b,O.w,O.h)}}),Nt.useEffect(()=>{A(!1)},[B]);const W=Tg({height:a,width:a},I);let M=null;return B!=null&&(M=Nt.createElement("img",{src:B,key:B,style:{display:"none"},onLoad:()=>{A(!0)},ref:G,crossOrigin:O==null?void 0:O.crossOrigin})),Nt.createElement(Nt.Fragment,null,Nt.createElement("canvas",Tg({style:W,height:a,width:a,ref:$,role:"img"},V)),M)});B6.displayName="QRCodeCanvas";var Fh=Nt.forwardRef(function(e,t){const r=e,{value:s,size:a=Db,level:l=Vb,bgColor:f=Mb,fgColor:d=Lb,includeMargin:m=Ob,minVersion:g=Bb,boostLevel:v,title:w,marginSize:T,imageSettings:k}=r,C=Sg(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:I,cells:V,numCells:B,calculatedImageSettings:P}=Ub({value:s,level:l,minVersion:g,boostLevel:v,includeMargin:m,marginSize:T,imageSettings:k,size:a});let G=V,$=null;k!=null&&P!=null&&(P.excavation!=null&&(G=zb(V,P.excavation)),$=Nt.createElement("image",{href:k.src,height:P.h,width:P.w,x:P.x+I,y:P.y+I,preserveAspectRatio:"none",opacity:P.opacity,crossOrigin:P.crossOrigin}));const H=Fb(G,I);return Nt.createElement("svg",Tg({height:a,width:a,viewBox:`0 0 ${B} ${B}`,ref:t,role:"img"},C),!!w&&Nt.createElement("title",null,w),Nt.createElement("path",{fill:f,d:`M0,0 h${B}v${B}H0z`,shapeRendering:"crispEdges"}),Nt.createElement("path",{fill:d,d:H,shapeRendering:"crispEdges"}),$)});Fh.displayName="QRCodeSVG";const Mw={1:{color:"#2d5a27",gradient:["#3d7a37","#2d5a27"],label:"ONE",accent:"#90c695"},5:{color:"#1e3a5f",gradient:["#2e5a8f","#1e3a5f"],label:"FIVE",accent:"#7ba3cc"},10:{color:"#5c2d5c",gradient:["#7c4d7c","#5c2d5c"],label:"TEN",accent:"#b89db8"},20:{color:"#8b6914",gradient:["#c9a227","#8b6914"],label:"TWENTY",accent:"#e8d48a"}};function eu({value:n,size:e=128,denomination:t=5,showFrame:r=!0}){const s=Mw[t]||Mw[5],a=e+48,l=16;return r?c.jsx("div",{style:{width:a,background:`linear-gradient(135deg, ${s.gradient[0]} 0%, ${s.gradient[1]} 100%)`,borderRadius:l,padding:"3px",display:"inline-block",boxShadow:"0 4px 12px rgba(0,0,0,0.2)"},children:c.jsxs("div",{style:{background:"linear-gradient(135deg, #fefefe 0%, #f5f5f0 100%)",borderRadius:l-2,padding:"8px",position:"relative"},children:[c.jsx("div",{style:{textAlign:"center",marginBottom:"6px",fontFamily:'"Georgia", serif',fontSize:"10px",fontWeight:"bold",color:s.color,letterSpacing:"3px",textTransform:"uppercase"},children:"KINDERBUCKS"}),c.jsxs("div",{style:{background:"white",borderRadius:"8px",padding:"8px",border:`2px solid ${s.accent}`,position:"relative"},children:[c.jsx("div",{style:{position:"absolute",top:"4px",left:"4px",width:"12px",height:"12px",borderTop:`2px solid ${s.color}`,borderLeft:`2px solid ${s.color}`,borderRadius:"2px 0 0 0"}}),c.jsx("div",{style:{position:"absolute",top:"4px",right:"4px",width:"12px",height:"12px",borderTop:`2px solid ${s.color}`,borderRight:`2px solid ${s.color}`,borderRadius:"0 2px 0 0"}}),c.jsx("div",{style:{position:"absolute",bottom:"4px",left:"4px",width:"12px",height:"12px",borderBottom:`2px solid ${s.color}`,borderLeft:`2px solid ${s.color}`,borderRadius:"0 0 0 2px"}}),c.jsx("div",{style:{position:"absolute",bottom:"4px",right:"4px",width:"12px",height:"12px",borderBottom:`2px solid ${s.color}`,borderRight:`2px solid ${s.color}`,borderRadius:"0 0 2px 0"}}),c.jsx(Fh,{value:n,size:e,level:"H",fgColor:s.color,style:{display:"block"},imageSettings:{src:`data:image/svg+xml,${encodeURIComponent(`
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="${s.color}">
                  <circle cx="12" cy="12" r="11" fill="white" stroke="${s.color}" stroke-width="1.5"/>
                  <text x="12" y="16" text-anchor="middle" font-size="12" font-weight="bold" fill="${s.color}" font-family="Georgia">K</text>
                </svg>
              `)}`,height:e*.2,width:e*.2,excavate:!0}})]}),c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"6px",padding:"0 4px"},children:[c.jsxs("span",{style:{fontFamily:'"Georgia", serif',fontSize:"14px",fontWeight:"bold",color:s.color},children:["$",t]}),c.jsx("span",{style:{fontFamily:'"Georgia", serif',fontSize:"9px",color:s.color,letterSpacing:"1px",opacity:.8},children:s.label}),c.jsxs("span",{style:{fontFamily:'"Georgia", serif',fontSize:"14px",fontWeight:"bold",color:s.color},children:["$",t]})]})]})}):c.jsx(Fh,{value:n,size:e,level:"M",fgColor:s.color,style:{display:"block"}})}const F6="https://harmonicsystems.github.io/kinderbucks/#/scan/KB-0001",z6="https://harmonicsystems.github.io/kinderbucks/#/checkin/BROADST-BAGEL",U6="Broad Street Bagel Co.";function $6(){const[n,e]=N.useState(null),[t,r]=N.useState(0),[s,a]=N.useState(!1);return c.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)",overflow:"hidden"},children:c.jsxs("div",{style:{maxWidth:"1100px",margin:"0 auto"},children:[c.jsxs(Ee.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},style:{textAlign:"center",marginBottom:"3rem"},children:[c.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",background:"linear-gradient(135deg, var(--kb-gold) 0%, #e8c33a 100%)",color:"var(--kb-navy)",padding:"0.5rem 1rem",borderRadius:"100px",fontSize:"0.85rem",fontWeight:"600",marginBottom:"1rem"},children:[c.jsx(YM,{size:16})," Try It Live"]}),c.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.75rem"},children:"See Kinderbucks in Action"}),c.jsx("p",{style:{color:"var(--kb-gray-600)",maxWidth:"600px",margin:"0 auto"},children:"Scan these real QR codes with your phone's camera to experience the magic"})]}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(320px, 1fr))",gap:"2rem",marginBottom:"3rem"},children:[c.jsxs(Ee.div,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},transition:{delay:.1},viewport:{once:!0},className:"card",style:{padding:"2rem",background:"linear-gradient(180deg, #f8fbff 0%, #ffffff 100%)",border:"2px solid #e8f0ff",position:"relative",overflow:"hidden"},children:[c.jsx("div",{style:{position:"absolute",top:0,right:0,width:"80px",height:"80px",background:"linear-gradient(135deg, transparent 50%, rgba(52, 152, 219, 0.1) 50%)"}}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[c.jsx("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, #3498db 0%, #2980b9 100%)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsx(bM,{size:22,color:"white"})}),c.jsxs("div",{children:[c.jsx("h3",{style:{color:"var(--kb-navy)",margin:0,fontSize:"1.2rem"},children:"Verify Currency"}),c.jsx("p",{style:{color:"var(--kb-gray-500)",margin:0,fontSize:"0.85rem"},children:"Confirm authenticity instantly"})]})]}),c.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem",marginBottom:"1.5rem"},children:"Every Kinderbuck has a unique QR code. Scan to verify it's real, see its value, and track its journey through the village."}),c.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1.5rem"},children:c.jsx(Ee.div,{whileHover:{scale:1.02},transition:{type:"spring",stiffness:300},children:c.jsx(eu,{value:F6,size:130,denomination:5,showFrame:!0})})}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1rem",background:"rgba(52, 152, 219, 0.08)",borderRadius:"10px",marginBottom:"1rem"},children:[c.jsx(__,{size:20,color:"#3498db"}),c.jsx("span",{style:{color:"var(--kb-gray-700)",fontSize:"0.9rem"},children:"Point your phone camera at the QR code"})]}),c.jsxs("div",{style:{borderTop:"1px dashed var(--kb-gray-200)",paddingTop:"1rem"},children:[c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)",marginBottom:"0.5rem"},children:"You'll see:"}),c.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:["Verified","$5 Value","Active Status","Serial: KB-0001"].map((l,f)=>c.jsx("span",{style:{padding:"0.25rem 0.6rem",background:"var(--kb-gray-100)",borderRadius:"4px",fontSize:"0.8rem",color:"var(--kb-gray-600)"},children:l},f))})]})]}),c.jsxs(Ee.div,{initial:{opacity:0,x:30},whileInView:{opacity:1,x:0},transition:{delay:.2},viewport:{once:!0},className:"card",style:{padding:"2rem",background:"linear-gradient(180deg, #f8fff8 0%, #ffffff 100%)",border:"2px solid #e8ffe8",position:"relative",overflow:"hidden"},children:[c.jsx("div",{style:{position:"absolute",top:0,right:0,width:"80px",height:"80px",background:"linear-gradient(135deg, transparent 50%, rgba(39, 174, 96, 0.1) 50%)"}}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[c.jsx("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, var(--kb-green) 0%, #1e8449 100%)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsx(Qt,{size:22,color:"white"})}),c.jsxs("div",{children:[c.jsx("h3",{style:{color:"var(--kb-navy)",margin:0,fontSize:"1.2rem"},children:"Check In"}),c.jsx("p",{style:{color:"var(--kb-gray-500)",margin:0,fontSize:"0.85rem"},children:"Record visits, earn rewards"})]})]}),c.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem",marginBottom:"1.5rem"},children:"Scan the QR code at each business you visit. Build your Kinderhooker status and unlock better exchange rates!"}),c.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1.5rem"},children:c.jsx(Ee.div,{whileHover:{scale:1.02},transition:{type:"spring",stiffness:300},style:{background:"linear-gradient(135deg, var(--kb-green) 0%, #1e8449 100%)",borderRadius:"16px",padding:"3px",boxShadow:"0 4px 12px rgba(39, 174, 96, 0.3)"},children:c.jsxs("div",{style:{background:"white",borderRadius:"14px",padding:"12px",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"10px",fontWeight:"600",color:"var(--kb-green)",letterSpacing:"2px",marginBottom:"8px"},children:"CHECK IN AT"}),c.jsx(eu,{value:z6,size:110,denomination:1,showFrame:!1}),c.jsxs("div",{style:{marginTop:"8px",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.4rem"},children:[c.jsx(WV,{size:14,color:"var(--kb-green)"}),c.jsx("span",{style:{fontWeight:"600",color:"var(--kb-navy)",fontSize:"0.9rem"},children:U6})]})]})})}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1rem",background:"rgba(39, 174, 96, 0.08)",borderRadius:"10px",marginBottom:"1rem"},children:[c.jsx(__,{size:20,color:"var(--kb-green)"}),c.jsx("span",{style:{color:"var(--kb-gray-700)",fontSize:"0.9rem"},children:"Scan when you visit a business"})]}),c.jsxs("div",{style:{borderTop:"1px dashed var(--kb-gray-200)",paddingTop:"1rem"},children:[c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)",marginBottom:"0.5rem"},children:"You'll see:"}),c.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:["Check-in Recorded","+1 Business","Tier Progress","Next Reward"].map((l,f)=>c.jsx("span",{style:{padding:"0.25rem 0.6rem",background:"var(--kb-gray-100)",borderRadius:"4px",fontSize:"0.8rem",color:"var(--kb-gray-600)"},children:l},f))})]})]})]}),c.jsxs(Ee.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{delay:.3},viewport:{once:!0},style:{background:"linear-gradient(135deg, var(--kb-navy) 0%, #1a3a5c 100%)",borderRadius:"20px",padding:"2rem",color:"white",position:"relative",overflow:"hidden"},children:[c.jsx("div",{style:{position:"absolute",top:"-50%",right:"-10%",width:"300px",height:"300px",background:"radial-gradient(circle, rgba(201, 162, 39, 0.1) 0%, transparent 70%)",borderRadius:"50%"}}),c.jsxs("div",{style:{position:"relative",zIndex:1},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1.5rem"},children:[c.jsx(hf,{size:20,color:"var(--kb-gold)"}),c.jsx("span",{style:{color:"var(--kb-gold)",fontWeight:"600",fontSize:"0.9rem"},children:"The Kinderbucks Loop"})]}),c.jsx("h3",{style:{fontSize:"1.5rem",marginBottom:"2rem",maxWidth:"500px"},children:"Check-ins unlock better exchange rates on currency"}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem",alignItems:"center"},children:[c.jsxs(Ee.div,{initial:{opacity:0},whileInView:{opacity:1},transition:{delay:.4},viewport:{once:!0},style:{display:"flex",alignItems:"center",gap:"1rem"},children:[c.jsx("div",{style:{width:"50px",height:"50px",background:"rgba(255,255,255,0.1)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:c.jsx(Qt,{size:24,color:"var(--kb-gold)"})}),c.jsxs("div",{children:[c.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Visit & Check In"}),c.jsx("div",{style:{fontSize:"0.85rem",opacity:.8},children:"Scan at local businesses"})]})]}),c.jsx("div",{style:{display:"flex",justifyContent:"center"},children:c.jsx(Zm,{size:24,color:"var(--kb-gold)",style:{opacity:.5}})}),c.jsxs(Ee.div,{initial:{opacity:0},whileInView:{opacity:1},transition:{delay:.5},viewport:{once:!0},style:{display:"flex",alignItems:"center",gap:"1rem"},children:[c.jsx("div",{style:{width:"50px",height:"50px",background:"rgba(255,255,255,0.1)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:c.jsx(pl,{size:24,color:"var(--kb-gold)"})}),c.jsxs("div",{children:[c.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Level Up"}),c.jsx("div",{style:{fontSize:"0.85rem",opacity:.8},children:"Reach new tiers"})]})]}),c.jsx("div",{style:{display:"flex",justifyContent:"center"},children:c.jsx(Zm,{size:24,color:"var(--kb-gold)",style:{opacity:.5}})}),c.jsxs(Ee.div,{initial:{opacity:0},whileInView:{opacity:1},transition:{delay:.6},viewport:{once:!0},style:{display:"flex",alignItems:"center",gap:"1rem"},children:[c.jsx("div",{style:{width:"50px",height:"50px",background:"linear-gradient(135deg, var(--kb-gold) 0%, #b8922d 100%)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:c.jsx(xr,{size:24,color:"var(--kb-navy)"})}),c.jsxs("div",{children:[c.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Earn More"}),c.jsx("div",{style:{fontSize:"0.85rem",opacity:.8},children:"Up to 25% bonus!"})]})]})]}),c.jsx("div",{style:{marginTop:"2rem",display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[{name:"Curious",visits:"1+",bonus:"10%"},{name:"Hooked",visits:"5+",bonus:"15%"},{name:"Line & Sinker",visits:"10+",bonus:"20%"},{name:"Village Patron",visits:"15+",bonus:"25%",featured:!0}].map((l,f)=>c.jsxs("div",{style:{padding:"0.5rem 1rem",background:l.featured?"linear-gradient(135deg, var(--kb-gold) 0%, #b8922d 100%)":"rgba(255,255,255,0.1)",borderRadius:"8px",fontSize:"0.85rem",color:l.featured?"var(--kb-navy)":"white",fontWeight:l.featured?"600":"400"},children:[l.name,": ",l.bonus]},f))})]})]}),c.jsxs(Ee.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:.4},viewport:{once:!0},style:{textAlign:"center",marginTop:"2.5rem"},children:[c.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1rem"},children:"Ready to start your Kinderhooker journey?"}),c.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[c.jsx(ue,{to:"/profile",className:"btn btn-primary",children:"View My Progress"}),c.jsx(ue,{to:"/businesses",className:"btn btn-secondary",children:"Find Businesses to Visit"})]})]})]})})}function W6(){return c.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[c.jsx(Yn,{}),c.jsx("section",{style:{background:"var(--kb-navy)",color:"var(--kb-white)",padding:"4rem 1rem",textAlign:"center"},children:c.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[c.jsx("h1",{style:{marginBottom:"1rem"},children:"How Kinderbucks Works"}),c.jsx("p",{style:{color:"var(--kb-gray-300)",fontSize:"1.1rem"},children:"A simple system designed to keep money local and reward community participation"})]})}),c.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:c.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[c.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem"},children:"What is Kinderbucks?"}),c.jsxs("div",{style:{color:"var(--kb-gray-700)",lineHeight:1.8},children:[c.jsxs("p",{style:{marginBottom:"1rem"},children:[c.jsx("strong",{children:"Kinderbucks"})," is a local currency program for the Village of Kinderhook, NY. It's real money  physical bills with QR codes for verification  that can only be spent at participating local businesses."]}),c.jsx("p",{style:{marginBottom:"1rem"},children:"When you exchange US dollars for Kinderbucks, you're making a commitment to spend locally. In return, you receive bonus value through our OK Membership program, turning $10 into $11, $12, or even $12.50 in local spending power."}),c.jsx("p",{children:"Every Kinderbuck spent stays in the village, circulating between businesses and residents, strengthening our local economy with each transaction."})]})]})}),c.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:c.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[c.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem",textAlign:"center"},children:"The Exchange Process"}),c.jsx("div",{style:{display:"grid",gap:"2rem",maxWidth:"700px",margin:"0 auto"},children:[{step:1,title:"Visit an Exchange Point",description:"Stop by any participating business or our central exchange location with US dollars."},{step:2,title:"Show Your Membership",description:"Scan your profile QR code or provide your phone number to apply your tier bonus."},{step:3,title:"Receive Your Kinderbucks",description:"Get physical Kinderbuck bills in $1, $5, $10, and $20 denominations with your bonus applied."},{step:4,title:"Spend Locally",description:"Use your Kinderbucks at any of our 19+ participating businesses."}].map((n,e)=>c.jsxs(Ee.div,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},transition:{delay:e*.1},viewport:{once:!0},style:{display:"flex",gap:"1.5rem",alignItems:"flex-start"},children:[c.jsx("div",{style:{width:"50px",height:"50px",background:"var(--kb-navy)",color:"var(--kb-gold)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"var(--font-display)",fontWeight:"700",fontSize:"1.2rem",flexShrink:0},children:n.step}),c.jsxs("div",{children:[c.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:n.title}),c.jsx("p",{style:{color:"var(--kb-gray-600)"},children:n.description})]})]},e))})]})}),c.jsx($6,{}),c.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:c.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[c.jsx("div",{className:"badge badge-gold",style:{marginBottom:"1rem"},children:"OK Membership"}),c.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem"},children:"The Kinderhooker Program"}),c.jsxs("div",{style:{color:"var(--kb-gray-700)",lineHeight:1.8},children:[c.jsxs("p",{style:{marginBottom:"1rem"},children:[c.jsx("strong",{children:"OK Membership"})," rewards customers who actively support local businesses. The more businesses you visit, the higher your tier  and the better your exchange rate."]}),c.jsxs("p",{style:{marginBottom:"1rem"},children:['Each participating business has a QR code. Scan it when you visit to record a "check-in." Your tier is based on how many ',c.jsx("em",{children:"unique"})," businesses you've visited, encouraging exploration of the entire village."]}),c.jsx("p",{children:`There's no cost to join. Simply start checking in at businesses, and you'll automatically become a "Kinderhooker" with access to bonus exchange rates.`})]}),c.jsxs("div",{style:{marginTop:"2rem",display:"flex",gap:"1rem",flexWrap:"wrap"},children:[c.jsx(ue,{to:"/benefits",className:"btn btn-primary",children:"View All Benefits"}),c.jsx(ue,{to:"/profile",className:"btn btn-secondary",children:"Check My Status"})]})]})}),c.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:c.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[c.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem"},children:"Frequently Asked Questions"}),[{q:"Is Kinderbucks real money?",a:"Kinderbucks are a local complementary currency. They have value within our participating business network but cannot be deposited in banks or used outside Kinderhook."},{q:"Can I convert Kinderbucks back to USD?",a:"Kinderbucks are designed to circulate locally. While businesses can redeem them, individual customers are encouraged to spend them at participating businesses."},{q:"What if a business closes?",a:"Kinderbucks remain valid at all other participating businesses. The program maintains reserves to ensure stability."},{q:"How do businesses benefit?",a:"Businesses receive customers committed to spending locally, gain exposure through our directory, and become part of a community-strengthening initiative."},{q:"Is there a fee to exchange?",a:"No fees. You receive full value plus your membership bonus when exchanging USD for Kinderbucks."}].map((n,e)=>c.jsxs("div",{style:{marginBottom:"1.5rem"},children:[c.jsx("h4",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:n.q}),c.jsx("p",{style:{color:"var(--kb-gray-600)"},children:n.a})]},e))]})}),c.jsxs("section",{style:{padding:"3rem 1rem",background:"var(--kb-navy)",color:"var(--kb-white)",textAlign:"center"},children:[c.jsx("h3",{style:{marginBottom:"1rem"},children:"Ready to get started?"}),c.jsx(ue,{to:"/exchange",className:"btn btn-gold",children:"Get Your Kinderbucks"})]}),c.jsx(Xn,{})]})}const Jn={curious:{name:"Curious",threshold:1,bonus:.1,color:"#888888",bgColor:"#f0f0f0",emoji:""},hooked:{name:"Hooked",threshold:5,bonus:.15,color:"#2e7d32",bgColor:"#e8f5e9",emoji:""},lineAndSinker:{name:"Line & Sinker",threshold:10,bonus:.2,color:"#1565c0",bgColor:"#e3f2fd",emoji:""},patron:{name:"Village Patron",threshold:15,bonus:.25,color:"#c9a227",bgColor:"#fff8e1",emoji:""}};function bg(n){return n>=15?"patron":n>=10?"lineAndSinker":n>=5?"hooked":n>=1?"curious":null}function H6(n){const e=["curious","hooked","lineAndSinker","patron"],t=e.indexOf(n);return t<e.length-1?e[t+1]:null}function g0(n){const e=bg(n),t=H6(e);if(!t)return{progress:100,remaining:0,nextTier:null};const r=Jn[t],s=e?Jn[e].threshold:0,a=(n-s)/(r.threshold-s)*100;return{progress:Math.min(100,Math.max(0,a)),remaining:r.threshold-n,nextTier:r}}function K6(){const n=[{Icon:BV,title:"Bonus Exchange Rates",description:"Get up to 25% extra when converting USD to Kinderbucks. A $100 exchange becomes $125 in local spending power.",highlight:"Up to 25% bonus"},{Icon:Qt,title:"Exclusive Local Deals",description:"Participating businesses offer special discounts and promotions exclusively for Kinderhooker members.",highlight:"Member-only offers"},{Icon:xr,title:"Priority Access",description:"Higher-tier members get early access to limited events, seasonal specials, and new business openings.",highlight:"First in line"},{Icon:YV,title:"Seasonal Bonuses",description:"Extra rewards during holidays and special village events. Double check-in points, bonus exchanges, and more.",highlight:"Special events"},{Icon:UT,title:"Impact Tracking",description:"See exactly how your spending supports local businesses and contributes to the village economy.",highlight:"Track your impact"},{Icon:Si,title:"Community Recognition",description:"Village Patrons are recognized in our annual report and invited to exclusive community appreciation events.",highlight:"Be celebrated"}];return c.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[c.jsx(Yn,{}),c.jsx("section",{style:{background:"linear-gradient(135deg, var(--kb-gold-dark) 0%, var(--kb-gold) 100%)",color:"var(--kb-navy)",padding:"4rem 1rem",textAlign:"center"},children:c.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[c.jsx("div",{className:"badge badge-navy",style:{marginBottom:"1rem"},children:"OK Membership"}),c.jsx("h1",{style:{marginBottom:"1rem"},children:"Member Benefits & Rewards"}),c.jsx("p",{style:{fontSize:"1.1rem",opacity:.9},children:"The more you support local, the more you earn. It pays to be a Kinderhooker."})]})}),c.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:c.jsxs("div",{style:{maxWidth:"1100px",margin:"0 auto"},children:[c.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem",textAlign:"center"},children:"Membership Tiers"}),c.jsx("p",{style:{color:"var(--kb-gray-500)",textAlign:"center",marginBottom:"2rem"},children:"Visit more businesses to unlock better rewards"}),c.jsx("div",{style:{overflowX:"auto"},children:c.jsxs("table",{style:{minWidth:"700px"},children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{style:{width:"25%"},children:"Tier"}),c.jsx("th",{style:{width:"20%"},children:"Requirement"}),c.jsx("th",{style:{width:"20%"},children:"Exchange Bonus"}),c.jsx("th",{style:{width:"35%"},children:"Perks"})]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(Xt,{size:18,color:"#888"}),c.jsx("span",{style:{fontWeight:"600",color:"#888"},children:"Curious"})]})}),c.jsx("td",{children:"1+ businesses"}),c.jsx("td",{children:c.jsx("span",{style:{color:"#888",fontWeight:"600"},children:"10%"})}),c.jsx("td",{style:{fontSize:"0.9rem",color:"var(--kb-gray-600)"},children:"Basic exchange bonus, check-in tracking"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(xr,{size:18,color:"#2e7d32"}),c.jsx("span",{style:{fontWeight:"600",color:"#2e7d32"},children:"Hooked"})]})}),c.jsx("td",{children:"5+ businesses"}),c.jsx("td",{children:c.jsx("span",{style:{color:"#2e7d32",fontWeight:"600"},children:"15%"})}),c.jsx("td",{style:{fontSize:"0.9rem",color:"var(--kb-gray-600)"},children:"Seasonal bonus events, member deals"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(Ai,{size:18,color:"#1565c0"}),c.jsx("span",{style:{fontWeight:"600",color:"#1565c0"},children:"Line & Sinker"})]})}),c.jsx("td",{children:"10+ businesses"}),c.jsx("td",{children:c.jsx("span",{style:{color:"#1565c0",fontWeight:"600"},children:"20%"})}),c.jsx("td",{style:{fontSize:"0.9rem",color:"var(--kb-gray-600)"},children:"Priority access, exclusive events"})]}),c.jsxs("tr",{style:{background:"rgba(201, 162, 39, 0.1)"},children:[c.jsx("td",{children:c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(Ln,{size:18,color:"#c9a227"}),c.jsx("span",{style:{fontWeight:"600",color:"#c9a227"},children:"Village Patron"})]})}),c.jsx("td",{children:"15+ businesses"}),c.jsx("td",{children:c.jsx("span",{style:{color:"#c9a227",fontWeight:"600"},children:"25%"})}),c.jsx("td",{style:{fontSize:"0.9rem",color:"var(--kb-gray-600)"},children:"All perks + community recognition + VIP events"})]})]})]})}),c.jsx("div",{style:{textAlign:"center",marginTop:"2rem"},children:c.jsx(ue,{to:"/profile",className:"btn btn-primary",children:"Check My Progress"})})]})}),c.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:c.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[c.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem",textAlign:"center"},children:"All Member Benefits"}),c.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1.5rem"},children:n.map((e,t)=>c.jsx(Ee.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:t*.1},viewport:{once:!0},className:"card",children:c.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[c.jsx("div",{style:{width:"50px",height:"50px",background:"var(--kb-navy)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:c.jsx(e.Icon,{size:24,color:"var(--kb-gold)",strokeWidth:1.5})}),c.jsxs("div",{children:[c.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"0.25rem",fontSize:"1.1rem"},children:e.title}),c.jsx("span",{className:"badge badge-gold",style:{marginBottom:"0.5rem"},children:e.highlight}),c.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem",marginTop:"0.5rem"},children:e.description})]})]})},t))})]})}),c.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:c.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto",textAlign:"center"},children:[c.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"See Your Savings"}),c.jsx("p",{style:{color:"var(--kb-gray-500)",marginBottom:"2rem"},children:"Example: Exchange $100 USD"}),c.jsx("div",{className:"card",style:{padding:"2rem"},children:c.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[{tier:"Curious",bonus:10,color:"#888"},{tier:"Hooked",bonus:15,color:"#2e7d32"},{tier:"Line & Sinker",bonus:20,color:"#1565c0"},{tier:"Village Patron",bonus:25,color:"#c9a227"}].map((e,t)=>c.jsxs("div",{style:{padding:"1rem",borderRadius:"8px",background:`${e.color}10`,border:`1px solid ${e.color}30`},children:[c.jsx("div",{style:{fontSize:"0.85rem",color:e.color,fontWeight:"600"},children:e.tier}),c.jsxs("div",{style:{fontFamily:"var(--font-display)",fontSize:"1.8rem",fontWeight:"700",color:e.color},children:["$",100+e.bonus]}),c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:"in Kinderbucks"})]},t))})}),c.jsx("div",{style:{marginTop:"2rem"},children:c.jsx(ue,{to:"/exchange",className:"btn btn-gold",style:{padding:"1rem 2rem"},children:"Start Exchanging"})})]})}),c.jsxs("section",{style:{padding:"3rem 1rem",background:"var(--kb-green)",color:"var(--kb-white)",textAlign:"center"},children:[c.jsx("h3",{style:{marginBottom:"1rem"},children:"Start earning rewards today"}),c.jsx("p",{style:{opacity:.9,marginBottom:"1.5rem"},children:"Visit a participating business and scan their QR code to begin"}),c.jsx(ue,{to:"/businesses",className:"btn btn-gold",children:"Find Businesses Near You"})]}),c.jsx(Xn,{})]})}const wu="businesses";async function $b(n){const e=zt(qe,wu,n),t=await fl(e);return t.exists()?{code:t.id,...t.data()}:null}async function Vo(){const n=Is(En(qe,wu),Cs("name"));return(await yr(n)).docs.map(t=>({code:t.id,...t.data()}))}async function Lw(n,e,t){await gu(zt(qe,wu,n),{code:n,name:e,category:t,isActive:!0,checkinCount:0,createdAt:Vt()})}async function q6(n){const e=zt(qe,wu,n);await Gr(e,{checkinCount:Iy(1)})}async function G6(n,e){const t=zt(qe,wu,n);await Gr(t,{isActive:e})}const wm={food:{label:"Food & Drink",Icon:QT,color:"#e74c3c"},retail:{label:"Retail",Icon:GT,color:"#9b59b6"},services:{label:"Services",Icon:zT,color:"#3498db"},arts:{label:"Arts & Culture",Icon:qT,color:"#1abc9c"}};function Q6(){const[n,e]=N.useState([]),[t,r]=N.useState(!0),[s,a]=N.useState("all");N.useEffect(()=>{async function d(){const m=await Vo();e(m.filter(g=>g.isActive)),r(!1)}d()},[]);const l=s==="all"?n:n.filter(d=>d.category===s),f={total:n.length,food:n.filter(d=>d.category==="food").length,retail:n.filter(d=>d.category==="retail").length};return c.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[c.jsx(Yn,{}),c.jsx("section",{style:{background:"var(--kb-navy)",color:"var(--kb-white)",padding:"4rem 1rem",textAlign:"center"},children:c.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[c.jsx("h1",{style:{marginBottom:"1rem"},children:"For Local Businesses"}),c.jsx("p",{style:{color:"var(--kb-gray-300)",fontSize:"1.1rem",marginBottom:"2rem"},children:"Join the Kinderbucks network and connect with customers committed to shopping local"}),c.jsx(ue,{to:"/admin/businesses",className:"btn btn-gold",children:"Register Your Business"})]})}),c.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:c.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[c.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem",textAlign:"center"},children:"Why Accept Kinderbucks?"}),c.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"2rem"},children:[{Icon:Si,title:"Committed Customers",description:"Kinderbucks holders have already decided to spend locally. They're not comparison shopping online."},{Icon:xM,title:"Money Stays Local",description:"Unlike credit cards that send fees elsewhere, Kinderbucks keep circulating in our village economy."},{Icon:dM,title:"Free Marketing",description:"Get listed in our business directory, featured on our homepage, and promoted to all members."},{Icon:WM,title:"Community Standing",description:"Show customers you're invested in Kinderhook's future. Participating businesses are community leaders."},{Icon:My,title:"Easy Redemption",description:"Redeem Kinderbucks for USD at any time through our simple merchant portal. No waiting."},{Icon:UT,title:"Customer Insights",description:"Access check-in data and understand your customers' behavior across the village."}].map((d,m)=>c.jsxs(Ee.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:m*.1},viewport:{once:!0},className:"card",style:{textAlign:"center"},children:[c.jsx("div",{style:{width:"60px",height:"60px",background:"var(--kb-navy)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:c.jsx(d.Icon,{size:28,color:"var(--kb-gold)",strokeWidth:1.5})}),c.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:d.title}),c.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem"},children:d.description})]},m))})]})}),c.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:c.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[c.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem",textAlign:"center"},children:"How It Works"}),c.jsx("div",{style:{display:"grid",gap:"1.5rem"},children:[{step:1,title:"Register",desc:"Sign up as a participating business. It's free to join."},{step:2,title:"Get Your QR Code",desc:"We'll provide a unique check-in QR code for your location."},{step:3,title:"Display It",desc:"Put the QR code at your counter or entrance for customers to scan."},{step:4,title:"Accept Kinderbucks",desc:"Take Kinderbucks as payment, just like cash. Same denominations."},{step:5,title:"Redeem Anytime",desc:"Exchange accumulated Kinderbucks back to USD when you need."}].map((d,m)=>c.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center",background:"var(--kb-white)",padding:"1.5rem",borderRadius:"12px",boxShadow:"var(--shadow-sm)"},children:[c.jsx("div",{style:{width:"40px",height:"40px",background:"var(--kb-gold)",color:"var(--kb-navy)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"700",flexShrink:0},children:d.step}),c.jsxs("div",{children:[c.jsx("h4",{style:{color:"var(--kb-navy)",marginBottom:"0.25rem"},children:d.title}),c.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem",margin:0},children:d.desc})]})]},m))})]})}),c.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:c.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[c.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem",textAlign:"center"},children:"Participating Businesses"}),c.jsxs("p",{style:{color:"var(--kb-gray-500)",textAlign:"center",marginBottom:"2rem"},children:[f.total," businesses currently accepting Kinderbucks"]}),c.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center",marginBottom:"2rem",flexWrap:"wrap"},children:[c.jsxs("button",{onClick:()=>a("all"),className:s==="all"?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem"},children:["All (",f.total,")"]}),Object.entries(wm).map(([d,m])=>c.jsxs("button",{onClick:()=>a(d),className:s===d?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem",display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(m.Icon,{size:16})," ",m.label]},d))]}),t?c.jsx("p",{style:{textAlign:"center"},children:"Loading businesses..."}):l.length===0?c.jsxs("p",{style:{textAlign:"center",color:"var(--kb-gray-500)"},children:["No businesses found. ",c.jsx(ue,{to:"/admin/businesses",children:"Add some!"})]}):c.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:"1rem"},children:l.map((d,m)=>{const g=wm[d.category]||wm.services;return c.jsxs(Ee.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:m*.03},className:"card",style:{padding:"1.25rem"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[c.jsx("div",{style:{width:"40px",height:"40px",background:`${g.color}15`,borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsx(g.Icon,{size:20,color:g.color,strokeWidth:1.5})}),c.jsxs("div",{children:[c.jsx("h4",{style:{color:"var(--kb-navy)",margin:0,fontSize:"1rem"},children:d.name}),c.jsx("span",{style:{fontSize:"0.8rem",color:g.color},children:g.label})]})]}),d.checkinCount>0&&c.jsxs("div",{style:{marginTop:"0.75rem",fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:[d.checkinCount," check-ins"]})]},d.code)})})]})}),c.jsxs("section",{style:{padding:"3rem 1rem",background:"var(--kb-gold)",color:"var(--kb-navy)",textAlign:"center"},children:[c.jsx("h3",{style:{marginBottom:"1rem"},children:"Ready to join the network?"}),c.jsx("p",{style:{opacity:.9,marginBottom:"1.5rem"},children:"Registration is free. Start accepting Kinderbucks today."}),c.jsx(ue,{to:"/admin/businesses",className:"btn btn-primary",children:"Register Your Business"})]}),c.jsx(Xn,{})]})}const Wb="members";function Ig(){return Co.currentUser?Co.currentUser.uid:tu()}function tu(){let n=localStorage.getItem("kinderhooker_visitor_id");return n||(n="anon_"+Math.random().toString(36).substring(2,15),localStorage.setItem("kinderhooker_visitor_id",n)),n}async function Za(n){const e=zt(qe,Wb,n),t=await fl(e);return t.exists()?{visitorId:t.id,...t.data()}:null}async function Y6(n,e){const t=zt(qe,Wb,n),r=await fl(t);if(r.exists()){const s=r.data(),a=s.businessesVisited||[],l=!a.includes(e),f=l?a.length+1:a.length,d=bg(f),m=d!==s.tier;return await Gr(t,{businessesVisited:nV(e),totalCheckins:Iy(1),tier:d,lastCheckin:Vt()}),{isNewBusiness:l,tierChanged:m,oldTier:s.tier,newTier:d,businessesVisited:l?[...a,e]:a,totalCheckins:(s.totalCheckins||0)+1}}else{const s=bg(1);return await gu(t,{visitorId:n,tier:s,businessesVisited:[e],totalCheckins:1,createdAt:Vt(),lastCheckin:Vt(),email:null}),{isNewBusiness:!0,tierChanged:!0,oldTier:null,newTier:s,businessesVisited:[e],totalCheckins:1}}}const X6={curious:Xt,hooked:xr,lineAndSinker:Ai,patron:Ln};function J6(){const[n,e]=N.useState(null),[t,r]=N.useState(!0),[s,a]=N.useState(20),[l,f]=N.useState(!1),[d,m]=N.useState(!1);N.useEffect(()=>{async function V(){const B=tu(),P=await Za(B);e(P),r(!1)}V()},[]);const g=(n==null?void 0:n.tier)||"curious",v=Jn[g]||Jn.curious,w=n?v.bonus:.1,T=s*w,k=s+T,C=async()=>{f(!0);try{await Dy(En(qe,"exchanges"),{visitorId:tu(),usdAmount:s,bonusRate:w,bonusAmount:T,kinderbucksAmount:k,tier:g,status:"pending",createdAt:Vt()}),m(!0)}catch(V){console.error("Exchange error:",V),alert("Error submitting exchange request")}f(!1)},I=[10,20,50,100];return c.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[c.jsx(Yn,{}),c.jsx("section",{style:{background:"linear-gradient(135deg, var(--kb-green) 0%, var(--kb-green-light) 100%)",color:"var(--kb-white)",padding:"3rem 1rem",textAlign:"center"},children:c.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto"},children:[c.jsx("h1",{style:{marginBottom:"0.5rem"},children:"Get Kinderbucks"}),c.jsx("p",{style:{opacity:.9},children:"Exchange USD for local currency with bonus value"})]})}),c.jsx("section",{style:{padding:"3rem 1rem",background:"var(--kb-cream)",flex:1},children:c.jsx("div",{style:{maxWidth:"500px",margin:"0 auto"},children:d?c.jsxs(Ee.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"card",style:{textAlign:"center",padding:"3rem 2rem"},children:[c.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:""}),c.jsx("h2",{style:{color:"var(--kb-green)",marginBottom:"1rem"},children:"Exchange Requested!"}),c.jsxs("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem"},children:["Your exchange request for ",c.jsxs("strong",{children:["$",s," USD"]})," "," ",c.jsxs("strong",{children:["$",k.toFixed(2)," Kinderbucks"]})," has been submitted."]}),c.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem",marginBottom:"2rem"},children:"Visit any exchange point to complete your transaction and receive your Kinderbucks."}),c.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[c.jsx("button",{onClick:()=>m(!1),className:"btn btn-primary",children:"Exchange More"}),c.jsx(ue,{to:"/account",className:"btn btn-secondary",children:"View Account"})]})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[c.jsxs("div",{children:[c.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)",marginBottom:"0.25rem"},children:"Your Tier"}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(()=>{const V=X6[g]||Xt;return c.jsx(V,{size:28,color:v.color,strokeWidth:1.5})})(),c.jsx("span",{style:{fontWeight:"600",color:v.color,fontSize:"1.2rem"},children:v.name})]})]}),c.jsxs("div",{style:{textAlign:"right"},children:[c.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)",marginBottom:"0.25rem"},children:"Bonus Rate"}),c.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:v.color},children:[Math.round(w*100),"%"]})]})]}),!n&&c.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"var(--kb-gray-50)",borderRadius:"8px",fontSize:"0.85rem",color:"var(--kb-gray-600)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(nM,{size:16,color:"var(--kb-gold)"})," ",c.jsx(ue,{to:"/profile",style:{color:"var(--kb-navy)"},children:"Visit businesses"})," to increase your tier and get better rates!"]})]}),c.jsxs("div",{className:"card",children:[c.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem"},children:"Exchange Calculator"}),c.jsxs("div",{style:{marginBottom:"1.5rem"},children:[c.jsx("label",{children:"Amount (USD)"}),c.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem"},children:I.map(V=>c.jsxs("button",{onClick:()=>a(V),className:s===V?"btn btn-primary":"btn btn-secondary",style:{flex:1,padding:"0.5rem"},children:["$",V]},V))}),c.jsx("input",{type:"number",value:s,onChange:V=>a(Math.max(1,Number(V.target.value))),min:"1",style:{width:"100%"}})]}),c.jsxs("div",{style:{background:"var(--kb-gray-50)",borderRadius:"12px",padding:"1.5rem",marginBottom:"1.5rem"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.75rem"},children:[c.jsx("span",{style:{color:"var(--kb-gray-600)"},children:"USD Amount"}),c.jsxs("span",{style:{fontWeight:"600"},children:["$",s.toFixed(2)]})]}),c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.75rem"},children:[c.jsxs("span",{style:{color:"var(--kb-gray-600)"},children:[v.name," Bonus (",Math.round(w*100),"%)"]}),c.jsxs("span",{style:{fontWeight:"600",color:"var(--kb-green)"},children:["+$",T.toFixed(2)]})]}),c.jsx("div",{className:"divider",style:{margin:"0.75rem 0"}}),c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[c.jsx("span",{style:{color:"var(--kb-navy)",fontWeight:"600"},children:"You Receive"}),c.jsxs("span",{style:{fontFamily:"var(--font-display)",fontSize:"1.8rem",fontWeight:"700",color:"var(--kb-gold-dark)"},children:["$",k.toFixed(2)]})]}),c.jsx("div",{style:{textAlign:"right",fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Kinderbucks"})]}),c.jsx("button",{onClick:C,disabled:l,className:"btn btn-gold",style:{width:"100%",padding:"1rem",fontSize:"1.1rem"},children:l?"Processing...":`Exchange $${s} for $${k.toFixed(2)} Kinderbucks`}),c.jsx("p",{style:{textAlign:"center",fontSize:"0.85rem",color:"var(--kb-gray-500)",marginTop:"1rem"},children:"Complete your exchange at any participating business or exchange point"})]}),c.jsxs("div",{className:"card",style:{marginTop:"1.5rem"},children:[c.jsx("h4",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Exchange Locations"}),c.jsxs("div",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem"},children:[c.jsxs("p",{style:{marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(Pc,{size:16,color:"var(--kb-green)"})," ",c.jsx("strong",{children:"OK Pantry"})," - 2 Hudson Street"]}),c.jsxs("p",{style:{marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(Pc,{size:16,color:"var(--kb-green)"})," ",c.jsx("strong",{children:"Community Bank NA"})," - 19 Broad Street"]}),c.jsxs("p",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(Pc,{size:16,color:"var(--kb-green)"})," ",c.jsx("strong",{children:"Village Hall"})," - During events"]})]})]})]})})}),c.jsx(Xn,{})]})}const Ow={curious:Xt,hooked:xr,lineAndSinker:Ai,patron:Ln};function Z6(){var V,B;const[n,e]=N.useState(null),[t,r]=N.useState([]),[s,a]=N.useState([]),[l,f]=N.useState(!0),[d,m]=N.useState("overview");if(N.useEffect(()=>{async function P(){const G=tu(),$=await Za(G),H=await Vo();try{const A=Is(En(qe,"exchanges"),qc("visitorId","==",G),Cs("createdAt","desc")),b=await yr(A);a(b.docs.map(j=>({id:j.id,...j.data()})))}catch(A){console.error("Error loading exchanges:",A)}e($),r(H),f(!1)}P()},[]),l)return c.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[c.jsx(Yn,{}),c.jsx("div",{className:"page page-center",style:{flex:1},children:c.jsx("div",{style:{fontSize:"2rem"},children:"Loading..."})}),c.jsx(Xn,{})]});const g=(n==null?void 0:n.tier)||null,v=g?Jn[g]:null,w=((V=n==null?void 0:n.businessesVisited)==null?void 0:V.length)||0,T=g0(w),k=((B=n==null?void 0:n.businessesVisited)==null?void 0:B.map(P=>{const G=t.find($=>$.code===P);return G?G.name:P}))||[],C=t.filter(P=>{var G;return P.isActive&&!((G=n==null?void 0:n.businessesVisited)!=null&&G.includes(P.code))}),I=s.reduce((P,G)=>P+(G.kinderbucksAmount||0),0);return c.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[c.jsx(Yn,{}),c.jsx("section",{style:{background:"var(--kb-navy)",color:"var(--kb-white)",padding:"2rem 1rem"},children:c.jsx("div",{style:{maxWidth:"800px",margin:"0 auto"},children:c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[c.jsx("div",{style:{width:"80px",height:"80px",background:v?v.color:"var(--kb-gray-500)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:(()=>{const P=g&&Ow[g]?Ow[g]:Xt;return c.jsx(P,{size:40,color:"white",strokeWidth:1.5})})()}),c.jsxs("div",{style:{flex:1},children:[c.jsx("div",{style:{fontSize:"0.9rem",color:"var(--kb-gray-300)",marginBottom:"0.25rem"},children:"OK Membership"}),c.jsx("h1",{style:{fontSize:"1.5rem",marginBottom:"0.25rem"},children:v?v.name:"New Member"}),c.jsx("div",{style:{fontSize:"0.9rem",color:"var(--kb-gold)"},children:v?`${Math.round(v.bonus*100)}% Exchange Bonus`:"Start exploring to earn rewards"})]}),c.jsx(ue,{to:"/exchange",className:"btn btn-gold",children:"Get Kinderbucks"})]})})}),c.jsx("div",{style:{background:"var(--kb-white)",borderBottom:"1px solid var(--kb-gray-200)",position:"sticky",top:"70px",zIndex:50},children:c.jsx("div",{style:{maxWidth:"800px",margin:"0 auto",display:"flex",gap:"2rem",padding:"0 1rem"},children:["overview","progress","history"].map(P=>c.jsx("button",{onClick:()=>m(P),style:{background:"none",border:"none",padding:"1rem 0",fontSize:"0.95rem",fontWeight:d===P?"600":"400",color:d===P?"var(--kb-navy)":"var(--kb-gray-500)",borderBottom:d===P?"2px solid var(--kb-gold)":"2px solid transparent",cursor:"pointer",textTransform:"capitalize"},children:P},P))})}),c.jsx("section",{style:{padding:"2rem 1rem",background:"var(--kb-cream)",flex:1},children:c.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[d==="overview"&&c.jsxs(Ee.div,{initial:{opacity:0},animate:{opacity:1},children:[c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[c.jsxs("div",{className:"card",style:{textAlign:"center"},children:[c.jsx("div",{className:"stat-value",children:w}),c.jsx("div",{className:"stat-label",children:"Businesses Visited"})]}),c.jsxs("div",{className:"card",style:{textAlign:"center"},children:[c.jsx("div",{className:"stat-value",children:(n==null?void 0:n.totalCheckins)||0}),c.jsx("div",{className:"stat-label",children:"Total Check-ins"})]}),c.jsxs("div",{className:"card",style:{textAlign:"center"},children:[c.jsxs("div",{className:"stat-value",style:{color:"var(--kb-gold)"},children:["$",I.toFixed(0)]}),c.jsx("div",{className:"stat-label",children:"Kinderbucks Exchanged"})]})]}),c.jsxs("div",{className:"card",children:[c.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Quick Actions"}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"0.75rem"},children:[c.jsxs(ue,{to:"/exchange",className:"btn btn-gold",style:{textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[c.jsx(My,{size:18})," Exchange"]}),c.jsxs(ue,{to:"/businesses",className:"btn btn-secondary",style:{textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[c.jsx(Qt,{size:18})," Find Businesses"]}),c.jsxs(ue,{to:"/benefits",className:"btn btn-secondary",style:{textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[c.jsx(hf,{size:18})," View Benefits"]})]})]})]}),d==="progress"&&c.jsxs(Ee.div,{initial:{opacity:0},animate:{opacity:1},children:[v&&c.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[c.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Tier Progress"}),T.nextTier?c.jsxs(c.Fragment,{children:[c.jsxs("div",{style:{marginBottom:"0.5rem"},children:[c.jsx("span",{style:{color:v.color,fontWeight:"600"},children:v.name}),c.jsx("span",{style:{color:"var(--kb-gray-400)",margin:"0 0.5rem"},children:""}),c.jsx("span",{style:{color:T.nextTier.color,fontWeight:"600"},children:T.nextTier.name})]}),c.jsx("div",{className:"progress-bar",style:{height:"12px",marginBottom:"0.5rem"},children:c.jsx("div",{className:"progress-bar-fill",style:{width:`${T.progress}%`,background:v.color}})}),c.jsxs("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:[T.remaining," more business",T.remaining!==1?"es":""," to reach ",T.nextTier.name]})]}):c.jsxs("p",{style:{color:"var(--kb-gold)",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(Ln,{size:20})," Maximum tier reached! You're a Village Patron!"]})]}),c.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[c.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(Gc,{size:20,color:"var(--kb-green)"})," Businesses Visited (",k.length,")"]}),k.length>0?c.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:k.map((P,G)=>c.jsxs("span",{style:{background:"#d4edda",color:"var(--kb-green)",padding:"0.4rem 0.75rem",borderRadius:"100px",fontSize:"0.85rem",display:"inline-flex",alignItems:"center",gap:"0.25rem"},children:[c.jsx(Gc,{size:14})," ",P]},G))}):c.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"No businesses visited yet"})]}),C.length>0&&c.jsxs("div",{className:"card",children:[c.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx($T,{size:20,color:"var(--kb-navy)"})," Still to Explore (",C.length,")"]}),c.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:[C.slice(0,12).map(P=>c.jsx("span",{style:{background:"var(--kb-gray-100)",color:"var(--kb-gray-600)",padding:"0.4rem 0.75rem",borderRadius:"100px",fontSize:"0.85rem"},children:P.name},P.code)),C.length>12&&c.jsxs("span",{style:{color:"var(--kb-gray-500)",padding:"0.4rem"},children:["+",C.length-12," more"]})]})]})]}),d==="history"&&c.jsx(Ee.div,{initial:{opacity:0},animate:{opacity:1},children:c.jsxs("div",{className:"card",children:[c.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Exchange History"}),s.length>0?c.jsx("div",{children:s.map((P,G)=>{var $,H,A,b;return c.jsxs("div",{style:{padding:"1rem 0",borderBottom:G<s.length-1?"1px solid var(--kb-gray-100)":"none",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[c.jsxs("div",{children:[c.jsxs("div",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:["$",P.usdAmount,"  $",($=P.kinderbucksAmount)==null?void 0:$.toFixed(2)," KB"]}),c.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:[((b=(A=(H=P.createdAt)==null?void 0:H.toDate)==null?void 0:A.call(H))==null?void 0:b.toLocaleDateString())||"Pending","  ",Math.round(P.bonusRate*100),"% bonus"]})]}),c.jsx("span",{className:"badge",style:{background:P.status==="completed"?"#d4edda":"#fff3cd",color:P.status==="completed"?"var(--kb-green)":"#856404"},children:P.status})]},P.id)})}):c.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"var(--kb-gray-500)"},children:[c.jsx("p",{style:{marginBottom:"1rem"},children:"No exchanges yet"}),c.jsx(ue,{to:"/exchange",className:"btn btn-gold",children:"Make Your First Exchange"})]})]})})]})}),c.jsx(Xn,{})]})}const Bw={curious:Xt,hooked:xr,lineAndSinker:Ai,patron:Ln},gc={curious:"#888888",hooked:"#2e7d32",lineAndSinker:"#1565c0",patron:"#c9a227"};function eB(){var C,I;const{user:n,profile:e,isAuthenticated:t}=Do(),[r,s]=N.useState(null),[a,l]=N.useState([]),[f,d]=N.useState(!0);N.useEffect(()=>{async function V(){const B=Ig(),P=await Za(B),G=await Vo();s(P),l(G.filter($=>$.isActive)),d(!1)}V()},[n]);const m=(r==null?void 0:r.tier)||"curious",g=Jn[m],v=((C=r==null?void 0:r.businessesVisited)==null?void 0:C.length)||0,w=g0(v),T=((I=r==null?void 0:r.businessesVisited)==null?void 0:I.map(V=>{const B=a.find(P=>P.code===V);return B?B.name:V}))||[],k=a.filter(V=>{var B;return!((B=r==null?void 0:r.businessesVisited)!=null&&B.includes(V.code))});return c.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[c.jsx(Yn,{}),c.jsx("main",{style:{flex:1,background:"var(--kb-cream)",padding:"2rem 1rem"},children:c.jsx("div",{style:{maxWidth:"600px",margin:"0 auto"},children:f?c.jsx("div",{style:{textAlign:"center",padding:"4rem 0"},children:c.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading your profile..."})}):r?c.jsxs(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[t&&e&&c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1.5rem",padding:"1rem",background:"white",borderRadius:"12px"},children:[c.jsx("div",{style:{width:"48px",height:"48px",background:"var(--kb-gray-100)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsx(Ba,{size:24,color:"var(--kb-gray-500)"})}),c.jsxs("div",{children:[c.jsx("div",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:e.displayName||n.email}),c.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:n.email})]})]}),c.jsxs(Ee.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.1},style:{background:`linear-gradient(135deg, ${gc[m]} 0%, ${gc[m]}dd 100%)`,borderRadius:"20px",padding:"2rem",color:"white",textAlign:"center",marginBottom:"1.5rem",boxShadow:"0 4px 20px rgba(0,0,0,0.2)"},children:[(()=>{const V=Bw[m]||Xt;return c.jsx(V,{size:48,color:"white",strokeWidth:1.5,style:{marginBottom:"0.5rem"}})})(),c.jsx("div",{style:{fontSize:"1.8rem",fontWeight:"bold",marginBottom:"0.25rem"},children:g.name}),c.jsxs("div",{style:{opacity:.9,fontSize:"1rem"},children:[Math.round(g.bonus*100),"% Kinderbuck Exchange Bonus"]})]}),c.jsxs(ue,{to:"/card",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",width:"100%",padding:"1.25rem",background:"linear-gradient(135deg, var(--kb-gold) 0%, #d4af37 100%)",color:"var(--kb-navy)",borderRadius:"16px",fontSize:"1.25rem",fontWeight:"700",textDecoration:"none",marginBottom:"1.5rem",boxShadow:"0 4px 12px rgba(201, 162, 39, 0.3)"},children:[c.jsx(eg,{size:28}),"SHOW MY OK CARD"]}),c.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[c.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",textAlign:"center"},children:[v," Business",v!==1?"es":""," Visited"]}),w.nextTier?c.jsxs(c.Fragment,{children:[c.jsx("div",{style:{background:"var(--kb-gray-100)",borderRadius:"10px",height:"28px",overflow:"hidden",marginBottom:"0.75rem"},children:c.jsxs(Ee.div,{initial:{width:0},animate:{width:`${w.progress}%`},transition:{delay:.3,duration:.8},style:{background:`linear-gradient(90deg, ${gc[m]}, ${w.nextTier.color})`,height:"100%",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"0.85rem",fontWeight:"bold"},children:[v,"/",w.nextTier.threshold]})}),c.jsxs("p",{style:{color:"var(--kb-gray-600)",textAlign:"center"},children:[c.jsx("strong",{children:w.remaining})," more to reach"," ",c.jsx("strong",{style:{color:w.nextTier.color},children:w.nextTier.name})]})]}):c.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",color:"var(--kb-gold-dark)",fontWeight:"600"},children:[c.jsx(Ln,{size:20})," Maximum tier reached! You're a true Village Patron!"]})]}),T.length>0&&c.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[c.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(Gc,{size:20,color:"var(--kb-green)"})," Visited"]}),c.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:T.map((V,B)=>c.jsxs("span",{style:{padding:"0.4rem 0.8rem",background:"#e8f5e9",borderRadius:"6px",color:"#2e7d32",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:[c.jsx(Gc,{size:14})," ",V]},B))})]}),k.length>0&&c.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[c.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx($T,{size:20})," Still to Explore (",k.length,")"]}),c.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:[k.slice(0,10).map(V=>c.jsx("span",{style:{padding:"0.4rem 0.8rem",background:"var(--kb-gray-100)",borderRadius:"6px",color:"var(--kb-gray-600)",fontSize:"0.9rem"},children:V.name},V.code)),k.length>10&&c.jsxs("span",{style:{padding:"0.4rem 0.8rem",color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:["+",k.length-10," more"]})]}),c.jsxs(ue,{to:"/businesses",style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",marginTop:"1rem",color:"var(--kb-navy)",fontWeight:"500",fontSize:"0.9rem"},children:["View all businesses ",c.jsx(Zm,{size:16})]})]}),c.jsxs("div",{style:{textAlign:"center",color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:["Total check-ins: ",r.totalCheckins||0]}),!t&&c.jsxs("div",{style:{marginTop:"2rem",padding:"1rem",background:"rgba(201, 162, 39, 0.1)",borderRadius:"12px",textAlign:"center"},children:[c.jsx("p",{style:{color:"var(--kb-gray-700)",marginBottom:"0.75rem"},children:"Sign in to save your progress across devices"}),c.jsxs(ue,{to:"/login",className:"btn btn-gold",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(Xa,{size:18})," Sign In"]})]})]}):c.jsxs(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[c.jsxs("div",{className:"card",style:{padding:"2rem",textAlign:"center",marginBottom:"2rem"},children:[c.jsx("div",{style:{width:"80px",height:"80px",background:"linear-gradient(135deg, var(--kb-navy) 0%, var(--kb-navy-light) 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.5rem"},children:c.jsx(hf,{size:36,color:"var(--kb-gold)"})}),c.jsx("h1",{style:{color:"var(--kb-navy)",marginBottom:"0.75rem"},children:"Welcome to Kinderbucks!"}),c.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem",fontSize:"1.05rem"},children:"You haven't checked in anywhere yet. Visit a local business and scan their QR code to start building your Kinderhooker status!"}),!t&&c.jsxs("div",{style:{background:"rgba(201, 162, 39, 0.1)",borderRadius:"12px",padding:"1rem",marginBottom:"1.5rem"},children:[c.jsx("p",{style:{color:"var(--kb-gray-700)",fontSize:"0.9rem",marginBottom:"0.75rem"},children:"Sign in to save your progress across devices"}),c.jsxs(ue,{to:"/login",className:"btn btn-gold",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(Xa,{size:18})," Sign In or Create Account"]})]}),c.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap",justifyContent:"center"},children:[c.jsxs(ue,{to:"/businesses",className:"btn btn-primary",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(Pc,{size:18})," Find Businesses"]}),c.jsxs(ue,{to:"/card",className:"btn btn-gold",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(eg,{size:18})," View My Card"]})]})]}),c.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[c.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",textAlign:"center"},children:"How to Get Started"}),c.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[{step:1,text:"Visit any participating Kinderhook business",icon:Qt},{step:2,text:"Scan their check-in QR code with your phone",icon:Xt},{step:3,text:"Build your tier to unlock better exchange rates",icon:pl}].map(V=>c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[c.jsx("div",{style:{width:"44px",height:"44px",background:"var(--kb-navy)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:c.jsx(V.icon,{size:20,color:"var(--kb-gold)"})}),c.jsx("div",{style:{color:"var(--kb-gray-700)"},children:V.text})]},V.step))})]}),c.jsxs("div",{style:{marginTop:"2rem"},children:[c.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",textAlign:"center"},children:"Tier Rewards"}),c.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.75rem"},children:Object.entries(Jn).map(([V,B])=>{const P=Bw[V];return c.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"1rem",textAlign:"center",border:"1px solid var(--kb-gray-200)"},children:[c.jsx(P,{size:24,color:gc[V],style:{marginBottom:"0.5rem"}}),c.jsx("div",{style:{fontWeight:"600",color:gc[V],marginBottom:"0.25rem"},children:B.name}),c.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:[Math.round(B.bonus*100),"% bonus"]})]},V)})})]})]})})}),c.jsx(Xn,{})]})}function tB(){var V,B;const[n,e]=N.useState("login"),[t,r]=N.useState(""),[s,a]=N.useState(""),[l,f]=N.useState(""),[d,m]=N.useState(""),[g,v]=N.useState(!1),w=ru(),T=er(),{isAuthenticated:k}=Do(),C=((B=(V=T.state)==null?void 0:V.from)==null?void 0:B.pathname)||"/profile",I=async P=>{P.preventDefault(),m(""),v(!0);try{if(n==="signup"){if(!l.trim()){m("Please enter your name"),v(!1);return}await uV(t,s,l)}else await dV(t,s);w(C,{replace:!0})}catch(G){console.error("Auth error:",G),G.code==="auth/email-already-in-use"?m("An account with this email already exists"):G.code==="auth/weak-password"?m("Password should be at least 6 characters"):G.code==="auth/invalid-email"?m("Please enter a valid email address"):G.code==="auth/user-not-found"||G.code==="auth/wrong-password"||G.code==="auth/invalid-credential"?m("Invalid email or password"):m("Something went wrong. Please try again.")}v(!1)};return c.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[c.jsx(Yn,{}),c.jsx("section",{style:{flex:1,background:"linear-gradient(180deg, var(--kb-cream) 0%, var(--kb-white) 100%)",padding:"3rem 1rem",display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsxs(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{width:"100%",maxWidth:"420px"},children:[c.jsxs("div",{className:"card",style:{padding:"2rem"},children:[c.jsxs("div",{style:{display:"flex",marginBottom:"2rem",background:"var(--kb-gray-100)",borderRadius:"10px",padding:"4px"},children:[c.jsxs("button",{onClick:()=>{e("login"),m("")},style:{flex:1,padding:"0.75rem",border:"none",borderRadius:"8px",background:n==="login"?"white":"transparent",color:n==="login"?"var(--kb-navy)":"var(--kb-gray-500)",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",boxShadow:n==="login"?"0 1px 3px rgba(0,0,0,0.1)":"none",transition:"all 0.2s"},children:[c.jsx(Xa,{size:18})," Sign In"]}),c.jsxs("button",{onClick:()=>{e("signup"),m("")},style:{flex:1,padding:"0.75rem",border:"none",borderRadius:"8px",background:n==="signup"?"white":"transparent",color:n==="signup"?"var(--kb-navy)":"var(--kb-gray-500)",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",boxShadow:n==="signup"?"0 1px 3px rgba(0,0,0,0.1)":"none",transition:"all 0.2s"},children:[c.jsx(w_,{size:18})," Sign Up"]})]}),c.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[c.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:n==="login"?"Welcome Back":"Join Kinderbucks"}),c.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.95rem"},children:n==="login"?"Sign in to access your account":"Create an account to track your Kinderhooker status"})]}),d&&c.jsxs(Ee.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},style:{background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",padding:"0.75rem 1rem",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem",color:"#dc2626",fontSize:"0.9rem"},children:[c.jsx(Oy,{size:18}),d]}),c.jsxs("form",{onSubmit:I,children:[n==="signup"&&c.jsxs("div",{style:{marginBottom:"1rem"},children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Your Name"}),c.jsxs("div",{style:{position:"relative"},children:[c.jsx(Ba,{size:18,color:"var(--kb-gray-400)",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)"}}),c.jsx("input",{type:"text",value:l,onChange:P=>f(P.target.value),placeholder:"Jane Smith",style:{width:"100%",paddingLeft:"40px"},required:n==="signup"})]})]}),c.jsxs("div",{style:{marginBottom:"1rem"},children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Email"}),c.jsxs("div",{style:{position:"relative"},children:[c.jsx(KT,{size:18,color:"var(--kb-gray-400)",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)"}}),c.jsx("input",{type:"email",value:t,onChange:P=>r(P.target.value),placeholder:"you@example.com",style:{width:"100%",paddingLeft:"40px"},required:!0})]})]}),c.jsxs("div",{style:{marginBottom:"1.5rem"},children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Password"}),c.jsxs("div",{style:{position:"relative"},children:[c.jsx(sM,{size:18,color:"var(--kb-gray-400)",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)"}}),c.jsx("input",{type:"password",value:s,onChange:P=>a(P.target.value),placeholder:"",style:{width:"100%",paddingLeft:"40px"},required:!0,minLength:6})]}),n==="signup"&&c.jsx("p",{style:{marginTop:"0.5rem",fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:"At least 6 characters"})]}),c.jsx("button",{type:"submit",className:"btn btn-gold",disabled:g,style:{width:"100%",padding:"0.875rem",fontSize:"1rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:g?c.jsxs(c.Fragment,{children:[c.jsx(By,{size:20,className:"animate-spin",style:{animation:"spin 1s linear infinite"}}),n==="login"?"Signing in...":"Creating account..."]}):c.jsxs(c.Fragment,{children:[n==="login"?c.jsx(Xa,{size:20}):c.jsx(w_,{size:20}),n==="login"?"Sign In":"Create Account"]})})]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",margin:"1.5rem 0",gap:"1rem"},children:[c.jsx("div",{style:{flex:1,height:"1px",background:"var(--kb-gray-200)"}}),c.jsx("span",{style:{color:"var(--kb-gray-400)",fontSize:"0.85rem"},children:"or"}),c.jsx("div",{style:{flex:1,height:"1px",background:"var(--kb-gray-200)"}})]}),c.jsxs("button",{type:"button",onClick:async()=>{m(""),v(!0);try{await hV(),w(C,{replace:!0})}catch(P){console.error("Google sign-in error:",P),P.code==="auth/popup-closed-by-user"?m("Sign-in cancelled"):m("Could not sign in with Google. Please try again.")}v(!1)},disabled:g,style:{width:"100%",padding:"0.75rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",background:"white",border:"1px solid var(--kb-gray-300)",borderRadius:"8px",cursor:"pointer",fontSize:"0.95rem",fontWeight:"500",color:"var(--kb-gray-700)",transition:"all 0.2s"},children:[c.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",children:[c.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),c.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),c.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),c.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),c.jsx("div",{style:{marginTop:"1rem"},children:c.jsx(ue,{to:"/profile",style:{display:"block",textAlign:"center",color:"var(--kb-gray-500)",fontSize:"0.85rem",textDecoration:"none"},children:"Continue as guest (limited features)"})})]}),c.jsx("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"rgba(201, 162, 39, 0.1)",borderRadius:"12px",textAlign:"center"},children:c.jsx("p",{style:{color:"var(--kb-gray-700)",fontSize:"0.9rem",margin:0},children:"Create an account to sync your Kinderhooker status across devices and never lose your tier progress!"})})]})}),c.jsx(Xn,{}),c.jsx("style",{children:`
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
      `})]})}const nB={curious:Xt,hooked:xr,lineAndSinker:Ai,patron:Ln},rB={curious:{primary:"#6b7280",secondary:"#9ca3af",bg:"#f3f4f6"},hooked:{primary:"#16a34a",secondary:"#22c55e",bg:"#dcfce7"},lineAndSinker:{primary:"#2563eb",secondary:"#3b82f6",bg:"#dbeafe"},patron:{primary:"#ca8a04",secondary:"#eab308",bg:"#fef3c7"}};function iB(){var k;const{user:n,profile:e,isAuthenticated:t}=Do(),[r,s]=N.useState(null),[a,l]=N.useState(!0);N.useEffect(()=>{async function C(){const I=Ig(),V=await Za(I);s(V),l(!1)}C()},[n]);const f=(r==null?void 0:r.tier)||"curious",d=Jn[f],m=rB[f],g=nB[f],v=((k=r==null?void 0:r.businessesVisited)==null?void 0:k.length)||0,w=Ig(),T=w?w.substring(0,8).toUpperCase():"GUEST";return a?c.jsx("div",{style:{minHeight:"100vh",background:"var(--kb-navy)",display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsx("div",{style:{color:"white",fontSize:"1.5rem"},children:"Loading..."})}):c.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(180deg, var(--kb-navy) 0%, #1a3a5c 100%)",padding:"1rem",display:"flex",flexDirection:"column"},children:[c.jsxs(ue,{to:"/",style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",color:"white",opacity:.8,textDecoration:"none",fontSize:"1.1rem",marginBottom:"1rem"},children:[c.jsx(jV,{size:24})," Back"]}),c.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsxs(Ee.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},style:{width:"100%",maxWidth:"400px"},children:[c.jsxs("div",{style:{background:"white",borderRadius:"24px",overflow:"hidden",boxShadow:"0 20px 60px rgba(0,0,0,0.3)"},children:[c.jsxs("div",{style:{background:`linear-gradient(135deg, ${m.primary} 0%, ${m.secondary} 100%)`,padding:"2rem",textAlign:"center",color:"white"},children:[c.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"0.75rem"},children:c.jsx("div",{style:{width:"70px",height:"70px",background:"rgba(255,255,255,0.2)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsx(g,{size:40,strokeWidth:1.5})})}),c.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",marginBottom:"0.25rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:d.name}),c.jsxs("div",{style:{fontSize:"1.1rem",opacity:.9},children:[Math.round(d.bonus*100),"% Exchange Bonus"]})]}),c.jsxs("div",{style:{padding:"2rem",textAlign:"center"},children:[t&&(e==null?void 0:e.displayName)&&c.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"600",color:"var(--kb-navy)",marginBottom:"0.5rem"},children:e.displayName}),c.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:m.bg,borderRadius:"100px",color:m.primary,fontWeight:"600",fontSize:"1rem",marginBottom:"1.5rem"},children:[c.jsx(hf,{size:18}),"OK Member"]}),c.jsxs("div",{style:{background:"#f8f9fa",borderRadius:"16px",padding:"1.5rem",marginBottom:"1.5rem"},children:[c.jsx(Fh,{value:`kinderbucks:member:${w}:${f}`,size:160,level:"M",style:{display:"block",margin:"0 auto"}}),c.jsx("div",{style:{marginTop:"1rem",fontFamily:"monospace",fontSize:"1.2rem",fontWeight:"600",color:"var(--kb-navy)",letterSpacing:"0.1em"},children:T}),c.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)",marginTop:"0.25rem"},children:"Show this to the cashier"})]}),c.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"2rem"},children:[c.jsxs("div",{children:[c.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:m.primary},children:v}),c.jsx("div",{style:{fontSize:"0.9rem",color:"var(--kb-gray-500)"},children:"Businesses"})]}),c.jsxs("div",{children:[c.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700",color:m.primary},children:[Math.round(d.bonus*100),"%"]}),c.jsx("div",{style:{fontSize:"0.9rem",color:"var(--kb-gray-500)"},children:"Bonus"})]})]})]}),c.jsxs("div",{style:{background:"var(--kb-navy)",padding:"1rem 2rem",textAlign:"center"},children:[c.jsx("div",{style:{color:"var(--kb-gold)",fontFamily:"var(--font-display)",fontWeight:"600",fontSize:"1.1rem",letterSpacing:"0.05em"},children:"KINDERBUCKS"}),c.jsx("div",{style:{color:"rgba(255,255,255,0.6)",fontSize:"0.8rem",marginTop:"0.25rem"},children:"Village of Kinderhook"})]})]}),c.jsxs("div",{style:{marginTop:"2rem",textAlign:"center",color:"rgba(255,255,255,0.7)",fontSize:"1rem",lineHeight:1.6},children:["Show this card when making a purchase",c.jsx("br",{}),"to receive your ",Math.round(d.bonus*100),"% exchange bonus!"]})]})})]})}const Eu="kinderbucks",sB="scans";async function oB(n){const e=zt(qe,Eu,n),t=await fl(e);return t.exists()?{serial:t.id,...t.data()}:null}async function Hb(){const n=Is(En(qe,Eu),Cs("serial"));return(await yr(n)).docs.map(t=>({serial:t.id,...t.data()}))}async function aB(n,e){const t=n.map(r=>gu(zt(qe,Eu,r),{serial:r,denomination:e,status:"draft",scanCount:0,createdAt:Vt()}));await Promise.all(t)}async function lB(n,e,t=null){const r=zt(qe,Eu,n),s={status:e,issuedAt:Vt(),...t&&{issuedTo:t}};await Gr(r,s)}async function cB(n){const e=zt(qe,Eu,n);await Gr(e,{scanCount:Iy(1),lastScanned:Vt(),status:"active"}),await Dy(En(qe,sB),{serial:n,scannedAt:Vt(),userAgent:navigator.userAgent||null})}function Kb(){const[n,e]=N.useState([]);return N.useEffect(()=>{const t=["#2d5a27","#c9a227","#4a7c43","#d4af37","#5c4033"],r=Array.from({length:50},(s,a)=>({id:a,x:Math.random()*100,color:t[Math.floor(Math.random()*t.length)],delay:Math.random()*.5,duration:2+Math.random()*2,size:8+Math.random()*8}));e(r)},[]),c.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,pointerEvents:"none",overflow:"hidden",zIndex:100},children:n.map(t=>c.jsx(Ee.div,{initial:{y:-20,x:`${t.x}vw`,opacity:1,rotate:0},animate:{y:"110vh",rotate:360*(Math.random()>.5?1:-1),opacity:[1,1,0]},transition:{duration:t.duration,delay:t.delay,ease:"linear"},style:{position:"absolute",width:t.size,height:t.size,background:t.color,borderRadius:Math.random()>.5?"50%":"2px"}},t.id))})}const Fw={1:{bg:"#d4edda",text:"#155724"},5:{bg:"#cce5ff",text:"#004085"},10:{bg:"#e2d5e7",text:"#4a235a"},20:{bg:"#fff3cd",text:"#856404"}};function uB({kinderbuck:n}){const e=Fw[n.denomination]||Fw[5];return c.jsxs(Ee.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",duration:.5},className:"card",style:{textAlign:"center",maxWidth:"400px",background:e.bg},children:[c.jsxs(Ee.div,{initial:{y:-20},animate:{y:0},transition:{delay:.2},children:[c.jsxs("h1",{style:{color:e.text,fontSize:"3rem",marginBottom:"0.5rem"},children:["$",n.denomination]}),c.jsx("p",{style:{fontFamily:"monospace",fontSize:"1.5rem",color:e.text},children:n.serial})]}),c.jsx(Ee.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},style:{marginTop:"1.5rem"},children:c.jsx("div",{style:{display:"inline-block",padding:"0.5rem 1rem",background:"rgba(255,255,255,0.7)",borderRadius:"20px",color:"var(--kb-green)",fontWeight:"bold"},children:"VERIFIED AUTHENTIC"})}),c.jsxs(Ee.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},style:{marginTop:"1.5rem",fontSize:"0.9rem",opacity:.8},children:[c.jsxs("p",{children:["Status: ",c.jsx("strong",{children:n.status})]}),n.issuedAt&&c.jsxs("p",{children:["Issued: ",new Date(n.issuedAt.seconds*1e3).toLocaleDateString()]}),c.jsxs("p",{children:["Scans: ",n.scanCount||1]})]}),c.jsx(Ee.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.8,type:"spring"},style:{marginTop:"1.5rem"},children:c.jsx("iframe",{src:"https://giphy.com/embed/B1txHfofr9y08bDB8b",width:"200",height:"200",frameBorder:"0",style:{borderRadius:"12px",pointerEvents:"none"},allowFullScreen:!0})})]})}function dB(){const{serial:n}=Zw(),[e,t]=N.useState(null),[r,s]=N.useState(!0),[a,l]=N.useState(null);return N.useEffect(()=>{async function f(){try{const d=await oB(n);d?(t(d),await cB(n)):l("not_found")}catch(d){console.error("Verification error:",d),l("error")}finally{s(!1)}}f()},[n]),r?c.jsxs("div",{className:"page page-center",children:[c.jsx(Ee.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},style:{fontSize:"3rem"},children:"$"}),c.jsxs("p",{style:{marginTop:"1rem"},children:["Verifying ",n,"..."]})]}):a==="not_found"?c.jsxs("div",{className:"page page-center",children:[c.jsx("h1",{style:{color:"#c0392b"},children:"Not Found"}),c.jsxs("p",{children:["Serial ",c.jsx("strong",{children:n})," is not a valid Kinderbuck."]})]}):a?c.jsxs("div",{className:"page page-center",children:[c.jsx("h1",{style:{color:"#c0392b"},children:"Error"}),c.jsx("p",{children:"Something went wrong verifying this Kinderbuck."})]}):c.jsxs("div",{className:"page page-center",children:[c.jsx(Kb,{}),c.jsx(uB,{kinderbuck:e})]})}const y0="checkins",hB=3600*1e3;async function fB(n,e){var f;const t=new Date(Date.now()-hB),r=Is(En(qe,y0),qc("visitorId","==",n),qc("businessCode","==",e),Cs("timestamp","desc"),Ny(1)),s=await yr(r);return s.empty?!1:(((f=s.docs[0].data().timestamp)==null?void 0:f.toDate())||new Date(0))>t}async function pB(n,e,t){await Dy(En(qe,y0),{visitorId:n,businessCode:e,timestamp:Vt(),kinderbucksMatched:!1,boostApplied:0,memberTier:t||"curious"})}async function mB(n){const e=Is(En(qe,y0),qc("businessCode","==",n),Cs("timestamp","desc"),Ny(100));return(await yr(e)).docs.map(r=>({id:r.id,...r.data()}))}const zw={curious:Xt,hooked:xr,lineAndSinker:Ai,patron:Ln};function gB(){var V;const{businessCode:n}=Zw(),[e,t]=N.useState(null),[r,s]=N.useState(!0),[a,l]=N.useState(null),[f,d]=N.useState(null),[m,g]=N.useState(!1),[v,w]=N.useState(!1);if(N.useEffect(()=>{async function B(){try{const P=await $b(n);if(!P){l("not_found"),s(!1);return}if(!P.isActive){l("inactive"),s(!1);return}t(P);const G=tu();if(await fB(G,n)){g(!0);const j=await Za(G);j&&d({tierChanged:!1,newTier:j.tier,businessesVisited:j.businessesVisited||[],totalCheckins:j.totalCheckins||0,isNewBusiness:!1}),s(!1);return}const H=await Za(G),A=(H==null?void 0:H.tier)||null,b=await Y6(G,n);await pB(G,n,b.newTier),await q6(n),d(b),b.tierChanged&&b.newTier&&w(!0),s(!1)}catch(P){console.error("Check-in error:",P),l("error"),s(!1)}}B()},[n]),r)return c.jsxs("div",{className:"page page-center",style:{background:"#faf8f3",minHeight:"100vh"},children:[c.jsx(Ee.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:c.jsx(By,{size:48,color:"var(--kb-navy)"})}),c.jsx("p",{style:{marginTop:"1rem",color:"#5a6c7d"},children:"Checking in..."})]});if(a==="not_found")return c.jsxs("div",{className:"page page-center",style:{background:"#faf8f3",minHeight:"100vh"},children:[c.jsx("h1",{style:{color:"#c0392b"},children:"Business Not Found"}),c.jsx("p",{style:{color:"#5a6c7d"},children:"This check-in code doesn't match any participating business."}),c.jsx(ue,{to:"/",className:"btn",style:{marginTop:"1rem"},children:"Go Home"})]});if(a==="inactive")return c.jsxs("div",{className:"page page-center",style:{background:"#faf8f3",minHeight:"100vh"},children:[c.jsx("h1",{style:{color:"#e67e22"},children:"Business Not Active"}),c.jsx("p",{style:{color:"#5a6c7d"},children:"This business is not currently participating in Kinderhooker."}),c.jsx(ue,{to:"/",className:"btn",style:{marginTop:"1rem"},children:"Go Home"})]});if(a)return c.jsxs("div",{className:"page page-center",style:{background:"#faf8f3",minHeight:"100vh"},children:[c.jsx("h1",{style:{color:"#c0392b"},children:"Something went wrong"}),c.jsx("p",{style:{color:"#5a6c7d"},children:"Please try scanning again."}),c.jsx(ue,{to:"/",className:"btn",style:{marginTop:"1rem"},children:"Go Home"})]});const T=(f==null?void 0:f.newTier)||"curious",k=Jn[T],C=((V=f==null?void 0:f.businessesVisited)==null?void 0:V.length)||0,I=g0(C);return c.jsxs("div",{className:"page page-center",style:{background:"#faf8f3",minHeight:"100vh",padding:"2rem"},children:[v&&c.jsx(Kb,{}),c.jsxs(Ee.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",duration:.5},style:{background:"white",borderRadius:"20px",padding:"2rem",maxWidth:"400px",width:"100%",boxShadow:"0 4px 20px rgba(0,0,0,0.1)",textAlign:"center"},children:[m?c.jsxs(c.Fragment,{children:[c.jsx("div",{style:{width:"60px",height:"60px",background:"var(--kb-gray-100)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:c.jsx(Ya,{size:32,color:"var(--kb-gray-500)"})}),c.jsx("h2",{style:{color:"#5a6c7d",marginBottom:"0.5rem"},children:"Already Checked In!"}),c.jsxs("p",{style:{color:"#888",marginBottom:"1.5rem"},children:["You visited ",c.jsx("strong",{children:e.name})," recently.",c.jsx("br",{}),"Come back in an hour for another check-in!"]})]}):c.jsxs(c.Fragment,{children:[c.jsxs(Ee.div,{initial:{y:-20},animate:{y:0},transition:{delay:.2},children:[c.jsx("div",{style:{width:"50px",height:"50px",background:"#d4edda",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 0.5rem"},children:c.jsx(Gc,{size:28,color:"var(--kb-green)"})}),c.jsxs("h2",{style:{color:"#1a5f2a",marginBottom:"0.5rem"},children:["Welcome to ",e.name,"!"]}),c.jsx("p",{style:{color:"#5a6c7d",marginBottom:"1.5rem"},children:"Check-in recorded!"})]}),(f==null?void 0:f.tierChanged)&&(f==null?void 0:f.newTier)&&c.jsxs(Ee.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.4,type:"spring"},style:{background:k.bgColor,borderRadius:"12px",padding:"1rem",marginBottom:"1.5rem"},children:[c.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"0.5rem"},children:(()=>{const B=zw[T]||Xt;return c.jsx(B,{size:32,color:k.color,strokeWidth:1.5})})()}),c.jsx("div",{style:{color:k.color,fontWeight:"bold",fontSize:"1.2rem"},children:f.oldTier?"NEW TIER UNLOCKED!":"WELCOME, KINDERHOOKER!"}),c.jsx("div",{style:{color:k.color,fontSize:"1.5rem",fontWeight:"bold"},children:k.name})]})]}),c.jsxs(Ee.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},style:{background:k.bgColor,borderRadius:"12px",padding:"1rem",marginBottom:"1.5rem"},children:[c.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"0.5rem"},children:(()=>{const B=zw[T]||Xt;return c.jsx(B,{size:40,color:k.color,strokeWidth:1.5})})()}),c.jsx("div",{style:{color:k.color,fontWeight:"bold",textTransform:"uppercase",letterSpacing:"1px"},children:k.name}),c.jsxs("div",{style:{color:"#5a6c7d",fontSize:"0.9rem",marginTop:"0.5rem"},children:[Math.round(k.bonus*100),"% Kinderbuck Match Bonus"]})]}),c.jsxs(Ee.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:[c.jsxs("p",{style:{color:"#2c3e50",marginBottom:"0.5rem"},children:["You've visited ",c.jsx("strong",{children:C})," business",C!==1?"es":""]}),I.nextTier&&c.jsxs(c.Fragment,{children:[c.jsx("div",{style:{background:"#e0e0e0",borderRadius:"10px",height:"20px",overflow:"hidden",marginBottom:"0.5rem"},children:c.jsx(Ee.div,{initial:{width:0},animate:{width:`${I.progress}%`},transition:{delay:.7,duration:.5},style:{background:`linear-gradient(90deg, ${k.color}, ${I.nextTier.color})`,height:"100%",borderRadius:"10px"}})}),c.jsxs("p",{style:{color:"#5a6c7d",fontSize:"0.85rem"},children:[I.remaining," more to reach ",c.jsx("strong",{style:{color:I.nextTier.color},children:I.nextTier.name}),"!"]})]}),!I.nextTier&&c.jsxs("p",{style:{color:"#c9a227",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[c.jsx(Ln,{size:20})," Maximum tier reached! You're a true Village Patron!"]})]}),c.jsxs(Ee.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},style:{marginTop:"1.5rem",display:"flex",gap:"0.5rem",justifyContent:"center",flexWrap:"wrap"},children:[c.jsx(ue,{to:"/profile",className:"btn",style:{background:"#1a5f2a"},children:"View My Profile"}),c.jsx(ue,{to:"/",className:"btn btn-secondary",children:"Home"})]})]})]})}function yB(){const{profile:n}=Do(),[e,t]=N.useState(null),[r,s]=N.useState([]),[a,l]=N.useState(!0),[f,d]=N.useState(!1),[m,g]=N.useState(!1);N.useEffect(()=>{async function I(){if(!(n!=null&&n.businessCode)){l(!1);return}const[V,B]=await Promise.all([$b(n.businessCode),mB(n.businessCode)]);t(V),s(B),l(!1)}I()},[n==null?void 0:n.businessCode]);const v=()=>{const I=`https://harmonicsystems.github.io/kinderbucks/#/checkin/${n.businessCode}`;navigator.clipboard.writeText(I),g(!0),setTimeout(()=>g(!1),2e3)},w=r.filter(I=>{var P;const V=(P=I.timestamp)!=null&&P.toDate?I.timestamp.toDate():new Date(I.timestamp),B=new Date;return V.toDateString()===B.toDateString()}).length,T=r.filter(I=>{var P;const V=(P=I.timestamp)!=null&&P.toDate?I.timestamp.toDate():new Date(I.timestamp),B=new Date;return B.setDate(B.getDate()-7),V>B}).length,k=new Set(r.map(I=>I.visitorId)).size;if(a)return c.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[c.jsx(Yn,{}),c.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",background:"var(--kb-cream)"},children:c.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading..."})}),c.jsx(Xn,{})]});if(!(n!=null&&n.businessCode))return c.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[c.jsx(Yn,{}),c.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",background:"var(--kb-cream)",padding:"2rem"},children:c.jsxs("div",{className:"card",style:{maxWidth:"400px",textAlign:"center",padding:"2rem"},children:[c.jsx(Qt,{size:48,color:"var(--kb-gray-400)",style:{marginBottom:"1rem"}}),c.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"No Business Assigned"}),c.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem"},children:"Your account doesn't have a business assigned yet. Contact an administrator to get set up."}),c.jsx(ue,{to:"/",className:"btn btn-primary",children:"Go Home"})]})}),c.jsx(Xn,{})]});const C=`https://harmonicsystems.github.io/kinderbucks/#/checkin/${n.businessCode}`;return c.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[c.jsx(Yn,{}),c.jsx("main",{style:{flex:1,background:"var(--kb-cream)",padding:"2rem 1rem"},children:c.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[c.jsx(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{marginBottom:"2rem"},children:c.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"1rem"},children:[c.jsxs("div",{children:[c.jsx("div",{className:"badge badge-gold",style:{marginBottom:"0.5rem"},children:"Business Dashboard"}),c.jsx("h1",{style:{color:"var(--kb-navy)",marginBottom:"0.25rem"},children:(e==null?void 0:e.name)||n.businessCode}),c.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"Manage your Kinderbucks check-ins"})]}),c.jsxs("button",{onClick:()=>d(!f),className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(xs,{size:18}),f?"Hide QR Code":"Show QR Code"]})]})}),f&&c.jsx(Ee.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"card",style:{marginBottom:"2rem",padding:"2rem"},children:c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"2rem",flexWrap:"wrap"},children:[c.jsx("div",{style:{textAlign:"center"},children:c.jsx("div",{style:{background:"linear-gradient(135deg, var(--kb-green) 0%, #1e8449 100%)",borderRadius:"16px",padding:"3px",display:"inline-block"},children:c.jsxs("div",{style:{background:"white",borderRadius:"14px",padding:"16px"},children:[c.jsx("div",{style:{fontSize:"10px",fontWeight:"600",color:"var(--kb-green)",letterSpacing:"2px",marginBottom:"8px"},children:"CHECK IN AT"}),c.jsx(eu,{value:C,size:150,denomination:1,showFrame:!1}),c.jsx("div",{style:{marginTop:"8px",fontWeight:"600",color:"var(--kb-navy)"},children:e==null?void 0:e.name})]})})}),c.jsxs("div",{style:{flex:1,minWidth:"250px"},children:[c.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Display This QR Code"}),c.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1rem"},children:"Print and display this QR code at your counter. Customers can scan it with their phone to check in and build their Kinderhooker status."}),c.jsxs("div",{style:{marginBottom:"1rem"},children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontSize:"0.85rem"},children:"Check-in URL"}),c.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[c.jsx("input",{type:"text",value:C,readOnly:!0,style:{flex:1,fontFamily:"monospace",fontSize:"0.85rem"}}),c.jsxs("button",{onClick:v,className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[m?c.jsx(As,{size:16}):c.jsx(WT,{size:16}),m?"Copied!":"Copy"]})]})]}),c.jsxs("button",{onClick:()=>window.print(),className:"btn btn-gold",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(HT,{size:18})," Print QR Code"]})]})]})}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[c.jsx(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card",style:{padding:"1.5rem"},children:c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[c.jsx("div",{style:{width:"50px",height:"50px",background:"rgba(39, 174, 96, 0.1)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsx(pl,{size:24,color:"var(--kb-green)"})}),c.jsxs("div",{children:[c.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"var(--kb-navy)"},children:(e==null?void 0:e.checkinCount)||0}),c.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"Total Check-ins"})]})]})}),c.jsx(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card",style:{padding:"1.5rem"},children:c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[c.jsx("div",{style:{width:"50px",height:"50px",background:"rgba(52, 152, 219, 0.1)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsx(Ya,{size:24,color:"#3498db"})}),c.jsxs("div",{children:[c.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"var(--kb-navy)"},children:w}),c.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"Today"})]})]})}),c.jsx(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"card",style:{padding:"1.5rem"},children:c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[c.jsx("div",{style:{width:"50px",height:"50px",background:"rgba(155, 89, 182, 0.1)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsx(Ly,{size:24,color:"#9b59b6"})}),c.jsxs("div",{children:[c.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"var(--kb-navy)"},children:T}),c.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"This Week"})]})]})}),c.jsx(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"card",style:{padding:"1.5rem"},children:c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[c.jsx("div",{style:{width:"50px",height:"50px",background:"rgba(201, 162, 39, 0.1)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsx(Si,{size:24,color:"var(--kb-gold-dark)"})}),c.jsxs("div",{children:[c.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"var(--kb-navy)"},children:k}),c.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"Unique Visitors"})]})]})})]}),c.jsxs(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"card",children:[c.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(Ya,{size:20})," Recent Check-ins"]}),r.length===0?c.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[c.jsx(Si,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),c.jsx("p",{children:"No check-ins yet"}),c.jsx("p",{style:{fontSize:"0.9rem"},children:"Display your QR code to start receiving check-ins!"})]}):c.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:r.slice(0,20).map((I,V)=>{var P;const B=(P=I.timestamp)!=null&&P.toDate?I.timestamp.toDate():new Date(I.timestamp);return c.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"var(--kb-gray-50)",borderRadius:"8px"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[c.jsx("div",{style:{width:"36px",height:"36px",background:"var(--kb-green)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsx(As,{size:18,color:"white"})}),c.jsxs("div",{children:[c.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:"Check-in recorded"}),c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:I.tier&&`${I.tier} member`})]})]}),c.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:B.toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]},I.id||V)})})]})]})}),c.jsx(Xn,{})]})}function Vn({children:n,title:e}){const t=er(),r=ru(),{user:s,profile:a,isAdmin:l}=Do(),f=[{to:"/admin/dashboard",label:"Dashboard",Icon:eM},{to:"/admin/exchanges",label:"Exchanges",Icon:df},{to:"/admin/members",label:"Members",Icon:Si},{to:"/admin/generate",label:"Generate QR",Icon:xs},{to:"/admin/issue",label:"Issue Currency",Icon:Rh},{to:"/admin/businesses",label:"Businesses",Icon:Qt},{to:"/admin/users",label:"User Management",Icon:Ph}],d=async()=>{await OT(),r("/")},m=g=>t.pathname===g;return c.jsxs("div",{style:{display:"flex",minHeight:"100vh"},children:[c.jsxs("aside",{style:{width:"260px",background:"var(--kb-navy)",color:"var(--kb-white)",display:"flex",flexDirection:"column",position:"fixed",top:0,left:0,bottom:0,zIndex:100},children:[c.jsx("div",{style:{padding:"1.5rem",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:c.jsxs(ue,{to:"/",style:{display:"flex",alignItems:"center",gap:"0.75rem",textDecoration:"none"},children:[c.jsx("div",{style:{width:"40px",height:"40px",background:"var(--kb-gold)",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--kb-navy)",fontFamily:"var(--font-display)",fontWeight:"700",fontSize:"1.2rem"},children:"K"}),c.jsxs("div",{children:[c.jsx("div",{style:{fontFamily:"var(--font-display)",fontWeight:"600",color:"var(--kb-white)",fontSize:"1.1rem"},children:"Kinderbucks"}),c.jsx("div",{style:{fontSize:"0.7rem",color:"var(--kb-gold)",textTransform:"uppercase",letterSpacing:"0.1em"},children:"Admin Portal"})]})]})}),c.jsx("nav",{style:{flex:1,padding:"1rem 0",overflowY:"auto"},children:f.map(g=>c.jsxs(ue,{to:g.to,style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.875rem 1.5rem",color:m(g.to)?"var(--kb-gold)":"var(--kb-gray-300)",background:m(g.to)?"rgba(201, 162, 39, 0.1)":"transparent",borderLeft:m(g.to)?"3px solid var(--kb-gold)":"3px solid transparent",textDecoration:"none",fontSize:"0.95rem",fontWeight:m(g.to)?"600":"400",transition:"all 0.2s"},children:[c.jsx(g.Icon,{size:20,strokeWidth:1.5}),g.label]},g.to))}),c.jsxs("div",{style:{padding:"1rem 1.5rem",borderTop:"1px solid rgba(255,255,255,0.1)"},children:[s&&c.jsxs("div",{style:{padding:"0.75rem 0",borderBottom:"1px solid rgba(255,255,255,0.1)",marginBottom:"0.75rem"},children:[c.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-300)"},children:(a==null?void 0:a.displayName)||s.email}),c.jsx("div",{style:{fontSize:"0.75rem",color:"var(--kb-gray-500)"},children:(a==null?void 0:a.role)||"member"})]}),c.jsxs(ue,{to:"/",style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.5rem 0",color:"var(--kb-gray-400)",textDecoration:"none",fontSize:"0.9rem"},children:[c.jsx(JV,{size:18}),"Back to Site"]}),s&&c.jsxs("button",{onClick:d,style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.5rem 0",color:"var(--kb-gray-400)",background:"none",border:"none",cursor:"pointer",fontSize:"0.9rem",width:"100%"},children:[c.jsx(tg,{size:18}),"Sign Out"]})]})]}),c.jsxs("main",{style:{flex:1,marginLeft:"260px",background:"var(--kb-cream)",minHeight:"100vh"},children:[c.jsx("header",{style:{background:"var(--kb-white)",borderBottom:"1px solid var(--kb-gray-200)",padding:"1.25rem 2rem",position:"sticky",top:0,zIndex:50},children:c.jsx("h1",{style:{fontFamily:"var(--font-display)",fontSize:"1.5rem",color:"var(--kb-navy)",margin:0},children:e})}),c.jsx("div",{style:{padding:"2rem"},children:n})]}),c.jsx("style",{children:`
        @media (max-width: 768px) {
          aside {
            width: 100% !important;
            position: relative !important;
            display: none;
          }
          main {
            margin-left: 0 !important;
          }
        }
      `})]})}function vB(){const[n,e]=N.useState({totalCurrency:0,inCirculation:0,circulationValue:0,pendingExchanges:0,pendingValue:0,totalMembers:0,activeBusinesses:0,totalCheckins:0}),[t,r]=N.useState([]),[s,a]=N.useState({}),[l,f]=N.useState(!0);N.useEffect(()=>{async function m(){try{const g=await Hb(),v=g.filter(A=>A.status==="issued"||A.status==="active"),w={};v.forEach(A=>{const b=A.denomination||0;w[b]=(w[b]||0)+1}),a(w);const T=await Vo(),k=T.filter(A=>A.isActive),C=T.reduce((A,b)=>A+(b.checkinCount||0),0),I=Is(En(qe,"exchanges"),qc("status","==","pending"),Cs("createdAt","desc")),B=(await yr(I)).docs.map(A=>({id:A.id,...A.data()})),P=B.reduce((A,b)=>A+(b.kinderbucksAmount||0),0),G=Is(En(qe,"exchanges"),Cs("createdAt","desc"),Ny(5)),$=await yr(G);r($.docs.map(A=>({id:A.id,...A.data()})));const H=await yr(En(qe,"members"));e({totalCurrency:g.length,inCirculation:v.length,circulationValue:v.reduce((A,b)=>A+(b.denomination||0),0),pendingExchanges:B.length,pendingValue:P,totalMembers:H.size,activeBusinesses:k.length,totalCheckins:C}),f(!1)}catch(g){console.error("Error loading dashboard data:",g),f(!1)}}m()},[]);const d=({icon:m,label:g,value:v,subtext:w,color:T,to:k})=>c.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[c.jsxs("div",{children:[c.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem",marginBottom:"0.5rem"},children:g}),c.jsx("div",{style:{fontFamily:"var(--font-display)",fontSize:"2rem",fontWeight:"700",color:T||"var(--kb-navy)"},children:v}),w&&c.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem",marginTop:"0.25rem"},children:w})]}),c.jsx("div",{style:{width:"48px",height:"48px",background:`${T||"var(--kb-navy)"}15`,borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsx(m,{size:24,color:T||"var(--kb-navy)"})})]}),k&&c.jsx(ue,{to:k,style:{display:"block",marginTop:"1rem",paddingTop:"1rem",borderTop:"1px solid var(--kb-gray-100)",color:"var(--kb-navy)",fontSize:"0.85rem",fontWeight:"500"},children:"View Details "})]});return l?c.jsx(Vn,{title:"Dashboard",children:c.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:c.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading dashboard..."})})}):c.jsxs(Vn,{title:"Dashboard",children:[c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[c.jsx(d,{icon:My,label:"In Circulation",value:`$${n.circulationValue.toLocaleString()}`,subtext:`${n.inCirculation} bills issued`,color:"var(--kb-green)"}),c.jsx(d,{icon:Ya,label:"Pending Exchanges",value:n.pendingExchanges,subtext:`$${n.pendingValue.toFixed(2)} value`,color:n.pendingExchanges>0?"#e67e22":"var(--kb-gray-400)",to:"/admin/exchanges"}),c.jsx(d,{icon:Si,label:"OK Members",value:n.totalMembers,subtext:`${n.totalCheckins} total check-ins`,color:"var(--kb-navy)",to:"/admin/members"}),c.jsx(d,{icon:Qt,label:"Active Businesses",value:n.activeBusinesses,color:"var(--kb-gold-dark)",to:"/admin/businesses"})]}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem"},children:[c.jsxs("div",{className:"card",children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[c.jsx("h3",{style:{color:"var(--kb-navy)",margin:0},children:"Recent Exchanges"}),c.jsx(ue,{to:"/admin/exchanges",style:{fontSize:"0.85rem",color:"var(--kb-navy)"},children:"View All "})]}),t.length===0?c.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"No exchanges yet"}):c.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:t.map(m=>{var g,v,w,T;return c.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem",background:"var(--kb-gray-50)",borderRadius:"8px"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[m.status==="completed"?c.jsx(As,{size:18,color:"var(--kb-green)"}):m.status==="pending"?c.jsx(Ya,{size:18,color:"#e67e22"}):c.jsx(Oy,{size:18,color:"var(--kb-gray-400)"}),c.jsxs("div",{children:[c.jsxs("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:["$",m.usdAmount,"  $",(g=m.kinderbucksAmount)==null?void 0:g.toFixed(2)," KB"]}),c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:((T=(w=(v=m.createdAt)==null?void 0:v.toDate)==null?void 0:w.call(v))==null?void 0:T.toLocaleDateString())||"Pending"})]})]}),c.jsx("span",{className:"badge",style:{background:m.status==="completed"?"#d4edda":m.status==="pending"?"#fff3cd":"#f8f9fa",color:m.status==="completed"?"var(--kb-green)":m.status==="pending"?"#856404":"var(--kb-gray-600)"},children:m.status})]},m.id)})})]}),c.jsxs("div",{className:"card",children:[c.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem"},children:"Circulation by Denomination"}),Object.keys(s).length===0?c.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"No currency in circulation yet"}):c.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[1,5,10,20].map(m=>{const g=s[m]||0,v=Math.max(...Object.values(s),1),w=g/v*100,T={1:"#27ae60",5:"#3498db",10:"#9b59b6",20:"#c9a227"};return c.jsxs("div",{children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[c.jsxs("span",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:["$",m]}),c.jsxs("span",{style:{color:"var(--kb-gray-500)"},children:[g," bills ($",g*m,")"]})]}),c.jsx("div",{style:{height:"8px",background:"var(--kb-gray-100)",borderRadius:"4px",overflow:"hidden"},children:c.jsx("div",{style:{width:`${w}%`,height:"100%",background:T[m],borderRadius:"4px",transition:"width 0.5s ease"}})})]},m)})})]})]}),c.jsxs("div",{className:"card",style:{marginTop:"1.5rem"},children:[c.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Quick Actions"}),c.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[c.jsxs(ue,{to:"/admin/generate",className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(xs,{size:18})," Generate QR Codes"]}),c.jsxs(ue,{to:"/admin/issue",className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(Rh,{size:18})," Issue Currency"]}),c.jsxs(ue,{to:"/admin/exchanges",className:"btn btn-gold",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(df,{size:18})," Process Exchanges"]})]})]})]})}function xB(){const[n,e]=N.useState({start:1,end:100}),[t,r]=N.useState(5),[s,a]=N.useState([]),[l,f]=N.useState(!1),[d,m]=N.useState(!1),g=()=>{const k=[];for(let C=n.start;C<=n.end;C++)k.push(`KB-${String(C).padStart(4,"0")}`);a(k),m(!1)},v=async()=>{f(!0);try{await aB(s,t),m(!0)}catch(k){console.error("Error saving:",k),alert("Error saving to database")}f(!1)},w="https://harmonicsystems.github.io/kinderbucks/#/scan/",T={1:{bg:"rgba(39, 174, 96, 0.1)",text:"var(--kb-green)"},5:{bg:"rgba(52, 152, 219, 0.1)",text:"#3498db"},10:{bg:"rgba(155, 89, 182, 0.1)",text:"#9b59b6"},20:{bg:"rgba(201, 162, 39, 0.1)",text:"var(--kb-gold-dark)"}};return c.jsxs(Vn,{title:"Generate QR Codes",children:[c.jsxs("div",{className:"card",style:{marginBottom:"2rem"},children:[c.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(xs,{size:20})," Generation Settings"]}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1.5rem",marginBottom:"1.5rem"},children:[c.jsxs("div",{children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Start Number"}),c.jsx("input",{type:"number",value:n.start,onChange:k=>e(C=>({...C,start:Number(k.target.value)})),min:1,max:9999,style:{width:"100%"}})]}),c.jsxs("div",{children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"End Number"}),c.jsx("input",{type:"number",value:n.end,onChange:k=>e(C=>({...C,end:Number(k.target.value)})),min:1,max:9999,style:{width:"100%"}})]}),c.jsxs("div",{children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Denomination"}),c.jsxs("select",{value:t,onChange:k=>r(Number(k.target.value)),style:{width:"100%"},children:[c.jsx("option",{value:1,children:"$1"}),c.jsx("option",{value:5,children:"$5"}),c.jsx("option",{value:10,children:"$10"}),c.jsx("option",{value:20,children:"$20"})]})]})]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[c.jsxs("button",{className:"btn btn-primary",onClick:g,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(xs,{size:18})," Generate ",n.end-n.start+1," Codes"]}),c.jsxs("div",{style:{padding:"0.75rem 1rem",background:T[t].bg,borderRadius:"8px",color:T[t].text,fontWeight:"600"},children:["Total Value: $",(n.end-n.start+1)*t]})]})]}),s.length>0&&c.jsxs("div",{className:"card",children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[c.jsxs("div",{children:[c.jsxs("h3",{style:{color:"var(--kb-navy)",margin:0},children:["Generated: ",s.length," Kinderbucks"]}),c.jsxs("p",{style:{color:"var(--kb-gray-500)",margin:"0.25rem 0 0",fontSize:"0.9rem"},children:["$",t," denomination  Total value: $",s.length*t]})]}),c.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[d?c.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--kb-green)",fontWeight:"600"},children:[c.jsx(As,{size:18})," Saved!"]}):c.jsxs("button",{className:"btn btn-gold",onClick:v,disabled:l,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(wM,{size:18}),l?"Saving...":"Save to Database"]}),c.jsxs("button",{className:"btn btn-secondary",onClick:()=>window.print(),style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(gM,{size:18})," Print"]})]})]}),c.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gap:"1.5rem"},children:s.slice(0,50).map(k=>c.jsxs("div",{style:{background:"var(--kb-white)",border:"1px solid var(--kb-gray-200)",borderRadius:"12px",padding:"1rem",textAlign:"center"},children:[c.jsx(eu,{value:`${w}${k}`,size:140,denomination:t}),c.jsx("p",{style:{fontFamily:"monospace",marginTop:"0.75rem",fontSize:"0.9rem",color:"var(--kb-navy)",fontWeight:"600"},children:k})]},k))}),s.length>50&&c.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"var(--kb-gray-50)",borderRadius:"8px",textAlign:"center",color:"var(--kb-gray-600)"},children:["Showing 50 of ",s.length," codes. All will be saved and printable."]})]}),s.length===0&&c.jsxs("div",{className:"card",style:{textAlign:"center",padding:"4rem 2rem"},children:[c.jsx(xs,{size:64,color:"var(--kb-gray-300)",style:{marginBottom:"1rem"}}),c.jsx("h3",{style:{color:"var(--kb-gray-500)",marginBottom:"0.5rem"},children:"No codes generated yet"}),c.jsx("p",{style:{color:"var(--kb-gray-400)"},children:"Set your range and denomination above, then click Generate."})]})]})}function _B(){const[n,e]=N.useState([]),[t,r]=N.useState(!0),[s,a]=N.useState([]),[l,f]=N.useState(""),[d,m]=N.useState(!1),[g,v]=N.useState(0),w=async()=>{const A=await Hb();e(A.filter(b=>b.status==="draft"||b.status==="issued")),r(!1)};N.useEffect(()=>{w()},[]);const T=A=>{a(b=>b.includes(A)?b.filter(j=>j!==A):[...b,A])},k=()=>{const A=V.map(b=>b.serial);a(A)},C=()=>{a([])},I=async()=>{if(s.length!==0){m(!0);try{for(const A of s)await lB(A,"issued",l);v(s.length),a([]),f(""),await w(),setTimeout(()=>v(0),3e3)}catch(A){console.error("Error issuing:",A),alert("Error issuing Kinderbucks")}m(!1)}},V=n.filter(A=>A.status==="draft"),B=n.filter(A=>A.status==="issued"),P=s.reduce((A,b)=>{const j=n.find(L=>L.serial===b);return A+((j==null?void 0:j.denomination)||0)},0),$=(A=>{const b={1:[],5:[],10:[],20:[]};return A.forEach(j=>{const L=j.denomination||5;b[L]&&b[L].push(j)}),b})(V),H={1:"#27ae60",5:"#3498db",10:"#9b59b6",20:"#c9a227"};return t?c.jsx(Vn,{title:"Issue Currency",children:c.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:c.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading..."})})}):c.jsxs(Vn,{title:"Issue Currency",children:[g>0&&c.jsxs("div",{style:{position:"fixed",top:"100px",right:"2rem",background:"var(--kb-green)",color:"white",padding:"1rem 1.5rem",borderRadius:"8px",display:"flex",alignItems:"center",gap:"0.75rem",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:1e3},children:[c.jsx(As,{size:20}),c.jsxs("span",{children:["Issued ",g," Kinderbucks successfully!"]})]}),c.jsxs("div",{className:"card",style:{marginBottom:"2rem"},children:[c.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(Rh,{size:20})," Issue to Circulation"]}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:"1.5rem",alignItems:"end"},children:[c.jsxs("div",{children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Recipient (optional)"}),c.jsx("input",{type:"text",value:l,onChange:A=>f(A.target.value),placeholder:"Business name or exchange point",style:{width:"100%"}})]}),c.jsxs("button",{className:"btn btn-gold",onClick:I,disabled:s.length===0||d,style:{display:"flex",alignItems:"center",gap:"0.5rem",height:"42px"},children:[c.jsx(Rh,{size:18}),d?"Issuing...":`Issue ${s.length} Selected`]})]}),s.length>0&&c.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem 1rem",background:"var(--kb-gold)",borderRadius:"8px",color:"var(--kb-navy)",fontWeight:"500"},children:["Selected: ",s.length," bills  Total value: $",P]})]}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[c.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-gray-500)"},children:V.length}),c.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Available (Draft)"})]}),c.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-green)"},children:B.length}),c.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Already Issued"})]}),c.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:s.length}),c.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Selected"})]})]}),c.jsxs("div",{className:"card",children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[c.jsxs("h3",{style:{color:"var(--kb-navy)",margin:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(v_,{size:20})," Available to Issue (",V.length,")"]}),c.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[c.jsx("button",{className:"btn btn-secondary",onClick:k,style:{padding:"0.4rem 0.75rem",fontSize:"0.85rem"},children:"Select All"}),c.jsx("button",{className:"btn btn-secondary",onClick:C,style:{padding:"0.4rem 0.75rem",fontSize:"0.85rem"},children:"Clear"})]})]}),V.length===0?c.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[c.jsx(v_,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),c.jsx("p",{children:"No draft Kinderbucks available."}),c.jsx("p",{style:{fontSize:"0.9rem"},children:"Generate some QR codes first."})]}):c.jsx("div",{children:[1,5,10,20].map(A=>{const b=$[A];return b.length===0?null:c.jsxs("div",{style:{marginBottom:"1.5rem"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem"},children:[c.jsxs("div",{style:{width:"24px",height:"24px",background:H[A],borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"0.75rem",fontWeight:"600"},children:["$",A]}),c.jsxs("span",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:["$",A," Bills (",b.length,")"]}),c.jsx("button",{onClick:()=>{const j=b.map(O=>O.serial),L=j.every(O=>s.includes(O));a(L?O=>O.filter(W=>!j.includes(W)):O=>[...new Set([...O,...j])])},style:{background:"none",border:"none",color:H[A],cursor:"pointer",fontSize:"0.85rem"},children:b.every(j=>s.includes(j.serial))?"Deselect all":"Select all"})]}),c.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))",gap:"0.5rem"},children:b.map(j=>{const L=s.includes(j.serial);return c.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.6rem 0.75rem",background:L?`${H[A]}15`:"var(--kb-gray-50)",borderRadius:"6px",cursor:"pointer",border:L?`2px solid ${H[A]}`:"2px solid transparent",transition:"all 0.15s"},children:[L?c.jsx(jM,{size:18,color:H[A]}):c.jsx(DM,{size:18,color:"var(--kb-gray-400)"}),c.jsx("input",{type:"checkbox",checked:L,onChange:()=>T(j.serial),style:{display:"none"}}),c.jsx("span",{style:{fontFamily:"monospace",fontSize:"0.85rem",color:L?H[A]:"var(--kb-gray-600)",fontWeight:L?"600":"400"},children:j.serial})]},j.serial)})})]},A)})})]})]})}const wB=[{code:"AVIARY",name:"The Aviary",category:"food"},{code:"MORNINGBIRD",name:"Morningbird Cafe",category:"food"},{code:"SAISONNIER",name:"Saisonnier",category:"food"},{code:"BROADST-BAGEL",name:"Broad Street Bagel Co.",category:"food"},{code:"BROOKLYN-PIZZA",name:"The Brooklyn Pizzeria",category:"food"},{code:"ISOLA",name:"Isola Wine Bar",category:"food"},{code:"HAMRAHS",name:"Hamrah's Lebanese Foods",category:"food"},{code:"OK-PANTRY",name:"OK Pantry",category:"retail"},{code:"BOTTLE-SHOP",name:"Kinderhook Bottle Shop",category:"retail"},{code:"BOOKS",name:"Kinderhook Books",category:"retail"},{code:"SAMASCOTTS",name:"Samascott's Garden Market",category:"retail"},{code:"SCHOOL-GALLERY",name:"The School | Jack Shainman Gallery",category:"arts"},{code:"SEPTEMBER",name:"September Gallery",category:"arts"},{code:"OLD-DUTCH",name:"Old Dutch Inn",category:"services"},{code:"MUSE",name:"Muse Aesthetics",category:"services"},{code:"PILATES",name:"Julia Jayne Pilates",category:"services"},{code:"HISTORICAL",name:"Columbia County Historical Society",category:"arts"}],Em={food:{label:"Food & Drink",Icon:QT,color:"#e74c3c"},retail:{label:"Retail",Icon:GT,color:"#9b59b6"},services:{label:"Services",Icon:zT,color:"#3498db"},arts:{label:"Arts & Culture",Icon:qT,color:"#1abc9c"}};function EB(){const[n,e]=N.useState([]),[t,r]=N.useState(!0),[s,a]=N.useState({code:"",name:"",category:"food"}),[l,f]=N.useState(!1),[d,m]=N.useState(null),[g,v]=N.useState(!1),[w,T]=N.useState(null),k=async()=>{const $=await Vo();e($),r(!1)};N.useEffect(()=>{k()},[]);const C=async $=>{if($.preventDefault(),!(!s.code||!s.name)){f(!0);try{await Lw(s.code.toUpperCase(),s.name,s.category),a({code:"",name:"",category:"food"}),await k()}catch(H){console.error("Error creating business:",H),alert("Error creating business")}f(!1)}},I=async($,H)=>{await G6($,!H),await k()},V=async()=>{if(confirm("This will add all Kinderhook businesses. Continue?")){v(!0);try{for(const $ of wB)n.find(A=>A.code===$.code)||await Lw($.code,$.name,$.category);await k(),alert("Businesses seeded successfully!")}catch($){console.error("Error seeding:",$),alert("Error seeding businesses")}v(!1)}},B=$=>{navigator.clipboard.writeText($),T($),setTimeout(()=>T(null),2e3)},P="https://harmonicsystems.github.io/kinderbucks/#/checkin/",G={total:n.length,active:n.filter($=>$.isActive).length,totalCheckins:n.reduce(($,H)=>$+(H.checkinCount||0),0)};return t?c.jsx(Vn,{title:"Business Directory",children:c.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:c.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading..."})})}):c.jsxs(Vn,{title:"Business Directory",children:[c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[c.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:G.total}),c.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Businesses"})]}),c.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-green)"},children:G.active}),c.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Active"})]}),c.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-gold-dark)"},children:G.totalCheckins}),c.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Check-ins"})]})]}),c.jsxs("div",{className:"card",style:{marginBottom:"2rem"},children:[c.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(x_,{size:20})," Add Business"]}),c.jsxs("form",{onSubmit:C,children:[c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1.5rem",marginBottom:"1.5rem"},children:[c.jsxs("div",{children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Code"}),c.jsx("input",{type:"text",value:s.code,onChange:$=>a(H=>({...H,code:$.target.value.toUpperCase().replace(/[^A-Z0-9-]/g,"")})),placeholder:"CAFE-01",style:{width:"100%",fontFamily:"monospace"}})]}),c.jsxs("div",{children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Name"}),c.jsx("input",{type:"text",value:s.name,onChange:$=>a(H=>({...H,name:$.target.value})),placeholder:"Village Caf",style:{width:"100%"}})]}),c.jsxs("div",{children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Category"}),c.jsx("select",{value:s.category,onChange:$=>a(H=>({...H,category:$.target.value})),style:{width:"100%"},children:Object.entries(Em).map(([$,H])=>c.jsx("option",{value:$,children:H.label},$))})]})]}),c.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[c.jsxs("button",{type:"submit",className:"btn btn-primary",disabled:l||!s.code||!s.name,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(x_,{size:18})," ",l?"Adding...":"Add Business"]}),c.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:V,disabled:g,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(HT,{size:18})," ",g?"Seeding...":"Seed Kinderhook Businesses"]})]})]})]}),c.jsxs("div",{className:"card",children:[c.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(Qt,{size:20})," Participating Businesses (",n.length,")"]}),n.length===0?c.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[c.jsx(Qt,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),c.jsx("p",{children:"No businesses yet. Add one above or seed the Kinderhook businesses."})]}):c.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:n.map($=>{const H=Em[$.category]||Em.services,A=H.Icon,b=`${P}${$.code}`;return c.jsxs("div",{style:{background:$.isActive?"var(--kb-white)":"var(--kb-gray-50)",border:`1px solid ${$.isActive,"var(--kb-gray-200)"}`,borderRadius:"12px",padding:"1.25rem",opacity:$.isActive?1:.7},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"1rem"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[c.jsx("div",{style:{width:"48px",height:"48px",background:`${H.color}15`,borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsx(A,{size:24,color:H.color})}),c.jsxs("div",{children:[c.jsx("div",{style:{fontWeight:"600",color:$.isActive?"var(--kb-navy)":"var(--kb-gray-500)",fontSize:"1.1rem"},children:$.name}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginTop:"0.25rem"},children:[c.jsx("span",{style:{fontFamily:"monospace",fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:$.code}),c.jsx("span",{style:{fontSize:"0.85rem",color:H.color},children:H.label})]})]})]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1.5rem"},children:[c.jsxs("div",{style:{textAlign:"center"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"var(--kb-green)",fontWeight:"600"},children:[c.jsx(pl,{size:16}),$.checkinCount||0]}),c.jsx("div",{style:{fontSize:"0.75rem",color:"var(--kb-gray-500)"},children:"check-ins"})]}),c.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[c.jsx("button",{onClick:()=>m(d===$.code?null:$.code),className:"btn btn-secondary",style:{padding:"0.5rem 0.75rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:c.jsx(xs,{size:16})}),c.jsxs("button",{onClick:()=>I($.code,$.isActive),className:"btn",style:{padding:"0.5rem 0.75rem",background:$.isActive?"#e74c3c":"var(--kb-green)",color:"white",display:"flex",alignItems:"center",gap:"0.25rem"},children:[$.isActive?c.jsx(zM,{size:16}):c.jsx(BM,{size:16}),$.isActive?"Deactivate":"Activate"]})]})]})]}),d===$.code&&c.jsxs("div",{style:{marginTop:"1.5rem",paddingTop:"1.5rem",borderTop:"1px solid var(--kb-gray-200)",display:"flex",alignItems:"center",gap:"2rem",flexWrap:"wrap"},children:[c.jsx("div",{style:{textAlign:"center"},children:c.jsx(eu,{value:b,size:150,denomination:5,showFrame:!1})}),c.jsxs("div",{style:{flex:1,minWidth:"200px"},children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontSize:"0.85rem"},children:"Check-in URL"}),c.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[c.jsx("input",{type:"text",value:b,readOnly:!0,style:{flex:1,fontFamily:"monospace",fontSize:"0.85rem"}}),c.jsxs("button",{onClick:()=>B(b),className:"btn btn-secondary",style:{padding:"0.5rem 0.75rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:[c.jsx(WT,{size:16}),w===b?"Copied!":"Copy"]})]}),c.jsx("p",{style:{marginTop:"0.75rem",fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Print this QR code and display it at the counter for customers to scan when they visit."})]})]})]},$.code)})})]})]})}const kB={curious:Xt,hooked:xr,lineAndSinker:Ai,patron:Ln};function TB(){const[n,e]=N.useState([]),[t,r]=N.useState(!0),[s,a]=N.useState("all"),[l,f]=N.useState(null),d=async()=>{try{const k=Is(En(qe,"exchanges"),Cs("createdAt","desc")),C=await yr(k);e(C.docs.map(I=>({id:I.id,...I.data()}))),r(!1)}catch(k){console.error("Error loading exchanges:",k),r(!1)}};N.useEffect(()=>{d()},[]);const m=async(k,C)=>{f(k);try{await Gr(zt(qe,"exchanges",k),{status:C,processedAt:Vt()}),await d()}catch(I){console.error("Error updating exchange:",I),alert("Error updating exchange status")}f(null)},g=s==="all"?n:n.filter(k=>k.status===s),v={total:n.length,pending:n.filter(k=>k.status==="pending").length,completed:n.filter(k=>k.status==="completed").length,cancelled:n.filter(k=>k.status==="cancelled").length,totalValue:n.filter(k=>k.status==="completed").reduce((k,C)=>k+(C.kinderbucksAmount||0),0)},w=k=>{switch(k){case"completed":return c.jsx(As,{size:18,color:"var(--kb-green)"});case"pending":return c.jsx(Ya,{size:18,color:"#e67e22"});case"cancelled":return c.jsx(MV,{size:18,color:"#e74c3c"});default:return c.jsx(Oy,{size:18,color:"var(--kb-gray-400)"})}},T=k=>{switch(k){case"completed":return{background:"#d4edda",color:"var(--kb-green)"};case"pending":return{background:"#fff3cd",color:"#856404"};case"cancelled":return{background:"#f8d7da",color:"#721c24"};default:return{background:"#f8f9fa",color:"var(--kb-gray-600)"}}};return t?c.jsx(Vn,{title:"Exchange Management",children:c.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:c.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading exchanges..."})})}):c.jsxs(Vn,{title:"Exchange Management",children:[c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[c.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"#e67e22"},children:v.pending}),c.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Pending"})]}),c.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-green)"},children:v.completed}),c.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Completed"})]}),c.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[c.jsxs("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-gold-dark)"},children:["$",v.totalValue.toFixed(0)]}),c.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Exchanged"})]})]}),c.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem",flexWrap:"wrap"},children:[{value:"all",label:`All (${v.total})`},{value:"pending",label:`Pending (${v.pending})`},{value:"completed",label:`Completed (${v.completed})`},{value:"cancelled",label:`Cancelled (${v.cancelled})`}].map(k=>c.jsx("button",{onClick:()=>a(k.value),className:s===k.value?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem"},children:k.label},k.value))}),c.jsx("div",{className:"card",children:g.length===0?c.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[c.jsx(df,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),c.jsxs("p",{children:["No ",s!=="all"?s:""," exchanges found"]})]}):c.jsxs("div",{children:[c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 150px",gap:"1rem",padding:"0.75rem 1rem",borderBottom:"2px solid var(--kb-navy)",fontWeight:"600",color:"var(--kb-navy)",fontSize:"0.85rem"},children:[c.jsx("div",{children:"Date"}),c.jsx("div",{children:"Amount"}),c.jsx("div",{children:"Tier & Bonus"}),c.jsx("div",{children:"Status"}),c.jsx("div",{children:"Actions"})]}),g.map(k=>{var I,V,B,P,G,$,H;const C=kB[k.tier]||Xt;return c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 150px",gap:"1rem",padding:"1rem",borderBottom:"1px solid var(--kb-gray-100)",alignItems:"center",background:k.status==="pending"?"rgba(230, 126, 34, 0.05)":"transparent"},children:[c.jsxs("div",{children:[c.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:((B=(V=(I=k.createdAt)==null?void 0:I.toDate)==null?void 0:V.call(I))==null?void 0:B.toLocaleDateString())||"Unknown"}),c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:(($=(G=(P=k.createdAt)==null?void 0:P.toDate)==null?void 0:G.call(P))==null?void 0:$.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))||""})]}),c.jsxs("div",{children:[c.jsxs("div",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:["$",k.usdAmount," USD"]}),c.jsxs("div",{style:{fontSize:"0.9rem",color:"var(--kb-gold-dark)"},children:[" $",(H=k.kinderbucksAmount)==null?void 0:H.toFixed(2)," KB"]})]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(C,{size:18,color:"var(--kb-gray-500)"}),c.jsxs("div",{children:[c.jsx("div",{style:{fontSize:"0.9rem",color:"var(--kb-gray-700)",textTransform:"capitalize"},children:k.tier||"curious"}),c.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--kb-green)"},children:["+",Math.round((k.bonusRate||.1)*100),"% bonus"]})]})]}),c.jsx("div",{children:c.jsxs("span",{className:"badge",style:{...T(k.status),display:"inline-flex",alignItems:"center",gap:"0.25rem"},children:[w(k.status),k.status]})}),c.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[k.status==="pending"&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>m(k.id,"completed"),disabled:l===k.id,className:"btn btn-primary",style:{padding:"0.4rem 0.75rem",fontSize:"0.8rem"},children:l===k.id?"...":"Approve"}),c.jsx("button",{onClick:()=>m(k.id,"cancelled"),disabled:l===k.id,className:"btn btn-secondary",style:{padding:"0.4rem 0.75rem",fontSize:"0.8rem"},children:"Cancel"})]}),k.status==="completed"&&c.jsx("span",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Processed"}),k.status==="cancelled"&&c.jsx("button",{onClick:()=>m(k.id,"pending"),disabled:l===k.id,className:"btn btn-secondary",style:{padding:"0.4rem 0.75rem",fontSize:"0.8rem"},children:"Reopen"})]})]},k.id)})]})})]})}const km={curious:Xt,hooked:xr,lineAndSinker:Ai,patron:Ln},Tm={curious:"#888888",hooked:"#2e7d32",lineAndSinker:"#1565c0",patron:"#c9a227"};function SB(){const[n,e]=N.useState([]),[t,r]=N.useState([]),[s,a]=N.useState(!0),[l,f]=N.useState("checkins"),[d,m]=N.useState("all");N.useEffect(()=>{async function k(){try{const I=(await yr(En(qe,"members"))).docs.map(B=>({id:B.id,...B.data()})),V=await Vo();e(I),r(V),a(!1)}catch(C){console.error("Error loading members:",C),a(!1)}}k()},[]);const g=k=>{const C=t.find(I=>I.code===k);return C?C.name:k},v=[...n].sort((k,C)=>{var I,V,B,P,G,$;switch(l){case"checkins":return(C.totalCheckins||0)-(k.totalCheckins||0);case"businesses":return(((I=C.businessesVisited)==null?void 0:I.length)||0)-(((V=k.businessesVisited)==null?void 0:V.length)||0);case"recent":const H=((P=(B=k.lastCheckin)==null?void 0:B.toDate)==null?void 0:P.call(B))||new Date(0);return((($=(G=C.lastCheckin)==null?void 0:G.toDate)==null?void 0:$.call(G))||new Date(0))-H;default:return 0}}),w=d==="all"?v:v.filter(k=>k.tier===d),T={total:n.length,curious:n.filter(k=>k.tier==="curious").length,hooked:n.filter(k=>k.tier==="hooked").length,lineAndSinker:n.filter(k=>k.tier==="lineAndSinker").length,patron:n.filter(k=>k.tier==="patron").length,totalCheckins:n.reduce((k,C)=>k+(C.totalCheckins||0),0)};return s?c.jsx(Vn,{title:"Member Management",children:c.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:c.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading members..."})})}):c.jsxs(Vn,{title:"Member Management",children:[c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(130px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[c.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:T.total}),c.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Members"})]}),Object.entries(km).map(([k,C])=>{var I;return c.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[c.jsx(C,{size:20,color:Tm[k]}),c.jsx("span",{style:{fontSize:"1.5rem",fontWeight:"700",color:Tm[k]},children:T[k]})]}),c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)",textTransform:"capitalize"},children:((I=Jn[k])==null?void 0:I.name)||k})]},k)})]}),c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[c.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[c.jsx("button",{onClick:()=>m("all"),className:d==="all"?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem"},children:"All"}),Object.entries(km).map(([k,C])=>c.jsx("button",{onClick:()=>m(k),className:d===k?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:c.jsx(C,{size:16})},k))]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx("span",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"Sort by:"}),c.jsxs("select",{value:l,onChange:k=>f(k.target.value),style:{padding:"0.5rem"},children:[c.jsx("option",{value:"checkins",children:"Most Check-ins"}),c.jsx("option",{value:"businesses",children:"Most Businesses"}),c.jsx("option",{value:"recent",children:"Recent Activity"})]})]})]}),c.jsx("div",{className:"card",children:w.length===0?c.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[c.jsx(Si,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),c.jsx("p",{children:"No members found"})]}):c.jsxs("div",{children:[c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 2fr",gap:"1rem",padding:"0.75rem 1rem",borderBottom:"2px solid var(--kb-navy)",fontWeight:"600",color:"var(--kb-navy)",fontSize:"0.85rem"},children:[c.jsx("div",{children:"Member"}),c.jsx("div",{children:"Tier"}),c.jsx("div",{children:"Activity"}),c.jsx("div",{children:"Businesses Visited"})]}),w.map(k=>{var P,G,$,H,A;const C=km[k.tier]||Xt,I=Tm[k.tier]||"#888",V=Jn[k.tier]||Jn.curious,B=((P=k.businessesVisited)==null?void 0:P.length)||0;return c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 2fr",gap:"1rem",padding:"1rem",borderBottom:"1px solid var(--kb-gray-100)",alignItems:"center"},children:[c.jsxs("div",{children:[c.jsxs("div",{style:{fontFamily:"monospace",fontSize:"0.85rem",color:"var(--kb-gray-500)",wordBreak:"break-all"},children:[k.id.substring(0,16),"..."]}),k.lastCheckin&&c.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-400)",display:"flex",alignItems:"center",gap:"0.25rem",marginTop:"0.25rem"},children:[c.jsx(Ly,{size:12}),"Last: ",((H=($=(G=k.lastCheckin)==null?void 0:G.toDate)==null?void 0:$.call(G))==null?void 0:H.toLocaleDateString())||"Unknown"]})]}),c.jsxs("div",{children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:I,fontWeight:"600"},children:[c.jsx(C,{size:20}),V.name]}),c.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:[Math.round(V.bonus*100),"% bonus"]})]}),c.jsxs("div",{children:[c.jsxs("div",{style:{fontWeight:"600",color:"var(--kb-navy)",display:"flex",alignItems:"center",gap:"0.25rem"},children:[c.jsx(pl,{size:16}),k.totalCheckins||0]}),c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:"check-ins"})]}),c.jsxs("div",{children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",marginBottom:"0.5rem",color:"var(--kb-gray-600)"},children:[c.jsx(Pc,{size:14}),c.jsx("span",{style:{fontWeight:"500"},children:B}),c.jsx("span",{style:{fontSize:"0.85rem"},children:"businesses"})]}),((A=k.businessesVisited)==null?void 0:A.length)>0&&c.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.25rem"},children:[k.businessesVisited.slice(0,3).map(b=>c.jsx("span",{style:{fontSize:"0.75rem",padding:"0.15rem 0.5rem",background:"var(--kb-gray-100)",borderRadius:"4px",color:"var(--kb-gray-600)"},children:g(b)},b)),k.businessesVisited.length>3&&c.jsxs("span",{style:{fontSize:"0.75rem",color:"var(--kb-gray-400)"},children:["+",k.businessesVisited.length-3," more"]})]})]})]},k.id)})]})}),c.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"var(--kb-gray-50)",borderRadius:"8px",textAlign:"center",color:"var(--kb-gray-600)",fontSize:"0.9rem"},children:["Total of ",c.jsx("strong",{children:T.totalCheckins})," check-ins across ",c.jsx("strong",{children:T.total})," members"]})]})}const Sm={admin:{label:"Admin",color:"#dc2626",bgColor:"#fef2f2",Icon:Ph,description:"Full system access"},business:{label:"Business",color:"#2563eb",bgColor:"#eff6ff",Icon:Qt,description:"Business owner access"},member:{label:"Member",color:"var(--kb-green)",bgColor:"#f0fdf4",Icon:Ba,description:"Regular member"}};function bB(){const[n,e]=N.useState([]),[t,r]=N.useState([]),[s,a]=N.useState(!0),[l,f]=N.useState(""),[d,m]=N.useState("all"),[g,v]=N.useState(null),[w,T]=N.useState(null),[k,C]=N.useState(""),I=async()=>{const[H,A]=await Promise.all([mV(),Vo()]);e(H),r(A),a(!1)};N.useEffect(()=>{I()},[]);const V=async(H,A)=>{try{await fV(H,A),C("Role updated successfully"),setTimeout(()=>C(""),3e3),await I(),v(null)}catch(b){console.error("Error updating role:",b),alert("Error updating role")}},B=async(H,A)=>{try{await pV(H,A),C("Business assigned successfully"),setTimeout(()=>C(""),3e3),await I(),T(null)}catch(b){console.error("Error assigning business:",b),alert("Error assigning business")}},P=n.filter(H=>{var j,L;const A=((j=H.email)==null?void 0:j.toLowerCase().includes(l.toLowerCase()))||((L=H.displayName)==null?void 0:L.toLowerCase().includes(l.toLowerCase())),b=d==="all"||H.role===d;return A&&b}),G={total:n.length,admins:n.filter(H=>H.role==="admin").length,businesses:n.filter(H=>H.role==="business").length,members:n.filter(H=>H.role==="member").length},$=H=>H?(H.toDate?H.toDate():new Date(H)).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Never";return s?c.jsx(Vn,{title:"User Management",children:c.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:c.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading..."})})}):c.jsxs(Vn,{title:"User Management",children:[k&&c.jsxs("div",{style:{position:"fixed",top:"100px",right:"2rem",background:"var(--kb-green)",color:"white",padding:"1rem 1.5rem",borderRadius:"8px",display:"flex",alignItems:"center",gap:"0.75rem",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:1e3},children:[c.jsx(As,{size:20}),c.jsx("span",{children:k})]}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[c.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:G.total}),c.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Users"})]}),c.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"#dc2626"},children:G.admins}),c.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Admins"})]}),c.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"#2563eb"},children:G.businesses}),c.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Businesses"})]}),c.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-green)"},children:G.members}),c.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Members"})]})]}),c.jsx("div",{className:"card",style:{marginBottom:"2rem"},children:c.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap",alignItems:"center"},children:[c.jsxs("div",{style:{flex:1,minWidth:"200px",position:"relative"},children:[c.jsx(kM,{size:18,color:"var(--kb-gray-400)",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)"}}),c.jsx("input",{type:"text",placeholder:"Search by name or email...",value:l,onChange:H=>f(H.target.value),style:{width:"100%",paddingLeft:"40px"}})]}),c.jsxs("select",{value:d,onChange:H=>m(H.target.value),style:{minWidth:"150px"},children:[c.jsx("option",{value:"all",children:"All Roles"}),c.jsx("option",{value:"admin",children:"Admins"}),c.jsx("option",{value:"business",children:"Businesses"}),c.jsx("option",{value:"member",children:"Members"})]})]})}),c.jsxs("div",{className:"card",children:[c.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(Si,{size:20})," All Users (",P.length,")"]}),P.length===0?c.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[c.jsx(Si,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),c.jsx("p",{children:"No users found"})]}):c.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:P.map(H=>{const A=Sm[H.role]||Sm.member,b=A.Icon;return c.jsx("div",{style:{background:"var(--kb-gray-50)",border:"1px solid var(--kb-gray-200)",borderRadius:"12px",padding:"1.25rem"},children:c.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"1rem"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[c.jsx("div",{style:{width:"48px",height:"48px",background:A.bgColor,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsx(b,{size:24,color:A.color})}),c.jsxs("div",{children:[c.jsxs("div",{style:{fontWeight:"600",color:"var(--kb-navy)",fontSize:"1.05rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[H.displayName||"Unnamed User",H.role==="admin"&&c.jsx(Ln,{size:16,color:"#c9a227"})]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:[c.jsx(KT,{size:14}),H.email]}),H.businessCode&&c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#2563eb",fontSize:"0.85rem",marginTop:"0.25rem"},children:[c.jsx(Qt,{size:14}),H.businessCode]})]})]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[c.jsx("div",{style:{padding:"0.4rem 0.8rem",background:A.bgColor,color:A.color,borderRadius:"6px",fontSize:"0.85rem",fontWeight:"600"},children:A.label}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:[c.jsx(Ly,{size:14}),$(H.lastLogin)]}),c.jsxs("div",{style:{position:"relative"},children:[c.jsx("button",{onClick:()=>v(g===H.id?null:H.id),className:"btn btn-secondary",style:{padding:"0.5rem"},children:c.jsx(GV,{size:18})}),g===H.id&&c.jsxs("div",{style:{position:"absolute",right:0,top:"100%",marginTop:"0.5rem",background:"white",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:100,minWidth:"180px",overflow:"hidden"},children:[c.jsx("div",{style:{padding:"0.75rem",borderBottom:"1px solid var(--kb-gray-200)"},children:c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)",marginBottom:"0.25rem"},children:"Change Role"})}),Object.entries(Sm).map(([j,L])=>c.jsxs("button",{onClick:()=>V(H.id,j),style:{display:"flex",alignItems:"center",gap:"0.5rem",width:"100%",padding:"0.75rem 1rem",border:"none",background:H.role===j?L.bgColor:"transparent",color:"var(--kb-gray-700)",cursor:"pointer",textAlign:"left"},children:[c.jsx(L.Icon,{size:16,color:L.color}),L.label,H.role===j&&c.jsx(As,{size:14,color:L.color,style:{marginLeft:"auto"}})]},j)),H.role==="business"&&c.jsxs(c.Fragment,{children:[c.jsx("div",{style:{borderTop:"1px solid var(--kb-gray-200)"}}),c.jsxs("button",{onClick:()=>{v(null),T(H.id)},style:{display:"flex",alignItems:"center",gap:"0.5rem",width:"100%",padding:"0.75rem 1rem",border:"none",background:"transparent",color:"#2563eb",cursor:"pointer",textAlign:"left"},children:[c.jsx(Qt,{size:16}),"Assign Business"]})]})]})]})]})]})},H.id)})})]}),w&&c.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:1e3},children:c.jsxs("div",{className:"card",style:{maxWidth:"400px",width:"100%",padding:"1.5rem"},children:[c.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Assign Business"}),c.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1rem"},children:"Select a business to assign to this user:"}),c.jsx("div",{style:{maxHeight:"300px",overflowY:"auto",marginBottom:"1rem"},children:t.map(H=>c.jsxs("button",{onClick:()=>B(w,H.code),style:{display:"flex",alignItems:"center",gap:"0.75rem",width:"100%",padding:"0.75rem",border:"1px solid var(--kb-gray-200)",borderRadius:"8px",background:"white",cursor:"pointer",marginBottom:"0.5rem",textAlign:"left"},children:[c.jsx(Qt,{size:18,color:"var(--kb-navy)"}),c.jsxs("div",{children:[c.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:H.name}),c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:H.code})]})]},H.code))}),c.jsx("button",{onClick:()=>T(null),className:"btn btn-secondary",style:{width:"100%"},children:"Cancel"})]})})]})}function IB(){return c.jsx(yV,{children:c.jsx(RC,{children:c.jsxs(oC,{children:[c.jsx(St,{path:"/",element:c.jsx(R6,{})}),c.jsx(St,{path:"/about",element:c.jsx(W6,{})}),c.jsx(St,{path:"/benefits",element:c.jsx(K6,{})}),c.jsx(St,{path:"/businesses",element:c.jsx(Q6,{})}),c.jsx(St,{path:"/exchange",element:c.jsx(J6,{})}),c.jsx(St,{path:"/login",element:c.jsx(tB,{})}),c.jsx(St,{path:"/account",element:c.jsx(Z6,{})}),c.jsx(St,{path:"/profile",element:c.jsx(eB,{})}),c.jsx(St,{path:"/card",element:c.jsx(iB,{})}),c.jsx(St,{path:"/scan/:serial",element:c.jsx(dB,{})}),c.jsx(St,{path:"/checkin/:businessCode",element:c.jsx(gB,{})}),c.jsx(St,{path:"/business/dashboard",element:c.jsx(as,{allowedRoles:["business","admin"],children:c.jsx(yB,{})})}),c.jsx(St,{path:"/admin/dashboard",element:c.jsx(as,{allowedRoles:["admin"],children:c.jsx(vB,{})})}),c.jsx(St,{path:"/admin/exchanges",element:c.jsx(as,{allowedRoles:["admin"],children:c.jsx(TB,{})})}),c.jsx(St,{path:"/admin/members",element:c.jsx(as,{allowedRoles:["admin"],children:c.jsx(SB,{})})}),c.jsx(St,{path:"/admin/generate",element:c.jsx(as,{allowedRoles:["admin"],children:c.jsx(xB,{})})}),c.jsx(St,{path:"/admin/issue",element:c.jsx(as,{allowedRoles:["admin"],children:c.jsx(_B,{})})}),c.jsx(St,{path:"/admin/businesses",element:c.jsx(as,{allowedRoles:["admin"],children:c.jsx(EB,{})})}),c.jsx(St,{path:"/admin/users",element:c.jsx(as,{allowedRoles:["admin"],children:c.jsx(bB,{})})})]})})})}l2.createRoot(document.getElementById("root")).render(c.jsx(N.StrictMode,{children:c.jsx(IB,{})}));
