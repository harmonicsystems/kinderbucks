(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();function QI(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var hp={exports:{}},Ic={},fp={exports:{}},$e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ix;function YI(){if(ix)return $e;ix=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function x($){return $===null||typeof $!="object"?null:($=y&&$[y]||$["@@iterator"],typeof $=="function"?$:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,S={};function T($,te,je){this.props=$,this.context=te,this.refs=S,this.updater=je||E}T.prototype.isReactComponent={},T.prototype.setState=function($,te){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,te,"setState")},T.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function P(){}P.prototype=T.prototype;function M($,te,je){this.props=$,this.context=te,this.refs=S,this.updater=je||E}var D=M.prototype=new P;D.constructor=M,k(D,T.prototype),D.isPureReactComponent=!0;var U=Array.isArray,H=Object.prototype.hasOwnProperty,K={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function C($,te,je){var Ce,Ve={},Be=null,se=null;if(te!=null)for(Ce in te.ref!==void 0&&(se=te.ref),te.key!==void 0&&(Be=""+te.key),te)H.call(te,Ce)&&!A.hasOwnProperty(Ce)&&(Ve[Ce]=te[Ce]);var Q=arguments.length-2;if(Q===1)Ve.children=je;else if(1<Q){for(var fe=Array(Q),Ke=0;Ke<Q;Ke++)fe[Ke]=arguments[Ke+2];Ve.children=fe}if($&&$.defaultProps)for(Ce in Q=$.defaultProps,Q)Ve[Ce]===void 0&&(Ve[Ce]=Q[Ce]);return{$$typeof:n,type:$,key:Be,ref:se,props:Ve,_owner:K.current}}function N($,te){return{$$typeof:n,type:$.type,key:te,ref:$.ref,props:$.props,_owner:$._owner}}function L($){return typeof $=="object"&&$!==null&&$.$$typeof===n}function B($){var te={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(je){return te[je]})}var F=/\/+/g;function V($,te){return typeof $=="object"&&$!==null&&$.key!=null?B(""+$.key):te.toString(36)}function Me($,te,je,Ce,Ve){var Be=typeof $;(Be==="undefined"||Be==="boolean")&&($=null);var se=!1;if($===null)se=!0;else switch(Be){case"string":case"number":se=!0;break;case"object":switch($.$$typeof){case n:case e:se=!0}}if(se)return se=$,Ve=Ve(se),$=Ce===""?"."+V(se,0):Ce,U(Ve)?(je="",$!=null&&(je=$.replace(F,"$&/")+"/"),Me(Ve,te,je,"",function(Ke){return Ke})):Ve!=null&&(L(Ve)&&(Ve=N(Ve,je+(!Ve.key||se&&se.key===Ve.key?"":(""+Ve.key).replace(F,"$&/")+"/")+$)),te.push(Ve)),1;if(se=0,Ce=Ce===""?".":Ce+":",U($))for(var Q=0;Q<$.length;Q++){Be=$[Q];var fe=Ce+V(Be,Q);se+=Me(Be,te,je,fe,Ve)}else if(fe=x($),typeof fe=="function")for($=fe.call($),Q=0;!(Be=$.next()).done;)Be=Be.value,fe=Ce+V(Be,Q++),se+=Me(Be,te,je,fe,Ve);else if(Be==="object")throw te=String($),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.");return se}function We($,te,je){if($==null)return $;var Ce=[],Ve=0;return Me($,Ce,"","",function(Be){return te.call(je,Be,Ve++)}),Ce}function st($){if($._status===-1){var te=$._result;te=te(),te.then(function(je){($._status===0||$._status===-1)&&($._status=1,$._result=je)},function(je){($._status===0||$._status===-1)&&($._status=2,$._result=je)}),$._status===-1&&($._status=0,$._result=te)}if($._status===1)return $._result.default;throw $._result}var Ie={current:null},re={transition:null},me={ReactCurrentDispatcher:Ie,ReactCurrentBatchConfig:re,ReactCurrentOwner:K};function ue(){throw Error("act(...) is not supported in production builds of React.")}return $e.Children={map:We,forEach:function($,te,je){We($,function(){te.apply(this,arguments)},je)},count:function($){var te=0;return We($,function(){te++}),te},toArray:function($){return We($,function(te){return te})||[]},only:function($){if(!L($))throw Error("React.Children.only expected to receive a single React element child.");return $}},$e.Component=T,$e.Fragment=t,$e.Profiler=s,$e.PureComponent=M,$e.StrictMode=r,$e.Suspense=d,$e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=me,$e.act=ue,$e.cloneElement=function($,te,je){if($==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+$+".");var Ce=k({},$.props),Ve=$.key,Be=$.ref,se=$._owner;if(te!=null){if(te.ref!==void 0&&(Be=te.ref,se=K.current),te.key!==void 0&&(Ve=""+te.key),$.type&&$.type.defaultProps)var Q=$.type.defaultProps;for(fe in te)H.call(te,fe)&&!A.hasOwnProperty(fe)&&(Ce[fe]=te[fe]===void 0&&Q!==void 0?Q[fe]:te[fe])}var fe=arguments.length-2;if(fe===1)Ce.children=je;else if(1<fe){Q=Array(fe);for(var Ke=0;Ke<fe;Ke++)Q[Ke]=arguments[Ke+2];Ce.children=Q}return{$$typeof:n,type:$.type,key:Ve,ref:Be,props:Ce,_owner:se}},$e.createContext=function($){return $={$$typeof:c,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},$.Provider={$$typeof:l,_context:$},$.Consumer=$},$e.createElement=C,$e.createFactory=function($){var te=C.bind(null,$);return te.type=$,te},$e.createRef=function(){return{current:null}},$e.forwardRef=function($){return{$$typeof:h,render:$}},$e.isValidElement=L,$e.lazy=function($){return{$$typeof:g,_payload:{_status:-1,_result:$},_init:st}},$e.memo=function($,te){return{$$typeof:m,type:$,compare:te===void 0?null:te}},$e.startTransition=function($){var te=re.transition;re.transition={};try{$()}finally{re.transition=te}},$e.unstable_act=ue,$e.useCallback=function($,te){return Ie.current.useCallback($,te)},$e.useContext=function($){return Ie.current.useContext($)},$e.useDebugValue=function(){},$e.useDeferredValue=function($){return Ie.current.useDeferredValue($)},$e.useEffect=function($,te){return Ie.current.useEffect($,te)},$e.useId=function(){return Ie.current.useId()},$e.useImperativeHandle=function($,te,je){return Ie.current.useImperativeHandle($,te,je)},$e.useInsertionEffect=function($,te){return Ie.current.useInsertionEffect($,te)},$e.useLayoutEffect=function($,te){return Ie.current.useLayoutEffect($,te)},$e.useMemo=function($,te){return Ie.current.useMemo($,te)},$e.useReducer=function($,te,je){return Ie.current.useReducer($,te,je)},$e.useRef=function($){return Ie.current.useRef($)},$e.useState=function($){return Ie.current.useState($)},$e.useSyncExternalStore=function($,te,je){return Ie.current.useSyncExternalStore($,te,je)},$e.useTransition=function(){return Ie.current.useTransition()},$e.version="18.3.1",$e}var sx;function oy(){return sx||(sx=1,fp.exports=YI()),fp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ox;function XI(){if(ox)return Ic;ox=1;var n=oy(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(h,d,m){var g,y={},x=null,E=null;m!==void 0&&(x=""+m),d.key!==void 0&&(x=""+d.key),d.ref!==void 0&&(E=d.ref);for(g in d)r.call(d,g)&&!l.hasOwnProperty(g)&&(y[g]=d[g]);if(h&&h.defaultProps)for(g in d=h.defaultProps,d)y[g]===void 0&&(y[g]=d[g]);return{$$typeof:e,type:h,key:x,ref:E,props:y,_owner:s.current}}return Ic.Fragment=t,Ic.jsx=c,Ic.jsxs=c,Ic}var ax;function JI(){return ax||(ax=1,hp.exports=XI()),hp.exports}var o=JI(),j=oy();const qt=QI(j);var Yd={},mp={exports:{}},Pn={},pp={exports:{}},gp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lx;function ZI(){return lx||(lx=1,(function(n){function e(re,me){var ue=re.length;re.push(me);e:for(;0<ue;){var $=ue-1>>>1,te=re[$];if(0<s(te,me))re[$]=me,re[ue]=te,ue=$;else break e}}function t(re){return re.length===0?null:re[0]}function r(re){if(re.length===0)return null;var me=re[0],ue=re.pop();if(ue!==me){re[0]=ue;e:for(var $=0,te=re.length,je=te>>>1;$<je;){var Ce=2*($+1)-1,Ve=re[Ce],Be=Ce+1,se=re[Be];if(0>s(Ve,ue))Be<te&&0>s(se,Ve)?(re[$]=se,re[Be]=ue,$=Be):(re[$]=Ve,re[Ce]=ue,$=Ce);else if(Be<te&&0>s(se,ue))re[$]=se,re[Be]=ue,$=Be;else break e}}return me}function s(re,me){var ue=re.sortIndex-me.sortIndex;return ue!==0?ue:re.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,h=c.now();n.unstable_now=function(){return c.now()-h}}var d=[],m=[],g=1,y=null,x=3,E=!1,k=!1,S=!1,T=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function D(re){for(var me=t(m);me!==null;){if(me.callback===null)r(m);else if(me.startTime<=re)r(m),me.sortIndex=me.expirationTime,e(d,me);else break;me=t(m)}}function U(re){if(S=!1,D(re),!k)if(t(d)!==null)k=!0,st(H);else{var me=t(m);me!==null&&Ie(U,me.startTime-re)}}function H(re,me){k=!1,S&&(S=!1,P(C),C=-1),E=!0;var ue=x;try{for(D(me),y=t(d);y!==null&&(!(y.expirationTime>me)||re&&!B());){var $=y.callback;if(typeof $=="function"){y.callback=null,x=y.priorityLevel;var te=$(y.expirationTime<=me);me=n.unstable_now(),typeof te=="function"?y.callback=te:y===t(d)&&r(d),D(me)}else r(d);y=t(d)}if(y!==null)var je=!0;else{var Ce=t(m);Ce!==null&&Ie(U,Ce.startTime-me),je=!1}return je}finally{y=null,x=ue,E=!1}}var K=!1,A=null,C=-1,N=5,L=-1;function B(){return!(n.unstable_now()-L<N)}function F(){if(A!==null){var re=n.unstable_now();L=re;var me=!0;try{me=A(!0,re)}finally{me?V():(K=!1,A=null)}}else K=!1}var V;if(typeof M=="function")V=function(){M(F)};else if(typeof MessageChannel<"u"){var Me=new MessageChannel,We=Me.port2;Me.port1.onmessage=F,V=function(){We.postMessage(null)}}else V=function(){T(F,0)};function st(re){A=re,K||(K=!0,V())}function Ie(re,me){C=T(function(){re(n.unstable_now())},me)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(re){re.callback=null},n.unstable_continueExecution=function(){k||E||(k=!0,st(H))},n.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<re?Math.floor(1e3/re):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(re){switch(x){case 1:case 2:case 3:var me=3;break;default:me=x}var ue=x;x=me;try{return re()}finally{x=ue}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(re,me){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var ue=x;x=re;try{return me()}finally{x=ue}},n.unstable_scheduleCallback=function(re,me,ue){var $=n.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?$+ue:$):ue=$,re){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=ue+te,re={id:g++,callback:me,priorityLevel:re,startTime:ue,expirationTime:te,sortIndex:-1},ue>$?(re.sortIndex=ue,e(m,re),t(d)===null&&re===t(m)&&(S?(P(C),C=-1):S=!0,Ie(U,ue-$))):(re.sortIndex=te,e(d,re),k||E||(k=!0,st(H))),re},n.unstable_shouldYield=B,n.unstable_wrapCallback=function(re){var me=x;return function(){var ue=x;x=me;try{return re.apply(this,arguments)}finally{x=ue}}}})(gp)),gp}var cx;function eC(){return cx||(cx=1,pp.exports=ZI()),pp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ux;function tC(){if(ux)return Pn;ux=1;var n=oy(),e=eC();function t(i){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+i,u=1;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function l(i,a){c(i,a),c(i+"Capture",a)}function c(i,a){for(s[i]=a,i=0;i<a.length;i++)r.add(a[i])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},y={};function x(i){return d.call(y,i)?!0:d.call(g,i)?!1:m.test(i)?y[i]=!0:(g[i]=!0,!1)}function E(i,a,u,p){if(u!==null&&u.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return p?!1:u!==null?!u.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function k(i,a,u,p){if(a===null||typeof a>"u"||E(i,a,u,p))return!0;if(p)return!1;if(u!==null)switch(u.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function S(i,a,u,p,v,w,I){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=p,this.attributeNamespace=v,this.mustUseProperty=u,this.propertyName=i,this.type=a,this.sanitizeURL=w,this.removeEmptyString=I}var T={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){T[i]=new S(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var a=i[0];T[a]=new S(a,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){T[i]=new S(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){T[i]=new S(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){T[i]=new S(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){T[i]=new S(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){T[i]=new S(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){T[i]=new S(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){T[i]=new S(i,5,!1,i.toLowerCase(),null,!1,!1)});var P=/[\-:]([a-z])/g;function M(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var a=i.replace(P,M);T[a]=new S(a,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var a=i.replace(P,M);T[a]=new S(a,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var a=i.replace(P,M);T[a]=new S(a,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){T[i]=new S(i,1,!1,i.toLowerCase(),null,!1,!1)}),T.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){T[i]=new S(i,1,!1,i.toLowerCase(),null,!0,!0)});function D(i,a,u,p){var v=T.hasOwnProperty(a)?T[a]:null;(v!==null?v.type!==0:p||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(k(a,u,v,p)&&(u=null),p||v===null?x(a)&&(u===null?i.removeAttribute(a):i.setAttribute(a,""+u)):v.mustUseProperty?i[v.propertyName]=u===null?v.type===3?!1:"":u:(a=v.attributeName,p=v.attributeNamespace,u===null?i.removeAttribute(a):(v=v.type,u=v===3||v===4&&u===!0?"":""+u,p?i.setAttributeNS(p,a,u):i.setAttribute(a,u))))}var U=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,H=Symbol.for("react.element"),K=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),B=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),Me=Symbol.for("react.suspense_list"),We=Symbol.for("react.memo"),st=Symbol.for("react.lazy"),Ie=Symbol.for("react.offscreen"),re=Symbol.iterator;function me(i){return i===null||typeof i!="object"?null:(i=re&&i[re]||i["@@iterator"],typeof i=="function"?i:null)}var ue=Object.assign,$;function te(i){if($===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);$=a&&a[1]||""}return`
`+$+i}var je=!1;function Ce(i,a){if(!i||je)return"";je=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(X){var p=X}Reflect.construct(i,[],a)}else{try{a.call()}catch(X){p=X}i.call(a.prototype)}else{try{throw Error()}catch(X){p=X}i()}}catch(X){if(X&&p&&typeof X.stack=="string"){for(var v=X.stack.split(`
`),w=p.stack.split(`
`),I=v.length-1,O=w.length-1;1<=I&&0<=O&&v[I]!==w[O];)O--;for(;1<=I&&0<=O;I--,O--)if(v[I]!==w[O]){if(I!==1||O!==1)do if(I--,O--,0>O||v[I]!==w[O]){var z=`
`+v[I].replace(" at new "," at ");return i.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",i.displayName)),z}while(1<=I&&0<=O);break}}}finally{je=!1,Error.prepareStackTrace=u}return(i=i?i.displayName||i.name:"")?te(i):""}function Ve(i){switch(i.tag){case 5:return te(i.type);case 16:return te("Lazy");case 13:return te("Suspense");case 19:return te("SuspenseList");case 0:case 2:case 15:return i=Ce(i.type,!1),i;case 11:return i=Ce(i.type.render,!1),i;case 1:return i=Ce(i.type,!0),i;default:return""}}function Be(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case A:return"Fragment";case K:return"Portal";case N:return"Profiler";case C:return"StrictMode";case V:return"Suspense";case Me:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case B:return(i.displayName||"Context")+".Consumer";case L:return(i._context.displayName||"Context")+".Provider";case F:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case We:return a=i.displayName||null,a!==null?a:Be(i.type)||"Memo";case st:a=i._payload,i=i._init;try{return Be(i(a))}catch{}}return null}function se(i){var a=i.type;switch(i.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=a.render,i=i.displayName||i.name||"",a.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Be(a);case 8:return a===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function Q(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function fe(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Ke(i){var a=fe(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),p=""+i[a];if(!i.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var v=u.get,w=u.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return v.call(this)},set:function(I){p=""+I,w.call(this,I)}}),Object.defineProperty(i,a,{enumerable:u.enumerable}),{getValue:function(){return p},setValue:function(I){p=""+I},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function xt(i){i._valueTracker||(i._valueTracker=Ke(i))}function Z(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var u=a.getValue(),p="";return i&&(p=fe(i)?i.checked?"true":"false":i.value),i=p,i!==u?(a.setValue(i),!0):!1}function ye(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Le(i,a){var u=a.checked;return ue({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??i._wrapperState.initialChecked})}function Ue(i,a){var u=a.defaultValue==null?"":a.defaultValue,p=a.checked!=null?a.checked:a.defaultChecked;u=Q(a.value!=null?a.value:u),i._wrapperState={initialChecked:p,initialValue:u,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function ot(i,a){a=a.checked,a!=null&&D(i,"checked",a,!1)}function Qt(i,a){ot(i,a);var u=Q(a.value),p=a.type;if(u!=null)p==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+u):i.value!==""+u&&(i.value=""+u);else if(p==="submit"||p==="reset"){i.removeAttribute("value");return}a.hasOwnProperty("value")?dt(i,a.type,u):a.hasOwnProperty("defaultValue")&&dt(i,a.type,Q(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(i.defaultChecked=!!a.defaultChecked)}function Wr(i,a,u){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var p=a.type;if(!(p!=="submit"&&p!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+i._wrapperState.initialValue,u||a===i.value||(i.value=a),i.defaultValue=a}u=i.name,u!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,u!==""&&(i.name=u)}function dt(i,a,u){(a!=="number"||ye(i.ownerDocument)!==i)&&(u==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+u&&(i.defaultValue=""+u))}var ht=Array.isArray;function xr(i,a,u,p){if(i=i.options,a){a={};for(var v=0;v<u.length;v++)a["$"+u[v]]=!0;for(u=0;u<i.length;u++)v=a.hasOwnProperty("$"+i[u].value),i[u].selected!==v&&(i[u].selected=v),v&&p&&(i[u].defaultSelected=!0)}else{for(u=""+Q(u),a=null,v=0;v<i.length;v++){if(i[v].value===u){i[v].selected=!0,p&&(i[v].defaultSelected=!0);return}a!==null||i[v].disabled||(a=i[v])}a!==null&&(a.selected=!0)}}function Ml(i,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return ue({},a,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Vl(i,a){var u=a.value;if(u==null){if(u=a.children,a=a.defaultValue,u!=null){if(a!=null)throw Error(t(92));if(ht(u)){if(1<u.length)throw Error(t(93));u=u[0]}a=u}a==null&&(a=""),u=a}i._wrapperState={initialValue:Q(u)}}function Vu(i,a){var u=Q(a.value),p=Q(a.defaultValue);u!=null&&(u=""+u,u!==i.value&&(i.value=u),a.defaultValue==null&&i.defaultValue!==u&&(i.defaultValue=u)),p!=null&&(i.defaultValue=""+p)}function ts(i){var a=i.textContent;a===i._wrapperState.initialValue&&a!==""&&a!==null&&(i.value=a)}function Ll(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ra(i,a){return i==null||i==="http://www.w3.org/1999/xhtml"?Ll(a):i==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var ns,Lu=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,u,p,v){MSApp.execUnsafeLocalFunction(function(){return i(a,u,p,v)})}:i})(function(i,a){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=a;else{for(ns=ns||document.createElement("div"),ns.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=ns.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;a.firstChild;)i.appendChild(a.firstChild)}});function ao(i,a){if(a){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=a;return}}i.textContent=a}var rs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ou=["Webkit","ms","Moz","O"];Object.keys(rs).forEach(function(i){Ou.forEach(function(a){a=a+i.charAt(0).toUpperCase()+i.substring(1),rs[a]=rs[i]})});function is(i,a,u){return a==null||typeof a=="boolean"||a===""?"":u||typeof a!="number"||a===0||rs.hasOwnProperty(i)&&rs[i]?(""+a).trim():a+"px"}function ia(i,a){i=i.style;for(var u in a)if(a.hasOwnProperty(u)){var p=u.indexOf("--")===0,v=is(u,a[u],p);u==="float"&&(u="cssFloat"),p?i.setProperty(u,v):i[u]=v}}var Ol=ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wr(i,a){if(a){if(Ol[i]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function sa(i,a){if(i.indexOf("-")===-1)return typeof a.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ss=null;function oa(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var yi=null,vi=null,Tt=null;function Bl(i){if(i=hc(i)){if(typeof yi!="function")throw Error(t(280));var a=i.stateNode;a&&(a=dd(a),yi(i.stateNode,i.type,a))}}function os(i){vi?Tt?Tt.push(i):Tt=[i]:vi=i}function as(){if(vi){var i=vi,a=Tt;if(Tt=vi=null,Bl(i),a)for(i=0;i<a.length;i++)Bl(a[i])}}function Bu(i,a){return i(a)}function zu(){}var $r=!1;function Fu(i,a,u){if($r)return i(a,u);$r=!0;try{return Bu(i,a,u)}finally{$r=!1,(vi!==null||Tt!==null)&&(zu(),as())}}function lo(i,a){var u=i.stateNode;if(u===null)return null;var p=dd(u);if(p===null)return null;u=p[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(i=i.type,p=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!p;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(t(231,a,typeof u));return u}var ls=!1;if(h)try{var cs={};Object.defineProperty(cs,"passive",{get:function(){ls=!0}}),window.addEventListener("test",cs,cs),window.removeEventListener("test",cs,cs)}catch{ls=!1}function Uu(i,a,u,p,v,w,I,O,z){var X=Array.prototype.slice.call(arguments,3);try{a.apply(u,X)}catch(oe){this.onError(oe)}}var xi=!1,Hr=null,aa=!1,er=null,Wu={onError:function(i){xi=!0,Hr=i}};function $u(i,a,u,p,v,w,I,O,z){xi=!1,Hr=null,Uu.apply(Wu,arguments)}function zl(i,a,u,p,v,w,I,O,z){if($u.apply(this,arguments),xi){if(xi){var X=Hr;xi=!1,Hr=null}else throw Error(t(198));aa||(aa=!0,er=X)}}function br(i){var a=i,u=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(u=a.return),i=a.return;while(i)}return a.tag===3?u:null}function Fl(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function Hu(i){if(br(i)!==i)throw Error(t(188))}function Ku(i){var a=i.alternate;if(!a){if(a=br(i),a===null)throw Error(t(188));return a!==i?null:i}for(var u=i,p=a;;){var v=u.return;if(v===null)break;var w=v.alternate;if(w===null){if(p=v.return,p!==null){u=p;continue}break}if(v.child===w.child){for(w=v.child;w;){if(w===u)return Hu(v),i;if(w===p)return Hu(v),a;w=w.sibling}throw Error(t(188))}if(u.return!==p.return)u=v,p=w;else{for(var I=!1,O=v.child;O;){if(O===u){I=!0,u=v,p=w;break}if(O===p){I=!0,p=v,u=w;break}O=O.sibling}if(!I){for(O=w.child;O;){if(O===u){I=!0,u=w,p=v;break}if(O===p){I=!0,p=w,u=v;break}O=O.sibling}if(!I)throw Error(t(189))}}if(u.alternate!==p)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?i:a}function qu(i){return i=Ku(i),i!==null?co(i):null}function co(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var a=co(i);if(a!==null)return a;i=i.sibling}return null}var Ul=e.unstable_scheduleCallback,la=e.unstable_cancelCallback,uo=e.unstable_shouldYield,wi=e.unstable_requestPaint,ft=e.unstable_now,Wf=e.unstable_getCurrentPriorityLevel,ca=e.unstable_ImmediatePriority,Wl=e.unstable_UserBlockingPriority,ho=e.unstable_NormalPriority,$l=e.unstable_LowPriority,ua=e.unstable_IdlePriority,fo=null,zn=null;function Gu(i){if(zn&&typeof zn.onCommitFiberRoot=="function")try{zn.onCommitFiberRoot(fo,i,void 0,(i.current.flags&128)===128)}catch{}}var Fn=Math.clz32?Math.clz32:mo,Kr=Math.log,tr=Math.LN2;function mo(i){return i>>>=0,i===0?32:31-(Kr(i)/tr|0)|0}var qr=64,us=4194304;function nt(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function bi(i,a){var u=i.pendingLanes;if(u===0)return 0;var p=0,v=i.suspendedLanes,w=i.pingedLanes,I=u&268435455;if(I!==0){var O=I&~v;O!==0?p=nt(O):(w&=I,w!==0&&(p=nt(w)))}else I=u&~v,I!==0?p=nt(I):w!==0&&(p=nt(w));if(p===0)return 0;if(a!==0&&a!==p&&(a&v)===0&&(v=p&-p,w=a&-a,v>=w||v===16&&(w&4194240)!==0))return a;if((p&4)!==0&&(p|=u&16),a=i.entangledLanes,a!==0)for(i=i.entanglements,a&=p;0<a;)u=31-Fn(a),v=1<<u,p|=i[u],a&=~v;return p}function po(i,a){switch(i){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function go(i,a){for(var u=i.suspendedLanes,p=i.pingedLanes,v=i.expirationTimes,w=i.pendingLanes;0<w;){var I=31-Fn(w),O=1<<I,z=v[I];z===-1?((O&u)===0||(O&p)!==0)&&(v[I]=po(O,a)):z<=a&&(i.expiredLanes|=O),w&=~O}}function Hl(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Kl(){var i=qr;return qr<<=1,(qr&4194240)===0&&(qr=64),i}function ql(i){for(var a=[],u=0;31>u;u++)a.push(i);return a}function yo(i,a,u){i.pendingLanes|=a,a!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,a=31-Fn(a),i[a]=u}function $f(i,a){var u=i.pendingLanes&~a;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=a,i.mutableReadLanes&=a,i.entangledLanes&=a,a=i.entanglements;var p=i.eventTimes;for(i=i.expirationTimes;0<u;){var v=31-Fn(u),w=1<<v;a[v]=0,p[v]=-1,i[v]=-1,u&=~w}}function Gl(i,a){var u=i.entangledLanes|=a;for(i=i.entanglements;u;){var p=31-Fn(u),v=1<<p;v&a|i[p]&a&&(i[p]|=a),u&=~v}}var Ye=0;function Gr(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Ql,da,Yl,Xl,Jl,Qr=!1,ha=[],Yr=null,Xr=null,tn=null,vo=new Map,ki=new Map,Un=[],Qu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ds(i,a){switch(i){case"focusin":case"focusout":Yr=null;break;case"dragenter":case"dragleave":Xr=null;break;case"mouseover":case"mouseout":tn=null;break;case"pointerover":case"pointerout":vo.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":ki.delete(a.pointerId)}}function kr(i,a,u,p,v,w){return i===null||i.nativeEvent!==w?(i={blockedOn:a,domEventName:u,eventSystemFlags:p,nativeEvent:w,targetContainers:[v]},a!==null&&(a=hc(a),a!==null&&da(a)),i):(i.eventSystemFlags|=p,a=i.targetContainers,v!==null&&a.indexOf(v)===-1&&a.push(v),i)}function Yu(i,a,u,p,v){switch(a){case"focusin":return Yr=kr(Yr,i,a,u,p,v),!0;case"dragenter":return Xr=kr(Xr,i,a,u,p,v),!0;case"mouseover":return tn=kr(tn,i,a,u,p,v),!0;case"pointerover":var w=v.pointerId;return vo.set(w,kr(vo.get(w)||null,i,a,u,p,v)),!0;case"gotpointercapture":return w=v.pointerId,ki.set(w,kr(ki.get(w)||null,i,a,u,p,v)),!0}return!1}function fa(i){var a=ko(i.target);if(a!==null){var u=br(a);if(u!==null){if(a=u.tag,a===13){if(a=Fl(u),a!==null){i.blockedOn=a,Jl(i.priority,function(){Yl(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function at(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var u=ma(i.domEventName,i.eventSystemFlags,a[0],i.nativeEvent);if(u===null){u=i.nativeEvent;var p=new u.constructor(u.type,u);ss=p,u.target.dispatchEvent(p),ss=null}else return a=hc(u),a!==null&&da(a),i.blockedOn=u,!1;a.shift()}return!0}function Xu(i,a,u){at(i)&&u.delete(a)}function Hf(){Qr=!1,Yr!==null&&at(Yr)&&(Yr=null),Xr!==null&&at(Xr)&&(Xr=null),tn!==null&&at(tn)&&(tn=null),vo.forEach(Xu),ki.forEach(Xu)}function hs(i,a){i.blockedOn===a&&(i.blockedOn=null,Qr||(Qr=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Hf)))}function fs(i){function a(v){return hs(v,i)}if(0<ha.length){hs(ha[0],i);for(var u=1;u<ha.length;u++){var p=ha[u];p.blockedOn===i&&(p.blockedOn=null)}}for(Yr!==null&&hs(Yr,i),Xr!==null&&hs(Xr,i),tn!==null&&hs(tn,i),vo.forEach(a),ki.forEach(a),u=0;u<Un.length;u++)p=Un[u],p.blockedOn===i&&(p.blockedOn=null);for(;0<Un.length&&(u=Un[0],u.blockedOn===null);)fa(u),u.blockedOn===null&&Un.shift()}var _i=U.ReactCurrentBatchConfig,Si=!0;function Jr(i,a,u,p){var v=Ye,w=_i.transition;_i.transition=null;try{Ye=1,Zl(i,a,u,p)}finally{Ye=v,_i.transition=w}}function Ju(i,a,u,p){var v=Ye,w=_i.transition;_i.transition=null;try{Ye=4,Zl(i,a,u,p)}finally{Ye=v,_i.transition=w}}function Zl(i,a,u,p){if(Si){var v=ma(i,a,u,p);if(v===null)nm(i,a,p,Zr,u),ds(i,p);else if(Yu(v,i,a,u,p))p.stopPropagation();else if(ds(i,p),a&4&&-1<Qu.indexOf(i)){for(;v!==null;){var w=hc(v);if(w!==null&&Ql(w),w=ma(i,a,u,p),w===null&&nm(i,a,p,Zr,u),w===v)break;v=w}v!==null&&p.stopPropagation()}else nm(i,a,p,null,u)}}var Zr=null;function ma(i,a,u,p){if(Zr=null,i=oa(p),i=ko(i),i!==null)if(a=br(i),a===null)i=null;else if(u=a.tag,u===13){if(i=Fl(a),i!==null)return i;i=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null);return Zr=i,null}function pa(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Wf()){case ca:return 1;case Wl:return 4;case ho:case $l:return 16;case ua:return 536870912;default:return 16}default:return 16}}var Wn=null,ga=null,Ei=null;function Zu(){if(Ei)return Ei;var i,a=ga,u=a.length,p,v="value"in Wn?Wn.value:Wn.textContent,w=v.length;for(i=0;i<u&&a[i]===v[i];i++);var I=u-i;for(p=1;p<=I&&a[u-p]===v[w-p];p++);return Ei=v.slice(i,1<p?1-p:void 0)}function xo(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function ei(){return!0}function ec(){return!1}function dn(i){function a(u,p,v,w,I){this._reactName=u,this._targetInst=v,this.type=p,this.nativeEvent=w,this.target=I,this.currentTarget=null;for(var O in i)i.hasOwnProperty(O)&&(u=i[O],this[O]=u?u(w):w[O]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?ei:ec,this.isPropagationStopped=ec,this}return ue(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=ei)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=ei)},persist:function(){},isPersistent:ei}),a}var ti={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wo=dn(ti),ms=ue({},ti,{view:0,detail:0}),ya=dn(ms),va,xa,$n,bo=ue({},ms,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ze,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==$n&&($n&&i.type==="mousemove"?(va=i.screenX-$n.screenX,xa=i.screenY-$n.screenY):xa=va=0,$n=i),va)},movementY:function(i){return"movementY"in i?i.movementY:xa}}),tc=dn(bo),ed=ue({},bo,{dataTransfer:0}),td=dn(ed),wa=ue({},ms,{relatedTarget:0}),nn=dn(wa),nd=ue({},ti,{animationName:0,elapsedTime:0,pseudoElement:0}),rd=dn(nd),ps=ue({},ti,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),f=dn(ps),b=ue({},ti,{data:0}),_=dn(b),R={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},G={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},J={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function de(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=J[i])?!!a[i]:!1}function ze(){return de}var At=ue({},ms,{key:function(i){if(i.key){var a=R[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=xo(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?G[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ze,charCode:function(i){return i.type==="keypress"?xo(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?xo(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),it=dn(At),Lt=ue({},bo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hn=dn(Lt),Ti=ue({},ms,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ze}),ni=dn(Ti),ri=ue({},ti,{propertyName:0,elapsedTime:0,pseudoElement:0}),ba=dn(ri),nc=ue({},bo,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),WT=dn(nc),$T=[9,13,27,32],Kf=h&&"CompositionEvent"in window,rc=null;h&&"documentMode"in document&&(rc=document.documentMode);var HT=h&&"TextEvent"in window&&!rc,Y0=h&&(!Kf||rc&&8<rc&&11>=rc),X0=" ",J0=!1;function Z0(i,a){switch(i){case"keyup":return $T.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ev(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ka=!1;function KT(i,a){switch(i){case"compositionend":return ev(a);case"keypress":return a.which!==32?null:(J0=!0,X0);case"textInput":return i=a.data,i===X0&&J0?null:i;default:return null}}function qT(i,a){if(ka)return i==="compositionend"||!Kf&&Z0(i,a)?(i=Zu(),Ei=ga=Wn=null,ka=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Y0&&a.locale!=="ko"?null:a.data;default:return null}}var GT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tv(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!GT[i.type]:a==="textarea"}function nv(i,a,u,p){os(p),a=ld(a,"onChange"),0<a.length&&(u=new wo("onChange","change",null,u,p),i.push({event:u,listeners:a}))}var ic=null,sc=null;function QT(i){wv(i,0)}function id(i){var a=Ia(i);if(Z(a))return i}function YT(i,a){if(i==="change")return a}var rv=!1;if(h){var qf;if(h){var Gf="oninput"in document;if(!Gf){var iv=document.createElement("div");iv.setAttribute("oninput","return;"),Gf=typeof iv.oninput=="function"}qf=Gf}else qf=!1;rv=qf&&(!document.documentMode||9<document.documentMode)}function sv(){ic&&(ic.detachEvent("onpropertychange",ov),sc=ic=null)}function ov(i){if(i.propertyName==="value"&&id(sc)){var a=[];nv(a,sc,i,oa(i)),Fu(QT,a)}}function XT(i,a,u){i==="focusin"?(sv(),ic=a,sc=u,ic.attachEvent("onpropertychange",ov)):i==="focusout"&&sv()}function JT(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return id(sc)}function ZT(i,a){if(i==="click")return id(a)}function eI(i,a){if(i==="input"||i==="change")return id(a)}function tI(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var _r=typeof Object.is=="function"?Object.is:tI;function oc(i,a){if(_r(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var u=Object.keys(i),p=Object.keys(a);if(u.length!==p.length)return!1;for(p=0;p<u.length;p++){var v=u[p];if(!d.call(a,v)||!_r(i[v],a[v]))return!1}return!0}function av(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function lv(i,a){var u=av(i);i=0;for(var p;u;){if(u.nodeType===3){if(p=i+u.textContent.length,i<=a&&p>=a)return{node:u,offset:a-i};i=p}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=av(u)}}function cv(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?cv(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function uv(){for(var i=window,a=ye();a instanceof i.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)i=a.contentWindow;else break;a=ye(i.document)}return a}function Qf(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}function nI(i){var a=uv(),u=i.focusedElem,p=i.selectionRange;if(a!==u&&u&&u.ownerDocument&&cv(u.ownerDocument.documentElement,u)){if(p!==null&&Qf(u)){if(a=p.start,i=p.end,i===void 0&&(i=a),"selectionStart"in u)u.selectionStart=a,u.selectionEnd=Math.min(i,u.value.length);else if(i=(a=u.ownerDocument||document)&&a.defaultView||window,i.getSelection){i=i.getSelection();var v=u.textContent.length,w=Math.min(p.start,v);p=p.end===void 0?w:Math.min(p.end,v),!i.extend&&w>p&&(v=p,p=w,w=v),v=lv(u,w);var I=lv(u,p);v&&I&&(i.rangeCount!==1||i.anchorNode!==v.node||i.anchorOffset!==v.offset||i.focusNode!==I.node||i.focusOffset!==I.offset)&&(a=a.createRange(),a.setStart(v.node,v.offset),i.removeAllRanges(),w>p?(i.addRange(a),i.extend(I.node,I.offset)):(a.setEnd(I.node,I.offset),i.addRange(a)))}}for(a=[],i=u;i=i.parentNode;)i.nodeType===1&&a.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<a.length;u++)i=a[u],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var rI=h&&"documentMode"in document&&11>=document.documentMode,_a=null,Yf=null,ac=null,Xf=!1;function dv(i,a,u){var p=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Xf||_a==null||_a!==ye(p)||(p=_a,"selectionStart"in p&&Qf(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),ac&&oc(ac,p)||(ac=p,p=ld(Yf,"onSelect"),0<p.length&&(a=new wo("onSelect","select",null,a,u),i.push({event:a,listeners:p}),a.target=_a)))}function sd(i,a){var u={};return u[i.toLowerCase()]=a.toLowerCase(),u["Webkit"+i]="webkit"+a,u["Moz"+i]="moz"+a,u}var Sa={animationend:sd("Animation","AnimationEnd"),animationiteration:sd("Animation","AnimationIteration"),animationstart:sd("Animation","AnimationStart"),transitionend:sd("Transition","TransitionEnd")},Jf={},hv={};h&&(hv=document.createElement("div").style,"AnimationEvent"in window||(delete Sa.animationend.animation,delete Sa.animationiteration.animation,delete Sa.animationstart.animation),"TransitionEvent"in window||delete Sa.transitionend.transition);function od(i){if(Jf[i])return Jf[i];if(!Sa[i])return i;var a=Sa[i],u;for(u in a)if(a.hasOwnProperty(u)&&u in hv)return Jf[i]=a[u];return i}var fv=od("animationend"),mv=od("animationiteration"),pv=od("animationstart"),gv=od("transitionend"),yv=new Map,vv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gs(i,a){yv.set(i,a),l(a,[i])}for(var Zf=0;Zf<vv.length;Zf++){var em=vv[Zf],iI=em.toLowerCase(),sI=em[0].toUpperCase()+em.slice(1);gs(iI,"on"+sI)}gs(fv,"onAnimationEnd"),gs(mv,"onAnimationIteration"),gs(pv,"onAnimationStart"),gs("dblclick","onDoubleClick"),gs("focusin","onFocus"),gs("focusout","onBlur"),gs(gv,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oI=new Set("cancel close invalid load scroll toggle".split(" ").concat(lc));function xv(i,a,u){var p=i.type||"unknown-event";i.currentTarget=u,zl(p,a,void 0,i),i.currentTarget=null}function wv(i,a){a=(a&4)!==0;for(var u=0;u<i.length;u++){var p=i[u],v=p.event;p=p.listeners;e:{var w=void 0;if(a)for(var I=p.length-1;0<=I;I--){var O=p[I],z=O.instance,X=O.currentTarget;if(O=O.listener,z!==w&&v.isPropagationStopped())break e;xv(v,O,X),w=z}else for(I=0;I<p.length;I++){if(O=p[I],z=O.instance,X=O.currentTarget,O=O.listener,z!==w&&v.isPropagationStopped())break e;xv(v,O,X),w=z}}}if(aa)throw i=er,aa=!1,er=null,i}function mt(i,a){var u=a[lm];u===void 0&&(u=a[lm]=new Set);var p=i+"__bubble";u.has(p)||(bv(a,i,2,!1),u.add(p))}function tm(i,a,u){var p=0;a&&(p|=4),bv(u,i,p,a)}var ad="_reactListening"+Math.random().toString(36).slice(2);function cc(i){if(!i[ad]){i[ad]=!0,r.forEach(function(u){u!=="selectionchange"&&(oI.has(u)||tm(u,!1,i),tm(u,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[ad]||(a[ad]=!0,tm("selectionchange",!1,a))}}function bv(i,a,u,p){switch(pa(a)){case 1:var v=Jr;break;case 4:v=Ju;break;default:v=Zl}u=v.bind(null,a,u,i),v=void 0,!ls||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(v=!0),p?v!==void 0?i.addEventListener(a,u,{capture:!0,passive:v}):i.addEventListener(a,u,!0):v!==void 0?i.addEventListener(a,u,{passive:v}):i.addEventListener(a,u,!1)}function nm(i,a,u,p,v){var w=p;if((a&1)===0&&(a&2)===0&&p!==null)e:for(;;){if(p===null)return;var I=p.tag;if(I===3||I===4){var O=p.stateNode.containerInfo;if(O===v||O.nodeType===8&&O.parentNode===v)break;if(I===4)for(I=p.return;I!==null;){var z=I.tag;if((z===3||z===4)&&(z=I.stateNode.containerInfo,z===v||z.nodeType===8&&z.parentNode===v))return;I=I.return}for(;O!==null;){if(I=ko(O),I===null)return;if(z=I.tag,z===5||z===6){p=w=I;continue e}O=O.parentNode}}p=p.return}Fu(function(){var X=w,oe=oa(u),ae=[];e:{var ie=yv.get(i);if(ie!==void 0){var ve=wo,ke=i;switch(i){case"keypress":if(xo(u)===0)break e;case"keydown":case"keyup":ve=it;break;case"focusin":ke="focus",ve=nn;break;case"focusout":ke="blur",ve=nn;break;case"beforeblur":case"afterblur":ve=nn;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ve=tc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ve=td;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ve=ni;break;case fv:case mv:case pv:ve=rd;break;case gv:ve=ba;break;case"scroll":ve=ya;break;case"wheel":ve=WT;break;case"copy":case"cut":case"paste":ve=f;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ve=Hn}var _e=(a&4)!==0,Rt=!_e&&i==="scroll",q=_e?ie!==null?ie+"Capture":null:ie;_e=[];for(var W=X,Y;W!==null;){Y=W;var ce=Y.stateNode;if(Y.tag===5&&ce!==null&&(Y=ce,q!==null&&(ce=lo(W,q),ce!=null&&_e.push(uc(W,ce,Y)))),Rt)break;W=W.return}0<_e.length&&(ie=new ve(ie,ke,null,u,oe),ae.push({event:ie,listeners:_e}))}}if((a&7)===0){e:{if(ie=i==="mouseover"||i==="pointerover",ve=i==="mouseout"||i==="pointerout",ie&&u!==ss&&(ke=u.relatedTarget||u.fromElement)&&(ko(ke)||ke[Ii]))break e;if((ve||ie)&&(ie=oe.window===oe?oe:(ie=oe.ownerDocument)?ie.defaultView||ie.parentWindow:window,ve?(ke=u.relatedTarget||u.toElement,ve=X,ke=ke?ko(ke):null,ke!==null&&(Rt=br(ke),ke!==Rt||ke.tag!==5&&ke.tag!==6)&&(ke=null)):(ve=null,ke=X),ve!==ke)){if(_e=tc,ce="onMouseLeave",q="onMouseEnter",W="mouse",(i==="pointerout"||i==="pointerover")&&(_e=Hn,ce="onPointerLeave",q="onPointerEnter",W="pointer"),Rt=ve==null?ie:Ia(ve),Y=ke==null?ie:Ia(ke),ie=new _e(ce,W+"leave",ve,u,oe),ie.target=Rt,ie.relatedTarget=Y,ce=null,ko(oe)===X&&(_e=new _e(q,W+"enter",ke,u,oe),_e.target=Y,_e.relatedTarget=Rt,ce=_e),Rt=ce,ve&&ke)t:{for(_e=ve,q=ke,W=0,Y=_e;Y;Y=Ea(Y))W++;for(Y=0,ce=q;ce;ce=Ea(ce))Y++;for(;0<W-Y;)_e=Ea(_e),W--;for(;0<Y-W;)q=Ea(q),Y--;for(;W--;){if(_e===q||q!==null&&_e===q.alternate)break t;_e=Ea(_e),q=Ea(q)}_e=null}else _e=null;ve!==null&&kv(ae,ie,ve,_e,!1),ke!==null&&Rt!==null&&kv(ae,Rt,ke,_e,!0)}}e:{if(ie=X?Ia(X):window,ve=ie.nodeName&&ie.nodeName.toLowerCase(),ve==="select"||ve==="input"&&ie.type==="file")var Se=YT;else if(tv(ie))if(rv)Se=eI;else{Se=JT;var Ae=XT}else(ve=ie.nodeName)&&ve.toLowerCase()==="input"&&(ie.type==="checkbox"||ie.type==="radio")&&(Se=ZT);if(Se&&(Se=Se(i,X))){nv(ae,Se,u,oe);break e}Ae&&Ae(i,ie,X),i==="focusout"&&(Ae=ie._wrapperState)&&Ae.controlled&&ie.type==="number"&&dt(ie,"number",ie.value)}switch(Ae=X?Ia(X):window,i){case"focusin":(tv(Ae)||Ae.contentEditable==="true")&&(_a=Ae,Yf=X,ac=null);break;case"focusout":ac=Yf=_a=null;break;case"mousedown":Xf=!0;break;case"contextmenu":case"mouseup":case"dragend":Xf=!1,dv(ae,u,oe);break;case"selectionchange":if(rI)break;case"keydown":case"keyup":dv(ae,u,oe)}var Re;if(Kf)e:{switch(i){case"compositionstart":var De="onCompositionStart";break e;case"compositionend":De="onCompositionEnd";break e;case"compositionupdate":De="onCompositionUpdate";break e}De=void 0}else ka?Z0(i,u)&&(De="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(De="onCompositionStart");De&&(Y0&&u.locale!=="ko"&&(ka||De!=="onCompositionStart"?De==="onCompositionEnd"&&ka&&(Re=Zu()):(Wn=oe,ga="value"in Wn?Wn.value:Wn.textContent,ka=!0)),Ae=ld(X,De),0<Ae.length&&(De=new _(De,i,null,u,oe),ae.push({event:De,listeners:Ae}),Re?De.data=Re:(Re=ev(u),Re!==null&&(De.data=Re)))),(Re=HT?KT(i,u):qT(i,u))&&(X=ld(X,"onBeforeInput"),0<X.length&&(oe=new _("onBeforeInput","beforeinput",null,u,oe),ae.push({event:oe,listeners:X}),oe.data=Re))}wv(ae,a)})}function uc(i,a,u){return{instance:i,listener:a,currentTarget:u}}function ld(i,a){for(var u=a+"Capture",p=[];i!==null;){var v=i,w=v.stateNode;v.tag===5&&w!==null&&(v=w,w=lo(i,u),w!=null&&p.unshift(uc(i,w,v)),w=lo(i,a),w!=null&&p.push(uc(i,w,v))),i=i.return}return p}function Ea(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function kv(i,a,u,p,v){for(var w=a._reactName,I=[];u!==null&&u!==p;){var O=u,z=O.alternate,X=O.stateNode;if(z!==null&&z===p)break;O.tag===5&&X!==null&&(O=X,v?(z=lo(u,w),z!=null&&I.unshift(uc(u,z,O))):v||(z=lo(u,w),z!=null&&I.push(uc(u,z,O)))),u=u.return}I.length!==0&&i.push({event:a,listeners:I})}var aI=/\r\n?/g,lI=/\u0000|\uFFFD/g;function _v(i){return(typeof i=="string"?i:""+i).replace(aI,`
`).replace(lI,"")}function cd(i,a,u){if(a=_v(a),_v(i)!==a&&u)throw Error(t(425))}function ud(){}var rm=null,im=null;function sm(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var om=typeof setTimeout=="function"?setTimeout:void 0,cI=typeof clearTimeout=="function"?clearTimeout:void 0,Sv=typeof Promise=="function"?Promise:void 0,uI=typeof queueMicrotask=="function"?queueMicrotask:typeof Sv<"u"?function(i){return Sv.resolve(null).then(i).catch(dI)}:om;function dI(i){setTimeout(function(){throw i})}function am(i,a){var u=a,p=0;do{var v=u.nextSibling;if(i.removeChild(u),v&&v.nodeType===8)if(u=v.data,u==="/$"){if(p===0){i.removeChild(v),fs(a);return}p--}else u!=="$"&&u!=="$?"&&u!=="$!"||p++;u=v}while(u);fs(a)}function ys(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return i}function Ev(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(a===0)return i;a--}else u==="/$"&&a++}i=i.previousSibling}return null}var Ta=Math.random().toString(36).slice(2),ii="__reactFiber$"+Ta,dc="__reactProps$"+Ta,Ii="__reactContainer$"+Ta,lm="__reactEvents$"+Ta,hI="__reactListeners$"+Ta,fI="__reactHandles$"+Ta;function ko(i){var a=i[ii];if(a)return a;for(var u=i.parentNode;u;){if(a=u[Ii]||u[ii]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(i=Ev(i);i!==null;){if(u=i[ii])return u;i=Ev(i)}return a}i=u,u=i.parentNode}return null}function hc(i){return i=i[ii]||i[Ii],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Ia(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function dd(i){return i[dc]||null}var cm=[],Ca=-1;function vs(i){return{current:i}}function pt(i){0>Ca||(i.current=cm[Ca],cm[Ca]=null,Ca--)}function lt(i,a){Ca++,cm[Ca]=i.current,i.current=a}var xs={},hn=vs(xs),In=vs(!1),_o=xs;function ja(i,a){var u=i.type.contextTypes;if(!u)return xs;var p=i.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===a)return p.__reactInternalMemoizedMaskedChildContext;var v={},w;for(w in u)v[w]=a[w];return p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=a,i.__reactInternalMemoizedMaskedChildContext=v),v}function Cn(i){return i=i.childContextTypes,i!=null}function hd(){pt(In),pt(hn)}function Tv(i,a,u){if(hn.current!==xs)throw Error(t(168));lt(hn,a),lt(In,u)}function Iv(i,a,u){var p=i.stateNode;if(a=a.childContextTypes,typeof p.getChildContext!="function")return u;p=p.getChildContext();for(var v in p)if(!(v in a))throw Error(t(108,se(i)||"Unknown",v));return ue({},u,p)}function fd(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||xs,_o=hn.current,lt(hn,i),lt(In,In.current),!0}function Cv(i,a,u){var p=i.stateNode;if(!p)throw Error(t(169));u?(i=Iv(i,a,_o),p.__reactInternalMemoizedMergedChildContext=i,pt(In),pt(hn),lt(hn,i)):pt(In),lt(In,u)}var Ci=null,md=!1,um=!1;function jv(i){Ci===null?Ci=[i]:Ci.push(i)}function mI(i){md=!0,jv(i)}function ws(){if(!um&&Ci!==null){um=!0;var i=0,a=Ye;try{var u=Ci;for(Ye=1;i<u.length;i++){var p=u[i];do p=p(!0);while(p!==null)}Ci=null,md=!1}catch(v){throw Ci!==null&&(Ci=Ci.slice(i+1)),Ul(ca,ws),v}finally{Ye=a,um=!1}}return null}var Aa=[],Ra=0,pd=null,gd=0,nr=[],rr=0,So=null,ji=1,Ai="";function Eo(i,a){Aa[Ra++]=gd,Aa[Ra++]=pd,pd=i,gd=a}function Av(i,a,u){nr[rr++]=ji,nr[rr++]=Ai,nr[rr++]=So,So=i;var p=ji;i=Ai;var v=32-Fn(p)-1;p&=~(1<<v),u+=1;var w=32-Fn(a)+v;if(30<w){var I=v-v%5;w=(p&(1<<I)-1).toString(32),p>>=I,v-=I,ji=1<<32-Fn(a)+v|u<<v|p,Ai=w+i}else ji=1<<w|u<<v|p,Ai=i}function dm(i){i.return!==null&&(Eo(i,1),Av(i,1,0))}function hm(i){for(;i===pd;)pd=Aa[--Ra],Aa[Ra]=null,gd=Aa[--Ra],Aa[Ra]=null;for(;i===So;)So=nr[--rr],nr[rr]=null,Ai=nr[--rr],nr[rr]=null,ji=nr[--rr],nr[rr]=null}var Kn=null,qn=null,wt=!1,Sr=null;function Rv(i,a){var u=ar(5,null,null,0);u.elementType="DELETED",u.stateNode=a,u.return=i,a=i.deletions,a===null?(i.deletions=[u],i.flags|=16):a.push(u)}function Pv(i,a){switch(i.tag){case 5:var u=i.type;return a=a.nodeType!==1||u.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(i.stateNode=a,Kn=i,qn=ys(a.firstChild),!0):!1;case 6:return a=i.pendingProps===""||a.nodeType!==3?null:a,a!==null?(i.stateNode=a,Kn=i,qn=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(u=So!==null?{id:ji,overflow:Ai}:null,i.memoizedState={dehydrated:a,treeContext:u,retryLane:1073741824},u=ar(18,null,null,0),u.stateNode=a,u.return=i,i.child=u,Kn=i,qn=null,!0):!1;default:return!1}}function fm(i){return(i.mode&1)!==0&&(i.flags&128)===0}function mm(i){if(wt){var a=qn;if(a){var u=a;if(!Pv(i,a)){if(fm(i))throw Error(t(418));a=ys(u.nextSibling);var p=Kn;a&&Pv(i,a)?Rv(p,u):(i.flags=i.flags&-4097|2,wt=!1,Kn=i)}}else{if(fm(i))throw Error(t(418));i.flags=i.flags&-4097|2,wt=!1,Kn=i}}}function Nv(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Kn=i}function yd(i){if(i!==Kn)return!1;if(!wt)return Nv(i),wt=!0,!1;var a;if((a=i.tag!==3)&&!(a=i.tag!==5)&&(a=i.type,a=a!=="head"&&a!=="body"&&!sm(i.type,i.memoizedProps)),a&&(a=qn)){if(fm(i))throw Dv(),Error(t(418));for(;a;)Rv(i,a),a=ys(a.nextSibling)}if(Nv(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"){if(a===0){qn=ys(i.nextSibling);break e}a--}else u!=="$"&&u!=="$!"&&u!=="$?"||a++}i=i.nextSibling}qn=null}}else qn=Kn?ys(i.stateNode.nextSibling):null;return!0}function Dv(){for(var i=qn;i;)i=ys(i.nextSibling)}function Pa(){qn=Kn=null,wt=!1}function pm(i){Sr===null?Sr=[i]:Sr.push(i)}var pI=U.ReactCurrentBatchConfig;function fc(i,a,u){if(i=u.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var p=u.stateNode}if(!p)throw Error(t(147,i));var v=p,w=""+i;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===w?a.ref:(a=function(I){var O=v.refs;I===null?delete O[w]:O[w]=I},a._stringRef=w,a)}if(typeof i!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,i))}return i}function vd(i,a){throw i=Object.prototype.toString.call(a),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i))}function Mv(i){var a=i._init;return a(i._payload)}function Vv(i){function a(q,W){if(i){var Y=q.deletions;Y===null?(q.deletions=[W],q.flags|=16):Y.push(W)}}function u(q,W){if(!i)return null;for(;W!==null;)a(q,W),W=W.sibling;return null}function p(q,W){for(q=new Map;W!==null;)W.key!==null?q.set(W.key,W):q.set(W.index,W),W=W.sibling;return q}function v(q,W){return q=Cs(q,W),q.index=0,q.sibling=null,q}function w(q,W,Y){return q.index=Y,i?(Y=q.alternate,Y!==null?(Y=Y.index,Y<W?(q.flags|=2,W):Y):(q.flags|=2,W)):(q.flags|=1048576,W)}function I(q){return i&&q.alternate===null&&(q.flags|=2),q}function O(q,W,Y,ce){return W===null||W.tag!==6?(W=op(Y,q.mode,ce),W.return=q,W):(W=v(W,Y),W.return=q,W)}function z(q,W,Y,ce){var Se=Y.type;return Se===A?oe(q,W,Y.props.children,ce,Y.key):W!==null&&(W.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===st&&Mv(Se)===W.type)?(ce=v(W,Y.props),ce.ref=fc(q,W,Y),ce.return=q,ce):(ce=Ud(Y.type,Y.key,Y.props,null,q.mode,ce),ce.ref=fc(q,W,Y),ce.return=q,ce)}function X(q,W,Y,ce){return W===null||W.tag!==4||W.stateNode.containerInfo!==Y.containerInfo||W.stateNode.implementation!==Y.implementation?(W=ap(Y,q.mode,ce),W.return=q,W):(W=v(W,Y.children||[]),W.return=q,W)}function oe(q,W,Y,ce,Se){return W===null||W.tag!==7?(W=No(Y,q.mode,ce,Se),W.return=q,W):(W=v(W,Y),W.return=q,W)}function ae(q,W,Y){if(typeof W=="string"&&W!==""||typeof W=="number")return W=op(""+W,q.mode,Y),W.return=q,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case H:return Y=Ud(W.type,W.key,W.props,null,q.mode,Y),Y.ref=fc(q,null,W),Y.return=q,Y;case K:return W=ap(W,q.mode,Y),W.return=q,W;case st:var ce=W._init;return ae(q,ce(W._payload),Y)}if(ht(W)||me(W))return W=No(W,q.mode,Y,null),W.return=q,W;vd(q,W)}return null}function ie(q,W,Y,ce){var Se=W!==null?W.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number")return Se!==null?null:O(q,W,""+Y,ce);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case H:return Y.key===Se?z(q,W,Y,ce):null;case K:return Y.key===Se?X(q,W,Y,ce):null;case st:return Se=Y._init,ie(q,W,Se(Y._payload),ce)}if(ht(Y)||me(Y))return Se!==null?null:oe(q,W,Y,ce,null);vd(q,Y)}return null}function ve(q,W,Y,ce,Se){if(typeof ce=="string"&&ce!==""||typeof ce=="number")return q=q.get(Y)||null,O(W,q,""+ce,Se);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case H:return q=q.get(ce.key===null?Y:ce.key)||null,z(W,q,ce,Se);case K:return q=q.get(ce.key===null?Y:ce.key)||null,X(W,q,ce,Se);case st:var Ae=ce._init;return ve(q,W,Y,Ae(ce._payload),Se)}if(ht(ce)||me(ce))return q=q.get(Y)||null,oe(W,q,ce,Se,null);vd(W,ce)}return null}function ke(q,W,Y,ce){for(var Se=null,Ae=null,Re=W,De=W=0,Jt=null;Re!==null&&De<Y.length;De++){Re.index>De?(Jt=Re,Re=null):Jt=Re.sibling;var et=ie(q,Re,Y[De],ce);if(et===null){Re===null&&(Re=Jt);break}i&&Re&&et.alternate===null&&a(q,Re),W=w(et,W,De),Ae===null?Se=et:Ae.sibling=et,Ae=et,Re=Jt}if(De===Y.length)return u(q,Re),wt&&Eo(q,De),Se;if(Re===null){for(;De<Y.length;De++)Re=ae(q,Y[De],ce),Re!==null&&(W=w(Re,W,De),Ae===null?Se=Re:Ae.sibling=Re,Ae=Re);return wt&&Eo(q,De),Se}for(Re=p(q,Re);De<Y.length;De++)Jt=ve(Re,q,De,Y[De],ce),Jt!==null&&(i&&Jt.alternate!==null&&Re.delete(Jt.key===null?De:Jt.key),W=w(Jt,W,De),Ae===null?Se=Jt:Ae.sibling=Jt,Ae=Jt);return i&&Re.forEach(function(js){return a(q,js)}),wt&&Eo(q,De),Se}function _e(q,W,Y,ce){var Se=me(Y);if(typeof Se!="function")throw Error(t(150));if(Y=Se.call(Y),Y==null)throw Error(t(151));for(var Ae=Se=null,Re=W,De=W=0,Jt=null,et=Y.next();Re!==null&&!et.done;De++,et=Y.next()){Re.index>De?(Jt=Re,Re=null):Jt=Re.sibling;var js=ie(q,Re,et.value,ce);if(js===null){Re===null&&(Re=Jt);break}i&&Re&&js.alternate===null&&a(q,Re),W=w(js,W,De),Ae===null?Se=js:Ae.sibling=js,Ae=js,Re=Jt}if(et.done)return u(q,Re),wt&&Eo(q,De),Se;if(Re===null){for(;!et.done;De++,et=Y.next())et=ae(q,et.value,ce),et!==null&&(W=w(et,W,De),Ae===null?Se=et:Ae.sibling=et,Ae=et);return wt&&Eo(q,De),Se}for(Re=p(q,Re);!et.done;De++,et=Y.next())et=ve(Re,q,De,et.value,ce),et!==null&&(i&&et.alternate!==null&&Re.delete(et.key===null?De:et.key),W=w(et,W,De),Ae===null?Se=et:Ae.sibling=et,Ae=et);return i&&Re.forEach(function(GI){return a(q,GI)}),wt&&Eo(q,De),Se}function Rt(q,W,Y,ce){if(typeof Y=="object"&&Y!==null&&Y.type===A&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case H:e:{for(var Se=Y.key,Ae=W;Ae!==null;){if(Ae.key===Se){if(Se=Y.type,Se===A){if(Ae.tag===7){u(q,Ae.sibling),W=v(Ae,Y.props.children),W.return=q,q=W;break e}}else if(Ae.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===st&&Mv(Se)===Ae.type){u(q,Ae.sibling),W=v(Ae,Y.props),W.ref=fc(q,Ae,Y),W.return=q,q=W;break e}u(q,Ae);break}else a(q,Ae);Ae=Ae.sibling}Y.type===A?(W=No(Y.props.children,q.mode,ce,Y.key),W.return=q,q=W):(ce=Ud(Y.type,Y.key,Y.props,null,q.mode,ce),ce.ref=fc(q,W,Y),ce.return=q,q=ce)}return I(q);case K:e:{for(Ae=Y.key;W!==null;){if(W.key===Ae)if(W.tag===4&&W.stateNode.containerInfo===Y.containerInfo&&W.stateNode.implementation===Y.implementation){u(q,W.sibling),W=v(W,Y.children||[]),W.return=q,q=W;break e}else{u(q,W);break}else a(q,W);W=W.sibling}W=ap(Y,q.mode,ce),W.return=q,q=W}return I(q);case st:return Ae=Y._init,Rt(q,W,Ae(Y._payload),ce)}if(ht(Y))return ke(q,W,Y,ce);if(me(Y))return _e(q,W,Y,ce);vd(q,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"?(Y=""+Y,W!==null&&W.tag===6?(u(q,W.sibling),W=v(W,Y),W.return=q,q=W):(u(q,W),W=op(Y,q.mode,ce),W.return=q,q=W),I(q)):u(q,W)}return Rt}var Na=Vv(!0),Lv=Vv(!1),xd=vs(null),wd=null,Da=null,gm=null;function ym(){gm=Da=wd=null}function vm(i){var a=xd.current;pt(xd),i._currentValue=a}function xm(i,a,u){for(;i!==null;){var p=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,p!==null&&(p.childLanes|=a)):p!==null&&(p.childLanes&a)!==a&&(p.childLanes|=a),i===u)break;i=i.return}}function Ma(i,a){wd=i,gm=Da=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&a)!==0&&(jn=!0),i.firstContext=null)}function ir(i){var a=i._currentValue;if(gm!==i)if(i={context:i,memoizedValue:a,next:null},Da===null){if(wd===null)throw Error(t(308));Da=i,wd.dependencies={lanes:0,firstContext:i}}else Da=Da.next=i;return a}var To=null;function wm(i){To===null?To=[i]:To.push(i)}function Ov(i,a,u,p){var v=a.interleaved;return v===null?(u.next=u,wm(a)):(u.next=v.next,v.next=u),a.interleaved=u,Ri(i,p)}function Ri(i,a){i.lanes|=a;var u=i.alternate;for(u!==null&&(u.lanes|=a),u=i,i=i.return;i!==null;)i.childLanes|=a,u=i.alternate,u!==null&&(u.childLanes|=a),u=i,i=i.return;return u.tag===3?u.stateNode:null}var bs=!1;function bm(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bv(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Pi(i,a){return{eventTime:i,lane:a,tag:0,payload:null,callback:null,next:null}}function ks(i,a,u){var p=i.updateQueue;if(p===null)return null;if(p=p.shared,(Ze&2)!==0){var v=p.pending;return v===null?a.next=a:(a.next=v.next,v.next=a),p.pending=a,Ri(i,u)}return v=p.interleaved,v===null?(a.next=a,wm(p)):(a.next=v.next,v.next=a),p.interleaved=a,Ri(i,u)}function bd(i,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194240)!==0)){var p=a.lanes;p&=i.pendingLanes,u|=p,a.lanes=u,Gl(i,u)}}function zv(i,a){var u=i.updateQueue,p=i.alternate;if(p!==null&&(p=p.updateQueue,u===p)){var v=null,w=null;if(u=u.firstBaseUpdate,u!==null){do{var I={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};w===null?v=w=I:w=w.next=I,u=u.next}while(u!==null);w===null?v=w=a:w=w.next=a}else v=w=a;u={baseState:p.baseState,firstBaseUpdate:v,lastBaseUpdate:w,shared:p.shared,effects:p.effects},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=a:i.next=a,u.lastBaseUpdate=a}function kd(i,a,u,p){var v=i.updateQueue;bs=!1;var w=v.firstBaseUpdate,I=v.lastBaseUpdate,O=v.shared.pending;if(O!==null){v.shared.pending=null;var z=O,X=z.next;z.next=null,I===null?w=X:I.next=X,I=z;var oe=i.alternate;oe!==null&&(oe=oe.updateQueue,O=oe.lastBaseUpdate,O!==I&&(O===null?oe.firstBaseUpdate=X:O.next=X,oe.lastBaseUpdate=z))}if(w!==null){var ae=v.baseState;I=0,oe=X=z=null,O=w;do{var ie=O.lane,ve=O.eventTime;if((p&ie)===ie){oe!==null&&(oe=oe.next={eventTime:ve,lane:0,tag:O.tag,payload:O.payload,callback:O.callback,next:null});e:{var ke=i,_e=O;switch(ie=a,ve=u,_e.tag){case 1:if(ke=_e.payload,typeof ke=="function"){ae=ke.call(ve,ae,ie);break e}ae=ke;break e;case 3:ke.flags=ke.flags&-65537|128;case 0:if(ke=_e.payload,ie=typeof ke=="function"?ke.call(ve,ae,ie):ke,ie==null)break e;ae=ue({},ae,ie);break e;case 2:bs=!0}}O.callback!==null&&O.lane!==0&&(i.flags|=64,ie=v.effects,ie===null?v.effects=[O]:ie.push(O))}else ve={eventTime:ve,lane:ie,tag:O.tag,payload:O.payload,callback:O.callback,next:null},oe===null?(X=oe=ve,z=ae):oe=oe.next=ve,I|=ie;if(O=O.next,O===null){if(O=v.shared.pending,O===null)break;ie=O,O=ie.next,ie.next=null,v.lastBaseUpdate=ie,v.shared.pending=null}}while(!0);if(oe===null&&(z=ae),v.baseState=z,v.firstBaseUpdate=X,v.lastBaseUpdate=oe,a=v.shared.interleaved,a!==null){v=a;do I|=v.lane,v=v.next;while(v!==a)}else w===null&&(v.shared.lanes=0);jo|=I,i.lanes=I,i.memoizedState=ae}}function Fv(i,a,u){if(i=a.effects,a.effects=null,i!==null)for(a=0;a<i.length;a++){var p=i[a],v=p.callback;if(v!==null){if(p.callback=null,p=u,typeof v!="function")throw Error(t(191,v));v.call(p)}}}var mc={},si=vs(mc),pc=vs(mc),gc=vs(mc);function Io(i){if(i===mc)throw Error(t(174));return i}function km(i,a){switch(lt(gc,a),lt(pc,i),lt(si,mc),i=a.nodeType,i){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:ra(null,"");break;default:i=i===8?a.parentNode:a,a=i.namespaceURI||null,i=i.tagName,a=ra(a,i)}pt(si),lt(si,a)}function Va(){pt(si),pt(pc),pt(gc)}function Uv(i){Io(gc.current);var a=Io(si.current),u=ra(a,i.type);a!==u&&(lt(pc,i),lt(si,u))}function _m(i){pc.current===i&&(pt(si),pt(pc))}var kt=vs(0);function _d(i){for(var a=i;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Sm=[];function Em(){for(var i=0;i<Sm.length;i++)Sm[i]._workInProgressVersionPrimary=null;Sm.length=0}var Sd=U.ReactCurrentDispatcher,Tm=U.ReactCurrentBatchConfig,Co=0,_t=null,$t=null,Yt=null,Ed=!1,yc=!1,vc=0,gI=0;function fn(){throw Error(t(321))}function Im(i,a){if(a===null)return!1;for(var u=0;u<a.length&&u<i.length;u++)if(!_r(i[u],a[u]))return!1;return!0}function Cm(i,a,u,p,v,w){if(Co=w,_t=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Sd.current=i===null||i.memoizedState===null?wI:bI,i=u(p,v),yc){w=0;do{if(yc=!1,vc=0,25<=w)throw Error(t(301));w+=1,Yt=$t=null,a.updateQueue=null,Sd.current=kI,i=u(p,v)}while(yc)}if(Sd.current=Cd,a=$t!==null&&$t.next!==null,Co=0,Yt=$t=_t=null,Ed=!1,a)throw Error(t(300));return i}function jm(){var i=vc!==0;return vc=0,i}function oi(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yt===null?_t.memoizedState=Yt=i:Yt=Yt.next=i,Yt}function sr(){if($t===null){var i=_t.alternate;i=i!==null?i.memoizedState:null}else i=$t.next;var a=Yt===null?_t.memoizedState:Yt.next;if(a!==null)Yt=a,$t=i;else{if(i===null)throw Error(t(310));$t=i,i={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},Yt===null?_t.memoizedState=Yt=i:Yt=Yt.next=i}return Yt}function xc(i,a){return typeof a=="function"?a(i):a}function Am(i){var a=sr(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var p=$t,v=p.baseQueue,w=u.pending;if(w!==null){if(v!==null){var I=v.next;v.next=w.next,w.next=I}p.baseQueue=v=w,u.pending=null}if(v!==null){w=v.next,p=p.baseState;var O=I=null,z=null,X=w;do{var oe=X.lane;if((Co&oe)===oe)z!==null&&(z=z.next={lane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),p=X.hasEagerState?X.eagerState:i(p,X.action);else{var ae={lane:oe,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null};z===null?(O=z=ae,I=p):z=z.next=ae,_t.lanes|=oe,jo|=oe}X=X.next}while(X!==null&&X!==w);z===null?I=p:z.next=O,_r(p,a.memoizedState)||(jn=!0),a.memoizedState=p,a.baseState=I,a.baseQueue=z,u.lastRenderedState=p}if(i=u.interleaved,i!==null){v=i;do w=v.lane,_t.lanes|=w,jo|=w,v=v.next;while(v!==i)}else v===null&&(u.lanes=0);return[a.memoizedState,u.dispatch]}function Rm(i){var a=sr(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var p=u.dispatch,v=u.pending,w=a.memoizedState;if(v!==null){u.pending=null;var I=v=v.next;do w=i(w,I.action),I=I.next;while(I!==v);_r(w,a.memoizedState)||(jn=!0),a.memoizedState=w,a.baseQueue===null&&(a.baseState=w),u.lastRenderedState=w}return[w,p]}function Wv(){}function $v(i,a){var u=_t,p=sr(),v=a(),w=!_r(p.memoizedState,v);if(w&&(p.memoizedState=v,jn=!0),p=p.queue,Pm(qv.bind(null,u,p,i),[i]),p.getSnapshot!==a||w||Yt!==null&&Yt.memoizedState.tag&1){if(u.flags|=2048,wc(9,Kv.bind(null,u,p,v,a),void 0,null),Xt===null)throw Error(t(349));(Co&30)!==0||Hv(u,a,v)}return v}function Hv(i,a,u){i.flags|=16384,i={getSnapshot:a,value:u},a=_t.updateQueue,a===null?(a={lastEffect:null,stores:null},_t.updateQueue=a,a.stores=[i]):(u=a.stores,u===null?a.stores=[i]:u.push(i))}function Kv(i,a,u,p){a.value=u,a.getSnapshot=p,Gv(a)&&Qv(i)}function qv(i,a,u){return u(function(){Gv(a)&&Qv(i)})}function Gv(i){var a=i.getSnapshot;i=i.value;try{var u=a();return!_r(i,u)}catch{return!0}}function Qv(i){var a=Ri(i,1);a!==null&&Cr(a,i,1,-1)}function Yv(i){var a=oi();return typeof i=="function"&&(i=i()),a.memoizedState=a.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xc,lastRenderedState:i},a.queue=i,i=i.dispatch=xI.bind(null,_t,i),[a.memoizedState,i]}function wc(i,a,u,p){return i={tag:i,create:a,destroy:u,deps:p,next:null},a=_t.updateQueue,a===null?(a={lastEffect:null,stores:null},_t.updateQueue=a,a.lastEffect=i.next=i):(u=a.lastEffect,u===null?a.lastEffect=i.next=i:(p=u.next,u.next=i,i.next=p,a.lastEffect=i)),i}function Xv(){return sr().memoizedState}function Td(i,a,u,p){var v=oi();_t.flags|=i,v.memoizedState=wc(1|a,u,void 0,p===void 0?null:p)}function Id(i,a,u,p){var v=sr();p=p===void 0?null:p;var w=void 0;if($t!==null){var I=$t.memoizedState;if(w=I.destroy,p!==null&&Im(p,I.deps)){v.memoizedState=wc(a,u,w,p);return}}_t.flags|=i,v.memoizedState=wc(1|a,u,w,p)}function Jv(i,a){return Td(8390656,8,i,a)}function Pm(i,a){return Id(2048,8,i,a)}function Zv(i,a){return Id(4,2,i,a)}function e1(i,a){return Id(4,4,i,a)}function t1(i,a){if(typeof a=="function")return i=i(),a(i),function(){a(null)};if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function n1(i,a,u){return u=u!=null?u.concat([i]):null,Id(4,4,t1.bind(null,a,i),u)}function Nm(){}function r1(i,a){var u=sr();a=a===void 0?null:a;var p=u.memoizedState;return p!==null&&a!==null&&Im(a,p[1])?p[0]:(u.memoizedState=[i,a],i)}function i1(i,a){var u=sr();a=a===void 0?null:a;var p=u.memoizedState;return p!==null&&a!==null&&Im(a,p[1])?p[0]:(i=i(),u.memoizedState=[i,a],i)}function s1(i,a,u){return(Co&21)===0?(i.baseState&&(i.baseState=!1,jn=!0),i.memoizedState=u):(_r(u,a)||(u=Kl(),_t.lanes|=u,jo|=u,i.baseState=!0),a)}function yI(i,a){var u=Ye;Ye=u!==0&&4>u?u:4,i(!0);var p=Tm.transition;Tm.transition={};try{i(!1),a()}finally{Ye=u,Tm.transition=p}}function o1(){return sr().memoizedState}function vI(i,a,u){var p=Ts(i);if(u={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null},a1(i))l1(a,u);else if(u=Ov(i,a,u,p),u!==null){var v=_n();Cr(u,i,p,v),c1(u,a,p)}}function xI(i,a,u){var p=Ts(i),v={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null};if(a1(i))l1(a,v);else{var w=i.alternate;if(i.lanes===0&&(w===null||w.lanes===0)&&(w=a.lastRenderedReducer,w!==null))try{var I=a.lastRenderedState,O=w(I,u);if(v.hasEagerState=!0,v.eagerState=O,_r(O,I)){var z=a.interleaved;z===null?(v.next=v,wm(a)):(v.next=z.next,z.next=v),a.interleaved=v;return}}catch{}finally{}u=Ov(i,a,v,p),u!==null&&(v=_n(),Cr(u,i,p,v),c1(u,a,p))}}function a1(i){var a=i.alternate;return i===_t||a!==null&&a===_t}function l1(i,a){yc=Ed=!0;var u=i.pending;u===null?a.next=a:(a.next=u.next,u.next=a),i.pending=a}function c1(i,a,u){if((u&4194240)!==0){var p=a.lanes;p&=i.pendingLanes,u|=p,a.lanes=u,Gl(i,u)}}var Cd={readContext:ir,useCallback:fn,useContext:fn,useEffect:fn,useImperativeHandle:fn,useInsertionEffect:fn,useLayoutEffect:fn,useMemo:fn,useReducer:fn,useRef:fn,useState:fn,useDebugValue:fn,useDeferredValue:fn,useTransition:fn,useMutableSource:fn,useSyncExternalStore:fn,useId:fn,unstable_isNewReconciler:!1},wI={readContext:ir,useCallback:function(i,a){return oi().memoizedState=[i,a===void 0?null:a],i},useContext:ir,useEffect:Jv,useImperativeHandle:function(i,a,u){return u=u!=null?u.concat([i]):null,Td(4194308,4,t1.bind(null,a,i),u)},useLayoutEffect:function(i,a){return Td(4194308,4,i,a)},useInsertionEffect:function(i,a){return Td(4,2,i,a)},useMemo:function(i,a){var u=oi();return a=a===void 0?null:a,i=i(),u.memoizedState=[i,a],i},useReducer:function(i,a,u){var p=oi();return a=u!==void 0?u(a):a,p.memoizedState=p.baseState=a,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:a},p.queue=i,i=i.dispatch=vI.bind(null,_t,i),[p.memoizedState,i]},useRef:function(i){var a=oi();return i={current:i},a.memoizedState=i},useState:Yv,useDebugValue:Nm,useDeferredValue:function(i){return oi().memoizedState=i},useTransition:function(){var i=Yv(!1),a=i[0];return i=yI.bind(null,i[1]),oi().memoizedState=i,[a,i]},useMutableSource:function(){},useSyncExternalStore:function(i,a,u){var p=_t,v=oi();if(wt){if(u===void 0)throw Error(t(407));u=u()}else{if(u=a(),Xt===null)throw Error(t(349));(Co&30)!==0||Hv(p,a,u)}v.memoizedState=u;var w={value:u,getSnapshot:a};return v.queue=w,Jv(qv.bind(null,p,w,i),[i]),p.flags|=2048,wc(9,Kv.bind(null,p,w,u,a),void 0,null),u},useId:function(){var i=oi(),a=Xt.identifierPrefix;if(wt){var u=Ai,p=ji;u=(p&~(1<<32-Fn(p)-1)).toString(32)+u,a=":"+a+"R"+u,u=vc++,0<u&&(a+="H"+u.toString(32)),a+=":"}else u=gI++,a=":"+a+"r"+u.toString(32)+":";return i.memoizedState=a},unstable_isNewReconciler:!1},bI={readContext:ir,useCallback:r1,useContext:ir,useEffect:Pm,useImperativeHandle:n1,useInsertionEffect:Zv,useLayoutEffect:e1,useMemo:i1,useReducer:Am,useRef:Xv,useState:function(){return Am(xc)},useDebugValue:Nm,useDeferredValue:function(i){var a=sr();return s1(a,$t.memoizedState,i)},useTransition:function(){var i=Am(xc)[0],a=sr().memoizedState;return[i,a]},useMutableSource:Wv,useSyncExternalStore:$v,useId:o1,unstable_isNewReconciler:!1},kI={readContext:ir,useCallback:r1,useContext:ir,useEffect:Pm,useImperativeHandle:n1,useInsertionEffect:Zv,useLayoutEffect:e1,useMemo:i1,useReducer:Rm,useRef:Xv,useState:function(){return Rm(xc)},useDebugValue:Nm,useDeferredValue:function(i){var a=sr();return $t===null?a.memoizedState=i:s1(a,$t.memoizedState,i)},useTransition:function(){var i=Rm(xc)[0],a=sr().memoizedState;return[i,a]},useMutableSource:Wv,useSyncExternalStore:$v,useId:o1,unstable_isNewReconciler:!1};function Er(i,a){if(i&&i.defaultProps){a=ue({},a),i=i.defaultProps;for(var u in i)a[u]===void 0&&(a[u]=i[u]);return a}return a}function Dm(i,a,u,p){a=i.memoizedState,u=u(p,a),u=u==null?a:ue({},a,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var jd={isMounted:function(i){return(i=i._reactInternals)?br(i)===i:!1},enqueueSetState:function(i,a,u){i=i._reactInternals;var p=_n(),v=Ts(i),w=Pi(p,v);w.payload=a,u!=null&&(w.callback=u),a=ks(i,w,v),a!==null&&(Cr(a,i,v,p),bd(a,i,v))},enqueueReplaceState:function(i,a,u){i=i._reactInternals;var p=_n(),v=Ts(i),w=Pi(p,v);w.tag=1,w.payload=a,u!=null&&(w.callback=u),a=ks(i,w,v),a!==null&&(Cr(a,i,v,p),bd(a,i,v))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var u=_n(),p=Ts(i),v=Pi(u,p);v.tag=2,a!=null&&(v.callback=a),a=ks(i,v,p),a!==null&&(Cr(a,i,p,u),bd(a,i,p))}};function u1(i,a,u,p,v,w,I){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(p,w,I):a.prototype&&a.prototype.isPureReactComponent?!oc(u,p)||!oc(v,w):!0}function d1(i,a,u){var p=!1,v=xs,w=a.contextType;return typeof w=="object"&&w!==null?w=ir(w):(v=Cn(a)?_o:hn.current,p=a.contextTypes,w=(p=p!=null)?ja(i,v):xs),a=new a(u,w),i.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=jd,i.stateNode=a,a._reactInternals=i,p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=v,i.__reactInternalMemoizedMaskedChildContext=w),a}function h1(i,a,u,p){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,p),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,p),a.state!==i&&jd.enqueueReplaceState(a,a.state,null)}function Mm(i,a,u,p){var v=i.stateNode;v.props=u,v.state=i.memoizedState,v.refs={},bm(i);var w=a.contextType;typeof w=="object"&&w!==null?v.context=ir(w):(w=Cn(a)?_o:hn.current,v.context=ja(i,w)),v.state=i.memoizedState,w=a.getDerivedStateFromProps,typeof w=="function"&&(Dm(i,a,w,u),v.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(a=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),a!==v.state&&jd.enqueueReplaceState(v,v.state,null),kd(i,u,v,p),v.state=i.memoizedState),typeof v.componentDidMount=="function"&&(i.flags|=4194308)}function La(i,a){try{var u="",p=a;do u+=Ve(p),p=p.return;while(p);var v=u}catch(w){v=`
Error generating stack: `+w.message+`
`+w.stack}return{value:i,source:a,stack:v,digest:null}}function Vm(i,a,u){return{value:i,source:null,stack:u??null,digest:a??null}}function Lm(i,a){try{console.error(a.value)}catch(u){setTimeout(function(){throw u})}}var _I=typeof WeakMap=="function"?WeakMap:Map;function f1(i,a,u){u=Pi(-1,u),u.tag=3,u.payload={element:null};var p=a.value;return u.callback=function(){Vd||(Vd=!0,Jm=p),Lm(i,a)},u}function m1(i,a,u){u=Pi(-1,u),u.tag=3;var p=i.type.getDerivedStateFromError;if(typeof p=="function"){var v=a.value;u.payload=function(){return p(v)},u.callback=function(){Lm(i,a)}}var w=i.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(u.callback=function(){Lm(i,a),typeof p!="function"&&(Ss===null?Ss=new Set([this]):Ss.add(this));var I=a.stack;this.componentDidCatch(a.value,{componentStack:I!==null?I:""})}),u}function p1(i,a,u){var p=i.pingCache;if(p===null){p=i.pingCache=new _I;var v=new Set;p.set(a,v)}else v=p.get(a),v===void 0&&(v=new Set,p.set(a,v));v.has(u)||(v.add(u),i=LI.bind(null,i,a,u),a.then(i,i))}function g1(i){do{var a;if((a=i.tag===13)&&(a=i.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return i;i=i.return}while(i!==null);return null}function y1(i,a,u,p,v){return(i.mode&1)===0?(i===a?i.flags|=65536:(i.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(a=Pi(-1,1),a.tag=2,ks(u,a,1))),u.lanes|=1),i):(i.flags|=65536,i.lanes=v,i)}var SI=U.ReactCurrentOwner,jn=!1;function kn(i,a,u,p){a.child=i===null?Lv(a,null,u,p):Na(a,i.child,u,p)}function v1(i,a,u,p,v){u=u.render;var w=a.ref;return Ma(a,v),p=Cm(i,a,u,p,w,v),u=jm(),i!==null&&!jn?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~v,Ni(i,a,v)):(wt&&u&&dm(a),a.flags|=1,kn(i,a,p,v),a.child)}function x1(i,a,u,p,v){if(i===null){var w=u.type;return typeof w=="function"&&!sp(w)&&w.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(a.tag=15,a.type=w,w1(i,a,w,p,v)):(i=Ud(u.type,null,p,a,a.mode,v),i.ref=a.ref,i.return=a,a.child=i)}if(w=i.child,(i.lanes&v)===0){var I=w.memoizedProps;if(u=u.compare,u=u!==null?u:oc,u(I,p)&&i.ref===a.ref)return Ni(i,a,v)}return a.flags|=1,i=Cs(w,p),i.ref=a.ref,i.return=a,a.child=i}function w1(i,a,u,p,v){if(i!==null){var w=i.memoizedProps;if(oc(w,p)&&i.ref===a.ref)if(jn=!1,a.pendingProps=p=w,(i.lanes&v)!==0)(i.flags&131072)!==0&&(jn=!0);else return a.lanes=i.lanes,Ni(i,a,v)}return Om(i,a,u,p,v)}function b1(i,a,u){var p=a.pendingProps,v=p.children,w=i!==null?i.memoizedState:null;if(p.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},lt(Ba,Gn),Gn|=u;else{if((u&1073741824)===0)return i=w!==null?w.baseLanes|u:u,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:i,cachePool:null,transitions:null},a.updateQueue=null,lt(Ba,Gn),Gn|=i,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=w!==null?w.baseLanes:u,lt(Ba,Gn),Gn|=p}else w!==null?(p=w.baseLanes|u,a.memoizedState=null):p=u,lt(Ba,Gn),Gn|=p;return kn(i,a,v,u),a.child}function k1(i,a){var u=a.ref;(i===null&&u!==null||i!==null&&i.ref!==u)&&(a.flags|=512,a.flags|=2097152)}function Om(i,a,u,p,v){var w=Cn(u)?_o:hn.current;return w=ja(a,w),Ma(a,v),u=Cm(i,a,u,p,w,v),p=jm(),i!==null&&!jn?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~v,Ni(i,a,v)):(wt&&p&&dm(a),a.flags|=1,kn(i,a,u,v),a.child)}function _1(i,a,u,p,v){if(Cn(u)){var w=!0;fd(a)}else w=!1;if(Ma(a,v),a.stateNode===null)Rd(i,a),d1(a,u,p),Mm(a,u,p,v),p=!0;else if(i===null){var I=a.stateNode,O=a.memoizedProps;I.props=O;var z=I.context,X=u.contextType;typeof X=="object"&&X!==null?X=ir(X):(X=Cn(u)?_o:hn.current,X=ja(a,X));var oe=u.getDerivedStateFromProps,ae=typeof oe=="function"||typeof I.getSnapshotBeforeUpdate=="function";ae||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(O!==p||z!==X)&&h1(a,I,p,X),bs=!1;var ie=a.memoizedState;I.state=ie,kd(a,p,I,v),z=a.memoizedState,O!==p||ie!==z||In.current||bs?(typeof oe=="function"&&(Dm(a,u,oe,p),z=a.memoizedState),(O=bs||u1(a,u,O,p,ie,z,X))?(ae||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(a.flags|=4194308)):(typeof I.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=p,a.memoizedState=z),I.props=p,I.state=z,I.context=X,p=O):(typeof I.componentDidMount=="function"&&(a.flags|=4194308),p=!1)}else{I=a.stateNode,Bv(i,a),O=a.memoizedProps,X=a.type===a.elementType?O:Er(a.type,O),I.props=X,ae=a.pendingProps,ie=I.context,z=u.contextType,typeof z=="object"&&z!==null?z=ir(z):(z=Cn(u)?_o:hn.current,z=ja(a,z));var ve=u.getDerivedStateFromProps;(oe=typeof ve=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(O!==ae||ie!==z)&&h1(a,I,p,z),bs=!1,ie=a.memoizedState,I.state=ie,kd(a,p,I,v);var ke=a.memoizedState;O!==ae||ie!==ke||In.current||bs?(typeof ve=="function"&&(Dm(a,u,ve,p),ke=a.memoizedState),(X=bs||u1(a,u,X,p,ie,ke,z)||!1)?(oe||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(p,ke,z),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(p,ke,z)),typeof I.componentDidUpdate=="function"&&(a.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof I.componentDidUpdate!="function"||O===i.memoizedProps&&ie===i.memoizedState||(a.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||O===i.memoizedProps&&ie===i.memoizedState||(a.flags|=1024),a.memoizedProps=p,a.memoizedState=ke),I.props=p,I.state=ke,I.context=z,p=X):(typeof I.componentDidUpdate!="function"||O===i.memoizedProps&&ie===i.memoizedState||(a.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||O===i.memoizedProps&&ie===i.memoizedState||(a.flags|=1024),p=!1)}return Bm(i,a,u,p,w,v)}function Bm(i,a,u,p,v,w){k1(i,a);var I=(a.flags&128)!==0;if(!p&&!I)return v&&Cv(a,u,!1),Ni(i,a,w);p=a.stateNode,SI.current=a;var O=I&&typeof u.getDerivedStateFromError!="function"?null:p.render();return a.flags|=1,i!==null&&I?(a.child=Na(a,i.child,null,w),a.child=Na(a,null,O,w)):kn(i,a,O,w),a.memoizedState=p.state,v&&Cv(a,u,!0),a.child}function S1(i){var a=i.stateNode;a.pendingContext?Tv(i,a.pendingContext,a.pendingContext!==a.context):a.context&&Tv(i,a.context,!1),km(i,a.containerInfo)}function E1(i,a,u,p,v){return Pa(),pm(v),a.flags|=256,kn(i,a,u,p),a.child}var zm={dehydrated:null,treeContext:null,retryLane:0};function Fm(i){return{baseLanes:i,cachePool:null,transitions:null}}function T1(i,a,u){var p=a.pendingProps,v=kt.current,w=!1,I=(a.flags&128)!==0,O;if((O=I)||(O=i!==null&&i.memoizedState===null?!1:(v&2)!==0),O?(w=!0,a.flags&=-129):(i===null||i.memoizedState!==null)&&(v|=1),lt(kt,v&1),i===null)return mm(a),i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((a.mode&1)===0?a.lanes=1:i.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(I=p.children,i=p.fallback,w?(p=a.mode,w=a.child,I={mode:"hidden",children:I},(p&1)===0&&w!==null?(w.childLanes=0,w.pendingProps=I):w=Wd(I,p,0,null),i=No(i,p,u,null),w.return=a,i.return=a,w.sibling=i,a.child=w,a.child.memoizedState=Fm(u),a.memoizedState=zm,i):Um(a,I));if(v=i.memoizedState,v!==null&&(O=v.dehydrated,O!==null))return EI(i,a,I,p,O,v,u);if(w){w=p.fallback,I=a.mode,v=i.child,O=v.sibling;var z={mode:"hidden",children:p.children};return(I&1)===0&&a.child!==v?(p=a.child,p.childLanes=0,p.pendingProps=z,a.deletions=null):(p=Cs(v,z),p.subtreeFlags=v.subtreeFlags&14680064),O!==null?w=Cs(O,w):(w=No(w,I,u,null),w.flags|=2),w.return=a,p.return=a,p.sibling=w,a.child=p,p=w,w=a.child,I=i.child.memoizedState,I=I===null?Fm(u):{baseLanes:I.baseLanes|u,cachePool:null,transitions:I.transitions},w.memoizedState=I,w.childLanes=i.childLanes&~u,a.memoizedState=zm,p}return w=i.child,i=w.sibling,p=Cs(w,{mode:"visible",children:p.children}),(a.mode&1)===0&&(p.lanes=u),p.return=a,p.sibling=null,i!==null&&(u=a.deletions,u===null?(a.deletions=[i],a.flags|=16):u.push(i)),a.child=p,a.memoizedState=null,p}function Um(i,a){return a=Wd({mode:"visible",children:a},i.mode,0,null),a.return=i,i.child=a}function Ad(i,a,u,p){return p!==null&&pm(p),Na(a,i.child,null,u),i=Um(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function EI(i,a,u,p,v,w,I){if(u)return a.flags&256?(a.flags&=-257,p=Vm(Error(t(422))),Ad(i,a,I,p)):a.memoizedState!==null?(a.child=i.child,a.flags|=128,null):(w=p.fallback,v=a.mode,p=Wd({mode:"visible",children:p.children},v,0,null),w=No(w,v,I,null),w.flags|=2,p.return=a,w.return=a,p.sibling=w,a.child=p,(a.mode&1)!==0&&Na(a,i.child,null,I),a.child.memoizedState=Fm(I),a.memoizedState=zm,w);if((a.mode&1)===0)return Ad(i,a,I,null);if(v.data==="$!"){if(p=v.nextSibling&&v.nextSibling.dataset,p)var O=p.dgst;return p=O,w=Error(t(419)),p=Vm(w,p,void 0),Ad(i,a,I,p)}if(O=(I&i.childLanes)!==0,jn||O){if(p=Xt,p!==null){switch(I&-I){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=(v&(p.suspendedLanes|I))!==0?0:v,v!==0&&v!==w.retryLane&&(w.retryLane=v,Ri(i,v),Cr(p,i,v,-1))}return ip(),p=Vm(Error(t(421))),Ad(i,a,I,p)}return v.data==="$?"?(a.flags|=128,a.child=i.child,a=OI.bind(null,i),v._reactRetry=a,null):(i=w.treeContext,qn=ys(v.nextSibling),Kn=a,wt=!0,Sr=null,i!==null&&(nr[rr++]=ji,nr[rr++]=Ai,nr[rr++]=So,ji=i.id,Ai=i.overflow,So=a),a=Um(a,p.children),a.flags|=4096,a)}function I1(i,a,u){i.lanes|=a;var p=i.alternate;p!==null&&(p.lanes|=a),xm(i.return,a,u)}function Wm(i,a,u,p,v){var w=i.memoizedState;w===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:p,tail:u,tailMode:v}:(w.isBackwards=a,w.rendering=null,w.renderingStartTime=0,w.last=p,w.tail=u,w.tailMode=v)}function C1(i,a,u){var p=a.pendingProps,v=p.revealOrder,w=p.tail;if(kn(i,a,p.children,u),p=kt.current,(p&2)!==0)p=p&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&I1(i,u,a);else if(i.tag===19)I1(i,u,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}p&=1}if(lt(kt,p),(a.mode&1)===0)a.memoizedState=null;else switch(v){case"forwards":for(u=a.child,v=null;u!==null;)i=u.alternate,i!==null&&_d(i)===null&&(v=u),u=u.sibling;u=v,u===null?(v=a.child,a.child=null):(v=u.sibling,u.sibling=null),Wm(a,!1,v,u,w);break;case"backwards":for(u=null,v=a.child,a.child=null;v!==null;){if(i=v.alternate,i!==null&&_d(i)===null){a.child=v;break}i=v.sibling,v.sibling=u,u=v,v=i}Wm(a,!0,u,null,w);break;case"together":Wm(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Rd(i,a){(a.mode&1)===0&&i!==null&&(i.alternate=null,a.alternate=null,a.flags|=2)}function Ni(i,a,u){if(i!==null&&(a.dependencies=i.dependencies),jo|=a.lanes,(u&a.childLanes)===0)return null;if(i!==null&&a.child!==i.child)throw Error(t(153));if(a.child!==null){for(i=a.child,u=Cs(i,i.pendingProps),a.child=u,u.return=a;i.sibling!==null;)i=i.sibling,u=u.sibling=Cs(i,i.pendingProps),u.return=a;u.sibling=null}return a.child}function TI(i,a,u){switch(a.tag){case 3:S1(a),Pa();break;case 5:Uv(a);break;case 1:Cn(a.type)&&fd(a);break;case 4:km(a,a.stateNode.containerInfo);break;case 10:var p=a.type._context,v=a.memoizedProps.value;lt(xd,p._currentValue),p._currentValue=v;break;case 13:if(p=a.memoizedState,p!==null)return p.dehydrated!==null?(lt(kt,kt.current&1),a.flags|=128,null):(u&a.child.childLanes)!==0?T1(i,a,u):(lt(kt,kt.current&1),i=Ni(i,a,u),i!==null?i.sibling:null);lt(kt,kt.current&1);break;case 19:if(p=(u&a.childLanes)!==0,(i.flags&128)!==0){if(p)return C1(i,a,u);a.flags|=128}if(v=a.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),lt(kt,kt.current),p)break;return null;case 22:case 23:return a.lanes=0,b1(i,a,u)}return Ni(i,a,u)}var j1,$m,A1,R1;j1=function(i,a){for(var u=a.child;u!==null;){if(u.tag===5||u.tag===6)i.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},$m=function(){},A1=function(i,a,u,p){var v=i.memoizedProps;if(v!==p){i=a.stateNode,Io(si.current);var w=null;switch(u){case"input":v=Le(i,v),p=Le(i,p),w=[];break;case"select":v=ue({},v,{value:void 0}),p=ue({},p,{value:void 0}),w=[];break;case"textarea":v=Ml(i,v),p=Ml(i,p),w=[];break;default:typeof v.onClick!="function"&&typeof p.onClick=="function"&&(i.onclick=ud)}wr(u,p);var I;u=null;for(X in v)if(!p.hasOwnProperty(X)&&v.hasOwnProperty(X)&&v[X]!=null)if(X==="style"){var O=v[X];for(I in O)O.hasOwnProperty(I)&&(u||(u={}),u[I]="")}else X!=="dangerouslySetInnerHTML"&&X!=="children"&&X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&X!=="autoFocus"&&(s.hasOwnProperty(X)?w||(w=[]):(w=w||[]).push(X,null));for(X in p){var z=p[X];if(O=v!=null?v[X]:void 0,p.hasOwnProperty(X)&&z!==O&&(z!=null||O!=null))if(X==="style")if(O){for(I in O)!O.hasOwnProperty(I)||z&&z.hasOwnProperty(I)||(u||(u={}),u[I]="");for(I in z)z.hasOwnProperty(I)&&O[I]!==z[I]&&(u||(u={}),u[I]=z[I])}else u||(w||(w=[]),w.push(X,u)),u=z;else X==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,O=O?O.__html:void 0,z!=null&&O!==z&&(w=w||[]).push(X,z)):X==="children"?typeof z!="string"&&typeof z!="number"||(w=w||[]).push(X,""+z):X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&(s.hasOwnProperty(X)?(z!=null&&X==="onScroll"&&mt("scroll",i),w||O===z||(w=[])):(w=w||[]).push(X,z))}u&&(w=w||[]).push("style",u);var X=w;(a.updateQueue=X)&&(a.flags|=4)}},R1=function(i,a,u,p){u!==p&&(a.flags|=4)};function bc(i,a){if(!wt)switch(i.tailMode){case"hidden":a=i.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:p.sibling=null}}function mn(i){var a=i.alternate!==null&&i.alternate.child===i.child,u=0,p=0;if(a)for(var v=i.child;v!==null;)u|=v.lanes|v.childLanes,p|=v.subtreeFlags&14680064,p|=v.flags&14680064,v.return=i,v=v.sibling;else for(v=i.child;v!==null;)u|=v.lanes|v.childLanes,p|=v.subtreeFlags,p|=v.flags,v.return=i,v=v.sibling;return i.subtreeFlags|=p,i.childLanes=u,a}function II(i,a,u){var p=a.pendingProps;switch(hm(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mn(a),null;case 1:return Cn(a.type)&&hd(),mn(a),null;case 3:return p=a.stateNode,Va(),pt(In),pt(hn),Em(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(i===null||i.child===null)&&(yd(a)?a.flags|=4:i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Sr!==null&&(tp(Sr),Sr=null))),$m(i,a),mn(a),null;case 5:_m(a);var v=Io(gc.current);if(u=a.type,i!==null&&a.stateNode!=null)A1(i,a,u,p,v),i.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!p){if(a.stateNode===null)throw Error(t(166));return mn(a),null}if(i=Io(si.current),yd(a)){p=a.stateNode,u=a.type;var w=a.memoizedProps;switch(p[ii]=a,p[dc]=w,i=(a.mode&1)!==0,u){case"dialog":mt("cancel",p),mt("close",p);break;case"iframe":case"object":case"embed":mt("load",p);break;case"video":case"audio":for(v=0;v<lc.length;v++)mt(lc[v],p);break;case"source":mt("error",p);break;case"img":case"image":case"link":mt("error",p),mt("load",p);break;case"details":mt("toggle",p);break;case"input":Ue(p,w),mt("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!w.multiple},mt("invalid",p);break;case"textarea":Vl(p,w),mt("invalid",p)}wr(u,w),v=null;for(var I in w)if(w.hasOwnProperty(I)){var O=w[I];I==="children"?typeof O=="string"?p.textContent!==O&&(w.suppressHydrationWarning!==!0&&cd(p.textContent,O,i),v=["children",O]):typeof O=="number"&&p.textContent!==""+O&&(w.suppressHydrationWarning!==!0&&cd(p.textContent,O,i),v=["children",""+O]):s.hasOwnProperty(I)&&O!=null&&I==="onScroll"&&mt("scroll",p)}switch(u){case"input":xt(p),Wr(p,w,!0);break;case"textarea":xt(p),ts(p);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(p.onclick=ud)}p=v,a.updateQueue=p,p!==null&&(a.flags|=4)}else{I=v.nodeType===9?v:v.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Ll(u)),i==="http://www.w3.org/1999/xhtml"?u==="script"?(i=I.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof p.is=="string"?i=I.createElement(u,{is:p.is}):(i=I.createElement(u),u==="select"&&(I=i,p.multiple?I.multiple=!0:p.size&&(I.size=p.size))):i=I.createElementNS(i,u),i[ii]=a,i[dc]=p,j1(i,a,!1,!1),a.stateNode=i;e:{switch(I=sa(u,p),u){case"dialog":mt("cancel",i),mt("close",i),v=p;break;case"iframe":case"object":case"embed":mt("load",i),v=p;break;case"video":case"audio":for(v=0;v<lc.length;v++)mt(lc[v],i);v=p;break;case"source":mt("error",i),v=p;break;case"img":case"image":case"link":mt("error",i),mt("load",i),v=p;break;case"details":mt("toggle",i),v=p;break;case"input":Ue(i,p),v=Le(i,p),mt("invalid",i);break;case"option":v=p;break;case"select":i._wrapperState={wasMultiple:!!p.multiple},v=ue({},p,{value:void 0}),mt("invalid",i);break;case"textarea":Vl(i,p),v=Ml(i,p),mt("invalid",i);break;default:v=p}wr(u,v),O=v;for(w in O)if(O.hasOwnProperty(w)){var z=O[w];w==="style"?ia(i,z):w==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,z!=null&&Lu(i,z)):w==="children"?typeof z=="string"?(u!=="textarea"||z!=="")&&ao(i,z):typeof z=="number"&&ao(i,""+z):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(s.hasOwnProperty(w)?z!=null&&w==="onScroll"&&mt("scroll",i):z!=null&&D(i,w,z,I))}switch(u){case"input":xt(i),Wr(i,p,!1);break;case"textarea":xt(i),ts(i);break;case"option":p.value!=null&&i.setAttribute("value",""+Q(p.value));break;case"select":i.multiple=!!p.multiple,w=p.value,w!=null?xr(i,!!p.multiple,w,!1):p.defaultValue!=null&&xr(i,!!p.multiple,p.defaultValue,!0);break;default:typeof v.onClick=="function"&&(i.onclick=ud)}switch(u){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return mn(a),null;case 6:if(i&&a.stateNode!=null)R1(i,a,i.memoizedProps,p);else{if(typeof p!="string"&&a.stateNode===null)throw Error(t(166));if(u=Io(gc.current),Io(si.current),yd(a)){if(p=a.stateNode,u=a.memoizedProps,p[ii]=a,(w=p.nodeValue!==u)&&(i=Kn,i!==null))switch(i.tag){case 3:cd(p.nodeValue,u,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&cd(p.nodeValue,u,(i.mode&1)!==0)}w&&(a.flags|=4)}else p=(u.nodeType===9?u:u.ownerDocument).createTextNode(p),p[ii]=a,a.stateNode=p}return mn(a),null;case 13:if(pt(kt),p=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(wt&&qn!==null&&(a.mode&1)!==0&&(a.flags&128)===0)Dv(),Pa(),a.flags|=98560,w=!1;else if(w=yd(a),p!==null&&p.dehydrated!==null){if(i===null){if(!w)throw Error(t(318));if(w=a.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(t(317));w[ii]=a}else Pa(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;mn(a),w=!1}else Sr!==null&&(tp(Sr),Sr=null),w=!0;if(!w)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=u,a):(p=p!==null,p!==(i!==null&&i.memoizedState!==null)&&p&&(a.child.flags|=8192,(a.mode&1)!==0&&(i===null||(kt.current&1)!==0?Ht===0&&(Ht=3):ip())),a.updateQueue!==null&&(a.flags|=4),mn(a),null);case 4:return Va(),$m(i,a),i===null&&cc(a.stateNode.containerInfo),mn(a),null;case 10:return vm(a.type._context),mn(a),null;case 17:return Cn(a.type)&&hd(),mn(a),null;case 19:if(pt(kt),w=a.memoizedState,w===null)return mn(a),null;if(p=(a.flags&128)!==0,I=w.rendering,I===null)if(p)bc(w,!1);else{if(Ht!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(I=_d(i),I!==null){for(a.flags|=128,bc(w,!1),p=I.updateQueue,p!==null&&(a.updateQueue=p,a.flags|=4),a.subtreeFlags=0,p=u,u=a.child;u!==null;)w=u,i=p,w.flags&=14680066,I=w.alternate,I===null?(w.childLanes=0,w.lanes=i,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=I.childLanes,w.lanes=I.lanes,w.child=I.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=I.memoizedProps,w.memoizedState=I.memoizedState,w.updateQueue=I.updateQueue,w.type=I.type,i=I.dependencies,w.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),u=u.sibling;return lt(kt,kt.current&1|2),a.child}i=i.sibling}w.tail!==null&&ft()>za&&(a.flags|=128,p=!0,bc(w,!1),a.lanes=4194304)}else{if(!p)if(i=_d(I),i!==null){if(a.flags|=128,p=!0,u=i.updateQueue,u!==null&&(a.updateQueue=u,a.flags|=4),bc(w,!0),w.tail===null&&w.tailMode==="hidden"&&!I.alternate&&!wt)return mn(a),null}else 2*ft()-w.renderingStartTime>za&&u!==1073741824&&(a.flags|=128,p=!0,bc(w,!1),a.lanes=4194304);w.isBackwards?(I.sibling=a.child,a.child=I):(u=w.last,u!==null?u.sibling=I:a.child=I,w.last=I)}return w.tail!==null?(a=w.tail,w.rendering=a,w.tail=a.sibling,w.renderingStartTime=ft(),a.sibling=null,u=kt.current,lt(kt,p?u&1|2:u&1),a):(mn(a),null);case 22:case 23:return rp(),p=a.memoizedState!==null,i!==null&&i.memoizedState!==null!==p&&(a.flags|=8192),p&&(a.mode&1)!==0?(Gn&1073741824)!==0&&(mn(a),a.subtreeFlags&6&&(a.flags|=8192)):mn(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function CI(i,a){switch(hm(a),a.tag){case 1:return Cn(a.type)&&hd(),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return Va(),pt(In),pt(hn),Em(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 5:return _m(a),null;case 13:if(pt(kt),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(t(340));Pa()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return pt(kt),null;case 4:return Va(),null;case 10:return vm(a.type._context),null;case 22:case 23:return rp(),null;case 24:return null;default:return null}}var Pd=!1,pn=!1,jI=typeof WeakSet=="function"?WeakSet:Set,be=null;function Oa(i,a){var u=i.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(p){It(i,a,p)}else u.current=null}function Hm(i,a,u){try{u()}catch(p){It(i,a,p)}}var P1=!1;function AI(i,a){if(rm=Si,i=uv(),Qf(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var p=u.getSelection&&u.getSelection();if(p&&p.rangeCount!==0){u=p.anchorNode;var v=p.anchorOffset,w=p.focusNode;p=p.focusOffset;try{u.nodeType,w.nodeType}catch{u=null;break e}var I=0,O=-1,z=-1,X=0,oe=0,ae=i,ie=null;t:for(;;){for(var ve;ae!==u||v!==0&&ae.nodeType!==3||(O=I+v),ae!==w||p!==0&&ae.nodeType!==3||(z=I+p),ae.nodeType===3&&(I+=ae.nodeValue.length),(ve=ae.firstChild)!==null;)ie=ae,ae=ve;for(;;){if(ae===i)break t;if(ie===u&&++X===v&&(O=I),ie===w&&++oe===p&&(z=I),(ve=ae.nextSibling)!==null)break;ae=ie,ie=ae.parentNode}ae=ve}u=O===-1||z===-1?null:{start:O,end:z}}else u=null}u=u||{start:0,end:0}}else u=null;for(im={focusedElem:i,selectionRange:u},Si=!1,be=a;be!==null;)if(a=be,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,be=i;else for(;be!==null;){a=be;try{var ke=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(ke!==null){var _e=ke.memoizedProps,Rt=ke.memoizedState,q=a.stateNode,W=q.getSnapshotBeforeUpdate(a.elementType===a.type?_e:Er(a.type,_e),Rt);q.__reactInternalSnapshotBeforeUpdate=W}break;case 3:var Y=a.stateNode.containerInfo;Y.nodeType===1?Y.textContent="":Y.nodeType===9&&Y.documentElement&&Y.removeChild(Y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ce){It(a,a.return,ce)}if(i=a.sibling,i!==null){i.return=a.return,be=i;break}be=a.return}return ke=P1,P1=!1,ke}function kc(i,a,u){var p=a.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var v=p=p.next;do{if((v.tag&i)===i){var w=v.destroy;v.destroy=void 0,w!==void 0&&Hm(a,u,w)}v=v.next}while(v!==p)}}function Nd(i,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var u=a=a.next;do{if((u.tag&i)===i){var p=u.create;u.destroy=p()}u=u.next}while(u!==a)}}function Km(i){var a=i.ref;if(a!==null){var u=i.stateNode;switch(i.tag){case 5:i=u;break;default:i=u}typeof a=="function"?a(i):a.current=i}}function N1(i){var a=i.alternate;a!==null&&(i.alternate=null,N1(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&(delete a[ii],delete a[dc],delete a[lm],delete a[hI],delete a[fI])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function D1(i){return i.tag===5||i.tag===3||i.tag===4}function M1(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||D1(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function qm(i,a,u){var p=i.tag;if(p===5||p===6)i=i.stateNode,a?u.nodeType===8?u.parentNode.insertBefore(i,a):u.insertBefore(i,a):(u.nodeType===8?(a=u.parentNode,a.insertBefore(i,u)):(a=u,a.appendChild(i)),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=ud));else if(p!==4&&(i=i.child,i!==null))for(qm(i,a,u),i=i.sibling;i!==null;)qm(i,a,u),i=i.sibling}function Gm(i,a,u){var p=i.tag;if(p===5||p===6)i=i.stateNode,a?u.insertBefore(i,a):u.appendChild(i);else if(p!==4&&(i=i.child,i!==null))for(Gm(i,a,u),i=i.sibling;i!==null;)Gm(i,a,u),i=i.sibling}var rn=null,Tr=!1;function _s(i,a,u){for(u=u.child;u!==null;)V1(i,a,u),u=u.sibling}function V1(i,a,u){if(zn&&typeof zn.onCommitFiberUnmount=="function")try{zn.onCommitFiberUnmount(fo,u)}catch{}switch(u.tag){case 5:pn||Oa(u,a);case 6:var p=rn,v=Tr;rn=null,_s(i,a,u),rn=p,Tr=v,rn!==null&&(Tr?(i=rn,u=u.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)):rn.removeChild(u.stateNode));break;case 18:rn!==null&&(Tr?(i=rn,u=u.stateNode,i.nodeType===8?am(i.parentNode,u):i.nodeType===1&&am(i,u),fs(i)):am(rn,u.stateNode));break;case 4:p=rn,v=Tr,rn=u.stateNode.containerInfo,Tr=!0,_s(i,a,u),rn=p,Tr=v;break;case 0:case 11:case 14:case 15:if(!pn&&(p=u.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){v=p=p.next;do{var w=v,I=w.destroy;w=w.tag,I!==void 0&&((w&2)!==0||(w&4)!==0)&&Hm(u,a,I),v=v.next}while(v!==p)}_s(i,a,u);break;case 1:if(!pn&&(Oa(u,a),p=u.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=u.memoizedProps,p.state=u.memoizedState,p.componentWillUnmount()}catch(O){It(u,a,O)}_s(i,a,u);break;case 21:_s(i,a,u);break;case 22:u.mode&1?(pn=(p=pn)||u.memoizedState!==null,_s(i,a,u),pn=p):_s(i,a,u);break;default:_s(i,a,u)}}function L1(i){var a=i.updateQueue;if(a!==null){i.updateQueue=null;var u=i.stateNode;u===null&&(u=i.stateNode=new jI),a.forEach(function(p){var v=BI.bind(null,i,p);u.has(p)||(u.add(p),p.then(v,v))})}}function Ir(i,a){var u=a.deletions;if(u!==null)for(var p=0;p<u.length;p++){var v=u[p];try{var w=i,I=a,O=I;e:for(;O!==null;){switch(O.tag){case 5:rn=O.stateNode,Tr=!1;break e;case 3:rn=O.stateNode.containerInfo,Tr=!0;break e;case 4:rn=O.stateNode.containerInfo,Tr=!0;break e}O=O.return}if(rn===null)throw Error(t(160));V1(w,I,v),rn=null,Tr=!1;var z=v.alternate;z!==null&&(z.return=null),v.return=null}catch(X){It(v,a,X)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)O1(a,i),a=a.sibling}function O1(i,a){var u=i.alternate,p=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Ir(a,i),ai(i),p&4){try{kc(3,i,i.return),Nd(3,i)}catch(_e){It(i,i.return,_e)}try{kc(5,i,i.return)}catch(_e){It(i,i.return,_e)}}break;case 1:Ir(a,i),ai(i),p&512&&u!==null&&Oa(u,u.return);break;case 5:if(Ir(a,i),ai(i),p&512&&u!==null&&Oa(u,u.return),i.flags&32){var v=i.stateNode;try{ao(v,"")}catch(_e){It(i,i.return,_e)}}if(p&4&&(v=i.stateNode,v!=null)){var w=i.memoizedProps,I=u!==null?u.memoizedProps:w,O=i.type,z=i.updateQueue;if(i.updateQueue=null,z!==null)try{O==="input"&&w.type==="radio"&&w.name!=null&&ot(v,w),sa(O,I);var X=sa(O,w);for(I=0;I<z.length;I+=2){var oe=z[I],ae=z[I+1];oe==="style"?ia(v,ae):oe==="dangerouslySetInnerHTML"?Lu(v,ae):oe==="children"?ao(v,ae):D(v,oe,ae,X)}switch(O){case"input":Qt(v,w);break;case"textarea":Vu(v,w);break;case"select":var ie=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!w.multiple;var ve=w.value;ve!=null?xr(v,!!w.multiple,ve,!1):ie!==!!w.multiple&&(w.defaultValue!=null?xr(v,!!w.multiple,w.defaultValue,!0):xr(v,!!w.multiple,w.multiple?[]:"",!1))}v[dc]=w}catch(_e){It(i,i.return,_e)}}break;case 6:if(Ir(a,i),ai(i),p&4){if(i.stateNode===null)throw Error(t(162));v=i.stateNode,w=i.memoizedProps;try{v.nodeValue=w}catch(_e){It(i,i.return,_e)}}break;case 3:if(Ir(a,i),ai(i),p&4&&u!==null&&u.memoizedState.isDehydrated)try{fs(a.containerInfo)}catch(_e){It(i,i.return,_e)}break;case 4:Ir(a,i),ai(i);break;case 13:Ir(a,i),ai(i),v=i.child,v.flags&8192&&(w=v.memoizedState!==null,v.stateNode.isHidden=w,!w||v.alternate!==null&&v.alternate.memoizedState!==null||(Xm=ft())),p&4&&L1(i);break;case 22:if(oe=u!==null&&u.memoizedState!==null,i.mode&1?(pn=(X=pn)||oe,Ir(a,i),pn=X):Ir(a,i),ai(i),p&8192){if(X=i.memoizedState!==null,(i.stateNode.isHidden=X)&&!oe&&(i.mode&1)!==0)for(be=i,oe=i.child;oe!==null;){for(ae=be=oe;be!==null;){switch(ie=be,ve=ie.child,ie.tag){case 0:case 11:case 14:case 15:kc(4,ie,ie.return);break;case 1:Oa(ie,ie.return);var ke=ie.stateNode;if(typeof ke.componentWillUnmount=="function"){p=ie,u=ie.return;try{a=p,ke.props=a.memoizedProps,ke.state=a.memoizedState,ke.componentWillUnmount()}catch(_e){It(p,u,_e)}}break;case 5:Oa(ie,ie.return);break;case 22:if(ie.memoizedState!==null){F1(ae);continue}}ve!==null?(ve.return=ie,be=ve):F1(ae)}oe=oe.sibling}e:for(oe=null,ae=i;;){if(ae.tag===5){if(oe===null){oe=ae;try{v=ae.stateNode,X?(w=v.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(O=ae.stateNode,z=ae.memoizedProps.style,I=z!=null&&z.hasOwnProperty("display")?z.display:null,O.style.display=is("display",I))}catch(_e){It(i,i.return,_e)}}}else if(ae.tag===6){if(oe===null)try{ae.stateNode.nodeValue=X?"":ae.memoizedProps}catch(_e){It(i,i.return,_e)}}else if((ae.tag!==22&&ae.tag!==23||ae.memoizedState===null||ae===i)&&ae.child!==null){ae.child.return=ae,ae=ae.child;continue}if(ae===i)break e;for(;ae.sibling===null;){if(ae.return===null||ae.return===i)break e;oe===ae&&(oe=null),ae=ae.return}oe===ae&&(oe=null),ae.sibling.return=ae.return,ae=ae.sibling}}break;case 19:Ir(a,i),ai(i),p&4&&L1(i);break;case 21:break;default:Ir(a,i),ai(i)}}function ai(i){var a=i.flags;if(a&2){try{e:{for(var u=i.return;u!==null;){if(D1(u)){var p=u;break e}u=u.return}throw Error(t(160))}switch(p.tag){case 5:var v=p.stateNode;p.flags&32&&(ao(v,""),p.flags&=-33);var w=M1(i);Gm(i,w,v);break;case 3:case 4:var I=p.stateNode.containerInfo,O=M1(i);qm(i,O,I);break;default:throw Error(t(161))}}catch(z){It(i,i.return,z)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function RI(i,a,u){be=i,B1(i)}function B1(i,a,u){for(var p=(i.mode&1)!==0;be!==null;){var v=be,w=v.child;if(v.tag===22&&p){var I=v.memoizedState!==null||Pd;if(!I){var O=v.alternate,z=O!==null&&O.memoizedState!==null||pn;O=Pd;var X=pn;if(Pd=I,(pn=z)&&!X)for(be=v;be!==null;)I=be,z=I.child,I.tag===22&&I.memoizedState!==null?U1(v):z!==null?(z.return=I,be=z):U1(v);for(;w!==null;)be=w,B1(w),w=w.sibling;be=v,Pd=O,pn=X}z1(i)}else(v.subtreeFlags&8772)!==0&&w!==null?(w.return=v,be=w):z1(i)}}function z1(i){for(;be!==null;){var a=be;if((a.flags&8772)!==0){var u=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:pn||Nd(5,a);break;case 1:var p=a.stateNode;if(a.flags&4&&!pn)if(u===null)p.componentDidMount();else{var v=a.elementType===a.type?u.memoizedProps:Er(a.type,u.memoizedProps);p.componentDidUpdate(v,u.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var w=a.updateQueue;w!==null&&Fv(a,w,p);break;case 3:var I=a.updateQueue;if(I!==null){if(u=null,a.child!==null)switch(a.child.tag){case 5:u=a.child.stateNode;break;case 1:u=a.child.stateNode}Fv(a,I,u)}break;case 5:var O=a.stateNode;if(u===null&&a.flags&4){u=O;var z=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":z.autoFocus&&u.focus();break;case"img":z.src&&(u.src=z.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var X=a.alternate;if(X!==null){var oe=X.memoizedState;if(oe!==null){var ae=oe.dehydrated;ae!==null&&fs(ae)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}pn||a.flags&512&&Km(a)}catch(ie){It(a,a.return,ie)}}if(a===i){be=null;break}if(u=a.sibling,u!==null){u.return=a.return,be=u;break}be=a.return}}function F1(i){for(;be!==null;){var a=be;if(a===i){be=null;break}var u=a.sibling;if(u!==null){u.return=a.return,be=u;break}be=a.return}}function U1(i){for(;be!==null;){var a=be;try{switch(a.tag){case 0:case 11:case 15:var u=a.return;try{Nd(4,a)}catch(z){It(a,u,z)}break;case 1:var p=a.stateNode;if(typeof p.componentDidMount=="function"){var v=a.return;try{p.componentDidMount()}catch(z){It(a,v,z)}}var w=a.return;try{Km(a)}catch(z){It(a,w,z)}break;case 5:var I=a.return;try{Km(a)}catch(z){It(a,I,z)}}}catch(z){It(a,a.return,z)}if(a===i){be=null;break}var O=a.sibling;if(O!==null){O.return=a.return,be=O;break}be=a.return}}var PI=Math.ceil,Dd=U.ReactCurrentDispatcher,Qm=U.ReactCurrentOwner,or=U.ReactCurrentBatchConfig,Ze=0,Xt=null,Ot=null,sn=0,Gn=0,Ba=vs(0),Ht=0,_c=null,jo=0,Md=0,Ym=0,Sc=null,An=null,Xm=0,za=1/0,Di=null,Vd=!1,Jm=null,Ss=null,Ld=!1,Es=null,Od=0,Ec=0,Zm=null,Bd=-1,zd=0;function _n(){return(Ze&6)!==0?ft():Bd!==-1?Bd:Bd=ft()}function Ts(i){return(i.mode&1)===0?1:(Ze&2)!==0&&sn!==0?sn&-sn:pI.transition!==null?(zd===0&&(zd=Kl()),zd):(i=Ye,i!==0||(i=window.event,i=i===void 0?16:pa(i.type)),i)}function Cr(i,a,u,p){if(50<Ec)throw Ec=0,Zm=null,Error(t(185));yo(i,u,p),((Ze&2)===0||i!==Xt)&&(i===Xt&&((Ze&2)===0&&(Md|=u),Ht===4&&Is(i,sn)),Rn(i,p),u===1&&Ze===0&&(a.mode&1)===0&&(za=ft()+500,md&&ws()))}function Rn(i,a){var u=i.callbackNode;go(i,a);var p=bi(i,i===Xt?sn:0);if(p===0)u!==null&&la(u),i.callbackNode=null,i.callbackPriority=0;else if(a=p&-p,i.callbackPriority!==a){if(u!=null&&la(u),a===1)i.tag===0?mI($1.bind(null,i)):jv($1.bind(null,i)),uI(function(){(Ze&6)===0&&ws()}),u=null;else{switch(Gr(p)){case 1:u=ca;break;case 4:u=Wl;break;case 16:u=ho;break;case 536870912:u=ua;break;default:u=ho}u=J1(u,W1.bind(null,i))}i.callbackPriority=a,i.callbackNode=u}}function W1(i,a){if(Bd=-1,zd=0,(Ze&6)!==0)throw Error(t(327));var u=i.callbackNode;if(Fa()&&i.callbackNode!==u)return null;var p=bi(i,i===Xt?sn:0);if(p===0)return null;if((p&30)!==0||(p&i.expiredLanes)!==0||a)a=Fd(i,p);else{a=p;var v=Ze;Ze|=2;var w=K1();(Xt!==i||sn!==a)&&(Di=null,za=ft()+500,Ro(i,a));do try{MI();break}catch(O){H1(i,O)}while(!0);ym(),Dd.current=w,Ze=v,Ot!==null?a=0:(Xt=null,sn=0,a=Ht)}if(a!==0){if(a===2&&(v=Hl(i),v!==0&&(p=v,a=ep(i,v))),a===1)throw u=_c,Ro(i,0),Is(i,p),Rn(i,ft()),u;if(a===6)Is(i,p);else{if(v=i.current.alternate,(p&30)===0&&!NI(v)&&(a=Fd(i,p),a===2&&(w=Hl(i),w!==0&&(p=w,a=ep(i,w))),a===1))throw u=_c,Ro(i,0),Is(i,p),Rn(i,ft()),u;switch(i.finishedWork=v,i.finishedLanes=p,a){case 0:case 1:throw Error(t(345));case 2:Po(i,An,Di);break;case 3:if(Is(i,p),(p&130023424)===p&&(a=Xm+500-ft(),10<a)){if(bi(i,0)!==0)break;if(v=i.suspendedLanes,(v&p)!==p){_n(),i.pingedLanes|=i.suspendedLanes&v;break}i.timeoutHandle=om(Po.bind(null,i,An,Di),a);break}Po(i,An,Di);break;case 4:if(Is(i,p),(p&4194240)===p)break;for(a=i.eventTimes,v=-1;0<p;){var I=31-Fn(p);w=1<<I,I=a[I],I>v&&(v=I),p&=~w}if(p=v,p=ft()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*PI(p/1960))-p,10<p){i.timeoutHandle=om(Po.bind(null,i,An,Di),p);break}Po(i,An,Di);break;case 5:Po(i,An,Di);break;default:throw Error(t(329))}}}return Rn(i,ft()),i.callbackNode===u?W1.bind(null,i):null}function ep(i,a){var u=Sc;return i.current.memoizedState.isDehydrated&&(Ro(i,a).flags|=256),i=Fd(i,a),i!==2&&(a=An,An=u,a!==null&&tp(a)),i}function tp(i){An===null?An=i:An.push.apply(An,i)}function NI(i){for(var a=i;;){if(a.flags&16384){var u=a.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var p=0;p<u.length;p++){var v=u[p],w=v.getSnapshot;v=v.value;try{if(!_r(w(),v))return!1}catch{return!1}}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Is(i,a){for(a&=~Ym,a&=~Md,i.suspendedLanes|=a,i.pingedLanes&=~a,i=i.expirationTimes;0<a;){var u=31-Fn(a),p=1<<u;i[u]=-1,a&=~p}}function $1(i){if((Ze&6)!==0)throw Error(t(327));Fa();var a=bi(i,0);if((a&1)===0)return Rn(i,ft()),null;var u=Fd(i,a);if(i.tag!==0&&u===2){var p=Hl(i);p!==0&&(a=p,u=ep(i,p))}if(u===1)throw u=_c,Ro(i,0),Is(i,a),Rn(i,ft()),u;if(u===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=a,Po(i,An,Di),Rn(i,ft()),null}function np(i,a){var u=Ze;Ze|=1;try{return i(a)}finally{Ze=u,Ze===0&&(za=ft()+500,md&&ws())}}function Ao(i){Es!==null&&Es.tag===0&&(Ze&6)===0&&Fa();var a=Ze;Ze|=1;var u=or.transition,p=Ye;try{if(or.transition=null,Ye=1,i)return i()}finally{Ye=p,or.transition=u,Ze=a,(Ze&6)===0&&ws()}}function rp(){Gn=Ba.current,pt(Ba)}function Ro(i,a){i.finishedWork=null,i.finishedLanes=0;var u=i.timeoutHandle;if(u!==-1&&(i.timeoutHandle=-1,cI(u)),Ot!==null)for(u=Ot.return;u!==null;){var p=u;switch(hm(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&hd();break;case 3:Va(),pt(In),pt(hn),Em();break;case 5:_m(p);break;case 4:Va();break;case 13:pt(kt);break;case 19:pt(kt);break;case 10:vm(p.type._context);break;case 22:case 23:rp()}u=u.return}if(Xt=i,Ot=i=Cs(i.current,null),sn=Gn=a,Ht=0,_c=null,Ym=Md=jo=0,An=Sc=null,To!==null){for(a=0;a<To.length;a++)if(u=To[a],p=u.interleaved,p!==null){u.interleaved=null;var v=p.next,w=u.pending;if(w!==null){var I=w.next;w.next=v,p.next=I}u.pending=p}To=null}return i}function H1(i,a){do{var u=Ot;try{if(ym(),Sd.current=Cd,Ed){for(var p=_t.memoizedState;p!==null;){var v=p.queue;v!==null&&(v.pending=null),p=p.next}Ed=!1}if(Co=0,Yt=$t=_t=null,yc=!1,vc=0,Qm.current=null,u===null||u.return===null){Ht=1,_c=a,Ot=null;break}e:{var w=i,I=u.return,O=u,z=a;if(a=sn,O.flags|=32768,z!==null&&typeof z=="object"&&typeof z.then=="function"){var X=z,oe=O,ae=oe.tag;if((oe.mode&1)===0&&(ae===0||ae===11||ae===15)){var ie=oe.alternate;ie?(oe.updateQueue=ie.updateQueue,oe.memoizedState=ie.memoizedState,oe.lanes=ie.lanes):(oe.updateQueue=null,oe.memoizedState=null)}var ve=g1(I);if(ve!==null){ve.flags&=-257,y1(ve,I,O,w,a),ve.mode&1&&p1(w,X,a),a=ve,z=X;var ke=a.updateQueue;if(ke===null){var _e=new Set;_e.add(z),a.updateQueue=_e}else ke.add(z);break e}else{if((a&1)===0){p1(w,X,a),ip();break e}z=Error(t(426))}}else if(wt&&O.mode&1){var Rt=g1(I);if(Rt!==null){(Rt.flags&65536)===0&&(Rt.flags|=256),y1(Rt,I,O,w,a),pm(La(z,O));break e}}w=z=La(z,O),Ht!==4&&(Ht=2),Sc===null?Sc=[w]:Sc.push(w),w=I;do{switch(w.tag){case 3:w.flags|=65536,a&=-a,w.lanes|=a;var q=f1(w,z,a);zv(w,q);break e;case 1:O=z;var W=w.type,Y=w.stateNode;if((w.flags&128)===0&&(typeof W.getDerivedStateFromError=="function"||Y!==null&&typeof Y.componentDidCatch=="function"&&(Ss===null||!Ss.has(Y)))){w.flags|=65536,a&=-a,w.lanes|=a;var ce=m1(w,O,a);zv(w,ce);break e}}w=w.return}while(w!==null)}G1(u)}catch(Se){a=Se,Ot===u&&u!==null&&(Ot=u=u.return);continue}break}while(!0)}function K1(){var i=Dd.current;return Dd.current=Cd,i===null?Cd:i}function ip(){(Ht===0||Ht===3||Ht===2)&&(Ht=4),Xt===null||(jo&268435455)===0&&(Md&268435455)===0||Is(Xt,sn)}function Fd(i,a){var u=Ze;Ze|=2;var p=K1();(Xt!==i||sn!==a)&&(Di=null,Ro(i,a));do try{DI();break}catch(v){H1(i,v)}while(!0);if(ym(),Ze=u,Dd.current=p,Ot!==null)throw Error(t(261));return Xt=null,sn=0,Ht}function DI(){for(;Ot!==null;)q1(Ot)}function MI(){for(;Ot!==null&&!uo();)q1(Ot)}function q1(i){var a=X1(i.alternate,i,Gn);i.memoizedProps=i.pendingProps,a===null?G1(i):Ot=a,Qm.current=null}function G1(i){var a=i;do{var u=a.alternate;if(i=a.return,(a.flags&32768)===0){if(u=II(u,a,Gn),u!==null){Ot=u;return}}else{if(u=CI(u,a),u!==null){u.flags&=32767,Ot=u;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Ht=6,Ot=null;return}}if(a=a.sibling,a!==null){Ot=a;return}Ot=a=i}while(a!==null);Ht===0&&(Ht=5)}function Po(i,a,u){var p=Ye,v=or.transition;try{or.transition=null,Ye=1,VI(i,a,u,p)}finally{or.transition=v,Ye=p}return null}function VI(i,a,u,p){do Fa();while(Es!==null);if((Ze&6)!==0)throw Error(t(327));u=i.finishedWork;var v=i.finishedLanes;if(u===null)return null;if(i.finishedWork=null,i.finishedLanes=0,u===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var w=u.lanes|u.childLanes;if($f(i,w),i===Xt&&(Ot=Xt=null,sn=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Ld||(Ld=!0,J1(ho,function(){return Fa(),null})),w=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||w){w=or.transition,or.transition=null;var I=Ye;Ye=1;var O=Ze;Ze|=4,Qm.current=null,AI(i,u),O1(u,i),nI(im),Si=!!rm,im=rm=null,i.current=u,RI(u),wi(),Ze=O,Ye=I,or.transition=w}else i.current=u;if(Ld&&(Ld=!1,Es=i,Od=v),w=i.pendingLanes,w===0&&(Ss=null),Gu(u.stateNode),Rn(i,ft()),a!==null)for(p=i.onRecoverableError,u=0;u<a.length;u++)v=a[u],p(v.value,{componentStack:v.stack,digest:v.digest});if(Vd)throw Vd=!1,i=Jm,Jm=null,i;return(Od&1)!==0&&i.tag!==0&&Fa(),w=i.pendingLanes,(w&1)!==0?i===Zm?Ec++:(Ec=0,Zm=i):Ec=0,ws(),null}function Fa(){if(Es!==null){var i=Gr(Od),a=or.transition,u=Ye;try{if(or.transition=null,Ye=16>i?16:i,Es===null)var p=!1;else{if(i=Es,Es=null,Od=0,(Ze&6)!==0)throw Error(t(331));var v=Ze;for(Ze|=4,be=i.current;be!==null;){var w=be,I=w.child;if((be.flags&16)!==0){var O=w.deletions;if(O!==null){for(var z=0;z<O.length;z++){var X=O[z];for(be=X;be!==null;){var oe=be;switch(oe.tag){case 0:case 11:case 15:kc(8,oe,w)}var ae=oe.child;if(ae!==null)ae.return=oe,be=ae;else for(;be!==null;){oe=be;var ie=oe.sibling,ve=oe.return;if(N1(oe),oe===X){be=null;break}if(ie!==null){ie.return=ve,be=ie;break}be=ve}}}var ke=w.alternate;if(ke!==null){var _e=ke.child;if(_e!==null){ke.child=null;do{var Rt=_e.sibling;_e.sibling=null,_e=Rt}while(_e!==null)}}be=w}}if((w.subtreeFlags&2064)!==0&&I!==null)I.return=w,be=I;else e:for(;be!==null;){if(w=be,(w.flags&2048)!==0)switch(w.tag){case 0:case 11:case 15:kc(9,w,w.return)}var q=w.sibling;if(q!==null){q.return=w.return,be=q;break e}be=w.return}}var W=i.current;for(be=W;be!==null;){I=be;var Y=I.child;if((I.subtreeFlags&2064)!==0&&Y!==null)Y.return=I,be=Y;else e:for(I=W;be!==null;){if(O=be,(O.flags&2048)!==0)try{switch(O.tag){case 0:case 11:case 15:Nd(9,O)}}catch(Se){It(O,O.return,Se)}if(O===I){be=null;break e}var ce=O.sibling;if(ce!==null){ce.return=O.return,be=ce;break e}be=O.return}}if(Ze=v,ws(),zn&&typeof zn.onPostCommitFiberRoot=="function")try{zn.onPostCommitFiberRoot(fo,i)}catch{}p=!0}return p}finally{Ye=u,or.transition=a}}return!1}function Q1(i,a,u){a=La(u,a),a=f1(i,a,1),i=ks(i,a,1),a=_n(),i!==null&&(yo(i,1,a),Rn(i,a))}function It(i,a,u){if(i.tag===3)Q1(i,i,u);else for(;a!==null;){if(a.tag===3){Q1(a,i,u);break}else if(a.tag===1){var p=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Ss===null||!Ss.has(p))){i=La(u,i),i=m1(a,i,1),a=ks(a,i,1),i=_n(),a!==null&&(yo(a,1,i),Rn(a,i));break}}a=a.return}}function LI(i,a,u){var p=i.pingCache;p!==null&&p.delete(a),a=_n(),i.pingedLanes|=i.suspendedLanes&u,Xt===i&&(sn&u)===u&&(Ht===4||Ht===3&&(sn&130023424)===sn&&500>ft()-Xm?Ro(i,0):Ym|=u),Rn(i,a)}function Y1(i,a){a===0&&((i.mode&1)===0?a=1:(a=us,us<<=1,(us&130023424)===0&&(us=4194304)));var u=_n();i=Ri(i,a),i!==null&&(yo(i,a,u),Rn(i,u))}function OI(i){var a=i.memoizedState,u=0;a!==null&&(u=a.retryLane),Y1(i,u)}function BI(i,a){var u=0;switch(i.tag){case 13:var p=i.stateNode,v=i.memoizedState;v!==null&&(u=v.retryLane);break;case 19:p=i.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(a),Y1(i,u)}var X1;X1=function(i,a,u){if(i!==null)if(i.memoizedProps!==a.pendingProps||In.current)jn=!0;else{if((i.lanes&u)===0&&(a.flags&128)===0)return jn=!1,TI(i,a,u);jn=(i.flags&131072)!==0}else jn=!1,wt&&(a.flags&1048576)!==0&&Av(a,gd,a.index);switch(a.lanes=0,a.tag){case 2:var p=a.type;Rd(i,a),i=a.pendingProps;var v=ja(a,hn.current);Ma(a,u),v=Cm(null,a,p,i,v,u);var w=jm();return a.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Cn(p)?(w=!0,fd(a)):w=!1,a.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,bm(a),v.updater=jd,a.stateNode=v,v._reactInternals=a,Mm(a,p,i,u),a=Bm(null,a,p,!0,w,u)):(a.tag=0,wt&&w&&dm(a),kn(null,a,v,u),a=a.child),a;case 16:p=a.elementType;e:{switch(Rd(i,a),i=a.pendingProps,v=p._init,p=v(p._payload),a.type=p,v=a.tag=FI(p),i=Er(p,i),v){case 0:a=Om(null,a,p,i,u);break e;case 1:a=_1(null,a,p,i,u);break e;case 11:a=v1(null,a,p,i,u);break e;case 14:a=x1(null,a,p,Er(p.type,i),u);break e}throw Error(t(306,p,""))}return a;case 0:return p=a.type,v=a.pendingProps,v=a.elementType===p?v:Er(p,v),Om(i,a,p,v,u);case 1:return p=a.type,v=a.pendingProps,v=a.elementType===p?v:Er(p,v),_1(i,a,p,v,u);case 3:e:{if(S1(a),i===null)throw Error(t(387));p=a.pendingProps,w=a.memoizedState,v=w.element,Bv(i,a),kd(a,p,null,u);var I=a.memoizedState;if(p=I.element,w.isDehydrated)if(w={element:p,isDehydrated:!1,cache:I.cache,pendingSuspenseBoundaries:I.pendingSuspenseBoundaries,transitions:I.transitions},a.updateQueue.baseState=w,a.memoizedState=w,a.flags&256){v=La(Error(t(423)),a),a=E1(i,a,p,u,v);break e}else if(p!==v){v=La(Error(t(424)),a),a=E1(i,a,p,u,v);break e}else for(qn=ys(a.stateNode.containerInfo.firstChild),Kn=a,wt=!0,Sr=null,u=Lv(a,null,p,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Pa(),p===v){a=Ni(i,a,u);break e}kn(i,a,p,u)}a=a.child}return a;case 5:return Uv(a),i===null&&mm(a),p=a.type,v=a.pendingProps,w=i!==null?i.memoizedProps:null,I=v.children,sm(p,v)?I=null:w!==null&&sm(p,w)&&(a.flags|=32),k1(i,a),kn(i,a,I,u),a.child;case 6:return i===null&&mm(a),null;case 13:return T1(i,a,u);case 4:return km(a,a.stateNode.containerInfo),p=a.pendingProps,i===null?a.child=Na(a,null,p,u):kn(i,a,p,u),a.child;case 11:return p=a.type,v=a.pendingProps,v=a.elementType===p?v:Er(p,v),v1(i,a,p,v,u);case 7:return kn(i,a,a.pendingProps,u),a.child;case 8:return kn(i,a,a.pendingProps.children,u),a.child;case 12:return kn(i,a,a.pendingProps.children,u),a.child;case 10:e:{if(p=a.type._context,v=a.pendingProps,w=a.memoizedProps,I=v.value,lt(xd,p._currentValue),p._currentValue=I,w!==null)if(_r(w.value,I)){if(w.children===v.children&&!In.current){a=Ni(i,a,u);break e}}else for(w=a.child,w!==null&&(w.return=a);w!==null;){var O=w.dependencies;if(O!==null){I=w.child;for(var z=O.firstContext;z!==null;){if(z.context===p){if(w.tag===1){z=Pi(-1,u&-u),z.tag=2;var X=w.updateQueue;if(X!==null){X=X.shared;var oe=X.pending;oe===null?z.next=z:(z.next=oe.next,oe.next=z),X.pending=z}}w.lanes|=u,z=w.alternate,z!==null&&(z.lanes|=u),xm(w.return,u,a),O.lanes|=u;break}z=z.next}}else if(w.tag===10)I=w.type===a.type?null:w.child;else if(w.tag===18){if(I=w.return,I===null)throw Error(t(341));I.lanes|=u,O=I.alternate,O!==null&&(O.lanes|=u),xm(I,u,a),I=w.sibling}else I=w.child;if(I!==null)I.return=w;else for(I=w;I!==null;){if(I===a){I=null;break}if(w=I.sibling,w!==null){w.return=I.return,I=w;break}I=I.return}w=I}kn(i,a,v.children,u),a=a.child}return a;case 9:return v=a.type,p=a.pendingProps.children,Ma(a,u),v=ir(v),p=p(v),a.flags|=1,kn(i,a,p,u),a.child;case 14:return p=a.type,v=Er(p,a.pendingProps),v=Er(p.type,v),x1(i,a,p,v,u);case 15:return w1(i,a,a.type,a.pendingProps,u);case 17:return p=a.type,v=a.pendingProps,v=a.elementType===p?v:Er(p,v),Rd(i,a),a.tag=1,Cn(p)?(i=!0,fd(a)):i=!1,Ma(a,u),d1(a,p,v),Mm(a,p,v,u),Bm(null,a,p,!0,i,u);case 19:return C1(i,a,u);case 22:return b1(i,a,u)}throw Error(t(156,a.tag))};function J1(i,a){return Ul(i,a)}function zI(i,a,u,p){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ar(i,a,u,p){return new zI(i,a,u,p)}function sp(i){return i=i.prototype,!(!i||!i.isReactComponent)}function FI(i){if(typeof i=="function")return sp(i)?1:0;if(i!=null){if(i=i.$$typeof,i===F)return 11;if(i===We)return 14}return 2}function Cs(i,a){var u=i.alternate;return u===null?(u=ar(i.tag,a,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=a,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&14680064,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,a=i.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u}function Ud(i,a,u,p,v,w){var I=2;if(p=i,typeof i=="function")sp(i)&&(I=1);else if(typeof i=="string")I=5;else e:switch(i){case A:return No(u.children,v,w,a);case C:I=8,v|=8;break;case N:return i=ar(12,u,a,v|2),i.elementType=N,i.lanes=w,i;case V:return i=ar(13,u,a,v),i.elementType=V,i.lanes=w,i;case Me:return i=ar(19,u,a,v),i.elementType=Me,i.lanes=w,i;case Ie:return Wd(u,v,w,a);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case L:I=10;break e;case B:I=9;break e;case F:I=11;break e;case We:I=14;break e;case st:I=16,p=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return a=ar(I,u,a,v),a.elementType=i,a.type=p,a.lanes=w,a}function No(i,a,u,p){return i=ar(7,i,p,a),i.lanes=u,i}function Wd(i,a,u,p){return i=ar(22,i,p,a),i.elementType=Ie,i.lanes=u,i.stateNode={isHidden:!1},i}function op(i,a,u){return i=ar(6,i,null,a),i.lanes=u,i}function ap(i,a,u){return a=ar(4,i.children!==null?i.children:[],i.key,a),a.lanes=u,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}function UI(i,a,u,p,v){this.tag=a,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ql(0),this.expirationTimes=ql(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ql(0),this.identifierPrefix=p,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function lp(i,a,u,p,v,w,I,O,z){return i=new UI(i,a,u,O,z),a===1?(a=1,w===!0&&(a|=8)):a=0,w=ar(3,null,null,a),i.current=w,w.stateNode=i,w.memoizedState={element:p,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},bm(w),i}function WI(i,a,u){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:K,key:p==null?null:""+p,children:i,containerInfo:a,implementation:u}}function Z1(i){if(!i)return xs;i=i._reactInternals;e:{if(br(i)!==i||i.tag!==1)throw Error(t(170));var a=i;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(Cn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(i.tag===1){var u=i.type;if(Cn(u))return Iv(i,u,a)}return a}function ex(i,a,u,p,v,w,I,O,z){return i=lp(u,p,!0,i,v,w,I,O,z),i.context=Z1(null),u=i.current,p=_n(),v=Ts(u),w=Pi(p,v),w.callback=a??null,ks(u,w,v),i.current.lanes=v,yo(i,v,p),Rn(i,p),i}function $d(i,a,u,p){var v=a.current,w=_n(),I=Ts(v);return u=Z1(u),a.context===null?a.context=u:a.pendingContext=u,a=Pi(w,I),a.payload={element:i},p=p===void 0?null:p,p!==null&&(a.callback=p),i=ks(v,a,I),i!==null&&(Cr(i,v,I,w),bd(i,v,I)),I}function Hd(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function tx(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<a?u:a}}function cp(i,a){tx(i,a),(i=i.alternate)&&tx(i,a)}function $I(){return null}var nx=typeof reportError=="function"?reportError:function(i){console.error(i)};function up(i){this._internalRoot=i}Kd.prototype.render=up.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(t(409));$d(i,a,null,null)},Kd.prototype.unmount=up.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;Ao(function(){$d(null,i,null,null)}),a[Ii]=null}};function Kd(i){this._internalRoot=i}Kd.prototype.unstable_scheduleHydration=function(i){if(i){var a=Xl();i={blockedOn:null,target:i,priority:a};for(var u=0;u<Un.length&&a!==0&&a<Un[u].priority;u++);Un.splice(u,0,i),u===0&&fa(i)}};function dp(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function qd(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function rx(){}function HI(i,a,u,p,v){if(v){if(typeof p=="function"){var w=p;p=function(){var X=Hd(I);w.call(X)}}var I=ex(a,p,i,0,null,!1,!1,"",rx);return i._reactRootContainer=I,i[Ii]=I.current,cc(i.nodeType===8?i.parentNode:i),Ao(),I}for(;v=i.lastChild;)i.removeChild(v);if(typeof p=="function"){var O=p;p=function(){var X=Hd(z);O.call(X)}}var z=lp(i,0,!1,null,null,!1,!1,"",rx);return i._reactRootContainer=z,i[Ii]=z.current,cc(i.nodeType===8?i.parentNode:i),Ao(function(){$d(a,z,u,p)}),z}function Gd(i,a,u,p,v){var w=u._reactRootContainer;if(w){var I=w;if(typeof v=="function"){var O=v;v=function(){var z=Hd(I);O.call(z)}}$d(a,I,i,v)}else I=HI(u,a,i,v,p);return Hd(I)}Ql=function(i){switch(i.tag){case 3:var a=i.stateNode;if(a.current.memoizedState.isDehydrated){var u=nt(a.pendingLanes);u!==0&&(Gl(a,u|1),Rn(a,ft()),(Ze&6)===0&&(za=ft()+500,ws()))}break;case 13:Ao(function(){var p=Ri(i,1);if(p!==null){var v=_n();Cr(p,i,1,v)}}),cp(i,1)}},da=function(i){if(i.tag===13){var a=Ri(i,134217728);if(a!==null){var u=_n();Cr(a,i,134217728,u)}cp(i,134217728)}},Yl=function(i){if(i.tag===13){var a=Ts(i),u=Ri(i,a);if(u!==null){var p=_n();Cr(u,i,a,p)}cp(i,a)}},Xl=function(){return Ye},Jl=function(i,a){var u=Ye;try{return Ye=i,a()}finally{Ye=u}},yi=function(i,a,u){switch(a){case"input":if(Qt(i,u),a=u.name,u.type==="radio"&&a!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<u.length;a++){var p=u[a];if(p!==i&&p.form===i.form){var v=dd(p);if(!v)throw Error(t(90));Z(p),Qt(p,v)}}}break;case"textarea":Vu(i,u);break;case"select":a=u.value,a!=null&&xr(i,!!u.multiple,a,!1)}},Bu=np,zu=Ao;var KI={usingClientEntryPoint:!1,Events:[hc,Ia,dd,os,as,np]},Tc={findFiberByHostInstance:ko,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qI={bundleType:Tc.bundleType,version:Tc.version,rendererPackageName:Tc.rendererPackageName,rendererConfig:Tc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:U.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=qu(i),i===null?null:i.stateNode},findFiberByHostInstance:Tc.findFiberByHostInstance||$I,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qd.isDisabled&&Qd.supportsFiber)try{fo=Qd.inject(qI),zn=Qd}catch{}}return Pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KI,Pn.createPortal=function(i,a){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!dp(a))throw Error(t(200));return WI(i,a,null,u)},Pn.createRoot=function(i,a){if(!dp(i))throw Error(t(299));var u=!1,p="",v=nx;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),a=lp(i,1,!1,null,null,u,!1,p,v),i[Ii]=a.current,cc(i.nodeType===8?i.parentNode:i),new up(a)},Pn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=qu(a),i=i===null?null:i.stateNode,i},Pn.flushSync=function(i){return Ao(i)},Pn.hydrate=function(i,a,u){if(!qd(a))throw Error(t(200));return Gd(null,i,a,!0,u)},Pn.hydrateRoot=function(i,a,u){if(!dp(i))throw Error(t(405));var p=u!=null&&u.hydratedSources||null,v=!1,w="",I=nx;if(u!=null&&(u.unstable_strictMode===!0&&(v=!0),u.identifierPrefix!==void 0&&(w=u.identifierPrefix),u.onRecoverableError!==void 0&&(I=u.onRecoverableError)),a=ex(a,null,i,1,u??null,v,!1,w,I),i[Ii]=a.current,cc(i),p)for(i=0;i<p.length;i++)u=p[i],v=u._getVersion,v=v(u._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[u,v]:a.mutableSourceEagerHydrationData.push(u,v);return new Kd(a)},Pn.render=function(i,a,u){if(!qd(a))throw Error(t(200));return Gd(null,i,a,!1,u)},Pn.unmountComponentAtNode=function(i){if(!qd(i))throw Error(t(40));return i._reactRootContainer?(Ao(function(){Gd(null,null,i,!1,function(){i._reactRootContainer=null,i[Ii]=null})}),!0):!1},Pn.unstable_batchedUpdates=np,Pn.unstable_renderSubtreeIntoContainer=function(i,a,u,p){if(!qd(u))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return Gd(i,a,u,!1,p)},Pn.version="18.3.1-next-f1338f8080-20240426",Pn}var dx;function nC(){if(dx)return mp.exports;dx=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),mp.exports=tC(),mp.exports}var hx;function rC(){if(hx)return Yd;hx=1;var n=nC();return Yd.createRoot=n.createRoot,Yd.hydrateRoot=n.hydrateRoot,Yd}var iC=rC();/**
 * react-router v7.12.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var fx="popstate";function sC(n={}){function e(s,l){let{pathname:c="/",search:h="",hash:d=""}=Jo(s.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),ng("",{pathname:c,search:h,hash:d},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(s,l){let c=s.document.querySelector("base"),h="";if(c&&c.getAttribute("href")){let d=s.location.href,m=d.indexOf("#");h=m===-1?d:d.slice(0,m)}return h+"#"+(typeof l=="string"?l:Xc(l))}function r(s,l){Xn(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return aC(e,t,r,n)}function bt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Xn(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function oC(){return Math.random().toString(36).substring(2,10)}function mx(n,e){return{usr:n.state,key:n.key,idx:e}}function ng(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Jo(e):e,state:t,key:e&&e.key||r||oC()}}function Xc({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Jo(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function aC(n,e,t,r={}){let{window:s=document.defaultView,v5Compat:l=!1}=r,c=s.history,h="POP",d=null,m=g();m==null&&(m=0,c.replaceState({...c.state,idx:m},""));function g(){return(c.state||{idx:null}).idx}function y(){h="POP";let T=g(),P=T==null?null:T-m;m=T,d&&d({action:h,location:S.location,delta:P})}function x(T,P){h="PUSH";let M=ng(S.location,T,P);t&&t(M,T),m=g()+1;let D=mx(M,m),U=S.createHref(M);try{c.pushState(D,"",U)}catch(H){if(H instanceof DOMException&&H.name==="DataCloneError")throw H;s.location.assign(U)}l&&d&&d({action:h,location:S.location,delta:1})}function E(T,P){h="REPLACE";let M=ng(S.location,T,P);t&&t(M,T),m=g();let D=mx(M,m),U=S.createHref(M);c.replaceState(D,"",U),l&&d&&d({action:h,location:S.location,delta:0})}function k(T){return lC(T)}let S={get action(){return h},get location(){return n(s,c)},listen(T){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(fx,y),d=T,()=>{s.removeEventListener(fx,y),d=null}},createHref(T){return e(s,T)},createURL:k,encodeLocation(T){let P=k(T);return{pathname:P.pathname,search:P.search,hash:P.hash}},push:x,replace:E,go(T){return c.go(T)}};return S}function lC(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),bt(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Xc(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function Tk(n,e,t="/"){return cC(n,e,t,!1)}function cC(n,e,t,r){let s=typeof e=="string"?Jo(e):e,l=Hi(s.pathname||"/",t);if(l==null)return null;let c=Ik(n);uC(c);let h=null;for(let d=0;h==null&&d<c.length;++d){let m=bC(l);h=xC(c[d],m,r)}return h}function Ik(n,e=[],t=[],r="",s=!1){let l=(c,h,d=s,m)=>{let g={relativePath:m===void 0?c.path||"":m,caseSensitive:c.caseSensitive===!0,childrenIndex:h,route:c};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(r)&&d)return;bt(g.relativePath.startsWith(r),`Absolute route path "${g.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(r.length)}let y=zi([r,g.relativePath]),x=t.concat(g);c.children&&c.children.length>0&&(bt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),Ik(c.children,e,x,y,d)),!(c.path==null&&!c.index)&&e.push({path:y,score:yC(y,c.index),routesMeta:x})};return n.forEach((c,h)=>{var d;if(c.path===""||!((d=c.path)!=null&&d.includes("?")))l(c,h);else for(let m of Ck(c.path))l(c,h,!0,m)}),e}function Ck(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),l=t.replace(/\?$/,"");if(r.length===0)return s?[l,""]:[l];let c=Ck(r.join("/")),h=[];return h.push(...c.map(d=>d===""?l:[l,d].join("/"))),s&&h.push(...c),h.map(d=>n.startsWith("/")&&d===""?"/":d)}function uC(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:vC(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var dC=/^:[\w-]+$/,hC=3,fC=2,mC=1,pC=10,gC=-2,px=n=>n==="*";function yC(n,e){let t=n.split("/"),r=t.length;return t.some(px)&&(r+=gC),e&&(r+=fC),t.filter(s=>!px(s)).reduce((s,l)=>s+(dC.test(l)?hC:l===""?mC:pC),r)}function vC(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function xC(n,e,t=!1){let{routesMeta:r}=n,s={},l="/",c=[];for(let h=0;h<r.length;++h){let d=r[h],m=h===r.length-1,g=l==="/"?e:e.slice(l.length)||"/",y=Ih({path:d.relativePath,caseSensitive:d.caseSensitive,end:m},g),x=d.route;if(!y&&m&&t&&!r[r.length-1].route.index&&(y=Ih({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!y)return null;Object.assign(s,y.params),c.push({params:s,pathname:zi([l,y.pathname]),pathnameBase:EC(zi([l,y.pathnameBase])),route:x}),y.pathnameBase!=="/"&&(l=zi([l,y.pathnameBase]))}return c}function Ih(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=wC(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let l=s[0],c=l.replace(/(.)\/+$/,"$1"),h=s.slice(1);return{params:r.reduce((m,{paramName:g,isOptional:y},x)=>{if(g==="*"){let k=h[x]||"";c=l.slice(0,l.length-k.length).replace(/(.)\/+$/,"$1")}const E=h[x];return y&&!E?m[g]=void 0:m[g]=(E||"").replace(/%2F/g,"/"),m},{}),pathname:l,pathnameBase:c,pattern:n}}function wC(n,e=!1,t=!0){Xn(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,h,d)=>(r.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function bC(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Xn(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Hi(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}var jk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,kC=n=>jk.test(n);function _C(n,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?Jo(n):n,l;if(t)if(kC(t))l=t;else{if(t.includes("//")){let c=t;t=t.replace(/\/\/+/g,"/"),Xn(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${t}`)}t.startsWith("/")?l=gx(t.substring(1),"/"):l=gx(t,e)}else l=e;return{pathname:l,search:TC(r),hash:IC(s)}}function gx(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function yp(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function SC(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function ay(n){let e=SC(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function ly(n,e,t,r=!1){let s;typeof n=="string"?s=Jo(n):(s={...n},bt(!s.pathname||!s.pathname.includes("?"),yp("?","pathname","search",s)),bt(!s.pathname||!s.pathname.includes("#"),yp("#","pathname","hash",s)),bt(!s.search||!s.search.includes("#"),yp("#","search","hash",s)));let l=n===""||s.pathname==="",c=l?"/":s.pathname,h;if(c==null)h=t;else{let y=e.length-1;if(!r&&c.startsWith("..")){let x=c.split("/");for(;x[0]==="..";)x.shift(),y-=1;s.pathname=x.join("/")}h=y>=0?e[y]:"/"}let d=_C(s,h),m=c&&c!=="/"&&c.endsWith("/"),g=(l||c===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(m||g)&&(d.pathname+="/"),d}var zi=n=>n.join("/").replace(/\/\/+/g,"/"),EC=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),TC=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,IC=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,CC=class{constructor(n,e,t,r=!1){this.status=n,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function jC(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function AC(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Ak=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Rk(n,e){let t=n;if(typeof t!="string"||!jk.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let r=t,s=!1;if(Ak)try{let l=new URL(window.location.href),c=t.startsWith("//")?new URL(l.protocol+t):new URL(t),h=Hi(c.pathname,e);c.origin===l.origin&&h!=null?t=h+c.search+c.hash:s=!0}catch{Xn(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:s,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Pk=["POST","PUT","PATCH","DELETE"];new Set(Pk);var RC=["GET",...Pk];new Set(RC);var bl=j.createContext(null);bl.displayName="DataRouter";var af=j.createContext(null);af.displayName="DataRouterState";var PC=j.createContext(!1),Nk=j.createContext({isTransitioning:!1});Nk.displayName="ViewTransition";var NC=j.createContext(new Map);NC.displayName="Fetchers";var DC=j.createContext(null);DC.displayName="Await";var Jn=j.createContext(null);Jn.displayName="Navigation";var fu=j.createContext(null);fu.displayName="Location";var Br=j.createContext({outlet:null,matches:[],isDataRoute:!1});Br.displayName="Route";var cy=j.createContext(null);cy.displayName="RouteError";var Dk="REACT_ROUTER_ERROR",MC="REDIRECT",VC="ROUTE_ERROR_RESPONSE";function LC(n){if(n.startsWith(`${Dk}:${MC}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function OC(n){if(n.startsWith(`${Dk}:${VC}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new CC(e.status,e.statusText,e.data)}catch{}}function BC(n,{relative:e}={}){bt(kl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=j.useContext(Jn),{hash:s,pathname:l,search:c}=mu(n,{relative:e}),h=l;return t!=="/"&&(h=l==="/"?t:zi([t,l])),r.createHref({pathname:h,search:c,hash:s})}function kl(){return j.useContext(fu)!=null}function vr(){return bt(kl(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(fu).location}var Mk="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Vk(n){j.useContext(Jn).static||j.useLayoutEffect(n)}function Js(){let{isDataRoute:n}=j.useContext(Br);return n?JC():zC()}function zC(){bt(kl(),"useNavigate() may be used only in the context of a <Router> component.");let n=j.useContext(bl),{basename:e,navigator:t}=j.useContext(Jn),{matches:r}=j.useContext(Br),{pathname:s}=vr(),l=JSON.stringify(ay(r)),c=j.useRef(!1);return Vk(()=>{c.current=!0}),j.useCallback((d,m={})=>{if(Xn(c.current,Mk),!c.current)return;if(typeof d=="number"){t.go(d);return}let g=ly(d,JSON.parse(l),s,m.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:zi([e,g.pathname])),(m.replace?t.replace:t.push)(g,m.state,m)},[e,t,l,s,n])}j.createContext(null);function uy(){let{matches:n}=j.useContext(Br),e=n[n.length-1];return e?e.params:{}}function mu(n,{relative:e}={}){let{matches:t}=j.useContext(Br),{pathname:r}=vr(),s=JSON.stringify(ay(t));return j.useMemo(()=>ly(n,JSON.parse(s),r,e==="path"),[n,s,r,e])}function FC(n,e){return Lk(n,e)}function Lk(n,e,t,r,s){var M;bt(kl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=j.useContext(Jn),{matches:c}=j.useContext(Br),h=c[c.length-1],d=h?h.params:{},m=h?h.pathname:"/",g=h?h.pathnameBase:"/",y=h&&h.route;{let D=y&&y.path||"";Bk(m,!y||D.endsWith("*")||D.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${D}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${D}"> to <Route path="${D==="/"?"*":`${D}/*`}">.`)}let x=vr(),E;if(e){let D=typeof e=="string"?Jo(e):e;bt(g==="/"||((M=D.pathname)==null?void 0:M.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${D.pathname}" was given in the \`location\` prop.`),E=D}else E=x;let k=E.pathname||"/",S=k;if(g!=="/"){let D=g.replace(/^\//,"").split("/");S="/"+k.replace(/^\//,"").split("/").slice(D.length).join("/")}let T=Tk(n,{pathname:S});Xn(y||T!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),Xn(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let P=KC(T&&T.map(D=>Object.assign({},D,{params:Object.assign({},d,D.params),pathname:zi([g,l.encodeLocation?l.encodeLocation(D.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?g:zi([g,l.encodeLocation?l.encodeLocation(D.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathnameBase])})),c,t,r,s);return e&&P?j.createElement(fu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},P):P}function UC(){let n=XC(),e=jC(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:l},"ErrorBoundary")," or"," ",j.createElement("code",{style:l},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),t?j.createElement("pre",{style:s},t):null,c)}var WC=j.createElement(UC,null),Ok=class extends j.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=OC(n.digest);t&&(n=t)}let e=n!==void 0?j.createElement(Br.Provider,{value:this.props.routeContext},j.createElement(cy.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?j.createElement($C,{error:n},e):e}};Ok.contextType=PC;var vp=new WeakMap;function $C({children:n,error:e}){let{basename:t}=j.useContext(Jn);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=LC(e.digest);if(r){let s=vp.get(e);if(s)throw s;let l=Rk(r.location,t);if(Ak&&!vp.get(e))if(l.isExternal||r.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:r.replace}));throw vp.set(e,c),c}return j.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return n}function HC({routeContext:n,match:e,children:t}){let r=j.useContext(bl);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),j.createElement(Br.Provider,{value:n},t)}function KC(n,e=[],t=null,r=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,c=t==null?void 0:t.errors;if(c!=null){let g=l.findIndex(y=>y.route.id&&(c==null?void 0:c[y.route.id])!==void 0);bt(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,g+1))}let h=!1,d=-1;if(t)for(let g=0;g<l.length;g++){let y=l[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(d=g),y.route.id){let{loaderData:x,errors:E}=t,k=y.route.loader&&!x.hasOwnProperty(y.route.id)&&(!E||E[y.route.id]===void 0);if(y.route.lazy||k){h=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}let m=t&&r?(g,y)=>{var x,E;r(g,{location:t.location,params:((E=(x=t.matches)==null?void 0:x[0])==null?void 0:E.params)??{},unstable_pattern:AC(t.matches),errorInfo:y})}:void 0;return l.reduceRight((g,y,x)=>{let E,k=!1,S=null,T=null;t&&(E=c&&y.route.id?c[y.route.id]:void 0,S=y.route.errorElement||WC,h&&(d<0&&x===0?(Bk("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),k=!0,T=null):d===x&&(k=!0,T=y.route.hydrateFallbackElement||null)));let P=e.concat(l.slice(0,x+1)),M=()=>{let D;return E?D=S:k?D=T:y.route.Component?D=j.createElement(y.route.Component,null):y.route.element?D=y.route.element:D=g,j.createElement(HC,{match:y,routeContext:{outlet:g,matches:P,isDataRoute:t!=null},children:D})};return t&&(y.route.ErrorBoundary||y.route.errorElement||x===0)?j.createElement(Ok,{location:t.location,revalidation:t.revalidation,component:S,error:E,children:M(),routeContext:{outlet:null,matches:P,isDataRoute:!0},onError:m}):M()},null)}function dy(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function qC(n){let e=j.useContext(bl);return bt(e,dy(n)),e}function GC(n){let e=j.useContext(af);return bt(e,dy(n)),e}function QC(n){let e=j.useContext(Br);return bt(e,dy(n)),e}function hy(n){let e=QC(n),t=e.matches[e.matches.length-1];return bt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function YC(){return hy("useRouteId")}function XC(){var r;let n=j.useContext(cy),e=GC("useRouteError"),t=hy("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function JC(){let{router:n}=qC("useNavigate"),e=hy("useNavigate"),t=j.useRef(!1);return Vk(()=>{t.current=!0}),j.useCallback(async(s,l={})=>{Xn(t.current,Mk),t.current&&(typeof s=="number"?await n.navigate(s):await n.navigate(s,{fromRouteId:e,...l}))},[n,e])}var yx={};function Bk(n,e,t){!e&&!yx[n]&&(yx[n]=!0,Xn(!1,t))}j.memo(ZC);function ZC({routes:n,future:e,state:t,onError:r}){return Lk(n,void 0,t,r,e)}function ej({to:n,replace:e,state:t,relative:r}){bt(kl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=j.useContext(Jn);Xn(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=j.useContext(Br),{pathname:c}=vr(),h=Js(),d=ly(n,ay(l),c,r==="path"),m=JSON.stringify(d);return j.useEffect(()=>{h(JSON.parse(m),{replace:e,state:t,relative:r})},[h,m,r,e,t]),null}function gt(n){bt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function tj({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:l=!1,unstable_useTransitions:c}){bt(!kl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=n.replace(/^\/*/,"/"),d=j.useMemo(()=>({basename:h,navigator:s,static:l,unstable_useTransitions:c,future:{}}),[h,s,l,c]);typeof t=="string"&&(t=Jo(t));let{pathname:m="/",search:g="",hash:y="",state:x=null,key:E="default"}=t,k=j.useMemo(()=>{let S=Hi(m,h);return S==null?null:{location:{pathname:S,search:g,hash:y,state:x,key:E},navigationType:r}},[h,m,g,y,x,E,r]);return Xn(k!=null,`<Router basename="${h}"> is not able to match the URL "${m}${g}${y}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:j.createElement(Jn.Provider,{value:d},j.createElement(fu.Provider,{children:e,value:k}))}function nj({children:n,location:e}){return FC(rg(n),e)}function rg(n,e=[]){let t=[];return j.Children.forEach(n,(r,s)=>{if(!j.isValidElement(r))return;let l=[...e,s];if(r.type===j.Fragment){t.push.apply(t,rg(r.props.children,l));return}bt(r.type===gt,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),bt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=rg(r.props.children,l)),t.push(c)}),t}var dh="get",hh="application/x-www-form-urlencoded";function lf(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function rj(n){return lf(n)&&n.tagName.toLowerCase()==="button"}function ij(n){return lf(n)&&n.tagName.toLowerCase()==="form"}function sj(n){return lf(n)&&n.tagName.toLowerCase()==="input"}function oj(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function aj(n,e){return n.button===0&&(!e||e==="_self")&&!oj(n)}var Xd=null;function lj(){if(Xd===null)try{new FormData(document.createElement("form"),0),Xd=!1}catch{Xd=!0}return Xd}var cj=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function xp(n){return n!=null&&!cj.has(n)?(Xn(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${hh}"`),null):n}function uj(n,e){let t,r,s,l,c;if(ij(n)){let h=n.getAttribute("action");r=h?Hi(h,e):null,t=n.getAttribute("method")||dh,s=xp(n.getAttribute("enctype"))||hh,l=new FormData(n)}else if(rj(n)||sj(n)&&(n.type==="submit"||n.type==="image")){let h=n.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=n.getAttribute("formaction")||h.getAttribute("action");if(r=d?Hi(d,e):null,t=n.getAttribute("formmethod")||h.getAttribute("method")||dh,s=xp(n.getAttribute("formenctype"))||xp(h.getAttribute("enctype"))||hh,l=new FormData(h,n),!lj()){let{name:m,type:g,value:y}=n;if(g==="image"){let x=m?`${m}.`:"";l.append(`${x}x`,"0"),l.append(`${x}y`,"0")}else m&&l.append(m,y)}}else{if(lf(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=dh,r=null,s=hh,c=n}return l&&s==="text/plain"&&(c=l,l=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function fy(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function dj(n,e,t,r){let s=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?s.pathname.endsWith("/")?s.pathname=`${s.pathname}_.${r}`:s.pathname=`${s.pathname}.${r}`:s.pathname==="/"?s.pathname=`_root.${r}`:e&&Hi(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${r}`,s}async function hj(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function fj(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function mj(n,e,t){let r=await Promise.all(n.map(async s=>{let l=e.routes[s.route.id];if(l){let c=await hj(l,t);return c.links?c.links():[]}return[]}));return vj(r.flat(1).filter(fj).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function vx(n,e,t,r,s,l){let c=(d,m)=>t[m]?d.route.id!==t[m].route.id:!0,h=(d,m)=>{var g;return t[m].pathname!==d.pathname||((g=t[m].route.path)==null?void 0:g.endsWith("*"))&&t[m].params["*"]!==d.params["*"]};return l==="assets"?e.filter((d,m)=>c(d,m)||h(d,m)):l==="data"?e.filter((d,m)=>{var y;let g=r.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(c(d,m)||h(d,m))return!0;if(d.route.shouldRevalidate){let x=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((y=t[0])==null?void 0:y.params)||{},nextUrl:new URL(n,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function pj(n,e,{includeHydrateFallback:t}={}){return gj(n.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let l=[s.module];return s.clientActionModule&&(l=l.concat(s.clientActionModule)),s.clientLoaderModule&&(l=l.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(l=l.concat(s.hydrateFallbackModule)),s.imports&&(l=l.concat(s.imports)),l}).flat(1))}function gj(n){return[...new Set(n)]}function yj(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function vj(n,e){let t=new Set;return new Set(e),n.reduce((r,s)=>{let l=JSON.stringify(yj(s));return t.has(l)||(t.add(l),r.push({key:l,link:s})),r},[])}function zk(){let n=j.useContext(bl);return fy(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function xj(){let n=j.useContext(af);return fy(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var my=j.createContext(void 0);my.displayName="FrameworkContext";function Fk(){let n=j.useContext(my);return fy(n,"You must render this element inside a <HydratedRouter> element"),n}function wj(n,e){let t=j.useContext(my),[r,s]=j.useState(!1),[l,c]=j.useState(!1),{onFocus:h,onBlur:d,onMouseEnter:m,onMouseLeave:g,onTouchStart:y}=e,x=j.useRef(null);j.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let S=P=>{P.forEach(M=>{c(M.isIntersecting)})},T=new IntersectionObserver(S,{threshold:.5});return x.current&&T.observe(x.current),()=>{T.disconnect()}}},[n]),j.useEffect(()=>{if(r){let S=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(S)}}},[r]);let E=()=>{s(!0)},k=()=>{s(!1),c(!1)};return t?n!=="intent"?[l,x,{}]:[l,x,{onFocus:Cc(h,E),onBlur:Cc(d,k),onMouseEnter:Cc(m,E),onMouseLeave:Cc(g,k),onTouchStart:Cc(y,E)}]:[!1,x,{}]}function Cc(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function bj({page:n,...e}){let{router:t}=zk(),r=j.useMemo(()=>Tk(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?j.createElement(_j,{page:n,matches:r,...e}):null}function kj(n){let{manifest:e,routeModules:t}=Fk(),[r,s]=j.useState([]);return j.useEffect(()=>{let l=!1;return mj(n,e,t).then(c=>{l||s(c)}),()=>{l=!0}},[n,e,t]),r}function _j({page:n,matches:e,...t}){let r=vr(),{future:s,manifest:l,routeModules:c}=Fk(),{basename:h}=zk(),{loaderData:d,matches:m}=xj(),g=j.useMemo(()=>vx(n,e,m,l,r,"data"),[n,e,m,l,r]),y=j.useMemo(()=>vx(n,e,m,l,r,"assets"),[n,e,m,l,r]),x=j.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let S=new Set,T=!1;if(e.forEach(M=>{var U;let D=l.routes[M.route.id];!D||!D.hasLoader||(!g.some(H=>H.route.id===M.route.id)&&M.route.id in d&&((U=c[M.route.id])!=null&&U.shouldRevalidate)||D.hasClientLoader?T=!0:S.add(M.route.id))}),S.size===0)return[];let P=dj(n,h,s.unstable_trailingSlashAwareDataRequests,"data");return T&&S.size>0&&P.searchParams.set("_routes",e.filter(M=>S.has(M.route.id)).map(M=>M.route.id).join(",")),[P.pathname+P.search]},[h,s.unstable_trailingSlashAwareDataRequests,d,r,l,g,e,n,c]),E=j.useMemo(()=>pj(y,l),[y,l]),k=kj(y);return j.createElement(j.Fragment,null,x.map(S=>j.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...t})),E.map(S=>j.createElement("link",{key:S,rel:"modulepreload",href:S,...t})),k.map(({key:S,link:T})=>j.createElement("link",{key:S,nonce:t.nonce,...T})))}function Sj(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Ej=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Ej&&(window.__reactRouterVersion="7.12.0")}catch{}function Tj({basename:n,children:e,unstable_useTransitions:t,window:r}){let s=j.useRef();s.current==null&&(s.current=sC({window:r,v5Compat:!0}));let l=s.current,[c,h]=j.useState({action:l.action,location:l.location}),d=j.useCallback(m=>{t===!1?h(m):j.startTransition(()=>h(m))},[t]);return j.useLayoutEffect(()=>l.listen(d),[l,d]),j.createElement(tj,{basename:n,children:e,location:c.location,navigationType:c.action,navigator:l,unstable_useTransitions:t})}var Uk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,he=j.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:l,replace:c,state:h,target:d,to:m,preventScrollReset:g,viewTransition:y,unstable_defaultShouldRevalidate:x,...E},k){let{basename:S,unstable_useTransitions:T}=j.useContext(Jn),P=typeof m=="string"&&Uk.test(m),M=Rk(m,S);m=M.to;let D=BC(m,{relative:s}),[U,H,K]=wj(r,E),A=Aj(m,{replace:c,state:h,target:d,preventScrollReset:g,relative:s,viewTransition:y,unstable_defaultShouldRevalidate:x,unstable_useTransitions:T});function C(L){e&&e(L),L.defaultPrevented||A(L)}let N=j.createElement("a",{...E,...K,href:M.absoluteURL||D,onClick:M.isExternal||l?e:C,ref:Sj(k,H),target:d,"data-discover":!P&&t==="render"?"true":void 0});return U&&!P?j.createElement(j.Fragment,null,N,j.createElement(bj,{page:D})):N});he.displayName="Link";var Ij=j.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:l,to:c,viewTransition:h,children:d,...m},g){let y=mu(c,{relative:m.relative}),x=vr(),E=j.useContext(af),{navigator:k,basename:S}=j.useContext(Jn),T=E!=null&&Mj(y)&&h===!0,P=k.encodeLocation?k.encodeLocation(y).pathname:y.pathname,M=x.pathname,D=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;t||(M=M.toLowerCase(),D=D?D.toLowerCase():null,P=P.toLowerCase()),D&&S&&(D=Hi(D,S)||D);const U=P!=="/"&&P.endsWith("/")?P.length-1:P.length;let H=M===P||!s&&M.startsWith(P)&&M.charAt(U)==="/",K=D!=null&&(D===P||!s&&D.startsWith(P)&&D.charAt(P.length)==="/"),A={isActive:H,isPending:K,isTransitioning:T},C=H?e:void 0,N;typeof r=="function"?N=r(A):N=[r,H?"active":null,K?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let L=typeof l=="function"?l(A):l;return j.createElement(he,{...m,"aria-current":C,className:N,ref:g,style:L,to:c,viewTransition:h},typeof d=="function"?d(A):d)});Ij.displayName="NavLink";var Cj=j.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:l,method:c=dh,action:h,onSubmit:d,relative:m,preventScrollReset:g,viewTransition:y,unstable_defaultShouldRevalidate:x,...E},k)=>{let{unstable_useTransitions:S}=j.useContext(Jn),T=Nj(),P=Dj(h,{relative:m}),M=c.toLowerCase()==="get"?"get":"post",D=typeof h=="string"&&Uk.test(h),U=H=>{if(d&&d(H),H.defaultPrevented)return;H.preventDefault();let K=H.nativeEvent.submitter,A=(K==null?void 0:K.getAttribute("formmethod"))||c,C=()=>T(K||H.currentTarget,{fetcherKey:e,method:A,navigate:t,replace:s,state:l,relative:m,preventScrollReset:g,viewTransition:y,unstable_defaultShouldRevalidate:x});S&&t!==!1?j.startTransition(()=>C()):C()};return j.createElement("form",{ref:k,method:M,action:P,onSubmit:r?d:U,...E,"data-discover":!D&&n==="render"?"true":void 0})});Cj.displayName="Form";function jj(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Wk(n){let e=j.useContext(bl);return bt(e,jj(n)),e}function Aj(n,{target:e,replace:t,state:r,preventScrollReset:s,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:h,unstable_useTransitions:d}={}){let m=Js(),g=vr(),y=mu(n,{relative:l});return j.useCallback(x=>{if(aj(x,e)){x.preventDefault();let E=t!==void 0?t:Xc(g)===Xc(y),k=()=>m(n,{replace:E,state:r,preventScrollReset:s,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:h});d?j.startTransition(()=>k()):k()}},[g,m,y,t,r,e,n,s,l,c,h,d])}var Rj=0,Pj=()=>`__${String(++Rj)}__`;function Nj(){let{router:n}=Wk("useSubmit"),{basename:e}=j.useContext(Jn),t=YC(),r=n.fetch,s=n.navigate;return j.useCallback(async(l,c={})=>{let{action:h,method:d,encType:m,formData:g,body:y}=uj(l,e);if(c.navigate===!1){let x=c.fetcherKey||Pj();await r(x,t,c.action||h,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:g,body:y,formMethod:c.method||d,formEncType:c.encType||m,flushSync:c.flushSync})}else await s(c.action||h,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:g,body:y,formMethod:c.method||d,formEncType:c.encType||m,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[r,s,e,t])}function Dj(n,{relative:e}={}){let{basename:t}=j.useContext(Jn),r=j.useContext(Br);bt(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),l={...mu(n||".",{relative:e})},c=vr();if(n==null){l.search=c.search;let h=new URLSearchParams(l.search),d=h.getAll("index");if(d.some(g=>g==="")){h.delete("index"),d.filter(y=>y).forEach(y=>h.append("index",y));let g=h.toString();l.search=g?`?${g}`:""}}return(!n||n===".")&&s.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:zi([t,l.pathname])),Xc(l)}function Mj(n,{relative:e}={}){let t=j.useContext(Nk);bt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Wk("useViewTransitionState"),s=mu(n,{relative:e});if(!t.isTransitioning)return!1;let l=Hi(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=Hi(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Ih(s.pathname,c)!=null||Ih(s.pathname,l)!=null}const Vj=()=>{};var xx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},Lj=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const l=n[t++];e[r++]=String.fromCharCode((s&31)<<6|l&63)}else if(s>239&&s<365){const l=n[t++],c=n[t++],h=n[t++],d=((s&7)<<18|(l&63)<<12|(c&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const l=n[t++],c=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(l&63)<<6|c&63)}}return e.join("")},Hk={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const l=n[s],c=s+1<n.length,h=c?n[s+1]:0,d=s+2<n.length,m=d?n[s+2]:0,g=l>>2,y=(l&3)<<4|h>>4;let x=(h&15)<<2|m>>6,E=m&63;d||(E=64,c||(x=64)),r.push(t[g],t[y],t[x],t[E])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray($k(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Lj(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const l=t[n.charAt(s++)],h=s<n.length?t[n.charAt(s)]:0;++s;const m=s<n.length?t[n.charAt(s)]:64;++s;const y=s<n.length?t[n.charAt(s)]:64;if(++s,l==null||h==null||m==null||y==null)throw new Oj;const x=l<<2|h>>4;if(r.push(x),m!==64){const E=h<<4&240|m>>2;if(r.push(E),y!==64){const k=m<<6&192|y;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Oj extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Bj=function(n){const e=$k(n);return Hk.encodeByteArray(e,!0)},Ch=function(n){return Bj(n).replace(/\./g,"")},Kk=function(n){try{return Hk.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zj(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fj=()=>zj().__FIREBASE_DEFAULTS__,Uj=()=>{if(typeof process>"u"||typeof xx>"u")return;const n=xx.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Wj=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Kk(n[1]);return e&&JSON.parse(e)},cf=()=>{try{return Vj()||Fj()||Uj()||Wj()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},qk=n=>{var e,t;return(t=(e=cf())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},$j=n=>{const e=qk(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Gk=()=>{var n;return(n=cf())==null?void 0:n.config},Qk=n=>{var e;return(e=cf())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _l(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Yk(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kj(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Ch(JSON.stringify(t)),Ch(JSON.stringify(c)),""].join(".")}const Fc={};function qj(){const n={prod:[],emulator:[]};for(const e of Object.keys(Fc))Fc[e]?n.emulator.push(e):n.prod.push(e);return n}function Gj(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let wx=!1;function Xk(n,e){if(typeof window>"u"||typeof document>"u"||!_l(window.location.host)||Fc[n]===e||Fc[n]||wx)return;Fc[n]=e;function t(x){return`__firebase__banner__${x}`}const r="__firebase__banner",l=qj().prod.length>0;function c(){const x=document.getElementById(r);x&&x.remove()}function h(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function d(x,E){x.setAttribute("width","24"),x.setAttribute("id",E),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function m(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{wx=!0,c()},x}function g(x,E){x.setAttribute("id",E),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function y(){const x=Gj(r),E=t("text"),k=document.getElementById(E)||document.createElement("span"),S=t("learnmore"),T=document.getElementById(S)||document.createElement("a"),P=t("preprendIcon"),M=document.getElementById(P)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const D=x.element;h(D),g(T,S);const U=m();d(M,P),D.append(M,k,T,U),document.body.appendChild(D)}l?(k.innerText="Preview backend disconnected.",M.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(M.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Qj(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wn())}function Yj(){var e;const n=(e=cf())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Xj(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Jj(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Zj(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function eA(){const n=wn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function tA(){return!Yj()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nA(){try{return typeof indexedDB=="object"}catch{return!1}}function rA(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var l;e(((l=s.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA="FirebaseError";class Zi extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=iA,Object.setPrototypeOf(this,Zi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pu.prototype.create)}}class pu{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,l=this.errors[e],c=l?sA(l,r):"Error",h=`${this.serviceName}: ${c} (${s}).`;return new Zi(s,h,r)}}function sA(n,e){return n.replace(oA,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const oA=/\{\$([^}]+)}/g;function aA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ki(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const l=n[s],c=e[s];if(bx(l)&&bx(c)){if(!Ki(l,c))return!1}else if(l!==c)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function bx(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gu(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Nc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,l]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(l)}}),e}function Dc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function lA(n,e){const t=new cA(n,e);return t.subscribe.bind(t)}class cA{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");uA(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=wp),s.error===void 0&&(s.error=wp),s.complete===void 0&&(s.complete=wp);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function uA(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function wp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(n){return n&&n._delegate?n._delegate:n}class Wo{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Hj;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(fA(e))try{this.getOrInitializeService({instanceIdentifier:Mo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:s});r.resolve(l)}catch{}}}}clearInstance(e=Mo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Mo){return this.instances.has(e)}getOptions(e=Mo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);r===h&&c.resolve(s)}return s}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const l=this.instances.get(r);return l&&e(l,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:hA(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Mo){return this.component?this.component.multipleInstances?e:Mo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function hA(n){return n===Mo?void 0:n}function fA(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new dA(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(qe||(qe={}));const pA={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},gA=qe.INFO,yA={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},vA=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=yA[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class py{constructor(e){this.name=e,this._logLevel=gA,this._logHandler=vA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?pA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}}const xA=(n,e)=>e.some(t=>n instanceof t);let kx,_x;function wA(){return kx||(kx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bA(){return _x||(_x=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Jk=new WeakMap,ig=new WeakMap,Zk=new WeakMap,bp=new WeakMap,gy=new WeakMap;function kA(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(Ls(n.result)),s()},c=()=>{r(n.error),s()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&Jk.set(t,n)}).catch(()=>{}),gy.set(e,n),e}function _A(n){if(ig.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),s()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});ig.set(n,e)}let sg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return ig.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Zk.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ls(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function SA(n){sg=n(sg)}function EA(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(kp(this),e,...t);return Zk.set(r,e.sort?e.sort():[e]),Ls(r)}:bA().includes(n)?function(...e){return n.apply(kp(this),e),Ls(Jk.get(this))}:function(...e){return Ls(n.apply(kp(this),e))}}function TA(n){return typeof n=="function"?EA(n):(n instanceof IDBTransaction&&_A(n),xA(n,wA())?new Proxy(n,sg):n)}function Ls(n){if(n instanceof IDBRequest)return kA(n);if(bp.has(n))return bp.get(n);const e=TA(n);return e!==n&&(bp.set(n,e),gy.set(e,n)),e}const kp=n=>gy.get(n);function IA(n,e,{blocked:t,upgrade:r,blocking:s,terminated:l}={}){const c=indexedDB.open(n,e),h=Ls(c);return r&&c.addEventListener("upgradeneeded",d=>{r(Ls(c.result),d.oldVersion,d.newVersion,Ls(c.transaction),d)}),t&&c.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),h.then(d=>{l&&d.addEventListener("close",()=>l()),s&&d.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const CA=["get","getKey","getAll","getAllKeys","count"],jA=["put","add","delete","clear"],_p=new Map;function Sx(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(_p.get(e))return _p.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=jA.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||CA.includes(t)))return;const l=async function(c,...h){const d=this.transaction(c,s?"readwrite":"readonly");let m=d.store;return r&&(m=m.index(h.shift())),(await Promise.all([m[t](...h),s&&d.done]))[0]};return _p.set(e,l),l}SA(n=>({...n,get:(e,t,r)=>Sx(e,t)||n.get(e,t,r),has:(e,t)=>!!Sx(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(RA(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function RA(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const og="@firebase/app",Ex="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi=new py("@firebase/app"),PA="@firebase/app-compat",NA="@firebase/analytics-compat",DA="@firebase/analytics",MA="@firebase/app-check-compat",VA="@firebase/app-check",LA="@firebase/auth",OA="@firebase/auth-compat",BA="@firebase/database",zA="@firebase/data-connect",FA="@firebase/database-compat",UA="@firebase/functions",WA="@firebase/functions-compat",$A="@firebase/installations",HA="@firebase/installations-compat",KA="@firebase/messaging",qA="@firebase/messaging-compat",GA="@firebase/performance",QA="@firebase/performance-compat",YA="@firebase/remote-config",XA="@firebase/remote-config-compat",JA="@firebase/storage",ZA="@firebase/storage-compat",e5="@firebase/firestore",t5="@firebase/ai",n5="@firebase/firestore-compat",r5="firebase",i5="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ag="[DEFAULT]",s5={[og]:"fire-core",[PA]:"fire-core-compat",[DA]:"fire-analytics",[NA]:"fire-analytics-compat",[VA]:"fire-app-check",[MA]:"fire-app-check-compat",[LA]:"fire-auth",[OA]:"fire-auth-compat",[BA]:"fire-rtdb",[zA]:"fire-data-connect",[FA]:"fire-rtdb-compat",[UA]:"fire-fn",[WA]:"fire-fn-compat",[$A]:"fire-iid",[HA]:"fire-iid-compat",[KA]:"fire-fcm",[qA]:"fire-fcm-compat",[GA]:"fire-perf",[QA]:"fire-perf-compat",[YA]:"fire-rc",[XA]:"fire-rc-compat",[JA]:"fire-gcs",[ZA]:"fire-gcs-compat",[e5]:"fire-fst",[n5]:"fire-fst-compat",[t5]:"fire-vertex","fire-js":"fire-js",[r5]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jh=new Map,o5=new Map,lg=new Map;function Tx(n,e){try{n.container.addComponent(e)}catch(t){qi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ol(n){const e=n.name;if(lg.has(e))return qi.debug(`There were multiple attempts to register component ${e}.`),!1;lg.set(e,n);for(const t of jh.values())Tx(t,n);for(const t of o5.values())Tx(t,n);return!0}function yy(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Qn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a5={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Os=new pu("app","Firebase",a5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l5{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Wo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Os.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sl=i5;function e_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:ag,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Os.create("bad-app-name",{appName:String(s)});if(t||(t=Gk()),!t)throw Os.create("no-options");const l=jh.get(s);if(l){if(Ki(t,l.options)&&Ki(r,l.config))return l;throw Os.create("duplicate-app",{appName:s})}const c=new mA(s);for(const d of lg.values())c.addComponent(d);const h=new l5(t,r,c);return jh.set(s,h),h}function t_(n=ag){const e=jh.get(n);if(!e&&n===ag&&Gk())return e_();if(!e)throw Os.create("no-app",{appName:n});return e}function Bs(n,e,t){let r=s5[n]??n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),l=e.match(/\s|\//);if(s||l){const c=[`Unable to register library "${r}" with version "${e}":`];s&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qi.warn(c.join(" "));return}ol(new Wo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c5="firebase-heartbeat-database",u5=1,Jc="firebase-heartbeat-store";let Sp=null;function n_(){return Sp||(Sp=IA(c5,u5,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Jc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Os.create("idb-open",{originalErrorMessage:n.message})})),Sp}async function d5(n){try{const t=(await n_()).transaction(Jc),r=await t.objectStore(Jc).get(r_(n));return await t.done,r}catch(e){if(e instanceof Zi)qi.warn(e.message);else{const t=Os.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});qi.warn(t.message)}}}async function Ix(n,e){try{const r=(await n_()).transaction(Jc,"readwrite");await r.objectStore(Jc).put(e,r_(n)),await r.done}catch(t){if(t instanceof Zi)qi.warn(t.message);else{const r=Os.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});qi.warn(r.message)}}}function r_(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h5=1024,f5=30;class m5{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new g5(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Cx();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:s}),this._heartbeatsCache.heartbeats.length>f5){const c=y5(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){qi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Cx(),{heartbeatsToSend:r,unsentEntries:s}=p5(this._heartbeatsCache.heartbeats),l=Ch(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return qi.warn(t),""}}}function Cx(){return new Date().toISOString().substring(0,10)}function p5(n,e=h5){const t=[];let r=n.slice();for(const s of n){const l=t.find(c=>c.agent===s.agent);if(l){if(l.dates.push(s.date),jx(t)>e){l.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),jx(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class g5{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nA()?rA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await d5(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Ix(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Ix(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function jx(n){return Ch(JSON.stringify({version:2,heartbeats:n})).length}function y5(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v5(n){ol(new Wo("platform-logger",e=>new AA(e),"PRIVATE")),ol(new Wo("heartbeat",e=>new m5(e),"PRIVATE")),Bs(og,Ex,n),Bs(og,Ex,"esm2020"),Bs("fire-js","")}v5("");function i_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const x5=i_,s_=new pu("auth","Firebase",i_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ah=new py("@firebase/auth");function w5(n,...e){Ah.logLevel<=qe.WARN&&Ah.warn(`Auth (${Sl}): ${n}`,...e)}function fh(n,...e){Ah.logLevel<=qe.ERROR&&Ah.error(`Auth (${Sl}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mr(n,...e){throw xy(n,...e)}function Dr(n,...e){return xy(n,...e)}function vy(n,e,t){const r={...x5(),[e]:t};return new pu("auth","Firebase",r).create(e,{appName:n.name})}function Fi(n){return vy(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function b5(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&mr(n,"argument-error"),vy(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function xy(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return s_.create(n,...e)}function Pe(n,e,...t){if(!n)throw xy(e,...t)}function Oi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw fh(e),new Error(e)}function Gi(n,e){n||Oi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cg(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function k5(){return Ax()==="http:"||Ax()==="https:"}function Ax(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(k5()||Jj()||"connection"in navigator)?navigator.onLine:!0}function S5(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Gi(t>e,"Short delay should be less than long delay!"),this.isMobile=Qj()||Zj()}get(){return _5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wy(n,e){Gi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Oi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Oi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Oi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T5=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],I5=new yu(3e4,6e4);function Zs(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function es(n,e,t,r,s={}){return a_(n,s,async()=>{let l={},c={};r&&(e==="GET"?c=r:l={body:JSON.stringify(r)});const h=gu({key:n.config.apiKey,...c}).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const m={method:e,headers:d,...l};return Xj()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&_l(n.emulatorConfig.host)&&(m.credentials="include"),o_.fetch()(await l_(n,n.config.apiHost,t,h),m)})}async function a_(n,e,t){n._canInitEmulator=!1;const r={...E5,...e};try{const s=new j5(n),l=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Jd(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const h=l.ok?c.errorMessage:c.error.message,[d,m]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Jd(n,"credential-already-in-use",c);if(d==="EMAIL_EXISTS")throw Jd(n,"email-already-in-use",c);if(d==="USER_DISABLED")throw Jd(n,"user-disabled",c);const g=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw vy(n,g,m);mr(n,g)}}catch(s){if(s instanceof Zi)throw s;mr(n,"network-request-failed",{message:String(s)})}}async function vu(n,e,t,r,s={}){const l=await es(n,e,t,r,s);return"mfaPendingCredential"in l&&mr(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function l_(n,e,t,r){const s=`${e}${t}?${r}`,l=n,c=l.config.emulator?wy(n.config,s):`${n.config.apiScheme}://${s}`;return T5.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function C5(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class j5{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Dr(this.auth,"network-request-failed")),I5.get())})}}function Jd(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=Dr(n,e,r);return s.customData._tokenResponse=t,s}function Rx(n){return n!==void 0&&n.enterprise!==void 0}class A5{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return C5(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function R5(n,e){return es(n,"GET","/v2/recaptchaConfig",Zs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P5(n,e){return es(n,"POST","/v1/accounts:delete",e)}async function Rh(n,e){return es(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function N5(n,e=!1){const t=Vt(n),r=await t.getIdToken(e),s=by(r);Pe(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const l=typeof s.firebase=="object"?s.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:s,token:r,authTime:Uc(Ep(s.auth_time)),issuedAtTime:Uc(Ep(s.iat)),expirationTime:Uc(Ep(s.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Ep(n){return Number(n)*1e3}function by(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return fh("JWT malformed, contained fewer than 3 sections"),null;try{const s=Kk(t);return s?JSON.parse(s):(fh("Failed to decode base64 JWT payload"),null)}catch(s){return fh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Px(n){const e=by(n);return Pe(e,"internal-error"),Pe(typeof e.exp<"u","internal-error"),Pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function al(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Zi&&D5(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function D5({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Uc(this.lastLoginAt),this.creationTime=Uc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ph(n){var y;const e=n.auth,t=await n.getIdToken(),r=await al(n,Rh(e,{idToken:t}));Pe(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const l=(y=s.providerUserInfo)!=null&&y.length?c_(s.providerUserInfo):[],c=L5(n.providerData,l),h=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!(c!=null&&c.length),m=h?d:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new ug(s.createdAt,s.lastLoginAt),isAnonymous:m};Object.assign(n,g)}async function V5(n){const e=Vt(n);await Ph(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function L5(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function c_(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O5(n,e){const t=await a_(n,{},async()=>{const r=gu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:l}=n.config,c=await l_(n,s,"/v1/token",`key=${l}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:h,body:r};return n.emulatorConfig&&_l(n.emulatorConfig.host)&&(d.credentials="include"),o_.fetch()(c,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function B5(n,e){return es(n,"POST","/v2/accounts:revokeToken",Zs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(typeof e.idToken<"u","internal-error"),Pe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Px(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Pe(e.length!==0,"internal-error");const t=Px(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:l}=await O5(e,t);this.updateTokensAndExpiration(r,s,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:l}=t,c=new Ja;return r&&(Pe(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),s&&(Pe(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),l&&(Pe(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ja,this.toJSON())}_performRefresh(){return Oi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function As(n,e){Pe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Nr{constructor({uid:e,auth:t,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new M5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ug(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await al(this,this.stsTokenManager.getToken(this.auth,e));return Pe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return N5(this,e)}reload(){return V5(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Nr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Ph(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qn(this.auth.app))return Promise.reject(Fi(this.auth));const e=await this.getIdToken();return await al(this,P5(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,s=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,h=t.tenantId??void 0,d=t._redirectEventId??void 0,m=t.createdAt??void 0,g=t.lastLoginAt??void 0,{uid:y,emailVerified:x,isAnonymous:E,providerData:k,stsTokenManager:S}=t;Pe(y&&S,e,"internal-error");const T=Ja.fromJSON(this.name,S);Pe(typeof y=="string",e,"internal-error"),As(r,e.name),As(s,e.name),Pe(typeof x=="boolean",e,"internal-error"),Pe(typeof E=="boolean",e,"internal-error"),As(l,e.name),As(c,e.name),As(h,e.name),As(d,e.name),As(m,e.name),As(g,e.name);const P=new Nr({uid:y,auth:e,email:s,emailVerified:x,displayName:r,isAnonymous:E,photoURL:c,phoneNumber:l,tenantId:h,stsTokenManager:T,createdAt:m,lastLoginAt:g});return k&&Array.isArray(k)&&(P.providerData=k.map(M=>({...M}))),d&&(P._redirectEventId=d),P}static async _fromIdTokenResponse(e,t,r=!1){const s=new Ja;s.updateFromServerResponse(t);const l=new Nr({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Ph(l),l}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];Pe(s.localId!==void 0,"internal-error");const l=s.providerUserInfo!==void 0?c_(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!(l!=null&&l.length),h=new Ja;h.updateFromIdToken(r);const d=new Nr({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:c}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new ug(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(l!=null&&l.length)};return Object.assign(d,m),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx=new Map;function Bi(n){Gi(n instanceof Function,"Expected a class definition");let e=Nx.get(n);return e?(Gi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Nx.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}u_.type="NONE";const Dx=u_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mh(n,e,t){return`firebase:${n}:${e}:${t}`}class Za{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:l}=this.auth;this.fullUserKey=mh(this.userKey,s.apiKey,l),this.fullPersistenceKey=mh("persistence",s.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Rh(this.auth,{idToken:e}).catch(()=>{});return t?Nr._fromGetAccountInfoResponse(this.auth,t,e):null}return Nr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Za(Bi(Dx),e,r);const s=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let l=s[0]||Bi(Dx);const c=mh(r,e.config.apiKey,e.name);let h=null;for(const m of t)try{const g=await m._get(c);if(g){let y;if(typeof g=="string"){const x=await Rh(e,{idToken:g}).catch(()=>{});if(!x)break;y=await Nr._fromGetAccountInfoResponse(e,x,g)}else y=Nr._fromJSON(e,g);m!==l&&(h=y),l=m;break}}catch{}const d=s.filter(m=>m._shouldAllowMigration);return!l._shouldAllowMigration||!d.length?new Za(l,e,r):(l=d[0],h&&await l._set(c,h.toJSON()),await Promise.all(t.map(async m=>{if(m!==l)try{await m._remove(c)}catch{}})),new Za(l,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mx(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(m_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(d_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(g_(e))return"Blackberry";if(y_(e))return"Webos";if(h_(e))return"Safari";if((e.includes("chrome/")||f_(e))&&!e.includes("edge/"))return"Chrome";if(p_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function d_(n=wn()){return/firefox\//i.test(n)}function h_(n=wn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function f_(n=wn()){return/crios\//i.test(n)}function m_(n=wn()){return/iemobile/i.test(n)}function p_(n=wn()){return/android/i.test(n)}function g_(n=wn()){return/blackberry/i.test(n)}function y_(n=wn()){return/webos/i.test(n)}function ky(n=wn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function z5(n=wn()){var e;return ky(n)&&!!((e=window.navigator)!=null&&e.standalone)}function F5(){return eA()&&document.documentMode===10}function v_(n=wn()){return ky(n)||p_(n)||y_(n)||g_(n)||/windows phone/i.test(n)||m_(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x_(n,e=[]){let t;switch(n){case"Browser":t=Mx(wn());break;case"Worker":t=`${Mx(wn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Sl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((c,h)=>{try{const d=e(l);c(d)}catch(d){h(d)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W5(n,e={}){return es(n,"GET","/v2/passwordPolicy",Zs(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $5=6;class H5{constructor(e){var r;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??$5,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K5{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Vx(this),this.idTokenSubscription=new Vx(this),this.beforeStateQueue=new U5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=s_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Bi(t)),this._initializationPromise=this.queue(async()=>{var r,s,l;if(!this._deleted&&(this.persistenceManager=await Za.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Rh(this,{idToken:e}),r=await Nr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(Qn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(h,h))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,h=r==null?void 0:r._redirectEventId,d=await this.tryRedirectSignIn(e);(!c||c===h)&&(d!=null&&d.user)&&(r=d.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ph(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=S5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qn(this.app))return Promise.reject(Fi(this));const t=e?Vt(e):null;return t&&Pe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qn(this.app)?Promise.reject(Fi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qn(this.app)?Promise.reject(Fi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Bi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await W5(this),t=new H5(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new pu("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await B5(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Bi(e)||this._popupRedirectResolver;Pe(t,this,"argument-error"),this.redirectPersistenceManager=await Za.create(this,[Bi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pe(h,this,"internal-error"),h.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,r,s);return()=>{c=!0,d()}}else{const d=e.addObserver(t);return()=>{c=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=x_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(Qn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&w5(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function eo(n){return Vt(n)}class Vx{constructor(e){this.auth=e,this.observer=null,this.addObserver=lA(t=>this.observer=t)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function q5(n){uf=n}function w_(n){return uf.loadJS(n)}function G5(){return uf.recaptchaEnterpriseScript}function Q5(){return uf.gapiScript}function Y5(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class X5{constructor(){this.enterprise=new J5}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class J5{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Z5="recaptcha-enterprise",b_="NO_RECAPTCHA";class eR{constructor(e){this.type=Z5,this.auth=eo(e)}async verify(e="verify",t=!1){async function r(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,h)=>{R5(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const m=new A5(d);return l.tenantId==null?l._agentRecaptchaConfig=m:l._tenantRecaptchaConfigs[l.tenantId]=m,c(m.siteKey)}}).catch(d=>{h(d)})})}function s(l,c,h){const d=window.grecaptcha;Rx(d)?d.enterprise.ready(()=>{d.enterprise.execute(l,{action:e}).then(m=>{c(m)}).catch(()=>{c(b_)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new X5().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{r(this.auth).then(h=>{if(!t&&Rx(window.grecaptcha))s(h,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let d=G5();d.length!==0&&(d+=h),w_(d).then(()=>{s(h,l,c)}).catch(m=>{c(m)})}}).catch(h=>{c(h)})})}}async function Lx(n,e,t,r=!1,s=!1){const l=new eR(n);let c;if(s)c=b_;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const h={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const d=h.phoneEnrollmentInfo.phoneNumber,m=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const d=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return r?Object.assign(h,{captchaResp:c}):Object.assign(h,{captchaResponse:c}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function dg(n,e,t,r,s){var l;if((l=n._getRecaptchaConfig())!=null&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Lx(n,e,t,t==="getOobCode");return r(n,c)}else return r(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await Lx(n,e,t,t==="getOobCode");return r(n,h)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tR(n,e){const t=yy(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),l=t.getOptions();if(Ki(l,e??{}))return s;mr(s,"already-initialized")}return t.initialize({options:e})}function nR(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Bi);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function rR(n,e,t){const r=eo(n);Pe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,l=k_(e),{host:c,port:h}=iR(e),d=h===null?"":`:${h}`,m={url:`${l}//${c}${d}/`},g=Object.freeze({host:c,port:h,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Pe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Pe(Ki(m,r.config.emulator)&&Ki(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=m,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,_l(c)?(Yk(`${l}//${c}${d}`),Xk("Auth",!0)):sR()}function k_(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function iR(n){const e=k_(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const l=s[1];return{host:l,port:Ox(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:Ox(c)}}}function Ox(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function sR(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Oi("not implemented")}_getIdTokenResponse(e){return Oi("not implemented")}_linkToIdToken(e,t){return Oi("not implemented")}_getReauthenticationResolver(e){return Oi("not implemented")}}async function oR(n,e){return es(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aR(n,e){return vu(n,"POST","/v1/accounts:signInWithPassword",Zs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lR(n,e){return vu(n,"POST","/v1/accounts:signInWithEmailLink",Zs(n,e))}async function cR(n,e){return vu(n,"POST","/v1/accounts:signInWithEmailLink",Zs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc extends _y{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Zc(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Zc(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dg(e,t,"signInWithPassword",aR);case"emailLink":return lR(e,{email:this._email,oobCode:this._password});default:mr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dg(e,r,"signUpPassword",oR);case"emailLink":return cR(e,{idToken:t,email:this._email,oobCode:this._password});default:mr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function el(n,e){return vu(n,"POST","/v1/accounts:signInWithIdp",Zs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR="http://localhost";class $o extends _y{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new $o(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):mr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...l}=t;if(!r||!s)return null;const c=new $o(r,s);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return el(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,el(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,el(e,t)}buildRequest(){const e={requestUri:uR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=gu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dR(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function hR(n){const e=Nc(Dc(n)).link,t=e?Nc(Dc(e)).deep_link_id:null,r=Nc(Dc(n)).deep_link_id;return(r?Nc(Dc(r)).link:null)||r||t||e||n}class Sy{constructor(e){const t=Nc(Dc(e)),r=t.apiKey??null,s=t.oobCode??null,l=dR(t.mode??null);Pe(r&&s&&l,"argument-error"),this.apiKey=r,this.operation=l,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=hR(e);try{return new Sy(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(){this.providerId=El.PROVIDER_ID}static credential(e,t){return Zc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Sy.parseLink(t);return Pe(r,"argument-error"),Zc._fromEmailAndCode(e,r.code,r.tenantId)}}El.PROVIDER_ID="password";El.EMAIL_PASSWORD_SIGN_IN_METHOD="password";El.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu extends Ey{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps extends xu{constructor(){super("facebook.com")}static credential(e){return $o._fromParams({providerId:Ps.PROVIDER_ID,signInMethod:Ps.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ps.credentialFromTaggedObject(e)}static credentialFromError(e){return Ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ps.credential(e.oauthAccessToken)}catch{return null}}}Ps.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ps.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi extends xu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return $o._fromParams({providerId:Vi.PROVIDER_ID,signInMethod:Vi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Vi.credentialFromTaggedObject(e)}static credentialFromError(e){return Vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Vi.credential(t,r)}catch{return null}}}Vi.GOOGLE_SIGN_IN_METHOD="google.com";Vi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns extends xu{constructor(){super("github.com")}static credential(e){return $o._fromParams({providerId:Ns.PROVIDER_ID,signInMethod:Ns.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ns.credentialFromTaggedObject(e)}static credentialFromError(e){return Ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ns.credential(e.oauthAccessToken)}catch{return null}}}Ns.GITHUB_SIGN_IN_METHOD="github.com";Ns.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds extends xu{constructor(){super("twitter.com")}static credential(e,t){return $o._fromParams({providerId:Ds.PROVIDER_ID,signInMethod:Ds.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ds.credentialFromTaggedObject(e)}static credentialFromError(e){return Ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Ds.credential(t,r)}catch{return null}}}Ds.TWITTER_SIGN_IN_METHOD="twitter.com";Ds.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fR(n,e){return vu(n,"POST","/v1/accounts:signUp",Zs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const l=await Nr._fromIdTokenResponse(e,r,s),c=Bx(r);return new Ho({user:l,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=Bx(r);return new Ho({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function Bx(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh extends Zi{constructor(e,t,r,s){super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Nh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new Nh(e,t,r,s)}}function __(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Nh._fromErrorAndOperation(n,l,e,r):l})}async function mR(n,e,t=!1){const r=await al(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ho._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pR(n,e,t=!1){const{auth:r}=n;if(Qn(r.app))return Promise.reject(Fi(r));const s="reauthenticate";try{const l=await al(n,__(r,s,e,n),t);Pe(l.idToken,r,"internal-error");const c=by(l.idToken);Pe(c,r,"internal-error");const{sub:h}=c;return Pe(n.uid===h,r,"user-mismatch"),Ho._forOperation(n,s,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&mr(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S_(n,e,t=!1){if(Qn(n.app))return Promise.reject(Fi(n));const r="signIn",s=await __(n,r,e),l=await Ho._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(l.user),l}async function gR(n,e){return S_(eo(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E_(n){const e=eo(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function yR(n,e,t){if(Qn(n.app))return Promise.reject(Fi(n));const r=eo(n),c=await dg(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",fR).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&E_(n),d}),h=await Ho._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(h.user),h}function vR(n,e,t){return Qn(n.app)?Promise.reject(Fi(n)):gR(Vt(n),El.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&E_(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xR(n,e){return es(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wR(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Vt(n),l={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=await al(r,xR(r.auth,l));r.displayName=c.displayName||null,r.photoURL=c.photoUrl||null;const h=r.providerData.find(({providerId:d})=>d==="password");h&&(h.displayName=r.displayName,h.photoURL=r.photoURL),await r._updateTokensIfNecessary(c)}function bR(n,e,t,r){return Vt(n).onIdTokenChanged(e,t,r)}function kR(n,e,t){return Vt(n).beforeAuthStateChanged(e,t)}function _R(n,e,t,r){return Vt(n).onAuthStateChanged(e,t,r)}function SR(n){return Vt(n).signOut()}const Dh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Dh,"1"),this.storage.removeItem(Dh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER=1e3,TR=10;class I_ extends T_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=v_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,h,d)=>{this.notifyListeners(c,d)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);F5()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,TR):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},ER)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}I_.type="LOCAL";const IR=I_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_ extends T_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}C_.type="SESSION";const j_=C_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CR(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new df(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:l}=t.data,c=this.handlersMap[s];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const h=Array.from(c).map(async m=>m(t.origin,l)),d=await CR(h);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}df.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ty(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let l,c;return new Promise((h,d)=>{const m=Ty("",20);s.port1.start();const g=setTimeout(()=>{d(new Error("unsupported_event"))},r);c={messageChannel:s,onMessage(y){const x=y;if(x.data.eventId===m)switch(x.data.status){case"ack":clearTimeout(g),l=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),h(x.data.response);break;default:clearTimeout(g),clearTimeout(l),d(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(){return window}function AR(n){ci().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A_(){return typeof ci().WorkerGlobalScope<"u"&&typeof ci().importScripts=="function"}async function RR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function PR(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function NR(){return A_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R_="firebaseLocalStorageDb",DR=1,Mh="firebaseLocalStorage",P_="fbase_key";class wu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function hf(n,e){return n.transaction([Mh],e?"readwrite":"readonly").objectStore(Mh)}function MR(){const n=indexedDB.deleteDatabase(R_);return new wu(n).toPromise()}function hg(){const n=indexedDB.open(R_,DR);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Mh,{keyPath:P_})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Mh)?e(r):(r.close(),await MR(),e(await hg()))})})}async function zx(n,e,t){const r=hf(n,!0).put({[P_]:e,value:t});return new wu(r).toPromise()}async function VR(n,e){const t=hf(n,!1).get(e),r=await new wu(t).toPromise();return r===void 0?null:r.value}function Fx(n,e){const t=hf(n,!0).delete(e);return new wu(t).toPromise()}const LR=800,OR=3;class N_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await hg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>OR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return A_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=df._getInstance(NR()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await RR(),!this.activeServiceWorker)return;this.sender=new jR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||PR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await hg();return await zx(e,Dh,"1"),await Fx(e,Dh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>zx(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>VR(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Fx(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const l=hf(s,!1).getAll();return new wu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:l}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(l)&&(this.notifyListeners(s,l),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),LR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}N_.type="LOCAL";const BR=N_;new yu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D_(n,e){return e?Bi(e):(Pe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy extends _y{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return el(e,this._buildIdpRequest())}_linkToIdToken(e,t){return el(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return el(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function zR(n){return S_(n.auth,new Iy(n),n.bypassAuthState)}function FR(n){const{auth:e,user:t}=n;return Pe(t,e,"internal-error"),pR(t,new Iy(n),n.bypassAuthState)}async function UR(n){const{auth:e,user:t}=n;return Pe(t,e,"internal-error"),mR(t,new Iy(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(e,t,r,s,l=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:l,error:c,type:h}=e;if(c){this.reject(c);return}const d={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zR;case"linkViaPopup":case"linkViaRedirect":return UR;case"reauthViaPopup":case"reauthViaRedirect":return FR;default:mr(this.auth,"internal-error")}}resolve(e){Gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR=new yu(2e3,1e4);async function $R(n,e,t){if(Qn(n.app))return Promise.reject(Dr(n,"operation-not-supported-in-this-environment"));const r=eo(n);b5(n,e,Ey);const s=D_(r,t);return new Lo(r,"signInViaPopup",e,s).executeNotNull()}class Lo extends M_{constructor(e,t,r,s,l){super(e,t,s,l),this.provider=r,this.authWindow=null,this.pollId=null,Lo.currentPopupAction&&Lo.currentPopupAction.cancel(),Lo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pe(e,this.auth,"internal-error"),e}async onExecution(){Gi(this.filter.length===1,"Popup operations only handle one event");const e=Ty();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Dr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Dr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Lo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if((r=(t=this.authWindow)==null?void 0:t.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Dr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,WR.get())};e()}}Lo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR="pendingRedirect",ph=new Map;class KR extends M_{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=ph.get(this.auth._key());if(!e){try{const r=await qR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}ph.set(this.auth._key(),e)}return this.bypassAuthState||ph.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function qR(n,e){const t=YR(e),r=QR(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function GR(n,e){ph.set(n._key(),e)}function QR(n){return Bi(n._redirectPersistence)}function YR(n){return mh(HR,n.config.apiKey,n.name)}async function XR(n,e,t=!1){if(Qn(n.app))return Promise.reject(Fi(n));const r=eo(n),s=D_(r,e),c=await new KR(r,s,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR=600*1e3;class ZR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!eP(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!V_(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";t.onError(Dr(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=JR&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ux(e))}saveEventToCache(e){this.cachedEventUids.add(Ux(e)),this.lastProcessedEventTime=Date.now()}}function Ux(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function V_({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function eP(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return V_(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tP(n,e={}){return es(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rP=/^https?/;async function iP(n){if(n.config.emulator)return;const{authorizedDomains:e}=await tP(n);for(const t of e)try{if(sP(t))return}catch{}mr(n,"unauthorized-domain")}function sP(n){const e=cg(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!rP.test(t))return!1;if(nP.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oP=new yu(3e4,6e4);function Wx(){const n=ci().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function aP(n){return new Promise((e,t)=>{var s,l,c;function r(){Wx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Wx(),t(Dr(n,"network-request-failed"))},timeout:oP.get()})}if((l=(s=ci().gapi)==null?void 0:s.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((c=ci().gapi)!=null&&c.load)r();else{const h=Y5("iframefcb");return ci()[h]=()=>{gapi.load?r():t(Dr(n,"network-request-failed"))},w_(`${Q5()}?onload=${h}`).catch(d=>t(d))}}).catch(e=>{throw gh=null,e})}let gh=null;function lP(n){return gh=gh||aP(n),gh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cP=new yu(5e3,15e3),uP="__/auth/iframe",dP="emulator/auth/iframe",hP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mP(n){const e=n.config;Pe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?wy(e,dP):`https://${n.config.authDomain}/${uP}`,r={apiKey:e.apiKey,appName:n.name,v:Sl},s=fP.get(n.config.apiHost);s&&(r.eid=s);const l=n._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${gu(r).slice(1)}`}async function pP(n){const e=await lP(n),t=ci().gapi;return Pe(t,n,"internal-error"),e.open({where:document.body,url:mP(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hP,dontclear:!0},r=>new Promise(async(s,l)=>{await r.restyle({setHideOnLeave:!1});const c=Dr(n,"network-request-failed"),h=ci().setTimeout(()=>{l(c)},cP.get());function d(){ci().clearTimeout(h),s(r)}r.ping(d).then(d,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},yP=500,vP=600,xP="_blank",wP="http://localhost";class $x{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bP(n,e,t,r=yP,s=vP){const l=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const d={...gP,width:r.toString(),height:s.toString(),top:l,left:c},m=wn().toLowerCase();t&&(h=f_(m)?xP:t),d_(m)&&(e=e||wP,d.scrollbars="yes");const g=Object.entries(d).reduce((x,[E,k])=>`${x}${E}=${k},`,"");if(z5(m)&&h!=="_self")return kP(e||"",h),new $x(null);const y=window.open(e||"",h,g);Pe(y,n,"popup-blocked");try{y.focus()}catch{}return new $x(y)}function kP(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _P="__/auth/handler",SP="emulator/auth/handler",EP=encodeURIComponent("fac");async function Hx(n,e,t,r,s,l){Pe(n.config.authDomain,n,"auth-domain-config-required"),Pe(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Sl,eventId:s};if(e instanceof Ey){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",aA(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,y]of Object.entries({}))c[g]=y}if(e instanceof xu){const g=e.getScopes().filter(y=>y!=="");g.length>0&&(c.scopes=g.join(","))}n.tenantId&&(c.tid=n.tenantId);const h=c;for(const g of Object.keys(h))h[g]===void 0&&delete h[g];const d=await n._getAppCheckToken(),m=d?`#${EP}=${encodeURIComponent(d)}`:"";return`${TP(n)}?${gu(h).slice(1)}${m}`}function TP({config:n}){return n.emulator?wy(n,SP):`https://${n.authDomain}/${_P}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tp="webStorageSupport";class IP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=j_,this._completeRedirectFn=XR,this._overrideRedirectResult=GR}async _openPopup(e,t,r,s){var c;Gi((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await Hx(e,t,r,cg(),s);return bP(e,l,Ty())}async _openRedirect(e,t,r,s){await this._originValidation(e);const l=await Hx(e,t,r,cg(),s);return AR(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:l}=this.eventManagers[t];return s?Promise.resolve(s):(Gi(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await pP(e),r=new ZR(e);return t.register("authEvent",s=>(Pe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Tp,{type:Tp},s=>{var c;const l=(c=s==null?void 0:s[0])==null?void 0:c[Tp];l!==void 0&&t(!!l),mr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=iP(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return v_()||h_()||ky()}}const CP=IP;var Kx="@firebase/auth",qx="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AP(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function RP(n){ol(new Wo("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=r.options;Pe(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:c,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:x_(n)},m=new K5(r,s,l,d);return nR(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ol(new Wo("auth-internal",e=>{const t=eo(e.getProvider("auth").getImmediate());return(r=>new jP(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Bs(Kx,qx,AP(n)),Bs(Kx,qx,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PP=300,NP=Qk("authIdTokenMaxAge")||PP;let Gx=null;const DP=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>NP)return;const s=t==null?void 0:t.token;Gx!==s&&(Gx=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function MP(n=t_()){const e=yy(n,"auth");if(e.isInitialized())return e.getImmediate();const t=tR(n,{popupRedirectResolver:CP,persistence:[BR,IR,j_]}),r=Qk("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const c=DP(l.toString());kR(t,c,()=>c(t.currentUser)),bR(t,h=>c(h))}}const s=qk("auth");return s&&rR(t,`http://${s}`),t}function VP(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}q5({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const l=Dr("internal-error");l.customData=s,t(l)},r.type="text/javascript",r.charset="UTF-8",VP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});RP("Browser");var Qx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zs,L_;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,C){function N(){}N.prototype=C.prototype,A.F=C.prototype,A.prototype=new N,A.prototype.constructor=A,A.D=function(L,B,F){for(var V=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)V[Me-2]=arguments[Me];return C.prototype[B].apply(L,V)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,C,N){N||(N=0);const L=Array(16);if(typeof C=="string")for(var B=0;B<16;++B)L[B]=C.charCodeAt(N++)|C.charCodeAt(N++)<<8|C.charCodeAt(N++)<<16|C.charCodeAt(N++)<<24;else for(B=0;B<16;++B)L[B]=C[N++]|C[N++]<<8|C[N++]<<16|C[N++]<<24;C=A.g[0],N=A.g[1],B=A.g[2];let F=A.g[3],V;V=C+(F^N&(B^F))+L[0]+3614090360&4294967295,C=N+(V<<7&4294967295|V>>>25),V=F+(B^C&(N^B))+L[1]+3905402710&4294967295,F=C+(V<<12&4294967295|V>>>20),V=B+(N^F&(C^N))+L[2]+606105819&4294967295,B=F+(V<<17&4294967295|V>>>15),V=N+(C^B&(F^C))+L[3]+3250441966&4294967295,N=B+(V<<22&4294967295|V>>>10),V=C+(F^N&(B^F))+L[4]+4118548399&4294967295,C=N+(V<<7&4294967295|V>>>25),V=F+(B^C&(N^B))+L[5]+1200080426&4294967295,F=C+(V<<12&4294967295|V>>>20),V=B+(N^F&(C^N))+L[6]+2821735955&4294967295,B=F+(V<<17&4294967295|V>>>15),V=N+(C^B&(F^C))+L[7]+4249261313&4294967295,N=B+(V<<22&4294967295|V>>>10),V=C+(F^N&(B^F))+L[8]+1770035416&4294967295,C=N+(V<<7&4294967295|V>>>25),V=F+(B^C&(N^B))+L[9]+2336552879&4294967295,F=C+(V<<12&4294967295|V>>>20),V=B+(N^F&(C^N))+L[10]+4294925233&4294967295,B=F+(V<<17&4294967295|V>>>15),V=N+(C^B&(F^C))+L[11]+2304563134&4294967295,N=B+(V<<22&4294967295|V>>>10),V=C+(F^N&(B^F))+L[12]+1804603682&4294967295,C=N+(V<<7&4294967295|V>>>25),V=F+(B^C&(N^B))+L[13]+4254626195&4294967295,F=C+(V<<12&4294967295|V>>>20),V=B+(N^F&(C^N))+L[14]+2792965006&4294967295,B=F+(V<<17&4294967295|V>>>15),V=N+(C^B&(F^C))+L[15]+1236535329&4294967295,N=B+(V<<22&4294967295|V>>>10),V=C+(B^F&(N^B))+L[1]+4129170786&4294967295,C=N+(V<<5&4294967295|V>>>27),V=F+(N^B&(C^N))+L[6]+3225465664&4294967295,F=C+(V<<9&4294967295|V>>>23),V=B+(C^N&(F^C))+L[11]+643717713&4294967295,B=F+(V<<14&4294967295|V>>>18),V=N+(F^C&(B^F))+L[0]+3921069994&4294967295,N=B+(V<<20&4294967295|V>>>12),V=C+(B^F&(N^B))+L[5]+3593408605&4294967295,C=N+(V<<5&4294967295|V>>>27),V=F+(N^B&(C^N))+L[10]+38016083&4294967295,F=C+(V<<9&4294967295|V>>>23),V=B+(C^N&(F^C))+L[15]+3634488961&4294967295,B=F+(V<<14&4294967295|V>>>18),V=N+(F^C&(B^F))+L[4]+3889429448&4294967295,N=B+(V<<20&4294967295|V>>>12),V=C+(B^F&(N^B))+L[9]+568446438&4294967295,C=N+(V<<5&4294967295|V>>>27),V=F+(N^B&(C^N))+L[14]+3275163606&4294967295,F=C+(V<<9&4294967295|V>>>23),V=B+(C^N&(F^C))+L[3]+4107603335&4294967295,B=F+(V<<14&4294967295|V>>>18),V=N+(F^C&(B^F))+L[8]+1163531501&4294967295,N=B+(V<<20&4294967295|V>>>12),V=C+(B^F&(N^B))+L[13]+2850285829&4294967295,C=N+(V<<5&4294967295|V>>>27),V=F+(N^B&(C^N))+L[2]+4243563512&4294967295,F=C+(V<<9&4294967295|V>>>23),V=B+(C^N&(F^C))+L[7]+1735328473&4294967295,B=F+(V<<14&4294967295|V>>>18),V=N+(F^C&(B^F))+L[12]+2368359562&4294967295,N=B+(V<<20&4294967295|V>>>12),V=C+(N^B^F)+L[5]+4294588738&4294967295,C=N+(V<<4&4294967295|V>>>28),V=F+(C^N^B)+L[8]+2272392833&4294967295,F=C+(V<<11&4294967295|V>>>21),V=B+(F^C^N)+L[11]+1839030562&4294967295,B=F+(V<<16&4294967295|V>>>16),V=N+(B^F^C)+L[14]+4259657740&4294967295,N=B+(V<<23&4294967295|V>>>9),V=C+(N^B^F)+L[1]+2763975236&4294967295,C=N+(V<<4&4294967295|V>>>28),V=F+(C^N^B)+L[4]+1272893353&4294967295,F=C+(V<<11&4294967295|V>>>21),V=B+(F^C^N)+L[7]+4139469664&4294967295,B=F+(V<<16&4294967295|V>>>16),V=N+(B^F^C)+L[10]+3200236656&4294967295,N=B+(V<<23&4294967295|V>>>9),V=C+(N^B^F)+L[13]+681279174&4294967295,C=N+(V<<4&4294967295|V>>>28),V=F+(C^N^B)+L[0]+3936430074&4294967295,F=C+(V<<11&4294967295|V>>>21),V=B+(F^C^N)+L[3]+3572445317&4294967295,B=F+(V<<16&4294967295|V>>>16),V=N+(B^F^C)+L[6]+76029189&4294967295,N=B+(V<<23&4294967295|V>>>9),V=C+(N^B^F)+L[9]+3654602809&4294967295,C=N+(V<<4&4294967295|V>>>28),V=F+(C^N^B)+L[12]+3873151461&4294967295,F=C+(V<<11&4294967295|V>>>21),V=B+(F^C^N)+L[15]+530742520&4294967295,B=F+(V<<16&4294967295|V>>>16),V=N+(B^F^C)+L[2]+3299628645&4294967295,N=B+(V<<23&4294967295|V>>>9),V=C+(B^(N|~F))+L[0]+4096336452&4294967295,C=N+(V<<6&4294967295|V>>>26),V=F+(N^(C|~B))+L[7]+1126891415&4294967295,F=C+(V<<10&4294967295|V>>>22),V=B+(C^(F|~N))+L[14]+2878612391&4294967295,B=F+(V<<15&4294967295|V>>>17),V=N+(F^(B|~C))+L[5]+4237533241&4294967295,N=B+(V<<21&4294967295|V>>>11),V=C+(B^(N|~F))+L[12]+1700485571&4294967295,C=N+(V<<6&4294967295|V>>>26),V=F+(N^(C|~B))+L[3]+2399980690&4294967295,F=C+(V<<10&4294967295|V>>>22),V=B+(C^(F|~N))+L[10]+4293915773&4294967295,B=F+(V<<15&4294967295|V>>>17),V=N+(F^(B|~C))+L[1]+2240044497&4294967295,N=B+(V<<21&4294967295|V>>>11),V=C+(B^(N|~F))+L[8]+1873313359&4294967295,C=N+(V<<6&4294967295|V>>>26),V=F+(N^(C|~B))+L[15]+4264355552&4294967295,F=C+(V<<10&4294967295|V>>>22),V=B+(C^(F|~N))+L[6]+2734768916&4294967295,B=F+(V<<15&4294967295|V>>>17),V=N+(F^(B|~C))+L[13]+1309151649&4294967295,N=B+(V<<21&4294967295|V>>>11),V=C+(B^(N|~F))+L[4]+4149444226&4294967295,C=N+(V<<6&4294967295|V>>>26),V=F+(N^(C|~B))+L[11]+3174756917&4294967295,F=C+(V<<10&4294967295|V>>>22),V=B+(C^(F|~N))+L[2]+718787259&4294967295,B=F+(V<<15&4294967295|V>>>17),V=N+(F^(B|~C))+L[9]+3951481745&4294967295,A.g[0]=A.g[0]+C&4294967295,A.g[1]=A.g[1]+(B+(V<<21&4294967295|V>>>11))&4294967295,A.g[2]=A.g[2]+B&4294967295,A.g[3]=A.g[3]+F&4294967295}r.prototype.v=function(A,C){C===void 0&&(C=A.length);const N=C-this.blockSize,L=this.C;let B=this.h,F=0;for(;F<C;){if(B==0)for(;F<=N;)s(this,A,F),F+=this.blockSize;if(typeof A=="string"){for(;F<C;)if(L[B++]=A.charCodeAt(F++),B==this.blockSize){s(this,L),B=0;break}}else for(;F<C;)if(L[B++]=A[F++],B==this.blockSize){s(this,L),B=0;break}}this.h=B,this.o+=C},r.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var C=1;C<A.length-8;++C)A[C]=0;C=this.o*8;for(var N=A.length-8;N<A.length;++N)A[N]=C&255,C/=256;for(this.v(A),A=Array(16),C=0,N=0;N<4;++N)for(let L=0;L<32;L+=8)A[C++]=this.g[N]>>>L&255;return A};function l(A,C){var N=h;return Object.prototype.hasOwnProperty.call(N,A)?N[A]:N[A]=C(A)}function c(A,C){this.h=C;const N=[];let L=!0;for(let B=A.length-1;B>=0;B--){const F=A[B]|0;L&&F==C||(N[B]=F,L=!1)}this.g=N}var h={};function d(A){return-128<=A&&A<128?l(A,function(C){return new c([C|0],C<0?-1:0)}):new c([A|0],A<0?-1:0)}function m(A){if(isNaN(A)||!isFinite(A))return y;if(A<0)return T(m(-A));const C=[];let N=1;for(let L=0;A>=N;L++)C[L]=A/N|0,N*=4294967296;return new c(C,0)}function g(A,C){if(A.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(A.charAt(0)=="-")return T(g(A.substring(1),C));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=m(Math.pow(C,8));let L=y;for(let F=0;F<A.length;F+=8){var B=Math.min(8,A.length-F);const V=parseInt(A.substring(F,F+B),C);B<8?(B=m(Math.pow(C,B)),L=L.j(B).add(m(V))):(L=L.j(N),L=L.add(m(V)))}return L}var y=d(0),x=d(1),E=d(16777216);n=c.prototype,n.m=function(){if(S(this))return-T(this).m();let A=0,C=1;for(let N=0;N<this.g.length;N++){const L=this.i(N);A+=(L>=0?L:4294967296+L)*C,C*=4294967296}return A},n.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(k(this))return"0";if(S(this))return"-"+T(this).toString(A);const C=m(Math.pow(A,6));var N=this;let L="";for(;;){const B=U(N,C).g;N=P(N,B.j(C));let F=((N.g.length>0?N.g[0]:N.h)>>>0).toString(A);if(N=B,k(N))return F+L;for(;F.length<6;)F="0"+F;L=F+L}},n.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function k(A){if(A.h!=0)return!1;for(let C=0;C<A.g.length;C++)if(A.g[C]!=0)return!1;return!0}function S(A){return A.h==-1}n.l=function(A){return A=P(this,A),S(A)?-1:k(A)?0:1};function T(A){const C=A.g.length,N=[];for(let L=0;L<C;L++)N[L]=~A.g[L];return new c(N,~A.h).add(x)}n.abs=function(){return S(this)?T(this):this},n.add=function(A){const C=Math.max(this.g.length,A.g.length),N=[];let L=0;for(let B=0;B<=C;B++){let F=L+(this.i(B)&65535)+(A.i(B)&65535),V=(F>>>16)+(this.i(B)>>>16)+(A.i(B)>>>16);L=V>>>16,F&=65535,V&=65535,N[B]=V<<16|F}return new c(N,N[N.length-1]&-2147483648?-1:0)};function P(A,C){return A.add(T(C))}n.j=function(A){if(k(this)||k(A))return y;if(S(this))return S(A)?T(this).j(T(A)):T(T(this).j(A));if(S(A))return T(this.j(T(A)));if(this.l(E)<0&&A.l(E)<0)return m(this.m()*A.m());const C=this.g.length+A.g.length,N=[];for(var L=0;L<2*C;L++)N[L]=0;for(L=0;L<this.g.length;L++)for(let B=0;B<A.g.length;B++){const F=this.i(L)>>>16,V=this.i(L)&65535,Me=A.i(B)>>>16,We=A.i(B)&65535;N[2*L+2*B]+=V*We,M(N,2*L+2*B),N[2*L+2*B+1]+=F*We,M(N,2*L+2*B+1),N[2*L+2*B+1]+=V*Me,M(N,2*L+2*B+1),N[2*L+2*B+2]+=F*Me,M(N,2*L+2*B+2)}for(A=0;A<C;A++)N[A]=N[2*A+1]<<16|N[2*A];for(A=C;A<2*C;A++)N[A]=0;return new c(N,0)};function M(A,C){for(;(A[C]&65535)!=A[C];)A[C+1]+=A[C]>>>16,A[C]&=65535,C++}function D(A,C){this.g=A,this.h=C}function U(A,C){if(k(C))throw Error("division by zero");if(k(A))return new D(y,y);if(S(A))return C=U(T(A),C),new D(T(C.g),T(C.h));if(S(C))return C=U(A,T(C)),new D(T(C.g),C.h);if(A.g.length>30){if(S(A)||S(C))throw Error("slowDivide_ only works with positive integers.");for(var N=x,L=C;L.l(A)<=0;)N=H(N),L=H(L);var B=K(N,1),F=K(L,1);for(L=K(L,2),N=K(N,2);!k(L);){var V=F.add(L);V.l(A)<=0&&(B=B.add(N),F=V),L=K(L,1),N=K(N,1)}return C=P(A,B.j(C)),new D(B,C)}for(B=y;A.l(C)>=0;){for(N=Math.max(1,Math.floor(A.m()/C.m())),L=Math.ceil(Math.log(N)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),F=m(N),V=F.j(C);S(V)||V.l(A)>0;)N-=L,F=m(N),V=F.j(C);k(F)&&(F=x),B=B.add(F),A=P(A,V)}return new D(B,A)}n.B=function(A){return U(this,A).h},n.and=function(A){const C=Math.max(this.g.length,A.g.length),N=[];for(let L=0;L<C;L++)N[L]=this.i(L)&A.i(L);return new c(N,this.h&A.h)},n.or=function(A){const C=Math.max(this.g.length,A.g.length),N=[];for(let L=0;L<C;L++)N[L]=this.i(L)|A.i(L);return new c(N,this.h|A.h)},n.xor=function(A){const C=Math.max(this.g.length,A.g.length),N=[];for(let L=0;L<C;L++)N[L]=this.i(L)^A.i(L);return new c(N,this.h^A.h)};function H(A){const C=A.g.length+1,N=[];for(let L=0;L<C;L++)N[L]=A.i(L)<<1|A.i(L-1)>>>31;return new c(N,A.h)}function K(A,C){const N=C>>5;C%=32;const L=A.g.length-N,B=[];for(let F=0;F<L;F++)B[F]=C>0?A.i(F+N)>>>C|A.i(F+N+1)<<32-C:A.i(F+N);return new c(B,A.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,L_=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=g,zs=c}).apply(typeof Qx<"u"?Qx:typeof self<"u"?self:typeof window<"u"?window:{});var Zd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var O_,Mc,B_,yh,fg,z_,F_,U_;(function(){var n,e=Object.defineProperty;function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Zd=="object"&&Zd];for(var b=0;b<f.length;++b){var _=f[b];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=t(this);function s(f,b){if(b)e:{var _=r;f=f.split(".");for(var R=0;R<f.length-1;R++){var G=f[R];if(!(G in _))break e;_=_[G]}f=f[f.length-1],R=_[f],b=b(R),b!=R&&b!=null&&e(_,f,{configurable:!0,writable:!0,value:b})}}s("Symbol.dispose",function(f){return f||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(f){return f||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(f){return f||function(b){var _=[],R;for(R in b)Object.prototype.hasOwnProperty.call(b,R)&&_.push([R,b[R]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function h(f){var b=typeof f;return b=="object"&&f!=null||b=="function"}function d(f,b,_){return f.call.apply(f.bind,arguments)}function m(f,b,_){return m=d,m.apply(null,arguments)}function g(f,b){var _=Array.prototype.slice.call(arguments,1);return function(){var R=_.slice();return R.push.apply(R,arguments),f.apply(this,R)}}function y(f,b){function _(){}_.prototype=b.prototype,f.Z=b.prototype,f.prototype=new _,f.prototype.constructor=f,f.Ob=function(R,G,J){for(var de=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)de[ze-2]=arguments[ze];return b.prototype[G].apply(R,de)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?f=>f&&AsyncContext.Snapshot.wrap(f):f=>f;function E(f){const b=f.length;if(b>0){const _=Array(b);for(let R=0;R<b;R++)_[R]=f[R];return _}return[]}function k(f,b){for(let R=1;R<arguments.length;R++){const G=arguments[R];var _=typeof G;if(_=_!="object"?_:G?Array.isArray(G)?"array":_:"null",_=="array"||_=="object"&&typeof G.length=="number"){_=f.length||0;const J=G.length||0;f.length=_+J;for(let de=0;de<J;de++)f[_+de]=G[de]}else f.push(G)}}class S{constructor(b,_){this.i=b,this.j=_,this.h=0,this.g=null}get(){let b;return this.h>0?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function T(f){c.setTimeout(()=>{throw f},0)}function P(){var f=A;let b=null;return f.g&&(b=f.g,f.g=f.g.next,f.g||(f.h=null),b.next=null),b}class M{constructor(){this.h=this.g=null}add(b,_){const R=D.get();R.set(b,_),this.h?this.h.next=R:this.g=R,this.h=R}}var D=new S(()=>new U,f=>f.reset());class U{constructor(){this.next=this.g=this.h=null}set(b,_){this.h=b,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let H,K=!1,A=new M,C=()=>{const f=Promise.resolve(void 0);H=()=>{f.then(N)}};function N(){for(var f;f=P();){try{f.h.call(f.g)}catch(_){T(_)}var b=D;b.j(f),b.h<100&&(b.h++,f.next=b.g,b.g=f)}K=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function B(f,b){this.type=f,this.g=this.target=b,this.defaultPrevented=!1}B.prototype.h=function(){this.defaultPrevented=!0};var F=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var f=!1,b=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const _=()=>{};c.addEventListener("test",_,b),c.removeEventListener("test",_,b)}catch{}return f})();function V(f){return/^[\s\xa0]*$/.test(f)}function Me(f,b){B.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f&&this.init(f,b)}y(Me,B),Me.prototype.init=function(f,b){const _=this.type=f.type,R=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;this.target=f.target||f.srcElement,this.g=b,b=f.relatedTarget,b||(_=="mouseover"?b=f.fromElement:_=="mouseout"&&(b=f.toElement)),this.relatedTarget=b,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=f.pointerType,this.state=f.state,this.i=f,f.defaultPrevented&&Me.Z.h.call(this)},Me.prototype.h=function(){Me.Z.h.call(this);const f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var We="closure_listenable_"+(Math.random()*1e6|0),st=0;function Ie(f,b,_,R,G){this.listener=f,this.proxy=null,this.src=b,this.type=_,this.capture=!!R,this.ha=G,this.key=++st,this.da=this.fa=!1}function re(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function me(f,b,_){for(const R in f)b.call(_,f[R],R,f)}function ue(f,b){for(const _ in f)b.call(void 0,f[_],_,f)}function $(f){const b={};for(const _ in f)b[_]=f[_];return b}const te="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function je(f,b){let _,R;for(let G=1;G<arguments.length;G++){R=arguments[G];for(_ in R)f[_]=R[_];for(let J=0;J<te.length;J++)_=te[J],Object.prototype.hasOwnProperty.call(R,_)&&(f[_]=R[_])}}function Ce(f){this.src=f,this.g={},this.h=0}Ce.prototype.add=function(f,b,_,R,G){const J=f.toString();f=this.g[J],f||(f=this.g[J]=[],this.h++);const de=Be(f,b,R,G);return de>-1?(b=f[de],_||(b.fa=!1)):(b=new Ie(b,this.src,J,!!R,G),b.fa=_,f.push(b)),b};function Ve(f,b){const _=b.type;if(_ in f.g){var R=f.g[_],G=Array.prototype.indexOf.call(R,b,void 0),J;(J=G>=0)&&Array.prototype.splice.call(R,G,1),J&&(re(b),f.g[_].length==0&&(delete f.g[_],f.h--))}}function Be(f,b,_,R){for(let G=0;G<f.length;++G){const J=f[G];if(!J.da&&J.listener==b&&J.capture==!!_&&J.ha==R)return G}return-1}var se="closure_lm_"+(Math.random()*1e6|0),Q={};function fe(f,b,_,R,G){if(Array.isArray(b)){for(let J=0;J<b.length;J++)fe(f,b[J],_,R,G);return null}return _=Wr(_),f&&f[We]?f.J(b,_,h(R)?!!R.capture:!1,G):Ke(f,b,_,!1,R,G)}function Ke(f,b,_,R,G,J){if(!b)throw Error("Invalid event type");const de=h(G)?!!G.capture:!!G;let ze=ot(f);if(ze||(f[se]=ze=new Ce(f)),_=ze.add(b,_,R,de,J),_.proxy)return _;if(R=xt(),_.proxy=R,R.src=f,R.listener=_,f.addEventListener)F||(G=de),G===void 0&&(G=!1),f.addEventListener(b.toString(),R,G);else if(f.attachEvent)f.attachEvent(Le(b.toString()),R);else if(f.addListener&&f.removeListener)f.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return _}function xt(){function f(_){return b.call(f.src,f.listener,_)}const b=Ue;return f}function Z(f,b,_,R,G){if(Array.isArray(b))for(var J=0;J<b.length;J++)Z(f,b[J],_,R,G);else R=h(R)?!!R.capture:!!R,_=Wr(_),f&&f[We]?(f=f.i,J=String(b).toString(),J in f.g&&(b=f.g[J],_=Be(b,_,R,G),_>-1&&(re(b[_]),Array.prototype.splice.call(b,_,1),b.length==0&&(delete f.g[J],f.h--)))):f&&(f=ot(f))&&(b=f.g[b.toString()],f=-1,b&&(f=Be(b,_,R,G)),(_=f>-1?b[f]:null)&&ye(_))}function ye(f){if(typeof f!="number"&&f&&!f.da){var b=f.src;if(b&&b[We])Ve(b.i,f);else{var _=f.type,R=f.proxy;b.removeEventListener?b.removeEventListener(_,R,f.capture):b.detachEvent?b.detachEvent(Le(_),R):b.addListener&&b.removeListener&&b.removeListener(R),(_=ot(b))?(Ve(_,f),_.h==0&&(_.src=null,b[se]=null)):re(f)}}}function Le(f){return f in Q?Q[f]:Q[f]="on"+f}function Ue(f,b){if(f.da)f=!0;else{b=new Me(b,this);const _=f.listener,R=f.ha||f.src;f.fa&&ye(f),f=_.call(R,b)}return f}function ot(f){return f=f[se],f instanceof Ce?f:null}var Qt="__closure_events_fn_"+(Math.random()*1e9>>>0);function Wr(f){return typeof f=="function"?f:(f[Qt]||(f[Qt]=function(b){return f.handleEvent(b)}),f[Qt])}function dt(){L.call(this),this.i=new Ce(this),this.M=this,this.G=null}y(dt,L),dt.prototype[We]=!0,dt.prototype.removeEventListener=function(f,b,_,R){Z(this,f,b,_,R)};function ht(f,b){var _,R=f.G;if(R)for(_=[];R;R=R.G)_.push(R);if(f=f.M,R=b.type||b,typeof b=="string")b=new B(b,f);else if(b instanceof B)b.target=b.target||f;else{var G=b;b=new B(R,f),je(b,G)}G=!0;let J,de;if(_)for(de=_.length-1;de>=0;de--)J=b.g=_[de],G=xr(J,R,!0,b)&&G;if(J=b.g=f,G=xr(J,R,!0,b)&&G,G=xr(J,R,!1,b)&&G,_)for(de=0;de<_.length;de++)J=b.g=_[de],G=xr(J,R,!1,b)&&G}dt.prototype.N=function(){if(dt.Z.N.call(this),this.i){var f=this.i;for(const b in f.g){const _=f.g[b];for(let R=0;R<_.length;R++)re(_[R]);delete f.g[b],f.h--}}this.G=null},dt.prototype.J=function(f,b,_,R){return this.i.add(String(f),b,!1,_,R)},dt.prototype.K=function(f,b,_,R){return this.i.add(String(f),b,!0,_,R)};function xr(f,b,_,R){if(b=f.i.g[String(b)],!b)return!0;b=b.concat();let G=!0;for(let J=0;J<b.length;++J){const de=b[J];if(de&&!de.da&&de.capture==_){const ze=de.listener,At=de.ha||de.src;de.fa&&Ve(f.i,de),G=ze.call(At,R)!==!1&&G}}return G&&!R.defaultPrevented}function Ml(f,b){if(typeof f!="function")if(f&&typeof f.handleEvent=="function")f=m(f.handleEvent,f);else throw Error("Invalid listener argument");return Number(b)>2147483647?-1:c.setTimeout(f,b||0)}function Vl(f){f.g=Ml(()=>{f.g=null,f.i&&(f.i=!1,Vl(f))},f.l);const b=f.h;f.h=null,f.m.apply(null,b)}class Vu extends L{constructor(b,_){super(),this.m=b,this.l=_,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:Vl(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ts(f){L.call(this),this.h=f,this.g={}}y(ts,L);var Ll=[];function ra(f){me(f.g,function(b,_){this.g.hasOwnProperty(_)&&ye(b)},f),f.g={}}ts.prototype.N=function(){ts.Z.N.call(this),ra(this)},ts.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ns=c.JSON.stringify,Lu=c.JSON.parse,ao=class{stringify(f){return c.JSON.stringify(f,void 0)}parse(f){return c.JSON.parse(f,void 0)}};function rs(){}function Ou(){}var is={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ia(){B.call(this,"d")}y(ia,B);function Ol(){B.call(this,"c")}y(Ol,B);var wr={},sa=null;function ss(){return sa=sa||new dt}wr.Ia="serverreachability";function oa(f){B.call(this,wr.Ia,f)}y(oa,B);function yi(f){const b=ss();ht(b,new oa(b))}wr.STAT_EVENT="statevent";function vi(f,b){B.call(this,wr.STAT_EVENT,f),this.stat=b}y(vi,B);function Tt(f){const b=ss();ht(b,new vi(b,f))}wr.Ja="timingevent";function Bl(f,b){B.call(this,wr.Ja,f),this.size=b}y(Bl,B);function os(f,b){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){f()},b)}function as(){this.g=!0}as.prototype.ua=function(){this.g=!1};function Bu(f,b,_,R,G,J){f.info(function(){if(f.g)if(J){var de="",ze=J.split("&");for(let it=0;it<ze.length;it++){var At=ze[it].split("=");if(At.length>1){const Lt=At[0];At=At[1];const Hn=Lt.split("_");de=Hn.length>=2&&Hn[1]=="type"?de+(Lt+"="+At+"&"):de+(Lt+"=redacted&")}}}else de=null;else de=J;return"XMLHTTP REQ ("+R+") [attempt "+G+"]: "+b+`
`+_+`
`+de})}function zu(f,b,_,R,G,J,de){f.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+G+"]: "+b+`
`+_+`
`+J+" "+de})}function $r(f,b,_,R){f.info(function(){return"XMLHTTP TEXT ("+b+"): "+lo(f,_)+(R?" "+R:"")})}function Fu(f,b){f.info(function(){return"TIMEOUT: "+b})}as.prototype.info=function(){};function lo(f,b){if(!f.g)return b;if(!b)return null;try{const J=JSON.parse(b);if(J){for(f=0;f<J.length;f++)if(Array.isArray(J[f])){var _=J[f];if(!(_.length<2)){var R=_[1];if(Array.isArray(R)&&!(R.length<1)){var G=R[0];if(G!="noop"&&G!="stop"&&G!="close")for(let de=1;de<R.length;de++)R[de]=""}}}}return ns(J)}catch{return b}}var ls={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},cs={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Uu;function xi(){}y(xi,rs),xi.prototype.g=function(){return new XMLHttpRequest},Uu=new xi;function Hr(f){return encodeURIComponent(String(f))}function aa(f){var b=1;f=f.split(":");const _=[];for(;b>0&&f.length;)_.push(f.shift()),b--;return f.length&&_.push(f.join(":")),_}function er(f,b,_,R){this.j=f,this.i=b,this.l=_,this.S=R||1,this.V=new ts(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Wu}function Wu(){this.i=null,this.g="",this.h=!1}var $u={},zl={};function br(f,b,_){f.M=1,f.A=bi(tr(b)),f.u=_,f.R=!0,Fl(f,null)}function Fl(f,b){f.F=Date.now(),co(f),f.B=tr(f.A);var _=f.B,R=f.S;Array.isArray(R)||(R=[String(R)]),Xl(_.i,"t",R),f.C=0,_=f.j.L,f.h=new Wu,f.g=ed(f.j,_?b:null,!f.u),f.P>0&&(f.O=new Vu(m(f.Y,f,f.g),f.P)),b=f.V,_=f.g,R=f.ba;var G="readystatechange";Array.isArray(G)||(G&&(Ll[0]=G.toString()),G=Ll);for(let J=0;J<G.length;J++){const de=fe(_,G[J],R||b.handleEvent,!1,b.h||b);if(!de)break;b.g[de.key]=de}b=f.J?$(f.J):{},f.u?(f.v||(f.v="POST"),b["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.B,f.v,f.u,b)):(f.v="GET",f.g.ea(f.B,f.v,null,b)),yi(),Bu(f.i,f.v,f.B,f.l,f.S,f.u)}er.prototype.ba=function(f){f=f.target;const b=this.O;b&&Jr(f)==3?b.j():this.Y(f)},er.prototype.Y=function(f){try{if(f==this.g)e:{const ze=Jr(this.g),At=this.g.ya(),it=this.g.ca();if(!(ze<3)&&(ze!=3||this.g&&(this.h.h||this.g.la()||Ju(this.g)))){this.K||ze!=4||At==7||(At==8||it<=0?yi(3):yi(2)),la(this);var b=this.g.ca();this.X=b;var _=Hu(this);if(this.o=b==200,zu(this.i,this.v,this.B,this.l,this.S,ze,b),this.o){if(this.U&&!this.L){t:{if(this.g){var R,G=this.g;if((R=G.g?G.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(R)){var J=R;break t}}J=null}if(f=J)$r(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ft(this,f);else{this.o=!1,this.m=3,Tt(12),wi(this),uo(this);break e}}if(this.R){f=!0;let Lt;for(;!this.K&&this.C<_.length;)if(Lt=qu(this,_),Lt==zl){ze==4&&(this.m=4,Tt(14),f=!1),$r(this.i,this.l,null,"[Incomplete Response]");break}else if(Lt==$u){this.m=4,Tt(15),$r(this.i,this.l,_,"[Invalid Chunk]"),f=!1;break}else $r(this.i,this.l,Lt,null),ft(this,Lt);if(Ku(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ze!=4||_.length!=0||this.h.h||(this.m=1,Tt(16),f=!1),this.o=this.o&&f,!f)$r(this.i,this.l,_,"[Invalid Chunked Response]"),wi(this),uo(this);else if(_.length>0&&!this.W){this.W=!0;var de=this.j;de.g==this&&de.aa&&!de.P&&(de.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),wo(de),de.P=!0,Tt(11))}}else $r(this.i,this.l,_,null),ft(this,_);ze==4&&wi(this),this.o&&!this.K&&(ze==4?va(this.j,this):(this.o=!1,co(this)))}else Zl(this.g),b==400&&_.indexOf("Unknown SID")>0?(this.m=3,Tt(12)):(this.m=0,Tt(13)),wi(this),uo(this)}}}catch{}finally{}};function Hu(f){if(!Ku(f))return f.g.la();const b=Ju(f.g);if(b==="")return"";let _="";const R=b.length,G=Jr(f.g)==4;if(!f.h.i){if(typeof TextDecoder>"u")return wi(f),uo(f),"";f.h.i=new c.TextDecoder}for(let J=0;J<R;J++)f.h.h=!0,_+=f.h.i.decode(b[J],{stream:!(G&&J==R-1)});return b.length=0,f.h.g+=_,f.C=0,f.h.g}function Ku(f){return f.g?f.v=="GET"&&f.M!=2&&f.j.Aa:!1}function qu(f,b){var _=f.C,R=b.indexOf(`
`,_);return R==-1?zl:(_=Number(b.substring(_,R)),isNaN(_)?$u:(R+=1,R+_>b.length?zl:(b=b.slice(R,R+_),f.C=R+_,b)))}er.prototype.cancel=function(){this.K=!0,wi(this)};function co(f){f.T=Date.now()+f.H,Ul(f,f.H)}function Ul(f,b){if(f.D!=null)throw Error("WatchDog timer not null");f.D=os(m(f.aa,f),b)}function la(f){f.D&&(c.clearTimeout(f.D),f.D=null)}er.prototype.aa=function(){this.D=null;const f=Date.now();f-this.T>=0?(Fu(this.i,this.B),this.M!=2&&(yi(),Tt(17)),wi(this),this.m=2,uo(this)):Ul(this,this.T-f)};function uo(f){f.j.I==0||f.K||va(f.j,f)}function wi(f){la(f);var b=f.O;b&&typeof b.dispose=="function"&&b.dispose(),f.O=null,ra(f.V),f.g&&(b=f.g,f.g=null,b.abort(),b.dispose())}function ft(f,b){try{var _=f.j;if(_.I!=0&&(_.g==f||$l(_.h,f))){if(!f.L&&$l(_.h,f)&&_.I==3){try{var R=_.Ba.g.parse(b)}catch{R=null}if(Array.isArray(R)&&R.length==3){var G=R;if(G[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<f.F)ya(_),Wn(_);else break e;ti(_),Tt(18)}}else _.xa=G[1],0<_.xa-_.K&&G[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=os(m(_.Va,_),6e3));ho(_.h)<=1&&_.ta&&(_.ta=void 0)}else $n(_,11)}else if((f.L||_.g==f)&&ya(_),!V(b))for(G=_.Ba.g.parse(b),b=0;b<G.length;b++){let it=G[b];const Lt=it[0];if(!(Lt<=_.K))if(_.K=Lt,it=it[1],_.I==2)if(it[0]=="c"){_.M=it[1],_.ba=it[2];const Hn=it[3];Hn!=null&&(_.ka=Hn,_.j.info("VER="+_.ka));const Ti=it[4];Ti!=null&&(_.za=Ti,_.j.info("SVER="+_.za));const ni=it[5];ni!=null&&typeof ni=="number"&&ni>0&&(R=1.5*ni,_.O=R,_.j.info("backChannelRequestTimeoutMs_="+R)),R=_;const ri=f.g;if(ri){const ba=ri.g?ri.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ba){var J=R.h;J.g||ba.indexOf("spdy")==-1&&ba.indexOf("quic")==-1&&ba.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(ua(J,J.h),J.h=null))}if(R.G){const nc=ri.g?ri.g.getResponseHeader("X-HTTP-Session-Id"):null;nc&&(R.wa=nc,nt(R.J,R.G,nc))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-f.F,_.j.info("Handshake RTT: "+_.T+"ms")),R=_;var de=f;if(R.na=tc(R,R.L?R.ba:null,R.W),de.L){fo(R.h,de);var ze=de,At=R.O;At&&(ze.H=At),ze.D&&(la(ze),co(ze)),R.g=de}else dn(R);_.i.length>0&&Ei(_)}else it[0]!="stop"&&it[0]!="close"||$n(_,7);else _.I==3&&(it[0]=="stop"||it[0]=="close"?it[0]=="stop"?$n(_,7):pa(_):it[0]!="noop"&&_.l&&_.l.qa(it),_.A=0)}}yi(4)}catch{}}var Wf=class{constructor(f,b){this.g=f,this.map=b}};function ca(f){this.l=f||10,c.PerformanceNavigationTiming?(f=c.performance.getEntriesByType("navigation"),f=f.length>0&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Wl(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function ho(f){return f.h?1:f.g?f.g.size:0}function $l(f,b){return f.h?f.h==b:f.g?f.g.has(b):!1}function ua(f,b){f.g?f.g.add(b):f.h=b}function fo(f,b){f.h&&f.h==b?f.h=null:f.g&&f.g.has(b)&&f.g.delete(b)}ca.prototype.cancel=function(){if(this.i=zn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function zn(f){if(f.h!=null)return f.i.concat(f.h.G);if(f.g!=null&&f.g.size!==0){let b=f.i;for(const _ of f.g.values())b=b.concat(_.G);return b}return E(f.i)}var Gu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Fn(f,b){if(f){f=f.split("&");for(let _=0;_<f.length;_++){const R=f[_].indexOf("=");let G,J=null;R>=0?(G=f[_].substring(0,R),J=f[_].substring(R+1)):G=f[_],b(G,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function Kr(f){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let b;f instanceof Kr?(this.l=f.l,mo(this,f.j),this.o=f.o,this.g=f.g,qr(this,f.u),this.h=f.h,us(this,Jl(f.i)),this.m=f.m):f&&(b=String(f).match(Gu))?(this.l=!1,mo(this,b[1]||"",!0),this.o=po(b[2]||""),this.g=po(b[3]||"",!0),qr(this,b[4]),this.h=po(b[5]||"",!0),us(this,b[6]||"",!0),this.m=po(b[7]||"")):(this.l=!1,this.i=new Ye(null,this.l))}Kr.prototype.toString=function(){const f=[];var b=this.j;b&&f.push(go(b,Kl,!0),":");var _=this.g;return(_||b=="file")&&(f.push("//"),(b=this.o)&&f.push(go(b,Kl,!0),"@"),f.push(Hr(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&f.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&f.push("/"),f.push(go(_,_.charAt(0)=="/"?yo:ql,!0))),(_=this.i.toString())&&f.push("?",_),(_=this.m)&&f.push("#",go(_,Gl)),f.join("")},Kr.prototype.resolve=function(f){const b=tr(this);let _=!!f.j;_?mo(b,f.j):_=!!f.o,_?b.o=f.o:_=!!f.g,_?b.g=f.g:_=f.u!=null;var R=f.h;if(_)qr(b,f.u);else if(_=!!f.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var G=b.h.lastIndexOf("/");G!=-1&&(R=b.h.slice(0,G+1)+R)}if(G=R,G==".."||G==".")R="";else if(G.indexOf("./")!=-1||G.indexOf("/.")!=-1){R=G.lastIndexOf("/",0)==0,G=G.split("/");const J=[];for(let de=0;de<G.length;){const ze=G[de++];ze=="."?R&&de==G.length&&J.push(""):ze==".."?((J.length>1||J.length==1&&J[0]!="")&&J.pop(),R&&de==G.length&&J.push("")):(J.push(ze),R=!0)}R=J.join("/")}else R=G}return _?b.h=R:_=f.i.toString()!=="",_?us(b,Jl(f.i)):_=!!f.m,_&&(b.m=f.m),b};function tr(f){return new Kr(f)}function mo(f,b,_){f.j=_?po(b,!0):b,f.j&&(f.j=f.j.replace(/:$/,""))}function qr(f,b){if(b){if(b=Number(b),isNaN(b)||b<0)throw Error("Bad port number "+b);f.u=b}else f.u=null}function us(f,b,_){b instanceof Ye?(f.i=b,ha(f.i,f.l)):(_||(b=go(b,$f)),f.i=new Ye(b,f.l))}function nt(f,b,_){f.i.set(b,_)}function bi(f){return nt(f,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),f}function po(f,b){return f?b?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function go(f,b,_){return typeof f=="string"?(f=encodeURI(f).replace(b,Hl),_&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Hl(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Kl=/[#\/\?@]/g,ql=/[#\?:]/g,yo=/[#\?]/g,$f=/[#\?@]/g,Gl=/#/g;function Ye(f,b){this.h=this.g=null,this.i=f||null,this.j=!!b}function Gr(f){f.g||(f.g=new Map,f.h=0,f.i&&Fn(f.i,function(b,_){f.add(decodeURIComponent(b.replace(/\+/g," ")),_)}))}n=Ye.prototype,n.add=function(f,b){Gr(this),this.i=null,f=Qr(this,f);let _=this.g.get(f);return _||this.g.set(f,_=[]),_.push(b),this.h+=1,this};function Ql(f,b){Gr(f),b=Qr(f,b),f.g.has(b)&&(f.i=null,f.h-=f.g.get(b).length,f.g.delete(b))}function da(f,b){return Gr(f),b=Qr(f,b),f.g.has(b)}n.forEach=function(f,b){Gr(this),this.g.forEach(function(_,R){_.forEach(function(G){f.call(b,G,R,this)},this)},this)};function Yl(f,b){Gr(f);let _=[];if(typeof b=="string")da(f,b)&&(_=_.concat(f.g.get(Qr(f,b))));else for(f=Array.from(f.g.values()),b=0;b<f.length;b++)_=_.concat(f[b]);return _}n.set=function(f,b){return Gr(this),this.i=null,f=Qr(this,f),da(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[b]),this.h+=1,this},n.get=function(f,b){return f?(f=Yl(this,f),f.length>0?String(f[0]):b):b};function Xl(f,b,_){Ql(f,b),_.length>0&&(f.i=null,f.g.set(Qr(f,b),E(_)),f.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],b=Array.from(this.g.keys());for(let R=0;R<b.length;R++){var _=b[R];const G=Hr(_);_=Yl(this,_);for(let J=0;J<_.length;J++){let de=G;_[J]!==""&&(de+="="+Hr(_[J])),f.push(de)}}return this.i=f.join("&")};function Jl(f){const b=new Ye;return b.i=f.i,f.g&&(b.g=new Map(f.g),b.h=f.h),b}function Qr(f,b){return b=String(b),f.j&&(b=b.toLowerCase()),b}function ha(f,b){b&&!f.j&&(Gr(f),f.i=null,f.g.forEach(function(_,R){const G=R.toLowerCase();R!=G&&(Ql(this,R),Xl(this,G,_))},f)),f.j=b}function Yr(f,b){const _=new as;if(c.Image){const R=new Image;R.onload=g(tn,_,"TestLoadImage: loaded",!0,b,R),R.onerror=g(tn,_,"TestLoadImage: error",!1,b,R),R.onabort=g(tn,_,"TestLoadImage: abort",!1,b,R),R.ontimeout=g(tn,_,"TestLoadImage: timeout",!1,b,R),c.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=f}else b(!1)}function Xr(f,b){const _=new as,R=new AbortController,G=setTimeout(()=>{R.abort(),tn(_,"TestPingServer: timeout",!1,b)},1e4);fetch(f,{signal:R.signal}).then(J=>{clearTimeout(G),J.ok?tn(_,"TestPingServer: ok",!0,b):tn(_,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(G),tn(_,"TestPingServer: error",!1,b)})}function tn(f,b,_,R,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),R(_)}catch{}}function vo(){this.g=new ao}function ki(f){this.i=f.Sb||null,this.h=f.ab||!1}y(ki,rs),ki.prototype.g=function(){return new Un(this.i,this.h)};function Un(f,b){dt.call(this),this.H=f,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}y(Un,dt),n=Un.prototype,n.open=function(f,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=f,this.D=b,this.readyState=1,kr(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const b={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};f&&(b.body=f),(this.H||c).fetch(new Request(this.D,b)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ds(this)),this.readyState=0},n.Pa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,kr(this)),this.g&&(this.readyState=3,kr(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Qu(this)}else f.text().then(this.Oa.bind(this),this.ga.bind(this))};function Qu(f){f.j.read().then(f.Ma.bind(f)).catch(f.ga.bind(f))}n.Ma=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var b=f.value?f.value:new Uint8Array(0);(b=this.B.decode(b,{stream:!f.done}))&&(this.response=this.responseText+=b)}f.done?ds(this):kr(this),this.readyState==3&&Qu(this)}},n.Oa=function(f){this.g&&(this.response=this.responseText=f,ds(this))},n.Na=function(f){this.g&&(this.response=f,ds(this))},n.ga=function(){this.g&&ds(this)};function ds(f){f.readyState=4,f.l=null,f.j=null,f.B=null,kr(f)}n.setRequestHeader=function(f,b){this.A.append(f,b)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],b=this.h.entries();for(var _=b.next();!_.done;)_=_.value,f.push(_[0]+": "+_[1]),_=b.next();return f.join(`\r
`)};function kr(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Un.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Yu(f){let b="";return me(f,function(_,R){b+=R,b+=":",b+=_,b+=`\r
`}),b}function fa(f,b,_){e:{for(R in _){var R=!1;break e}R=!0}R||(_=Yu(_),typeof f=="string"?_!=null&&Hr(_):nt(f,b,_))}function at(f){dt.call(this),this.headers=new Map,this.L=f||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}y(at,dt);var Xu=/^https?$/i,Hf=["POST","PUT"];n=at.prototype,n.Fa=function(f){this.H=f},n.ea=function(f,b,_,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);b=b?b.toUpperCase():"GET",this.D=f,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Uu.g(),this.g.onreadystatechange=x(m(this.Ca,this));try{this.B=!0,this.g.open(b,String(f),!0),this.B=!1}catch(J){hs(this,J);return}if(f=_||"",_=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var G in R)_.set(G,R[G]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const J of R.keys())_.set(J,R.get(J));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(_.keys()).find(J=>J.toLowerCase()=="content-type"),G=c.FormData&&f instanceof c.FormData,!(Array.prototype.indexOf.call(Hf,b,void 0)>=0)||R||G||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,de]of _)this.g.setRequestHeader(J,de);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(f),this.v=!1}catch(J){hs(this,J)}};function hs(f,b){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=b,f.o=5,fs(f),Si(f)}function fs(f){f.A||(f.A=!0,ht(f,"complete"),ht(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=f||7,ht(this,"complete"),ht(this,"abort"),Si(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Si(this,!0)),at.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?_i(this):this.Xa())},n.Xa=function(){_i(this)};function _i(f){if(f.h&&typeof l<"u"){if(f.v&&Jr(f)==4)setTimeout(f.Ca.bind(f),0);else if(ht(f,"readystatechange"),Jr(f)==4){f.h=!1;try{const J=f.ca();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var _;if(!(_=b)){var R;if(R=J===0){let de=String(f.D).match(Gu)[1]||null;!de&&c.self&&c.self.location&&(de=c.self.location.protocol.slice(0,-1)),R=!Xu.test(de?de.toLowerCase():"")}_=R}if(_)ht(f,"complete"),ht(f,"success");else{f.o=6;try{var G=Jr(f)>2?f.g.statusText:""}catch{G=""}f.l=G+" ["+f.ca()+"]",fs(f)}}finally{Si(f)}}}}function Si(f,b){if(f.g){f.m&&(clearTimeout(f.m),f.m=null);const _=f.g;f.g=null,b||ht(f,"ready");try{_.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Jr(f){return f.g?f.g.readyState:0}n.ca=function(){try{return Jr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(f){if(this.g){var b=this.g.responseText;return f&&b.indexOf(f)==0&&(b=b.substring(f.length)),Lu(b)}};function Ju(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.F){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Zl(f){const b={};f=(f.g&&Jr(f)>=2&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<f.length;R++){if(V(f[R]))continue;var _=aa(f[R]);const G=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const J=b[G]||[];b[G]=J,J.push(_)}ue(b,function(R){return R.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Zr(f,b,_){return _&&_.internalChannelParams&&_.internalChannelParams[f]||b}function ma(f){this.za=0,this.i=[],this.j=new as,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Zr("failFast",!1,f),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Zr("baseRetryDelayMs",5e3,f),this.Za=Zr("retryDelaySeedMs",1e4,f),this.Ta=Zr("forwardChannelMaxRetries",2,f),this.va=Zr("forwardChannelRequestTimeoutMs",2e4,f),this.ma=f&&f.xmlHttpFactory||void 0,this.Ua=f&&f.Rb||void 0,this.Aa=f&&f.useFetchStreams||!1,this.O=void 0,this.L=f&&f.supportsCrossDomainXhr||!1,this.M="",this.h=new ca(f&&f.concurrentRequestLimit),this.Ba=new vo,this.S=f&&f.fastHandshake||!1,this.R=f&&f.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=f&&f.Pb||!1,f&&f.ua&&this.j.ua(),f&&f.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&f&&f.detectBufferingProxy||!1,this.ia=void 0,f&&f.longPollingTimeout&&f.longPollingTimeout>0&&(this.ia=f.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=ma.prototype,n.ka=8,n.I=1,n.connect=function(f,b,_,R){Tt(0),this.W=f,this.H=b||{},_&&R!==void 0&&(this.H.OSID=_,this.H.OAID=R),this.F=this.X,this.J=tc(this,null,this.W),Ei(this)};function pa(f){if(ga(f),f.I==3){var b=f.V++,_=tr(f.J);if(nt(_,"SID",f.M),nt(_,"RID",b),nt(_,"TYPE","terminate"),ei(f,_),b=new er(f,f.j,b),b.M=2,b.A=bi(tr(_)),_=!1,c.navigator&&c.navigator.sendBeacon)try{_=c.navigator.sendBeacon(b.A.toString(),"")}catch{}!_&&c.Image&&(new Image().src=b.A,_=!0),_||(b.g=ed(b.j,null),b.g.ea(b.A)),b.F=Date.now(),co(b)}bo(f)}function Wn(f){f.g&&(wo(f),f.g.cancel(),f.g=null)}function ga(f){Wn(f),f.v&&(c.clearTimeout(f.v),f.v=null),ya(f),f.h.cancel(),f.m&&(typeof f.m=="number"&&c.clearTimeout(f.m),f.m=null)}function Ei(f){if(!Wl(f.h)&&!f.m){f.m=!0;var b=f.Ea;H||C(),K||(H(),K=!0),A.add(b,f),f.D=0}}function Zu(f,b){return ho(f.h)>=f.h.j-(f.m?1:0)?!1:f.m?(f.i=b.G.concat(f.i),!0):f.I==1||f.I==2||f.D>=(f.Sa?0:f.Ta)?!1:(f.m=os(m(f.Ea,f,b),xa(f,f.D)),f.D++,!0)}n.Ea=function(f){if(this.m)if(this.m=null,this.I==1){if(!f){this.V=Math.floor(Math.random()*1e5),f=this.V++;const G=new er(this,this.j,f);let J=this.o;if(this.U&&(J?(J=$(J),je(J,this.U)):J=this.U),this.u!==null||this.R||(G.J=J,J=null),this.S)e:{for(var b=0,_=0;_<this.i.length;_++){t:{var R=this.i[_];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(b+=R,b>4096){b=_;break e}if(b===4096||_===this.i.length-1){b=_+1;break e}}b=1e3}else b=1e3;b=ec(this,G,b),_=tr(this.J),nt(_,"RID",f),nt(_,"CVER",22),this.G&&nt(_,"X-HTTP-Session-Id",this.G),ei(this,_),J&&(this.R?b="headers="+Hr(Yu(J))+"&"+b:this.u&&fa(_,this.u,J)),ua(this.h,G),this.Ra&&nt(_,"TYPE","init"),this.S?(nt(_,"$req",b),nt(_,"SID","null"),G.U=!0,br(G,_,null)):br(G,_,b),this.I=2}}else this.I==3&&(f?xo(this,f):this.i.length==0||Wl(this.h)||xo(this))};function xo(f,b){var _;b?_=b.l:_=f.V++;const R=tr(f.J);nt(R,"SID",f.M),nt(R,"RID",_),nt(R,"AID",f.K),ei(f,R),f.u&&f.o&&fa(R,f.u,f.o),_=new er(f,f.j,_,f.D+1),f.u===null&&(_.J=f.o),b&&(f.i=b.G.concat(f.i)),b=ec(f,_,1e3),_.H=Math.round(f.va*.5)+Math.round(f.va*.5*Math.random()),ua(f.h,_),br(_,R,b)}function ei(f,b){f.H&&me(f.H,function(_,R){nt(b,R,_)}),f.l&&me({},function(_,R){nt(b,R,_)})}function ec(f,b,_){_=Math.min(f.i.length,_);const R=f.l?m(f.l.Ka,f.l,f):null;e:{var G=f.i;let ze=-1;for(;;){const At=["count="+_];ze==-1?_>0?(ze=G[0].g,At.push("ofs="+ze)):ze=0:At.push("ofs="+ze);let it=!0;for(let Lt=0;Lt<_;Lt++){var J=G[Lt].g;const Hn=G[Lt].map;if(J-=ze,J<0)ze=Math.max(0,G[Lt].g-100),it=!1;else try{J="req"+J+"_"||"";try{var de=Hn instanceof Map?Hn:Object.entries(Hn);for(const[Ti,ni]of de){let ri=ni;h(ni)&&(ri=ns(ni)),At.push(J+Ti+"="+encodeURIComponent(ri))}}catch(Ti){throw At.push(J+"type="+encodeURIComponent("_badmap")),Ti}}catch{R&&R(Hn)}}if(it){de=At.join("&");break e}}de=void 0}return f=f.i.splice(0,_),b.G=f,de}function dn(f){if(!f.g&&!f.v){f.Y=1;var b=f.Da;H||C(),K||(H(),K=!0),A.add(b,f),f.A=0}}function ti(f){return f.g||f.v||f.A>=3?!1:(f.Y++,f.v=os(m(f.Da,f),xa(f,f.A)),f.A++,!0)}n.Da=function(){if(this.v=null,ms(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var f=4*this.T;this.j.info("BP detection timer enabled: "+f),this.B=os(m(this.Wa,this),f)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Tt(10),Wn(this),ms(this))};function wo(f){f.B!=null&&(c.clearTimeout(f.B),f.B=null)}function ms(f){f.g=new er(f,f.j,"rpc",f.Y),f.u===null&&(f.g.J=f.o),f.g.P=0;var b=tr(f.na);nt(b,"RID","rpc"),nt(b,"SID",f.M),nt(b,"AID",f.K),nt(b,"CI",f.F?"0":"1"),!f.F&&f.ia&&nt(b,"TO",f.ia),nt(b,"TYPE","xmlhttp"),ei(f,b),f.u&&f.o&&fa(b,f.u,f.o),f.O&&(f.g.H=f.O);var _=f.g;f=f.ba,_.M=1,_.A=bi(tr(b)),_.u=null,_.R=!0,Fl(_,f)}n.Va=function(){this.C!=null&&(this.C=null,Wn(this),ti(this),Tt(19))};function ya(f){f.C!=null&&(c.clearTimeout(f.C),f.C=null)}function va(f,b){var _=null;if(f.g==b){ya(f),wo(f),f.g=null;var R=2}else if($l(f.h,b))_=b.G,fo(f.h,b),R=1;else return;if(f.I!=0){if(b.o)if(R==1){_=b.u?b.u.length:0,b=Date.now()-b.F;var G=f.D;R=ss(),ht(R,new Bl(R,_)),Ei(f)}else dn(f);else if(G=b.m,G==3||G==0&&b.X>0||!(R==1&&Zu(f,b)||R==2&&ti(f)))switch(_&&_.length>0&&(b=f.h,b.i=b.i.concat(_)),G){case 1:$n(f,5);break;case 4:$n(f,10);break;case 3:$n(f,6);break;default:$n(f,2)}}}function xa(f,b){let _=f.Qa+Math.floor(Math.random()*f.Za);return f.isActive()||(_*=2),_*b}function $n(f,b){if(f.j.info("Error code "+b),b==2){var _=m(f.bb,f),R=f.Ua;const G=!R;R=new Kr(R||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||mo(R,"https"),bi(R),G?Yr(R.toString(),_):Xr(R.toString(),_)}else Tt(2);f.I=0,f.l&&f.l.pa(b),bo(f),ga(f)}n.bb=function(f){f?(this.j.info("Successfully pinged google.com"),Tt(2)):(this.j.info("Failed to ping google.com"),Tt(1))};function bo(f){if(f.I=0,f.ja=[],f.l){const b=zn(f.h);(b.length!=0||f.i.length!=0)&&(k(f.ja,b),k(f.ja,f.i),f.h.i.length=0,E(f.i),f.i.length=0),f.l.oa()}}function tc(f,b,_){var R=_ instanceof Kr?tr(_):new Kr(_);if(R.g!="")b&&(R.g=b+"."+R.g),qr(R,R.u);else{var G=c.location;R=G.protocol,b=b?b+"."+G.hostname:G.hostname,G=+G.port;const J=new Kr(null);R&&mo(J,R),b&&(J.g=b),G&&qr(J,G),_&&(J.h=_),R=J}return _=f.G,b=f.wa,_&&b&&nt(R,_,b),nt(R,"VER",f.ka),ei(f,R),R}function ed(f,b,_){if(b&&!f.L)throw Error("Can't create secondary domain capable XhrIo object.");return b=f.Aa&&!f.ma?new at(new ki({ab:_})):new at(f.ma),b.Fa(f.L),b}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function td(){}n=td.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function wa(){}wa.prototype.g=function(f,b){return new nn(f,b)};function nn(f,b){dt.call(this),this.g=new ma(b),this.l=f,this.h=b&&b.messageUrlParams||null,f=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(f?f["X-WebChannel-Content-Type"]=b.messageContentType:f={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.sa&&(f?f["X-WebChannel-Client-Profile"]=b.sa:f={"X-WebChannel-Client-Profile":b.sa}),this.g.U=f,(f=b&&b.Qb)&&!V(f)&&(this.g.u=f),this.A=b&&b.supportsCrossDomainXhr||!1,this.v=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!V(b)&&(this.g.G=b,f=this.h,f!==null&&b in f&&(f=this.h,b in f&&delete f[b])),this.j=new ps(this)}y(nn,dt),nn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},nn.prototype.close=function(){pa(this.g)},nn.prototype.o=function(f){var b=this.g;if(typeof f=="string"){var _={};_.__data__=f,f=_}else this.v&&(_={},_.__data__=ns(f),f=_);b.i.push(new Wf(b.Ya++,f)),b.I==3&&Ei(b)},nn.prototype.N=function(){this.g.l=null,delete this.j,pa(this.g),delete this.g,nn.Z.N.call(this)};function nd(f){ia.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var b=f.__sm__;if(b){e:{for(const _ in b){f=_;break e}f=void 0}(this.i=f)&&(f=this.i,b=b!==null&&f in b?b[f]:void 0),this.data=b}else this.data=f}y(nd,ia);function rd(){Ol.call(this),this.status=1}y(rd,Ol);function ps(f){this.g=f}y(ps,td),ps.prototype.ra=function(){ht(this.g,"a")},ps.prototype.qa=function(f){ht(this.g,new nd(f))},ps.prototype.pa=function(f){ht(this.g,new rd)},ps.prototype.oa=function(){ht(this.g,"b")},wa.prototype.createWebChannel=wa.prototype.g,nn.prototype.send=nn.prototype.o,nn.prototype.open=nn.prototype.m,nn.prototype.close=nn.prototype.close,U_=function(){return new wa},F_=function(){return ss()},z_=wr,fg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ls.NO_ERROR=0,ls.TIMEOUT=8,ls.HTTP_ERROR=6,yh=ls,cs.COMPLETE="complete",B_=cs,Ou.EventType=is,is.OPEN="a",is.CLOSE="b",is.ERROR="c",is.MESSAGE="d",dt.prototype.listen=dt.prototype.J,Mc=Ou,at.prototype.listenOnce=at.prototype.K,at.prototype.getLastError=at.prototype.Ha,at.prototype.getLastErrorCode=at.prototype.ya,at.prototype.getStatus=at.prototype.ca,at.prototype.getResponseJson=at.prototype.La,at.prototype.getResponseText=at.prototype.la,at.prototype.send=at.prototype.ea,at.prototype.setWithCredentials=at.prototype.Fa,O_=at}).apply(typeof Zd<"u"?Zd:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};yn.UNAUTHENTICATED=new yn(null),yn.GOOGLE_CREDENTIALS=new yn("google-credentials-uid"),yn.FIRST_PARTY=new yn("first-party-uid"),yn.MOCK_USER=new yn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tl="12.8.0";function LP(n){Tl=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ko=new py("@firebase/firestore");function Wa(){return Ko.logLevel}function xe(n,...e){if(Ko.logLevel<=qe.DEBUG){const t=e.map(Cy);Ko.debug(`Firestore (${Tl}): ${n}`,...t)}}function Qi(n,...e){if(Ko.logLevel<=qe.ERROR){const t=e.map(Cy);Ko.error(`Firestore (${Tl}): ${n}`,...t)}}function ll(n,...e){if(Ko.logLevel<=qe.WARN){const t=e.map(Cy);Ko.warn(`Firestore (${Tl}): ${n}`,...t)}}function Cy(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,W_(n,r,t)}function W_(n,e,t){let r=`FIRESTORE (${Tl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Qi(r),new Error(r)}function rt(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||W_(e,s,r)}function Fe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends Zi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class OP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(yn.UNAUTHENTICATED)))}shutdown(){}}class BP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class zP{constructor(e){this.t=e,this.currentUser=yn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){rt(this.o===void 0,42304);let r=this.i;const s=d=>this.i!==r?(r=this.i,t(d)):Promise.resolve();let l=new Ui;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ui,e.enqueueRetryable((()=>s(this.currentUser)))};const c=()=>{const d=l;e.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},h=d=>{xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((d=>h(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?h(d):(xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ui)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(rt(typeof r.accessToken=="string",31837,{l:r}),new $_(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return rt(e===null||typeof e=="string",2055,{h:e}),new yn(e)}}class FP{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=yn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class UP{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new FP(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(yn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Yx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class WP{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Qn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){rt(this.o===void 0,3512);const r=l=>{l.error!=null&&xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,xe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const s=l=>{xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>s(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?s(l):xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Yx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(rt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Yx(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $P(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=$P(40);for(let l=0;l<s.length;++l)r.length<20&&s[l]<t&&(r+=e.charAt(s[l]%62))}return r}}function Ge(n,e){return n<e?-1:n>e?1:0}function mg(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const s=n.charAt(r),l=e.charAt(r);if(s!==l)return Ip(s)===Ip(l)?Ge(s,l):Ip(s)?1:-1}return Ge(n.length,e.length)}const HP=55296,KP=57343;function Ip(n){const e=n.charCodeAt(0);return e>=HP&&e<=KP}function cl(n,e,t){return n.length===e.length&&n.every(((r,s)=>t(r,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx="__name__";class li{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ne(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ne(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return li.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof li?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const l=li.compareSegments(e.get(s),t.get(s));if(l!==0)return l}return Ge(e.length,t.length)}static compareSegments(e,t){const r=li.isNumericId(e),s=li.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?li.extractNumericId(e).compare(li.extractNumericId(t)):mg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return zs.fromString(e.substring(4,e.length-2))}}class ct extends li{construct(e,t,r){return new ct(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ge(ee.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((s=>s.length>0)))}return new ct(t)}static emptyPath(){return new ct([])}}const qP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ln extends li{construct(e,t,r){return new ln(e,t,r)}static isValidIdentifier(e){return qP.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ln.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Xx}static keyField(){return new ln([Xx])}static fromServerFormat(e){const t=[];let r="",s=0;const l=()=>{if(r.length===0)throw new ge(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new ge(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ge(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,s+=2}else h==="`"?(c=!c,s++):h!=="."||c?(r+=h,s++):(l(),s++)}if(l(),c)throw new ge(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ln(t)}static emptyPath(){return new ln([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.path=e}static fromPath(e){return new Te(ct.fromString(e))}static fromName(e){return new Te(ct.fromString(e).popFirst(5))}static empty(){return new Te(ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ct.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ct.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new ct(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H_(n,e,t){if(!t)throw new ge(ee.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function GP(n,e,t,r){if(e===!0&&r===!0)throw new ge(ee.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Jx(n){if(!Te.isDocumentKey(n))throw new ge(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Zx(n){if(Te.isDocumentKey(n))throw new ge(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function K_(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function ff(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ne(12329,{type:typeof n})}function pr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ge(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ff(n);throw new ge(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(n,e){const t={typeString:n};return e&&(t.value=e),t}function bu(n,e){if(!K_(n))throw new ge(ee.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const c=n[r];if(s&&typeof c!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${r}' field to equal '${l.value}'`;break}}if(t)throw new ge(ee.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ew=-62135596800,tw=1e6;class yt{static now(){return yt.fromMillis(Date.now())}static fromDate(e){return yt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*tw);return new yt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ge(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ge(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ew)throw new ge(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/tw}_compareTo(e){return this.seconds===e.seconds?Ge(this.nanoseconds,e.nanoseconds):Ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:yt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(bu(e,yt._jsonSchema))return new yt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ew;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}yt._jsonSchemaVersion="firestore/timestamp/1.0",yt._jsonSchema={type:Ut("string",yt._jsonSchemaVersion),seconds:Ut("number"),nanoseconds:Ut("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{static fromTimestamp(e){return new Oe(e)}static min(){return new Oe(new yt(0,0))}static max(){return new Oe(new yt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eu=-1;function QP(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Oe.fromTimestamp(r===1e9?new yt(t+1,0):new yt(t,r));return new Ws(s,Te.empty(),e)}function YP(n){return new Ws(n.readTime,n.key,eu)}class Ws{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ws(Oe.min(),Te.empty(),eu)}static max(){return new Ws(Oe.max(),Te.empty(),eu)}}function XP(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Te.comparator(n.documentKey,e.documentKey),t!==0?t:Ge(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ZP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Il(n){if(n.code!==ee.FAILED_PRECONDITION||n.message!==JP)throw n;xe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ne(((r,s)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,s)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ne?t:ne.resolve(t)}catch(t){return ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ne.reject(t)}static resolve(e){return new ne(((t,r)=>{t(e)}))}static reject(e){return new ne(((t,r)=>{r(e)}))}static waitFor(e){return new ne(((t,r)=>{let s=0,l=0,c=!1;e.forEach((h=>{++s,h.next((()=>{++l,c&&l===s&&t()}),(d=>r(d)))})),c=!0,l===s&&t()}))}static or(e){let t=ne.resolve(!1);for(const r of e)t=t.next((s=>s?ne.resolve(s):r()));return t}static forEach(e,t){const r=[];return e.forEach(((s,l)=>{r.push(t.call(this,s,l))})),this.waitFor(r)}static mapArray(e,t){return new ne(((r,s)=>{const l=e.length,c=new Array(l);let h=0;for(let d=0;d<l;d++){const m=d;t(e[m]).next((g=>{c[m]=g,++h,h===l&&r(c)}),(g=>s(g)))}}))}static doWhile(e,t){return new ne(((r,s)=>{const l=()=>{e()===!0?t().next((()=>{l()}),s):r()};l()}))}}function eN(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Cl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}mf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ay=-1;function pf(n){return n==null}function Vh(n){return n===0&&1/n==-1/0}function tN(n){return typeof n=="number"&&Number.isInteger(n)&&!Vh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q_="";function nN(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=nw(e)),e=rN(n.get(t),e);return nw(e)}function rN(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const l=n.charAt(s);switch(l){case"\0":t+="";break;case q_:t+="";break;default:t+=l}}return t}function nw(n){return n+q_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function to(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function G_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e,t){this.comparator=e,this.root=t||an.EMPTY}insert(e,t){return new Et(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,an.BLACK,null,null))}remove(e){return new Et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,an.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new eh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new eh(this.root,e,this.comparator,!1)}getReverseIterator(){return new eh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new eh(this.root,e,this.comparator,!0)}}class eh{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&s&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class an{constructor(e,t,r,s,l){this.key=e,this.value=t,this.color=r??an.RED,this.left=s??an.EMPTY,this.right=l??an.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,l){return new an(e??this.key,t??this.value,r??this.color,s??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const l=r(e,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(e,t,r),null):l===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return an.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return an.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,an.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,an.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ne(27949);return e+(this.isRed()?0:1)}}an.EMPTY=null,an.RED=!0,an.BLACK=!1;an.EMPTY=new class{constructor(){this.size=0}get key(){throw Ne(57766)}get value(){throw Ne(16141)}get color(){throw Ne(16727)}get left(){throw Ne(29726)}get right(){throw Ne(36894)}copy(e,t,r,s,l){return this}insert(e,t,r){return new an(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.comparator=e,this.data=new Et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new iw(this.data.getIterator())}getIteratorFrom(e){return new iw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Gt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=r.getNext().key;if(this.comparator(s,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Gt(this.comparator);return t.data=e,t}}class iw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this.fields=e,e.sort(ln.comparator)}static empty(){return new Yn([])}unionWith(e){let t=new Gt(ln.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Yn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return cl(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Q_("Invalid base64 string: "+l):l}})(e);return new cn(t)}static fromUint8Array(e){const t=(function(s){let l="";for(let c=0;c<s.length;++c)l+=String.fromCharCode(s[c]);return l})(e);return new cn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}cn.EMPTY_BYTE_STRING=new cn("");const iN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $s(n){if(rt(!!n,39018),typeof n=="string"){let e=0;const t=iN.exec(n);if(rt(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Pt(n.seconds),nanos:Pt(n.nanos)}}function Pt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Hs(n){return typeof n=="string"?cn.fromBase64String(n):cn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y_="server_timestamp",X_="__type__",J_="__previous_value__",Z_="__local_write_time__";function Ry(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[X_])==null?void 0:r.stringValue)===Y_}function gf(n){const e=n.mapValue.fields[J_];return Ry(e)?gf(e):e}function tu(n){const e=$s(n.mapValue.fields[Z_].timestampValue);return new yt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(e,t,r,s,l,c,h,d,m,g,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=m,this.isUsingEmulator=g,this.apiKey=y}}const Lh="(default)";class nu{constructor(e,t){this.projectId=e,this.database=t||Lh}static empty(){return new nu("","")}get isDefaultDatabase(){return this.database===Lh}isEqual(e){return e instanceof nu&&e.projectId===this.projectId&&e.database===this.database}}function oN(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new ge(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nu(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS="__type__",aN="__max__",th={mapValue:{}},tS="__vector__",Oh="value";function Ks(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ry(n)?4:cN(n)?9007199254740991:lN(n)?10:11:Ne(28295,{value:n})}function mi(n,e){if(n===e)return!0;const t=Ks(n);if(t!==Ks(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return tu(n).isEqual(tu(e));case 3:return(function(s,l){if(typeof s.timestampValue=="string"&&typeof l.timestampValue=="string"&&s.timestampValue.length===l.timestampValue.length)return s.timestampValue===l.timestampValue;const c=$s(s.timestampValue),h=$s(l.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,l){return Hs(s.bytesValue).isEqual(Hs(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,l){return Pt(s.geoPointValue.latitude)===Pt(l.geoPointValue.latitude)&&Pt(s.geoPointValue.longitude)===Pt(l.geoPointValue.longitude)})(n,e);case 2:return(function(s,l){if("integerValue"in s&&"integerValue"in l)return Pt(s.integerValue)===Pt(l.integerValue);if("doubleValue"in s&&"doubleValue"in l){const c=Pt(s.doubleValue),h=Pt(l.doubleValue);return c===h?Vh(c)===Vh(h):isNaN(c)&&isNaN(h)}return!1})(n,e);case 9:return cl(n.arrayValue.values||[],e.arrayValue.values||[],mi);case 10:case 11:return(function(s,l){const c=s.mapValue.fields||{},h=l.mapValue.fields||{};if(rw(c)!==rw(h))return!1;for(const d in c)if(c.hasOwnProperty(d)&&(h[d]===void 0||!mi(c[d],h[d])))return!1;return!0})(n,e);default:return Ne(52216,{left:n})}}function ru(n,e){return(n.values||[]).find((t=>mi(t,e)))!==void 0}function ul(n,e){if(n===e)return 0;const t=Ks(n),r=Ks(e);if(t!==r)return Ge(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ge(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const h=Pt(l.integerValue||l.doubleValue),d=Pt(c.integerValue||c.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1})(n,e);case 3:return sw(n.timestampValue,e.timestampValue);case 4:return sw(tu(n),tu(e));case 5:return mg(n.stringValue,e.stringValue);case 6:return(function(l,c){const h=Hs(l),d=Hs(c);return h.compareTo(d)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const h=l.split("/"),d=c.split("/");for(let m=0;m<h.length&&m<d.length;m++){const g=Ge(h[m],d[m]);if(g!==0)return g}return Ge(h.length,d.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const h=Ge(Pt(l.latitude),Pt(c.latitude));return h!==0?h:Ge(Pt(l.longitude),Pt(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return ow(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var x,E,k,S;const h=l.fields||{},d=c.fields||{},m=(x=h[Oh])==null?void 0:x.arrayValue,g=(E=d[Oh])==null?void 0:E.arrayValue,y=Ge(((k=m==null?void 0:m.values)==null?void 0:k.length)||0,((S=g==null?void 0:g.values)==null?void 0:S.length)||0);return y!==0?y:ow(m,g)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===th.mapValue&&c===th.mapValue)return 0;if(l===th.mapValue)return 1;if(c===th.mapValue)return-1;const h=l.fields||{},d=Object.keys(h),m=c.fields||{},g=Object.keys(m);d.sort(),g.sort();for(let y=0;y<d.length&&y<g.length;++y){const x=mg(d[y],g[y]);if(x!==0)return x;const E=ul(h[d[y]],m[g[y]]);if(E!==0)return E}return Ge(d.length,g.length)})(n.mapValue,e.mapValue);default:throw Ne(23264,{he:t})}}function sw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ge(n,e);const t=$s(n),r=$s(e),s=Ge(t.seconds,r.seconds);return s!==0?s:Ge(t.nanos,r.nanos)}function ow(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const l=ul(t[s],r[s]);if(l)return l}return Ge(t.length,r.length)}function dl(n){return pg(n)}function pg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=$s(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Hs(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Te.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",s=!0;for(const l of t.values||[])s?s=!1:r+=",",r+=pg(l);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let s="{",l=!0;for(const c of r)l?l=!1:s+=",",s+=`${c}:${pg(t.fields[c])}`;return s+"}"})(n.mapValue):Ne(61005,{value:n})}function vh(n){switch(Ks(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=gf(n);return e?16+vh(e):16;case 5:return 2*n.stringValue.length;case 6:return Hs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,l)=>s+vh(l)),0)})(n.arrayValue);case 10:case 11:return(function(r){let s=0;return to(r.fields,((l,c)=>{s+=l.length+vh(c)})),s})(n.mapValue);default:throw Ne(13486,{value:n})}}function aw(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function gg(n){return!!n&&"integerValue"in n}function Py(n){return!!n&&"arrayValue"in n}function lw(n){return!!n&&"nullValue"in n}function cw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function xh(n){return!!n&&"mapValue"in n}function lN(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[eS])==null?void 0:r.stringValue)===tS}function Wc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return to(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Wc(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Wc(n.arrayValue.values[t]);return e}return{...n}}function cN(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===aN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.value=e}static empty(){return new Dn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!xh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wc(t)}setAll(e){let t=ln.emptyPath(),r={},s=[];e.forEach(((c,h)=>{if(!t.isImmediateParentOf(h)){const d=this.getFieldsMap(t);this.applyChanges(d,r,s),r={},s=[],t=h.popLast()}c?r[h.lastSegment()]=Wc(c):s.push(h.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,r,s)}delete(e){const t=this.field(e.popLast());xh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return mi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];xh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){to(t,((s,l)=>e[s]=l));for(const s of r)delete e[s]}clone(){return new Dn(Wc(this.value))}}function nS(n){const e=[];return to(n.fields,((t,r)=>{const s=new ln([t]);if(xh(r)){const l=nS(r.mapValue).fields;if(l.length===0)e.push(s);else for(const c of l)e.push(s.child(c))}else e.push(s)})),new Yn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e,t,r,s,l,c,h){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=l,this.data=c,this.documentState=h}static newInvalidDocument(e){return new vn(e,0,Oe.min(),Oe.min(),Oe.min(),Dn.empty(),0)}static newFoundDocument(e,t,r,s){return new vn(e,1,t,Oe.min(),r,s,0)}static newNoDocument(e,t){return new vn(e,2,t,Oe.min(),Oe.min(),Dn.empty(),0)}static newUnknownDocument(e,t){return new vn(e,3,t,Oe.min(),Oe.min(),Dn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof vn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,t){this.position=e,this.inclusive=t}}function uw(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const l=e[s],c=n.position[s];if(l.field.isKeyField()?r=Te.comparator(Te.fromName(c.referenceValue),t.key):r=ul(c,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function dw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!mi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,t="asc"){this.field=e,this.dir=t}}function uN(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{}class Ft extends rS{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new hN(e,t,r):t==="array-contains"?new pN(e,r):t==="in"?new gN(e,r):t==="not-in"?new yN(e,r):t==="array-contains-any"?new vN(e,r):new Ft(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new fN(e,r):new mN(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ul(t,this.value)):t!==null&&Ks(this.value)===Ks(t)&&this.matchesComparison(ul(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Lr extends rS{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Lr(e,t)}matches(e){return iS(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function iS(n){return n.op==="and"}function sS(n){return dN(n)&&iS(n)}function dN(n){for(const e of n.filters)if(e instanceof Lr)return!1;return!0}function yg(n){if(n instanceof Ft)return n.field.canonicalString()+n.op.toString()+dl(n.value);if(sS(n))return n.filters.map((e=>yg(e))).join(",");{const e=n.filters.map((t=>yg(t))).join(",");return`${n.op}(${e})`}}function oS(n,e){return n instanceof Ft?(function(r,s){return s instanceof Ft&&r.op===s.op&&r.field.isEqual(s.field)&&mi(r.value,s.value)})(n,e):n instanceof Lr?(function(r,s){return s instanceof Lr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((l,c,h)=>l&&oS(c,s.filters[h])),!0):!1})(n,e):void Ne(19439)}function aS(n){return n instanceof Ft?(function(t){return`${t.field.canonicalString()} ${t.op} ${dl(t.value)}`})(n):n instanceof Lr?(function(t){return t.op.toString()+" {"+t.getFilters().map(aS).join(" ,")+"}"})(n):"Filter"}class hN extends Ft{constructor(e,t,r){super(e,t,r),this.key=Te.fromName(r.referenceValue)}matches(e){const t=Te.comparator(e.key,this.key);return this.matchesComparison(t)}}class fN extends Ft{constructor(e,t){super(e,"in",t),this.keys=lS("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class mN extends Ft{constructor(e,t){super(e,"not-in",t),this.keys=lS("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function lS(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((r=>Te.fromName(r.referenceValue)))}class pN extends Ft{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Py(t)&&ru(t.arrayValue,this.value)}}class gN extends Ft{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ru(this.value.arrayValue,t)}}class yN extends Ft{constructor(e,t){super(e,"not-in",t)}matches(e){if(ru(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ru(this.value.arrayValue,t)}}class vN extends Ft{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Py(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>ru(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e,t=null,r=[],s=[],l=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=l,this.startAt=c,this.endAt=h,this.Te=null}}function hw(n,e=null,t=[],r=[],s=null,l=null,c=null){return new xN(n,e,t,r,s,l,c)}function Ny(n){const e=Fe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>yg(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),pf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>dl(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>dl(r))).join(",")),e.Te=t}return e.Te}function Dy(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!uN(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!oS(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!dw(n.startAt,e.startAt)&&dw(n.endAt,e.endAt)}function vg(n){return Te.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e,t=null,r=[],s=[],l=null,c="F",h=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=l,this.limitType=c,this.startAt=h,this.endAt=d,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function wN(n,e,t,r,s,l,c,h){return new jl(n,e,t,r,s,l,c,h)}function My(n){return new jl(n)}function fw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function bN(n){return Te.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function cS(n){return n.collectionGroup!==null}function $c(n){const e=Fe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new Gt(ln.comparator);return c.filters.forEach((d=>{d.getFlattenedFilters().forEach((m=>{m.isInequality()&&(h=h.add(m.field))}))})),h})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new iu(l,r))})),t.has(ln.keyField().canonicalString())||e.Ie.push(new iu(ln.keyField(),r))}return e.Ie}function ui(n){const e=Fe(n);return e.Ee||(e.Ee=kN(e,$c(n))),e.Ee}function kN(n,e){if(n.limitType==="F")return hw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const l=s.dir==="desc"?"asc":"desc";return new iu(s.field,l)}));const t=n.endAt?new Bh(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Bh(n.startAt.position,n.startAt.inclusive):null;return hw(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function xg(n,e){const t=n.filters.concat([e]);return new jl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function _N(n,e){const t=n.explicitOrderBy.concat([e]);return new jl(n.path,n.collectionGroup,t,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}function zh(n,e,t){return new jl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function yf(n,e){return Dy(ui(n),ui(e))&&n.limitType===e.limitType}function uS(n){return`${Ny(ui(n))}|lt:${n.limitType}`}function $a(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((s=>aS(s))).join(", ")}]`),pf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((s=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(s))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((s=>dl(s))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((s=>dl(s))).join(",")),`Target(${r})`})(ui(n))}; limitType=${n.limitType})`}function vf(n,e){return e.isFoundDocument()&&(function(r,s){const l=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):Te.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(n,e)&&(function(r,s){for(const l of $c(r))if(!l.field.isKeyField()&&s.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(r,s){for(const l of r.filters)if(!l.matches(s))return!1;return!0})(n,e)&&(function(r,s){return!(r.startAt&&!(function(c,h,d){const m=uw(c,h,d);return c.inclusive?m<=0:m<0})(r.startAt,$c(r),s)||r.endAt&&!(function(c,h,d){const m=uw(c,h,d);return c.inclusive?m>=0:m>0})(r.endAt,$c(r),s))})(n,e)}function SN(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function dS(n){return(e,t)=>{let r=!1;for(const s of $c(n)){const l=EN(s,e,t);if(l!==0)return l;r=r||s.field.isKeyField()}return 0}}function EN(n,e,t){const r=n.field.isKeyField()?Te.comparator(e.key,t.key):(function(l,c,h){const d=c.data.field(l),m=h.data.field(l);return d!==null&&m!==null?ul(d,m):Ne(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ne(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,l]of r)if(this.equalsFn(s,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return void(s[l]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){to(this.inner,((t,r)=>{for(const[s,l]of r)e(s,l)}))}isEmpty(){return G_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN=new Et(Te.comparator);function Yi(){return TN}const hS=new Et(Te.comparator);function Vc(...n){let e=hS;for(const t of n)e=e.insert(t.key,t);return e}function fS(n){let e=hS;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Oo(){return Hc()}function mS(){return Hc()}function Hc(){return new Zo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const IN=new Et(Te.comparator),CN=new Gt(Te.comparator);function Qe(...n){let e=CN;for(const t of n)e=e.add(t);return e}const jN=new Gt(Ge);function AN(){return jN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vy(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vh(e)?"-0":e}}function pS(n){return{integerValue:""+n}}function gS(n,e){return tN(e)?pS(e):Vy(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(){this._=void 0}}function RN(n,e,t){return n instanceof su?(function(s,l){const c={fields:{[X_]:{stringValue:Y_},[Z_]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return l&&Ry(l)&&(l=gf(l)),l&&(c.fields[J_]=l),{mapValue:c}})(t,e):n instanceof hl?vS(n,e):n instanceof fl?xS(n,e):(function(s,l){const c=yS(s,l),h=mw(c)+mw(s.Ae);return gg(c)&&gg(s.Ae)?pS(h):Vy(s.serializer,h)})(n,e)}function PN(n,e,t){return n instanceof hl?vS(n,e):n instanceof fl?xS(n,e):t}function yS(n,e){return n instanceof ou?(function(r){return gg(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class su extends xf{}class hl extends xf{constructor(e){super(),this.elements=e}}function vS(n,e){const t=wS(e);for(const r of n.elements)t.some((s=>mi(s,r)))||t.push(r);return{arrayValue:{values:t}}}class fl extends xf{constructor(e){super(),this.elements=e}}function xS(n,e){let t=wS(e);for(const r of n.elements)t=t.filter((s=>!mi(s,r)));return{arrayValue:{values:t}}}class ou extends xf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function mw(n){return Pt(n.integerValue||n.doubleValue)}function wS(n){return Py(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e,t){this.field=e,this.transform=t}}function NN(n,e){return n.field.isEqual(e.field)&&(function(r,s){return r instanceof hl&&s instanceof hl||r instanceof fl&&s instanceof fl?cl(r.elements,s.elements,mi):r instanceof ou&&s instanceof ou?mi(r.Ae,s.Ae):r instanceof su&&s instanceof su})(n.transform,e.transform)}class DN{constructor(e,t){this.version=e,this.transformResults=t}}class Tn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Tn}static exists(e){return new Tn(void 0,e)}static updateTime(e){return new Tn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class bf{}function bS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new kf(n.key,Tn.none()):new ku(n.key,n.data,Tn.none());{const t=n.data,r=Dn.empty();let s=new Gt(ln.comparator);for(let l of e.fields)if(!s.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?r.delete(l):r.set(l,c),s=s.add(l)}return new no(n.key,r,new Yn(s.toArray()),Tn.none())}}function MN(n,e,t){n instanceof ku?(function(s,l,c){const h=s.value.clone(),d=gw(s.fieldTransforms,l,c.transformResults);h.setAll(d),l.convertToFoundDocument(c.version,h).setHasCommittedMutations()})(n,e,t):n instanceof no?(function(s,l,c){if(!wh(s.precondition,l))return void l.convertToUnknownDocument(c.version);const h=gw(s.fieldTransforms,l,c.transformResults),d=l.data;d.setAll(kS(s)),d.setAll(h),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):(function(s,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Kc(n,e,t,r){return n instanceof ku?(function(l,c,h,d){if(!wh(l.precondition,c))return h;const m=l.value.clone(),g=yw(l.fieldTransforms,d,c);return m.setAll(g),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null})(n,e,t,r):n instanceof no?(function(l,c,h,d){if(!wh(l.precondition,c))return h;const m=yw(l.fieldTransforms,d,c),g=c.data;return g.setAll(kS(l)),g.setAll(m),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),h===null?null:h.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((y=>y.field)))})(n,e,t,r):(function(l,c,h){return wh(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h})(n,e,t)}function VN(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),l=yS(r.transform,s||null);l!=null&&(t===null&&(t=Dn.empty()),t.set(r.field,l))}return t||null}function pw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&cl(r,s,((l,c)=>NN(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class ku extends bf{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class no extends bf{constructor(e,t,r,s,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function kS(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function gw(n,e,t){const r=new Map;rt(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let s=0;s<t.length;s++){const l=n[s],c=l.transform,h=e.data.field(l.field);r.set(l.field,PN(c,h,t[s]))}return r}function yw(n,e,t){const r=new Map;for(const s of n){const l=s.transform,c=t.data.field(s.field);r.set(s.field,RN(l,c,e))}return r}class kf extends bf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class LN extends bf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const l=this.mutations[s];l.key.isEqual(e.key)&&MN(l,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Kc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Kc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=mS();return this.mutations.forEach((s=>{const l=e.get(s.key),c=l.overlayedDocument;let h=this.applyToLocalView(c,l.mutatedFields);h=t.has(s.key)?null:h;const d=bS(c,h);d!==null&&r.set(s.key,d),c.isValidDocument()||c.convertToNoDocument(Oe.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Qe())}isEqual(e){return this.batchId===e.batchId&&cl(this.mutations,e.mutations,((t,r)=>pw(t,r)))&&cl(this.baseMutations,e.baseMutations,((t,r)=>pw(t,r)))}}class Ly{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){rt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return IN})();const l=e.mutations;for(let c=0;c<l.length;c++)s=s.insert(l[c].key,r[c].version);return new Ly(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bt,Xe;function FN(n){switch(n){case ee.OK:return Ne(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return Ne(15467,{code:n})}}function _S(n){if(n===void 0)return Qi("GRPC error has no .code"),ee.UNKNOWN;switch(n){case Bt.OK:return ee.OK;case Bt.CANCELLED:return ee.CANCELLED;case Bt.UNKNOWN:return ee.UNKNOWN;case Bt.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case Bt.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case Bt.INTERNAL:return ee.INTERNAL;case Bt.UNAVAILABLE:return ee.UNAVAILABLE;case Bt.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case Bt.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case Bt.NOT_FOUND:return ee.NOT_FOUND;case Bt.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case Bt.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case Bt.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case Bt.ABORTED:return ee.ABORTED;case Bt.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case Bt.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case Bt.DATA_LOSS:return ee.DATA_LOSS;default:return Ne(39323,{code:n})}}(Xe=Bt||(Bt={}))[Xe.OK=0]="OK",Xe[Xe.CANCELLED=1]="CANCELLED",Xe[Xe.UNKNOWN=2]="UNKNOWN",Xe[Xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xe[Xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xe[Xe.NOT_FOUND=5]="NOT_FOUND",Xe[Xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xe[Xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xe[Xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xe[Xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xe[Xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xe[Xe.ABORTED=10]="ABORTED",Xe[Xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xe[Xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xe[Xe.INTERNAL=13]="INTERNAL",Xe[Xe.UNAVAILABLE=14]="UNAVAILABLE",Xe[Xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN=new zs([4294967295,4294967295],0);function vw(n){const e=UN().encode(n),t=new L_;return t.update(e),new Uint8Array(t.digest())}function xw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new zs([t,r],0),new zs([s,l],0)]}class Oy{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Lc(`Invalid padding: ${t}`);if(r<0)throw new Lc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Lc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Lc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=zs.fromNumber(this.ge)}ye(e,t,r){let s=e.add(t.multiply(zs.fromNumber(r)));return s.compare(WN)===1&&(s=new zs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=vw(e),[r,s]=xw(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,s,l);if(!this.we(c))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Oy(l,s,t);return r.forEach((h=>c.insert(h))),c}insert(e){if(this.ge===0)return;const t=vw(e),[r,s]=xw(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,s,l);this.be(c)}}be(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Lc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e,t,r,s,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,_u.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new _f(Oe.min(),s,new Et(Ge),Yi(),Qe())}}class _u{constructor(e,t,r,s,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new _u(r,t,Qe(),Qe(),Qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e,t,r,s){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=s}}class SS{constructor(e,t){this.targetId=e,this.Ce=t}}class ES{constructor(e,t,r=cn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class ww{constructor(){this.ve=0,this.Fe=bw(),this.Me=cn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Qe(),t=Qe(),r=Qe();return this.Fe.forEach(((s,l)=>{switch(l){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Ne(38017,{changeType:l})}})),new _u(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=bw()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,rt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class $N{constructor(e){this.Ge=e,this.ze=new Map,this.je=Yi(),this.He=nh(),this.Je=nh(),this.Ze=new Et(Ge)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Ne(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,r=e.Ce.count,s=this.ot(t);if(s){const l=s.target;if(vg(l))if(r===0){const c=new Te(l.path);this.et(t,c,vn.newNoDocument(c,Oe.min()))}else rt(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const h=this.ut(e),d=h?this.ct(h,e,c):1;if(d!==0){this.it(t);const m=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,m)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:l=0}=t;let c,h;try{c=Hs(r).toUint8Array()}catch(d){if(d instanceof Q_)return ll("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new Oy(c,s,l)}catch(d){return ll(d instanceof Lc?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.ge===0?null:h}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let s=0;return r.forEach((l=>{const c=this.Ge.ht(),h=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(h)||(this.et(t,l,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const h=this.ot(c);if(h){if(l.current&&vg(h.target)){const d=new Te(h.target.path);this.It(d).has(c)||this.Et(c,d)||this.et(c,d,vn.newNoDocument(d,e))}l.Be&&(t.set(c,l.ke()),l.Ke())}}));let r=Qe();this.Je.forEach(((l,c)=>{let h=!0;c.forEachWhile((d=>{const m=this.ot(d);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(r=r.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const s=new _f(e,t,this.Ze,this.je,r);return this.je=Yi(),this.He=nh(),this.Je=nh(),this.Ze=new Et(Ge),s}Ye(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.qe(t,1):s.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new ww,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Gt(Ge),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Gt(Ge),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||xe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ww),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function nh(){return new Et(Te.comparator)}function bw(){return new Et(Te.comparator)}const HN={asc:"ASCENDING",desc:"DESCENDING"},KN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qN={and:"AND",or:"OR"};class GN{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function wg(n,e){return n.useProto3Json||pf(e)?e:{value:e}}function Fh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function TS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function QN(n,e){return Fh(n,e.toTimestamp())}function di(n){return rt(!!n,49232),Oe.fromTimestamp((function(t){const r=$s(t);return new yt(r.seconds,r.nanos)})(n))}function By(n,e){return bg(n,e).canonicalString()}function bg(n,e){const t=(function(s){return new ct(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function IS(n){const e=ct.fromString(n);return rt(PS(e),10190,{key:e.toString()}),e}function kg(n,e){return By(n.databaseId,e.path)}function Cp(n,e){const t=IS(e);if(t.get(1)!==n.databaseId.projectId)throw new ge(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ge(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Te(jS(t))}function CS(n,e){return By(n.databaseId,e)}function YN(n){const e=IS(n);return e.length===4?ct.emptyPath():jS(e)}function _g(n){return new ct(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function jS(n){return rt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function kw(n,e,t){return{name:kg(n,e),fields:t.value.mapValue.fields}}function XN(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Ne(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],l=(function(m,g){return m.useProto3Json?(rt(g===void 0||typeof g=="string",58123),cn.fromBase64String(g||"")):(rt(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),cn.fromUint8Array(g||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&(function(m){const g=m.code===void 0?ee.UNKNOWN:_S(m.code);return new ge(g,m.message||"")})(c);t=new ES(r,s,l,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Cp(n,r.document.name),l=di(r.document.updateTime),c=r.document.createTime?di(r.document.createTime):Oe.min(),h=new Dn({mapValue:{fields:r.document.fields}}),d=vn.newFoundDocument(s,l,c,h),m=r.targetIds||[],g=r.removedTargetIds||[];t=new bh(m,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Cp(n,r.document),l=r.readTime?di(r.readTime):Oe.min(),c=vn.newNoDocument(s,l),h=r.removedTargetIds||[];t=new bh([],h,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Cp(n,r.document),l=r.removedTargetIds||[];t=new bh([],l,s,null)}else{if(!("filter"in e))return Ne(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:l}=r,c=new zN(s,l),h=r.targetId;t=new SS(h,c)}}return t}function JN(n,e){let t;if(e instanceof ku)t={update:kw(n,e.key,e.value)};else if(e instanceof kf)t={delete:kg(n,e.key)};else if(e instanceof no)t={update:kw(n,e.key,e.data),updateMask:a4(e.fieldMask)};else{if(!(e instanceof LN))return Ne(16599,{dt:e.type});t={verify:kg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(l,c){const h=c.transform;if(h instanceof su)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof hl)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof fl)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof ou)return{fieldPath:c.field.canonicalString(),increment:h.Ae};throw Ne(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(s,l){return l.updateTime!==void 0?{updateTime:QN(s,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ne(27497)})(n,e.precondition)),t}function ZN(n,e){return n&&n.length>0?(rt(e!==void 0,14353),n.map((t=>(function(s,l){let c=s.updateTime?di(s.updateTime):di(l);return c.isEqual(Oe.min())&&(c=di(l)),new DN(c,s.transformResults||[])})(t,e)))):[]}function e4(n,e){return{documents:[CS(n,e.path)]}}function t4(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=CS(n,s);const l=(function(m){if(m.length!==0)return RS(Lr.create(m,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(m){if(m.length!==0)return m.map((g=>(function(x){return{field:Ha(x.field),direction:i4(x.dir)}})(g)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=wg(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:t,parent:s}}function n4(n){let e=YN(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){rt(r===1,65062);const g=t.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let l=[];t.where&&(l=(function(y){const x=AS(y);return x instanceof Lr&&sS(x)?x.getFilters():[x]})(t.where));let c=[];t.orderBy&&(c=(function(y){return y.map((x=>(function(k){return new iu(Ka(k.field),(function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(x)))})(t.orderBy));let h=null;t.limit&&(h=(function(y){let x;return x=typeof y=="object"?y.value:y,pf(x)?null:x})(t.limit));let d=null;t.startAt&&(d=(function(y){const x=!!y.before,E=y.values||[];return new Bh(E,x)})(t.startAt));let m=null;return t.endAt&&(m=(function(y){const x=!y.before,E=y.values||[];return new Bh(E,x)})(t.endAt)),wN(e,s,c,l,h,"F",d,m)}function r4(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ne(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function AS(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Ka(t.unaryFilter.field);return Ft.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ka(t.unaryFilter.field);return Ft.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Ka(t.unaryFilter.field);return Ft.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Ka(t.unaryFilter.field);return Ft.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ne(61313);default:return Ne(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ft.create(Ka(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ne(58110);default:return Ne(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Lr.create(t.compositeFilter.filters.map((r=>AS(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ne(1026)}})(t.compositeFilter.op))})(n):Ne(30097,{filter:n})}function i4(n){return HN[n]}function s4(n){return KN[n]}function o4(n){return qN[n]}function Ha(n){return{fieldPath:n.canonicalString()}}function Ka(n){return ln.fromServerFormat(n.fieldPath)}function RS(n){return n instanceof Ft?(function(t){if(t.op==="=="){if(cw(t.value))return{unaryFilter:{field:Ha(t.field),op:"IS_NAN"}};if(lw(t.value))return{unaryFilter:{field:Ha(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(cw(t.value))return{unaryFilter:{field:Ha(t.field),op:"IS_NOT_NAN"}};if(lw(t.value))return{unaryFilter:{field:Ha(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ha(t.field),op:s4(t.op),value:t.value}}})(n):n instanceof Lr?(function(t){const r=t.getFilters().map((s=>RS(s)));return r.length===1?r[0]:{compositeFilter:{op:o4(t.op),filters:r}}})(n):Ne(54877,{filter:n})}function a4(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function PS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function NS(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e,t,r,s,l=Oe.min(),c=Oe.min(),h=cn.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(e){return new Ms(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ms(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ms(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ms(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(e){this.yt=e}}function c4(n){const e=n4({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?zh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(){this.Sn=new d4}addToCollectionParentIndex(e,t){return this.Sn.add(t),ne.resolve()}getCollectionParents(e,t){return ne.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return ne.resolve()}deleteFieldIndex(e,t){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,t){return ne.resolve()}getDocumentsMatchingTarget(e,t){return ne.resolve(null)}getIndexType(e,t){return ne.resolve(0)}getFieldIndexes(e,t){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,t){return ne.resolve(Ws.min())}getMinOffsetFromCollectionGroup(e,t){return ne.resolve(Ws.min())}updateCollectionGroup(e,t,r){return ne.resolve()}updateIndexEntries(e,t){return ne.resolve()}}class d4{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Gt(ct.comparator),l=!s.has(r);return this.index[t]=s.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Gt(ct.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},DS=41943040;class Nn{static withCacheSize(e){return new Nn(e,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nn.DEFAULT_COLLECTION_PERCENTILE=10,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nn.DEFAULT=new Nn(DS,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nn.DISABLED=new Nn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new ml(0)}static ar(){return new ml(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw="LruGarbageCollector",h4=1048576;function Ew([n,e],[t,r]){const s=Ge(n,t);return s===0?Ge(e,r):s}class f4{constructor(e){this.Pr=e,this.buffer=new Gt(Ew),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Ew(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class m4{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){xe(Sw,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Cl(t)?xe(Sw,"Ignoring IndexedDB error during garbage collection: ",t):await Il(t)}await this.Ar(3e5)}))}}class p4{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return ne.resolve(mf.ce);const r=new f4(t);return this.Vr.forEachTarget(e,(s=>r.Er(s.sequenceNumber))).next((()=>this.Vr.mr(e,(s=>r.Er(s))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(xe("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(_w)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(xe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_w):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,s,l,c,h,d,m;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((y=>(y>this.params.maximumSequenceNumbersToCollect?(xe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),s=this.params.maximumSequenceNumbersToCollect):s=y,c=Date.now(),this.nthSequenceNumber(e,s)))).next((y=>(r=y,h=Date.now(),this.removeTargets(e,r,t)))).next((y=>(l=y,d=Date.now(),this.removeOrphanedDocuments(e,r)))).next((y=>(m=Date.now(),Wa()<=qe.DEBUG&&xe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-g}ms
	Determined least recently used ${s} in `+(h-c)+`ms
	Removed ${l} targets in `+(d-h)+`ms
	Removed ${y} documents in `+(m-d)+`ms
Total Duration: ${m-g}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:l,documentsRemoved:y}))))}}function g4(n,e){return new p4(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(){this.changes=new Zo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,vn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ne.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(r!==null&&Kc(r.mutation,s,Yn.empty(),yt.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Qe()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Qe()){const s=Oo();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,r).next((l=>{let c=Vc();return l.forEach(((h,d)=>{c=c.insert(h,d.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=Oo();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Qe())))}populateOverlays(e,t,r){const s=[];return r.forEach((l=>{t.has(l)||s.push(l)})),this.documentOverlayCache.getOverlays(e,s).next((l=>{l.forEach(((c,h)=>{t.set(c,h)}))}))}computeViews(e,t,r,s){let l=Yi();const c=Hc(),h=(function(){return Hc()})();return t.forEach(((d,m)=>{const g=r.get(m.key);s.has(m.key)&&(g===void 0||g.mutation instanceof no)?l=l.insert(m.key,m):g!==void 0?(c.set(m.key,g.mutation.getFieldMask()),Kc(g.mutation,m,g.mutation.getFieldMask(),yt.now())):c.set(m.key,Yn.empty())})),this.recalculateAndSaveOverlays(e,l).next((d=>(d.forEach(((m,g)=>c.set(m,g))),t.forEach(((m,g)=>h.set(m,new v4(g,c.get(m)??null)))),h)))}recalculateAndSaveOverlays(e,t){const r=Hc();let s=new Et(((c,h)=>c-h)),l=Qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const h of c)h.keys().forEach((d=>{const m=t.get(d);if(m===null)return;let g=r.get(d)||Yn.empty();g=h.applyToLocalView(m,g),r.set(d,g);const y=(s.get(h.batchId)||Qe()).add(d);s=s.insert(h.batchId,y)}))})).next((()=>{const c=[],h=s.getReverseIterator();for(;h.hasNext();){const d=h.getNext(),m=d.key,g=d.value,y=mS();g.forEach((x=>{if(!l.has(x)){const E=bS(t.get(x),r.get(x));E!==null&&y.set(x,E),l=l.add(x)}})),c.push(this.documentOverlayCache.saveOverlays(e,m,y))}return ne.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,s){return bN(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):cS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next((l=>{const c=s-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-l.size):ne.resolve(Oo());let h=eu,d=l;return c.next((m=>ne.forEach(m,((g,y)=>(h<y.largestBatchId&&(h=y.largestBatchId),l.get(g)?ne.resolve():this.remoteDocumentCache.getEntry(e,g).next((x=>{d=d.insert(g,x)}))))).next((()=>this.populateOverlays(e,m,l))).next((()=>this.computeViews(e,d,m,Qe()))).next((g=>({batchId:h,changes:fS(g)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Te(t)).next((r=>{let s=Vc();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const l=t.collectionGroup;let c=Vc();return this.indexManager.getCollectionParents(e,l).next((h=>ne.forEach(h,(d=>{const m=(function(y,x){return new jl(x,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(t,d.child(l));return this.getDocumentsMatchingCollectionQuery(e,m,r,s).next((g=>{g.forEach(((y,x)=>{c=c.insert(y,x)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,s){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,s)))).next((c=>{l.forEach(((d,m)=>{const g=m.getKey();c.get(g)===null&&(c=c.insert(g,vn.newInvalidDocument(g)))}));let h=Vc();return c.forEach(((d,m)=>{const g=l.get(d);g!==void 0&&Kc(g.mutation,m,Yn.empty(),yt.now()),vf(t,m)&&(h=h.insert(d,m))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return ne.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:di(s.createTime)}})(t)),ne.resolve()}getNamedQuery(e,t){return ne.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(s){return{name:s.name,query:c4(s.bundledQuery),readTime:di(s.readTime)}})(t)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(){this.overlays=new Et(Te.comparator),this.Lr=new Map}getOverlay(e,t){return ne.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Oo();return ne.forEach(t,(s=>this.getOverlay(e,s).next((l=>{l!==null&&r.set(s,l)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((s,l)=>{this.bt(e,t,l)})),ne.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Lr.get(r);return s!==void 0&&(s.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(r)),ne.resolve()}getOverlaysForCollection(e,t,r){const s=Oo(),l=t.length+1,c=new Te(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const d=h.getNext().value,m=d.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===l&&d.largestBatchId>r&&s.set(d.getKey(),d)}return ne.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let l=new Et(((m,g)=>m-g));const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let g=l.get(m.largestBatchId);g===null&&(g=Oo(),l=l.insert(m.largestBatchId,g)),g.set(m.getKey(),m)}}const h=Oo(),d=l.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((m,g)=>h.set(m,g))),!(h.size()>=s)););return ne.resolve(h)}bt(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const c=this.Lr.get(s.largestBatchId).delete(r.key);this.Lr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new BN(t,r));let l=this.Lr.get(t);l===void 0&&(l=Qe(),this.Lr.set(t,l)),this.Lr.set(t,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(){this.sessionToken=cn.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{constructor(){this.kr=new Gt(Zt.Kr),this.qr=new Gt(Zt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const r=new Zt(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new Zt(e,t))}Qr(e,t){e.forEach((r=>this.removeReference(r,t)))}Gr(e){const t=new Te(new ct([])),r=new Zt(t,e),s=new Zt(t,e+1),l=[];return this.qr.forEachInRange([r,s],(c=>{this.Wr(c),l.push(c.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Te(new ct([])),r=new Zt(t,e),s=new Zt(t,e+1);let l=Qe();return this.qr.forEachInRange([r,s],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Zt(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Zt{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Te.comparator(e.key,t.key)||Ge(e.Hr,t.Hr)}static Ur(e,t){return Ge(e.Hr,t.Hr)||Te.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Gt(Zt.Kr)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new ON(l,t,r,s);this.mutationQueue.push(c);for(const h of s)this.Jr=this.Jr.add(new Zt(h.key,l)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ne.resolve(c)}lookupMutationBatch(e,t){return ne.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Xr(r),l=s<0?0:s;return ne.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?Ay:this.Yn-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Zt(t,0),s=new Zt(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([r,s],(c=>{const h=this.Zr(c.Hr);l.push(h)})),ne.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Gt(Ge);return t.forEach((s=>{const l=new Zt(s,0),c=new Zt(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,c],(h=>{r=r.add(h.Hr)}))})),ne.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let l=r;Te.isDocumentKey(l)||(l=l.child(""));const c=new Zt(new Te(l),0);let h=new Gt(Ge);return this.Jr.forEachWhile((d=>{const m=d.key.path;return!!r.isPrefixOf(m)&&(m.length===s&&(h=h.add(d.Hr)),!0)}),c),ne.resolve(this.Yr(h))}Yr(e){const t=[];return e.forEach((r=>{const s=this.Zr(r);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){rt(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return ne.forEach(t.mutations,(s=>{const l=new Zt(s.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,t){const r=new Zt(t,0),s=this.Jr.firstAfterOrEqual(r);return ne.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{constructor(e){this.ti=e,this.docs=(function(){return new Et(Te.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),l=s?s.size:0,c=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ne.resolve(r?r.document.mutableCopy():vn.newInvalidDocument(t))}getEntries(e,t){let r=Yi();return t.forEach((s=>{const l=this.docs.get(s);r=r.insert(s,l?l.document.mutableCopy():vn.newInvalidDocument(s))})),ne.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let l=Yi();const c=t.path,h=new Te(c.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){const{key:m,value:{document:g}}=d.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||XP(YP(g),r)<=0||(s.has(g.key)||vf(t,g))&&(l=l.insert(g.key,g.mutableCopy()))}return ne.resolve(l)}getAllFromCollectionGroup(e,t,r,s){Ne(9500)}ni(e,t){return ne.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new E4(this)}getSize(e){return ne.resolve(this.size)}}class E4 extends y4{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?t.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(r)})),ne.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T4{constructor(e){this.persistence=e,this.ri=new Zo((t=>Ny(t)),Dy),this.lastRemoteSnapshotVersion=Oe.min(),this.highestTargetId=0,this.ii=0,this.si=new zy,this.targetCount=0,this.oi=ml._r()}forEachTarget(e,t){return this.ri.forEach(((r,s)=>t(s))),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),ne.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new ml(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,ne.resolve()}updateTargetData(e,t){return this.lr(t),ne.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,t,r){let s=0;const l=[];return this.ri.forEach(((c,h)=>{h.sequenceNumber<=t&&r.get(h.targetId)===null&&(this.ri.delete(c),l.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)})),ne.waitFor(l).next((()=>s))}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,t){const r=this.ri.get(t)||null;return ne.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),ne.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);const s=this.persistence.referenceDelegate,l=[];return s&&t.forEach((c=>{l.push(s.markPotentiallyOrphaned(e,c))})),ne.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),ne.resolve()}getMatchingKeysForTargetId(e,t){const r=this.si.jr(t);return ne.resolve(r)}containsKey(e,t){return ne.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(e,t){this._i={},this.overlays={},this.ai=new mf(0),this.ui=!1,this.ui=!0,this.ci=new k4,this.referenceDelegate=e(this),this.li=new T4(this),this.indexManager=new u4,this.remoteDocumentCache=(function(s){return new S4(s)})((r=>this.referenceDelegate.hi(r))),this.serializer=new l4(t),this.Pi=new w4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new b4,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new _4(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){xe("MemoryPersistence","Starting transaction:",e);const s=new I4(this.ai.next());return this.referenceDelegate.Ti(),r(s).next((l=>this.referenceDelegate.Ii(s).next((()=>l)))).toPromise().then((l=>(s.raiseOnCommittedEvent(),l)))}Ei(e,t){return ne.or(Object.values(this._i).map((r=>()=>r.containsKey(e,t))))}}class I4 extends ZP{constructor(e){super(),this.currentSequenceNumber=e}}class Fy{constructor(e){this.persistence=e,this.Ri=new zy,this.Ai=null}static Vi(e){return new Fy(e)}get di(){if(this.Ai)return this.Ai;throw Ne(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),ne.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),ne.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),ne.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((s=>this.di.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((l=>this.di.add(l.toString())))})).next((()=>r.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.di,(r=>{const s=Te.fromPath(r);return this.mi(e,s).next((l=>{l||t.removeEntry(s,Oe.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return ne.or([()=>ne.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Uh{constructor(e,t){this.persistence=e,this.fi=new Zo((r=>nN(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=g4(this,t)}static Vi(e,t){return new Uh(e,t)}Ti(){}Ii(e){return ne.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}mr(e,t){return ne.forEach(this.fi,((r,s)=>this.wr(e,r,s).next((l=>l?ne.resolve():t(s)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),l=s.newChangeBuffer();return s.ni(e,(c=>this.wr(e,c,t).next((h=>{h||(r++,l.removeEntry(c,Oe.min()))})))).next((()=>l.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),ne.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),ne.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),ne.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=vh(e.data.value)),t}wr(e,t,r){return ne.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.fi.get(t);return ne.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=s}static Es(e,t){let r=Qe(),s=Qe();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:s=s.add(l.doc.key)}return new Uy(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return tA()?8:eN(wn())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,s){const l={result:null};return this.gs(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ps(e,t,s,r).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new C4;return this.ys(e,t,c).next((h=>{if(l.result=h,this.As)return this.ws(e,t,c,h.size)}))})).next((()=>l.result))}ws(e,t,r,s){return r.documentReadCount<this.Vs?(Wa()<=qe.DEBUG&&xe("QueryEngine","SDK will not create cache indexes for query:",$a(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ne.resolve()):(Wa()<=qe.DEBUG&&xe("QueryEngine","Query:",$a(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(Wa()<=qe.DEBUG&&xe("QueryEngine","The SDK decides to create cache indexes for query:",$a(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ui(t))):ne.resolve())}gs(e,t){if(fw(t))return ne.resolve(null);let r=ui(t);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=zh(t,null,"F"),r=ui(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const c=Qe(...l);return this.fs.getDocuments(e,c).next((h=>this.indexManager.getMinOffset(e,r).next((d=>{const m=this.bs(t,h);return this.Ss(t,m,c,d.readTime)?this.gs(e,zh(t,null,"F")):this.Ds(e,m,t,d)}))))})))))}ps(e,t,r,s){return fw(t)||s.isEqual(Oe.min())?ne.resolve(null):this.fs.getDocuments(e,r).next((l=>{const c=this.bs(t,l);return this.Ss(t,c,r,s)?ne.resolve(null):(Wa()<=qe.DEBUG&&xe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),$a(t)),this.Ds(e,c,t,QP(s,eu)).next((h=>h)))}))}bs(e,t){let r=new Gt(dS(e));return t.forEach(((s,l)=>{vf(e,l)&&(r=r.add(l))})),r}Ss(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(s)>0)}ys(e,t,r){return Wa()<=qe.DEBUG&&xe("QueryEngine","Using full collection scan to execute query:",$a(t)),this.fs.getDocumentsMatchingQuery(e,t,Ws.min(),r)}Ds(e,t,r,s){return this.fs.getDocumentsMatchingQuery(e,r,s).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy="LocalStore",A4=3e8;class R4{constructor(e,t,r,s){this.persistence=e,this.Cs=t,this.serializer=s,this.vs=new Et(Ge),this.Fs=new Zo((l=>Ny(l)),Dy),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new x4(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function P4(n,e,t,r){return new R4(n,e,t,r)}async function VS(n,e){const t=Fe(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next((l=>(s=l,t.Os(e),t.mutationQueue.getAllMutationBatches(r)))).next((l=>{const c=[],h=[];let d=Qe();for(const m of s){c.push(m.batchId);for(const g of m.mutations)d=d.add(g.key)}for(const m of l){h.push(m.batchId);for(const g of m.mutations)d=d.add(g.key)}return t.localDocuments.getDocuments(r,d).next((m=>({Ns:m,removedBatchIds:c,addedBatchIds:h})))}))}))}function N4(n,e){const t=Fe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(h,d,m,g){const y=m.batch,x=y.keys();let E=ne.resolve();return x.forEach((k=>{E=E.next((()=>g.getEntry(d,k))).next((S=>{const T=m.docVersions.get(k);rt(T!==null,48541),S.version.compareTo(T)<0&&(y.applyToRemoteDocument(S,m),S.isValidDocument()&&(S.setReadTime(m.commitVersion),g.addEntry(S)))}))})),E.next((()=>h.mutationQueue.removeMutationBatch(d,y)))})(t,r,e,l).next((()=>l.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(h){let d=Qe();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(d=d.add(h.batch.mutations[m].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(r,s)))}))}function LS(n){const e=Fe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function D4(n,e){const t=Fe(n),r=e.snapshotVersion;let s=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.xs.newChangeBuffer({trackRemovals:!0});s=t.vs;const h=[];e.targetChanges.forEach(((g,y)=>{const x=s.get(y);if(!x)return;h.push(t.li.removeMatchingKeys(l,g.removedDocuments,y).next((()=>t.li.addMatchingKeys(l,g.addedDocuments,y))));let E=x.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(y)!==null?E=E.withResumeToken(cn.EMPTY_BYTE_STRING,Oe.min()).withLastLimboFreeSnapshotVersion(Oe.min()):g.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(g.resumeToken,r)),s=s.insert(y,E),(function(S,T,P){return S.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=A4?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0})(x,E,g)&&h.push(t.li.updateTargetData(l,E))}));let d=Yi(),m=Qe();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(l,g))})),h.push(M4(l,c,e.documentUpdates).next((g=>{d=g.Bs,m=g.Ls}))),!r.isEqual(Oe.min())){const g=t.li.getLastRemoteSnapshotVersion(l).next((y=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,r)));h.push(g)}return ne.waitFor(h).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,d,m))).next((()=>d))})).then((l=>(t.vs=s,l)))}function M4(n,e,t){let r=Qe(),s=Qe();return t.forEach((l=>r=r.add(l))),e.getEntries(n,r).next((l=>{let c=Yi();return t.forEach(((h,d)=>{const m=l.get(h);d.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(h)),d.isNoDocument()&&d.version.isEqual(Oe.min())?(e.removeEntry(h,d.readTime),c=c.insert(h,d)):!m.isValidDocument()||d.version.compareTo(m.version)>0||d.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(d),c=c.insert(h,d)):xe(Wy,"Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",d.version)})),{Bs:c,Ls:s}}))}function V4(n,e){const t=Fe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Ay),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function L4(n,e){const t=Fe(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return t.li.getTargetData(r,e).next((l=>l?(s=l,ne.resolve(s)):t.li.allocateTargetId(r).next((c=>(s=new Ms(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=t.vs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r}))}async function Sg(n,e,t){const r=Fe(n),s=r.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,(c=>r.persistence.referenceDelegate.removeTarget(c,s)))}catch(c){if(!Cl(c))throw c;xe(Wy,`Failed to update sequence numbers for target ${e}: ${c}`)}r.vs=r.vs.remove(e),r.Fs.delete(s.target)}function Tw(n,e,t){const r=Fe(n);let s=Oe.min(),l=Qe();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(d,m,g){const y=Fe(d),x=y.Fs.get(g);return x!==void 0?ne.resolve(y.vs.get(x)):y.li.getTargetData(m,g)})(r,c,ui(e)).next((h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(c,h.targetId).next((d=>{l=d}))})).next((()=>r.Cs.getDocumentsMatchingQuery(c,e,t?s:Oe.min(),t?l:Qe()))).next((h=>(O4(r,SN(e),h),{documents:h,ks:l})))))}function O4(n,e,t){let r=n.Ms.get(e)||Oe.min();t.forEach(((s,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),n.Ms.set(e,r)}class Iw{constructor(){this.activeTargetIds=AN()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class B4{constructor(){this.vo=new Iw,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Iw,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cw="ConnectivityMonitor";class jw{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){xe(Cw,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){xe(Cw,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rh=null;function Eg(){return rh===null?rh=(function(){return 268435456+Math.round(2147483648*Math.random())})():rh++,"0x"+rh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp="RestConnection",F4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class U4{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.$o=this.databaseId.database===Lh?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,t,r,s,l){const c=Eg(),h=this.Qo(e,t.toUriEncodedString());xe(jp,`Sending RPC '${e}' ${c}:`,h,r);const d={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(d,s,l);const{host:m}=new URL(h),g=_l(m);return this.zo(e,h,d,r,g).then((y=>(xe(jp,`Received RPC '${e}' ${c}: `,y),y)),(y=>{throw ll(jp,`RPC '${e}' ${c} failed with error: `,y,"url: ",h,"request:",r),y}))}jo(e,t,r,s,l,c){return this.Wo(e,t,r,s,l)}Go(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Tl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,l)=>e[l]=s)),r&&r.headers.forEach(((s,l)=>e[l]=s))}Qo(e,t){const r=F4[e];let s=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W4{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gn="WebChannelConnection",jc=(n,e,t)=>{n.listen(e,(r=>{try{t(r)}catch(s){setTimeout((()=>{throw s}),0)}}))};class tl extends U4{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!tl.c_){const e=F_();jc(e,z_.STAT_EVENT,(t=>{t.stat===fg.PROXY?xe(gn,"STAT_EVENT: detected buffering proxy"):t.stat===fg.NOPROXY&&xe(gn,"STAT_EVENT: detected no buffering proxy")})),tl.c_=!0}}zo(e,t,r,s,l){const c=Eg();return new Promise(((h,d)=>{const m=new O_;m.setWithCredentials(!0),m.listenOnce(B_.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case yh.NO_ERROR:const y=m.getResponseJson();xe(gn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(y)),h(y);break;case yh.TIMEOUT:xe(gn,`RPC '${e}' ${c} timed out`),d(new ge(ee.DEADLINE_EXCEEDED,"Request time out"));break;case yh.HTTP_ERROR:const x=m.getStatus();if(xe(gn,`RPC '${e}' ${c} failed with status:`,x,"response text:",m.getResponseText()),x>0){let E=m.getResponseJson();Array.isArray(E)&&(E=E[0]);const k=E==null?void 0:E.error;if(k&&k.status&&k.message){const S=(function(P){const M=P.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(M)>=0?M:ee.UNKNOWN})(k.status);d(new ge(S,k.message))}else d(new ge(ee.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new ge(ee.UNAVAILABLE,"Connection failed."));break;default:Ne(9055,{l_:e,streamId:c,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{xe(gn,`RPC '${e}' ${c} completed.`)}}));const g=JSON.stringify(s);xe(gn,`RPC '${e}' ${c} sending request:`,s),m.send(t,"POST",g,r,15)}))}T_(e,t,r){const s=Eg(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(h.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(h.useFetchStreams=!0),this.Go(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const m=l.join("");xe(gn,`Creating RPC '${e}' stream ${s}: ${m}`,h);const g=c.createWebChannel(m,h);this.I_(g);let y=!1,x=!1;const E=new W4({Ho:k=>{x?xe(gn,`Not sending because RPC '${e}' stream ${s} is closed:`,k):(y||(xe(gn,`Opening RPC '${e}' stream ${s} transport.`),g.open(),y=!0),xe(gn,`RPC '${e}' stream ${s} sending:`,k),g.send(k))},Jo:()=>g.close()});return jc(g,Mc.EventType.OPEN,(()=>{x||(xe(gn,`RPC '${e}' stream ${s} transport opened.`),E.i_())})),jc(g,Mc.EventType.CLOSE,(()=>{x||(x=!0,xe(gn,`RPC '${e}' stream ${s} transport closed`),E.o_(),this.E_(g))})),jc(g,Mc.EventType.ERROR,(k=>{x||(x=!0,ll(gn,`RPC '${e}' stream ${s} transport errored. Name:`,k.name,"Message:",k.message),E.o_(new ge(ee.UNAVAILABLE,"The operation could not be completed")))})),jc(g,Mc.EventType.MESSAGE,(k=>{var S;if(!x){const T=k.data[0];rt(!!T,16349);const P=T,M=(P==null?void 0:P.error)||((S=P[0])==null?void 0:S.error);if(M){xe(gn,`RPC '${e}' stream ${s} received error:`,M);const D=M.status;let U=(function(A){const C=Bt[A];if(C!==void 0)return _S(C)})(D),H=M.message;U===void 0&&(U=ee.INTERNAL,H="Unknown error status: "+D+" with message "+M.message),x=!0,E.o_(new ge(U,H)),g.close()}else xe(gn,`RPC '${e}' stream ${s} received:`,T),E.__(T)}})),tl.u_(),setTimeout((()=>{E.s_()}),0),E}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return U_()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $4(n){return new tl(n)}function Ap(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sf(n){return new GN(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tl.c_=!1;class OS{constructor(e,t,r=1e3,s=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=s,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-r);s>0&&xe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw="PersistentStream";class BS{constructor(e,t,r,s,l,c,h,d){this.Ci=e,this.b_=r,this.S_=s,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new OS(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ee.RESOURCE_EXHAUSTED?(Qi(t.toString()),Qi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===t&&this.G_(r,s)}),(r=>{e((()=>{const s=new ge(ee.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,t){const r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.H_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return xe(Aw,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(xe(Aw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class H4 extends BS{constructor(e,t,r,s,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=XN(this.serializer,e),r=(function(l){if(!("targetChange"in l))return Oe.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Oe.min():c.readTime?di(c.readTime):Oe.min()})(e);return this.listener.J_(t,r)}Z_(e){const t={};t.database=_g(this.serializer),t.addTarget=(function(l,c){let h;const d=c.target;if(h=vg(d)?{documents:e4(l,d)}:{query:t4(l,d).ft},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=TS(l,c.resumeToken);const m=wg(l,c.expectedCount);m!==null&&(h.expectedCount=m)}else if(c.snapshotVersion.compareTo(Oe.min())>0){h.readTime=Fh(l,c.snapshotVersion.toTimestamp());const m=wg(l,c.expectedCount);m!==null&&(h.expectedCount=m)}return h})(this.serializer,e);const r=r4(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){const t={};t.database=_g(this.serializer),t.removeTarget=e,this.K_(t)}}class K4 extends BS{constructor(e,t,r,s,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,c),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return rt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,rt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){rt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=ZN(e.writeResults,e.commitTime),r=di(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=_g(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>JN(this.serializer,r)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4{}class G4 extends q4{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ge(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,bg(t,r),s,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ge(ee.UNKNOWN,l.toString())}))}jo(e,t,r,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,h])=>this.connection.jo(e,bg(t,r),s,c,h,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ge(ee.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function Q4(n,e,t,r){return new G4(n,e,t,r)}class Y4{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Qi(t),this.aa=!1):xe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo="RemoteStore";class X4{constructor(e,t,r,s,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((c=>{r.enqueueAndForget((async()=>{ea(this)&&(xe(qo,"Restarting streams for network reachability change."),await(async function(d){const m=Fe(d);m.Ea.add(4),await Su(m),m.Va.set("Unknown"),m.Ea.delete(4),await Ef(m)})(this))}))})),this.Va=new Y4(r,s)}}async function Ef(n){if(ea(n))for(const e of n.Ra)await e(!0)}async function Su(n){for(const e of n.Ra)await e(!1)}function zS(n,e){const t=Fe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),qy(t)?Ky(t):Al(t).O_()&&Hy(t,e))}function $y(n,e){const t=Fe(n),r=Al(t);t.Ia.delete(e),r.O_()&&FS(t,e),t.Ia.size===0&&(r.O_()?r.L_():ea(t)&&t.Va.set("Unknown"))}function Hy(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Oe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Al(n).Z_(e)}function FS(n,e){n.da.$e(e),Al(n).X_(e)}function Ky(n){n.da=new $N({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Al(n).start(),n.Va.ua()}function qy(n){return ea(n)&&!Al(n).x_()&&n.Ia.size>0}function ea(n){return Fe(n).Ea.size===0}function US(n){n.da=void 0}async function J4(n){n.Va.set("Online")}async function Z4(n){n.Ia.forEach(((e,t)=>{Hy(n,e)}))}async function eD(n,e){US(n),qy(n)?(n.Va.ha(e),Ky(n)):n.Va.set("Unknown")}async function tD(n,e,t){if(n.Va.set("Online"),e instanceof ES&&e.state===2&&e.cause)try{await(async function(s,l){const c=l.cause;for(const h of l.targetIds)s.Ia.has(h)&&(await s.remoteSyncer.rejectListen(h,c),s.Ia.delete(h),s.da.removeTarget(h))})(n,e)}catch(r){xe(qo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Wh(n,r)}else if(e instanceof bh?n.da.Xe(e):e instanceof SS?n.da.st(e):n.da.tt(e),!t.isEqual(Oe.min()))try{const r=await LS(n.localStore);t.compareTo(r)>=0&&await(function(l,c){const h=l.da.Tt(c);return h.targetChanges.forEach(((d,m)=>{if(d.resumeToken.approximateByteSize()>0){const g=l.Ia.get(m);g&&l.Ia.set(m,g.withResumeToken(d.resumeToken,c))}})),h.targetMismatches.forEach(((d,m)=>{const g=l.Ia.get(d);if(!g)return;l.Ia.set(d,g.withResumeToken(cn.EMPTY_BYTE_STRING,g.snapshotVersion)),FS(l,d);const y=new Ms(g.target,d,m,g.sequenceNumber);Hy(l,y)})),l.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(r){xe(qo,"Failed to raise snapshot:",r),await Wh(n,r)}}async function Wh(n,e,t){if(!Cl(e))throw e;n.Ea.add(1),await Su(n),n.Va.set("Offline"),t||(t=()=>LS(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{xe(qo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Ef(n)}))}function WS(n,e){return e().catch((t=>Wh(n,t,e)))}async function Tf(n){const e=Fe(n),t=qs(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ay;for(;nD(e);)try{const s=await V4(e.localStore,r);if(s===null){e.Ta.length===0&&t.L_();break}r=s.batchId,rD(e,s)}catch(s){await Wh(e,s)}$S(e)&&HS(e)}function nD(n){return ea(n)&&n.Ta.length<10}function rD(n,e){n.Ta.push(e);const t=qs(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function $S(n){return ea(n)&&!qs(n).x_()&&n.Ta.length>0}function HS(n){qs(n).start()}async function iD(n){qs(n).ra()}async function sD(n){const e=qs(n);for(const t of n.Ta)e.ea(t.mutations)}async function oD(n,e,t){const r=n.Ta.shift(),s=Ly.from(r,e,t);await WS(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await Tf(n)}async function aD(n,e){e&&qs(n).Y_&&await(async function(r,s){if((function(c){return FN(c)&&c!==ee.ABORTED})(s.code)){const l=r.Ta.shift();qs(r).B_(),await WS(r,(()=>r.remoteSyncer.rejectFailedWrite(l.batchId,s))),await Tf(r)}})(n,e),$S(n)&&HS(n)}async function Rw(n,e){const t=Fe(n);t.asyncQueue.verifyOperationInProgress(),xe(qo,"RemoteStore received new credentials");const r=ea(t);t.Ea.add(3),await Su(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Ef(t)}async function lD(n,e){const t=Fe(n);e?(t.Ea.delete(2),await Ef(t)):e||(t.Ea.add(2),await Su(t),t.Va.set("Unknown"))}function Al(n){return n.ma||(n.ma=(function(t,r,s){const l=Fe(t);return l.sa(),new H4(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(n.datastore,n.asyncQueue,{Zo:J4.bind(null,n),Yo:Z4.bind(null,n),t_:eD.bind(null,n),J_:tD.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),qy(n)?Ky(n):n.Va.set("Unknown")):(await n.ma.stop(),US(n))}))),n.ma}function qs(n){return n.fa||(n.fa=(function(t,r,s){const l=Fe(t);return l.sa(),new K4(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:iD.bind(null,n),t_:aD.bind(null,n),ta:sD.bind(null,n),na:oD.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await Tf(n)):(await n.fa.stop(),n.Ta.length>0&&(xe(qo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(e,t,r,s,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=l,this.deferred=new Ui,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,l){const c=Date.now()+r,h=new Gy(e,t,c,s,l);return h.start(r),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qy(n,e){if(Qi("AsyncQueue",`${e}: ${n}`),Cl(n))return new ge(ee.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{static emptySet(e){return new nl(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Te.comparator(t.key,r.key):(t,r)=>Te.comparator(t.key,r.key),this.keyedMap=Vc(),this.sortedSet=new Et(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof nl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=r.getNext().key;if(!s.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new nl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(){this.ga=new Et(Te.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ne(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class pl{constructor(e,t,r,s,l,c,h,d,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,s,l){const c=[];return t.forEach((h=>{c.push({type:0,doc:h})})),new pl(e,t,nl.emptySet(t),c,r,s,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class uD{constructor(){this.queries=Nw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const s=Fe(t),l=s.queries;s.queries=Nw(),l.forEach(((c,h)=>{for(const d of h.ba)d.onError(r)}))})(this,new ge(ee.ABORTED,"Firestore shutting down"))}}function Nw(){return new Zo((n=>uS(n)),yf)}async function KS(n,e){const t=Fe(n);let r=3;const s=e.query;let l=t.queries.get(s);l?!l.Sa()&&e.Da()&&(r=2):(l=new cD,r=e.Da()?0:1);try{switch(r){case 0:l.wa=await t.onListen(s,!0);break;case 1:l.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(c){const h=Qy(c,`Initialization of query '${$a(e.query)}' failed`);return void e.onError(h)}t.queries.set(s,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Yy(t)}async function qS(n,e){const t=Fe(n),r=e.query;let s=3;const l=t.queries.get(r);if(l){const c=l.ba.indexOf(e);c>=0&&(l.ba.splice(c,1),l.ba.length===0?s=e.Da()?0:1:!l.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function dD(n,e){const t=Fe(n);let r=!1;for(const s of e){const l=s.query,c=t.queries.get(l);if(c){for(const h of c.ba)h.Fa(s)&&(r=!0);c.wa=s}}r&&Yy(t)}function hD(n,e,t){const r=Fe(n),s=r.queries.get(e);if(s)for(const l of s.ba)l.onError(t);r.queries.delete(e)}function Yy(n){n.Ca.forEach((e=>{e.next()}))}var Tg,Dw;(Dw=Tg||(Tg={})).Ma="default",Dw.Cache="cache";class GS{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new pl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=pl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Tg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e){this.key=e}}class YS{constructor(e){this.key=e}}class fD{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Qe(),this.mutatedKeys=Qe(),this.eu=dS(e),this.tu=new nl(this.eu)}get nu(){return this.Za}ru(e,t){const r=t?t.iu:new Pw,s=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=s,h=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((g,y)=>{const x=s.get(g),E=vf(this.query,y)?y:null,k=!!x&&this.mutatedKeys.has(x.key),S=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let T=!1;x&&E?x.data.isEqual(E.data)?k!==S&&(r.track({type:3,doc:E}),T=!0):this.su(x,E)||(r.track({type:2,doc:E}),T=!0,(d&&this.eu(E,d)>0||m&&this.eu(E,m)<0)&&(h=!0)):!x&&E?(r.track({type:0,doc:E}),T=!0):x&&!E&&(r.track({type:1,doc:x}),T=!0,(d||m)&&(h=!0)),T&&(E?(c=c.add(E),l=S?l.add(g):l.delete(g)):(c=c.delete(g),l=l.delete(g)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const g=this.query.limitType==="F"?c.last():c.first();c=c.delete(g.key),l=l.delete(g.key),r.track({type:1,doc:g})}return{tu:c,iu:r,Ss:h,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((g,y)=>(function(E,k){const S=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ne(20277,{Vt:T})}};return S(E)-S(k)})(g.type,y.type)||this.eu(g.doc,y.doc))),this.ou(r),s=s??!1;const h=t&&!s?this._u():[],d=this.Ya.size===0&&this.current&&!s?1:0,m=d!==this.Xa;return this.Xa=d,c.length!==0||m?{snapshot:new pl(this.query,e.tu,l,c,e.mutatedKeys,d===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Pw,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Qe(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const t=[];return e.forEach((r=>{this.Ya.has(r)||t.push(new YS(r))})),this.Ya.forEach((r=>{e.has(r)||t.push(new QS(r))})),t}cu(e){this.Za=e.ks,this.Ya=Qe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return pl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Xy="SyncEngine";class mD{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class pD{constructor(e){this.key=e,this.hu=!1}}class gD{constructor(e,t,r,s,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Zo((h=>uS(h)),yf),this.Iu=new Map,this.Eu=new Set,this.Ru=new Et(Te.comparator),this.Au=new Map,this.Vu=new zy,this.du={},this.mu=new Map,this.fu=ml.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function yD(n,e,t=!0){const r=n2(n);let s;const l=r.Tu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),s=l.view.lu()):s=await XS(r,e,t,!0),s}async function vD(n,e){const t=n2(n);await XS(t,e,!0,!1)}async function XS(n,e,t,r){const s=await L4(n.localStore,ui(e)),l=s.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let h;return r&&(h=await xD(n,e,l,c==="current",s.resumeToken)),n.isPrimaryClient&&t&&zS(n.remoteStore,s),h}async function xD(n,e,t,r,s){n.pu=(y,x,E)=>(async function(S,T,P,M){let D=T.view.ru(P);D.Ss&&(D=await Tw(S.localStore,T.query,!1).then((({documents:A})=>T.view.ru(A,D))));const U=M&&M.targetChanges.get(T.targetId),H=M&&M.targetMismatches.get(T.targetId)!=null,K=T.view.applyChanges(D,S.isPrimaryClient,U,H);return Vw(S,T.targetId,K.au),K.snapshot})(n,y,x,E);const l=await Tw(n.localStore,e,!0),c=new fD(e,l.ks),h=c.ru(l.documents),d=_u.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),m=c.applyChanges(h,n.isPrimaryClient,d);Vw(n,t,m.au);const g=new mD(e,t,c);return n.Tu.set(e,g),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),m.snapshot}async function wD(n,e,t){const r=Fe(n),s=r.Tu.get(e),l=r.Iu.get(s.targetId);if(l.length>1)return r.Iu.set(s.targetId,l.filter((c=>!yf(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Sg(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),t&&$y(r.remoteStore,s.targetId),Ig(r,s.targetId)})).catch(Il)):(Ig(r,s.targetId),await Sg(r.localStore,s.targetId,!0))}async function bD(n,e){const t=Fe(n),r=t.Tu.get(e),s=t.Iu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),$y(t.remoteStore,r.targetId))}async function kD(n,e,t){const r=jD(n);try{const s=await(function(c,h){const d=Fe(c),m=yt.now(),g=h.reduce(((E,k)=>E.add(k.key)),Qe());let y,x;return d.persistence.runTransaction("Locally write mutations","readwrite",(E=>{let k=Yi(),S=Qe();return d.xs.getEntries(E,g).next((T=>{k=T,k.forEach(((P,M)=>{M.isValidDocument()||(S=S.add(P))}))})).next((()=>d.localDocuments.getOverlayedDocuments(E,k))).next((T=>{y=T;const P=[];for(const M of h){const D=VN(M,y.get(M.key).overlayedDocument);D!=null&&P.push(new no(M.key,D,nS(D.value.mapValue),Tn.exists(!0)))}return d.mutationQueue.addMutationBatch(E,m,P,h)})).next((T=>{x=T;const P=T.applyToLocalDocumentSet(y,S);return d.documentOverlayCache.saveOverlays(E,T.batchId,P)}))})).then((()=>({batchId:x.batchId,changes:fS(y)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(c,h,d){let m=c.du[c.currentUser.toKey()];m||(m=new Et(Ge)),m=m.insert(h,d),c.du[c.currentUser.toKey()]=m})(r,s.batchId,t),await Eu(r,s.changes),await Tf(r.remoteStore)}catch(s){const l=Qy(s,"Failed to persist write");t.reject(l)}}async function JS(n,e){const t=Fe(n);try{const r=await D4(t.localStore,e);e.targetChanges.forEach(((s,l)=>{const c=t.Au.get(l);c&&(rt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c.hu=!0:s.modifiedDocuments.size>0?rt(c.hu,14607):s.removedDocuments.size>0&&(rt(c.hu,42227),c.hu=!1))})),await Eu(t,r,e)}catch(r){await Il(r)}}function Mw(n,e,t){const r=Fe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Tu.forEach(((l,c)=>{const h=c.view.va(e);h.snapshot&&s.push(h.snapshot)})),(function(c,h){const d=Fe(c);d.onlineState=h;let m=!1;d.queries.forEach(((g,y)=>{for(const x of y.ba)x.va(h)&&(m=!0)})),m&&Yy(d)})(r.eventManager,e),s.length&&r.Pu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function _D(n,e,t){const r=Fe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Au.get(e),l=s&&s.key;if(l){let c=new Et(Te.comparator);c=c.insert(l,vn.newNoDocument(l,Oe.min()));const h=Qe().add(l),d=new _f(Oe.min(),new Map,new Et(Ge),c,h);await JS(r,d),r.Ru=r.Ru.remove(l),r.Au.delete(e),Jy(r)}else await Sg(r.localStore,e,!1).then((()=>Ig(r,e,t))).catch(Il)}async function SD(n,e){const t=Fe(n),r=e.batch.batchId;try{const s=await N4(t.localStore,e);e2(t,r,null),ZS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Eu(t,s)}catch(s){await Il(s)}}async function ED(n,e,t){const r=Fe(n);try{const s=await(function(c,h){const d=Fe(c);return d.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let g;return d.mutationQueue.lookupMutationBatch(m,h).next((y=>(rt(y!==null,37113),g=y.keys(),d.mutationQueue.removeMutationBatch(m,y)))).next((()=>d.mutationQueue.performConsistencyCheck(m))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(m,g,h))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,g))).next((()=>d.localDocuments.getDocuments(m,g)))}))})(r.localStore,e);e2(r,e,t),ZS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Eu(r,s)}catch(s){await Il(s)}}function ZS(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function e2(n,e,t){const r=Fe(n);let s=r.du[r.currentUser.toKey()];if(s){const l=s.get(e);l&&(t?l.reject(t):l.resolve(),s=s.remove(e)),r.du[r.currentUser.toKey()]=s}}function Ig(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((r=>{n.Vu.containsKey(r)||t2(n,r)}))}function t2(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&($y(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),Jy(n))}function Vw(n,e,t){for(const r of t)r instanceof QS?(n.Vu.addReference(r.key,e),TD(n,r)):r instanceof YS?(xe(Xy,"Document no longer in limbo: "+r.key),n.Vu.removeReference(r.key,e),n.Vu.containsKey(r.key)||t2(n,r.key)):Ne(19791,{wu:r})}function TD(n,e){const t=e.key,r=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(r)||(xe(Xy,"New document in limbo: "+t),n.Eu.add(r),Jy(n))}function Jy(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Te(ct.fromString(e)),r=n.fu.next();n.Au.set(r,new pD(t)),n.Ru=n.Ru.insert(t,r),zS(n.remoteStore,new Ms(ui(My(t.path)),r,"TargetPurposeLimboResolution",mf.ce))}}async function Eu(n,e,t){const r=Fe(n),s=[],l=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((h,d)=>{c.push(r.pu(d,e,t).then((m=>{var g;if((m||t)&&r.isPrimaryClient){const y=m?!m.fromCache:(g=t==null?void 0:t.targetChanges.get(d.targetId))==null?void 0:g.current;r.sharedClientState.updateQueryState(d.targetId,y?"current":"not-current")}if(m){s.push(m);const y=Uy.Es(d.targetId,m);l.push(y)}})))})),await Promise.all(c),r.Pu.J_(s),await(async function(d,m){const g=Fe(d);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(y=>ne.forEach(m,(x=>ne.forEach(x.Ts,(E=>g.persistence.referenceDelegate.addReference(y,x.targetId,E))).next((()=>ne.forEach(x.Is,(E=>g.persistence.referenceDelegate.removeReference(y,x.targetId,E)))))))))}catch(y){if(!Cl(y))throw y;xe(Wy,"Failed to update sequence numbers: "+y)}for(const y of m){const x=y.targetId;if(!y.fromCache){const E=g.vs.get(x),k=E.snapshotVersion,S=E.withLastLimboFreeSnapshotVersion(k);g.vs=g.vs.insert(x,S)}}})(r.localStore,l))}async function ID(n,e){const t=Fe(n);if(!t.currentUser.isEqual(e)){xe(Xy,"User change. New user:",e.toKey());const r=await VS(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((h=>{h.forEach((d=>{d.reject(new ge(ee.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Eu(t,r.Ns)}}function CD(n,e){const t=Fe(n),r=t.Au.get(e);if(r&&r.hu)return Qe().add(r.key);{let s=Qe();const l=t.Iu.get(e);if(!l)return s;for(const c of l){const h=t.Tu.get(c);s=s.unionWith(h.view.nu)}return s}}function n2(n){const e=Fe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=JS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=CD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_D.bind(null,e),e.Pu.J_=dD.bind(null,e.eventManager),e.Pu.yu=hD.bind(null,e.eventManager),e}function jD(n){const e=Fe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=SD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ED.bind(null,e),e}class $h{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Sf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return P4(this.persistence,new j4,e.initialUser,this.serializer)}Cu(e){return new MS(Fy.Vi,this.serializer)}Du(e){return new B4}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$h.provider={build:()=>new $h};class AD extends $h{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){rt(this.persistence.referenceDelegate instanceof Uh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new m4(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Nn.withCacheSize(this.cacheSizeBytes):Nn.DEFAULT;return new MS((r=>Uh.Vi(r,t)),this.serializer)}}class Cg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Mw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=ID.bind(null,this.syncEngine),await lD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new uD})()}createDatastore(e){const t=Sf(e.databaseInfo.databaseId),r=$4(e.databaseInfo);return Q4(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,s,l,c,h){return new X4(r,s,l,c,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>Mw(this.syncEngine,t,0)),(function(){return jw.v()?new jw:new z4})())}createSyncEngine(e,t){return(function(s,l,c,h,d,m,g){const y=new gD(s,l,c,h,d,m);return g&&(y.gu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const l=Fe(s);xe(qo,"RemoteStore shutting down."),l.Ea.add(5),await Su(l),l.Aa.shutdown(),l.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Cg.provider={build:()=>new Cg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Qi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs="FirestoreClient";class RD{constructor(e,t,r,s,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=s,this.user=yn.UNAUTHENTICATED,this.clientId=jy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(async c=>{xe(Gs,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(xe(Gs,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ui;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Qy(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Rp(n,e){n.asyncQueue.verifyOperationInProgress(),xe(Gs,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async s=>{r.isEqual(s)||(await VS(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Lw(n,e){n.asyncQueue.verifyOperationInProgress();const t=await PD(n);xe(Gs,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>Rw(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,s)=>Rw(e.remoteStore,s))),n._onlineComponents=e}async function PD(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){xe(Gs,"Using user provided OfflineComponentProvider");try{await Rp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===ee.FAILED_PRECONDITION||s.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;ll("Error using user provided cache. Falling back to memory cache: "+t),await Rp(n,new $h)}}else xe(Gs,"Using default OfflineComponentProvider"),await Rp(n,new AD(void 0));return n._offlineComponents}async function i2(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(xe(Gs,"Using user provided OnlineComponentProvider"),await Lw(n,n._uninitializedComponentsProvider._online)):(xe(Gs,"Using default OnlineComponentProvider"),await Lw(n,new Cg))),n._onlineComponents}function ND(n){return i2(n).then((e=>e.syncEngine))}async function s2(n){const e=await i2(n),t=e.eventManager;return t.onListen=yD.bind(null,e.syncEngine),t.onUnlisten=wD.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=vD.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=bD.bind(null,e.syncEngine),t}function DD(n,e,t={}){const r=new Ui;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,h,d,m){const g=new r2({next:x=>{g.Nu(),c.enqueueAndForget((()=>qS(l,y)));const E=x.docs.has(h);!E&&x.fromCache?m.reject(new ge(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&x.fromCache&&d&&d.source==="server"?m.reject(new ge(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(x)},error:x=>m.reject(x)}),y=new GS(My(h.path),g,{includeMetadataChanges:!0,Ka:!0});return KS(l,y)})(await s2(n),n.asyncQueue,e,t,r))),r.promise}function MD(n,e,t={}){const r=new Ui;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,h,d,m){const g=new r2({next:x=>{g.Nu(),c.enqueueAndForget((()=>qS(l,y))),x.fromCache&&d.source==="server"?m.reject(new ge(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(x)},error:x=>m.reject(x)}),y=new GS(h,g,{includeMetadataChanges:!0,Ka:!0});return KS(l,y)})(await s2(n),n.asyncQueue,e,t,r))),r.promise}function VD(n,e){const t=new Ui;return n.asyncQueue.enqueueAndForget((async()=>kD(await ND(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o2(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD="ComponentProvider",Ow=new Map;function OD(n,e,t,r,s){return new sN(n,e,t,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,o2(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2="firestore.googleapis.com",Bw=!0;class zw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ge(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=a2,this.ssl=Bw}else this.host=e.host,this.ssl=e.ssl??Bw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=DS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<h4)throw new ge(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}GP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=o2(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ge(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ge(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ge(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class If{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new OP;switch(r.type){case"firstParty":return new UP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ge(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=Ow.get(t);r&&(xe(LD,"Removing Datastore"),Ow.delete(t),r.terminate())})(this),Promise.resolve()}}function BD(n,e,t,r={}){var m;n=pr(n,If);const s=_l(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},h=`${e}:${t}`;s&&(Yk(`https://${h}`),Xk("Firestore",!0)),l.host!==a2&&l.host!==h&&ll("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...l,host:h,ssl:s,emulatorOptions:r};if(!Ki(d,c)&&(n._setSettings(d),r.mockUserToken)){let g,y;if(typeof r.mockUserToken=="string")g=r.mockUserToken,y=yn.MOCK_USER;else{g=Kj(r.mockUserToken,(m=n._app)==null?void 0:m.options.projectId);const x=r.mockUserToken.sub||r.mockUserToken.user_id;if(!x)throw new ge(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new yn(x)}n._authCredentials=new BP(new $_(g,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ro(this.firestore,e,this._query)}}class Nt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nt(this.firestore,e,this._key)}toJSON(){return{type:Nt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(bu(t,Nt._jsonSchema))return new Nt(e,r||null,new Te(ct.fromString(t.referencePath)))}}Nt._jsonSchemaVersion="firestore/documentReference/1.0",Nt._jsonSchema={type:Ut("string",Nt._jsonSchemaVersion),referencePath:Ut("string")};class Fs extends ro{constructor(e,t,r){super(e,t,My(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nt(this.firestore,null,new Te(e))}withConverter(e){return new Fs(this.firestore,e,this._path)}}function ut(n,e,...t){if(n=Vt(n),H_("collection","path",e),n instanceof If){const r=ct.fromString(e,...t);return Zx(r),new Fs(n,null,r)}{if(!(n instanceof Nt||n instanceof Fs))throw new ge(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ct.fromString(e,...t));return Zx(r),new Fs(n.firestore,null,r)}}function tt(n,e,...t){if(n=Vt(n),arguments.length===1&&(e=jy.newId()),H_("doc","path",e),n instanceof If){const r=ct.fromString(e,...t);return Jx(r),new Nt(n,null,new Te(r))}{if(!(n instanceof Nt||n instanceof Fs))throw new ge(ee.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ct.fromString(e,...t));return Jx(r),new Nt(n.firestore,n instanceof Fs?n.converter:null,new Te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw="AsyncQueue";class Uw{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new OS(this,"async_queue_retry"),this._c=()=>{const r=Ap();r&&xe(Fw,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Ap();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Ap();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ui;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Cl(e))throw e;xe(Fw,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Qi("INTERNAL UNHANDLED ERROR: ",Ww(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=Gy.createAndSchedule(this,e,t,r,(l=>this.hc(l)));return this.tc.push(s),s}uc(){this.nc&&Ne(47125,{Pc:Ww(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Ww(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class io extends If{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new Uw,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Uw(e),this._firestoreClient=void 0,await e}}}function zD(n,e){const t=typeof n=="object"?n:t_(),r=typeof n=="string"?n:Lh,s=yy(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const l=$j("firestore");l&&BD(s,...l)}return s}function Cf(n){if(n._terminated)throw new ge(ee.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||FD(n),n._firestoreClient}function FD(n){var r,s,l,c;const e=n._freezeSettings(),t=OD(n._databaseId,((r=n._app)==null?void 0:r.options.appId)||"",n._persistenceKey,(s=n._app)==null?void 0:s.options.apiKey,e);n._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new RD(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(d){const m=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(m),_online:m}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new cr(cn.fromBase64String(e))}catch(t){throw new ge(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new cr(cn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:cr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(bu(e,cr._jsonSchema))return cr.fromBase64String(e.bytes)}}cr._jsonSchemaVersion="firestore/bytes/1.0",cr._jsonSchema={type:Ut("string",cr._jsonSchemaVersion),bytes:Ut("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ge(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ln(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ge(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ge(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ge(this._lat,e._lat)||Ge(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:hi._jsonSchemaVersion}}static fromJSON(e){if(bu(e,hi._jsonSchema))return new hi(e.latitude,e.longitude)}}hi._jsonSchemaVersion="firestore/geoPoint/1.0",hi._jsonSchema={type:Ut("string",hi._jsonSchemaVersion),latitude:Ut("number"),longitude:Ut("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==s[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Mr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(bu(e,Mr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Mr(e.vectorValues);throw new ge(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Mr._jsonSchemaVersion="firestore/vectorValue/1.0",Mr._jsonSchema={type:Ut("string",Mr._jsonSchemaVersion),vectorValues:Ut("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UD=/^__.*__$/;class WD{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new no(e,this.data,this.fieldMask,t,this.fieldTransforms):new ku(e,this.data,t,this.fieldTransforms)}}class l2{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new no(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function c2(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ne(40011,{dataSource:n})}}class Af{constructor(e,t,r,s,l,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Af({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const t=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var s;const t=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Hh(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(c2(this.dataSource)&&UD.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class $D{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Sf(e)}createContext(e,t,r,s=!1){return new Af({dataSource:e,methodName:t,targetDoc:r,path:ln.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Tu(n){const e=n._freezeSettings(),t=Sf(n._databaseId);return new $D(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Zy(n,e,t,r,s,l={}){const c=n.createContext(l.merge||l.mergeFields?2:0,e,t,s);i0("Data must be an object, but it was:",c,r);const h=f2(r,c);let d,m;if(l.merge)d=new Yn(c.fieldMask),m=c.fieldTransforms;else if(l.mergeFields){const g=[];for(const y of l.mergeFields){const x=Go(e,y,t);if(!c.contains(x))throw new ge(ee.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);g2(g,x)||g.push(x)}d=new Yn(g),m=c.fieldTransforms.filter((y=>d.covers(y.field)))}else d=null,m=c.fieldTransforms;return new WD(new Dn(h),d,m)}class Rf extends ta{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Rf}}function u2(n,e,t){return new Af({dataSource:3,targetDoc:e.settings.targetDoc,methodName:n._methodName,arrayElement:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class e0 extends ta{_toFieldTransform(e){return new wf(e.path,new su)}isEqual(e){return e instanceof e0}}class t0 extends ta{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=u2(this,e,!0),r=this.Ac.map((l=>na(l,t))),s=new hl(r);return new wf(e.path,s)}isEqual(e){return e instanceof t0&&Ki(this.Ac,e.Ac)}}class n0 extends ta{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=u2(this,e,!0),r=this.Ac.map((l=>na(l,t))),s=new fl(r);return new wf(e.path,s)}isEqual(e){return e instanceof n0&&Ki(this.Ac,e.Ac)}}class r0 extends ta{constructor(e,t){super(e),this.Vc=t}_toFieldTransform(e){const t=new ou(e.serializer,gS(e.serializer,this.Vc));return new wf(e.path,t)}isEqual(e){return e instanceof r0&&this.Vc===e.Vc}}function d2(n,e,t,r){const s=n.createContext(1,e,t);i0("Data must be an object, but it was:",s,r);const l=[],c=Dn.empty();to(r,((d,m)=>{const g=p2(e,d,t);m=Vt(m);const y=s.childContextForFieldPath(g);if(m instanceof Rf)l.push(g);else{const x=na(m,y);x!=null&&(l.push(g),c.set(g,x))}}));const h=new Yn(l);return new l2(c,h,s.fieldTransforms)}function h2(n,e,t,r,s,l){const c=n.createContext(1,e,t),h=[Go(e,r,t)],d=[s];if(l.length%2!=0)throw new ge(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<l.length;x+=2)h.push(Go(e,l[x])),d.push(l[x+1]);const m=[],g=Dn.empty();for(let x=h.length-1;x>=0;--x)if(!g2(m,h[x])){const E=h[x];let k=d[x];k=Vt(k);const S=c.childContextForFieldPath(E);if(k instanceof Rf)m.push(E);else{const T=na(k,S);T!=null&&(m.push(E),g.set(E,T))}}const y=new Yn(m);return new l2(g,y,c.fieldTransforms)}function HD(n,e,t,r=!1){return na(t,n.createContext(r?4:3,e))}function na(n,e){if(m2(n=Vt(n)))return i0("Unsupported field value:",e,n),f2(n,e);if(n instanceof ta)return(function(r,s){if(!c2(s.dataSource))throw s.createError(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(s);l&&s.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,s){const l=[];let c=0;for(const h of r){let d=na(h,s.childContextForArray(c));d==null&&(d={nullValue:"NULL_VALUE"}),l.push(d),c++}return{arrayValue:{values:l}}})(n,e)}return(function(r,s){if((r=Vt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return gS(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=yt.fromDate(r);return{timestampValue:Fh(s.serializer,l)}}if(r instanceof yt){const l=new yt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Fh(s.serializer,l)}}if(r instanceof hi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof cr)return{bytesValue:TS(s.serializer,r._byteString)};if(r instanceof Nt){const l=s.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw s.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:By(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Mr)return(function(c,h){const d=c instanceof Mr?c.toArray():c;return{mapValue:{fields:{[eS]:{stringValue:tS},[Oh]:{arrayValue:{values:d.map((g=>{if(typeof g!="number")throw h.createError("VectorValues must only contain numeric values.");return Vy(h.serializer,g)}))}}}}}})(r,s);if(NS(r))return r._toProto(s.serializer);throw s.createError(`Unsupported field value: ${ff(r)}`)})(n,e)}function f2(n,e){const t={};return G_(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):to(n,((r,s)=>{const l=na(s,e.childContextForField(r));l!=null&&(t[r]=l)})),{mapValue:{fields:t}}}function m2(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof yt||n instanceof hi||n instanceof cr||n instanceof Nt||n instanceof ta||n instanceof Mr||NS(n))}function i0(n,e,t){if(!m2(t)||!K_(t)){const r=ff(t);throw r==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+r)}}function Go(n,e,t){if((e=Vt(e))instanceof jf)return e._internalPath;if(typeof e=="string")return p2(n,e);throw Hh("Field path arguments must be of type string or ",n,!1,void 0,t)}const KD=new RegExp("[~\\*/\\[\\]]");function p2(n,e,t){if(e.search(KD)>=0)throw Hh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new jf(...e.split("."))._internalPath}catch{throw Hh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Hh(n,e,t,r,s){const l=r&&!r.isEmpty(),c=s!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(l||c)&&(d+=" (found",l&&(d+=` in field ${r}`),c&&(d+=` in document ${s}`),d+=")"),new ge(ee.INVALID_ARGUMENT,h+n+d)}function g2(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{convertValue(e,t="none"){switch(Ks(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Hs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ne(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return to(e,((s,l)=>{r[s]=this.convertValue(l,t)})),r}convertVectorValue(e){var r,s,l;const t=(l=(s=(r=e.fields)==null?void 0:r[Oh].arrayValue)==null?void 0:s.values)==null?void 0:l.map((c=>Pt(c.doubleValue)));return new Mr(t)}convertGeoPoint(e){return new hi(Pt(e.latitude),Pt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=gf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(tu(e));default:return null}}convertTimestamp(e){const t=$s(e);return new yt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ct.fromString(e);rt(PS(r),9688,{name:e});const s=new nu(r.get(1),r.get(3)),l=new Te(r.popFirst(5));return s.isEqual(t)||Qi(`Document ${l} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2 extends qD{constructor(e){super(),this.firestore=e}convertBytes(e){return new cr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Nt(this.firestore,null,t)}}function Je(){return new e0("serverTimestamp")}function v2(...n){return new t0("arrayUnion",n)}function GD(...n){return new n0("arrayRemove",n)}function Qo(n){return new r0("increment",n)}const $w="@firebase/firestore",Hw="4.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e,t,r,s,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Nt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new QD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(Go("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class QD extends x2{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YD(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ge(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class s0{}class o0 extends s0{}function bn(n,e,...t){let r=[];e instanceof s0&&r.push(e),r=r.concat(t),(function(l){const c=l.filter((d=>d instanceof a0)).length,h=l.filter((d=>d instanceof Pf)).length;if(c>1||c>0&&h>0)throw new ge(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)n=s._apply(n);return n}class Pf extends o0{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Pf(e,t,r)}_apply(e){const t=this._parse(e);return w2(e._query,t),new ro(e.firestore,e.converter,xg(e._query,t))}_parse(e){const t=Tu(e.firestore);return(function(l,c,h,d,m,g,y){let x;if(m.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new ge(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){qw(y,g);const k=[];for(const S of y)k.push(Kw(d,l,S));x={arrayValue:{values:k}}}else x=Kw(d,l,y)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||qw(y,g),x=HD(h,c,y,g==="in"||g==="not-in");return Ft.create(m,g,x)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Bn(n,e,t){const r=e,s=Go("where",n);return Pf._create(s,r,t)}class a0 extends s0{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new a0(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:Lr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,l){let c=s;const h=l.getFlattenedFilters();for(const d of h)w2(c,d),c=xg(c,d)})(e._query,t),new ro(e.firestore,e.converter,xg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class l0 extends o0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new l0(e,t)}_apply(e){const t=(function(s,l,c){if(s.startAt!==null)throw new ge(ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ge(ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new iu(l,c)})(e._query,this._field,this._direction);return new ro(e.firestore,e.converter,_N(e._query,t))}}function Xi(n,e="asc"){const t=e,r=Go("orderBy",n);return l0._create(r,t)}class c0 extends o0{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new c0(e,t,r)}_apply(e){return new ro(e.firestore,e.converter,zh(e._query,this._limit,this._limitType))}}function XD(n){return c0._create("limit",n,"F")}function Kw(n,e,t){if(typeof(t=Vt(t))=="string"){if(t==="")throw new ge(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cS(e)&&t.indexOf("/")!==-1)throw new ge(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(ct.fromString(t));if(!Te.isDocumentKey(r))throw new ge(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return aw(n,new Te(r))}if(t instanceof Nt)return aw(n,t._key);throw new ge(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ff(t)}.`)}function qw(n,e){if(!Array.isArray(n)||n.length===0)throw new ge(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function w2(n,e){const t=(function(s,l){for(const c of s)for(const h of c.getFlattenedFilters())if(l.indexOf(h.op)>=0)return h.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ge(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ge(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function u0(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Oc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Fo extends x2{constructor(e,t,r,s,l,c){super(e,t,r,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new kh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Go("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Fo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Fo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Fo._jsonSchema={type:Ut("string",Fo._jsonSchemaVersion),bundleSource:Ut("string","DocumentSnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class kh extends Fo{data(e={}){return super.data(e)}}class rl{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Oc(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new kh(this._firestore,this._userDataWriter,r.key,r,new Oc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ge(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,l){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map((h=>{const d=new kh(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Oc(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:d,oldIndex:-1,newIndex:c++}}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((h=>l||h.type!==3)).map((h=>{const d=new kh(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Oc(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,g=-1;return h.type!==0&&(m=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),g=c.indexOf(h.doc.key)),{type:JD(h.type),doc:d,oldIndex:m,newIndex:g}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=rl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=jy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),s.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function JD(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ne(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rl._jsonSchemaVersion="firestore/querySnapshot/1.0",rl._jsonSchema={type:Ut("string",rl._jsonSchemaVersion),bundleSource:Ut("string","QuerySnapshot"),bundleName:Ut("string"),bundle:Ut("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Tu(e)}set(e,t,r){this._verifyNotCommitted();const s=Pp(e,this._firestore),l=u0(s.converter,t,r),c=Zy(this._dataReader,"WriteBatch.set",s._key,l,s.converter!==null,r);return this._mutations.push(c.toMutation(s._key,Tn.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const l=Pp(e,this._firestore);let c;return c=typeof(t=Vt(t))=="string"||t instanceof jf?h2(this._dataReader,"WriteBatch.update",l._key,t,r,s):d2(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,Tn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Pp(e,this._firestore);return this._mutations=this._mutations.concat(new kf(t._key,Tn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ge(ee.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Pp(n,e){if((n=Vt(n)).firestore!==e)throw new ge(ee.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zr(n){n=pr(n,Nt);const e=pr(n.firestore,io),t=Cf(e);return DD(t,n._key).then((r=>tM(e,n,r)))}function Dt(n){n=pr(n,ro);const e=pr(n.firestore,io),t=Cf(e),r=new y2(e);return YD(n._query),MD(t,n._query).then((s=>new rl(e,r,n,s)))}function Rl(n,e,t){n=pr(n,Nt);const r=pr(n.firestore,io),s=u0(n.converter,e,t),l=Tu(r);return Iu(r,[Zy(l,"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Tn.none())])}function Wt(n,e,t,...r){n=pr(n,Nt);const s=pr(n.firestore,io),l=Tu(s);let c;return c=typeof(e=Vt(e))=="string"||e instanceof jf?h2(l,"updateDoc",n._key,e,t,r):d2(l,"updateDoc",n._key,e),Iu(s,[c.toMutation(n._key,Tn.exists(!0))])}function eM(n){return Iu(pr(n.firestore,io),[new kf(n._key,Tn.none())])}function Nf(n,e){const t=pr(n.firestore,io),r=tt(n),s=u0(n.converter,e),l=Tu(n.firestore);return Iu(t,[Zy(l,"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,Tn.exists(!1))]).then((()=>r))}function Iu(n,e){const t=Cf(n);return VD(t,e)}function tM(n,e,t){const r=t.docs.get(e._key),s=new y2(n);return new Fo(n,s,e._key,r,new Oc(t.hasPendingWrites,t.fromCache),e.converter)}function b2(n){return n=pr(n,io),Cf(n),new ZD(n,(e=>Iu(n,e)))}(function(e,t=!0){LP(Sl),ol(new Wo("firestore",((r,{instanceIdentifier:s,options:l})=>{const c=r.getProvider("app").getImmediate(),h=new io(new zP(r.getProvider("auth-internal")),new WP(c,r.getProvider("app-check-internal")),oN(c,s),c);return l={useFetchStreams:t,...l},h._setSettings(l),h}),"PUBLIC").setMultipleInstances(!0)),Bs($w,Hw,e),Bs($w,Hw,"esm2020")})();var nM="firebase",rM="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bs(nM,rM,"app");const iM={apiKey:"AIzaSyCf4uRHqqZtYR3ZvlbHF9w59qGuEjlXcW4",authDomain:"kinderbucks-e3e8c.firebaseapp.com",projectId:"kinderbucks-e3e8c",storageBucket:"kinderbucks-e3e8c.firebasestorage.app",messagingSenderId:"18326874439",appId:"1:18326874439:web:ad902e6a1c794b2b3c4462",measurementId:"G-3JMD9HSMC3"},k2=e_(iM),Ee=zD(k2),Yo=MP(k2),Fr="users",Mn={ADMIN:"admin",BUSINESS:"business",MEMBER:"member"};function Pr(n){return n?Array.isArray(n.roles)?n.roles:Array.isArray(n.role)?n.role:n.role&&typeof n.role=="string"?[n.role]:[Mn.MEMBER]:[]}function sM(n,e){return Pr(n).includes(e)}async function oM(n,e,t){const s=(await yR(Yo,n,e)).user;return await wR(s,{displayName:t}),await Rl(tt(Ee,Fr,s.uid),{uid:s.uid,email:s.email,displayName:t,roles:[Mn.MEMBER],createdAt:Je(),lastLogin:Je()}),s}async function aM(n,e){const t=await vR(Yo,n,e);return await Wt(tt(Ee,Fr,t.user.uid),{lastLogin:Je()}),t.user}async function lM(){var l;const n=new Vi,t=(await $R(Yo,n)).user,r=tt(Ee,Fr,t.uid);return(await zr(r)).exists()?await Wt(r,{lastLogin:Je(),photoURL:t.photoURL}):await Rl(r,{uid:t.uid,email:t.email,displayName:t.displayName||((l=t.email)==null?void 0:l.split("@")[0]),photoURL:t.photoURL,roles:[Mn.MEMBER],createdAt:Je(),lastLogin:Je(),provider:"google"}),t}async function _2(){return SR(Yo)}async function jg(n){const e=tt(Ee,Fr,n),t=await zr(e);return t.exists()?t.data():null}async function cM(n,e){if(!Object.values(Mn).includes(e))throw new Error("Invalid role");const t=tt(Ee,Fr,n),r=await zr(t);if(r.exists()){const s=r.data();if(Array.isArray(s.roles))await Wt(t,{roles:v2(e),updatedAt:Je()});else{const l=s.role?[s.role]:[Mn.MEMBER];l.includes(e)||l.push(e),await Wt(t,{roles:l,updatedAt:Je()})}}}async function uM(n,e){if(!Object.values(Mn).includes(e))throw new Error("Invalid role");const t=tt(Ee,Fr,n),r=await zr(t);if(r.exists()){const s=r.data(),l=Pr(s);if(l.length===1&&l[0]===e){await Wt(t,{roles:[Mn.MEMBER],updatedAt:Je()});return}if(Array.isArray(s.roles))await Wt(t,{roles:GD(e),updatedAt:Je()});else{const h=(s.role?[s.role]:[Mn.MEMBER]).filter(d=>d!==e);await Wt(t,{roles:h.length>0?h:[Mn.MEMBER],updatedAt:Je()})}}}async function dM(n,e){const t=tt(Ee,Fr,n),r=await zr(t);if(r.exists()){const s=r.data(),l=Pr(s),c=l.includes(Mn.BUSINESS)?l:[...l,Mn.BUSINESS];await Wt(t,{roles:c,businessCode:e,updatedAt:Je()})}}async function hM(){return(await Dt(ut(Ee,Fr))).docs.map(e=>({id:e.id,...e.data()}))}function fM(n){return _R(Yo,n)}async function S2(n){const e=await jg(n);if(!e)return{exists:!1,canDelete:!1,reason:"User not found"};const t=bn(ut(Ee,"checkins"),Bn("memberId","==",n)),s=(await Dt(t)).size,l=bn(ut(Ee,"exchanges"),Bn("userId","==",n)),h=(await Dt(l)).size,d=!!e.businessCode,m=s>0||h>0||d;return{exists:!0,uid:n,displayName:e.displayName,email:e.email,roles:Pr(e),checkinCount:s,exchangeCount:h,isBusinessOwner:d,businessCode:e.businessCode,hasData:m,canSafeDelete:!m,reason:m?`Has ${s} check-ins, ${h} exchanges${d?", is business owner":""}`:"No associated data"}}async function mM(n,e=null,t=!1){const r=await S2(n);if(!r.exists)throw new Error("User not found");if(r.hasData&&!t)throw new Error(`Cannot delete: ${r.reason}. Use force=true to soft delete anyway.`);const s=tt(Ee,Fr,n);return await Wt(s,{isDeleted:!0,deletedAt:Je(),deletedBy:e}),{success:!0,wasForced:r.hasData&&t}}async function pM(n){const e=tt(Ee,Fr,n);await Wt(e,{isDeleted:!1,deletedAt:null,deletedBy:null,restoredAt:Je()})}async function gM(n=!1){const t=(await Dt(ut(Ee,Fr))).docs.map(r=>({id:r.id,...r.data()}));return n?t:t.filter(r=>!r.isDeleted)}async function yM(){return(await gM(!0)).filter(e=>e.isDeleted)}const E2=j.createContext(null);function vM({children:n}){const[e,t]=j.useState(null),[r,s]=j.useState(null),[l,c]=j.useState(!0);j.useEffect(()=>{const T=fM(async P=>{if(t(P),P){const M=await jg(P.uid);s(M)}else s(null);c(!1)});return()=>T()},[]);const h=Pr(r),d=!!e,m=h.includes(Mn.ADMIN),g=h.includes(Mn.BUSINESS),y=h.includes(Mn.MEMBER)||d,S={user:e,profile:r,roles:h,loading:l,isAuthenticated:d,isAdmin:m,isBusiness:g,isMember:y,hasRole:T=>sM(r,T),hasAnyRole:(...T)=>T.some(P=>h.includes(P)),refreshProfile:async()=>{if(e){const T=await jg(e.uid);s(T)}}};return o.jsx(E2.Provider,{value:S,children:n})}function Ur(){const n=j.useContext(E2);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n}/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xM=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),wM=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),Gw=n=>{const e=wM(n);return e.charAt(0).toUpperCase()+e.slice(1)},T2=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),bM=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var kM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _M=j.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:l,iconNode:c,...h},d)=>j.createElement("svg",{ref:d,...kM,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:T2("lucide",s),...!l&&!bM(h)&&{"aria-hidden":"true"},...h},[...c.map(([m,g])=>j.createElement(m,g)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=(n,e)=>{const t=j.forwardRef(({className:r,...s},l)=>j.createElement(_M,{ref:l,iconNode:e,className:T2(`lucide-${xM(Gw(n))}`,`lucide-${n}`,r),...s}));return t.displayName=Gw(n),t};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SM=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],I2=le("archive",SM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EM=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],Qw=le("arrow-down-right",EM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TM=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],C2=le("arrow-left",TM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IM=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],Df=le("arrow-right-left",IM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CM=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Ag=le("arrow-right",CM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jM=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],Yw=le("arrow-up-right",jM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AM=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],gr=le("award",AM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RM=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],Wi=le("banknote",RM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PM=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Xw=le("book-open",PM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],j2=le("briefcase",NM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DM=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],MM=le("building-2",DM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VM=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Mf=le("calendar",VM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LM=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],OM=le("camera",LM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BM=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],d0=le("chart-column",BM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zM=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Li=le("check",zM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FM=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],UM=le("chevron-down",FM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WM=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],$M=le("chevron-left",WM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HM=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],KM=le("chevron-up",HM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Us=le("circle-alert",qM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Vn=le("circle-check-big",GM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],A2=le("circle-x",QM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YM=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],dr=le("clock",YM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XM=[["path",{d:"M6 16.326A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 .5 8.973",key:"1cez44"}],["path",{d:"m13 12-3 5h4l-3 5",key:"1t22er"}]],Np=le("cloud-lightning",XM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JM=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]],Mi=le("cloud-rain",JM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZM=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M8 15h.01",key:"a7atzg"}],["path",{d:"M8 19h.01",key:"puxtts"}],["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M12 21h.01",key:"h35vbk"}],["path",{d:"M16 15h.01",key:"rnfrdf"}],["path",{d:"M16 19h.01",key:"1vcnzz"}]],Ua=le("cloud-snow",ZM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eV=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],ih=le("cloud",eV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tV=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],nV=le("coins",tV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rV=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],R2=le("compass",rV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iV=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],h0=le("copy",iV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sV=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Rg=le("credit-card",sV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oV=[["path",{d:"M10.2 18H4.774a1.5 1.5 0 0 1-1.352-.97 11 11 0 0 1 .132-6.487",key:"14kkz9"}],["path",{d:"M18 10.2V4.774a1.5 1.5 0 0 0-.97-1.352 11 11 0 0 0-6.486.132",key:"1g7v07"}],["path",{d:"M18 5a4 3 0 0 1 4 3 2 2 0 0 1-2 2 10 10 0 0 0-5.139 1.42",key:"ratg6b"}],["path",{d:"M5 18a3 4 0 0 0 3 4 2 2 0 0 0 2-2 10 10 0 0 1 1.42-5.14",key:"4454f0"}],["path",{d:"M8.709 2.554a10 10 0 0 0-6.155 6.155 1.5 1.5 0 0 0 .676 1.626l9.807 5.42a2 2 0 0 0 2.718-2.718l-5.42-9.807a1.5 1.5 0 0 0-1.626-.676",key:"qmemie"}]],aV=le("croissant",oV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lV=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Zn=le("crown",lV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cV=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Kh=le("dollar-sign",cV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uV=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],P2=le("download",uV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dV=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],hV=le("droplets",dV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fV=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],mV=le("external-link",fV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pV=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],gV=le("eye-off",pV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yV=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],N2=le("eye",yV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vV=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],D2=le("gift",vV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xV=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],wV=le("house",xV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],kV=le("info",bV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _V=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],SV=le("layout-dashboard",_V);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EV=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],TV=le("lightbulb",EV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IV=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],f0=le("loader-circle",IV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CV=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],jV=le("lock",CV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AV=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],gl=le("log-in",AV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RV=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Pg=le("log-out",RV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PV=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],M2=le("mail",PV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NV=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],yl=le("map-pin",NV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DV=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],MV=le("megaphone",DV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VV=[["path",{d:"M5 12h14",key:"1ays0h"}]],LV=le("minus",VV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OV=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],BV=le("navigation",OV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zV=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Jw=le("package",zV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FV=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],V2=le("palette",FV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UV=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],WV=le("percent",UV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $V=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],HV=le("phone",$V);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KV=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],vl=le("plus",KV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qV=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],L2=le("printer",qV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GV=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],Vr=le("qr-code",GV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QV=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],YV=le("refresh-cw",QV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XV=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],O2=le("rotate-ccw",XV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JV=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],ZV=le("save",JV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Vf=le("search",e3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],qh=le("send",t3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],r3=le("share-2",n3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],B2=le("shield-check",i3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Gh=le("shield",s3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],m0=le("shopping-bag",o3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],Ng=le("smartphone",a3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],p0=le("sparkles",l3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],u3=le("square-check-big",c3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],h3=le("square",d3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],yr=le("star",f3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],Mt=le("store",m3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Zw=le("sun",p3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=[["path",{d:"M12 2v8",key:"1q4o3n"}],["path",{d:"m4.93 10.93 1.41 1.41",key:"2a7f42"}],["path",{d:"M2 18h2",key:"j10viu"}],["path",{d:"M20 18h2",key:"wocana"}],["path",{d:"m19.07 10.93-1.41 1.41",key:"15zs5n"}],["path",{d:"M22 22H2",key:"19qnx5"}],["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}],["path",{d:"M16 18a4 4 0 0 0-8 0",key:"1lzouq"}]],y3=le("sunrise",g3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=[["path",{d:"M12 10V2",key:"16sf7g"}],["path",{d:"m4.93 10.93 1.41 1.41",key:"2a7f42"}],["path",{d:"M2 18h2",key:"j10viu"}],["path",{d:"M20 18h2",key:"wocana"}],["path",{d:"m19.07 10.93-1.41 1.41",key:"15zs5n"}],["path",{d:"M22 22H2",key:"19qnx5"}],["path",{d:"m16 6-4 4-4-4",key:"6wukr"}],["path",{d:"M16 18a4 4 0 0 0-8 0",key:"1lzouq"}]],x3=le("sunset",v3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Ac=le("tag",w3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],un=le("target",b3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],_3=le("toggle-left",k3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],E3=le("toggle-right",S3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],au=le("trash-2",T3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I3=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Qs=le("trending-up",I3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],z2=le("triangle-alert",C3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],A3=le("trophy",j3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Qh=le("user-plus",R3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],il=le("user",P3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Or=le("users",N3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3=[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]],F2=le("utensils-crossed",D3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M3=[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]],V3=le("wind",M3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],g0=le("x",L3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],B3=le("zap",O3);function jr({children:n,allowedRoles:e=[]}){const{user:t,roles:r,loading:s,isAuthenticated:l}=Ur(),c=vr();return s?o.jsxs("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"var(--kb-cream)"},children:[o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx(f0,{size:48,color:"var(--kb-navy)",style:{animation:"spin 1s linear infinite"}}),o.jsx("p",{style:{marginTop:"1rem",color:"var(--kb-gray-500)"},children:"Loading..."})]}),o.jsx("style",{children:`
          @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
          }
        `})]}):l?e.length>0&&!e.some(d=>r.includes(d))?o.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"var(--kb-cream)",padding:"2rem"},children:o.jsxs("div",{className:"card",style:{maxWidth:"400px",textAlign:"center",padding:"2rem"},children:[o.jsx("h2",{style:{color:"#dc2626",marginBottom:"1rem"},children:"Access Denied"}),o.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem"},children:"You don't have permission to access this page."}),o.jsx("a",{href:"/",className:"btn btn-primary",children:"Go Home"})]})}):n:o.jsx(ej,{to:"/login",state:{from:c},replace:!0})}const y0=j.createContext({});function v0(n){const e=j.useRef(null);return e.current===null&&(e.current=n()),e.current}const U2=typeof window<"u",W2=U2?j.useLayoutEffect:j.useEffect,Lf=j.createContext(null);function x0(n,e){n.indexOf(e)===-1&&n.push(e)}function w0(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const pi=(n,e,t)=>t>e?e:t<n?n:t;let b0=()=>{};const Ji={},$2=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function H2(n){return typeof n=="object"&&n!==null}const K2=n=>/^0[^.\s]+$/u.test(n);function k0(n){let e;return()=>(e===void 0&&(e=n()),e)}const hr=n=>n,z3=(n,e)=>t=>e(n(t)),Cu=(...n)=>n.reduce(z3),lu=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r};class _0{constructor(){this.subscriptions=[]}add(e){return x0(this.subscriptions,e),()=>w0(this.subscriptions,e)}notify(e,t,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,t,r);else for(let l=0;l<s;l++){const c=this.subscriptions[l];c&&c(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const $i=n=>n*1e3,ur=n=>n/1e3;function q2(n,e){return e?n*(1e3/e):0}const G2=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,F3=1e-7,U3=12;function W3(n,e,t,r,s){let l,c,h=0;do c=e+(t-e)/2,l=G2(c,r,s)-n,l>0?t=c:e=c;while(Math.abs(l)>F3&&++h<U3);return c}function ju(n,e,t,r){if(n===e&&t===r)return hr;const s=l=>W3(l,0,1,n,t);return l=>l===0||l===1?l:G2(s(l),e,r)}const Q2=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,Y2=n=>e=>1-n(1-e),X2=ju(.33,1.53,.69,.99),S0=Y2(X2),J2=Q2(S0),Z2=n=>(n*=2)<1?.5*S0(n):.5*(2-Math.pow(2,-10*(n-1))),E0=n=>1-Math.sin(Math.acos(n)),eE=Y2(E0),tE=Q2(E0),$3=ju(.42,0,1,1),H3=ju(0,0,.58,1),nE=ju(.42,0,.58,1),K3=n=>Array.isArray(n)&&typeof n[0]!="number",rE=n=>Array.isArray(n)&&typeof n[0]=="number",q3={linear:hr,easeIn:$3,easeInOut:nE,easeOut:H3,circIn:E0,circInOut:tE,circOut:eE,backIn:S0,backInOut:J2,backOut:X2,anticipate:Z2},G3=n=>typeof n=="string",eb=n=>{if(rE(n)){b0(n.length===4);const[e,t,r,s]=n;return ju(e,t,r,s)}else if(G3(n))return q3[n];return n},sh=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Q3(n,e){let t=new Set,r=new Set,s=!1,l=!1;const c=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1};function d(g){c.has(g)&&(m.schedule(g),n()),g(h)}const m={schedule:(g,y=!1,x=!1)=>{const k=x&&s?t:r;return y&&c.add(g),k.has(g)||k.add(g),g},cancel:g=>{r.delete(g),c.delete(g)},process:g=>{if(h=g,s){l=!0;return}s=!0,[t,r]=[r,t],t.forEach(d),t.clear(),s=!1,l&&(l=!1,m.process(g))}};return m}const Y3=40;function iE(n,e){let t=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},l=()=>t=!0,c=sh.reduce((D,U)=>(D[U]=Q3(l),D),{}),{setup:h,read:d,resolveKeyframes:m,preUpdate:g,update:y,preRender:x,render:E,postRender:k}=c,S=()=>{const D=Ji.useManualTiming?s.timestamp:performance.now();t=!1,Ji.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(D-s.timestamp,Y3),1)),s.timestamp=D,s.isProcessing=!0,h.process(s),d.process(s),m.process(s),g.process(s),y.process(s),x.process(s),E.process(s),k.process(s),s.isProcessing=!1,t&&e&&(r=!1,n(S))},T=()=>{t=!0,r=!0,s.isProcessing||n(S)};return{schedule:sh.reduce((D,U)=>{const H=c[U];return D[U]=(K,A=!1,C=!1)=>(t||T(),H.schedule(K,A,C)),D},{}),cancel:D=>{for(let U=0;U<sh.length;U++)c[sh[U]].cancel(D)},state:s,steps:c}}const{schedule:vt,cancel:Ys,state:on,steps:Dp}=iE(typeof requestAnimationFrame<"u"?requestAnimationFrame:hr,!0);let _h;function X3(){_h=void 0}const Sn={now:()=>(_h===void 0&&Sn.set(on.isProcessing||Ji.useManualTiming?on.timestamp:performance.now()),_h),set:n=>{_h=n,queueMicrotask(X3)}},sE=n=>e=>typeof e=="string"&&e.startsWith(n),oE=sE("--"),J3=sE("var(--"),T0=n=>J3(n)?Z3.test(n.split("/*")[0].trim()):!1,Z3=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function tb(n){return typeof n!="string"?!1:n.split("/*")[0].includes("var(--")}const Pl={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},cu={...Pl,transform:n=>pi(0,1,n)},oh={...Pl,default:1},qc=n=>Math.round(n*1e5)/1e5,I0=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function e6(n){return n==null}const t6=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,C0=(n,e)=>t=>!!(typeof t=="string"&&t6.test(t)&&t.startsWith(n)||e&&!e6(t)&&Object.prototype.hasOwnProperty.call(t,e)),aE=(n,e,t)=>r=>{if(typeof r!="string")return r;const[s,l,c,h]=r.match(I0);return{[n]:parseFloat(s),[e]:parseFloat(l),[t]:parseFloat(c),alpha:h!==void 0?parseFloat(h):1}},n6=n=>pi(0,255,n),Mp={...Pl,transform:n=>Math.round(n6(n))},Bo={test:C0("rgb","red"),parse:aE("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+Mp.transform(n)+", "+Mp.transform(e)+", "+Mp.transform(t)+", "+qc(cu.transform(r))+")"};function r6(n){let e="",t="",r="",s="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),s=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),s=n.substring(4,5),e+=e,t+=t,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Dg={test:C0("#"),parse:r6,transform:Bo.transform},Au=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Rs=Au("deg"),fi=Au("%"),we=Au("px"),i6=Au("vh"),s6=Au("vw"),nb={...fi,parse:n=>fi.parse(n)/100,transform:n=>fi.transform(n*100)},qa={test:C0("hsl","hue"),parse:aE("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+fi.transform(qc(e))+", "+fi.transform(qc(t))+", "+qc(cu.transform(r))+")"},zt={test:n=>Bo.test(n)||Dg.test(n)||qa.test(n),parse:n=>Bo.test(n)?Bo.parse(n):qa.test(n)?qa.parse(n):Dg.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Bo.transform(n):qa.transform(n),getAnimatableNone:n=>{const e=zt.parse(n);return e.alpha=0,zt.transform(e)}},o6=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function a6(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(I0))==null?void 0:e.length)||0)+(((t=n.match(o6))==null?void 0:t.length)||0)>0}const lE="number",cE="color",l6="var",c6="var(",rb="${}",u6=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function uu(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},s=[];let l=0;const h=e.replace(u6,d=>(zt.test(d)?(r.color.push(l),s.push(cE),t.push(zt.parse(d))):d.startsWith(c6)?(r.var.push(l),s.push(l6),t.push(d)):(r.number.push(l),s.push(lE),t.push(parseFloat(d))),++l,rb)).split(rb);return{values:t,split:h,indexes:r,types:s}}function uE(n){return uu(n).values}function dE(n){const{split:e,types:t}=uu(n),r=e.length;return s=>{let l="";for(let c=0;c<r;c++)if(l+=e[c],s[c]!==void 0){const h=t[c];h===lE?l+=qc(s[c]):h===cE?l+=zt.transform(s[c]):l+=s[c]}return l}}const d6=n=>typeof n=="number"?0:zt.test(n)?zt.getAnimatableNone(n):n;function h6(n){const e=uE(n);return dE(n)(e.map(d6))}const Xs={test:a6,parse:uE,createTransformer:dE,getAnimatableNone:h6};function Vp(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function f6({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let s=0,l=0,c=0;if(!e)s=l=c=t;else{const h=t<.5?t*(1+e):t+e-t*e,d=2*t-h;s=Vp(d,h,n+1/3),l=Vp(d,h,n),c=Vp(d,h,n-1/3)}return{red:Math.round(s*255),green:Math.round(l*255),blue:Math.round(c*255),alpha:r}}function Yh(n,e){return t=>t>0?e:n}const St=(n,e,t)=>n+(e-n)*t,Lp=(n,e,t)=>{const r=n*n,s=t*(e*e-r)+r;return s<0?0:Math.sqrt(s)},m6=[Dg,Bo,qa],p6=n=>m6.find(e=>e.test(n));function ib(n){const e=p6(n);if(!e)return!1;let t=e.parse(n);return e===qa&&(t=f6(t)),t}const sb=(n,e)=>{const t=ib(n),r=ib(e);if(!t||!r)return Yh(n,e);const s={...t};return l=>(s.red=Lp(t.red,r.red,l),s.green=Lp(t.green,r.green,l),s.blue=Lp(t.blue,r.blue,l),s.alpha=St(t.alpha,r.alpha,l),Bo.transform(s))},Mg=new Set(["none","hidden"]);function g6(n,e){return Mg.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function y6(n,e){return t=>St(n,e,t)}function j0(n){return typeof n=="number"?y6:typeof n=="string"?T0(n)?Yh:zt.test(n)?sb:w6:Array.isArray(n)?hE:typeof n=="object"?zt.test(n)?sb:v6:Yh}function hE(n,e){const t=[...n],r=t.length,s=n.map((l,c)=>j0(l)(l,e[c]));return l=>{for(let c=0;c<r;c++)t[c]=s[c](l);return t}}function v6(n,e){const t={...n,...e},r={};for(const s in t)n[s]!==void 0&&e[s]!==void 0&&(r[s]=j0(n[s])(n[s],e[s]));return s=>{for(const l in r)t[l]=r[l](s);return t}}function x6(n,e){const t=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const l=e.types[s],c=n.indexes[l][r[l]],h=n.values[c]??0;t[s]=h,r[l]++}return t}const w6=(n,e)=>{const t=Xs.createTransformer(e),r=uu(n),s=uu(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?Mg.has(n)&&!s.values.length||Mg.has(e)&&!r.values.length?g6(n,e):Cu(hE(x6(r,s),s.values),t):Yh(n,e)};function fE(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?St(n,e,t):j0(n)(n,e)}const b6=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>vt.update(e,t),stop:()=>Ys(e),now:()=>on.isProcessing?on.timestamp:Sn.now()}},mE=(n,e,t=10)=>{let r="";const s=Math.max(Math.round(e/t),2);for(let l=0;l<s;l++)r+=Math.round(n(l/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Xh=2e4;function A0(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<Xh;)e+=t,r=n.next(e);return e>=Xh?1/0:e}function k6(n,e=100,t){const r=t({...n,keyframes:[0,e]}),s=Math.min(A0(r),Xh);return{type:"keyframes",ease:l=>r.next(s*l).value/e,duration:ur(s)}}const _6=5;function pE(n,e,t){const r=Math.max(e-_6,0);return q2(t-n(r),e-r)}const jt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Op=.001;function S6({duration:n=jt.duration,bounce:e=jt.bounce,velocity:t=jt.velocity,mass:r=jt.mass}){let s,l,c=1-e;c=pi(jt.minDamping,jt.maxDamping,c),n=pi(jt.minDuration,jt.maxDuration,ur(n)),c<1?(s=m=>{const g=m*c,y=g*n,x=g-t,E=Vg(m,c),k=Math.exp(-y);return Op-x/E*k},l=m=>{const y=m*c*n,x=y*t+t,E=Math.pow(c,2)*Math.pow(m,2)*n,k=Math.exp(-y),S=Vg(Math.pow(m,2),c);return(-s(m)+Op>0?-1:1)*((x-E)*k)/S}):(s=m=>{const g=Math.exp(-m*n),y=(m-t)*n+1;return-Op+g*y},l=m=>{const g=Math.exp(-m*n),y=(t-m)*(n*n);return g*y});const h=5/n,d=T6(s,l,h);if(n=$i(n),isNaN(d))return{stiffness:jt.stiffness,damping:jt.damping,duration:n};{const m=Math.pow(d,2)*r;return{stiffness:m,damping:c*2*Math.sqrt(r*m),duration:n}}}const E6=12;function T6(n,e,t){let r=t;for(let s=1;s<E6;s++)r=r-n(r)/e(r);return r}function Vg(n,e){return n*Math.sqrt(1-e*e)}const I6=["duration","bounce"],C6=["stiffness","damping","mass"];function ob(n,e){return e.some(t=>n[t]!==void 0)}function j6(n){let e={velocity:jt.velocity,stiffness:jt.stiffness,damping:jt.damping,mass:jt.mass,isResolvedFromDuration:!1,...n};if(!ob(n,C6)&&ob(n,I6))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),s=r*r,l=2*pi(.05,1,1-(n.bounce||0))*Math.sqrt(s);e={...e,mass:jt.mass,stiffness:s,damping:l}}else{const t=S6(n);e={...e,...t,mass:jt.mass},e.isResolvedFromDuration=!0}return e}function Jh(n=jt.visualDuration,e=jt.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:s}=t;const l=t.keyframes[0],c=t.keyframes[t.keyframes.length-1],h={done:!1,value:l},{stiffness:d,damping:m,mass:g,duration:y,velocity:x,isResolvedFromDuration:E}=j6({...t,velocity:-ur(t.velocity||0)}),k=x||0,S=m/(2*Math.sqrt(d*g)),T=c-l,P=ur(Math.sqrt(d/g)),M=Math.abs(T)<5;r||(r=M?jt.restSpeed.granular:jt.restSpeed.default),s||(s=M?jt.restDelta.granular:jt.restDelta.default);let D;if(S<1){const H=Vg(P,S);D=K=>{const A=Math.exp(-S*P*K);return c-A*((k+S*P*T)/H*Math.sin(H*K)+T*Math.cos(H*K))}}else if(S===1)D=H=>c-Math.exp(-P*H)*(T+(k+P*T)*H);else{const H=P*Math.sqrt(S*S-1);D=K=>{const A=Math.exp(-S*P*K),C=Math.min(H*K,300);return c-A*((k+S*P*T)*Math.sinh(C)+H*T*Math.cosh(C))/H}}const U={calculatedDuration:E&&y||null,next:H=>{const K=D(H);if(E)h.done=H>=y;else{let A=H===0?k:0;S<1&&(A=H===0?$i(k):pE(D,H,K));const C=Math.abs(A)<=r,N=Math.abs(c-K)<=s;h.done=C&&N}return h.value=h.done?c:K,h},toString:()=>{const H=Math.min(A0(U),Xh),K=mE(A=>U.next(H*A).value,H,30);return H+"ms "+K},toTransition:()=>{}};return U}Jh.applyToOptions=n=>{const e=k6(n,100,Jh);return n.ease=e.ease,n.duration=$i(e.duration),n.type="keyframes",n};function Lg({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:l=500,modifyTarget:c,min:h,max:d,restDelta:m=.5,restSpeed:g}){const y=n[0],x={done:!1,value:y},E=C=>h!==void 0&&C<h||d!==void 0&&C>d,k=C=>h===void 0?d:d===void 0||Math.abs(h-C)<Math.abs(d-C)?h:d;let S=t*e;const T=y+S,P=c===void 0?T:c(T);P!==T&&(S=P-y);const M=C=>-S*Math.exp(-C/r),D=C=>P+M(C),U=C=>{const N=M(C),L=D(C);x.done=Math.abs(N)<=m,x.value=x.done?P:L};let H,K;const A=C=>{E(x.value)&&(H=C,K=Jh({keyframes:[x.value,k(x.value)],velocity:pE(D,C,x.value),damping:s,stiffness:l,restDelta:m,restSpeed:g}))};return A(0),{calculatedDuration:null,next:C=>{let N=!1;return!K&&H===void 0&&(N=!0,U(C),A(C)),H!==void 0&&C>=H?K.next(C-H):(!N&&U(C),x)}}}function A6(n,e,t){const r=[],s=t||Ji.mix||fE,l=n.length-1;for(let c=0;c<l;c++){let h=s(n[c],n[c+1]);if(e){const d=Array.isArray(e)?e[c]||hr:e;h=Cu(d,h)}r.push(h)}return r}function R6(n,e,{clamp:t=!0,ease:r,mixer:s}={}){const l=n.length;if(b0(l===e.length),l===1)return()=>e[0];if(l===2&&e[0]===e[1])return()=>e[1];const c=n[0]===n[1];n[0]>n[l-1]&&(n=[...n].reverse(),e=[...e].reverse());const h=A6(e,r,s),d=h.length,m=g=>{if(c&&g<n[0])return e[0];let y=0;if(d>1)for(;y<n.length-2&&!(g<n[y+1]);y++);const x=lu(n[y],n[y+1],g);return h[y](x)};return t?g=>m(pi(n[0],n[l-1],g)):m}function P6(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const s=lu(0,e,r);n.push(St(t,1,s))}}function N6(n){const e=[0];return P6(e,n.length-1),e}function D6(n,e){return n.map(t=>t*e)}function M6(n,e){return n.map(()=>e||nE).splice(0,n.length-1)}function Gc({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const s=K3(r)?r.map(eb):eb(r),l={done:!1,value:e[0]},c=D6(t&&t.length===e.length?t:N6(e),n),h=R6(c,e,{ease:Array.isArray(s)?s:M6(e,s)});return{calculatedDuration:n,next:d=>(l.value=h(d),l.done=d>=n,l)}}const V6=n=>n!==null;function R0(n,{repeat:e,repeatType:t="loop"},r,s=1){const l=n.filter(V6),h=s<0||e&&t!=="loop"&&e%2===1?0:l.length-1;return!h||r===void 0?l[h]:r}const L6={decay:Lg,inertia:Lg,tween:Gc,keyframes:Gc,spring:Jh};function gE(n){typeof n.type=="string"&&(n.type=L6[n.type])}class P0{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const O6=n=>n/100;class N0 extends P0{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:t}=this.options;t&&t.updatedAt!==Sn.now()&&this.tick(Sn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;gE(e);const{type:t=Gc,repeat:r=0,repeatDelay:s=0,repeatType:l,velocity:c=0}=e;let{keyframes:h}=e;const d=t||Gc;d!==Gc&&typeof h[0]!="number"&&(this.mixKeyframes=Cu(O6,fE(h[0],h[1])),h=[0,100]);const m=d({...e,keyframes:h});l==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...h].reverse(),velocity:-c})),m.calculatedDuration===null&&(m.calculatedDuration=A0(m));const{calculatedDuration:g}=m;this.calculatedDuration=g,this.resolvedDuration=g+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=m}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:r,totalDuration:s,mixKeyframes:l,mirroredGenerator:c,resolvedDuration:h,calculatedDuration:d}=this;if(this.startTime===null)return r.next(0);const{delay:m=0,keyframes:g,repeat:y,repeatType:x,repeatDelay:E,type:k,onUpdate:S,finalKeyframe:T}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const P=this.currentTime-m*(this.playbackSpeed>=0?1:-1),M=this.playbackSpeed>=0?P<0:P>s;this.currentTime=Math.max(P,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let D=this.currentTime,U=r;if(y){const C=Math.min(this.currentTime,s)/h;let N=Math.floor(C),L=C%1;!L&&C>=1&&(L=1),L===1&&N--,N=Math.min(N,y+1),!!(N%2)&&(x==="reverse"?(L=1-L,E&&(L-=E/h)):x==="mirror"&&(U=c)),D=pi(0,1,L)*h}const H=M?{done:!1,value:g[0]}:U.next(D);l&&(H.value=l(H.value));let{done:K}=H;!M&&d!==null&&(K=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const A=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&K);return A&&k!==Lg&&(H.value=R0(g,this.options,T,this.speed)),S&&S(H.value),A&&this.finish(),H}then(e,t){return this.finished.then(e,t)}get duration(){return ur(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+ur(e)}get time(){return ur(this.currentTime)}set time(e){var t;e=$i(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(t=this.driver)==null||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Sn.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=ur(this.currentTime))}play(){var s,l;if(this.isStopped)return;const{driver:e=b6,startTime:t}=this.options;this.driver||(this.driver=e(c=>this.tick(c))),(l=(s=this.options).onPlay)==null||l.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=t??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Sn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",(t=(e=this.options).onComplete)==null||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(t=(e=this.options).onCancel)==null||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(t=this.driver)==null||t.stop(),e.observe(this)}}function B6(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const zo=n=>n*180/Math.PI,Og=n=>{const e=zo(Math.atan2(n[1],n[0]));return Bg(e)},z6={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:Og,rotateZ:Og,skewX:n=>zo(Math.atan(n[1])),skewY:n=>zo(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},Bg=n=>(n=n%360,n<0&&(n+=360),n),ab=Og,lb=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),cb=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),F6={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:lb,scaleY:cb,scale:n=>(lb(n)+cb(n))/2,rotateX:n=>Bg(zo(Math.atan2(n[6],n[5]))),rotateY:n=>Bg(zo(Math.atan2(-n[2],n[0]))),rotateZ:ab,rotate:ab,skewX:n=>zo(Math.atan(n[4])),skewY:n=>zo(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function zg(n){return n.includes("scale")?1:0}function Fg(n,e){if(!n||n==="none")return zg(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(t)r=F6,s=t;else{const h=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=z6,s=h}if(!s)return zg(e);const l=r[e],c=s[1].split(",").map(W6);return typeof l=="function"?l(c):c[l]}const U6=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return Fg(t,e)};function W6(n){return parseFloat(n.trim())}const Nl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Dl=new Set(Nl),ub=n=>n===Pl||n===we,$6=new Set(["x","y","z"]),H6=Nl.filter(n=>!$6.has(n));function K6(n){const e=[];return H6.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const Vs={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>Fg(e,"x"),y:(n,{transform:e})=>Fg(e,"y")};Vs.translateX=Vs.x;Vs.translateY=Vs.y;const Uo=new Set;let Ug=!1,Wg=!1,$g=!1;function yE(){if(Wg){const n=Array.from(Uo).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const s=K6(r);s.length&&(t.set(r,s),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=t.get(r);s&&s.forEach(([l,c])=>{var h;(h=r.getValue(l))==null||h.set(c)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Wg=!1,Ug=!1,Uo.forEach(n=>n.complete($g)),Uo.clear()}function vE(){Uo.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Wg=!0)})}function q6(){$g=!0,vE(),yE(),$g=!1}class D0{constructor(e,t,r,s,l,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=s,this.element=l,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(Uo.add(this),Ug||(Ug=!0,vt.read(vE),vt.resolveKeyframes(yE))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:s}=this;if(e[0]===null){const l=s==null?void 0:s.get(),c=e[e.length-1];if(l!==void 0)e[0]=l;else if(r&&t){const h=r.readValue(t,c);h!=null&&(e[0]=h)}e[0]===void 0&&(e[0]=c),s&&l===void 0&&s.set(e[0])}B6(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Uo.delete(this)}cancel(){this.state==="scheduled"&&(Uo.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const G6=n=>n.startsWith("--");function Q6(n,e,t){G6(e)?n.style.setProperty(e,t):n.style[e]=t}const Y6=k0(()=>window.ScrollTimeline!==void 0),X6={};function J6(n,e){const t=k0(n);return()=>X6[e]??t()}const xE=J6(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Bc=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,db={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Bc([0,.65,.55,1]),circOut:Bc([.55,0,1,.45]),backIn:Bc([.31,.01,.66,-.59]),backOut:Bc([.33,1.53,.69,.99])};function wE(n,e){if(n)return typeof n=="function"?xE()?mE(n,e):"ease-out":rE(n)?Bc(n):Array.isArray(n)?n.map(t=>wE(t,e)||db.easeOut):db[n]}function Z6(n,e,t,{delay:r=0,duration:s=300,repeat:l=0,repeatType:c="loop",ease:h="easeOut",times:d}={},m=void 0){const g={[e]:t};d&&(g.offset=d);const y=wE(h,s);Array.isArray(y)&&(g.easing=y);const x={delay:r,duration:s,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:l+1,direction:c==="reverse"?"alternate":"normal"};return m&&(x.pseudoElement=m),n.animate(g,x)}function bE(n){return typeof n=="function"&&"applyToOptions"in n}function eL({type:n,...e}){return bE(n)&&xE()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class tL extends P0{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:t,name:r,keyframes:s,pseudoElement:l,allowFlatten:c=!1,finalKeyframe:h,onComplete:d}=e;this.isPseudoElement=!!l,this.allowFlatten=c,this.options=e,b0(typeof e.type!="string");const m=eL(e);this.animation=Z6(t,r,s,m,l),m.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!l){const g=R0(s,this.options,h,this.speed);this.updateMotionValue?this.updateMotionValue(g):Q6(t,r,g),this.animation.cancel()}d==null||d(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;(t=(e=this.animation).finish)==null||t.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(t=(e=this.animation).commitStyles)==null||t.call(e)}get duration(){var t,r;const e=((r=(t=this.animation.effect)==null?void 0:t.getComputedTiming)==null?void 0:r.call(t).duration)||0;return ur(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+ur(e)}get time(){return ur(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=$i(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&Y6()?(this.animation.timeline=e,hr):t(this)}}const kE={anticipate:Z2,backInOut:J2,circInOut:tE};function nL(n){return n in kE}function rL(n){typeof n.ease=="string"&&nL(n.ease)&&(n.ease=kE[n.ease])}const Bp=10;class iL extends tL{constructor(e){rL(e),gE(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:r,onComplete:s,element:l,...c}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const h=new N0({...c,autoplay:!1}),d=Math.max(Bp,Sn.now()-this.startTime),m=pi(0,Bp,d-Bp);t.setWithVelocity(h.sample(Math.max(0,d-m)).value,h.sample(d).value,m),h.stop()}}const hb=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Xs.test(n)||n==="0")&&!n.startsWith("url("));function sL(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function oL(n,e,t,r){const s=n[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const l=n[n.length-1],c=hb(s,e),h=hb(l,e);return!c||!h?!1:sL(n)||(t==="spring"||bE(t))&&r}function Hg(n){n.duration=0,n.type="keyframes"}const aL=new Set(["opacity","clipPath","filter","transform"]),lL=k0(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function cL(n){var g;const{motionValue:e,name:t,repeatDelay:r,repeatType:s,damping:l,type:c}=n;if(!(((g=e==null?void 0:e.owner)==null?void 0:g.current)instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:m}=e.owner.getProps();return lL()&&t&&aL.has(t)&&(t!=="transform"||!m)&&!d&&!r&&s!=="mirror"&&l!==0&&c!=="inertia"}const uL=40;class dL extends P0{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:s=0,repeatDelay:l=0,repeatType:c="loop",keyframes:h,name:d,motionValue:m,element:g,...y}){var k;super(),this.stop=()=>{var S,T;this._animation&&(this._animation.stop(),(S=this.stopTimeline)==null||S.call(this)),(T=this.keyframeResolver)==null||T.cancel()},this.createdAt=Sn.now();const x={autoplay:e,delay:t,type:r,repeat:s,repeatDelay:l,repeatType:c,name:d,motionValue:m,element:g,...y},E=(g==null?void 0:g.KeyframeResolver)||D0;this.keyframeResolver=new E(h,(S,T,P)=>this.onKeyframesResolved(S,T,x,!P),d,m,g),(k=this.keyframeResolver)==null||k.scheduleResolve()}onKeyframesResolved(e,t,r,s){var T,P;this.keyframeResolver=void 0;const{name:l,type:c,velocity:h,delay:d,isHandoff:m,onUpdate:g}=r;this.resolvedAt=Sn.now(),oL(e,l,c,h)||((Ji.instantAnimations||!d)&&(g==null||g(R0(e,r,t))),e[0]=e[e.length-1],Hg(r),r.repeat=0);const x={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>uL?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...r,keyframes:e},E=!m&&cL(x),k=(P=(T=x.motionValue)==null?void 0:T.owner)==null?void 0:P.current,S=E?new iL({...x,element:k}):new N0(x);S.finished.then(()=>{this.notifyFinished()}).catch(hr),this.pendingTimeline&&(this.stopTimeline=S.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=S}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),q6()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}function _E(n,e,t,r=0,s=1){const l=Array.from(n).sort((m,g)=>m.sortNodePosition(g)).indexOf(e),c=n.size,h=(c-1)*r;return typeof t=="function"?t(l,c):s===1?l*r:h-l*r}const hL=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function fL(n){const e=hL.exec(n);if(!e)return[,];const[,t,r,s]=e;return[`--${t??r}`,s]}function SE(n,e,t=1){const[r,s]=fL(n);if(!r)return;const l=window.getComputedStyle(e).getPropertyValue(r);if(l){const c=l.trim();return $2(c)?parseFloat(c):c}return T0(s)?SE(s,e,t+1):s}const mL={type:"spring",stiffness:500,damping:25,restSpeed:10},pL=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),gL={type:"keyframes",duration:.8},yL={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},vL=(n,{keyframes:e})=>e.length>2?gL:Dl.has(n)?n.startsWith("scale")?pL(e[1]):mL:yL,xL=n=>n!==null;function wL(n,{repeat:e,repeatType:t="loop"},r){const s=n.filter(xL),l=e&&t!=="loop"&&e%2===1?0:s.length-1;return s[l]}function M0(n,e){return(n==null?void 0:n[e])??(n==null?void 0:n.default)??n}function bL({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:s,repeat:l,repeatType:c,repeatDelay:h,from:d,elapsed:m,...g}){return!!Object.keys(g).length}const V0=(n,e,t,r={},s,l)=>c=>{const h=M0(r,n)||{},d=h.delay||r.delay||0;let{elapsed:m=0}=r;m=m-$i(d);const g={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...h,delay:-m,onUpdate:x=>{e.set(x),h.onUpdate&&h.onUpdate(x)},onComplete:()=>{c(),h.onComplete&&h.onComplete()},name:n,motionValue:e,element:l?void 0:s};bL(h)||Object.assign(g,vL(n,g)),g.duration&&(g.duration=$i(g.duration)),g.repeatDelay&&(g.repeatDelay=$i(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let y=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(Hg(g),g.delay===0&&(y=!0)),(Ji.instantAnimations||Ji.skipAnimations)&&(y=!0,Hg(g),g.delay=0),g.allowFlatten=!h.type&&!h.ease,y&&!l&&e.get()!==void 0){const x=wL(g.keyframes,h);if(x!==void 0){vt.update(()=>{g.onUpdate(x),g.onComplete()});return}}return h.isSync?new N0(g):new dL(g)};function fb(n){const e=[{},{}];return n==null||n.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function L0(n,e,t,r){if(typeof e=="function"){const[s,l]=fb(r);e=e(t!==void 0?t:n.custom,s,l)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[s,l]=fb(r);e=e(t!==void 0?t:n.custom,s,l)}return e}function sl(n,e,t){const r=n.getProps();return L0(r,e,t!==void 0?t:r.custom,n)}const EE=new Set(["width","height","top","left","right","bottom",...Nl]),mb=30,kL=n=>!isNaN(parseFloat(n));class _L{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var l;const s=Sn.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((l=this.events.change)==null||l.notify(this.current),this.dependents))for(const c of this.dependents)c.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Sn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=kL(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new _0);const r=this.events[e].add(t);return e==="change"?()=>{r(),vt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Sn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>mb)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,mb);return q2(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;(e=this.dependents)==null||e.clear(),(t=this.events.destroy)==null||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function xl(n,e){return new _L(n,e)}const Kg=n=>Array.isArray(n);function SL(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,xl(t))}function EL(n){return Kg(n)?n[n.length-1]||0:n}function TL(n,e){const t=sl(n,e);let{transitionEnd:r={},transition:s={},...l}=t||{};l={...l,...r};for(const c in l){const h=EL(l[c]);SL(n,c,h)}}const xn=n=>!!(n&&n.getVelocity);function IL(n){return!!(xn(n)&&n.add)}function qg(n,e){const t=n.getValue("willChange");if(IL(t))return t.add(e);if(!t&&Ji.WillChange){const r=new Ji.WillChange("auto");n.addValue("willChange",r),r.add(e)}}function O0(n){return n.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const CL="framerAppearId",TE="data-"+O0(CL);function IE(n){return n.props[TE]}function jL({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function CE(n,e,{delay:t=0,transitionOverride:r,type:s}={}){let{transition:l=n.getDefaultTransition(),transitionEnd:c,...h}=e;r&&(l=r);const d=[],m=s&&n.animationState&&n.animationState.getState()[s];for(const g in h){const y=n.getValue(g,n.latestValues[g]??null),x=h[g];if(x===void 0||m&&jL(m,g))continue;const E={delay:t,...M0(l||{},g)},k=y.get();if(k!==void 0&&!y.isAnimating&&!Array.isArray(x)&&x===k&&!E.velocity)continue;let S=!1;if(window.MotionHandoffAnimation){const P=IE(n);if(P){const M=window.MotionHandoffAnimation(P,g,vt);M!==null&&(E.startTime=M,S=!0)}}qg(n,g),y.start(V0(g,y,x,n.shouldReduceMotion&&EE.has(g)?{type:!1}:E,n,S));const T=y.animation;T&&d.push(T)}return c&&Promise.all(d).then(()=>{vt.update(()=>{c&&TL(n,c)})}),d}function Gg(n,e,t={}){var d;const r=sl(n,e,t.type==="exit"?(d=n.presenceContext)==null?void 0:d.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(s=t.transitionOverride);const l=r?()=>Promise.all(CE(n,r,t)):()=>Promise.resolve(),c=n.variantChildren&&n.variantChildren.size?(m=0)=>{const{delayChildren:g=0,staggerChildren:y,staggerDirection:x}=s;return AL(n,e,m,g,y,x,t)}:()=>Promise.resolve(),{when:h}=s;if(h){const[m,g]=h==="beforeChildren"?[l,c]:[c,l];return m().then(()=>g())}else return Promise.all([l(),c(t.delay)])}function AL(n,e,t=0,r=0,s=0,l=1,c){const h=[];for(const d of n.variantChildren)d.notify("AnimationStart",e),h.push(Gg(d,e,{...c,delay:t+(typeof r=="function"?0:r)+_E(n.variantChildren,d,r,s,l)}).then(()=>d.notify("AnimationComplete",e)));return Promise.all(h)}function RL(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(l=>Gg(n,l,t));r=Promise.all(s)}else if(typeof e=="string")r=Gg(n,e,t);else{const s=typeof e=="function"?sl(n,e,t.custom):e;r=Promise.all(CE(n,s,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}const PL={test:n=>n==="auto",parse:n=>n},jE=n=>e=>e.test(n),AE=[Pl,we,fi,Rs,s6,i6,PL],pb=n=>AE.find(jE(n));function NL(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||K2(n):!0}const DL=new Set(["brightness","contrast","saturate","opacity"]);function ML(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(I0)||[];if(!r)return n;const s=t.replace(r,"");let l=DL.has(e)?1:0;return r!==t&&(l*=100),e+"("+l+s+")"}const VL=/\b([a-z-]*)\(.*?\)/gu,Qg={...Xs,getAnimatableNone:n=>{const e=n.match(VL);return e?e.map(ML).join(" "):n}},gb={...Pl,transform:Math.round},LL={rotate:Rs,rotateX:Rs,rotateY:Rs,rotateZ:Rs,scale:oh,scaleX:oh,scaleY:oh,scaleZ:oh,skew:Rs,skewX:Rs,skewY:Rs,distance:we,translateX:we,translateY:we,translateZ:we,x:we,y:we,z:we,perspective:we,transformPerspective:we,opacity:cu,originX:nb,originY:nb,originZ:we},B0={borderWidth:we,borderTopWidth:we,borderRightWidth:we,borderBottomWidth:we,borderLeftWidth:we,borderRadius:we,radius:we,borderTopLeftRadius:we,borderTopRightRadius:we,borderBottomRightRadius:we,borderBottomLeftRadius:we,width:we,maxWidth:we,height:we,maxHeight:we,top:we,right:we,bottom:we,left:we,inset:we,insetBlock:we,insetBlockStart:we,insetBlockEnd:we,insetInline:we,insetInlineStart:we,insetInlineEnd:we,padding:we,paddingTop:we,paddingRight:we,paddingBottom:we,paddingLeft:we,paddingBlock:we,paddingBlockStart:we,paddingBlockEnd:we,paddingInline:we,paddingInlineStart:we,paddingInlineEnd:we,margin:we,marginTop:we,marginRight:we,marginBottom:we,marginLeft:we,marginBlock:we,marginBlockStart:we,marginBlockEnd:we,marginInline:we,marginInlineStart:we,marginInlineEnd:we,backgroundPositionX:we,backgroundPositionY:we,...LL,zIndex:gb,fillOpacity:cu,strokeOpacity:cu,numOctaves:gb},OL={...B0,color:zt,backgroundColor:zt,outlineColor:zt,fill:zt,stroke:zt,borderColor:zt,borderTopColor:zt,borderRightColor:zt,borderBottomColor:zt,borderLeftColor:zt,filter:Qg,WebkitFilter:Qg},RE=n=>OL[n];function PE(n,e){let t=RE(n);return t!==Qg&&(t=Xs),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const BL=new Set(["auto","none","0"]);function zL(n,e,t){let r=0,s;for(;r<n.length&&!s;){const l=n[r];typeof l=="string"&&!BL.has(l)&&uu(l).values.length&&(s=n[r]),r++}if(s&&t)for(const l of e)n[l]=PE(t,s)}class FL extends D0{constructor(e,t,r,s,l){super(e,t,r,s,l,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let g=0;g<e.length;g++){let y=e[g];if(typeof y=="string"&&(y=y.trim(),T0(y))){const x=SE(y,t.current);x!==void 0&&(e[g]=x),g===e.length-1&&(this.finalKeyframe=y)}}if(this.resolveNoneKeyframes(),!EE.has(r)||e.length!==2)return;const[s,l]=e,c=pb(s),h=pb(l),d=tb(s),m=tb(l);if(d!==m&&Vs[r]){this.needsMeasurement=!0;return}if(c!==h)if(ub(c)&&ub(h))for(let g=0;g<e.length;g++){const y=e[g];typeof y=="string"&&(e[g]=parseFloat(y))}else Vs[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||NL(e[s]))&&r.push(s);r.length&&zL(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Vs[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const s=t[t.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var h;const{element:e,name:t,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(t);s&&s.jump(this.measuredOrigin,!1);const l=r.length-1,c=r[l];r[l]=Vs[t](e.measureViewportBox(),window.getComputedStyle(e.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),(h=this.removedTransforms)!=null&&h.length&&this.removedTransforms.forEach(([d,m])=>{e.getValue(d).set(m)}),this.resolveNoneKeyframes()}}function UL(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let r=document;const s=(t==null?void 0:t[n])??r.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n)}const NE=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function DE(n){return H2(n)&&"offsetHeight"in n}const{schedule:z0}=iE(queueMicrotask,!1),Rr={x:!1,y:!1};function ME(){return Rr.x||Rr.y}function WL(n){return n==="x"||n==="y"?Rr[n]?null:(Rr[n]=!0,()=>{Rr[n]=!1}):Rr.x||Rr.y?null:(Rr.x=Rr.y=!0,()=>{Rr.x=Rr.y=!1})}function VE(n,e){const t=UL(n),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[t,s,()=>r.abort()]}function yb(n){return!(n.pointerType==="touch"||ME())}function $L(n,e,t={}){const[r,s,l]=VE(n,t),c=h=>{if(!yb(h))return;const{target:d}=h,m=e(d,h);if(typeof m!="function"||!d)return;const g=y=>{yb(y)&&(m(y),d.removeEventListener("pointerleave",g))};d.addEventListener("pointerleave",g,s)};return r.forEach(h=>{h.addEventListener("pointerenter",c,s)}),l}const LE=(n,e)=>e?n===e?!0:LE(n,e.parentElement):!1,F0=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,HL=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function OE(n){return HL.has(n.tagName)||n.isContentEditable===!0}const Sh=new WeakSet;function vb(n){return e=>{e.key==="Enter"&&n(e)}}function zp(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const KL=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=vb(()=>{if(Sh.has(t))return;zp(t,"down");const s=vb(()=>{zp(t,"up")}),l=()=>zp(t,"cancel");t.addEventListener("keyup",s,e),t.addEventListener("blur",l,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function xb(n){return F0(n)&&!ME()}function qL(n,e,t={}){const[r,s,l]=VE(n,t),c=h=>{const d=h.currentTarget;if(!xb(h))return;Sh.add(d);const m=e(d,h),g=(E,k)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",x),Sh.has(d)&&Sh.delete(d),xb(E)&&typeof m=="function"&&m(E,{success:k})},y=E=>{g(E,d===window||d===document||t.useGlobalTarget||LE(d,E.target))},x=E=>{g(E,!1)};window.addEventListener("pointerup",y,s),window.addEventListener("pointercancel",x,s)};return r.forEach(h=>{(t.useGlobalTarget?window:h).addEventListener("pointerdown",c,s),DE(h)&&(h.addEventListener("focus",m=>KL(m,s)),!OE(h)&&!h.hasAttribute("tabindex")&&(h.tabIndex=0))}),l}function BE(n){return H2(n)&&"ownerSVGElement"in n}function GL(n){return BE(n)&&n.tagName==="svg"}const QL=[...AE,zt,Xs],YL=n=>QL.find(jE(n)),wb=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ga=()=>({x:wb(),y:wb()}),bb=()=>({min:0,max:0}),Kt=()=>({x:bb(),y:bb()}),Yg={current:null},zE={current:!1},XL=typeof window<"u";function JL(){if(zE.current=!0,!!XL)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>Yg.current=n.matches;n.addEventListener("change",e),e()}else Yg.current=!1}const ZL=new WeakMap;function Of(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function du(n){return typeof n=="string"||Array.isArray(n)}const U0=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],W0=["initial",...U0];function Bf(n){return Of(n.animate)||W0.some(e=>du(n[e]))}function FE(n){return!!(Bf(n)||n.variants)}function eO(n,e,t){for(const r in e){const s=e[r],l=t[r];if(xn(s))n.addValue(r,s);else if(xn(l))n.addValue(r,xl(s,{owner:n}));else if(l!==s)if(n.hasValue(r)){const c=n.getValue(r);c.liveStyle===!0?c.jump(s):c.hasAnimated||c.set(s)}else{const c=n.getStaticValue(r);n.addValue(r,xl(c!==void 0?c:s,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const kb=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let Zh={};function UE(n){Zh=n}function tO(){return Zh}class nO{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:l,visualState:c},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=D0,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=Sn.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,vt.render(this.render,!1,!0))};const{latestValues:d,renderState:m}=c;this.latestValues=d,this.baseTarget={...d},this.initialValues=t.initial?{...d}:{},this.renderState=m,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=h,this.blockInitialAnimation=!!l,this.isControllingVariants=Bf(t),this.isVariantNode=FE(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...y}=this.scrapeMotionValuesFromProps(t,{},this);for(const x in y){const E=y[x];d[x]!==void 0&&xn(E)&&E.set(d[x])}}mount(e){var t;this.current=e,ZL.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,s)=>this.bindToMotionValue(s,r)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(zE.current||JL(),this.shouldReduceMotion=Yg.current),(t=this.parent)==null||t.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),Ys(this.notifyUpdate),Ys(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Dl.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=t.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&vt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let l;typeof window<"u"&&window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{s(),l&&l(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Zh){const t=Zh[e];if(!t)continue;const{isEnabled:r,Feature:s}=t;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const l=this.features[e];l.isMounted?l.update():(l.mount(),l.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Kt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<kb.length;r++){const s=kb[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const l="on"+s,c=e[l];c&&(this.propEventSubscriptions[s]=this.on(s,c))}this.prevMotionValues=eO(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=xl(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&($2(r)||K2(r))?r=parseFloat(r):!YL(r)&&Xs.test(t)&&(r=PE(e,t)),this.setBaseTarget(e,xn(r)?r.get():r)),xn(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var l;const{initial:t}=this.props;let r;if(typeof t=="string"||typeof t=="object"){const c=L0(this.props,t,(l=this.presenceContext)==null?void 0:l.custom);c&&(r=c[e])}if(t&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!xn(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new _0),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){z0.render(this.render)}}class WE extends nO{constructor(){super(...arguments),this.KeyframeResolver=FL}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){const r=e.style;return r?r[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;xn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}class so{constructor(e){this.isMounted=!1,this.node=e}update(){}}function $E({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function rO({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function iO(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function Fp(n){return n===void 0||n===1}function Xg({scale:n,scaleX:e,scaleY:t}){return!Fp(n)||!Fp(e)||!Fp(t)}function Vo(n){return Xg(n)||HE(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function HE(n){return _b(n.x)||_b(n.y)}function _b(n){return n&&n!=="0%"}function ef(n,e,t){const r=n-t,s=e*r;return t+s}function Sb(n,e,t,r,s){return s!==void 0&&(n=ef(n,s,r)),ef(n,t,r)+e}function Jg(n,e=0,t=1,r,s){n.min=Sb(n.min,e,t,r,s),n.max=Sb(n.max,e,t,r,s)}function KE(n,{x:e,y:t}){Jg(n.x,e.translate,e.scale,e.originPoint),Jg(n.y,t.translate,t.scale,t.originPoint)}const Eb=.999999999999,Tb=1.0000000000001;function sO(n,e,t,r=!1){const s=t.length;if(!s)return;e.x=e.y=1;let l,c;for(let h=0;h<s;h++){l=t[h],c=l.projectionDelta;const{visualElement:d}=l.options;d&&d.props.style&&d.props.style.display==="contents"||(r&&l.options.layoutScroll&&l.scroll&&l!==l.root&&Ya(n,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,KE(n,c)),r&&Vo(l.latestValues)&&Ya(n,l.latestValues))}e.x<Tb&&e.x>Eb&&(e.x=1),e.y<Tb&&e.y>Eb&&(e.y=1)}function Qa(n,e){n.min=n.min+e,n.max=n.max+e}function Ib(n,e,t,r,s=.5){const l=St(n.min,n.max,s);Jg(n,e,t,l,r)}function Ya(n,e){Ib(n.x,e.x,e.scaleX,e.scale,e.originX),Ib(n.y,e.y,e.scaleY,e.scale,e.originY)}function qE(n,e){return $E(iO(n.getBoundingClientRect(),e))}function oO(n,e,t){const r=qE(n,t),{scroll:s}=e;return s&&(Qa(r.x,s.offset.x),Qa(r.y,s.offset.y)),r}const aO={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},lO=Nl.length;function cO(n,e,t){let r="",s=!0;for(let l=0;l<lO;l++){const c=Nl[l],h=n[c];if(h===void 0)continue;let d=!0;if(typeof h=="number"?d=h===(c.startsWith("scale")?1:0):d=parseFloat(h)===0,!d||t){const m=NE(h,B0[c]);if(!d){s=!1;const g=aO[c]||c;r+=`${g}(${m}) `}t&&(e[c]=m)}}return r=r.trim(),t?r=t(e,s?"":r):s&&(r="none"),r}function $0(n,e,t){const{style:r,vars:s,transformOrigin:l}=n;let c=!1,h=!1;for(const d in e){const m=e[d];if(Dl.has(d)){c=!0;continue}else if(oE(d)){s[d]=m;continue}else{const g=NE(m,B0[d]);d.startsWith("origin")?(h=!0,l[d]=g):r[d]=g}}if(e.transform||(c||t?r.transform=cO(e,n.transform,t):r.transform&&(r.transform="none")),h){const{originX:d="50%",originY:m="50%",originZ:g=0}=l;r.transformOrigin=`${d} ${m} ${g}`}}function GE(n,{style:e,vars:t},r,s){const l=n.style;let c;for(c in e)l[c]=e[c];s==null||s.applyProjectionStyles(l,r);for(c in t)l.setProperty(c,t[c])}function Cb(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Rc={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(we.test(n))n=parseFloat(n);else return n;const t=Cb(n,e.target.x),r=Cb(n,e.target.y);return`${t}% ${r}%`}},uO={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,s=Xs.parse(n);if(s.length>5)return r;const l=Xs.createTransformer(n),c=typeof s[0]!="number"?1:0,h=t.x.scale*e.x,d=t.y.scale*e.y;s[0+c]/=h,s[1+c]/=d;const m=St(h,d,.5);return typeof s[2+c]=="number"&&(s[2+c]/=m),typeof s[3+c]=="number"&&(s[3+c]/=m),l(s)}},Zg={borderRadius:{...Rc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Rc,borderTopRightRadius:Rc,borderBottomLeftRadius:Rc,borderBottomRightRadius:Rc,boxShadow:uO};function QE(n,{layout:e,layoutId:t}){return Dl.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Zg[n]||n==="opacity")}function H0(n,e,t){var c;const r=n.style,s=e==null?void 0:e.style,l={};if(!r)return l;for(const h in r)(xn(r[h])||s&&xn(s[h])||QE(h,n)||((c=t==null?void 0:t.getValue(h))==null?void 0:c.liveStyle)!==void 0)&&(l[h]=r[h]);return l}function dO(n){return window.getComputedStyle(n)}class hO extends WE{constructor(){super(...arguments),this.type="html",this.renderInstance=GE}readValueFromInstance(e,t){var r;if(Dl.has(t))return(r=this.projection)!=null&&r.isProjecting?zg(t):U6(e,t);{const s=dO(e),l=(oE(t)?s.getPropertyValue(t):s[t])||0;return typeof l=="string"?l.trim():l}}measureInstanceViewportBox(e,{transformPagePoint:t}){return qE(e,t)}build(e,t,r){$0(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return H0(e,t,r)}}const fO={offset:"stroke-dashoffset",array:"stroke-dasharray"},mO={offset:"strokeDashoffset",array:"strokeDasharray"};function pO(n,e,t=1,r=0,s=!0){n.pathLength=1;const l=s?fO:mO;n[l.offset]=we.transform(-r);const c=we.transform(e),h=we.transform(t);n[l.array]=`${c} ${h}`}const gO=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function YE(n,{attrX:e,attrY:t,attrScale:r,pathLength:s,pathSpacing:l=1,pathOffset:c=0,...h},d,m,g){if($0(n,h,m),d){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:y,style:x}=n;y.transform&&(x.transform=y.transform,delete y.transform),(x.transform||y.transformOrigin)&&(x.transformOrigin=y.transformOrigin??"50% 50%",delete y.transformOrigin),x.transform&&(x.transformBox=(g==null?void 0:g.transformBox)??"fill-box",delete y.transformBox);for(const E of gO)y[E]!==void 0&&(x[E]=y[E],delete y[E]);e!==void 0&&(y.x=e),t!==void 0&&(y.y=t),r!==void 0&&(y.scale=r),s!==void 0&&pO(y,s,l,c,!1)}const XE=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),JE=n=>typeof n=="string"&&n.toLowerCase()==="svg";function yO(n,e,t,r){GE(n,e,void 0,r);for(const s in e.attrs)n.setAttribute(XE.has(s)?s:O0(s),e.attrs[s])}function ZE(n,e,t){const r=H0(n,e,t);for(const s in n)if(xn(n[s])||xn(e[s])){const l=Nl.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[l]=n[s]}return r}class vO extends WE{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Kt}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Dl.has(t)){const r=RE(t);return r&&r.default||0}return t=XE.has(t)?t:O0(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return ZE(e,t,r)}build(e,t,r){YE(e,t,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,t,r,s){yO(e,t,r,s)}mount(e){this.isSVGTag=JE(e.tagName),super.mount(e)}}const xO=W0.length;function eT(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?eT(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<xO;t++){const r=W0[t],s=n.props[r];(du(s)||s===!1)&&(e[r]=s)}return e}function tT(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}const wO=[...U0].reverse(),bO=U0.length;function kO(n){return e=>Promise.all(e.map(({animation:t,options:r})=>RL(n,t,r)))}function _O(n){let e=kO(n),t=jb(),r=!0;const s=d=>(m,g)=>{var x;const y=sl(n,g,d==="exit"?(x=n.presenceContext)==null?void 0:x.custom:void 0);if(y){const{transition:E,transitionEnd:k,...S}=y;m={...m,...S,...k}}return m};function l(d){e=d(n)}function c(d){const{props:m}=n,g=eT(n.parent)||{},y=[],x=new Set;let E={},k=1/0;for(let T=0;T<bO;T++){const P=wO[T],M=t[P],D=m[P]!==void 0?m[P]:g[P],U=du(D),H=P===d?M.isActive:null;H===!1&&(k=T);let K=D===g[P]&&D!==m[P]&&U;if(K&&r&&n.manuallyAnimateOnMount&&(K=!1),M.protectedKeys={...E},!M.isActive&&H===null||!D&&!M.prevProp||Of(D)||typeof D=="boolean")continue;const A=SO(M.prevProp,D);let C=A||P===d&&M.isActive&&!K&&U||T>k&&U,N=!1;const L=Array.isArray(D)?D:[D];let B=L.reduce(s(P),{});H===!1&&(B={});const{prevResolvedValues:F={}}=M,V={...F,...B},Me=Ie=>{C=!0,x.has(Ie)&&(N=!0,x.delete(Ie)),M.needsAnimating[Ie]=!0;const re=n.getValue(Ie);re&&(re.liveStyle=!1)};for(const Ie in V){const re=B[Ie],me=F[Ie];if(E.hasOwnProperty(Ie))continue;let ue=!1;Kg(re)&&Kg(me)?ue=!tT(re,me):ue=re!==me,ue?re!=null?Me(Ie):x.add(Ie):re!==void 0&&x.has(Ie)?Me(Ie):M.protectedKeys[Ie]=!0}M.prevProp=D,M.prevResolvedValues=B,M.isActive&&(E={...E,...B}),r&&n.blockInitialAnimation&&(C=!1);const We=K&&A;C&&(!We||N)&&y.push(...L.map(Ie=>{const re={type:P};if(typeof Ie=="string"&&r&&!We&&n.manuallyAnimateOnMount&&n.parent){const{parent:me}=n,ue=sl(me,Ie);if(me.enteringChildren&&ue){const{delayChildren:$}=ue.transition||{};re.delay=_E(me.enteringChildren,n,$)}}return{animation:Ie,options:re}}))}if(x.size){const T={};if(typeof m.initial!="boolean"){const P=sl(n,Array.isArray(m.initial)?m.initial[0]:m.initial);P&&P.transition&&(T.transition=P.transition)}x.forEach(P=>{const M=n.getBaseTarget(P),D=n.getValue(P);D&&(D.liveStyle=!0),T[P]=M??null}),y.push({animation:T})}let S=!!y.length;return r&&(m.initial===!1||m.initial===m.animate)&&!n.manuallyAnimateOnMount&&(S=!1),r=!1,S?e(y):Promise.resolve()}function h(d,m){var y;if(t[d].isActive===m)return Promise.resolve();(y=n.variantChildren)==null||y.forEach(x=>{var E;return(E=x.animationState)==null?void 0:E.setActive(d,m)}),t[d].isActive=m;const g=c(d);for(const x in t)t[x].protectedKeys={};return g}return{animateChanges:c,setActive:h,setAnimateFunction:l,getState:()=>t,reset:()=>{t=jb()}}}function SO(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!tT(e,n):!1}function Do(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function jb(){return{animate:Do(!0),whileInView:Do(),whileHover:Do(),whileTap:Do(),whileDrag:Do(),whileFocus:Do(),exit:Do()}}function Ab(n,e){n.min=e.min,n.max=e.max}function Ar(n,e){Ab(n.x,e.x),Ab(n.y,e.y)}function Rb(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}const nT=1e-4,EO=1-nT,TO=1+nT,rT=.01,IO=0-rT,CO=0+rT;function En(n){return n.max-n.min}function jO(n,e,t){return Math.abs(n-e)<=t}function Pb(n,e,t,r=.5){n.origin=r,n.originPoint=St(e.min,e.max,n.origin),n.scale=En(t)/En(e),n.translate=St(t.min,t.max,n.origin)-n.originPoint,(n.scale>=EO&&n.scale<=TO||isNaN(n.scale))&&(n.scale=1),(n.translate>=IO&&n.translate<=CO||isNaN(n.translate))&&(n.translate=0)}function Qc(n,e,t,r){Pb(n.x,e.x,t.x,r?r.originX:void 0),Pb(n.y,e.y,t.y,r?r.originY:void 0)}function Nb(n,e,t){n.min=t.min+e.min,n.max=n.min+En(e)}function AO(n,e,t){Nb(n.x,e.x,t.x),Nb(n.y,e.y,t.y)}function Db(n,e,t){n.min=e.min-t.min,n.max=n.min+En(e)}function tf(n,e,t){Db(n.x,e.x,t.x),Db(n.y,e.y,t.y)}function Mb(n,e,t,r,s){return n-=e,n=ef(n,1/t,r),s!==void 0&&(n=ef(n,1/s,r)),n}function RO(n,e=0,t=1,r=.5,s,l=n,c=n){if(fi.test(e)&&(e=parseFloat(e),e=St(c.min,c.max,e/100)-c.min),typeof e!="number")return;let h=St(l.min,l.max,r);n===l&&(h-=e),n.min=Mb(n.min,e,t,h,s),n.max=Mb(n.max,e,t,h,s)}function Vb(n,e,[t,r,s],l,c){RO(n,e[t],e[r],e[s],e.scale,l,c)}const PO=["x","scaleX","originX"],NO=["y","scaleY","originY"];function Lb(n,e,t,r){Vb(n.x,e,PO,t?t.x:void 0,r?r.x:void 0),Vb(n.y,e,NO,t?t.y:void 0,r?r.y:void 0)}function Ob(n){return n.translate===0&&n.scale===1}function iT(n){return Ob(n.x)&&Ob(n.y)}function Bb(n,e){return n.min===e.min&&n.max===e.max}function DO(n,e){return Bb(n.x,e.x)&&Bb(n.y,e.y)}function zb(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function sT(n,e){return zb(n.x,e.x)&&zb(n.y,e.y)}function Fb(n){return En(n.x)/En(n.y)}function Ub(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}function lr(n){return[n("x"),n("y")]}function MO(n,e,t){let r="";const s=n.x.translate/e.x,l=n.y.translate/e.y,c=(t==null?void 0:t.z)||0;if((s||l||c)&&(r=`translate3d(${s}px, ${l}px, ${c}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:m,rotate:g,rotateX:y,rotateY:x,skewX:E,skewY:k}=t;m&&(r=`perspective(${m}px) ${r}`),g&&(r+=`rotate(${g}deg) `),y&&(r+=`rotateX(${y}deg) `),x&&(r+=`rotateY(${x}deg) `),E&&(r+=`skewX(${E}deg) `),k&&(r+=`skewY(${k}deg) `)}const h=n.x.scale*e.x,d=n.y.scale*e.y;return(h!==1||d!==1)&&(r+=`scale(${h}, ${d})`),r||"none"}const oT=["TopLeft","TopRight","BottomLeft","BottomRight"],VO=oT.length,Wb=n=>typeof n=="string"?parseFloat(n):n,$b=n=>typeof n=="number"||we.test(n);function LO(n,e,t,r,s,l){s?(n.opacity=St(0,t.opacity??1,OO(r)),n.opacityExit=St(e.opacity??1,0,BO(r))):l&&(n.opacity=St(e.opacity??1,t.opacity??1,r));for(let c=0;c<VO;c++){const h=`border${oT[c]}Radius`;let d=Hb(e,h),m=Hb(t,h);if(d===void 0&&m===void 0)continue;d||(d=0),m||(m=0),d===0||m===0||$b(d)===$b(m)?(n[h]=Math.max(St(Wb(d),Wb(m),r),0),(fi.test(m)||fi.test(d))&&(n[h]+="%")):n[h]=m}(e.rotate||t.rotate)&&(n.rotate=St(e.rotate||0,t.rotate||0,r))}function Hb(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const OO=aT(0,.5,eE),BO=aT(.5,.95,hr);function aT(n,e,t){return r=>r<n?0:r>e?1:t(lu(n,e,r))}function zO(n,e,t){const r=xn(n)?n:xl(n);return r.start(V0("",r,e,t)),r.animation}function hu(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}const FO=(n,e)=>n.depth-e.depth;class UO{constructor(){this.children=[],this.isDirty=!1}add(e){x0(this.children,e),this.isDirty=!0}remove(e){w0(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(FO),this.isDirty=!1,this.children.forEach(e)}}function WO(n,e){const t=Sn.now(),r=({timestamp:s})=>{const l=s-t;l>=e&&(Ys(r),n(l-e))};return vt.setup(r,!0),()=>Ys(r)}function Eh(n){return xn(n)?n.get():n}class $O{constructor(){this.members=[]}add(e){x0(this.members,e),e.scheduleRender()}remove(e){if(w0(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(s=>e===s);if(t===0)return!1;let r;for(let s=t;s>=0;s--){const l=this.members[s];if(l.isPresent!==!1){r=l;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const Th={hasAnimatedSinceResize:!0,hasEverUpdated:!1},Up=["","X","Y","Z"],HO=1e3;let KO=0;function Wp(n,e,t,r){const{latestValues:s}=e;s[n]&&(t[n]=s[n],e.setStaticValue(n,0),r&&(r[n]=0))}function lT(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=IE(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:s,layoutId:l}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",vt,!(s||l))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&lT(r)}function cT({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(c={},h=e==null?void 0:e()){this.id=KO++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(QO),this.nodes.forEach(ZO),this.nodes.forEach(e8),this.nodes.forEach(YO)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new UO)}addEventListener(c,h){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new _0),this.eventHandlers.get(c).add(h)}notifyListeners(c,...h){const d=this.eventHandlers.get(c);d&&d.notify(...h)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=BE(c)&&!GL(c),this.instance=c;const{layoutId:h,layout:d,visualElement:m}=this.options;if(m&&!m.current&&m.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||h)&&(this.isLayoutDirty=!0),n){let g,y=0;const x=()=>this.root.updateBlockedByResize=!1;vt.read(()=>{y=window.innerWidth}),n(c,()=>{const E=window.innerWidth;E!==y&&(y=E,this.root.updateBlockedByResize=!0,g&&g(),g=WO(x,250),Th.hasAnimatedSinceResize&&(Th.hasAnimatedSinceResize=!1,this.nodes.forEach(Gb)))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&m&&(h||d)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:y,hasRelativeLayoutChanged:x,layout:E})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const k=this.options.transition||m.getDefaultTransition()||s8,{onLayoutAnimationStart:S,onLayoutAnimationComplete:T}=m.getProps(),P=!this.targetLayout||!sT(this.targetLayout,E),M=!y&&x;if(this.options.layoutRoot||this.resumeFrom||M||y&&(P||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const D={...M0(k,"layout"),onPlay:S,onComplete:T};(m.shouldReduceMotion||this.options.layoutRoot)&&(D.delay=0,D.type=!1),this.startAnimation(D),this.setAnimationOrigin(g,M)}else y||Gb(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=E})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ys(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(t8),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&lT(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const y=this.path[g];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:h,layout:d}=this.options;if(h===void 0&&!d)return;const m=this.getTransformTemplate();this.prevTransformTemplateValue=m?m(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Kb);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(qb);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(JO),this.nodes.forEach(qO),this.nodes.forEach(GO)):this.nodes.forEach(qb),this.clearAllSnapshots();const h=Sn.now();on.delta=pi(0,1e3/60,h-on.timestamp),on.timestamp=h,on.isProcessing=!0,Dp.update.process(on),Dp.preRender.process(on),Dp.render.process(on),on.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,z0.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(XO),this.sharedNodes.forEach(n8)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,vt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){vt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!En(this.snapshot.measuredBox.x)&&!En(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Kt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(h=!1),h&&this.instance){const d=r(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:d,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!s)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!iT(this.projectionDelta),d=this.getTransformTemplate(),m=d?d(this.latestValues,""):void 0,g=m!==this.prevTransformTemplateValue;c&&this.instance&&(h||Vo(this.latestValues)||g)&&(s(this.instance,m),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const h=this.measurePageBox();let d=this.removeElementScroll(h);return c&&(d=this.removeTransform(d)),o8(d),{animationId:this.root.animationId,measuredBox:h,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var m;const{visualElement:c}=this.options;if(!c)return Kt();const h=c.measureViewportBox();if(!(((m=this.scroll)==null?void 0:m.wasRoot)||this.path.some(a8))){const{scroll:g}=this.root;g&&(Qa(h.x,g.offset.x),Qa(h.y,g.offset.y))}return h}removeElementScroll(c){var d;const h=Kt();if(Ar(h,c),(d=this.scroll)!=null&&d.wasRoot)return h;for(let m=0;m<this.path.length;m++){const g=this.path[m],{scroll:y,options:x}=g;g!==this.root&&y&&x.layoutScroll&&(y.wasRoot&&Ar(h,c),Qa(h.x,y.offset.x),Qa(h.y,y.offset.y))}return h}applyTransform(c,h=!1){const d=Kt();Ar(d,c);for(let m=0;m<this.path.length;m++){const g=this.path[m];!h&&g.options.layoutScroll&&g.scroll&&g!==g.root&&Ya(d,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),Vo(g.latestValues)&&Ya(d,g.latestValues)}return Vo(this.latestValues)&&Ya(d,this.latestValues),d}removeTransform(c){const h=Kt();Ar(h,c);for(let d=0;d<this.path.length;d++){const m=this.path[d];if(!m.instance||!Vo(m.latestValues))continue;Xg(m.latestValues)&&m.updateSnapshot();const g=Kt(),y=m.measurePageBox();Ar(g,y),Lb(h,m.latestValues,m.snapshot?m.snapshot.layoutBox:void 0,g)}return Vo(this.latestValues)&&Lb(h,this.latestValues),h}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==on.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){var E;const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==h;if(!(c||d&&this.isSharedProjectionDirty||this.isProjectionDirty||(E=this.parent)!=null&&E.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:y}=this.options;if(!this.layout||!(g||y))return;this.resolvedRelativeTargetAt=on.timestamp;const x=this.getClosestProjectingParent();x&&this.linkedParentVersion!==x.layoutVersion&&!x.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(x&&x.layout?this.createRelativeTarget(x,this.layout.layoutBox,x.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Kt(),this.targetWithTransforms=Kt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),AO(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ar(this.target,this.layout.layoutBox),KE(this.target,this.targetDelta)):Ar(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?this.createRelativeTarget(x,this.target,x.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Xg(this.parent.latestValues)||HE(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(c,h,d){this.relativeParent=c,this.linkedParentVersion=c.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Kt(),this.relativeTargetOrigin=Kt(),tf(this.relativeTargetOrigin,h,d),Ar(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var k;const c=this.getLead(),h=!!this.resumingFrom||this!==c;let d=!0;if((this.isProjectionDirty||(k=this.parent)!=null&&k.isProjectionDirty)&&(d=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===on.timestamp&&(d=!1),d)return;const{layout:m,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||g))return;Ar(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,x=this.treeScale.y;sO(this.layoutCorrected,this.treeScale,this.path,h),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=Kt());const{target:E}=c;if(!E){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Rb(this.prevProjectionDelta.x,this.projectionDelta.x),Rb(this.prevProjectionDelta.y,this.projectionDelta.y)),Qc(this.projectionDelta,this.layoutCorrected,E,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==x||!Ub(this.projectionDelta.x,this.prevProjectionDelta.x)||!Ub(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",E))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){var h;if((h=this.options.visualElement)==null||h.scheduleRender(),c){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ga(),this.projectionDelta=Ga(),this.projectionDeltaWithTransform=Ga()}setAnimationOrigin(c,h=!1){const d=this.snapshot,m=d?d.latestValues:{},g={...this.latestValues},y=Ga();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const x=Kt(),E=d?d.source:void 0,k=this.layout?this.layout.source:void 0,S=E!==k,T=this.getStack(),P=!T||T.members.length<=1,M=!!(S&&!P&&this.options.crossfade===!0&&!this.path.some(i8));this.animationProgress=0;let D;this.mixTargetDelta=U=>{const H=U/1e3;Qb(y.x,c.x,H),Qb(y.y,c.y,H),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(tf(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),r8(this.relativeTarget,this.relativeTargetOrigin,x,H),D&&DO(this.relativeTarget,D)&&(this.isProjectionDirty=!1),D||(D=Kt()),Ar(D,this.relativeTarget)),S&&(this.animationValues=g,LO(g,m,this.latestValues,H,M,P)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=H},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){var h,d,m;this.notifyListeners("animationStart"),(h=this.currentAnimation)==null||h.stop(),(m=(d=this.resumingFrom)==null?void 0:d.currentAnimation)==null||m.stop(),this.pendingAnimation&&(Ys(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=vt.update(()=>{Th.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=xl(0)),this.currentAnimation=zO(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:g=>{this.mixTargetDelta(g),c.onUpdate&&c.onUpdate(g)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(HO),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:h,target:d,layout:m,latestValues:g}=c;if(!(!h||!d||!m)){if(this!==c&&this.layout&&m&&uT(this.options.animationType,this.layout.layoutBox,m.layoutBox)){d=this.target||Kt();const y=En(this.layout.layoutBox.x);d.x.min=c.target.x.min,d.x.max=d.x.min+y;const x=En(this.layout.layoutBox.y);d.y.min=c.target.y.min,d.y.max=d.y.min+x}Ar(h,d),Ya(h,g),Qc(this.projectionDeltaWithTransform,this.layoutCorrected,h,g)}}registerSharedNode(c,h){this.sharedNodes.has(c)||this.sharedNodes.set(c,new $O),this.sharedNodes.get(c).add(h);const m=h.options.initialPromotionConfig;h.promote({transition:m?m.transition:void 0,preserveFollowOpacity:m&&m.shouldPreserveFollowOpacity?m.shouldPreserveFollowOpacity(h):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){var h;const{layoutId:c}=this.options;return c?((h=this.getStack())==null?void 0:h.lead)||this:this}getPrevLead(){var h;const{layoutId:c}=this.options;return c?(h=this.getStack())==null?void 0:h.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:h,preserveFollowOpacity:d}={}){const m=this.getStack();m&&m.promote(this,d),c&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let h=!1;const{latestValues:d}=c;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(h=!0),!h)return;const m={};d.z&&Wp("z",c,m,this.animationValues);for(let g=0;g<Up.length;g++)Wp(`rotate${Up[g]}`,c,m,this.animationValues),Wp(`skew${Up[g]}`,c,m,this.animationValues);c.render();for(const g in m)c.setStaticValue(g,m[g]),this.animationValues&&(this.animationValues[g]=m[g]);c.scheduleRender()}applyProjectionStyles(c,h){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=Eh(h==null?void 0:h.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none";return}const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=Eh(h==null?void 0:h.pointerEvents)||""),this.hasProjected&&!Vo(this.latestValues)&&(c.transform=d?d({},""):"none",this.hasProjected=!1);return}c.visibility="";const g=m.animationValues||m.latestValues;this.applyTransformsToTarget();let y=MO(this.projectionDeltaWithTransform,this.treeScale,g);d&&(y=d(g,y)),c.transform=y;const{x,y:E}=this.projectionDelta;c.transformOrigin=`${x.origin*100}% ${E.origin*100}% 0`,m.animationValues?c.opacity=m===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:c.opacity=m===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const k in Zg){if(g[k]===void 0)continue;const{correct:S,applyTo:T,isCSSVariable:P}=Zg[k],M=y==="none"?g[k]:S(g[k],m);if(T){const D=T.length;for(let U=0;U<D;U++)c[T[U]]=M}else P?this.options.visualElement.renderState.vars[k]=M:c[k]=M}this.options.layoutId&&(c.pointerEvents=m===this?Eh(h==null?void 0:h.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>{var h;return(h=c.currentAnimation)==null?void 0:h.stop()}),this.root.nodes.forEach(Kb),this.root.sharedNodes.clear()}}}function qO(n){n.updateLayout()}function GO(n){var t;const e=((t=n.resumeFrom)==null?void 0:t.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=n.layout,{animationType:l}=n.options,c=e.source!==n.layout.source;l==="size"?lr(y=>{const x=c?e.measuredBox[y]:e.layoutBox[y],E=En(x);x.min=r[y].min,x.max=x.min+E}):uT(l,e.layoutBox,r)&&lr(y=>{const x=c?e.measuredBox[y]:e.layoutBox[y],E=En(r[y]);x.max=x.min+E,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[y].max=n.relativeTarget[y].min+E)});const h=Ga();Qc(h,r,e.layoutBox);const d=Ga();c?Qc(d,n.applyTransform(s,!0),e.measuredBox):Qc(d,r,e.layoutBox);const m=!iT(h);let g=!1;if(!n.resumeFrom){const y=n.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:x,layout:E}=y;if(x&&E){const k=Kt();tf(k,e.layoutBox,x.layoutBox);const S=Kt();tf(S,r,E.layoutBox),sT(k,S)||(g=!0),y.options.layoutRoot&&(n.relativeTarget=S,n.relativeTargetOrigin=k,n.relativeParent=y)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:d,layoutDelta:h,hasLayoutChanged:m,hasRelativeLayoutChanged:g})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function QO(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function YO(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function XO(n){n.clearSnapshot()}function Kb(n){n.clearMeasurements()}function qb(n){n.isLayoutDirty=!1}function JO(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function Gb(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function ZO(n){n.resolveTargetDelta()}function e8(n){n.calcProjection()}function t8(n){n.resetSkewAndRotation()}function n8(n){n.removeLeadSnapshot()}function Qb(n,e,t){n.translate=St(e.translate,0,t),n.scale=St(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function Yb(n,e,t,r){n.min=St(e.min,t.min,r),n.max=St(e.max,t.max,r)}function r8(n,e,t,r){Yb(n.x,e.x,t.x,r),Yb(n.y,e.y,t.y,r)}function i8(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const s8={duration:.45,ease:[.4,0,.1,1]},Xb=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),Jb=Xb("applewebkit/")&&!Xb("chrome/")?Math.round:hr;function Zb(n){n.min=Jb(n.min),n.max=Jb(n.max)}function o8(n){Zb(n.x),Zb(n.y)}function uT(n,e,t){return n==="position"||n==="preserve-aspect"&&!jO(Fb(e),Fb(t),.2)}function a8(n){var e;return n!==n.root&&((e=n.scroll)==null?void 0:e.wasRoot)}const l8=cT({attachResizeListener:(n,e)=>hu(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),$p={current:void 0},dT=cT({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!$p.current){const n=new l8({});n.mount(window),n.setOptions({layoutScroll:!0}),$p.current=n}return $p.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),K0=j.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function ek(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function c8(...n){return e=>{let t=!1;const r=n.map(s=>{const l=ek(s,e);return!t&&typeof l=="function"&&(t=!0),l});if(t)return()=>{for(let s=0;s<r.length;s++){const l=r[s];typeof l=="function"?l():ek(n[s],null)}}}}function u8(...n){return j.useCallback(c8(...n),n)}class d8 extends j.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=t.offsetParent,s=DE(r)&&r.offsetWidth||0,l=this.props.sizeRef.current;l.height=t.offsetHeight||0,l.width=t.offsetWidth||0,l.top=t.offsetTop,l.left=t.offsetLeft,l.right=s-l.width-l.left}return null}componentDidUpdate(){}render(){return this.props.children}}function h8({children:n,isPresent:e,anchorX:t,root:r}){var g;const s=j.useId(),l=j.useRef(null),c=j.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=j.useContext(K0),d=((g=n.props)==null?void 0:g.ref)??(n==null?void 0:n.ref),m=u8(l,d);return j.useInsertionEffect(()=>{const{width:y,height:x,top:E,left:k,right:S}=c.current;if(e||!l.current||!y||!x)return;const T=t==="left"?`left: ${k}`:`right: ${S}`;l.current.dataset.motionPopId=s;const P=document.createElement("style");h&&(P.nonce=h);const M=r??document.head;return M.appendChild(P),P.sheet&&P.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${y}px !important;
            height: ${x}px !important;
            ${T}px !important;
            top: ${E}px !important;
          }
        `),()=>{M.contains(P)&&M.removeChild(P)}},[e]),o.jsx(d8,{isPresent:e,childRef:l,sizeRef:c,children:j.cloneElement(n,{ref:m})})}const f8=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:s,presenceAffectsLayout:l,mode:c,anchorX:h,root:d})=>{const m=v0(m8),g=j.useId();let y=!0,x=j.useMemo(()=>(y=!1,{id:g,initial:e,isPresent:t,custom:s,onExitComplete:E=>{m.set(E,!0);for(const k of m.values())if(!k)return;r&&r()},register:E=>(m.set(E,!1),()=>m.delete(E))}),[t,m,r]);return l&&y&&(x={...x}),j.useMemo(()=>{m.forEach((E,k)=>m.set(k,!1))},[t]),j.useEffect(()=>{!t&&!m.size&&r&&r()},[t]),c==="popLayout"&&(n=o.jsx(h8,{isPresent:t,anchorX:h,root:d,children:n})),o.jsx(Lf.Provider,{value:x,children:n})};function m8(){return new Map}function hT(n=!0){const e=j.useContext(Lf);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:s}=e,l=j.useId();j.useEffect(()=>{if(n)return s(l)},[n]);const c=j.useCallback(()=>n&&r&&r(l),[l,r,n]);return!t&&r?[!1,c]:[!0]}const ah=n=>n.key||"";function tk(n){const e=[];return j.Children.forEach(n,t=>{j.isValidElement(t)&&e.push(t)}),e}const q0=({children:n,custom:e,initial:t=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:l="sync",propagate:c=!1,anchorX:h="left",root:d})=>{const[m,g]=hT(c),y=j.useMemo(()=>tk(n),[n]),x=c&&!m?[]:y.map(ah),E=j.useRef(!0),k=j.useRef(y),S=v0(()=>new Map),T=j.useRef(new Set),[P,M]=j.useState(y),[D,U]=j.useState(y);W2(()=>{E.current=!1,k.current=y;for(let A=0;A<D.length;A++){const C=ah(D[A]);x.includes(C)?(S.delete(C),T.current.delete(C)):S.get(C)!==!0&&S.set(C,!1)}},[D,x.length,x.join("-")]);const H=[];if(y!==P){let A=[...y];for(let C=0;C<D.length;C++){const N=D[C],L=ah(N);x.includes(L)||(A.splice(C,0,N),H.push(N))}return l==="wait"&&H.length&&(A=H),U(tk(A)),M(y),null}const{forceRender:K}=j.useContext(y0);return o.jsx(o.Fragment,{children:D.map(A=>{const C=ah(A),N=c&&!m?!1:y===D||x.includes(C),L=()=>{if(T.current.has(C))return;if(T.current.add(C),S.has(C))S.set(C,!0);else return;let B=!0;S.forEach(F=>{F||(B=!1)}),B&&(K==null||K(),U(k.current),c&&(g==null||g()),r&&r())};return o.jsx(f8,{isPresent:N,initial:!E.current||t?void 0:!1,custom:e,presenceAffectsLayout:s,mode:l,root:d,onExitComplete:N?void 0:L,anchorX:h,children:A},C)})})},fT=j.createContext({strict:!1}),nk={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let rk=!1;function p8(){if(rk)return;const n={};for(const e in nk)n[e]={isEnabled:t=>nk[e].some(r=>!!t[r])};UE(n),rk=!0}function mT(){return p8(),tO()}function g8(n){const e=mT();for(const t in n)e[t]={...e[t],...n[t]};UE(e)}const y8=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function nf(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||y8.has(n)}let pT=n=>!nf(n);function v8(n){typeof n=="function"&&(pT=e=>e.startsWith("on")?!nf(e):n(e))}try{v8(require("@emotion/is-prop-valid").default)}catch{}function x8(n,e,t){const r={};for(const s in n)s==="values"&&typeof n.values=="object"||(pT(s)||t===!0&&nf(s)||!e&&!nf(s)||n.draggable&&s.startsWith("onDrag"))&&(r[s]=n[s]);return r}const zf=j.createContext({});function w8(n,e){if(Bf(n)){const{initial:t,animate:r}=n;return{initial:t===!1||du(t)?t:void 0,animate:du(r)?r:void 0}}return n.inherit!==!1?e:{}}function b8(n){const{initial:e,animate:t}=w8(n,j.useContext(zf));return j.useMemo(()=>({initial:e,animate:t}),[ik(e),ik(t)])}function ik(n){return Array.isArray(n)?n.join(" "):n}const G0=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function gT(n,e,t){for(const r in e)!xn(e[r])&&!QE(r,t)&&(n[r]=e[r])}function k8({transformTemplate:n},e){return j.useMemo(()=>{const t=G0();return $0(t,e,n),Object.assign({},t.vars,t.style)},[e])}function _8(n,e){const t=n.style||{},r={};return gT(r,t,n),Object.assign(r,k8(n,e)),r}function S8(n,e){const t={},r=_8(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}const yT=()=>({...G0(),attrs:{}});function E8(n,e,t,r){const s=j.useMemo(()=>{const l=yT();return YE(l,e,JE(r),n.transformTemplate,n.style),{...l.attrs,style:{...l.style}}},[e]);if(n.style){const l={};gT(l,n.style,n),s.style={...l,...s.style}}return s}const T8=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Q0(n){return typeof n!="string"||n.includes("-")?!1:!!(T8.indexOf(n)>-1||/[A-Z]/u.test(n))}function I8(n,e,t,{latestValues:r},s,l=!1,c){const d=(c??Q0(n)?E8:S8)(e,r,s,n),m=x8(e,typeof n=="string",l),g=n!==j.Fragment?{...m,...d,ref:t}:{},{children:y}=e,x=j.useMemo(()=>xn(y)?y.get():y,[y]);return j.createElement(n,{...g,children:x})}function C8({scrapeMotionValuesFromProps:n,createRenderState:e},t,r,s){return{latestValues:j8(t,r,s,n),renderState:e()}}function j8(n,e,t,r){const s={},l=r(n,{});for(const x in l)s[x]=Eh(l[x]);let{initial:c,animate:h}=n;const d=Bf(n),m=FE(n);e&&m&&!d&&n.inherit!==!1&&(c===void 0&&(c=e.initial),h===void 0&&(h=e.animate));let g=t?t.initial===!1:!1;g=g||c===!1;const y=g?h:c;if(y&&typeof y!="boolean"&&!Of(y)){const x=Array.isArray(y)?y:[y];for(let E=0;E<x.length;E++){const k=L0(n,x[E]);if(k){const{transitionEnd:S,transition:T,...P}=k;for(const M in P){let D=P[M];if(Array.isArray(D)){const U=g?D.length-1:0;D=D[U]}D!==null&&(s[M]=D)}for(const M in S)s[M]=S[M]}}}return s}const vT=n=>(e,t)=>{const r=j.useContext(zf),s=j.useContext(Lf),l=()=>C8(n,e,r,s);return t?l():v0(l)},A8=vT({scrapeMotionValuesFromProps:H0,createRenderState:G0}),R8=vT({scrapeMotionValuesFromProps:ZE,createRenderState:yT}),P8=Symbol.for("motionComponentSymbol");function N8(n,e,t){const r=j.useRef(t);j.useInsertionEffect(()=>{r.current=t});const s=j.useRef(null);return j.useCallback(l=>{var h;l&&((h=n.onMount)==null||h.call(n,l)),e&&(l?e.mount(l):e.unmount());const c=r.current;if(typeof c=="function")if(l){const d=c(l);typeof d=="function"&&(s.current=d)}else s.current?(s.current(),s.current=null):c(l);else c&&(c.current=l)},[e])}const xT=j.createContext({});function zc(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function D8(n,e,t,r,s,l){var T,P;const{visualElement:c}=j.useContext(zf),h=j.useContext(fT),d=j.useContext(Lf),m=j.useContext(K0).reducedMotion,g=j.useRef(null);r=r||h.renderer,!g.current&&r&&(g.current=r(n,{visualState:e,parent:c,props:t,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:m,isSVG:l}));const y=g.current,x=j.useContext(xT);y&&!y.projection&&s&&(y.type==="html"||y.type==="svg")&&M8(g.current,t,s,x);const E=j.useRef(!1);j.useInsertionEffect(()=>{y&&E.current&&y.update(t,d)});const k=t[TE],S=j.useRef(!!k&&!((T=window.MotionHandoffIsComplete)!=null&&T.call(window,k))&&((P=window.MotionHasOptimisedAnimation)==null?void 0:P.call(window,k)));return W2(()=>{y&&(E.current=!0,window.MotionIsMounted=!0,y.updateFeatures(),y.scheduleRenderMicrotask(),S.current&&y.animationState&&y.animationState.animateChanges())}),j.useEffect(()=>{y&&(!S.current&&y.animationState&&y.animationState.animateChanges(),S.current&&(queueMicrotask(()=>{var M;(M=window.MotionHandoffMarkAsComplete)==null||M.call(window,k)}),S.current=!1),y.enteringChildren=void 0)}),y}function M8(n,e,t,r){const{layoutId:s,layout:l,drag:c,dragConstraints:h,layoutScroll:d,layoutRoot:m,layoutCrossfade:g}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:wT(n.parent)),n.projection.setOptions({layoutId:s,layout:l,alwaysMeasureLayout:!!c||h&&zc(h),visualElement:n,animationType:typeof l=="string"?l:"both",initialPromotionConfig:r,crossfade:g,layoutScroll:d,layoutRoot:m})}function wT(n){if(n)return n.options.allowProjection!==!1?n.projection:wT(n.parent)}function Hp(n,{forwardMotionProps:e=!1,type:t}={},r,s){r&&g8(r);const l=t?t==="svg":Q0(n),c=l?R8:A8;function h(m,g){let y;const x={...j.useContext(K0),...m,layoutId:V8(m)},{isStatic:E}=x,k=b8(m),S=c(m,E);if(!E&&U2){L8();const T=O8(x);y=T.MeasureLayout,k.visualElement=D8(n,S,x,s,T.ProjectionNode,l)}return o.jsxs(zf.Provider,{value:k,children:[y&&k.visualElement?o.jsx(y,{visualElement:k.visualElement,...x}):null,I8(n,m,N8(S,k.visualElement,g),S,E,e,l)]})}h.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const d=j.forwardRef(h);return d[P8]=n,d}function V8({layoutId:n}){const e=j.useContext(y0).id;return e&&n!==void 0?e+"-"+n:n}function L8(n,e){j.useContext(fT).strict}function O8(n){const e=mT(),{drag:t,layout:r}=e;if(!t&&!r)return{};const s={...t,...r};return{MeasureLayout:t!=null&&t.isEnabled(n)||r!=null&&r.isEnabled(n)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function B8(n,e){if(typeof Proxy>"u")return Hp;const t=new Map,r=(l,c)=>Hp(l,c,n,e),s=(l,c)=>r(l,c);return new Proxy(s,{get:(l,c)=>c==="create"?r:(t.has(c)||t.set(c,Hp(c,void 0,n,e)),t.get(c))})}const z8=(n,e)=>e.isSVG??Q0(n)?new vO(e):new hO(e,{allowProjection:n!==j.Fragment});class F8 extends so{constructor(e){super(e),e.animationState||(e.animationState=_O(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Of(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let U8=0;class W8 extends so{constructor(){super(...arguments),this.id=U8++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);t&&!e&&s.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const $8={animation:{Feature:F8},exit:{Feature:W8}};function Ru(n){return{point:{x:n.pageX,y:n.pageY}}}const H8=n=>e=>F0(e)&&n(e,Ru(e));function Yc(n,e,t,r){return hu(n,e,H8(t),r)}const bT=({current:n})=>n?n.ownerDocument.defaultView:null,sk=(n,e)=>Math.abs(n-e);function K8(n,e){const t=sk(n.x,e.x),r=sk(n.y,e.y);return Math.sqrt(t**2+r**2)}const ok=new Set(["auto","scroll"]);class kT{constructor(e,t,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:l=!1,distanceThreshold:c=3,element:h}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=E=>{this.handleScroll(E.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=qp(this.lastMoveEventInfo,this.history),k=this.startEvent!==null,S=K8(E.offset,{x:0,y:0})>=this.distanceThreshold;if(!k&&!S)return;const{point:T}=E,{timestamp:P}=on;this.history.push({...T,timestamp:P});const{onStart:M,onMove:D}=this.handlers;k||(M&&M(this.lastMoveEvent,E),this.startEvent=this.lastMoveEvent),D&&D(this.lastMoveEvent,E)},this.handlePointerMove=(E,k)=>{this.lastMoveEvent=E,this.lastMoveEventInfo=Kp(k,this.transformPagePoint),vt.update(this.updatePoint,!0)},this.handlePointerUp=(E,k)=>{this.end();const{onEnd:S,onSessionEnd:T,resumeAnimation:P}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&P&&P(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const M=qp(E.type==="pointercancel"?this.lastMoveEventInfo:Kp(k,this.transformPagePoint),this.history);this.startEvent&&S&&S(E,M),T&&T(E,M)},!F0(e))return;this.dragSnapToOrigin=l,this.handlers=t,this.transformPagePoint=r,this.distanceThreshold=c,this.contextWindow=s||window;const d=Ru(e),m=Kp(d,this.transformPagePoint),{point:g}=m,{timestamp:y}=on;this.history=[{...g,timestamp:y}];const{onSessionStart:x}=t;x&&x(e,qp(m,this.history)),this.removeListeners=Cu(Yc(this.contextWindow,"pointermove",this.handlePointerMove),Yc(this.contextWindow,"pointerup",this.handlePointerUp),Yc(this.contextWindow,"pointercancel",this.handlePointerUp)),h&&this.startScrollTracking(h)}startScrollTracking(e){let t=e.parentElement;for(;t;){const r=getComputedStyle(t);(ok.has(r.overflowX)||ok.has(r.overflowY))&&this.scrollPositions.set(t,{x:t.scrollLeft,y:t.scrollTop}),t=t.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const t=this.scrollPositions.get(e);if(!t)return;const r=e===window,s=r?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},l={x:s.x-t.x,y:s.y-t.y};l.x===0&&l.y===0||(r?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=l.x,this.lastMoveEventInfo.point.y+=l.y):this.history.length>0&&(this.history[0].x-=l.x,this.history[0].y-=l.y),this.scrollPositions.set(e,s),vt.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),Ys(this.updatePoint)}}function Kp(n,e){return e?{point:e(n.point)}:n}function ak(n,e){return{x:n.x-e.x,y:n.y-e.y}}function qp({point:n},e){return{point:n,delta:ak(n,_T(e)),offset:ak(n,q8(e)),velocity:G8(e,.1)}}function q8(n){return n[0]}function _T(n){return n[n.length-1]}function G8(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const s=_T(n);for(;t>=0&&(r=n[t],!(s.timestamp-r.timestamp>$i(e)));)t--;if(!r)return{x:0,y:0};const l=ur(s.timestamp-r.timestamp);if(l===0)return{x:0,y:0};const c={x:(s.x-r.x)/l,y:(s.y-r.y)/l};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function Q8(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?St(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?St(t,n,r.max):Math.min(n,t)),n}function lk(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function Y8(n,{top:e,left:t,bottom:r,right:s}){return{x:lk(n.x,t,s),y:lk(n.y,e,r)}}function ck(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function X8(n,e){return{x:ck(n.x,e.x),y:ck(n.y,e.y)}}function J8(n,e){let t=.5;const r=En(n),s=En(e);return s>r?t=lu(e.min,e.max-r,n.min):r>s&&(t=lu(n.min,n.max-s,e.min)),pi(0,1,t)}function Z8(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const ey=.35;function e9(n=ey){return n===!1?n=0:n===!0&&(n=ey),{x:uk(n,"left","right"),y:uk(n,"top","bottom")}}function uk(n,e,t){return{min:dk(n,e),max:dk(n,t)}}function dk(n,e){return typeof n=="number"?n:n[e]||0}const t9=new WeakMap;class n9{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Kt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const l=y=>{t?(this.stopAnimation(),this.snapToCursor(Ru(y).point)):this.pauseAnimation()},c=(y,x)=>{this.stopAnimation();const{drag:E,dragPropagation:k,onDragStart:S}=this.getProps();if(E&&!k&&(this.openDragLock&&this.openDragLock(),this.openDragLock=WL(E),!this.openDragLock))return;this.latestPointerEvent=y,this.latestPanInfo=x,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),lr(P=>{let M=this.getAxisMotionValue(P).get()||0;if(fi.test(M)){const{projection:D}=this.visualElement;if(D&&D.layout){const U=D.layout.layoutBox[P];U&&(M=En(U)*(parseFloat(M)/100))}}this.originPoint[P]=M}),S&&vt.postRender(()=>S(y,x)),qg(this.visualElement,"transform");const{animationState:T}=this.visualElement;T&&T.setActive("whileDrag",!0)},h=(y,x)=>{this.latestPointerEvent=y,this.latestPanInfo=x;const{dragPropagation:E,dragDirectionLock:k,onDirectionLock:S,onDrag:T}=this.getProps();if(!E&&!this.openDragLock)return;const{offset:P}=x;if(k&&this.currentDirection===null){this.currentDirection=r9(P),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",x.point,P),this.updateAxis("y",x.point,P),this.visualElement.render(),T&&T(y,x)},d=(y,x)=>{this.latestPointerEvent=y,this.latestPanInfo=x,this.stop(y,x),this.latestPointerEvent=null,this.latestPanInfo=null},m=()=>lr(y=>{var x;return this.getAnimationState(y)==="paused"&&((x=this.getAxisMotionValue(y).animation)==null?void 0:x.play())}),{dragSnapToOrigin:g}=this.getProps();this.panSession=new kT(e,{onSessionStart:l,onStart:c,onMove:h,onSessionEnd:d,resumeAnimation:m},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,distanceThreshold:r,contextWindow:bT(this.visualElement),element:this.visualElement.current})}stop(e,t){const r=e||this.latestPointerEvent,s=t||this.latestPanInfo,l=this.isDragging;if(this.cancel(),!l||!s||!r)return;const{velocity:c}=s;this.startAnimation(c);const{onDragEnd:h}=this.getProps();h&&vt.postRender(()=>h(r,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:s}=this.getProps();if(!r||!lh(e,s,this.currentDirection))return;const l=this.getAxisMotionValue(e);let c=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(c=Q8(c,this.constraints[e],this.elastic[e])),l.set(c)}resolveConstraints(){var l;const{dragConstraints:e,dragElastic:t}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(l=this.visualElement.projection)==null?void 0:l.layout,s=this.constraints;e&&zc(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=Y8(r.layoutBox,e):this.constraints=!1,this.elastic=e9(t),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&lr(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=Z8(r.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!zc(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const l=oO(r,s.root,this.visualElement.getTransformPagePoint());let c=X8(s.layout.layoutBox,l);if(t){const h=t(rO(c));this.hasMutatedConstraints=!!h,h&&(c=$E(h))}return c}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:s,dragTransition:l,dragSnapToOrigin:c,onDragTransitionEnd:h}=this.getProps(),d=this.constraints||{},m=lr(g=>{if(!lh(g,t,this.currentDirection))return;let y=d&&d[g]||{};c&&(y={min:0,max:0});const x=s?200:1e6,E=s?40:1e7,k={type:"inertia",velocity:r?e[g]:0,bounceStiffness:x,bounceDamping:E,timeConstant:750,restDelta:1,restSpeed:10,...l,...y};return this.startAxisValueAnimation(g,k)});return Promise.all(m).then(h)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return qg(this.visualElement,e),r.start(V0(e,r,0,t,this.visualElement,!1))}stopAnimation(){lr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){lr(e=>{var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[t];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){lr(t=>{const{drag:r}=this.getProps();if(!lh(t,r,this.currentDirection))return;const{projection:s}=this.visualElement,l=this.getAxisMotionValue(t);if(s&&s.layout){const{min:c,max:h}=s.layout.layoutBox[t],d=l.get()||0;l.set(e[t]-St(c,h,.5)+d)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!zc(t)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};lr(c=>{const h=this.getAxisMotionValue(c);if(h&&this.constraints!==!1){const d=h.get();s[c]=J8({min:d,max:d},this.constraints[c])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),lr(c=>{if(!lh(c,e,null))return;const h=this.getAxisMotionValue(c),{min:d,max:m}=this.constraints[c];h.set(St(d,m,s[c]))})}addListeners(){if(!this.visualElement.current)return;t9.set(this.visualElement,this);const e=this.visualElement.current,t=Yc(e,"pointerdown",d=>{const{drag:m,dragListener:g=!0}=this.getProps();m&&g&&!OE(d.target)&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();zc(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,l=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),vt.read(r);const c=hu(window,"resize",()=>this.scalePositionWithinConstraints()),h=s.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:m})=>{this.isDragging&&m&&(lr(g=>{const y=this.getAxisMotionValue(g);y&&(this.originPoint[g]+=d[g].translate,y.set(y.get()+d[g].translate))}),this.visualElement.render())}));return()=>{c(),t(),l(),h&&h()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:l=!1,dragElastic:c=ey,dragMomentum:h=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:s,dragConstraints:l,dragElastic:c,dragMomentum:h}}}function lh(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function r9(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class i9 extends so{constructor(e){super(e),this.removeGroupControls=hr,this.removeListeners=hr,this.controls=new n9(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||hr}update(){const{dragControls:e}=this.node.getProps(),{dragControls:t}=this.node.prevProps||{};e!==t&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners()}}const hk=n=>(e,t)=>{n&&vt.postRender(()=>n(e,t))};class s9 extends so{constructor(){super(...arguments),this.removePointerDownListener=hr}onPointerDown(e){this.session=new kT(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:bT(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:hk(e),onStart:hk(t),onMove:r,onEnd:(l,c)=>{delete this.session,s&&vt.postRender(()=>s(l,c))}}}mount(){this.removePointerDownListener=Yc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let Gp=!1;class o9 extends j.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:s}=this.props,{projection:l}=e;l&&(t.group&&t.group.add(l),r&&r.register&&s&&r.register(l),Gp&&l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),Th.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:s,isPresent:l}=this.props,{projection:c}=r;return c&&(c.isPresent=l,Gp=!0,s||e.layoutDependency!==t||t===void 0||e.isPresent!==l?c.willUpdate():this.safeToRemove(),e.isPresent!==l&&(l?c.promote():c.relegate()||vt.postRender(()=>{const h=c.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),z0.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:s}=e;Gp=!0,s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function ST(n){const[e,t]=hT(),r=j.useContext(y0);return o.jsx(o9,{...n,layoutGroup:r,switchLayoutGroup:j.useContext(xT),isPresent:e,safeToRemove:t})}const a9={pan:{Feature:s9},drag:{Feature:i9,ProjectionNode:dT,MeasureLayout:ST}};function fk(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const s="onHover"+t,l=r[s];l&&vt.postRender(()=>l(e,Ru(e)))}class l9 extends so{mount(){const{current:e}=this.node;e&&(this.unmount=$L(e,(t,r)=>(fk(this.node,r,"Start"),s=>fk(this.node,s,"End"))))}unmount(){}}class c9 extends so{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Cu(hu(this.node.current,"focus",()=>this.onFocus()),hu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function mk(n,e,t){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const s="onTap"+(t==="End"?"":t),l=r[s];l&&vt.postRender(()=>l(e,Ru(e)))}class u9 extends so{mount(){const{current:e}=this.node;e&&(this.unmount=qL(e,(t,r)=>(mk(this.node,r,"Start"),(s,{success:l})=>mk(this.node,s,l?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const ty=new WeakMap,Qp=new WeakMap,d9=n=>{const e=ty.get(n.target);e&&e(n)},h9=n=>{n.forEach(d9)};function f9({root:n,...e}){const t=n||document;Qp.has(t)||Qp.set(t,{});const r=Qp.get(t),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(h9,{root:n,...e})),r[s]}function m9(n,e,t){const r=f9(e);return ty.set(n,t),r.observe(n),()=>{ty.delete(n),r.unobserve(n)}}const p9={some:0,all:1};class g9 extends so{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:s="some",once:l}=e,c={root:t?t.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:p9[s]},h=d=>{const{isIntersecting:m}=d;if(this.isInView===m||(this.isInView=m,l&&!m&&this.hasEnteredView))return;m&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",m);const{onViewportEnter:g,onViewportLeave:y}=this.node.getProps(),x=m?g:y;x&&x(d)};return m9(this.node.current,c,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(y9(e,t))&&this.startObserver()}unmount(){}}function y9({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const v9={inView:{Feature:g9},tap:{Feature:u9},focus:{Feature:c9},hover:{Feature:l9}},x9={layout:{ProjectionNode:dT,MeasureLayout:ST}},w9={...$8,...v9,...a9,...x9},pe=B8(w9,z8);function Ln(){var k;const n=vr(),e=Js(),{user:t,profile:r,isAuthenticated:s,isAdmin:l,isBusiness:c}=Ur(),[h,d]=j.useState(!1),[m,g]=j.useState(!1),y=[{to:"/",label:"Home"},{to:"/map",label:"Directory"},{to:"/demo",label:"See Demo"},{to:"/about",label:"How It Works"},{to:"/businesses",label:"For Businesses"}],x=async()=>{await _2(),g(!1),e("/")},E=S=>n.pathname===S;return o.jsxs("header",{style:{background:"var(--kb-white)",borderBottom:"1px solid var(--kb-gray-200)",position:"sticky",top:0,zIndex:100},children:[o.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 1rem",display:"flex",alignItems:"center",justifyContent:"space-between",height:"70px"},children:[o.jsxs(he,{to:s?"/map":"/",style:{display:"flex",alignItems:"center",gap:"0.5rem",textDecoration:"none"},children:[o.jsx("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, var(--kb-navy) 0%, var(--kb-navy-light) 100%)",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--kb-gold)",fontFamily:"var(--font-display)",fontWeight:"700",fontSize:"1.2rem"},children:"K"}),o.jsxs("div",{children:[o.jsx("div",{style:{fontFamily:"var(--font-display)",fontWeight:"600",color:"var(--kb-navy)",fontSize:"1.1rem",lineHeight:1.1},children:"Kinderbucks"}),o.jsx("div",{style:{fontSize:"0.65rem",color:"var(--kb-gray-500)",textTransform:"uppercase",letterSpacing:"0.1em"},children:"Village Currency"})]})]}),o.jsx("nav",{style:{display:"flex",alignItems:"center",gap:"2rem"},className:"desktop-nav",children:y.map(S=>o.jsx(he,{to:S.to,style:{color:E(S.to)?"var(--kb-navy)":"var(--kb-gray-500)",fontWeight:E(S.to)?"600":"500",fontSize:"0.95rem",transition:"color 0.2s",borderBottom:E(S.to)?"2px solid var(--kb-gold)":"2px solid transparent",paddingBottom:"4px"},children:S.label},S.to))}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},className:"desktop-nav",children:[s?o.jsx(o.Fragment,{children:o.jsxs("div",{style:{position:"relative"},children:[o.jsxs("button",{onClick:()=>g(!m),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"var(--kb-gray-100)",border:"none",borderRadius:"8px",cursor:"pointer",color:"var(--kb-navy)",fontWeight:"500"},children:[o.jsx(il,{size:18}),(r==null?void 0:r.displayName)||((k=t.email)==null?void 0:k.split("@")[0])]}),m&&o.jsxs("div",{style:{position:"absolute",right:0,top:"100%",marginTop:"0.5rem",background:"white",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",minWidth:"180px",zIndex:200,overflow:"hidden"},children:[o.jsxs(he,{to:"/card",onClick:()=>g(!1),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",color:"var(--kb-gold-dark)",textDecoration:"none",borderBottom:"1px solid var(--kb-gray-100)",fontWeight:"600",background:"rgba(201, 162, 39, 0.1)"},children:[o.jsx(Rg,{size:16})," My OK Card"]}),o.jsxs(he,{to:"/profile",onClick:()=>g(!1),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",color:"var(--kb-gray-700)",textDecoration:"none",borderBottom:"1px solid var(--kb-gray-100)"},children:[o.jsx(il,{size:16})," My Profile"]}),c&&o.jsxs(he,{to:"/business/dashboard",onClick:()=>g(!1),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",color:"#2563eb",textDecoration:"none",borderBottom:"1px solid var(--kb-gray-100)"},children:[o.jsx(Mt,{size:16})," Business Dashboard"]}),l&&o.jsxs(he,{to:"/admin/dashboard",onClick:()=>g(!1),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",color:"#dc2626",textDecoration:"none",borderBottom:"1px solid var(--kb-gray-100)"},children:[o.jsx(Gh,{size:16})," Admin Portal"]}),o.jsxs("button",{onClick:x,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",color:"var(--kb-gray-600)",background:"none",border:"none",cursor:"pointer",width:"100%",textAlign:"left"},children:[o.jsx(Pg,{size:16})," Sign Out"]})]})]})}):o.jsx(o.Fragment,{children:o.jsxs(he,{to:"/login",className:"btn btn-secondary",style:{padding:"0.5rem 1rem",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(gl,{size:16})," Sign In"]})}),o.jsx(he,{to:"/exchange",className:"btn btn-gold",style:{padding:"0.5rem 1rem",fontSize:"0.9rem"},children:"Get Kinderbucks"})]}),o.jsx("button",{onClick:()=>d(!h),className:"mobile-menu-btn",style:{display:"none",background:"none",border:"none",padding:"0.5rem",cursor:"pointer"},children:o.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:h?o.jsx("path",{d:"M6 6l12 12M6 18L18 6"}):o.jsx("path",{d:"M3 12h18M3 6h18M3 18h18"})})})]}),h&&o.jsxs("div",{className:"mobile-menu",style:{background:"var(--kb-white)",borderTop:"1px solid var(--kb-gray-200)",padding:"1rem"},children:[y.map(S=>o.jsx(he,{to:S.to,onClick:()=>d(!1),style:{display:"block",padding:"0.75rem 0",color:E(S.to)?"var(--kb-navy)":"var(--kb-gray-700)",fontWeight:E(S.to)?"600":"400",borderBottom:"1px solid var(--kb-gray-100)"},children:S.label},S.to)),o.jsxs("div",{style:{marginTop:"1rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:[s?o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{padding:"0.75rem",background:"var(--kb-gray-50)",borderRadius:"8px",marginBottom:"0.5rem"},children:[o.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:(r==null?void 0:r.displayName)||t.email}),o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:(r==null?void 0:r.role)||"member"})]}),o.jsxs(he,{to:"/profile",onClick:()=>d(!1),className:"btn btn-secondary",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[o.jsx(il,{size:16})," My Profile"]}),c&&o.jsxs(he,{to:"/business/dashboard",onClick:()=>d(!1),className:"btn",style:{background:"#2563eb",color:"white",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[o.jsx(Mt,{size:16})," Business Dashboard"]}),l&&o.jsxs(he,{to:"/admin/dashboard",onClick:()=>d(!1),className:"btn",style:{background:"#dc2626",color:"white",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[o.jsx(Gh,{size:16})," Admin Portal"]}),o.jsxs("button",{onClick:()=>{x(),d(!1)},className:"btn btn-secondary",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[o.jsx(Pg,{size:16})," Sign Out"]})]}):o.jsxs(he,{to:"/login",onClick:()=>d(!1),className:"btn btn-secondary",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[o.jsx(gl,{size:16})," Sign In"]}),o.jsx(he,{to:"/exchange",onClick:()=>d(!1),className:"btn btn-gold",children:"Get Kinderbucks"})]})]}),o.jsx("style",{children:`
        @media (max-width: 768px) {
          .desktop-nav {
            display: none !important;
          }
          .mobile-menu-btn {
            display: block !important;
          }
        }
      `})]})}function On(){return o.jsxs("footer",{style:{background:"var(--kb-navy)",color:"var(--kb-white)",padding:"3rem 1rem 2rem",marginTop:"auto"},children:[o.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"2rem"},children:[o.jsxs("div",{children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[o.jsx("div",{style:{width:"36px",height:"36px",background:"var(--kb-gold)",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--kb-navy)",fontFamily:"var(--font-display)",fontWeight:"700"},children:"K"}),o.jsx("span",{style:{fontFamily:"var(--font-display)",fontWeight:"600",fontSize:"1.1rem"},children:"Kinderbucks"})]}),o.jsx("p",{style:{color:"var(--kb-gray-300)",fontSize:"0.9rem",lineHeight:1.6},children:"Village of Kinderhook's local currency program. Supporting local businesses, strengthening community."}),o.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.8rem",marginTop:"1rem"},children:"Est. 2026"})]}),o.jsxs("div",{children:[o.jsx("h4",{style:{color:"var(--kb-gold)",marginBottom:"1rem",fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Quick Links"}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[o.jsx(he,{to:"/demo",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"See Demo"}),o.jsx(he,{to:"/about",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"How It Works"}),o.jsx(he,{to:"/benefits",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"Member Benefits"}),o.jsx(he,{to:"/exchange",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"Get Kinderbucks"}),o.jsx(he,{to:"/businesses",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"For Businesses"})]})]}),o.jsxs("div",{children:[o.jsx("h4",{style:{color:"var(--kb-gold)",marginBottom:"1rem",fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"For Members"}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[o.jsx(he,{to:"/account",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"My Account"}),o.jsx(he,{to:"/profile",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"Kinderhooker Profile"}),o.jsx(he,{to:"/scan/KB-0001",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"Verify Currency"})]})]}),o.jsxs("div",{children:[o.jsx("h4",{style:{color:"var(--kb-gold)",marginBottom:"1rem",fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Contact"}),o.jsxs("p",{style:{color:"var(--kb-gray-300)",fontSize:"0.9rem",lineHeight:1.8},children:["Village of Kinderhook",o.jsx("br",{}),"Columbia County, NY"]})]})]}),o.jsxs("div",{style:{maxWidth:"1200px",margin:"2rem auto 0",paddingTop:"2rem",borderTop:"1px solid var(--kb-navy-light)",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"1rem"},children:[o.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.8rem"},children:" 2026 Kinderbucks. A Harmonic Systems project."}),o.jsx("div",{style:{display:"flex",gap:"1.5rem"},children:o.jsx(he,{to:"/admin/dashboard",style:{color:"var(--kb-gray-500)",fontSize:"0.8rem"},children:"Admin"})})]})]})}function b9(){const{isAuthenticated:n,loading:e}=Ur(),t=Js();return j.useEffect(()=>{!e&&n&&t("/card",{replace:!0})},[n,e,t]),e?null:o.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[o.jsx(Ln,{}),o.jsx("section",{style:{background:"linear-gradient(135deg, var(--kb-navy) 0%, var(--kb-navy-light) 100%)",color:"var(--kb-white)",padding:"4rem 1rem",textAlign:"center"},children:o.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},style:{maxWidth:"800px",margin:"0 auto"},children:[o.jsx("div",{style:{display:"inline-block",background:"rgba(201, 162, 39, 0.2)",color:"var(--kb-gold)",padding:"0.5rem 1rem",borderRadius:"100px",fontSize:"0.85rem",fontWeight:"600",marginBottom:"1.5rem"},children:"Village of Kinderhook  Est. 2026"}),o.jsxs("h1",{style:{fontFamily:"var(--font-display)",fontSize:"clamp(2.5rem, 5vw, 3.5rem)",fontWeight:"700",marginBottom:"1.5rem",lineHeight:1.2},children:["Strengthen Our Village,",o.jsx("br",{}),o.jsx("span",{style:{color:"var(--kb-gold)"},children:"One Kinderbuck at a Time"})]}),o.jsx("p",{style:{fontSize:"1.2rem",color:"var(--kb-gray-300)",marginBottom:"2rem",maxWidth:"600px",margin:"0 auto 2rem"},children:"A local currency program that keeps money circulating in Kinderhook, rewards loyal customers, and strengthens our community economy."}),o.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[o.jsx(he,{to:"/exchange",className:"btn btn-gold",style:{padding:"1rem 2rem",fontSize:"1.1rem"},children:"Get Kinderbucks"}),o.jsx(he,{to:"/demo",className:"btn btn-outline",style:{padding:"1rem 2rem",fontSize:"1.1rem",borderColor:"var(--kb-white)",color:"var(--kb-white)"},children:"See Demo"})]})]})}),o.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:o.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[o.jsxs("div",{style:{textAlign:"center",marginBottom:"3rem"},children:[o.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"How Kinderbucks Works"}),o.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"Simple steps to start supporting local"})]}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"2rem"},children:[{step:"1",title:"Exchange",description:"Convert USD to Kinderbucks at participating locations or online. Members get bonus rates!",Icon:Df},{step:"2",title:"Spend Local",description:"Use Kinderbucks at any of our 19+ participating village businesses.",Icon:Mt},{step:"3",title:"Check In",description:"Scan QR codes when you visit to build your Kinderhooker status and unlock rewards.",Icon:Vr},{step:"4",title:"Earn More",description:"Higher tiers mean better exchange rates. Village Patrons get 25% bonus!",Icon:Qs}].map((r,s)=>o.jsxs(pe.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:s*.1},viewport:{once:!0},className:"card",style:{textAlign:"center"},children:[o.jsx("div",{style:{width:"60px",height:"60px",background:"var(--kb-navy)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:o.jsx(r.Icon,{size:28,color:"var(--kb-gold)",strokeWidth:1.5})}),o.jsxs("div",{style:{color:"var(--kb-gold)",fontSize:"0.8rem",fontWeight:"600",marginBottom:"0.25rem"},children:["STEP ",r.step]}),o.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:r.title}),o.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.95rem"},children:r.description})]},s))})]})}),o.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:o.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[o.jsxs("div",{style:{textAlign:"center",marginBottom:"3rem"},children:[o.jsx("div",{className:"badge badge-gold",style:{marginBottom:"1rem"},children:"OK Membership"}),o.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"Become a Kinderhooker"}),o.jsx("p",{style:{color:"var(--kb-gray-500)",maxWidth:"600px",margin:"0 auto"},children:"Visit local businesses to level up your membership and unlock better exchange rates"})]}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"1.5rem"},children:[{name:"Curious",businesses:"1+",bonus:"10%",color:"#888888",Icon:un},{name:"Hooked",businesses:"5+",bonus:"15%",color:"#2e7d32",Icon:yr},{name:"Line & Sinker",businesses:"10+",bonus:"20%",color:"#1565c0",Icon:gr},{name:"Village Patron",businesses:"15+",bonus:"25%",color:"#c9a227",Icon:Zn,featured:!0}].map((r,s)=>o.jsxs(pe.div,{initial:{opacity:0,scale:.95},whileInView:{opacity:1,scale:1},transition:{delay:s*.1},viewport:{once:!0},className:"card",style:{textAlign:"center",border:r.featured?"2px solid var(--kb-gold)":void 0,position:"relative",overflow:"hidden"},children:[r.featured&&o.jsx("div",{style:{position:"absolute",top:"10px",right:"-30px",background:"var(--kb-gold)",color:"var(--kb-navy)",padding:"0.25rem 2rem",fontSize:"0.7rem",fontWeight:"600",transform:"rotate(45deg)"},children:"BEST"}),o.jsx("div",{style:{width:"50px",height:"50px",background:`${r.color}15`,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 0.75rem"},children:o.jsx(r.Icon,{size:24,color:r.color,strokeWidth:1.5})}),o.jsx("h3",{style:{color:r.color,marginBottom:"0.5rem"},children:r.name}),o.jsxs("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem",marginBottom:"1rem"},children:[r.businesses," businesses visited"]}),o.jsxs("div",{style:{background:`${r.color}15`,borderRadius:"8px",padding:"1rem"},children:[o.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:r.color},children:r.bonus}),o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:"Exchange Bonus"})]})]},s))}),o.jsx("div",{style:{textAlign:"center",marginTop:"2rem"},children:o.jsx(he,{to:"/profile",className:"btn btn-primary",children:"View My Progress"})})]})}),o.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:o.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[o.jsxs("div",{style:{textAlign:"center",marginBottom:"3rem"},children:[o.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"Participating Businesses"}),o.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"Support these local Kinderhook establishments"})]}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"1rem"},children:["The Aviary","Morningbird Cafe","Saisonnier","Broad Street Bagel","Brooklyn Pizzeria","Isola Wine Bar","OK Pantry","Kinderhook Books","Samascott's","The School Gallery","Old Dutch Inn","Muse Aesthetics"].map((r,s)=>o.jsx("div",{style:{background:"var(--kb-white)",borderRadius:"8px",padding:"1rem",textAlign:"center",fontSize:"0.9rem",color:"var(--kb-gray-700)",border:"1px solid var(--kb-gray-200)"},children:r},s))}),o.jsx("div",{style:{textAlign:"center",marginTop:"2rem"},children:o.jsx(he,{to:"/businesses",className:"btn btn-secondary",children:"View All 19 Businesses "})})]})}),o.jsx("section",{style:{padding:"4rem 1rem",background:"linear-gradient(135deg, var(--kb-green) 0%, var(--kb-green-light) 100%)",color:"var(--kb-white)",textAlign:"center"},children:o.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto"},children:[o.jsx("h2",{style:{marginBottom:"1rem"},children:"Ready to Support Local?"}),o.jsx("p",{style:{opacity:.9,marginBottom:"2rem"},children:"Join the Kinderbucks program today and start earning rewards while strengthening our village economy."}),o.jsx("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:o.jsx(he,{to:"/exchange",className:"btn btn-gold",style:{padding:"1rem 2rem"},children:"Get Your First Kinderbucks"})})]})}),o.jsx(On,{})]})}const pk={customer:{id:"customer",title:"For Customers",subtitle:"Start supporting local in minutes",Icon:m0,color:"var(--kb-green)",minCommitment:"Start with just $10"},business:{id:"business",title:"For Business Owners",subtitle:"Accept Kinderbucks and grow your customer base",Icon:Mt,color:"var(--kb-navy)",minCommitment:"No upfront cost to join"},association:{id:"association",title:"For the Business Association",subtitle:"Strengthen the village economy together",Icon:MM,color:"var(--kb-gold-dark)",minCommitment:"Community-driven program"}},gk=[{number:1,title:"Get Your First Kinderbucks",description:"Visit any exchange location with USD. Start with as little as $10.",visual:"exchange",details:["Visit Village Hall, OK Pantry, or The Aviary","Exchange any amount ($10, $20, $50, $100)","New members get 10% bonus automatically","Receive physical Kinderbucks bills"],tip:"First-time? You'll get $11 in Kinderbucks for every $10 USD!"},{number:2,title:"Spend at Local Businesses",description:"Use Kinderbucks like cash at 19+ participating village businesses.",visual:"spend",details:["Accepted at restaurants, shops, and services","Works just like regular currency","Businesses give change in Kinderbucks when possible","100% of your money stays in Kinderhook"],tip:"Check the business directory to plan your local shopping route!"},{number:3,title:"Check In When You Visit",description:"Scan QR codes at businesses to track your visits and earn rewards.",visual:"checkin",details:["Look for the Kinderbucks QR code at each business","Scan with your phone camera","Each unique business counts toward your tier","One check-in per business per hour"],tip:"You don't need an app - just scan and go!"},{number:4,title:"Level Up Your Membership",description:"Visit more businesses to unlock better exchange rates.",visual:"tiers",details:["Curious (1+ businesses): 10% bonus","Hooked (5+ businesses): 15% bonus","Line & Sinker (10+ businesses): 20% bonus","Village Patron (15+ businesses): 25% bonus"],tip:"At 25% bonus, $100 USD gets you $125 in Kinderbucks!"}],k9=[{number:1,title:"Register Your Business",description:"Join the program with no upfront costs or monthly fees.",visual:"register",details:["Contact the Business Association to register","Receive your unique business QR code","Get listed in the Kinderbucks directory","No fees, no contracts, no risk"],tip:"Registration takes less than 10 minutes!"},{number:2,title:"Accept Kinderbucks Payments",description:"Accept Kinderbucks just like you accept cash.",visual:"accept",details:["Kinderbucks bills have QR codes for verification","Scan any bill to verify authenticity","Make change in Kinderbucks when possible","Train staff in minutes"],tip:"Verification is instant - just scan the QR code on any bill."},{number:3,title:"Build Customer Loyalty",description:"Customers check in at your business, driving repeat visits.",visual:"loyalty",details:["Display your QR code prominently","Customers scan to record their visit","Each check-in helps customers level up","Higher tiers = more valuable customers"],tip:"Village Patrons have visited 15+ businesses - they're your most loyal customers!"},{number:4,title:"Redeem or Recirculate",description:"Use Kinderbucks at other businesses or redeem for USD.",visual:"redeem",details:["Spend at other participating businesses","Pay suppliers who accept Kinderbucks","Redeem for USD at exchange locations (1:1)","Keep money circulating locally"],tip:"Most businesses find it easier to spend than redeem - the money keeps moving!"}],_9=[{number:1,title:"Program Overview",description:"A local currency that strengthens the village economy.",visual:"overview",details:["Kinderbucks is a complementary currency for Kinderhook","Backed 1:1 by USD in a dedicated account","Bonus rates funded by interest and community investment","QR verification prevents counterfeiting"],tip:"Complementary currencies have been used successfully in communities worldwide."},{number:2,title:"Economic Impact",description:"Money that circulates locally multiplies its impact.",visual:"impact",details:["Studies show local currency circulates 3-4x more than USD","$10,000 in circulation = $30,000-40,000 in local economic activity",'Encourages "buy local" behavior',"Builds connections between businesses and residents"],tip:"Every Kinderbuck spent is guaranteed to stay in the village."},{number:3,title:"Member Engagement",description:"Tier system drives exploration of local businesses.",visual:"engagement",details:["Gamification encourages visiting new businesses","Tier bonuses reward loyal community members","Check-in data shows foot traffic patterns","Members become ambassadors for local spending"],tip:"The average member discovers 3 new businesses they didn't know about."},{number:4,title:"Administration & Growth",description:"Simple management with room to scale.",visual:"admin",details:["Digital dashboard tracks circulation and usage","New businesses join with minimal onboarding","Seasonal promotions drive engagement","Expand to neighboring communities over time"],tip:"The program is designed to be self-sustaining once established."}];function S9({step:n,isActive:e,onClick:t}){return o.jsx(pe.div,{onClick:t,whileHover:{scale:1.02},whileTap:{scale:.98},style:{background:e?"var(--kb-navy)":"var(--kb-white)",color:e?"var(--kb-white)":"var(--kb-gray-700)",borderRadius:"12px",padding:"1.25rem",cursor:"pointer",border:e?"none":"1px solid var(--kb-gray-200)",transition:"all 0.2s"},children:o.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[o.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"50%",background:e?"var(--kb-gold)":"var(--kb-gray-100)",color:e?"var(--kb-navy)":"var(--kb-gray-500)",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"700",fontSize:"1rem",flexShrink:0},children:n.number}),o.jsxs("div",{children:[o.jsx("h4",{style:{margin:0,fontSize:"1rem",fontWeight:"600",marginBottom:"0.25rem"},children:n.title}),o.jsx("p",{style:{margin:0,fontSize:"0.85rem",opacity:.8},children:n.description})]})]})})}function E9({step:n,audienceColor:e}){return o.jsxs(pe.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},style:{background:"var(--kb-white)",borderRadius:"16px",padding:"2rem",height:"100%",display:"flex",flexDirection:"column"},children:[o.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",background:`${e}15`,color:e,padding:"0.5rem 1rem",borderRadius:"100px",fontSize:"0.8rem",fontWeight:"600",marginBottom:"1rem",alignSelf:"flex-start"},children:["STEP ",n.number]}),o.jsx("h3",{style:{color:"var(--kb-navy)",fontSize:"1.5rem",marginBottom:"0.5rem"},children:n.title}),o.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem",fontSize:"1.05rem"},children:n.description}),o.jsxs("div",{style:{background:"var(--kb-cream)",borderRadius:"12px",padding:"1.5rem",marginBottom:"1.5rem",flex:1},children:[o.jsx("h4",{style:{color:"var(--kb-navy)",fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"1rem"},children:"What This Looks Like"}),o.jsx("ul",{style:{margin:0,padding:0,listStyle:"none"},children:n.details.map((t,r)=>o.jsxs("li",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",marginBottom:"0.75rem",color:"var(--kb-gray-700)"},children:[o.jsx("span",{style:{color:"var(--kb-green)",fontWeight:"600"},children:""}),t]},r))})]}),o.jsxs("div",{style:{background:"linear-gradient(135deg, var(--kb-gold) 0%, #d4af37 100%)",borderRadius:"12px",padding:"1rem 1.25rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("span",{style:{fontSize:"1.5rem"},children:""}),o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"600",color:"var(--kb-navy)",fontSize:"0.8rem",textTransform:"uppercase",marginBottom:"0.25rem"},children:"Pro Tip"}),o.jsx("div",{style:{color:"var(--kb-navy)",fontSize:"0.95rem"},children:n.tip})]})]})]},n.number)}function T9({audience:n,steps:e}){const[t,r]=j.useState(0);return o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1.5fr",gap:"2rem",minHeight:"500px"},className:"demo-flow-grid",children:[o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:e.map((s,l)=>o.jsx(S9,{step:s,isActive:t===l,onClick:()=>r(l)},s.number))}),o.jsx(q0,{mode:"wait",children:o.jsx(E9,{step:e[t],audienceColor:n.color},t)})]})}function ch({icon:n,title:e,description:t}){return o.jsxs("div",{style:{background:"var(--kb-white)",borderRadius:"12px",padding:"1.5rem",textAlign:"center",border:"1px solid var(--kb-gray-200)"},children:[o.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.75rem"},children:n}),o.jsx("h4",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:e}),o.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem",margin:0},children:t})]})}function I9(){const[n,e]=j.useState("customer"),t=pk[n],r=()=>{switch(n){case"customer":return gk;case"business":return k9;case"association":return _9;default:return gk}},l=(()=>{switch(n){case"customer":return{to:"/exchange",text:"Get Your First Kinderbucks",secondary:"/businesses",secondaryText:"Browse Businesses"};case"business":return{to:"/businesses",text:"Register Your Business",secondary:"/about",secondaryText:"Learn More"};case"association":return{to:"/about",text:"Full Program Details",secondary:"/admin/dashboard",secondaryText:"View Dashboard"};default:return{to:"/exchange",text:"Get Started"}}})();return o.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[o.jsx(Ln,{}),o.jsx("section",{style:{background:"linear-gradient(135deg, var(--kb-navy) 0%, var(--kb-navy-light) 100%)",color:"var(--kb-white)",padding:"3rem 1rem",textAlign:"center"},children:o.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{maxWidth:"800px",margin:"0 auto"},children:[o.jsx("div",{className:"badge badge-gold",style:{marginBottom:"1rem"},children:"Interactive Demo"}),o.jsx("h1",{style:{fontFamily:"var(--font-display)",fontSize:"clamp(2rem, 4vw, 2.75rem)",fontWeight:"700",marginBottom:"1rem"},children:"See How Kinderbucks Works"}),o.jsx("p",{style:{fontSize:"1.15rem",color:"var(--kb-gray-300)",maxWidth:"600px",margin:"0 auto"},children:"Choose your perspective below to see a step-by-step walkthrough of the Kinderbucks program."})]})}),o.jsx("section",{style:{background:"var(--kb-white)",padding:"2rem 1rem",borderBottom:"1px solid var(--kb-gray-200)"},children:o.jsx("div",{style:{maxWidth:"900px",margin:"0 auto"},children:o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem"},children:Object.values(pk).map(c=>{const h=c.Icon;return o.jsxs(pe.button,{onClick:()=>e(c.id),whileHover:{scale:1.02},whileTap:{scale:.98},style:{background:n===c.id?`linear-gradient(135deg, ${c.color} 0%, ${c.color}dd 100%)`:"var(--kb-cream)",color:n===c.id?"var(--kb-white)":"var(--kb-gray-700)",border:n===c.id?"none":"2px solid var(--kb-gray-200)",borderRadius:"12px",padding:"1.5rem",cursor:"pointer",textAlign:"left",transition:"all 0.2s"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[o.jsx(h,{size:28,strokeWidth:1.5}),o.jsx("span",{style:{fontWeight:"600",fontSize:"1.1rem"},children:c.title})]}),o.jsx("p",{style:{margin:0,fontSize:"0.9rem",opacity:.85},children:c.subtitle}),o.jsx("div",{style:{marginTop:"0.75rem",fontSize:"0.8rem",fontWeight:"600",opacity:n===c.id?1:.7},children:c.minCommitment})]},c.id)})})})}),o.jsx("section",{style:{background:"var(--kb-cream)",padding:"3rem 1rem",flex:1},children:o.jsx("div",{style:{maxWidth:"1100px",margin:"0 auto"},children:o.jsx(q0,{mode:"wait",children:o.jsx(pe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:o.jsx(T9,{audience:t,steps:r()})},n)})})}),o.jsx("section",{style:{background:"var(--kb-white)",padding:"3rem 1rem",borderTop:"1px solid var(--kb-gray-200)"},children:o.jsxs("div",{style:{maxWidth:"900px",margin:"0 auto"},children:[o.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[o.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"Minimal Commitment, Maximum Impact"}),o.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"Kinderbucks is designed to be easy to try and rewarding to use"})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem"},children:[o.jsx(ch,{icon:"",title:"Start with $10",description:"No minimum exchange amount. Try it with pocket change."}),o.jsx(ch,{icon:"",title:"No Fees",description:"No signup fees, no monthly costs, no hidden charges."}),o.jsx(ch,{icon:"",title:"Full Refund",description:"Businesses can redeem Kinderbucks for USD 1:1 anytime."}),o.jsx(ch,{icon:"",title:"Instant Setup",description:"Customers start immediately. Businesses onboard in minutes."})]})]})}),o.jsx("section",{style:{background:t.color,padding:"3rem 1rem",textAlign:"center"},children:o.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto"},children:[o.jsx("h2",{style:{color:"var(--kb-white)",marginBottom:"0.5rem"},children:"Ready to Get Started?"}),o.jsxs("p",{style:{color:"rgba(255,255,255,0.85)",marginBottom:"2rem"},children:[n==="customer"&&"Join hundreds of Kinderhook residents supporting local businesses.",n==="business"&&"Join 19 local businesses already accepting Kinderbucks.",n==="association"&&"See the full details of how the program operates."]}),o.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[o.jsx(he,{to:l.to,className:"btn",style:{background:"var(--kb-white)",color:t.color,padding:"1rem 2rem",fontSize:"1.1rem",fontWeight:"600"},children:l.text}),l.secondary&&o.jsx(he,{to:l.secondary,className:"btn btn-outline",style:{borderColor:"var(--kb-white)",color:"var(--kb-white)",padding:"1rem 2rem",fontSize:"1.1rem"},children:l.secondaryText})]})]})}),o.jsx(On,{}),o.jsx("style",{children:`
        @media (max-width: 900px) {
          .demo-flow-grid {
            grid-template-columns: 1fr !important;
            gap: 1.5rem !important;
          }
        }
      `})]})}var C9=Object.defineProperty,rf=Object.getOwnPropertySymbols,ET=Object.prototype.hasOwnProperty,TT=Object.prototype.propertyIsEnumerable,yk=(n,e,t)=>e in n?C9(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ny=(n,e)=>{for(var t in e||(e={}))ET.call(e,t)&&yk(n,t,e[t]);if(rf)for(var t of rf(e))TT.call(e,t)&&yk(n,t,e[t]);return n},ry=(n,e)=>{var t={};for(var r in n)ET.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&rf)for(var r of rf(n))e.indexOf(r)<0&&TT.call(n,r)&&(t[r]=n[r]);return t};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Xo;(n=>{const e=class He{constructor(d,m,g,y){if(this.version=d,this.errorCorrectionLevel=m,this.modules=[],this.isFunction=[],d<He.MIN_VERSION||d>He.MAX_VERSION)throw new RangeError("Version value out of range");if(y<-1||y>7)throw new RangeError("Mask value out of range");this.size=d*4+17;let x=[];for(let k=0;k<this.size;k++)x.push(!1);for(let k=0;k<this.size;k++)this.modules.push(x.slice()),this.isFunction.push(x.slice());this.drawFunctionPatterns();const E=this.addEccAndInterleave(g);if(this.drawCodewords(E),y==-1){let k=1e9;for(let S=0;S<8;S++){this.applyMask(S),this.drawFormatBits(S);const T=this.getPenaltyScore();T<k&&(y=S,k=T),this.applyMask(S)}}s(0<=y&&y<=7),this.mask=y,this.applyMask(y),this.drawFormatBits(y),this.isFunction=[]}static encodeText(d,m){const g=n.QrSegment.makeSegments(d);return He.encodeSegments(g,m)}static encodeBinary(d,m){const g=n.QrSegment.makeBytes(d);return He.encodeSegments([g],m)}static encodeSegments(d,m,g=1,y=40,x=-1,E=!0){if(!(He.MIN_VERSION<=g&&g<=y&&y<=He.MAX_VERSION)||x<-1||x>7)throw new RangeError("Invalid value");let k,S;for(k=g;;k++){const D=He.getNumDataCodewords(k,m)*8,U=c.getTotalBits(d,k);if(U<=D){S=U;break}if(k>=y)throw new RangeError("Data too long")}for(const D of[He.Ecc.MEDIUM,He.Ecc.QUARTILE,He.Ecc.HIGH])E&&S<=He.getNumDataCodewords(k,D)*8&&(m=D);let T=[];for(const D of d){t(D.mode.modeBits,4,T),t(D.numChars,D.mode.numCharCountBits(k),T);for(const U of D.getData())T.push(U)}s(T.length==S);const P=He.getNumDataCodewords(k,m)*8;s(T.length<=P),t(0,Math.min(4,P-T.length),T),t(0,(8-T.length%8)%8,T),s(T.length%8==0);for(let D=236;T.length<P;D^=253)t(D,8,T);let M=[];for(;M.length*8<T.length;)M.push(0);return T.forEach((D,U)=>M[U>>>3]|=D<<7-(U&7)),new He(k,m,M,x)}getModule(d,m){return 0<=d&&d<this.size&&0<=m&&m<this.size&&this.modules[m][d]}getModules(){return this.modules}drawFunctionPatterns(){for(let g=0;g<this.size;g++)this.setFunctionModule(6,g,g%2==0),this.setFunctionModule(g,6,g%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const d=this.getAlignmentPatternPositions(),m=d.length;for(let g=0;g<m;g++)for(let y=0;y<m;y++)g==0&&y==0||g==0&&y==m-1||g==m-1&&y==0||this.drawAlignmentPattern(d[g],d[y]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(d){const m=this.errorCorrectionLevel.formatBits<<3|d;let g=m;for(let x=0;x<10;x++)g=g<<1^(g>>>9)*1335;const y=(m<<10|g)^21522;s(y>>>15==0);for(let x=0;x<=5;x++)this.setFunctionModule(8,x,r(y,x));this.setFunctionModule(8,7,r(y,6)),this.setFunctionModule(8,8,r(y,7)),this.setFunctionModule(7,8,r(y,8));for(let x=9;x<15;x++)this.setFunctionModule(14-x,8,r(y,x));for(let x=0;x<8;x++)this.setFunctionModule(this.size-1-x,8,r(y,x));for(let x=8;x<15;x++)this.setFunctionModule(8,this.size-15+x,r(y,x));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let d=this.version;for(let g=0;g<12;g++)d=d<<1^(d>>>11)*7973;const m=this.version<<12|d;s(m>>>18==0);for(let g=0;g<18;g++){const y=r(m,g),x=this.size-11+g%3,E=Math.floor(g/3);this.setFunctionModule(x,E,y),this.setFunctionModule(E,x,y)}}drawFinderPattern(d,m){for(let g=-4;g<=4;g++)for(let y=-4;y<=4;y++){const x=Math.max(Math.abs(y),Math.abs(g)),E=d+y,k=m+g;0<=E&&E<this.size&&0<=k&&k<this.size&&this.setFunctionModule(E,k,x!=2&&x!=4)}}drawAlignmentPattern(d,m){for(let g=-2;g<=2;g++)for(let y=-2;y<=2;y++)this.setFunctionModule(d+y,m+g,Math.max(Math.abs(y),Math.abs(g))!=1)}setFunctionModule(d,m,g){this.modules[m][d]=g,this.isFunction[m][d]=!0}addEccAndInterleave(d){const m=this.version,g=this.errorCorrectionLevel;if(d.length!=He.getNumDataCodewords(m,g))throw new RangeError("Invalid argument");const y=He.NUM_ERROR_CORRECTION_BLOCKS[g.ordinal][m],x=He.ECC_CODEWORDS_PER_BLOCK[g.ordinal][m],E=Math.floor(He.getNumRawDataModules(m)/8),k=y-E%y,S=Math.floor(E/y);let T=[];const P=He.reedSolomonComputeDivisor(x);for(let D=0,U=0;D<y;D++){let H=d.slice(U,U+S-x+(D<k?0:1));U+=H.length;const K=He.reedSolomonComputeRemainder(H,P);D<k&&H.push(0),T.push(H.concat(K))}let M=[];for(let D=0;D<T[0].length;D++)T.forEach((U,H)=>{(D!=S-x||H>=k)&&M.push(U[D])});return s(M.length==E),M}drawCodewords(d){if(d.length!=Math.floor(He.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let m=0;for(let g=this.size-1;g>=1;g-=2){g==6&&(g=5);for(let y=0;y<this.size;y++)for(let x=0;x<2;x++){const E=g-x,S=(g+1&2)==0?this.size-1-y:y;!this.isFunction[S][E]&&m<d.length*8&&(this.modules[S][E]=r(d[m>>>3],7-(m&7)),m++)}}s(m==d.length*8)}applyMask(d){if(d<0||d>7)throw new RangeError("Mask value out of range");for(let m=0;m<this.size;m++)for(let g=0;g<this.size;g++){let y;switch(d){case 0:y=(g+m)%2==0;break;case 1:y=m%2==0;break;case 2:y=g%3==0;break;case 3:y=(g+m)%3==0;break;case 4:y=(Math.floor(g/3)+Math.floor(m/2))%2==0;break;case 5:y=g*m%2+g*m%3==0;break;case 6:y=(g*m%2+g*m%3)%2==0;break;case 7:y=((g+m)%2+g*m%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[m][g]&&y&&(this.modules[m][g]=!this.modules[m][g])}}getPenaltyScore(){let d=0;for(let x=0;x<this.size;x++){let E=!1,k=0,S=[0,0,0,0,0,0,0];for(let T=0;T<this.size;T++)this.modules[x][T]==E?(k++,k==5?d+=He.PENALTY_N1:k>5&&d++):(this.finderPenaltyAddHistory(k,S),E||(d+=this.finderPenaltyCountPatterns(S)*He.PENALTY_N3),E=this.modules[x][T],k=1);d+=this.finderPenaltyTerminateAndCount(E,k,S)*He.PENALTY_N3}for(let x=0;x<this.size;x++){let E=!1,k=0,S=[0,0,0,0,0,0,0];for(let T=0;T<this.size;T++)this.modules[T][x]==E?(k++,k==5?d+=He.PENALTY_N1:k>5&&d++):(this.finderPenaltyAddHistory(k,S),E||(d+=this.finderPenaltyCountPatterns(S)*He.PENALTY_N3),E=this.modules[T][x],k=1);d+=this.finderPenaltyTerminateAndCount(E,k,S)*He.PENALTY_N3}for(let x=0;x<this.size-1;x++)for(let E=0;E<this.size-1;E++){const k=this.modules[x][E];k==this.modules[x][E+1]&&k==this.modules[x+1][E]&&k==this.modules[x+1][E+1]&&(d+=He.PENALTY_N2)}let m=0;for(const x of this.modules)m=x.reduce((E,k)=>E+(k?1:0),m);const g=this.size*this.size,y=Math.ceil(Math.abs(m*20-g*10)/g)-1;return s(0<=y&&y<=9),d+=y*He.PENALTY_N4,s(0<=d&&d<=2568888),d}getAlignmentPatternPositions(){if(this.version==1)return[];{const d=Math.floor(this.version/7)+2,m=this.version==32?26:Math.ceil((this.version*4+4)/(d*2-2))*2;let g=[6];for(let y=this.size-7;g.length<d;y-=m)g.splice(1,0,y);return g}}static getNumRawDataModules(d){if(d<He.MIN_VERSION||d>He.MAX_VERSION)throw new RangeError("Version number out of range");let m=(16*d+128)*d+64;if(d>=2){const g=Math.floor(d/7)+2;m-=(25*g-10)*g-55,d>=7&&(m-=36)}return s(208<=m&&m<=29648),m}static getNumDataCodewords(d,m){return Math.floor(He.getNumRawDataModules(d)/8)-He.ECC_CODEWORDS_PER_BLOCK[m.ordinal][d]*He.NUM_ERROR_CORRECTION_BLOCKS[m.ordinal][d]}static reedSolomonComputeDivisor(d){if(d<1||d>255)throw new RangeError("Degree out of range");let m=[];for(let y=0;y<d-1;y++)m.push(0);m.push(1);let g=1;for(let y=0;y<d;y++){for(let x=0;x<m.length;x++)m[x]=He.reedSolomonMultiply(m[x],g),x+1<m.length&&(m[x]^=m[x+1]);g=He.reedSolomonMultiply(g,2)}return m}static reedSolomonComputeRemainder(d,m){let g=m.map(y=>0);for(const y of d){const x=y^g.shift();g.push(0),m.forEach((E,k)=>g[k]^=He.reedSolomonMultiply(E,x))}return g}static reedSolomonMultiply(d,m){if(d>>>8||m>>>8)throw new RangeError("Byte out of range");let g=0;for(let y=7;y>=0;y--)g=g<<1^(g>>>7)*285,g^=(m>>>y&1)*d;return s(g>>>8==0),g}finderPenaltyCountPatterns(d){const m=d[1];s(m<=this.size*3);const g=m>0&&d[2]==m&&d[3]==m*3&&d[4]==m&&d[5]==m;return(g&&d[0]>=m*4&&d[6]>=m?1:0)+(g&&d[6]>=m*4&&d[0]>=m?1:0)}finderPenaltyTerminateAndCount(d,m,g){return d&&(this.finderPenaltyAddHistory(m,g),m=0),m+=this.size,this.finderPenaltyAddHistory(m,g),this.finderPenaltyCountPatterns(g)}finderPenaltyAddHistory(d,m){m[0]==0&&(d+=this.size),m.pop(),m.unshift(d)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],n.QrCode=e;function t(h,d,m){if(d<0||d>31||h>>>d)throw new RangeError("Value out of range");for(let g=d-1;g>=0;g--)m.push(h>>>g&1)}function r(h,d){return(h>>>d&1)!=0}function s(h){if(!h)throw new Error("Assertion error")}const l=class Ct{constructor(d,m,g){if(this.mode=d,this.numChars=m,this.bitData=g,m<0)throw new RangeError("Invalid argument");this.bitData=g.slice()}static makeBytes(d){let m=[];for(const g of d)t(g,8,m);return new Ct(Ct.Mode.BYTE,d.length,m)}static makeNumeric(d){if(!Ct.isNumeric(d))throw new RangeError("String contains non-numeric characters");let m=[];for(let g=0;g<d.length;){const y=Math.min(d.length-g,3);t(parseInt(d.substring(g,g+y),10),y*3+1,m),g+=y}return new Ct(Ct.Mode.NUMERIC,d.length,m)}static makeAlphanumeric(d){if(!Ct.isAlphanumeric(d))throw new RangeError("String contains unencodable characters in alphanumeric mode");let m=[],g;for(g=0;g+2<=d.length;g+=2){let y=Ct.ALPHANUMERIC_CHARSET.indexOf(d.charAt(g))*45;y+=Ct.ALPHANUMERIC_CHARSET.indexOf(d.charAt(g+1)),t(y,11,m)}return g<d.length&&t(Ct.ALPHANUMERIC_CHARSET.indexOf(d.charAt(g)),6,m),new Ct(Ct.Mode.ALPHANUMERIC,d.length,m)}static makeSegments(d){return d==""?[]:Ct.isNumeric(d)?[Ct.makeNumeric(d)]:Ct.isAlphanumeric(d)?[Ct.makeAlphanumeric(d)]:[Ct.makeBytes(Ct.toUtf8ByteArray(d))]}static makeEci(d){let m=[];if(d<0)throw new RangeError("ECI assignment value out of range");if(d<128)t(d,8,m);else if(d<16384)t(2,2,m),t(d,14,m);else if(d<1e6)t(6,3,m),t(d,21,m);else throw new RangeError("ECI assignment value out of range");return new Ct(Ct.Mode.ECI,0,m)}static isNumeric(d){return Ct.NUMERIC_REGEX.test(d)}static isAlphanumeric(d){return Ct.ALPHANUMERIC_REGEX.test(d)}getData(){return this.bitData.slice()}static getTotalBits(d,m){let g=0;for(const y of d){const x=y.mode.numCharCountBits(m);if(y.numChars>=1<<x)return 1/0;g+=4+x+y.bitData.length}return g}static toUtf8ByteArray(d){d=encodeURI(d);let m=[];for(let g=0;g<d.length;g++)d.charAt(g)!="%"?m.push(d.charCodeAt(g)):(m.push(parseInt(d.substring(g+1,g+3),16)),g+=2);return m}};l.NUMERIC_REGEX=/^[0-9]*$/,l.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,l.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let c=l;n.QrSegment=l})(Xo||(Xo={}));(n=>{(e=>{const t=class{constructor(s,l){this.ordinal=s,this.formatBits=l}};t.LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2),e.Ecc=t})(n.QrCode||(n.QrCode={}))})(Xo||(Xo={}));(n=>{(e=>{const t=class{constructor(s,l){this.modeBits=s,this.numBitsCharCount=l}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};t.NUMERIC=new t(1,[10,12,14]),t.ALPHANUMERIC=new t(2,[9,11,13]),t.BYTE=new t(4,[8,16,16]),t.KANJI=new t(8,[8,10,12]),t.ECI=new t(7,[0,0,0]),e.Mode=t})(n.QrSegment||(n.QrSegment={}))})(Xo||(Xo={}));var Xa=Xo;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var j9={L:Xa.QrCode.Ecc.LOW,M:Xa.QrCode.Ecc.MEDIUM,Q:Xa.QrCode.Ecc.QUARTILE,H:Xa.QrCode.Ecc.HIGH},IT=128,CT="L",jT="#FFFFFF",AT="#000000",RT=!1,PT=1,A9=4,R9=0,P9=.1;function NT(n,e=0){const t=[];return n.forEach(function(r,s){let l=null;r.forEach(function(c,h){if(!c&&l!==null){t.push(`M${l+e} ${s+e}h${h-l}v1H${l+e}z`),l=null;return}if(h===r.length-1){if(!c)return;l===null?t.push(`M${h+e},${s+e} h1v1H${h+e}z`):t.push(`M${l+e},${s+e} h${h+1-l}v1H${l+e}z`);return}c&&l===null&&(l=h)})}),t.join("")}function DT(n,e){return n.slice().map((t,r)=>r<e.y||r>=e.y+e.h?t:t.map((s,l)=>l<e.x||l>=e.x+e.w?s:!1))}function N9(n,e,t,r){if(r==null)return null;const s=n.length+t*2,l=Math.floor(e*P9),c=s/e,h=(r.width||l)*c,d=(r.height||l)*c,m=r.x==null?n.length/2-h/2:r.x*c,g=r.y==null?n.length/2-d/2:r.y*c,y=r.opacity==null?1:r.opacity;let x=null;if(r.excavate){let k=Math.floor(m),S=Math.floor(g),T=Math.ceil(h+m-k),P=Math.ceil(d+g-S);x={x:k,y:S,w:T,h:P}}const E=r.crossOrigin;return{x:m,y:g,h:d,w:h,excavation:x,opacity:y,crossOrigin:E}}function D9(n,e){return e!=null?Math.max(Math.floor(e),0):n?A9:R9}function MT({value:n,level:e,minVersion:t,includeMargin:r,marginSize:s,imageSettings:l,size:c,boostLevel:h}){let d=qt.useMemo(()=>{const k=(Array.isArray(n)?n:[n]).reduce((S,T)=>(S.push(...Xa.QrSegment.makeSegments(T)),S),[]);return Xa.QrCode.encodeSegments(k,j9[e],t,void 0,void 0,h)},[n,e,t,h]);const{cells:m,margin:g,numCells:y,calculatedImageSettings:x}=qt.useMemo(()=>{let E=d.getModules();const k=D9(r,s),S=E.length+k*2,T=N9(E,c,k,l);return{cells:E,margin:k,numCells:S,calculatedImageSettings:T}},[d,c,l,r,s]);return{qrcode:d,margin:g,cells:m,numCells:y,calculatedImageSettings:x}}var M9=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),V9=qt.forwardRef(function(e,t){const r=e,{value:s,size:l=IT,level:c=CT,bgColor:h=jT,fgColor:d=AT,includeMargin:m=RT,minVersion:g=PT,boostLevel:y,marginSize:x,imageSettings:E}=r,S=ry(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:T}=S,P=ry(S,["style"]),M=E==null?void 0:E.src,D=qt.useRef(null),U=qt.useRef(null),H=qt.useCallback(Me=>{D.current=Me,typeof t=="function"?t(Me):t&&(t.current=Me)},[t]),[K,A]=qt.useState(!1),{margin:C,cells:N,numCells:L,calculatedImageSettings:B}=MT({value:s,level:c,minVersion:g,boostLevel:y,includeMargin:m,marginSize:x,imageSettings:E,size:l});qt.useEffect(()=>{if(D.current!=null){const Me=D.current,We=Me.getContext("2d");if(!We)return;let st=N;const Ie=U.current,re=B!=null&&Ie!==null&&Ie.complete&&Ie.naturalHeight!==0&&Ie.naturalWidth!==0;re&&B.excavation!=null&&(st=DT(N,B.excavation));const me=window.devicePixelRatio||1;Me.height=Me.width=l*me;const ue=l/L*me;We.scale(ue,ue),We.fillStyle=h,We.fillRect(0,0,L,L),We.fillStyle=d,M9?We.fill(new Path2D(NT(st,C))):N.forEach(function($,te){$.forEach(function(je,Ce){je&&We.fillRect(Ce+C,te+C,1,1)})}),B&&(We.globalAlpha=B.opacity),re&&We.drawImage(Ie,B.x+C,B.y+C,B.w,B.h)}}),qt.useEffect(()=>{A(!1)},[M]);const F=ny({height:l,width:l},T);let V=null;return M!=null&&(V=qt.createElement("img",{src:M,key:M,style:{display:"none"},onLoad:()=>{A(!0)},ref:U,crossOrigin:B==null?void 0:B.crossOrigin})),qt.createElement(qt.Fragment,null,qt.createElement("canvas",ny({style:F,height:l,width:l,ref:H,role:"img"},P)),V)});V9.displayName="QRCodeCanvas";var iy=qt.forwardRef(function(e,t){const r=e,{value:s,size:l=IT,level:c=CT,bgColor:h=jT,fgColor:d=AT,includeMargin:m=RT,minVersion:g=PT,boostLevel:y,title:x,marginSize:E,imageSettings:k}=r,S=ry(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:T,cells:P,numCells:M,calculatedImageSettings:D}=MT({value:s,level:c,minVersion:g,boostLevel:y,includeMargin:m,marginSize:E,imageSettings:k,size:l});let U=P,H=null;k!=null&&D!=null&&(D.excavation!=null&&(U=DT(P,D.excavation)),H=qt.createElement("image",{href:k.src,height:D.h,width:D.w,x:D.x+T,y:D.y+T,preserveAspectRatio:"none",opacity:D.opacity,crossOrigin:D.crossOrigin}));const K=NT(U,T);return qt.createElement("svg",ny({height:l,width:l,viewBox:`0 0 ${M} ${M}`,ref:t,role:"img"},S),!!x&&qt.createElement("title",null,x),qt.createElement("path",{fill:h,d:`M0,0 h${M}v${M}H0z`,shapeRendering:"crispEdges"}),qt.createElement("path",{fill:d,d:K,shapeRendering:"crispEdges"}),H)});iy.displayName="QRCodeSVG";const vk={1:{color:"#2d5a27",gradient:["#3d7a37","#2d5a27"],label:"ONE",accent:"#90c695"},5:{color:"#1e3a5f",gradient:["#2e5a8f","#1e3a5f"],label:"FIVE",accent:"#7ba3cc"},10:{color:"#5c2d5c",gradient:["#7c4d7c","#5c2d5c"],label:"TEN",accent:"#b89db8"},20:{color:"#8b6914",gradient:["#c9a227","#8b6914"],label:"TWENTY",accent:"#e8d48a"}};function wl({value:n,size:e=128,denomination:t=5,showFrame:r=!0}){const s=vk[t]||vk[5],l=e+48,c=16;return r?o.jsx("div",{style:{width:l,background:`linear-gradient(135deg, ${s.gradient[0]} 0%, ${s.gradient[1]} 100%)`,borderRadius:c,padding:"3px",display:"inline-block",boxShadow:"0 4px 12px rgba(0,0,0,0.2)"},children:o.jsxs("div",{style:{background:"linear-gradient(135deg, #fefefe 0%, #f5f5f0 100%)",borderRadius:c-2,padding:"8px",position:"relative"},children:[o.jsx("div",{style:{textAlign:"center",marginBottom:"6px",fontFamily:'"Georgia", serif',fontSize:"10px",fontWeight:"bold",color:s.color,letterSpacing:"3px",textTransform:"uppercase"},children:"KINDERBUCKS"}),o.jsxs("div",{style:{background:"white",borderRadius:"8px",padding:"8px",border:`2px solid ${s.accent}`,position:"relative"},children:[o.jsx("div",{style:{position:"absolute",top:"4px",left:"4px",width:"12px",height:"12px",borderTop:`2px solid ${s.color}`,borderLeft:`2px solid ${s.color}`,borderRadius:"2px 0 0 0"}}),o.jsx("div",{style:{position:"absolute",top:"4px",right:"4px",width:"12px",height:"12px",borderTop:`2px solid ${s.color}`,borderRight:`2px solid ${s.color}`,borderRadius:"0 2px 0 0"}}),o.jsx("div",{style:{position:"absolute",bottom:"4px",left:"4px",width:"12px",height:"12px",borderBottom:`2px solid ${s.color}`,borderLeft:`2px solid ${s.color}`,borderRadius:"0 0 0 2px"}}),o.jsx("div",{style:{position:"absolute",bottom:"4px",right:"4px",width:"12px",height:"12px",borderBottom:`2px solid ${s.color}`,borderRight:`2px solid ${s.color}`,borderRadius:"0 0 2px 0"}}),o.jsx(iy,{value:n,size:e,level:"H",fgColor:s.color,style:{display:"block"},imageSettings:{src:`data:image/svg+xml,${encodeURIComponent(`
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="${s.color}">
                  <circle cx="12" cy="12" r="11" fill="white" stroke="${s.color}" stroke-width="1.5"/>
                  <text x="12" y="16" text-anchor="middle" font-size="12" font-weight="bold" fill="${s.color}" font-family="Georgia">K</text>
                </svg>
              `)}`,height:e*.2,width:e*.2,excavate:!0}})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"6px",padding:"0 4px"},children:[o.jsxs("span",{style:{fontFamily:'"Georgia", serif',fontSize:"14px",fontWeight:"bold",color:s.color},children:["$",t]}),o.jsx("span",{style:{fontFamily:'"Georgia", serif',fontSize:"9px",color:s.color,letterSpacing:"1px",opacity:.8},children:s.label}),o.jsxs("span",{style:{fontFamily:'"Georgia", serif',fontSize:"14px",fontWeight:"bold",color:s.color},children:["$",t]})]})]})}):o.jsx(iy,{value:n,size:e,level:"M",fgColor:s.color,style:{display:"block"}})}const L9="https://harmonicsystems.github.io/kinderbucks/#/scan/KB-0001",O9="https://harmonicsystems.github.io/kinderbucks/#/checkin/BROADST-BAGEL",B9="Broad Street Bagel Co.";function z9(){const[n,e]=j.useState(null),[t,r]=j.useState(0),[s,l]=j.useState(!1);return o.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)",overflow:"hidden"},children:o.jsxs("div",{style:{maxWidth:"1100px",margin:"0 auto"},children:[o.jsxs(pe.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},style:{textAlign:"center",marginBottom:"3rem"},children:[o.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",background:"linear-gradient(135deg, var(--kb-gold) 0%, #e8c33a 100%)",color:"var(--kb-navy)",padding:"0.5rem 1rem",borderRadius:"100px",fontSize:"0.85rem",fontWeight:"600",marginBottom:"1rem"},children:[o.jsx(B3,{size:16})," Try It Live"]}),o.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.75rem"},children:"See Kinderbucks in Action"}),o.jsx("p",{style:{color:"var(--kb-gray-600)",maxWidth:"600px",margin:"0 auto"},children:"Scan these real QR codes with your phone's camera to experience the magic"})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(320px, 1fr))",gap:"2rem",marginBottom:"3rem"},children:[o.jsxs(pe.div,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},transition:{delay:.1},viewport:{once:!0},className:"card",style:{padding:"2rem",background:"linear-gradient(180deg, #f8fbff 0%, #ffffff 100%)",border:"2px solid #e8f0ff",position:"relative",overflow:"hidden"},children:[o.jsx("div",{style:{position:"absolute",top:0,right:0,width:"80px",height:"80px",background:"linear-gradient(135deg, transparent 50%, rgba(52, 152, 219, 0.1) 50%)"}}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[o.jsx("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, #3498db 0%, #2980b9 100%)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(B2,{size:22,color:"white"})}),o.jsxs("div",{children:[o.jsx("h3",{style:{color:"var(--kb-navy)",margin:0,fontSize:"1.2rem"},children:"Verify Currency"}),o.jsx("p",{style:{color:"var(--kb-gray-500)",margin:0,fontSize:"0.85rem"},children:"Confirm authenticity instantly"})]})]}),o.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem",marginBottom:"1.5rem"},children:"Every Kinderbuck has a unique QR code. Scan to verify it's real, see its value, and track its journey through the village."}),o.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1.5rem"},children:o.jsx(pe.div,{whileHover:{scale:1.02},transition:{type:"spring",stiffness:300},children:o.jsx(wl,{value:L9,size:130,denomination:5,showFrame:!0})})}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1rem",background:"rgba(52, 152, 219, 0.08)",borderRadius:"10px",marginBottom:"1rem"},children:[o.jsx(Ng,{size:20,color:"#3498db"}),o.jsx("span",{style:{color:"var(--kb-gray-700)",fontSize:"0.9rem"},children:"Point your phone camera at the QR code"})]}),o.jsxs("div",{style:{borderTop:"1px dashed var(--kb-gray-200)",paddingTop:"1rem"},children:[o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)",marginBottom:"0.5rem"},children:"You'll see:"}),o.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:["Verified","$5 Value","Active Status","Serial: KB-0001"].map((c,h)=>o.jsx("span",{style:{padding:"0.25rem 0.6rem",background:"var(--kb-gray-100)",borderRadius:"4px",fontSize:"0.8rem",color:"var(--kb-gray-600)"},children:c},h))})]})]}),o.jsxs(pe.div,{initial:{opacity:0,x:30},whileInView:{opacity:1,x:0},transition:{delay:.2},viewport:{once:!0},className:"card",style:{padding:"2rem",background:"linear-gradient(180deg, #f8fff8 0%, #ffffff 100%)",border:"2px solid #e8ffe8",position:"relative",overflow:"hidden"},children:[o.jsx("div",{style:{position:"absolute",top:0,right:0,width:"80px",height:"80px",background:"linear-gradient(135deg, transparent 50%, rgba(39, 174, 96, 0.1) 50%)"}}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[o.jsx("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, var(--kb-green) 0%, #1e8449 100%)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(Mt,{size:22,color:"white"})}),o.jsxs("div",{children:[o.jsx("h3",{style:{color:"var(--kb-navy)",margin:0,fontSize:"1.2rem"},children:"Check In"}),o.jsx("p",{style:{color:"var(--kb-gray-500)",margin:0,fontSize:"0.85rem"},children:"Record visits, earn rewards"})]})]}),o.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem",marginBottom:"1.5rem"},children:"Scan the QR code at each business you visit. Build your Kinderhooker status and unlock better exchange rates!"}),o.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1.5rem"},children:o.jsx(pe.div,{whileHover:{scale:1.02},transition:{type:"spring",stiffness:300},style:{background:"linear-gradient(135deg, var(--kb-green) 0%, #1e8449 100%)",borderRadius:"16px",padding:"3px",boxShadow:"0 4px 12px rgba(39, 174, 96, 0.3)"},children:o.jsxs("div",{style:{background:"white",borderRadius:"14px",padding:"12px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"10px",fontWeight:"600",color:"var(--kb-green)",letterSpacing:"2px",marginBottom:"8px"},children:"CHECK IN AT"}),o.jsx(wl,{value:O9,size:110,denomination:1,showFrame:!1}),o.jsxs("div",{style:{marginTop:"8px",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.4rem"},children:[o.jsx(aV,{size:14,color:"var(--kb-green)"}),o.jsx("span",{style:{fontWeight:"600",color:"var(--kb-navy)",fontSize:"0.9rem"},children:B9})]})]})})}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1rem",background:"rgba(39, 174, 96, 0.08)",borderRadius:"10px",marginBottom:"1rem"},children:[o.jsx(Ng,{size:20,color:"var(--kb-green)"}),o.jsx("span",{style:{color:"var(--kb-gray-700)",fontSize:"0.9rem"},children:"Scan when you visit a business"})]}),o.jsxs("div",{style:{borderTop:"1px dashed var(--kb-gray-200)",paddingTop:"1rem"},children:[o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)",marginBottom:"0.5rem"},children:"You'll see:"}),o.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:["Check-in Recorded","+1 Business","Tier Progress","Next Reward"].map((c,h)=>o.jsx("span",{style:{padding:"0.25rem 0.6rem",background:"var(--kb-gray-100)",borderRadius:"4px",fontSize:"0.8rem",color:"var(--kb-gray-600)"},children:c},h))})]})]})]}),o.jsxs(pe.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{delay:.3},viewport:{once:!0},style:{background:"linear-gradient(135deg, var(--kb-navy) 0%, #1a3a5c 100%)",borderRadius:"20px",padding:"2rem",color:"white",position:"relative",overflow:"hidden"},children:[o.jsx("div",{style:{position:"absolute",top:"-50%",right:"-10%",width:"300px",height:"300px",background:"radial-gradient(circle, rgba(201, 162, 39, 0.1) 0%, transparent 70%)",borderRadius:"50%"}}),o.jsxs("div",{style:{position:"relative",zIndex:1},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1.5rem"},children:[o.jsx(p0,{size:20,color:"var(--kb-gold)"}),o.jsx("span",{style:{color:"var(--kb-gold)",fontWeight:"600",fontSize:"0.9rem"},children:"The Kinderbucks Loop"})]}),o.jsx("h3",{style:{fontSize:"1.5rem",marginBottom:"2rem",maxWidth:"500px"},children:"Check-ins unlock better exchange rates on currency"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem",alignItems:"center"},children:[o.jsxs(pe.div,{initial:{opacity:0},whileInView:{opacity:1},transition:{delay:.4},viewport:{once:!0},style:{display:"flex",alignItems:"center",gap:"1rem"},children:[o.jsx("div",{style:{width:"50px",height:"50px",background:"rgba(255,255,255,0.1)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:o.jsx(Mt,{size:24,color:"var(--kb-gold)"})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Visit & Check In"}),o.jsx("div",{style:{fontSize:"0.85rem",opacity:.8},children:"Scan at local businesses"})]})]}),o.jsx("div",{style:{display:"flex",justifyContent:"center"},children:o.jsx(Ag,{size:24,color:"var(--kb-gold)",style:{opacity:.5}})}),o.jsxs(pe.div,{initial:{opacity:0},whileInView:{opacity:1},transition:{delay:.5},viewport:{once:!0},style:{display:"flex",alignItems:"center",gap:"1rem"},children:[o.jsx("div",{style:{width:"50px",height:"50px",background:"rgba(255,255,255,0.1)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:o.jsx(Qs,{size:24,color:"var(--kb-gold)"})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Level Up"}),o.jsx("div",{style:{fontSize:"0.85rem",opacity:.8},children:"Reach new tiers"})]})]}),o.jsx("div",{style:{display:"flex",justifyContent:"center"},children:o.jsx(Ag,{size:24,color:"var(--kb-gold)",style:{opacity:.5}})}),o.jsxs(pe.div,{initial:{opacity:0},whileInView:{opacity:1},transition:{delay:.6},viewport:{once:!0},style:{display:"flex",alignItems:"center",gap:"1rem"},children:[o.jsx("div",{style:{width:"50px",height:"50px",background:"linear-gradient(135deg, var(--kb-gold) 0%, #b8922d 100%)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:o.jsx(yr,{size:24,color:"var(--kb-navy)"})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Earn More"}),o.jsx("div",{style:{fontSize:"0.85rem",opacity:.8},children:"Up to 25% bonus!"})]})]})]}),o.jsx("div",{style:{marginTop:"2rem",display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[{name:"Curious",visits:"1+",bonus:"10%"},{name:"Hooked",visits:"5+",bonus:"15%"},{name:"Line & Sinker",visits:"10+",bonus:"20%"},{name:"Village Patron",visits:"15+",bonus:"25%",featured:!0}].map((c,h)=>o.jsxs("div",{style:{padding:"0.5rem 1rem",background:c.featured?"linear-gradient(135deg, var(--kb-gold) 0%, #b8922d 100%)":"rgba(255,255,255,0.1)",borderRadius:"8px",fontSize:"0.85rem",color:c.featured?"var(--kb-navy)":"white",fontWeight:c.featured?"600":"400"},children:[c.name,": ",c.bonus]},h))})]})]}),o.jsxs(pe.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:.4},viewport:{once:!0},style:{textAlign:"center",marginTop:"2.5rem"},children:[o.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1rem"},children:"Ready to start your Kinderhooker journey?"}),o.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[o.jsx(he,{to:"/profile",className:"btn btn-primary",children:"View My Progress"}),o.jsx(he,{to:"/businesses",className:"btn btn-secondary",children:"Find Businesses to Visit"})]})]})]})})}function F9(){return o.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[o.jsx(Ln,{}),o.jsx("section",{style:{background:"var(--kb-navy)",color:"var(--kb-white)",padding:"4rem 1rem",textAlign:"center"},children:o.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[o.jsx("h1",{style:{marginBottom:"1rem"},children:"How Kinderbucks Works"}),o.jsx("p",{style:{color:"var(--kb-gray-300)",fontSize:"1.1rem"},children:"A simple system designed to keep money local and reward community participation"})]})}),o.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:o.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[o.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem"},children:"What is Kinderbucks?"}),o.jsxs("div",{style:{color:"var(--kb-gray-700)",lineHeight:1.8},children:[o.jsxs("p",{style:{marginBottom:"1rem"},children:[o.jsx("strong",{children:"Kinderbucks"})," is a local currency program for the Village of Kinderhook, NY. It's real money  physical bills with QR codes for verification  that can only be spent at participating local businesses."]}),o.jsx("p",{style:{marginBottom:"1rem"},children:"When you exchange US dollars for Kinderbucks, you're making a commitment to spend locally. In return, you receive bonus value through our OK Membership program, turning $10 into $11, $12, or even $12.50 in local spending power."}),o.jsx("p",{children:"Every Kinderbuck spent stays in the village, circulating between businesses and residents, strengthening our local economy with each transaction."})]})]})}),o.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:o.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[o.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem",textAlign:"center"},children:"The Exchange Process"}),o.jsx("div",{style:{display:"grid",gap:"2rem",maxWidth:"700px",margin:"0 auto"},children:[{step:1,title:"Visit an Exchange Point",description:"Stop by any participating business or our central exchange location with US dollars."},{step:2,title:"Show Your Membership",description:"Scan your profile QR code or provide your phone number to apply your tier bonus."},{step:3,title:"Receive Your Kinderbucks",description:"Get physical Kinderbuck bills in $1, $5, $10, and $20 denominations with your bonus applied."},{step:4,title:"Spend Locally",description:"Use your Kinderbucks at any of our 19+ participating businesses."}].map((n,e)=>o.jsxs(pe.div,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},transition:{delay:e*.1},viewport:{once:!0},style:{display:"flex",gap:"1.5rem",alignItems:"flex-start"},children:[o.jsx("div",{style:{width:"50px",height:"50px",background:"var(--kb-navy)",color:"var(--kb-gold)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"var(--font-display)",fontWeight:"700",fontSize:"1.2rem",flexShrink:0},children:n.step}),o.jsxs("div",{children:[o.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:n.title}),o.jsx("p",{style:{color:"var(--kb-gray-600)"},children:n.description})]})]},e))})]})}),o.jsx(z9,{}),o.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:o.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[o.jsx("div",{className:"badge badge-gold",style:{marginBottom:"1rem"},children:"OK Membership"}),o.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem"},children:"The Kinderhooker Program"}),o.jsxs("div",{style:{color:"var(--kb-gray-700)",lineHeight:1.8},children:[o.jsxs("p",{style:{marginBottom:"1rem"},children:[o.jsx("strong",{children:"OK Membership"})," rewards customers who actively support local businesses. The more businesses you visit, the higher your tier  and the better your exchange rate."]}),o.jsxs("p",{style:{marginBottom:"1rem"},children:['Each participating business has a QR code. Scan it when you visit to record a "check-in." Your tier is based on how many ',o.jsx("em",{children:"unique"})," businesses you've visited, encouraging exploration of the entire village."]}),o.jsx("p",{children:`There's no cost to join. Simply start checking in at businesses, and you'll automatically become a "Kinderhooker" with access to bonus exchange rates.`})]}),o.jsxs("div",{style:{marginTop:"2rem",display:"flex",gap:"1rem",flexWrap:"wrap"},children:[o.jsx(he,{to:"/benefits",className:"btn btn-primary",children:"View All Benefits"}),o.jsx(he,{to:"/profile",className:"btn btn-secondary",children:"Check My Status"})]})]})}),o.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:o.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[o.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem"},children:"Frequently Asked Questions"}),[{q:"Is Kinderbucks real money?",a:"Kinderbucks are a local complementary currency. They have value within our participating business network but cannot be deposited in banks or used outside Kinderhook."},{q:"Can I convert Kinderbucks back to USD?",a:"Kinderbucks are designed to circulate locally. While businesses can redeem them, individual customers are encouraged to spend them at participating businesses."},{q:"What if a business closes?",a:"Kinderbucks remain valid at all other participating businesses. The program maintains reserves to ensure stability."},{q:"How do businesses benefit?",a:"Businesses receive customers committed to spending locally, gain exposure through our directory, and become part of a community-strengthening initiative."},{q:"Is there a fee to exchange?",a:"No fees. You receive full value plus your membership bonus when exchanging USD for Kinderbucks."}].map((n,e)=>o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsx("h4",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:n.q}),o.jsx("p",{style:{color:"var(--kb-gray-600)"},children:n.a})]},e))]})}),o.jsxs("section",{style:{padding:"3rem 1rem",background:"var(--kb-navy)",color:"var(--kb-white)",textAlign:"center"},children:[o.jsx("h3",{style:{marginBottom:"1rem"},children:"Ready to get started?"}),o.jsx(he,{to:"/exchange",className:"btn btn-gold",children:"Get Your Kinderbucks"})]}),o.jsx(On,{})]})}const fr={curious:{name:"Curious",threshold:1,bonus:.1,color:"#888888",bgColor:"#f0f0f0",emoji:""},hooked:{name:"Hooked",threshold:5,bonus:.15,color:"#2e7d32",bgColor:"#e8f5e9",emoji:""},lineAndSinker:{name:"Line & Sinker",threshold:10,bonus:.2,color:"#1565c0",bgColor:"#e3f2fd",emoji:""},patron:{name:"Village Patron",threshold:15,bonus:.25,color:"#c9a227",bgColor:"#fff8e1",emoji:""}};function sy(n){return n>=15?"patron":n>=10?"lineAndSinker":n>=5?"hooked":n>=1?"curious":null}function U9(n){const e=["curious","hooked","lineAndSinker","patron"],t=e.indexOf(n);return t<e.length-1?e[t+1]:null}function VT(n){const e=sy(n),t=U9(e);if(!t)return{progress:100,remaining:0,nextTier:null};const r=fr[t],s=e?fr[e].threshold:0,l=(n-s)/(r.threshold-s)*100;return{progress:Math.min(100,Math.max(0,l)),remaining:r.threshold-n,nextTier:r}}function W9(){const n=[{Icon:nV,title:"Bonus Exchange Rates",description:"Get up to 25% extra when converting USD to Kinderbucks. A $100 exchange becomes $125 in local spending power.",highlight:"Up to 25% bonus"},{Icon:Mt,title:"Exclusive Local Deals",description:"Participating businesses offer special discounts and promotions exclusively for Kinderhooker members.",highlight:"Member-only offers"},{Icon:yr,title:"Priority Access",description:"Higher-tier members get early access to limited events, seasonal specials, and new business openings.",highlight:"First in line"},{Icon:D2,title:"Seasonal Bonuses",description:"Extra rewards during holidays and special village events. Double check-in points, bonus exchanges, and more.",highlight:"Special events"},{Icon:d0,title:"Impact Tracking",description:"See exactly how your spending supports local businesses and contributes to the village economy.",highlight:"Track your impact"},{Icon:Or,title:"Community Recognition",description:"Village Patrons are recognized in our annual report and invited to exclusive community appreciation events.",highlight:"Be celebrated"}];return o.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[o.jsx(Ln,{}),o.jsx("section",{style:{background:"linear-gradient(135deg, var(--kb-gold-dark) 0%, var(--kb-gold) 100%)",color:"var(--kb-navy)",padding:"4rem 1rem",textAlign:"center"},children:o.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[o.jsx("div",{className:"badge badge-navy",style:{marginBottom:"1rem"},children:"OK Membership"}),o.jsx("h1",{style:{marginBottom:"1rem"},children:"Member Benefits & Rewards"}),o.jsx("p",{style:{fontSize:"1.1rem",opacity:.9},children:"The more you support local, the more you earn. It pays to be a Kinderhooker."})]})}),o.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:o.jsxs("div",{style:{maxWidth:"1100px",margin:"0 auto"},children:[o.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem",textAlign:"center"},children:"Membership Tiers"}),o.jsx("p",{style:{color:"var(--kb-gray-500)",textAlign:"center",marginBottom:"2rem"},children:"Visit more businesses to unlock better rewards"}),o.jsx("div",{style:{overflowX:"auto"},children:o.jsxs("table",{style:{minWidth:"700px"},children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{style:{width:"25%"},children:"Tier"}),o.jsx("th",{style:{width:"20%"},children:"Requirement"}),o.jsx("th",{style:{width:"20%"},children:"Exchange Bonus"}),o.jsx("th",{style:{width:"35%"},children:"Perks"})]})}),o.jsxs("tbody",{children:[o.jsxs("tr",{children:[o.jsx("td",{children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(un,{size:18,color:"#888"}),o.jsx("span",{style:{fontWeight:"600",color:"#888"},children:"Curious"})]})}),o.jsx("td",{children:"1+ businesses"}),o.jsx("td",{children:o.jsx("span",{style:{color:"#888",fontWeight:"600"},children:"10%"})}),o.jsx("td",{style:{fontSize:"0.9rem",color:"var(--kb-gray-600)"},children:"Basic exchange bonus, check-in tracking"})]}),o.jsxs("tr",{children:[o.jsx("td",{children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(yr,{size:18,color:"#2e7d32"}),o.jsx("span",{style:{fontWeight:"600",color:"#2e7d32"},children:"Hooked"})]})}),o.jsx("td",{children:"5+ businesses"}),o.jsx("td",{children:o.jsx("span",{style:{color:"#2e7d32",fontWeight:"600"},children:"15%"})}),o.jsx("td",{style:{fontSize:"0.9rem",color:"var(--kb-gray-600)"},children:"Seasonal bonus events, member deals"})]}),o.jsxs("tr",{children:[o.jsx("td",{children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(gr,{size:18,color:"#1565c0"}),o.jsx("span",{style:{fontWeight:"600",color:"#1565c0"},children:"Line & Sinker"})]})}),o.jsx("td",{children:"10+ businesses"}),o.jsx("td",{children:o.jsx("span",{style:{color:"#1565c0",fontWeight:"600"},children:"20%"})}),o.jsx("td",{style:{fontSize:"0.9rem",color:"var(--kb-gray-600)"},children:"Priority access, exclusive events"})]}),o.jsxs("tr",{style:{background:"rgba(201, 162, 39, 0.1)"},children:[o.jsx("td",{children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Zn,{size:18,color:"#c9a227"}),o.jsx("span",{style:{fontWeight:"600",color:"#c9a227"},children:"Village Patron"})]})}),o.jsx("td",{children:"15+ businesses"}),o.jsx("td",{children:o.jsx("span",{style:{color:"#c9a227",fontWeight:"600"},children:"25%"})}),o.jsx("td",{style:{fontSize:"0.9rem",color:"var(--kb-gray-600)"},children:"All perks + community recognition + VIP events"})]})]})]})}),o.jsx("div",{style:{textAlign:"center",marginTop:"2rem"},children:o.jsx(he,{to:"/profile",className:"btn btn-primary",children:"Check My Progress"})})]})}),o.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:o.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[o.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem",textAlign:"center"},children:"All Member Benefits"}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1.5rem"},children:n.map((e,t)=>o.jsx(pe.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:t*.1},viewport:{once:!0},className:"card",children:o.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[o.jsx("div",{style:{width:"50px",height:"50px",background:"var(--kb-navy)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:o.jsx(e.Icon,{size:24,color:"var(--kb-gold)",strokeWidth:1.5})}),o.jsxs("div",{children:[o.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"0.25rem",fontSize:"1.1rem"},children:e.title}),o.jsx("span",{className:"badge badge-gold",style:{marginBottom:"0.5rem"},children:e.highlight}),o.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem",marginTop:"0.5rem"},children:e.description})]})]})},t))})]})}),o.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:o.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto",textAlign:"center"},children:[o.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"See Your Savings"}),o.jsx("p",{style:{color:"var(--kb-gray-500)",marginBottom:"2rem"},children:"Example: Exchange $100 USD"}),o.jsx("div",{className:"card",style:{padding:"2rem"},children:o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[{tier:"Curious",bonus:10,color:"#888"},{tier:"Hooked",bonus:15,color:"#2e7d32"},{tier:"Line & Sinker",bonus:20,color:"#1565c0"},{tier:"Village Patron",bonus:25,color:"#c9a227"}].map((e,t)=>o.jsxs("div",{style:{padding:"1rem",borderRadius:"8px",background:`${e.color}10`,border:`1px solid ${e.color}30`},children:[o.jsx("div",{style:{fontSize:"0.85rem",color:e.color,fontWeight:"600"},children:e.tier}),o.jsxs("div",{style:{fontFamily:"var(--font-display)",fontSize:"1.8rem",fontWeight:"700",color:e.color},children:["$",100+e.bonus]}),o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:"in Kinderbucks"})]},t))})}),o.jsx("div",{style:{marginTop:"2rem"},children:o.jsx(he,{to:"/exchange",className:"btn btn-gold",style:{padding:"1rem 2rem"},children:"Start Exchanging"})})]})}),o.jsxs("section",{style:{padding:"3rem 1rem",background:"var(--kb-green)",color:"var(--kb-white)",textAlign:"center"},children:[o.jsx("h3",{style:{marginBottom:"1rem"},children:"Start earning rewards today"}),o.jsx("p",{style:{opacity:.9,marginBottom:"1.5rem"},children:"Visit a participating business and scan their QR code to begin"}),o.jsx(he,{to:"/businesses",className:"btn btn-gold",children:"Find Businesses Near You"})]}),o.jsx(On,{})]})}const oo="businesses",$9="checkins",H9="transactions";async function Pu(n){const e=tt(Ee,oo,n),t=await zr(e);return t.exists()?{code:t.id,...t.data()}:null}async function gi(n=!1){const e=bn(ut(Ee,oo),Xi("name")),r=(await Dt(e)).docs.map(s=>({code:s.id,...s.data()}));return n?r:r.filter(s=>!s.isDeleted)}async function K9(){return(await gi(!0)).filter(e=>e.isDeleted)}async function xk(n,e,t,r={}){const s={code:n,name:e,category:t,isActive:!0,checkinCount:0,createdAt:Je()};r.address&&(s.address=r.address),r.placeId&&(s.placeId=r.placeId),r.phone&&(s.phone=r.phone),r.website&&(s.website=r.website),r.photoUrl&&(s.photoUrl=r.photoUrl),await Rl(tt(Ee,oo,n),s)}async function LT(n){const e=await Pu(n);if(!e)return{exists:!1,canDelete:!1,reason:"Business not found"};const t=bn(ut(Ee,$9),Bn("businessCode","==",n)),s=(await Dt(t)).size,l=bn(ut(Ee,H9),Bn("businessCode","==",n)),h=(await Dt(l)).size,d=e.kinderbucksBalance||0,m=s>0||h>0||d>0;return{exists:!0,code:n,name:e.name,checkinCount:s,transactionCount:h,balance:d,hasData:m,canSafeDelete:!m,reason:m?`Has ${s} check-ins, ${h} transactions, $${d} balance`:"No associated data"}}async function q9(n,e=null,t=!1){const r=await LT(n);if(!r.exists)throw new Error("Business not found");if(r.hasData&&!t)throw new Error(`Cannot delete: ${r.reason}. Use force=true to soft delete anyway.`);const s=tt(Ee,oo,n);return await Wt(s,{isDeleted:!0,deletedAt:Je(),deletedBy:e,isActive:!1}),{success:!0,wasForced:r.hasData&&t}}async function G9(n){const e=tt(Ee,oo,n);await Wt(e,{isDeleted:!1,deletedAt:null,deletedBy:null,restoredAt:Je()})}async function Q9(n){const e=tt(Ee,oo,n);await Wt(e,{checkinCount:Qo(1)})}async function Y9(n,e){const t=tt(Ee,oo,n);await Wt(t,{isActive:e})}async function X9(n){const e=await Pu(n);return e?{...e,kinderbucksBalance:e.kinderbucksBalance||0,lifetimeAccepted:e.lifetimeAccepted||0,lifetimeRedeemed:e.lifetimeRedeemed||0}:null}async function J9(n,e){const t=tt(Ee,oo,n);await Wt(t,{photoUrl:e,photoUpdatedAt:Je()})}const Yp={food:{label:"Food & Drink",Icon:F2,color:"#e74c3c"},retail:{label:"Retail",Icon:m0,color:"#9b59b6"},services:{label:"Services",Icon:j2,color:"#3498db"},arts:{label:"Arts & Culture",Icon:V2,color:"#1abc9c"}};function Z9(){const[n,e]=j.useState([]),[t,r]=j.useState(!0),[s,l]=j.useState("all");j.useEffect(()=>{async function d(){const m=await gi();e(m.filter(g=>g.isActive)),r(!1)}d()},[]);const c=s==="all"?n:n.filter(d=>d.category===s),h={total:n.length,food:n.filter(d=>d.category==="food").length,retail:n.filter(d=>d.category==="retail").length};return o.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[o.jsx(Ln,{}),o.jsx("section",{style:{background:"var(--kb-navy)",color:"var(--kb-white)",padding:"4rem 1rem",textAlign:"center"},children:o.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[o.jsx("h1",{style:{marginBottom:"1rem"},children:"For Local Businesses"}),o.jsx("p",{style:{color:"var(--kb-gray-300)",fontSize:"1.1rem",marginBottom:"2rem"},children:"Join the Kinderbucks network and connect with customers committed to shopping local"}),o.jsx(he,{to:"/admin/businesses",className:"btn btn-gold",children:"Register Your Business"})]})}),o.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:o.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[o.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem",textAlign:"center"},children:"Why Accept Kinderbucks?"}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"2rem"},children:[{Icon:Or,title:"Committed Customers",description:"Kinderbucks holders have already decided to spend locally. They're not comparison shopping online."},{Icon:YV,title:"Money Stays Local",description:"Unlike credit cards that send fees elsewhere, Kinderbucks keep circulating in our village economy."},{Icon:MV,title:"Free Marketing",description:"Get listed in our business directory, featured on our homepage, and promoted to all members."},{Icon:A3,title:"Community Standing",description:"Show customers you're invested in Kinderhook's future. Participating businesses are community leaders."},{Icon:Wi,title:"Easy Redemption",description:"Redeem Kinderbucks for USD at any time through our simple merchant portal. No waiting."},{Icon:d0,title:"Customer Insights",description:"Access check-in data and understand your customers' behavior across the village."}].map((d,m)=>o.jsxs(pe.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:m*.1},viewport:{once:!0},className:"card",style:{textAlign:"center"},children:[o.jsx("div",{style:{width:"60px",height:"60px",background:"var(--kb-navy)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:o.jsx(d.Icon,{size:28,color:"var(--kb-gold)",strokeWidth:1.5})}),o.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:d.title}),o.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem"},children:d.description})]},m))})]})}),o.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:o.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[o.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem",textAlign:"center"},children:"How It Works"}),o.jsx("div",{style:{display:"grid",gap:"1.5rem"},children:[{step:1,title:"Register",desc:"Sign up as a participating business. It's free to join."},{step:2,title:"Get Your QR Code",desc:"We'll provide a unique check-in QR code for your location."},{step:3,title:"Display It",desc:"Put the QR code at your counter or entrance for customers to scan."},{step:4,title:"Accept Kinderbucks",desc:"Take Kinderbucks as payment, just like cash. Same denominations."},{step:5,title:"Redeem Anytime",desc:"Exchange accumulated Kinderbucks back to USD when you need."}].map((d,m)=>o.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center",background:"var(--kb-white)",padding:"1.5rem",borderRadius:"12px",boxShadow:"var(--shadow-sm)"},children:[o.jsx("div",{style:{width:"40px",height:"40px",background:"var(--kb-gold)",color:"var(--kb-navy)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"700",flexShrink:0},children:d.step}),o.jsxs("div",{children:[o.jsx("h4",{style:{color:"var(--kb-navy)",marginBottom:"0.25rem"},children:d.title}),o.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem",margin:0},children:d.desc})]})]},m))})]})}),o.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:o.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[o.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem",textAlign:"center"},children:"Participating Businesses"}),o.jsxs("p",{style:{color:"var(--kb-gray-500)",textAlign:"center",marginBottom:"2rem"},children:[h.total," businesses currently accepting Kinderbucks"]}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center",marginBottom:"2rem",flexWrap:"wrap"},children:[o.jsxs("button",{onClick:()=>l("all"),className:s==="all"?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem"},children:["All (",h.total,")"]}),Object.entries(Yp).map(([d,m])=>o.jsxs("button",{onClick:()=>l(d),className:s===d?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem",display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(m.Icon,{size:16})," ",m.label]},d))]}),t?o.jsx("p",{style:{textAlign:"center"},children:"Loading businesses..."}):c.length===0?o.jsxs("p",{style:{textAlign:"center",color:"var(--kb-gray-500)"},children:["No businesses found. ",o.jsx(he,{to:"/admin/businesses",children:"Add some!"})]}):o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:"1rem"},children:c.map((d,m)=>{const g=Yp[d.category]||Yp.services;return o.jsxs(pe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:m*.03},className:"card",style:{padding:"1.25rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("div",{style:{width:"40px",height:"40px",background:`${g.color}15`,borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(g.Icon,{size:20,color:g.color,strokeWidth:1.5})}),o.jsxs("div",{children:[o.jsx("h4",{style:{color:"var(--kb-navy)",margin:0,fontSize:"1rem"},children:d.name}),o.jsx("span",{style:{fontSize:"0.8rem",color:g.color},children:g.label})]})]}),d.checkinCount>0&&o.jsxs("div",{style:{marginTop:"0.75rem",fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:[d.checkinCount," check-ins"]})]},d.code)})})]})}),o.jsxs("section",{style:{padding:"3rem 1rem",background:"var(--kb-gold)",color:"var(--kb-navy)",textAlign:"center"},children:[o.jsx("h3",{style:{marginBottom:"1rem"},children:"Ready to join the network?"}),o.jsx("p",{style:{opacity:.9,marginBottom:"1.5rem"},children:"Registration is free. Start accepting Kinderbucks today."}),o.jsx(he,{to:"/admin/businesses",className:"btn btn-primary",children:"Register Your Business"})]}),o.jsx(On,{})]})}const OT="members";function sf(){return Yo.currentUser?Yo.currentUser.uid:of()}function of(){let n=localStorage.getItem("kinderhooker_visitor_id");return n||(n="anon_"+Math.random().toString(36).substring(2,15),localStorage.setItem("kinderhooker_visitor_id",n)),n}async function Nu(n){const e=tt(Ee,OT,n),t=await zr(e);return t.exists()?{visitorId:t.id,...t.data()}:null}async function eB(n,e){const t=tt(Ee,OT,n),r=await zr(t);if(r.exists()){const s=r.data(),l=s.businessesVisited||[],c=!l.includes(e),h=c?l.length+1:l.length,d=sy(h),m=d!==s.tier;return await Wt(t,{businessesVisited:v2(e),totalCheckins:Qo(1),tier:d,lastCheckin:Je()}),{isNewBusiness:c,tierChanged:m,oldTier:s.tier,newTier:d,businessesVisited:c?[...l,e]:l,totalCheckins:(s.totalCheckins||0)+1}}else{const s=sy(1);return await Rl(t,{visitorId:n,tier:s,businessesVisited:[e],totalCheckins:1,createdAt:Je(),lastCheckin:Je(),email:null}),{isNewBusiness:!0,tierChanged:!0,oldTier:null,newTier:s,businessesVisited:[e],totalCheckins:1}}}const tB={curious:un,hooked:yr,lineAndSinker:gr,patron:Zn};function nB(){const[n,e]=j.useState(null),[t,r]=j.useState(!0),[s,l]=j.useState(20),[c,h]=j.useState(!1),[d,m]=j.useState(!1);j.useEffect(()=>{async function P(){const M=of(),D=await Nu(M);e(D),r(!1)}P()},[]);const g=(n==null?void 0:n.tier)||"curious",y=fr[g]||fr.curious,x=n?y.bonus:.1,E=s*x,k=s+E,S=async()=>{h(!0);try{await Nf(ut(Ee,"exchanges"),{visitorId:of(),usdAmount:s,bonusRate:x,bonusAmount:E,kinderbucksAmount:k,tier:g,status:"pending",createdAt:Je()}),m(!0)}catch(P){console.error("Exchange error:",P),alert("Error submitting exchange request")}h(!1)},T=[10,20,50,100];return o.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[o.jsx(Ln,{}),o.jsx("section",{style:{background:"linear-gradient(135deg, var(--kb-green) 0%, var(--kb-green-light) 100%)",color:"var(--kb-white)",padding:"3rem 1rem",textAlign:"center"},children:o.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto"},children:[o.jsx("h1",{style:{marginBottom:"0.5rem"},children:"Get Kinderbucks"}),o.jsx("p",{style:{opacity:.9},children:"Exchange USD for local currency with bonus value"})]})}),o.jsx("section",{style:{padding:"3rem 1rem",background:"var(--kb-cream)",flex:1},children:o.jsx("div",{style:{maxWidth:"500px",margin:"0 auto"},children:d?o.jsxs(pe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"card",style:{textAlign:"center",padding:"3rem 2rem"},children:[o.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:""}),o.jsx("h2",{style:{color:"var(--kb-green)",marginBottom:"1rem"},children:"Exchange Requested!"}),o.jsxs("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem"},children:["Your exchange request for ",o.jsxs("strong",{children:["$",s," USD"]})," "," ",o.jsxs("strong",{children:["$",k.toFixed(2)," Kinderbucks"]})," has been submitted."]}),o.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem",marginBottom:"2rem"},children:"Visit any exchange point to complete your transaction and receive your Kinderbucks."}),o.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[o.jsx("button",{onClick:()=>m(!1),className:"btn btn-primary",children:"Exchange More"}),o.jsx(he,{to:"/account",className:"btn btn-secondary",children:"View Account"})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)",marginBottom:"0.25rem"},children:"Your Tier"}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(()=>{const P=tB[g]||un;return o.jsx(P,{size:28,color:y.color,strokeWidth:1.5})})(),o.jsx("span",{style:{fontWeight:"600",color:y.color,fontSize:"1.2rem"},children:y.name})]})]}),o.jsxs("div",{style:{textAlign:"right"},children:[o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)",marginBottom:"0.25rem"},children:"Bonus Rate"}),o.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:y.color},children:[Math.round(x*100),"%"]})]})]}),!n&&o.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"var(--kb-gray-50)",borderRadius:"8px",fontSize:"0.85rem",color:"var(--kb-gray-600)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(TV,{size:16,color:"var(--kb-gold)"})," ",o.jsx(he,{to:"/profile",style:{color:"var(--kb-navy)"},children:"Visit businesses"})," to increase your tier and get better rates!"]})]}),o.jsxs("div",{className:"card",children:[o.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem"},children:"Exchange Calculator"}),o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsx("label",{children:"Amount (USD)"}),o.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem"},children:T.map(P=>o.jsxs("button",{onClick:()=>l(P),className:s===P?"btn btn-primary":"btn btn-secondary",style:{flex:1,padding:"0.5rem"},children:["$",P]},P))}),o.jsx("input",{type:"number",value:s,onChange:P=>l(Math.max(1,Number(P.target.value))),min:"1",style:{width:"100%"}})]}),o.jsxs("div",{style:{background:"var(--kb-gray-50)",borderRadius:"12px",padding:"1.5rem",marginBottom:"1.5rem"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.75rem"},children:[o.jsx("span",{style:{color:"var(--kb-gray-600)"},children:"USD Amount"}),o.jsxs("span",{style:{fontWeight:"600"},children:["$",s.toFixed(2)]})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.75rem"},children:[o.jsxs("span",{style:{color:"var(--kb-gray-600)"},children:[y.name," Bonus (",Math.round(x*100),"%)"]}),o.jsxs("span",{style:{fontWeight:"600",color:"var(--kb-green)"},children:["+$",E.toFixed(2)]})]}),o.jsx("div",{className:"divider",style:{margin:"0.75rem 0"}}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsx("span",{style:{color:"var(--kb-navy)",fontWeight:"600"},children:"You Receive"}),o.jsxs("span",{style:{fontFamily:"var(--font-display)",fontSize:"1.8rem",fontWeight:"700",color:"var(--kb-gold-dark)"},children:["$",k.toFixed(2)]})]}),o.jsx("div",{style:{textAlign:"right",fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Kinderbucks"})]}),o.jsx("button",{onClick:S,disabled:c,className:"btn btn-gold",style:{width:"100%",padding:"1rem",fontSize:"1.1rem"},children:c?"Processing...":`Exchange $${s} for $${k.toFixed(2)} Kinderbucks`}),o.jsx("p",{style:{textAlign:"center",fontSize:"0.85rem",color:"var(--kb-gray-500)",marginTop:"1rem"},children:"Complete your exchange at any participating business or exchange point"})]}),o.jsxs("div",{className:"card",style:{marginTop:"1.5rem"},children:[o.jsx("h4",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Exchange Locations"}),o.jsxs("div",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem"},children:[o.jsxs("p",{style:{marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(yl,{size:16,color:"var(--kb-green)"})," ",o.jsx("strong",{children:"OK Pantry"})," - 2 Hudson Street"]}),o.jsxs("p",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(yl,{size:16,color:"var(--kb-green)"})," ",o.jsx("strong",{children:"Village Hall"})," - During events"]})]})]})]})})}),o.jsx(On,{})]})}const wk={curious:un,hooked:yr,lineAndSinker:gr,patron:Zn};function rB(){var P,M;const[n,e]=j.useState(null),[t,r]=j.useState([]),[s,l]=j.useState([]),[c,h]=j.useState(!0),[d,m]=j.useState("overview");if(j.useEffect(()=>{async function D(){const U=of(),H=await Nu(U),K=await gi();try{const A=bn(ut(Ee,"exchanges"),Bn("visitorId","==",U),Xi("createdAt","desc")),C=await Dt(A);l(C.docs.map(N=>({id:N.id,...N.data()})))}catch(A){console.error("Error loading exchanges:",A)}e(H),r(K),h(!1)}D()},[]),c)return o.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[o.jsx(Ln,{}),o.jsx("div",{className:"page page-center",style:{flex:1},children:o.jsx("div",{style:{fontSize:"2rem"},children:"Loading..."})}),o.jsx(On,{})]});const g=(n==null?void 0:n.tier)||null,y=g?fr[g]:null,x=((P=n==null?void 0:n.businessesVisited)==null?void 0:P.length)||0,E=VT(x),k=((M=n==null?void 0:n.businessesVisited)==null?void 0:M.map(D=>{const U=t.find(H=>H.code===D);return U?U.name:D}))||[],S=t.filter(D=>{var U;return D.isActive&&!((U=n==null?void 0:n.businessesVisited)!=null&&U.includes(D.code))}),T=s.reduce((D,U)=>D+(U.kinderbucksAmount||0),0);return o.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[o.jsx(Ln,{}),o.jsx("section",{style:{background:"var(--kb-navy)",color:"var(--kb-white)",padding:"2rem 1rem"},children:o.jsx("div",{style:{maxWidth:"800px",margin:"0 auto"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[o.jsx("div",{style:{width:"80px",height:"80px",background:y?y.color:"var(--kb-gray-500)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:(()=>{const D=g&&wk[g]?wk[g]:un;return o.jsx(D,{size:40,color:"white",strokeWidth:1.5})})()}),o.jsxs("div",{style:{flex:1},children:[o.jsx("div",{style:{fontSize:"0.9rem",color:"var(--kb-gray-300)",marginBottom:"0.25rem"},children:"OK Membership"}),o.jsx("h1",{style:{fontSize:"1.5rem",marginBottom:"0.25rem"},children:y?y.name:"New Member"}),o.jsx("div",{style:{fontSize:"0.9rem",color:"var(--kb-gold)"},children:y?`${Math.round(y.bonus*100)}% Exchange Bonus`:"Start exploring to earn rewards"})]}),o.jsx(he,{to:"/exchange",className:"btn btn-gold",children:"Get Kinderbucks"})]})})}),o.jsx("div",{style:{background:"var(--kb-white)",borderBottom:"1px solid var(--kb-gray-200)",position:"sticky",top:"70px",zIndex:50},children:o.jsx("div",{style:{maxWidth:"800px",margin:"0 auto",display:"flex",gap:"2rem",padding:"0 1rem"},children:["overview","progress","history"].map(D=>o.jsx("button",{onClick:()=>m(D),style:{background:"none",border:"none",padding:"1rem 0",fontSize:"0.95rem",fontWeight:d===D?"600":"400",color:d===D?"var(--kb-navy)":"var(--kb-gray-500)",borderBottom:d===D?"2px solid var(--kb-gold)":"2px solid transparent",cursor:"pointer",textTransform:"capitalize"},children:D},D))})}),o.jsx("section",{style:{padding:"2rem 1rem",background:"var(--kb-cream)",flex:1},children:o.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[d==="overview"&&o.jsxs(pe.div,{initial:{opacity:0},animate:{opacity:1},children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[o.jsxs("div",{className:"card",style:{textAlign:"center"},children:[o.jsx("div",{className:"stat-value",children:x}),o.jsx("div",{className:"stat-label",children:"Businesses Visited"})]}),o.jsxs("div",{className:"card",style:{textAlign:"center"},children:[o.jsx("div",{className:"stat-value",children:(n==null?void 0:n.totalCheckins)||0}),o.jsx("div",{className:"stat-label",children:"Total Check-ins"})]}),o.jsxs("div",{className:"card",style:{textAlign:"center"},children:[o.jsxs("div",{className:"stat-value",style:{color:"var(--kb-gold)"},children:["$",T.toFixed(0)]}),o.jsx("div",{className:"stat-label",children:"Kinderbucks Exchanged"})]})]}),o.jsxs("div",{className:"card",children:[o.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Quick Actions"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"0.75rem"},children:[o.jsxs(he,{to:"/exchange",className:"btn btn-gold",style:{textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[o.jsx(Wi,{size:18})," Exchange"]}),o.jsxs(he,{to:"/businesses",className:"btn btn-secondary",style:{textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[o.jsx(Mt,{size:18})," Find Businesses"]}),o.jsxs(he,{to:"/benefits",className:"btn btn-secondary",style:{textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[o.jsx(p0,{size:18})," View Benefits"]})]})]})]}),d==="progress"&&o.jsxs(pe.div,{initial:{opacity:0},animate:{opacity:1},children:[y&&o.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[o.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Tier Progress"}),E.nextTier?o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{marginBottom:"0.5rem"},children:[o.jsx("span",{style:{color:y.color,fontWeight:"600"},children:y.name}),o.jsx("span",{style:{color:"var(--kb-gray-400)",margin:"0 0.5rem"},children:""}),o.jsx("span",{style:{color:E.nextTier.color,fontWeight:"600"},children:E.nextTier.name})]}),o.jsx("div",{className:"progress-bar",style:{height:"12px",marginBottom:"0.5rem"},children:o.jsx("div",{className:"progress-bar-fill",style:{width:`${E.progress}%`,background:y.color}})}),o.jsxs("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:[E.remaining," more business",E.remaining!==1?"es":""," to reach ",E.nextTier.name]})]}):o.jsxs("p",{style:{color:"var(--kb-gold)",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Zn,{size:20})," Maximum tier reached! You're a Village Patron!"]})]}),o.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[o.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Li,{size:20,color:"var(--kb-green)"})," Businesses Visited (",k.length,")"]}),k.length>0?o.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:k.map((D,U)=>o.jsxs("span",{style:{background:"#d4edda",color:"var(--kb-green)",padding:"0.4rem 0.75rem",borderRadius:"100px",fontSize:"0.85rem",display:"inline-flex",alignItems:"center",gap:"0.25rem"},children:[o.jsx(Li,{size:14})," ",D]},U))}):o.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"No businesses visited yet"})]}),S.length>0&&o.jsxs("div",{className:"card",children:[o.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(R2,{size:20,color:"var(--kb-navy)"})," Still to Explore (",S.length,")"]}),o.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:[S.slice(0,12).map(D=>o.jsx("span",{style:{background:"var(--kb-gray-100)",color:"var(--kb-gray-600)",padding:"0.4rem 0.75rem",borderRadius:"100px",fontSize:"0.85rem"},children:D.name},D.code)),S.length>12&&o.jsxs("span",{style:{color:"var(--kb-gray-500)",padding:"0.4rem"},children:["+",S.length-12," more"]})]})]})]}),d==="history"&&o.jsx(pe.div,{initial:{opacity:0},animate:{opacity:1},children:o.jsxs("div",{className:"card",children:[o.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Exchange History"}),s.length>0?o.jsx("div",{children:s.map((D,U)=>{var H,K,A,C;return o.jsxs("div",{style:{padding:"1rem 0",borderBottom:U<s.length-1?"1px solid var(--kb-gray-100)":"none",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsxs("div",{children:[o.jsxs("div",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:["$",D.usdAmount,"  $",(H=D.kinderbucksAmount)==null?void 0:H.toFixed(2)," KB"]}),o.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:[((C=(A=(K=D.createdAt)==null?void 0:K.toDate)==null?void 0:A.call(K))==null?void 0:C.toLocaleDateString())||"Pending","  ",Math.round(D.bonusRate*100),"% bonus"]})]}),o.jsx("span",{className:"badge",style:{background:D.status==="completed"?"#d4edda":"#fff3cd",color:D.status==="completed"?"var(--kb-green)":"#856404"},children:D.status})]},D.id)})}):o.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"var(--kb-gray-500)"},children:[o.jsx("p",{style:{marginBottom:"1rem"},children:"No exchanges yet"}),o.jsx(he,{to:"/exchange",className:"btn btn-gold",children:"Make Your First Exchange"})]})]})})]})}),o.jsx(On,{})]})}const bk={curious:un,hooked:yr,lineAndSinker:gr,patron:Zn},Pc={curious:"#888888",hooked:"#2e7d32",lineAndSinker:"#1565c0",patron:"#c9a227"};function iB(){var S,T;const{user:n,profile:e,isAuthenticated:t}=Ur(),[r,s]=j.useState(null),[l,c]=j.useState([]),[h,d]=j.useState(!0);j.useEffect(()=>{async function P(){const M=sf(),D=await Nu(M),U=await gi();s(D),c(U.filter(H=>H.isActive)),d(!1)}P()},[n]);const m=(r==null?void 0:r.tier)||"curious",g=fr[m],y=((S=r==null?void 0:r.businessesVisited)==null?void 0:S.length)||0,x=VT(y),E=((T=r==null?void 0:r.businessesVisited)==null?void 0:T.map(P=>{const M=l.find(D=>D.code===P);return M?M.name:P}))||[],k=l.filter(P=>{var M;return!((M=r==null?void 0:r.businessesVisited)!=null&&M.includes(P.code))});return o.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[o.jsx(Ln,{}),o.jsx("main",{style:{flex:1,background:"var(--kb-cream)",padding:"2rem 1rem"},children:o.jsx("div",{style:{maxWidth:"600px",margin:"0 auto"},children:h?o.jsx("div",{style:{textAlign:"center",padding:"4rem 0"},children:o.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading your profile..."})}):r?o.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[t&&e&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1.5rem",padding:"1rem",background:"white",borderRadius:"12px"},children:[o.jsx("div",{style:{width:"48px",height:"48px",background:"var(--kb-gray-100)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(il,{size:24,color:"var(--kb-gray-500)"})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:e.displayName||n.email}),o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:n.email})]})]}),o.jsxs(pe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.1},style:{background:`linear-gradient(135deg, ${Pc[m]} 0%, ${Pc[m]}dd 100%)`,borderRadius:"20px",padding:"2rem",color:"white",textAlign:"center",marginBottom:"1.5rem",boxShadow:"0 4px 20px rgba(0,0,0,0.2)"},children:[(()=>{const P=bk[m]||un;return o.jsx(P,{size:48,color:"white",strokeWidth:1.5,style:{marginBottom:"0.5rem"}})})(),o.jsx("div",{style:{fontSize:"1.8rem",fontWeight:"bold",marginBottom:"0.25rem"},children:g.name}),o.jsxs("div",{style:{opacity:.9,fontSize:"1rem"},children:[Math.round(g.bonus*100),"% Kinderbuck Exchange Bonus"]})]}),o.jsxs(he,{to:"/card",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",width:"100%",padding:"1.25rem",background:"linear-gradient(135deg, var(--kb-gold) 0%, #d4af37 100%)",color:"var(--kb-navy)",borderRadius:"16px",fontSize:"1.25rem",fontWeight:"700",textDecoration:"none",marginBottom:"1.5rem",boxShadow:"0 4px 12px rgba(201, 162, 39, 0.3)"},children:[o.jsx(Rg,{size:28}),"SHOW MY OK CARD"]}),o.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[o.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",textAlign:"center"},children:[y," Business",y!==1?"es":""," Visited"]}),x.nextTier?o.jsxs(o.Fragment,{children:[o.jsx("div",{style:{background:"var(--kb-gray-100)",borderRadius:"10px",height:"28px",overflow:"hidden",marginBottom:"0.75rem"},children:o.jsxs(pe.div,{initial:{width:0},animate:{width:`${x.progress}%`},transition:{delay:.3,duration:.8},style:{background:`linear-gradient(90deg, ${Pc[m]}, ${x.nextTier.color})`,height:"100%",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"0.85rem",fontWeight:"bold"},children:[y,"/",x.nextTier.threshold]})}),o.jsxs("p",{style:{color:"var(--kb-gray-600)",textAlign:"center"},children:[o.jsx("strong",{children:x.remaining})," more to reach"," ",o.jsx("strong",{style:{color:x.nextTier.color},children:x.nextTier.name})]})]}):o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",color:"var(--kb-gold-dark)",fontWeight:"600"},children:[o.jsx(Zn,{size:20})," Maximum tier reached! You're a true Village Patron!"]})]}),E.length>0&&o.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[o.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Li,{size:20,color:"var(--kb-green)"})," Visited"]}),o.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:E.map((P,M)=>o.jsxs("span",{style:{padding:"0.4rem 0.8rem",background:"#e8f5e9",borderRadius:"6px",color:"#2e7d32",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:[o.jsx(Li,{size:14})," ",P]},M))})]}),k.length>0&&o.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[o.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(R2,{size:20})," Still to Explore (",k.length,")"]}),o.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:[k.slice(0,10).map(P=>o.jsx("span",{style:{padding:"0.4rem 0.8rem",background:"var(--kb-gray-100)",borderRadius:"6px",color:"var(--kb-gray-600)",fontSize:"0.9rem"},children:P.name},P.code)),k.length>10&&o.jsxs("span",{style:{padding:"0.4rem 0.8rem",color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:["+",k.length-10," more"]})]}),o.jsxs(he,{to:"/businesses",style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",marginTop:"1rem",color:"var(--kb-navy)",fontWeight:"500",fontSize:"0.9rem"},children:["View all businesses ",o.jsx(Ag,{size:16})]})]}),o.jsxs("div",{style:{textAlign:"center",color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:["Total check-ins: ",r.totalCheckins||0]}),!t&&o.jsxs("div",{style:{marginTop:"2rem",padding:"1rem",background:"rgba(201, 162, 39, 0.1)",borderRadius:"12px",textAlign:"center"},children:[o.jsx("p",{style:{color:"var(--kb-gray-700)",marginBottom:"0.75rem"},children:"Sign in to save your progress across devices"}),o.jsxs(he,{to:"/login",className:"btn btn-gold",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(gl,{size:18})," Sign In"]})]})]}):o.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[o.jsxs("div",{className:"card",style:{padding:"2rem",textAlign:"center",marginBottom:"2rem"},children:[o.jsx("div",{style:{width:"80px",height:"80px",background:"linear-gradient(135deg, var(--kb-navy) 0%, var(--kb-navy-light) 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.5rem"},children:o.jsx(p0,{size:36,color:"var(--kb-gold)"})}),o.jsx("h1",{style:{color:"var(--kb-navy)",marginBottom:"0.75rem"},children:"Welcome to Kinderbucks!"}),o.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem",fontSize:"1.05rem"},children:"You haven't checked in anywhere yet. Visit a local business and scan their QR code to start building your Kinderhooker status!"}),!t&&o.jsxs("div",{style:{background:"rgba(201, 162, 39, 0.1)",borderRadius:"12px",padding:"1rem",marginBottom:"1.5rem"},children:[o.jsx("p",{style:{color:"var(--kb-gray-700)",fontSize:"0.9rem",marginBottom:"0.75rem"},children:"Sign in to save your progress across devices"}),o.jsxs(he,{to:"/login",className:"btn btn-gold",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(gl,{size:18})," Sign In or Create Account"]})]}),o.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap",justifyContent:"center"},children:[o.jsxs(he,{to:"/businesses",className:"btn btn-primary",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(yl,{size:18})," Find Businesses"]}),o.jsxs(he,{to:"/card",className:"btn btn-gold",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Rg,{size:18})," View My Card"]})]})]}),o.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[o.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",textAlign:"center"},children:"How to Get Started"}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[{step:1,text:"Visit any participating Kinderhook business",icon:Mt},{step:2,text:"Scan their check-in QR code with your phone",icon:un},{step:3,text:"Build your tier to unlock better exchange rates",icon:Qs}].map(P=>o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[o.jsx("div",{style:{width:"44px",height:"44px",background:"var(--kb-navy)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:o.jsx(P.icon,{size:20,color:"var(--kb-gold)"})}),o.jsx("div",{style:{color:"var(--kb-gray-700)"},children:P.text})]},P.step))})]}),o.jsxs("div",{style:{marginTop:"2rem"},children:[o.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",textAlign:"center"},children:"Tier Rewards"}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.75rem"},children:Object.entries(fr).map(([P,M])=>{const D=bk[P];return o.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"1rem",textAlign:"center",border:"1px solid var(--kb-gray-200)"},children:[o.jsx(D,{size:24,color:Pc[P],style:{marginBottom:"0.5rem"}}),o.jsx("div",{style:{fontWeight:"600",color:Pc[P],marginBottom:"0.25rem"},children:M.name}),o.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:[Math.round(M.bonus*100),"% bonus"]})]},P)})})]})]})})}),o.jsx(On,{})]})}function sB(){var D,U;const[n,e]=j.useState("login"),[t,r]=j.useState(""),[s,l]=j.useState(""),[c,h]=j.useState(""),[d,m]=j.useState(""),[g,y]=j.useState(!1),x=Js(),E=vr(),{isAuthenticated:k}=Ur(),P=new URLSearchParams(E.search).get("redirect")||((U=(D=E.state)==null?void 0:D.from)==null?void 0:U.pathname)||"/card",M=async H=>{H.preventDefault(),m(""),y(!0);try{if(n==="signup"){if(!c.trim()){m("Please enter your name"),y(!1);return}await oM(t,s,c)}else await aM(t,s);x(P,{replace:!0})}catch(K){console.error("Auth error:",K),K.code==="auth/email-already-in-use"?m("An account with this email already exists"):K.code==="auth/weak-password"?m("Password should be at least 6 characters"):K.code==="auth/invalid-email"?m("Please enter a valid email address"):K.code==="auth/user-not-found"||K.code==="auth/wrong-password"||K.code==="auth/invalid-credential"?m("Invalid email or password"):m("Something went wrong. Please try again.")}y(!1)};return o.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[o.jsx(Ln,{}),o.jsx("section",{style:{flex:1,background:"linear-gradient(180deg, var(--kb-cream) 0%, var(--kb-white) 100%)",padding:"3rem 1rem",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{width:"100%",maxWidth:"420px"},children:[o.jsxs("div",{className:"card",style:{padding:"2rem"},children:[o.jsxs("div",{style:{display:"flex",marginBottom:"2rem",background:"var(--kb-gray-100)",borderRadius:"10px",padding:"4px"},children:[o.jsxs("button",{onClick:()=>{e("login"),m("")},style:{flex:1,padding:"0.75rem",border:"none",borderRadius:"8px",background:n==="login"?"white":"transparent",color:n==="login"?"var(--kb-navy)":"var(--kb-gray-500)",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",boxShadow:n==="login"?"0 1px 3px rgba(0,0,0,0.1)":"none",transition:"all 0.2s"},children:[o.jsx(gl,{size:18})," Sign In"]}),o.jsxs("button",{onClick:()=>{e("signup"),m("")},style:{flex:1,padding:"0.75rem",border:"none",borderRadius:"8px",background:n==="signup"?"white":"transparent",color:n==="signup"?"var(--kb-navy)":"var(--kb-gray-500)",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",boxShadow:n==="signup"?"0 1px 3px rgba(0,0,0,0.1)":"none",transition:"all 0.2s"},children:[o.jsx(Qh,{size:18})," Sign Up"]})]}),o.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[o.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:n==="login"?"Welcome Back":"Join Kinderbucks"}),o.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.95rem"},children:n==="login"?"Sign in to access your account":"Create an account to track your Kinderhooker status"})]}),d&&o.jsxs(pe.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},style:{background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",padding:"0.75rem 1rem",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem",color:"#dc2626",fontSize:"0.9rem"},children:[o.jsx(Us,{size:18}),d]}),o.jsxs("form",{onSubmit:M,children:[n==="signup"&&o.jsxs("div",{style:{marginBottom:"1rem"},children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Your Name"}),o.jsxs("div",{style:{position:"relative"},children:[o.jsx(il,{size:18,color:"var(--kb-gray-400)",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)"}}),o.jsx("input",{type:"text",value:c,onChange:H=>h(H.target.value),placeholder:"Jane Smith",style:{width:"100%",paddingLeft:"40px"},required:n==="signup"})]})]}),o.jsxs("div",{style:{marginBottom:"1rem"},children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Email"}),o.jsxs("div",{style:{position:"relative"},children:[o.jsx(M2,{size:18,color:"var(--kb-gray-400)",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)"}}),o.jsx("input",{type:"email",value:t,onChange:H=>r(H.target.value),placeholder:"you@example.com",style:{width:"100%",paddingLeft:"40px"},required:!0})]})]}),o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Password"}),o.jsxs("div",{style:{position:"relative"},children:[o.jsx(jV,{size:18,color:"var(--kb-gray-400)",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)"}}),o.jsx("input",{type:"password",value:s,onChange:H=>l(H.target.value),placeholder:"",style:{width:"100%",paddingLeft:"40px"},required:!0,minLength:6})]}),n==="signup"&&o.jsx("p",{style:{marginTop:"0.5rem",fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:"At least 6 characters"})]}),o.jsx("button",{type:"submit",className:"btn btn-gold",disabled:g,style:{width:"100%",padding:"0.875rem",fontSize:"1rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:g?o.jsxs(o.Fragment,{children:[o.jsx(f0,{size:20,className:"animate-spin",style:{animation:"spin 1s linear infinite"}}),n==="login"?"Signing in...":"Creating account..."]}):o.jsxs(o.Fragment,{children:[n==="login"?o.jsx(gl,{size:20}):o.jsx(Qh,{size:20}),n==="login"?"Sign In":"Create Account"]})})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",margin:"1.5rem 0",gap:"1rem"},children:[o.jsx("div",{style:{flex:1,height:"1px",background:"var(--kb-gray-200)"}}),o.jsx("span",{style:{color:"var(--kb-gray-400)",fontSize:"0.85rem"},children:"or"}),o.jsx("div",{style:{flex:1,height:"1px",background:"var(--kb-gray-200)"}})]}),o.jsxs("button",{type:"button",onClick:async()=>{m(""),y(!0);try{await lM(),x(P,{replace:!0})}catch(H){console.error("Google sign-in error:",H),H.code==="auth/popup-closed-by-user"?m("Sign-in cancelled"):m("Could not sign in with Google. Please try again.")}y(!1)},disabled:g,style:{width:"100%",padding:"0.75rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",background:"white",border:"1px solid var(--kb-gray-300)",borderRadius:"8px",cursor:"pointer",fontSize:"0.95rem",fontWeight:"500",color:"var(--kb-gray-700)",transition:"all 0.2s"},children:[o.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",children:[o.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),o.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),o.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),o.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),o.jsx("div",{style:{marginTop:"1rem"},children:o.jsx(he,{to:"/profile",style:{display:"block",textAlign:"center",color:"var(--kb-gray-500)",fontSize:"0.85rem",textDecoration:"none"},children:"Continue as guest (limited features)"})})]}),o.jsx("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"rgba(201, 162, 39, 0.1)",borderRadius:"12px",textAlign:"center"},children:o.jsx("p",{style:{color:"var(--kb-gray-700)",fontSize:"0.9rem",margin:0},children:"Create an account to sync your Kinderhooker status across devices and never lose your tier progress!"})})]})}),o.jsx(On,{}),o.jsx("style",{children:`
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
      `})]})}const oB={curious:un,hooked:yr,lineAndSinker:gr,patron:Zn},aB={curious:{primary:"#6b7280",secondary:"#9ca3af",bg:"#f3f4f6"},hooked:{primary:"#16a34a",secondary:"#22c55e",bg:"#dcfce7"},lineAndSinker:{primary:"#2563eb",secondary:"#3b82f6",bg:"#dbeafe"},patron:{primary:"#ca8a04",secondary:"#eab308",bg:"#fef3c7"}};function lB(){var S;const{user:n,profile:e,isAuthenticated:t}=Ur(),[r,s]=j.useState(null),[l,c]=j.useState(!0);j.useEffect(()=>{async function T(){const P=sf(),M=await Nu(P);s(M),c(!1)}T()},[n]);const h=(r==null?void 0:r.tier)||"curious",d=fr[h],m=aB[h],g=oB[h],y=((S=r==null?void 0:r.businessesVisited)==null?void 0:S.length)||0,x=Math.round(d.bonus*100),E=sf(),k=E?`OK-${E.substring(0,6).toUpperCase()}`:"OK-GUEST";return l?o.jsx("div",{style:{minHeight:"100vh",background:"var(--kb-navy)",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx("div",{style:{color:"white",fontSize:"1.5rem"},children:"Loading..."})}):o.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(180deg, var(--kb-navy) 0%, #1a3a5c 100%)",padding:"1rem",display:"flex",flexDirection:"column"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[o.jsxs(he,{to:"/map",style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",color:"white",opacity:.8,textDecoration:"none",fontSize:"1rem"},children:[o.jsx($M,{size:20})," Village Map"]}),o.jsx(he,{to:"/profile",style:{color:"white",opacity:.8,textDecoration:"none",fontSize:"1rem"},children:"My Profile"})]}),o.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsxs(pe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},style:{width:"100%",maxWidth:"380px"},children:[o.jsxs("div",{style:{background:"white",borderRadius:"20px",overflow:"hidden",boxShadow:"0 20px 60px rgba(0,0,0,0.3)",border:"3px solid var(--kb-gold)"},children:[o.jsxs("div",{style:{background:"var(--kb-navy)",padding:"1.25rem 1.5rem",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[o.jsxs("div",{children:[o.jsx("div",{style:{color:"var(--kb-gold)",fontFamily:"var(--font-display)",fontWeight:"700",fontSize:"1.5rem",letterSpacing:"0.02em"},children:"KINDERBUCKS"}),o.jsx("div",{style:{color:"rgba(255,255,255,0.7)",fontSize:"0.8rem",marginTop:"0.1rem"},children:"OK MEMBER CARD"})]}),o.jsx("div",{style:{width:"50px",height:"50px",background:"var(--kb-gold)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--kb-navy)",fontFamily:"var(--font-display)",fontWeight:"700",fontSize:"1.75rem"},children:"K"})]}),o.jsxs("div",{style:{padding:"1.5rem"},children:[o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"600",color:"var(--kb-navy)",marginBottom:"0.25rem"},children:t&&(e!=null&&e.displayName)?e.displayName:"OK Member"}),o.jsx("div",{style:{fontFamily:"monospace",fontSize:"1.1rem",color:"var(--kb-gray-500)",marginBottom:"1.5rem"},children:k}),o.jsxs("div",{style:{background:`linear-gradient(135deg, ${m.primary} 0%, ${m.secondary} 100%)`,borderRadius:"16px",padding:"1.5rem",textAlign:"center",color:"white",marginBottom:"1.5rem"},children:[o.jsx(g,{size:40,strokeWidth:1.5,style:{marginBottom:"0.5rem"}}),o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",textTransform:"uppercase",marginBottom:"0.25rem"},children:d.name}),o.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"800",lineHeight:1},children:[x,"%"]}),o.jsx("div",{style:{fontSize:"1rem",opacity:.9,marginTop:"0.25rem"},children:"Exchange Bonus"})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"2rem",padding:"1rem 0",borderTop:"1px solid var(--kb-gray-200)",borderBottom:"1px solid var(--kb-gray-200)",marginBottom:"1.5rem"},children:[o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:y}),o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Businesses"})]}),o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:(r==null?void 0:r.totalCheckins)||0}),o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Check-ins"})]})]}),o.jsxs("div",{style:{background:"var(--kb-cream)",borderRadius:"12px",padding:"1rem",textAlign:"center"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"0.5rem",color:"var(--kb-navy)",fontWeight:"600"},children:[o.jsx(Vr,{size:20}),"How to use"]}),o.jsxs("p",{style:{fontSize:"0.95rem",color:"var(--kb-gray-600)",margin:0,lineHeight:1.5},children:["Scan the business QR code",o.jsx("br",{}),"to check in and get your discount code"]})]})]}),o.jsx("div",{style:{background:"var(--kb-cream)",padding:"0.75rem 1.5rem",textAlign:"center",borderTop:"1px solid var(--kb-gray-200)"},children:o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:"Village of Kinderhook  Est. 2026"})})]}),o.jsxs(he,{to:"/businesses",className:"btn btn-gold",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",width:"100%",marginTop:"1.5rem",padding:"1rem",fontSize:"1.1rem"},children:[o.jsx(Vr,{size:22}),"Find a Business to Check In"]})]})})]})}const Du="kinderbucks",cB="scans";async function BT(n){const e=tt(Ee,Du,n),t=await zr(e);return t.exists()?{serial:t.id,...t.data()}:null}async function zT(){const n=bn(ut(Ee,Du),Xi("serial"));return(await Dt(n)).docs.map(t=>({serial:t.id,...t.data()}))}async function uB(n,e){const t=n.map(r=>Rl(tt(Ee,Du,r),{serial:r,denomination:e,status:"draft",scanCount:0,createdAt:Je()}));await Promise.all(t)}async function dB(n,e,t=null){const r=tt(Ee,Du,n),s={status:e,issuedAt:Je(),...t&&{issuedTo:t}};await Wt(r,s)}async function hB(n){const e=tt(Ee,Du,n);await Wt(e,{scanCount:Qo(1),lastScanned:Je(),status:"active"}),await Nf(ut(Ee,cB),{serial:n,scannedAt:Je(),userAgent:navigator.userAgent||null})}async function fB(n){const e=await BT(n);return e?e.status!=="active"?{valid:!1,error:`Kinderbuck status is "${e.status}" - must be "active"`}:e.currentHolder&&e.holderType==="business"?{valid:!1,error:"Kinderbuck is already held by a business"}:{valid:!0,kb:e}:{valid:!1,error:"Kinderbuck not found"}}function FT(){const[n,e]=j.useState([]);return j.useEffect(()=>{const t=["#2d5a27","#c9a227","#4a7c43","#d4af37","#5c4033"],r=Array.from({length:50},(s,l)=>({id:l,x:Math.random()*100,color:t[Math.floor(Math.random()*t.length)],delay:Math.random()*.5,duration:2+Math.random()*2,size:8+Math.random()*8}));e(r)},[]),o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,pointerEvents:"none",overflow:"hidden",zIndex:100},children:n.map(t=>o.jsx(pe.div,{initial:{y:-20,x:`${t.x}vw`,opacity:1,rotate:0},animate:{y:"110vh",rotate:360*(Math.random()>.5?1:-1),opacity:[1,1,0]},transition:{duration:t.duration,delay:t.delay,ease:"linear"},style:{position:"absolute",width:t.size,height:t.size,background:t.color,borderRadius:Math.random()>.5?"50%":"2px"}},t.id))})}const kk={1:{bg:"#d4edda",text:"#155724"},5:{bg:"#cce5ff",text:"#004085"},10:{bg:"#e2d5e7",text:"#4a235a"},20:{bg:"#fff3cd",text:"#856404"}};function mB({kinderbuck:n}){const e=kk[n.denomination]||kk[5];return o.jsxs(pe.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",duration:.5},className:"card",style:{textAlign:"center",maxWidth:"400px",background:e.bg},children:[o.jsxs(pe.div,{initial:{y:-20},animate:{y:0},transition:{delay:.2},children:[o.jsxs("h1",{style:{color:e.text,fontSize:"3rem",marginBottom:"0.5rem"},children:["$",n.denomination]}),o.jsx("p",{style:{fontFamily:"monospace",fontSize:"1.5rem",color:e.text},children:n.serial})]}),o.jsx(pe.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},style:{marginTop:"1.5rem"},children:o.jsx("div",{style:{display:"inline-block",padding:"0.5rem 1rem",background:"rgba(255,255,255,0.7)",borderRadius:"20px",color:"var(--kb-green)",fontWeight:"bold"},children:"VERIFIED AUTHENTIC"})}),o.jsxs(pe.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},style:{marginTop:"1.5rem",fontSize:"0.9rem",opacity:.8},children:[o.jsxs("p",{children:["Status: ",o.jsx("strong",{children:n.status})]}),n.issuedAt&&o.jsxs("p",{children:["Issued: ",new Date(n.issuedAt.seconds*1e3).toLocaleDateString()]}),o.jsxs("p",{children:["Scans: ",n.scanCount||1]})]}),o.jsx(pe.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.8,type:"spring"},style:{marginTop:"1.5rem"},children:o.jsx("iframe",{src:"https://giphy.com/embed/B1txHfofr9y08bDB8b",width:"200",height:"200",frameBorder:"0",style:{borderRadius:"12px",pointerEvents:"none"},allowFullScreen:!0})})]})}function pB(){const{serial:n}=uy(),[e,t]=j.useState(null),[r,s]=j.useState(!0),[l,c]=j.useState(null);return j.useEffect(()=>{async function h(){try{const d=await BT(n);d?(t(d),await hB(n)):c("not_found")}catch(d){console.error("Verification error:",d),c("error")}finally{s(!1)}}h()},[n]),r?o.jsxs("div",{className:"page page-center",children:[o.jsx(pe.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},style:{fontSize:"3rem"},children:"$"}),o.jsxs("p",{style:{marginTop:"1rem"},children:["Verifying ",n,"..."]})]}):l==="not_found"?o.jsxs("div",{className:"page page-center",children:[o.jsx("h1",{style:{color:"#c0392b"},children:"Not Found"}),o.jsxs("p",{children:["Serial ",o.jsx("strong",{children:n})," is not a valid Kinderbuck."]})]}):l?o.jsxs("div",{className:"page page-center",children:[o.jsx("h1",{style:{color:"#c0392b"},children:"Error"}),o.jsx("p",{children:"Something went wrong verifying this Kinderbuck."})]}):o.jsxs("div",{className:"page page-center",children:[o.jsx(FT,{}),o.jsx(mB,{kinderbuck:e})]})}const Ff="checkins",gB=3600*1e3;async function yB(n,e){var t;try{const r=new Date(Date.now()-gB),s=bn(ut(Ee,Ff),Bn("visitorId","==",n),Bn("businessCode","==",e)),l=await Dt(s);if(l.empty)return!1;for(const c of l.docs)if((((t=c.data().timestamp)==null?void 0:t.toDate())||new Date(0))>r)return!0;return!1}catch(r){return console.error("hasRecentCheckin error (allowing checkin):",r),!1}}async function vB(n,e,t){await Nf(ut(Ee,Ff),{visitorId:n,businessCode:e,timestamp:Je(),kinderbucksMatched:!1,boostApplied:0,memberTier:t||"curious"})}async function UT(n){try{const e=bn(ut(Ee,Ff),Bn("businessCode","==",n));return(await Dt(e)).docs.map(s=>({id:s.id,...s.data()})).sort((s,l)=>{var d,m,g,y;const c=((m=(d=s.timestamp)==null?void 0:d.toDate)==null?void 0:m.call(d))||new Date(0);return(((y=(g=l.timestamp)==null?void 0:g.toDate)==null?void 0:y.call(g))||new Date(0))-c}).slice(0,100)}catch(e){return console.error("getCheckinsByBusiness error:",e),[]}}async function xB(){try{return(await Dt(ut(Ee,Ff))).docs.map(e=>({id:e.id,...e.data()}))}catch(n){return console.error("getAllCheckins error:",n),[]}}const wB={curious:un,hooked:yr,lineAndSinker:gr,patron:Zn},bB={curious:"#6b7280",hooked:"#16a34a",lineAndSinker:"#2563eb",patron:"#ca8a04"};function kB(n,e){const t=new Date,r=t.getHours().toString().padStart(2,"0")+t.getMinutes().toString().padStart(2,"0"),s=e.substring(0,4).toUpperCase();return`${n.substring(0,3).toUpperCase()}-${s}-${r}`}function _B(){const{businessCode:n}=uy(),{isAuthenticated:e}=Ur(),[t,r]=j.useState(null),[s,l]=j.useState(!0),[c,h]=j.useState(null),[d,m]=j.useState(null),[g,y]=j.useState(!1),[x,E]=j.useState(!1),[k,S]=j.useState("");if(j.useEffect(()=>{async function K(){try{const A=await Pu(n);if(!A){h("not_found"),l(!1);return}if(!A.isActive){h("inactive"),l(!1);return}if(r(A),!e){l(!1);return}const C=sf();if(S(kB(n,C)),await yB(C,n)){y(!0);const B=await Nu(C);B&&m({tierChanged:!1,newTier:B.tier,businessesVisited:B.businessesVisited||[],totalCheckins:B.totalCheckins||0,isNewBusiness:!1}),l(!1);return}const L=await eB(C,n);await vB(C,n,L.newTier),await Q9(n),m(L),L.tierChanged&&L.newTier&&E(!0),l(!1)}catch(A){console.error("Check-in error:",A),h("error"),l(!1)}}K()},[n,e]),s)return o.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"linear-gradient(180deg, var(--kb-navy) 0%, #1a3a5c 100%)",padding:"2rem"},children:[o.jsx(pe.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:o.jsx(f0,{size:64,color:"var(--kb-gold)"})}),o.jsx("p",{style:{marginTop:"1.5rem",color:"white",fontSize:"1.25rem"},children:"Checking in..."})]});if(c==="not_found")return o.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#fef2f2",padding:"2rem",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:"?"}),o.jsx("h1",{style:{color:"#dc2626",fontSize:"1.75rem",marginBottom:"0.75rem"},children:"Business Not Found"}),o.jsx("p",{style:{color:"#7f1d1d",fontSize:"1.1rem",marginBottom:"2rem"},children:"This QR code doesn't match any participating business."}),o.jsx(he,{to:"/",className:"btn btn-primary",style:{fontSize:"1.1rem",padding:"1rem 2rem"},children:"Go Home"})]});if(c==="inactive")return o.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#fffbeb",padding:"2rem",textAlign:"center"},children:[o.jsx("h1",{style:{color:"#d97706",fontSize:"1.75rem",marginBottom:"0.75rem"},children:"Business Not Active"}),o.jsx("p",{style:{color:"#92400e",fontSize:"1.1rem",marginBottom:"2rem"},children:"This business is not currently participating."}),o.jsx(he,{to:"/",className:"btn btn-primary",style:{fontSize:"1.1rem",padding:"1rem 2rem"},children:"Go Home"})]});if(c)return o.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#fef2f2",padding:"2rem",textAlign:"center"},children:[o.jsx("h1",{style:{color:"#dc2626",fontSize:"1.75rem",marginBottom:"0.75rem"},children:"Something went wrong"}),o.jsx("p",{style:{color:"#7f1d1d",fontSize:"1.1rem",marginBottom:"2rem"},children:"Please try scanning again."}),o.jsx(he,{to:"/",className:"btn btn-primary",style:{fontSize:"1.1rem",padding:"1rem 2rem"},children:"Go Home"})]});const T=(d==null?void 0:d.newTier)||"curious",P=fr[T],M=bB[T],D=wB[T],U=Math.round(P.bonus*100),H=e?g?"#6b7280":M:"var(--kb-navy)";return o.jsxs("div",{style:{minHeight:"100vh",background:`linear-gradient(180deg, ${H} 0%, ${H}dd 100%)`,padding:"1.5rem",display:"flex",flexDirection:"column"},children:[x&&o.jsx(FT,{}),o.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",maxWidth:"400px",margin:"0 auto",width:"100%"},children:[g?o.jsxs(pe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},style:{textAlign:"center",color:"white"},children:[o.jsx(dr,{size:80,strokeWidth:1.5,style:{marginBottom:"1rem",opacity:.8}}),o.jsx("h1",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"Already Checked In"}),o.jsxs("p",{style:{fontSize:"1.25rem",opacity:.9,marginBottom:"2rem"},children:["at ",t.name]}),o.jsxs("p",{style:{fontSize:"1.1rem",opacity:.8},children:["Come back in about an hour",o.jsx("br",{}),"for another check-in!"]})]}):e?o.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{width:"100%"},children:[o.jsxs("div",{style:{textAlign:"center",color:"white",marginBottom:"1.5rem"},children:[o.jsx(pe.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.2},children:o.jsx("div",{style:{width:"80px",height:"80px",background:"rgba(255,255,255,0.2)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:o.jsx(Li,{size:48,strokeWidth:2.5})})}),o.jsx("h1",{style:{fontSize:"1.75rem",marginBottom:"0.25rem"},children:"Checked In!"}),o.jsx("p",{style:{fontSize:"1.25rem",opacity:.9},children:t.name})]}),o.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},style:{background:"white",borderRadius:"24px",padding:"2rem",textAlign:"center",boxShadow:"0 10px 40px rgba(0,0,0,0.2)"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"1rem"},children:[o.jsx(D,{size:28,color:M}),o.jsx("span",{style:{fontSize:"1.25rem",fontWeight:"700",color:M,textTransform:"uppercase"},children:P.name})]}),o.jsxs("div",{style:{background:`${M}15`,borderRadius:"16px",padding:"1.5rem",marginBottom:"1.5rem"},children:[o.jsxs("div",{style:{fontSize:"4rem",fontWeight:"800",color:M,lineHeight:1},children:[U,"%"]}),o.jsx("div",{style:{fontSize:"1.1rem",color:"var(--kb-gray-600)",marginTop:"0.25rem"},children:"Exchange Bonus"})]}),o.jsxs("div",{style:{background:"var(--kb-navy)",borderRadius:"12px",padding:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[o.jsx(B2,{size:18,color:"var(--kb-gold)"}),o.jsx("span",{style:{color:"var(--kb-gold)",fontSize:"0.85rem",fontWeight:"600"},children:"VERIFICATION CODE"})]}),o.jsx("div",{style:{fontFamily:"monospace",fontSize:"1.75rem",fontWeight:"700",color:"white",letterSpacing:"0.1em"},children:k})]}),o.jsxs("p",{style:{fontSize:"1.1rem",color:"var(--kb-gray-600)",lineHeight:1.5},children:["Show this screen to the cashier",o.jsx("br",{}),"to receive your ",o.jsxs("strong",{children:[U,"% bonus"]})]})]}),(d==null?void 0:d.tierChanged)&&o.jsxs(pe.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},style:{marginTop:"1.5rem",padding:"1rem",background:"rgba(255,255,255,0.15)",borderRadius:"12px",textAlign:"center",color:"white"},children:[o.jsx("span",{style:{fontSize:"1.25rem"},children:""}),o.jsxs("span",{style:{marginLeft:"0.5rem",fontWeight:"600"},children:["You just leveled up to ",P.name,"!"]})]})]}):o.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{width:"100%"},children:[o.jsxs("div",{style:{textAlign:"center",color:"white",marginBottom:"1.5rem"},children:[o.jsx(pe.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.2},children:o.jsx("div",{style:{width:"80px",height:"80px",background:"rgba(255,255,255,0.2)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:o.jsx(Qh,{size:40,strokeWidth:1.5})})}),o.jsxs("h1",{style:{fontSize:"1.75rem",marginBottom:"0.25rem"},children:["Welcome to ",t.name,"!"]}),o.jsx("p",{style:{fontSize:"1.1rem",opacity:.9},children:"Sign in to complete your check-in and unlock your discount"})]}),o.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},style:{background:"white",borderRadius:"24px",padding:"2rem",textAlign:"center",boxShadow:"0 10px 40px rgba(0,0,0,0.2)"},children:[o.jsx("div",{style:{width:"60px",height:"60px",background:"var(--kb-gold)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.25rem"},children:o.jsx(D2,{size:28,color:"var(--kb-navy)"})}),o.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem",fontSize:"1.5rem"},children:"Your Discount is Waiting!"}),o.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"1rem",marginBottom:"1.5rem",lineHeight:1.5},children:"Create a free OK Member account to unlock your exclusive bonus discount."}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",marginBottom:"1.5rem",textAlign:"left",background:"var(--kb-cream)",borderRadius:"12px",padding:"1rem 1.25rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"0.95rem",color:"var(--kb-gray-700)"},children:[o.jsx("div",{style:{width:"24px",height:"24px",background:"var(--kb-green)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(Li,{size:14,color:"white"})}),"Unlock your discount code"]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"0.95rem",color:"var(--kb-gray-700)"},children:[o.jsx("div",{style:{width:"24px",height:"24px",background:"var(--kb-green)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(Li,{size:14,color:"white"})}),"Track your tier progress"]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"0.95rem",color:"var(--kb-gray-700)"},children:[o.jsx("div",{style:{width:"24px",height:"24px",background:"var(--kb-green)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(Li,{size:14,color:"white"})}),"Get your digital OK Member Card"]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"0.95rem",color:"var(--kb-gray-700)"},children:[o.jsx("div",{style:{width:"24px",height:"24px",background:"var(--kb-green)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(Li,{size:14,color:"white"})}),"Earn higher bonuses as you level up"]})]}),o.jsxs(he,{to:`/login?redirect=/checkin/${n}`,className:"btn btn-gold",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",padding:"1rem",fontSize:"1.15rem",marginBottom:"0.75rem"},children:[o.jsx(Qh,{size:22}),"Sign Up Free"]}),o.jsxs("p",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:["Already have an account? ",o.jsx(he,{to:`/login?redirect=/checkin/${n}`,style:{color:"var(--kb-navy)",fontWeight:"600"},children:"Sign In"})]})]})]}),o.jsxs(pe.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},style:{marginTop:"2rem",display:"flex",gap:"0.75rem"},children:[o.jsx(he,{to:"/profile",className:"btn",style:{background:"rgba(255,255,255,0.2)",color:"white",padding:"0.875rem 1.5rem",fontSize:"1rem"},children:"My Profile"}),o.jsx(he,{to:"/",className:"btn",style:{background:"white",color:"var(--kb-navy)",padding:"0.875rem 1.5rem",fontSize:"1rem"},children:"Home"})]})]})]})}const Uf="promoCodes";async function uh(n){const e=bn(ut(Ee,Uf),Bn("businessCode","==",n),Xi("createdAt","desc"));return(await Dt(e)).docs.map(r=>({id:r.id,...r.data()}))}async function SB({businessCode:n,code:e,description:t,discountType:r,discountValue:s,minTier:l,expiresAt:c,usageLimit:h}){const d=`${n}-${e.toUpperCase()}`;return await Rl(tt(Ee,Uf,d),{businessCode:n,code:e.toUpperCase(),description:t,discountType:r,discountValue:s,minTier:l||null,expiresAt:c||null,usageLimit:h||null,usageCount:0,isActive:!0,createdAt:Je()}),d}async function EB(n,e){const t=tt(Ee,Uf,n);await Wt(t,{isActive:e})}async function TB(n){await eM(tt(Ee,Uf,n))}const Mu="transactions";async function IB(n,e,t){const r=b2(Ee),s=tt(Ee,"kinderbucks",n),l=await zr(s);if(!l.exists())throw new Error("Kinderbuck not found");const h=l.data().denomination;r.update(s,{currentHolder:e,holderType:"business",lastTransferAt:Je()});const d=tt(Ee,"businesses",e);r.update(d,{kinderbucksBalance:Qo(h),lifetimeAccepted:Qo(h)});const m=tt(ut(Ee,Mu));return r.set(m,{type:"payment",kinderbuckSerial:n,denomination:h,businessCode:e,businessName:t,amount:h,status:"completed",createdAt:Je()}),await r.commit(),{serial:n,amount:h,businessCode:e}}async function CB(n,e=50){const t=bn(ut(Ee,Mu),Bn("businessCode","==",n),Xi("createdAt","desc"));return(await Dt(t)).docs.slice(0,e).map(s=>({id:s.id,...s.data()}))}async function jB(n,e,t){return{id:(await Nf(ut(Ee,Mu),{type:"redemption",businessCode:n,businessName:e,amount:t,status:"pending",createdAt:Je()})).id,amount:t,businessCode:n}}async function AB(n,e,t){const r=tt(Ee,Mu,n),s=await zr(r);if(!s.exists())throw new Error("Transaction not found");const l=s.data();if(l.status!=="pending")throw new Error("Transaction already processed");const c=b2(Ee);if(c.update(r,{status:e?"approved":"rejected",processedBy:t,processedAt:Je()}),e){const h=tt(Ee,"businesses",l.businessCode);c.update(h,{kinderbucksBalance:Qo(-l.amount),lifetimeRedeemed:Qo(l.amount)});const d=bn(ut(Ee,"kinderbucks"),Bn("currentHolder","==",l.businessCode),Bn("status","==","active")),m=await Dt(d);let g=l.amount;const y=[];for(const x of m.docs){if(g<=0)break;const E=x.data();c.update(x.ref,{status:"redeemed",redeemedAt:Je(),redeemedInTransaction:n}),g-=E.denomination,y.push(x.id)}c.update(r,{redeemedSerials:y})}return await c.commit(),{txnId:n,approved:e,status:e?"approved":"rejected"}}async function RB(){const n=bn(ut(Ee,Mu),Bn("type","==","redemption"),Xi("createdAt","desc"));return(await Dt(n)).docs.map(t=>({id:t.id,...t.data()}))}function PB({isOpen:n,onClose:e,businessCode:t,businessName:r,currentBalance:s,onSuccess:l}){const[c,h]=j.useState(""),[d,m]=j.useState(!1),[g,y]=j.useState(""),[x,E]=j.useState(!1),k=async T=>{T.preventDefault(),y("");const P=parseFloat(c);if(!P||P<=0){y("Please enter a valid amount");return}if(P>s){y(`Amount exceeds your balance of $${s}`);return}m(!0);try{await jB(t,r,P),E(!0),setTimeout(()=>{l==null||l(),e(),E(!1),h("")},2e3)}catch(M){console.error("Error creating redemption:",M),y("Failed to create redemption request")}m(!1)},S=()=>{d||(h(""),y(""),E(!1),e())};return n?o.jsx(q0,{children:o.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},onClick:S,children:o.jsxs(pe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"card",style:{maxWidth:"400px",width:"100%",padding:0,overflow:"hidden"},onClick:T=>T.stopPropagation(),children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1.25rem 1.5rem",borderBottom:"1px solid var(--kb-gray-200)",background:"var(--kb-gray-50)"},children:[o.jsxs("h3",{style:{margin:0,color:"var(--kb-navy)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Kh,{size:20}),"Request Redemption"]}),o.jsx("button",{onClick:S,style:{background:"none",border:"none",cursor:"pointer",padding:"0.25rem",color:"var(--kb-gray-500)"},children:o.jsx(g0,{size:20})})]}),o.jsx("div",{style:{padding:"1.5rem"},children:x?o.jsxs("div",{style:{textAlign:"center",padding:"2rem 0"},children:[o.jsx("div",{style:{width:"64px",height:"64px",background:"rgba(39, 174, 96, 0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:o.jsx(Vn,{size:32,color:"var(--kb-green)"})}),o.jsx("h4",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"Request Submitted"}),o.jsxs("p",{style:{color:"var(--kb-gray-600)",margin:0},children:["Your redemption request for $",c," has been submitted for admin approval."]})]}):o.jsxs("form",{onSubmit:k,children:[o.jsxs("div",{style:{background:"linear-gradient(135deg, var(--kb-gold) 0%, var(--kb-gold-dark) 100%)",borderRadius:"12px",padding:"1.25rem",marginBottom:"1.5rem",color:"white",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.85rem",opacity:.9,marginBottom:"0.25rem"},children:"Available Balance"}),o.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700"},children:["$",s.toFixed(2)]})]}),o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Amount to Redeem (USD)"}),o.jsxs("div",{style:{position:"relative"},children:[o.jsx("span",{style:{position:"absolute",left:"1rem",top:"50%",transform:"translateY(-50%)",color:"var(--kb-gray-500)",fontWeight:"500"},children:"$"}),o.jsx("input",{type:"number",value:c,onChange:T=>h(T.target.value),placeholder:"0.00",min:"1",max:s,step:"0.01",style:{width:"100%",paddingLeft:"2rem",fontSize:"1.25rem",fontWeight:"500"},required:!0})]}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.75rem",flexWrap:"wrap"},children:[[25,50,100].map(T=>s>=T&&o.jsxs("button",{type:"button",onClick:()=>h(T.toString()),className:"btn btn-secondary",style:{padding:"0.4rem 0.75rem",fontSize:"0.85rem"},children:["$",T]},T)),o.jsx("button",{type:"button",onClick:()=>h(s.toString()),className:"btn btn-secondary",style:{padding:"0.4rem 0.75rem",fontSize:"0.85rem"},children:"Max"})]})]}),g&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",background:"#fef2f2",borderRadius:"8px",color:"#dc2626",marginBottom:"1rem",fontSize:"0.9rem"},children:[o.jsx(Us,{size:18}),g]}),o.jsxs("div",{style:{padding:"1rem",background:"var(--kb-gray-50)",borderRadius:"8px",marginBottom:"1.5rem",fontSize:"0.85rem",color:"var(--kb-gray-600)"},children:[o.jsx("strong",{children:"How it works:"})," Your request will be reviewed by an administrator. Once approved, you'll receive USD equivalent and the corresponding Kinderbucks bills will be marked as redeemed."]}),o.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[o.jsx("button",{type:"button",onClick:S,className:"btn btn-secondary",style:{flex:1},disabled:d,children:"Cancel"}),o.jsx("button",{type:"submit",className:"btn btn-primary",style:{flex:1},disabled:d||!c,children:d?"Submitting...":"Submit Request"})]})]})})]})})}):null}function NB(){const{profile:n}=Ur(),e=Js(),[t,r]=j.useState(null),[s,l]=j.useState([]),[c,h]=j.useState([]),[d,m]=j.useState([]),[g,y]=j.useState([]),[x,E]=j.useState([]),[k,S]=j.useState(!0),[T,P]=j.useState("overview"),[M,D]=j.useState(!1),[U,H]=j.useState(!1),[K,A]=j.useState(!1),[C,N]=j.useState(!1),[L,B]=j.useState(null),[F,V]=j.useState({code:"",description:"",discountType:"percent",discountValue:10,minTier:"",expiresAt:"",usageLimit:""}),[Me,We]=j.useState(!1),st=async()=>{if(!(n!=null&&n.businessCode)){S(!1);return}try{const[Z,ye,Le,Ue,ot,Qt]=await Promise.all([X9(n.businessCode),UT(n.businessCode),uh(n.businessCode).catch(()=>[]),gi(),xB(),CB(n.businessCode).catch(()=>[])]);r(Z),l(ye),h(Le),m(Ue.filter(Wr=>Wr.isActive)),y(ot),E(Qt)}catch(Z){console.error("Error loading business data:",Z)}S(!1)};j.useEffect(()=>{st()},[n==null?void 0:n.businessCode]);const Ie=()=>{const Z=`https://harmonicsystems.github.io/kinderbucks/#/checkin/${n.businessCode}`;navigator.clipboard.writeText(Z),H(!0),setTimeout(()=>H(!1),2e3)};s.filter(Z=>{var Ue;const ye=(Ue=Z.timestamp)!=null&&Ue.toDate?Z.timestamp.toDate():new Date(Z.timestamp),Le=new Date;return ye.toDateString()===Le.toDateString()}).length;const re=s.filter(Z=>{var Ue;const ye=(Ue=Z.timestamp)!=null&&Ue.toDate?Z.timestamp.toDate():new Date(Z.timestamp),Le=new Date;return Le.setDate(Le.getDate()-7),ye>Le}).length,me=s.filter(Z=>{var ot;const ye=(ot=Z.timestamp)!=null&&ot.toDate?Z.timestamp.toDate():new Date(Z.timestamp),Le=new Date,Ue=new Date;return Le.setDate(Le.getDate()-7),Ue.setDate(Ue.getDate()-14),ye>Ue&&ye<=Le}).length,ue=me>0?Math.round((re-me)/me*100):re>0?100:0,$=new Set(s.map(Z=>Z.visitorId)).size,te=g.length,je=g.filter(Z=>{var Ue;const ye=(Ue=Z.timestamp)!=null&&Ue.toDate?Z.timestamp.toDate():new Date(Z.timestamp),Le=new Date;return Le.setDate(Le.getDate()-7),ye>Le}).length,Ce=d.sort((Z,ye)=>(ye.checkinCount||0)-(Z.checkinCount||0)).slice(0,5),Ve=d.sort((Z,ye)=>(ye.checkinCount||0)-(Z.checkinCount||0)).findIndex(Z=>Z.code===(n==null?void 0:n.businessCode))+1,Be=async Z=>{if(Z.preventDefault(),!(!F.code||!F.description)){We(!0);try{await SB({businessCode:n.businessCode,code:F.code,description:F.description,discountType:F.discountType,discountValue:Number(F.discountValue),minTier:F.minTier||null,expiresAt:F.expiresAt?new Date(F.expiresAt):null,usageLimit:F.usageLimit?Number(F.usageLimit):null});const ye=await uh(n.businessCode);h(ye),V({code:"",description:"",discountType:"percent",discountValue:10,minTier:"",expiresAt:"",usageLimit:""}),A(!1)}catch(ye){console.error("Error creating promo:",ye),alert("Error creating promo code")}We(!1)}},se=async(Z,ye)=>{await EB(Z,!ye);const Le=await uh(n.businessCode);h(Le)},Q=async Z=>{if(!confirm("Delete this promo code?"))return;await TB(Z);const ye=await uh(n.businessCode);h(ye)};if(k)return o.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[o.jsx(Ln,{}),o.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",background:"var(--kb-cream)"},children:o.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading..."})}),o.jsx(On,{})]});if(!(n!=null&&n.businessCode))return o.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[o.jsx(Ln,{}),o.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",background:"var(--kb-cream)",padding:"2rem"},children:o.jsxs("div",{className:"card",style:{maxWidth:"400px",textAlign:"center",padding:"2rem"},children:[o.jsx(Mt,{size:48,color:"var(--kb-gray-400)",style:{marginBottom:"1rem"}}),o.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"No Business Assigned"}),o.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem"},children:"Your account doesn't have a business assigned yet. Contact an administrator to get set up."}),o.jsx(he,{to:"/",className:"btn btn-primary",children:"Go Home"})]})}),o.jsx(On,{})]});const fe=`https://harmonicsystems.github.io/kinderbucks/#/checkin/${n.businessCode}`,Ke=[{key:"overview",label:"Overview",icon:d0},{key:"kinderbucks",label:"Kinderbucks",icon:Wi},{key:"qrcode",label:"QR Code",icon:Vr},{key:"promos",label:"Promo Codes",icon:Ac},{key:"trends",label:"Village Trends",icon:Qs},{key:"guide",label:"Resource Guide",icon:Xw}],xt=[{id:"qr-setup",title:"Setting Up Your QR Code",icon:Vr,content:["Print your unique QR code and display it prominently at your counter or entrance","Use a stand or frame to keep it visible and accessible for customers","Consider printing multiple codes for different checkout areas","Test the code regularly to ensure it scans correctly"]},{id:"customer-flow",title:"Customer Check-in Flow",icon:Ng,content:["Customers scan the QR code with their phone camera","They're taken to your check-in page (no app download needed)","If signed in, they earn a check-in toward their Kinderhooker status","Their tier badge appears so you can offer appropriate discounts"]},{id:"tier-discounts",title:"Member Tier Discounts",icon:gr,content:["Curious (0-4 check-ins): New to Kinderhook - welcome them warmly!","Hooked (5-14 check-ins): Regular visitors - consider small perks","Line & Sinker (15-29 check-ins): Loyal customers - offer meaningful discounts","Village Patron (30+ check-ins): Your best customers - VIP treatment!"]},{id:"promo-tips",title:"Creating Effective Promos",icon:Ac,content:["Create tier-specific promos to reward loyalty","Set expiration dates to create urgency","Use memorable, easy-to-type codes","Track usage to see what resonates with customers"]}];return o.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[o.jsx(Ln,{}),o.jsx("main",{style:{flex:1,background:"var(--kb-cream)",padding:"2rem 1rem"},children:o.jsxs("div",{style:{maxWidth:"1100px",margin:"0 auto"},children:[o.jsx(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{marginBottom:"1.5rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"1rem"},children:[o.jsxs("div",{children:[o.jsx("div",{className:"badge badge-gold",style:{marginBottom:"0.5rem"},children:"Business Resource Center"}),o.jsx("h1",{style:{color:"var(--kb-navy)",marginBottom:"0.25rem"},children:(t==null?void 0:t.name)||n.businessCode}),o.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"Manage check-ins, promos, and see village trends"})]}),Ve>0&&o.jsxs("div",{style:{background:"linear-gradient(135deg, var(--kb-gold) 0%, var(--kb-gold-dark) 100%)",color:"white",padding:"0.75rem 1.25rem",borderRadius:"12px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",opacity:.9},children:"Village Rank"}),o.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700"},children:["#",Ve]})]})]})}),o.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem",overflowX:"auto",paddingBottom:"0.5rem"},children:Ke.map(Z=>{const ye=Z.icon;return o.jsxs("button",{onClick:()=>P(Z.key),className:"btn",style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.6rem 1rem",background:T===Z.key?"var(--kb-navy)":"white",color:T===Z.key?"white":"var(--kb-gray-600)",border:"1px solid var(--kb-gray-200)",whiteSpace:"nowrap"},children:[o.jsx(ye,{size:16}),Z.label]},Z.key)})}),T==="overview"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[o.jsx(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card",style:{padding:"1.25rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(39, 174, 96, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(Qs,{size:22,color:"var(--kb-green)"})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:(t==null?void 0:t.checkinCount)||0}),o.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Total Check-ins"})]})]})}),o.jsx(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card",style:{padding:"1.25rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(52, 152, 219, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(Mf,{size:22,color:"#3498db"})}),o.jsxs("div",{children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx("span",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:re}),ue!==0&&o.jsxs("span",{style:{fontSize:"0.75rem",padding:"0.15rem 0.4rem",borderRadius:"4px",background:ue>0?"rgba(39, 174, 96, 0.1)":"rgba(231, 76, 60, 0.1)",color:ue>0?"var(--kb-green)":"#e74c3c"},children:[ue>0?"+":"",ue,"%"]})]}),o.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"This Week"})]})]})}),o.jsx(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"card",style:{padding:"1.25rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(201, 162, 39, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(Or,{size:22,color:"var(--kb-gold-dark)"})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:$}),o.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Unique Visitors"})]})]})}),o.jsx(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"card",style:{padding:"1.25rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(155, 89, 182, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(Ac,{size:22,color:"#9b59b6"})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:c.filter(Z=>Z.isActive).length}),o.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Active Promos"})]})]})})]}),o.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"card",children:[o.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(dr,{size:20})," Recent Check-ins"]}),s.length===0?o.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[o.jsx(Or,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),o.jsx("p",{children:"No check-ins yet"}),o.jsx("p",{style:{fontSize:"0.9rem"},children:"Display your QR code to start receiving check-ins!"}),o.jsx("button",{onClick:()=>P("qrcode"),className:"btn btn-gold",style:{marginTop:"1rem"},children:"View QR Code"})]}):o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:s.slice(0,10).map((Z,ye)=>{var ot;const Le=(ot=Z.timestamp)!=null&&ot.toDate?Z.timestamp.toDate():new Date(Z.timestamp),Ue={"Village Patron":"#9b59b6","Line & Sinker":"#c9a227",Hooked:"#27ae60",Curious:"#3498db"};return o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"var(--kb-gray-50)",borderRadius:"8px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("div",{style:{width:"36px",height:"36px",background:"var(--kb-green)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(Vn,{size:18,color:"white"})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:"Check-in recorded"}),Z.tier&&o.jsx("span",{style:{fontSize:"0.75rem",padding:"0.1rem 0.5rem",borderRadius:"4px",background:`${Ue[Z.tier]||"#95a5a6"}20`,color:Ue[Z.tier]||"#95a5a6",fontWeight:"500"},children:Z.tier})]})]}),o.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:Le.toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]},Z.id||ye)})})]})]}),T==="kinderbucks"&&o.jsxs(o.Fragment,{children:[o.jsx(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",style:{marginBottom:"1.5rem",background:"linear-gradient(135deg, var(--kb-gold) 0%, var(--kb-gold-dark) 100%)",color:"white",padding:"2rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"1.5rem"},children:[o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.9rem",opacity:.9,marginBottom:"0.25rem"},children:"Current Kinderbucks Balance"}),o.jsxs("div",{style:{fontSize:"3rem",fontWeight:"700",lineHeight:1},children:["$",((t==null?void 0:t.kinderbucksBalance)||0).toFixed(2)]}),o.jsx("div",{style:{fontSize:"0.85rem",opacity:.8,marginTop:"0.5rem"},children:"Available for redemption to USD"})]}),o.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[o.jsxs("button",{onClick:()=>e("/business/accept-payment"),className:"btn",style:{background:"rgba(255,255,255,0.2)",color:"white",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(vl,{size:18}),"Accept Payment"]}),o.jsxs("button",{onClick:()=>N(!0),className:"btn",style:{background:"white",color:"var(--kb-gold-dark)",display:"flex",alignItems:"center",gap:"0.5rem"},disabled:((t==null?void 0:t.kinderbucksBalance)||0)===0,children:[o.jsx(Kh,{size:18}),"Request Redemption"]})]})]})}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[o.jsx(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card",style:{padding:"1.25rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(39, 174, 96, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(Qw,{size:22,color:"var(--kb-green)"})}),o.jsxs("div",{children:[o.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"var(--kb-navy)"},children:["$",((t==null?void 0:t.lifetimeAccepted)||0).toFixed(0)]}),o.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Total Accepted"})]})]})}),o.jsx(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card",style:{padding:"1.25rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(52, 152, 219, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(Yw,{size:22,color:"#3498db"})}),o.jsxs("div",{children:[o.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"var(--kb-navy)"},children:["$",((t==null?void 0:t.lifetimeRedeemed)||0).toFixed(0)]}),o.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Total Redeemed"})]})]})}),o.jsx(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"card",style:{padding:"1.25rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(155, 89, 182, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(Wi,{size:22,color:"#9b59b6"})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"var(--kb-navy)"},children:x.filter(Z=>Z.type==="payment").length}),o.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Payments Received"})]})]})})]}),o.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"card",children:[o.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(dr,{size:20})," Recent Transactions"]}),x.length===0?o.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[o.jsx(Wi,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),o.jsx("p",{children:"No transactions yet"}),o.jsx("p",{style:{fontSize:"0.9rem"},children:"Accept Kinderbucks payments to see them here."}),o.jsx("button",{onClick:()=>e("/business/accept-payment"),className:"btn btn-gold",style:{marginTop:"1rem"},children:"Accept First Payment"})]}):o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:x.slice(0,10).map((Z,ye)=>{var ot,Qt;const Le=(ot=Z.createdAt)!=null&&ot.toDate?Z.createdAt.toDate():new Date(Z.createdAt),Ue=Z.type==="payment";return o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"var(--kb-gray-50)",borderRadius:"8px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("div",{style:{width:"36px",height:"36px",background:Ue?"rgba(39, 174, 96, 0.1)":"rgba(52, 152, 219, 0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:Ue?o.jsx(Qw,{size:18,color:"var(--kb-green)"}):o.jsx(Yw,{size:18,color:"#3498db"})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:Ue?"Payment received":"Redemption"}),Z.kinderbuckSerial&&o.jsx("span",{style:{fontSize:"0.75rem",fontFamily:"monospace",color:"var(--kb-gray-500)"},children:Z.kinderbuckSerial}),Z.status==="pending"&&o.jsx("span",{style:{fontSize:"0.75rem",padding:"0.1rem 0.4rem",borderRadius:"4px",background:"#fff3cd",color:"#856404",marginLeft:"0.5rem"},children:"Pending"})]})]}),o.jsxs("div",{style:{textAlign:"right"},children:[o.jsxs("div",{style:{fontWeight:"600",color:Ue?"var(--kb-green)":"#3498db"},children:[Ue?"+":"-","$",(Qt=Z.amount)==null?void 0:Qt.toFixed(2)]}),o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:Le.toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]})]},Z.id||ye)})})]})]}),T==="qrcode"&&o.jsx(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",style:{padding:"2rem"},children:o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"2rem",alignItems:"start"},children:[o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{style:{background:"linear-gradient(135deg, var(--kb-green) 0%, #1e8449 100%)",borderRadius:"20px",padding:"4px",display:"inline-block"},children:o.jsxs("div",{style:{background:"white",borderRadius:"18px",padding:"20px"},children:[o.jsx("div",{style:{fontSize:"11px",fontWeight:"600",color:"var(--kb-green)",letterSpacing:"2px",marginBottom:"12px"},children:"CHECK IN AT"}),o.jsx(wl,{value:fe,size:180,denomination:1,showFrame:!1}),o.jsx("div",{style:{marginTop:"12px",fontWeight:"600",color:"var(--kb-navy)",fontSize:"1.1rem"},children:t==null?void 0:t.name})]})}),o.jsxs("div",{style:{marginTop:"1.5rem",display:"flex",gap:"0.5rem",justifyContent:"center",flexWrap:"wrap"},children:[o.jsxs("button",{onClick:()=>window.print(),className:"btn btn-gold",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(L2,{size:18})," Print"]}),o.jsxs("button",{onClick:Ie,className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[U?o.jsx(Vn,{size:18}):o.jsx(h0,{size:18}),U?"Copied!":"Copy URL"]})]})]}),o.jsxs("div",{children:[o.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"How Customers Use This"}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[o.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"start"},children:[o.jsx("div",{style:{width:"32px",height:"32px",background:"var(--kb-navy)",color:"white",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"600",fontSize:"0.9rem",flexShrink:0},children:"1"}),o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:"Customer scans with phone"}),o.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"Using their camera app or QR reader"})]})]}),o.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"start"},children:[o.jsx("div",{style:{width:"32px",height:"32px",background:"var(--kb-navy)",color:"white",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"600",fontSize:"0.9rem",flexShrink:0},children:"2"}),o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:"Opens check-in page"}),o.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"No app download required!"})]})]}),o.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"start"},children:[o.jsx("div",{style:{width:"32px",height:"32px",background:"var(--kb-navy)",color:"white",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"600",fontSize:"0.9rem",flexShrink:0},children:"3"}),o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:'They tap "Check In"'}),o.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"Earns progress toward their Kinderhooker tier"})]})]}),o.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"start"},children:[o.jsx("div",{style:{width:"32px",height:"32px",background:"var(--kb-green)",color:"white",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:o.jsx(Vn,{size:18})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:"You see their tier badge"}),o.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"Offer appropriate discounts for their loyalty level"})]})]})]}),o.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"rgba(201, 162, 39, 0.1)",borderRadius:"8px",borderLeft:"3px solid var(--kb-gold)"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--kb-gold-dark)",fontWeight:"600",marginBottom:"0.5rem"},children:[o.jsx(kV,{size:16})," Pro Tip"]}),o.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.9rem",margin:0},children:"Place your QR code near the register or on table tents so customers can check in while they wait!"})]})]})]})}),T==="promos"&&o.jsx(o.Fragment,{children:o.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",style:{marginBottom:"1.5rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1.5rem"},children:[o.jsxs("h3",{style:{color:"var(--kb-navy)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Ac,{size:20})," Your Promo Codes"]}),o.jsxs("button",{onClick:()=>A(!K),className:"btn btn-gold",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(vl,{size:18})," Create Promo"]})]}),K&&o.jsxs("form",{onSubmit:Be,style:{padding:"1.5rem",background:"var(--kb-gray-50)",borderRadius:"12px",marginBottom:"1.5rem"},children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Code *"}),o.jsx("input",{type:"text",value:F.code,onChange:Z=>V(ye=>({...ye,code:Z.target.value.toUpperCase().replace(/[^A-Z0-9]/g,"")})),placeholder:"SUMMER20",style:{width:"100%",fontFamily:"monospace"},required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Discount Type"}),o.jsxs("select",{value:F.discountType,onChange:Z=>V(ye=>({...ye,discountType:Z.target.value})),style:{width:"100%"},children:[o.jsx("option",{value:"percent",children:"Percent Off"}),o.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:F.discountType==="percent"?"Percent Off":"Amount Off ($)"}),o.jsx("input",{type:"number",value:F.discountValue,onChange:Z=>V(ye=>({...ye,discountValue:Z.target.value})),min:"1",max:F.discountType==="percent"?100:1e3,style:{width:"100%"}})]})]}),o.jsxs("div",{style:{marginBottom:"1rem"},children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Description *"}),o.jsx("input",{type:"text",value:F.description,onChange:Z=>V(ye=>({...ye,description:Z.target.value})),placeholder:"10% off your entire purchase",style:{width:"100%"},required:!0})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Min. Tier (optional)"}),o.jsxs("select",{value:F.minTier,onChange:Z=>V(ye=>({...ye,minTier:Z.target.value})),style:{width:"100%"},children:[o.jsx("option",{value:"",children:"Any tier"}),o.jsx("option",{value:"Curious",children:"Curious"}),o.jsx("option",{value:"Hooked",children:"Hooked"}),o.jsx("option",{value:"Line & Sinker",children:"Line & Sinker"}),o.jsx("option",{value:"Village Patron",children:"Village Patron"})]})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Expires (optional)"}),o.jsx("input",{type:"date",value:F.expiresAt,onChange:Z=>V(ye=>({...ye,expiresAt:Z.target.value})),style:{width:"100%"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Usage Limit (optional)"}),o.jsx("input",{type:"number",value:F.usageLimit,onChange:Z=>V(ye=>({...ye,usageLimit:Z.target.value})),placeholder:"Unlimited",min:"1",style:{width:"100%"}})]})]}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[o.jsx("button",{type:"submit",className:"btn btn-primary",disabled:Me,children:Me?"Creating...":"Create Promo Code"}),o.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>A(!1),children:"Cancel"})]})]}),c.length===0?o.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[o.jsx(Ac,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),o.jsx("p",{children:"No promo codes yet"}),o.jsx("p",{style:{fontSize:"0.9rem"},children:"Create your first promo to reward loyal customers!"})]}):o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:c.map(Z=>o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem",background:Z.isActive?"var(--kb-gray-50)":"var(--kb-gray-100)",borderRadius:"8px",opacity:Z.isActive?1:.6,flexWrap:"wrap",gap:"1rem"},children:[o.jsxs("div",{children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.25rem"},children:[o.jsx("code",{style:{padding:"0.25rem 0.5rem",background:"var(--kb-navy)",color:"var(--kb-gold)",borderRadius:"4px",fontWeight:"600"},children:Z.code}),o.jsxs("span",{style:{padding:"0.15rem 0.5rem",background:Z.discountType==="percent"?"rgba(39, 174, 96, 0.1)":"rgba(52, 152, 219, 0.1)",color:Z.discountType==="percent"?"var(--kb-green)":"#3498db",borderRadius:"4px",fontSize:"0.8rem",fontWeight:"500"},children:[Z.discountType==="percent"?o.jsx(WV,{size:12,style:{marginRight:4}}):o.jsx(Kh,{size:12,style:{marginRight:4}}),Z.discountValue,Z.discountType==="percent"?"% off":" off"]})]}),o.jsx("div",{style:{color:"var(--kb-gray-600)",fontSize:"0.9rem"},children:Z.description}),o.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"0.5rem",fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:[Z.minTier&&o.jsxs("span",{children:["Min tier: ",Z.minTier]}),Z.usageLimit&&o.jsxs("span",{children:["Limit: ",Z.usageCount||0,"/",Z.usageLimit]}),Z.expiresAt&&o.jsxs("span",{children:["Expires: ",new Date(Z.expiresAt.toDate?Z.expiresAt.toDate():Z.expiresAt).toLocaleDateString()]})]})]}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[o.jsxs("button",{onClick:()=>se(Z.id,Z.isActive),className:"btn btn-secondary",style:{padding:"0.4rem 0.6rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:[Z.isActive?o.jsx(gV,{size:16}):o.jsx(N2,{size:16}),Z.isActive?"Disable":"Enable"]}),o.jsx("button",{onClick:()=>Q(Z.id),className:"btn",style:{padding:"0.4rem 0.6rem",background:"#e74c3c",color:"white"},children:o.jsx(au,{size:16})})]})]},Z.id))})]})}),T==="trends"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[o.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",style:{padding:"1.5rem"},children:[o.jsx("h4",{style:{color:"var(--kb-gray-500)",marginBottom:"0.5rem",fontSize:"0.9rem"},children:"Village-Wide Check-ins"}),o.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"var(--kb-navy)"},children:te}),o.jsxs("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:[je," this week across all businesses"]})]}),o.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card",style:{padding:"1.5rem"},children:[o.jsx("h4",{style:{color:"var(--kb-gray-500)",marginBottom:"0.5rem",fontSize:"0.9rem"},children:"Participating Businesses"}),o.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"var(--kb-navy)"},children:d.length}),o.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Active in the Kinderbucks network"})]}),o.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card",style:{padding:"1.5rem",background:"linear-gradient(135deg, var(--kb-gold) 0%, var(--kb-gold-dark) 100%)",color:"white"},children:[o.jsx("h4",{style:{opacity:.9,marginBottom:"0.5rem",fontSize:"0.9rem"},children:"Your Market Share"}),o.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"700"},children:[te>0?Math.round(((t==null?void 0:t.checkinCount)||0)/te*100):0,"%"]}),o.jsx("div",{style:{opacity:.9,fontSize:"0.85rem"},children:"of all village check-ins"})]})]}),o.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"card",children:[o.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(gr,{size:20})," Top Businesses This Month"]}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:Ce.map((Z,ye)=>{var Qt;const Le=Z.code===(n==null?void 0:n.businessCode),Ue=((Qt=Ce[0])==null?void 0:Qt.checkinCount)||1,ot=(Z.checkinCount||0)/Ue*100;return o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"0.75rem 1rem",background:Le?"rgba(201, 162, 39, 0.1)":"var(--kb-gray-50)",borderRadius:"8px",border:Le?"2px solid var(--kb-gold)":"none"},children:[o.jsx("div",{style:{width:"28px",height:"28px",background:ye===0?"var(--kb-gold)":ye===1?"#c0c0c0":ye===2?"#cd7f32":"var(--kb-gray-300)",color:"white",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"600",fontSize:"0.85rem"},children:ye+1}),o.jsxs("div",{style:{flex:1},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:[o.jsx("span",{style:{fontWeight:Le?"600":"500",color:"var(--kb-navy)"},children:Z.name}),Le&&o.jsx("span",{style:{fontSize:"0.7rem",padding:"0.1rem 0.4rem",background:"var(--kb-gold)",color:"white",borderRadius:"4px"},children:"YOU"})]}),o.jsx("div",{style:{height:"6px",background:"var(--kb-gray-200)",borderRadius:"3px",overflow:"hidden"},children:o.jsx("div",{style:{width:`${ot}%`,height:"100%",background:Le?"var(--kb-gold)":"var(--kb-green)",borderRadius:"3px"}})})]}),o.jsx("div",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:Z.checkinCount||0})]},Z.code)})})]})]}),T==="guide"&&o.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",children:[o.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Xw,{size:20})," Business Resource Guide"]}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:xt.map(Z=>{const ye=Z.icon,Le=L===Z.id;return o.jsxs("div",{style:{border:"1px solid var(--kb-gray-200)",borderRadius:"12px",overflow:"hidden"},children:[o.jsxs("button",{onClick:()=>B(Le?null:Z.id),style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem 1.25rem",background:Le?"var(--kb-gray-50)":"white",border:"none",cursor:"pointer",textAlign:"left"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("div",{style:{width:"40px",height:"40px",background:"rgba(201, 162, 39, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(ye,{size:20,color:"var(--kb-gold-dark)"})}),o.jsx("span",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:Z.title})]}),Le?o.jsx(KM,{size:20,color:"var(--kb-gray-400)"}):o.jsx(UM,{size:20,color:"var(--kb-gray-400)"})]}),Le&&o.jsx("div",{style:{padding:"1rem 1.25rem",borderTop:"1px solid var(--kb-gray-200)"},children:o.jsx("ul",{style:{margin:0,paddingLeft:"1.25rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:Z.content.map((Ue,ot)=>o.jsx("li",{style:{color:"var(--kb-gray-600)",lineHeight:1.5},children:Ue},ot))})})]},Z.id)})}),o.jsxs("div",{style:{marginTop:"2rem",padding:"1.5rem",background:"linear-gradient(135deg, var(--kb-navy) 0%, var(--kb-navy-light) 100%)",borderRadius:"12px",color:"white"},children:[o.jsx("h4",{style:{marginBottom:"0.5rem"},children:"Need Help?"}),o.jsx("p",{style:{opacity:.9,marginBottom:"1rem",fontSize:"0.95rem"},children:"Questions about Kinderbucks or need assistance with your account? We're here to help!"}),o.jsx("a",{href:"mailto:support@kinderbucks.com",className:"btn",style:{background:"rgba(255,255,255,0.2)",color:"white"},children:"Contact Support"})]})]})]})}),o.jsx(On,{}),o.jsx(PB,{isOpen:C,onClose:()=>N(!1),businessCode:n==null?void 0:n.businessCode,businessName:t==null?void 0:t.name,currentBalance:(t==null?void 0:t.kinderbucksBalance)||0,onSuccess:()=>st()})]})}function en({children:n,title:e}){const t=vr(),r=Js(),{user:s,profile:l,isAdmin:c}=Ur(),h=[{to:"/admin/dashboard",label:"Dashboard",Icon:SV},{to:"/admin/exchanges",label:"Exchanges",Icon:Df},{to:"/admin/redemptions",label:"Redemptions",Icon:Wi},{to:"/admin/members",label:"Members",Icon:Or},{to:"/admin/generate",label:"Generate QR",Icon:Vr},{to:"/admin/issue",label:"Issue Currency",Icon:qh},{to:"/admin/businesses",label:"Businesses",Icon:Mt},{to:"/admin/users",label:"User Management",Icon:Gh}],d=async()=>{await _2(),r("/")},m=g=>t.pathname===g;return o.jsxs("div",{style:{display:"flex",minHeight:"100vh"},children:[o.jsxs("aside",{style:{width:"260px",background:"var(--kb-navy)",color:"var(--kb-white)",display:"flex",flexDirection:"column",position:"fixed",top:0,left:0,bottom:0,zIndex:100},children:[o.jsx("div",{style:{padding:"1.5rem",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:o.jsxs(he,{to:"/map",style:{display:"flex",alignItems:"center",gap:"0.75rem",textDecoration:"none"},children:[o.jsx("div",{style:{width:"40px",height:"40px",background:"var(--kb-gold)",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--kb-navy)",fontFamily:"var(--font-display)",fontWeight:"700",fontSize:"1.2rem"},children:"K"}),o.jsxs("div",{children:[o.jsx("div",{style:{fontFamily:"var(--font-display)",fontWeight:"600",color:"var(--kb-white)",fontSize:"1.1rem"},children:"Kinderbucks"}),o.jsx("div",{style:{fontSize:"0.7rem",color:"var(--kb-gold)",textTransform:"uppercase",letterSpacing:"0.1em"},children:"Admin Portal"})]})]})}),o.jsx("nav",{style:{flex:1,padding:"1rem 0",overflowY:"auto"},children:h.map(g=>o.jsxs(he,{to:g.to,style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.875rem 1.5rem",color:m(g.to)?"var(--kb-gold)":"var(--kb-gray-300)",background:m(g.to)?"rgba(201, 162, 39, 0.1)":"transparent",borderLeft:m(g.to)?"3px solid var(--kb-gold)":"3px solid transparent",textDecoration:"none",fontSize:"0.95rem",fontWeight:m(g.to)?"600":"400",transition:"all 0.2s"},children:[o.jsx(g.Icon,{size:20,strokeWidth:1.5}),g.label]},g.to))}),o.jsxs("div",{style:{padding:"1rem 1.5rem",borderTop:"1px solid rgba(255,255,255,0.1)"},children:[s&&o.jsxs("div",{style:{padding:"0.75rem 0",borderBottom:"1px solid rgba(255,255,255,0.1)",marginBottom:"0.75rem"},children:[o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-300)"},children:(l==null?void 0:l.displayName)||s.email}),o.jsx("div",{style:{fontSize:"0.75rem",color:"var(--kb-gray-500)"},children:(l==null?void 0:l.role)||"member"})]}),o.jsxs(he,{to:"/map",style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.5rem 0",color:"var(--kb-gray-400)",textDecoration:"none",fontSize:"0.9rem"},children:[o.jsx(wV,{size:18}),"Back to Site"]}),s&&o.jsxs("button",{onClick:d,style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.5rem 0",color:"var(--kb-gray-400)",background:"none",border:"none",cursor:"pointer",fontSize:"0.9rem",width:"100%"},children:[o.jsx(Pg,{size:18}),"Sign Out"]})]})]}),o.jsxs("main",{style:{flex:1,marginLeft:"260px",background:"var(--kb-cream)",minHeight:"100vh"},children:[o.jsx("header",{style:{background:"var(--kb-white)",borderBottom:"1px solid var(--kb-gray-200)",padding:"1.25rem 2rem",position:"sticky",top:0,zIndex:50},children:o.jsx("h1",{style:{fontFamily:"var(--font-display)",fontSize:"1.5rem",color:"var(--kb-navy)",margin:0},children:e})}),o.jsx("div",{style:{padding:"2rem"},children:n})]}),o.jsx("style",{children:`
        @media (max-width: 768px) {
          aside {
            width: 100% !important;
            position: relative !important;
            display: none;
          }
          main {
            margin-left: 0 !important;
          }
        }
      `})]})}function DB(){const[n,e]=j.useState({totalCurrency:0,inCirculation:0,circulationValue:0,pendingExchanges:0,pendingValue:0,totalMembers:0,activeBusinesses:0,totalCheckins:0}),[t,r]=j.useState([]),[s,l]=j.useState({}),[c,h]=j.useState(!0);j.useEffect(()=>{async function m(){try{const g=await zT(),y=g.filter(A=>A.status==="issued"||A.status==="active"),x={};y.forEach(A=>{const C=A.denomination||0;x[C]=(x[C]||0)+1}),l(x);const E=await gi(),k=E.filter(A=>A.isActive),S=E.reduce((A,C)=>A+(C.checkinCount||0),0),T=bn(ut(Ee,"exchanges"),Bn("status","==","pending"),Xi("createdAt","desc")),M=(await Dt(T)).docs.map(A=>({id:A.id,...A.data()})),D=M.reduce((A,C)=>A+(C.kinderbucksAmount||0),0),U=bn(ut(Ee,"exchanges"),Xi("createdAt","desc"),XD(5)),H=await Dt(U);r(H.docs.map(A=>({id:A.id,...A.data()})));const K=await Dt(ut(Ee,"members"));e({totalCurrency:g.length,inCirculation:y.length,circulationValue:y.reduce((A,C)=>A+(C.denomination||0),0),pendingExchanges:M.length,pendingValue:D,totalMembers:K.size,activeBusinesses:k.length,totalCheckins:S}),h(!1)}catch(g){console.error("Error loading dashboard data:",g),h(!1)}}m()},[]);const d=({icon:m,label:g,value:y,subtext:x,color:E,to:k})=>o.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[o.jsxs("div",{children:[o.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem",marginBottom:"0.5rem"},children:g}),o.jsx("div",{style:{fontFamily:"var(--font-display)",fontSize:"2rem",fontWeight:"700",color:E||"var(--kb-navy)"},children:y}),x&&o.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem",marginTop:"0.25rem"},children:x})]}),o.jsx("div",{style:{width:"48px",height:"48px",background:`${E||"var(--kb-navy)"}15`,borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(m,{size:24,color:E||"var(--kb-navy)"})})]}),k&&o.jsx(he,{to:k,style:{display:"block",marginTop:"1rem",paddingTop:"1rem",borderTop:"1px solid var(--kb-gray-100)",color:"var(--kb-navy)",fontSize:"0.85rem",fontWeight:"500"},children:"View Details "})]});return c?o.jsx(en,{title:"Dashboard",children:o.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:o.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading dashboard..."})})}):o.jsxs(en,{title:"Dashboard",children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[o.jsx(d,{icon:Wi,label:"In Circulation",value:`$${n.circulationValue.toLocaleString()}`,subtext:`${n.inCirculation} bills issued`,color:"var(--kb-green)"}),o.jsx(d,{icon:dr,label:"Pending Exchanges",value:n.pendingExchanges,subtext:`$${n.pendingValue.toFixed(2)} value`,color:n.pendingExchanges>0?"#e67e22":"var(--kb-gray-400)",to:"/admin/exchanges"}),o.jsx(d,{icon:Or,label:"OK Members",value:n.totalMembers,subtext:`${n.totalCheckins} total check-ins`,color:"var(--kb-navy)",to:"/admin/members"}),o.jsx(d,{icon:Mt,label:"Active Businesses",value:n.activeBusinesses,color:"var(--kb-gold-dark)",to:"/admin/businesses"})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem"},children:[o.jsxs("div",{className:"card",children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[o.jsx("h3",{style:{color:"var(--kb-navy)",margin:0},children:"Recent Exchanges"}),o.jsx(he,{to:"/admin/exchanges",style:{fontSize:"0.85rem",color:"var(--kb-navy)"},children:"View All "})]}),t.length===0?o.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"No exchanges yet"}):o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:t.map(m=>{var g,y,x,E;return o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem",background:"var(--kb-gray-50)",borderRadius:"8px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[m.status==="completed"?o.jsx(Vn,{size:18,color:"var(--kb-green)"}):m.status==="pending"?o.jsx(dr,{size:18,color:"#e67e22"}):o.jsx(Us,{size:18,color:"var(--kb-gray-400)"}),o.jsxs("div",{children:[o.jsxs("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:["$",m.usdAmount,"  $",(g=m.kinderbucksAmount)==null?void 0:g.toFixed(2)," KB"]}),o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:((E=(x=(y=m.createdAt)==null?void 0:y.toDate)==null?void 0:x.call(y))==null?void 0:E.toLocaleDateString())||"Pending"})]})]}),o.jsx("span",{className:"badge",style:{background:m.status==="completed"?"#d4edda":m.status==="pending"?"#fff3cd":"#f8f9fa",color:m.status==="completed"?"var(--kb-green)":m.status==="pending"?"#856404":"var(--kb-gray-600)"},children:m.status})]},m.id)})})]}),o.jsxs("div",{className:"card",children:[o.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem"},children:"Circulation by Denomination"}),Object.keys(s).length===0?o.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"No currency in circulation yet"}):o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[1,5,10,20].map(m=>{const g=s[m]||0,y=Math.max(...Object.values(s),1),x=g/y*100,E={1:"#27ae60",5:"#3498db",10:"#9b59b6",20:"#c9a227"};return o.jsxs("div",{children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[o.jsxs("span",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:["$",m]}),o.jsxs("span",{style:{color:"var(--kb-gray-500)"},children:[g," bills ($",g*m,")"]})]}),o.jsx("div",{style:{height:"8px",background:"var(--kb-gray-100)",borderRadius:"4px",overflow:"hidden"},children:o.jsx("div",{style:{width:`${x}%`,height:"100%",background:E[m],borderRadius:"4px",transition:"width 0.5s ease"}})})]},m)})})]})]}),o.jsxs("div",{className:"card",style:{marginTop:"1.5rem"},children:[o.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Quick Actions"}),o.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[o.jsxs(he,{to:"/admin/generate",className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Vr,{size:18})," Generate QR Codes"]}),o.jsxs(he,{to:"/admin/issue",className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(qh,{size:18})," Issue Currency"]}),o.jsxs(he,{to:"/admin/exchanges",className:"btn btn-gold",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Df,{size:18})," Process Exchanges"]})]})]})]})}function MB(){const[n,e]=j.useState({start:1,end:100}),[t,r]=j.useState(5),[s,l]=j.useState([]),[c,h]=j.useState(!1),[d,m]=j.useState(!1),g=()=>{const k=[];for(let S=n.start;S<=n.end;S++)k.push(`KB-${String(S).padStart(4,"0")}`);l(k),m(!1)},y=async()=>{h(!0);try{await uB(s,t),m(!0)}catch(k){console.error("Error saving:",k),alert("Error saving to database")}h(!1)},x="https://harmonicsystems.github.io/kinderbucks/#/scan/",E={1:{bg:"rgba(39, 174, 96, 0.1)",text:"var(--kb-green)"},5:{bg:"rgba(52, 152, 219, 0.1)",text:"#3498db"},10:{bg:"rgba(155, 89, 182, 0.1)",text:"#9b59b6"},20:{bg:"rgba(201, 162, 39, 0.1)",text:"var(--kb-gold-dark)"}};return o.jsxs(en,{title:"Generate QR Codes",children:[o.jsxs("div",{className:"card",style:{marginBottom:"2rem"},children:[o.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Vr,{size:20})," Generation Settings"]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1.5rem",marginBottom:"1.5rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Start Number"}),o.jsx("input",{type:"number",value:n.start,onChange:k=>e(S=>({...S,start:Number(k.target.value)})),min:1,max:9999,style:{width:"100%"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"End Number"}),o.jsx("input",{type:"number",value:n.end,onChange:k=>e(S=>({...S,end:Number(k.target.value)})),min:1,max:9999,style:{width:"100%"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Denomination"}),o.jsxs("select",{value:t,onChange:k=>r(Number(k.target.value)),style:{width:"100%"},children:[o.jsx("option",{value:1,children:"$1"}),o.jsx("option",{value:5,children:"$5"}),o.jsx("option",{value:10,children:"$10"}),o.jsx("option",{value:20,children:"$20"})]})]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[o.jsxs("button",{className:"btn btn-primary",onClick:g,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Vr,{size:18})," Generate ",n.end-n.start+1," Codes"]}),o.jsxs("div",{style:{padding:"0.75rem 1rem",background:E[t].bg,borderRadius:"8px",color:E[t].text,fontWeight:"600"},children:["Total Value: $",(n.end-n.start+1)*t]})]})]}),s.length>0&&o.jsxs("div",{className:"card",children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[o.jsxs("div",{children:[o.jsxs("h3",{style:{color:"var(--kb-navy)",margin:0},children:["Generated: ",s.length," Kinderbucks"]}),o.jsxs("p",{style:{color:"var(--kb-gray-500)",margin:"0.25rem 0 0",fontSize:"0.9rem"},children:["$",t," denomination  Total value: $",s.length*t]})]}),o.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[d?o.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--kb-green)",fontWeight:"600"},children:[o.jsx(Vn,{size:18})," Saved!"]}):o.jsxs("button",{className:"btn btn-gold",onClick:y,disabled:c,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(ZV,{size:18}),c?"Saving...":"Save to Database"]}),o.jsxs("button",{className:"btn btn-secondary",onClick:()=>window.print(),style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(L2,{size:18})," Print"]})]})]}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gap:"1.5rem"},children:s.slice(0,50).map(k=>o.jsxs("div",{style:{background:"var(--kb-white)",border:"1px solid var(--kb-gray-200)",borderRadius:"12px",padding:"1rem",textAlign:"center"},children:[o.jsx(wl,{value:`${x}${k}`,size:140,denomination:t}),o.jsx("p",{style:{fontFamily:"monospace",marginTop:"0.75rem",fontSize:"0.9rem",color:"var(--kb-navy)",fontWeight:"600"},children:k})]},k))}),s.length>50&&o.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"var(--kb-gray-50)",borderRadius:"8px",textAlign:"center",color:"var(--kb-gray-600)"},children:["Showing 50 of ",s.length," codes. All will be saved and printable."]})]}),s.length===0&&o.jsxs("div",{className:"card",style:{textAlign:"center",padding:"4rem 2rem"},children:[o.jsx(Vr,{size:64,color:"var(--kb-gray-300)",style:{marginBottom:"1rem"}}),o.jsx("h3",{style:{color:"var(--kb-gray-500)",marginBottom:"0.5rem"},children:"No codes generated yet"}),o.jsx("p",{style:{color:"var(--kb-gray-400)"},children:"Set your range and denomination above, then click Generate."})]})]})}function VB(){const[n,e]=j.useState([]),[t,r]=j.useState(!0),[s,l]=j.useState([]),[c,h]=j.useState(""),[d,m]=j.useState(!1),[g,y]=j.useState(0),x=async()=>{const A=await zT();e(A.filter(C=>C.status==="draft"||C.status==="issued")),r(!1)};j.useEffect(()=>{x()},[]);const E=A=>{l(C=>C.includes(A)?C.filter(N=>N!==A):[...C,A])},k=()=>{const A=P.map(C=>C.serial);l(A)},S=()=>{l([])},T=async()=>{if(s.length!==0){m(!0);try{for(const A of s)await dB(A,"issued",c);y(s.length),l([]),h(""),await x(),setTimeout(()=>y(0),3e3)}catch(A){console.error("Error issuing:",A),alert("Error issuing Kinderbucks")}m(!1)}},P=n.filter(A=>A.status==="draft"),M=n.filter(A=>A.status==="issued"),D=s.reduce((A,C)=>{const N=n.find(L=>L.serial===C);return A+((N==null?void 0:N.denomination)||0)},0),H=(A=>{const C={1:[],5:[],10:[],20:[]};return A.forEach(N=>{const L=N.denomination||5;C[L]&&C[L].push(N)}),C})(P),K={1:"#27ae60",5:"#3498db",10:"#9b59b6",20:"#c9a227"};return t?o.jsx(en,{title:"Issue Currency",children:o.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:o.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading..."})})}):o.jsxs(en,{title:"Issue Currency",children:[g>0&&o.jsxs("div",{style:{position:"fixed",top:"100px",right:"2rem",background:"var(--kb-green)",color:"white",padding:"1rem 1.5rem",borderRadius:"8px",display:"flex",alignItems:"center",gap:"0.75rem",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:1e3},children:[o.jsx(Vn,{size:20}),o.jsxs("span",{children:["Issued ",g," Kinderbucks successfully!"]})]}),o.jsxs("div",{className:"card",style:{marginBottom:"2rem"},children:[o.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(qh,{size:20})," Issue to Circulation"]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:"1.5rem",alignItems:"end"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Recipient (optional)"}),o.jsx("input",{type:"text",value:c,onChange:A=>h(A.target.value),placeholder:"Business name or exchange point",style:{width:"100%"}})]}),o.jsxs("button",{className:"btn btn-gold",onClick:T,disabled:s.length===0||d,style:{display:"flex",alignItems:"center",gap:"0.5rem",height:"42px"},children:[o.jsx(qh,{size:18}),d?"Issuing...":`Issue ${s.length} Selected`]})]}),s.length>0&&o.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem 1rem",background:"var(--kb-gold)",borderRadius:"8px",color:"var(--kb-navy)",fontWeight:"500"},children:["Selected: ",s.length," bills  Total value: $",D]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[o.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-gray-500)"},children:P.length}),o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Available (Draft)"})]}),o.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-green)"},children:M.length}),o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Already Issued"})]}),o.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:s.length}),o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Selected"})]})]}),o.jsxs("div",{className:"card",children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[o.jsxs("h3",{style:{color:"var(--kb-navy)",margin:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Jw,{size:20})," Available to Issue (",P.length,")"]}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[o.jsx("button",{className:"btn btn-secondary",onClick:k,style:{padding:"0.4rem 0.75rem",fontSize:"0.85rem"},children:"Select All"}),o.jsx("button",{className:"btn btn-secondary",onClick:S,style:{padding:"0.4rem 0.75rem",fontSize:"0.85rem"},children:"Clear"})]})]}),P.length===0?o.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[o.jsx(Jw,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),o.jsx("p",{children:"No draft Kinderbucks available."}),o.jsx("p",{style:{fontSize:"0.9rem"},children:"Generate some QR codes first."})]}):o.jsx("div",{children:[1,5,10,20].map(A=>{const C=H[A];return C.length===0?null:o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem"},children:[o.jsxs("div",{style:{width:"24px",height:"24px",background:K[A],borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"0.75rem",fontWeight:"600"},children:["$",A]}),o.jsxs("span",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:["$",A," Bills (",C.length,")"]}),o.jsx("button",{onClick:()=>{const N=C.map(B=>B.serial),L=N.every(B=>s.includes(B));l(L?B=>B.filter(F=>!N.includes(F)):B=>[...new Set([...B,...N])])},style:{background:"none",border:"none",color:K[A],cursor:"pointer",fontSize:"0.85rem"},children:C.every(N=>s.includes(N.serial))?"Deselect all":"Select all"})]}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))",gap:"0.5rem"},children:C.map(N=>{const L=s.includes(N.serial);return o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.6rem 0.75rem",background:L?`${K[A]}15`:"var(--kb-gray-50)",borderRadius:"6px",cursor:"pointer",border:L?`2px solid ${K[A]}`:"2px solid transparent",transition:"all 0.15s"},children:[L?o.jsx(u3,{size:18,color:K[A]}):o.jsx(h3,{size:18,color:"var(--kb-gray-400)"}),o.jsx("input",{type:"checkbox",checked:L,onChange:()=>E(N.serial),style:{display:"none"}}),o.jsx("span",{style:{fontFamily:"monospace",fontSize:"0.85rem",color:L?K[A]:"var(--kb-gray-600)",fontWeight:L?"600":"400"},children:N.serial})]},N.serial)})})]},A)})})]})]})}const LB="AIzaSyBTfW1zXwDOYJGEZ7ktRsLNowGvFewLKj0";function OB(n){if(!n)return"services";const e=new Set(n);return e.has("restaurant")||e.has("cafe")||e.has("bar")||e.has("bakery")||e.has("food")||e.has("meal_takeaway")||e.has("meal_delivery")?"food":e.has("store")||e.has("shopping_mall")||e.has("clothing_store")||e.has("grocery_or_supermarket")||e.has("convenience_store")||e.has("liquor_store")||e.has("florist")||e.has("jewelry_store")||e.has("book_store")||e.has("hardware_store")?"retail":e.has("art_gallery")||e.has("museum")||e.has("movie_theater")||e.has("library")||e.has("tourist_attraction")?"arts":"services"}function BB(n){return n?n.toUpperCase().replace(/[^A-Z0-9\s]/g,"").replace(/\b(THE|AND|OF|AT|IN)\b/gi,"").trim().replace(/\s+/g,"-").substring(0,20)||"BIZ":""}function zB({onPlaceSelect:n,placeholder:e="Search for a business..."}){const[t,r]=j.useState(""),[s,l]=j.useState([]),[c,h]=j.useState(!1),[d,m]=j.useState(!1),[g,y]=j.useState(!1),x=j.useRef(null),E=j.useRef(null),k=j.useRef(null),S=j.useRef(null),T=j.useRef(null);j.useEffect(()=>{var K,A,C,N;if((A=(K=window.google)==null?void 0:K.maps)!=null&&A.places){y(!0);return}const U=document.querySelector('script[src*="maps.googleapis.com"]');if(U){U.addEventListener("load",()=>y(!0)),(N=(C=window.google)==null?void 0:C.maps)!=null&&N.places&&y(!0);return}const H=document.createElement("script");H.src=`https://maps.googleapis.com/maps/api/js?key=${LB}&libraries=places`,H.async=!0,H.defer=!0,H.onload=()=>y(!0),document.head.appendChild(H)},[]),j.useEffect(()=>{if(!g)return;x.current=new window.google.maps.places.AutocompleteService;const U=document.createElement("div");E.current=new window.google.maps.places.PlacesService(U),k.current=new window.google.maps.places.AutocompleteSessionToken},[g]),j.useEffect(()=>{const U=H=>{T.current&&!T.current.contains(H.target)&&S.current&&!S.current.contains(H.target)&&m(!1)};return document.addEventListener("mousedown",U),()=>document.removeEventListener("mousedown",U)},[]);const P=async U=>{if(!U||U.length<2||!x.current){l([]);return}h(!0);const H={input:U,sessionToken:k.current,types:["establishment"],locationBias:{center:{lat:42.3951,lng:-73.6977},radius:5e4}};x.current.getPlacePredictions(H,(K,A)=>{h(!1),A===window.google.maps.places.PlacesServiceStatus.OK&&K?(l(K),m(!0)):l([])})};j.useEffect(()=>{const U=setTimeout(()=>{P(t)},300);return()=>clearTimeout(U)},[t]);const M=U=>{if(!E.current)return;const H={placeId:U.place_id,fields:["name","formatted_address","types","geometry","formatted_phone_number","website","opening_hours","photos"],sessionToken:k.current};E.current.getDetails(H,(K,A)=>{var C;if(A===window.google.maps.places.PlacesServiceStatus.OK&&K){let N=null;K.photos&&K.photos.length>0&&(N=K.photos[0].getUrl({maxWidth:400,maxHeight:300}));const L={name:K.name,address:K.formatted_address,code:BB(K.name),category:OB(K.types),phone:K.formatted_phone_number,website:K.website,photoUrl:N,location:(C=K.geometry)!=null&&C.location?{lat:K.geometry.location.lat(),lng:K.geometry.location.lng()}:null,placeId:U.place_id};n(L),r(""),l([]),m(!1),k.current=new window.google.maps.places.AutocompleteSessionToken}})},D=()=>{var U;r(""),l([]),m(!1),(U=S.current)==null||U.focus()};return o.jsxs("div",{style:{position:"relative"},children:[o.jsxs("div",{style:{position:"relative"},children:[o.jsx(Vf,{size:18,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--kb-gray-400)"}}),o.jsx("input",{ref:S,type:"text",value:t,onChange:U=>r(U.target.value),onFocus:()=>s.length>0&&m(!0),placeholder:e,style:{width:"100%",paddingLeft:"40px",paddingRight:t?"36px":"12px"}}),t&&o.jsx("button",{onClick:D,style:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"var(--kb-gray-400)",padding:"4px"},children:o.jsx(g0,{size:16})})]}),d&&s.length>0&&o.jsx("div",{ref:T,style:{position:"absolute",top:"100%",left:0,right:0,marginTop:"4px",background:"white",borderRadius:"8px",boxShadow:"0 4px 20px rgba(0,0,0,0.15)",zIndex:100,maxHeight:"300px",overflowY:"auto"},children:s.map(U=>{var H,K;return o.jsxs("button",{onClick:()=>M(U),style:{width:"100%",padding:"0.75rem 1rem",background:"none",border:"none",borderBottom:"1px solid var(--kb-gray-100)",cursor:"pointer",textAlign:"left",display:"flex",alignItems:"flex-start",gap:"0.75rem"},onMouseEnter:A=>A.currentTarget.style.background="var(--kb-gray-50)",onMouseLeave:A=>A.currentTarget.style.background="none",children:[o.jsx(yl,{size:16,color:"var(--kb-gold)",style:{marginTop:"2px",flexShrink:0}}),o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:((H=U.structured_formatting)==null?void 0:H.main_text)||U.description}),o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:(K=U.structured_formatting)==null?void 0:K.secondary_text})]})]},U.place_id)})}),c&&o.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,marginTop:"4px",padding:"1rem",background:"white",borderRadius:"8px",boxShadow:"0 4px 20px rgba(0,0,0,0.15)",textAlign:"center",color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"Searching..."})]})}const FB=[{code:"AVIARY",name:"The Aviary",category:"food"},{code:"MORNINGBIRD",name:"Morningbird Cafe",category:"food"},{code:"SAISONNIER",name:"Saisonnier",category:"food"},{code:"BROADST-BAGEL",name:"Broad Street Bagel Co.",category:"food"},{code:"ISOLA",name:"Isola Wine Bar",category:"food"},{code:"BOTTLE-SHOP",name:"Kinderhook Bottle Shop",category:"retail"},{code:"SAMASCOTTS",name:"Samascott's Garden Market",category:"retail"},{code:"SAMASCOTT-ORCHARDS",name:"Samascott Orchards",category:"retail"},{code:"SCHOOL-GALLERY",name:"The School | Jack Shainman Gallery",category:"arts"},{code:"FEED-SEED",name:"The Feed and Seed",category:"services"},{code:"OLD-DUTCH",name:"The Old Dutch Inn",category:"services"},{code:"VILLAGE-YOGA",name:"Village Yoga",category:"services"},{code:"WALSH-DENTISTRY",name:"Walsh & Walsh Dentistry",category:"services"}],Xp={food:{label:"Food & Drink",Icon:F2,color:"#e74c3c"},retail:{label:"Retail",Icon:m0,color:"#9b59b6"},services:{label:"Services",Icon:j2,color:"#3498db"},arts:{label:"Arts & Culture",Icon:V2,color:"#1abc9c"}};function UB(){var te,je,Ce,Ve,Be,se;const[n,e]=j.useState([]),[t,r]=j.useState([]),[s,l]=j.useState(!0),[c,h]=j.useState({code:"",name:"",category:"food",address:"",placeId:"",photoUrl:"",website:""}),[d,m]=j.useState(!1),[g,y]=j.useState(null),[x,E]=j.useState(!1),[k,S]=j.useState(null),[T,P]=j.useState(!1),[M,D]=j.useState(null),[U,H]=j.useState(""),[K,A]=j.useState(!1),[C,N]=j.useState(null),L=async()=>{const[Q,fe]=await Promise.all([gi(),K9()]);e(Q),r(fe),l(!1)};j.useEffect(()=>{L()},[]);const B=async Q=>{if(Q.preventDefault(),!(!c.code||!c.name)){m(!0);try{await xk(c.code.toUpperCase(),c.name,c.category,{address:c.address,placeId:c.placeId,photoUrl:c.photoUrl,website:c.website}),h({code:"",name:"",category:"food",address:"",placeId:"",photoUrl:"",website:""}),await L()}catch(fe){console.error("Error creating business:",fe),alert("Error creating business")}m(!1)}},F=Q=>{h({code:Q.code,name:Q.name,category:Q.category,address:Q.address||"",placeId:Q.placeId||"",photoUrl:Q.photoUrl||"",website:Q.website||""})},V=async(Q,fe)=>{const Ke=await LT(Q);D({code:Q,name:fe,info:Ke}),H("")},Me=async(Q=!1)=>{if(M){A(!0);try{await q9(M.code,null,Q),D(null),H(""),await L()}catch(fe){console.error("Error deleting business:",fe),alert(fe.message||"Error deleting business")}A(!1)}},We=async Q=>{try{await G9(Q),await L()}catch(fe){console.error("Error restoring business:",fe),alert("Error restoring business")}},st=async Q=>{var fe,Ke;if(!((Ke=(fe=window.google)==null?void 0:fe.maps)!=null&&Ke.places)){alert("Google Maps not loaded. Please refresh the page.");return}N(Q.code);try{const xt=document.createElement("div"),Z=new window.google.maps.places.PlacesService(xt),ye=Q.placeId?{placeId:Q.placeId,fields:["photos"]}:{query:`${Q.name} ${Q.address||"Kinderhook NY"}`,fields:["photos","place_id"]},Ue=await(ot=>new Promise((Qt,Wr)=>{ot.placeId?Z.getDetails(ot,(dt,ht)=>{ht===window.google.maps.places.PlacesServiceStatus.OK?Qt(dt):Wr(new Error("Place not found"))}):Z.findPlaceFromQuery({query:ot.query,fields:["photos","place_id"]},(dt,ht)=>{ht===window.google.maps.places.PlacesServiceStatus.OK&&dt[0]?Qt(dt[0]):Wr(new Error("Place not found"))})}))(ye);if(Ue.photos&&Ue.photos.length>0){const ot=Ue.photos[0].getUrl({maxWidth:400,maxHeight:300});await J9(Q.code,ot),await L()}else alert("No photos found for this business on Google Places")}catch(xt){console.error("Error fetching photo:",xt),alert("Could not fetch photo. Try searching for the business manually.")}N(null)},Ie=async(Q,fe)=>{await Y9(Q,!fe),await L()},re=async()=>{if(confirm("This will add all Kinderhook businesses. Continue?")){E(!0);try{for(const Q of FB)n.find(Ke=>Ke.code===Q.code)||await xk(Q.code,Q.name,Q.category);await L(),alert("Businesses seeded successfully!")}catch(Q){console.error("Error seeding:",Q),alert("Error seeding businesses")}E(!1)}},me=Q=>{navigator.clipboard.writeText(Q),S(Q),setTimeout(()=>S(null),2e3)},ue="https://harmonicsystems.github.io/kinderbucks/#/checkin/",$={total:n.length,active:n.filter(Q=>Q.isActive).length,totalCheckins:n.reduce((Q,fe)=>Q+(fe.checkinCount||0),0)};return s?o.jsx(en,{title:"Business Directory",children:o.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:o.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading..."})})}):o.jsxs(en,{title:"Business Directory",children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[o.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:$.total}),o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Businesses"})]}),o.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-green)"},children:$.active}),o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Active"})]}),o.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-gold-dark)"},children:$.totalCheckins}),o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Check-ins"})]})]}),o.jsxs("div",{className:"card",style:{marginBottom:"2rem"},children:[o.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(vl,{size:20})," Add Business"]}),o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:[o.jsx(Vf,{size:16,style:{marginRight:"0.5rem",verticalAlign:"middle"}}),"Search Google Places"]}),o.jsx(zB,{onPlaceSelect:F,placeholder:"Search for a business by name..."}),o.jsx("p",{style:{marginTop:"0.5rem",fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Search to auto-fill details, or enter manually below"})]}),c.photoUrl&&o.jsxs("div",{style:{marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"1rem",padding:"1rem",background:"var(--kb-gray-50)",borderRadius:"8px"},children:[o.jsx("img",{src:c.photoUrl,alt:c.name,style:{width:"80px",height:"80px",objectFit:"cover",borderRadius:"8px"}}),o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:c.name}),o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:c.address}),c.website&&o.jsx("a",{href:c.website,target:"_blank",rel:"noopener noreferrer",style:{fontSize:"0.85rem",color:"var(--kb-gold-dark)"},children:c.website})]})]}),o.jsx("div",{style:{borderTop:"1px solid var(--kb-gray-200)",paddingTop:"1.5rem"},children:o.jsxs("form",{onSubmit:B,children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1.5rem",marginBottom:"1.5rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Code *"}),o.jsx("input",{type:"text",value:c.code,onChange:Q=>h(fe=>({...fe,code:Q.target.value.toUpperCase().replace(/[^A-Z0-9-]/g,"")})),placeholder:"CAFE-01",style:{width:"100%",fontFamily:"monospace"},required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Name *"}),o.jsx("input",{type:"text",value:c.name,onChange:Q=>h(fe=>({...fe,name:Q.target.value})),placeholder:"Village Caf",style:{width:"100%"},required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Category"}),o.jsx("select",{value:c.category,onChange:Q=>h(fe=>({...fe,category:Q.target.value})),style:{width:"100%"},children:Object.entries(Xp).map(([Q,fe])=>o.jsx("option",{value:Q,children:fe.label},Q))})]})]}),o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Address"}),o.jsx("input",{type:"text",value:c.address,onChange:Q=>h(fe=>({...fe,address:Q.target.value})),placeholder:"123 Main Street, Kinderhook, NY 12106",style:{width:"100%"}})]}),o.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[o.jsxs("button",{type:"submit",className:"btn btn-primary",disabled:d||!c.code||!c.name,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(vl,{size:18})," ",d?"Adding...":"Add Business"]}),o.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:re,disabled:x,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(P2,{size:18})," ",x?"Seeding...":"Seed Kinderhook Businesses"]})]})]})})]}),o.jsxs("div",{className:"card",children:[o.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Mt,{size:20})," Participating Businesses (",n.length,")"]}),n.length===0?o.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[o.jsx(Mt,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),o.jsx("p",{children:"No businesses yet. Add one above or seed the Kinderhook businesses."})]}):o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:n.map(Q=>{const fe=Xp[Q.category]||Xp.services,Ke=fe.Icon,xt=`${ue}${Q.code}`;return o.jsxs("div",{style:{background:Q.isActive?"var(--kb-white)":"var(--kb-gray-50)",border:`1px solid ${Q.isActive,"var(--kb-gray-200)"}`,borderRadius:"12px",padding:"1.25rem",opacity:Q.isActive?1:.7},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"1rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[Q.photoUrl?o.jsx("img",{src:Q.photoUrl,alt:Q.name,style:{width:"48px",height:"48px",objectFit:"cover",borderRadius:"10px"}}):o.jsx("div",{style:{width:"48px",height:"48px",background:`${fe.color}15`,borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(Ke,{size:24,color:fe.color})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"600",color:Q.isActive?"var(--kb-navy)":"var(--kb-gray-500)",fontSize:"1.1rem"},children:Q.name}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginTop:"0.25rem",flexWrap:"wrap"},children:[o.jsx("span",{style:{fontFamily:"monospace",fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:Q.code}),o.jsx("span",{style:{fontSize:"0.85rem",color:fe.color},children:fe.label}),Q.address&&o.jsx("span",{style:{fontSize:"0.8rem",color:"var(--kb-gray-400)"},children:Q.address.split(",")[0]})]})]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1.5rem"},children:[o.jsxs("div",{style:{textAlign:"center"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"var(--kb-green)",fontWeight:"600"},children:[o.jsx(Qs,{size:16}),Q.checkinCount||0]}),o.jsx("div",{style:{fontSize:"0.75rem",color:"var(--kb-gray-500)"},children:"check-ins"})]}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[o.jsxs(he,{to:`/admin/businesses/${Q.code}`,className:"btn btn-gold",style:{padding:"0.5rem 0.75rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:[o.jsx(N2,{size:16})," Details"]}),o.jsx("button",{onClick:()=>y(g===Q.code?null:Q.code),className:"btn btn-secondary",style:{padding:"0.5rem 0.75rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:o.jsx(Vr,{size:16})}),o.jsxs("button",{onClick:()=>Ie(Q.code,Q.isActive),className:"btn",style:{padding:"0.5rem 0.75rem",background:Q.isActive?"#e74c3c":"var(--kb-green)",color:"white",display:"flex",alignItems:"center",gap:"0.25rem"},children:[Q.isActive?o.jsx(E3,{size:16}):o.jsx(_3,{size:16}),Q.isActive?"Deactivate":"Activate"]}),o.jsx("button",{onClick:()=>st(Q),className:"btn",style:{padding:"0.5rem 0.75rem",background:Q.photoUrl?"var(--kb-gray-100)":"rgba(201, 162, 39, 0.1)",color:Q.photoUrl?"var(--kb-gray-500)":"var(--kb-gold-dark)",display:"flex",alignItems:"center"},title:Q.photoUrl?"Refresh photo":"Fetch photo from Google",disabled:C===Q.code,children:o.jsx(OM,{size:16,className:C===Q.code?"animate-pulse":""})}),o.jsx("button",{onClick:()=>V(Q.code,Q.name),className:"btn",style:{padding:"0.5rem 0.75rem",background:"var(--kb-gray-100)",color:"var(--kb-gray-600)",display:"flex",alignItems:"center"},title:"Delete business",children:o.jsx(au,{size:16})})]})]})]}),g===Q.code&&o.jsxs("div",{style:{marginTop:"1.5rem",paddingTop:"1.5rem",borderTop:"1px solid var(--kb-gray-200)",display:"flex",alignItems:"center",gap:"2rem",flexWrap:"wrap"},children:[o.jsx("div",{style:{textAlign:"center"},children:o.jsx(wl,{value:xt,size:150,denomination:5,showFrame:!1})}),o.jsxs("div",{style:{flex:1,minWidth:"200px"},children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontSize:"0.85rem"},children:"Check-in URL"}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[o.jsx("input",{type:"text",value:xt,readOnly:!0,style:{flex:1,fontFamily:"monospace",fontSize:"0.85rem"}}),o.jsxs("button",{onClick:()=>me(xt),className:"btn btn-secondary",style:{padding:"0.5rem 0.75rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:[o.jsx(h0,{size:16}),k===xt?"Copied!":"Copy"]})]}),o.jsx("p",{style:{marginTop:"0.75rem",fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Print this QR code and display it at the counter for customers to scan when they visit."})]})]})]},Q.code)})})]}),t.length>0&&o.jsxs("div",{className:"card",style:{marginTop:"2rem"},children:[o.jsxs("button",{onClick:()=>P(!T),style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",background:"none",border:"none",cursor:"pointer",padding:0},children:[o.jsxs("h3",{style:{color:"var(--kb-gray-500)",display:"flex",alignItems:"center",gap:"0.5rem",margin:0},children:[o.jsx(I2,{size:20})," Deleted Businesses (",t.length,")"]}),o.jsx("span",{style:{color:"var(--kb-gray-400)"},children:T?"":""})]}),T&&o.jsx("div",{style:{marginTop:"1.5rem",display:"flex",flexDirection:"column",gap:"0.75rem"},children:t.map(Q=>{var fe;return o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem",background:"var(--kb-gray-50)",borderRadius:"8px",opacity:.7},children:[o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"500",color:"var(--kb-gray-600)"},children:Q.name}),o.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-400)"},children:[Q.code,"  Deleted ",(fe=Q.deletedAt)!=null&&fe.toDate?Q.deletedAt.toDate().toLocaleDateString():"recently"]})]}),o.jsxs("button",{onClick:()=>We(Q.code),className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(O2,{size:16})," Restore"]})]},Q.code)})})]}),M&&o.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:o.jsxs("div",{className:"card",style:{maxWidth:"500px",width:"100%",padding:"2rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1.5rem"},children:[o.jsx("div",{style:{width:"48px",height:"48px",background:(te=M.info)!=null&&te.hasData?"rgba(231, 76, 60, 0.1)":"rgba(39, 174, 96, 0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:(je=M.info)!=null&&je.hasData?o.jsx(z2,{size:24,color:"#e74c3c"}):o.jsx(au,{size:24,color:"var(--kb-green)"})}),o.jsxs("div",{children:[o.jsxs("h3",{style:{color:"var(--kb-navy)",margin:0},children:["Delete ",M.name,"?"]}),o.jsx("p",{style:{color:"var(--kb-gray-500)",margin:0,fontSize:"0.9rem"},children:(Ce=M.info)!=null&&Ce.hasData?"This business has associated data":"This business can be safely deleted"})]})]}),((Ve=M.info)==null?void 0:Ve.hasData)&&o.jsxs("div",{style:{background:"rgba(231, 76, 60, 0.05)",border:"1px solid rgba(231, 76, 60, 0.2)",borderRadius:"8px",padding:"1rem",marginBottom:"1.5rem"},children:[o.jsx("div",{style:{fontWeight:"600",color:"#c0392b",marginBottom:"0.5rem"},children:"Associated Data Found:"}),o.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem",color:"var(--kb-gray-600)"},children:[M.info.checkinCount>0&&o.jsxs("li",{children:[M.info.checkinCount," check-ins recorded"]}),M.info.transactionCount>0&&o.jsxs("li",{children:[M.info.transactionCount," transactions"]}),M.info.balance>0&&o.jsxs("li",{children:["$",M.info.balance.toFixed(2)," Kinderbucks balance"]})]}),o.jsx("p",{style:{margin:"0.75rem 0 0 0",fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"The business will be soft-deleted and can be restored later."})]}),((Be=M.info)==null?void 0:Be.hasData)&&o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:['Type "',M.name,'" to confirm:']}),o.jsx("input",{type:"text",value:U,onChange:Q=>H(Q.target.value),placeholder:M.name,style:{width:"100%"}})]}),o.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end"},children:[o.jsx("button",{onClick:()=>{D(null),H("")},className:"btn btn-secondary",children:"Cancel"}),(se=M.info)!=null&&se.hasData?o.jsx("button",{onClick:()=>Me(!0),className:"btn",style:{background:"#e74c3c",color:"white"},disabled:U!==M.name||K,children:K?"Deleting...":"Delete Anyway"}):o.jsx("button",{onClick:()=>Me(!1),className:"btn",style:{background:"#e74c3c",color:"white"},disabled:K,children:K?"Deleting...":"Delete"})]})]})})]})}const WB={curious:un,hooked:yr,lineAndSinker:gr,patron:Zn};function $B(){const[n,e]=j.useState([]),[t,r]=j.useState(!0),[s,l]=j.useState("all"),[c,h]=j.useState(null),d=async()=>{try{const k=bn(ut(Ee,"exchanges"),Xi("createdAt","desc")),S=await Dt(k);e(S.docs.map(T=>({id:T.id,...T.data()}))),r(!1)}catch(k){console.error("Error loading exchanges:",k),r(!1)}};j.useEffect(()=>{d()},[]);const m=async(k,S)=>{h(k);try{await Wt(tt(Ee,"exchanges",k),{status:S,processedAt:Je()}),await d()}catch(T){console.error("Error updating exchange:",T),alert("Error updating exchange status")}h(null)},g=s==="all"?n:n.filter(k=>k.status===s),y={total:n.length,pending:n.filter(k=>k.status==="pending").length,completed:n.filter(k=>k.status==="completed").length,cancelled:n.filter(k=>k.status==="cancelled").length,totalValue:n.filter(k=>k.status==="completed").reduce((k,S)=>k+(S.kinderbucksAmount||0),0)},x=k=>{switch(k){case"completed":return o.jsx(Vn,{size:18,color:"var(--kb-green)"});case"pending":return o.jsx(dr,{size:18,color:"#e67e22"});case"cancelled":return o.jsx(A2,{size:18,color:"#e74c3c"});default:return o.jsx(Us,{size:18,color:"var(--kb-gray-400)"})}},E=k=>{switch(k){case"completed":return{background:"#d4edda",color:"var(--kb-green)"};case"pending":return{background:"#fff3cd",color:"#856404"};case"cancelled":return{background:"#f8d7da",color:"#721c24"};default:return{background:"#f8f9fa",color:"var(--kb-gray-600)"}}};return t?o.jsx(en,{title:"Exchange Management",children:o.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:o.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading exchanges..."})})}):o.jsxs(en,{title:"Exchange Management",children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[o.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"#e67e22"},children:y.pending}),o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Pending"})]}),o.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-green)"},children:y.completed}),o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Completed"})]}),o.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[o.jsxs("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-gold-dark)"},children:["$",y.totalValue.toFixed(0)]}),o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Exchanged"})]})]}),o.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem",flexWrap:"wrap"},children:[{value:"all",label:`All (${y.total})`},{value:"pending",label:`Pending (${y.pending})`},{value:"completed",label:`Completed (${y.completed})`},{value:"cancelled",label:`Cancelled (${y.cancelled})`}].map(k=>o.jsx("button",{onClick:()=>l(k.value),className:s===k.value?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem"},children:k.label},k.value))}),o.jsx("div",{className:"card",children:g.length===0?o.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[o.jsx(Df,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),o.jsxs("p",{children:["No ",s!=="all"?s:""," exchanges found"]})]}):o.jsxs("div",{children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 150px",gap:"1rem",padding:"0.75rem 1rem",borderBottom:"2px solid var(--kb-navy)",fontWeight:"600",color:"var(--kb-navy)",fontSize:"0.85rem"},children:[o.jsx("div",{children:"Date"}),o.jsx("div",{children:"Amount"}),o.jsx("div",{children:"Tier & Bonus"}),o.jsx("div",{children:"Status"}),o.jsx("div",{children:"Actions"})]}),g.map(k=>{var T,P,M,D,U,H,K;const S=WB[k.tier]||un;return o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 150px",gap:"1rem",padding:"1rem",borderBottom:"1px solid var(--kb-gray-100)",alignItems:"center",background:k.status==="pending"?"rgba(230, 126, 34, 0.05)":"transparent"},children:[o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:((M=(P=(T=k.createdAt)==null?void 0:T.toDate)==null?void 0:P.call(T))==null?void 0:M.toLocaleDateString())||"Unknown"}),o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:((H=(U=(D=k.createdAt)==null?void 0:D.toDate)==null?void 0:U.call(D))==null?void 0:H.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))||""})]}),o.jsxs("div",{children:[o.jsxs("div",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:["$",k.usdAmount," USD"]}),o.jsxs("div",{style:{fontSize:"0.9rem",color:"var(--kb-gold-dark)"},children:[" $",(K=k.kinderbucksAmount)==null?void 0:K.toFixed(2)," KB"]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(S,{size:18,color:"var(--kb-gray-500)"}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.9rem",color:"var(--kb-gray-700)",textTransform:"capitalize"},children:k.tier||"curious"}),o.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--kb-green)"},children:["+",Math.round((k.bonusRate||.1)*100),"% bonus"]})]})]}),o.jsx("div",{children:o.jsxs("span",{className:"badge",style:{...E(k.status),display:"inline-flex",alignItems:"center",gap:"0.25rem"},children:[x(k.status),k.status]})}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[k.status==="pending"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>m(k.id,"completed"),disabled:c===k.id,className:"btn btn-primary",style:{padding:"0.4rem 0.75rem",fontSize:"0.8rem"},children:c===k.id?"...":"Approve"}),o.jsx("button",{onClick:()=>m(k.id,"cancelled"),disabled:c===k.id,className:"btn btn-secondary",style:{padding:"0.4rem 0.75rem",fontSize:"0.8rem"},children:"Cancel"})]}),k.status==="completed"&&o.jsx("span",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Processed"}),k.status==="cancelled"&&o.jsx("button",{onClick:()=>m(k.id,"pending"),disabled:c===k.id,className:"btn btn-secondary",style:{padding:"0.4rem 0.75rem",fontSize:"0.8rem"},children:"Reopen"})]})]},k.id)})]})})]})}const Jp={curious:un,hooked:yr,lineAndSinker:gr,patron:Zn},Zp={curious:"#888888",hooked:"#2e7d32",lineAndSinker:"#1565c0",patron:"#c9a227"};function HB(){const[n,e]=j.useState([]),[t,r]=j.useState([]),[s,l]=j.useState(!0),[c,h]=j.useState("checkins"),[d,m]=j.useState("all");j.useEffect(()=>{async function k(){try{const T=(await Dt(ut(Ee,"members"))).docs.map(M=>({id:M.id,...M.data()})),P=await gi();e(T),r(P),l(!1)}catch(S){console.error("Error loading members:",S),l(!1)}}k()},[]);const g=k=>{const S=t.find(T=>T.code===k);return S?S.name:k},y=[...n].sort((k,S)=>{var T,P,M,D,U,H;switch(c){case"checkins":return(S.totalCheckins||0)-(k.totalCheckins||0);case"businesses":return(((T=S.businessesVisited)==null?void 0:T.length)||0)-(((P=k.businessesVisited)==null?void 0:P.length)||0);case"recent":const K=((D=(M=k.lastCheckin)==null?void 0:M.toDate)==null?void 0:D.call(M))||new Date(0);return(((H=(U=S.lastCheckin)==null?void 0:U.toDate)==null?void 0:H.call(U))||new Date(0))-K;default:return 0}}),x=d==="all"?y:y.filter(k=>k.tier===d),E={total:n.length,curious:n.filter(k=>k.tier==="curious").length,hooked:n.filter(k=>k.tier==="hooked").length,lineAndSinker:n.filter(k=>k.tier==="lineAndSinker").length,patron:n.filter(k=>k.tier==="patron").length,totalCheckins:n.reduce((k,S)=>k+(S.totalCheckins||0),0)};return s?o.jsx(en,{title:"Member Management",children:o.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:o.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading members..."})})}):o.jsxs(en,{title:"Member Management",children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(130px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[o.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:E.total}),o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Members"})]}),Object.entries(Jp).map(([k,S])=>{var T;return o.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[o.jsx(S,{size:20,color:Zp[k]}),o.jsx("span",{style:{fontSize:"1.5rem",fontWeight:"700",color:Zp[k]},children:E[k]})]}),o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)",textTransform:"capitalize"},children:((T=fr[k])==null?void 0:T.name)||k})]},k)})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[o.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[o.jsx("button",{onClick:()=>m("all"),className:d==="all"?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem"},children:"All"}),Object.entries(Jp).map(([k,S])=>o.jsx("button",{onClick:()=>m(k),className:d===k?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:o.jsx(S,{size:16})},k))]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx("span",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"Sort by:"}),o.jsxs("select",{value:c,onChange:k=>h(k.target.value),style:{padding:"0.5rem"},children:[o.jsx("option",{value:"checkins",children:"Most Check-ins"}),o.jsx("option",{value:"businesses",children:"Most Businesses"}),o.jsx("option",{value:"recent",children:"Recent Activity"})]})]})]}),o.jsx("div",{className:"card",children:x.length===0?o.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[o.jsx(Or,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),o.jsx("p",{children:"No members found"})]}):o.jsxs("div",{children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 2fr",gap:"1rem",padding:"0.75rem 1rem",borderBottom:"2px solid var(--kb-navy)",fontWeight:"600",color:"var(--kb-navy)",fontSize:"0.85rem"},children:[o.jsx("div",{children:"Member"}),o.jsx("div",{children:"Tier"}),o.jsx("div",{children:"Activity"}),o.jsx("div",{children:"Businesses Visited"})]}),x.map(k=>{var D,U,H,K,A;const S=Jp[k.tier]||un,T=Zp[k.tier]||"#888",P=fr[k.tier]||fr.curious,M=((D=k.businessesVisited)==null?void 0:D.length)||0;return o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 2fr",gap:"1rem",padding:"1rem",borderBottom:"1px solid var(--kb-gray-100)",alignItems:"center"},children:[o.jsxs("div",{children:[o.jsxs("div",{style:{fontFamily:"monospace",fontSize:"0.85rem",color:"var(--kb-gray-500)",wordBreak:"break-all"},children:[k.id.substring(0,16),"..."]}),k.lastCheckin&&o.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-400)",display:"flex",alignItems:"center",gap:"0.25rem",marginTop:"0.25rem"},children:[o.jsx(Mf,{size:12}),"Last: ",((K=(H=(U=k.lastCheckin)==null?void 0:U.toDate)==null?void 0:H.call(U))==null?void 0:K.toLocaleDateString())||"Unknown"]})]}),o.jsxs("div",{children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:T,fontWeight:"600"},children:[o.jsx(S,{size:20}),P.name]}),o.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:[Math.round(P.bonus*100),"% bonus"]})]}),o.jsxs("div",{children:[o.jsxs("div",{style:{fontWeight:"600",color:"var(--kb-navy)",display:"flex",alignItems:"center",gap:"0.25rem"},children:[o.jsx(Qs,{size:16}),k.totalCheckins||0]}),o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:"check-ins"})]}),o.jsxs("div",{children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",marginBottom:"0.5rem",color:"var(--kb-gray-600)"},children:[o.jsx(yl,{size:14}),o.jsx("span",{style:{fontWeight:"500"},children:M}),o.jsx("span",{style:{fontSize:"0.85rem"},children:"businesses"})]}),((A=k.businessesVisited)==null?void 0:A.length)>0&&o.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.25rem"},children:[k.businessesVisited.slice(0,3).map(C=>o.jsx("span",{style:{fontSize:"0.75rem",padding:"0.15rem 0.5rem",background:"var(--kb-gray-100)",borderRadius:"4px",color:"var(--kb-gray-600)"},children:g(C)},C)),k.businessesVisited.length>3&&o.jsxs("span",{style:{fontSize:"0.75rem",color:"var(--kb-gray-400)"},children:["+",k.businessesVisited.length-3," more"]})]})]})]},k.id)})]})}),o.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"var(--kb-gray-50)",borderRadius:"8px",textAlign:"center",color:"var(--kb-gray-600)",fontSize:"0.9rem"},children:["Total of ",o.jsx("strong",{children:E.totalCheckins})," check-ins across ",o.jsx("strong",{children:E.total})," members"]})]})}const eg={admin:{label:"Admin",color:"#dc2626",bgColor:"#fef2f2",Icon:Gh,description:"Full system access"},business:{label:"Business",color:"#2563eb",bgColor:"#eff6ff",Icon:Mt,description:"Business owner access"},member:{label:"Member",color:"var(--kb-green)",bgColor:"#f0fdf4",Icon:il,description:"Regular member"}};function KB(){var $,te,je,Ce,Ve,Be;const[n,e]=j.useState([]),[t,r]=j.useState([]),[s,l]=j.useState([]),[c,h]=j.useState(!0),[d,m]=j.useState(""),[g,y]=j.useState("all"),[x,E]=j.useState(null),[k,S]=j.useState(null),[T,P]=j.useState(""),[M,D]=j.useState(null),[U,H]=j.useState(!1),[K,A]=j.useState(null),[C,N]=j.useState(""),[L,B]=j.useState(!1),F=async()=>{const[se,Q,fe]=await Promise.all([hM(),gi(),yM()]);e(se.filter(Ke=>!Ke.isDeleted)),r(fe),l(Q),h(!1)};j.useEffect(()=>{F()},[]);const V=async(se,Q)=>{D(`${se}-${Q}`);try{const fe=n.find(xt=>xt.id===se);Pr(fe).includes(Q)?await uM(se,Q):await cM(se,Q),P("Role updated successfully"),setTimeout(()=>P(""),3e3),await F()}catch(fe){console.error("Error updating role:",fe),alert("Error updating role")}D(null)},Me=async(se,Q)=>{try{await dM(se,Q),P("Business assigned successfully"),setTimeout(()=>P(""),3e3),await F(),S(null)}catch(fe){console.error("Error assigning business:",fe),alert("Error assigning business")}},We=async se=>{const Q=await S2(se.id);A({user:se,info:Q}),N("")},st=async(se=!1)=>{if(K){B(!0);try{await mM(K.user.id,null,se),A(null),N(""),P("User deleted successfully"),setTimeout(()=>P(""),3e3),await F()}catch(Q){console.error("Error deleting user:",Q),alert(Q.message||"Error deleting user")}B(!1)}},Ie=async se=>{try{await pM(se),P("User restored successfully"),setTimeout(()=>P(""),3e3),await F()}catch(Q){console.error("Error restoring user:",Q),alert("Error restoring user")}},re=n.filter(se=>{var Ke,xt;const Q=((Ke=se.email)==null?void 0:Ke.toLowerCase().includes(d.toLowerCase()))||((xt=se.displayName)==null?void 0:xt.toLowerCase().includes(d.toLowerCase()));if(g==="all")return Q;const fe=Pr(se);return Q&&fe.includes(g)}),me={total:n.length,admins:n.filter(se=>Pr(se).includes("admin")).length,businesses:n.filter(se=>Pr(se).includes("business")).length,members:n.filter(se=>Pr(se).includes("member")).length},ue=se=>se?(se.toDate?se.toDate():new Date(se)).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Never";return c?o.jsx(en,{title:"User Management",children:o.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:o.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading..."})})}):o.jsxs(en,{title:"User Management",children:[T&&o.jsxs("div",{style:{position:"fixed",top:"100px",right:"2rem",background:"var(--kb-green)",color:"white",padding:"1rem 1.5rem",borderRadius:"8px",display:"flex",alignItems:"center",gap:"0.75rem",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:1e3},children:[o.jsx(Vn,{size:20}),o.jsx("span",{children:T})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[o.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:me.total}),o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Users"})]}),o.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"#dc2626"},children:me.admins}),o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Admins"})]}),o.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"#2563eb"},children:me.businesses}),o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Business Users"})]}),o.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-green)"},children:me.members}),o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Members"})]})]}),o.jsx("div",{className:"card",style:{marginBottom:"2rem"},children:o.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap",alignItems:"center"},children:[o.jsxs("div",{style:{flex:1,minWidth:"200px",position:"relative"},children:[o.jsx(Vf,{size:18,color:"var(--kb-gray-400)",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)"}}),o.jsx("input",{type:"text",placeholder:"Search by name or email...",value:d,onChange:se=>m(se.target.value),style:{width:"100%",paddingLeft:"40px"}})]}),o.jsxs("select",{value:g,onChange:se=>y(se.target.value),style:{minWidth:"150px"},children:[o.jsx("option",{value:"all",children:"All Roles"}),o.jsx("option",{value:"admin",children:"Has Admin"}),o.jsx("option",{value:"business",children:"Has Business"}),o.jsx("option",{value:"member",children:"Has Member"})]})]})}),o.jsxs("div",{className:"card",children:[o.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Or,{size:20})," All Users (",re.length,")"]}),re.length===0?o.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[o.jsx(Or,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),o.jsx("p",{children:"No users found"})]}):o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:re.map(se=>{const Q=Pr(se),fe=Q.includes("admin")?"admin":Q.includes("business")?"business":"member",Ke=eg[fe],xt=Ke.Icon;return o.jsxs("div",{style:{background:"var(--kb-gray-50)",border:"1px solid var(--kb-gray-200)",borderRadius:"12px",padding:"1.25rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",flexWrap:"wrap",gap:"1rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[o.jsx("div",{style:{width:"48px",height:"48px",background:Ke.bgColor,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(xt,{size:24,color:Ke.color})}),o.jsxs("div",{children:[o.jsxs("div",{style:{fontWeight:"600",color:"var(--kb-navy)",fontSize:"1.05rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[se.displayName||"Unnamed User",Q.includes("admin")&&o.jsx(Zn,{size:16,color:"#c9a227"})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:[o.jsx(M2,{size:14}),se.email]}),se.businessCode&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#2563eb",fontSize:"0.85rem",marginTop:"0.25rem"},children:[o.jsx(Mt,{size:14}),se.businessCode]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"var(--kb-gray-400)",fontSize:"0.8rem",marginTop:"0.25rem"},children:[o.jsx(Mf,{size:12}),"Last login: ",ue(se.lastLogin)]})]})]}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:"0.75rem"},children:[o.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:Q.map(Z=>{const ye=eg[Z];return ye?o.jsxs("div",{style:{padding:"0.35rem 0.75rem",background:ye.bgColor,color:ye.color,borderRadius:"6px",fontSize:"0.8rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.35rem"},children:[o.jsx(ye.Icon,{size:14}),ye.label]},Z):null})}),o.jsx("button",{onClick:()=>E(x===se.id?null:se.id),className:"btn btn-secondary",style:{padding:"0.4rem 0.75rem",fontSize:"0.8rem"},children:x===se.id?"Done":"Edit Roles"})]})]}),x===se.id&&o.jsxs("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:"1px solid var(--kb-gray-200)"},children:[o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)",marginBottom:"0.75rem"},children:"Toggle roles for this user:"}),o.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",marginBottom:"1rem"},children:Object.entries(eg).map(([Z,ye])=>{const Le=Q.includes(Z),Ue=M===`${se.id}-${Z}`;return o.jsxs("button",{onClick:()=>V(se.id,Z),disabled:Ue,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",borderRadius:"8px",border:`2px solid ${Le?ye.color:"var(--kb-gray-300)"}`,background:Le?ye.bgColor:"white",color:Le?ye.color:"var(--kb-gray-500)",cursor:Ue?"wait":"pointer",fontWeight:"500",fontSize:"0.9rem",opacity:Ue?.6:1},children:[Le?o.jsx(LV,{size:16}):o.jsx(vl,{size:16}),o.jsx(ye.Icon,{size:16}),ye.label]},Z)})}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[Q.includes("business")&&o.jsxs("button",{onClick:()=>S(se.id),className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem"},children:[o.jsx(Mt,{size:16}),se.businessCode?`Change Business (${se.businessCode})`:"Assign Business"]}),o.jsxs("button",{onClick:()=>We(se),className:"btn",style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem",background:"var(--kb-gray-100)",color:"var(--kb-gray-600)"},children:[o.jsx(au,{size:16}),"Delete User"]})]})]})]},se.id)})})]}),t.length>0&&o.jsxs("div",{className:"card",style:{marginTop:"2rem"},children:[o.jsxs("button",{onClick:()=>H(!U),style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",background:"none",border:"none",cursor:"pointer",padding:0},children:[o.jsxs("h3",{style:{color:"var(--kb-gray-500)",display:"flex",alignItems:"center",gap:"0.5rem",margin:0},children:[o.jsx(I2,{size:20})," Deleted Users (",t.length,")"]}),o.jsx("span",{style:{color:"var(--kb-gray-400)"},children:U?"":""})]}),U&&o.jsx("div",{style:{marginTop:"1.5rem",display:"flex",flexDirection:"column",gap:"0.75rem"},children:t.map(se=>{var Q;return o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem",background:"var(--kb-gray-50)",borderRadius:"8px",opacity:.7},children:[o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"500",color:"var(--kb-gray-600)"},children:se.displayName||"Unnamed User"}),o.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-400)"},children:[se.email,"  Deleted ",(Q=se.deletedAt)!=null&&Q.toDate?se.deletedAt.toDate().toLocaleDateString():"recently"]})]}),o.jsxs("button",{onClick:()=>Ie(se.id),className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(O2,{size:16})," Restore"]})]},se.id)})})]}),k&&o.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:1e3},children:o.jsxs("div",{className:"card",style:{maxWidth:"400px",width:"100%",padding:"1.5rem"},children:[o.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Assign Business"}),o.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1rem"},children:"Select a business to assign to this user:"}),o.jsx("div",{style:{maxHeight:"300px",overflowY:"auto",marginBottom:"1rem"},children:s.map(se=>o.jsxs("button",{onClick:()=>Me(k,se.code),style:{display:"flex",alignItems:"center",gap:"0.75rem",width:"100%",padding:"0.75rem",border:"1px solid var(--kb-gray-200)",borderRadius:"8px",background:"white",cursor:"pointer",marginBottom:"0.5rem",textAlign:"left"},children:[o.jsx(Mt,{size:18,color:"var(--kb-navy)"}),o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:se.name}),o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:se.code})]})]},se.code))}),o.jsx("button",{onClick:()=>S(null),className:"btn btn-secondary",style:{width:"100%"},children:"Cancel"})]})}),K&&o.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:o.jsxs("div",{className:"card",style:{maxWidth:"500px",width:"100%",padding:"2rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1.5rem"},children:[o.jsx("div",{style:{width:"48px",height:"48px",background:($=K.info)!=null&&$.hasData?"rgba(231, 76, 60, 0.1)":"rgba(39, 174, 96, 0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:(te=K.info)!=null&&te.hasData?o.jsx(z2,{size:24,color:"#e74c3c"}):o.jsx(au,{size:24,color:"var(--kb-green)"})}),o.jsxs("div",{children:[o.jsxs("h3",{style:{color:"var(--kb-navy)",margin:0},children:["Delete ",K.user.displayName||K.user.email,"?"]}),o.jsx("p",{style:{color:"var(--kb-gray-500)",margin:0,fontSize:"0.9rem"},children:(je=K.info)!=null&&je.hasData?"This user has associated data":"This user can be safely deleted"})]})]}),((Ce=K.info)==null?void 0:Ce.hasData)&&o.jsxs("div",{style:{background:"rgba(231, 76, 60, 0.05)",border:"1px solid rgba(231, 76, 60, 0.2)",borderRadius:"8px",padding:"1rem",marginBottom:"1.5rem"},children:[o.jsx("div",{style:{fontWeight:"600",color:"#c0392b",marginBottom:"0.5rem"},children:"Associated Data Found:"}),o.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem",color:"var(--kb-gray-600)"},children:[K.info.checkinCount>0&&o.jsxs("li",{children:[K.info.checkinCount," check-ins recorded"]}),K.info.exchangeCount>0&&o.jsxs("li",{children:[K.info.exchangeCount," exchange requests"]}),K.info.isBusinessOwner&&o.jsxs("li",{children:["Business owner: ",K.info.businessCode]})]}),o.jsx("p",{style:{margin:"0.75rem 0 0 0",fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"The user will be soft-deleted and can be restored later."})]}),((Ve=K.info)==null?void 0:Ve.hasData)&&o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:['Type "',K.user.email,'" to confirm:']}),o.jsx("input",{type:"text",value:C,onChange:se=>N(se.target.value),placeholder:K.user.email,style:{width:"100%"}})]}),o.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end"},children:[o.jsx("button",{onClick:()=>{A(null),N("")},className:"btn btn-secondary",children:"Cancel"}),(Be=K.info)!=null&&Be.hasData?o.jsx("button",{onClick:()=>st(!0),className:"btn",style:{background:"#e74c3c",color:"white"},disabled:C!==K.user.email||L,children:L?"Deleting...":"Delete Anyway"}):o.jsx("button",{onClick:()=>st(!1),className:"btn",style:{background:"#e74c3c",color:"white"},disabled:L,children:L?"Deleting...":"Delete"})]})]})})]})}const _k={curious:un,hooked:yr,lineAndSinker:gr,patron:Zn},Sk={curious:"#6b7280",hooked:"#16a34a",lineAndSinker:"#2563eb",patron:"#ca8a04"};function qB(){const{businessCode:n}=uy(),[e,t]=j.useState(null),[r,s]=j.useState([]),[l,c]=j.useState(!0),[h,d]=j.useState(!1);j.useEffect(()=>{async function S(){const[T,P]=await Promise.all([Pu(n),UT(n)]);t(T),s(P),c(!1)}S()},[n]);const m=()=>{const S=`https://harmonicsystems.github.io/kinderbucks/#/checkin/${n}`;navigator.clipboard.writeText(S),d(!0),setTimeout(()=>d(!1),2e3)},g=r.filter(S=>{var M;const T=(M=S.timestamp)!=null&&M.toDate?S.timestamp.toDate():new Date(S.timestamp),P=new Date;return T.toDateString()===P.toDateString()}).length,y=r.filter(S=>{var M;const T=(M=S.timestamp)!=null&&M.toDate?S.timestamp.toDate():new Date(S.timestamp),P=new Date;return P.setDate(P.getDate()-7),T>P}).length,x=new Set(r.map(S=>S.visitorId)).size,E=r.reduce((S,T)=>{const P=T.memberTier||"curious";return S[P]=(S[P]||0)+1,S},{});if(l)return o.jsx(en,{title:"Business Details",children:o.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:o.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading..."})})});if(!e)return o.jsx(en,{title:"Business Details",children:o.jsxs("div",{style:{textAlign:"center",padding:"4rem"},children:[o.jsx(Mt,{size:48,color:"var(--kb-gray-300)",style:{marginBottom:"1rem"}}),o.jsx("h2",{style:{color:"var(--kb-navy)"},children:"Business Not Found"}),o.jsxs("p",{style:{color:"var(--kb-gray-500)",marginBottom:"1.5rem"},children:['No business with code "',n,'" exists.']}),o.jsx(he,{to:"/admin/businesses",className:"btn btn-primary",children:"Back to Businesses"})]})});const k=`https://harmonicsystems.github.io/kinderbucks/#/checkin/${n}`;return o.jsxs(en,{title:"Business Details",children:[o.jsxs(he,{to:"/admin/businesses",style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",color:"var(--kb-gray-500)",marginBottom:"1.5rem",fontSize:"0.9rem"},children:[o.jsx(C2,{size:16})," Back to Directory"]}),o.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",flexWrap:"wrap",gap:"1.5rem",marginBottom:"2rem"},children:[o.jsxs("div",{children:[o.jsx("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.25rem 0.75rem",background:e.isActive?"rgba(39, 174, 96, 0.1)":"rgba(231, 76, 60, 0.1)",color:e.isActive?"var(--kb-green)":"#e74c3c",borderRadius:"6px",fontSize:"0.85rem",fontWeight:"600",marginBottom:"0.75rem"},children:e.isActive?"Active":"Inactive"}),o.jsx("h1",{style:{color:"var(--kb-navy)",marginBottom:"0.25rem",fontSize:"2rem"},children:e.name}),o.jsx("div",{style:{fontFamily:"monospace",color:"var(--kb-gray-500)"},children:n})]}),o.jsxs("div",{className:"card",style:{padding:"1.5rem",textAlign:"center"},children:[o.jsx("div",{style:{background:"white",borderRadius:"12px",padding:"12px",marginBottom:"1rem"},children:o.jsx(wl,{value:k,size:120,showFrame:!1})}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[o.jsxs("button",{onClick:m,className:"btn btn-secondary",style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.25rem",fontSize:"0.85rem"},children:[o.jsx(h0,{size:14})," ",h?"Copied!":"Copy URL"]}),o.jsxs("button",{onClick:()=>window.print(),className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"0.85rem"},children:[o.jsx(P2,{size:14})," Print"]})]})]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[o.jsx("div",{className:"card",style:{padding:"1.25rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(39, 174, 96, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(Qs,{size:22,color:"var(--kb-green)"})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:e.checkinCount||0}),o.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Total Check-ins"})]})]})}),o.jsx("div",{className:"card",style:{padding:"1.25rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(52, 152, 219, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(dr,{size:22,color:"#3498db"})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:g}),o.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Today"})]})]})}),o.jsx("div",{className:"card",style:{padding:"1.25rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(155, 89, 182, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(Mf,{size:22,color:"#9b59b6"})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:y}),o.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"This Week"})]})]})}),o.jsx("div",{className:"card",style:{padding:"1.25rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(201, 162, 39, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(Or,{size:22,color:"var(--kb-gold-dark)"})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:x}),o.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Unique Visitors"})]})]})})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem"},children:[o.jsxs("div",{className:"card",children:[o.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem"},children:"Check-ins by Member Tier"}),Object.keys(E).length===0?o.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"No check-ins yet"}):o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:["curious","hooked","lineAndSinker","patron"].map(S=>{const T=E[S]||0;if(T===0&&!E[S])return null;const P=_k[S],M=Sk[S],D={curious:"Curious",hooked:"Hooked",lineAndSinker:"Line & Sinker",patron:"Village Patron"},U=Math.max(...Object.values(E),1),H=T/U*100;return o.jsxs("div",{children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.5rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(P,{size:18,color:M}),o.jsx("span",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:D[S]})]}),o.jsx("span",{style:{color:"var(--kb-gray-500)",fontWeight:"600"},children:T})]}),o.jsx("div",{style:{height:"8px",background:"var(--kb-gray-100)",borderRadius:"4px",overflow:"hidden"},children:o.jsx("div",{style:{width:`${H}%`,height:"100%",background:M,borderRadius:"4px"}})})]},S)}).filter(Boolean)})]}),o.jsxs("div",{className:"card",children:[o.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Check-in Information"}),o.jsxs("div",{style:{marginBottom:"1rem"},children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontSize:"0.85rem"},children:"Check-in URL"}),o.jsx("input",{type:"text",value:k,readOnly:!0,style:{width:"100%",fontFamily:"monospace",fontSize:"0.85rem"}})]}),o.jsxs("div",{style:{background:"var(--kb-cream)",borderRadius:"8px",padding:"1rem"},children:[o.jsx("h4",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem",fontSize:"0.95rem"},children:"How Check-ins Work"}),o.jsxs("ul",{style:{color:"var(--kb-gray-600)",fontSize:"0.9rem",paddingLeft:"1.25rem",lineHeight:1.6},children:[o.jsx("li",{children:"Customer scans QR code with phone"}),o.jsx("li",{children:"App shows verification code + bonus %"}),o.jsx("li",{children:"Customer shows screen to cashier"}),o.jsx("li",{children:"1 hour cooldown between check-ins"})]})]})]})]}),o.jsxs("div",{className:"card",style:{marginTop:"1.5rem"},children:[o.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(dr,{size:20})," Recent Check-ins"]}),r.length===0?o.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[o.jsx(Or,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),o.jsx("p",{children:"No check-ins recorded yet"})]}):o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:r.slice(0,25).map((S,T)=>{var U,H;const P=(U=S.timestamp)!=null&&U.toDate?S.timestamp.toDate():new Date(S.timestamp),M=_k[S.memberTier]||un,D=Sk[S.memberTier]||"#6b7280";return o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"var(--kb-gray-50)",borderRadius:"8px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("div",{style:{width:"36px",height:"36px",background:"var(--kb-green)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(Vn,{size:18,color:"white"})}),o.jsxs("div",{children:[o.jsxs("div",{style:{fontWeight:"500",color:"var(--kb-navy)",display:"flex",alignItems:"center",gap:"0.5rem"},children:["Check-in",S.memberTier&&o.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",fontSize:"0.75rem",color:D,background:`${D}15`,padding:"0.125rem 0.5rem",borderRadius:"4px"},children:[o.jsx(M,{size:12}),S.memberTier]})]}),o.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)",fontFamily:"monospace"},children:[(H=S.visitorId)==null?void 0:H.substring(0,8),"..."]})]})]}),o.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:P.toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]},S.id||T)})})]})]})}function GB(){const{user:n}=Ur(),[e,t]=j.useState([]),[r,s]=j.useState(!0),[l,c]=j.useState("all"),[h,d]=j.useState(null),m=async()=>{try{const S=await RB();t(S),s(!1)}catch(S){console.error("Error loading redemptions:",S),s(!1)}};j.useEffect(()=>{m()},[]);const g=async(S,T)=>{d(S);try{await AB(S,T,n.uid),await m()}catch(P){console.error("Error processing redemption:",P),alert("Error processing redemption: "+P.message)}d(null)},y=l==="all"?e:e.filter(S=>S.status===l),x={total:e.length,pending:e.filter(S=>S.status==="pending").length,approved:e.filter(S=>S.status==="approved").length,rejected:e.filter(S=>S.status==="rejected").length,totalValue:e.filter(S=>S.status==="approved").reduce((S,T)=>S+(T.amount||0),0)},E=S=>{switch(S){case"approved":return o.jsx(Vn,{size:18,color:"var(--kb-green)"});case"pending":return o.jsx(dr,{size:18,color:"#e67e22"});case"rejected":return o.jsx(A2,{size:18,color:"#e74c3c"});default:return o.jsx(Us,{size:18,color:"var(--kb-gray-400)"})}},k=S=>{switch(S){case"approved":return{background:"#d4edda",color:"var(--kb-green)"};case"pending":return{background:"#fff3cd",color:"#856404"};case"rejected":return{background:"#f8d7da",color:"#721c24"};default:return{background:"#f8f9fa",color:"var(--kb-gray-600)"}}};return r?o.jsx(en,{title:"Redemption Requests",children:o.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:o.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading redemptions..."})})}):o.jsxs(en,{title:"Redemption Requests",children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[o.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"#e67e22"},children:x.pending}),o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Pending"})]}),o.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-green)"},children:x.approved}),o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Approved"})]}),o.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"#e74c3c"},children:x.rejected}),o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Rejected"})]}),o.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[o.jsxs("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-gold-dark)"},children:["$",x.totalValue.toFixed(0)]}),o.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Redeemed"})]})]}),o.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem",flexWrap:"wrap"},children:[{value:"all",label:`All (${x.total})`},{value:"pending",label:`Pending (${x.pending})`},{value:"approved",label:`Approved (${x.approved})`},{value:"rejected",label:`Rejected (${x.rejected})`}].map(S=>o.jsx("button",{onClick:()=>c(S.value),className:l===S.value?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem"},children:S.label},S.value))}),o.jsx("div",{className:"card",children:y.length===0?o.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[o.jsx(Wi,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),o.jsxs("p",{children:["No ",l!=="all"?l:""," redemption requests"]})]}):o.jsxs("div",{children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 150px",gap:"1rem",padding:"0.75rem 1rem",borderBottom:"2px solid var(--kb-navy)",fontWeight:"600",color:"var(--kb-navy)",fontSize:"0.85rem"},children:[o.jsx("div",{children:"Date"}),o.jsx("div",{children:"Business"}),o.jsx("div",{children:"Amount"}),o.jsx("div",{children:"Status"}),o.jsx("div",{children:"Actions"})]}),y.map(S=>{var T,P,M,D,U,H,K;return o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 150px",gap:"1rem",padding:"1rem",borderBottom:"1px solid var(--kb-gray-100)",alignItems:"center",background:S.status==="pending"?"rgba(230, 126, 34, 0.05)":"transparent"},children:[o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:((M=(P=(T=S.createdAt)==null?void 0:T.toDate)==null?void 0:P.call(T))==null?void 0:M.toLocaleDateString())||"Unknown"}),o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:((H=(U=(D=S.createdAt)==null?void 0:D.toDate)==null?void 0:U.call(D))==null?void 0:H.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))||""})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Mt,{size:18,color:"var(--kb-gray-400)"}),o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:S.businessName||S.businessCode}),o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:S.businessCode})]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Kh,{size:18,color:"var(--kb-gold-dark)"}),o.jsxs("span",{style:{fontSize:"1.25rem",fontWeight:"600",color:"var(--kb-navy)"},children:["$",(K=S.amount)==null?void 0:K.toFixed(2)]})]}),o.jsx("div",{children:o.jsxs("span",{className:"badge",style:{...k(S.status),display:"inline-flex",alignItems:"center",gap:"0.25rem"},children:[E(S.status),S.status]})}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[S.status==="pending"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>g(S.id,!0),disabled:h===S.id,className:"btn btn-primary",style:{padding:"0.4rem 0.75rem",fontSize:"0.8rem"},children:h===S.id?"...":"Approve"}),o.jsx("button",{onClick:()=>g(S.id,!1),disabled:h===S.id,className:"btn btn-secondary",style:{padding:"0.4rem 0.75rem",fontSize:"0.8rem"},children:"Reject"})]}),S.status==="approved"&&o.jsx("span",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Processed"}),S.status==="rejected"&&o.jsx("span",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Rejected"})]})]},S.id)})]})})]})}function QB(){const{profile:n}=Ur(),e=Js(),[t,r]=j.useState(""),[s,l]=j.useState(!1),[c,h]=j.useState(null),[d,m]=j.useState(""),[g,y]=j.useState(!1),[x,E]=j.useState(null),[k,S]=j.useState("");j.useState(()=>{async function U(){if(n!=null&&n.businessCode){const H=await Pu(n.businessCode);H&&S(H.name)}}U()},[n==null?void 0:n.businessCode]);const T=async U=>{U.preventDefault(),m(""),h(null);const H=t.trim().toUpperCase();if(!H){m("Please enter a serial number");return}l(!0);try{const K=await fB(H);K.valid?h(K.kb):m(K.error)}catch(K){console.error("Validation error:",K),m("Failed to validate serial number")}l(!1)},P=async()=>{if(!(!c||!(n!=null&&n.businessCode))){y(!0);try{await IB(c.serial,n.businessCode,k),E({serial:c.serial,amount:c.denomination}),h(null),r("")}catch(U){console.error("Payment error:",U),m("Failed to record payment")}y(!1)}},M=()=>{r(""),h(null),m(""),E(null)};if(!(n!=null&&n.businessCode))return o.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"var(--kb-cream)",padding:"2rem"},children:o.jsxs("div",{className:"card",style:{maxWidth:"400px",textAlign:"center",padding:"2rem"},children:[o.jsx(Us,{size:48,color:"var(--kb-gray-400)",style:{marginBottom:"1rem"}}),o.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"No Business Assigned"}),o.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem"},children:"You need a business account to accept payments."}),o.jsx(he,{to:"/",className:"btn btn-primary",children:"Go Home"})]})});const D=U=>{switch(U){case 1:return"#27ae60";case 5:return"#3498db";case 10:return"#9b59b6";case 20:return"#e67e22";case 50:return"#c0392b";default:return"var(--kb-gold)"}};return o.jsxs("div",{style:{minHeight:"100vh",background:"var(--kb-navy)",display:"flex",flexDirection:"column"},children:[o.jsxs("header",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem 1.5rem",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:[o.jsxs(he,{to:"/business/dashboard",style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--kb-gray-300)",textDecoration:"none"},children:[o.jsx(C2,{size:20}),"Back to Dashboard"]}),o.jsx("div",{style:{color:"var(--kb-gold)",fontWeight:"500"},children:k})]}),o.jsx("main",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem"},children:o.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{width:"100%",maxWidth:"500px"},children:[x&&o.jsxs("div",{className:"card",style:{padding:"3rem 2rem",textAlign:"center"},children:[o.jsx(pe.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200,damping:15},children:o.jsx("div",{style:{width:"80px",height:"80px",background:"rgba(39, 174, 96, 0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.5rem"},children:o.jsx(Vn,{size:40,color:"var(--kb-green)"})})}),o.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"Payment Accepted"}),o.jsxs("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem"},children:["$",x.amount," Kinderbuck has been added to your balance"]}),o.jsx("div",{style:{background:"var(--kb-gray-50)",borderRadius:"8px",padding:"1rem",marginBottom:"2rem",fontFamily:"monospace",fontSize:"1.25rem",color:"var(--kb-navy)"},children:x.serial}),o.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[o.jsxs("button",{onClick:M,className:"btn btn-gold",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(vl,{size:18}),"Accept Another"]}),o.jsx("button",{onClick:()=>e("/business/dashboard"),className:"btn btn-secondary",children:"Done"})]})]}),c&&!x&&o.jsxs("div",{className:"card",style:{padding:"2rem"},children:[o.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[o.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"Confirm Payment"}),o.jsx("p",{style:{color:"var(--kb-gray-600)"},children:"Review the Kinderbuck details below"})]}),o.jsx("div",{style:{background:"linear-gradient(135deg, var(--kb-cream) 0%, var(--kb-gray-100) 100%)",borderRadius:"16px",padding:"2rem",marginBottom:"1.5rem",border:`3px solid ${D(c.denomination)}`},children:o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"var(--kb-gray-500)",textTransform:"uppercase",letterSpacing:"0.1em",marginBottom:"0.5rem"},children:"Serial Number"}),o.jsx("div",{style:{fontFamily:"monospace",fontSize:"1.5rem",fontWeight:"600",color:"var(--kb-navy)",marginBottom:"1.5rem"},children:c.serial}),o.jsxs("div",{style:{fontSize:"4rem",fontWeight:"700",color:D(c.denomination),lineHeight:1},children:["$",c.denomination]}),o.jsx("div",{style:{fontSize:"0.9rem",color:"var(--kb-gray-600)",marginTop:"0.5rem"},children:"Kinderbuck"})]})}),d&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",background:"#fef2f2",borderRadius:"8px",color:"#dc2626",marginBottom:"1rem",fontSize:"0.9rem"},children:[o.jsx(Us,{size:18}),d]}),o.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[o.jsxs("button",{onClick:M,className:"btn btn-secondary",style:{flex:1},disabled:g,children:[o.jsx(g0,{size:18,style:{marginRight:"0.5rem"}}),"Cancel"]}),o.jsx("button",{onClick:P,className:"btn btn-primary",style:{flex:1},disabled:g,children:g?"Processing...":o.jsxs(o.Fragment,{children:[o.jsx(Vn,{size:18,style:{marginRight:"0.5rem"}}),"Accept $",c.denomination]})})]})]}),!c&&!x&&o.jsxs("div",{className:"card",style:{padding:"2rem"},children:[o.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[o.jsx("div",{style:{width:"64px",height:"64px",background:"rgba(201, 162, 39, 0.1)",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:o.jsx(Wi,{size:32,color:"var(--kb-gold-dark)"})}),o.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"Accept Kinderbuck Payment"}),o.jsx("p",{style:{color:"var(--kb-gray-600)"},children:"Enter the serial number from the physical bill"})]}),o.jsxs("form",{onSubmit:T,children:[o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Serial Number"}),o.jsx("input",{type:"text",value:t,onChange:U=>r(U.target.value.toUpperCase()),placeholder:"KB-0001",style:{width:"100%",fontFamily:"monospace",fontSize:"1.25rem",textAlign:"center",letterSpacing:"0.1em"},autoFocus:!0})]}),d&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",background:"#fef2f2",borderRadius:"8px",color:"#dc2626",marginBottom:"1rem",fontSize:"0.9rem"},children:[o.jsx(Us,{size:18}),d]}),o.jsx("button",{type:"submit",className:"btn btn-gold",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",padding:"1rem",fontSize:"1.1rem"},disabled:s,children:s?"Validating...":o.jsxs(o.Fragment,{children:[o.jsx(Vf,{size:20}),"Validate"]})})]}),o.jsxs("div",{style:{marginTop:"2rem",padding:"1rem",background:"var(--kb-gray-50)",borderRadius:"8px",fontSize:"0.85rem",color:"var(--kb-gray-600)"},children:[o.jsx("strong",{children:"Tip:"})," The serial number is printed on the front of the Kinderbuck bill, typically in the format KB-XXXX."]})]})]})})]})}const YB={AVIARY:{address:"4 Hudson Street, Kinderhook, NY 12106",phone:"(518) 610-8543",website:"https://theaviarykinderhook.com",hours:{monday:"Closed",tuesday:"Closed",wednesday:"5:00 PM - 9:00 PM",thursday:"5:00 PM - 9:00 PM",friday:"5:00 PM - 10:00 PM",saturday:"5:00 PM - 10:00 PM",sunday:"5:00 PM - 9:00 PM"}},MORNINGBIRD:{address:"4 Hudson Street, Kinderhook, NY 12106",phone:"(518) 610-8543",website:"https://theaviarykinderhook.com/morningbird",hours:{monday:"Closed",tuesday:"8:00 AM - 3:00 PM",wednesday:"8:00 AM - 3:00 PM",thursday:"8:00 AM - 3:00 PM",friday:"8:00 AM - 3:00 PM",saturday:"8:00 AM - 3:00 PM",sunday:"8:00 AM - 3:00 PM"}},SAISONNIER:{address:"11 Chatham Street, Kinderhook, NY 12106",phone:"(518) 610-8100",website:"https://www.saisonnier.us",hours:{monday:"Closed",tuesday:"Closed",wednesday:"5:00 PM - 9:00 PM",thursday:"5:00 PM - 9:00 PM",friday:"5:00 PM - 10:00 PM",saturday:"11:30 AM - 2:30 PM, 5:00 PM - 10:00 PM",sunday:"11:30 AM - 2:30 PM, 5:00 PM - 9:00 PM"}},"BROADST-BAGEL":{address:"1 Broad Street, Kinderhook, NY 12106",phone:"(518) 758-8084",website:"https://broadstreetbagelco.com",hours:{monday:"7:00 AM - 2:00 PM",tuesday:"7:00 AM - 2:00 PM",wednesday:"7:00 AM - 2:00 PM",thursday:"7:00 AM - 2:00 PM",friday:"7:00 AM - 2:00 PM",saturday:"7:00 AM - 2:00 PM",sunday:"8:00 AM - 1:00 PM"}},"BOTTLE-SHOP":{address:"8 Hudson Street, Kinderhook, NY 12106",phone:"(518) 610-8111",website:"https://kinderhookbottleshop.com",hours:{monday:"12:00 PM - 7:00 PM",tuesday:"12:00 PM - 7:00 PM",wednesday:"12:00 PM - 7:00 PM",thursday:"12:00 PM - 7:00 PM",friday:"12:00 PM - 8:00 PM",saturday:"11:00 AM - 8:00 PM",sunday:"12:00 PM - 5:00 PM"}},"OLD-DUTCH":{address:"8 Broad Street, Kinderhook, NY 12106",phone:"(518) 203-3347",website:"https://theolddutchinn.com",hours:{monday:"Closed",tuesday:"Closed",wednesday:"5:00 PM - 9:00 PM",thursday:"5:00 PM - 9:00 PM",friday:"5:00 PM - 10:00 PM",saturday:"11:00 AM - 10:00 PM",sunday:"11:00 AM - 8:00 PM"}},SAMASCOTTS:{address:"65 Chatham Street, Kinderhook, NY 12106",phone:"(518) 758-9292",website:"https://www.samascott.com/gardenmarket",hours:{monday:"9:00 AM - 6:00 PM",tuesday:"9:00 AM - 6:00 PM",wednesday:"9:00 AM - 6:00 PM",thursday:"9:00 AM - 6:00 PM",friday:"9:00 AM - 6:00 PM",saturday:"9:00 AM - 6:00 PM",sunday:"9:00 AM - 5:00 PM"}},"SAMASCOTT-ORCHARDS":{address:"5 Sunset Avenue, Kinderhook, NY 12106",phone:"(518) 758-7224",website:"https://www.samascott.com",hours:{monday:"9:00 AM - 6:00 PM",tuesday:"9:00 AM - 6:00 PM",wednesday:"9:00 AM - 6:00 PM",thursday:"9:00 AM - 6:00 PM",friday:"9:00 AM - 6:00 PM",saturday:"9:00 AM - 6:00 PM",sunday:"9:00 AM - 5:00 PM"}},"SCHOOL-GALLERY":{address:"25 Broad Street, Kinderhook, NY 12106",phone:"(518) 758-1620",website:"https://jackshainman.com/the_school",hours:{monday:"Closed",tuesday:"Closed",wednesday:"11:00 AM - 6:00 PM",thursday:"11:00 AM - 6:00 PM",friday:"11:00 AM - 6:00 PM",saturday:"11:00 AM - 6:00 PM",sunday:"Closed"}},ISOLA:{address:"16 Hudson Street, Kinderhook, NY 12106",phone:"(518) 567-7181",website:"https://isolawinebar.com",hours:{monday:"Closed",tuesday:"Closed",wednesday:"4:00 PM - 9:00 PM",thursday:"4:00 PM - 9:00 PM",friday:"4:00 PM - 10:00 PM",saturday:"12:00 PM - 10:00 PM",sunday:"12:00 PM - 8:00 PM"}},"VILLAGE-YOGA":{address:"6 Hudson Street, 2nd Floor, Kinderhook, NY 12106",phone:"(518) 610-8135",website:"https://villageyoga.co",hours:{monday:"9:00 AM - 7:00 PM",tuesday:"9:00 AM - 7:00 PM",wednesday:"9:00 AM - 7:00 PM",thursday:"9:00 AM - 7:00 PM",friday:"9:00 AM - 5:00 PM",saturday:"9:00 AM - 12:00 PM",sunday:"Closed"}},"WALSH-DENTISTRY":{address:"3 Hudson Street, 2nd Floor, Kinderhook, NY 12106",phone:"(518) 758-7071",website:"https://walshdentistry.com",hours:{monday:"8:00 AM - 5:00 PM",tuesday:"8:00 AM - 5:00 PM",wednesday:"8:00 AM - 5:00 PM",thursday:"8:00 AM - 5:00 PM",friday:"8:00 AM - 3:00 PM",saturday:"Closed",sunday:"Closed"}},"FEED-SEED":{address:"22 Hudson Street, Kinderhook, NY 12106",hours:{monday:"9:00 AM - 5:00 PM",tuesday:"9:00 AM - 5:00 PM",wednesday:"9:00 AM - 5:00 PM",thursday:"9:00 AM - 5:00 PM",friday:"9:00 AM - 5:00 PM",saturday:"9:00 AM - 4:00 PM",sunday:"Closed"}}};function tg(n){if(!n)return null;const e=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],t=new Date,r=e[t.getDay()],s=n[r];if(!s||s==="Closed")return!1;const l=s.match(/(\d+):(\d+)\s*(AM|PM)/gi);if(!l||l.length<2)return null;const c=t.getHours(),h=t.getMinutes(),d=c*60+h,m=s.match(/(\d+):(\d+)\s*(AM|PM)/i);if(m){let g=parseInt(m[1]);const y=parseInt(m[2]),x=m[3].toUpperCase();x==="PM"&&g!==12&&(g+=12),x==="AM"&&g===12&&(g=0);const E=g*60+y,k=s.match(/(\d+):(\d+)\s*(AM|PM)/gi);if(k&&k.length>=2){const S=k[k.length-1].match(/(\d+):(\d+)\s*(AM|PM)/i);if(S){let T=parseInt(S[1]);const P=parseInt(S[2]),M=S[3].toUpperCase();M==="PM"&&T!==12&&(T+=12),M==="AM"&&T===12&&(T=0);const D=T*60+P;return d>=E&&d<D}}}return null}function XB(n){if(!n)return"Hours not available";const r=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][new Date().getDay()];return n[r]||"Hours not available"}const JB=42.3944,ZB=-73.7059,Ek={0:{icon:Zw,description:"Clear sky",suggestion:"Perfect day to explore the village!"},1:{icon:Zw,description:"Mainly clear",suggestion:"Great weather for a village stroll!"},2:{icon:ih,description:"Partly cloudy",suggestion:"Nice day to visit local shops!"},3:{icon:ih,description:"Overcast",suggestion:"Good day to cozy up at a cafe!"},45:{icon:ih,description:"Foggy",suggestion:"Mysterious village vibes today!"},48:{icon:ih,description:"Foggy",suggestion:"Grab a warm drink at a local cafe!"},51:{icon:Mi,description:"Light drizzle",suggestion:"Pop into a shop to stay dry!"},53:{icon:Mi,description:"Drizzle",suggestion:"Perfect excuse for a coffee break!"},55:{icon:Mi,description:"Heavy drizzle",suggestion:"Browse the bookstore while it passes!"},61:{icon:Mi,description:"Light rain",suggestion:"Duck into a local business!"},63:{icon:Mi,description:"Rain",suggestion:"Great day for indoor shopping!"},65:{icon:Mi,description:"Heavy rain",suggestion:"Stay cozy at a village restaurant!"},71:{icon:Ua,description:"Light snow",suggestion:"Beautiful! Warm up with hot cocoa!"},73:{icon:Ua,description:"Snow",suggestion:"Snow day! Explore the charming village!"},75:{icon:Ua,description:"Heavy snow",suggestion:"Cozy up at a local spot!"},77:{icon:Ua,description:"Snow grains",suggestion:"Winter wonderland vibes!"},80:{icon:Mi,description:"Light showers",suggestion:"Quick visits between showers!"},81:{icon:Mi,description:"Showers",suggestion:"Pop into shops along the way!"},82:{icon:Mi,description:"Heavy showers",suggestion:"Find shelter at a cozy cafe!"},85:{icon:Ua,description:"Snow showers",suggestion:"Magical village views!"},86:{icon:Ua,description:"Heavy snow showers",suggestion:"Warm drinks are calling!"},95:{icon:Np,description:"Thunderstorm",suggestion:"Stay safe indoors!"},96:{icon:Np,description:"Thunderstorm with hail",suggestion:"Seek shelter in a shop!"},99:{icon:Np,description:"Severe thunderstorm",suggestion:"Stay safe inside!"}};function ez({compact:n=!1}){const[e,t]=j.useState(null),[r,s]=j.useState(!0),[l,c]=j.useState(null);if(j.useEffect(()=>{async function m(){var y,x,E,k;try{const S=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${JB}&longitude=${ZB}&current=temperature_2m,relative_humidity_2m,weather_code,wind_speed_10m&daily=sunrise,sunset&temperature_unit=fahrenheit&wind_speed_unit=mph&timezone=America%2FNew_York`);if(!S.ok)throw new Error("Weather fetch failed");const T=await S.json(),P=(x=(y=T.daily)==null?void 0:y.sunrise)!=null&&x[0]?new Date(T.daily.sunrise[0]):null,M=(k=(E=T.daily)==null?void 0:E.sunset)!=null&&k[0]?new Date(T.daily.sunset[0]):null;t({temp:Math.round(T.current.temperature_2m),humidity:T.current.relative_humidity_2m,windSpeed:Math.round(T.current.wind_speed_10m),code:T.current.weather_code,sunrise:P,sunset:M}),s(!1)}catch(S){console.error("Weather error:",S),c("Could not load weather"),s(!1)}}m();const g=setInterval(m,1800*1e3);return()=>clearInterval(g)},[]),r)return o.jsx("div",{style:{background:"linear-gradient(135deg, #4a90d9 0%, #67b8e3 100%)",borderRadius:"12px",padding:n?"0.75rem 1rem":"1rem 1.25rem",color:"white",opacity:.7},children:"Loading weather..."});if(l||!e)return null;const h=Ek[e.code]||Ek[0],d=h.icon;return n?o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",background:"linear-gradient(135deg, #4a90d9 0%, #67b8e3 100%)",borderRadius:"10px",padding:"0.5rem 1rem",color:"white"},children:[o.jsx(d,{size:24}),o.jsxs("span",{style:{fontSize:"1.25rem",fontWeight:"700"},children:[e.temp,"F"]}),o.jsx("span",{style:{opacity:.9,fontSize:"0.85rem"},children:h.description})]}):o.jsxs("div",{style:{background:"linear-gradient(135deg, #4a90d9 0%, #67b8e3 100%)",borderRadius:"16px",padding:"1.25rem",color:"white"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.75rem"},children:[o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.8rem",opacity:.9,marginBottom:"0.25rem"},children:"Kinderhook, NY"}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsxs("span",{style:{fontSize:"2.5rem",fontWeight:"700",lineHeight:1},children:[e.temp,""]}),o.jsx("span",{style:{fontSize:"1rem"},children:"F"})]})]}),o.jsx(d,{size:56,strokeWidth:1.5})]}),o.jsx("div",{style:{fontSize:"1rem",fontWeight:"600",marginBottom:"0.5rem"},children:h.description}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem",fontSize:"0.8rem",opacity:.9,marginBottom:"1rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[o.jsx(hV,{size:14})," ",e.humidity,"%"]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[o.jsx(V3,{size:14})," ",e.windSpeed," mph"]}),e.sunrise&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[o.jsx(y3,{size:14})," ",e.sunrise.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})]}),e.sunset&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[o.jsx(x3,{size:14})," ",e.sunset.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})]})]}),o.jsx("div",{style:{background:"rgba(255,255,255,0.2)",borderRadius:"8px",padding:"0.75rem",fontSize:"0.9rem",fontStyle:"italic"},children:h.suggestion})]})}function tz(){const[n,e]=j.useState([]),[t,r]=j.useState(!0),[s,l]=j.useState("all"),[c,h]=j.useState(!1);j.useEffect(()=>{async function k(){const S=await gi();e(S.filter(T=>T.isActive)),r(!1)}k()},[]);const d=n.map(k=>({...k,...YB[k.code]})),m=d.filter(k=>!(!k.address||s==="open"&&!tg(k.hours))),g=d.filter(k=>k.address&&tg(k.hours)),y=()=>{const S=new Date().toLocaleDateString("en-US",{weekday:"long"}),T=g.map(P=>P.name).join(", ");return`What's open in Kinderhook this ${S}? ${g.length} businesses are ready to serve you: ${T}. Show your OK Member card for bonus discounts! #Kinderbucks #ShopLocal`},x=async()=>{const k=y();if(navigator.share)try{await navigator.share({title:"What's Open in Kinderhook",text:k})}catch{}else navigator.clipboard.writeText(k),h(!0),setTimeout(()=>h(!1),2e3)},E=k=>{switch(k){case"food":return"#e67e22";case"retail":return"#3498db";case"services":return"#9b59b6";case"arts":return"#1abc9c";default:return"var(--kb-gray-500)"}};return o.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[o.jsx(Ln,{}),o.jsxs("main",{style:{flex:1,background:"var(--kb-cream)"},children:[o.jsx("section",{style:{background:"linear-gradient(135deg, var(--kb-navy) 0%, var(--kb-navy-light) 100%)",padding:"2rem 1rem",color:"white",textAlign:"center"},children:o.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[o.jsx("div",{className:"badge badge-gold",style:{marginBottom:"0.75rem"},children:"Village Directory"}),o.jsx("h1",{style:{marginBottom:"0.5rem"},children:"Explore Kinderhook"}),o.jsx("p",{style:{opacity:.8,maxWidth:"500px",margin:"0 auto"},children:"Find participating businesses, check hours, and earn rewards"})]})}),o.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto",padding:"2rem 1rem"},children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[o.jsx(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:o.jsx(ez,{})}),o.jsx(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card",style:{background:"linear-gradient(135deg, var(--kb-green) 0%, #1e8449 100%)",color:"white"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"1rem"},children:[o.jsxs("div",{children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[o.jsx(dr,{size:20}),o.jsx("span",{style:{fontWeight:"600"},children:"Open Right Now"})]}),o.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700"},children:[g.length," Businesses"]}),o.jsx("div",{style:{opacity:.9,fontSize:"0.9rem"},children:"Show your OK card for bonus discounts!"})]}),o.jsxs("button",{onClick:x,className:"btn",style:{background:"rgba(255,255,255,0.2)",color:"white",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c?o.jsx(Vn,{size:18}):o.jsx(r3,{size:18}),c?"Copied!":"Share"]})]})})]}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem"},children:[o.jsxs("button",{onClick:()=>l("all"),className:"btn",style:{padding:"0.6rem 1.25rem",fontSize:"0.9rem",background:s==="all"?"var(--kb-navy)":"white",color:s==="all"?"white":"var(--kb-gray-600)",border:"1px solid var(--kb-gray-200)"},children:["All (",d.filter(k=>k.address).length,")"]}),o.jsxs("button",{onClick:()=>l("open"),className:"btn",style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.6rem 1.25rem",fontSize:"0.9rem",background:s==="open"?"var(--kb-green)":"white",color:s==="open"?"white":"var(--kb-gray-600)",border:"1px solid var(--kb-gray-200)"},children:[o.jsx(dr,{size:16}),"Open Now (",g.length,")"]})]}),o.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:s==="open"?"Open Now":"All Businesses"}),t?o.jsx("div",{className:"card",style:{padding:"4rem",textAlign:"center",color:"var(--kb-gray-500)"},children:"Loading businesses..."}):o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"1rem"},children:m.map((k,S)=>{const T=tg(k.hours),P=XB(k.hours);return o.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:S*.05},className:"card",style:{padding:"1.25rem",overflow:"hidden"},children:[k.photoUrl&&o.jsx("div",{style:{margin:"-1.25rem -1.25rem 1rem -1.25rem"},children:o.jsx("img",{src:k.photoUrl,alt:k.name,style:{width:"100%",height:"120px",objectFit:"cover"}})}),o.jsxs("div",{style:{marginBottom:"0.75rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.25rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx("span",{style:{display:"inline-block",width:"8px",height:"8px",borderRadius:"50%",background:T?"#27ae60":"#95a5a6"}}),o.jsx("span",{style:{fontSize:"0.7rem",fontWeight:"600",color:T?"#27ae60":"var(--kb-gray-500)"},children:T?"OPEN NOW":"CLOSED"})]}),o.jsx("span",{style:{fontSize:"0.7rem",padding:"0.15rem 0.5rem",borderRadius:"4px",background:`${E(k.category)}15`,color:E(k.category),fontWeight:"500",textTransform:"capitalize"},children:k.category})]}),o.jsx("h3",{style:{color:"var(--kb-navy)",fontSize:"1.1rem",marginBottom:"0.25rem"},children:k.name})]}),k.address&&o.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.5rem",fontSize:"0.85rem",color:"var(--kb-gray-600)",marginBottom:"0.5rem"},children:[o.jsx(yl,{size:14,style:{flexShrink:0,marginTop:"2px"}}),o.jsx("span",{children:k.address})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem",color:"var(--kb-gray-600)",marginBottom:"0.5rem"},children:[o.jsx(dr,{size:14}),"Today: ",P]}),k.phone&&o.jsxs("a",{href:`tel:${k.phone}`,style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem",color:"var(--kb-gray-600)",textDecoration:"none",marginBottom:"0.75rem"},children:[o.jsx(HV,{size:14}),k.phone]}),k.website&&o.jsxs("a",{href:k.website,target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem",color:"var(--kb-gold-dark)",textDecoration:"none",marginBottom:"0.75rem"},children:[o.jsx(mV,{size:14}),"Visit Website"]}),k.address&&o.jsxs("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(k.address)}`,target:"_blank",rel:"noopener noreferrer",className:"btn btn-gold",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",width:"100%",fontSize:"0.85rem",padding:"0.5rem"},children:[o.jsx(BV,{size:14})," Get Directions"]})]},k.code)})}),m.length===0&&!t&&o.jsxs("div",{className:"card",style:{padding:"3rem",textAlign:"center",color:"var(--kb-gray-500)"},children:[o.jsx(Mt,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),o.jsx("p",{children:s==="open"?"No businesses are open right now":"No businesses found"}),s==="open"&&o.jsx("button",{onClick:()=>l("all"),className:"btn btn-secondary",style:{marginTop:"1rem"},children:"View All Businesses"})]})]})]}),o.jsx(On,{})]})}function nz(){return o.jsx(vM,{children:o.jsx(Tj,{children:o.jsxs(nj,{children:[o.jsx(gt,{path:"/",element:o.jsx(b9,{})}),o.jsx(gt,{path:"/demo",element:o.jsx(I9,{})}),o.jsx(gt,{path:"/about",element:o.jsx(F9,{})}),o.jsx(gt,{path:"/benefits",element:o.jsx(W9,{})}),o.jsx(gt,{path:"/businesses",element:o.jsx(Z9,{})}),o.jsx(gt,{path:"/map",element:o.jsx(tz,{})}),o.jsx(gt,{path:"/exchange",element:o.jsx(nB,{})}),o.jsx(gt,{path:"/login",element:o.jsx(sB,{})}),o.jsx(gt,{path:"/account",element:o.jsx(rB,{})}),o.jsx(gt,{path:"/profile",element:o.jsx(iB,{})}),o.jsx(gt,{path:"/card",element:o.jsx(lB,{})}),o.jsx(gt,{path:"/scan/:serial",element:o.jsx(pB,{})}),o.jsx(gt,{path:"/checkin/:businessCode",element:o.jsx(_B,{})}),o.jsx(gt,{path:"/business/dashboard",element:o.jsx(jr,{allowedRoles:["business","admin"],children:o.jsx(NB,{})})}),o.jsx(gt,{path:"/business/accept-payment",element:o.jsx(jr,{allowedRoles:["business","admin"],children:o.jsx(QB,{})})}),o.jsx(gt,{path:"/admin/dashboard",element:o.jsx(jr,{allowedRoles:["admin"],children:o.jsx(DB,{})})}),o.jsx(gt,{path:"/admin/exchanges",element:o.jsx(jr,{allowedRoles:["admin"],children:o.jsx($B,{})})}),o.jsx(gt,{path:"/admin/members",element:o.jsx(jr,{allowedRoles:["admin"],children:o.jsx(HB,{})})}),o.jsx(gt,{path:"/admin/generate",element:o.jsx(jr,{allowedRoles:["admin"],children:o.jsx(MB,{})})}),o.jsx(gt,{path:"/admin/issue",element:o.jsx(jr,{allowedRoles:["admin"],children:o.jsx(VB,{})})}),o.jsx(gt,{path:"/admin/businesses",element:o.jsx(jr,{allowedRoles:["admin"],children:o.jsx(UB,{})})}),o.jsx(gt,{path:"/admin/businesses/:businessCode",element:o.jsx(jr,{allowedRoles:["admin"],children:o.jsx(qB,{})})}),o.jsx(gt,{path:"/admin/users",element:o.jsx(jr,{allowedRoles:["admin"],children:o.jsx(KB,{})})}),o.jsx(gt,{path:"/admin/redemptions",element:o.jsx(jr,{allowedRoles:["admin"],children:o.jsx(GB,{})})})]})})})}iC.createRoot(document.getElementById("root")).render(o.jsx(j.StrictMode,{children:o.jsx(nz,{})}));
