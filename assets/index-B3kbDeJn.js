(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function YI(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Lp={exports:{}},oc={},Op={exports:{}},je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w1;function XI(){if(w1)return je;w1=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.iterator;function w(U){return U===null||typeof U!="object"?null:(U=v&&U[v]||U["@@iterator"],typeof U=="function"?U:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,I={};function C(U,ee,Ce){this.props=U,this.context=ee,this.refs=I,this.updater=Ce||k}C.prototype.isReactComponent={},C.prototype.setState=function(U,ee){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,ee,"setState")},C.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function O(){}O.prototype=C.prototype;function B(U,ee,Ce){this.props=U,this.context=ee,this.refs=I,this.updater=Ce||k}var j=B.prototype=new O;j.constructor=B,T(j,C.prototype),j.isPureReactComponent=!0;var Q=Array.isArray,W=Object.prototype.hasOwnProperty,H={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function b(U,ee,Ce){var Ae,Ve={},Me=null,Ge=null;if(ee!=null)for(Ae in ee.ref!==void 0&&(Ge=ee.ref),ee.key!==void 0&&(Me=""+ee.key),ee)W.call(ee,Ae)&&!A.hasOwnProperty(Ae)&&(Ve[Ae]=ee[Ae]);var Ue=arguments.length-2;if(Ue===1)Ve.children=Ce;else if(1<Ue){for(var Xe=Array(Ue),ln=0;ln<Ue;ln++)Xe[ln]=arguments[ln+2];Ve.children=Xe}if(U&&U.defaultProps)for(Ae in Ue=U.defaultProps,Ue)Ve[Ae]===void 0&&(Ve[Ae]=Ue[Ae]);return{$$typeof:n,type:U,key:Me,ref:Ge,props:Ve,_owner:H.current}}function P(U,ee){return{$$typeof:n,type:U.type,key:ee,ref:U.ref,props:U.props,_owner:U._owner}}function M(U){return typeof U=="object"&&U!==null&&U.$$typeof===n}function L(U){var ee={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(Ce){return ee[Ce]})}var $=/\/+/g;function V(U,ee){return typeof U=="object"&&U!==null&&U.key!=null?L(""+U.key):ee.toString(36)}function Ne(U,ee,Ce,Ae,Ve){var Me=typeof U;(Me==="undefined"||Me==="boolean")&&(U=null);var Ge=!1;if(U===null)Ge=!0;else switch(Me){case"string":case"number":Ge=!0;break;case"object":switch(U.$$typeof){case n:case e:Ge=!0}}if(Ge)return Ge=U,Ve=Ve(Ge),U=Ae===""?"."+V(Ge,0):Ae,Q(Ve)?(Ce="",U!=null&&(Ce=U.replace($,"$&/")+"/"),Ne(Ve,ee,Ce,"",function(ln){return ln})):Ve!=null&&(M(Ve)&&(Ve=P(Ve,Ce+(!Ve.key||Ge&&Ge.key===Ve.key?"":(""+Ve.key).replace($,"$&/")+"/")+U)),ee.push(Ve)),1;if(Ge=0,Ae=Ae===""?".":Ae+":",Q(U))for(var Ue=0;Ue<U.length;Ue++){Me=U[Ue];var Xe=Ae+V(Me,Ue);Ge+=Ne(Me,ee,Ce,Xe,Ve)}else if(Xe=w(U),typeof Xe=="function")for(U=Xe.call(U),Ue=0;!(Me=U.next()).done;)Me=Me.value,Xe=Ae+V(Me,Ue++),Ge+=Ne(Me,ee,Ce,Xe,Ve);else if(Me==="object")throw ee=String(U),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.");return Ge}function He(U,ee,Ce){if(U==null)return U;var Ae=[],Ve=0;return Ne(U,Ae,"","",function(Me){return ee.call(Ce,Me,Ve++)}),Ae}function wt(U){if(U._status===-1){var ee=U._result;ee=ee(),ee.then(function(Ce){(U._status===0||U._status===-1)&&(U._status=1,U._result=Ce)},function(Ce){(U._status===0||U._status===-1)&&(U._status=2,U._result=Ce)}),U._status===-1&&(U._status=0,U._result=ee)}if(U._status===1)return U._result.default;throw U._result}var Se={current:null},ie={transition:null},fe={ReactCurrentDispatcher:Se,ReactCurrentBatchConfig:ie,ReactCurrentOwner:H};function ae(){throw Error("act(...) is not supported in production builds of React.")}return je.Children={map:He,forEach:function(U,ee,Ce){He(U,function(){ee.apply(this,arguments)},Ce)},count:function(U){var ee=0;return He(U,function(){ee++}),ee},toArray:function(U){return He(U,function(ee){return ee})||[]},only:function(U){if(!M(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},je.Component=C,je.Fragment=t,je.Profiler=s,je.PureComponent=B,je.StrictMode=r,je.Suspense=d,je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fe,je.act=ae,je.cloneElement=function(U,ee,Ce){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var Ae=T({},U.props),Ve=U.key,Me=U.ref,Ge=U._owner;if(ee!=null){if(ee.ref!==void 0&&(Me=ee.ref,Ge=H.current),ee.key!==void 0&&(Ve=""+ee.key),U.type&&U.type.defaultProps)var Ue=U.type.defaultProps;for(Xe in ee)W.call(ee,Xe)&&!A.hasOwnProperty(Xe)&&(Ae[Xe]=ee[Xe]===void 0&&Ue!==void 0?Ue[Xe]:ee[Xe])}var Xe=arguments.length-2;if(Xe===1)Ae.children=Ce;else if(1<Xe){Ue=Array(Xe);for(var ln=0;ln<Xe;ln++)Ue[ln]=arguments[ln+2];Ae.children=Ue}return{$$typeof:n,type:U.type,key:Ve,ref:Me,props:Ae,_owner:Ge}},je.createContext=function(U){return U={$$typeof:l,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:a,_context:U},U.Consumer=U},je.createElement=b,je.createFactory=function(U){var ee=b.bind(null,U);return ee.type=U,ee},je.createRef=function(){return{current:null}},je.forwardRef=function(U){return{$$typeof:f,render:U}},je.isValidElement=M,je.lazy=function(U){return{$$typeof:g,_payload:{_status:-1,_result:U},_init:wt}},je.memo=function(U,ee){return{$$typeof:m,type:U,compare:ee===void 0?null:ee}},je.startTransition=function(U){var ee=ie.transition;ie.transition={};try{U()}finally{ie.transition=ee}},je.unstable_act=ae,je.useCallback=function(U,ee){return Se.current.useCallback(U,ee)},je.useContext=function(U){return Se.current.useContext(U)},je.useDebugValue=function(){},je.useDeferredValue=function(U){return Se.current.useDeferredValue(U)},je.useEffect=function(U,ee){return Se.current.useEffect(U,ee)},je.useId=function(){return Se.current.useId()},je.useImperativeHandle=function(U,ee,Ce){return Se.current.useImperativeHandle(U,ee,Ce)},je.useInsertionEffect=function(U,ee){return Se.current.useInsertionEffect(U,ee)},je.useLayoutEffect=function(U,ee){return Se.current.useLayoutEffect(U,ee)},je.useMemo=function(U,ee){return Se.current.useMemo(U,ee)},je.useReducer=function(U,ee,Ce){return Se.current.useReducer(U,ee,Ce)},je.useRef=function(U){return Se.current.useRef(U)},je.useState=function(U){return Se.current.useState(U)},je.useSyncExternalStore=function(U,ee,Ce){return Se.current.useSyncExternalStore(U,ee,Ce)},je.useTransition=function(){return Se.current.useTransition()},je.version="18.3.1",je}var E1;function kg(){return E1||(E1=1,Op.exports=XI()),Op.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T1;function JI(){if(T1)return oc;T1=1;var n=kg(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(f,d,m){var g,v={},w=null,k=null;m!==void 0&&(w=""+m),d.key!==void 0&&(w=""+d.key),d.ref!==void 0&&(k=d.ref);for(g in d)r.call(d,g)&&!a.hasOwnProperty(g)&&(v[g]=d[g]);if(f&&f.defaultProps)for(g in d=f.defaultProps,d)v[g]===void 0&&(v[g]=d[g]);return{$$typeof:e,type:f,key:w,ref:k,props:v,_owner:s.current}}return oc.Fragment=t,oc.jsx=l,oc.jsxs=l,oc}var k1;function ZI(){return k1||(k1=1,Lp.exports=JI()),Lp.exports}var u=ZI(),N=kg();const Nt=YI(N);var Vd={},Fp={exports:{}},xn={},Bp={exports:{}},zp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S1;function e2(){return S1||(S1=1,(function(n){function e(ie,fe){var ae=ie.length;ie.push(fe);e:for(;0<ae;){var U=ae-1>>>1,ee=ie[U];if(0<s(ee,fe))ie[U]=fe,ie[ae]=ee,ae=U;else break e}}function t(ie){return ie.length===0?null:ie[0]}function r(ie){if(ie.length===0)return null;var fe=ie[0],ae=ie.pop();if(ae!==fe){ie[0]=ae;e:for(var U=0,ee=ie.length,Ce=ee>>>1;U<Ce;){var Ae=2*(U+1)-1,Ve=ie[Ae],Me=Ae+1,Ge=ie[Me];if(0>s(Ve,ae))Me<ee&&0>s(Ge,Ve)?(ie[U]=Ge,ie[Me]=ae,U=Me):(ie[U]=Ve,ie[Ae]=ae,U=Ae);else if(Me<ee&&0>s(Ge,ae))ie[U]=Ge,ie[Me]=ae,U=Me;else break e}}return fe}function s(ie,fe){var ae=ie.sortIndex-fe.sortIndex;return ae!==0?ae:ie.id-fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var l=Date,f=l.now();n.unstable_now=function(){return l.now()-f}}var d=[],m=[],g=1,v=null,w=3,k=!1,T=!1,I=!1,C=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(ie){for(var fe=t(m);fe!==null;){if(fe.callback===null)r(m);else if(fe.startTime<=ie)r(m),fe.sortIndex=fe.expirationTime,e(d,fe);else break;fe=t(m)}}function Q(ie){if(I=!1,j(ie),!T)if(t(d)!==null)T=!0,wt(W);else{var fe=t(m);fe!==null&&Se(Q,fe.startTime-ie)}}function W(ie,fe){T=!1,I&&(I=!1,O(b),b=-1),k=!0;var ae=w;try{for(j(fe),v=t(d);v!==null&&(!(v.expirationTime>fe)||ie&&!L());){var U=v.callback;if(typeof U=="function"){v.callback=null,w=v.priorityLevel;var ee=U(v.expirationTime<=fe);fe=n.unstable_now(),typeof ee=="function"?v.callback=ee:v===t(d)&&r(d),j(fe)}else r(d);v=t(d)}if(v!==null)var Ce=!0;else{var Ae=t(m);Ae!==null&&Se(Q,Ae.startTime-fe),Ce=!1}return Ce}finally{v=null,w=ae,k=!1}}var H=!1,A=null,b=-1,P=5,M=-1;function L(){return!(n.unstable_now()-M<P)}function $(){if(A!==null){var ie=n.unstable_now();M=ie;var fe=!0;try{fe=A(!0,ie)}finally{fe?V():(H=!1,A=null)}}else H=!1}var V;if(typeof B=="function")V=function(){B($)};else if(typeof MessageChannel<"u"){var Ne=new MessageChannel,He=Ne.port2;Ne.port1.onmessage=$,V=function(){He.postMessage(null)}}else V=function(){C($,0)};function wt(ie){A=ie,H||(H=!0,V())}function Se(ie,fe){b=C(function(){ie(n.unstable_now())},fe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ie){ie.callback=null},n.unstable_continueExecution=function(){T||k||(T=!0,wt(W))},n.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<ie?Math.floor(1e3/ie):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(ie){switch(w){case 1:case 2:case 3:var fe=3;break;default:fe=w}var ae=w;w=fe;try{return ie()}finally{w=ae}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ie,fe){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var ae=w;w=ie;try{return fe()}finally{w=ae}},n.unstable_scheduleCallback=function(ie,fe,ae){var U=n.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?U+ae:U):ae=U,ie){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=ae+ee,ie={id:g++,callback:fe,priorityLevel:ie,startTime:ae,expirationTime:ee,sortIndex:-1},ae>U?(ie.sortIndex=ae,e(m,ie),t(d)===null&&ie===t(m)&&(I?(O(b),b=-1):I=!0,Se(Q,ae-U))):(ie.sortIndex=ee,e(d,ie),T||k||(T=!0,wt(W))),ie},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(ie){var fe=w;return function(){var ae=w;w=fe;try{return ie.apply(this,arguments)}finally{w=ae}}}})(zp)),zp}var b1;function t2(){return b1||(b1=1,Bp.exports=e2()),Bp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I1;function n2(){if(I1)return xn;I1=1;var n=kg(),e=t2();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,c=1;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(i,o){l(i,o),l(i+"Capture",o)}function l(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},v={};function w(i){return d.call(v,i)?!0:d.call(g,i)?!1:m.test(i)?v[i]=!0:(g[i]=!0,!1)}function k(i,o,c,p){if(c!==null&&c.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return p?!1:c!==null?!c.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function T(i,o,c,p){if(o===null||typeof o>"u"||k(i,o,c,p))return!0;if(p)return!1;if(c!==null)switch(c.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function I(i,o,c,p,y,x,S){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=p,this.attributeNamespace=y,this.mustUseProperty=c,this.propertyName=i,this.type=o,this.sanitizeURL=x,this.removeEmptyString=S}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){C[i]=new I(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];C[o]=new I(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){C[i]=new I(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){C[i]=new I(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){C[i]=new I(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){C[i]=new I(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){C[i]=new I(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){C[i]=new I(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){C[i]=new I(i,5,!1,i.toLowerCase(),null,!1,!1)});var O=/[\-:]([a-z])/g;function B(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(O,B);C[o]=new I(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(O,B);C[o]=new I(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(O,B);C[o]=new I(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){C[i]=new I(i,1,!1,i.toLowerCase(),null,!1,!1)}),C.xlinkHref=new I("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){C[i]=new I(i,1,!1,i.toLowerCase(),null,!0,!0)});function j(i,o,c,p){var y=C.hasOwnProperty(o)?C[o]:null;(y!==null?y.type!==0:p||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(T(o,c,y,p)&&(c=null),p||y===null?w(o)&&(c===null?i.removeAttribute(o):i.setAttribute(o,""+c)):y.mustUseProperty?i[y.propertyName]=c===null?y.type===3?!1:"":c:(o=y.attributeName,p=y.attributeNamespace,c===null?i.removeAttribute(o):(y=y.type,c=y===3||y===4&&c===!0?"":""+c,p?i.setAttributeNS(p,o,c):i.setAttribute(o,c))))}var Q=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,W=Symbol.for("react.element"),H=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),L=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),Ne=Symbol.for("react.suspense_list"),He=Symbol.for("react.memo"),wt=Symbol.for("react.lazy"),Se=Symbol.for("react.offscreen"),ie=Symbol.iterator;function fe(i){return i===null||typeof i!="object"?null:(i=ie&&i[ie]||i["@@iterator"],typeof i=="function"?i:null)}var ae=Object.assign,U;function ee(i){if(U===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);U=o&&o[1]||""}return`
`+U+i}var Ce=!1;function Ae(i,o){if(!i||Ce)return"";Ce=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(Y){var p=Y}Reflect.construct(i,[],o)}else{try{o.call()}catch(Y){p=Y}i.call(o.prototype)}else{try{throw Error()}catch(Y){p=Y}i()}}catch(Y){if(Y&&p&&typeof Y.stack=="string"){for(var y=Y.stack.split(`
`),x=p.stack.split(`
`),S=y.length-1,D=x.length-1;1<=S&&0<=D&&y[S]!==x[D];)D--;for(;1<=S&&0<=D;S--,D--)if(y[S]!==x[D]){if(S!==1||D!==1)do if(S--,D--,0>D||y[S]!==x[D]){var F=`
`+y[S].replace(" at new "," at ");return i.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",i.displayName)),F}while(1<=S&&0<=D);break}}}finally{Ce=!1,Error.prepareStackTrace=c}return(i=i?i.displayName||i.name:"")?ee(i):""}function Ve(i){switch(i.tag){case 5:return ee(i.type);case 16:return ee("Lazy");case 13:return ee("Suspense");case 19:return ee("SuspenseList");case 0:case 2:case 15:return i=Ae(i.type,!1),i;case 11:return i=Ae(i.type.render,!1),i;case 1:return i=Ae(i.type,!0),i;default:return""}}function Me(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case A:return"Fragment";case H:return"Portal";case P:return"Profiler";case b:return"StrictMode";case V:return"Suspense";case Ne:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case L:return(i.displayName||"Context")+".Consumer";case M:return(i._context.displayName||"Context")+".Provider";case $:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case He:return o=i.displayName||null,o!==null?o:Me(i.type)||"Memo";case wt:o=i._payload,i=i._init;try{return Me(i(o))}catch{}}return null}function Ge(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Me(o);case 8:return o===b?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Ue(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Xe(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function ln(i){var o=Xe(i)?"checked":"value",c=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),p=""+i[o];if(!i.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,x=c.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return y.call(this)},set:function(S){p=""+S,x.call(this,S)}}),Object.defineProperty(i,o,{enumerable:c.enumerable}),{getValue:function(){return p},setValue:function(S){p=""+S},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Do(i){i._valueTracker||(i._valueTracker=ln(i))}function hl(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var c=o.getValue(),p="";return i&&(p=Xe(i)?i.checked?"true":"false":i.value),i=p,i!==c?(o.setValue(i),!0):!1}function Ai(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Vo(i,o){var c=o.checked;return ae({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??i._wrapperState.initialChecked})}function _u(i,o){var c=o.defaultValue==null?"":o.defaultValue,p=o.checked!=null?o.checked:o.defaultChecked;c=Ue(o.value!=null?o.value:c),i._wrapperState={initialChecked:p,initialValue:c,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Mo(i,o){o=o.checked,o!=null&&j(i,"checked",o,!1)}function Os(i,o){Mo(i,o);var c=Ue(o.value),p=o.type;if(c!=null)p==="number"?(c===0&&i.value===""||i.value!=c)&&(i.value=""+c):i.value!==""+c&&(i.value=""+c);else if(p==="submit"||p==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?Et(i,o.type,c):o.hasOwnProperty("defaultValue")&&Et(i,o.type,Ue(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function fl(i,o,c){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var p=o.type;if(!(p!=="submit"&&p!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,c||o===i.value||(i.value=o),i.defaultValue=o}c=i.name,c!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,c!==""&&(i.name=c)}function Et(i,o,c){(o!=="number"||Ai(i.ownerDocument)!==i)&&(c==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+c&&(i.defaultValue=""+c))}var gt=Array.isArray;function Jn(i,o,c,p){if(i=i.options,o){o={};for(var y=0;y<c.length;y++)o["$"+c[y]]=!0;for(c=0;c<i.length;c++)y=o.hasOwnProperty("$"+i[c].value),i[c].selected!==y&&(i[c].selected=y),y&&p&&(i[c].defaultSelected=!0)}else{for(c=""+Ue(c),o=null,y=0;y<i.length;y++){if(i[y].value===c){i[y].selected=!0,p&&(i[y].defaultSelected=!0);return}o!==null||i[y].disabled||(o=i[y])}o!==null&&(o.selected=!0)}}function pl(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return ae({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function ml(i,o){var c=o.value;if(c==null){if(c=o.children,o=o.defaultValue,c!=null){if(o!=null)throw Error(t(92));if(gt(c)){if(1<c.length)throw Error(t(93));c=c[0]}o=c}o==null&&(o=""),c=o}i._wrapperState={initialValue:Ue(c)}}function wu(i,o){var c=Ue(o.value),p=Ue(o.defaultValue);c!=null&&(c=""+c,c!==i.value&&(i.value=c),o.defaultValue==null&&i.defaultValue!==c&&(i.defaultValue=c)),p!=null&&(i.defaultValue=""+p)}function Ri(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function gl(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Lo(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?gl(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Pi,Eu=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,c,p,y){MSApp.execUnsafeLocalFunction(function(){return i(o,c,p,y)})}:i})(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(Pi=Pi||document.createElement("div"),Pi.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Pi.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function Fs(i,o){if(o){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=o;return}}i.textContent=o}var ji={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Tu=["Webkit","ms","Moz","O"];Object.keys(ji).forEach(function(i){Tu.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),ji[o]=ji[i]})});function Ni(i,o,c){return o==null||typeof o=="boolean"||o===""?"":c||typeof o!="number"||o===0||ji.hasOwnProperty(i)&&ji[i]?(""+o).trim():o+"px"}function Oo(i,o){i=i.style;for(var c in o)if(o.hasOwnProperty(c)){var p=c.indexOf("--")===0,y=Ni(c,o[c],p);c==="float"&&(c="cssFloat"),p?i.setProperty(c,y):i[c]=y}}var yl=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zn(i,o){if(o){if(yl[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function Fo(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Di=null;function Bo(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Qr=null,Yr=null,ht=null;function vl(i){if(i=Hl(i)){if(typeof Qr!="function")throw Error(t(280));var o=i.stateNode;o&&(o=Yu(o),Qr(i.stateNode,i.type,o))}}function Vi(i){Yr?ht?ht.push(i):ht=[i]:Yr=i}function Mi(){if(Yr){var i=Yr,o=ht;if(ht=Yr=null,vl(i),o)for(i=0;i<o.length;i++)vl(o[i])}}function ku(i,o){return i(o)}function Su(){}var xr=!1;function bu(i,o,c){if(xr)return i(o,c);xr=!0;try{return ku(i,o,c)}finally{xr=!1,(Yr!==null||ht!==null)&&(Su(),Mi())}}function Bs(i,o){var c=i.stateNode;if(c===null)return null;var p=Yu(c);if(p===null)return null;c=p[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(i=i.type,p=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!p;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(t(231,o,typeof c));return c}var Li=!1;if(f)try{var Oi={};Object.defineProperty(Oi,"passive",{get:function(){Li=!0}}),window.addEventListener("test",Oi,Oi),window.removeEventListener("test",Oi,Oi)}catch{Li=!1}function Iu(i,o,c,p,y,x,S,D,F){var Y=Array.prototype.slice.call(arguments,3);try{o.apply(c,Y)}catch(ne){this.onError(ne)}}var Xr=!1,_r=null,zo=!1,Ln=null,Cu={onError:function(i){Xr=!0,_r=i}};function Au(i,o,c,p,y,x,S,D,F){Xr=!1,_r=null,Iu.apply(Cu,arguments)}function xl(i,o,c,p,y,x,S,D,F){if(Au.apply(this,arguments),Xr){if(Xr){var Y=_r;Xr=!1,_r=null}else throw Error(t(198));zo||(zo=!0,Ln=Y)}}function er(i){var o=i,c=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(c=o.return),i=o.return;while(i)}return o.tag===3?c:null}function _l(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function Ru(i){if(er(i)!==i)throw Error(t(188))}function Pu(i){var o=i.alternate;if(!o){if(o=er(i),o===null)throw Error(t(188));return o!==i?null:i}for(var c=i,p=o;;){var y=c.return;if(y===null)break;var x=y.alternate;if(x===null){if(p=y.return,p!==null){c=p;continue}break}if(y.child===x.child){for(x=y.child;x;){if(x===c)return Ru(y),i;if(x===p)return Ru(y),o;x=x.sibling}throw Error(t(188))}if(c.return!==p.return)c=y,p=x;else{for(var S=!1,D=y.child;D;){if(D===c){S=!0,c=y,p=x;break}if(D===p){S=!0,p=y,c=x;break}D=D.sibling}if(!S){for(D=x.child;D;){if(D===c){S=!0,c=x,p=y;break}if(D===p){S=!0,p=x,c=y;break}D=D.sibling}if(!S)throw Error(t(189))}}if(c.alternate!==p)throw Error(t(190))}if(c.tag!==3)throw Error(t(188));return c.stateNode.current===c?i:o}function ju(i){return i=Pu(i),i!==null?zs(i):null}function zs(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=zs(i);if(o!==null)return o;i=i.sibling}return null}var wl=e.unstable_scheduleCallback,Uo=e.unstable_cancelCallback,Us=e.unstable_shouldYield,Jr=e.unstable_requestPaint,tt=e.unstable_now,pf=e.unstable_getCurrentPriorityLevel,$o=e.unstable_ImmediatePriority,El=e.unstable_UserBlockingPriority,$s=e.unstable_NormalPriority,Tl=e.unstable_LowPriority,Wo=e.unstable_IdlePriority,Ws=null,Tn=null;function Nu(i){if(Tn&&typeof Tn.onCommitFiberRoot=="function")try{Tn.onCommitFiberRoot(Ws,i,void 0,(i.current.flags&128)===128)}catch{}}var kn=Math.clz32?Math.clz32:Hs,wr=Math.log,On=Math.LN2;function Hs(i){return i>>>=0,i===0?32:31-(wr(i)/On|0)|0}var Er=64,Fi=4194304;function Ke(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Zr(i,o){var c=i.pendingLanes;if(c===0)return 0;var p=0,y=i.suspendedLanes,x=i.pingedLanes,S=c&268435455;if(S!==0){var D=S&~y;D!==0?p=Ke(D):(x&=S,x!==0&&(p=Ke(x)))}else S=c&~y,S!==0?p=Ke(S):x!==0&&(p=Ke(x));if(p===0)return 0;if(o!==0&&o!==p&&(o&y)===0&&(y=p&-p,x=o&-o,y>=x||y===16&&(x&4194240)!==0))return o;if((p&4)!==0&&(p|=c&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=p;0<o;)c=31-kn(o),y=1<<c,p|=i[c],o&=~y;return p}function Ks(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qs(i,o){for(var c=i.suspendedLanes,p=i.pingedLanes,y=i.expirationTimes,x=i.pendingLanes;0<x;){var S=31-kn(x),D=1<<S,F=y[S];F===-1?((D&c)===0||(D&p)!==0)&&(y[S]=Ks(D,o)):F<=o&&(i.expiredLanes|=D),x&=~D}}function kl(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Sl(){var i=Er;return Er<<=1,(Er&4194240)===0&&(Er=64),i}function bl(i){for(var o=[],c=0;31>c;c++)o.push(i);return o}function Gs(i,o,c){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-kn(o),i[o]=c}function mf(i,o){var c=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var p=i.eventTimes;for(i=i.expirationTimes;0<c;){var y=31-kn(c),x=1<<y;o[y]=0,p[y]=-1,i[y]=-1,c&=~x}}function Il(i,o){var c=i.entangledLanes|=o;for(i=i.entanglements;c;){var p=31-kn(c),y=1<<p;y&o|i[p]&o&&(i[p]|=o),c&=~y}}var Be=0;function Tr(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Cl,Ho,Al,Rl,Pl,kr=!1,Ko=[],Sr=null,br=null,Ut=null,Qs=new Map,ei=new Map,Sn=[],Du="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Bi(i,o){switch(i){case"focusin":case"focusout":Sr=null;break;case"dragenter":case"dragleave":br=null;break;case"mouseover":case"mouseout":Ut=null;break;case"pointerover":case"pointerout":Qs.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":ei.delete(o.pointerId)}}function tr(i,o,c,p,y,x){return i===null||i.nativeEvent!==x?(i={blockedOn:o,domEventName:c,eventSystemFlags:p,nativeEvent:x,targetContainers:[y]},o!==null&&(o=Hl(o),o!==null&&Ho(o)),i):(i.eventSystemFlags|=p,o=i.targetContainers,y!==null&&o.indexOf(y)===-1&&o.push(y),i)}function Vu(i,o,c,p,y){switch(o){case"focusin":return Sr=tr(Sr,i,o,c,p,y),!0;case"dragenter":return br=tr(br,i,o,c,p,y),!0;case"mouseover":return Ut=tr(Ut,i,o,c,p,y),!0;case"pointerover":var x=y.pointerId;return Qs.set(x,tr(Qs.get(x)||null,i,o,c,p,y)),!0;case"gotpointercapture":return x=y.pointerId,ei.set(x,tr(ei.get(x)||null,i,o,c,p,y)),!0}return!1}function qo(i){var o=Zs(i.target);if(o!==null){var c=er(o);if(c!==null){if(o=c.tag,o===13){if(o=_l(c),o!==null){i.blockedOn=o,Pl(i.priority,function(){Al(c)});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Je(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var c=Go(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(c===null){c=i.nativeEvent;var p=new c.constructor(c.type,c);Di=p,c.target.dispatchEvent(p),Di=null}else return o=Hl(c),o!==null&&Ho(o),i.blockedOn=c,!1;o.shift()}return!0}function Mu(i,o,c){Je(i)&&c.delete(o)}function gf(){kr=!1,Sr!==null&&Je(Sr)&&(Sr=null),br!==null&&Je(br)&&(br=null),Ut!==null&&Je(Ut)&&(Ut=null),Qs.forEach(Mu),ei.forEach(Mu)}function zi(i,o){i.blockedOn===o&&(i.blockedOn=null,kr||(kr=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,gf)))}function Ui(i){function o(y){return zi(y,i)}if(0<Ko.length){zi(Ko[0],i);for(var c=1;c<Ko.length;c++){var p=Ko[c];p.blockedOn===i&&(p.blockedOn=null)}}for(Sr!==null&&zi(Sr,i),br!==null&&zi(br,i),Ut!==null&&zi(Ut,i),Qs.forEach(o),ei.forEach(o),c=0;c<Sn.length;c++)p=Sn[c],p.blockedOn===i&&(p.blockedOn=null);for(;0<Sn.length&&(c=Sn[0],c.blockedOn===null);)qo(c),c.blockedOn===null&&Sn.shift()}var ti=Q.ReactCurrentBatchConfig,ni=!0;function Ir(i,o,c,p){var y=Be,x=ti.transition;ti.transition=null;try{Be=1,jl(i,o,c,p)}finally{Be=y,ti.transition=x}}function Lu(i,o,c,p){var y=Be,x=ti.transition;ti.transition=null;try{Be=4,jl(i,o,c,p)}finally{Be=y,ti.transition=x}}function jl(i,o,c,p){if(ni){var y=Go(i,o,c,p);if(y===null)If(i,o,p,Cr,c),Bi(i,p);else if(Vu(y,i,o,c,p))p.stopPropagation();else if(Bi(i,p),o&4&&-1<Du.indexOf(i)){for(;y!==null;){var x=Hl(y);if(x!==null&&Cl(x),x=Go(i,o,c,p),x===null&&If(i,o,p,Cr,c),x===y)break;y=x}y!==null&&p.stopPropagation()}else If(i,o,p,null,c)}}var Cr=null;function Go(i,o,c,p){if(Cr=null,i=Bo(p),i=Zs(i),i!==null)if(o=er(i),o===null)i=null;else if(c=o.tag,c===13){if(i=_l(o),i!==null)return i;i=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return Cr=i,null}function Qo(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pf()){case $o:return 1;case El:return 4;case $s:case Tl:return 16;case Wo:return 536870912;default:return 16}default:return 16}}var bn=null,Yo=null,ri=null;function Ou(){if(ri)return ri;var i,o=Yo,c=o.length,p,y="value"in bn?bn.value:bn.textContent,x=y.length;for(i=0;i<c&&o[i]===y[i];i++);var S=c-i;for(p=1;p<=S&&o[c-p]===y[x-p];p++);return ri=y.slice(i,1<p?1-p:void 0)}function Ys(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Ar(){return!0}function Nl(){return!1}function Yt(i){function o(c,p,y,x,S){this._reactName=c,this._targetInst=y,this.type=p,this.nativeEvent=x,this.target=S,this.currentTarget=null;for(var D in i)i.hasOwnProperty(D)&&(c=i[D],this[D]=c?c(x):x[D]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?Ar:Nl,this.isPropagationStopped=Nl,this}return ae(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Ar)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Ar)},persist:function(){},isPersistent:Ar}),o}var Rr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xs=Yt(Rr),$i=ae({},Rr,{view:0,detail:0}),Xo=Yt($i),Jo,Zo,In,Js=ae({},$i,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Re,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==In&&(In&&i.type==="mousemove"?(Jo=i.screenX-In.screenX,Zo=i.screenY-In.screenY):Zo=Jo=0,In=i),Jo)},movementY:function(i){return"movementY"in i?i.movementY:Zo}}),Dl=Yt(Js),Fu=ae({},Js,{dataTransfer:0}),Bu=Yt(Fu),ea=ae({},$i,{relatedTarget:0}),$t=Yt(ea),zu=ae({},Rr,{animationName:0,elapsedTime:0,pseudoElement:0}),Uu=Yt(zu),Wi=ae({},Rr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),h=Yt(Wi),_=ae({},Rr,{data:0}),E=Yt(_),R={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},q={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},X={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oe(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=X[i])?!!o[i]:!1}function Re(){return oe}var yt=ae({},$i,{key:function(i){if(i.key){var o=R[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Ys(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?q[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Re,charCode:function(i){return i.type==="keypress"?Ys(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Ys(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Ye=Yt(yt),Tt=ae({},Js,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cn=Yt(Tt),ii=ae({},$i,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Re}),Pr=Yt(ii),jr=ae({},Rr,{propertyName:0,elapsedTime:0,pseudoElement:0}),ta=Yt(jr),Vl=ae({},Js,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Wb=Yt(Vl),Hb=[9,13,27,32],yf=f&&"CompositionEvent"in window,Ml=null;f&&"documentMode"in document&&(Ml=document.documentMode);var Kb=f&&"TextEvent"in window&&!Ml,f0=f&&(!yf||Ml&&8<Ml&&11>=Ml),p0=" ",m0=!1;function g0(i,o){switch(i){case"keyup":return Hb.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function y0(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var na=!1;function qb(i,o){switch(i){case"compositionend":return y0(o);case"keypress":return o.which!==32?null:(m0=!0,p0);case"textInput":return i=o.data,i===p0&&m0?null:i;default:return null}}function Gb(i,o){if(na)return i==="compositionend"||!yf&&g0(i,o)?(i=Ou(),ri=Yo=bn=null,na=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return f0&&o.locale!=="ko"?null:o.data;default:return null}}var Qb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function v0(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!Qb[i.type]:o==="textarea"}function x0(i,o,c,p){Vi(p),o=qu(o,"onChange"),0<o.length&&(c=new Xs("onChange","change",null,c,p),i.push({event:c,listeners:o}))}var Ll=null,Ol=null;function Yb(i){L0(i,0)}function $u(i){var o=aa(i);if(hl(o))return i}function Xb(i,o){if(i==="change")return o}var _0=!1;if(f){var vf;if(f){var xf="oninput"in document;if(!xf){var w0=document.createElement("div");w0.setAttribute("oninput","return;"),xf=typeof w0.oninput=="function"}vf=xf}else vf=!1;_0=vf&&(!document.documentMode||9<document.documentMode)}function E0(){Ll&&(Ll.detachEvent("onpropertychange",T0),Ol=Ll=null)}function T0(i){if(i.propertyName==="value"&&$u(Ol)){var o=[];x0(o,Ol,i,Bo(i)),bu(Yb,o)}}function Jb(i,o,c){i==="focusin"?(E0(),Ll=o,Ol=c,Ll.attachEvent("onpropertychange",T0)):i==="focusout"&&E0()}function Zb(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return $u(Ol)}function eI(i,o){if(i==="click")return $u(o)}function tI(i,o){if(i==="input"||i==="change")return $u(o)}function nI(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var nr=typeof Object.is=="function"?Object.is:nI;function Fl(i,o){if(nr(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var c=Object.keys(i),p=Object.keys(o);if(c.length!==p.length)return!1;for(p=0;p<c.length;p++){var y=c[p];if(!d.call(o,y)||!nr(i[y],o[y]))return!1}return!0}function k0(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function S0(i,o){var c=k0(i);i=0;for(var p;c;){if(c.nodeType===3){if(p=i+c.textContent.length,i<=o&&p>=o)return{node:c,offset:o-i};i=p}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=k0(c)}}function b0(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?b0(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function I0(){for(var i=window,o=Ai();o instanceof i.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)i=o.contentWindow;else break;o=Ai(i.document)}return o}function _f(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function rI(i){var o=I0(),c=i.focusedElem,p=i.selectionRange;if(o!==c&&c&&c.ownerDocument&&b0(c.ownerDocument.documentElement,c)){if(p!==null&&_f(c)){if(o=p.start,i=p.end,i===void 0&&(i=o),"selectionStart"in c)c.selectionStart=o,c.selectionEnd=Math.min(i,c.value.length);else if(i=(o=c.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var y=c.textContent.length,x=Math.min(p.start,y);p=p.end===void 0?x:Math.min(p.end,y),!i.extend&&x>p&&(y=p,p=x,x=y),y=S0(c,x);var S=S0(c,p);y&&S&&(i.rangeCount!==1||i.anchorNode!==y.node||i.anchorOffset!==y.offset||i.focusNode!==S.node||i.focusOffset!==S.offset)&&(o=o.createRange(),o.setStart(y.node,y.offset),i.removeAllRanges(),x>p?(i.addRange(o),i.extend(S.node,S.offset)):(o.setEnd(S.node,S.offset),i.addRange(o)))}}for(o=[],i=c;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<o.length;c++)i=o[c],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var iI=f&&"documentMode"in document&&11>=document.documentMode,ra=null,wf=null,Bl=null,Ef=!1;function C0(i,o,c){var p=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Ef||ra==null||ra!==Ai(p)||(p=ra,"selectionStart"in p&&_f(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Bl&&Fl(Bl,p)||(Bl=p,p=qu(wf,"onSelect"),0<p.length&&(o=new Xs("onSelect","select",null,o,c),i.push({event:o,listeners:p}),o.target=ra)))}function Wu(i,o){var c={};return c[i.toLowerCase()]=o.toLowerCase(),c["Webkit"+i]="webkit"+o,c["Moz"+i]="moz"+o,c}var ia={animationend:Wu("Animation","AnimationEnd"),animationiteration:Wu("Animation","AnimationIteration"),animationstart:Wu("Animation","AnimationStart"),transitionend:Wu("Transition","TransitionEnd")},Tf={},A0={};f&&(A0=document.createElement("div").style,"AnimationEvent"in window||(delete ia.animationend.animation,delete ia.animationiteration.animation,delete ia.animationstart.animation),"TransitionEvent"in window||delete ia.transitionend.transition);function Hu(i){if(Tf[i])return Tf[i];if(!ia[i])return i;var o=ia[i],c;for(c in o)if(o.hasOwnProperty(c)&&c in A0)return Tf[i]=o[c];return i}var R0=Hu("animationend"),P0=Hu("animationiteration"),j0=Hu("animationstart"),N0=Hu("transitionend"),D0=new Map,V0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hi(i,o){D0.set(i,o),a(o,[i])}for(var kf=0;kf<V0.length;kf++){var Sf=V0[kf],sI=Sf.toLowerCase(),oI=Sf[0].toUpperCase()+Sf.slice(1);Hi(sI,"on"+oI)}Hi(R0,"onAnimationEnd"),Hi(P0,"onAnimationIteration"),Hi(j0,"onAnimationStart"),Hi("dblclick","onDoubleClick"),Hi("focusin","onFocus"),Hi("focusout","onBlur"),Hi(N0,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aI=new Set("cancel close invalid load scroll toggle".split(" ").concat(zl));function M0(i,o,c){var p=i.type||"unknown-event";i.currentTarget=c,xl(p,o,void 0,i),i.currentTarget=null}function L0(i,o){o=(o&4)!==0;for(var c=0;c<i.length;c++){var p=i[c],y=p.event;p=p.listeners;e:{var x=void 0;if(o)for(var S=p.length-1;0<=S;S--){var D=p[S],F=D.instance,Y=D.currentTarget;if(D=D.listener,F!==x&&y.isPropagationStopped())break e;M0(y,D,Y),x=F}else for(S=0;S<p.length;S++){if(D=p[S],F=D.instance,Y=D.currentTarget,D=D.listener,F!==x&&y.isPropagationStopped())break e;M0(y,D,Y),x=F}}}if(zo)throw i=Ln,zo=!1,Ln=null,i}function nt(i,o){var c=o[Nf];c===void 0&&(c=o[Nf]=new Set);var p=i+"__bubble";c.has(p)||(O0(o,i,2,!1),c.add(p))}function bf(i,o,c){var p=0;o&&(p|=4),O0(c,i,p,o)}var Ku="_reactListening"+Math.random().toString(36).slice(2);function Ul(i){if(!i[Ku]){i[Ku]=!0,r.forEach(function(c){c!=="selectionchange"&&(aI.has(c)||bf(c,!1,i),bf(c,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Ku]||(o[Ku]=!0,bf("selectionchange",!1,o))}}function O0(i,o,c,p){switch(Qo(o)){case 1:var y=Ir;break;case 4:y=Lu;break;default:y=jl}c=y.bind(null,o,c,i),y=void 0,!Li||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(y=!0),p?y!==void 0?i.addEventListener(o,c,{capture:!0,passive:y}):i.addEventListener(o,c,!0):y!==void 0?i.addEventListener(o,c,{passive:y}):i.addEventListener(o,c,!1)}function If(i,o,c,p,y){var x=p;if((o&1)===0&&(o&2)===0&&p!==null)e:for(;;){if(p===null)return;var S=p.tag;if(S===3||S===4){var D=p.stateNode.containerInfo;if(D===y||D.nodeType===8&&D.parentNode===y)break;if(S===4)for(S=p.return;S!==null;){var F=S.tag;if((F===3||F===4)&&(F=S.stateNode.containerInfo,F===y||F.nodeType===8&&F.parentNode===y))return;S=S.return}for(;D!==null;){if(S=Zs(D),S===null)return;if(F=S.tag,F===5||F===6){p=x=S;continue e}D=D.parentNode}}p=p.return}bu(function(){var Y=x,ne=Bo(c),re=[];e:{var te=D0.get(i);if(te!==void 0){var ce=Xs,pe=i;switch(i){case"keypress":if(Ys(c)===0)break e;case"keydown":case"keyup":ce=Ye;break;case"focusin":pe="focus",ce=$t;break;case"focusout":pe="blur",ce=$t;break;case"beforeblur":case"afterblur":ce=$t;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=Dl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=Bu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=Pr;break;case R0:case P0:case j0:ce=Uu;break;case N0:ce=ta;break;case"scroll":ce=Xo;break;case"wheel":ce=Wb;break;case"copy":case"cut":case"paste":ce=h;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=Cn}var ge=(o&4)!==0,vt=!ge&&i==="scroll",K=ge?te!==null?te+"Capture":null:te;ge=[];for(var z=Y,G;z!==null;){G=z;var se=G.stateNode;if(G.tag===5&&se!==null&&(G=se,K!==null&&(se=Bs(z,K),se!=null&&ge.push($l(z,se,G)))),vt)break;z=z.return}0<ge.length&&(te=new ce(te,pe,null,c,ne),re.push({event:te,listeners:ge}))}}if((o&7)===0){e:{if(te=i==="mouseover"||i==="pointerover",ce=i==="mouseout"||i==="pointerout",te&&c!==Di&&(pe=c.relatedTarget||c.fromElement)&&(Zs(pe)||pe[si]))break e;if((ce||te)&&(te=ne.window===ne?ne:(te=ne.ownerDocument)?te.defaultView||te.parentWindow:window,ce?(pe=c.relatedTarget||c.toElement,ce=Y,pe=pe?Zs(pe):null,pe!==null&&(vt=er(pe),pe!==vt||pe.tag!==5&&pe.tag!==6)&&(pe=null)):(ce=null,pe=Y),ce!==pe)){if(ge=Dl,se="onMouseLeave",K="onMouseEnter",z="mouse",(i==="pointerout"||i==="pointerover")&&(ge=Cn,se="onPointerLeave",K="onPointerEnter",z="pointer"),vt=ce==null?te:aa(ce),G=pe==null?te:aa(pe),te=new ge(se,z+"leave",ce,c,ne),te.target=vt,te.relatedTarget=G,se=null,Zs(ne)===Y&&(ge=new ge(K,z+"enter",pe,c,ne),ge.target=G,ge.relatedTarget=vt,se=ge),vt=se,ce&&pe)t:{for(ge=ce,K=pe,z=0,G=ge;G;G=sa(G))z++;for(G=0,se=K;se;se=sa(se))G++;for(;0<z-G;)ge=sa(ge),z--;for(;0<G-z;)K=sa(K),G--;for(;z--;){if(ge===K||K!==null&&ge===K.alternate)break t;ge=sa(ge),K=sa(K)}ge=null}else ge=null;ce!==null&&F0(re,te,ce,ge,!1),pe!==null&&vt!==null&&F0(re,vt,pe,ge,!0)}}e:{if(te=Y?aa(Y):window,ce=te.nodeName&&te.nodeName.toLowerCase(),ce==="select"||ce==="input"&&te.type==="file")var ye=Xb;else if(v0(te))if(_0)ye=tI;else{ye=Zb;var we=Jb}else(ce=te.nodeName)&&ce.toLowerCase()==="input"&&(te.type==="checkbox"||te.type==="radio")&&(ye=eI);if(ye&&(ye=ye(i,Y))){x0(re,ye,c,ne);break e}we&&we(i,te,Y),i==="focusout"&&(we=te._wrapperState)&&we.controlled&&te.type==="number"&&Et(te,"number",te.value)}switch(we=Y?aa(Y):window,i){case"focusin":(v0(we)||we.contentEditable==="true")&&(ra=we,wf=Y,Bl=null);break;case"focusout":Bl=wf=ra=null;break;case"mousedown":Ef=!0;break;case"contextmenu":case"mouseup":case"dragend":Ef=!1,C0(re,c,ne);break;case"selectionchange":if(iI)break;case"keydown":case"keyup":C0(re,c,ne)}var Ee;if(yf)e:{switch(i){case"compositionstart":var be="onCompositionStart";break e;case"compositionend":be="onCompositionEnd";break e;case"compositionupdate":be="onCompositionUpdate";break e}be=void 0}else na?g0(i,c)&&(be="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(be="onCompositionStart");be&&(f0&&c.locale!=="ko"&&(na||be!=="onCompositionStart"?be==="onCompositionEnd"&&na&&(Ee=Ou()):(bn=ne,Yo="value"in bn?bn.value:bn.textContent,na=!0)),we=qu(Y,be),0<we.length&&(be=new E(be,i,null,c,ne),re.push({event:be,listeners:we}),Ee?be.data=Ee:(Ee=y0(c),Ee!==null&&(be.data=Ee)))),(Ee=Kb?qb(i,c):Gb(i,c))&&(Y=qu(Y,"onBeforeInput"),0<Y.length&&(ne=new E("onBeforeInput","beforeinput",null,c,ne),re.push({event:ne,listeners:Y}),ne.data=Ee))}L0(re,o)})}function $l(i,o,c){return{instance:i,listener:o,currentTarget:c}}function qu(i,o){for(var c=o+"Capture",p=[];i!==null;){var y=i,x=y.stateNode;y.tag===5&&x!==null&&(y=x,x=Bs(i,c),x!=null&&p.unshift($l(i,x,y)),x=Bs(i,o),x!=null&&p.push($l(i,x,y))),i=i.return}return p}function sa(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function F0(i,o,c,p,y){for(var x=o._reactName,S=[];c!==null&&c!==p;){var D=c,F=D.alternate,Y=D.stateNode;if(F!==null&&F===p)break;D.tag===5&&Y!==null&&(D=Y,y?(F=Bs(c,x),F!=null&&S.unshift($l(c,F,D))):y||(F=Bs(c,x),F!=null&&S.push($l(c,F,D)))),c=c.return}S.length!==0&&i.push({event:o,listeners:S})}var lI=/\r\n?/g,cI=/\u0000|\uFFFD/g;function B0(i){return(typeof i=="string"?i:""+i).replace(lI,`
`).replace(cI,"")}function Gu(i,o,c){if(o=B0(o),B0(i)!==o&&c)throw Error(t(425))}function Qu(){}var Cf=null,Af=null;function Rf(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Pf=typeof setTimeout=="function"?setTimeout:void 0,uI=typeof clearTimeout=="function"?clearTimeout:void 0,z0=typeof Promise=="function"?Promise:void 0,dI=typeof queueMicrotask=="function"?queueMicrotask:typeof z0<"u"?function(i){return z0.resolve(null).then(i).catch(hI)}:Pf;function hI(i){setTimeout(function(){throw i})}function jf(i,o){var c=o,p=0;do{var y=c.nextSibling;if(i.removeChild(c),y&&y.nodeType===8)if(c=y.data,c==="/$"){if(p===0){i.removeChild(y),Ui(o);return}p--}else c!=="$"&&c!=="$?"&&c!=="$!"||p++;c=y}while(c);Ui(o)}function Ki(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function U0(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"){if(o===0)return i;o--}else c==="/$"&&o++}i=i.previousSibling}return null}var oa=Math.random().toString(36).slice(2),Nr="__reactFiber$"+oa,Wl="__reactProps$"+oa,si="__reactContainer$"+oa,Nf="__reactEvents$"+oa,fI="__reactListeners$"+oa,pI="__reactHandles$"+oa;function Zs(i){var o=i[Nr];if(o)return o;for(var c=i.parentNode;c;){if(o=c[si]||c[Nr]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(i=U0(i);i!==null;){if(c=i[Nr])return c;i=U0(i)}return o}i=c,c=i.parentNode}return null}function Hl(i){return i=i[Nr]||i[si],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function aa(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function Yu(i){return i[Wl]||null}var Df=[],la=-1;function qi(i){return{current:i}}function rt(i){0>la||(i.current=Df[la],Df[la]=null,la--)}function Ze(i,o){la++,Df[la]=i.current,i.current=o}var Gi={},Xt=qi(Gi),pn=qi(!1),eo=Gi;function ca(i,o){var c=i.type.contextTypes;if(!c)return Gi;var p=i.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===o)return p.__reactInternalMemoizedMaskedChildContext;var y={},x;for(x in c)y[x]=o[x];return p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=y),y}function mn(i){return i=i.childContextTypes,i!=null}function Xu(){rt(pn),rt(Xt)}function $0(i,o,c){if(Xt.current!==Gi)throw Error(t(168));Ze(Xt,o),Ze(pn,c)}function W0(i,o,c){var p=i.stateNode;if(o=o.childContextTypes,typeof p.getChildContext!="function")return c;p=p.getChildContext();for(var y in p)if(!(y in o))throw Error(t(108,Ge(i)||"Unknown",y));return ae({},c,p)}function Ju(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Gi,eo=Xt.current,Ze(Xt,i),Ze(pn,pn.current),!0}function H0(i,o,c){var p=i.stateNode;if(!p)throw Error(t(169));c?(i=W0(i,o,eo),p.__reactInternalMemoizedMergedChildContext=i,rt(pn),rt(Xt),Ze(Xt,i)):rt(pn),Ze(pn,c)}var oi=null,Zu=!1,Vf=!1;function K0(i){oi===null?oi=[i]:oi.push(i)}function mI(i){Zu=!0,K0(i)}function Qi(){if(!Vf&&oi!==null){Vf=!0;var i=0,o=Be;try{var c=oi;for(Be=1;i<c.length;i++){var p=c[i];do p=p(!0);while(p!==null)}oi=null,Zu=!1}catch(y){throw oi!==null&&(oi=oi.slice(i+1)),wl($o,Qi),y}finally{Be=o,Vf=!1}}return null}var ua=[],da=0,ed=null,td=0,Fn=[],Bn=0,to=null,ai=1,li="";function no(i,o){ua[da++]=td,ua[da++]=ed,ed=i,td=o}function q0(i,o,c){Fn[Bn++]=ai,Fn[Bn++]=li,Fn[Bn++]=to,to=i;var p=ai;i=li;var y=32-kn(p)-1;p&=~(1<<y),c+=1;var x=32-kn(o)+y;if(30<x){var S=y-y%5;x=(p&(1<<S)-1).toString(32),p>>=S,y-=S,ai=1<<32-kn(o)+y|c<<y|p,li=x+i}else ai=1<<x|c<<y|p,li=i}function Mf(i){i.return!==null&&(no(i,1),q0(i,1,0))}function Lf(i){for(;i===ed;)ed=ua[--da],ua[da]=null,td=ua[--da],ua[da]=null;for(;i===to;)to=Fn[--Bn],Fn[Bn]=null,li=Fn[--Bn],Fn[Bn]=null,ai=Fn[--Bn],Fn[Bn]=null}var An=null,Rn=null,ot=!1,rr=null;function G0(i,o){var c=Wn(5,null,null,0);c.elementType="DELETED",c.stateNode=o,c.return=i,o=i.deletions,o===null?(i.deletions=[c],i.flags|=16):o.push(c)}function Q0(i,o){switch(i.tag){case 5:var c=i.type;return o=o.nodeType!==1||c.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,An=i,Rn=Ki(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,An=i,Rn=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(c=to!==null?{id:ai,overflow:li}:null,i.memoizedState={dehydrated:o,treeContext:c,retryLane:1073741824},c=Wn(18,null,null,0),c.stateNode=o,c.return=i,i.child=c,An=i,Rn=null,!0):!1;default:return!1}}function Of(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Ff(i){if(ot){var o=Rn;if(o){var c=o;if(!Q0(i,o)){if(Of(i))throw Error(t(418));o=Ki(c.nextSibling);var p=An;o&&Q0(i,o)?G0(p,c):(i.flags=i.flags&-4097|2,ot=!1,An=i)}}else{if(Of(i))throw Error(t(418));i.flags=i.flags&-4097|2,ot=!1,An=i}}}function Y0(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;An=i}function nd(i){if(i!==An)return!1;if(!ot)return Y0(i),ot=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!Rf(i.type,i.memoizedProps)),o&&(o=Rn)){if(Of(i))throw X0(),Error(t(418));for(;o;)G0(i,o),o=Ki(o.nextSibling)}if(Y0(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"){if(o===0){Rn=Ki(i.nextSibling);break e}o--}else c!=="$"&&c!=="$!"&&c!=="$?"||o++}i=i.nextSibling}Rn=null}}else Rn=An?Ki(i.stateNode.nextSibling):null;return!0}function X0(){for(var i=Rn;i;)i=Ki(i.nextSibling)}function ha(){Rn=An=null,ot=!1}function Bf(i){rr===null?rr=[i]:rr.push(i)}var gI=Q.ReactCurrentBatchConfig;function Kl(i,o,c){if(i=c.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(t(309));var p=c.stateNode}if(!p)throw Error(t(147,i));var y=p,x=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===x?o.ref:(o=function(S){var D=y.refs;S===null?delete D[x]:D[x]=S},o._stringRef=x,o)}if(typeof i!="string")throw Error(t(284));if(!c._owner)throw Error(t(290,i))}return i}function rd(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function J0(i){var o=i._init;return o(i._payload)}function Z0(i){function o(K,z){if(i){var G=K.deletions;G===null?(K.deletions=[z],K.flags|=16):G.push(z)}}function c(K,z){if(!i)return null;for(;z!==null;)o(K,z),z=z.sibling;return null}function p(K,z){for(K=new Map;z!==null;)z.key!==null?K.set(z.key,z):K.set(z.index,z),z=z.sibling;return K}function y(K,z){return K=rs(K,z),K.index=0,K.sibling=null,K}function x(K,z,G){return K.index=G,i?(G=K.alternate,G!==null?(G=G.index,G<z?(K.flags|=2,z):G):(K.flags|=2,z)):(K.flags|=1048576,z)}function S(K){return i&&K.alternate===null&&(K.flags|=2),K}function D(K,z,G,se){return z===null||z.tag!==6?(z=Pp(G,K.mode,se),z.return=K,z):(z=y(z,G),z.return=K,z)}function F(K,z,G,se){var ye=G.type;return ye===A?ne(K,z,G.props.children,se,G.key):z!==null&&(z.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===wt&&J0(ye)===z.type)?(se=y(z,G.props),se.ref=Kl(K,z,G),se.return=K,se):(se=Id(G.type,G.key,G.props,null,K.mode,se),se.ref=Kl(K,z,G),se.return=K,se)}function Y(K,z,G,se){return z===null||z.tag!==4||z.stateNode.containerInfo!==G.containerInfo||z.stateNode.implementation!==G.implementation?(z=jp(G,K.mode,se),z.return=K,z):(z=y(z,G.children||[]),z.return=K,z)}function ne(K,z,G,se,ye){return z===null||z.tag!==7?(z=uo(G,K.mode,se,ye),z.return=K,z):(z=y(z,G),z.return=K,z)}function re(K,z,G){if(typeof z=="string"&&z!==""||typeof z=="number")return z=Pp(""+z,K.mode,G),z.return=K,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case W:return G=Id(z.type,z.key,z.props,null,K.mode,G),G.ref=Kl(K,null,z),G.return=K,G;case H:return z=jp(z,K.mode,G),z.return=K,z;case wt:var se=z._init;return re(K,se(z._payload),G)}if(gt(z)||fe(z))return z=uo(z,K.mode,G,null),z.return=K,z;rd(K,z)}return null}function te(K,z,G,se){var ye=z!==null?z.key:null;if(typeof G=="string"&&G!==""||typeof G=="number")return ye!==null?null:D(K,z,""+G,se);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case W:return G.key===ye?F(K,z,G,se):null;case H:return G.key===ye?Y(K,z,G,se):null;case wt:return ye=G._init,te(K,z,ye(G._payload),se)}if(gt(G)||fe(G))return ye!==null?null:ne(K,z,G,se,null);rd(K,G)}return null}function ce(K,z,G,se,ye){if(typeof se=="string"&&se!==""||typeof se=="number")return K=K.get(G)||null,D(z,K,""+se,ye);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case W:return K=K.get(se.key===null?G:se.key)||null,F(z,K,se,ye);case H:return K=K.get(se.key===null?G:se.key)||null,Y(z,K,se,ye);case wt:var we=se._init;return ce(K,z,G,we(se._payload),ye)}if(gt(se)||fe(se))return K=K.get(G)||null,ne(z,K,se,ye,null);rd(z,se)}return null}function pe(K,z,G,se){for(var ye=null,we=null,Ee=z,be=z=0,Ft=null;Ee!==null&&be<G.length;be++){Ee.index>be?(Ft=Ee,Ee=null):Ft=Ee.sibling;var We=te(K,Ee,G[be],se);if(We===null){Ee===null&&(Ee=Ft);break}i&&Ee&&We.alternate===null&&o(K,Ee),z=x(We,z,be),we===null?ye=We:we.sibling=We,we=We,Ee=Ft}if(be===G.length)return c(K,Ee),ot&&no(K,be),ye;if(Ee===null){for(;be<G.length;be++)Ee=re(K,G[be],se),Ee!==null&&(z=x(Ee,z,be),we===null?ye=Ee:we.sibling=Ee,we=Ee);return ot&&no(K,be),ye}for(Ee=p(K,Ee);be<G.length;be++)Ft=ce(Ee,K,be,G[be],se),Ft!==null&&(i&&Ft.alternate!==null&&Ee.delete(Ft.key===null?be:Ft.key),z=x(Ft,z,be),we===null?ye=Ft:we.sibling=Ft,we=Ft);return i&&Ee.forEach(function(is){return o(K,is)}),ot&&no(K,be),ye}function ge(K,z,G,se){var ye=fe(G);if(typeof ye!="function")throw Error(t(150));if(G=ye.call(G),G==null)throw Error(t(151));for(var we=ye=null,Ee=z,be=z=0,Ft=null,We=G.next();Ee!==null&&!We.done;be++,We=G.next()){Ee.index>be?(Ft=Ee,Ee=null):Ft=Ee.sibling;var is=te(K,Ee,We.value,se);if(is===null){Ee===null&&(Ee=Ft);break}i&&Ee&&is.alternate===null&&o(K,Ee),z=x(is,z,be),we===null?ye=is:we.sibling=is,we=is,Ee=Ft}if(We.done)return c(K,Ee),ot&&no(K,be),ye;if(Ee===null){for(;!We.done;be++,We=G.next())We=re(K,We.value,se),We!==null&&(z=x(We,z,be),we===null?ye=We:we.sibling=We,we=We);return ot&&no(K,be),ye}for(Ee=p(K,Ee);!We.done;be++,We=G.next())We=ce(Ee,K,be,We.value,se),We!==null&&(i&&We.alternate!==null&&Ee.delete(We.key===null?be:We.key),z=x(We,z,be),we===null?ye=We:we.sibling=We,we=We);return i&&Ee.forEach(function(QI){return o(K,QI)}),ot&&no(K,be),ye}function vt(K,z,G,se){if(typeof G=="object"&&G!==null&&G.type===A&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case W:e:{for(var ye=G.key,we=z;we!==null;){if(we.key===ye){if(ye=G.type,ye===A){if(we.tag===7){c(K,we.sibling),z=y(we,G.props.children),z.return=K,K=z;break e}}else if(we.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===wt&&J0(ye)===we.type){c(K,we.sibling),z=y(we,G.props),z.ref=Kl(K,we,G),z.return=K,K=z;break e}c(K,we);break}else o(K,we);we=we.sibling}G.type===A?(z=uo(G.props.children,K.mode,se,G.key),z.return=K,K=z):(se=Id(G.type,G.key,G.props,null,K.mode,se),se.ref=Kl(K,z,G),se.return=K,K=se)}return S(K);case H:e:{for(we=G.key;z!==null;){if(z.key===we)if(z.tag===4&&z.stateNode.containerInfo===G.containerInfo&&z.stateNode.implementation===G.implementation){c(K,z.sibling),z=y(z,G.children||[]),z.return=K,K=z;break e}else{c(K,z);break}else o(K,z);z=z.sibling}z=jp(G,K.mode,se),z.return=K,K=z}return S(K);case wt:return we=G._init,vt(K,z,we(G._payload),se)}if(gt(G))return pe(K,z,G,se);if(fe(G))return ge(K,z,G,se);rd(K,G)}return typeof G=="string"&&G!==""||typeof G=="number"?(G=""+G,z!==null&&z.tag===6?(c(K,z.sibling),z=y(z,G),z.return=K,K=z):(c(K,z),z=Pp(G,K.mode,se),z.return=K,K=z),S(K)):c(K,z)}return vt}var fa=Z0(!0),ev=Z0(!1),id=qi(null),sd=null,pa=null,zf=null;function Uf(){zf=pa=sd=null}function $f(i){var o=id.current;rt(id),i._currentValue=o}function Wf(i,o,c){for(;i!==null;){var p=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,p!==null&&(p.childLanes|=o)):p!==null&&(p.childLanes&o)!==o&&(p.childLanes|=o),i===c)break;i=i.return}}function ma(i,o){sd=i,zf=pa=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(gn=!0),i.firstContext=null)}function zn(i){var o=i._currentValue;if(zf!==i)if(i={context:i,memoizedValue:o,next:null},pa===null){if(sd===null)throw Error(t(308));pa=i,sd.dependencies={lanes:0,firstContext:i}}else pa=pa.next=i;return o}var ro=null;function Hf(i){ro===null?ro=[i]:ro.push(i)}function tv(i,o,c,p){var y=o.interleaved;return y===null?(c.next=c,Hf(o)):(c.next=y.next,y.next=c),o.interleaved=c,ci(i,p)}function ci(i,o){i.lanes|=o;var c=i.alternate;for(c!==null&&(c.lanes|=o),c=i,i=i.return;i!==null;)i.childLanes|=o,c=i.alternate,c!==null&&(c.childLanes|=o),c=i,i=i.return;return c.tag===3?c.stateNode:null}var Yi=!1;function Kf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nv(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function ui(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function Xi(i,o,c){var p=i.updateQueue;if(p===null)return null;if(p=p.shared,($e&2)!==0){var y=p.pending;return y===null?o.next=o:(o.next=y.next,y.next=o),p.pending=o,ci(i,c)}return y=p.interleaved,y===null?(o.next=o,Hf(p)):(o.next=y.next,y.next=o),p.interleaved=o,ci(i,c)}function od(i,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194240)!==0)){var p=o.lanes;p&=i.pendingLanes,c|=p,o.lanes=c,Il(i,c)}}function rv(i,o){var c=i.updateQueue,p=i.alternate;if(p!==null&&(p=p.updateQueue,c===p)){var y=null,x=null;if(c=c.firstBaseUpdate,c!==null){do{var S={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};x===null?y=x=S:x=x.next=S,c=c.next}while(c!==null);x===null?y=x=o:x=x.next=o}else y=x=o;c={baseState:p.baseState,firstBaseUpdate:y,lastBaseUpdate:x,shared:p.shared,effects:p.effects},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=o:i.next=o,c.lastBaseUpdate=o}function ad(i,o,c,p){var y=i.updateQueue;Yi=!1;var x=y.firstBaseUpdate,S=y.lastBaseUpdate,D=y.shared.pending;if(D!==null){y.shared.pending=null;var F=D,Y=F.next;F.next=null,S===null?x=Y:S.next=Y,S=F;var ne=i.alternate;ne!==null&&(ne=ne.updateQueue,D=ne.lastBaseUpdate,D!==S&&(D===null?ne.firstBaseUpdate=Y:D.next=Y,ne.lastBaseUpdate=F))}if(x!==null){var re=y.baseState;S=0,ne=Y=F=null,D=x;do{var te=D.lane,ce=D.eventTime;if((p&te)===te){ne!==null&&(ne=ne.next={eventTime:ce,lane:0,tag:D.tag,payload:D.payload,callback:D.callback,next:null});e:{var pe=i,ge=D;switch(te=o,ce=c,ge.tag){case 1:if(pe=ge.payload,typeof pe=="function"){re=pe.call(ce,re,te);break e}re=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=ge.payload,te=typeof pe=="function"?pe.call(ce,re,te):pe,te==null)break e;re=ae({},re,te);break e;case 2:Yi=!0}}D.callback!==null&&D.lane!==0&&(i.flags|=64,te=y.effects,te===null?y.effects=[D]:te.push(D))}else ce={eventTime:ce,lane:te,tag:D.tag,payload:D.payload,callback:D.callback,next:null},ne===null?(Y=ne=ce,F=re):ne=ne.next=ce,S|=te;if(D=D.next,D===null){if(D=y.shared.pending,D===null)break;te=D,D=te.next,te.next=null,y.lastBaseUpdate=te,y.shared.pending=null}}while(!0);if(ne===null&&(F=re),y.baseState=F,y.firstBaseUpdate=Y,y.lastBaseUpdate=ne,o=y.shared.interleaved,o!==null){y=o;do S|=y.lane,y=y.next;while(y!==o)}else x===null&&(y.shared.lanes=0);oo|=S,i.lanes=S,i.memoizedState=re}}function iv(i,o,c){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var p=i[o],y=p.callback;if(y!==null){if(p.callback=null,p=c,typeof y!="function")throw Error(t(191,y));y.call(p)}}}var ql={},Dr=qi(ql),Gl=qi(ql),Ql=qi(ql);function io(i){if(i===ql)throw Error(t(174));return i}function qf(i,o){switch(Ze(Ql,o),Ze(Gl,i),Ze(Dr,ql),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:Lo(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=Lo(o,i)}rt(Dr),Ze(Dr,o)}function ga(){rt(Dr),rt(Gl),rt(Ql)}function sv(i){io(Ql.current);var o=io(Dr.current),c=Lo(o,i.type);o!==c&&(Ze(Gl,i),Ze(Dr,c))}function Gf(i){Gl.current===i&&(rt(Dr),rt(Gl))}var lt=qi(0);function ld(i){for(var o=i;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Qf=[];function Yf(){for(var i=0;i<Qf.length;i++)Qf[i]._workInProgressVersionPrimary=null;Qf.length=0}var cd=Q.ReactCurrentDispatcher,Xf=Q.ReactCurrentBatchConfig,so=0,ct=null,At=null,Lt=null,ud=!1,Yl=!1,Xl=0,yI=0;function Jt(){throw Error(t(321))}function Jf(i,o){if(o===null)return!1;for(var c=0;c<o.length&&c<i.length;c++)if(!nr(i[c],o[c]))return!1;return!0}function Zf(i,o,c,p,y,x){if(so=x,ct=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,cd.current=i===null||i.memoizedState===null?wI:EI,i=c(p,y),Yl){x=0;do{if(Yl=!1,Xl=0,25<=x)throw Error(t(301));x+=1,Lt=At=null,o.updateQueue=null,cd.current=TI,i=c(p,y)}while(Yl)}if(cd.current=fd,o=At!==null&&At.next!==null,so=0,Lt=At=ct=null,ud=!1,o)throw Error(t(300));return i}function ep(){var i=Xl!==0;return Xl=0,i}function Vr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lt===null?ct.memoizedState=Lt=i:Lt=Lt.next=i,Lt}function Un(){if(At===null){var i=ct.alternate;i=i!==null?i.memoizedState:null}else i=At.next;var o=Lt===null?ct.memoizedState:Lt.next;if(o!==null)Lt=o,At=i;else{if(i===null)throw Error(t(310));At=i,i={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},Lt===null?ct.memoizedState=Lt=i:Lt=Lt.next=i}return Lt}function Jl(i,o){return typeof o=="function"?o(i):o}function tp(i){var o=Un(),c=o.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=i;var p=At,y=p.baseQueue,x=c.pending;if(x!==null){if(y!==null){var S=y.next;y.next=x.next,x.next=S}p.baseQueue=y=x,c.pending=null}if(y!==null){x=y.next,p=p.baseState;var D=S=null,F=null,Y=x;do{var ne=Y.lane;if((so&ne)===ne)F!==null&&(F=F.next={lane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),p=Y.hasEagerState?Y.eagerState:i(p,Y.action);else{var re={lane:ne,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null};F===null?(D=F=re,S=p):F=F.next=re,ct.lanes|=ne,oo|=ne}Y=Y.next}while(Y!==null&&Y!==x);F===null?S=p:F.next=D,nr(p,o.memoizedState)||(gn=!0),o.memoizedState=p,o.baseState=S,o.baseQueue=F,c.lastRenderedState=p}if(i=c.interleaved,i!==null){y=i;do x=y.lane,ct.lanes|=x,oo|=x,y=y.next;while(y!==i)}else y===null&&(c.lanes=0);return[o.memoizedState,c.dispatch]}function np(i){var o=Un(),c=o.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=i;var p=c.dispatch,y=c.pending,x=o.memoizedState;if(y!==null){c.pending=null;var S=y=y.next;do x=i(x,S.action),S=S.next;while(S!==y);nr(x,o.memoizedState)||(gn=!0),o.memoizedState=x,o.baseQueue===null&&(o.baseState=x),c.lastRenderedState=x}return[x,p]}function ov(){}function av(i,o){var c=ct,p=Un(),y=o(),x=!nr(p.memoizedState,y);if(x&&(p.memoizedState=y,gn=!0),p=p.queue,rp(uv.bind(null,c,p,i),[i]),p.getSnapshot!==o||x||Lt!==null&&Lt.memoizedState.tag&1){if(c.flags|=2048,Zl(9,cv.bind(null,c,p,y,o),void 0,null),Ot===null)throw Error(t(349));(so&30)!==0||lv(c,o,y)}return y}function lv(i,o,c){i.flags|=16384,i={getSnapshot:o,value:c},o=ct.updateQueue,o===null?(o={lastEffect:null,stores:null},ct.updateQueue=o,o.stores=[i]):(c=o.stores,c===null?o.stores=[i]:c.push(i))}function cv(i,o,c,p){o.value=c,o.getSnapshot=p,dv(o)&&hv(i)}function uv(i,o,c){return c(function(){dv(o)&&hv(i)})}function dv(i){var o=i.getSnapshot;i=i.value;try{var c=o();return!nr(i,c)}catch{return!0}}function hv(i){var o=ci(i,1);o!==null&&ar(o,i,1,-1)}function fv(i){var o=Vr();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Jl,lastRenderedState:i},o.queue=i,i=i.dispatch=_I.bind(null,ct,i),[o.memoizedState,i]}function Zl(i,o,c,p){return i={tag:i,create:o,destroy:c,deps:p,next:null},o=ct.updateQueue,o===null?(o={lastEffect:null,stores:null},ct.updateQueue=o,o.lastEffect=i.next=i):(c=o.lastEffect,c===null?o.lastEffect=i.next=i:(p=c.next,c.next=i,i.next=p,o.lastEffect=i)),i}function pv(){return Un().memoizedState}function dd(i,o,c,p){var y=Vr();ct.flags|=i,y.memoizedState=Zl(1|o,c,void 0,p===void 0?null:p)}function hd(i,o,c,p){var y=Un();p=p===void 0?null:p;var x=void 0;if(At!==null){var S=At.memoizedState;if(x=S.destroy,p!==null&&Jf(p,S.deps)){y.memoizedState=Zl(o,c,x,p);return}}ct.flags|=i,y.memoizedState=Zl(1|o,c,x,p)}function mv(i,o){return dd(8390656,8,i,o)}function rp(i,o){return hd(2048,8,i,o)}function gv(i,o){return hd(4,2,i,o)}function yv(i,o){return hd(4,4,i,o)}function vv(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function xv(i,o,c){return c=c!=null?c.concat([i]):null,hd(4,4,vv.bind(null,o,i),c)}function ip(){}function _v(i,o){var c=Un();o=o===void 0?null:o;var p=c.memoizedState;return p!==null&&o!==null&&Jf(o,p[1])?p[0]:(c.memoizedState=[i,o],i)}function wv(i,o){var c=Un();o=o===void 0?null:o;var p=c.memoizedState;return p!==null&&o!==null&&Jf(o,p[1])?p[0]:(i=i(),c.memoizedState=[i,o],i)}function Ev(i,o,c){return(so&21)===0?(i.baseState&&(i.baseState=!1,gn=!0),i.memoizedState=c):(nr(c,o)||(c=Sl(),ct.lanes|=c,oo|=c,i.baseState=!0),o)}function vI(i,o){var c=Be;Be=c!==0&&4>c?c:4,i(!0);var p=Xf.transition;Xf.transition={};try{i(!1),o()}finally{Be=c,Xf.transition=p}}function Tv(){return Un().memoizedState}function xI(i,o,c){var p=ts(i);if(c={lane:p,action:c,hasEagerState:!1,eagerState:null,next:null},kv(i))Sv(o,c);else if(c=tv(i,o,c,p),c!==null){var y=un();ar(c,i,p,y),bv(c,o,p)}}function _I(i,o,c){var p=ts(i),y={lane:p,action:c,hasEagerState:!1,eagerState:null,next:null};if(kv(i))Sv(o,y);else{var x=i.alternate;if(i.lanes===0&&(x===null||x.lanes===0)&&(x=o.lastRenderedReducer,x!==null))try{var S=o.lastRenderedState,D=x(S,c);if(y.hasEagerState=!0,y.eagerState=D,nr(D,S)){var F=o.interleaved;F===null?(y.next=y,Hf(o)):(y.next=F.next,F.next=y),o.interleaved=y;return}}catch{}finally{}c=tv(i,o,y,p),c!==null&&(y=un(),ar(c,i,p,y),bv(c,o,p))}}function kv(i){var o=i.alternate;return i===ct||o!==null&&o===ct}function Sv(i,o){Yl=ud=!0;var c=i.pending;c===null?o.next=o:(o.next=c.next,c.next=o),i.pending=o}function bv(i,o,c){if((c&4194240)!==0){var p=o.lanes;p&=i.pendingLanes,c|=p,o.lanes=c,Il(i,c)}}var fd={readContext:zn,useCallback:Jt,useContext:Jt,useEffect:Jt,useImperativeHandle:Jt,useInsertionEffect:Jt,useLayoutEffect:Jt,useMemo:Jt,useReducer:Jt,useRef:Jt,useState:Jt,useDebugValue:Jt,useDeferredValue:Jt,useTransition:Jt,useMutableSource:Jt,useSyncExternalStore:Jt,useId:Jt,unstable_isNewReconciler:!1},wI={readContext:zn,useCallback:function(i,o){return Vr().memoizedState=[i,o===void 0?null:o],i},useContext:zn,useEffect:mv,useImperativeHandle:function(i,o,c){return c=c!=null?c.concat([i]):null,dd(4194308,4,vv.bind(null,o,i),c)},useLayoutEffect:function(i,o){return dd(4194308,4,i,o)},useInsertionEffect:function(i,o){return dd(4,2,i,o)},useMemo:function(i,o){var c=Vr();return o=o===void 0?null:o,i=i(),c.memoizedState=[i,o],i},useReducer:function(i,o,c){var p=Vr();return o=c!==void 0?c(o):o,p.memoizedState=p.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},p.queue=i,i=i.dispatch=xI.bind(null,ct,i),[p.memoizedState,i]},useRef:function(i){var o=Vr();return i={current:i},o.memoizedState=i},useState:fv,useDebugValue:ip,useDeferredValue:function(i){return Vr().memoizedState=i},useTransition:function(){var i=fv(!1),o=i[0];return i=vI.bind(null,i[1]),Vr().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,c){var p=ct,y=Vr();if(ot){if(c===void 0)throw Error(t(407));c=c()}else{if(c=o(),Ot===null)throw Error(t(349));(so&30)!==0||lv(p,o,c)}y.memoizedState=c;var x={value:c,getSnapshot:o};return y.queue=x,mv(uv.bind(null,p,x,i),[i]),p.flags|=2048,Zl(9,cv.bind(null,p,x,c,o),void 0,null),c},useId:function(){var i=Vr(),o=Ot.identifierPrefix;if(ot){var c=li,p=ai;c=(p&~(1<<32-kn(p)-1)).toString(32)+c,o=":"+o+"R"+c,c=Xl++,0<c&&(o+="H"+c.toString(32)),o+=":"}else c=yI++,o=":"+o+"r"+c.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},EI={readContext:zn,useCallback:_v,useContext:zn,useEffect:rp,useImperativeHandle:xv,useInsertionEffect:gv,useLayoutEffect:yv,useMemo:wv,useReducer:tp,useRef:pv,useState:function(){return tp(Jl)},useDebugValue:ip,useDeferredValue:function(i){var o=Un();return Ev(o,At.memoizedState,i)},useTransition:function(){var i=tp(Jl)[0],o=Un().memoizedState;return[i,o]},useMutableSource:ov,useSyncExternalStore:av,useId:Tv,unstable_isNewReconciler:!1},TI={readContext:zn,useCallback:_v,useContext:zn,useEffect:rp,useImperativeHandle:xv,useInsertionEffect:gv,useLayoutEffect:yv,useMemo:wv,useReducer:np,useRef:pv,useState:function(){return np(Jl)},useDebugValue:ip,useDeferredValue:function(i){var o=Un();return At===null?o.memoizedState=i:Ev(o,At.memoizedState,i)},useTransition:function(){var i=np(Jl)[0],o=Un().memoizedState;return[i,o]},useMutableSource:ov,useSyncExternalStore:av,useId:Tv,unstable_isNewReconciler:!1};function ir(i,o){if(i&&i.defaultProps){o=ae({},o),i=i.defaultProps;for(var c in i)o[c]===void 0&&(o[c]=i[c]);return o}return o}function sp(i,o,c,p){o=i.memoizedState,c=c(p,o),c=c==null?o:ae({},o,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var pd={isMounted:function(i){return(i=i._reactInternals)?er(i)===i:!1},enqueueSetState:function(i,o,c){i=i._reactInternals;var p=un(),y=ts(i),x=ui(p,y);x.payload=o,c!=null&&(x.callback=c),o=Xi(i,x,y),o!==null&&(ar(o,i,y,p),od(o,i,y))},enqueueReplaceState:function(i,o,c){i=i._reactInternals;var p=un(),y=ts(i),x=ui(p,y);x.tag=1,x.payload=o,c!=null&&(x.callback=c),o=Xi(i,x,y),o!==null&&(ar(o,i,y,p),od(o,i,y))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var c=un(),p=ts(i),y=ui(c,p);y.tag=2,o!=null&&(y.callback=o),o=Xi(i,y,p),o!==null&&(ar(o,i,p,c),od(o,i,p))}};function Iv(i,o,c,p,y,x,S){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(p,x,S):o.prototype&&o.prototype.isPureReactComponent?!Fl(c,p)||!Fl(y,x):!0}function Cv(i,o,c){var p=!1,y=Gi,x=o.contextType;return typeof x=="object"&&x!==null?x=zn(x):(y=mn(o)?eo:Xt.current,p=o.contextTypes,x=(p=p!=null)?ca(i,y):Gi),o=new o(c,x),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=pd,i.stateNode=o,o._reactInternals=i,p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=y,i.__reactInternalMemoizedMaskedChildContext=x),o}function Av(i,o,c,p){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,p),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,p),o.state!==i&&pd.enqueueReplaceState(o,o.state,null)}function op(i,o,c,p){var y=i.stateNode;y.props=c,y.state=i.memoizedState,y.refs={},Kf(i);var x=o.contextType;typeof x=="object"&&x!==null?y.context=zn(x):(x=mn(o)?eo:Xt.current,y.context=ca(i,x)),y.state=i.memoizedState,x=o.getDerivedStateFromProps,typeof x=="function"&&(sp(i,o,x,c),y.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(o=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),o!==y.state&&pd.enqueueReplaceState(y,y.state,null),ad(i,c,y,p),y.state=i.memoizedState),typeof y.componentDidMount=="function"&&(i.flags|=4194308)}function ya(i,o){try{var c="",p=o;do c+=Ve(p),p=p.return;while(p);var y=c}catch(x){y=`
Error generating stack: `+x.message+`
`+x.stack}return{value:i,source:o,stack:y,digest:null}}function ap(i,o,c){return{value:i,source:null,stack:c??null,digest:o??null}}function lp(i,o){try{console.error(o.value)}catch(c){setTimeout(function(){throw c})}}var kI=typeof WeakMap=="function"?WeakMap:Map;function Rv(i,o,c){c=ui(-1,c),c.tag=3,c.payload={element:null};var p=o.value;return c.callback=function(){wd||(wd=!0,Tp=p),lp(i,o)},c}function Pv(i,o,c){c=ui(-1,c),c.tag=3;var p=i.type.getDerivedStateFromError;if(typeof p=="function"){var y=o.value;c.payload=function(){return p(y)},c.callback=function(){lp(i,o)}}var x=i.stateNode;return x!==null&&typeof x.componentDidCatch=="function"&&(c.callback=function(){lp(i,o),typeof p!="function"&&(Zi===null?Zi=new Set([this]):Zi.add(this));var S=o.stack;this.componentDidCatch(o.value,{componentStack:S!==null?S:""})}),c}function jv(i,o,c){var p=i.pingCache;if(p===null){p=i.pingCache=new kI;var y=new Set;p.set(o,y)}else y=p.get(o),y===void 0&&(y=new Set,p.set(o,y));y.has(c)||(y.add(c),i=OI.bind(null,i,o,c),o.then(i,i))}function Nv(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function Dv(i,o,c,p,y){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(o=ui(-1,1),o.tag=2,Xi(c,o,1))),c.lanes|=1),i):(i.flags|=65536,i.lanes=y,i)}var SI=Q.ReactCurrentOwner,gn=!1;function cn(i,o,c,p){o.child=i===null?ev(o,null,c,p):fa(o,i.child,c,p)}function Vv(i,o,c,p,y){c=c.render;var x=o.ref;return ma(o,y),p=Zf(i,o,c,p,x,y),c=ep(),i!==null&&!gn?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~y,di(i,o,y)):(ot&&c&&Mf(o),o.flags|=1,cn(i,o,p,y),o.child)}function Mv(i,o,c,p,y){if(i===null){var x=c.type;return typeof x=="function"&&!Rp(x)&&x.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(o.tag=15,o.type=x,Lv(i,o,x,p,y)):(i=Id(c.type,null,p,o,o.mode,y),i.ref=o.ref,i.return=o,o.child=i)}if(x=i.child,(i.lanes&y)===0){var S=x.memoizedProps;if(c=c.compare,c=c!==null?c:Fl,c(S,p)&&i.ref===o.ref)return di(i,o,y)}return o.flags|=1,i=rs(x,p),i.ref=o.ref,i.return=o,o.child=i}function Lv(i,o,c,p,y){if(i!==null){var x=i.memoizedProps;if(Fl(x,p)&&i.ref===o.ref)if(gn=!1,o.pendingProps=p=x,(i.lanes&y)!==0)(i.flags&131072)!==0&&(gn=!0);else return o.lanes=i.lanes,di(i,o,y)}return cp(i,o,c,p,y)}function Ov(i,o,c){var p=o.pendingProps,y=p.children,x=i!==null?i.memoizedState:null;if(p.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ze(xa,Pn),Pn|=c;else{if((c&1073741824)===0)return i=x!==null?x.baseLanes|c:c,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,Ze(xa,Pn),Pn|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=x!==null?x.baseLanes:c,Ze(xa,Pn),Pn|=p}else x!==null?(p=x.baseLanes|c,o.memoizedState=null):p=c,Ze(xa,Pn),Pn|=p;return cn(i,o,y,c),o.child}function Fv(i,o){var c=o.ref;(i===null&&c!==null||i!==null&&i.ref!==c)&&(o.flags|=512,o.flags|=2097152)}function cp(i,o,c,p,y){var x=mn(c)?eo:Xt.current;return x=ca(o,x),ma(o,y),c=Zf(i,o,c,p,x,y),p=ep(),i!==null&&!gn?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~y,di(i,o,y)):(ot&&p&&Mf(o),o.flags|=1,cn(i,o,c,y),o.child)}function Bv(i,o,c,p,y){if(mn(c)){var x=!0;Ju(o)}else x=!1;if(ma(o,y),o.stateNode===null)gd(i,o),Cv(o,c,p),op(o,c,p,y),p=!0;else if(i===null){var S=o.stateNode,D=o.memoizedProps;S.props=D;var F=S.context,Y=c.contextType;typeof Y=="object"&&Y!==null?Y=zn(Y):(Y=mn(c)?eo:Xt.current,Y=ca(o,Y));var ne=c.getDerivedStateFromProps,re=typeof ne=="function"||typeof S.getSnapshotBeforeUpdate=="function";re||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(D!==p||F!==Y)&&Av(o,S,p,Y),Yi=!1;var te=o.memoizedState;S.state=te,ad(o,p,S,y),F=o.memoizedState,D!==p||te!==F||pn.current||Yi?(typeof ne=="function"&&(sp(o,c,ne,p),F=o.memoizedState),(D=Yi||Iv(o,c,D,p,te,F,Y))?(re||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(o.flags|=4194308)):(typeof S.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=p,o.memoizedState=F),S.props=p,S.state=F,S.context=Y,p=D):(typeof S.componentDidMount=="function"&&(o.flags|=4194308),p=!1)}else{S=o.stateNode,nv(i,o),D=o.memoizedProps,Y=o.type===o.elementType?D:ir(o.type,D),S.props=Y,re=o.pendingProps,te=S.context,F=c.contextType,typeof F=="object"&&F!==null?F=zn(F):(F=mn(c)?eo:Xt.current,F=ca(o,F));var ce=c.getDerivedStateFromProps;(ne=typeof ce=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(D!==re||te!==F)&&Av(o,S,p,F),Yi=!1,te=o.memoizedState,S.state=te,ad(o,p,S,y);var pe=o.memoizedState;D!==re||te!==pe||pn.current||Yi?(typeof ce=="function"&&(sp(o,c,ce,p),pe=o.memoizedState),(Y=Yi||Iv(o,c,Y,p,te,pe,F)||!1)?(ne||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(p,pe,F),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(p,pe,F)),typeof S.componentDidUpdate=="function"&&(o.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof S.componentDidUpdate!="function"||D===i.memoizedProps&&te===i.memoizedState||(o.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||D===i.memoizedProps&&te===i.memoizedState||(o.flags|=1024),o.memoizedProps=p,o.memoizedState=pe),S.props=p,S.state=pe,S.context=F,p=Y):(typeof S.componentDidUpdate!="function"||D===i.memoizedProps&&te===i.memoizedState||(o.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||D===i.memoizedProps&&te===i.memoizedState||(o.flags|=1024),p=!1)}return up(i,o,c,p,x,y)}function up(i,o,c,p,y,x){Fv(i,o);var S=(o.flags&128)!==0;if(!p&&!S)return y&&H0(o,c,!1),di(i,o,x);p=o.stateNode,SI.current=o;var D=S&&typeof c.getDerivedStateFromError!="function"?null:p.render();return o.flags|=1,i!==null&&S?(o.child=fa(o,i.child,null,x),o.child=fa(o,null,D,x)):cn(i,o,D,x),o.memoizedState=p.state,y&&H0(o,c,!0),o.child}function zv(i){var o=i.stateNode;o.pendingContext?$0(i,o.pendingContext,o.pendingContext!==o.context):o.context&&$0(i,o.context,!1),qf(i,o.containerInfo)}function Uv(i,o,c,p,y){return ha(),Bf(y),o.flags|=256,cn(i,o,c,p),o.child}var dp={dehydrated:null,treeContext:null,retryLane:0};function hp(i){return{baseLanes:i,cachePool:null,transitions:null}}function $v(i,o,c){var p=o.pendingProps,y=lt.current,x=!1,S=(o.flags&128)!==0,D;if((D=S)||(D=i!==null&&i.memoizedState===null?!1:(y&2)!==0),D?(x=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(y|=1),Ze(lt,y&1),i===null)return Ff(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(S=p.children,i=p.fallback,x?(p=o.mode,x=o.child,S={mode:"hidden",children:S},(p&1)===0&&x!==null?(x.childLanes=0,x.pendingProps=S):x=Cd(S,p,0,null),i=uo(i,p,c,null),x.return=o,i.return=o,x.sibling=i,o.child=x,o.child.memoizedState=hp(c),o.memoizedState=dp,i):fp(o,S));if(y=i.memoizedState,y!==null&&(D=y.dehydrated,D!==null))return bI(i,o,S,p,D,y,c);if(x){x=p.fallback,S=o.mode,y=i.child,D=y.sibling;var F={mode:"hidden",children:p.children};return(S&1)===0&&o.child!==y?(p=o.child,p.childLanes=0,p.pendingProps=F,o.deletions=null):(p=rs(y,F),p.subtreeFlags=y.subtreeFlags&14680064),D!==null?x=rs(D,x):(x=uo(x,S,c,null),x.flags|=2),x.return=o,p.return=o,p.sibling=x,o.child=p,p=x,x=o.child,S=i.child.memoizedState,S=S===null?hp(c):{baseLanes:S.baseLanes|c,cachePool:null,transitions:S.transitions},x.memoizedState=S,x.childLanes=i.childLanes&~c,o.memoizedState=dp,p}return x=i.child,i=x.sibling,p=rs(x,{mode:"visible",children:p.children}),(o.mode&1)===0&&(p.lanes=c),p.return=o,p.sibling=null,i!==null&&(c=o.deletions,c===null?(o.deletions=[i],o.flags|=16):c.push(i)),o.child=p,o.memoizedState=null,p}function fp(i,o){return o=Cd({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function md(i,o,c,p){return p!==null&&Bf(p),fa(o,i.child,null,c),i=fp(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function bI(i,o,c,p,y,x,S){if(c)return o.flags&256?(o.flags&=-257,p=ap(Error(t(422))),md(i,o,S,p)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(x=p.fallback,y=o.mode,p=Cd({mode:"visible",children:p.children},y,0,null),x=uo(x,y,S,null),x.flags|=2,p.return=o,x.return=o,p.sibling=x,o.child=p,(o.mode&1)!==0&&fa(o,i.child,null,S),o.child.memoizedState=hp(S),o.memoizedState=dp,x);if((o.mode&1)===0)return md(i,o,S,null);if(y.data==="$!"){if(p=y.nextSibling&&y.nextSibling.dataset,p)var D=p.dgst;return p=D,x=Error(t(419)),p=ap(x,p,void 0),md(i,o,S,p)}if(D=(S&i.childLanes)!==0,gn||D){if(p=Ot,p!==null){switch(S&-S){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=(y&(p.suspendedLanes|S))!==0?0:y,y!==0&&y!==x.retryLane&&(x.retryLane=y,ci(i,y),ar(p,i,y,-1))}return Ap(),p=ap(Error(t(421))),md(i,o,S,p)}return y.data==="$?"?(o.flags|=128,o.child=i.child,o=FI.bind(null,i),y._reactRetry=o,null):(i=x.treeContext,Rn=Ki(y.nextSibling),An=o,ot=!0,rr=null,i!==null&&(Fn[Bn++]=ai,Fn[Bn++]=li,Fn[Bn++]=to,ai=i.id,li=i.overflow,to=o),o=fp(o,p.children),o.flags|=4096,o)}function Wv(i,o,c){i.lanes|=o;var p=i.alternate;p!==null&&(p.lanes|=o),Wf(i.return,o,c)}function pp(i,o,c,p,y){var x=i.memoizedState;x===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:p,tail:c,tailMode:y}:(x.isBackwards=o,x.rendering=null,x.renderingStartTime=0,x.last=p,x.tail=c,x.tailMode=y)}function Hv(i,o,c){var p=o.pendingProps,y=p.revealOrder,x=p.tail;if(cn(i,o,p.children,c),p=lt.current,(p&2)!==0)p=p&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Wv(i,c,o);else if(i.tag===19)Wv(i,c,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}p&=1}if(Ze(lt,p),(o.mode&1)===0)o.memoizedState=null;else switch(y){case"forwards":for(c=o.child,y=null;c!==null;)i=c.alternate,i!==null&&ld(i)===null&&(y=c),c=c.sibling;c=y,c===null?(y=o.child,o.child=null):(y=c.sibling,c.sibling=null),pp(o,!1,y,c,x);break;case"backwards":for(c=null,y=o.child,o.child=null;y!==null;){if(i=y.alternate,i!==null&&ld(i)===null){o.child=y;break}i=y.sibling,y.sibling=c,c=y,y=i}pp(o,!0,c,null,x);break;case"together":pp(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function gd(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function di(i,o,c){if(i!==null&&(o.dependencies=i.dependencies),oo|=o.lanes,(c&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,c=rs(i,i.pendingProps),o.child=c,c.return=o;i.sibling!==null;)i=i.sibling,c=c.sibling=rs(i,i.pendingProps),c.return=o;c.sibling=null}return o.child}function II(i,o,c){switch(o.tag){case 3:zv(o),ha();break;case 5:sv(o);break;case 1:mn(o.type)&&Ju(o);break;case 4:qf(o,o.stateNode.containerInfo);break;case 10:var p=o.type._context,y=o.memoizedProps.value;Ze(id,p._currentValue),p._currentValue=y;break;case 13:if(p=o.memoizedState,p!==null)return p.dehydrated!==null?(Ze(lt,lt.current&1),o.flags|=128,null):(c&o.child.childLanes)!==0?$v(i,o,c):(Ze(lt,lt.current&1),i=di(i,o,c),i!==null?i.sibling:null);Ze(lt,lt.current&1);break;case 19:if(p=(c&o.childLanes)!==0,(i.flags&128)!==0){if(p)return Hv(i,o,c);o.flags|=128}if(y=o.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),Ze(lt,lt.current),p)break;return null;case 22:case 23:return o.lanes=0,Ov(i,o,c)}return di(i,o,c)}var Kv,mp,qv,Gv;Kv=function(i,o){for(var c=o.child;c!==null;){if(c.tag===5||c.tag===6)i.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},mp=function(){},qv=function(i,o,c,p){var y=i.memoizedProps;if(y!==p){i=o.stateNode,io(Dr.current);var x=null;switch(c){case"input":y=Vo(i,y),p=Vo(i,p),x=[];break;case"select":y=ae({},y,{value:void 0}),p=ae({},p,{value:void 0}),x=[];break;case"textarea":y=pl(i,y),p=pl(i,p),x=[];break;default:typeof y.onClick!="function"&&typeof p.onClick=="function"&&(i.onclick=Qu)}Zn(c,p);var S;c=null;for(Y in y)if(!p.hasOwnProperty(Y)&&y.hasOwnProperty(Y)&&y[Y]!=null)if(Y==="style"){var D=y[Y];for(S in D)D.hasOwnProperty(S)&&(c||(c={}),c[S]="")}else Y!=="dangerouslySetInnerHTML"&&Y!=="children"&&Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&Y!=="autoFocus"&&(s.hasOwnProperty(Y)?x||(x=[]):(x=x||[]).push(Y,null));for(Y in p){var F=p[Y];if(D=y!=null?y[Y]:void 0,p.hasOwnProperty(Y)&&F!==D&&(F!=null||D!=null))if(Y==="style")if(D){for(S in D)!D.hasOwnProperty(S)||F&&F.hasOwnProperty(S)||(c||(c={}),c[S]="");for(S in F)F.hasOwnProperty(S)&&D[S]!==F[S]&&(c||(c={}),c[S]=F[S])}else c||(x||(x=[]),x.push(Y,c)),c=F;else Y==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,D=D?D.__html:void 0,F!=null&&D!==F&&(x=x||[]).push(Y,F)):Y==="children"?typeof F!="string"&&typeof F!="number"||(x=x||[]).push(Y,""+F):Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&(s.hasOwnProperty(Y)?(F!=null&&Y==="onScroll"&&nt("scroll",i),x||D===F||(x=[])):(x=x||[]).push(Y,F))}c&&(x=x||[]).push("style",c);var Y=x;(o.updateQueue=Y)&&(o.flags|=4)}},Gv=function(i,o,c,p){c!==p&&(o.flags|=4)};function ec(i,o){if(!ot)switch(i.tailMode){case"hidden":o=i.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var p=null;c!==null;)c.alternate!==null&&(p=c),c=c.sibling;p===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:p.sibling=null}}function Zt(i){var o=i.alternate!==null&&i.alternate.child===i.child,c=0,p=0;if(o)for(var y=i.child;y!==null;)c|=y.lanes|y.childLanes,p|=y.subtreeFlags&14680064,p|=y.flags&14680064,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)c|=y.lanes|y.childLanes,p|=y.subtreeFlags,p|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=p,i.childLanes=c,o}function CI(i,o,c){var p=o.pendingProps;switch(Lf(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zt(o),null;case 1:return mn(o.type)&&Xu(),Zt(o),null;case 3:return p=o.stateNode,ga(),rt(pn),rt(Xt),Yf(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(i===null||i.child===null)&&(nd(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,rr!==null&&(bp(rr),rr=null))),mp(i,o),Zt(o),null;case 5:Gf(o);var y=io(Ql.current);if(c=o.type,i!==null&&o.stateNode!=null)qv(i,o,c,p,y),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!p){if(o.stateNode===null)throw Error(t(166));return Zt(o),null}if(i=io(Dr.current),nd(o)){p=o.stateNode,c=o.type;var x=o.memoizedProps;switch(p[Nr]=o,p[Wl]=x,i=(o.mode&1)!==0,c){case"dialog":nt("cancel",p),nt("close",p);break;case"iframe":case"object":case"embed":nt("load",p);break;case"video":case"audio":for(y=0;y<zl.length;y++)nt(zl[y],p);break;case"source":nt("error",p);break;case"img":case"image":case"link":nt("error",p),nt("load",p);break;case"details":nt("toggle",p);break;case"input":_u(p,x),nt("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!x.multiple},nt("invalid",p);break;case"textarea":ml(p,x),nt("invalid",p)}Zn(c,x),y=null;for(var S in x)if(x.hasOwnProperty(S)){var D=x[S];S==="children"?typeof D=="string"?p.textContent!==D&&(x.suppressHydrationWarning!==!0&&Gu(p.textContent,D,i),y=["children",D]):typeof D=="number"&&p.textContent!==""+D&&(x.suppressHydrationWarning!==!0&&Gu(p.textContent,D,i),y=["children",""+D]):s.hasOwnProperty(S)&&D!=null&&S==="onScroll"&&nt("scroll",p)}switch(c){case"input":Do(p),fl(p,x,!0);break;case"textarea":Do(p),Ri(p);break;case"select":case"option":break;default:typeof x.onClick=="function"&&(p.onclick=Qu)}p=y,o.updateQueue=p,p!==null&&(o.flags|=4)}else{S=y.nodeType===9?y:y.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=gl(c)),i==="http://www.w3.org/1999/xhtml"?c==="script"?(i=S.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof p.is=="string"?i=S.createElement(c,{is:p.is}):(i=S.createElement(c),c==="select"&&(S=i,p.multiple?S.multiple=!0:p.size&&(S.size=p.size))):i=S.createElementNS(i,c),i[Nr]=o,i[Wl]=p,Kv(i,o,!1,!1),o.stateNode=i;e:{switch(S=Fo(c,p),c){case"dialog":nt("cancel",i),nt("close",i),y=p;break;case"iframe":case"object":case"embed":nt("load",i),y=p;break;case"video":case"audio":for(y=0;y<zl.length;y++)nt(zl[y],i);y=p;break;case"source":nt("error",i),y=p;break;case"img":case"image":case"link":nt("error",i),nt("load",i),y=p;break;case"details":nt("toggle",i),y=p;break;case"input":_u(i,p),y=Vo(i,p),nt("invalid",i);break;case"option":y=p;break;case"select":i._wrapperState={wasMultiple:!!p.multiple},y=ae({},p,{value:void 0}),nt("invalid",i);break;case"textarea":ml(i,p),y=pl(i,p),nt("invalid",i);break;default:y=p}Zn(c,y),D=y;for(x in D)if(D.hasOwnProperty(x)){var F=D[x];x==="style"?Oo(i,F):x==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,F!=null&&Eu(i,F)):x==="children"?typeof F=="string"?(c!=="textarea"||F!=="")&&Fs(i,F):typeof F=="number"&&Fs(i,""+F):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(s.hasOwnProperty(x)?F!=null&&x==="onScroll"&&nt("scroll",i):F!=null&&j(i,x,F,S))}switch(c){case"input":Do(i),fl(i,p,!1);break;case"textarea":Do(i),Ri(i);break;case"option":p.value!=null&&i.setAttribute("value",""+Ue(p.value));break;case"select":i.multiple=!!p.multiple,x=p.value,x!=null?Jn(i,!!p.multiple,x,!1):p.defaultValue!=null&&Jn(i,!!p.multiple,p.defaultValue,!0);break;default:typeof y.onClick=="function"&&(i.onclick=Qu)}switch(c){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Zt(o),null;case 6:if(i&&o.stateNode!=null)Gv(i,o,i.memoizedProps,p);else{if(typeof p!="string"&&o.stateNode===null)throw Error(t(166));if(c=io(Ql.current),io(Dr.current),nd(o)){if(p=o.stateNode,c=o.memoizedProps,p[Nr]=o,(x=p.nodeValue!==c)&&(i=An,i!==null))switch(i.tag){case 3:Gu(p.nodeValue,c,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Gu(p.nodeValue,c,(i.mode&1)!==0)}x&&(o.flags|=4)}else p=(c.nodeType===9?c:c.ownerDocument).createTextNode(p),p[Nr]=o,o.stateNode=p}return Zt(o),null;case 13:if(rt(lt),p=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(ot&&Rn!==null&&(o.mode&1)!==0&&(o.flags&128)===0)X0(),ha(),o.flags|=98560,x=!1;else if(x=nd(o),p!==null&&p.dehydrated!==null){if(i===null){if(!x)throw Error(t(318));if(x=o.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(t(317));x[Nr]=o}else ha(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Zt(o),x=!1}else rr!==null&&(bp(rr),rr=null),x=!0;if(!x)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=c,o):(p=p!==null,p!==(i!==null&&i.memoizedState!==null)&&p&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(lt.current&1)!==0?Rt===0&&(Rt=3):Ap())),o.updateQueue!==null&&(o.flags|=4),Zt(o),null);case 4:return ga(),mp(i,o),i===null&&Ul(o.stateNode.containerInfo),Zt(o),null;case 10:return $f(o.type._context),Zt(o),null;case 17:return mn(o.type)&&Xu(),Zt(o),null;case 19:if(rt(lt),x=o.memoizedState,x===null)return Zt(o),null;if(p=(o.flags&128)!==0,S=x.rendering,S===null)if(p)ec(x,!1);else{if(Rt!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(S=ld(i),S!==null){for(o.flags|=128,ec(x,!1),p=S.updateQueue,p!==null&&(o.updateQueue=p,o.flags|=4),o.subtreeFlags=0,p=c,c=o.child;c!==null;)x=c,i=p,x.flags&=14680066,S=x.alternate,S===null?(x.childLanes=0,x.lanes=i,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=S.childLanes,x.lanes=S.lanes,x.child=S.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=S.memoizedProps,x.memoizedState=S.memoizedState,x.updateQueue=S.updateQueue,x.type=S.type,i=S.dependencies,x.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),c=c.sibling;return Ze(lt,lt.current&1|2),o.child}i=i.sibling}x.tail!==null&&tt()>_a&&(o.flags|=128,p=!0,ec(x,!1),o.lanes=4194304)}else{if(!p)if(i=ld(S),i!==null){if(o.flags|=128,p=!0,c=i.updateQueue,c!==null&&(o.updateQueue=c,o.flags|=4),ec(x,!0),x.tail===null&&x.tailMode==="hidden"&&!S.alternate&&!ot)return Zt(o),null}else 2*tt()-x.renderingStartTime>_a&&c!==1073741824&&(o.flags|=128,p=!0,ec(x,!1),o.lanes=4194304);x.isBackwards?(S.sibling=o.child,o.child=S):(c=x.last,c!==null?c.sibling=S:o.child=S,x.last=S)}return x.tail!==null?(o=x.tail,x.rendering=o,x.tail=o.sibling,x.renderingStartTime=tt(),o.sibling=null,c=lt.current,Ze(lt,p?c&1|2:c&1),o):(Zt(o),null);case 22:case 23:return Cp(),p=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==p&&(o.flags|=8192),p&&(o.mode&1)!==0?(Pn&1073741824)!==0&&(Zt(o),o.subtreeFlags&6&&(o.flags|=8192)):Zt(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function AI(i,o){switch(Lf(o),o.tag){case 1:return mn(o.type)&&Xu(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return ga(),rt(pn),rt(Xt),Yf(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return Gf(o),null;case 13:if(rt(lt),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));ha()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return rt(lt),null;case 4:return ga(),null;case 10:return $f(o.type._context),null;case 22:case 23:return Cp(),null;case 24:return null;default:return null}}var yd=!1,en=!1,RI=typeof WeakSet=="function"?WeakSet:Set,he=null;function va(i,o){var c=i.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(p){ft(i,o,p)}else c.current=null}function gp(i,o,c){try{c()}catch(p){ft(i,o,p)}}var Qv=!1;function PI(i,o){if(Cf=ni,i=I0(),_f(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var p=c.getSelection&&c.getSelection();if(p&&p.rangeCount!==0){c=p.anchorNode;var y=p.anchorOffset,x=p.focusNode;p=p.focusOffset;try{c.nodeType,x.nodeType}catch{c=null;break e}var S=0,D=-1,F=-1,Y=0,ne=0,re=i,te=null;t:for(;;){for(var ce;re!==c||y!==0&&re.nodeType!==3||(D=S+y),re!==x||p!==0&&re.nodeType!==3||(F=S+p),re.nodeType===3&&(S+=re.nodeValue.length),(ce=re.firstChild)!==null;)te=re,re=ce;for(;;){if(re===i)break t;if(te===c&&++Y===y&&(D=S),te===x&&++ne===p&&(F=S),(ce=re.nextSibling)!==null)break;re=te,te=re.parentNode}re=ce}c=D===-1||F===-1?null:{start:D,end:F}}else c=null}c=c||{start:0,end:0}}else c=null;for(Af={focusedElem:i,selectionRange:c},ni=!1,he=o;he!==null;)if(o=he,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,he=i;else for(;he!==null;){o=he;try{var pe=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(pe!==null){var ge=pe.memoizedProps,vt=pe.memoizedState,K=o.stateNode,z=K.getSnapshotBeforeUpdate(o.elementType===o.type?ge:ir(o.type,ge),vt);K.__reactInternalSnapshotBeforeUpdate=z}break;case 3:var G=o.stateNode.containerInfo;G.nodeType===1?G.textContent="":G.nodeType===9&&G.documentElement&&G.removeChild(G.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(se){ft(o,o.return,se)}if(i=o.sibling,i!==null){i.return=o.return,he=i;break}he=o.return}return pe=Qv,Qv=!1,pe}function tc(i,o,c){var p=o.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var y=p=p.next;do{if((y.tag&i)===i){var x=y.destroy;y.destroy=void 0,x!==void 0&&gp(o,c,x)}y=y.next}while(y!==p)}}function vd(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var c=o=o.next;do{if((c.tag&i)===i){var p=c.create;c.destroy=p()}c=c.next}while(c!==o)}}function yp(i){var o=i.ref;if(o!==null){var c=i.stateNode;switch(i.tag){case 5:i=c;break;default:i=c}typeof o=="function"?o(i):o.current=i}}function Yv(i){var o=i.alternate;o!==null&&(i.alternate=null,Yv(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[Nr],delete o[Wl],delete o[Nf],delete o[fI],delete o[pI])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Xv(i){return i.tag===5||i.tag===3||i.tag===4}function Jv(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Xv(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function vp(i,o,c){var p=i.tag;if(p===5||p===6)i=i.stateNode,o?c.nodeType===8?c.parentNode.insertBefore(i,o):c.insertBefore(i,o):(c.nodeType===8?(o=c.parentNode,o.insertBefore(i,c)):(o=c,o.appendChild(i)),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=Qu));else if(p!==4&&(i=i.child,i!==null))for(vp(i,o,c),i=i.sibling;i!==null;)vp(i,o,c),i=i.sibling}function xp(i,o,c){var p=i.tag;if(p===5||p===6)i=i.stateNode,o?c.insertBefore(i,o):c.appendChild(i);else if(p!==4&&(i=i.child,i!==null))for(xp(i,o,c),i=i.sibling;i!==null;)xp(i,o,c),i=i.sibling}var Wt=null,sr=!1;function Ji(i,o,c){for(c=c.child;c!==null;)Zv(i,o,c),c=c.sibling}function Zv(i,o,c){if(Tn&&typeof Tn.onCommitFiberUnmount=="function")try{Tn.onCommitFiberUnmount(Ws,c)}catch{}switch(c.tag){case 5:en||va(c,o);case 6:var p=Wt,y=sr;Wt=null,Ji(i,o,c),Wt=p,sr=y,Wt!==null&&(sr?(i=Wt,c=c.stateNode,i.nodeType===8?i.parentNode.removeChild(c):i.removeChild(c)):Wt.removeChild(c.stateNode));break;case 18:Wt!==null&&(sr?(i=Wt,c=c.stateNode,i.nodeType===8?jf(i.parentNode,c):i.nodeType===1&&jf(i,c),Ui(i)):jf(Wt,c.stateNode));break;case 4:p=Wt,y=sr,Wt=c.stateNode.containerInfo,sr=!0,Ji(i,o,c),Wt=p,sr=y;break;case 0:case 11:case 14:case 15:if(!en&&(p=c.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){y=p=p.next;do{var x=y,S=x.destroy;x=x.tag,S!==void 0&&((x&2)!==0||(x&4)!==0)&&gp(c,o,S),y=y.next}while(y!==p)}Ji(i,o,c);break;case 1:if(!en&&(va(c,o),p=c.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=c.memoizedProps,p.state=c.memoizedState,p.componentWillUnmount()}catch(D){ft(c,o,D)}Ji(i,o,c);break;case 21:Ji(i,o,c);break;case 22:c.mode&1?(en=(p=en)||c.memoizedState!==null,Ji(i,o,c),en=p):Ji(i,o,c);break;default:Ji(i,o,c)}}function e1(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var c=i.stateNode;c===null&&(c=i.stateNode=new RI),o.forEach(function(p){var y=BI.bind(null,i,p);c.has(p)||(c.add(p),p.then(y,y))})}}function or(i,o){var c=o.deletions;if(c!==null)for(var p=0;p<c.length;p++){var y=c[p];try{var x=i,S=o,D=S;e:for(;D!==null;){switch(D.tag){case 5:Wt=D.stateNode,sr=!1;break e;case 3:Wt=D.stateNode.containerInfo,sr=!0;break e;case 4:Wt=D.stateNode.containerInfo,sr=!0;break e}D=D.return}if(Wt===null)throw Error(t(160));Zv(x,S,y),Wt=null,sr=!1;var F=y.alternate;F!==null&&(F.return=null),y.return=null}catch(Y){ft(y,o,Y)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)t1(o,i),o=o.sibling}function t1(i,o){var c=i.alternate,p=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(or(o,i),Mr(i),p&4){try{tc(3,i,i.return),vd(3,i)}catch(ge){ft(i,i.return,ge)}try{tc(5,i,i.return)}catch(ge){ft(i,i.return,ge)}}break;case 1:or(o,i),Mr(i),p&512&&c!==null&&va(c,c.return);break;case 5:if(or(o,i),Mr(i),p&512&&c!==null&&va(c,c.return),i.flags&32){var y=i.stateNode;try{Fs(y,"")}catch(ge){ft(i,i.return,ge)}}if(p&4&&(y=i.stateNode,y!=null)){var x=i.memoizedProps,S=c!==null?c.memoizedProps:x,D=i.type,F=i.updateQueue;if(i.updateQueue=null,F!==null)try{D==="input"&&x.type==="radio"&&x.name!=null&&Mo(y,x),Fo(D,S);var Y=Fo(D,x);for(S=0;S<F.length;S+=2){var ne=F[S],re=F[S+1];ne==="style"?Oo(y,re):ne==="dangerouslySetInnerHTML"?Eu(y,re):ne==="children"?Fs(y,re):j(y,ne,re,Y)}switch(D){case"input":Os(y,x);break;case"textarea":wu(y,x);break;case"select":var te=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!x.multiple;var ce=x.value;ce!=null?Jn(y,!!x.multiple,ce,!1):te!==!!x.multiple&&(x.defaultValue!=null?Jn(y,!!x.multiple,x.defaultValue,!0):Jn(y,!!x.multiple,x.multiple?[]:"",!1))}y[Wl]=x}catch(ge){ft(i,i.return,ge)}}break;case 6:if(or(o,i),Mr(i),p&4){if(i.stateNode===null)throw Error(t(162));y=i.stateNode,x=i.memoizedProps;try{y.nodeValue=x}catch(ge){ft(i,i.return,ge)}}break;case 3:if(or(o,i),Mr(i),p&4&&c!==null&&c.memoizedState.isDehydrated)try{Ui(o.containerInfo)}catch(ge){ft(i,i.return,ge)}break;case 4:or(o,i),Mr(i);break;case 13:or(o,i),Mr(i),y=i.child,y.flags&8192&&(x=y.memoizedState!==null,y.stateNode.isHidden=x,!x||y.alternate!==null&&y.alternate.memoizedState!==null||(Ep=tt())),p&4&&e1(i);break;case 22:if(ne=c!==null&&c.memoizedState!==null,i.mode&1?(en=(Y=en)||ne,or(o,i),en=Y):or(o,i),Mr(i),p&8192){if(Y=i.memoizedState!==null,(i.stateNode.isHidden=Y)&&!ne&&(i.mode&1)!==0)for(he=i,ne=i.child;ne!==null;){for(re=he=ne;he!==null;){switch(te=he,ce=te.child,te.tag){case 0:case 11:case 14:case 15:tc(4,te,te.return);break;case 1:va(te,te.return);var pe=te.stateNode;if(typeof pe.componentWillUnmount=="function"){p=te,c=te.return;try{o=p,pe.props=o.memoizedProps,pe.state=o.memoizedState,pe.componentWillUnmount()}catch(ge){ft(p,c,ge)}}break;case 5:va(te,te.return);break;case 22:if(te.memoizedState!==null){i1(re);continue}}ce!==null?(ce.return=te,he=ce):i1(re)}ne=ne.sibling}e:for(ne=null,re=i;;){if(re.tag===5){if(ne===null){ne=re;try{y=re.stateNode,Y?(x=y.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none"):(D=re.stateNode,F=re.memoizedProps.style,S=F!=null&&F.hasOwnProperty("display")?F.display:null,D.style.display=Ni("display",S))}catch(ge){ft(i,i.return,ge)}}}else if(re.tag===6){if(ne===null)try{re.stateNode.nodeValue=Y?"":re.memoizedProps}catch(ge){ft(i,i.return,ge)}}else if((re.tag!==22&&re.tag!==23||re.memoizedState===null||re===i)&&re.child!==null){re.child.return=re,re=re.child;continue}if(re===i)break e;for(;re.sibling===null;){if(re.return===null||re.return===i)break e;ne===re&&(ne=null),re=re.return}ne===re&&(ne=null),re.sibling.return=re.return,re=re.sibling}}break;case 19:or(o,i),Mr(i),p&4&&e1(i);break;case 21:break;default:or(o,i),Mr(i)}}function Mr(i){var o=i.flags;if(o&2){try{e:{for(var c=i.return;c!==null;){if(Xv(c)){var p=c;break e}c=c.return}throw Error(t(160))}switch(p.tag){case 5:var y=p.stateNode;p.flags&32&&(Fs(y,""),p.flags&=-33);var x=Jv(i);xp(i,x,y);break;case 3:case 4:var S=p.stateNode.containerInfo,D=Jv(i);vp(i,D,S);break;default:throw Error(t(161))}}catch(F){ft(i,i.return,F)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function jI(i,o,c){he=i,n1(i)}function n1(i,o,c){for(var p=(i.mode&1)!==0;he!==null;){var y=he,x=y.child;if(y.tag===22&&p){var S=y.memoizedState!==null||yd;if(!S){var D=y.alternate,F=D!==null&&D.memoizedState!==null||en;D=yd;var Y=en;if(yd=S,(en=F)&&!Y)for(he=y;he!==null;)S=he,F=S.child,S.tag===22&&S.memoizedState!==null?s1(y):F!==null?(F.return=S,he=F):s1(y);for(;x!==null;)he=x,n1(x),x=x.sibling;he=y,yd=D,en=Y}r1(i)}else(y.subtreeFlags&8772)!==0&&x!==null?(x.return=y,he=x):r1(i)}}function r1(i){for(;he!==null;){var o=he;if((o.flags&8772)!==0){var c=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:en||vd(5,o);break;case 1:var p=o.stateNode;if(o.flags&4&&!en)if(c===null)p.componentDidMount();else{var y=o.elementType===o.type?c.memoizedProps:ir(o.type,c.memoizedProps);p.componentDidUpdate(y,c.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var x=o.updateQueue;x!==null&&iv(o,x,p);break;case 3:var S=o.updateQueue;if(S!==null){if(c=null,o.child!==null)switch(o.child.tag){case 5:c=o.child.stateNode;break;case 1:c=o.child.stateNode}iv(o,S,c)}break;case 5:var D=o.stateNode;if(c===null&&o.flags&4){c=D;var F=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":F.autoFocus&&c.focus();break;case"img":F.src&&(c.src=F.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var Y=o.alternate;if(Y!==null){var ne=Y.memoizedState;if(ne!==null){var re=ne.dehydrated;re!==null&&Ui(re)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}en||o.flags&512&&yp(o)}catch(te){ft(o,o.return,te)}}if(o===i){he=null;break}if(c=o.sibling,c!==null){c.return=o.return,he=c;break}he=o.return}}function i1(i){for(;he!==null;){var o=he;if(o===i){he=null;break}var c=o.sibling;if(c!==null){c.return=o.return,he=c;break}he=o.return}}function s1(i){for(;he!==null;){var o=he;try{switch(o.tag){case 0:case 11:case 15:var c=o.return;try{vd(4,o)}catch(F){ft(o,c,F)}break;case 1:var p=o.stateNode;if(typeof p.componentDidMount=="function"){var y=o.return;try{p.componentDidMount()}catch(F){ft(o,y,F)}}var x=o.return;try{yp(o)}catch(F){ft(o,x,F)}break;case 5:var S=o.return;try{yp(o)}catch(F){ft(o,S,F)}}}catch(F){ft(o,o.return,F)}if(o===i){he=null;break}var D=o.sibling;if(D!==null){D.return=o.return,he=D;break}he=o.return}}var NI=Math.ceil,xd=Q.ReactCurrentDispatcher,_p=Q.ReactCurrentOwner,$n=Q.ReactCurrentBatchConfig,$e=0,Ot=null,kt=null,Ht=0,Pn=0,xa=qi(0),Rt=0,nc=null,oo=0,_d=0,wp=0,rc=null,yn=null,Ep=0,_a=1/0,hi=null,wd=!1,Tp=null,Zi=null,Ed=!1,es=null,Td=0,ic=0,kp=null,kd=-1,Sd=0;function un(){return($e&6)!==0?tt():kd!==-1?kd:kd=tt()}function ts(i){return(i.mode&1)===0?1:($e&2)!==0&&Ht!==0?Ht&-Ht:gI.transition!==null?(Sd===0&&(Sd=Sl()),Sd):(i=Be,i!==0||(i=window.event,i=i===void 0?16:Qo(i.type)),i)}function ar(i,o,c,p){if(50<ic)throw ic=0,kp=null,Error(t(185));Gs(i,c,p),(($e&2)===0||i!==Ot)&&(i===Ot&&(($e&2)===0&&(_d|=c),Rt===4&&ns(i,Ht)),vn(i,p),c===1&&$e===0&&(o.mode&1)===0&&(_a=tt()+500,Zu&&Qi()))}function vn(i,o){var c=i.callbackNode;qs(i,o);var p=Zr(i,i===Ot?Ht:0);if(p===0)c!==null&&Uo(c),i.callbackNode=null,i.callbackPriority=0;else if(o=p&-p,i.callbackPriority!==o){if(c!=null&&Uo(c),o===1)i.tag===0?mI(a1.bind(null,i)):K0(a1.bind(null,i)),dI(function(){($e&6)===0&&Qi()}),c=null;else{switch(Tr(p)){case 1:c=$o;break;case 4:c=El;break;case 16:c=$s;break;case 536870912:c=Wo;break;default:c=$s}c=m1(c,o1.bind(null,i))}i.callbackPriority=o,i.callbackNode=c}}function o1(i,o){if(kd=-1,Sd=0,($e&6)!==0)throw Error(t(327));var c=i.callbackNode;if(wa()&&i.callbackNode!==c)return null;var p=Zr(i,i===Ot?Ht:0);if(p===0)return null;if((p&30)!==0||(p&i.expiredLanes)!==0||o)o=bd(i,p);else{o=p;var y=$e;$e|=2;var x=c1();(Ot!==i||Ht!==o)&&(hi=null,_a=tt()+500,lo(i,o));do try{MI();break}catch(D){l1(i,D)}while(!0);Uf(),xd.current=x,$e=y,kt!==null?o=0:(Ot=null,Ht=0,o=Rt)}if(o!==0){if(o===2&&(y=kl(i),y!==0&&(p=y,o=Sp(i,y))),o===1)throw c=nc,lo(i,0),ns(i,p),vn(i,tt()),c;if(o===6)ns(i,p);else{if(y=i.current.alternate,(p&30)===0&&!DI(y)&&(o=bd(i,p),o===2&&(x=kl(i),x!==0&&(p=x,o=Sp(i,x))),o===1))throw c=nc,lo(i,0),ns(i,p),vn(i,tt()),c;switch(i.finishedWork=y,i.finishedLanes=p,o){case 0:case 1:throw Error(t(345));case 2:co(i,yn,hi);break;case 3:if(ns(i,p),(p&130023424)===p&&(o=Ep+500-tt(),10<o)){if(Zr(i,0)!==0)break;if(y=i.suspendedLanes,(y&p)!==p){un(),i.pingedLanes|=i.suspendedLanes&y;break}i.timeoutHandle=Pf(co.bind(null,i,yn,hi),o);break}co(i,yn,hi);break;case 4:if(ns(i,p),(p&4194240)===p)break;for(o=i.eventTimes,y=-1;0<p;){var S=31-kn(p);x=1<<S,S=o[S],S>y&&(y=S),p&=~x}if(p=y,p=tt()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*NI(p/1960))-p,10<p){i.timeoutHandle=Pf(co.bind(null,i,yn,hi),p);break}co(i,yn,hi);break;case 5:co(i,yn,hi);break;default:throw Error(t(329))}}}return vn(i,tt()),i.callbackNode===c?o1.bind(null,i):null}function Sp(i,o){var c=rc;return i.current.memoizedState.isDehydrated&&(lo(i,o).flags|=256),i=bd(i,o),i!==2&&(o=yn,yn=c,o!==null&&bp(o)),i}function bp(i){yn===null?yn=i:yn.push.apply(yn,i)}function DI(i){for(var o=i;;){if(o.flags&16384){var c=o.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var p=0;p<c.length;p++){var y=c[p],x=y.getSnapshot;y=y.value;try{if(!nr(x(),y))return!1}catch{return!1}}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function ns(i,o){for(o&=~wp,o&=~_d,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var c=31-kn(o),p=1<<c;i[c]=-1,o&=~p}}function a1(i){if(($e&6)!==0)throw Error(t(327));wa();var o=Zr(i,0);if((o&1)===0)return vn(i,tt()),null;var c=bd(i,o);if(i.tag!==0&&c===2){var p=kl(i);p!==0&&(o=p,c=Sp(i,p))}if(c===1)throw c=nc,lo(i,0),ns(i,o),vn(i,tt()),c;if(c===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,co(i,yn,hi),vn(i,tt()),null}function Ip(i,o){var c=$e;$e|=1;try{return i(o)}finally{$e=c,$e===0&&(_a=tt()+500,Zu&&Qi())}}function ao(i){es!==null&&es.tag===0&&($e&6)===0&&wa();var o=$e;$e|=1;var c=$n.transition,p=Be;try{if($n.transition=null,Be=1,i)return i()}finally{Be=p,$n.transition=c,$e=o,($e&6)===0&&Qi()}}function Cp(){Pn=xa.current,rt(xa)}function lo(i,o){i.finishedWork=null,i.finishedLanes=0;var c=i.timeoutHandle;if(c!==-1&&(i.timeoutHandle=-1,uI(c)),kt!==null)for(c=kt.return;c!==null;){var p=c;switch(Lf(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&Xu();break;case 3:ga(),rt(pn),rt(Xt),Yf();break;case 5:Gf(p);break;case 4:ga();break;case 13:rt(lt);break;case 19:rt(lt);break;case 10:$f(p.type._context);break;case 22:case 23:Cp()}c=c.return}if(Ot=i,kt=i=rs(i.current,null),Ht=Pn=o,Rt=0,nc=null,wp=_d=oo=0,yn=rc=null,ro!==null){for(o=0;o<ro.length;o++)if(c=ro[o],p=c.interleaved,p!==null){c.interleaved=null;var y=p.next,x=c.pending;if(x!==null){var S=x.next;x.next=y,p.next=S}c.pending=p}ro=null}return i}function l1(i,o){do{var c=kt;try{if(Uf(),cd.current=fd,ud){for(var p=ct.memoizedState;p!==null;){var y=p.queue;y!==null&&(y.pending=null),p=p.next}ud=!1}if(so=0,Lt=At=ct=null,Yl=!1,Xl=0,_p.current=null,c===null||c.return===null){Rt=1,nc=o,kt=null;break}e:{var x=i,S=c.return,D=c,F=o;if(o=Ht,D.flags|=32768,F!==null&&typeof F=="object"&&typeof F.then=="function"){var Y=F,ne=D,re=ne.tag;if((ne.mode&1)===0&&(re===0||re===11||re===15)){var te=ne.alternate;te?(ne.updateQueue=te.updateQueue,ne.memoizedState=te.memoizedState,ne.lanes=te.lanes):(ne.updateQueue=null,ne.memoizedState=null)}var ce=Nv(S);if(ce!==null){ce.flags&=-257,Dv(ce,S,D,x,o),ce.mode&1&&jv(x,Y,o),o=ce,F=Y;var pe=o.updateQueue;if(pe===null){var ge=new Set;ge.add(F),o.updateQueue=ge}else pe.add(F);break e}else{if((o&1)===0){jv(x,Y,o),Ap();break e}F=Error(t(426))}}else if(ot&&D.mode&1){var vt=Nv(S);if(vt!==null){(vt.flags&65536)===0&&(vt.flags|=256),Dv(vt,S,D,x,o),Bf(ya(F,D));break e}}x=F=ya(F,D),Rt!==4&&(Rt=2),rc===null?rc=[x]:rc.push(x),x=S;do{switch(x.tag){case 3:x.flags|=65536,o&=-o,x.lanes|=o;var K=Rv(x,F,o);rv(x,K);break e;case 1:D=F;var z=x.type,G=x.stateNode;if((x.flags&128)===0&&(typeof z.getDerivedStateFromError=="function"||G!==null&&typeof G.componentDidCatch=="function"&&(Zi===null||!Zi.has(G)))){x.flags|=65536,o&=-o,x.lanes|=o;var se=Pv(x,D,o);rv(x,se);break e}}x=x.return}while(x!==null)}d1(c)}catch(ye){o=ye,kt===c&&c!==null&&(kt=c=c.return);continue}break}while(!0)}function c1(){var i=xd.current;return xd.current=fd,i===null?fd:i}function Ap(){(Rt===0||Rt===3||Rt===2)&&(Rt=4),Ot===null||(oo&268435455)===0&&(_d&268435455)===0||ns(Ot,Ht)}function bd(i,o){var c=$e;$e|=2;var p=c1();(Ot!==i||Ht!==o)&&(hi=null,lo(i,o));do try{VI();break}catch(y){l1(i,y)}while(!0);if(Uf(),$e=c,xd.current=p,kt!==null)throw Error(t(261));return Ot=null,Ht=0,Rt}function VI(){for(;kt!==null;)u1(kt)}function MI(){for(;kt!==null&&!Us();)u1(kt)}function u1(i){var o=p1(i.alternate,i,Pn);i.memoizedProps=i.pendingProps,o===null?d1(i):kt=o,_p.current=null}function d1(i){var o=i;do{var c=o.alternate;if(i=o.return,(o.flags&32768)===0){if(c=CI(c,o,Pn),c!==null){kt=c;return}}else{if(c=AI(c,o),c!==null){c.flags&=32767,kt=c;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Rt=6,kt=null;return}}if(o=o.sibling,o!==null){kt=o;return}kt=o=i}while(o!==null);Rt===0&&(Rt=5)}function co(i,o,c){var p=Be,y=$n.transition;try{$n.transition=null,Be=1,LI(i,o,c,p)}finally{$n.transition=y,Be=p}return null}function LI(i,o,c,p){do wa();while(es!==null);if(($e&6)!==0)throw Error(t(327));c=i.finishedWork;var y=i.finishedLanes;if(c===null)return null;if(i.finishedWork=null,i.finishedLanes=0,c===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var x=c.lanes|c.childLanes;if(mf(i,x),i===Ot&&(kt=Ot=null,Ht=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||Ed||(Ed=!0,m1($s,function(){return wa(),null})),x=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||x){x=$n.transition,$n.transition=null;var S=Be;Be=1;var D=$e;$e|=4,_p.current=null,PI(i,c),t1(c,i),rI(Af),ni=!!Cf,Af=Cf=null,i.current=c,jI(c),Jr(),$e=D,Be=S,$n.transition=x}else i.current=c;if(Ed&&(Ed=!1,es=i,Td=y),x=i.pendingLanes,x===0&&(Zi=null),Nu(c.stateNode),vn(i,tt()),o!==null)for(p=i.onRecoverableError,c=0;c<o.length;c++)y=o[c],p(y.value,{componentStack:y.stack,digest:y.digest});if(wd)throw wd=!1,i=Tp,Tp=null,i;return(Td&1)!==0&&i.tag!==0&&wa(),x=i.pendingLanes,(x&1)!==0?i===kp?ic++:(ic=0,kp=i):ic=0,Qi(),null}function wa(){if(es!==null){var i=Tr(Td),o=$n.transition,c=Be;try{if($n.transition=null,Be=16>i?16:i,es===null)var p=!1;else{if(i=es,es=null,Td=0,($e&6)!==0)throw Error(t(331));var y=$e;for($e|=4,he=i.current;he!==null;){var x=he,S=x.child;if((he.flags&16)!==0){var D=x.deletions;if(D!==null){for(var F=0;F<D.length;F++){var Y=D[F];for(he=Y;he!==null;){var ne=he;switch(ne.tag){case 0:case 11:case 15:tc(8,ne,x)}var re=ne.child;if(re!==null)re.return=ne,he=re;else for(;he!==null;){ne=he;var te=ne.sibling,ce=ne.return;if(Yv(ne),ne===Y){he=null;break}if(te!==null){te.return=ce,he=te;break}he=ce}}}var pe=x.alternate;if(pe!==null){var ge=pe.child;if(ge!==null){pe.child=null;do{var vt=ge.sibling;ge.sibling=null,ge=vt}while(ge!==null)}}he=x}}if((x.subtreeFlags&2064)!==0&&S!==null)S.return=x,he=S;else e:for(;he!==null;){if(x=he,(x.flags&2048)!==0)switch(x.tag){case 0:case 11:case 15:tc(9,x,x.return)}var K=x.sibling;if(K!==null){K.return=x.return,he=K;break e}he=x.return}}var z=i.current;for(he=z;he!==null;){S=he;var G=S.child;if((S.subtreeFlags&2064)!==0&&G!==null)G.return=S,he=G;else e:for(S=z;he!==null;){if(D=he,(D.flags&2048)!==0)try{switch(D.tag){case 0:case 11:case 15:vd(9,D)}}catch(ye){ft(D,D.return,ye)}if(D===S){he=null;break e}var se=D.sibling;if(se!==null){se.return=D.return,he=se;break e}he=D.return}}if($e=y,Qi(),Tn&&typeof Tn.onPostCommitFiberRoot=="function")try{Tn.onPostCommitFiberRoot(Ws,i)}catch{}p=!0}return p}finally{Be=c,$n.transition=o}}return!1}function h1(i,o,c){o=ya(c,o),o=Rv(i,o,1),i=Xi(i,o,1),o=un(),i!==null&&(Gs(i,1,o),vn(i,o))}function ft(i,o,c){if(i.tag===3)h1(i,i,c);else for(;o!==null;){if(o.tag===3){h1(o,i,c);break}else if(o.tag===1){var p=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Zi===null||!Zi.has(p))){i=ya(c,i),i=Pv(o,i,1),o=Xi(o,i,1),i=un(),o!==null&&(Gs(o,1,i),vn(o,i));break}}o=o.return}}function OI(i,o,c){var p=i.pingCache;p!==null&&p.delete(o),o=un(),i.pingedLanes|=i.suspendedLanes&c,Ot===i&&(Ht&c)===c&&(Rt===4||Rt===3&&(Ht&130023424)===Ht&&500>tt()-Ep?lo(i,0):wp|=c),vn(i,o)}function f1(i,o){o===0&&((i.mode&1)===0?o=1:(o=Fi,Fi<<=1,(Fi&130023424)===0&&(Fi=4194304)));var c=un();i=ci(i,o),i!==null&&(Gs(i,o,c),vn(i,c))}function FI(i){var o=i.memoizedState,c=0;o!==null&&(c=o.retryLane),f1(i,c)}function BI(i,o){var c=0;switch(i.tag){case 13:var p=i.stateNode,y=i.memoizedState;y!==null&&(c=y.retryLane);break;case 19:p=i.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(o),f1(i,c)}var p1;p1=function(i,o,c){if(i!==null)if(i.memoizedProps!==o.pendingProps||pn.current)gn=!0;else{if((i.lanes&c)===0&&(o.flags&128)===0)return gn=!1,II(i,o,c);gn=(i.flags&131072)!==0}else gn=!1,ot&&(o.flags&1048576)!==0&&q0(o,td,o.index);switch(o.lanes=0,o.tag){case 2:var p=o.type;gd(i,o),i=o.pendingProps;var y=ca(o,Xt.current);ma(o,c),y=Zf(null,o,p,i,y,c);var x=ep();return o.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,mn(p)?(x=!0,Ju(o)):x=!1,o.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,Kf(o),y.updater=pd,o.stateNode=y,y._reactInternals=o,op(o,p,i,c),o=up(null,o,p,!0,x,c)):(o.tag=0,ot&&x&&Mf(o),cn(null,o,y,c),o=o.child),o;case 16:p=o.elementType;e:{switch(gd(i,o),i=o.pendingProps,y=p._init,p=y(p._payload),o.type=p,y=o.tag=UI(p),i=ir(p,i),y){case 0:o=cp(null,o,p,i,c);break e;case 1:o=Bv(null,o,p,i,c);break e;case 11:o=Vv(null,o,p,i,c);break e;case 14:o=Mv(null,o,p,ir(p.type,i),c);break e}throw Error(t(306,p,""))}return o;case 0:return p=o.type,y=o.pendingProps,y=o.elementType===p?y:ir(p,y),cp(i,o,p,y,c);case 1:return p=o.type,y=o.pendingProps,y=o.elementType===p?y:ir(p,y),Bv(i,o,p,y,c);case 3:e:{if(zv(o),i===null)throw Error(t(387));p=o.pendingProps,x=o.memoizedState,y=x.element,nv(i,o),ad(o,p,null,c);var S=o.memoizedState;if(p=S.element,x.isDehydrated)if(x={element:p,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},o.updateQueue.baseState=x,o.memoizedState=x,o.flags&256){y=ya(Error(t(423)),o),o=Uv(i,o,p,c,y);break e}else if(p!==y){y=ya(Error(t(424)),o),o=Uv(i,o,p,c,y);break e}else for(Rn=Ki(o.stateNode.containerInfo.firstChild),An=o,ot=!0,rr=null,c=ev(o,null,p,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(ha(),p===y){o=di(i,o,c);break e}cn(i,o,p,c)}o=o.child}return o;case 5:return sv(o),i===null&&Ff(o),p=o.type,y=o.pendingProps,x=i!==null?i.memoizedProps:null,S=y.children,Rf(p,y)?S=null:x!==null&&Rf(p,x)&&(o.flags|=32),Fv(i,o),cn(i,o,S,c),o.child;case 6:return i===null&&Ff(o),null;case 13:return $v(i,o,c);case 4:return qf(o,o.stateNode.containerInfo),p=o.pendingProps,i===null?o.child=fa(o,null,p,c):cn(i,o,p,c),o.child;case 11:return p=o.type,y=o.pendingProps,y=o.elementType===p?y:ir(p,y),Vv(i,o,p,y,c);case 7:return cn(i,o,o.pendingProps,c),o.child;case 8:return cn(i,o,o.pendingProps.children,c),o.child;case 12:return cn(i,o,o.pendingProps.children,c),o.child;case 10:e:{if(p=o.type._context,y=o.pendingProps,x=o.memoizedProps,S=y.value,Ze(id,p._currentValue),p._currentValue=S,x!==null)if(nr(x.value,S)){if(x.children===y.children&&!pn.current){o=di(i,o,c);break e}}else for(x=o.child,x!==null&&(x.return=o);x!==null;){var D=x.dependencies;if(D!==null){S=x.child;for(var F=D.firstContext;F!==null;){if(F.context===p){if(x.tag===1){F=ui(-1,c&-c),F.tag=2;var Y=x.updateQueue;if(Y!==null){Y=Y.shared;var ne=Y.pending;ne===null?F.next=F:(F.next=ne.next,ne.next=F),Y.pending=F}}x.lanes|=c,F=x.alternate,F!==null&&(F.lanes|=c),Wf(x.return,c,o),D.lanes|=c;break}F=F.next}}else if(x.tag===10)S=x.type===o.type?null:x.child;else if(x.tag===18){if(S=x.return,S===null)throw Error(t(341));S.lanes|=c,D=S.alternate,D!==null&&(D.lanes|=c),Wf(S,c,o),S=x.sibling}else S=x.child;if(S!==null)S.return=x;else for(S=x;S!==null;){if(S===o){S=null;break}if(x=S.sibling,x!==null){x.return=S.return,S=x;break}S=S.return}x=S}cn(i,o,y.children,c),o=o.child}return o;case 9:return y=o.type,p=o.pendingProps.children,ma(o,c),y=zn(y),p=p(y),o.flags|=1,cn(i,o,p,c),o.child;case 14:return p=o.type,y=ir(p,o.pendingProps),y=ir(p.type,y),Mv(i,o,p,y,c);case 15:return Lv(i,o,o.type,o.pendingProps,c);case 17:return p=o.type,y=o.pendingProps,y=o.elementType===p?y:ir(p,y),gd(i,o),o.tag=1,mn(p)?(i=!0,Ju(o)):i=!1,ma(o,c),Cv(o,p,y),op(o,p,y,c),up(null,o,p,!0,i,c);case 19:return Hv(i,o,c);case 22:return Ov(i,o,c)}throw Error(t(156,o.tag))};function m1(i,o){return wl(i,o)}function zI(i,o,c,p){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wn(i,o,c,p){return new zI(i,o,c,p)}function Rp(i){return i=i.prototype,!(!i||!i.isReactComponent)}function UI(i){if(typeof i=="function")return Rp(i)?1:0;if(i!=null){if(i=i.$$typeof,i===$)return 11;if(i===He)return 14}return 2}function rs(i,o){var c=i.alternate;return c===null?(c=Wn(i.tag,o,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=o,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&14680064,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,o=i.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c}function Id(i,o,c,p,y,x){var S=2;if(p=i,typeof i=="function")Rp(i)&&(S=1);else if(typeof i=="string")S=5;else e:switch(i){case A:return uo(c.children,y,x,o);case b:S=8,y|=8;break;case P:return i=Wn(12,c,o,y|2),i.elementType=P,i.lanes=x,i;case V:return i=Wn(13,c,o,y),i.elementType=V,i.lanes=x,i;case Ne:return i=Wn(19,c,o,y),i.elementType=Ne,i.lanes=x,i;case Se:return Cd(c,y,x,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case M:S=10;break e;case L:S=9;break e;case $:S=11;break e;case He:S=14;break e;case wt:S=16,p=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=Wn(S,c,o,y),o.elementType=i,o.type=p,o.lanes=x,o}function uo(i,o,c,p){return i=Wn(7,i,p,o),i.lanes=c,i}function Cd(i,o,c,p){return i=Wn(22,i,p,o),i.elementType=Se,i.lanes=c,i.stateNode={isHidden:!1},i}function Pp(i,o,c){return i=Wn(6,i,null,o),i.lanes=c,i}function jp(i,o,c){return o=Wn(4,i.children!==null?i.children:[],i.key,o),o.lanes=c,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function $I(i,o,c,p,y){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bl(0),this.expirationTimes=bl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bl(0),this.identifierPrefix=p,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function Np(i,o,c,p,y,x,S,D,F){return i=new $I(i,o,c,D,F),o===1?(o=1,x===!0&&(o|=8)):o=0,x=Wn(3,null,null,o),i.current=x,x.stateNode=i,x.memoizedState={element:p,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kf(x),i}function WI(i,o,c){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:H,key:p==null?null:""+p,children:i,containerInfo:o,implementation:c}}function g1(i){if(!i)return Gi;i=i._reactInternals;e:{if(er(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(mn(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var c=i.type;if(mn(c))return W0(i,c,o)}return o}function y1(i,o,c,p,y,x,S,D,F){return i=Np(c,p,!0,i,y,x,S,D,F),i.context=g1(null),c=i.current,p=un(),y=ts(c),x=ui(p,y),x.callback=o??null,Xi(c,x,y),i.current.lanes=y,Gs(i,y,p),vn(i,p),i}function Ad(i,o,c,p){var y=o.current,x=un(),S=ts(y);return c=g1(c),o.context===null?o.context=c:o.pendingContext=c,o=ui(x,S),o.payload={element:i},p=p===void 0?null:p,p!==null&&(o.callback=p),i=Xi(y,o,S),i!==null&&(ar(i,y,S,x),od(i,y,S)),S}function Rd(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function v1(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<o?c:o}}function Dp(i,o){v1(i,o),(i=i.alternate)&&v1(i,o)}function HI(){return null}var x1=typeof reportError=="function"?reportError:function(i){console.error(i)};function Vp(i){this._internalRoot=i}Pd.prototype.render=Vp.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));Ad(i,o,null,null)},Pd.prototype.unmount=Vp.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;ao(function(){Ad(null,i,null,null)}),o[si]=null}};function Pd(i){this._internalRoot=i}Pd.prototype.unstable_scheduleHydration=function(i){if(i){var o=Rl();i={blockedOn:null,target:i,priority:o};for(var c=0;c<Sn.length&&o!==0&&o<Sn[c].priority;c++);Sn.splice(c,0,i),c===0&&qo(i)}};function Mp(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function jd(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function _1(){}function KI(i,o,c,p,y){if(y){if(typeof p=="function"){var x=p;p=function(){var Y=Rd(S);x.call(Y)}}var S=y1(o,p,i,0,null,!1,!1,"",_1);return i._reactRootContainer=S,i[si]=S.current,Ul(i.nodeType===8?i.parentNode:i),ao(),S}for(;y=i.lastChild;)i.removeChild(y);if(typeof p=="function"){var D=p;p=function(){var Y=Rd(F);D.call(Y)}}var F=Np(i,0,!1,null,null,!1,!1,"",_1);return i._reactRootContainer=F,i[si]=F.current,Ul(i.nodeType===8?i.parentNode:i),ao(function(){Ad(o,F,c,p)}),F}function Nd(i,o,c,p,y){var x=c._reactRootContainer;if(x){var S=x;if(typeof y=="function"){var D=y;y=function(){var F=Rd(S);D.call(F)}}Ad(o,S,i,y)}else S=KI(c,o,i,y,p);return Rd(S)}Cl=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var c=Ke(o.pendingLanes);c!==0&&(Il(o,c|1),vn(o,tt()),($e&6)===0&&(_a=tt()+500,Qi()))}break;case 13:ao(function(){var p=ci(i,1);if(p!==null){var y=un();ar(p,i,1,y)}}),Dp(i,1)}},Ho=function(i){if(i.tag===13){var o=ci(i,134217728);if(o!==null){var c=un();ar(o,i,134217728,c)}Dp(i,134217728)}},Al=function(i){if(i.tag===13){var o=ts(i),c=ci(i,o);if(c!==null){var p=un();ar(c,i,o,p)}Dp(i,o)}},Rl=function(){return Be},Pl=function(i,o){var c=Be;try{return Be=i,o()}finally{Be=c}},Qr=function(i,o,c){switch(o){case"input":if(Os(i,c),o=c.name,c.type==="radio"&&o!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<c.length;o++){var p=c[o];if(p!==i&&p.form===i.form){var y=Yu(p);if(!y)throw Error(t(90));hl(p),Os(p,y)}}}break;case"textarea":wu(i,c);break;case"select":o=c.value,o!=null&&Jn(i,!!c.multiple,o,!1)}},ku=Ip,Su=ao;var qI={usingClientEntryPoint:!1,Events:[Hl,aa,Yu,Vi,Mi,Ip]},sc={findFiberByHostInstance:Zs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},GI={bundleType:sc.bundleType,version:sc.version,rendererPackageName:sc.rendererPackageName,rendererConfig:sc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Q.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=ju(i),i===null?null:i.stateNode},findFiberByHostInstance:sc.findFiberByHostInstance||HI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dd.isDisabled&&Dd.supportsFiber)try{Ws=Dd.inject(GI),Tn=Dd}catch{}}return xn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qI,xn.createPortal=function(i,o){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Mp(o))throw Error(t(200));return WI(i,o,null,c)},xn.createRoot=function(i,o){if(!Mp(i))throw Error(t(299));var c=!1,p="",y=x1;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onRecoverableError!==void 0&&(y=o.onRecoverableError)),o=Np(i,1,!1,null,null,c,!1,p,y),i[si]=o.current,Ul(i.nodeType===8?i.parentNode:i),new Vp(o)},xn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=ju(o),i=i===null?null:i.stateNode,i},xn.flushSync=function(i){return ao(i)},xn.hydrate=function(i,o,c){if(!jd(o))throw Error(t(200));return Nd(null,i,o,!0,c)},xn.hydrateRoot=function(i,o,c){if(!Mp(i))throw Error(t(405));var p=c!=null&&c.hydratedSources||null,y=!1,x="",S=x1;if(c!=null&&(c.unstable_strictMode===!0&&(y=!0),c.identifierPrefix!==void 0&&(x=c.identifierPrefix),c.onRecoverableError!==void 0&&(S=c.onRecoverableError)),o=y1(o,null,i,1,c??null,y,!1,x,S),i[si]=o.current,Ul(i),p)for(i=0;i<p.length;i++)c=p[i],y=c._getVersion,y=y(c._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[c,y]:o.mutableSourceEagerHydrationData.push(c,y);return new Pd(o)},xn.render=function(i,o,c){if(!jd(o))throw Error(t(200));return Nd(null,i,o,!1,c)},xn.unmountComponentAtNode=function(i){if(!jd(i))throw Error(t(40));return i._reactRootContainer?(ao(function(){Nd(null,null,i,!1,function(){i._reactRootContainer=null,i[si]=null})}),!0):!1},xn.unstable_batchedUpdates=Ip,xn.unstable_renderSubtreeIntoContainer=function(i,o,c,p){if(!jd(c))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return Nd(i,o,c,!1,p)},xn.version="18.3.1-next-f1338f8080-20240426",xn}var C1;function r2(){if(C1)return Fp.exports;C1=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Fp.exports=n2(),Fp.exports}var A1;function i2(){if(A1)return Vd;A1=1;var n=r2();return Vd.createRoot=n.createRoot,Vd.hydrateRoot=n.hydrateRoot,Vd}var s2=i2();/**
 * react-router v7.12.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var R1="popstate";function o2(n={}){function e(s,a){let{pathname:l="/",search:f="",hash:d=""}=Ao(s.location.hash.substring(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),km("",{pathname:l,search:f,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(s,a){let l=s.document.querySelector("base"),f="";if(l&&l.getAttribute("href")){let d=s.location.href,m=d.indexOf("#");f=m===-1?d:d.slice(0,m)}return f+"#"+(typeof a=="string"?a:Ac(a))}function r(s,a){Dn(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return l2(e,t,r,n)}function at(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Dn(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function a2(){return Math.random().toString(36).substring(2,10)}function P1(n,e){return{usr:n.state,key:n.key,idx:e}}function km(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Ao(e):e,state:t,key:e&&e.key||r||a2()}}function Ac({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Ao(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function l2(n,e,t,r={}){let{window:s=document.defaultView,v5Compat:a=!1}=r,l=s.history,f="POP",d=null,m=g();m==null&&(m=0,l.replaceState({...l.state,idx:m},""));function g(){return(l.state||{idx:null}).idx}function v(){f="POP";let C=g(),O=C==null?null:C-m;m=C,d&&d({action:f,location:I.location,delta:O})}function w(C,O){f="PUSH";let B=km(I.location,C,O);t&&t(B,C),m=g()+1;let j=P1(B,m),Q=I.createHref(B);try{l.pushState(j,"",Q)}catch(W){if(W instanceof DOMException&&W.name==="DataCloneError")throw W;s.location.assign(Q)}a&&d&&d({action:f,location:I.location,delta:1})}function k(C,O){f="REPLACE";let B=km(I.location,C,O);t&&t(B,C),m=g();let j=P1(B,m),Q=I.createHref(B);l.replaceState(j,"",Q),a&&d&&d({action:f,location:I.location,delta:0})}function T(C){return c2(C)}let I={get action(){return f},get location(){return n(s,l)},listen(C){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(R1,v),d=C,()=>{s.removeEventListener(R1,v),d=null}},createHref(C){return e(s,C)},createURL:T,encodeLocation(C){let O=T(C);return{pathname:O.pathname,search:O.search,hash:O.hash}},push:w,replace:k,go(C){return l.go(C)}};return I}function c2(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),at(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Ac(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function Ow(n,e,t="/"){return u2(n,e,t,!1)}function u2(n,e,t,r){let s=typeof e=="string"?Ao(e):e,a=_i(s.pathname||"/",t);if(a==null)return null;let l=Fw(n);d2(l);let f=null;for(let d=0;f==null&&d<l.length;++d){let m=E2(a);f=_2(l[d],m,r)}return f}function Fw(n,e=[],t=[],r="",s=!1){let a=(l,f,d=s,m)=>{let g={relativePath:m===void 0?l.path||"":m,caseSensitive:l.caseSensitive===!0,childrenIndex:f,route:l};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(r)&&d)return;at(g.relativePath.startsWith(r),`Absolute route path "${g.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(r.length)}let v=gi([r,g.relativePath]),w=t.concat(g);l.children&&l.children.length>0&&(at(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),Fw(l.children,e,w,v,d)),!(l.path==null&&!l.index)&&e.push({path:v,score:v2(v,l.index),routesMeta:w})};return n.forEach((l,f)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))a(l,f);else for(let m of Bw(l.path))a(l,f,!0,m)}),e}function Bw(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let l=Bw(r.join("/")),f=[];return f.push(...l.map(d=>d===""?a:[a,d].join("/"))),s&&f.push(...l),f.map(d=>n.startsWith("/")&&d===""?"/":d)}function d2(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:x2(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var h2=/^:[\w-]+$/,f2=3,p2=2,m2=1,g2=10,y2=-2,j1=n=>n==="*";function v2(n,e){let t=n.split("/"),r=t.length;return t.some(j1)&&(r+=y2),e&&(r+=p2),t.filter(s=>!j1(s)).reduce((s,a)=>s+(h2.test(a)?f2:a===""?m2:g2),r)}function x2(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function _2(n,e,t=!1){let{routesMeta:r}=n,s={},a="/",l=[];for(let f=0;f<r.length;++f){let d=r[f],m=f===r.length-1,g=a==="/"?e:e.slice(a.length)||"/",v=ch({path:d.relativePath,caseSensitive:d.caseSensitive,end:m},g),w=d.route;if(!v&&m&&t&&!r[r.length-1].route.index&&(v=ch({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!v)return null;Object.assign(s,v.params),l.push({params:s,pathname:gi([a,v.pathname]),pathnameBase:b2(gi([a,v.pathnameBase])),route:w}),v.pathnameBase!=="/"&&(a=gi([a,v.pathnameBase]))}return l}function ch(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=w2(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let a=s[0],l=a.replace(/(.)\/+$/,"$1"),f=s.slice(1);return{params:r.reduce((m,{paramName:g,isOptional:v},w)=>{if(g==="*"){let T=f[w]||"";l=a.slice(0,a.length-T.length).replace(/(.)\/+$/,"$1")}const k=f[w];return v&&!k?m[g]=void 0:m[g]=(k||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:l,pattern:n}}function w2(n,e=!1,t=!0){Dn(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,f,d)=>(r.push({paramName:f,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function E2(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Dn(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function _i(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}var zw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,T2=n=>zw.test(n);function k2(n,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?Ao(n):n,a;if(t)if(T2(t))a=t;else{if(t.includes("//")){let l=t;t=t.replace(/\/\/+/g,"/"),Dn(!1,`Pathnames cannot have embedded double slashes - normalizing ${l} -> ${t}`)}t.startsWith("/")?a=N1(t.substring(1),"/"):a=N1(t,e)}else a=e;return{pathname:a,search:I2(r),hash:C2(s)}}function N1(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Up(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function S2(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Sg(n){let e=S2(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function bg(n,e,t,r=!1){let s;typeof n=="string"?s=Ao(n):(s={...n},at(!s.pathname||!s.pathname.includes("?"),Up("?","pathname","search",s)),at(!s.pathname||!s.pathname.includes("#"),Up("#","pathname","hash",s)),at(!s.search||!s.search.includes("#"),Up("#","search","hash",s)));let a=n===""||s.pathname==="",l=a?"/":s.pathname,f;if(l==null)f=t;else{let v=e.length-1;if(!r&&l.startsWith("..")){let w=l.split("/");for(;w[0]==="..";)w.shift(),v-=1;s.pathname=w.join("/")}f=v>=0?e[v]:"/"}let d=k2(s,f),m=l&&l!=="/"&&l.endsWith("/"),g=(a||l===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(m||g)&&(d.pathname+="/"),d}var gi=n=>n.join("/").replace(/\/\/+/g,"/"),b2=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),I2=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,C2=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,A2=class{constructor(n,e,t,r=!1){this.status=n,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function R2(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function P2(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Uw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function $w(n,e){let t=n;if(typeof t!="string"||!zw.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let r=t,s=!1;if(Uw)try{let a=new URL(window.location.href),l=t.startsWith("//")?new URL(a.protocol+t):new URL(t),f=_i(l.pathname,e);l.origin===a.origin&&f!=null?t=f+l.search+l.hash:s=!0}catch{Dn(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:s,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Ww=["POST","PUT","PATCH","DELETE"];new Set(Ww);var j2=["GET",...Ww];new Set(j2);var Qa=N.createContext(null);Qa.displayName="DataRouter";var Fh=N.createContext(null);Fh.displayName="DataRouterState";var N2=N.createContext(!1),Hw=N.createContext({isTransitioning:!1});Hw.displayName="ViewTransition";var D2=N.createContext(new Map);D2.displayName="Fetchers";var V2=N.createContext(null);V2.displayName="Await";var Mn=N.createContext(null);Mn.displayName="Navigation";var Yc=N.createContext(null);Yc.displayName="Location";var vr=N.createContext({outlet:null,matches:[],isDataRoute:!1});vr.displayName="Route";var Ig=N.createContext(null);Ig.displayName="RouteError";var Kw="REACT_ROUTER_ERROR",M2="REDIRECT",L2="ROUTE_ERROR_RESPONSE";function O2(n){if(n.startsWith(`${Kw}:${M2}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function F2(n){if(n.startsWith(`${Kw}:${L2}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new A2(e.status,e.statusText,e.data)}catch{}}function B2(n,{relative:e}={}){at(Ya(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=N.useContext(Mn),{hash:s,pathname:a,search:l}=Jc(n,{relative:e}),f=a;return t!=="/"&&(f=a==="/"?t:gi([t,a])),r.createHref({pathname:f,search:l,hash:s})}function Ya(){return N.useContext(Yc)!=null}function Yn(){return at(Ya(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(Yc).location}var qw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Gw(n){N.useContext(Mn).static||N.useLayoutEffect(n)}function Xc(){let{isDataRoute:n}=N.useContext(vr);return n?Z2():z2()}function z2(){at(Ya(),"useNavigate() may be used only in the context of a <Router> component.");let n=N.useContext(Qa),{basename:e,navigator:t}=N.useContext(Mn),{matches:r}=N.useContext(vr),{pathname:s}=Yn(),a=JSON.stringify(Sg(r)),l=N.useRef(!1);return Gw(()=>{l.current=!0}),N.useCallback((d,m={})=>{if(Dn(l.current,qw),!l.current)return;if(typeof d=="number"){t.go(d);return}let g=bg(d,JSON.parse(a),s,m.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:gi([e,g.pathname])),(m.replace?t.replace:t.push)(g,m.state,m)},[e,t,a,s,n])}N.createContext(null);function Qw(){let{matches:n}=N.useContext(vr),e=n[n.length-1];return e?e.params:{}}function Jc(n,{relative:e}={}){let{matches:t}=N.useContext(vr),{pathname:r}=Yn(),s=JSON.stringify(Sg(t));return N.useMemo(()=>bg(n,JSON.parse(s),r,e==="path"),[n,s,r,e])}function U2(n,e){return Yw(n,e)}function Yw(n,e,t,r,s){var B;at(Ya(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=N.useContext(Mn),{matches:l}=N.useContext(vr),f=l[l.length-1],d=f?f.params:{},m=f?f.pathname:"/",g=f?f.pathnameBase:"/",v=f&&f.route;{let j=v&&v.path||"";Jw(m,!v||j.endsWith("*")||j.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${j}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${j}"> to <Route path="${j==="/"?"*":`${j}/*`}">.`)}let w=Yn(),k;if(e){let j=typeof e=="string"?Ao(e):e;at(g==="/"||((B=j.pathname)==null?void 0:B.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${j.pathname}" was given in the \`location\` prop.`),k=j}else k=w;let T=k.pathname||"/",I=T;if(g!=="/"){let j=g.replace(/^\//,"").split("/");I="/"+T.replace(/^\//,"").split("/").slice(j.length).join("/")}let C=Ow(n,{pathname:I});Dn(v||C!=null,`No routes matched location "${k.pathname}${k.search}${k.hash}" `),Dn(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${k.pathname}${k.search}${k.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let O=q2(C&&C.map(j=>Object.assign({},j,{params:Object.assign({},d,j.params),pathname:gi([g,a.encodeLocation?a.encodeLocation(j.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?g:gi([g,a.encodeLocation?a.encodeLocation(j.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:j.pathnameBase])})),l,t,r,s);return e&&O?N.createElement(Yc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...k},navigationType:"POP"}},O):O}function $2(){let n=J2(),e=R2(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=N.createElement(N.Fragment,null,N.createElement("p",null," Hey developer "),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:a},"ErrorBoundary")," or"," ",N.createElement("code",{style:a},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),t?N.createElement("pre",{style:s},t):null,l)}var W2=N.createElement($2,null),Xw=class extends N.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=F2(n.digest);t&&(n=t)}let e=n!==void 0?N.createElement(vr.Provider,{value:this.props.routeContext},N.createElement(Ig.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?N.createElement(H2,{error:n},e):e}};Xw.contextType=N2;var $p=new WeakMap;function H2({children:n,error:e}){let{basename:t}=N.useContext(Mn);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=O2(e.digest);if(r){let s=$p.get(e);if(s)throw s;let a=$w(r.location,t);if(Uw&&!$p.get(e))if(a.isExternal||r.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const l=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:r.replace}));throw $p.set(e,l),l}return N.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return n}function K2({routeContext:n,match:e,children:t}){let r=N.useContext(Qa);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),N.createElement(vr.Provider,{value:n},t)}function q2(n,e=[],t=null,r=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,l=t==null?void 0:t.errors;if(l!=null){let g=a.findIndex(v=>v.route.id&&(l==null?void 0:l[v.route.id])!==void 0);at(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,g+1))}let f=!1,d=-1;if(t)for(let g=0;g<a.length;g++){let v=a[g];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(d=g),v.route.id){let{loaderData:w,errors:k}=t,T=v.route.loader&&!w.hasOwnProperty(v.route.id)&&(!k||k[v.route.id]===void 0);if(v.route.lazy||T){f=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}let m=t&&r?(g,v)=>{var w,k;r(g,{location:t.location,params:((k=(w=t.matches)==null?void 0:w[0])==null?void 0:k.params)??{},unstable_pattern:P2(t.matches),errorInfo:v})}:void 0;return a.reduceRight((g,v,w)=>{let k,T=!1,I=null,C=null;t&&(k=l&&v.route.id?l[v.route.id]:void 0,I=v.route.errorElement||W2,f&&(d<0&&w===0?(Jw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),T=!0,C=null):d===w&&(T=!0,C=v.route.hydrateFallbackElement||null)));let O=e.concat(a.slice(0,w+1)),B=()=>{let j;return k?j=I:T?j=C:v.route.Component?j=N.createElement(v.route.Component,null):v.route.element?j=v.route.element:j=g,N.createElement(K2,{match:v,routeContext:{outlet:g,matches:O,isDataRoute:t!=null},children:j})};return t&&(v.route.ErrorBoundary||v.route.errorElement||w===0)?N.createElement(Xw,{location:t.location,revalidation:t.revalidation,component:I,error:k,children:B(),routeContext:{outlet:null,matches:O,isDataRoute:!0},onError:m}):B()},null)}function Cg(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function G2(n){let e=N.useContext(Qa);return at(e,Cg(n)),e}function Q2(n){let e=N.useContext(Fh);return at(e,Cg(n)),e}function Y2(n){let e=N.useContext(vr);return at(e,Cg(n)),e}function Ag(n){let e=Y2(n),t=e.matches[e.matches.length-1];return at(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function X2(){return Ag("useRouteId")}function J2(){var r;let n=N.useContext(Ig),e=Q2("useRouteError"),t=Ag("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function Z2(){let{router:n}=G2("useNavigate"),e=Ag("useNavigate"),t=N.useRef(!1);return Gw(()=>{t.current=!0}),N.useCallback(async(s,a={})=>{Dn(t.current,qw),t.current&&(typeof s=="number"?await n.navigate(s):await n.navigate(s,{fromRouteId:e,...a}))},[n,e])}var D1={};function Jw(n,e,t){!e&&!D1[n]&&(D1[n]=!0,Dn(!1,t))}N.memo(eC);function eC({routes:n,future:e,state:t,onError:r}){return Yw(n,void 0,t,r,e)}function tC({to:n,replace:e,state:t,relative:r}){at(Ya(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=N.useContext(Mn);Dn(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=N.useContext(vr),{pathname:l}=Yn(),f=Xc(),d=bg(n,Sg(a),l,r==="path"),m=JSON.stringify(d);return N.useEffect(()=>{f(JSON.parse(m),{replace:e,state:t,relative:r})},[f,m,r,e,t]),null}function Pt(n){at(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function nC({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:a=!1,unstable_useTransitions:l}){at(!Ya(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=n.replace(/^\/*/,"/"),d=N.useMemo(()=>({basename:f,navigator:s,static:a,unstable_useTransitions:l,future:{}}),[f,s,a,l]);typeof t=="string"&&(t=Ao(t));let{pathname:m="/",search:g="",hash:v="",state:w=null,key:k="default"}=t,T=N.useMemo(()=>{let I=_i(m,f);return I==null?null:{location:{pathname:I,search:g,hash:v,state:w,key:k},navigationType:r}},[f,m,g,v,w,k,r]);return Dn(T!=null,`<Router basename="${f}"> is not able to match the URL "${m}${g}${v}" because it does not start with the basename, so the <Router> won't render anything.`),T==null?null:N.createElement(Mn.Provider,{value:d},N.createElement(Yc.Provider,{children:e,value:T}))}function rC({children:n,location:e}){return U2(Sm(n),e)}function Sm(n,e=[]){let t=[];return N.Children.forEach(n,(r,s)=>{if(!N.isValidElement(r))return;let a=[...e,s];if(r.type===N.Fragment){t.push.apply(t,Sm(r.props.children,a));return}at(r.type===Pt,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),at(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=Sm(r.props.children,a)),t.push(l)}),t}var Kd="get",qd="application/x-www-form-urlencoded";function Bh(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function iC(n){return Bh(n)&&n.tagName.toLowerCase()==="button"}function sC(n){return Bh(n)&&n.tagName.toLowerCase()==="form"}function oC(n){return Bh(n)&&n.tagName.toLowerCase()==="input"}function aC(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function lC(n,e){return n.button===0&&(!e||e==="_self")&&!aC(n)}var Md=null;function cC(){if(Md===null)try{new FormData(document.createElement("form"),0),Md=!1}catch{Md=!0}return Md}var uC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Wp(n){return n!=null&&!uC.has(n)?(Dn(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${qd}"`),null):n}function dC(n,e){let t,r,s,a,l;if(sC(n)){let f=n.getAttribute("action");r=f?_i(f,e):null,t=n.getAttribute("method")||Kd,s=Wp(n.getAttribute("enctype"))||qd,a=new FormData(n)}else if(iC(n)||oC(n)&&(n.type==="submit"||n.type==="image")){let f=n.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=n.getAttribute("formaction")||f.getAttribute("action");if(r=d?_i(d,e):null,t=n.getAttribute("formmethod")||f.getAttribute("method")||Kd,s=Wp(n.getAttribute("formenctype"))||Wp(f.getAttribute("enctype"))||qd,a=new FormData(f,n),!cC()){let{name:m,type:g,value:v}=n;if(g==="image"){let w=m?`${m}.`:"";a.append(`${w}x`,"0"),a.append(`${w}y`,"0")}else m&&a.append(m,v)}}else{if(Bh(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Kd,r=null,s=qd,l=n}return a&&s==="text/plain"&&(l=a,a=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:a,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Rg(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function hC(n,e,t,r){let s=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?s.pathname.endsWith("/")?s.pathname=`${s.pathname}_.${r}`:s.pathname=`${s.pathname}.${r}`:s.pathname==="/"?s.pathname=`_root.${r}`:e&&_i(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${r}`,s}async function fC(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function pC(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function mC(n,e,t){let r=await Promise.all(n.map(async s=>{let a=e.routes[s.route.id];if(a){let l=await fC(a,t);return l.links?l.links():[]}return[]}));return xC(r.flat(1).filter(pC).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function V1(n,e,t,r,s,a){let l=(d,m)=>t[m]?d.route.id!==t[m].route.id:!0,f=(d,m)=>{var g;return t[m].pathname!==d.pathname||((g=t[m].route.path)==null?void 0:g.endsWith("*"))&&t[m].params["*"]!==d.params["*"]};return a==="assets"?e.filter((d,m)=>l(d,m)||f(d,m)):a==="data"?e.filter((d,m)=>{var v;let g=r.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(l(d,m)||f(d,m))return!0;if(d.route.shouldRevalidate){let w=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((v=t[0])==null?void 0:v.params)||{},nextUrl:new URL(n,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function gC(n,e,{includeHydrateFallback:t}={}){return yC(n.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let a=[s.module];return s.clientActionModule&&(a=a.concat(s.clientActionModule)),s.clientLoaderModule&&(a=a.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(a=a.concat(s.hydrateFallbackModule)),s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function yC(n){return[...new Set(n)]}function vC(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function xC(n,e){let t=new Set;return new Set(e),n.reduce((r,s)=>{let a=JSON.stringify(vC(s));return t.has(a)||(t.add(a),r.push({key:a,link:s})),r},[])}function Zw(){let n=N.useContext(Qa);return Rg(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function _C(){let n=N.useContext(Fh);return Rg(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Pg=N.createContext(void 0);Pg.displayName="FrameworkContext";function eE(){let n=N.useContext(Pg);return Rg(n,"You must render this element inside a <HydratedRouter> element"),n}function wC(n,e){let t=N.useContext(Pg),[r,s]=N.useState(!1),[a,l]=N.useState(!1),{onFocus:f,onBlur:d,onMouseEnter:m,onMouseLeave:g,onTouchStart:v}=e,w=N.useRef(null);N.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let I=O=>{O.forEach(B=>{l(B.isIntersecting)})},C=new IntersectionObserver(I,{threshold:.5});return w.current&&C.observe(w.current),()=>{C.disconnect()}}},[n]),N.useEffect(()=>{if(r){let I=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(I)}}},[r]);let k=()=>{s(!0)},T=()=>{s(!1),l(!1)};return t?n!=="intent"?[a,w,{}]:[a,w,{onFocus:ac(f,k),onBlur:ac(d,T),onMouseEnter:ac(m,k),onMouseLeave:ac(g,T),onTouchStart:ac(v,k)}]:[!1,w,{}]}function ac(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function EC({page:n,...e}){let{router:t}=Zw(),r=N.useMemo(()=>Ow(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?N.createElement(kC,{page:n,matches:r,...e}):null}function TC(n){let{manifest:e,routeModules:t}=eE(),[r,s]=N.useState([]);return N.useEffect(()=>{let a=!1;return mC(n,e,t).then(l=>{a||s(l)}),()=>{a=!0}},[n,e,t]),r}function kC({page:n,matches:e,...t}){let r=Yn(),{future:s,manifest:a,routeModules:l}=eE(),{basename:f}=Zw(),{loaderData:d,matches:m}=_C(),g=N.useMemo(()=>V1(n,e,m,a,r,"data"),[n,e,m,a,r]),v=N.useMemo(()=>V1(n,e,m,a,r,"assets"),[n,e,m,a,r]),w=N.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let I=new Set,C=!1;if(e.forEach(B=>{var Q;let j=a.routes[B.route.id];!j||!j.hasLoader||(!g.some(W=>W.route.id===B.route.id)&&B.route.id in d&&((Q=l[B.route.id])!=null&&Q.shouldRevalidate)||j.hasClientLoader?C=!0:I.add(B.route.id))}),I.size===0)return[];let O=hC(n,f,s.unstable_trailingSlashAwareDataRequests,"data");return C&&I.size>0&&O.searchParams.set("_routes",e.filter(B=>I.has(B.route.id)).map(B=>B.route.id).join(",")),[O.pathname+O.search]},[f,s.unstable_trailingSlashAwareDataRequests,d,r,a,g,e,n,l]),k=N.useMemo(()=>gC(v,a),[v,a]),T=TC(v);return N.createElement(N.Fragment,null,w.map(I=>N.createElement("link",{key:I,rel:"prefetch",as:"fetch",href:I,...t})),k.map(I=>N.createElement("link",{key:I,rel:"modulepreload",href:I,...t})),T.map(({key:I,link:C})=>N.createElement("link",{key:I,nonce:t.nonce,...C})))}function SC(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var bC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{bC&&(window.__reactRouterVersion="7.12.0")}catch{}function IC({basename:n,children:e,unstable_useTransitions:t,window:r}){let s=N.useRef();s.current==null&&(s.current=o2({window:r,v5Compat:!0}));let a=s.current,[l,f]=N.useState({action:a.action,location:a.location}),d=N.useCallback(m=>{t===!1?f(m):N.startTransition(()=>f(m))},[t]);return N.useLayoutEffect(()=>a.listen(d),[a,d]),N.createElement(nC,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:a,unstable_useTransitions:t})}var tE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,me=N.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:a,replace:l,state:f,target:d,to:m,preventScrollReset:g,viewTransition:v,unstable_defaultShouldRevalidate:w,...k},T){let{basename:I,unstable_useTransitions:C}=N.useContext(Mn),O=typeof m=="string"&&tE.test(m),B=$w(m,I);m=B.to;let j=B2(m,{relative:s}),[Q,W,H]=wC(r,k),A=PC(m,{replace:l,state:f,target:d,preventScrollReset:g,relative:s,viewTransition:v,unstable_defaultShouldRevalidate:w,unstable_useTransitions:C});function b(M){e&&e(M),M.defaultPrevented||A(M)}let P=N.createElement("a",{...k,...H,href:B.absoluteURL||j,onClick:B.isExternal||a?e:b,ref:SC(T,W),target:d,"data-discover":!O&&t==="render"?"true":void 0});return Q&&!O?N.createElement(N.Fragment,null,P,N.createElement(EC,{page:j})):P});me.displayName="Link";var CC=N.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:a,to:l,viewTransition:f,children:d,...m},g){let v=Jc(l,{relative:m.relative}),w=Yn(),k=N.useContext(Fh),{navigator:T,basename:I}=N.useContext(Mn),C=k!=null&&MC(v)&&f===!0,O=T.encodeLocation?T.encodeLocation(v).pathname:v.pathname,B=w.pathname,j=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;t||(B=B.toLowerCase(),j=j?j.toLowerCase():null,O=O.toLowerCase()),j&&I&&(j=_i(j,I)||j);const Q=O!=="/"&&O.endsWith("/")?O.length-1:O.length;let W=B===O||!s&&B.startsWith(O)&&B.charAt(Q)==="/",H=j!=null&&(j===O||!s&&j.startsWith(O)&&j.charAt(O.length)==="/"),A={isActive:W,isPending:H,isTransitioning:C},b=W?e:void 0,P;typeof r=="function"?P=r(A):P=[r,W?"active":null,H?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let M=typeof a=="function"?a(A):a;return N.createElement(me,{...m,"aria-current":b,className:P,ref:g,style:M,to:l,viewTransition:f},typeof d=="function"?d(A):d)});CC.displayName="NavLink";var AC=N.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:a,method:l=Kd,action:f,onSubmit:d,relative:m,preventScrollReset:g,viewTransition:v,unstable_defaultShouldRevalidate:w,...k},T)=>{let{unstable_useTransitions:I}=N.useContext(Mn),C=DC(),O=VC(f,{relative:m}),B=l.toLowerCase()==="get"?"get":"post",j=typeof f=="string"&&tE.test(f),Q=W=>{if(d&&d(W),W.defaultPrevented)return;W.preventDefault();let H=W.nativeEvent.submitter,A=(H==null?void 0:H.getAttribute("formmethod"))||l,b=()=>C(H||W.currentTarget,{fetcherKey:e,method:A,navigate:t,replace:s,state:a,relative:m,preventScrollReset:g,viewTransition:v,unstable_defaultShouldRevalidate:w});I&&t!==!1?N.startTransition(()=>b()):b()};return N.createElement("form",{ref:T,method:B,action:O,onSubmit:r?d:Q,...k,"data-discover":!j&&n==="render"?"true":void 0})});AC.displayName="Form";function RC(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function nE(n){let e=N.useContext(Qa);return at(e,RC(n)),e}function PC(n,{target:e,replace:t,state:r,preventScrollReset:s,relative:a,viewTransition:l,unstable_defaultShouldRevalidate:f,unstable_useTransitions:d}={}){let m=Xc(),g=Yn(),v=Jc(n,{relative:a});return N.useCallback(w=>{if(lC(w,e)){w.preventDefault();let k=t!==void 0?t:Ac(g)===Ac(v),T=()=>m(n,{replace:k,state:r,preventScrollReset:s,relative:a,viewTransition:l,unstable_defaultShouldRevalidate:f});d?N.startTransition(()=>T()):T()}},[g,m,v,t,r,e,n,s,a,l,f,d])}var jC=0,NC=()=>`__${String(++jC)}__`;function DC(){let{router:n}=nE("useSubmit"),{basename:e}=N.useContext(Mn),t=X2(),r=n.fetch,s=n.navigate;return N.useCallback(async(a,l={})=>{let{action:f,method:d,encType:m,formData:g,body:v}=dC(a,e);if(l.navigate===!1){let w=l.fetcherKey||NC();await r(w,t,l.action||f,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:g,body:v,formMethod:l.method||d,formEncType:l.encType||m,flushSync:l.flushSync})}else await s(l.action||f,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:g,body:v,formMethod:l.method||d,formEncType:l.encType||m,replace:l.replace,state:l.state,fromRouteId:t,flushSync:l.flushSync,viewTransition:l.viewTransition})},[r,s,e,t])}function VC(n,{relative:e}={}){let{basename:t}=N.useContext(Mn),r=N.useContext(vr);at(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),a={...Jc(n||".",{relative:e})},l=Yn();if(n==null){a.search=l.search;let f=new URLSearchParams(a.search),d=f.getAll("index");if(d.some(g=>g==="")){f.delete("index"),d.filter(v=>v).forEach(v=>f.append("index",v));let g=f.toString();a.search=g?`?${g}`:""}}return(!n||n===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:gi([t,a.pathname])),Ac(a)}function MC(n,{relative:e}={}){let t=N.useContext(Hw);at(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=nE("useViewTransitionState"),s=Jc(n,{relative:e});if(!t.isTransitioning)return!1;let a=_i(t.currentLocation.pathname,r)||t.currentLocation.pathname,l=_i(t.nextLocation.pathname,r)||t.nextLocation.pathname;return ch(s.pathname,l)!=null||ch(s.pathname,a)!=null}const LC=()=>{};var M1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},OC=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=n[t++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=n[t++],l=n[t++],f=n[t++],d=((s&7)<<18|(a&63)<<12|(l&63)<<6|f&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const a=n[t++],l=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|l&63)}}return e.join("")},iE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const a=n[s],l=s+1<n.length,f=l?n[s+1]:0,d=s+2<n.length,m=d?n[s+2]:0,g=a>>2,v=(a&3)<<4|f>>4;let w=(f&15)<<2|m>>6,k=m&63;d||(k=64,l||(w=64)),r.push(t[g],t[v],t[w],t[k])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(rE(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):OC(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const a=t[n.charAt(s++)],f=s<n.length?t[n.charAt(s)]:0;++s;const m=s<n.length?t[n.charAt(s)]:64;++s;const v=s<n.length?t[n.charAt(s)]:64;if(++s,a==null||f==null||m==null||v==null)throw new FC;const w=a<<2|f>>4;if(r.push(w),m!==64){const k=f<<4&240|m>>2;if(r.push(k),v!==64){const T=m<<6&192|v;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class FC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const BC=function(n){const e=rE(n);return iE.encodeByteArray(e,!0)},uh=function(n){return BC(n).replace(/\./g,"")},sE=function(n){try{return iE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC=()=>zC().__FIREBASE_DEFAULTS__,$C=()=>{if(typeof process>"u"||typeof M1>"u")return;const n=M1.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},WC=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&sE(n[1]);return e&&JSON.parse(e)},zh=()=>{try{return LC()||UC()||$C()||WC()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},oE=n=>{var e,t;return(t=(e=zh())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},HC=n=>{const e=oE(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},aE=()=>{var n;return(n=zh())==null?void 0:n.config},lE=n=>{var e;return(e=zh())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xa(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function cE(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qC(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[uh(JSON.stringify(t)),uh(JSON.stringify(l)),""].join(".")}const vc={};function GC(){const n={prod:[],emulator:[]};for(const e of Object.keys(vc))vc[e]?n.emulator.push(e):n.prod.push(e);return n}function QC(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let L1=!1;function uE(n,e){if(typeof window>"u"||typeof document>"u"||!Xa(window.location.host)||vc[n]===e||vc[n]||L1)return;vc[n]=e;function t(w){return`__firebase__banner__${w}`}const r="__firebase__banner",a=GC().prod.length>0;function l(){const w=document.getElementById(r);w&&w.remove()}function f(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function d(w,k){w.setAttribute("width","24"),w.setAttribute("id",k),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function m(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{L1=!0,l()},w}function g(w,k){w.setAttribute("id",k),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function v(){const w=QC(r),k=t("text"),T=document.getElementById(k)||document.createElement("span"),I=t("learnmore"),C=document.getElementById(I)||document.createElement("a"),O=t("preprendIcon"),B=document.getElementById(O)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const j=w.element;f(j),g(C,I);const Q=m();d(B,O),j.append(B,T,C,Q),document.body.appendChild(j)}a?(T.innerText="Preview backend disconnected.",B.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(B.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function YC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(an())}function XC(){var e;const n=(e=zh())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function JC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ZC(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function eA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function tA(){const n=an();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function nA(){return!XC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rA(){try{return typeof indexedDB=="object"}catch{return!1}}function iA(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var a;e(((a=s.error)==null?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA="FirebaseError";class Ii extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=sA,Object.setPrototypeOf(this,Ii.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zc.prototype.create)}}class Zc{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],l=a?oA(a,r):"Error",f=`${this.serviceName}: ${l} (${s}).`;return new Ii(s,f,r)}}function oA(n,e){return n.replace(aA,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const aA=/\{\$([^}]+)}/g;function lA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function xs(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const a=n[s],l=e[s];if(O1(a)&&O1(l)){if(!xs(a,l))return!1}else if(a!==l)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function O1(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eu(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function uc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,a]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function dc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function cA(n,e){const t=new uA(n,e);return t.subscribe.bind(t)}class uA{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");dA(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=Hp),s.error===void 0&&(s.error=Hp),s.complete===void 0&&(s.complete=Hp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function dA(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Hp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(n){return n&&n._delegate?n._delegate:n}class Eo{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new KC;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(pA(e))try{this.getOrInitializeService({instanceIdentifier:fo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=fo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=fo){return this.instances.has(e)}getOptions(e=fo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,l]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(a);r===f&&l.resolve(s)}return s}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const a=this.instances.get(r);return a&&e(a,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:fA(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=fo){return this.component?this.component.multipleInstances?e:fo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function fA(n){return n===fo?void 0:n}function pA(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new hA(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Le||(Le={}));const gA={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},yA=Le.INFO,vA={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},xA=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=vA[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class jg{constructor(e){this.name=e,this._logLevel=yA,this._logHandler=xA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?gA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const _A=(n,e)=>e.some(t=>n instanceof t);let F1,B1;function wA(){return F1||(F1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function EA(){return B1||(B1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const dE=new WeakMap,bm=new WeakMap,hE=new WeakMap,Kp=new WeakMap,Ng=new WeakMap;function TA(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",a),n.removeEventListener("error",l)},a=()=>{t(fs(n.result)),s()},l=()=>{r(n.error),s()};n.addEventListener("success",a),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&dE.set(t,n)}).catch(()=>{}),Ng.set(e,n),e}function kA(n){if(bm.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",l),n.removeEventListener("abort",l)},a=()=>{t(),s()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",a),n.addEventListener("error",l),n.addEventListener("abort",l)});bm.set(n,e)}let Im={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return bm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||hE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return fs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function SA(n){Im=n(Im)}function bA(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(qp(this),e,...t);return hE.set(r,e.sort?e.sort():[e]),fs(r)}:EA().includes(n)?function(...e){return n.apply(qp(this),e),fs(dE.get(this))}:function(...e){return fs(n.apply(qp(this),e))}}function IA(n){return typeof n=="function"?bA(n):(n instanceof IDBTransaction&&kA(n),_A(n,wA())?new Proxy(n,Im):n)}function fs(n){if(n instanceof IDBRequest)return TA(n);if(Kp.has(n))return Kp.get(n);const e=IA(n);return e!==n&&(Kp.set(n,e),Ng.set(e,n)),e}const qp=n=>Ng.get(n);function CA(n,e,{blocked:t,upgrade:r,blocking:s,terminated:a}={}){const l=indexedDB.open(n,e),f=fs(l);return r&&l.addEventListener("upgradeneeded",d=>{r(fs(l.result),d.oldVersion,d.newVersion,fs(l.transaction),d)}),t&&l.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),f.then(d=>{a&&d.addEventListener("close",()=>a()),s&&d.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),f}const AA=["get","getKey","getAll","getAllKeys","count"],RA=["put","add","delete","clear"],Gp=new Map;function z1(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Gp.get(e))return Gp.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=RA.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||AA.includes(t)))return;const a=async function(l,...f){const d=this.transaction(l,s?"readwrite":"readonly");let m=d.store;return r&&(m=m.index(f.shift())),(await Promise.all([m[t](...f),s&&d.done]))[0]};return Gp.set(e,a),a}SA(n=>({...n,get:(e,t,r)=>z1(e,t)||n.get(e,t,r),has:(e,t)=>!!z1(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(jA(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function jA(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Cm="@firebase/app",U1="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi=new jg("@firebase/app"),NA="@firebase/app-compat",DA="@firebase/analytics-compat",VA="@firebase/analytics",MA="@firebase/app-check-compat",LA="@firebase/app-check",OA="@firebase/auth",FA="@firebase/auth-compat",BA="@firebase/database",zA="@firebase/data-connect",UA="@firebase/database-compat",$A="@firebase/functions",WA="@firebase/functions-compat",HA="@firebase/installations",KA="@firebase/installations-compat",qA="@firebase/messaging",GA="@firebase/messaging-compat",QA="@firebase/performance",YA="@firebase/performance-compat",XA="@firebase/remote-config",JA="@firebase/remote-config-compat",ZA="@firebase/storage",eR="@firebase/storage-compat",tR="@firebase/firestore",nR="@firebase/ai",rR="@firebase/firestore-compat",iR="firebase",sR="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Am="[DEFAULT]",oR={[Cm]:"fire-core",[NA]:"fire-core-compat",[VA]:"fire-analytics",[DA]:"fire-analytics-compat",[LA]:"fire-app-check",[MA]:"fire-app-check-compat",[OA]:"fire-auth",[FA]:"fire-auth-compat",[BA]:"fire-rtdb",[zA]:"fire-data-connect",[UA]:"fire-rtdb-compat",[$A]:"fire-fn",[WA]:"fire-fn-compat",[HA]:"fire-iid",[KA]:"fire-iid-compat",[qA]:"fire-fcm",[GA]:"fire-fcm-compat",[QA]:"fire-perf",[YA]:"fire-perf-compat",[XA]:"fire-rc",[JA]:"fire-rc-compat",[ZA]:"fire-gcs",[eR]:"fire-gcs-compat",[tR]:"fire-fst",[rR]:"fire-fst-compat",[nR]:"fire-vertex","fire-js":"fire-js",[iR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dh=new Map,aR=new Map,Rm=new Map;function $1(n,e){try{n.container.addComponent(e)}catch(t){wi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Oa(n){const e=n.name;if(Rm.has(e))return wi.debug(`There were multiple attempts to register component ${e}.`),!1;Rm.set(e,n);for(const t of dh.values())$1(t,n);for(const t of aR.values())$1(t,n);return!0}function Dg(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function jn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ps=new Zc("app","Firebase",lR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Eo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ps.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ja=sR;function fE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:Am,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw ps.create("bad-app-name",{appName:String(s)});if(t||(t=aE()),!t)throw ps.create("no-options");const a=dh.get(s);if(a){if(xs(t,a.options)&&xs(r,a.config))return a;throw ps.create("duplicate-app",{appName:s})}const l=new mA(s);for(const d of Rm.values())l.addComponent(d);const f=new cR(t,r,l);return dh.set(s,f),f}function pE(n=Am){const e=dh.get(n);if(!e&&n===Am&&aE())return fE();if(!e)throw ps.create("no-app",{appName:n});return e}function ms(n,e,t){let r=oR[n]??n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const l=[`Unable to register library "${r}" with version "${e}":`];s&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wi.warn(l.join(" "));return}Oa(new Eo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR="firebase-heartbeat-database",dR=1,Rc="firebase-heartbeat-store";let Qp=null;function mE(){return Qp||(Qp=CA(uR,dR,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Rc)}catch(t){console.warn(t)}}}}).catch(n=>{throw ps.create("idb-open",{originalErrorMessage:n.message})})),Qp}async function hR(n){try{const t=(await mE()).transaction(Rc),r=await t.objectStore(Rc).get(gE(n));return await t.done,r}catch(e){if(e instanceof Ii)wi.warn(e.message);else{const t=ps.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});wi.warn(t.message)}}}async function W1(n,e){try{const r=(await mE()).transaction(Rc,"readwrite");await r.objectStore(Rc).put(e,gE(n)),await r.done}catch(t){if(t instanceof Ii)wi.warn(t.message);else{const r=ps.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});wi.warn(r.message)}}}function gE(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR=1024,pR=30;class mR{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new yR(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=H1();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>pR){const l=vR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){wi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=H1(),{heartbeatsToSend:r,unsentEntries:s}=gR(this._heartbeatsCache.heartbeats),a=uh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return wi.warn(t),""}}}function H1(){return new Date().toISOString().substring(0,10)}function gR(n,e=fR){const t=[];let r=n.slice();for(const s of n){const a=t.find(l=>l.agent===s.agent);if(a){if(a.dates.push(s.date),K1(t)>e){a.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),K1(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class yR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rA()?iA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await hR(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return W1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return W1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function K1(n){return uh(JSON.stringify({version:2,heartbeats:n})).length}function vR(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xR(n){Oa(new Eo("platform-logger",e=>new PA(e),"PRIVATE")),Oa(new Eo("heartbeat",e=>new mR(e),"PRIVATE")),ms(Cm,U1,n),ms(Cm,U1,"esm2020"),ms("fire-js","")}xR("");function yE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _R=yE,vE=new Zc("auth","Firebase",yE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh=new jg("@firebase/auth");function wR(n,...e){hh.logLevel<=Le.WARN&&hh.warn(`Auth (${Ja}): ${n}`,...e)}function Gd(n,...e){hh.logLevel<=Le.ERROR&&hh.error(`Auth (${Ja}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(n,...e){throw Mg(n,...e)}function dr(n,...e){return Mg(n,...e)}function Vg(n,e,t){const r={..._R(),[e]:t};return new Zc("auth","Firebase",r).create(e,{appName:n.name})}function yi(n){return Vg(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ER(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Qn(n,"argument-error"),Vg(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Mg(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return vE.create(n,...e)}function Te(n,e,...t){if(!n)throw Mg(e,...t)}function pi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Gd(e),new Error(e)}function Ei(n,e){n||pi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pm(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function TR(){return q1()==="http:"||q1()==="https:"}function q1(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(TR()||ZC()||"connection"in navigator)?navigator.onLine:!0}function SR(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ei(t>e,"Short delay should be less than long delay!"),this.isMobile=YC()||eA()}get(){return kR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lg(n,e){Ei(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;pi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;pi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;pi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],CR=new tu(3e4,6e4);function Ps(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Ci(n,e,t,r,s={}){return _E(n,s,async()=>{let a={},l={};r&&(e==="GET"?l=r:a={body:JSON.stringify(r)});const f=eu({key:n.config.apiKey,...l}).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const m={method:e,headers:d,...a};return JC()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&Xa(n.emulatorConfig.host)&&(m.credentials="include"),xE.fetch()(await wE(n,n.config.apiHost,t,f),m)})}async function _E(n,e,t){n._canInitEmulator=!1;const r={...bR,...e};try{const s=new RR(n),a=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw Ld(n,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const f=a.ok?l.errorMessage:l.error.message,[d,m]=f.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ld(n,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw Ld(n,"email-already-in-use",l);if(d==="USER_DISABLED")throw Ld(n,"user-disabled",l);const g=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw Vg(n,g,m);Qn(n,g)}}catch(s){if(s instanceof Ii)throw s;Qn(n,"network-request-failed",{message:String(s)})}}async function nu(n,e,t,r,s={}){const a=await Ci(n,e,t,r,s);return"mfaPendingCredential"in a&&Qn(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function wE(n,e,t,r){const s=`${e}${t}?${r}`,a=n,l=a.config.emulator?Lg(n.config,s):`${n.config.apiScheme}://${s}`;return IR.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}function AR(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class RR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(dr(this.auth,"network-request-failed")),CR.get())})}}function Ld(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=dr(n,e,r);return s.customData._tokenResponse=t,s}function G1(n){return n!==void 0&&n.enterprise!==void 0}class PR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return AR(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function jR(n,e){return Ci(n,"GET","/v2/recaptchaConfig",Ps(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NR(n,e){return Ci(n,"POST","/v1/accounts:delete",e)}async function fh(n,e){return Ci(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function DR(n,e=!1){const t=Mt(n),r=await t.getIdToken(e),s=Og(r);Te(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,l=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:xc(Yp(s.auth_time)),issuedAtTime:xc(Yp(s.iat)),expirationTime:xc(Yp(s.exp)),signInProvider:l||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Yp(n){return Number(n)*1e3}function Og(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Gd("JWT malformed, contained fewer than 3 sections"),null;try{const s=sE(t);return s?JSON.parse(s):(Gd("Failed to decode base64 JWT payload"),null)}catch(s){return Gd("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Q1(n){const e=Og(n);return Te(e,"internal-error"),Te(typeof e.exp<"u","internal-error"),Te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fa(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Ii&&VR(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function VR({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=xc(this.lastLoginAt),this.creationTime=xc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ph(n){var v;const e=n.auth,t=await n.getIdToken(),r=await Fa(n,fh(e,{idToken:t}));Te(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const a=(v=s.providerUserInfo)!=null&&v.length?EE(s.providerUserInfo):[],l=OR(n.providerData,a),f=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!(l!=null&&l.length),m=f?d:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new jm(s.createdAt,s.lastLoginAt),isAnonymous:m};Object.assign(n,g)}async function LR(n){const e=Mt(n);await ph(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function OR(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function EE(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FR(n,e){const t=await _E(n,{},async()=>{const r=eu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=n.config,l=await wE(n,s,"/v1/token",`key=${a}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:f,body:r};return n.emulatorConfig&&Xa(n.emulatorConfig.host)&&(d.credentials="include"),xE.fetch()(l,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function BR(n,e){return Ci(n,"POST","/v2/accounts:revokeToken",Ps(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Te(e.idToken,"internal-error"),Te(typeof e.idToken<"u","internal-error"),Te(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Q1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Te(e.length!==0,"internal-error");const t=Q1(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:a}=await FR(e,t);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:a}=t,l=new Pa;return r&&(Te(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),s&&(Te(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),a&&(Te(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Pa,this.toJSON())}_performRefresh(){return pi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ss(n,e){Te(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ur{constructor({uid:e,auth:t,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new MR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new jm(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Fa(this,this.stsTokenManager.getToken(this.auth,e));return Te(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return DR(this,e)}reload(){return LR(this)}_assign(e){this!==e&&(Te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ur({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await ph(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jn(this.auth.app))return Promise.reject(yi(this.auth));const e=await this.getIdToken();return await Fa(this,NR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,s=t.email??void 0,a=t.phoneNumber??void 0,l=t.photoURL??void 0,f=t.tenantId??void 0,d=t._redirectEventId??void 0,m=t.createdAt??void 0,g=t.lastLoginAt??void 0,{uid:v,emailVerified:w,isAnonymous:k,providerData:T,stsTokenManager:I}=t;Te(v&&I,e,"internal-error");const C=Pa.fromJSON(this.name,I);Te(typeof v=="string",e,"internal-error"),ss(r,e.name),ss(s,e.name),Te(typeof w=="boolean",e,"internal-error"),Te(typeof k=="boolean",e,"internal-error"),ss(a,e.name),ss(l,e.name),ss(f,e.name),ss(d,e.name),ss(m,e.name),ss(g,e.name);const O=new ur({uid:v,auth:e,email:s,emailVerified:w,displayName:r,isAnonymous:k,photoURL:l,phoneNumber:a,tenantId:f,stsTokenManager:C,createdAt:m,lastLoginAt:g});return T&&Array.isArray(T)&&(O.providerData=T.map(B=>({...B}))),d&&(O._redirectEventId=d),O}static async _fromIdTokenResponse(e,t,r=!1){const s=new Pa;s.updateFromServerResponse(t);const a=new ur({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await ph(a),a}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];Te(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?EE(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),f=new Pa;f.updateFromIdToken(r);const d=new ur({uid:s.localId,auth:e,stsTokenManager:f,isAnonymous:l}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new jm(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(d,m),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1=new Map;function mi(n){Ei(n instanceof Function,"Expected a class definition");let e=Y1.get(n);return e?(Ei(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Y1.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}TE.type="NONE";const X1=TE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qd(n,e,t){return`firebase:${n}:${e}:${t}`}class ja{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=Qd(this.userKey,s.apiKey,a),this.fullPersistenceKey=Qd("persistence",s.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await fh(this.auth,{idToken:e}).catch(()=>{});return t?ur._fromGetAccountInfoResponse(this.auth,t,e):null}return ur._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new ja(mi(X1),e,r);const s=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=s[0]||mi(X1);const l=Qd(r,e.config.apiKey,e.name);let f=null;for(const m of t)try{const g=await m._get(l);if(g){let v;if(typeof g=="string"){const w=await fh(e,{idToken:g}).catch(()=>{});if(!w)break;v=await ur._fromGetAccountInfoResponse(e,w,g)}else v=ur._fromJSON(e,g);m!==a&&(f=v),a=m;break}}catch{}const d=s.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!d.length?new ja(a,e,r):(a=d[0],f&&await a._set(l,f.toJSON()),await Promise.all(t.map(async m=>{if(m!==a)try{await m._remove(l)}catch{}})),new ja(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J1(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(IE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(kE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(AE(e))return"Blackberry";if(RE(e))return"Webos";if(SE(e))return"Safari";if((e.includes("chrome/")||bE(e))&&!e.includes("edge/"))return"Chrome";if(CE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function kE(n=an()){return/firefox\//i.test(n)}function SE(n=an()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function bE(n=an()){return/crios\//i.test(n)}function IE(n=an()){return/iemobile/i.test(n)}function CE(n=an()){return/android/i.test(n)}function AE(n=an()){return/blackberry/i.test(n)}function RE(n=an()){return/webos/i.test(n)}function Fg(n=an()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function zR(n=an()){var e;return Fg(n)&&!!((e=window.navigator)!=null&&e.standalone)}function UR(){return tA()&&document.documentMode===10}function PE(n=an()){return Fg(n)||CE(n)||RE(n)||AE(n)||/windows phone/i.test(n)||IE(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jE(n,e=[]){let t;switch(n){case"Browser":t=J1(an());break;case"Worker":t=`${J1(an())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ja}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((l,f)=>{try{const d=e(a);l(d)}catch(d){f(d)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WR(n,e={}){return Ci(n,"GET","/v2/passwordPolicy",Ps(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR=6;class KR{constructor(e){var r;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??HR,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Z1(this),this.idTokenSubscription=new Z1(this),this.beforeStateQueue=new $R(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=mi(t)),this._initializationPromise=this.queue(async()=>{var r,s,a;if(!this._deleted&&(this.persistenceManager=await ja.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await fh(this,{idToken:e}),r=await ur._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(jn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(a=this.redirectUser)==null?void 0:a._redirectEventId,f=r==null?void 0:r._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===f)&&(d!=null&&d.user)&&(r=d.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ph(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=SR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(jn(this.app))return Promise.reject(yi(this));const t=e?Mt(e):null;return t&&Te(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return jn(this.app)?Promise.reject(yi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return jn(this.app)?Promise.reject(yi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(mi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await WR(this),t=new KR(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Zc("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await BR(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&mi(e)||this._popupRedirectResolver;Te(t,this,"argument-error"),this.redirectPersistenceManager=await ja.create(this,[mi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let l=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Te(f,this,"internal-error"),f.then(()=>{l||a(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,r,s);return()=>{l=!0,d()}}else{const d=e.addObserver(t);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=jE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(jn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&wR(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function js(n){return Mt(n)}class Z1{constructor(e){this.auth=e,this.observer=null,this.addObserver=cA(t=>this.observer=t)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function GR(n){Uh=n}function NE(n){return Uh.loadJS(n)}function QR(){return Uh.recaptchaEnterpriseScript}function YR(){return Uh.gapiScript}function XR(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class JR{constructor(){this.enterprise=new ZR}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class ZR{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const eP="recaptcha-enterprise",DE="NO_RECAPTCHA";class tP{constructor(e){this.type=eP,this.auth=js(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,f)=>{jR(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const m=new PR(d);return a.tenantId==null?a._agentRecaptchaConfig=m:a._tenantRecaptchaConfigs[a.tenantId]=m,l(m.siteKey)}}).catch(d=>{f(d)})})}function s(a,l,f){const d=window.grecaptcha;G1(d)?d.enterprise.ready(()=>{d.enterprise.execute(a,{action:e}).then(m=>{l(m)}).catch(()=>{l(DE)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new JR().execute("siteKey",{action:"verify"}):new Promise((a,l)=>{r(this.auth).then(f=>{if(!t&&G1(window.grecaptcha))s(f,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=QR();d.length!==0&&(d+=f),NE(d).then(()=>{s(f,a,l)}).catch(m=>{l(m)})}}).catch(f=>{l(f)})})}}async function ex(n,e,t,r=!1,s=!1){const a=new tP(n);let l;if(s)l=DE;else try{l=await a.verify(t)}catch{l=await a.verify(t,!0)}const f={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const d=f.phoneEnrollmentInfo.phoneNumber,m=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:m,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const d=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return r?Object.assign(f,{captchaResp:l}):Object.assign(f,{captchaResponse:l}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function Nm(n,e,t,r,s){var a;if((a=n._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await ex(n,e,t,t==="getOobCode");return r(n,l)}else return r(n,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await ex(n,e,t,t==="getOobCode");return r(n,f)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nP(n,e){const t=Dg(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),a=t.getOptions();if(xs(a,e??{}))return s;Qn(s,"already-initialized")}return t.initialize({options:e})}function rP(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(mi);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function iP(n,e,t){const r=js(n);Te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=VE(e),{host:l,port:f}=sP(e),d=f===null?"":`:${f}`,m={url:`${a}//${l}${d}/`},g=Object.freeze({host:l,port:f,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Te(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Te(xs(m,r.config.emulator)&&xs(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=m,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,Xa(l)?(cE(`${a}//${l}${d}`),uE("Auth",!0)):oP()}function VE(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function sP(n){const e=VE(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:tx(r.substr(a.length+1))}}else{const[a,l]=r.split(":");return{host:a,port:tx(l)}}}function tx(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function oP(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return pi("not implemented")}_getIdTokenResponse(e){return pi("not implemented")}_linkToIdToken(e,t){return pi("not implemented")}_getReauthenticationResolver(e){return pi("not implemented")}}async function aP(n,e){return Ci(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lP(n,e){return nu(n,"POST","/v1/accounts:signInWithPassword",Ps(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cP(n,e){return nu(n,"POST","/v1/accounts:signInWithEmailLink",Ps(n,e))}async function uP(n,e){return nu(n,"POST","/v1/accounts:signInWithEmailLink",Ps(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc extends Bg{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Pc(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Pc(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Nm(e,t,"signInWithPassword",lP);case"emailLink":return cP(e,{email:this._email,oobCode:this._password});default:Qn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Nm(e,r,"signUpPassword",aP);case"emailLink":return uP(e,{idToken:t,email:this._email,oobCode:this._password});default:Qn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Na(n,e){return nu(n,"POST","/v1/accounts:signInWithIdp",Ps(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP="http://localhost";class To extends Bg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new To(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Qn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...a}=t;if(!r||!s)return null;const l=new To(r,s);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return Na(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Na(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Na(e,t)}buildRequest(){const e={requestUri:dP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=eu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hP(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function fP(n){const e=uc(dc(n)).link,t=e?uc(dc(e)).deep_link_id:null,r=uc(dc(n)).deep_link_id;return(r?uc(dc(r)).link:null)||r||t||e||n}class zg{constructor(e){const t=uc(dc(e)),r=t.apiKey??null,s=t.oobCode??null,a=hP(t.mode??null);Te(r&&s&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=fP(e);try{return new zg(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(){this.providerId=Za.PROVIDER_ID}static credential(e,t){return Pc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=zg.parseLink(t);return Te(r,"argument-error"),Pc._fromEmailAndCode(e,r.code,r.tenantId)}}Za.PROVIDER_ID="password";Za.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Za.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru extends Ug{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls extends ru{constructor(){super("facebook.com")}static credential(e){return To._fromParams({providerId:ls.PROVIDER_ID,signInMethod:ls.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ls.credentialFromTaggedObject(e)}static credentialFromError(e){return ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ls.credential(e.oauthAccessToken)}catch{return null}}}ls.FACEBOOK_SIGN_IN_METHOD="facebook.com";ls.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi extends ru{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return To._fromParams({providerId:fi.PROVIDER_ID,signInMethod:fi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return fi.credentialFromTaggedObject(e)}static credentialFromError(e){return fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return fi.credential(t,r)}catch{return null}}}fi.GOOGLE_SIGN_IN_METHOD="google.com";fi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends ru{constructor(){super("github.com")}static credential(e){return To._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cs.credential(e.oauthAccessToken)}catch{return null}}}cs.GITHUB_SIGN_IN_METHOD="github.com";cs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us extends ru{constructor(){super("twitter.com")}static credential(e,t){return To._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return us.credential(t,r)}catch{return null}}}us.TWITTER_SIGN_IN_METHOD="twitter.com";us.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pP(n,e){return nu(n,"POST","/v1/accounts:signUp",Ps(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const a=await ur._fromIdTokenResponse(e,r,s),l=nx(r);return new ko({user:a,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=nx(r);return new ko({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function nx(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh extends Ii{constructor(e,t,r,s){super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,mh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new mh(e,t,r,s)}}function ME(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?mh._fromErrorAndOperation(n,a,e,r):a})}async function mP(n,e,t=!1){const r=await Fa(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ko._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gP(n,e,t=!1){const{auth:r}=n;if(jn(r.app))return Promise.reject(yi(r));const s="reauthenticate";try{const a=await Fa(n,ME(r,s,e,n),t);Te(a.idToken,r,"internal-error");const l=Og(a.idToken);Te(l,r,"internal-error");const{sub:f}=l;return Te(n.uid===f,r,"user-mismatch"),ko._forOperation(n,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Qn(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LE(n,e,t=!1){if(jn(n.app))return Promise.reject(yi(n));const r="signIn",s=await ME(n,r,e),a=await ko._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(a.user),a}async function yP(n,e){return LE(js(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OE(n){const e=js(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function vP(n,e,t){if(jn(n.app))return Promise.reject(yi(n));const r=js(n),l=await Nm(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",pP).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&OE(n),d}),f=await ko._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(f.user),f}function xP(n,e,t){return jn(n.app)?Promise.reject(yi(n)):yP(Mt(n),Za.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&OE(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _P(n,e){return Ci(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wP(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Mt(n),a={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},l=await Fa(r,_P(r.auth,a));r.displayName=l.displayName||null,r.photoURL=l.photoUrl||null;const f=r.providerData.find(({providerId:d})=>d==="password");f&&(f.displayName=r.displayName,f.photoURL=r.photoURL),await r._updateTokensIfNecessary(l)}function EP(n,e,t,r){return Mt(n).onIdTokenChanged(e,t,r)}function TP(n,e,t){return Mt(n).beforeAuthStateChanged(e,t)}function kP(n,e,t,r){return Mt(n).onAuthStateChanged(e,t,r)}function SP(n){return Mt(n).signOut()}const gh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(gh,"1"),this.storage.removeItem(gh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bP=1e3,IP=10;class BE extends FE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=PE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,f,d)=>{this.notifyListeners(l,d)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},a=this.storage.getItem(r);UR()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,IP):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},bP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}BE.type="LOCAL";const CP=BE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE extends FE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}zE.type="SESSION";const UE=zE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AP(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new $h(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:a}=t.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const f=Array.from(l).map(async m=>m(t.origin,a)),d=await AP(f);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$h.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $g(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,l;return new Promise((f,d)=>{const m=$g("",20);s.port1.start();const g=setTimeout(()=>{d(new Error("unsupported_event"))},r);l={messageChannel:s,onMessage(v){const w=v;if(w.data.eventId===m)switch(w.data.status){case"ack":clearTimeout(g),a=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),f(w.data.response);break;default:clearTimeout(g),clearTimeout(a),d(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Or(){return window}function PP(n){Or().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $E(){return typeof Or().WorkerGlobalScope<"u"&&typeof Or().importScripts=="function"}async function jP(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function NP(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function DP(){return $E()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE="firebaseLocalStorageDb",VP=1,yh="firebaseLocalStorage",HE="fbase_key";class iu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Wh(n,e){return n.transaction([yh],e?"readwrite":"readonly").objectStore(yh)}function MP(){const n=indexedDB.deleteDatabase(WE);return new iu(n).toPromise()}function Dm(){const n=indexedDB.open(WE,VP);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(yh,{keyPath:HE})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(yh)?e(r):(r.close(),await MP(),e(await Dm()))})})}async function rx(n,e,t){const r=Wh(n,!0).put({[HE]:e,value:t});return new iu(r).toPromise()}async function LP(n,e){const t=Wh(n,!1).get(e),r=await new iu(t).toPromise();return r===void 0?null:r.value}function ix(n,e){const t=Wh(n,!0).delete(e);return new iu(t).toPromise()}const OP=800,FP=3;class KE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Dm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>FP)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $E()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$h._getInstance(DP()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await jP(),!this.activeServiceWorker)return;this.sender=new RP(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||NP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Dm();return await rx(e,gh,"1"),await ix(e,gh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>rx(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>LP(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ix(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=Wh(s,!1).getAll();return new iu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),OP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}KE.type="LOCAL";const BP=KE;new tu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qE(n,e){return e?mi(e):(Te(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg extends Bg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Na(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Na(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Na(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function zP(n){return LE(n.auth,new Wg(n),n.bypassAuthState)}function UP(n){const{auth:e,user:t}=n;return Te(t,e,"internal-error"),gP(t,new Wg(n),n.bypassAuthState)}async function $P(n){const{auth:e,user:t}=n;return Te(t,e,"internal-error"),mP(t,new Wg(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e,t,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:a,error:l,type:f}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(d))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zP;case"linkViaPopup":case"linkViaRedirect":return $P;case"reauthViaPopup":case"reauthViaRedirect":return UP;default:Qn(this.auth,"internal-error")}}resolve(e){Ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WP=new tu(2e3,1e4);async function HP(n,e,t){if(jn(n.app))return Promise.reject(dr(n,"operation-not-supported-in-this-environment"));const r=js(n);ER(n,e,Ug);const s=qE(r,t);return new mo(r,"signInViaPopup",e,s).executeNotNull()}class mo extends GE{constructor(e,t,r,s,a){super(e,t,s,a),this.provider=r,this.authWindow=null,this.pollId=null,mo.currentPopupAction&&mo.currentPopupAction.cancel(),mo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Te(e,this.auth,"internal-error"),e}async onExecution(){Ei(this.filter.length===1,"Popup operations only handle one event");const e=$g();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(dr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(dr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,mo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if((r=(t=this.authWindow)==null?void 0:t.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(dr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,WP.get())};e()}}mo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP="pendingRedirect",Yd=new Map;class qP extends GE{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Yd.get(this.auth._key());if(!e){try{const r=await GP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Yd.set(this.auth._key(),e)}return this.bypassAuthState||Yd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function GP(n,e){const t=XP(e),r=YP(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function QP(n,e){Yd.set(n._key(),e)}function YP(n){return mi(n._redirectPersistence)}function XP(n){return Qd(KP,n.config.apiKey,n.name)}async function JP(n,e,t=!1){if(jn(n.app))return Promise.reject(yi(n));const r=js(n),s=qE(r,e),l=await new qP(r,s,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP=600*1e3;class ej{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!tj(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!QE(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";t.onError(dr(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ZP&&this.cachedEventUids.clear(),this.cachedEventUids.has(sx(e))}saveEventToCache(e){this.cachedEventUids.add(sx(e)),this.lastProcessedEventTime=Date.now()}}function sx(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function QE({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function tj(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return QE(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nj(n,e={}){return Ci(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ij=/^https?/;async function sj(n){if(n.config.emulator)return;const{authorizedDomains:e}=await nj(n);for(const t of e)try{if(oj(t))return}catch{}Qn(n,"unauthorized-domain")}function oj(n){const e=Pm(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!ij.test(t))return!1;if(rj.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aj=new tu(3e4,6e4);function ox(){const n=Or().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function lj(n){return new Promise((e,t)=>{var s,a,l;function r(){ox(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ox(),t(dr(n,"network-request-failed"))},timeout:aj.get()})}if((a=(s=Or().gapi)==null?void 0:s.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((l=Or().gapi)!=null&&l.load)r();else{const f=XR("iframefcb");return Or()[f]=()=>{gapi.load?r():t(dr(n,"network-request-failed"))},NE(`${YR()}?onload=${f}`).catch(d=>t(d))}}).catch(e=>{throw Xd=null,e})}let Xd=null;function cj(n){return Xd=Xd||lj(n),Xd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uj=new tu(5e3,15e3),dj="__/auth/iframe",hj="emulator/auth/iframe",fj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mj(n){const e=n.config;Te(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Lg(e,hj):`https://${n.config.authDomain}/${dj}`,r={apiKey:e.apiKey,appName:n.name,v:Ja},s=pj.get(n.config.apiHost);s&&(r.eid=s);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${eu(r).slice(1)}`}async function gj(n){const e=await cj(n),t=Or().gapi;return Te(t,n,"internal-error"),e.open({where:document.body,url:mj(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fj,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const l=dr(n,"network-request-failed"),f=Or().setTimeout(()=>{a(l)},uj.get());function d(){Or().clearTimeout(f),s(r)}r.ping(d).then(d,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},vj=500,xj=600,_j="_blank",wj="http://localhost";class ax{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Ej(n,e,t,r=vj,s=xj){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let f="";const d={...yj,width:r.toString(),height:s.toString(),top:a,left:l},m=an().toLowerCase();t&&(f=bE(m)?_j:t),kE(m)&&(e=e||wj,d.scrollbars="yes");const g=Object.entries(d).reduce((w,[k,T])=>`${w}${k}=${T},`,"");if(zR(m)&&f!=="_self")return Tj(e||"",f),new ax(null);const v=window.open(e||"",f,g);Te(v,n,"popup-blocked");try{v.focus()}catch{}return new ax(v)}function Tj(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kj="__/auth/handler",Sj="emulator/auth/handler",bj=encodeURIComponent("fac");async function lx(n,e,t,r,s,a){Te(n.config.authDomain,n,"auth-domain-config-required"),Te(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ja,eventId:s};if(e instanceof Ug){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",lA(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,v]of Object.entries({}))l[g]=v}if(e instanceof ru){const g=e.getScopes().filter(v=>v!=="");g.length>0&&(l.scopes=g.join(","))}n.tenantId&&(l.tid=n.tenantId);const f=l;for(const g of Object.keys(f))f[g]===void 0&&delete f[g];const d=await n._getAppCheckToken(),m=d?`#${bj}=${encodeURIComponent(d)}`:"";return`${Ij(n)}?${eu(f).slice(1)}${m}`}function Ij({config:n}){return n.emulator?Lg(n,Sj):`https://${n.authDomain}/${kj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xp="webStorageSupport";class Cj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=UE,this._completeRedirectFn=JP,this._overrideRedirectResult=QP}async _openPopup(e,t,r,s){var l;Ei((l=this.eventManagers[e._key()])==null?void 0:l.manager,"_initialize() not called before _openPopup()");const a=await lx(e,t,r,Pm(),s);return Ej(e,a,$g())}async _openRedirect(e,t,r,s){await this._originValidation(e);const a=await lx(e,t,r,Pm(),s);return PP(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:a}=this.eventManagers[t];return s?Promise.resolve(s):(Ei(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await gj(e),r=new ej(e);return t.register("authEvent",s=>(Te(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Xp,{type:Xp},s=>{var l;const a=(l=s==null?void 0:s[0])==null?void 0:l[Xp];a!==void 0&&t(!!a),Qn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=sj(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return PE()||SE()||Fg()}}const Aj=Cj;var cx="@firebase/auth",ux="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pj(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jj(n){Oa(new Eo("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:f}=r.options;Te(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:l,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jE(n)},m=new qR(r,s,a,d);return rP(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Oa(new Eo("auth-internal",e=>{const t=js(e.getProvider("auth").getImmediate());return(r=>new Rj(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ms(cx,ux,Pj(n)),ms(cx,ux,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nj=300,Dj=lE("authIdTokenMaxAge")||Nj;let dx=null;const Vj=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Dj)return;const s=t==null?void 0:t.token;dx!==s&&(dx=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Mj(n=pE()){const e=Dg(n,"auth");if(e.isInitialized())return e.getImmediate();const t=nP(n,{popupRedirectResolver:Aj,persistence:[BP,CP,UE]}),r=lE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const l=Vj(a.toString());TP(t,l,()=>l(t.currentUser)),EP(t,f=>l(f))}}const s=oE("auth");return s&&iP(t,`http://${s}`),t}function Lj(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}GR({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const a=dr("internal-error");a.customData=s,t(a)},r.type="text/javascript",r.charset="UTF-8",Lj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jj("Browser");var hx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gs,YE;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,b){function P(){}P.prototype=b.prototype,A.F=b.prototype,A.prototype=new P,A.prototype.constructor=A,A.D=function(M,L,$){for(var V=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)V[Ne-2]=arguments[Ne];return b.prototype[L].apply(M,V)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,b,P){P||(P=0);const M=Array(16);if(typeof b=="string")for(var L=0;L<16;++L)M[L]=b.charCodeAt(P++)|b.charCodeAt(P++)<<8|b.charCodeAt(P++)<<16|b.charCodeAt(P++)<<24;else for(L=0;L<16;++L)M[L]=b[P++]|b[P++]<<8|b[P++]<<16|b[P++]<<24;b=A.g[0],P=A.g[1],L=A.g[2];let $=A.g[3],V;V=b+($^P&(L^$))+M[0]+3614090360&4294967295,b=P+(V<<7&4294967295|V>>>25),V=$+(L^b&(P^L))+M[1]+3905402710&4294967295,$=b+(V<<12&4294967295|V>>>20),V=L+(P^$&(b^P))+M[2]+606105819&4294967295,L=$+(V<<17&4294967295|V>>>15),V=P+(b^L&($^b))+M[3]+3250441966&4294967295,P=L+(V<<22&4294967295|V>>>10),V=b+($^P&(L^$))+M[4]+4118548399&4294967295,b=P+(V<<7&4294967295|V>>>25),V=$+(L^b&(P^L))+M[5]+1200080426&4294967295,$=b+(V<<12&4294967295|V>>>20),V=L+(P^$&(b^P))+M[6]+2821735955&4294967295,L=$+(V<<17&4294967295|V>>>15),V=P+(b^L&($^b))+M[7]+4249261313&4294967295,P=L+(V<<22&4294967295|V>>>10),V=b+($^P&(L^$))+M[8]+1770035416&4294967295,b=P+(V<<7&4294967295|V>>>25),V=$+(L^b&(P^L))+M[9]+2336552879&4294967295,$=b+(V<<12&4294967295|V>>>20),V=L+(P^$&(b^P))+M[10]+4294925233&4294967295,L=$+(V<<17&4294967295|V>>>15),V=P+(b^L&($^b))+M[11]+2304563134&4294967295,P=L+(V<<22&4294967295|V>>>10),V=b+($^P&(L^$))+M[12]+1804603682&4294967295,b=P+(V<<7&4294967295|V>>>25),V=$+(L^b&(P^L))+M[13]+4254626195&4294967295,$=b+(V<<12&4294967295|V>>>20),V=L+(P^$&(b^P))+M[14]+2792965006&4294967295,L=$+(V<<17&4294967295|V>>>15),V=P+(b^L&($^b))+M[15]+1236535329&4294967295,P=L+(V<<22&4294967295|V>>>10),V=b+(L^$&(P^L))+M[1]+4129170786&4294967295,b=P+(V<<5&4294967295|V>>>27),V=$+(P^L&(b^P))+M[6]+3225465664&4294967295,$=b+(V<<9&4294967295|V>>>23),V=L+(b^P&($^b))+M[11]+643717713&4294967295,L=$+(V<<14&4294967295|V>>>18),V=P+($^b&(L^$))+M[0]+3921069994&4294967295,P=L+(V<<20&4294967295|V>>>12),V=b+(L^$&(P^L))+M[5]+3593408605&4294967295,b=P+(V<<5&4294967295|V>>>27),V=$+(P^L&(b^P))+M[10]+38016083&4294967295,$=b+(V<<9&4294967295|V>>>23),V=L+(b^P&($^b))+M[15]+3634488961&4294967295,L=$+(V<<14&4294967295|V>>>18),V=P+($^b&(L^$))+M[4]+3889429448&4294967295,P=L+(V<<20&4294967295|V>>>12),V=b+(L^$&(P^L))+M[9]+568446438&4294967295,b=P+(V<<5&4294967295|V>>>27),V=$+(P^L&(b^P))+M[14]+3275163606&4294967295,$=b+(V<<9&4294967295|V>>>23),V=L+(b^P&($^b))+M[3]+4107603335&4294967295,L=$+(V<<14&4294967295|V>>>18),V=P+($^b&(L^$))+M[8]+1163531501&4294967295,P=L+(V<<20&4294967295|V>>>12),V=b+(L^$&(P^L))+M[13]+2850285829&4294967295,b=P+(V<<5&4294967295|V>>>27),V=$+(P^L&(b^P))+M[2]+4243563512&4294967295,$=b+(V<<9&4294967295|V>>>23),V=L+(b^P&($^b))+M[7]+1735328473&4294967295,L=$+(V<<14&4294967295|V>>>18),V=P+($^b&(L^$))+M[12]+2368359562&4294967295,P=L+(V<<20&4294967295|V>>>12),V=b+(P^L^$)+M[5]+4294588738&4294967295,b=P+(V<<4&4294967295|V>>>28),V=$+(b^P^L)+M[8]+2272392833&4294967295,$=b+(V<<11&4294967295|V>>>21),V=L+($^b^P)+M[11]+1839030562&4294967295,L=$+(V<<16&4294967295|V>>>16),V=P+(L^$^b)+M[14]+4259657740&4294967295,P=L+(V<<23&4294967295|V>>>9),V=b+(P^L^$)+M[1]+2763975236&4294967295,b=P+(V<<4&4294967295|V>>>28),V=$+(b^P^L)+M[4]+1272893353&4294967295,$=b+(V<<11&4294967295|V>>>21),V=L+($^b^P)+M[7]+4139469664&4294967295,L=$+(V<<16&4294967295|V>>>16),V=P+(L^$^b)+M[10]+3200236656&4294967295,P=L+(V<<23&4294967295|V>>>9),V=b+(P^L^$)+M[13]+681279174&4294967295,b=P+(V<<4&4294967295|V>>>28),V=$+(b^P^L)+M[0]+3936430074&4294967295,$=b+(V<<11&4294967295|V>>>21),V=L+($^b^P)+M[3]+3572445317&4294967295,L=$+(V<<16&4294967295|V>>>16),V=P+(L^$^b)+M[6]+76029189&4294967295,P=L+(V<<23&4294967295|V>>>9),V=b+(P^L^$)+M[9]+3654602809&4294967295,b=P+(V<<4&4294967295|V>>>28),V=$+(b^P^L)+M[12]+3873151461&4294967295,$=b+(V<<11&4294967295|V>>>21),V=L+($^b^P)+M[15]+530742520&4294967295,L=$+(V<<16&4294967295|V>>>16),V=P+(L^$^b)+M[2]+3299628645&4294967295,P=L+(V<<23&4294967295|V>>>9),V=b+(L^(P|~$))+M[0]+4096336452&4294967295,b=P+(V<<6&4294967295|V>>>26),V=$+(P^(b|~L))+M[7]+1126891415&4294967295,$=b+(V<<10&4294967295|V>>>22),V=L+(b^($|~P))+M[14]+2878612391&4294967295,L=$+(V<<15&4294967295|V>>>17),V=P+($^(L|~b))+M[5]+4237533241&4294967295,P=L+(V<<21&4294967295|V>>>11),V=b+(L^(P|~$))+M[12]+1700485571&4294967295,b=P+(V<<6&4294967295|V>>>26),V=$+(P^(b|~L))+M[3]+2399980690&4294967295,$=b+(V<<10&4294967295|V>>>22),V=L+(b^($|~P))+M[10]+4293915773&4294967295,L=$+(V<<15&4294967295|V>>>17),V=P+($^(L|~b))+M[1]+2240044497&4294967295,P=L+(V<<21&4294967295|V>>>11),V=b+(L^(P|~$))+M[8]+1873313359&4294967295,b=P+(V<<6&4294967295|V>>>26),V=$+(P^(b|~L))+M[15]+4264355552&4294967295,$=b+(V<<10&4294967295|V>>>22),V=L+(b^($|~P))+M[6]+2734768916&4294967295,L=$+(V<<15&4294967295|V>>>17),V=P+($^(L|~b))+M[13]+1309151649&4294967295,P=L+(V<<21&4294967295|V>>>11),V=b+(L^(P|~$))+M[4]+4149444226&4294967295,b=P+(V<<6&4294967295|V>>>26),V=$+(P^(b|~L))+M[11]+3174756917&4294967295,$=b+(V<<10&4294967295|V>>>22),V=L+(b^($|~P))+M[2]+718787259&4294967295,L=$+(V<<15&4294967295|V>>>17),V=P+($^(L|~b))+M[9]+3951481745&4294967295,A.g[0]=A.g[0]+b&4294967295,A.g[1]=A.g[1]+(L+(V<<21&4294967295|V>>>11))&4294967295,A.g[2]=A.g[2]+L&4294967295,A.g[3]=A.g[3]+$&4294967295}r.prototype.v=function(A,b){b===void 0&&(b=A.length);const P=b-this.blockSize,M=this.C;let L=this.h,$=0;for(;$<b;){if(L==0)for(;$<=P;)s(this,A,$),$+=this.blockSize;if(typeof A=="string"){for(;$<b;)if(M[L++]=A.charCodeAt($++),L==this.blockSize){s(this,M),L=0;break}}else for(;$<b;)if(M[L++]=A[$++],L==this.blockSize){s(this,M),L=0;break}}this.h=L,this.o+=b},r.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var b=1;b<A.length-8;++b)A[b]=0;b=this.o*8;for(var P=A.length-8;P<A.length;++P)A[P]=b&255,b/=256;for(this.v(A),A=Array(16),b=0,P=0;P<4;++P)for(let M=0;M<32;M+=8)A[b++]=this.g[P]>>>M&255;return A};function a(A,b){var P=f;return Object.prototype.hasOwnProperty.call(P,A)?P[A]:P[A]=b(A)}function l(A,b){this.h=b;const P=[];let M=!0;for(let L=A.length-1;L>=0;L--){const $=A[L]|0;M&&$==b||(P[L]=$,M=!1)}this.g=P}var f={};function d(A){return-128<=A&&A<128?a(A,function(b){return new l([b|0],b<0?-1:0)}):new l([A|0],A<0?-1:0)}function m(A){if(isNaN(A)||!isFinite(A))return v;if(A<0)return C(m(-A));const b=[];let P=1;for(let M=0;A>=P;M++)b[M]=A/P|0,P*=4294967296;return new l(b,0)}function g(A,b){if(A.length==0)throw Error("number format error: empty string");if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(A.charAt(0)=="-")return C(g(A.substring(1),b));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const P=m(Math.pow(b,8));let M=v;for(let $=0;$<A.length;$+=8){var L=Math.min(8,A.length-$);const V=parseInt(A.substring($,$+L),b);L<8?(L=m(Math.pow(b,L)),M=M.j(L).add(m(V))):(M=M.j(P),M=M.add(m(V)))}return M}var v=d(0),w=d(1),k=d(16777216);n=l.prototype,n.m=function(){if(I(this))return-C(this).m();let A=0,b=1;for(let P=0;P<this.g.length;P++){const M=this.i(P);A+=(M>=0?M:4294967296+M)*b,b*=4294967296}return A},n.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(T(this))return"0";if(I(this))return"-"+C(this).toString(A);const b=m(Math.pow(A,6));var P=this;let M="";for(;;){const L=Q(P,b).g;P=O(P,L.j(b));let $=((P.g.length>0?P.g[0]:P.h)>>>0).toString(A);if(P=L,T(P))return $+M;for(;$.length<6;)$="0"+$;M=$+M}},n.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function T(A){if(A.h!=0)return!1;for(let b=0;b<A.g.length;b++)if(A.g[b]!=0)return!1;return!0}function I(A){return A.h==-1}n.l=function(A){return A=O(this,A),I(A)?-1:T(A)?0:1};function C(A){const b=A.g.length,P=[];for(let M=0;M<b;M++)P[M]=~A.g[M];return new l(P,~A.h).add(w)}n.abs=function(){return I(this)?C(this):this},n.add=function(A){const b=Math.max(this.g.length,A.g.length),P=[];let M=0;for(let L=0;L<=b;L++){let $=M+(this.i(L)&65535)+(A.i(L)&65535),V=($>>>16)+(this.i(L)>>>16)+(A.i(L)>>>16);M=V>>>16,$&=65535,V&=65535,P[L]=V<<16|$}return new l(P,P[P.length-1]&-2147483648?-1:0)};function O(A,b){return A.add(C(b))}n.j=function(A){if(T(this)||T(A))return v;if(I(this))return I(A)?C(this).j(C(A)):C(C(this).j(A));if(I(A))return C(this.j(C(A)));if(this.l(k)<0&&A.l(k)<0)return m(this.m()*A.m());const b=this.g.length+A.g.length,P=[];for(var M=0;M<2*b;M++)P[M]=0;for(M=0;M<this.g.length;M++)for(let L=0;L<A.g.length;L++){const $=this.i(M)>>>16,V=this.i(M)&65535,Ne=A.i(L)>>>16,He=A.i(L)&65535;P[2*M+2*L]+=V*He,B(P,2*M+2*L),P[2*M+2*L+1]+=$*He,B(P,2*M+2*L+1),P[2*M+2*L+1]+=V*Ne,B(P,2*M+2*L+1),P[2*M+2*L+2]+=$*Ne,B(P,2*M+2*L+2)}for(A=0;A<b;A++)P[A]=P[2*A+1]<<16|P[2*A];for(A=b;A<2*b;A++)P[A]=0;return new l(P,0)};function B(A,b){for(;(A[b]&65535)!=A[b];)A[b+1]+=A[b]>>>16,A[b]&=65535,b++}function j(A,b){this.g=A,this.h=b}function Q(A,b){if(T(b))throw Error("division by zero");if(T(A))return new j(v,v);if(I(A))return b=Q(C(A),b),new j(C(b.g),C(b.h));if(I(b))return b=Q(A,C(b)),new j(C(b.g),b.h);if(A.g.length>30){if(I(A)||I(b))throw Error("slowDivide_ only works with positive integers.");for(var P=w,M=b;M.l(A)<=0;)P=W(P),M=W(M);var L=H(P,1),$=H(M,1);for(M=H(M,2),P=H(P,2);!T(M);){var V=$.add(M);V.l(A)<=0&&(L=L.add(P),$=V),M=H(M,1),P=H(P,1)}return b=O(A,L.j(b)),new j(L,b)}for(L=v;A.l(b)>=0;){for(P=Math.max(1,Math.floor(A.m()/b.m())),M=Math.ceil(Math.log(P)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),$=m(P),V=$.j(b);I(V)||V.l(A)>0;)P-=M,$=m(P),V=$.j(b);T($)&&($=w),L=L.add($),A=O(A,V)}return new j(L,A)}n.B=function(A){return Q(this,A).h},n.and=function(A){const b=Math.max(this.g.length,A.g.length),P=[];for(let M=0;M<b;M++)P[M]=this.i(M)&A.i(M);return new l(P,this.h&A.h)},n.or=function(A){const b=Math.max(this.g.length,A.g.length),P=[];for(let M=0;M<b;M++)P[M]=this.i(M)|A.i(M);return new l(P,this.h|A.h)},n.xor=function(A){const b=Math.max(this.g.length,A.g.length),P=[];for(let M=0;M<b;M++)P[M]=this.i(M)^A.i(M);return new l(P,this.h^A.h)};function W(A){const b=A.g.length+1,P=[];for(let M=0;M<b;M++)P[M]=A.i(M)<<1|A.i(M-1)>>>31;return new l(P,A.h)}function H(A,b){const P=b>>5;b%=32;const M=A.g.length-P,L=[];for(let $=0;$<M;$++)L[$]=b>0?A.i($+P)>>>b|A.i($+P+1)<<32-b:A.i($+P);return new l(L,A.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,YE=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=m,l.fromString=g,gs=l}).apply(typeof hx<"u"?hx:typeof self<"u"?self:typeof window<"u"?window:{});var Od=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var XE,hc,JE,Jd,Vm,ZE,eT,tT;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Od=="object"&&Od];for(var _=0;_<h.length;++_){var E=h[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=t(this);function s(h,_){if(_)e:{var E=r;h=h.split(".");for(var R=0;R<h.length-1;R++){var q=h[R];if(!(q in E))break e;E=E[q]}h=h[h.length-1],R=E[h],_=_(R),_!=R&&_!=null&&e(E,h,{configurable:!0,writable:!0,value:_})}}s("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(h){return h||function(_){var E=[],R;for(R in _)Object.prototype.hasOwnProperty.call(_,R)&&E.push([R,_[R]]);return E}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function f(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function d(h,_,E){return h.call.apply(h.bind,arguments)}function m(h,_,E){return m=d,m.apply(null,arguments)}function g(h,_){var E=Array.prototype.slice.call(arguments,1);return function(){var R=E.slice();return R.push.apply(R,arguments),h.apply(this,R)}}function v(h,_){function E(){}E.prototype=_.prototype,h.Z=_.prototype,h.prototype=new E,h.prototype.constructor=h,h.Ob=function(R,q,X){for(var oe=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)oe[Re-2]=arguments[Re];return _.prototype[q].apply(R,oe)}}var w=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function k(h){const _=h.length;if(_>0){const E=Array(_);for(let R=0;R<_;R++)E[R]=h[R];return E}return[]}function T(h,_){for(let R=1;R<arguments.length;R++){const q=arguments[R];var E=typeof q;if(E=E!="object"?E:q?Array.isArray(q)?"array":E:"null",E=="array"||E=="object"&&typeof q.length=="number"){E=h.length||0;const X=q.length||0;h.length=E+X;for(let oe=0;oe<X;oe++)h[E+oe]=q[oe]}else h.push(q)}}class I{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function C(h){l.setTimeout(()=>{throw h},0)}function O(){var h=A;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class B{constructor(){this.h=this.g=null}add(_,E){const R=j.get();R.set(_,E),this.h?this.h.next=R:this.g=R,this.h=R}}var j=new I(()=>new Q,h=>h.reset());class Q{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let W,H=!1,A=new B,b=()=>{const h=Promise.resolve(void 0);W=()=>{h.then(P)}};function P(){for(var h;h=O();){try{h.h.call(h.g)}catch(E){C(E)}var _=j;_.j(h),_.h<100&&(_.h++,h.next=_.g,_.g=h)}H=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function L(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}L.prototype.h=function(){this.defaultPrevented=!0};var $=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};l.addEventListener("test",E,_),l.removeEventListener("test",E,_)}catch{}return h})();function V(h){return/^[\s\xa0]*$/.test(h)}function Ne(h,_){L.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,_)}v(Ne,L),Ne.prototype.init=function(h,_){const E=this.type=h.type,R=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget,_||(E=="mouseover"?_=h.fromElement:E=="mouseout"&&(_=h.toElement)),this.relatedTarget=_,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Ne.Z.h.call(this)},Ne.prototype.h=function(){Ne.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var He="closure_listenable_"+(Math.random()*1e6|0),wt=0;function Se(h,_,E,R,q){this.listener=h,this.proxy=null,this.src=_,this.type=E,this.capture=!!R,this.ha=q,this.key=++wt,this.da=this.fa=!1}function ie(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function fe(h,_,E){for(const R in h)_.call(E,h[R],R,h)}function ae(h,_){for(const E in h)_.call(void 0,h[E],E,h)}function U(h){const _={};for(const E in h)_[E]=h[E];return _}const ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ce(h,_){let E,R;for(let q=1;q<arguments.length;q++){R=arguments[q];for(E in R)h[E]=R[E];for(let X=0;X<ee.length;X++)E=ee[X],Object.prototype.hasOwnProperty.call(R,E)&&(h[E]=R[E])}}function Ae(h){this.src=h,this.g={},this.h=0}Ae.prototype.add=function(h,_,E,R,q){const X=h.toString();h=this.g[X],h||(h=this.g[X]=[],this.h++);const oe=Me(h,_,R,q);return oe>-1?(_=h[oe],E||(_.fa=!1)):(_=new Se(_,this.src,X,!!R,q),_.fa=E,h.push(_)),_};function Ve(h,_){const E=_.type;if(E in h.g){var R=h.g[E],q=Array.prototype.indexOf.call(R,_,void 0),X;(X=q>=0)&&Array.prototype.splice.call(R,q,1),X&&(ie(_),h.g[E].length==0&&(delete h.g[E],h.h--))}}function Me(h,_,E,R){for(let q=0;q<h.length;++q){const X=h[q];if(!X.da&&X.listener==_&&X.capture==!!E&&X.ha==R)return q}return-1}var Ge="closure_lm_"+(Math.random()*1e6|0),Ue={};function Xe(h,_,E,R,q){if(Array.isArray(_)){for(let X=0;X<_.length;X++)Xe(h,_[X],E,R,q);return null}return E=fl(E),h&&h[He]?h.J(_,E,f(R)?!!R.capture:!1,q):ln(h,_,E,!1,R,q)}function ln(h,_,E,R,q,X){if(!_)throw Error("Invalid event type");const oe=f(q)?!!q.capture:!!q;let Re=Mo(h);if(Re||(h[Ge]=Re=new Ae(h)),E=Re.add(_,E,R,oe,X),E.proxy)return E;if(R=Do(),E.proxy=R,R.src=h,R.listener=E,h.addEventListener)$||(q=oe),q===void 0&&(q=!1),h.addEventListener(_.toString(),R,q);else if(h.attachEvent)h.attachEvent(Vo(_.toString()),R);else if(h.addListener&&h.removeListener)h.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Do(){function h(E){return _.call(h.src,h.listener,E)}const _=_u;return h}function hl(h,_,E,R,q){if(Array.isArray(_))for(var X=0;X<_.length;X++)hl(h,_[X],E,R,q);else R=f(R)?!!R.capture:!!R,E=fl(E),h&&h[He]?(h=h.i,X=String(_).toString(),X in h.g&&(_=h.g[X],E=Me(_,E,R,q),E>-1&&(ie(_[E]),Array.prototype.splice.call(_,E,1),_.length==0&&(delete h.g[X],h.h--)))):h&&(h=Mo(h))&&(_=h.g[_.toString()],h=-1,_&&(h=Me(_,E,R,q)),(E=h>-1?_[h]:null)&&Ai(E))}function Ai(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[He])Ve(_.i,h);else{var E=h.type,R=h.proxy;_.removeEventListener?_.removeEventListener(E,R,h.capture):_.detachEvent?_.detachEvent(Vo(E),R):_.addListener&&_.removeListener&&_.removeListener(R),(E=Mo(_))?(Ve(E,h),E.h==0&&(E.src=null,_[Ge]=null)):ie(h)}}}function Vo(h){return h in Ue?Ue[h]:Ue[h]="on"+h}function _u(h,_){if(h.da)h=!0;else{_=new Ne(_,this);const E=h.listener,R=h.ha||h.src;h.fa&&Ai(h),h=E.call(R,_)}return h}function Mo(h){return h=h[Ge],h instanceof Ae?h:null}var Os="__closure_events_fn_"+(Math.random()*1e9>>>0);function fl(h){return typeof h=="function"?h:(h[Os]||(h[Os]=function(_){return h.handleEvent(_)}),h[Os])}function Et(){M.call(this),this.i=new Ae(this),this.M=this,this.G=null}v(Et,M),Et.prototype[He]=!0,Et.prototype.removeEventListener=function(h,_,E,R){hl(this,h,_,E,R)};function gt(h,_){var E,R=h.G;if(R)for(E=[];R;R=R.G)E.push(R);if(h=h.M,R=_.type||_,typeof _=="string")_=new L(_,h);else if(_ instanceof L)_.target=_.target||h;else{var q=_;_=new L(R,h),Ce(_,q)}q=!0;let X,oe;if(E)for(oe=E.length-1;oe>=0;oe--)X=_.g=E[oe],q=Jn(X,R,!0,_)&&q;if(X=_.g=h,q=Jn(X,R,!0,_)&&q,q=Jn(X,R,!1,_)&&q,E)for(oe=0;oe<E.length;oe++)X=_.g=E[oe],q=Jn(X,R,!1,_)&&q}Et.prototype.N=function(){if(Et.Z.N.call(this),this.i){var h=this.i;for(const _ in h.g){const E=h.g[_];for(let R=0;R<E.length;R++)ie(E[R]);delete h.g[_],h.h--}}this.G=null},Et.prototype.J=function(h,_,E,R){return this.i.add(String(h),_,!1,E,R)},Et.prototype.K=function(h,_,E,R){return this.i.add(String(h),_,!0,E,R)};function Jn(h,_,E,R){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();let q=!0;for(let X=0;X<_.length;++X){const oe=_[X];if(oe&&!oe.da&&oe.capture==E){const Re=oe.listener,yt=oe.ha||oe.src;oe.fa&&Ve(h.i,oe),q=Re.call(yt,R)!==!1&&q}}return q&&!R.defaultPrevented}function pl(h,_){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=m(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:l.setTimeout(h,_||0)}function ml(h){h.g=pl(()=>{h.g=null,h.i&&(h.i=!1,ml(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class wu extends M{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:ml(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ri(h){M.call(this),this.h=h,this.g={}}v(Ri,M);var gl=[];function Lo(h){fe(h.g,function(_,E){this.g.hasOwnProperty(E)&&Ai(_)},h),h.g={}}Ri.prototype.N=function(){Ri.Z.N.call(this),Lo(this)},Ri.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pi=l.JSON.stringify,Eu=l.JSON.parse,Fs=class{stringify(h){return l.JSON.stringify(h,void 0)}parse(h){return l.JSON.parse(h,void 0)}};function ji(){}function Tu(){}var Ni={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Oo(){L.call(this,"d")}v(Oo,L);function yl(){L.call(this,"c")}v(yl,L);var Zn={},Fo=null;function Di(){return Fo=Fo||new Et}Zn.Ia="serverreachability";function Bo(h){L.call(this,Zn.Ia,h)}v(Bo,L);function Qr(h){const _=Di();gt(_,new Bo(_))}Zn.STAT_EVENT="statevent";function Yr(h,_){L.call(this,Zn.STAT_EVENT,h),this.stat=_}v(Yr,L);function ht(h){const _=Di();gt(_,new Yr(_,h))}Zn.Ja="timingevent";function vl(h,_){L.call(this,Zn.Ja,h),this.size=_}v(vl,L);function Vi(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){h()},_)}function Mi(){this.g=!0}Mi.prototype.ua=function(){this.g=!1};function ku(h,_,E,R,q,X){h.info(function(){if(h.g)if(X){var oe="",Re=X.split("&");for(let Ye=0;Ye<Re.length;Ye++){var yt=Re[Ye].split("=");if(yt.length>1){const Tt=yt[0];yt=yt[1];const Cn=Tt.split("_");oe=Cn.length>=2&&Cn[1]=="type"?oe+(Tt+"="+yt+"&"):oe+(Tt+"=redacted&")}}}else oe=null;else oe=X;return"XMLHTTP REQ ("+R+") [attempt "+q+"]: "+_+`
`+E+`
`+oe})}function Su(h,_,E,R,q,X,oe){h.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+q+"]: "+_+`
`+E+`
`+X+" "+oe})}function xr(h,_,E,R){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+Bs(h,E)+(R?" "+R:"")})}function bu(h,_){h.info(function(){return"TIMEOUT: "+_})}Mi.prototype.info=function(){};function Bs(h,_){if(!h.g)return _;if(!_)return null;try{const X=JSON.parse(_);if(X){for(h=0;h<X.length;h++)if(Array.isArray(X[h])){var E=X[h];if(!(E.length<2)){var R=E[1];if(Array.isArray(R)&&!(R.length<1)){var q=R[0];if(q!="noop"&&q!="stop"&&q!="close")for(let oe=1;oe<R.length;oe++)R[oe]=""}}}}return Pi(X)}catch{return _}}var Li={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Oi={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Iu;function Xr(){}v(Xr,ji),Xr.prototype.g=function(){return new XMLHttpRequest},Iu=new Xr;function _r(h){return encodeURIComponent(String(h))}function zo(h){var _=1;h=h.split(":");const E=[];for(;_>0&&h.length;)E.push(h.shift()),_--;return h.length&&E.push(h.join(":")),E}function Ln(h,_,E,R){this.j=h,this.i=_,this.l=E,this.S=R||1,this.V=new Ri(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Cu}function Cu(){this.i=null,this.g="",this.h=!1}var Au={},xl={};function er(h,_,E){h.M=1,h.A=Zr(On(_)),h.u=E,h.R=!0,_l(h,null)}function _l(h,_){h.F=Date.now(),zs(h),h.B=On(h.A);var E=h.B,R=h.S;Array.isArray(R)||(R=[String(R)]),Rl(E.i,"t",R),h.C=0,E=h.j.L,h.h=new Cu,h.g=Fu(h.j,E?_:null,!h.u),h.P>0&&(h.O=new wu(m(h.Y,h,h.g),h.P)),_=h.V,E=h.g,R=h.ba;var q="readystatechange";Array.isArray(q)||(q&&(gl[0]=q.toString()),q=gl);for(let X=0;X<q.length;X++){const oe=Xe(E,q[X],R||_.handleEvent,!1,_.h||_);if(!oe)break;_.g[oe.key]=oe}_=h.J?U(h.J):{},h.u?(h.v||(h.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,_)):(h.v="GET",h.g.ea(h.B,h.v,null,_)),Qr(),ku(h.i,h.v,h.B,h.l,h.S,h.u)}Ln.prototype.ba=function(h){h=h.target;const _=this.O;_&&Ir(h)==3?_.j():this.Y(h)},Ln.prototype.Y=function(h){try{if(h==this.g)e:{const Re=Ir(this.g),yt=this.g.ya(),Ye=this.g.ca();if(!(Re<3)&&(Re!=3||this.g&&(this.h.h||this.g.la()||Lu(this.g)))){this.K||Re!=4||yt==7||(yt==8||Ye<=0?Qr(3):Qr(2)),Uo(this);var _=this.g.ca();this.X=_;var E=Ru(this);if(this.o=_==200,Su(this.i,this.v,this.B,this.l,this.S,Re,_),this.o){if(this.U&&!this.L){t:{if(this.g){var R,q=this.g;if((R=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(R)){var X=R;break t}}X=null}if(h=X)xr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,tt(this,h);else{this.o=!1,this.m=3,ht(12),Jr(this),Us(this);break e}}if(this.R){h=!0;let Tt;for(;!this.K&&this.C<E.length;)if(Tt=ju(this,E),Tt==xl){Re==4&&(this.m=4,ht(14),h=!1),xr(this.i,this.l,null,"[Incomplete Response]");break}else if(Tt==Au){this.m=4,ht(15),xr(this.i,this.l,E,"[Invalid Chunk]"),h=!1;break}else xr(this.i,this.l,Tt,null),tt(this,Tt);if(Pu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Re!=4||E.length!=0||this.h.h||(this.m=1,ht(16),h=!1),this.o=this.o&&h,!h)xr(this.i,this.l,E,"[Invalid Chunked Response]"),Jr(this),Us(this);else if(E.length>0&&!this.W){this.W=!0;var oe=this.j;oe.g==this&&oe.aa&&!oe.P&&(oe.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),Xs(oe),oe.P=!0,ht(11))}}else xr(this.i,this.l,E,null),tt(this,E);Re==4&&Jr(this),this.o&&!this.K&&(Re==4?Jo(this.j,this):(this.o=!1,zs(this)))}else jl(this.g),_==400&&E.indexOf("Unknown SID")>0?(this.m=3,ht(12)):(this.m=0,ht(13)),Jr(this),Us(this)}}}catch{}finally{}};function Ru(h){if(!Pu(h))return h.g.la();const _=Lu(h.g);if(_==="")return"";let E="";const R=_.length,q=Ir(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Jr(h),Us(h),"";h.h.i=new l.TextDecoder}for(let X=0;X<R;X++)h.h.h=!0,E+=h.h.i.decode(_[X],{stream:!(q&&X==R-1)});return _.length=0,h.h.g+=E,h.C=0,h.h.g}function Pu(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function ju(h,_){var E=h.C,R=_.indexOf(`
`,E);return R==-1?xl:(E=Number(_.substring(E,R)),isNaN(E)?Au:(R+=1,R+E>_.length?xl:(_=_.slice(R,R+E),h.C=R+E,_)))}Ln.prototype.cancel=function(){this.K=!0,Jr(this)};function zs(h){h.T=Date.now()+h.H,wl(h,h.H)}function wl(h,_){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Vi(m(h.aa,h),_)}function Uo(h){h.D&&(l.clearTimeout(h.D),h.D=null)}Ln.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(bu(this.i,this.B),this.M!=2&&(Qr(),ht(17)),Jr(this),this.m=2,Us(this)):wl(this,this.T-h)};function Us(h){h.j.I==0||h.K||Jo(h.j,h)}function Jr(h){Uo(h);var _=h.O;_&&typeof _.dispose=="function"&&_.dispose(),h.O=null,Lo(h.V),h.g&&(_=h.g,h.g=null,_.abort(),_.dispose())}function tt(h,_){try{var E=h.j;if(E.I!=0&&(E.g==h||Tl(E.h,h))){if(!h.L&&Tl(E.h,h)&&E.I==3){try{var R=E.Ba.g.parse(_)}catch{R=null}if(Array.isArray(R)&&R.length==3){var q=R;if(q[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<h.F)Xo(E),bn(E);else break e;Rr(E),ht(18)}}else E.xa=q[1],0<E.xa-E.K&&q[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=Vi(m(E.Va,E),6e3));$s(E.h)<=1&&E.ta&&(E.ta=void 0)}else In(E,11)}else if((h.L||E.g==h)&&Xo(E),!V(_))for(q=E.Ba.g.parse(_),_=0;_<q.length;_++){let Ye=q[_];const Tt=Ye[0];if(!(Tt<=E.K))if(E.K=Tt,Ye=Ye[1],E.I==2)if(Ye[0]=="c"){E.M=Ye[1],E.ba=Ye[2];const Cn=Ye[3];Cn!=null&&(E.ka=Cn,E.j.info("VER="+E.ka));const ii=Ye[4];ii!=null&&(E.za=ii,E.j.info("SVER="+E.za));const Pr=Ye[5];Pr!=null&&typeof Pr=="number"&&Pr>0&&(R=1.5*Pr,E.O=R,E.j.info("backChannelRequestTimeoutMs_="+R)),R=E;const jr=h.g;if(jr){const ta=jr.g?jr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ta){var X=R.h;X.g||ta.indexOf("spdy")==-1&&ta.indexOf("quic")==-1&&ta.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(Wo(X,X.h),X.h=null))}if(R.G){const Vl=jr.g?jr.g.getResponseHeader("X-HTTP-Session-Id"):null;Vl&&(R.wa=Vl,Ke(R.J,R.G,Vl))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-h.F,E.j.info("Handshake RTT: "+E.T+"ms")),R=E;var oe=h;if(R.na=Dl(R,R.L?R.ba:null,R.W),oe.L){Ws(R.h,oe);var Re=oe,yt=R.O;yt&&(Re.H=yt),Re.D&&(Uo(Re),zs(Re)),R.g=oe}else Yt(R);E.i.length>0&&ri(E)}else Ye[0]!="stop"&&Ye[0]!="close"||In(E,7);else E.I==3&&(Ye[0]=="stop"||Ye[0]=="close"?Ye[0]=="stop"?In(E,7):Qo(E):Ye[0]!="noop"&&E.l&&E.l.qa(Ye),E.A=0)}}Qr(4)}catch{}}var pf=class{constructor(h,_){this.g=h,this.map=_}};function $o(h){this.l=h||10,l.PerformanceNavigationTiming?(h=l.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function El(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function $s(h){return h.h?1:h.g?h.g.size:0}function Tl(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function Wo(h,_){h.g?h.g.add(_):h.h=_}function Ws(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}$o.prototype.cancel=function(){if(this.i=Tn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Tn(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const E of h.g.values())_=_.concat(E.G);return _}return k(h.i)}var Nu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kn(h,_){if(h){h=h.split("&");for(let E=0;E<h.length;E++){const R=h[E].indexOf("=");let q,X=null;R>=0?(q=h[E].substring(0,R),X=h[E].substring(R+1)):q=h[E],_(q,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function wr(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;h instanceof wr?(this.l=h.l,Hs(this,h.j),this.o=h.o,this.g=h.g,Er(this,h.u),this.h=h.h,Fi(this,Pl(h.i)),this.m=h.m):h&&(_=String(h).match(Nu))?(this.l=!1,Hs(this,_[1]||"",!0),this.o=Ks(_[2]||""),this.g=Ks(_[3]||"",!0),Er(this,_[4]),this.h=Ks(_[5]||"",!0),Fi(this,_[6]||"",!0),this.m=Ks(_[7]||"")):(this.l=!1,this.i=new Be(null,this.l))}wr.prototype.toString=function(){const h=[];var _=this.j;_&&h.push(qs(_,Sl,!0),":");var E=this.g;return(E||_=="file")&&(h.push("//"),(_=this.o)&&h.push(qs(_,Sl,!0),"@"),h.push(_r(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&h.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(qs(E,E.charAt(0)=="/"?Gs:bl,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",qs(E,Il)),h.join("")},wr.prototype.resolve=function(h){const _=On(this);let E=!!h.j;E?Hs(_,h.j):E=!!h.o,E?_.o=h.o:E=!!h.g,E?_.g=h.g:E=h.u!=null;var R=h.h;if(E)Er(_,h.u);else if(E=!!h.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var q=_.h.lastIndexOf("/");q!=-1&&(R=_.h.slice(0,q+1)+R)}if(q=R,q==".."||q==".")R="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){R=q.lastIndexOf("/",0)==0,q=q.split("/");const X=[];for(let oe=0;oe<q.length;){const Re=q[oe++];Re=="."?R&&oe==q.length&&X.push(""):Re==".."?((X.length>1||X.length==1&&X[0]!="")&&X.pop(),R&&oe==q.length&&X.push("")):(X.push(Re),R=!0)}R=X.join("/")}else R=q}return E?_.h=R:E=h.i.toString()!=="",E?Fi(_,Pl(h.i)):E=!!h.m,E&&(_.m=h.m),_};function On(h){return new wr(h)}function Hs(h,_,E){h.j=E?Ks(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function Er(h,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);h.u=_}else h.u=null}function Fi(h,_,E){_ instanceof Be?(h.i=_,Ko(h.i,h.l)):(E||(_=qs(_,mf)),h.i=new Be(_,h.l))}function Ke(h,_,E){h.i.set(_,E)}function Zr(h){return Ke(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Ks(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function qs(h,_,E){return typeof h=="string"?(h=encodeURI(h).replace(_,kl),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function kl(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Sl=/[#\/\?@]/g,bl=/[#\?:]/g,Gs=/[#\?]/g,mf=/[#\?@]/g,Il=/#/g;function Be(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function Tr(h){h.g||(h.g=new Map,h.h=0,h.i&&kn(h.i,function(_,E){h.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}n=Be.prototype,n.add=function(h,_){Tr(this),this.i=null,h=kr(this,h);let E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(_),this.h+=1,this};function Cl(h,_){Tr(h),_=kr(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function Ho(h,_){return Tr(h),_=kr(h,_),h.g.has(_)}n.forEach=function(h,_){Tr(this),this.g.forEach(function(E,R){E.forEach(function(q){h.call(_,q,R,this)},this)},this)};function Al(h,_){Tr(h);let E=[];if(typeof _=="string")Ho(h,_)&&(E=E.concat(h.g.get(kr(h,_))));else for(h=Array.from(h.g.values()),_=0;_<h.length;_++)E=E.concat(h[_]);return E}n.set=function(h,_){return Tr(this),this.i=null,h=kr(this,h),Ho(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},n.get=function(h,_){return h?(h=Al(this,h),h.length>0?String(h[0]):_):_};function Rl(h,_,E){Cl(h,_),E.length>0&&(h.i=null,h.g.set(kr(h,_),k(E)),h.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(let R=0;R<_.length;R++){var E=_[R];const q=_r(E);E=Al(this,E);for(let X=0;X<E.length;X++){let oe=q;E[X]!==""&&(oe+="="+_r(E[X])),h.push(oe)}}return this.i=h.join("&")};function Pl(h){const _=new Be;return _.i=h.i,h.g&&(_.g=new Map(h.g),_.h=h.h),_}function kr(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function Ko(h,_){_&&!h.j&&(Tr(h),h.i=null,h.g.forEach(function(E,R){const q=R.toLowerCase();R!=q&&(Cl(this,R),Rl(this,q,E))},h)),h.j=_}function Sr(h,_){const E=new Mi;if(l.Image){const R=new Image;R.onload=g(Ut,E,"TestLoadImage: loaded",!0,_,R),R.onerror=g(Ut,E,"TestLoadImage: error",!1,_,R),R.onabort=g(Ut,E,"TestLoadImage: abort",!1,_,R),R.ontimeout=g(Ut,E,"TestLoadImage: timeout",!1,_,R),l.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=h}else _(!1)}function br(h,_){const E=new Mi,R=new AbortController,q=setTimeout(()=>{R.abort(),Ut(E,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:R.signal}).then(X=>{clearTimeout(q),X.ok?Ut(E,"TestPingServer: ok",!0,_):Ut(E,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(q),Ut(E,"TestPingServer: error",!1,_)})}function Ut(h,_,E,R,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),R(E)}catch{}}function Qs(){this.g=new Fs}function ei(h){this.i=h.Sb||null,this.h=h.ab||!1}v(ei,ji),ei.prototype.g=function(){return new Sn(this.i,this.h)};function Sn(h,_){Et.call(this),this.H=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(Sn,Et),n=Sn.prototype,n.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=_,this.readyState=1,tr(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(_.body=h),(this.H||l).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Bi(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,tr(this)),this.g&&(this.readyState=3,tr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Du(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Du(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Bi(this):tr(this),this.readyState==3&&Du(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,Bi(this))},n.Na=function(h){this.g&&(this.response=h,Bi(this))},n.ga=function(){this.g&&Bi(this)};function Bi(h){h.readyState=4,h.l=null,h.j=null,h.B=null,tr(h)}n.setRequestHeader=function(h,_){this.A.append(h,_)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var E=_.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=_.next();return h.join(`\r
`)};function tr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Sn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Vu(h){let _="";return fe(h,function(E,R){_+=R,_+=":",_+=E,_+=`\r
`}),_}function qo(h,_,E){e:{for(R in E){var R=!1;break e}R=!0}R||(E=Vu(E),typeof h=="string"?E!=null&&_r(E):Ke(h,_,E))}function Je(h){Et.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(Je,Et);var Mu=/^https?$/i,gf=["POST","PUT"];n=Je.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,_,E,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Iu.g(),this.g.onreadystatechange=w(m(this.Ca,this));try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(X){zi(this,X);return}if(h=E||"",E=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var q in R)E.set(q,R[q]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const X of R.keys())E.set(X,R.get(X));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(E.keys()).find(X=>X.toLowerCase()=="content-type"),q=l.FormData&&h instanceof l.FormData,!(Array.prototype.indexOf.call(gf,_,void 0)>=0)||R||q||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,oe]of E)this.g.setRequestHeader(X,oe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(X){zi(this,X)}};function zi(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.o=5,Ui(h),ni(h)}function Ui(h){h.A||(h.A=!0,gt(h,"complete"),gt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,gt(this,"complete"),gt(this,"abort"),ni(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ni(this,!0)),Je.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?ti(this):this.Xa())},n.Xa=function(){ti(this)};function ti(h){if(h.h&&typeof a<"u"){if(h.v&&Ir(h)==4)setTimeout(h.Ca.bind(h),0);else if(gt(h,"readystatechange"),Ir(h)==4){h.h=!1;try{const X=h.ca();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var E;if(!(E=_)){var R;if(R=X===0){let oe=String(h.D).match(Nu)[1]||null;!oe&&l.self&&l.self.location&&(oe=l.self.location.protocol.slice(0,-1)),R=!Mu.test(oe?oe.toLowerCase():"")}E=R}if(E)gt(h,"complete"),gt(h,"success");else{h.o=6;try{var q=Ir(h)>2?h.g.statusText:""}catch{q=""}h.l=q+" ["+h.ca()+"]",Ui(h)}}finally{ni(h)}}}}function ni(h,_){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const E=h.g;h.g=null,_||gt(h,"ready");try{E.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Ir(h){return h.g?h.g.readyState:0}n.ca=function(){try{return Ir(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),Eu(_)}};function Lu(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function jl(h){const _={};h=(h.g&&Ir(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<h.length;R++){if(V(h[R]))continue;var E=zo(h[R]);const q=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const X=_[q]||[];_[q]=X,X.push(E)}ae(_,function(R){return R.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Cr(h,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||_}function Go(h){this.za=0,this.i=[],this.j=new Mi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Cr("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Cr("baseRetryDelayMs",5e3,h),this.Za=Cr("retryDelaySeedMs",1e4,h),this.Ta=Cr("forwardChannelMaxRetries",2,h),this.va=Cr("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new $o(h&&h.concurrentRequestLimit),this.Ba=new Qs,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Go.prototype,n.ka=8,n.I=1,n.connect=function(h,_,E,R){ht(0),this.W=h,this.H=_||{},E&&R!==void 0&&(this.H.OSID=E,this.H.OAID=R),this.F=this.X,this.J=Dl(this,null,this.W),ri(this)};function Qo(h){if(Yo(h),h.I==3){var _=h.V++,E=On(h.J);if(Ke(E,"SID",h.M),Ke(E,"RID",_),Ke(E,"TYPE","terminate"),Ar(h,E),_=new Ln(h,h.j,_),_.M=2,_.A=Zr(On(E)),E=!1,l.navigator&&l.navigator.sendBeacon)try{E=l.navigator.sendBeacon(_.A.toString(),"")}catch{}!E&&l.Image&&(new Image().src=_.A,E=!0),E||(_.g=Fu(_.j,null),_.g.ea(_.A)),_.F=Date.now(),zs(_)}Js(h)}function bn(h){h.g&&(Xs(h),h.g.cancel(),h.g=null)}function Yo(h){bn(h),h.v&&(l.clearTimeout(h.v),h.v=null),Xo(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&l.clearTimeout(h.m),h.m=null)}function ri(h){if(!El(h.h)&&!h.m){h.m=!0;var _=h.Ea;W||b(),H||(W(),H=!0),A.add(_,h),h.D=0}}function Ou(h,_){return $s(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=_.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Vi(m(h.Ea,h,_),Zo(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const q=new Ln(this,this.j,h);let X=this.o;if(this.U&&(X?(X=U(X),Ce(X,this.U)):X=this.U),this.u!==null||this.R||(q.J=X,X=null),this.S)e:{for(var _=0,E=0;E<this.i.length;E++){t:{var R=this.i[E];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(_+=R,_>4096){_=E;break e}if(_===4096||E===this.i.length-1){_=E+1;break e}}_=1e3}else _=1e3;_=Nl(this,q,_),E=On(this.J),Ke(E,"RID",h),Ke(E,"CVER",22),this.G&&Ke(E,"X-HTTP-Session-Id",this.G),Ar(this,E),X&&(this.R?_="headers="+_r(Vu(X))+"&"+_:this.u&&qo(E,this.u,X)),Wo(this.h,q),this.Ra&&Ke(E,"TYPE","init"),this.S?(Ke(E,"$req",_),Ke(E,"SID","null"),q.U=!0,er(q,E,null)):er(q,E,_),this.I=2}}else this.I==3&&(h?Ys(this,h):this.i.length==0||El(this.h)||Ys(this))};function Ys(h,_){var E;_?E=_.l:E=h.V++;const R=On(h.J);Ke(R,"SID",h.M),Ke(R,"RID",E),Ke(R,"AID",h.K),Ar(h,R),h.u&&h.o&&qo(R,h.u,h.o),E=new Ln(h,h.j,E,h.D+1),h.u===null&&(E.J=h.o),_&&(h.i=_.G.concat(h.i)),_=Nl(h,E,1e3),E.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Wo(h.h,E),er(E,R,_)}function Ar(h,_){h.H&&fe(h.H,function(E,R){Ke(_,R,E)}),h.l&&fe({},function(E,R){Ke(_,R,E)})}function Nl(h,_,E){E=Math.min(h.i.length,E);const R=h.l?m(h.l.Ka,h.l,h):null;e:{var q=h.i;let Re=-1;for(;;){const yt=["count="+E];Re==-1?E>0?(Re=q[0].g,yt.push("ofs="+Re)):Re=0:yt.push("ofs="+Re);let Ye=!0;for(let Tt=0;Tt<E;Tt++){var X=q[Tt].g;const Cn=q[Tt].map;if(X-=Re,X<0)Re=Math.max(0,q[Tt].g-100),Ye=!1;else try{X="req"+X+"_"||"";try{var oe=Cn instanceof Map?Cn:Object.entries(Cn);for(const[ii,Pr]of oe){let jr=Pr;f(Pr)&&(jr=Pi(Pr)),yt.push(X+ii+"="+encodeURIComponent(jr))}}catch(ii){throw yt.push(X+"type="+encodeURIComponent("_badmap")),ii}}catch{R&&R(Cn)}}if(Ye){oe=yt.join("&");break e}}oe=void 0}return h=h.i.splice(0,E),_.G=h,oe}function Yt(h){if(!h.g&&!h.v){h.Y=1;var _=h.Da;W||b(),H||(W(),H=!0),A.add(_,h),h.A=0}}function Rr(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Vi(m(h.Da,h),Zo(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,$i(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Vi(m(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ht(10),bn(this),$i(this))};function Xs(h){h.B!=null&&(l.clearTimeout(h.B),h.B=null)}function $i(h){h.g=new Ln(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var _=On(h.na);Ke(_,"RID","rpc"),Ke(_,"SID",h.M),Ke(_,"AID",h.K),Ke(_,"CI",h.F?"0":"1"),!h.F&&h.ia&&Ke(_,"TO",h.ia),Ke(_,"TYPE","xmlhttp"),Ar(h,_),h.u&&h.o&&qo(_,h.u,h.o),h.O&&(h.g.H=h.O);var E=h.g;h=h.ba,E.M=1,E.A=Zr(On(_)),E.u=null,E.R=!0,_l(E,h)}n.Va=function(){this.C!=null&&(this.C=null,bn(this),Rr(this),ht(19))};function Xo(h){h.C!=null&&(l.clearTimeout(h.C),h.C=null)}function Jo(h,_){var E=null;if(h.g==_){Xo(h),Xs(h),h.g=null;var R=2}else if(Tl(h.h,_))E=_.G,Ws(h.h,_),R=1;else return;if(h.I!=0){if(_.o)if(R==1){E=_.u?_.u.length:0,_=Date.now()-_.F;var q=h.D;R=Di(),gt(R,new vl(R,E)),ri(h)}else Yt(h);else if(q=_.m,q==3||q==0&&_.X>0||!(R==1&&Ou(h,_)||R==2&&Rr(h)))switch(E&&E.length>0&&(_=h.h,_.i=_.i.concat(E)),q){case 1:In(h,5);break;case 4:In(h,10);break;case 3:In(h,6);break;default:In(h,2)}}}function Zo(h,_){let E=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(E*=2),E*_}function In(h,_){if(h.j.info("Error code "+_),_==2){var E=m(h.bb,h),R=h.Ua;const q=!R;R=new wr(R||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Hs(R,"https"),Zr(R),q?Sr(R.toString(),E):br(R.toString(),E)}else ht(2);h.I=0,h.l&&h.l.pa(_),Js(h),Yo(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),ht(2)):(this.j.info("Failed to ping google.com"),ht(1))};function Js(h){if(h.I=0,h.ja=[],h.l){const _=Tn(h.h);(_.length!=0||h.i.length!=0)&&(T(h.ja,_),T(h.ja,h.i),h.h.i.length=0,k(h.i),h.i.length=0),h.l.oa()}}function Dl(h,_,E){var R=E instanceof wr?On(E):new wr(E);if(R.g!="")_&&(R.g=_+"."+R.g),Er(R,R.u);else{var q=l.location;R=q.protocol,_=_?_+"."+q.hostname:q.hostname,q=+q.port;const X=new wr(null);R&&Hs(X,R),_&&(X.g=_),q&&Er(X,q),E&&(X.h=E),R=X}return E=h.G,_=h.wa,E&&_&&Ke(R,E,_),Ke(R,"VER",h.ka),Ar(h,R),R}function Fu(h,_,E){if(_&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Aa&&!h.ma?new Je(new ei({ab:E})):new Je(h.ma),_.Fa(h.L),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bu(){}n=Bu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function ea(){}ea.prototype.g=function(h,_){return new $t(h,_)};function $t(h,_){Et.call(this),this.g=new Go(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(h?h["X-WebChannel-Client-Profile"]=_.sa:h={"X-WebChannel-Client-Profile":_.sa}),this.g.U=h,(h=_&&_.Qb)&&!V(h)&&(this.g.u=h),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!V(_)&&(this.g.G=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new Wi(this)}v($t,Et),$t.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},$t.prototype.close=function(){Qo(this.g)},$t.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.v&&(E={},E.__data__=Pi(h),h=E);_.i.push(new pf(_.Ya++,h)),_.I==3&&ri(_)},$t.prototype.N=function(){this.g.l=null,delete this.j,Qo(this.g),delete this.g,$t.Z.N.call(this)};function zu(h){Oo.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const E in _){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}v(zu,Oo);function Uu(){yl.call(this),this.status=1}v(Uu,yl);function Wi(h){this.g=h}v(Wi,Bu),Wi.prototype.ra=function(){gt(this.g,"a")},Wi.prototype.qa=function(h){gt(this.g,new zu(h))},Wi.prototype.pa=function(h){gt(this.g,new Uu)},Wi.prototype.oa=function(){gt(this.g,"b")},ea.prototype.createWebChannel=ea.prototype.g,$t.prototype.send=$t.prototype.o,$t.prototype.open=$t.prototype.m,$t.prototype.close=$t.prototype.close,tT=function(){return new ea},eT=function(){return Di()},ZE=Zn,Vm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Li.NO_ERROR=0,Li.TIMEOUT=8,Li.HTTP_ERROR=6,Jd=Li,Oi.COMPLETE="complete",JE=Oi,Tu.EventType=Ni,Ni.OPEN="a",Ni.CLOSE="b",Ni.ERROR="c",Ni.MESSAGE="d",Et.prototype.listen=Et.prototype.J,hc=Tu,Je.prototype.listenOnce=Je.prototype.K,Je.prototype.getLastError=Je.prototype.Ha,Je.prototype.getLastErrorCode=Je.prototype.ya,Je.prototype.getStatus=Je.prototype.ca,Je.prototype.getResponseJson=Je.prototype.La,Je.prototype.getResponseText=Je.prototype.la,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Fa,XE=Je}).apply(typeof Od<"u"?Od:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let el="12.8.0";function Oj(n){el=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const So=new jg("@firebase/firestore");function Ea(){return So.logLevel}function ue(n,...e){if(So.logLevel<=Le.DEBUG){const t=e.map(Hg);So.debug(`Firestore (${el}): ${n}`,...t)}}function Ti(n,...e){if(So.logLevel<=Le.ERROR){const t=e.map(Hg);So.error(`Firestore (${el}): ${n}`,...t)}}function Ba(n,...e){if(So.logLevel<=Le.WARN){const t=e.map(Hg);So.warn(`Firestore (${el}): ${n}`,...t)}}function Hg(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ke(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,nT(n,r,t)}function nT(n,e,t){let r=`FIRESTORE (${el}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ti(r),new Error(r)}function Qe(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||nT(e,s,r)}function Pe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends Ii{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Fj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(nn.UNAUTHENTICATED)))}shutdown(){}}class Bj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class zj{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Qe(this.o===void 0,42304);let r=this.i;const s=d=>this.i!==r?(r=this.i,t(d)):Promise.resolve();let a=new vi;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new vi,e.enqueueRetryable((()=>s(this.currentUser)))};const l=()=>{const d=a;e.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},f=d=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((d=>f(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?f(d):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new vi)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Qe(typeof r.accessToken=="string",31837,{l:r}),new rT(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string",2055,{h:e}),new nn(e)}}class Uj{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class $j{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Uj(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(nn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class fx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Wj{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,jn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Qe(this.o===void 0,3512);const r=a=>{a.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.m;return this.m=a.token,ue("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const s=a=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>s(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new fx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Qe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new fx(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hj(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=Hj(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<t&&(r+=e.charAt(s[a]%62))}return r}}function Oe(n,e){return n<e?-1:n>e?1:0}function Mm(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const s=n.charAt(r),a=e.charAt(r);if(s!==a)return Jp(s)===Jp(a)?Oe(s,a):Jp(s)?1:-1}return Oe(n.length,e.length)}const Kj=55296,qj=57343;function Jp(n){const e=n.charCodeAt(0);return e>=Kj&&e<=qj}function za(n,e,t){return n.length===e.length&&n.every(((r,s)=>t(r,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px="__name__";class Lr{constructor(e,t,r){t===void 0?t=0:t>e.length&&ke(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ke(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Lr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Lr?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const a=Lr.compareSegments(e.get(s),t.get(s));if(a!==0)return a}return Oe(e.length,t.length)}static compareSegments(e,t){const r=Lr.isNumericId(e),s=Lr.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?Lr.extractNumericId(e).compare(Lr.extractNumericId(t)):Mm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return gs.fromString(e.substring(4,e.length-2))}}class et extends Lr{construct(e,t,r){return new et(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new le(J.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((s=>s.length>0)))}return new et(t)}static emptyPath(){return new et([])}}const Gj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Gt extends Lr{construct(e,t,r){return new Gt(e,t,r)}static isValidIdentifier(e){return Gj.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Gt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===px}static keyField(){return new Gt([px])}static fromServerFormat(e){const t=[];let r="",s=0;const a=()=>{if(r.length===0)throw new le(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;s<e.length;){const f=e[s];if(f==="\\"){if(s+1===e.length)throw new le(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new le(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,s+=2}else f==="`"?(l=!l,s++):f!=="."||l?(r+=f,s++):(a(),s++)}if(a(),l)throw new le(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Gt(t)}static emptyPath(){return new Gt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.path=e}static fromPath(e){return new _e(et.fromString(e))}static fromName(e){return new _e(et.fromString(e).popFirst(5))}static empty(){return new _e(et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return et.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new et(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iT(n,e,t){if(!t)throw new le(J.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Qj(n,e,t,r){if(e===!0&&r===!0)throw new le(J.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function mx(n){if(!_e.isDocumentKey(n))throw new le(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function gx(n){if(_e.isDocumentKey(n))throw new le(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function sT(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Hh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ke(12329,{type:typeof n})}function Wr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new le(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Hh(n);throw new le(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Yj(n,e){if(e<=0)throw new le(J.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(n,e){const t={typeString:n};return e&&(t.value=e),t}function su(n,e){if(!sT(n))throw new le(J.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const l=n[r];if(s&&typeof l!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(a!==void 0&&l!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new le(J.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx=-62135596800,vx=1e6;class it{static now(){return it.fromMillis(Date.now())}static fromDate(e){return it.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*vx);return new it(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new le(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new le(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<yx)throw new le(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/vx}_compareTo(e){return this.seconds===e.seconds?Oe(this.nanoseconds,e.nanoseconds):Oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:it._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(su(e,it._jsonSchema))return new it(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-yx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}it._jsonSchemaVersion="firestore/timestamp/1.0",it._jsonSchema={type:Ct("string",it._jsonSchemaVersion),seconds:Ct("number"),nanoseconds:Ct("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{static fromTimestamp(e){return new Ie(e)}static min(){return new Ie(new it(0,0))}static max(){return new Ie(new it(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jc=-1;function Xj(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Ie.fromTimestamp(r===1e9?new it(t+1,0):new it(t,r));return new _s(s,_e.empty(),e)}function Jj(n){return new _s(n.readTime,n.key,jc)}class _s{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new _s(Ie.min(),_e.empty(),jc)}static max(){return new _s(Ie.max(),_e.empty(),jc)}}function Zj(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=_e.comparator(n.documentKey,e.documentKey),t!==0?t:Oe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class t5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tl(n){if(n.code!==J.FAILED_PRECONDITION||n.message!==e5)throw n;ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ke(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Z(((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Z?t:Z.resolve(t)}catch(t){return Z.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Z.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Z.reject(t)}static resolve(e){return new Z(((t,r)=>{t(e)}))}static reject(e){return new Z(((t,r)=>{r(e)}))}static waitFor(e){return new Z(((t,r)=>{let s=0,a=0,l=!1;e.forEach((f=>{++s,f.next((()=>{++a,l&&a===s&&t()}),(d=>r(d)))})),l=!0,a===s&&t()}))}static or(e){let t=Z.resolve(!1);for(const r of e)t=t.next((s=>s?Z.resolve(s):r()));return t}static forEach(e,t){const r=[];return e.forEach(((s,a)=>{r.push(t.call(this,s,a))})),this.waitFor(r)}static mapArray(e,t){return new Z(((r,s)=>{const a=e.length,l=new Array(a);let f=0;for(let d=0;d<a;d++){const m=d;t(e[m]).next((g=>{l[m]=g,++f,f===a&&r(l)}),(g=>s(g)))}}))}static doWhile(e,t){return new Z(((r,s)=>{const a=()=>{e()===!0?t().next((()=>{a()}),s):r()};a()}))}}function n5(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function nl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Kh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qg=-1;function qh(n){return n==null}function vh(n){return n===0&&1/n==-1/0}function r5(n){return typeof n=="number"&&Number.isInteger(n)&&!vh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT="";function i5(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=xx(e)),e=s5(n.get(t),e);return xx(e)}function s5(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const a=n.charAt(s);switch(a){case"\0":t+="";break;case oT:t+="";break;default:t+=a}}return t}function xx(n){return n+oT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ns(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function aT(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,t){this.comparator=e,this.root=t||qt.EMPTY}insert(e,t){return new dt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,qt.BLACK,null,null))}remove(e){return new dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fd(this.root,e,this.comparator,!0)}}class Fd{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class qt{constructor(e,t,r,s,a){this.key=e,this.value=t,this.color=r??qt.RED,this.left=s??qt.EMPTY,this.right=a??qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,a){return new qt(e??this.key,t??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,t,r),null):a===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return qt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ke(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ke(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ke(27949);return e+(this.isRed()?0:1)}}qt.EMPTY=null,qt.RED=!0,qt.BLACK=!1;qt.EMPTY=new class{constructor(){this.size=0}get key(){throw ke(57766)}get value(){throw ke(16141)}get color(){throw ke(16727)}get left(){throw ke(29726)}get right(){throw ke(36894)}copy(e,t,r,s,a){return this}insert(e,t,r){return new qt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.comparator=e,this.data=new dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new wx(this.data.getIterator())}getIteratorFrom(e){return new wx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Dt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Dt(this.comparator);return t.data=e,t}}class wx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.fields=e,e.sort(Gt.comparator)}static empty(){return new Nn([])}unionWith(e){let t=new Dt(Gt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Nn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return za(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new lT("Invalid base64 string: "+a):a}})(e);return new Qt(t)}static fromUint8Array(e){const t=(function(s){let a="";for(let l=0;l<s.length;++l)a+=String.fromCharCode(s[l]);return a})(e);return new Qt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qt.EMPTY_BYTE_STRING=new Qt("");const o5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ws(n){if(Qe(!!n,39018),typeof n=="string"){let e=0;const t=o5.exec(n);if(Qe(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:xt(n.seconds),nanos:xt(n.nanos)}}function xt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Es(n){return typeof n=="string"?Qt.fromBase64String(n):Qt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT="server_timestamp",uT="__type__",dT="__previous_value__",hT="__local_write_time__";function Gg(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[uT])==null?void 0:r.stringValue)===cT}function Gh(n){const e=n.mapValue.fields[dT];return Gg(e)?Gh(e):e}function Nc(n){const e=ws(n.mapValue.fields[hT].timestampValue);return new it(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a5{constructor(e,t,r,s,a,l,f,d,m,g,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=f,this.longPollingOptions=d,this.useFetchStreams=m,this.isUsingEmulator=g,this.apiKey=v}}const xh="(default)";class Dc{constructor(e,t){this.projectId=e,this.database=t||xh}static empty(){return new Dc("","")}get isDefaultDatabase(){return this.database===xh}isEqual(e){return e instanceof Dc&&e.projectId===this.projectId&&e.database===this.database}}function l5(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new le(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Dc(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT="__type__",c5="__max__",Bd={mapValue:{}},pT="__vector__",_h="value";function Ts(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Gg(n)?4:d5(n)?9007199254740991:u5(n)?10:11:ke(28295,{value:n})}function Hr(n,e){if(n===e)return!0;const t=Ts(n);if(t!==Ts(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Nc(n).isEqual(Nc(e));case 3:return(function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const l=ws(s.timestampValue),f=ws(a.timestampValue);return l.seconds===f.seconds&&l.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,a){return Es(s.bytesValue).isEqual(Es(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,a){return xt(s.geoPointValue.latitude)===xt(a.geoPointValue.latitude)&&xt(s.geoPointValue.longitude)===xt(a.geoPointValue.longitude)})(n,e);case 2:return(function(s,a){if("integerValue"in s&&"integerValue"in a)return xt(s.integerValue)===xt(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const l=xt(s.doubleValue),f=xt(a.doubleValue);return l===f?vh(l)===vh(f):isNaN(l)&&isNaN(f)}return!1})(n,e);case 9:return za(n.arrayValue.values||[],e.arrayValue.values||[],Hr);case 10:case 11:return(function(s,a){const l=s.mapValue.fields||{},f=a.mapValue.fields||{};if(_x(l)!==_x(f))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(f[d]===void 0||!Hr(l[d],f[d])))return!1;return!0})(n,e);default:return ke(52216,{left:n})}}function Vc(n,e){return(n.values||[]).find((t=>Hr(t,e)))!==void 0}function Ua(n,e){if(n===e)return 0;const t=Ts(n),r=Ts(e);if(t!==r)return Oe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Oe(n.booleanValue,e.booleanValue);case 2:return(function(a,l){const f=xt(a.integerValue||a.doubleValue),d=xt(l.integerValue||l.doubleValue);return f<d?-1:f>d?1:f===d?0:isNaN(f)?isNaN(d)?0:-1:1})(n,e);case 3:return Ex(n.timestampValue,e.timestampValue);case 4:return Ex(Nc(n),Nc(e));case 5:return Mm(n.stringValue,e.stringValue);case 6:return(function(a,l){const f=Es(a),d=Es(l);return f.compareTo(d)})(n.bytesValue,e.bytesValue);case 7:return(function(a,l){const f=a.split("/"),d=l.split("/");for(let m=0;m<f.length&&m<d.length;m++){const g=Oe(f[m],d[m]);if(g!==0)return g}return Oe(f.length,d.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,l){const f=Oe(xt(a.latitude),xt(l.latitude));return f!==0?f:Oe(xt(a.longitude),xt(l.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Tx(n.arrayValue,e.arrayValue);case 10:return(function(a,l){var w,k,T,I;const f=a.fields||{},d=l.fields||{},m=(w=f[_h])==null?void 0:w.arrayValue,g=(k=d[_h])==null?void 0:k.arrayValue,v=Oe(((T=m==null?void 0:m.values)==null?void 0:T.length)||0,((I=g==null?void 0:g.values)==null?void 0:I.length)||0);return v!==0?v:Tx(m,g)})(n.mapValue,e.mapValue);case 11:return(function(a,l){if(a===Bd.mapValue&&l===Bd.mapValue)return 0;if(a===Bd.mapValue)return 1;if(l===Bd.mapValue)return-1;const f=a.fields||{},d=Object.keys(f),m=l.fields||{},g=Object.keys(m);d.sort(),g.sort();for(let v=0;v<d.length&&v<g.length;++v){const w=Mm(d[v],g[v]);if(w!==0)return w;const k=Ua(f[d[v]],m[g[v]]);if(k!==0)return k}return Oe(d.length,g.length)})(n.mapValue,e.mapValue);default:throw ke(23264,{he:t})}}function Ex(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Oe(n,e);const t=ws(n),r=ws(e),s=Oe(t.seconds,r.seconds);return s!==0?s:Oe(t.nanos,r.nanos)}function Tx(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const a=Ua(t[s],r[s]);if(a)return a}return Oe(t.length,r.length)}function $a(n){return Lm(n)}function Lm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=ws(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Es(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return _e.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",s=!0;for(const a of t.values||[])s?s=!1:r+=",",r+=Lm(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let s="{",a=!0;for(const l of r)a?a=!1:s+=",",s+=`${l}:${Lm(t.fields[l])}`;return s+"}"})(n.mapValue):ke(61005,{value:n})}function Zd(n){switch(Ts(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Gh(n);return e?16+Zd(e):16;case 5:return 2*n.stringValue.length;case 6:return Es(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,a)=>s+Zd(a)),0)})(n.arrayValue);case 10:case 11:return(function(r){let s=0;return Ns(r.fields,((a,l)=>{s+=a.length+Zd(l)})),s})(n.mapValue);default:throw ke(13486,{value:n})}}function kx(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Om(n){return!!n&&"integerValue"in n}function Qg(n){return!!n&&"arrayValue"in n}function Sx(n){return!!n&&"nullValue"in n}function bx(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function eh(n){return!!n&&"mapValue"in n}function u5(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[fT])==null?void 0:r.stringValue)===pT}function _c(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ns(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=_c(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=_c(n.arrayValue.values[t]);return e}return{...n}}function d5(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===c5}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.value=e}static empty(){return new wn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!eh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=_c(t)}setAll(e){let t=Gt.emptyPath(),r={},s=[];e.forEach(((l,f)=>{if(!t.isImmediateParentOf(f)){const d=this.getFieldsMap(t);this.applyChanges(d,r,s),r={},s=[],t=f.popLast()}l?r[f.lastSegment()]=_c(l):s.push(f.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,r,s)}delete(e){const t=this.field(e.popLast());eh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Hr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];eh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Ns(t,((s,a)=>e[s]=a));for(const s of r)delete e[s]}clone(){return new wn(_c(this.value))}}function mT(n){const e=[];return Ns(n.fields,((t,r)=>{const s=new Gt([t]);if(eh(r)){const a=mT(r.mapValue).fields;if(a.length===0)e.push(s);else for(const l of a)e.push(s.child(l))}else e.push(s)})),new Nn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e,t,r,s,a,l,f){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=a,this.data=l,this.documentState=f}static newInvalidDocument(e){return new rn(e,0,Ie.min(),Ie.min(),Ie.min(),wn.empty(),0)}static newFoundDocument(e,t,r,s){return new rn(e,1,t,Ie.min(),r,s,0)}static newNoDocument(e,t){return new rn(e,2,t,Ie.min(),Ie.min(),wn.empty(),0)}static newUnknownDocument(e,t){return new rn(e,3,t,Ie.min(),Ie.min(),wn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof rn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e,t){this.position=e,this.inclusive=t}}function Ix(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const a=e[s],l=n.position[s];if(a.field.isKeyField()?r=_e.comparator(_e.fromName(l.referenceValue),t.key):r=Ua(l,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function Cx(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Hr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,t="asc"){this.field=e,this.dir=t}}function h5(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{}class It extends gT{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new p5(e,t,r):t==="array-contains"?new y5(e,r):t==="in"?new v5(e,r):t==="not-in"?new x5(e,r):t==="array-contains-any"?new _5(e,r):new It(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new m5(e,r):new g5(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ua(t,this.value)):t!==null&&Ts(this.value)===Ts(t)&&this.matchesComparison(Ua(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ke(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class yr extends gT{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new yr(e,t)}matches(e){return yT(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function yT(n){return n.op==="and"}function vT(n){return f5(n)&&yT(n)}function f5(n){for(const e of n.filters)if(e instanceof yr)return!1;return!0}function Fm(n){if(n instanceof It)return n.field.canonicalString()+n.op.toString()+$a(n.value);if(vT(n))return n.filters.map((e=>Fm(e))).join(",");{const e=n.filters.map((t=>Fm(t))).join(",");return`${n.op}(${e})`}}function xT(n,e){return n instanceof It?(function(r,s){return s instanceof It&&r.op===s.op&&r.field.isEqual(s.field)&&Hr(r.value,s.value)})(n,e):n instanceof yr?(function(r,s){return s instanceof yr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((a,l,f)=>a&&xT(l,s.filters[f])),!0):!1})(n,e):void ke(19439)}function _T(n){return n instanceof It?(function(t){return`${t.field.canonicalString()} ${t.op} ${$a(t.value)}`})(n):n instanceof yr?(function(t){return t.op.toString()+" {"+t.getFilters().map(_T).join(" ,")+"}"})(n):"Filter"}class p5 extends It{constructor(e,t,r){super(e,t,r),this.key=_e.fromName(r.referenceValue)}matches(e){const t=_e.comparator(e.key,this.key);return this.matchesComparison(t)}}class m5 extends It{constructor(e,t){super(e,"in",t),this.keys=wT("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class g5 extends It{constructor(e,t){super(e,"not-in",t),this.keys=wT("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function wT(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((r=>_e.fromName(r.referenceValue)))}class y5 extends It{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Qg(t)&&Vc(t.arrayValue,this.value)}}class v5 extends It{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Vc(this.value.arrayValue,t)}}class x5 extends It{constructor(e,t){super(e,"not-in",t)}matches(e){if(Vc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Vc(this.value.arrayValue,t)}}class _5 extends It{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Qg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Vc(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w5{constructor(e,t=null,r=[],s=[],a=null,l=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=l,this.endAt=f,this.Te=null}}function Ax(n,e=null,t=[],r=[],s=null,a=null,l=null){return new w5(n,e,t,r,s,a,l)}function Yg(n){const e=Pe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Fm(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),qh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>$a(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>$a(r))).join(",")),e.Te=t}return e.Te}function Xg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!h5(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!xT(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Cx(n.startAt,e.startAt)&&Cx(n.endAt,e.endAt)}function Bm(n){return _e.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e,t=null,r=[],s=[],a=null,l="F",f=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=l,this.startAt=f,this.endAt=d,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function E5(n,e,t,r,s,a,l,f){return new rl(n,e,t,r,s,a,l,f)}function Jg(n){return new rl(n)}function Rx(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function T5(n){return _e.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function ET(n){return n.collectionGroup!==null}function wc(n){const e=Pe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let f=new Dt(Gt.comparator);return l.filters.forEach((d=>{d.getFlattenedFilters().forEach((m=>{m.isInequality()&&(f=f.add(m.field))}))})),f})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Mc(a,r))})),t.has(Gt.keyField().canonicalString())||e.Ie.push(new Mc(Gt.keyField(),r))}return e.Ie}function Fr(n){const e=Pe(n);return e.Ee||(e.Ee=k5(e,wc(n))),e.Ee}function k5(n,e){if(n.limitType==="F")return Ax(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const a=s.dir==="desc"?"asc":"desc";return new Mc(s.field,a)}));const t=n.endAt?new wh(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new wh(n.startAt.position,n.startAt.inclusive):null;return Ax(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function zm(n,e){const t=n.filters.concat([e]);return new rl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function S5(n,e){const t=n.explicitOrderBy.concat([e]);return new rl(n.path,n.collectionGroup,t,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}function Eh(n,e,t){return new rl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Qh(n,e){return Xg(Fr(n),Fr(e))&&n.limitType===e.limitType}function TT(n){return`${Yg(Fr(n))}|lt:${n.limitType}`}function Ta(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((s=>_T(s))).join(", ")}]`),qh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((s=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(s))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((s=>$a(s))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((s=>$a(s))).join(",")),`Target(${r})`})(Fr(n))}; limitType=${n.limitType})`}function Yh(n,e){return e.isFoundDocument()&&(function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):_e.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,e)&&(function(r,s){for(const a of wc(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0})(n,e)&&(function(r,s){return!(r.startAt&&!(function(l,f,d){const m=Ix(l,f,d);return l.inclusive?m<=0:m<0})(r.startAt,wc(r),s)||r.endAt&&!(function(l,f,d){const m=Ix(l,f,d);return l.inclusive?m>=0:m>0})(r.endAt,wc(r),s))})(n,e)}function b5(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function kT(n){return(e,t)=>{let r=!1;for(const s of wc(n)){const a=I5(s,e,t);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function I5(n,e,t){const r=n.field.isKeyField()?_e.comparator(e.key,t.key):(function(a,l,f){const d=l.data.field(a),m=f.data.field(a);return d!==null&&m!==null?Ua(d,m):ke(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ke(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ns(this.inner,((t,r)=>{for(const[s,a]of r)e(s,a)}))}isEmpty(){return aT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C5=new dt(_e.comparator);function ki(){return C5}const ST=new dt(_e.comparator);function fc(...n){let e=ST;for(const t of n)e=e.insert(t.key,t);return e}function bT(n){let e=ST;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function go(){return Ec()}function IT(){return Ec()}function Ec(){return new Ro((n=>n.toString()),((n,e)=>n.isEqual(e)))}const A5=new dt(_e.comparator),R5=new Dt(_e.comparator);function Fe(...n){let e=R5;for(const t of n)e=e.add(t);return e}const P5=new Dt(Oe);function j5(){return P5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vh(e)?"-0":e}}function CT(n){return{integerValue:""+n}}function AT(n,e){return r5(e)?CT(e):Zg(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(){this._=void 0}}function N5(n,e,t){return n instanceof Lc?(function(s,a){const l={fields:{[uT]:{stringValue:cT},[hT]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Gg(a)&&(a=Gh(a)),a&&(l.fields[dT]=a),{mapValue:l}})(t,e):n instanceof Wa?PT(n,e):n instanceof Oc?jT(n,e):(function(s,a){const l=RT(s,a),f=Px(l)+Px(s.Ae);return Om(l)&&Om(s.Ae)?CT(f):Zg(s.serializer,f)})(n,e)}function D5(n,e,t){return n instanceof Wa?PT(n,e):n instanceof Oc?jT(n,e):t}function RT(n,e){return n instanceof Fc?(function(r){return Om(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class Lc extends Xh{}class Wa extends Xh{constructor(e){super(),this.elements=e}}function PT(n,e){const t=NT(e);for(const r of n.elements)t.some((s=>Hr(s,r)))||t.push(r);return{arrayValue:{values:t}}}class Oc extends Xh{constructor(e){super(),this.elements=e}}function jT(n,e){let t=NT(e);for(const r of n.elements)t=t.filter((s=>!Hr(s,r)));return{arrayValue:{values:t}}}class Fc extends Xh{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Px(n){return xt(n.integerValue||n.doubleValue)}function NT(n){return Qg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e,t){this.field=e,this.transform=t}}function V5(n,e){return n.field.isEqual(e.field)&&(function(r,s){return r instanceof Wa&&s instanceof Wa||r instanceof Oc&&s instanceof Oc?za(r.elements,s.elements,Hr):r instanceof Fc&&s instanceof Fc?Hr(r.Ae,s.Ae):r instanceof Lc&&s instanceof Lc})(n.transform,e.transform)}class M5{constructor(e,t){this.version=e,this.transformResults=t}}class hr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new hr}static exists(e){return new hr(void 0,e)}static updateTime(e){return new hr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function th(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Jh{}function DT(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new MT(n.key,hr.none()):new ou(n.key,n.data,hr.none());{const t=n.data,r=wn.empty();let s=new Dt(Gt.comparator);for(let a of e.fields)if(!s.has(a)){let l=t.field(a);l===null&&a.length>1&&(a=a.popLast(),l=t.field(a)),l===null?r.delete(a):r.set(a,l),s=s.add(a)}return new Ds(n.key,r,new Nn(s.toArray()),hr.none())}}function L5(n,e,t){n instanceof ou?(function(s,a,l){const f=s.value.clone(),d=Nx(s.fieldTransforms,a,l.transformResults);f.setAll(d),a.convertToFoundDocument(l.version,f).setHasCommittedMutations()})(n,e,t):n instanceof Ds?(function(s,a,l){if(!th(s.precondition,a))return void a.convertToUnknownDocument(l.version);const f=Nx(s.fieldTransforms,a,l.transformResults),d=a.data;d.setAll(VT(s)),d.setAll(f),a.convertToFoundDocument(l.version,d).setHasCommittedMutations()})(n,e,t):(function(s,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function Tc(n,e,t,r){return n instanceof ou?(function(a,l,f,d){if(!th(a.precondition,l))return f;const m=a.value.clone(),g=Dx(a.fieldTransforms,d,l);return m.setAll(g),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),null})(n,e,t,r):n instanceof Ds?(function(a,l,f,d){if(!th(a.precondition,l))return f;const m=Dx(a.fieldTransforms,d,l),g=l.data;return g.setAll(VT(a)),g.setAll(m),l.convertToFoundDocument(l.version,g).setHasLocalMutations(),f===null?null:f.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((v=>v.field)))})(n,e,t,r):(function(a,l,f){return th(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):f})(n,e,t)}function O5(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),a=RT(r.transform,s||null);a!=null&&(t===null&&(t=wn.empty()),t.set(r.field,a))}return t||null}function jx(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&za(r,s,((a,l)=>V5(a,l)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class ou extends Jh{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ds extends Jh{constructor(e,t,r,s,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function VT(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function Nx(n,e,t){const r=new Map;Qe(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let s=0;s<t.length;s++){const a=n[s],l=a.transform,f=e.data.field(a.field);r.set(a.field,D5(l,f,t[s]))}return r}function Dx(n,e,t){const r=new Map;for(const s of n){const a=s.transform,l=t.data.field(s.field);r.set(s.field,N5(a,l,e))}return r}class MT extends Jh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class F5 extends Jh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B5{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&L5(a,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Tc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Tc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=IT();return this.mutations.forEach((s=>{const a=e.get(s.key),l=a.overlayedDocument;let f=this.applyToLocalView(l,a.mutatedFields);f=t.has(s.key)?null:f;const d=DT(l,f);d!==null&&r.set(s.key,d),l.isValidDocument()||l.convertToNoDocument(Ie.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Fe())}isEqual(e){return this.batchId===e.batchId&&za(this.mutations,e.mutations,((t,r)=>jx(t,r)))&&za(this.baseMutations,e.baseMutations,((t,r)=>jx(t,r)))}}class ty{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Qe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return A5})();const a=e.mutations;for(let l=0;l<a.length;l++)s=s.insert(a[l].key,r[l].version);return new ty(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z5{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U5{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var St,ze;function $5(n){switch(n){case J.OK:return ke(64938);case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return ke(15467,{code:n})}}function LT(n){if(n===void 0)return Ti("GRPC error has no .code"),J.UNKNOWN;switch(n){case St.OK:return J.OK;case St.CANCELLED:return J.CANCELLED;case St.UNKNOWN:return J.UNKNOWN;case St.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case St.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case St.INTERNAL:return J.INTERNAL;case St.UNAVAILABLE:return J.UNAVAILABLE;case St.UNAUTHENTICATED:return J.UNAUTHENTICATED;case St.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case St.NOT_FOUND:return J.NOT_FOUND;case St.ALREADY_EXISTS:return J.ALREADY_EXISTS;case St.PERMISSION_DENIED:return J.PERMISSION_DENIED;case St.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case St.ABORTED:return J.ABORTED;case St.OUT_OF_RANGE:return J.OUT_OF_RANGE;case St.UNIMPLEMENTED:return J.UNIMPLEMENTED;case St.DATA_LOSS:return J.DATA_LOSS;default:return ke(39323,{code:n})}}(ze=St||(St={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W5(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H5=new gs([4294967295,4294967295],0);function Vx(n){const e=W5().encode(n),t=new YE;return t.update(e),new Uint8Array(t.digest())}function Mx(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new gs([t,r],0),new gs([s,a],0)]}class ny{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new pc(`Invalid padding: ${t}`);if(r<0)throw new pc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new pc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new pc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=gs.fromNumber(this.ge)}ye(e,t,r){let s=e.add(t.multiply(gs.fromNumber(r)));return s.compare(H5)===1&&(s=new gs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Vx(e),[r,s]=Mx(t);for(let a=0;a<this.hashCount;a++){const l=this.ye(r,s,a);if(!this.we(l))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new ny(a,s,t);return r.forEach((f=>l.insert(f))),l}insert(e){if(this.ge===0)return;const t=Vx(e),[r,s]=Mx(t);for(let a=0;a<this.hashCount;a++){const l=this.ye(r,s,a);this.be(l)}}be(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class pc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e,t,r,s,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,au.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Zh(Ie.min(),s,new dt(Oe),ki(),Fe())}}class au{constructor(e,t,r,s,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new au(r,t,Fe(),Fe(),Fe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e,t,r,s){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=s}}class OT{constructor(e,t){this.targetId=e,this.Ce=t}}class FT{constructor(e,t,r=Qt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class Lx{constructor(){this.ve=0,this.Fe=Ox(),this.Me=Qt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Fe(),t=Fe(),r=Fe();return this.Fe.forEach(((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:ke(38017,{changeType:a})}})),new au(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=Ox()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Qe(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class K5{constructor(e){this.Ge=e,this.ze=new Map,this.je=ki(),this.He=zd(),this.Je=zd(),this.Ze=new dt(Oe)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:ke(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,r=e.Ce.count,s=this.ot(t);if(s){const a=s.target;if(Bm(a))if(r===0){const l=new _e(a.path);this.et(t,l,rn.newNoDocument(l,Ie.min()))}else Qe(r===1,20013,{expectedCount:r});else{const l=this._t(t);if(l!==r){const f=this.ut(e),d=f?this.ct(f,e,l):1;if(d!==0){this.it(t);const m=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,m)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=t;let l,f;try{l=Es(r).toUint8Array()}catch(d){if(d instanceof lT)return Ba("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{f=new ny(l,s,a)}catch(d){return Ba(d instanceof pc?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return f.ge===0?null:f}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let s=0;return r.forEach((a=>{const l=this.Ge.ht(),f=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(f)||(this.et(t,a,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((a,l)=>{const f=this.ot(l);if(f){if(a.current&&Bm(f.target)){const d=new _e(f.target.path);this.It(d).has(l)||this.Et(l,d)||this.et(l,d,rn.newNoDocument(d,e))}a.Be&&(t.set(l,a.ke()),a.Ke())}}));let r=Fe();this.Je.forEach(((a,l)=>{let f=!0;l.forEachWhile((d=>{const m=this.ot(d);return!m||m.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(r=r.add(a))})),this.je.forEach(((a,l)=>l.setReadTime(e)));const s=new Zh(e,t,this.Ze,this.je,r);return this.je=ki(),this.He=zd(),this.Je=zd(),this.Ze=new dt(Oe),s}Ye(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.qe(t,1):s.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new Lx,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Dt(Oe),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Dt(Oe),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ue("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Lx),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function zd(){return new dt(_e.comparator)}function Ox(){return new dt(_e.comparator)}const q5={asc:"ASCENDING",desc:"DESCENDING"},G5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Q5={and:"AND",or:"OR"};class Y5{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Um(n,e){return n.useProto3Json||qh(e)?e:{value:e}}function Th(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function BT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function X5(n,e){return Th(n,e.toTimestamp())}function Br(n){return Qe(!!n,49232),Ie.fromTimestamp((function(t){const r=ws(t);return new it(r.seconds,r.nanos)})(n))}function ry(n,e){return $m(n,e).canonicalString()}function $m(n,e){const t=(function(s){return new et(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function zT(n){const e=et.fromString(n);return Qe(KT(e),10190,{key:e.toString()}),e}function Wm(n,e){return ry(n.databaseId,e.path)}function Zp(n,e){const t=zT(e);if(t.get(1)!==n.databaseId.projectId)throw new le(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new le(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new _e($T(t))}function UT(n,e){return ry(n.databaseId,e)}function J5(n){const e=zT(n);return e.length===4?et.emptyPath():$T(e)}function Hm(n){return new et(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function $T(n){return Qe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Fx(n,e,t){return{name:Wm(n,e),fields:t.value.mapValue.fields}}function Z5(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:ke(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=(function(m,g){return m.useProto3Json?(Qe(g===void 0||typeof g=="string",58123),Qt.fromBase64String(g||"")):(Qe(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),Qt.fromUint8Array(g||new Uint8Array))})(n,e.targetChange.resumeToken),l=e.targetChange.cause,f=l&&(function(m){const g=m.code===void 0?J.UNKNOWN:LT(m.code);return new le(g,m.message||"")})(l);t=new FT(r,s,a,f||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Zp(n,r.document.name),a=Br(r.document.updateTime),l=r.document.createTime?Br(r.document.createTime):Ie.min(),f=new wn({mapValue:{fields:r.document.fields}}),d=rn.newFoundDocument(s,a,l,f),m=r.targetIds||[],g=r.removedTargetIds||[];t=new nh(m,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Zp(n,r.document),a=r.readTime?Br(r.readTime):Ie.min(),l=rn.newNoDocument(s,a),f=r.removedTargetIds||[];t=new nh([],f,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Zp(n,r.document),a=r.removedTargetIds||[];t=new nh([],a,s,null)}else{if(!("filter"in e))return ke(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,l=new U5(s,a),f=r.targetId;t=new OT(f,l)}}return t}function eN(n,e){let t;if(e instanceof ou)t={update:Fx(n,e.key,e.value)};else if(e instanceof MT)t={delete:Wm(n,e.key)};else if(e instanceof Ds)t={update:Fx(n,e.key,e.data),updateMask:cN(e.fieldMask)};else{if(!(e instanceof F5))return ke(16599,{dt:e.type});t={verify:Wm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(a,l){const f=l.transform;if(f instanceof Lc)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Wa)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Oc)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Fc)return{fieldPath:l.field.canonicalString(),increment:f.Ae};throw ke(20930,{transform:l.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(s,a){return a.updateTime!==void 0?{updateTime:X5(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:ke(27497)})(n,e.precondition)),t}function tN(n,e){return n&&n.length>0?(Qe(e!==void 0,14353),n.map((t=>(function(s,a){let l=s.updateTime?Br(s.updateTime):Br(a);return l.isEqual(Ie.min())&&(l=Br(a)),new M5(l,s.transformResults||[])})(t,e)))):[]}function nN(n,e){return{documents:[UT(n,e.path)]}}function rN(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=UT(n,s);const a=(function(m){if(m.length!==0)return HT(yr.create(m,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const l=(function(m){if(m.length!==0)return m.map((g=>(function(w){return{field:ka(w.field),direction:oN(w.dir)}})(g)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const f=Um(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:t,parent:s}}function iN(n){let e=J5(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Qe(r===1,65062);const g=t.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let a=[];t.where&&(a=(function(v){const w=WT(v);return w instanceof yr&&vT(w)?w.getFilters():[w]})(t.where));let l=[];t.orderBy&&(l=(function(v){return v.map((w=>(function(T){return new Mc(Sa(T.field),(function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(T.direction))})(w)))})(t.orderBy));let f=null;t.limit&&(f=(function(v){let w;return w=typeof v=="object"?v.value:v,qh(w)?null:w})(t.limit));let d=null;t.startAt&&(d=(function(v){const w=!!v.before,k=v.values||[];return new wh(k,w)})(t.startAt));let m=null;return t.endAt&&(m=(function(v){const w=!v.before,k=v.values||[];return new wh(k,w)})(t.endAt)),E5(e,s,l,a,f,"F",d,m)}function sN(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ke(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function WT(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Sa(t.unaryFilter.field);return It.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Sa(t.unaryFilter.field);return It.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Sa(t.unaryFilter.field);return It.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Sa(t.unaryFilter.field);return It.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ke(61313);default:return ke(60726)}})(n):n.fieldFilter!==void 0?(function(t){return It.create(Sa(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ke(58110);default:return ke(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return yr.create(t.compositeFilter.filters.map((r=>WT(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ke(1026)}})(t.compositeFilter.op))})(n):ke(30097,{filter:n})}function oN(n){return q5[n]}function aN(n){return G5[n]}function lN(n){return Q5[n]}function ka(n){return{fieldPath:n.canonicalString()}}function Sa(n){return Gt.fromServerFormat(n.fieldPath)}function HT(n){return n instanceof It?(function(t){if(t.op==="=="){if(bx(t.value))return{unaryFilter:{field:ka(t.field),op:"IS_NAN"}};if(Sx(t.value))return{unaryFilter:{field:ka(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(bx(t.value))return{unaryFilter:{field:ka(t.field),op:"IS_NOT_NAN"}};if(Sx(t.value))return{unaryFilter:{field:ka(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ka(t.field),op:aN(t.op),value:t.value}}})(n):n instanceof yr?(function(t){const r=t.getFilters().map((s=>HT(s)));return r.length===1?r[0]:{compositeFilter:{op:lN(t.op),filters:r}}})(n):ke(54877,{filter:n})}function cN(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function KT(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function qT(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e,t,r,s,a=Ie.min(),l=Ie.min(),f=Qt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=f,this.expectedCount=d}withSequenceNumber(e){return new ds(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ds(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ds(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ds(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e){this.yt=e}}function dN(n){const e=iN({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Eh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(){this.Sn=new fN}addToCollectionParentIndex(e,t){return this.Sn.add(t),Z.resolve()}getCollectionParents(e,t){return Z.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return Z.resolve()}deleteFieldIndex(e,t){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,t){return Z.resolve()}getDocumentsMatchingTarget(e,t){return Z.resolve(null)}getIndexType(e,t){return Z.resolve(0)}getFieldIndexes(e,t){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,t){return Z.resolve(_s.min())}getMinOffsetFromCollectionGroup(e,t){return Z.resolve(_s.min())}updateCollectionGroup(e,t,r){return Z.resolve()}updateIndexEntries(e,t){return Z.resolve()}}class fN{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Dt(et.comparator),a=!s.has(r);return this.index[t]=s.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Dt(et.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},GT=41943040;class _n{static withCacheSize(e){return new _n(e,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_n.DEFAULT_COLLECTION_PERCENTILE=10,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_n.DEFAULT=new _n(GT,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_n.DISABLED=new _n(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Ha(0)}static ar(){return new Ha(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zx="LruGarbageCollector",pN=1048576;function Ux([n,e],[t,r]){const s=Oe(n,t);return s===0?Oe(e,r):s}class mN{constructor(e){this.Pr=e,this.buffer=new Dt(Ux),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Ux(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class gN{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){ue(zx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){nl(t)?ue(zx,"Ignoring IndexedDB error during garbage collection: ",t):await tl(t)}await this.Ar(3e5)}))}}class yN{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return Z.resolve(Kh.ce);const r=new mN(t);return this.Vr.forEachTarget(e,(s=>r.Er(s.sequenceNumber))).next((()=>this.Vr.mr(e,(s=>r.Er(s))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(Bx)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Bx):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,s,a,l,f,d,m;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),s=this.params.maximumSequenceNumbersToCollect):s=v,l=Date.now(),this.nthSequenceNumber(e,s)))).next((v=>(r=v,f=Date.now(),this.removeTargets(e,r,t)))).next((v=>(a=v,d=Date.now(),this.removeOrphanedDocuments(e,r)))).next((v=>(m=Date.now(),Ea()<=Le.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-g}ms
	Determined least recently used ${s} in `+(f-l)+`ms
	Removed ${a} targets in `+(d-f)+`ms
	Removed ${v} documents in `+(m-d)+`ms
Total Duration: ${m-g}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:v}))))}}function vN(n,e){return new yN(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(){this.changes=new Ro((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,rn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?Z.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(r!==null&&Tc(r.mutation,s,Nn.empty(),it.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Fe()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Fe()){const s=go();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,r).next((a=>{let l=fc();return a.forEach(((f,d)=>{l=l.insert(f,d.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const r=go();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Fe())))}populateOverlays(e,t,r){const s=[];return r.forEach((a=>{t.has(a)||s.push(a)})),this.documentOverlayCache.getOverlays(e,s).next((a=>{a.forEach(((l,f)=>{t.set(l,f)}))}))}computeViews(e,t,r,s){let a=ki();const l=Ec(),f=(function(){return Ec()})();return t.forEach(((d,m)=>{const g=r.get(m.key);s.has(m.key)&&(g===void 0||g.mutation instanceof Ds)?a=a.insert(m.key,m):g!==void 0?(l.set(m.key,g.mutation.getFieldMask()),Tc(g.mutation,m,g.mutation.getFieldMask(),it.now())):l.set(m.key,Nn.empty())})),this.recalculateAndSaveOverlays(e,a).next((d=>(d.forEach(((m,g)=>l.set(m,g))),t.forEach(((m,g)=>f.set(m,new _N(g,l.get(m)??null)))),f)))}recalculateAndSaveOverlays(e,t){const r=Ec();let s=new dt(((l,f)=>l-f)),a=Fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const f of l)f.keys().forEach((d=>{const m=t.get(d);if(m===null)return;let g=r.get(d)||Nn.empty();g=f.applyToLocalView(m,g),r.set(d,g);const v=(s.get(f.batchId)||Fe()).add(d);s=s.insert(f.batchId,v)}))})).next((()=>{const l=[],f=s.getReverseIterator();for(;f.hasNext();){const d=f.getNext(),m=d.key,g=d.value,v=IT();g.forEach((w=>{if(!a.has(w)){const k=DT(t.get(w),r.get(w));k!==null&&v.set(w,k),a=a.add(w)}})),l.push(this.documentOverlayCache.saveOverlays(e,m,v))}return Z.waitFor(l)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,s){return T5(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ET(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next((a=>{const l=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-a.size):Z.resolve(go());let f=jc,d=a;return l.next((m=>Z.forEach(m,((g,v)=>(f<v.largestBatchId&&(f=v.largestBatchId),a.get(g)?Z.resolve():this.remoteDocumentCache.getEntry(e,g).next((w=>{d=d.insert(g,w)}))))).next((()=>this.populateOverlays(e,m,a))).next((()=>this.computeViews(e,d,m,Fe()))).next((g=>({batchId:f,changes:bT(g)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new _e(t)).next((r=>{let s=fc();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const a=t.collectionGroup;let l=fc();return this.indexManager.getCollectionParents(e,a).next((f=>Z.forEach(f,(d=>{const m=(function(v,w){return new rl(w,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(t,d.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,r,s).next((g=>{g.forEach(((v,w)=>{l=l.insert(v,w)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,s)))).next((l=>{a.forEach(((d,m)=>{const g=m.getKey();l.get(g)===null&&(l=l.insert(g,rn.newInvalidDocument(g)))}));let f=fc();return l.forEach(((d,m)=>{const g=a.get(d);g!==void 0&&Tc(g.mutation,m,Nn.empty(),it.now()),Yh(t,m)&&(f=f.insert(d,m))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return Z.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Br(s.createTime)}})(t)),Z.resolve()}getNamedQuery(e,t){return Z.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(s){return{name:s.name,query:dN(s.bundledQuery),readTime:Br(s.readTime)}})(t)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(){this.overlays=new dt(_e.comparator),this.Lr=new Map}getOverlay(e,t){return Z.resolve(this.overlays.get(t))}getOverlays(e,t){const r=go();return Z.forEach(t,(s=>this.getOverlay(e,s).next((a=>{a!==null&&r.set(s,a)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((s,a)=>{this.bt(e,t,a)})),Z.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Lr.get(r);return s!==void 0&&(s.forEach((a=>this.overlays=this.overlays.remove(a))),this.Lr.delete(r)),Z.resolve()}getOverlaysForCollection(e,t,r){const s=go(),a=t.length+1,l=new _e(t.child("")),f=this.overlays.getIteratorFrom(l);for(;f.hasNext();){const d=f.getNext().value,m=d.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&d.largestBatchId>r&&s.set(d.getKey(),d)}return Z.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let a=new dt(((m,g)=>m-g));const l=this.overlays.getIterator();for(;l.hasNext();){const m=l.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let g=a.get(m.largestBatchId);g===null&&(g=go(),a=a.insert(m.largestBatchId,g)),g.set(m.getKey(),m)}}const f=go(),d=a.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((m,g)=>f.set(m,g))),!(f.size()>=s)););return Z.resolve(f)}bt(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const l=this.Lr.get(s.largestBatchId).delete(r.key);this.Lr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new z5(t,r));let a=this.Lr.get(t);a===void 0&&(a=Fe(),this.Lr.set(t,a)),this.Lr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(){this.sessionToken=Qt.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(){this.kr=new Dt(Bt.Kr),this.qr=new Dt(Bt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const r=new Bt(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new Bt(e,t))}Qr(e,t){e.forEach((r=>this.removeReference(r,t)))}Gr(e){const t=new _e(new et([])),r=new Bt(t,e),s=new Bt(t,e+1),a=[];return this.qr.forEachInRange([r,s],(l=>{this.Wr(l),a.push(l.key)})),a}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new _e(new et([])),r=new Bt(t,e),s=new Bt(t,e+1);let a=Fe();return this.qr.forEachInRange([r,s],(l=>{a=a.add(l.key)})),a}containsKey(e){const t=new Bt(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Bt{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return _e.comparator(e.key,t.key)||Oe(e.Hr,t.Hr)}static Ur(e,t){return Oe(e.Hr,t.Hr)||_e.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Dt(Bt.Kr)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const a=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new B5(a,t,r,s);this.mutationQueue.push(l);for(const f of s)this.Jr=this.Jr.add(new Bt(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return Z.resolve(l)}lookupMutationBatch(e,t){return Z.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Xr(r),a=s<0?0:s;return Z.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?qg:this.Yn-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Bt(t,0),s=new Bt(t,Number.POSITIVE_INFINITY),a=[];return this.Jr.forEachInRange([r,s],(l=>{const f=this.Zr(l.Hr);a.push(f)})),Z.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Dt(Oe);return t.forEach((s=>{const a=new Bt(s,0),l=new Bt(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([a,l],(f=>{r=r.add(f.Hr)}))})),Z.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let a=r;_e.isDocumentKey(a)||(a=a.child(""));const l=new Bt(new _e(a),0);let f=new Dt(Oe);return this.Jr.forEachWhile((d=>{const m=d.key.path;return!!r.isPrefixOf(m)&&(m.length===s&&(f=f.add(d.Hr)),!0)}),l),Z.resolve(this.Yr(f))}Yr(e){const t=[];return e.forEach((r=>{const s=this.Zr(r);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){Qe(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return Z.forEach(t.mutations,(s=>{const a=new Bt(s.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,t){const r=new Bt(t,0),s=this.Jr.firstAfterOrEqual(r);return Z.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(e){this.ti=e,this.docs=(function(){return new dt(_e.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),a=s?s.size:0,l=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Z.resolve(r?r.document.mutableCopy():rn.newInvalidDocument(t))}getEntries(e,t){let r=ki();return t.forEach((s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():rn.newInvalidDocument(s))})),Z.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let a=ki();const l=t.path,f=new _e(l.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(f);for(;d.hasNext();){const{key:m,value:{document:g}}=d.getNext();if(!l.isPrefixOf(m.path))break;m.path.length>l.length+1||Zj(Jj(g),r)<=0||(s.has(g.key)||Yh(t,g))&&(a=a.insert(g.key,g.mutableCopy()))}return Z.resolve(a)}getAllFromCollectionGroup(e,t,r,s){ke(9500)}ni(e,t){return Z.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new IN(this)}getSize(e){return Z.resolve(this.size)}}class IN extends xN{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?t.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(r)})),Z.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e){this.persistence=e,this.ri=new Ro((t=>Yg(t)),Xg),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.ii=0,this.si=new iy,this.targetCount=0,this.oi=Ha._r()}forEachTarget(e,t){return this.ri.forEach(((r,s)=>t(s))),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),Z.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Ha(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,Z.resolve()}updateTargetData(e,t){return this.lr(t),Z.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,t,r){let s=0;const a=[];return this.ri.forEach(((l,f)=>{f.sequenceNumber<=t&&r.get(f.targetId)===null&&(this.ri.delete(l),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),s++)})),Z.waitFor(a).next((()=>s))}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,t){const r=this.ri.get(t)||null;return Z.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),Z.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);const s=this.persistence.referenceDelegate,a=[];return s&&t.forEach((l=>{a.push(s.markPotentiallyOrphaned(e,l))})),Z.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),Z.resolve()}getMatchingKeysForTargetId(e,t){const r=this.si.jr(t);return Z.resolve(r)}containsKey(e,t){return Z.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(e,t){this._i={},this.overlays={},this.ai=new Kh(0),this.ui=!1,this.ui=!0,this.ci=new kN,this.referenceDelegate=e(this),this.li=new CN(this),this.indexManager=new hN,this.remoteDocumentCache=(function(s){return new bN(s)})((r=>this.referenceDelegate.hi(r))),this.serializer=new uN(t),this.Pi=new EN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new TN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new SN(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){ue("MemoryPersistence","Starting transaction:",e);const s=new AN(this.ai.next());return this.referenceDelegate.Ti(),r(s).next((a=>this.referenceDelegate.Ii(s).next((()=>a)))).toPromise().then((a=>(s.raiseOnCommittedEvent(),a)))}Ei(e,t){return Z.or(Object.values(this._i).map((r=>()=>r.containsKey(e,t))))}}class AN extends t5{constructor(e){super(),this.currentSequenceNumber=e}}class sy{constructor(e){this.persistence=e,this.Ri=new iy,this.Ai=null}static Vi(e){return new sy(e)}get di(){if(this.Ai)return this.Ai;throw ke(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),Z.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),Z.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),Z.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((s=>this.di.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((a=>this.di.add(a.toString())))})).next((()=>r.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.di,(r=>{const s=_e.fromPath(r);return this.mi(e,s).next((a=>{a||t.removeEntry(s,Ie.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return Z.or([()=>Z.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class kh{constructor(e,t){this.persistence=e,this.fi=new Ro((r=>i5(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=vN(this,t)}static Vi(e,t){return new kh(e,t)}Ti(){}Ii(e){return Z.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}mr(e,t){return Z.forEach(this.fi,((r,s)=>this.wr(e,r,s).next((a=>a?Z.resolve():t(s)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ni(e,(l=>this.wr(e,l,t).next((f=>{f||(r++,a.removeEntry(l,Ie.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),Z.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),Z.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),Z.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Zd(e.data.value)),t}wr(e,t,r){return Z.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.fi.get(t);return Z.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=s}static Es(e,t){let r=Fe(),s=Fe();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new oy(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return nA()?8:n5(an())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,s){const a={result:null};return this.gs(e,t).next((l=>{a.result=l})).next((()=>{if(!a.result)return this.ps(e,t,s,r).next((l=>{a.result=l}))})).next((()=>{if(a.result)return;const l=new RN;return this.ys(e,t,l).next((f=>{if(a.result=f,this.As)return this.ws(e,t,l,f.size)}))})).next((()=>a.result))}ws(e,t,r,s){return r.documentReadCount<this.Vs?(Ea()<=Le.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",Ta(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Z.resolve()):(Ea()<=Le.DEBUG&&ue("QueryEngine","Query:",Ta(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(Ea()<=Le.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",Ta(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fr(t))):Z.resolve())}gs(e,t){if(Rx(t))return Z.resolve(null);let r=Fr(t);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=Eh(t,null,"F"),r=Fr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const l=Fe(...a);return this.fs.getDocuments(e,l).next((f=>this.indexManager.getMinOffset(e,r).next((d=>{const m=this.bs(t,f);return this.Ss(t,m,l,d.readTime)?this.gs(e,Eh(t,null,"F")):this.Ds(e,m,t,d)}))))})))))}ps(e,t,r,s){return Rx(t)||s.isEqual(Ie.min())?Z.resolve(null):this.fs.getDocuments(e,r).next((a=>{const l=this.bs(t,a);return this.Ss(t,l,r,s)?Z.resolve(null):(Ea()<=Le.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ta(t)),this.Ds(e,l,t,Xj(s,jc)).next((f=>f)))}))}bs(e,t){let r=new Dt(kT(e));return t.forEach(((s,a)=>{Yh(e,a)&&(r=r.add(a))})),r}Ss(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}ys(e,t,r){return Ea()<=Le.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",Ta(t)),this.fs.getDocumentsMatchingQuery(e,t,_s.min(),r)}Ds(e,t,r,s){return this.fs.getDocumentsMatchingQuery(e,r,s).next((a=>(t.forEach((l=>{a=a.insert(l.key,l)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ay="LocalStore",jN=3e8;class NN{constructor(e,t,r,s){this.persistence=e,this.Cs=t,this.serializer=s,this.vs=new dt(Oe),this.Fs=new Ro((a=>Yg(a)),Xg),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wN(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function DN(n,e,t,r){return new NN(n,e,t,r)}async function YT(n,e){const t=Pe(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next((a=>(s=a,t.Os(e),t.mutationQueue.getAllMutationBatches(r)))).next((a=>{const l=[],f=[];let d=Fe();for(const m of s){l.push(m.batchId);for(const g of m.mutations)d=d.add(g.key)}for(const m of a){f.push(m.batchId);for(const g of m.mutations)d=d.add(g.key)}return t.localDocuments.getDocuments(r,d).next((m=>({Ns:m,removedBatchIds:l,addedBatchIds:f})))}))}))}function VN(n,e){const t=Pe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),a=t.xs.newChangeBuffer({trackRemovals:!0});return(function(f,d,m,g){const v=m.batch,w=v.keys();let k=Z.resolve();return w.forEach((T=>{k=k.next((()=>g.getEntry(d,T))).next((I=>{const C=m.docVersions.get(T);Qe(C!==null,48541),I.version.compareTo(C)<0&&(v.applyToRemoteDocument(I,m),I.isValidDocument()&&(I.setReadTime(m.commitVersion),g.addEntry(I)))}))})),k.next((()=>f.mutationQueue.removeMutationBatch(d,v)))})(t,r,e,a).next((()=>a.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(f){let d=Fe();for(let m=0;m<f.mutationResults.length;++m)f.mutationResults[m].transformResults.length>0&&(d=d.add(f.batch.mutations[m].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(r,s)))}))}function XT(n){const e=Pe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function MN(n,e){const t=Pe(n),r=e.snapshotVersion;let s=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const l=t.xs.newChangeBuffer({trackRemovals:!0});s=t.vs;const f=[];e.targetChanges.forEach(((g,v)=>{const w=s.get(v);if(!w)return;f.push(t.li.removeMatchingKeys(a,g.removedDocuments,v).next((()=>t.li.addMatchingKeys(a,g.addedDocuments,v))));let k=w.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(v)!==null?k=k.withResumeToken(Qt.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):g.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(g.resumeToken,r)),s=s.insert(v,k),(function(I,C,O){return I.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=jN?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0})(w,k,g)&&f.push(t.li.updateTargetData(a,k))}));let d=ki(),m=Fe();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(a,g))})),f.push(LN(a,l,e.documentUpdates).next((g=>{d=g.Bs,m=g.Ls}))),!r.isEqual(Ie.min())){const g=t.li.getLastRemoteSnapshotVersion(a).next((v=>t.li.setTargetsMetadata(a,a.currentSequenceNumber,r)));f.push(g)}return Z.waitFor(f).next((()=>l.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,d,m))).next((()=>d))})).then((a=>(t.vs=s,a)))}function LN(n,e,t){let r=Fe(),s=Fe();return t.forEach((a=>r=r.add(a))),e.getEntries(n,r).next((a=>{let l=ki();return t.forEach(((f,d)=>{const m=a.get(f);d.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(f)),d.isNoDocument()&&d.version.isEqual(Ie.min())?(e.removeEntry(f,d.readTime),l=l.insert(f,d)):!m.isValidDocument()||d.version.compareTo(m.version)>0||d.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(d),l=l.insert(f,d)):ue(ay,"Ignoring outdated watch update for ",f,". Current version:",m.version," Watch version:",d.version)})),{Bs:l,Ls:s}}))}function ON(n,e){const t=Pe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=qg),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function FN(n,e){const t=Pe(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return t.li.getTargetData(r,e).next((a=>a?(s=a,Z.resolve(s)):t.li.allocateTargetId(r).next((l=>(s=new ds(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=t.vs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r}))}async function Km(n,e,t){const r=Pe(n),s=r.vs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,(l=>r.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!nl(l))throw l;ue(ay,`Failed to update sequence numbers for target ${e}: ${l}`)}r.vs=r.vs.remove(e),r.Fs.delete(s.target)}function $x(n,e,t){const r=Pe(n);let s=Ie.min(),a=Fe();return r.persistence.runTransaction("Execute query","readwrite",(l=>(function(d,m,g){const v=Pe(d),w=v.Fs.get(g);return w!==void 0?Z.resolve(v.vs.get(w)):v.li.getTargetData(m,g)})(r,l,Fr(e)).next((f=>{if(f)return s=f.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(l,f.targetId).next((d=>{a=d}))})).next((()=>r.Cs.getDocumentsMatchingQuery(l,e,t?s:Ie.min(),t?a:Fe()))).next((f=>(BN(r,b5(e),f),{documents:f,ks:a})))))}function BN(n,e,t){let r=n.Ms.get(e)||Ie.min();t.forEach(((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),n.Ms.set(e,r)}class Wx{constructor(){this.activeTargetIds=j5()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zN{constructor(){this.vo=new Wx,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Wx,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx="ConnectivityMonitor";class Kx{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ue(Hx,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){ue(Hx,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ud=null;function qm(){return Ud===null?Ud=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ud++,"0x"+Ud.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const em="RestConnection",$N={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class WN{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.$o=this.databaseId.database===xh?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,t,r,s,a){const l=qm(),f=this.Qo(e,t.toUriEncodedString());ue(em,`Sending RPC '${e}' ${l}:`,f,r);const d={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(d,s,a);const{host:m}=new URL(f),g=Xa(m);return this.zo(e,f,d,r,g).then((v=>(ue(em,`Received RPC '${e}' ${l}: `,v),v)),(v=>{throw Ba(em,`RPC '${e}' ${l} failed with error: `,v,"url: ",f,"request:",r),v}))}jo(e,t,r,s,a,l){return this.Wo(e,t,r,s,a)}Go(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+el})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,a)=>e[a]=s)),r&&r.headers.forEach(((s,a)=>e[a]=s))}Qo(e,t){const r=$N[e];let s=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn="WebChannelConnection",lc=(n,e,t)=>{n.listen(e,(r=>{try{t(r)}catch(s){setTimeout((()=>{throw s}),0)}}))};class Da extends WN{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Da.c_){const e=eT();lc(e,ZE.STAT_EVENT,(t=>{t.stat===Vm.PROXY?ue(tn,"STAT_EVENT: detected buffering proxy"):t.stat===Vm.NOPROXY&&ue(tn,"STAT_EVENT: detected no buffering proxy")})),Da.c_=!0}}zo(e,t,r,s,a){const l=qm();return new Promise(((f,d)=>{const m=new XE;m.setWithCredentials(!0),m.listenOnce(JE.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case Jd.NO_ERROR:const v=m.getResponseJson();ue(tn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(v)),f(v);break;case Jd.TIMEOUT:ue(tn,`RPC '${e}' ${l} timed out`),d(new le(J.DEADLINE_EXCEEDED,"Request time out"));break;case Jd.HTTP_ERROR:const w=m.getStatus();if(ue(tn,`RPC '${e}' ${l} failed with status:`,w,"response text:",m.getResponseText()),w>0){let k=m.getResponseJson();Array.isArray(k)&&(k=k[0]);const T=k==null?void 0:k.error;if(T&&T.status&&T.message){const I=(function(O){const B=O.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(B)>=0?B:J.UNKNOWN})(T.status);d(new le(I,T.message))}else d(new le(J.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new le(J.UNAVAILABLE,"Connection failed."));break;default:ke(9055,{l_:e,streamId:l,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{ue(tn,`RPC '${e}' ${l} completed.`)}}));const g=JSON.stringify(s);ue(tn,`RPC '${e}' ${l} sending request:`,s),m.send(t,"POST",g,r,15)}))}T_(e,t,r){const s=qm(),a=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=this.createWebChannelTransport(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(f.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Go(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const m=a.join("");ue(tn,`Creating RPC '${e}' stream ${s}: ${m}`,f);const g=l.createWebChannel(m,f);this.I_(g);let v=!1,w=!1;const k=new HN({Ho:T=>{w?ue(tn,`Not sending because RPC '${e}' stream ${s} is closed:`,T):(v||(ue(tn,`Opening RPC '${e}' stream ${s} transport.`),g.open(),v=!0),ue(tn,`RPC '${e}' stream ${s} sending:`,T),g.send(T))},Jo:()=>g.close()});return lc(g,hc.EventType.OPEN,(()=>{w||(ue(tn,`RPC '${e}' stream ${s} transport opened.`),k.i_())})),lc(g,hc.EventType.CLOSE,(()=>{w||(w=!0,ue(tn,`RPC '${e}' stream ${s} transport closed`),k.o_(),this.E_(g))})),lc(g,hc.EventType.ERROR,(T=>{w||(w=!0,Ba(tn,`RPC '${e}' stream ${s} transport errored. Name:`,T.name,"Message:",T.message),k.o_(new le(J.UNAVAILABLE,"The operation could not be completed")))})),lc(g,hc.EventType.MESSAGE,(T=>{var I;if(!w){const C=T.data[0];Qe(!!C,16349);const O=C,B=(O==null?void 0:O.error)||((I=O[0])==null?void 0:I.error);if(B){ue(tn,`RPC '${e}' stream ${s} received error:`,B);const j=B.status;let Q=(function(A){const b=St[A];if(b!==void 0)return LT(b)})(j),W=B.message;Q===void 0&&(Q=J.INTERNAL,W="Unknown error status: "+j+" with message "+B.message),w=!0,k.o_(new le(Q,W)),g.close()}else ue(tn,`RPC '${e}' stream ${s} received:`,C),k.__(C)}})),Da.u_(),setTimeout((()=>{k.s_()}),0),k}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return tT()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KN(n){return new Da(n)}function tm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ef(n){return new Y5(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Da.c_=!1;class JT{constructor(e,t,r=1e3,s=1.5,a=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=s,this.V_=a,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-r);s>0&&ue("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx="PersistentStream";class ZT{constructor(e,t,r,s,a,l,f,d){this.Ci=e,this.b_=r,this.S_=s,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=f,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new JT(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===J.RESOURCE_EXHAUSTED?(Ti(t.toString()),Ti("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===t&&this.G_(r,s)}),(r=>{e((()=>{const s=new le(J.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,t){const r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.H_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ue(qx,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(ue(qx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class qN extends ZT{constructor(e,t,r,s,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,l),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=Z5(this.serializer,e),r=(function(a){if(!("targetChange"in a))return Ie.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?Ie.min():l.readTime?Br(l.readTime):Ie.min()})(e);return this.listener.J_(t,r)}Z_(e){const t={};t.database=Hm(this.serializer),t.addTarget=(function(a,l){let f;const d=l.target;if(f=Bm(d)?{documents:nN(a,d)}:{query:rN(a,d).ft},f.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){f.resumeToken=BT(a,l.resumeToken);const m=Um(a,l.expectedCount);m!==null&&(f.expectedCount=m)}else if(l.snapshotVersion.compareTo(Ie.min())>0){f.readTime=Th(a,l.snapshotVersion.toTimestamp());const m=Um(a,l.expectedCount);m!==null&&(f.expectedCount=m)}return f})(this.serializer,e);const r=sN(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){const t={};t.database=Hm(this.serializer),t.removeTarget=e,this.K_(t)}}class GN extends ZT{constructor(e,t,r,s,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,l),this.serializer=a}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=tN(e.writeResults,e.commitTime),r=Br(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Hm(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>eN(this.serializer,r)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{}class YN extends QN{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new le(J.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Wo(e,$m(t,r),s,a,l))).catch((a=>{throw a.name==="FirebaseError"?(a.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new le(J.UNKNOWN,a.toString())}))}jo(e,t,r,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,f])=>this.connection.jo(e,$m(t,r),s,l,f,a))).catch((l=>{throw l.name==="FirebaseError"?(l.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new le(J.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function XN(n,e,t,r){return new YN(n,e,t,r)}class JN{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ti(t),this.aa=!1):ue("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo="RemoteStore";class ZN{constructor(e,t,r,s,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=a,this.Aa.Mo((l=>{r.enqueueAndForget((async()=>{Po(this)&&(ue(bo,"Restarting streams for network reachability change."),await(async function(d){const m=Pe(d);m.Ea.add(4),await lu(m),m.Va.set("Unknown"),m.Ea.delete(4),await tf(m)})(this))}))})),this.Va=new JN(r,s)}}async function tf(n){if(Po(n))for(const e of n.Ra)await e(!0)}async function lu(n){for(const e of n.Ra)await e(!1)}function ek(n,e){const t=Pe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),dy(t)?uy(t):il(t).O_()&&cy(t,e))}function ly(n,e){const t=Pe(n),r=il(t);t.Ia.delete(e),r.O_()&&tk(t,e),t.Ia.size===0&&(r.O_()?r.L_():Po(t)&&t.Va.set("Unknown"))}function cy(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}il(n).Z_(e)}function tk(n,e){n.da.$e(e),il(n).X_(e)}function uy(n){n.da=new K5({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),il(n).start(),n.Va.ua()}function dy(n){return Po(n)&&!il(n).x_()&&n.Ia.size>0}function Po(n){return Pe(n).Ea.size===0}function nk(n){n.da=void 0}async function eD(n){n.Va.set("Online")}async function tD(n){n.Ia.forEach(((e,t)=>{cy(n,e)}))}async function nD(n,e){nk(n),dy(n)?(n.Va.ha(e),uy(n)):n.Va.set("Unknown")}async function rD(n,e,t){if(n.Va.set("Online"),e instanceof FT&&e.state===2&&e.cause)try{await(async function(s,a){const l=a.cause;for(const f of a.targetIds)s.Ia.has(f)&&(await s.remoteSyncer.rejectListen(f,l),s.Ia.delete(f),s.da.removeTarget(f))})(n,e)}catch(r){ue(bo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Sh(n,r)}else if(e instanceof nh?n.da.Xe(e):e instanceof OT?n.da.st(e):n.da.tt(e),!t.isEqual(Ie.min()))try{const r=await XT(n.localStore);t.compareTo(r)>=0&&await(function(a,l){const f=a.da.Tt(l);return f.targetChanges.forEach(((d,m)=>{if(d.resumeToken.approximateByteSize()>0){const g=a.Ia.get(m);g&&a.Ia.set(m,g.withResumeToken(d.resumeToken,l))}})),f.targetMismatches.forEach(((d,m)=>{const g=a.Ia.get(d);if(!g)return;a.Ia.set(d,g.withResumeToken(Qt.EMPTY_BYTE_STRING,g.snapshotVersion)),tk(a,d);const v=new ds(g.target,d,m,g.sequenceNumber);cy(a,v)})),a.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(r){ue(bo,"Failed to raise snapshot:",r),await Sh(n,r)}}async function Sh(n,e,t){if(!nl(e))throw e;n.Ea.add(1),await lu(n),n.Va.set("Offline"),t||(t=()=>XT(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ue(bo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await tf(n)}))}function rk(n,e){return e().catch((t=>Sh(n,t,e)))}async function nf(n){const e=Pe(n),t=ks(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:qg;for(;iD(e);)try{const s=await ON(e.localStore,r);if(s===null){e.Ta.length===0&&t.L_();break}r=s.batchId,sD(e,s)}catch(s){await Sh(e,s)}ik(e)&&sk(e)}function iD(n){return Po(n)&&n.Ta.length<10}function sD(n,e){n.Ta.push(e);const t=ks(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function ik(n){return Po(n)&&!ks(n).x_()&&n.Ta.length>0}function sk(n){ks(n).start()}async function oD(n){ks(n).ra()}async function aD(n){const e=ks(n);for(const t of n.Ta)e.ea(t.mutations)}async function lD(n,e,t){const r=n.Ta.shift(),s=ty.from(r,e,t);await rk(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await nf(n)}async function cD(n,e){e&&ks(n).Y_&&await(async function(r,s){if((function(l){return $5(l)&&l!==J.ABORTED})(s.code)){const a=r.Ta.shift();ks(r).B_(),await rk(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s))),await nf(r)}})(n,e),ik(n)&&sk(n)}async function Gx(n,e){const t=Pe(n);t.asyncQueue.verifyOperationInProgress(),ue(bo,"RemoteStore received new credentials");const r=Po(t);t.Ea.add(3),await lu(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await tf(t)}async function uD(n,e){const t=Pe(n);e?(t.Ea.delete(2),await tf(t)):e||(t.Ea.add(2),await lu(t),t.Va.set("Unknown"))}function il(n){return n.ma||(n.ma=(function(t,r,s){const a=Pe(t);return a.sa(),new qN(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(n.datastore,n.asyncQueue,{Zo:eD.bind(null,n),Yo:tD.bind(null,n),t_:nD.bind(null,n),J_:rD.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),dy(n)?uy(n):n.Va.set("Unknown")):(await n.ma.stop(),nk(n))}))),n.ma}function ks(n){return n.fa||(n.fa=(function(t,r,s){const a=Pe(t);return a.sa(),new GN(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:oD.bind(null,n),t_:cD.bind(null,n),ta:aD.bind(null,n),na:lD.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await nf(n)):(await n.fa.stop(),n.Ta.length>0&&(ue(bo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(e,t,r,s,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new vi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,a){const l=Date.now()+r,f=new hy(e,t,l,s,a);return f.start(r),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fy(n,e){if(Ti("AsyncQueue",`${e}: ${n}`),nl(n))return new le(J.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{static emptySet(e){return new Va(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||_e.comparator(t.key,r.key):(t,r)=>_e.comparator(t.key,r.key),this.keyedMap=fc(),this.sortedSet=new dt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Va)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Va;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(){this.ga=new dt(_e.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ke(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Ka{constructor(e,t,r,s,a,l,f,d,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=f,this.excludesMetadataChanges=d,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,s,a){const l=[];return t.forEach((f=>{l.push({type:0,doc:f})})),new Ka(e,t,Va.emptySet(t),l,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class hD{constructor(){this.queries=Yx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const s=Pe(t),a=s.queries;s.queries=Yx(),a.forEach(((l,f)=>{for(const d of f.ba)d.onError(r)}))})(this,new le(J.ABORTED,"Firestore shutting down"))}}function Yx(){return new Ro((n=>TT(n)),Qh)}async function ok(n,e){const t=Pe(n);let r=3;const s=e.query;let a=t.queries.get(s);a?!a.Sa()&&e.Da()&&(r=2):(a=new dD,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await t.onListen(s,!0);break;case 1:a.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(l){const f=fy(l,`Initialization of query '${Ta(e.query)}' failed`);return void e.onError(f)}t.queries.set(s,a),a.ba.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&py(t)}async function ak(n,e){const t=Pe(n),r=e.query;let s=3;const a=t.queries.get(r);if(a){const l=a.ba.indexOf(e);l>=0&&(a.ba.splice(l,1),a.ba.length===0?s=e.Da()?0:1:!a.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function fD(n,e){const t=Pe(n);let r=!1;for(const s of e){const a=s.query,l=t.queries.get(a);if(l){for(const f of l.ba)f.Fa(s)&&(r=!0);l.wa=s}}r&&py(t)}function pD(n,e,t){const r=Pe(n),s=r.queries.get(e);if(s)for(const a of s.ba)a.onError(t);r.queries.delete(e)}function py(n){n.Ca.forEach((e=>{e.next()}))}var Gm,Xx;(Xx=Gm||(Gm={})).Ma="default",Xx.Cache="cache";class lk{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ka(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ka.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Gm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e){this.key=e}}class uk{constructor(e){this.key=e}}class mD{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Fe(),this.mutatedKeys=Fe(),this.eu=kT(e),this.tu=new Va(this.eu)}get nu(){return this.Za}ru(e,t){const r=t?t.iu:new Qx,s=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,l=s,f=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((g,v)=>{const w=s.get(g),k=Yh(this.query,v)?v:null,T=!!w&&this.mutatedKeys.has(w.key),I=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let C=!1;w&&k?w.data.isEqual(k.data)?T!==I&&(r.track({type:3,doc:k}),C=!0):this.su(w,k)||(r.track({type:2,doc:k}),C=!0,(d&&this.eu(k,d)>0||m&&this.eu(k,m)<0)&&(f=!0)):!w&&k?(r.track({type:0,doc:k}),C=!0):w&&!k&&(r.track({type:1,doc:w}),C=!0,(d||m)&&(f=!0)),C&&(k?(l=l.add(k),a=I?a.add(g):a.delete(g)):(l=l.delete(g),a=a.delete(g)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const g=this.query.limitType==="F"?l.last():l.first();l=l.delete(g.key),a=a.delete(g.key),r.track({type:1,doc:g})}return{tu:l,iu:r,Ss:f,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((g,v)=>(function(k,T){const I=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ke(20277,{Vt:C})}};return I(k)-I(T)})(g.type,v.type)||this.eu(g.doc,v.doc))),this.ou(r),s=s??!1;const f=t&&!s?this._u():[],d=this.Ya.size===0&&this.current&&!s?1:0,m=d!==this.Xa;return this.Xa=d,l.length!==0||m?{snapshot:new Ka(this.query,e.tu,a,l,e.mutatedKeys,d===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Qx,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Fe(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const t=[];return e.forEach((r=>{this.Ya.has(r)||t.push(new uk(r))})),this.Ya.forEach((r=>{e.has(r)||t.push(new ck(r))})),t}cu(e){this.Za=e.ks,this.Ya=Fe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ka.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const my="SyncEngine";class gD{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class yD{constructor(e){this.key=e,this.hu=!1}}class vD{constructor(e,t,r,s,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Ro((f=>TT(f)),Qh),this.Iu=new Map,this.Eu=new Set,this.Ru=new dt(_e.comparator),this.Au=new Map,this.Vu=new iy,this.du={},this.mu=new Map,this.fu=Ha.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function xD(n,e,t=!0){const r=gk(n);let s;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.lu()):s=await dk(r,e,t,!0),s}async function _D(n,e){const t=gk(n);await dk(t,e,!0,!1)}async function dk(n,e,t,r){const s=await FN(n.localStore,Fr(e)),a=s.targetId,l=n.sharedClientState.addLocalQueryTarget(a,t);let f;return r&&(f=await wD(n,e,a,l==="current",s.resumeToken)),n.isPrimaryClient&&t&&ek(n.remoteStore,s),f}async function wD(n,e,t,r,s){n.pu=(v,w,k)=>(async function(I,C,O,B){let j=C.view.ru(O);j.Ss&&(j=await $x(I.localStore,C.query,!1).then((({documents:A})=>C.view.ru(A,j))));const Q=B&&B.targetChanges.get(C.targetId),W=B&&B.targetMismatches.get(C.targetId)!=null,H=C.view.applyChanges(j,I.isPrimaryClient,Q,W);return Zx(I,C.targetId,H.au),H.snapshot})(n,v,w,k);const a=await $x(n.localStore,e,!0),l=new mD(e,a.ks),f=l.ru(a.documents),d=au.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),m=l.applyChanges(f,n.isPrimaryClient,d);Zx(n,t,m.au);const g=new gD(e,t,l);return n.Tu.set(e,g),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),m.snapshot}async function ED(n,e,t){const r=Pe(n),s=r.Tu.get(e),a=r.Iu.get(s.targetId);if(a.length>1)return r.Iu.set(s.targetId,a.filter((l=>!Qh(l,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Km(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),t&&ly(r.remoteStore,s.targetId),Qm(r,s.targetId)})).catch(tl)):(Qm(r,s.targetId),await Km(r.localStore,s.targetId,!0))}async function TD(n,e){const t=Pe(n),r=t.Tu.get(e),s=t.Iu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ly(t.remoteStore,r.targetId))}async function kD(n,e,t){const r=PD(n);try{const s=await(function(l,f){const d=Pe(l),m=it.now(),g=f.reduce(((k,T)=>k.add(T.key)),Fe());let v,w;return d.persistence.runTransaction("Locally write mutations","readwrite",(k=>{let T=ki(),I=Fe();return d.xs.getEntries(k,g).next((C=>{T=C,T.forEach(((O,B)=>{B.isValidDocument()||(I=I.add(O))}))})).next((()=>d.localDocuments.getOverlayedDocuments(k,T))).next((C=>{v=C;const O=[];for(const B of f){const j=O5(B,v.get(B.key).overlayedDocument);j!=null&&O.push(new Ds(B.key,j,mT(j.value.mapValue),hr.exists(!0)))}return d.mutationQueue.addMutationBatch(k,m,O,f)})).next((C=>{w=C;const O=C.applyToLocalDocumentSet(v,I);return d.documentOverlayCache.saveOverlays(k,C.batchId,O)}))})).then((()=>({batchId:w.batchId,changes:bT(v)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(l,f,d){let m=l.du[l.currentUser.toKey()];m||(m=new dt(Oe)),m=m.insert(f,d),l.du[l.currentUser.toKey()]=m})(r,s.batchId,t),await cu(r,s.changes),await nf(r.remoteStore)}catch(s){const a=fy(s,"Failed to persist write");t.reject(a)}}async function hk(n,e){const t=Pe(n);try{const r=await MN(t.localStore,e);e.targetChanges.forEach(((s,a)=>{const l=t.Au.get(a);l&&(Qe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.hu=!0:s.modifiedDocuments.size>0?Qe(l.hu,14607):s.removedDocuments.size>0&&(Qe(l.hu,42227),l.hu=!1))})),await cu(t,r,e)}catch(r){await tl(r)}}function Jx(n,e,t){const r=Pe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Tu.forEach(((a,l)=>{const f=l.view.va(e);f.snapshot&&s.push(f.snapshot)})),(function(l,f){const d=Pe(l);d.onlineState=f;let m=!1;d.queries.forEach(((g,v)=>{for(const w of v.ba)w.va(f)&&(m=!0)})),m&&py(d)})(r.eventManager,e),s.length&&r.Pu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function SD(n,e,t){const r=Pe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Au.get(e),a=s&&s.key;if(a){let l=new dt(_e.comparator);l=l.insert(a,rn.newNoDocument(a,Ie.min()));const f=Fe().add(a),d=new Zh(Ie.min(),new Map,new dt(Oe),l,f);await hk(r,d),r.Ru=r.Ru.remove(a),r.Au.delete(e),gy(r)}else await Km(r.localStore,e,!1).then((()=>Qm(r,e,t))).catch(tl)}async function bD(n,e){const t=Pe(n),r=e.batch.batchId;try{const s=await VN(t.localStore,e);pk(t,r,null),fk(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await cu(t,s)}catch(s){await tl(s)}}async function ID(n,e,t){const r=Pe(n);try{const s=await(function(l,f){const d=Pe(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let g;return d.mutationQueue.lookupMutationBatch(m,f).next((v=>(Qe(v!==null,37113),g=v.keys(),d.mutationQueue.removeMutationBatch(m,v)))).next((()=>d.mutationQueue.performConsistencyCheck(m))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(m,g,f))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,g))).next((()=>d.localDocuments.getDocuments(m,g)))}))})(r.localStore,e);pk(r,e,t),fk(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await cu(r,s)}catch(s){await tl(s)}}function fk(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function pk(n,e,t){const r=Pe(n);let s=r.du[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(t?a.reject(t):a.resolve(),s=s.remove(e)),r.du[r.currentUser.toKey()]=s}}function Qm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((r=>{n.Vu.containsKey(r)||mk(n,r)}))}function mk(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(ly(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),gy(n))}function Zx(n,e,t){for(const r of t)r instanceof ck?(n.Vu.addReference(r.key,e),CD(n,r)):r instanceof uk?(ue(my,"Document no longer in limbo: "+r.key),n.Vu.removeReference(r.key,e),n.Vu.containsKey(r.key)||mk(n,r.key)):ke(19791,{wu:r})}function CD(n,e){const t=e.key,r=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(r)||(ue(my,"New document in limbo: "+t),n.Eu.add(r),gy(n))}function gy(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new _e(et.fromString(e)),r=n.fu.next();n.Au.set(r,new yD(t)),n.Ru=n.Ru.insert(t,r),ek(n.remoteStore,new ds(Fr(Jg(t.path)),r,"TargetPurposeLimboResolution",Kh.ce))}}async function cu(n,e,t){const r=Pe(n),s=[],a=[],l=[];r.Tu.isEmpty()||(r.Tu.forEach(((f,d)=>{l.push(r.pu(d,e,t).then((m=>{var g;if((m||t)&&r.isPrimaryClient){const v=m?!m.fromCache:(g=t==null?void 0:t.targetChanges.get(d.targetId))==null?void 0:g.current;r.sharedClientState.updateQueryState(d.targetId,v?"current":"not-current")}if(m){s.push(m);const v=oy.Es(d.targetId,m);a.push(v)}})))})),await Promise.all(l),r.Pu.J_(s),await(async function(d,m){const g=Pe(d);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>Z.forEach(m,(w=>Z.forEach(w.Ts,(k=>g.persistence.referenceDelegate.addReference(v,w.targetId,k))).next((()=>Z.forEach(w.Is,(k=>g.persistence.referenceDelegate.removeReference(v,w.targetId,k)))))))))}catch(v){if(!nl(v))throw v;ue(ay,"Failed to update sequence numbers: "+v)}for(const v of m){const w=v.targetId;if(!v.fromCache){const k=g.vs.get(w),T=k.snapshotVersion,I=k.withLastLimboFreeSnapshotVersion(T);g.vs=g.vs.insert(w,I)}}})(r.localStore,a))}async function AD(n,e){const t=Pe(n);if(!t.currentUser.isEqual(e)){ue(my,"User change. New user:",e.toKey());const r=await YT(t.localStore,e);t.currentUser=e,(function(a,l){a.mu.forEach((f=>{f.forEach((d=>{d.reject(new le(J.CANCELLED,l))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await cu(t,r.Ns)}}function RD(n,e){const t=Pe(n),r=t.Au.get(e);if(r&&r.hu)return Fe().add(r.key);{let s=Fe();const a=t.Iu.get(e);if(!a)return s;for(const l of a){const f=t.Tu.get(l);s=s.unionWith(f.view.nu)}return s}}function gk(n){const e=Pe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=hk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=RD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=SD.bind(null,e),e.Pu.J_=fD.bind(null,e.eventManager),e.Pu.yu=pD.bind(null,e.eventManager),e}function PD(n){const e=Pe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ID.bind(null,e),e}class bh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ef(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return DN(this.persistence,new PN,e.initialUser,this.serializer)}Cu(e){return new QT(sy.Vi,this.serializer)}Du(e){return new zN}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}bh.provider={build:()=>new bh};class jD extends bh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Qe(this.persistence.referenceDelegate instanceof kh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new gN(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?_n.withCacheSize(this.cacheSizeBytes):_n.DEFAULT;return new QT((r=>kh.Vi(r,t)),this.serializer)}}class Ym{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Jx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=AD.bind(null,this.syncEngine),await uD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new hD})()}createDatastore(e){const t=ef(e.databaseInfo.databaseId),r=KN(e.databaseInfo);return XN(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,s,a,l,f){return new ZN(r,s,a,l,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>Jx(this.syncEngine,t,0)),(function(){return Kx.v()?new Kx:new UN})())}createSyncEngine(e,t){return(function(s,a,l,f,d,m,g){const v=new vD(s,a,l,f,d,m);return g&&(v.gu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const a=Pe(s);ue(bo,"RemoteStore shutting down."),a.Ea.add(5),await lu(a),a.Aa.shutdown(),a.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Ym.provider={build:()=>new Ym};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ti("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss="FirestoreClient";class ND{constructor(e,t,r,s,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=s,this.user=nn.UNAUTHENTICATED,this.clientId=Kg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async l=>{ue(Ss,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(r,(l=>(ue(Ss,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=fy(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function nm(n,e){n.asyncQueue.verifyOperationInProgress(),ue(Ss,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async s=>{r.isEqual(s)||(await YT(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function e_(n,e){n.asyncQueue.verifyOperationInProgress();const t=await DD(n);ue(Ss,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>Gx(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,s)=>Gx(e.remoteStore,s))),n._onlineComponents=e}async function DD(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ue(Ss,"Using user provided OfflineComponentProvider");try{await nm(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===J.FAILED_PRECONDITION||s.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;Ba("Error using user provided cache. Falling back to memory cache: "+t),await nm(n,new bh)}}else ue(Ss,"Using default OfflineComponentProvider"),await nm(n,new jD(void 0));return n._offlineComponents}async function vk(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ue(Ss,"Using user provided OnlineComponentProvider"),await e_(n,n._uninitializedComponentsProvider._online)):(ue(Ss,"Using default OnlineComponentProvider"),await e_(n,new Ym))),n._onlineComponents}function VD(n){return vk(n).then((e=>e.syncEngine))}async function xk(n){const e=await vk(n),t=e.eventManager;return t.onListen=xD.bind(null,e.syncEngine),t.onUnlisten=ED.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=_D.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=TD.bind(null,e.syncEngine),t}function MD(n,e,t={}){const r=new vi;return n.asyncQueue.enqueueAndForget((async()=>(function(a,l,f,d,m){const g=new yk({next:w=>{g.Nu(),l.enqueueAndForget((()=>ak(a,v)));const k=w.docs.has(f);!k&&w.fromCache?m.reject(new le(J.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&w.fromCache&&d&&d.source==="server"?m.reject(new le(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(w)},error:w=>m.reject(w)}),v=new lk(Jg(f.path),g,{includeMetadataChanges:!0,Ka:!0});return ok(a,v)})(await xk(n),n.asyncQueue,e,t,r))),r.promise}function LD(n,e,t={}){const r=new vi;return n.asyncQueue.enqueueAndForget((async()=>(function(a,l,f,d,m){const g=new yk({next:w=>{g.Nu(),l.enqueueAndForget((()=>ak(a,v))),w.fromCache&&d.source==="server"?m.reject(new le(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(w)},error:w=>m.reject(w)}),v=new lk(f,g,{includeMetadataChanges:!0,Ka:!0});return ok(a,v)})(await xk(n),n.asyncQueue,e,t,r))),r.promise}function OD(n,e){const t=new vi;return n.asyncQueue.enqueueAndForget((async()=>kD(await VD(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _k(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD="ComponentProvider",t_=new Map;function BD(n,e,t,r,s){return new a5(n,e,t,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,_k(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wk="firestore.googleapis.com",n_=!0;class r_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new le(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=wk,this.ssl=n_}else this.host=e.host,this.ssl=e.ssl??n_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=GT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<pN)throw new le(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Qj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_k(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new le(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new le(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new le(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rf{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new r_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new r_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Fj;switch(r.type){case"firstParty":return new $j(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new le(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=t_.get(t);r&&(ue(FD,"Removing Datastore"),t_.delete(t),r.terminate())})(this),Promise.resolve()}}function zD(n,e,t,r={}){var m;n=Wr(n,rf);const s=Xa(e),a=n._getSettings(),l={...a,emulatorOptions:n._getEmulatorOptions()},f=`${e}:${t}`;s&&(cE(`https://${f}`),uE("Firestore",!0)),a.host!==wk&&a.host!==f&&Ba("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...a,host:f,ssl:s,emulatorOptions:r};if(!xs(d,l)&&(n._setSettings(d),r.mockUserToken)){let g,v;if(typeof r.mockUserToken=="string")g=r.mockUserToken,v=nn.MOCK_USER;else{g=qC(r.mockUserToken,(m=n._app)==null?void 0:m.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new le(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new nn(w)}n._authCredentials=new Bj(new rT(g,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Vs(this.firestore,e,this._query)}}class _t{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ys(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _t(this.firestore,e,this._key)}toJSON(){return{type:_t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(su(t,_t._jsonSchema))return new _t(e,r||null,new _e(et.fromString(t.referencePath)))}}_t._jsonSchemaVersion="firestore/documentReference/1.0",_t._jsonSchema={type:Ct("string",_t._jsonSchemaVersion),referencePath:Ct("string")};class ys extends Vs{constructor(e,t,r){super(e,t,Jg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _t(this.firestore,null,new _e(e))}withConverter(e){return new ys(this.firestore,e,this._path)}}function En(n,e,...t){if(n=Mt(n),iT("collection","path",e),n instanceof rf){const r=et.fromString(e,...t);return gx(r),new ys(n,null,r)}{if(!(n instanceof _t||n instanceof ys))throw new le(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(et.fromString(e,...t));return gx(r),new ys(n.firestore,null,r)}}function zt(n,e,...t){if(n=Mt(n),arguments.length===1&&(e=Kg.newId()),iT("doc","path",e),n instanceof rf){const r=et.fromString(e,...t);return mx(r),new _t(n,null,new _e(r))}{if(!(n instanceof _t||n instanceof ys))throw new le(J.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(et.fromString(e,...t));return mx(r),new _t(n.firestore,n instanceof ys?n.converter:null,new _e(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_="AsyncQueue";class s_{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new JT(this,"async_queue_retry"),this._c=()=>{const r=tm();r&&ue(i_,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=tm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=tm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new vi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!nl(e))throw e;ue(i_,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Ti("INTERNAL UNHANDLED ERROR: ",o_(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=hy.createAndSchedule(this,e,t,r,(a=>this.hc(a)));return this.tc.push(s),s}uc(){this.nc&&ke(47125,{Pc:o_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function o_(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class sl extends rf{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new s_,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new s_(e),this._firestoreClient=void 0,await e}}}function UD(n,e){const t=typeof n=="object"?n:pE(),r=typeof n=="string"?n:xh,s=Dg(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=HC("firestore");a&&zD(s,...a)}return s}function yy(n){if(n._terminated)throw new le(J.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||$D(n),n._firestoreClient}function $D(n){var r,s,a,l;const e=n._freezeSettings(),t=BD(n._databaseId,((r=n._app)==null?void 0:r.options.appId)||"",n._persistenceKey,(s=n._app)==null?void 0:s.options.apiKey,e);n._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new ND(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(d){const m=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(m),_online:m}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Kn(Qt.fromBase64String(e))}catch(t){throw new le(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Kn(Qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Kn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(su(e,Kn._jsonSchema))return Kn.fromBase64String(e.bytes)}}Kn._jsonSchemaVersion="firestore/bytes/1.0",Kn._jsonSchema={type:Ct("string",Kn._jsonSchemaVersion),bytes:Ct("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new le(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new le(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new le(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Oe(this._lat,e._lat)||Oe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:zr._jsonSchemaVersion}}static fromJSON(e){if(su(e,zr._jsonSchema))return new zr(e.latitude,e.longitude)}}zr._jsonSchemaVersion="firestore/geoPoint/1.0",zr._jsonSchema={type:Ct("string",zr._jsonSchemaVersion),latitude:Ct("number"),longitude:Ct("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:fr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(su(e,fr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new fr(e.vectorValues);throw new le(J.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}fr._jsonSchemaVersion="firestore/vectorValue/1.0",fr._jsonSchema={type:Ct("string",fr._jsonSchemaVersion),vectorValues:Ct("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD=/^__.*__$/;class HD{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ds(e,this.data,this.fieldMask,t,this.fieldTransforms):new ou(e,this.data,t,this.fieldTransforms)}}class Ek{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ds(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Tk(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ke(40011,{dataSource:n})}}class sf{constructor(e,t,r,s,a,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.validatePath(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new sf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const t=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var s;const t=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Ih(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(Tk(this.dataSource)&&WD.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class KD{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||ef(e)}createContext(e,t,r,s=!1){return new sf({dataSource:e,methodName:t,targetDoc:r,path:Gt.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function of(n){const e=n._freezeSettings(),t=ef(n._databaseId);return new KD(n._databaseId,!!e.ignoreUndefinedProperties,t)}function kk(n,e,t,r,s,a={}){const l=n.createContext(a.merge||a.mergeFields?2:0,e,t,s);Ey("Data must be an object, but it was:",l,r);const f=Sk(r,l);let d,m;if(a.merge)d=new Nn(l.fieldMask),m=l.fieldTransforms;else if(a.mergeFields){const g=[];for(const v of a.mergeFields){const w=Io(e,v,t);if(!l.contains(w))throw new le(J.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);Ck(g,w)||g.push(w)}d=new Nn(g),m=l.fieldTransforms.filter((v=>d.covers(v.field)))}else d=null,m=l.fieldTransforms;return new HD(new wn(f),d,m)}class af extends ol{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof af}}function qD(n,e,t){return new sf({dataSource:3,targetDoc:e.settings.targetDoc,methodName:n._methodName,arrayElement:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class xy extends ol{_toFieldTransform(e){return new ey(e.path,new Lc)}isEqual(e){return e instanceof xy}}class _y extends ol{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=qD(this,e,!0),r=this.Ac.map((a=>al(a,t))),s=new Wa(r);return new ey(e.path,s)}isEqual(e){return e instanceof _y&&xs(this.Ac,e.Ac)}}class wy extends ol{constructor(e,t){super(e),this.Vc=t}_toFieldTransform(e){const t=new Fc(e.serializer,AT(e.serializer,this.Vc));return new ey(e.path,t)}isEqual(e){return e instanceof wy&&this.Vc===e.Vc}}function GD(n,e,t,r){const s=n.createContext(1,e,t);Ey("Data must be an object, but it was:",s,r);const a=[],l=wn.empty();Ns(r,((d,m)=>{const g=Ik(e,d,t);m=Mt(m);const v=s.childContextForFieldPath(g);if(m instanceof af)a.push(g);else{const w=al(m,v);w!=null&&(a.push(g),l.set(g,w))}}));const f=new Nn(a);return new Ek(l,f,s.fieldTransforms)}function QD(n,e,t,r,s,a){const l=n.createContext(1,e,t),f=[Io(e,r,t)],d=[s];if(a.length%2!=0)throw new le(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<a.length;w+=2)f.push(Io(e,a[w])),d.push(a[w+1]);const m=[],g=wn.empty();for(let w=f.length-1;w>=0;--w)if(!Ck(m,f[w])){const k=f[w];let T=d[w];T=Mt(T);const I=l.childContextForFieldPath(k);if(T instanceof af)m.push(k);else{const C=al(T,I);C!=null&&(m.push(k),g.set(k,C))}}const v=new Nn(m);return new Ek(g,v,l.fieldTransforms)}function YD(n,e,t,r=!1){return al(t,n.createContext(r?4:3,e))}function al(n,e){if(bk(n=Mt(n)))return Ey("Unsupported field value:",e,n),Sk(n,e);if(n instanceof ol)return(function(r,s){if(!Tk(s.dataSource))throw s.createError(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,s){const a=[];let l=0;for(const f of r){let d=al(f,s.childContextForArray(l));d==null&&(d={nullValue:"NULL_VALUE"}),a.push(d),l++}return{arrayValue:{values:a}}})(n,e)}return(function(r,s){if((r=Mt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return AT(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=it.fromDate(r);return{timestampValue:Th(s.serializer,a)}}if(r instanceof it){const a=new it(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Th(s.serializer,a)}}if(r instanceof zr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Kn)return{bytesValue:BT(s.serializer,r._byteString)};if(r instanceof _t){const a=s.databaseId,l=r.firestore._databaseId;if(!l.isEqual(a))throw s.createError(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:ry(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof fr)return(function(l,f){const d=l instanceof fr?l.toArray():l;return{mapValue:{fields:{[fT]:{stringValue:pT},[_h]:{arrayValue:{values:d.map((g=>{if(typeof g!="number")throw f.createError("VectorValues must only contain numeric values.");return Zg(f.serializer,g)}))}}}}}})(r,s);if(qT(r))return r._toProto(s.serializer);throw s.createError(`Unsupported field value: ${Hh(r)}`)})(n,e)}function Sk(n,e){const t={};return aT(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ns(n,((r,s)=>{const a=al(s,e.childContextForField(r));a!=null&&(t[r]=a)})),{mapValue:{fields:t}}}function bk(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof it||n instanceof zr||n instanceof Kn||n instanceof _t||n instanceof ol||n instanceof fr||qT(n))}function Ey(n,e,t){if(!bk(t)||!sT(t)){const r=Hh(t);throw r==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+r)}}function Io(n,e,t){if((e=Mt(e))instanceof vy)return e._internalPath;if(typeof e=="string")return Ik(n,e);throw Ih("Field path arguments must be of type string or ",n,!1,void 0,t)}const XD=new RegExp("[~\\*/\\[\\]]");function Ik(n,e,t){if(e.search(XD)>=0)throw Ih(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new vy(...e.split("."))._internalPath}catch{throw Ih(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ih(n,e,t,r,s){const a=r&&!r.isEmpty(),l=s!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let d="";return(a||l)&&(d+=" (found",a&&(d+=` in field ${r}`),l&&(d+=` in document ${s}`),d+=")"),new le(J.INVALID_ARGUMENT,f+n+d)}function Ck(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{convertValue(e,t="none"){switch(Ts(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Es(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ke(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ns(e,((s,a)=>{r[s]=this.convertValue(a,t)})),r}convertVectorValue(e){var r,s,a;const t=(a=(s=(r=e.fields)==null?void 0:r[_h].arrayValue)==null?void 0:s.values)==null?void 0:a.map((l=>xt(l.doubleValue)));return new fr(t)}convertGeoPoint(e){return new zr(xt(e.latitude),xt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Gh(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Nc(e));default:return null}}convertTimestamp(e){const t=ws(e);return new it(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=et.fromString(e);Qe(KT(r),9688,{name:e});const s=new Dc(r.get(1),r.get(3)),a=new _e(r.popFirst(5));return s.isEqual(t)||Ti(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak extends JD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new _t(this.firestore,null,t)}}function Vt(){return new xy("serverTimestamp")}function ZD(...n){return new _y("arrayUnion",n)}function Ty(n){return new wy("increment",n)}const a_="@firebase/firestore",l_="4.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e,t,r,s,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new _t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new eV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(Io("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class eV extends Rk{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tV(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new le(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ky{}class Sy extends ky{}function bs(n,e,...t){let r=[];e instanceof ky&&r.push(e),r=r.concat(t),(function(a){const l=a.filter((d=>d instanceof by)).length,f=a.filter((d=>d instanceof lf)).length;if(l>1||l>0&&f>0)throw new le(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)n=s._apply(n);return n}class lf extends Sy{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new lf(e,t,r)}_apply(e){const t=this._parse(e);return Pk(e._query,t),new Vs(e.firestore,e.converter,zm(e._query,t))}_parse(e){const t=of(e.firestore);return(function(a,l,f,d,m,g,v){let w;if(m.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new le(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){u_(v,g);const T=[];for(const I of v)T.push(c_(d,a,I));w={arrayValue:{values:T}}}else w=c_(d,a,v)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||u_(v,g),w=YD(f,l,v,g==="in"||g==="not-in");return It.create(m,g,w)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Bc(n,e,t){const r=e,s=Io("where",n);return lf._create(s,r,t)}class by extends ky{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new by(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:yr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,a){let l=s;const f=a.getFlattenedFilters();for(const d of f)Pk(l,d),l=zm(l,d)})(e._query,t),new Vs(e.firestore,e.converter,zm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Iy extends Sy{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Iy(e,t)}_apply(e){const t=(function(s,a,l){if(s.startAt!==null)throw new le(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new le(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Mc(a,l)})(e._query,this._field,this._direction);return new Vs(e.firestore,e.converter,S5(e._query,t))}}function Is(n,e="asc"){const t=e,r=Io("orderBy",n);return Iy._create(r,t)}class Cy extends Sy{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Cy(e,t,r)}_apply(e){return new Vs(e.firestore,e.converter,Eh(e._query,this._limit,this._limitType))}}function Ay(n){return Yj("limit",n),Cy._create("limit",n,"F")}function c_(n,e,t){if(typeof(t=Mt(t))=="string"){if(t==="")throw new le(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ET(e)&&t.indexOf("/")!==-1)throw new le(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(et.fromString(t));if(!_e.isDocumentKey(r))throw new le(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return kx(n,new _e(r))}if(t instanceof _t)return kx(n,t._key);throw new le(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hh(t)}.`)}function u_(n,e){if(!Array.isArray(n)||n.length===0)throw new le(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Pk(n,e){const t=(function(s,a){for(const l of s)for(const f of l.getFlattenedFilters())if(a.indexOf(f.op)>=0)return f.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new le(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new le(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function jk(n,e,t){let r;return r=n?n.toFirestore(e):e,r}class mc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xo extends Rk{constructor(e,t,r,s,a,l){super(e,t,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new rh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Io("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new le(J.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=xo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}xo._jsonSchemaVersion="firestore/documentSnapshot/1.0",xo._jsonSchema={type:Ct("string",xo._jsonSchemaVersion),bundleSource:Ct("string","DocumentSnapshot"),bundleName:Ct("string"),bundle:Ct("string")};class rh extends xo{data(e={}){return super.data(e)}}class Ma{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new mc(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new rh(this._firestore,this._userDataWriter,r.key,r,new mc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new le(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,a){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map((f=>{const d=new rh(s._firestore,s._userDataWriter,f.doc.key,f.doc,new mc(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);return f.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((f=>a||f.type!==3)).map((f=>{const d=new rh(s._firestore,s._userDataWriter,f.doc.key,f.doc,new mc(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,g=-1;return f.type!==0&&(m=l.indexOf(f.doc.key),l=l.delete(f.doc.key)),f.type!==1&&(l=l.add(f.doc),g=l.indexOf(f.doc.key)),{type:nV(f.type),doc:d,oldIndex:m,newIndex:g}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new le(J.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ma._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Kg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function nV(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ke(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ma._jsonSchemaVersion="firestore/querySnapshot/1.0",Ma._jsonSchema={type:Ct("string",Ma._jsonSchemaVersion),bundleSource:Ct("string","QuerySnapshot"),bundleName:Ct("string"),bundle:Ct("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ll(n){n=Wr(n,_t);const e=Wr(n.firestore,sl),t=yy(e);return MD(t,n._key).then((r=>rV(e,n,r)))}function pr(n){n=Wr(n,Vs);const e=Wr(n.firestore,sl),t=yy(e),r=new Ak(e);return tV(n._query),LD(t,n._query).then((s=>new Ma(e,r,n,s)))}function uu(n,e,t){n=Wr(n,_t);const r=Wr(n.firestore,sl),s=jk(n.converter,e),a=of(r);return Py(r,[kk(a,"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,hr.none())])}function Gr(n,e,t,...r){n=Wr(n,_t);const s=Wr(n.firestore,sl),a=of(s);let l;return l=typeof(e=Mt(e))=="string"||e instanceof vy?QD(a,"updateDoc",n._key,e,t,r):GD(a,"updateDoc",n._key,e),Py(s,[l.toMutation(n._key,hr.exists(!0))])}function Ry(n,e){const t=Wr(n.firestore,sl),r=zt(n),s=jk(n.converter,e),a=of(n.firestore);return Py(t,[kk(a,"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,hr.exists(!1))]).then((()=>r))}function Py(n,e){const t=yy(n);return OD(t,e)}function rV(n,e,t){const r=t.docs.get(e._key),s=new Ak(n);return new xo(n,s,e._key,r,new mc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){Oj(Ja),Oa(new Eo("firestore",((r,{instanceIdentifier:s,options:a})=>{const l=r.getProvider("app").getImmediate(),f=new sl(new zj(r.getProvider("auth-internal")),new Wj(l,r.getProvider("app-check-internal")),l5(l,s),l);return a={useFetchStreams:t,...a},f._setSettings(a),f}),"PUBLIC").setMultipleInstances(!0)),ms(a_,l_,e),ms(a_,l_,"esm2020")})();var iV="firebase",sV="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ms(iV,sV,"app");const oV={apiKey:"AIzaSyCf4uRHqqZtYR3ZvlbHF9w59qGuEjlXcW4",authDomain:"kinderbucks-e3e8c.firebaseapp.com",projectId:"kinderbucks-e3e8c",storageBucket:"kinderbucks-e3e8c.firebasestorage.app",messagingSenderId:"18326874439",appId:"1:18326874439:web:ad902e6a1c794b2b3c4462",measurementId:"G-3JMD9HSMC3"},Nk=fE(oV),qe=UD(Nk),du=Mj(Nk),jo="users",_o={ADMIN:"admin",BUSINESS:"business",MEMBER:"member"};async function aV(n,e,t){const s=(await vP(du,n,e)).user;return await wP(s,{displayName:t}),await uu(zt(qe,jo,s.uid),{uid:s.uid,email:s.email,displayName:t,role:_o.MEMBER,createdAt:Vt(),lastLogin:Vt()}),s}async function lV(n,e){const t=await xP(du,n,e);return await Gr(zt(qe,jo,t.user.uid),{lastLogin:Vt()}),t.user}async function cV(){var a;const n=new fi,t=(await HP(du,n)).user,r=zt(qe,jo,t.uid);return(await ll(r)).exists()?await Gr(r,{lastLogin:Vt(),photoURL:t.photoURL}):await uu(r,{uid:t.uid,email:t.email,displayName:t.displayName||((a=t.email)==null?void 0:a.split("@")[0]),photoURL:t.photoURL,role:_o.MEMBER,createdAt:Vt(),lastLogin:Vt(),provider:"google"}),t}async function Dk(){return SP(du)}async function d_(n){const e=zt(qe,jo,n),t=await ll(e);return t.exists()?t.data():null}async function uV(n,e){if(!Object.values(_o).includes(e))throw new Error("Invalid role");await Gr(zt(qe,jo,n),{role:e,updatedAt:Vt()})}async function dV(n,e){await Gr(zt(qe,jo,n),{role:_o.BUSINESS,businessCode:e,updatedAt:Vt()})}async function hV(){return(await pr(En(qe,jo))).docs.map(e=>({id:e.id,...e.data()}))}function fV(n){return kP(du,n)}const Vk=N.createContext(null);function pV({children:n}){const[e,t]=N.useState(null),[r,s]=N.useState(null),[a,l]=N.useState(!0);N.useEffect(()=>{const T=fV(async I=>{if(t(I),I){const C=await d_(I.uid);s(C)}else s(null);l(!1)});return()=>T()},[]);const f=!!e,d=(r==null?void 0:r.role)===_o.ADMIN,m=(r==null?void 0:r.role)===_o.BUSINESS,g=(r==null?void 0:r.role)===_o.MEMBER,k={user:e,profile:r,loading:a,isAuthenticated:f,isAdmin:d,isBusiness:m,isMember:g,hasRole:(...T)=>r?T.includes(r.role):!1,refreshProfile:async()=>{if(e){const T=await d_(e.uid);s(T)}}};return u.jsx(Vk.Provider,{value:k,children:n})}function hu(){const n=N.useContext(Vk);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n}/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mV=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),gV=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),h_=n=>{const e=gV(n);return e.charAt(0).toUpperCase()+e.slice(1)},Mk=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),yV=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var vV={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xV=N.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:l,...f},d)=>N.createElement("svg",{ref:d,...vV,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:Mk("lucide",s),...!a&&!yV(f)&&{"aria-hidden":"true"},...f},[...l.map(([m,g])=>N.createElement(m,g)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=(n,e)=>{const t=N.forwardRef(({className:r,...s},a)=>N.createElement(xV,{ref:a,iconNode:e,className:Mk(`lucide-${mV(h_(n))}`,`lucide-${n}`,r),...s}));return t.displayName=h_(n),t};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _V=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],cf=ve("arrow-right-left",_V);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wV=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],f_=ve("arrow-right",wV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EV=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Ms=ve("award",EV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TV=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],jy=ve("banknote",TV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kV=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Lk=ve("briefcase",kV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SV=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Ny=ve("calendar",SV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bV=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Ok=ve("chart-column",bV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IV=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],zc=ve("check",IV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Dy=ve("circle-alert",CV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AV=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Cs=ve("circle-check-big",AV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],PV=ve("circle-x",RV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jV=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],qa=ve("clock",jV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NV=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],DV=ve("coffee",NV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VV=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],MV=ve("coins",VV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LV=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Fk=ve("compass",LV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OV=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Bk=ve("copy",OV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FV=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Xn=ve("crown",FV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BV=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],zk=ve("download",BV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zV=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],UV=ve("ellipsis-vertical",zV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $V=[["path",{d:"M6.5 12c.94-3.46 4.94-6 8.5-6 3.56 0 6.06 2.54 7 6-.94 3.47-3.44 6-7 6s-7.56-2.53-8.5-6Z",key:"15baut"}],["path",{d:"M18 12v.5",key:"18hhni"}],["path",{d:"M16 17.93a9.77 9.77 0 0 1 0-11.86",key:"16dt7o"}],["path",{d:"M7 10.67C7 8 5.58 5.97 2.73 5.5c-1 1.5-1 5 .23 6.5-1.24 1.5-1.24 5-.23 6.5C5.58 18.03 7 16 7 13.33",key:"l9di03"}],["path",{d:"M10.46 7.26C10.2 5.88 9.17 4.24 8 3h5.8a2 2 0 0 1 1.98 1.67l.23 1.4",key:"1kjonw"}],["path",{d:"m16.01 17.93-.23 1.4A2 2 0 0 1 13.8 21H9.5a5.96 5.96 0 0 0 1.49-3.98",key:"1zlm23"}]],p_=ve("fish",$V);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WV=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],HV=ve("gift",WV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KV=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],qV=ve("house",KV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GV=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],QV=ve("layout-dashboard",GV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YV=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],XV=ve("lightbulb",YV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JV=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],uf=ve("loader-circle",JV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZV=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],eM=ve("lock",ZV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tM=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],Ch=ve("log-in",tM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nM=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Xm=ve("log-out",nM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rM=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Uk=ve("mail",rM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iM=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],ih=ve("map-pin",iM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sM=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],oM=ve("megaphone",sM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aM=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],m_=ve("package",aM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lM=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],$k=ve("palette",lM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cM=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],g_=ve("plus",cM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uM=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],dM=ve("printer",uM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hM=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],vs=ve("qr-code",hM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fM=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],pM=ve("refresh-cw",fM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mM=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],gM=ve("save",mM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yM=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],vM=ve("search",yM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xM=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Ah=ve("send",xM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _M=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],wM=ve("shield-check",_M);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EM=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Rh=ve("shield",EM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TM=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],Wk=ve("shopping-bag",TM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kM=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],y_=ve("smartphone",kM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SM=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Hk=ve("sparkles",SM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bM=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],IM=ve("square-check-big",bM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CM=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],AM=ve("square",CM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RM=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Kr=ve("star",RM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PM=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],on=ve("store",PM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],fn=ve("target",jM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],DM=ve("toggle-left",NM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VM=[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],MM=ve("toggle-right",VM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LM=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],fu=ve("trending-up",LM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],FM=ve("trophy",OM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BM=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],v_=ve("user-plus",BM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zM=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],kc=ve("user",zM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UM=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Si=ve("users",UM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $M=[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]],Kk=ve("utensils-crossed",$M);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WM=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],HM=ve("zap",WM);function os({children:n,allowedRoles:e=[]}){const{user:t,profile:r,loading:s,isAuthenticated:a}=hu(),l=Yn();return s?u.jsxs("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"var(--kb-cream)"},children:[u.jsxs("div",{style:{textAlign:"center"},children:[u.jsx(uf,{size:48,color:"var(--kb-navy)",style:{animation:"spin 1s linear infinite"}}),u.jsx("p",{style:{marginTop:"1rem",color:"var(--kb-gray-500)"},children:"Loading..."})]}),u.jsx("style",{children:`
          @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
          }
        `})]}):a?e.length>0&&r&&!e.includes(r.role)?u.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"var(--kb-cream)",padding:"2rem"},children:u.jsxs("div",{className:"card",style:{maxWidth:"400px",textAlign:"center",padding:"2rem"},children:[u.jsx("h2",{style:{color:"#dc2626",marginBottom:"1rem"},children:"Access Denied"}),u.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem"},children:"You don't have permission to access this page."}),u.jsx("a",{href:"/",className:"btn btn-primary",children:"Go Home"})]})}):n:u.jsx(tC,{to:"/login",state:{from:l},replace:!0})}const qk=N.createContext({});function KM(n){const e=N.useRef(null);return e.current===null&&(e.current=n()),e.current}const Gk=typeof window<"u",qM=Gk?N.useLayoutEffect:N.useEffect,Vy=N.createContext(null);function My(n,e){n.indexOf(e)===-1&&n.push(e)}function Ly(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const qr=(n,e,t)=>t>e?e:t<n?n:t;let Oy=()=>{};const bi={},Qk=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function Yk(n){return typeof n=="object"&&n!==null}const Xk=n=>/^0[^.\s]+$/u.test(n);function Fy(n){let e;return()=>(e===void 0&&(e=n()),e)}const Gn=n=>n,GM=(n,e)=>t=>e(n(t)),pu=(...n)=>n.reduce(GM),Uc=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r};class By{constructor(){this.subscriptions=[]}add(e){return My(this.subscriptions,e),()=>Ly(this.subscriptions,e)}notify(e,t,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,t,r);else for(let a=0;a<s;a++){const l=this.subscriptions[a];l&&l(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const xi=n=>n*1e3,qn=n=>n/1e3;function Jk(n,e){return e?n*(1e3/e):0}const Zk=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,QM=1e-7,YM=12;function XM(n,e,t,r,s){let a,l,f=0;do l=e+(t-e)/2,a=Zk(l,r,s)-n,a>0?t=l:e=l;while(Math.abs(a)>QM&&++f<YM);return l}function mu(n,e,t,r){if(n===e&&t===r)return Gn;const s=a=>XM(a,0,1,n,t);return a=>a===0||a===1?a:Zk(s(a),e,r)}const eS=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,tS=n=>e=>1-n(1-e),nS=mu(.33,1.53,.69,.99),zy=tS(nS),rS=eS(zy),iS=n=>(n*=2)<1?.5*zy(n):.5*(2-Math.pow(2,-10*(n-1))),Uy=n=>1-Math.sin(Math.acos(n)),sS=tS(Uy),oS=eS(Uy),JM=mu(.42,0,1,1),ZM=mu(0,0,.58,1),aS=mu(.42,0,.58,1),e4=n=>Array.isArray(n)&&typeof n[0]!="number",lS=n=>Array.isArray(n)&&typeof n[0]=="number",t4={linear:Gn,easeIn:JM,easeInOut:aS,easeOut:ZM,circIn:Uy,circInOut:oS,circOut:sS,backIn:zy,backInOut:rS,backOut:nS,anticipate:iS},n4=n=>typeof n=="string",x_=n=>{if(lS(n)){Oy(n.length===4);const[e,t,r,s]=n;return mu(e,t,r,s)}else if(n4(n))return t4[n];return n},$d=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function r4(n,e){let t=new Set,r=new Set,s=!1,a=!1;const l=new WeakSet;let f={delta:0,timestamp:0,isProcessing:!1};function d(g){l.has(g)&&(m.schedule(g),n()),g(f)}const m={schedule:(g,v=!1,w=!1)=>{const T=w&&s?t:r;return v&&l.add(g),T.has(g)||T.add(g),g},cancel:g=>{r.delete(g),l.delete(g)},process:g=>{if(f=g,s){a=!0;return}s=!0,[t,r]=[r,t],t.forEach(d),t.clear(),s=!1,a&&(a=!1,m.process(g))}};return m}const i4=40;function cS(n,e){let t=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>t=!0,l=$d.reduce((j,Q)=>(j[Q]=r4(a),j),{}),{setup:f,read:d,resolveKeyframes:m,preUpdate:g,update:v,preRender:w,render:k,postRender:T}=l,I=()=>{const j=bi.useManualTiming?s.timestamp:performance.now();t=!1,bi.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(j-s.timestamp,i4),1)),s.timestamp=j,s.isProcessing=!0,f.process(s),d.process(s),m.process(s),g.process(s),v.process(s),w.process(s),k.process(s),T.process(s),s.isProcessing=!1,t&&e&&(r=!1,n(I))},C=()=>{t=!0,r=!0,s.isProcessing||n(I)};return{schedule:$d.reduce((j,Q)=>{const W=l[Q];return j[Q]=(H,A=!1,b=!1)=>(t||C(),W.schedule(H,A,b)),j},{}),cancel:j=>{for(let Q=0;Q<$d.length;Q++)l[$d[Q]].cancel(j)},state:s,steps:l}}const{schedule:st,cancel:As,state:Kt,steps:rm}=cS(typeof requestAnimationFrame<"u"?requestAnimationFrame:Gn,!0);let sh;function s4(){sh=void 0}const dn={now:()=>(sh===void 0&&dn.set(Kt.isProcessing||bi.useManualTiming?Kt.timestamp:performance.now()),sh),set:n=>{sh=n,queueMicrotask(s4)}},uS=n=>e=>typeof e=="string"&&e.startsWith(n),dS=uS("--"),o4=uS("var(--"),$y=n=>o4(n)?a4.test(n.split("/*")[0].trim()):!1,a4=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function __(n){return typeof n!="string"?!1:n.split("/*")[0].includes("var(--")}const cl={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},$c={...cl,transform:n=>qr(0,1,n)},Wd={...cl,default:1},Sc=n=>Math.round(n*1e5)/1e5,Wy=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function l4(n){return n==null}const c4=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Hy=(n,e)=>t=>!!(typeof t=="string"&&c4.test(t)&&t.startsWith(n)||e&&!l4(t)&&Object.prototype.hasOwnProperty.call(t,e)),hS=(n,e,t)=>r=>{if(typeof r!="string")return r;const[s,a,l,f]=r.match(Wy);return{[n]:parseFloat(s),[e]:parseFloat(a),[t]:parseFloat(l),alpha:f!==void 0?parseFloat(f):1}},u4=n=>qr(0,255,n),im={...cl,transform:n=>Math.round(u4(n))},yo={test:Hy("rgb","red"),parse:hS("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+im.transform(n)+", "+im.transform(e)+", "+im.transform(t)+", "+Sc($c.transform(r))+")"};function d4(n){let e="",t="",r="",s="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),s=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),s=n.substring(4,5),e+=e,t+=t,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Jm={test:Hy("#"),parse:d4,transform:yo.transform},gu=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),as=gu("deg"),Ur=gu("%"),de=gu("px"),h4=gu("vh"),f4=gu("vw"),w_={...Ur,parse:n=>Ur.parse(n)/100,transform:n=>Ur.transform(n*100)},ba={test:Hy("hsl","hue"),parse:hS("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+Ur.transform(Sc(e))+", "+Ur.transform(Sc(t))+", "+Sc($c.transform(r))+")"},bt={test:n=>yo.test(n)||Jm.test(n)||ba.test(n),parse:n=>yo.test(n)?yo.parse(n):ba.test(n)?ba.parse(n):Jm.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?yo.transform(n):ba.transform(n),getAnimatableNone:n=>{const e=bt.parse(n);return e.alpha=0,bt.transform(e)}},p4=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function m4(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(Wy))==null?void 0:e.length)||0)+(((t=n.match(p4))==null?void 0:t.length)||0)>0}const fS="number",pS="color",g4="var",y4="var(",E_="${}",v4=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Wc(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},s=[];let a=0;const f=e.replace(v4,d=>(bt.test(d)?(r.color.push(a),s.push(pS),t.push(bt.parse(d))):d.startsWith(y4)?(r.var.push(a),s.push(g4),t.push(d)):(r.number.push(a),s.push(fS),t.push(parseFloat(d))),++a,E_)).split(E_);return{values:t,split:f,indexes:r,types:s}}function mS(n){return Wc(n).values}function gS(n){const{split:e,types:t}=Wc(n),r=e.length;return s=>{let a="";for(let l=0;l<r;l++)if(a+=e[l],s[l]!==void 0){const f=t[l];f===fS?a+=Sc(s[l]):f===pS?a+=bt.transform(s[l]):a+=s[l]}return a}}const x4=n=>typeof n=="number"?0:bt.test(n)?bt.getAnimatableNone(n):n;function _4(n){const e=mS(n);return gS(n)(e.map(x4))}const Rs={test:m4,parse:mS,createTransformer:gS,getAnimatableNone:_4};function sm(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function w4({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let s=0,a=0,l=0;if(!e)s=a=l=t;else{const f=t<.5?t*(1+e):t+e-t*e,d=2*t-f;s=sm(d,f,n+1/3),a=sm(d,f,n),l=sm(d,f,n-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(l*255),alpha:r}}function Ph(n,e){return t=>t>0?e:n}const ut=(n,e,t)=>n+(e-n)*t,om=(n,e,t)=>{const r=n*n,s=t*(e*e-r)+r;return s<0?0:Math.sqrt(s)},E4=[Jm,yo,ba],T4=n=>E4.find(e=>e.test(n));function T_(n){const e=T4(n);if(!e)return!1;let t=e.parse(n);return e===ba&&(t=w4(t)),t}const k_=(n,e)=>{const t=T_(n),r=T_(e);if(!t||!r)return Ph(n,e);const s={...t};return a=>(s.red=om(t.red,r.red,a),s.green=om(t.green,r.green,a),s.blue=om(t.blue,r.blue,a),s.alpha=ut(t.alpha,r.alpha,a),yo.transform(s))},Zm=new Set(["none","hidden"]);function k4(n,e){return Zm.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function S4(n,e){return t=>ut(n,e,t)}function Ky(n){return typeof n=="number"?S4:typeof n=="string"?$y(n)?Ph:bt.test(n)?k_:C4:Array.isArray(n)?yS:typeof n=="object"?bt.test(n)?k_:b4:Ph}function yS(n,e){const t=[...n],r=t.length,s=n.map((a,l)=>Ky(a)(a,e[l]));return a=>{for(let l=0;l<r;l++)t[l]=s[l](a);return t}}function b4(n,e){const t={...n,...e},r={};for(const s in t)n[s]!==void 0&&e[s]!==void 0&&(r[s]=Ky(n[s])(n[s],e[s]));return s=>{for(const a in r)t[a]=r[a](s);return t}}function I4(n,e){const t=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const a=e.types[s],l=n.indexes[a][r[a]],f=n.values[l]??0;t[s]=f,r[a]++}return t}const C4=(n,e)=>{const t=Rs.createTransformer(e),r=Wc(n),s=Wc(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?Zm.has(n)&&!s.values.length||Zm.has(e)&&!r.values.length?k4(n,e):pu(yS(I4(r,s),s.values),t):Ph(n,e)};function vS(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?ut(n,e,t):Ky(n)(n,e)}const A4=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>st.update(e,t),stop:()=>As(e),now:()=>Kt.isProcessing?Kt.timestamp:dn.now()}},xS=(n,e,t=10)=>{let r="";const s=Math.max(Math.round(e/t),2);for(let a=0;a<s;a++)r+=Math.round(n(a/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},jh=2e4;function qy(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<jh;)e+=t,r=n.next(e);return e>=jh?1/0:e}function R4(n,e=100,t){const r=t({...n,keyframes:[0,e]}),s=Math.min(qy(r),jh);return{type:"keyframes",ease:a=>r.next(s*a).value/e,duration:qn(s)}}const P4=5;function _S(n,e,t){const r=Math.max(e-P4,0);return Jk(t-n(r),e-r)}const mt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},am=.001;function j4({duration:n=mt.duration,bounce:e=mt.bounce,velocity:t=mt.velocity,mass:r=mt.mass}){let s,a,l=1-e;l=qr(mt.minDamping,mt.maxDamping,l),n=qr(mt.minDuration,mt.maxDuration,qn(n)),l<1?(s=m=>{const g=m*l,v=g*n,w=g-t,k=eg(m,l),T=Math.exp(-v);return am-w/k*T},a=m=>{const v=m*l*n,w=v*t+t,k=Math.pow(l,2)*Math.pow(m,2)*n,T=Math.exp(-v),I=eg(Math.pow(m,2),l);return(-s(m)+am>0?-1:1)*((w-k)*T)/I}):(s=m=>{const g=Math.exp(-m*n),v=(m-t)*n+1;return-am+g*v},a=m=>{const g=Math.exp(-m*n),v=(t-m)*(n*n);return g*v});const f=5/n,d=D4(s,a,f);if(n=xi(n),isNaN(d))return{stiffness:mt.stiffness,damping:mt.damping,duration:n};{const m=Math.pow(d,2)*r;return{stiffness:m,damping:l*2*Math.sqrt(r*m),duration:n}}}const N4=12;function D4(n,e,t){let r=t;for(let s=1;s<N4;s++)r=r-n(r)/e(r);return r}function eg(n,e){return n*Math.sqrt(1-e*e)}const V4=["duration","bounce"],M4=["stiffness","damping","mass"];function S_(n,e){return e.some(t=>n[t]!==void 0)}function L4(n){let e={velocity:mt.velocity,stiffness:mt.stiffness,damping:mt.damping,mass:mt.mass,isResolvedFromDuration:!1,...n};if(!S_(n,M4)&&S_(n,V4))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),s=r*r,a=2*qr(.05,1,1-(n.bounce||0))*Math.sqrt(s);e={...e,mass:mt.mass,stiffness:s,damping:a}}else{const t=j4(n);e={...e,...t,mass:mt.mass},e.isResolvedFromDuration=!0}return e}function Nh(n=mt.visualDuration,e=mt.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:s}=t;const a=t.keyframes[0],l=t.keyframes[t.keyframes.length-1],f={done:!1,value:a},{stiffness:d,damping:m,mass:g,duration:v,velocity:w,isResolvedFromDuration:k}=L4({...t,velocity:-qn(t.velocity||0)}),T=w||0,I=m/(2*Math.sqrt(d*g)),C=l-a,O=qn(Math.sqrt(d/g)),B=Math.abs(C)<5;r||(r=B?mt.restSpeed.granular:mt.restSpeed.default),s||(s=B?mt.restDelta.granular:mt.restDelta.default);let j;if(I<1){const W=eg(O,I);j=H=>{const A=Math.exp(-I*O*H);return l-A*((T+I*O*C)/W*Math.sin(W*H)+C*Math.cos(W*H))}}else if(I===1)j=W=>l-Math.exp(-O*W)*(C+(T+O*C)*W);else{const W=O*Math.sqrt(I*I-1);j=H=>{const A=Math.exp(-I*O*H),b=Math.min(W*H,300);return l-A*((T+I*O*C)*Math.sinh(b)+W*C*Math.cosh(b))/W}}const Q={calculatedDuration:k&&v||null,next:W=>{const H=j(W);if(k)f.done=W>=v;else{let A=W===0?T:0;I<1&&(A=W===0?xi(T):_S(j,W,H));const b=Math.abs(A)<=r,P=Math.abs(l-H)<=s;f.done=b&&P}return f.value=f.done?l:H,f},toString:()=>{const W=Math.min(qy(Q),jh),H=xS(A=>Q.next(W*A).value,W,30);return W+"ms "+H},toTransition:()=>{}};return Q}Nh.applyToOptions=n=>{const e=R4(n,100,Nh);return n.ease=e.ease,n.duration=xi(e.duration),n.type="keyframes",n};function tg({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:l,min:f,max:d,restDelta:m=.5,restSpeed:g}){const v=n[0],w={done:!1,value:v},k=b=>f!==void 0&&b<f||d!==void 0&&b>d,T=b=>f===void 0?d:d===void 0||Math.abs(f-b)<Math.abs(d-b)?f:d;let I=t*e;const C=v+I,O=l===void 0?C:l(C);O!==C&&(I=O-v);const B=b=>-I*Math.exp(-b/r),j=b=>O+B(b),Q=b=>{const P=B(b),M=j(b);w.done=Math.abs(P)<=m,w.value=w.done?O:M};let W,H;const A=b=>{k(w.value)&&(W=b,H=Nh({keyframes:[w.value,T(w.value)],velocity:_S(j,b,w.value),damping:s,stiffness:a,restDelta:m,restSpeed:g}))};return A(0),{calculatedDuration:null,next:b=>{let P=!1;return!H&&W===void 0&&(P=!0,Q(b),A(b)),W!==void 0&&b>=W?H.next(b-W):(!P&&Q(b),w)}}}function O4(n,e,t){const r=[],s=t||bi.mix||vS,a=n.length-1;for(let l=0;l<a;l++){let f=s(n[l],n[l+1]);if(e){const d=Array.isArray(e)?e[l]||Gn:e;f=pu(d,f)}r.push(f)}return r}function F4(n,e,{clamp:t=!0,ease:r,mixer:s}={}){const a=n.length;if(Oy(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const l=n[0]===n[1];n[0]>n[a-1]&&(n=[...n].reverse(),e=[...e].reverse());const f=O4(e,r,s),d=f.length,m=g=>{if(l&&g<n[0])return e[0];let v=0;if(d>1)for(;v<n.length-2&&!(g<n[v+1]);v++);const w=Uc(n[v],n[v+1],g);return f[v](w)};return t?g=>m(qr(n[0],n[a-1],g)):m}function B4(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const s=Uc(0,e,r);n.push(ut(t,1,s))}}function z4(n){const e=[0];return B4(e,n.length-1),e}function U4(n,e){return n.map(t=>t*e)}function $4(n,e){return n.map(()=>e||aS).splice(0,n.length-1)}function bc({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const s=e4(r)?r.map(x_):x_(r),a={done:!1,value:e[0]},l=U4(t&&t.length===e.length?t:z4(e),n),f=F4(l,e,{ease:Array.isArray(s)?s:$4(e,s)});return{calculatedDuration:n,next:d=>(a.value=f(d),a.done=d>=n,a)}}const W4=n=>n!==null;function Gy(n,{repeat:e,repeatType:t="loop"},r,s=1){const a=n.filter(W4),f=s<0||e&&t!=="loop"&&e%2===1?0:a.length-1;return!f||r===void 0?a[f]:r}const H4={decay:tg,inertia:tg,tween:bc,keyframes:bc,spring:Nh};function wS(n){typeof n.type=="string"&&(n.type=H4[n.type])}class Qy{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const K4=n=>n/100;class Yy extends Qy{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:t}=this.options;t&&t.updatedAt!==dn.now()&&this.tick(dn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;wS(e);const{type:t=bc,repeat:r=0,repeatDelay:s=0,repeatType:a,velocity:l=0}=e;let{keyframes:f}=e;const d=t||bc;d!==bc&&typeof f[0]!="number"&&(this.mixKeyframes=pu(K4,vS(f[0],f[1])),f=[0,100]);const m=d({...e,keyframes:f});a==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...f].reverse(),velocity:-l})),m.calculatedDuration===null&&(m.calculatedDuration=qy(m));const{calculatedDuration:g}=m;this.calculatedDuration=g,this.resolvedDuration=g+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=m}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:r,totalDuration:s,mixKeyframes:a,mirroredGenerator:l,resolvedDuration:f,calculatedDuration:d}=this;if(this.startTime===null)return r.next(0);const{delay:m=0,keyframes:g,repeat:v,repeatType:w,repeatDelay:k,type:T,onUpdate:I,finalKeyframe:C}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const O=this.currentTime-m*(this.playbackSpeed>=0?1:-1),B=this.playbackSpeed>=0?O<0:O>s;this.currentTime=Math.max(O,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let j=this.currentTime,Q=r;if(v){const b=Math.min(this.currentTime,s)/f;let P=Math.floor(b),M=b%1;!M&&b>=1&&(M=1),M===1&&P--,P=Math.min(P,v+1),!!(P%2)&&(w==="reverse"?(M=1-M,k&&(M-=k/f)):w==="mirror"&&(Q=l)),j=qr(0,1,M)*f}const W=B?{done:!1,value:g[0]}:Q.next(j);a&&(W.value=a(W.value));let{done:H}=W;!B&&d!==null&&(H=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const A=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&H);return A&&T!==tg&&(W.value=Gy(g,this.options,C,this.speed)),I&&I(W.value),A&&this.finish(),W}then(e,t){return this.finished.then(e,t)}get duration(){return qn(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+qn(e)}get time(){return qn(this.currentTime)}set time(e){var t;e=xi(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(t=this.driver)==null||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(dn.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=qn(this.currentTime))}play(){var s,a;if(this.isStopped)return;const{driver:e=A4,startTime:t}=this.options;this.driver||(this.driver=e(l=>this.tick(l))),(a=(s=this.options).onPlay)==null||a.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=t??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(dn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",(t=(e=this.options).onComplete)==null||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(t=(e=this.options).onCancel)==null||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(t=this.driver)==null||t.stop(),e.observe(this)}}function q4(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const vo=n=>n*180/Math.PI,ng=n=>{const e=vo(Math.atan2(n[1],n[0]));return rg(e)},G4={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:ng,rotateZ:ng,skewX:n=>vo(Math.atan(n[1])),skewY:n=>vo(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},rg=n=>(n=n%360,n<0&&(n+=360),n),b_=ng,I_=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),C_=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),Q4={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:I_,scaleY:C_,scale:n=>(I_(n)+C_(n))/2,rotateX:n=>rg(vo(Math.atan2(n[6],n[5]))),rotateY:n=>rg(vo(Math.atan2(-n[2],n[0]))),rotateZ:b_,rotate:b_,skewX:n=>vo(Math.atan(n[4])),skewY:n=>vo(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function ig(n){return n.includes("scale")?1:0}function sg(n,e){if(!n||n==="none")return ig(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(t)r=Q4,s=t;else{const f=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=G4,s=f}if(!s)return ig(e);const a=r[e],l=s[1].split(",").map(X4);return typeof a=="function"?a(l):l[a]}const Y4=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return sg(t,e)};function X4(n){return parseFloat(n.trim())}const ul=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],dl=new Set(ul),A_=n=>n===cl||n===de,J4=new Set(["x","y","z"]),Z4=ul.filter(n=>!J4.has(n));function eL(n){const e=[];return Z4.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const hs={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>sg(e,"x"),y:(n,{transform:e})=>sg(e,"y")};hs.translateX=hs.x;hs.translateY=hs.y;const wo=new Set;let og=!1,ag=!1,lg=!1;function ES(){if(ag){const n=Array.from(wo).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const s=eL(r);s.length&&(t.set(r,s),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=t.get(r);s&&s.forEach(([a,l])=>{var f;(f=r.getValue(a))==null||f.set(l)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}ag=!1,og=!1,wo.forEach(n=>n.complete(lg)),wo.clear()}function TS(){wo.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(ag=!0)})}function tL(){lg=!0,TS(),ES(),lg=!1}class Xy{constructor(e,t,r,s,a,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=s,this.element=a,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(wo.add(this),og||(og=!0,st.read(TS),st.resolveKeyframes(ES))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:s}=this;if(e[0]===null){const a=s==null?void 0:s.get(),l=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&t){const f=r.readValue(t,l);f!=null&&(e[0]=f)}e[0]===void 0&&(e[0]=l),s&&a===void 0&&s.set(e[0])}q4(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),wo.delete(this)}cancel(){this.state==="scheduled"&&(wo.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const nL=n=>n.startsWith("--");function rL(n,e,t){nL(e)?n.style.setProperty(e,t):n.style[e]=t}const iL=Fy(()=>window.ScrollTimeline!==void 0),sL={};function oL(n,e){const t=Fy(n);return()=>sL[e]??t()}const kS=oL(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),gc=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,R_={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:gc([0,.65,.55,1]),circOut:gc([.55,0,1,.45]),backIn:gc([.31,.01,.66,-.59]),backOut:gc([.33,1.53,.69,.99])};function SS(n,e){if(n)return typeof n=="function"?kS()?xS(n,e):"ease-out":lS(n)?gc(n):Array.isArray(n)?n.map(t=>SS(t,e)||R_.easeOut):R_[n]}function aL(n,e,t,{delay:r=0,duration:s=300,repeat:a=0,repeatType:l="loop",ease:f="easeOut",times:d}={},m=void 0){const g={[e]:t};d&&(g.offset=d);const v=SS(f,s);Array.isArray(v)&&(g.easing=v);const w={delay:r,duration:s,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:a+1,direction:l==="reverse"?"alternate":"normal"};return m&&(w.pseudoElement=m),n.animate(g,w)}function bS(n){return typeof n=="function"&&"applyToOptions"in n}function lL({type:n,...e}){return bS(n)&&kS()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class cL extends Qy{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:t,name:r,keyframes:s,pseudoElement:a,allowFlatten:l=!1,finalKeyframe:f,onComplete:d}=e;this.isPseudoElement=!!a,this.allowFlatten=l,this.options=e,Oy(typeof e.type!="string");const m=lL(e);this.animation=aL(t,r,s,m,a),m.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const g=Gy(s,this.options,f,this.speed);this.updateMotionValue?this.updateMotionValue(g):rL(t,r,g),this.animation.cancel()}d==null||d(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;(t=(e=this.animation).finish)==null||t.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(t=(e=this.animation).commitStyles)==null||t.call(e)}get duration(){var t,r;const e=((r=(t=this.animation.effect)==null?void 0:t.getComputedTiming)==null?void 0:r.call(t).duration)||0;return qn(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+qn(e)}get time(){return qn(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=xi(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&iL()?(this.animation.timeline=e,Gn):t(this)}}const IS={anticipate:iS,backInOut:rS,circInOut:oS};function uL(n){return n in IS}function dL(n){typeof n.ease=="string"&&uL(n.ease)&&(n.ease=IS[n.ease])}const lm=10;class hL extends cL{constructor(e){dL(e),wS(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:r,onComplete:s,element:a,...l}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const f=new Yy({...l,autoplay:!1}),d=Math.max(lm,dn.now()-this.startTime),m=qr(0,lm,d-lm);t.setWithVelocity(f.sample(Math.max(0,d-m)).value,f.sample(d).value,m),f.stop()}}const P_=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Rs.test(n)||n==="0")&&!n.startsWith("url("));function fL(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function pL(n,e,t,r){const s=n[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const a=n[n.length-1],l=P_(s,e),f=P_(a,e);return!l||!f?!1:fL(n)||(t==="spring"||bS(t))&&r}function cg(n){n.duration=0,n.type="keyframes"}const mL=new Set(["opacity","clipPath","filter","transform"]),gL=Fy(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function yL(n){var g;const{motionValue:e,name:t,repeatDelay:r,repeatType:s,damping:a,type:l}=n;if(!(((g=e==null?void 0:e.owner)==null?void 0:g.current)instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:m}=e.owner.getProps();return gL()&&t&&mL.has(t)&&(t!=="transform"||!m)&&!d&&!r&&s!=="mirror"&&a!==0&&l!=="inertia"}const vL=40;class xL extends Qy{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:l="loop",keyframes:f,name:d,motionValue:m,element:g,...v}){var T;super(),this.stop=()=>{var I,C;this._animation&&(this._animation.stop(),(I=this.stopTimeline)==null||I.call(this)),(C=this.keyframeResolver)==null||C.cancel()},this.createdAt=dn.now();const w={autoplay:e,delay:t,type:r,repeat:s,repeatDelay:a,repeatType:l,name:d,motionValue:m,element:g,...v},k=(g==null?void 0:g.KeyframeResolver)||Xy;this.keyframeResolver=new k(f,(I,C,O)=>this.onKeyframesResolved(I,C,w,!O),d,m,g),(T=this.keyframeResolver)==null||T.scheduleResolve()}onKeyframesResolved(e,t,r,s){var C,O;this.keyframeResolver=void 0;const{name:a,type:l,velocity:f,delay:d,isHandoff:m,onUpdate:g}=r;this.resolvedAt=dn.now(),pL(e,a,l,f)||((bi.instantAnimations||!d)&&(g==null||g(Gy(e,r,t))),e[0]=e[e.length-1],cg(r),r.repeat=0);const w={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>vL?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...r,keyframes:e},k=!m&&yL(w),T=(O=(C=w.motionValue)==null?void 0:C.owner)==null?void 0:O.current,I=k?new hL({...w,element:T}):new Yy(w);I.finished.then(()=>{this.notifyFinished()}).catch(Gn),this.pendingTimeline&&(this.stopTimeline=I.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=I}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),tL()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}function CS(n,e,t,r=0,s=1){const a=Array.from(n).sort((m,g)=>m.sortNodePosition(g)).indexOf(e),l=n.size,f=(l-1)*r;return typeof t=="function"?t(a,l):s===1?a*r:f-a*r}const _L=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function wL(n){const e=_L.exec(n);if(!e)return[,];const[,t,r,s]=e;return[`--${t??r}`,s]}function AS(n,e,t=1){const[r,s]=wL(n);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const l=a.trim();return Qk(l)?parseFloat(l):l}return $y(s)?AS(s,e,t+1):s}const EL={type:"spring",stiffness:500,damping:25,restSpeed:10},TL=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),kL={type:"keyframes",duration:.8},SL={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},bL=(n,{keyframes:e})=>e.length>2?kL:dl.has(n)?n.startsWith("scale")?TL(e[1]):EL:SL,IL=n=>n!==null;function CL(n,{repeat:e,repeatType:t="loop"},r){const s=n.filter(IL),a=e&&t!=="loop"&&e%2===1?0:s.length-1;return s[a]}function Jy(n,e){return(n==null?void 0:n[e])??(n==null?void 0:n.default)??n}function AL({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:s,repeat:a,repeatType:l,repeatDelay:f,from:d,elapsed:m,...g}){return!!Object.keys(g).length}const Zy=(n,e,t,r={},s,a)=>l=>{const f=Jy(r,n)||{},d=f.delay||r.delay||0;let{elapsed:m=0}=r;m=m-xi(d);const g={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...f,delay:-m,onUpdate:w=>{e.set(w),f.onUpdate&&f.onUpdate(w)},onComplete:()=>{l(),f.onComplete&&f.onComplete()},name:n,motionValue:e,element:a?void 0:s};AL(f)||Object.assign(g,bL(n,g)),g.duration&&(g.duration=xi(g.duration)),g.repeatDelay&&(g.repeatDelay=xi(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let v=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(cg(g),g.delay===0&&(v=!0)),(bi.instantAnimations||bi.skipAnimations)&&(v=!0,cg(g),g.delay=0),g.allowFlatten=!f.type&&!f.ease,v&&!a&&e.get()!==void 0){const w=CL(g.keyframes,f);if(w!==void 0){st.update(()=>{g.onUpdate(w),g.onComplete()});return}}return f.isSync?new Yy(g):new xL(g)};function j_(n){const e=[{},{}];return n==null||n.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function e0(n,e,t,r){if(typeof e=="function"){const[s,a]=j_(r);e=e(t!==void 0?t:n.custom,s,a)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[s,a]=j_(r);e=e(t!==void 0?t:n.custom,s,a)}return e}function La(n,e,t){const r=n.getProps();return e0(r,e,t!==void 0?t:r.custom,n)}const RS=new Set(["width","height","top","left","right","bottom",...ul]),N_=30,RL=n=>!isNaN(parseFloat(n));class PL{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var a;const s=dn.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((a=this.events.change)==null||a.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=dn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=RL(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new By);const r=this.events[e].add(t);return e==="change"?()=>{r(),st.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=dn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>N_)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,N_);return Jk(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;(e=this.dependents)==null||e.clear(),(t=this.events.destroy)==null||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ga(n,e){return new PL(n,e)}const ug=n=>Array.isArray(n);function jL(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Ga(t))}function NL(n){return ug(n)?n[n.length-1]||0:n}function DL(n,e){const t=La(n,e);let{transitionEnd:r={},transition:s={},...a}=t||{};a={...a,...r};for(const l in a){const f=NL(a[l]);jL(n,l,f)}}const sn=n=>!!(n&&n.getVelocity);function VL(n){return!!(sn(n)&&n.add)}function dg(n,e){const t=n.getValue("willChange");if(VL(t))return t.add(e);if(!t&&bi.WillChange){const r=new bi.WillChange("auto");n.addValue("willChange",r),r.add(e)}}function t0(n){return n.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const ML="framerAppearId",PS="data-"+t0(ML);function jS(n){return n.props[PS]}function LL({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function NS(n,e,{delay:t=0,transitionOverride:r,type:s}={}){let{transition:a=n.getDefaultTransition(),transitionEnd:l,...f}=e;r&&(a=r);const d=[],m=s&&n.animationState&&n.animationState.getState()[s];for(const g in f){const v=n.getValue(g,n.latestValues[g]??null),w=f[g];if(w===void 0||m&&LL(m,g))continue;const k={delay:t,...Jy(a||{},g)},T=v.get();if(T!==void 0&&!v.isAnimating&&!Array.isArray(w)&&w===T&&!k.velocity)continue;let I=!1;if(window.MotionHandoffAnimation){const O=jS(n);if(O){const B=window.MotionHandoffAnimation(O,g,st);B!==null&&(k.startTime=B,I=!0)}}dg(n,g),v.start(Zy(g,v,w,n.shouldReduceMotion&&RS.has(g)?{type:!1}:k,n,I));const C=v.animation;C&&d.push(C)}return l&&Promise.all(d).then(()=>{st.update(()=>{l&&DL(n,l)})}),d}function hg(n,e,t={}){var d;const r=La(n,e,t.type==="exit"?(d=n.presenceContext)==null?void 0:d.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(s=t.transitionOverride);const a=r?()=>Promise.all(NS(n,r,t)):()=>Promise.resolve(),l=n.variantChildren&&n.variantChildren.size?(m=0)=>{const{delayChildren:g=0,staggerChildren:v,staggerDirection:w}=s;return OL(n,e,m,g,v,w,t)}:()=>Promise.resolve(),{when:f}=s;if(f){const[m,g]=f==="beforeChildren"?[a,l]:[l,a];return m().then(()=>g())}else return Promise.all([a(),l(t.delay)])}function OL(n,e,t=0,r=0,s=0,a=1,l){const f=[];for(const d of n.variantChildren)d.notify("AnimationStart",e),f.push(hg(d,e,{...l,delay:t+(typeof r=="function"?0:r)+CS(n.variantChildren,d,r,s,a)}).then(()=>d.notify("AnimationComplete",e)));return Promise.all(f)}function FL(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(a=>hg(n,a,t));r=Promise.all(s)}else if(typeof e=="string")r=hg(n,e,t);else{const s=typeof e=="function"?La(n,e,t.custom):e;r=Promise.all(NS(n,s,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}const BL={test:n=>n==="auto",parse:n=>n},DS=n=>e=>e.test(n),VS=[cl,de,Ur,as,f4,h4,BL],D_=n=>VS.find(DS(n));function zL(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||Xk(n):!0}const UL=new Set(["brightness","contrast","saturate","opacity"]);function $L(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(Wy)||[];if(!r)return n;const s=t.replace(r,"");let a=UL.has(e)?1:0;return r!==t&&(a*=100),e+"("+a+s+")"}const WL=/\b([a-z-]*)\(.*?\)/gu,fg={...Rs,getAnimatableNone:n=>{const e=n.match(WL);return e?e.map($L).join(" "):n}},V_={...cl,transform:Math.round},HL={rotate:as,rotateX:as,rotateY:as,rotateZ:as,scale:Wd,scaleX:Wd,scaleY:Wd,scaleZ:Wd,skew:as,skewX:as,skewY:as,distance:de,translateX:de,translateY:de,translateZ:de,x:de,y:de,z:de,perspective:de,transformPerspective:de,opacity:$c,originX:w_,originY:w_,originZ:de},n0={borderWidth:de,borderTopWidth:de,borderRightWidth:de,borderBottomWidth:de,borderLeftWidth:de,borderRadius:de,radius:de,borderTopLeftRadius:de,borderTopRightRadius:de,borderBottomRightRadius:de,borderBottomLeftRadius:de,width:de,maxWidth:de,height:de,maxHeight:de,top:de,right:de,bottom:de,left:de,inset:de,insetBlock:de,insetBlockStart:de,insetBlockEnd:de,insetInline:de,insetInlineStart:de,insetInlineEnd:de,padding:de,paddingTop:de,paddingRight:de,paddingBottom:de,paddingLeft:de,paddingBlock:de,paddingBlockStart:de,paddingBlockEnd:de,paddingInline:de,paddingInlineStart:de,paddingInlineEnd:de,margin:de,marginTop:de,marginRight:de,marginBottom:de,marginLeft:de,marginBlock:de,marginBlockStart:de,marginBlockEnd:de,marginInline:de,marginInlineStart:de,marginInlineEnd:de,backgroundPositionX:de,backgroundPositionY:de,...HL,zIndex:V_,fillOpacity:$c,strokeOpacity:$c,numOctaves:V_},KL={...n0,color:bt,backgroundColor:bt,outlineColor:bt,fill:bt,stroke:bt,borderColor:bt,borderTopColor:bt,borderRightColor:bt,borderBottomColor:bt,borderLeftColor:bt,filter:fg,WebkitFilter:fg},MS=n=>KL[n];function LS(n,e){let t=MS(n);return t!==fg&&(t=Rs),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const qL=new Set(["auto","none","0"]);function GL(n,e,t){let r=0,s;for(;r<n.length&&!s;){const a=n[r];typeof a=="string"&&!qL.has(a)&&Wc(a).values.length&&(s=n[r]),r++}if(s&&t)for(const a of e)n[a]=LS(t,s)}class QL extends Xy{constructor(e,t,r,s,a){super(e,t,r,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let g=0;g<e.length;g++){let v=e[g];if(typeof v=="string"&&(v=v.trim(),$y(v))){const w=AS(v,t.current);w!==void 0&&(e[g]=w),g===e.length-1&&(this.finalKeyframe=v)}}if(this.resolveNoneKeyframes(),!RS.has(r)||e.length!==2)return;const[s,a]=e,l=D_(s),f=D_(a),d=__(s),m=__(a);if(d!==m&&hs[r]){this.needsMeasurement=!0;return}if(l!==f)if(A_(l)&&A_(f))for(let g=0;g<e.length;g++){const v=e[g];typeof v=="string"&&(e[g]=parseFloat(v))}else hs[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||zL(e[s]))&&r.push(s);r.length&&GL(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=hs[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const s=t[t.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var f;const{element:e,name:t,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(t);s&&s.jump(this.measuredOrigin,!1);const a=r.length-1,l=r[a];r[a]=hs[t](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),(f=this.removedTransforms)!=null&&f.length&&this.removedTransforms.forEach(([d,m])=>{e.getValue(d).set(m)}),this.resolveNoneKeyframes()}}function YL(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let r=document;const s=(t==null?void 0:t[n])??r.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n)}const OS=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function XL(n){return Yk(n)&&"offsetHeight"in n}const{schedule:r0}=cS(queueMicrotask,!1),cr={x:!1,y:!1};function FS(){return cr.x||cr.y}function JL(n){return n==="x"||n==="y"?cr[n]?null:(cr[n]=!0,()=>{cr[n]=!1}):cr.x||cr.y?null:(cr.x=cr.y=!0,()=>{cr.x=cr.y=!1})}function BS(n,e){const t=YL(n),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[t,s,()=>r.abort()]}function M_(n){return!(n.pointerType==="touch"||FS())}function ZL(n,e,t={}){const[r,s,a]=BS(n,t),l=f=>{if(!M_(f))return;const{target:d}=f,m=e(d,f);if(typeof m!="function"||!d)return;const g=v=>{M_(v)&&(m(v),d.removeEventListener("pointerleave",g))};d.addEventListener("pointerleave",g,s)};return r.forEach(f=>{f.addEventListener("pointerenter",l,s)}),a}const zS=(n,e)=>e?n===e?!0:zS(n,e.parentElement):!1,i0=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,e3=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function US(n){return e3.has(n.tagName)||n.isContentEditable===!0}const oh=new WeakSet;function L_(n){return e=>{e.key==="Enter"&&n(e)}}function cm(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const t3=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=L_(()=>{if(oh.has(t))return;cm(t,"down");const s=L_(()=>{cm(t,"up")}),a=()=>cm(t,"cancel");t.addEventListener("keyup",s,e),t.addEventListener("blur",a,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function O_(n){return i0(n)&&!FS()}function n3(n,e,t={}){const[r,s,a]=BS(n,t),l=f=>{const d=f.currentTarget;if(!O_(f))return;oh.add(d);const m=e(d,f),g=(k,T)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",w),oh.has(d)&&oh.delete(d),O_(k)&&typeof m=="function"&&m(k,{success:T})},v=k=>{g(k,d===window||d===document||t.useGlobalTarget||zS(d,k.target))},w=k=>{g(k,!1)};window.addEventListener("pointerup",v,s),window.addEventListener("pointercancel",w,s)};return r.forEach(f=>{(t.useGlobalTarget?window:f).addEventListener("pointerdown",l,s),XL(f)&&(f.addEventListener("focus",m=>t3(m,s)),!US(f)&&!f.hasAttribute("tabindex")&&(f.tabIndex=0))}),a}function $S(n){return Yk(n)&&"ownerSVGElement"in n}function r3(n){return $S(n)&&n.tagName==="svg"}const i3=[...VS,bt,Rs],s3=n=>i3.find(DS(n)),F_=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ia=()=>({x:F_(),y:F_()}),B_=()=>({min:0,max:0}),jt=()=>({x:B_(),y:B_()}),pg={current:null},WS={current:!1},o3=typeof window<"u";function a3(){if(WS.current=!0,!!o3)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>pg.current=n.matches;n.addEventListener("change",e),e()}else pg.current=!1}const l3=new WeakMap;function df(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function Hc(n){return typeof n=="string"||Array.isArray(n)}const s0=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],o0=["initial",...s0];function hf(n){return df(n.animate)||o0.some(e=>Hc(n[e]))}function HS(n){return!!(hf(n)||n.variants)}function c3(n,e,t){for(const r in e){const s=e[r],a=t[r];if(sn(s))n.addValue(r,s);else if(sn(a))n.addValue(r,Ga(s,{owner:n}));else if(a!==s)if(n.hasValue(r)){const l=n.getValue(r);l.liveStyle===!0?l.jump(s):l.hasAnimated||l.set(s)}else{const l=n.getStaticValue(r);n.addValue(r,Ga(l!==void 0?l:s,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const z_=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let Dh={};function KS(n){Dh=n}function u3(){return Dh}class d3{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:a,visualState:l},f={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Xy,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const w=dn.now();this.renderScheduledAt<w&&(this.renderScheduledAt=w,st.render(this.render,!1,!0))};const{latestValues:d,renderState:m}=l;this.latestValues=d,this.baseTarget={...d},this.initialValues=t.initial?{...d}:{},this.renderState=m,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=f,this.blockInitialAnimation=!!a,this.isControllingVariants=hf(t),this.isVariantNode=HS(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...v}=this.scrapeMotionValuesFromProps(t,{},this);for(const w in v){const k=v[w];d[w]!==void 0&&sn(k)&&k.set(d[w])}}mount(e){var t;this.current=e,l3.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,s)=>this.bindToMotionValue(s,r)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(WS.current||a3(),this.shouldReduceMotion=pg.current),(t=this.parent)==null||t.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),As(this.notifyUpdate),As(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=dl.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=t.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&st.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;typeof window<"u"&&window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{s(),a&&a(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Dh){const t=Dh[e];if(!t)continue;const{isEnabled:r,Feature:s}=t;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):jt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<z_.length;r++){const s=z_[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,l=e[a];l&&(this.propEventSubscriptions[s]=this.on(s,l))}this.prevMotionValues=c3(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=Ga(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(Qk(r)||Xk(r))?r=parseFloat(r):!s3(r)&&Rs.test(t)&&(r=LS(e,t)),this.setBaseTarget(e,sn(r)?r.get():r)),sn(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var a;const{initial:t}=this.props;let r;if(typeof t=="string"||typeof t=="object"){const l=e0(this.props,t,(a=this.presenceContext)==null?void 0:a.custom);l&&(r=l[e])}if(t&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!sn(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new By),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){r0.render(this.render)}}class qS extends d3{constructor(){super(...arguments),this.KeyframeResolver=QL}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){const r=e.style;return r?r[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;sn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}class Ls{constructor(e){this.isMounted=!1,this.node=e}update(){}}function GS({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function h3({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function f3(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function um(n){return n===void 0||n===1}function mg({scale:n,scaleX:e,scaleY:t}){return!um(n)||!um(e)||!um(t)}function po(n){return mg(n)||QS(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function QS(n){return U_(n.x)||U_(n.y)}function U_(n){return n&&n!=="0%"}function Vh(n,e,t){const r=n-t,s=e*r;return t+s}function $_(n,e,t,r,s){return s!==void 0&&(n=Vh(n,s,r)),Vh(n,t,r)+e}function gg(n,e=0,t=1,r,s){n.min=$_(n.min,e,t,r,s),n.max=$_(n.max,e,t,r,s)}function YS(n,{x:e,y:t}){gg(n.x,e.translate,e.scale,e.originPoint),gg(n.y,t.translate,t.scale,t.originPoint)}const W_=.999999999999,H_=1.0000000000001;function p3(n,e,t,r=!1){const s=t.length;if(!s)return;e.x=e.y=1;let a,l;for(let f=0;f<s;f++){a=t[f],l=a.projectionDelta;const{visualElement:d}=a.options;d&&d.props.style&&d.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Aa(n,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,YS(n,l)),r&&po(a.latestValues)&&Aa(n,a.latestValues))}e.x<H_&&e.x>W_&&(e.x=1),e.y<H_&&e.y>W_&&(e.y=1)}function Ca(n,e){n.min=n.min+e,n.max=n.max+e}function K_(n,e,t,r,s=.5){const a=ut(n.min,n.max,s);gg(n,e,t,a,r)}function Aa(n,e){K_(n.x,e.x,e.scaleX,e.scale,e.originX),K_(n.y,e.y,e.scaleY,e.scale,e.originY)}function XS(n,e){return GS(f3(n.getBoundingClientRect(),e))}function m3(n,e,t){const r=XS(n,t),{scroll:s}=e;return s&&(Ca(r.x,s.offset.x),Ca(r.y,s.offset.y)),r}const g3={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},y3=ul.length;function v3(n,e,t){let r="",s=!0;for(let a=0;a<y3;a++){const l=ul[a],f=n[l];if(f===void 0)continue;let d=!0;if(typeof f=="number"?d=f===(l.startsWith("scale")?1:0):d=parseFloat(f)===0,!d||t){const m=OS(f,n0[l]);if(!d){s=!1;const g=g3[l]||l;r+=`${g}(${m}) `}t&&(e[l]=m)}}return r=r.trim(),t?r=t(e,s?"":r):s&&(r="none"),r}function a0(n,e,t){const{style:r,vars:s,transformOrigin:a}=n;let l=!1,f=!1;for(const d in e){const m=e[d];if(dl.has(d)){l=!0;continue}else if(dS(d)){s[d]=m;continue}else{const g=OS(m,n0[d]);d.startsWith("origin")?(f=!0,a[d]=g):r[d]=g}}if(e.transform||(l||t?r.transform=v3(e,n.transform,t):r.transform&&(r.transform="none")),f){const{originX:d="50%",originY:m="50%",originZ:g=0}=a;r.transformOrigin=`${d} ${m} ${g}`}}function JS(n,{style:e,vars:t},r,s){const a=n.style;let l;for(l in e)a[l]=e[l];s==null||s.applyProjectionStyles(a,r);for(l in t)a.setProperty(l,t[l])}function q_(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const cc={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(de.test(n))n=parseFloat(n);else return n;const t=q_(n,e.target.x),r=q_(n,e.target.y);return`${t}% ${r}%`}},x3={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,s=Rs.parse(n);if(s.length>5)return r;const a=Rs.createTransformer(n),l=typeof s[0]!="number"?1:0,f=t.x.scale*e.x,d=t.y.scale*e.y;s[0+l]/=f,s[1+l]/=d;const m=ut(f,d,.5);return typeof s[2+l]=="number"&&(s[2+l]/=m),typeof s[3+l]=="number"&&(s[3+l]/=m),a(s)}},yg={borderRadius:{...cc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:cc,borderTopRightRadius:cc,borderBottomLeftRadius:cc,borderBottomRightRadius:cc,boxShadow:x3};function ZS(n,{layout:e,layoutId:t}){return dl.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!yg[n]||n==="opacity")}function l0(n,e,t){var l;const r=n.style,s=e==null?void 0:e.style,a={};if(!r)return a;for(const f in r)(sn(r[f])||s&&sn(s[f])||ZS(f,n)||((l=t==null?void 0:t.getValue(f))==null?void 0:l.liveStyle)!==void 0)&&(a[f]=r[f]);return a}function _3(n){return window.getComputedStyle(n)}class w3 extends qS{constructor(){super(...arguments),this.type="html",this.renderInstance=JS}readValueFromInstance(e,t){var r;if(dl.has(t))return(r=this.projection)!=null&&r.isProjecting?ig(t):Y4(e,t);{const s=_3(e),a=(dS(t)?s.getPropertyValue(t):s[t])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:t}){return XS(e,t)}build(e,t,r){a0(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return l0(e,t,r)}}const E3={offset:"stroke-dashoffset",array:"stroke-dasharray"},T3={offset:"strokeDashoffset",array:"strokeDasharray"};function k3(n,e,t=1,r=0,s=!0){n.pathLength=1;const a=s?E3:T3;n[a.offset]=de.transform(-r);const l=de.transform(e),f=de.transform(t);n[a.array]=`${l} ${f}`}const S3=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function eb(n,{attrX:e,attrY:t,attrScale:r,pathLength:s,pathSpacing:a=1,pathOffset:l=0,...f},d,m,g){if(a0(n,f,m),d){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:v,style:w}=n;v.transform&&(w.transform=v.transform,delete v.transform),(w.transform||v.transformOrigin)&&(w.transformOrigin=v.transformOrigin??"50% 50%",delete v.transformOrigin),w.transform&&(w.transformBox=(g==null?void 0:g.transformBox)??"fill-box",delete v.transformBox);for(const k of S3)v[k]!==void 0&&(w[k]=v[k],delete v[k]);e!==void 0&&(v.x=e),t!==void 0&&(v.y=t),r!==void 0&&(v.scale=r),s!==void 0&&k3(v,s,a,l,!1)}const tb=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),nb=n=>typeof n=="string"&&n.toLowerCase()==="svg";function b3(n,e,t,r){JS(n,e,void 0,r);for(const s in e.attrs)n.setAttribute(tb.has(s)?s:t0(s),e.attrs[s])}function rb(n,e,t){const r=l0(n,e,t);for(const s in n)if(sn(n[s])||sn(e[s])){const a=ul.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[a]=n[s]}return r}class I3 extends qS{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=jt}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(dl.has(t)){const r=MS(t);return r&&r.default||0}return t=tb.has(t)?t:t0(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return rb(e,t,r)}build(e,t,r){eb(e,t,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,t,r,s){b3(e,t,r,s)}mount(e){this.isSVGTag=nb(e.tagName),super.mount(e)}}const C3=o0.length;function ib(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?ib(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<C3;t++){const r=o0[t],s=n.props[r];(Hc(s)||s===!1)&&(e[r]=s)}return e}function sb(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}const A3=[...s0].reverse(),R3=s0.length;function P3(n){return e=>Promise.all(e.map(({animation:t,options:r})=>FL(n,t,r)))}function j3(n){let e=P3(n),t=G_(),r=!0;const s=d=>(m,g)=>{var w;const v=La(n,g,d==="exit"?(w=n.presenceContext)==null?void 0:w.custom:void 0);if(v){const{transition:k,transitionEnd:T,...I}=v;m={...m,...I,...T}}return m};function a(d){e=d(n)}function l(d){const{props:m}=n,g=ib(n.parent)||{},v=[],w=new Set;let k={},T=1/0;for(let C=0;C<R3;C++){const O=A3[C],B=t[O],j=m[O]!==void 0?m[O]:g[O],Q=Hc(j),W=O===d?B.isActive:null;W===!1&&(T=C);let H=j===g[O]&&j!==m[O]&&Q;if(H&&r&&n.manuallyAnimateOnMount&&(H=!1),B.protectedKeys={...k},!B.isActive&&W===null||!j&&!B.prevProp||df(j)||typeof j=="boolean")continue;const A=N3(B.prevProp,j);let b=A||O===d&&B.isActive&&!H&&Q||C>T&&Q,P=!1;const M=Array.isArray(j)?j:[j];let L=M.reduce(s(O),{});W===!1&&(L={});const{prevResolvedValues:$={}}=B,V={...$,...L},Ne=Se=>{b=!0,w.has(Se)&&(P=!0,w.delete(Se)),B.needsAnimating[Se]=!0;const ie=n.getValue(Se);ie&&(ie.liveStyle=!1)};for(const Se in V){const ie=L[Se],fe=$[Se];if(k.hasOwnProperty(Se))continue;let ae=!1;ug(ie)&&ug(fe)?ae=!sb(ie,fe):ae=ie!==fe,ae?ie!=null?Ne(Se):w.add(Se):ie!==void 0&&w.has(Se)?Ne(Se):B.protectedKeys[Se]=!0}B.prevProp=j,B.prevResolvedValues=L,B.isActive&&(k={...k,...L}),r&&n.blockInitialAnimation&&(b=!1);const He=H&&A;b&&(!He||P)&&v.push(...M.map(Se=>{const ie={type:O};if(typeof Se=="string"&&r&&!He&&n.manuallyAnimateOnMount&&n.parent){const{parent:fe}=n,ae=La(fe,Se);if(fe.enteringChildren&&ae){const{delayChildren:U}=ae.transition||{};ie.delay=CS(fe.enteringChildren,n,U)}}return{animation:Se,options:ie}}))}if(w.size){const C={};if(typeof m.initial!="boolean"){const O=La(n,Array.isArray(m.initial)?m.initial[0]:m.initial);O&&O.transition&&(C.transition=O.transition)}w.forEach(O=>{const B=n.getBaseTarget(O),j=n.getValue(O);j&&(j.liveStyle=!0),C[O]=B??null}),v.push({animation:C})}let I=!!v.length;return r&&(m.initial===!1||m.initial===m.animate)&&!n.manuallyAnimateOnMount&&(I=!1),r=!1,I?e(v):Promise.resolve()}function f(d,m){var v;if(t[d].isActive===m)return Promise.resolve();(v=n.variantChildren)==null||v.forEach(w=>{var k;return(k=w.animationState)==null?void 0:k.setActive(d,m)}),t[d].isActive=m;const g=l(d);for(const w in t)t[w].protectedKeys={};return g}return{animateChanges:l,setActive:f,setAnimateFunction:a,getState:()=>t,reset:()=>{t=G_()}}}function N3(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!sb(e,n):!1}function ho(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function G_(){return{animate:ho(!0),whileInView:ho(),whileHover:ho(),whileTap:ho(),whileDrag:ho(),whileFocus:ho(),exit:ho()}}function Q_(n,e){n.min=e.min,n.max=e.max}function lr(n,e){Q_(n.x,e.x),Q_(n.y,e.y)}function Y_(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}const ob=1e-4,D3=1-ob,V3=1+ob,ab=.01,M3=0-ab,L3=0+ab;function hn(n){return n.max-n.min}function O3(n,e,t){return Math.abs(n-e)<=t}function X_(n,e,t,r=.5){n.origin=r,n.originPoint=ut(e.min,e.max,n.origin),n.scale=hn(t)/hn(e),n.translate=ut(t.min,t.max,n.origin)-n.originPoint,(n.scale>=D3&&n.scale<=V3||isNaN(n.scale))&&(n.scale=1),(n.translate>=M3&&n.translate<=L3||isNaN(n.translate))&&(n.translate=0)}function Ic(n,e,t,r){X_(n.x,e.x,t.x,r?r.originX:void 0),X_(n.y,e.y,t.y,r?r.originY:void 0)}function J_(n,e,t){n.min=t.min+e.min,n.max=n.min+hn(e)}function F3(n,e,t){J_(n.x,e.x,t.x),J_(n.y,e.y,t.y)}function Z_(n,e,t){n.min=e.min-t.min,n.max=n.min+hn(e)}function Mh(n,e,t){Z_(n.x,e.x,t.x),Z_(n.y,e.y,t.y)}function ew(n,e,t,r,s){return n-=e,n=Vh(n,1/t,r),s!==void 0&&(n=Vh(n,1/s,r)),n}function B3(n,e=0,t=1,r=.5,s,a=n,l=n){if(Ur.test(e)&&(e=parseFloat(e),e=ut(l.min,l.max,e/100)-l.min),typeof e!="number")return;let f=ut(a.min,a.max,r);n===a&&(f-=e),n.min=ew(n.min,e,t,f,s),n.max=ew(n.max,e,t,f,s)}function tw(n,e,[t,r,s],a,l){B3(n,e[t],e[r],e[s],e.scale,a,l)}const z3=["x","scaleX","originX"],U3=["y","scaleY","originY"];function nw(n,e,t,r){tw(n.x,e,z3,t?t.x:void 0,r?r.x:void 0),tw(n.y,e,U3,t?t.y:void 0,r?r.y:void 0)}function rw(n){return n.translate===0&&n.scale===1}function lb(n){return rw(n.x)&&rw(n.y)}function iw(n,e){return n.min===e.min&&n.max===e.max}function $3(n,e){return iw(n.x,e.x)&&iw(n.y,e.y)}function sw(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function cb(n,e){return sw(n.x,e.x)&&sw(n.y,e.y)}function ow(n){return hn(n.x)/hn(n.y)}function aw(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}function Hn(n){return[n("x"),n("y")]}function W3(n,e,t){let r="";const s=n.x.translate/e.x,a=n.y.translate/e.y,l=(t==null?void 0:t.z)||0;if((s||a||l)&&(r=`translate3d(${s}px, ${a}px, ${l}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:m,rotate:g,rotateX:v,rotateY:w,skewX:k,skewY:T}=t;m&&(r=`perspective(${m}px) ${r}`),g&&(r+=`rotate(${g}deg) `),v&&(r+=`rotateX(${v}deg) `),w&&(r+=`rotateY(${w}deg) `),k&&(r+=`skewX(${k}deg) `),T&&(r+=`skewY(${T}deg) `)}const f=n.x.scale*e.x,d=n.y.scale*e.y;return(f!==1||d!==1)&&(r+=`scale(${f}, ${d})`),r||"none"}const ub=["TopLeft","TopRight","BottomLeft","BottomRight"],H3=ub.length,lw=n=>typeof n=="string"?parseFloat(n):n,cw=n=>typeof n=="number"||de.test(n);function K3(n,e,t,r,s,a){s?(n.opacity=ut(0,t.opacity??1,q3(r)),n.opacityExit=ut(e.opacity??1,0,G3(r))):a&&(n.opacity=ut(e.opacity??1,t.opacity??1,r));for(let l=0;l<H3;l++){const f=`border${ub[l]}Radius`;let d=uw(e,f),m=uw(t,f);if(d===void 0&&m===void 0)continue;d||(d=0),m||(m=0),d===0||m===0||cw(d)===cw(m)?(n[f]=Math.max(ut(lw(d),lw(m),r),0),(Ur.test(m)||Ur.test(d))&&(n[f]+="%")):n[f]=m}(e.rotate||t.rotate)&&(n.rotate=ut(e.rotate||0,t.rotate||0,r))}function uw(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const q3=db(0,.5,sS),G3=db(.5,.95,Gn);function db(n,e,t){return r=>r<n?0:r>e?1:t(Uc(n,e,r))}function Q3(n,e,t){const r=sn(n)?n:Ga(n);return r.start(Zy("",r,e,t)),r.animation}function Kc(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}const Y3=(n,e)=>n.depth-e.depth;class X3{constructor(){this.children=[],this.isDirty=!1}add(e){My(this.children,e),this.isDirty=!0}remove(e){Ly(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Y3),this.isDirty=!1,this.children.forEach(e)}}function J3(n,e){const t=dn.now(),r=({timestamp:s})=>{const a=s-t;a>=e&&(As(r),n(a-e))};return st.setup(r,!0),()=>As(r)}function ah(n){return sn(n)?n.get():n}class Z3{constructor(){this.members=[]}add(e){My(this.members,e),e.scheduleRender()}remove(e){if(Ly(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(s=>e===s);if(t===0)return!1;let r;for(let s=t;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const lh={hasAnimatedSinceResize:!0,hasEverUpdated:!1},dm=["","X","Y","Z"],eO=1e3;let tO=0;function hm(n,e,t,r){const{latestValues:s}=e;s[n]&&(t[n]=s[n],e.setStaticValue(n,0),r&&(r[n]=0))}function hb(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=jS(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:s,layoutId:a}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",st,!(s||a))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&hb(r)}function fb({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(l={},f=e==null?void 0:e()){this.id=tO++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(iO),this.nodes.forEach(lO),this.nodes.forEach(cO),this.nodes.forEach(sO)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=f?f.root||f:this,this.path=f?[...f.path,f]:[],this.parent=f,this.depth=f?f.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new X3)}addEventListener(l,f){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new By),this.eventHandlers.get(l).add(f)}notifyListeners(l,...f){const d=this.eventHandlers.get(l);d&&d.notify(...f)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=$S(l)&&!r3(l),this.instance=l;const{layoutId:f,layout:d,visualElement:m}=this.options;if(m&&!m.current&&m.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||f)&&(this.isLayoutDirty=!0),n){let g,v=0;const w=()=>this.root.updateBlockedByResize=!1;st.read(()=>{v=window.innerWidth}),n(l,()=>{const k=window.innerWidth;k!==v&&(v=k,this.root.updateBlockedByResize=!0,g&&g(),g=J3(w,250),lh.hasAnimatedSinceResize&&(lh.hasAnimatedSinceResize=!1,this.nodes.forEach(fw)))})}f&&this.root.registerSharedNode(f,this),this.options.animate!==!1&&m&&(f||d)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:v,hasRelativeLayoutChanged:w,layout:k})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const T=this.options.transition||m.getDefaultTransition()||pO,{onLayoutAnimationStart:I,onLayoutAnimationComplete:C}=m.getProps(),O=!this.targetLayout||!cb(this.targetLayout,k),B=!v&&w;if(this.options.layoutRoot||this.resumeFrom||B||v&&(O||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const j={...Jy(T,"layout"),onPlay:I,onComplete:C};(m.shouldReduceMotion||this.options.layoutRoot)&&(j.delay=0,j.type=!1),this.startAnimation(j),this.setAnimationOrigin(g,B)}else v||fw(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=k})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),As(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(uO),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&hb(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const v=this.path[g];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:f,layout:d}=this.options;if(f===void 0&&!d)return;const m=this.getTransformTemplate();this.prevTransformTemplateValue=m?m(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(dw);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(hw);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(aO),this.nodes.forEach(nO),this.nodes.forEach(rO)):this.nodes.forEach(hw),this.clearAllSnapshots();const f=dn.now();Kt.delta=qr(0,1e3/60,f-Kt.timestamp),Kt.timestamp=f,Kt.isProcessing=!0,rm.update.process(Kt),rm.preRender.process(Kt),rm.render.process(Kt),Kt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,r0.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(oO),this.sharedNodes.forEach(dO)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,st.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){st.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!hn(this.snapshot.measuredBox.x)&&!hn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=jt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:f}=this.options;f&&f.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let f=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(f=!1),f&&this.instance){const d=r(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:d,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!s)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,f=this.projectionDelta&&!lb(this.projectionDelta),d=this.getTransformTemplate(),m=d?d(this.latestValues,""):void 0,g=m!==this.prevTransformTemplateValue;l&&this.instance&&(f||po(this.latestValues)||g)&&(s(this.instance,m),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const f=this.measurePageBox();let d=this.removeElementScroll(f);return l&&(d=this.removeTransform(d)),mO(d),{animationId:this.root.animationId,measuredBox:f,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var m;const{visualElement:l}=this.options;if(!l)return jt();const f=l.measureViewportBox();if(!(((m=this.scroll)==null?void 0:m.wasRoot)||this.path.some(gO))){const{scroll:g}=this.root;g&&(Ca(f.x,g.offset.x),Ca(f.y,g.offset.y))}return f}removeElementScroll(l){var d;const f=jt();if(lr(f,l),(d=this.scroll)!=null&&d.wasRoot)return f;for(let m=0;m<this.path.length;m++){const g=this.path[m],{scroll:v,options:w}=g;g!==this.root&&v&&w.layoutScroll&&(v.wasRoot&&lr(f,l),Ca(f.x,v.offset.x),Ca(f.y,v.offset.y))}return f}applyTransform(l,f=!1){const d=jt();lr(d,l);for(let m=0;m<this.path.length;m++){const g=this.path[m];!f&&g.options.layoutScroll&&g.scroll&&g!==g.root&&Aa(d,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),po(g.latestValues)&&Aa(d,g.latestValues)}return po(this.latestValues)&&Aa(d,this.latestValues),d}removeTransform(l){const f=jt();lr(f,l);for(let d=0;d<this.path.length;d++){const m=this.path[d];if(!m.instance||!po(m.latestValues))continue;mg(m.latestValues)&&m.updateSnapshot();const g=jt(),v=m.measurePageBox();lr(g,v),nw(f,m.latestValues,m.snapshot?m.snapshot.layoutBox:void 0,g)}return po(this.latestValues)&&nw(f,this.latestValues),f}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Kt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var k;const f=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=f.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=f.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=f.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==f;if(!(l||d&&this.isSharedProjectionDirty||this.isProjectionDirty||(k=this.parent)!=null&&k.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:v}=this.options;if(!this.layout||!(g||v))return;this.resolvedRelativeTargetAt=Kt.timestamp;const w=this.getClosestProjectingParent();w&&this.linkedParentVersion!==w.layoutVersion&&!w.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(w&&w.layout?this.createRelativeTarget(w,this.layout.layoutBox,w.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=jt(),this.targetWithTransforms=jt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),F3(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):lr(this.target,this.layout.layoutBox),YS(this.target,this.targetDelta)):lr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,w&&!!w.resumingFrom==!!this.resumingFrom&&!w.options.layoutScroll&&w.target&&this.animationProgress!==1?this.createRelativeTarget(w,this.target,w.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||mg(this.parent.latestValues)||QS(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(l,f,d){this.relativeParent=l,this.linkedParentVersion=l.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=jt(),this.relativeTargetOrigin=jt(),Mh(this.relativeTargetOrigin,f,d),lr(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var T;const l=this.getLead(),f=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||(T=this.parent)!=null&&T.isProjectionDirty)&&(d=!1),f&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===Kt.timestamp&&(d=!1),d)return;const{layout:m,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||g))return;lr(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,w=this.treeScale.y;p3(this.layoutCorrected,this.treeScale,this.path,f),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=jt());const{target:k}=l;if(!k){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Y_(this.prevProjectionDelta.x,this.projectionDelta.x),Y_(this.prevProjectionDelta.y,this.projectionDelta.y)),Ic(this.projectionDelta,this.layoutCorrected,k,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==w||!aw(this.projectionDelta.x,this.prevProjectionDelta.x)||!aw(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",k))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var f;if((f=this.options.visualElement)==null||f.scheduleRender(),l){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ia(),this.projectionDelta=Ia(),this.projectionDeltaWithTransform=Ia()}setAnimationOrigin(l,f=!1){const d=this.snapshot,m=d?d.latestValues:{},g={...this.latestValues},v=Ia();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!f;const w=jt(),k=d?d.source:void 0,T=this.layout?this.layout.source:void 0,I=k!==T,C=this.getStack(),O=!C||C.members.length<=1,B=!!(I&&!O&&this.options.crossfade===!0&&!this.path.some(fO));this.animationProgress=0;let j;this.mixTargetDelta=Q=>{const W=Q/1e3;pw(v.x,l.x,W),pw(v.y,l.y,W),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Mh(w,this.layout.layoutBox,this.relativeParent.layout.layoutBox),hO(this.relativeTarget,this.relativeTargetOrigin,w,W),j&&$3(this.relativeTarget,j)&&(this.isProjectionDirty=!1),j||(j=jt()),lr(j,this.relativeTarget)),I&&(this.animationValues=g,K3(g,m,this.latestValues,W,B,O)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=W},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){var f,d,m;this.notifyListeners("animationStart"),(f=this.currentAnimation)==null||f.stop(),(m=(d=this.resumingFrom)==null?void 0:d.currentAnimation)==null||m.stop(),this.pendingAnimation&&(As(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=st.update(()=>{lh.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ga(0)),this.currentAnimation=Q3(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:g=>{this.mixTargetDelta(g),l.onUpdate&&l.onUpdate(g)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(eO),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:f,target:d,layout:m,latestValues:g}=l;if(!(!f||!d||!m)){if(this!==l&&this.layout&&m&&pb(this.options.animationType,this.layout.layoutBox,m.layoutBox)){d=this.target||jt();const v=hn(this.layout.layoutBox.x);d.x.min=l.target.x.min,d.x.max=d.x.min+v;const w=hn(this.layout.layoutBox.y);d.y.min=l.target.y.min,d.y.max=d.y.min+w}lr(f,d),Aa(f,g),Ic(this.projectionDeltaWithTransform,this.layoutCorrected,f,g)}}registerSharedNode(l,f){this.sharedNodes.has(l)||this.sharedNodes.set(l,new Z3),this.sharedNodes.get(l).add(f);const m=f.options.initialPromotionConfig;f.promote({transition:m?m.transition:void 0,preserveFollowOpacity:m&&m.shouldPreserveFollowOpacity?m.shouldPreserveFollowOpacity(f):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var f;const{layoutId:l}=this.options;return l?((f=this.getStack())==null?void 0:f.lead)||this:this}getPrevLead(){var f;const{layoutId:l}=this.options;return l?(f=this.getStack())==null?void 0:f.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:f,preserveFollowOpacity:d}={}){const m=this.getStack();m&&m.promote(this,d),l&&(this.projectionDelta=void 0,this.needsReset=!0),f&&this.setOptions({transition:f})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let f=!1;const{latestValues:d}=l;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(f=!0),!f)return;const m={};d.z&&hm("z",l,m,this.animationValues);for(let g=0;g<dm.length;g++)hm(`rotate${dm[g]}`,l,m,this.animationValues),hm(`skew${dm[g]}`,l,m,this.animationValues);l.render();for(const g in m)l.setStaticValue(g,m[g]),this.animationValues&&(this.animationValues[g]=m[g]);l.scheduleRender()}applyProjectionStyles(l,f){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=ah(f==null?void 0:f.pointerEvents)||"",l.transform=d?d(this.latestValues,""):"none";return}const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=ah(f==null?void 0:f.pointerEvents)||""),this.hasProjected&&!po(this.latestValues)&&(l.transform=d?d({},""):"none",this.hasProjected=!1);return}l.visibility="";const g=m.animationValues||m.latestValues;this.applyTransformsToTarget();let v=W3(this.projectionDeltaWithTransform,this.treeScale,g);d&&(v=d(g,v)),l.transform=v;const{x:w,y:k}=this.projectionDelta;l.transformOrigin=`${w.origin*100}% ${k.origin*100}% 0`,m.animationValues?l.opacity=m===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:l.opacity=m===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const T in yg){if(g[T]===void 0)continue;const{correct:I,applyTo:C,isCSSVariable:O}=yg[T],B=v==="none"?g[T]:I(g[T],m);if(C){const j=C.length;for(let Q=0;Q<j;Q++)l[C[Q]]=B}else O?this.options.visualElement.renderState.vars[T]=B:l[T]=B}this.options.layoutId&&(l.pointerEvents=m===this?ah(f==null?void 0:f.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var f;return(f=l.currentAnimation)==null?void 0:f.stop()}),this.root.nodes.forEach(dw),this.root.sharedNodes.clear()}}}function nO(n){n.updateLayout()}function rO(n){var t;const e=((t=n.resumeFrom)==null?void 0:t.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=n.layout,{animationType:a}=n.options,l=e.source!==n.layout.source;a==="size"?Hn(v=>{const w=l?e.measuredBox[v]:e.layoutBox[v],k=hn(w);w.min=r[v].min,w.max=w.min+k}):pb(a,e.layoutBox,r)&&Hn(v=>{const w=l?e.measuredBox[v]:e.layoutBox[v],k=hn(r[v]);w.max=w.min+k,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[v].max=n.relativeTarget[v].min+k)});const f=Ia();Ic(f,r,e.layoutBox);const d=Ia();l?Ic(d,n.applyTransform(s,!0),e.measuredBox):Ic(d,r,e.layoutBox);const m=!lb(f);let g=!1;if(!n.resumeFrom){const v=n.getClosestProjectingParent();if(v&&!v.resumeFrom){const{snapshot:w,layout:k}=v;if(w&&k){const T=jt();Mh(T,e.layoutBox,w.layoutBox);const I=jt();Mh(I,r,k.layoutBox),cb(T,I)||(g=!0),v.options.layoutRoot&&(n.relativeTarget=I,n.relativeTargetOrigin=T,n.relativeParent=v)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:d,layoutDelta:f,hasLayoutChanged:m,hasRelativeLayoutChanged:g})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function iO(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function sO(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function oO(n){n.clearSnapshot()}function dw(n){n.clearMeasurements()}function hw(n){n.isLayoutDirty=!1}function aO(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function fw(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function lO(n){n.resolveTargetDelta()}function cO(n){n.calcProjection()}function uO(n){n.resetSkewAndRotation()}function dO(n){n.removeLeadSnapshot()}function pw(n,e,t){n.translate=ut(e.translate,0,t),n.scale=ut(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function mw(n,e,t,r){n.min=ut(e.min,t.min,r),n.max=ut(e.max,t.max,r)}function hO(n,e,t,r){mw(n.x,e.x,t.x,r),mw(n.y,e.y,t.y,r)}function fO(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const pO={duration:.45,ease:[.4,0,.1,1]},gw=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),yw=gw("applewebkit/")&&!gw("chrome/")?Math.round:Gn;function vw(n){n.min=yw(n.min),n.max=yw(n.max)}function mO(n){vw(n.x),vw(n.y)}function pb(n,e,t){return n==="position"||n==="preserve-aspect"&&!O3(ow(e),ow(t),.2)}function gO(n){var e;return n!==n.root&&((e=n.scroll)==null?void 0:e.wasRoot)}const yO=fb({attachResizeListener:(n,e)=>Kc(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),fm={current:void 0},mb=fb({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!fm.current){const n=new yO({});n.mount(window),n.setOptions({layoutScroll:!0}),fm.current=n}return fm.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),gb=N.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function vO(n=!0){const e=N.useContext(Vy);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:s}=e,a=N.useId();N.useEffect(()=>{if(n)return s(a)},[n]);const l=N.useCallback(()=>n&&r&&r(a),[a,r,n]);return!t&&r?[!1,l]:[!0]}const yb=N.createContext({strict:!1}),xw={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let _w=!1;function xO(){if(_w)return;const n={};for(const e in xw)n[e]={isEnabled:t=>xw[e].some(r=>!!t[r])};KS(n),_w=!0}function vb(){return xO(),u3()}function _O(n){const e=vb();for(const t in n)e[t]={...e[t],...n[t]};KS(e)}const wO=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Lh(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||wO.has(n)}let xb=n=>!Lh(n);function EO(n){typeof n=="function"&&(xb=e=>e.startsWith("on")?!Lh(e):n(e))}try{EO(require("@emotion/is-prop-valid").default)}catch{}function TO(n,e,t){const r={};for(const s in n)s==="values"&&typeof n.values=="object"||(xb(s)||t===!0&&Lh(s)||!e&&!Lh(s)||n.draggable&&s.startsWith("onDrag"))&&(r[s]=n[s]);return r}const ff=N.createContext({});function kO(n,e){if(hf(n)){const{initial:t,animate:r}=n;return{initial:t===!1||Hc(t)?t:void 0,animate:Hc(r)?r:void 0}}return n.inherit!==!1?e:{}}function SO(n){const{initial:e,animate:t}=kO(n,N.useContext(ff));return N.useMemo(()=>({initial:e,animate:t}),[ww(e),ww(t)])}function ww(n){return Array.isArray(n)?n.join(" "):n}const c0=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function _b(n,e,t){for(const r in e)!sn(e[r])&&!ZS(r,t)&&(n[r]=e[r])}function bO({transformTemplate:n},e){return N.useMemo(()=>{const t=c0();return a0(t,e,n),Object.assign({},t.vars,t.style)},[e])}function IO(n,e){const t=n.style||{},r={};return _b(r,t,n),Object.assign(r,bO(n,e)),r}function CO(n,e){const t={},r=IO(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}const wb=()=>({...c0(),attrs:{}});function AO(n,e,t,r){const s=N.useMemo(()=>{const a=wb();return eb(a,e,nb(r),n.transformTemplate,n.style),{...a.attrs,style:{...a.style}}},[e]);if(n.style){const a={};_b(a,n.style,n),s.style={...a,...s.style}}return s}const RO=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function u0(n){return typeof n!="string"||n.includes("-")?!1:!!(RO.indexOf(n)>-1||/[A-Z]/u.test(n))}function PO(n,e,t,{latestValues:r},s,a=!1,l){const d=(l??u0(n)?AO:CO)(e,r,s,n),m=TO(e,typeof n=="string",a),g=n!==N.Fragment?{...m,...d,ref:t}:{},{children:v}=e,w=N.useMemo(()=>sn(v)?v.get():v,[v]);return N.createElement(n,{...g,children:w})}function jO({scrapeMotionValuesFromProps:n,createRenderState:e},t,r,s){return{latestValues:NO(t,r,s,n),renderState:e()}}function NO(n,e,t,r){const s={},a=r(n,{});for(const w in a)s[w]=ah(a[w]);let{initial:l,animate:f}=n;const d=hf(n),m=HS(n);e&&m&&!d&&n.inherit!==!1&&(l===void 0&&(l=e.initial),f===void 0&&(f=e.animate));let g=t?t.initial===!1:!1;g=g||l===!1;const v=g?f:l;if(v&&typeof v!="boolean"&&!df(v)){const w=Array.isArray(v)?v:[v];for(let k=0;k<w.length;k++){const T=e0(n,w[k]);if(T){const{transitionEnd:I,transition:C,...O}=T;for(const B in O){let j=O[B];if(Array.isArray(j)){const Q=g?j.length-1:0;j=j[Q]}j!==null&&(s[B]=j)}for(const B in I)s[B]=I[B]}}}return s}const Eb=n=>(e,t)=>{const r=N.useContext(ff),s=N.useContext(Vy),a=()=>jO(n,e,r,s);return t?a():KM(a)},DO=Eb({scrapeMotionValuesFromProps:l0,createRenderState:c0}),VO=Eb({scrapeMotionValuesFromProps:rb,createRenderState:wb}),MO=Symbol.for("motionComponentSymbol");function LO(n,e,t){const r=N.useRef(t);N.useInsertionEffect(()=>{r.current=t});const s=N.useRef(null);return N.useCallback(a=>{var f;a&&((f=n.onMount)==null||f.call(n,a)),e&&(a?e.mount(a):e.unmount());const l=r.current;if(typeof l=="function")if(a){const d=l(a);typeof d=="function"&&(s.current=d)}else s.current?(s.current(),s.current=null):l(a);else l&&(l.current=a)},[e])}const Tb=N.createContext({});function yc(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function OO(n,e,t,r,s,a){var C,O;const{visualElement:l}=N.useContext(ff),f=N.useContext(yb),d=N.useContext(Vy),m=N.useContext(gb).reducedMotion,g=N.useRef(null);r=r||f.renderer,!g.current&&r&&(g.current=r(n,{visualState:e,parent:l,props:t,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:m,isSVG:a}));const v=g.current,w=N.useContext(Tb);v&&!v.projection&&s&&(v.type==="html"||v.type==="svg")&&FO(g.current,t,s,w);const k=N.useRef(!1);N.useInsertionEffect(()=>{v&&k.current&&v.update(t,d)});const T=t[PS],I=N.useRef(!!T&&!((C=window.MotionHandoffIsComplete)!=null&&C.call(window,T))&&((O=window.MotionHasOptimisedAnimation)==null?void 0:O.call(window,T)));return qM(()=>{v&&(k.current=!0,window.MotionIsMounted=!0,v.updateFeatures(),v.scheduleRenderMicrotask(),I.current&&v.animationState&&v.animationState.animateChanges())}),N.useEffect(()=>{v&&(!I.current&&v.animationState&&v.animationState.animateChanges(),I.current&&(queueMicrotask(()=>{var B;(B=window.MotionHandoffMarkAsComplete)==null||B.call(window,T)}),I.current=!1),v.enteringChildren=void 0)}),v}function FO(n,e,t,r){const{layoutId:s,layout:a,drag:l,dragConstraints:f,layoutScroll:d,layoutRoot:m,layoutCrossfade:g}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:kb(n.parent)),n.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!l||f&&yc(f),visualElement:n,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:g,layoutScroll:d,layoutRoot:m})}function kb(n){if(n)return n.options.allowProjection!==!1?n.projection:kb(n.parent)}function pm(n,{forwardMotionProps:e=!1,type:t}={},r,s){r&&_O(r);const a=t?t==="svg":u0(n),l=a?VO:DO;function f(m,g){let v;const w={...N.useContext(gb),...m,layoutId:BO(m)},{isStatic:k}=w,T=SO(m),I=l(m,k);if(!k&&Gk){zO();const C=UO(w);v=C.MeasureLayout,T.visualElement=OO(n,I,w,s,C.ProjectionNode,a)}return u.jsxs(ff.Provider,{value:T,children:[v&&T.visualElement?u.jsx(v,{visualElement:T.visualElement,...w}):null,PO(n,m,LO(I,T.visualElement,g),I,k,e,a)]})}f.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const d=N.forwardRef(f);return d[MO]=n,d}function BO({layoutId:n}){const e=N.useContext(qk).id;return e&&n!==void 0?e+"-"+n:n}function zO(n,e){N.useContext(yb).strict}function UO(n){const e=vb(),{drag:t,layout:r}=e;if(!t&&!r)return{};const s={...t,...r};return{MeasureLayout:t!=null&&t.isEnabled(n)||r!=null&&r.isEnabled(n)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function $O(n,e){if(typeof Proxy>"u")return pm;const t=new Map,r=(a,l)=>pm(a,l,n,e),s=(a,l)=>r(a,l);return new Proxy(s,{get:(a,l)=>l==="create"?r:(t.has(l)||t.set(l,pm(l,void 0,n,e)),t.get(l))})}const WO=(n,e)=>e.isSVG??u0(n)?new I3(e):new w3(e,{allowProjection:n!==N.Fragment});class HO extends Ls{constructor(e){super(e),e.animationState||(e.animationState=j3(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();df(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let KO=0;class qO extends Ls{constructor(){super(...arguments),this.id=KO++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);t&&!e&&s.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const GO={animation:{Feature:HO},exit:{Feature:qO}};function yu(n){return{point:{x:n.pageX,y:n.pageY}}}const QO=n=>e=>i0(e)&&n(e,yu(e));function Cc(n,e,t,r){return Kc(n,e,QO(t),r)}const Sb=({current:n})=>n?n.ownerDocument.defaultView:null,Ew=(n,e)=>Math.abs(n-e);function YO(n,e){const t=Ew(n.x,e.x),r=Ew(n.y,e.y);return Math.sqrt(t**2+r**2)}const Tw=new Set(["auto","scroll"]);class bb{constructor(e,t,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:a=!1,distanceThreshold:l=3,element:f}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=k=>{this.handleScroll(k.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const k=gm(this.lastMoveEventInfo,this.history),T=this.startEvent!==null,I=YO(k.offset,{x:0,y:0})>=this.distanceThreshold;if(!T&&!I)return;const{point:C}=k,{timestamp:O}=Kt;this.history.push({...C,timestamp:O});const{onStart:B,onMove:j}=this.handlers;T||(B&&B(this.lastMoveEvent,k),this.startEvent=this.lastMoveEvent),j&&j(this.lastMoveEvent,k)},this.handlePointerMove=(k,T)=>{this.lastMoveEvent=k,this.lastMoveEventInfo=mm(T,this.transformPagePoint),st.update(this.updatePoint,!0)},this.handlePointerUp=(k,T)=>{this.end();const{onEnd:I,onSessionEnd:C,resumeAnimation:O}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&O&&O(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const B=gm(k.type==="pointercancel"?this.lastMoveEventInfo:mm(T,this.transformPagePoint),this.history);this.startEvent&&I&&I(k,B),C&&C(k,B)},!i0(e))return;this.dragSnapToOrigin=a,this.handlers=t,this.transformPagePoint=r,this.distanceThreshold=l,this.contextWindow=s||window;const d=yu(e),m=mm(d,this.transformPagePoint),{point:g}=m,{timestamp:v}=Kt;this.history=[{...g,timestamp:v}];const{onSessionStart:w}=t;w&&w(e,gm(m,this.history)),this.removeListeners=pu(Cc(this.contextWindow,"pointermove",this.handlePointerMove),Cc(this.contextWindow,"pointerup",this.handlePointerUp),Cc(this.contextWindow,"pointercancel",this.handlePointerUp)),f&&this.startScrollTracking(f)}startScrollTracking(e){let t=e.parentElement;for(;t;){const r=getComputedStyle(t);(Tw.has(r.overflowX)||Tw.has(r.overflowY))&&this.scrollPositions.set(t,{x:t.scrollLeft,y:t.scrollTop}),t=t.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const t=this.scrollPositions.get(e);if(!t)return;const r=e===window,s=r?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},a={x:s.x-t.x,y:s.y-t.y};a.x===0&&a.y===0||(r?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=a.x,this.lastMoveEventInfo.point.y+=a.y):this.history.length>0&&(this.history[0].x-=a.x,this.history[0].y-=a.y),this.scrollPositions.set(e,s),st.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),As(this.updatePoint)}}function mm(n,e){return e?{point:e(n.point)}:n}function kw(n,e){return{x:n.x-e.x,y:n.y-e.y}}function gm({point:n},e){return{point:n,delta:kw(n,Ib(e)),offset:kw(n,XO(e)),velocity:JO(e,.1)}}function XO(n){return n[0]}function Ib(n){return n[n.length-1]}function JO(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const s=Ib(n);for(;t>=0&&(r=n[t],!(s.timestamp-r.timestamp>xi(e)));)t--;if(!r)return{x:0,y:0};const a=qn(s.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const l={x:(s.x-r.x)/a,y:(s.y-r.y)/a};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function ZO(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?ut(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?ut(t,n,r.max):Math.min(n,t)),n}function Sw(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function e6(n,{top:e,left:t,bottom:r,right:s}){return{x:Sw(n.x,t,s),y:Sw(n.y,e,r)}}function bw(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function t6(n,e){return{x:bw(n.x,e.x),y:bw(n.y,e.y)}}function n6(n,e){let t=.5;const r=hn(n),s=hn(e);return s>r?t=Uc(e.min,e.max-r,n.min):r>s&&(t=Uc(n.min,n.max-s,e.min)),qr(0,1,t)}function r6(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const vg=.35;function i6(n=vg){return n===!1?n=0:n===!0&&(n=vg),{x:Iw(n,"left","right"),y:Iw(n,"top","bottom")}}function Iw(n,e,t){return{min:Cw(n,e),max:Cw(n,t)}}function Cw(n,e){return typeof n=="number"?n:n[e]||0}const s6=new WeakMap;class o6{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=jt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=v=>{t?(this.stopAnimation(),this.snapToCursor(yu(v).point)):this.pauseAnimation()},l=(v,w)=>{this.stopAnimation();const{drag:k,dragPropagation:T,onDragStart:I}=this.getProps();if(k&&!T&&(this.openDragLock&&this.openDragLock(),this.openDragLock=JL(k),!this.openDragLock))return;this.latestPointerEvent=v,this.latestPanInfo=w,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Hn(O=>{let B=this.getAxisMotionValue(O).get()||0;if(Ur.test(B)){const{projection:j}=this.visualElement;if(j&&j.layout){const Q=j.layout.layoutBox[O];Q&&(B=hn(Q)*(parseFloat(B)/100))}}this.originPoint[O]=B}),I&&st.postRender(()=>I(v,w)),dg(this.visualElement,"transform");const{animationState:C}=this.visualElement;C&&C.setActive("whileDrag",!0)},f=(v,w)=>{this.latestPointerEvent=v,this.latestPanInfo=w;const{dragPropagation:k,dragDirectionLock:T,onDirectionLock:I,onDrag:C}=this.getProps();if(!k&&!this.openDragLock)return;const{offset:O}=w;if(T&&this.currentDirection===null){this.currentDirection=a6(O),this.currentDirection!==null&&I&&I(this.currentDirection);return}this.updateAxis("x",w.point,O),this.updateAxis("y",w.point,O),this.visualElement.render(),C&&C(v,w)},d=(v,w)=>{this.latestPointerEvent=v,this.latestPanInfo=w,this.stop(v,w),this.latestPointerEvent=null,this.latestPanInfo=null},m=()=>Hn(v=>{var w;return this.getAnimationState(v)==="paused"&&((w=this.getAxisMotionValue(v).animation)==null?void 0:w.play())}),{dragSnapToOrigin:g}=this.getProps();this.panSession=new bb(e,{onSessionStart:a,onStart:l,onMove:f,onSessionEnd:d,resumeAnimation:m},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,distanceThreshold:r,contextWindow:Sb(this.visualElement),element:this.visualElement.current})}stop(e,t){const r=e||this.latestPointerEvent,s=t||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!s||!r)return;const{velocity:l}=s;this.startAnimation(l);const{onDragEnd:f}=this.getProps();f&&st.postRender(()=>f(r,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:s}=this.getProps();if(!r||!Hd(e,s,this.currentDirection))return;const a=this.getAxisMotionValue(e);let l=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(l=ZO(l,this.constraints[e],this.elastic[e])),a.set(l)}resolveConstraints(){var a;const{dragConstraints:e,dragElastic:t}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(a=this.visualElement.projection)==null?void 0:a.layout,s=this.constraints;e&&yc(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=e6(r.layoutBox,e):this.constraints=!1,this.elastic=i6(t),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Hn(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=r6(r.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!yc(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=m3(r,s.root,this.visualElement.getTransformPagePoint());let l=t6(s.layout.layoutBox,a);if(t){const f=t(h3(l));this.hasMutatedConstraints=!!f,f&&(l=GS(f))}return l}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:s,dragTransition:a,dragSnapToOrigin:l,onDragTransitionEnd:f}=this.getProps(),d=this.constraints||{},m=Hn(g=>{if(!Hd(g,t,this.currentDirection))return;let v=d&&d[g]||{};l&&(v={min:0,max:0});const w=s?200:1e6,k=s?40:1e7,T={type:"inertia",velocity:r?e[g]:0,bounceStiffness:w,bounceDamping:k,timeConstant:750,restDelta:1,restSpeed:10,...a,...v};return this.startAxisValueAnimation(g,T)});return Promise.all(m).then(f)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return dg(this.visualElement,e),r.start(Zy(e,r,0,t,this.visualElement,!1))}stopAnimation(){Hn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Hn(e=>{var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[t];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Hn(t=>{const{drag:r}=this.getProps();if(!Hd(t,r,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(t);if(s&&s.layout){const{min:l,max:f}=s.layout.layoutBox[t],d=a.get()||0;a.set(e[t]-ut(l,f,.5)+d)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!yc(t)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Hn(l=>{const f=this.getAxisMotionValue(l);if(f&&this.constraints!==!1){const d=f.get();s[l]=n6({min:d,max:d},this.constraints[l])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Hn(l=>{if(!Hd(l,e,null))return;const f=this.getAxisMotionValue(l),{min:d,max:m}=this.constraints[l];f.set(ut(d,m,s[l]))})}addListeners(){if(!this.visualElement.current)return;s6.set(this.visualElement,this);const e=this.visualElement.current,t=Cc(e,"pointerdown",d=>{const{drag:m,dragListener:g=!0}=this.getProps();m&&g&&!US(d.target)&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();yc(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),st.read(r);const l=Kc(window,"resize",()=>this.scalePositionWithinConstraints()),f=s.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:m})=>{this.isDragging&&m&&(Hn(g=>{const v=this.getAxisMotionValue(g);v&&(this.originPoint[g]+=d[g].translate,v.set(v.get()+d[g].translate))}),this.visualElement.render())}));return()=>{l(),t(),a(),f&&f()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:l=vg,dragMomentum:f=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:s,dragConstraints:a,dragElastic:l,dragMomentum:f}}}function Hd(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function a6(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class l6 extends Ls{constructor(e){super(e),this.removeGroupControls=Gn,this.removeListeners=Gn,this.controls=new o6(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Gn}update(){const{dragControls:e}=this.node.getProps(),{dragControls:t}=this.node.prevProps||{};e!==t&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners()}}const Aw=n=>(e,t)=>{n&&st.postRender(()=>n(e,t))};class c6 extends Ls{constructor(){super(...arguments),this.removePointerDownListener=Gn}onPointerDown(e){this.session=new bb(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Sb(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:Aw(e),onStart:Aw(t),onMove:r,onEnd:(a,l)=>{delete this.session,s&&st.postRender(()=>s(a,l))}}}mount(){this.removePointerDownListener=Cc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let ym=!1;class u6 extends N.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:s}=this.props,{projection:a}=e;a&&(t.group&&t.group.add(a),r&&r.register&&s&&r.register(a),ym&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),lh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:s,isPresent:a}=this.props,{projection:l}=r;return l&&(l.isPresent=a,ym=!0,s||e.layoutDependency!==t||t===void 0||e.isPresent!==a?l.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?l.promote():l.relegate()||st.postRender(()=>{const f=l.getStack();(!f||!f.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),r0.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:s}=e;ym=!0,s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Cb(n){const[e,t]=vO(),r=N.useContext(qk);return u.jsx(u6,{...n,layoutGroup:r,switchLayoutGroup:N.useContext(Tb),isPresent:e,safeToRemove:t})}const d6={pan:{Feature:c6},drag:{Feature:l6,ProjectionNode:mb,MeasureLayout:Cb}};function Rw(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const s="onHover"+t,a=r[s];a&&st.postRender(()=>a(e,yu(e)))}class h6 extends Ls{mount(){const{current:e}=this.node;e&&(this.unmount=ZL(e,(t,r)=>(Rw(this.node,r,"Start"),s=>Rw(this.node,s,"End"))))}unmount(){}}class f6 extends Ls{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pu(Kc(this.node.current,"focus",()=>this.onFocus()),Kc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Pw(n,e,t){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const s="onTap"+(t==="End"?"":t),a=r[s];a&&st.postRender(()=>a(e,yu(e)))}class p6 extends Ls{mount(){const{current:e}=this.node;e&&(this.unmount=n3(e,(t,r)=>(Pw(this.node,r,"Start"),(s,{success:a})=>Pw(this.node,s,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const xg=new WeakMap,vm=new WeakMap,m6=n=>{const e=xg.get(n.target);e&&e(n)},g6=n=>{n.forEach(m6)};function y6({root:n,...e}){const t=n||document;vm.has(t)||vm.set(t,{});const r=vm.get(t),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(g6,{root:n,...e})),r[s]}function v6(n,e,t){const r=y6(e);return xg.set(n,t),r.observe(n),()=>{xg.delete(n),r.unobserve(n)}}const x6={some:0,all:1};class _6 extends Ls{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:s="some",once:a}=e,l={root:t?t.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:x6[s]},f=d=>{const{isIntersecting:m}=d;if(this.isInView===m||(this.isInView=m,a&&!m&&this.hasEnteredView))return;m&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",m);const{onViewportEnter:g,onViewportLeave:v}=this.node.getProps(),w=m?g:v;w&&w(d)};return v6(this.node.current,l,f)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(w6(e,t))&&this.startObserver()}unmount(){}}function w6({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const E6={inView:{Feature:_6},tap:{Feature:p6},focus:{Feature:f6},hover:{Feature:h6}},T6={layout:{ProjectionNode:mb,MeasureLayout:Cb}},k6={...GO,...E6,...d6,...T6},xe=$O(k6,WO);function mr(){var T;const n=Yn(),e=Xc(),{user:t,profile:r,isAuthenticated:s,isAdmin:a,isBusiness:l}=hu(),[f,d]=N.useState(!1),[m,g]=N.useState(!1),v=[{to:"/",label:"Home"},{to:"/about",label:"How It Works"},{to:"/benefits",label:"Benefits"},{to:"/businesses",label:"For Businesses"}],w=async()=>{await Dk(),g(!1),e("/")},k=I=>n.pathname===I;return u.jsxs("header",{style:{background:"var(--kb-white)",borderBottom:"1px solid var(--kb-gray-200)",position:"sticky",top:0,zIndex:100},children:[u.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 1rem",display:"flex",alignItems:"center",justifyContent:"space-between",height:"70px"},children:[u.jsxs(me,{to:"/",style:{display:"flex",alignItems:"center",gap:"0.5rem",textDecoration:"none"},children:[u.jsx("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, var(--kb-navy) 0%, var(--kb-navy-light) 100%)",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--kb-gold)",fontFamily:"var(--font-display)",fontWeight:"700",fontSize:"1.2rem"},children:"K"}),u.jsxs("div",{children:[u.jsx("div",{style:{fontFamily:"var(--font-display)",fontWeight:"600",color:"var(--kb-navy)",fontSize:"1.1rem",lineHeight:1.1},children:"Kinderbucks"}),u.jsx("div",{style:{fontSize:"0.65rem",color:"var(--kb-gray-500)",textTransform:"uppercase",letterSpacing:"0.1em"},children:"Village Currency"})]})]}),u.jsx("nav",{style:{display:"flex",alignItems:"center",gap:"2rem"},className:"desktop-nav",children:v.map(I=>u.jsx(me,{to:I.to,style:{color:k(I.to)?"var(--kb-navy)":"var(--kb-gray-500)",fontWeight:k(I.to)?"600":"500",fontSize:"0.95rem",transition:"color 0.2s",borderBottom:k(I.to)?"2px solid var(--kb-gold)":"2px solid transparent",paddingBottom:"4px"},children:I.label},I.to))}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},className:"desktop-nav",children:[s?u.jsx(u.Fragment,{children:u.jsxs("div",{style:{position:"relative"},children:[u.jsxs("button",{onClick:()=>g(!m),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"var(--kb-gray-100)",border:"none",borderRadius:"8px",cursor:"pointer",color:"var(--kb-navy)",fontWeight:"500"},children:[u.jsx(kc,{size:18}),(r==null?void 0:r.displayName)||((T=t.email)==null?void 0:T.split("@")[0])]}),m&&u.jsxs("div",{style:{position:"absolute",right:0,top:"100%",marginTop:"0.5rem",background:"white",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",minWidth:"180px",zIndex:200,overflow:"hidden"},children:[u.jsxs(me,{to:"/profile",onClick:()=>g(!1),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",color:"var(--kb-gray-700)",textDecoration:"none",borderBottom:"1px solid var(--kb-gray-100)"},children:[u.jsx(kc,{size:16})," My Profile"]}),l&&u.jsxs(me,{to:"/business/dashboard",onClick:()=>g(!1),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",color:"#2563eb",textDecoration:"none",borderBottom:"1px solid var(--kb-gray-100)"},children:[u.jsx(on,{size:16})," Business Dashboard"]}),a&&u.jsxs(me,{to:"/admin/dashboard",onClick:()=>g(!1),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",color:"#dc2626",textDecoration:"none",borderBottom:"1px solid var(--kb-gray-100)"},children:[u.jsx(Rh,{size:16})," Admin Portal"]}),u.jsxs("button",{onClick:w,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",color:"var(--kb-gray-600)",background:"none",border:"none",cursor:"pointer",width:"100%",textAlign:"left"},children:[u.jsx(Xm,{size:16})," Sign Out"]})]})]})}):u.jsx(u.Fragment,{children:u.jsxs(me,{to:"/login",className:"btn btn-secondary",style:{padding:"0.5rem 1rem",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(Ch,{size:16})," Sign In"]})}),u.jsx(me,{to:"/exchange",className:"btn btn-gold",style:{padding:"0.5rem 1rem",fontSize:"0.9rem"},children:"Get Kinderbucks"})]}),u.jsx("button",{onClick:()=>d(!f),className:"mobile-menu-btn",style:{display:"none",background:"none",border:"none",padding:"0.5rem",cursor:"pointer"},children:u.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:f?u.jsx("path",{d:"M6 6l12 12M6 18L18 6"}):u.jsx("path",{d:"M3 12h18M3 6h18M3 18h18"})})})]}),f&&u.jsxs("div",{className:"mobile-menu",style:{background:"var(--kb-white)",borderTop:"1px solid var(--kb-gray-200)",padding:"1rem"},children:[v.map(I=>u.jsx(me,{to:I.to,onClick:()=>d(!1),style:{display:"block",padding:"0.75rem 0",color:k(I.to)?"var(--kb-navy)":"var(--kb-gray-700)",fontWeight:k(I.to)?"600":"400",borderBottom:"1px solid var(--kb-gray-100)"},children:I.label},I.to)),u.jsxs("div",{style:{marginTop:"1rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:[s?u.jsxs(u.Fragment,{children:[u.jsxs("div",{style:{padding:"0.75rem",background:"var(--kb-gray-50)",borderRadius:"8px",marginBottom:"0.5rem"},children:[u.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:(r==null?void 0:r.displayName)||t.email}),u.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:(r==null?void 0:r.role)||"member"})]}),u.jsxs(me,{to:"/profile",onClick:()=>d(!1),className:"btn btn-secondary",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[u.jsx(kc,{size:16})," My Profile"]}),l&&u.jsxs(me,{to:"/business/dashboard",onClick:()=>d(!1),className:"btn",style:{background:"#2563eb",color:"white",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[u.jsx(on,{size:16})," Business Dashboard"]}),a&&u.jsxs(me,{to:"/admin/dashboard",onClick:()=>d(!1),className:"btn",style:{background:"#dc2626",color:"white",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[u.jsx(Rh,{size:16})," Admin Portal"]}),u.jsxs("button",{onClick:()=>{w(),d(!1)},className:"btn btn-secondary",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[u.jsx(Xm,{size:16})," Sign Out"]})]}):u.jsxs(me,{to:"/login",onClick:()=>d(!1),className:"btn btn-secondary",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[u.jsx(Ch,{size:16})," Sign In"]}),u.jsx(me,{to:"/exchange",onClick:()=>d(!1),className:"btn btn-gold",children:"Get Kinderbucks"})]})]}),u.jsx("style",{children:`
        @media (max-width: 768px) {
          .desktop-nav {
            display: none !important;
          }
          .mobile-menu-btn {
            display: block !important;
          }
        }
      `})]})}function gr(){return u.jsxs("footer",{style:{background:"var(--kb-navy)",color:"var(--kb-white)",padding:"3rem 1rem 2rem",marginTop:"auto"},children:[u.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"2rem"},children:[u.jsxs("div",{children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[u.jsx("div",{style:{width:"36px",height:"36px",background:"var(--kb-gold)",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--kb-navy)",fontFamily:"var(--font-display)",fontWeight:"700"},children:"K"}),u.jsx("span",{style:{fontFamily:"var(--font-display)",fontWeight:"600",fontSize:"1.1rem"},children:"Kinderbucks"})]}),u.jsx("p",{style:{color:"var(--kb-gray-300)",fontSize:"0.9rem",lineHeight:1.6},children:"Village of Kinderhook's local currency program. Supporting local businesses, strengthening community."}),u.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.8rem",marginTop:"1rem"},children:"Est. 2026"})]}),u.jsxs("div",{children:[u.jsx("h4",{style:{color:"var(--kb-gold)",marginBottom:"1rem",fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Quick Links"}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[u.jsx(me,{to:"/about",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"How It Works"}),u.jsx(me,{to:"/benefits",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"Member Benefits"}),u.jsx(me,{to:"/exchange",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"Get Kinderbucks"}),u.jsx(me,{to:"/businesses",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"For Businesses"})]})]}),u.jsxs("div",{children:[u.jsx("h4",{style:{color:"var(--kb-gold)",marginBottom:"1rem",fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"For Members"}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[u.jsx(me,{to:"/account",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"My Account"}),u.jsx(me,{to:"/profile",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"Kinderhooker Profile"}),u.jsx(me,{to:"/scan/KB-0001",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"Verify Currency"})]})]}),u.jsxs("div",{children:[u.jsx("h4",{style:{color:"var(--kb-gold)",marginBottom:"1rem",fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Contact"}),u.jsxs("p",{style:{color:"var(--kb-gray-300)",fontSize:"0.9rem",lineHeight:1.8},children:["Village of Kinderhook",u.jsx("br",{}),"Columbia County, NY"]})]})]}),u.jsxs("div",{style:{maxWidth:"1200px",margin:"2rem auto 0",paddingTop:"2rem",borderTop:"1px solid var(--kb-navy-light)",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"1rem"},children:[u.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.8rem"},children:" 2026 Kinderbucks. A Harmonic Systems project."}),u.jsx("div",{style:{display:"flex",gap:"1.5rem"},children:u.jsx(me,{to:"/admin/dashboard",style:{color:"var(--kb-gray-500)",fontSize:"0.8rem"},children:"Admin"})})]})]})}function S6(){return u.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[u.jsx(mr,{}),u.jsx("section",{style:{background:"linear-gradient(135deg, var(--kb-navy) 0%, var(--kb-navy-light) 100%)",color:"var(--kb-white)",padding:"4rem 1rem",textAlign:"center"},children:u.jsxs(xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},style:{maxWidth:"800px",margin:"0 auto"},children:[u.jsx("div",{style:{display:"inline-block",background:"rgba(201, 162, 39, 0.2)",color:"var(--kb-gold)",padding:"0.5rem 1rem",borderRadius:"100px",fontSize:"0.85rem",fontWeight:"600",marginBottom:"1.5rem"},children:"Village of Kinderhook  Est. 2026"}),u.jsxs("h1",{style:{fontFamily:"var(--font-display)",fontSize:"clamp(2.5rem, 5vw, 3.5rem)",fontWeight:"700",marginBottom:"1.5rem",lineHeight:1.2},children:["Strengthen Our Village,",u.jsx("br",{}),u.jsx("span",{style:{color:"var(--kb-gold)"},children:"One Kinderbuck at a Time"})]}),u.jsx("p",{style:{fontSize:"1.2rem",color:"var(--kb-gray-300)",marginBottom:"2rem",maxWidth:"600px",margin:"0 auto 2rem"},children:"A local currency program that keeps money circulating in Kinderhook, rewards loyal customers, and strengthens our community economy."}),u.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[u.jsx(me,{to:"/exchange",className:"btn btn-gold",style:{padding:"1rem 2rem",fontSize:"1.1rem"},children:"Get Kinderbucks"}),u.jsx(me,{to:"/about",className:"btn btn-outline",style:{padding:"1rem 2rem",fontSize:"1.1rem",borderColor:"var(--kb-white)",color:"var(--kb-white)"},children:"Learn How It Works"})]})]})}),u.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:u.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[u.jsxs("div",{style:{textAlign:"center",marginBottom:"3rem"},children:[u.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"How Kinderbucks Works"}),u.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"Simple steps to start supporting local"})]}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"2rem"},children:[{step:"1",title:"Exchange",description:"Convert USD to Kinderbucks at participating locations or online. Members get bonus rates!",Icon:cf},{step:"2",title:"Spend Local",description:"Use Kinderbucks at any of our 19+ participating village businesses.",Icon:on},{step:"3",title:"Check In",description:"Scan QR codes when you visit to build your Kinderhooker status and unlock rewards.",Icon:vs},{step:"4",title:"Earn More",description:"Higher tiers mean better exchange rates. Village Patrons get 25% bonus!",Icon:fu}].map((n,e)=>u.jsxs(xe.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:e*.1},viewport:{once:!0},className:"card",style:{textAlign:"center"},children:[u.jsx("div",{style:{width:"60px",height:"60px",background:"var(--kb-navy)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:u.jsx(n.Icon,{size:28,color:"var(--kb-gold)",strokeWidth:1.5})}),u.jsxs("div",{style:{color:"var(--kb-gold)",fontSize:"0.8rem",fontWeight:"600",marginBottom:"0.25rem"},children:["STEP ",n.step]}),u.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:n.title}),u.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.95rem"},children:n.description})]},e))})]})}),u.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:u.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[u.jsxs("div",{style:{textAlign:"center",marginBottom:"3rem"},children:[u.jsx("div",{className:"badge badge-gold",style:{marginBottom:"1rem"},children:"OK Membership"}),u.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"Become a Kinderhooker"}),u.jsx("p",{style:{color:"var(--kb-gray-500)",maxWidth:"600px",margin:"0 auto"},children:"Visit local businesses to level up your membership and unlock better exchange rates"})]}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"1.5rem"},children:[{name:"Curious",businesses:"1+",bonus:"10%",color:"#888888",Icon:fn},{name:"Hooked",businesses:"5+",bonus:"15%",color:"#2e7d32",Icon:Kr},{name:"Line & Sinker",businesses:"10+",bonus:"20%",color:"#1565c0",Icon:Ms},{name:"Village Patron",businesses:"15+",bonus:"25%",color:"#c9a227",Icon:Xn,featured:!0}].map((n,e)=>u.jsxs(xe.div,{initial:{opacity:0,scale:.95},whileInView:{opacity:1,scale:1},transition:{delay:e*.1},viewport:{once:!0},className:"card",style:{textAlign:"center",border:n.featured?"2px solid var(--kb-gold)":void 0,position:"relative",overflow:"hidden"},children:[n.featured&&u.jsx("div",{style:{position:"absolute",top:"10px",right:"-30px",background:"var(--kb-gold)",color:"var(--kb-navy)",padding:"0.25rem 2rem",fontSize:"0.7rem",fontWeight:"600",transform:"rotate(45deg)"},children:"BEST"}),u.jsx("div",{style:{width:"50px",height:"50px",background:`${n.color}15`,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 0.75rem"},children:u.jsx(n.Icon,{size:24,color:n.color,strokeWidth:1.5})}),u.jsx("h3",{style:{color:n.color,marginBottom:"0.5rem"},children:n.name}),u.jsxs("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem",marginBottom:"1rem"},children:[n.businesses," businesses visited"]}),u.jsxs("div",{style:{background:`${n.color}15`,borderRadius:"8px",padding:"1rem"},children:[u.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:n.color},children:n.bonus}),u.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:"Exchange Bonus"})]})]},e))}),u.jsx("div",{style:{textAlign:"center",marginTop:"2rem"},children:u.jsx(me,{to:"/profile",className:"btn btn-primary",children:"View My Progress"})})]})}),u.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:u.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[u.jsxs("div",{style:{textAlign:"center",marginBottom:"3rem"},children:[u.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"Participating Businesses"}),u.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"Support these local Kinderhook establishments"})]}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"1rem"},children:["The Aviary","Morningbird Cafe","Saisonnier","Broad Street Bagel","Brooklyn Pizzeria","Isola Wine Bar","OK Pantry","Kinderhook Books","Samascott's","The School Gallery","Old Dutch Inn","Muse Aesthetics"].map((n,e)=>u.jsx("div",{style:{background:"var(--kb-white)",borderRadius:"8px",padding:"1rem",textAlign:"center",fontSize:"0.9rem",color:"var(--kb-gray-700)",border:"1px solid var(--kb-gray-200)"},children:n},e))}),u.jsx("div",{style:{textAlign:"center",marginTop:"2rem"},children:u.jsx(me,{to:"/businesses",className:"btn btn-secondary",children:"View All 19 Businesses "})})]})}),u.jsx("section",{style:{padding:"4rem 1rem",background:"linear-gradient(135deg, var(--kb-green) 0%, var(--kb-green-light) 100%)",color:"var(--kb-white)",textAlign:"center"},children:u.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto"},children:[u.jsx("h2",{style:{marginBottom:"1rem"},children:"Ready to Support Local?"}),u.jsx("p",{style:{opacity:.9,marginBottom:"2rem"},children:"Join the Kinderbucks program today and start earning rewards while strengthening our village economy."}),u.jsx("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:u.jsx(me,{to:"/exchange",className:"btn btn-gold",style:{padding:"1rem 2rem"},children:"Get Your First Kinderbucks"})})]})}),u.jsx(gr,{})]})}var b6=Object.defineProperty,Oh=Object.getOwnPropertySymbols,Ab=Object.prototype.hasOwnProperty,Rb=Object.prototype.propertyIsEnumerable,jw=(n,e,t)=>e in n?b6(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,_g=(n,e)=>{for(var t in e||(e={}))Ab.call(e,t)&&jw(n,t,e[t]);if(Oh)for(var t of Oh(e))Rb.call(e,t)&&jw(n,t,e[t]);return n},wg=(n,e)=>{var t={};for(var r in n)Ab.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&Oh)for(var r of Oh(n))e.indexOf(r)<0&&Rb.call(n,r)&&(t[r]=n[r]);return t};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Co;(n=>{const e=class De{constructor(d,m,g,v){if(this.version=d,this.errorCorrectionLevel=m,this.modules=[],this.isFunction=[],d<De.MIN_VERSION||d>De.MAX_VERSION)throw new RangeError("Version value out of range");if(v<-1||v>7)throw new RangeError("Mask value out of range");this.size=d*4+17;let w=[];for(let T=0;T<this.size;T++)w.push(!1);for(let T=0;T<this.size;T++)this.modules.push(w.slice()),this.isFunction.push(w.slice());this.drawFunctionPatterns();const k=this.addEccAndInterleave(g);if(this.drawCodewords(k),v==-1){let T=1e9;for(let I=0;I<8;I++){this.applyMask(I),this.drawFormatBits(I);const C=this.getPenaltyScore();C<T&&(v=I,T=C),this.applyMask(I)}}s(0<=v&&v<=7),this.mask=v,this.applyMask(v),this.drawFormatBits(v),this.isFunction=[]}static encodeText(d,m){const g=n.QrSegment.makeSegments(d);return De.encodeSegments(g,m)}static encodeBinary(d,m){const g=n.QrSegment.makeBytes(d);return De.encodeSegments([g],m)}static encodeSegments(d,m,g=1,v=40,w=-1,k=!0){if(!(De.MIN_VERSION<=g&&g<=v&&v<=De.MAX_VERSION)||w<-1||w>7)throw new RangeError("Invalid value");let T,I;for(T=g;;T++){const j=De.getNumDataCodewords(T,m)*8,Q=l.getTotalBits(d,T);if(Q<=j){I=Q;break}if(T>=v)throw new RangeError("Data too long")}for(const j of[De.Ecc.MEDIUM,De.Ecc.QUARTILE,De.Ecc.HIGH])k&&I<=De.getNumDataCodewords(T,j)*8&&(m=j);let C=[];for(const j of d){t(j.mode.modeBits,4,C),t(j.numChars,j.mode.numCharCountBits(T),C);for(const Q of j.getData())C.push(Q)}s(C.length==I);const O=De.getNumDataCodewords(T,m)*8;s(C.length<=O),t(0,Math.min(4,O-C.length),C),t(0,(8-C.length%8)%8,C),s(C.length%8==0);for(let j=236;C.length<O;j^=253)t(j,8,C);let B=[];for(;B.length*8<C.length;)B.push(0);return C.forEach((j,Q)=>B[Q>>>3]|=j<<7-(Q&7)),new De(T,m,B,w)}getModule(d,m){return 0<=d&&d<this.size&&0<=m&&m<this.size&&this.modules[m][d]}getModules(){return this.modules}drawFunctionPatterns(){for(let g=0;g<this.size;g++)this.setFunctionModule(6,g,g%2==0),this.setFunctionModule(g,6,g%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const d=this.getAlignmentPatternPositions(),m=d.length;for(let g=0;g<m;g++)for(let v=0;v<m;v++)g==0&&v==0||g==0&&v==m-1||g==m-1&&v==0||this.drawAlignmentPattern(d[g],d[v]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(d){const m=this.errorCorrectionLevel.formatBits<<3|d;let g=m;for(let w=0;w<10;w++)g=g<<1^(g>>>9)*1335;const v=(m<<10|g)^21522;s(v>>>15==0);for(let w=0;w<=5;w++)this.setFunctionModule(8,w,r(v,w));this.setFunctionModule(8,7,r(v,6)),this.setFunctionModule(8,8,r(v,7)),this.setFunctionModule(7,8,r(v,8));for(let w=9;w<15;w++)this.setFunctionModule(14-w,8,r(v,w));for(let w=0;w<8;w++)this.setFunctionModule(this.size-1-w,8,r(v,w));for(let w=8;w<15;w++)this.setFunctionModule(8,this.size-15+w,r(v,w));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let d=this.version;for(let g=0;g<12;g++)d=d<<1^(d>>>11)*7973;const m=this.version<<12|d;s(m>>>18==0);for(let g=0;g<18;g++){const v=r(m,g),w=this.size-11+g%3,k=Math.floor(g/3);this.setFunctionModule(w,k,v),this.setFunctionModule(k,w,v)}}drawFinderPattern(d,m){for(let g=-4;g<=4;g++)for(let v=-4;v<=4;v++){const w=Math.max(Math.abs(v),Math.abs(g)),k=d+v,T=m+g;0<=k&&k<this.size&&0<=T&&T<this.size&&this.setFunctionModule(k,T,w!=2&&w!=4)}}drawAlignmentPattern(d,m){for(let g=-2;g<=2;g++)for(let v=-2;v<=2;v++)this.setFunctionModule(d+v,m+g,Math.max(Math.abs(v),Math.abs(g))!=1)}setFunctionModule(d,m,g){this.modules[m][d]=g,this.isFunction[m][d]=!0}addEccAndInterleave(d){const m=this.version,g=this.errorCorrectionLevel;if(d.length!=De.getNumDataCodewords(m,g))throw new RangeError("Invalid argument");const v=De.NUM_ERROR_CORRECTION_BLOCKS[g.ordinal][m],w=De.ECC_CODEWORDS_PER_BLOCK[g.ordinal][m],k=Math.floor(De.getNumRawDataModules(m)/8),T=v-k%v,I=Math.floor(k/v);let C=[];const O=De.reedSolomonComputeDivisor(w);for(let j=0,Q=0;j<v;j++){let W=d.slice(Q,Q+I-w+(j<T?0:1));Q+=W.length;const H=De.reedSolomonComputeRemainder(W,O);j<T&&W.push(0),C.push(W.concat(H))}let B=[];for(let j=0;j<C[0].length;j++)C.forEach((Q,W)=>{(j!=I-w||W>=T)&&B.push(Q[j])});return s(B.length==k),B}drawCodewords(d){if(d.length!=Math.floor(De.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let m=0;for(let g=this.size-1;g>=1;g-=2){g==6&&(g=5);for(let v=0;v<this.size;v++)for(let w=0;w<2;w++){const k=g-w,I=(g+1&2)==0?this.size-1-v:v;!this.isFunction[I][k]&&m<d.length*8&&(this.modules[I][k]=r(d[m>>>3],7-(m&7)),m++)}}s(m==d.length*8)}applyMask(d){if(d<0||d>7)throw new RangeError("Mask value out of range");for(let m=0;m<this.size;m++)for(let g=0;g<this.size;g++){let v;switch(d){case 0:v=(g+m)%2==0;break;case 1:v=m%2==0;break;case 2:v=g%3==0;break;case 3:v=(g+m)%3==0;break;case 4:v=(Math.floor(g/3)+Math.floor(m/2))%2==0;break;case 5:v=g*m%2+g*m%3==0;break;case 6:v=(g*m%2+g*m%3)%2==0;break;case 7:v=((g+m)%2+g*m%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[m][g]&&v&&(this.modules[m][g]=!this.modules[m][g])}}getPenaltyScore(){let d=0;for(let w=0;w<this.size;w++){let k=!1,T=0,I=[0,0,0,0,0,0,0];for(let C=0;C<this.size;C++)this.modules[w][C]==k?(T++,T==5?d+=De.PENALTY_N1:T>5&&d++):(this.finderPenaltyAddHistory(T,I),k||(d+=this.finderPenaltyCountPatterns(I)*De.PENALTY_N3),k=this.modules[w][C],T=1);d+=this.finderPenaltyTerminateAndCount(k,T,I)*De.PENALTY_N3}for(let w=0;w<this.size;w++){let k=!1,T=0,I=[0,0,0,0,0,0,0];for(let C=0;C<this.size;C++)this.modules[C][w]==k?(T++,T==5?d+=De.PENALTY_N1:T>5&&d++):(this.finderPenaltyAddHistory(T,I),k||(d+=this.finderPenaltyCountPatterns(I)*De.PENALTY_N3),k=this.modules[C][w],T=1);d+=this.finderPenaltyTerminateAndCount(k,T,I)*De.PENALTY_N3}for(let w=0;w<this.size-1;w++)for(let k=0;k<this.size-1;k++){const T=this.modules[w][k];T==this.modules[w][k+1]&&T==this.modules[w+1][k]&&T==this.modules[w+1][k+1]&&(d+=De.PENALTY_N2)}let m=0;for(const w of this.modules)m=w.reduce((k,T)=>k+(T?1:0),m);const g=this.size*this.size,v=Math.ceil(Math.abs(m*20-g*10)/g)-1;return s(0<=v&&v<=9),d+=v*De.PENALTY_N4,s(0<=d&&d<=2568888),d}getAlignmentPatternPositions(){if(this.version==1)return[];{const d=Math.floor(this.version/7)+2,m=this.version==32?26:Math.ceil((this.version*4+4)/(d*2-2))*2;let g=[6];for(let v=this.size-7;g.length<d;v-=m)g.splice(1,0,v);return g}}static getNumRawDataModules(d){if(d<De.MIN_VERSION||d>De.MAX_VERSION)throw new RangeError("Version number out of range");let m=(16*d+128)*d+64;if(d>=2){const g=Math.floor(d/7)+2;m-=(25*g-10)*g-55,d>=7&&(m-=36)}return s(208<=m&&m<=29648),m}static getNumDataCodewords(d,m){return Math.floor(De.getNumRawDataModules(d)/8)-De.ECC_CODEWORDS_PER_BLOCK[m.ordinal][d]*De.NUM_ERROR_CORRECTION_BLOCKS[m.ordinal][d]}static reedSolomonComputeDivisor(d){if(d<1||d>255)throw new RangeError("Degree out of range");let m=[];for(let v=0;v<d-1;v++)m.push(0);m.push(1);let g=1;for(let v=0;v<d;v++){for(let w=0;w<m.length;w++)m[w]=De.reedSolomonMultiply(m[w],g),w+1<m.length&&(m[w]^=m[w+1]);g=De.reedSolomonMultiply(g,2)}return m}static reedSolomonComputeRemainder(d,m){let g=m.map(v=>0);for(const v of d){const w=v^g.shift();g.push(0),m.forEach((k,T)=>g[T]^=De.reedSolomonMultiply(k,w))}return g}static reedSolomonMultiply(d,m){if(d>>>8||m>>>8)throw new RangeError("Byte out of range");let g=0;for(let v=7;v>=0;v--)g=g<<1^(g>>>7)*285,g^=(m>>>v&1)*d;return s(g>>>8==0),g}finderPenaltyCountPatterns(d){const m=d[1];s(m<=this.size*3);const g=m>0&&d[2]==m&&d[3]==m*3&&d[4]==m&&d[5]==m;return(g&&d[0]>=m*4&&d[6]>=m?1:0)+(g&&d[6]>=m*4&&d[0]>=m?1:0)}finderPenaltyTerminateAndCount(d,m,g){return d&&(this.finderPenaltyAddHistory(m,g),m=0),m+=this.size,this.finderPenaltyAddHistory(m,g),this.finderPenaltyCountPatterns(g)}finderPenaltyAddHistory(d,m){m[0]==0&&(d+=this.size),m.pop(),m.unshift(d)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],n.QrCode=e;function t(f,d,m){if(d<0||d>31||f>>>d)throw new RangeError("Value out of range");for(let g=d-1;g>=0;g--)m.push(f>>>g&1)}function r(f,d){return(f>>>d&1)!=0}function s(f){if(!f)throw new Error("Assertion error")}const a=class pt{constructor(d,m,g){if(this.mode=d,this.numChars=m,this.bitData=g,m<0)throw new RangeError("Invalid argument");this.bitData=g.slice()}static makeBytes(d){let m=[];for(const g of d)t(g,8,m);return new pt(pt.Mode.BYTE,d.length,m)}static makeNumeric(d){if(!pt.isNumeric(d))throw new RangeError("String contains non-numeric characters");let m=[];for(let g=0;g<d.length;){const v=Math.min(d.length-g,3);t(parseInt(d.substring(g,g+v),10),v*3+1,m),g+=v}return new pt(pt.Mode.NUMERIC,d.length,m)}static makeAlphanumeric(d){if(!pt.isAlphanumeric(d))throw new RangeError("String contains unencodable characters in alphanumeric mode");let m=[],g;for(g=0;g+2<=d.length;g+=2){let v=pt.ALPHANUMERIC_CHARSET.indexOf(d.charAt(g))*45;v+=pt.ALPHANUMERIC_CHARSET.indexOf(d.charAt(g+1)),t(v,11,m)}return g<d.length&&t(pt.ALPHANUMERIC_CHARSET.indexOf(d.charAt(g)),6,m),new pt(pt.Mode.ALPHANUMERIC,d.length,m)}static makeSegments(d){return d==""?[]:pt.isNumeric(d)?[pt.makeNumeric(d)]:pt.isAlphanumeric(d)?[pt.makeAlphanumeric(d)]:[pt.makeBytes(pt.toUtf8ByteArray(d))]}static makeEci(d){let m=[];if(d<0)throw new RangeError("ECI assignment value out of range");if(d<128)t(d,8,m);else if(d<16384)t(2,2,m),t(d,14,m);else if(d<1e6)t(6,3,m),t(d,21,m);else throw new RangeError("ECI assignment value out of range");return new pt(pt.Mode.ECI,0,m)}static isNumeric(d){return pt.NUMERIC_REGEX.test(d)}static isAlphanumeric(d){return pt.ALPHANUMERIC_REGEX.test(d)}getData(){return this.bitData.slice()}static getTotalBits(d,m){let g=0;for(const v of d){const w=v.mode.numCharCountBits(m);if(v.numChars>=1<<w)return 1/0;g+=4+w+v.bitData.length}return g}static toUtf8ByteArray(d){d=encodeURI(d);let m=[];for(let g=0;g<d.length;g++)d.charAt(g)!="%"?m.push(d.charCodeAt(g)):(m.push(parseInt(d.substring(g+1,g+3),16)),g+=2);return m}};a.NUMERIC_REGEX=/^[0-9]*$/,a.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,a.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let l=a;n.QrSegment=a})(Co||(Co={}));(n=>{(e=>{const t=class{constructor(s,a){this.ordinal=s,this.formatBits=a}};t.LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2),e.Ecc=t})(n.QrCode||(n.QrCode={}))})(Co||(Co={}));(n=>{(e=>{const t=class{constructor(s,a){this.modeBits=s,this.numBitsCharCount=a}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};t.NUMERIC=new t(1,[10,12,14]),t.ALPHANUMERIC=new t(2,[9,11,13]),t.BYTE=new t(4,[8,16,16]),t.KANJI=new t(8,[8,10,12]),t.ECI=new t(7,[0,0,0]),e.Mode=t})(n.QrSegment||(n.QrSegment={}))})(Co||(Co={}));var Ra=Co;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var I6={L:Ra.QrCode.Ecc.LOW,M:Ra.QrCode.Ecc.MEDIUM,Q:Ra.QrCode.Ecc.QUARTILE,H:Ra.QrCode.Ecc.HIGH},Pb=128,jb="L",Nb="#FFFFFF",Db="#000000",Vb=!1,Mb=1,C6=4,A6=0,R6=.1;function Lb(n,e=0){const t=[];return n.forEach(function(r,s){let a=null;r.forEach(function(l,f){if(!l&&a!==null){t.push(`M${a+e} ${s+e}h${f-a}v1H${a+e}z`),a=null;return}if(f===r.length-1){if(!l)return;a===null?t.push(`M${f+e},${s+e} h1v1H${f+e}z`):t.push(`M${a+e},${s+e} h${f+1-a}v1H${a+e}z`);return}l&&a===null&&(a=f)})}),t.join("")}function Ob(n,e){return n.slice().map((t,r)=>r<e.y||r>=e.y+e.h?t:t.map((s,a)=>a<e.x||a>=e.x+e.w?s:!1))}function P6(n,e,t,r){if(r==null)return null;const s=n.length+t*2,a=Math.floor(e*R6),l=s/e,f=(r.width||a)*l,d=(r.height||a)*l,m=r.x==null?n.length/2-f/2:r.x*l,g=r.y==null?n.length/2-d/2:r.y*l,v=r.opacity==null?1:r.opacity;let w=null;if(r.excavate){let T=Math.floor(m),I=Math.floor(g),C=Math.ceil(f+m-T),O=Math.ceil(d+g-I);w={x:T,y:I,w:C,h:O}}const k=r.crossOrigin;return{x:m,y:g,h:d,w:f,excavation:w,opacity:v,crossOrigin:k}}function j6(n,e){return e!=null?Math.max(Math.floor(e),0):n?C6:A6}function Fb({value:n,level:e,minVersion:t,includeMargin:r,marginSize:s,imageSettings:a,size:l,boostLevel:f}){let d=Nt.useMemo(()=>{const T=(Array.isArray(n)?n:[n]).reduce((I,C)=>(I.push(...Ra.QrSegment.makeSegments(C)),I),[]);return Ra.QrCode.encodeSegments(T,I6[e],t,void 0,void 0,f)},[n,e,t,f]);const{cells:m,margin:g,numCells:v,calculatedImageSettings:w}=Nt.useMemo(()=>{let k=d.getModules();const T=j6(r,s),I=k.length+T*2,C=P6(k,l,T,a);return{cells:k,margin:T,numCells:I,calculatedImageSettings:C}},[d,l,a,r,s]);return{qrcode:d,margin:g,cells:m,numCells:v,calculatedImageSettings:w}}var N6=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),D6=Nt.forwardRef(function(e,t){const r=e,{value:s,size:a=Pb,level:l=jb,bgColor:f=Nb,fgColor:d=Db,includeMargin:m=Vb,minVersion:g=Mb,boostLevel:v,marginSize:w,imageSettings:k}=r,I=wg(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:C}=I,O=wg(I,["style"]),B=k==null?void 0:k.src,j=Nt.useRef(null),Q=Nt.useRef(null),W=Nt.useCallback(Ne=>{j.current=Ne,typeof t=="function"?t(Ne):t&&(t.current=Ne)},[t]),[H,A]=Nt.useState(!1),{margin:b,cells:P,numCells:M,calculatedImageSettings:L}=Fb({value:s,level:l,minVersion:g,boostLevel:v,includeMargin:m,marginSize:w,imageSettings:k,size:a});Nt.useEffect(()=>{if(j.current!=null){const Ne=j.current,He=Ne.getContext("2d");if(!He)return;let wt=P;const Se=Q.current,ie=L!=null&&Se!==null&&Se.complete&&Se.naturalHeight!==0&&Se.naturalWidth!==0;ie&&L.excavation!=null&&(wt=Ob(P,L.excavation));const fe=window.devicePixelRatio||1;Ne.height=Ne.width=a*fe;const ae=a/M*fe;He.scale(ae,ae),He.fillStyle=f,He.fillRect(0,0,M,M),He.fillStyle=d,N6?He.fill(new Path2D(Lb(wt,b))):P.forEach(function(U,ee){U.forEach(function(Ce,Ae){Ce&&He.fillRect(Ae+b,ee+b,1,1)})}),L&&(He.globalAlpha=L.opacity),ie&&He.drawImage(Se,L.x+b,L.y+b,L.w,L.h)}}),Nt.useEffect(()=>{A(!1)},[B]);const $=_g({height:a,width:a},C);let V=null;return B!=null&&(V=Nt.createElement("img",{src:B,key:B,style:{display:"none"},onLoad:()=>{A(!0)},ref:Q,crossOrigin:L==null?void 0:L.crossOrigin})),Nt.createElement(Nt.Fragment,null,Nt.createElement("canvas",_g({style:$,height:a,width:a,ref:W,role:"img"},O)),V)});D6.displayName="QRCodeCanvas";var Eg=Nt.forwardRef(function(e,t){const r=e,{value:s,size:a=Pb,level:l=jb,bgColor:f=Nb,fgColor:d=Db,includeMargin:m=Vb,minVersion:g=Mb,boostLevel:v,title:w,marginSize:k,imageSettings:T}=r,I=wg(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:C,cells:O,numCells:B,calculatedImageSettings:j}=Fb({value:s,level:l,minVersion:g,boostLevel:v,includeMargin:m,marginSize:k,imageSettings:T,size:a});let Q=O,W=null;T!=null&&j!=null&&(j.excavation!=null&&(Q=Ob(O,j.excavation)),W=Nt.createElement("image",{href:T.src,height:j.h,width:j.w,x:j.x+C,y:j.y+C,preserveAspectRatio:"none",opacity:j.opacity,crossOrigin:j.crossOrigin}));const H=Lb(Q,C);return Nt.createElement("svg",_g({height:a,width:a,viewBox:`0 0 ${B} ${B}`,ref:t,role:"img"},I),!!w&&Nt.createElement("title",null,w),Nt.createElement("path",{fill:f,d:`M0,0 h${B}v${B}H0z`,shapeRendering:"crispEdges"}),Nt.createElement("path",{fill:d,d:H,shapeRendering:"crispEdges"}),W)});Eg.displayName="QRCodeSVG";const Nw={1:{color:"#2d5a27",gradient:["#3d7a37","#2d5a27"],label:"ONE",accent:"#90c695"},5:{color:"#1e3a5f",gradient:["#2e5a8f","#1e3a5f"],label:"FIVE",accent:"#7ba3cc"},10:{color:"#5c2d5c",gradient:["#7c4d7c","#5c2d5c"],label:"TEN",accent:"#b89db8"},20:{color:"#8b6914",gradient:["#c9a227","#8b6914"],label:"TWENTY",accent:"#e8d48a"}};function qc({value:n,size:e=128,denomination:t=5,showFrame:r=!0}){const s=Nw[t]||Nw[5],a=e+48,l=16;return r?u.jsx("div",{style:{width:a,background:`linear-gradient(135deg, ${s.gradient[0]} 0%, ${s.gradient[1]} 100%)`,borderRadius:l,padding:"3px",display:"inline-block",boxShadow:"0 4px 12px rgba(0,0,0,0.2)"},children:u.jsxs("div",{style:{background:"linear-gradient(135deg, #fefefe 0%, #f5f5f0 100%)",borderRadius:l-2,padding:"8px",position:"relative"},children:[u.jsx("div",{style:{textAlign:"center",marginBottom:"6px",fontFamily:'"Georgia", serif',fontSize:"10px",fontWeight:"bold",color:s.color,letterSpacing:"3px",textTransform:"uppercase"},children:"KINDERBUCKS"}),u.jsxs("div",{style:{background:"white",borderRadius:"8px",padding:"8px",border:`2px solid ${s.accent}`,position:"relative"},children:[u.jsx("div",{style:{position:"absolute",top:"4px",left:"4px",width:"12px",height:"12px",borderTop:`2px solid ${s.color}`,borderLeft:`2px solid ${s.color}`,borderRadius:"2px 0 0 0"}}),u.jsx("div",{style:{position:"absolute",top:"4px",right:"4px",width:"12px",height:"12px",borderTop:`2px solid ${s.color}`,borderRight:`2px solid ${s.color}`,borderRadius:"0 2px 0 0"}}),u.jsx("div",{style:{position:"absolute",bottom:"4px",left:"4px",width:"12px",height:"12px",borderBottom:`2px solid ${s.color}`,borderLeft:`2px solid ${s.color}`,borderRadius:"0 0 0 2px"}}),u.jsx("div",{style:{position:"absolute",bottom:"4px",right:"4px",width:"12px",height:"12px",borderBottom:`2px solid ${s.color}`,borderRight:`2px solid ${s.color}`,borderRadius:"0 0 2px 0"}}),u.jsx(Eg,{value:n,size:e,level:"H",fgColor:s.color,style:{display:"block"},imageSettings:{src:`data:image/svg+xml,${encodeURIComponent(`
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="${s.color}">
                  <circle cx="12" cy="12" r="11" fill="white" stroke="${s.color}" stroke-width="1.5"/>
                  <text x="12" y="16" text-anchor="middle" font-size="12" font-weight="bold" fill="${s.color}" font-family="Georgia">K</text>
                </svg>
              `)}`,height:e*.2,width:e*.2,excavate:!0}})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"6px",padding:"0 4px"},children:[u.jsxs("span",{style:{fontFamily:'"Georgia", serif',fontSize:"14px",fontWeight:"bold",color:s.color},children:["$",t]}),u.jsx("span",{style:{fontFamily:'"Georgia", serif',fontSize:"9px",color:s.color,letterSpacing:"1px",opacity:.8},children:s.label}),u.jsxs("span",{style:{fontFamily:'"Georgia", serif',fontSize:"14px",fontWeight:"bold",color:s.color},children:["$",t]})]})]})}):u.jsx(Eg,{value:n,size:e,level:"M",fgColor:s.color,style:{display:"block"}})}const V6="https://harmonicsystems.github.io/kinderbucks/#/scan/KB-0001",M6="https://harmonicsystems.github.io/kinderbucks/#/checkin/MORNINGBIRD";function L6(){const[n,e]=N.useState(null),[t,r]=N.useState(0),[s,a]=N.useState(!1);return u.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)",overflow:"hidden"},children:u.jsxs("div",{style:{maxWidth:"1100px",margin:"0 auto"},children:[u.jsxs(xe.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},style:{textAlign:"center",marginBottom:"3rem"},children:[u.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",background:"linear-gradient(135deg, var(--kb-gold) 0%, #e8c33a 100%)",color:"var(--kb-navy)",padding:"0.5rem 1rem",borderRadius:"100px",fontSize:"0.85rem",fontWeight:"600",marginBottom:"1rem"},children:[u.jsx(HM,{size:16})," Try It Live"]}),u.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.75rem"},children:"See Kinderbucks in Action"}),u.jsx("p",{style:{color:"var(--kb-gray-600)",maxWidth:"600px",margin:"0 auto"},children:"Scan these real QR codes with your phone's camera to experience the magic"})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(320px, 1fr))",gap:"2rem",marginBottom:"3rem"},children:[u.jsxs(xe.div,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},transition:{delay:.1},viewport:{once:!0},className:"card",style:{padding:"2rem",background:"linear-gradient(180deg, #f8fbff 0%, #ffffff 100%)",border:"2px solid #e8f0ff",position:"relative",overflow:"hidden"},children:[u.jsx("div",{style:{position:"absolute",top:0,right:0,width:"80px",height:"80px",background:"linear-gradient(135deg, transparent 50%, rgba(52, 152, 219, 0.1) 50%)"}}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[u.jsx("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, #3498db 0%, #2980b9 100%)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsx(wM,{size:22,color:"white"})}),u.jsxs("div",{children:[u.jsx("h3",{style:{color:"var(--kb-navy)",margin:0,fontSize:"1.2rem"},children:"Verify Currency"}),u.jsx("p",{style:{color:"var(--kb-gray-500)",margin:0,fontSize:"0.85rem"},children:"Confirm authenticity instantly"})]})]}),u.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem",marginBottom:"1.5rem"},children:"Every Kinderbuck has a unique QR code. Scan to verify it's real, see its value, and track its journey through the village."}),u.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1.5rem"},children:u.jsx(xe.div,{whileHover:{scale:1.02},transition:{type:"spring",stiffness:300},children:u.jsx(qc,{value:V6,size:130,denomination:5,showFrame:!0})})}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1rem",background:"rgba(52, 152, 219, 0.08)",borderRadius:"10px",marginBottom:"1rem"},children:[u.jsx(y_,{size:20,color:"#3498db"}),u.jsx("span",{style:{color:"var(--kb-gray-700)",fontSize:"0.9rem"},children:"Point your phone camera at the QR code"})]}),u.jsxs("div",{style:{borderTop:"1px dashed var(--kb-gray-200)",paddingTop:"1rem"},children:[u.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)",marginBottom:"0.5rem"},children:"You'll see:"}),u.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:["Verified","$5 Value","Active Status","Serial: KB-0001"].map((l,f)=>u.jsx("span",{style:{padding:"0.25rem 0.6rem",background:"var(--kb-gray-100)",borderRadius:"4px",fontSize:"0.8rem",color:"var(--kb-gray-600)"},children:l},f))})]})]}),u.jsxs(xe.div,{initial:{opacity:0,x:30},whileInView:{opacity:1,x:0},transition:{delay:.2},viewport:{once:!0},className:"card",style:{padding:"2rem",background:"linear-gradient(180deg, #f8fff8 0%, #ffffff 100%)",border:"2px solid #e8ffe8",position:"relative",overflow:"hidden"},children:[u.jsx("div",{style:{position:"absolute",top:0,right:0,width:"80px",height:"80px",background:"linear-gradient(135deg, transparent 50%, rgba(39, 174, 96, 0.1) 50%)"}}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[u.jsx("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, var(--kb-green) 0%, #1e8449 100%)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsx(on,{size:22,color:"white"})}),u.jsxs("div",{children:[u.jsx("h3",{style:{color:"var(--kb-navy)",margin:0,fontSize:"1.2rem"},children:"Check In"}),u.jsx("p",{style:{color:"var(--kb-gray-500)",margin:0,fontSize:"0.85rem"},children:"Record visits, earn rewards"})]})]}),u.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem",marginBottom:"1.5rem"},children:"Scan the QR code at each business you visit. Build your Kinderhooker status and unlock better exchange rates!"}),u.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1.5rem"},children:u.jsx(xe.div,{whileHover:{scale:1.02},transition:{type:"spring",stiffness:300},style:{background:"linear-gradient(135deg, var(--kb-green) 0%, #1e8449 100%)",borderRadius:"16px",padding:"3px",boxShadow:"0 4px 12px rgba(39, 174, 96, 0.3)"},children:u.jsxs("div",{style:{background:"white",borderRadius:"14px",padding:"12px",textAlign:"center"},children:[u.jsx("div",{style:{fontSize:"10px",fontWeight:"600",color:"var(--kb-green)",letterSpacing:"2px",marginBottom:"8px"},children:"CHECK IN AT"}),u.jsx(qc,{value:M6,size:110,denomination:1,showFrame:!1}),u.jsxs("div",{style:{marginTop:"8px",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.4rem"},children:[u.jsx(DV,{size:14,color:"var(--kb-green)"}),u.jsx("span",{style:{fontWeight:"600",color:"var(--kb-navy)",fontSize:"0.9rem"},children:"Morningbird Cafe"})]})]})})}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1rem",background:"rgba(39, 174, 96, 0.08)",borderRadius:"10px",marginBottom:"1rem"},children:[u.jsx(y_,{size:20,color:"var(--kb-green)"}),u.jsx("span",{style:{color:"var(--kb-gray-700)",fontSize:"0.9rem"},children:"Scan when you visit a business"})]}),u.jsxs("div",{style:{borderTop:"1px dashed var(--kb-gray-200)",paddingTop:"1rem"},children:[u.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)",marginBottom:"0.5rem"},children:"You'll see:"}),u.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:["Check-in Recorded","+1 Business","Tier Progress","Next Reward"].map((l,f)=>u.jsx("span",{style:{padding:"0.25rem 0.6rem",background:"var(--kb-gray-100)",borderRadius:"4px",fontSize:"0.8rem",color:"var(--kb-gray-600)"},children:l},f))})]})]})]}),u.jsxs(xe.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{delay:.3},viewport:{once:!0},style:{background:"linear-gradient(135deg, var(--kb-navy) 0%, #1a3a5c 100%)",borderRadius:"20px",padding:"2rem",color:"white",position:"relative",overflow:"hidden"},children:[u.jsx("div",{style:{position:"absolute",top:"-50%",right:"-10%",width:"300px",height:"300px",background:"radial-gradient(circle, rgba(201, 162, 39, 0.1) 0%, transparent 70%)",borderRadius:"50%"}}),u.jsxs("div",{style:{position:"relative",zIndex:1},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1.5rem"},children:[u.jsx(Hk,{size:20,color:"var(--kb-gold)"}),u.jsx("span",{style:{color:"var(--kb-gold)",fontWeight:"600",fontSize:"0.9rem"},children:"The Kinderbucks Loop"})]}),u.jsx("h3",{style:{fontSize:"1.5rem",marginBottom:"2rem",maxWidth:"500px"},children:"Check-ins unlock better exchange rates on currency"}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem",alignItems:"center"},children:[u.jsxs(xe.div,{initial:{opacity:0},whileInView:{opacity:1},transition:{delay:.4},viewport:{once:!0},style:{display:"flex",alignItems:"center",gap:"1rem"},children:[u.jsx("div",{style:{width:"50px",height:"50px",background:"rgba(255,255,255,0.1)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:u.jsx(on,{size:24,color:"var(--kb-gold)"})}),u.jsxs("div",{children:[u.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Visit & Check In"}),u.jsx("div",{style:{fontSize:"0.85rem",opacity:.8},children:"Scan at local businesses"})]})]}),u.jsx("div",{style:{display:"flex",justifyContent:"center"},children:u.jsx(f_,{size:24,color:"var(--kb-gold)",style:{opacity:.5}})}),u.jsxs(xe.div,{initial:{opacity:0},whileInView:{opacity:1},transition:{delay:.5},viewport:{once:!0},style:{display:"flex",alignItems:"center",gap:"1rem"},children:[u.jsx("div",{style:{width:"50px",height:"50px",background:"rgba(255,255,255,0.1)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:u.jsx(fu,{size:24,color:"var(--kb-gold)"})}),u.jsxs("div",{children:[u.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Level Up"}),u.jsx("div",{style:{fontSize:"0.85rem",opacity:.8},children:"Reach new tiers"})]})]}),u.jsx("div",{style:{display:"flex",justifyContent:"center"},children:u.jsx(f_,{size:24,color:"var(--kb-gold)",style:{opacity:.5}})}),u.jsxs(xe.div,{initial:{opacity:0},whileInView:{opacity:1},transition:{delay:.6},viewport:{once:!0},style:{display:"flex",alignItems:"center",gap:"1rem"},children:[u.jsx("div",{style:{width:"50px",height:"50px",background:"linear-gradient(135deg, var(--kb-gold) 0%, #b8922d 100%)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:u.jsx(Kr,{size:24,color:"var(--kb-navy)"})}),u.jsxs("div",{children:[u.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Earn More"}),u.jsx("div",{style:{fontSize:"0.85rem",opacity:.8},children:"Up to 25% bonus!"})]})]})]}),u.jsx("div",{style:{marginTop:"2rem",display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[{name:"Curious",visits:"1+",bonus:"10%"},{name:"Hooked",visits:"5+",bonus:"15%"},{name:"Line & Sinker",visits:"10+",bonus:"20%"},{name:"Village Patron",visits:"15+",bonus:"25%",featured:!0}].map((l,f)=>u.jsxs("div",{style:{padding:"0.5rem 1rem",background:l.featured?"linear-gradient(135deg, var(--kb-gold) 0%, #b8922d 100%)":"rgba(255,255,255,0.1)",borderRadius:"8px",fontSize:"0.85rem",color:l.featured?"var(--kb-navy)":"white",fontWeight:l.featured?"600":"400"},children:[l.name,": ",l.bonus]},f))})]})]}),u.jsxs(xe.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:.4},viewport:{once:!0},style:{textAlign:"center",marginTop:"2.5rem"},children:[u.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1rem"},children:"Ready to start your Kinderhooker journey?"}),u.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[u.jsx(me,{to:"/profile",className:"btn btn-primary",children:"View My Progress"}),u.jsx(me,{to:"/businesses",className:"btn btn-secondary",children:"Find Businesses to Visit"})]})]})]})})}function O6(){return u.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[u.jsx(mr,{}),u.jsx("section",{style:{background:"var(--kb-navy)",color:"var(--kb-white)",padding:"4rem 1rem",textAlign:"center"},children:u.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[u.jsx("h1",{style:{marginBottom:"1rem"},children:"How Kinderbucks Works"}),u.jsx("p",{style:{color:"var(--kb-gray-300)",fontSize:"1.1rem"},children:"A simple system designed to keep money local and reward community participation"})]})}),u.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:u.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[u.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem"},children:"What is Kinderbucks?"}),u.jsxs("div",{style:{color:"var(--kb-gray-700)",lineHeight:1.8},children:[u.jsxs("p",{style:{marginBottom:"1rem"},children:[u.jsx("strong",{children:"Kinderbucks"})," is a local currency program for the Village of Kinderhook, NY. It's real money  physical bills with QR codes for verification  that can only be spent at participating local businesses."]}),u.jsx("p",{style:{marginBottom:"1rem"},children:"When you exchange US dollars for Kinderbucks, you're making a commitment to spend locally. In return, you receive bonus value through our OK Membership program, turning $10 into $11, $12, or even $12.50 in local spending power."}),u.jsx("p",{children:"Every Kinderbuck spent stays in the village, circulating between businesses and residents, strengthening our local economy with each transaction."})]})]})}),u.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:u.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[u.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem",textAlign:"center"},children:"The Exchange Process"}),u.jsx("div",{style:{display:"grid",gap:"2rem",maxWidth:"700px",margin:"0 auto"},children:[{step:1,title:"Visit an Exchange Point",description:"Stop by any participating business or our central exchange location with US dollars."},{step:2,title:"Show Your Membership",description:"Scan your profile QR code or provide your phone number to apply your tier bonus."},{step:3,title:"Receive Your Kinderbucks",description:"Get physical Kinderbuck bills in $1, $5, $10, and $20 denominations with your bonus applied."},{step:4,title:"Spend Locally",description:"Use your Kinderbucks at any of our 19+ participating businesses."}].map((n,e)=>u.jsxs(xe.div,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},transition:{delay:e*.1},viewport:{once:!0},style:{display:"flex",gap:"1.5rem",alignItems:"flex-start"},children:[u.jsx("div",{style:{width:"50px",height:"50px",background:"var(--kb-navy)",color:"var(--kb-gold)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"var(--font-display)",fontWeight:"700",fontSize:"1.2rem",flexShrink:0},children:n.step}),u.jsxs("div",{children:[u.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:n.title}),u.jsx("p",{style:{color:"var(--kb-gray-600)"},children:n.description})]})]},e))})]})}),u.jsx(L6,{}),u.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:u.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[u.jsx("div",{className:"badge badge-gold",style:{marginBottom:"1rem"},children:"OK Membership"}),u.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem"},children:"The Kinderhooker Program"}),u.jsxs("div",{style:{color:"var(--kb-gray-700)",lineHeight:1.8},children:[u.jsxs("p",{style:{marginBottom:"1rem"},children:[u.jsx("strong",{children:"OK Membership"})," rewards customers who actively support local businesses. The more businesses you visit, the higher your tier  and the better your exchange rate."]}),u.jsxs("p",{style:{marginBottom:"1rem"},children:['Each participating business has a QR code. Scan it when you visit to record a "check-in." Your tier is based on how many ',u.jsx("em",{children:"unique"})," businesses you've visited, encouraging exploration of the entire village."]}),u.jsx("p",{children:`There's no cost to join. Simply start checking in at businesses, and you'll automatically become a "Kinderhooker" with access to bonus exchange rates.`})]}),u.jsxs("div",{style:{marginTop:"2rem",display:"flex",gap:"1rem",flexWrap:"wrap"},children:[u.jsx(me,{to:"/benefits",className:"btn btn-primary",children:"View All Benefits"}),u.jsx(me,{to:"/profile",className:"btn btn-secondary",children:"Check My Status"})]})]})}),u.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:u.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[u.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem"},children:"Frequently Asked Questions"}),[{q:"Is Kinderbucks real money?",a:"Kinderbucks are a local complementary currency. They have value within our participating business network but cannot be deposited in banks or used outside Kinderhook."},{q:"Can I convert Kinderbucks back to USD?",a:"Kinderbucks are designed to circulate locally. While businesses can redeem them, individual customers are encouraged to spend them at participating businesses."},{q:"What if a business closes?",a:"Kinderbucks remain valid at all other participating businesses. The program maintains reserves to ensure stability."},{q:"How do businesses benefit?",a:"Businesses receive customers committed to spending locally, gain exposure through our directory, and become part of a community-strengthening initiative."},{q:"Is there a fee to exchange?",a:"No fees. You receive full value plus your membership bonus when exchanging USD for Kinderbucks."}].map((n,e)=>u.jsxs("div",{style:{marginBottom:"1.5rem"},children:[u.jsx("h4",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:n.q}),u.jsx("p",{style:{color:"var(--kb-gray-600)"},children:n.a})]},e))]})}),u.jsxs("section",{style:{padding:"3rem 1rem",background:"var(--kb-navy)",color:"var(--kb-white)",textAlign:"center"},children:[u.jsx("h3",{style:{marginBottom:"1rem"},children:"Ready to get started?"}),u.jsx(me,{to:"/exchange",className:"btn btn-gold",children:"Get Your Kinderbucks"})]}),u.jsx(gr,{})]})}const $r={curious:{name:"Curious",threshold:1,bonus:.1,color:"#888888",bgColor:"#f0f0f0",emoji:""},hooked:{name:"Hooked",threshold:5,bonus:.15,color:"#2e7d32",bgColor:"#e8f5e9",emoji:""},lineAndSinker:{name:"Line & Sinker",threshold:10,bonus:.2,color:"#1565c0",bgColor:"#e3f2fd",emoji:""},patron:{name:"Village Patron",threshold:15,bonus:.25,color:"#c9a227",bgColor:"#fff8e1",emoji:""}};function Tg(n){return n>=15?"patron":n>=10?"lineAndSinker":n>=5?"hooked":n>=1?"curious":null}function F6(n){const e=["curious","hooked","lineAndSinker","patron"],t=e.indexOf(n);return t<e.length-1?e[t+1]:null}function d0(n){const e=Tg(n),t=F6(e);if(!t)return{progress:100,remaining:0,nextTier:null};const r=$r[t],s=e?$r[e].threshold:0,a=(n-s)/(r.threshold-s)*100;return{progress:Math.min(100,Math.max(0,a)),remaining:r.threshold-n,nextTier:r}}function B6(){const n=[{Icon:MV,title:"Bonus Exchange Rates",description:"Get up to 25% extra when converting USD to Kinderbucks. A $100 exchange becomes $125 in local spending power.",highlight:"Up to 25% bonus"},{Icon:on,title:"Exclusive Local Deals",description:"Participating businesses offer special discounts and promotions exclusively for Kinderhooker members.",highlight:"Member-only offers"},{Icon:Kr,title:"Priority Access",description:"Higher-tier members get early access to limited events, seasonal specials, and new business openings.",highlight:"First in line"},{Icon:HV,title:"Seasonal Bonuses",description:"Extra rewards during holidays and special village events. Double check-in points, bonus exchanges, and more.",highlight:"Special events"},{Icon:Ok,title:"Impact Tracking",description:"See exactly how your spending supports local businesses and contributes to the village economy.",highlight:"Track your impact"},{Icon:Si,title:"Community Recognition",description:"Village Patrons are recognized in our annual report and invited to exclusive community appreciation events.",highlight:"Be celebrated"}];return u.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[u.jsx(mr,{}),u.jsx("section",{style:{background:"linear-gradient(135deg, var(--kb-gold-dark) 0%, var(--kb-gold) 100%)",color:"var(--kb-navy)",padding:"4rem 1rem",textAlign:"center"},children:u.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[u.jsx("div",{className:"badge badge-navy",style:{marginBottom:"1rem"},children:"OK Membership"}),u.jsx("h1",{style:{marginBottom:"1rem"},children:"Member Benefits & Rewards"}),u.jsx("p",{style:{fontSize:"1.1rem",opacity:.9},children:"The more you support local, the more you earn. It pays to be a Kinderhooker."})]})}),u.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:u.jsxs("div",{style:{maxWidth:"1100px",margin:"0 auto"},children:[u.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem",textAlign:"center"},children:"Membership Tiers"}),u.jsx("p",{style:{color:"var(--kb-gray-500)",textAlign:"center",marginBottom:"2rem"},children:"Visit more businesses to unlock better rewards"}),u.jsx("div",{style:{overflowX:"auto"},children:u.jsxs("table",{style:{minWidth:"700px"},children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{style:{width:"25%"},children:"Tier"}),u.jsx("th",{style:{width:"20%"},children:"Requirement"}),u.jsx("th",{style:{width:"20%"},children:"Exchange Bonus"}),u.jsx("th",{style:{width:"35%"},children:"Perks"})]})}),u.jsxs("tbody",{children:[u.jsxs("tr",{children:[u.jsx("td",{children:u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(fn,{size:18,color:"#888"}),u.jsx("span",{style:{fontWeight:"600",color:"#888"},children:"Curious"})]})}),u.jsx("td",{children:"1+ businesses"}),u.jsx("td",{children:u.jsx("span",{style:{color:"#888",fontWeight:"600"},children:"10%"})}),u.jsx("td",{style:{fontSize:"0.9rem",color:"var(--kb-gray-600)"},children:"Basic exchange bonus, check-in tracking"})]}),u.jsxs("tr",{children:[u.jsx("td",{children:u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(Kr,{size:18,color:"#2e7d32"}),u.jsx("span",{style:{fontWeight:"600",color:"#2e7d32"},children:"Hooked"})]})}),u.jsx("td",{children:"5+ businesses"}),u.jsx("td",{children:u.jsx("span",{style:{color:"#2e7d32",fontWeight:"600"},children:"15%"})}),u.jsx("td",{style:{fontSize:"0.9rem",color:"var(--kb-gray-600)"},children:"Seasonal bonus events, member deals"})]}),u.jsxs("tr",{children:[u.jsx("td",{children:u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(Ms,{size:18,color:"#1565c0"}),u.jsx("span",{style:{fontWeight:"600",color:"#1565c0"},children:"Line & Sinker"})]})}),u.jsx("td",{children:"10+ businesses"}),u.jsx("td",{children:u.jsx("span",{style:{color:"#1565c0",fontWeight:"600"},children:"20%"})}),u.jsx("td",{style:{fontSize:"0.9rem",color:"var(--kb-gray-600)"},children:"Priority access, exclusive events"})]}),u.jsxs("tr",{style:{background:"rgba(201, 162, 39, 0.1)"},children:[u.jsx("td",{children:u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(Xn,{size:18,color:"#c9a227"}),u.jsx("span",{style:{fontWeight:"600",color:"#c9a227"},children:"Village Patron"})]})}),u.jsx("td",{children:"15+ businesses"}),u.jsx("td",{children:u.jsx("span",{style:{color:"#c9a227",fontWeight:"600"},children:"25%"})}),u.jsx("td",{style:{fontSize:"0.9rem",color:"var(--kb-gray-600)"},children:"All perks + community recognition + VIP events"})]})]})]})}),u.jsx("div",{style:{textAlign:"center",marginTop:"2rem"},children:u.jsx(me,{to:"/profile",className:"btn btn-primary",children:"Check My Progress"})})]})}),u.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:u.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[u.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem",textAlign:"center"},children:"All Member Benefits"}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1.5rem"},children:n.map((e,t)=>u.jsx(xe.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:t*.1},viewport:{once:!0},className:"card",children:u.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[u.jsx("div",{style:{width:"50px",height:"50px",background:"var(--kb-navy)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:u.jsx(e.Icon,{size:24,color:"var(--kb-gold)",strokeWidth:1.5})}),u.jsxs("div",{children:[u.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"0.25rem",fontSize:"1.1rem"},children:e.title}),u.jsx("span",{className:"badge badge-gold",style:{marginBottom:"0.5rem"},children:e.highlight}),u.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem",marginTop:"0.5rem"},children:e.description})]})]})},t))})]})}),u.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:u.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto",textAlign:"center"},children:[u.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"See Your Savings"}),u.jsx("p",{style:{color:"var(--kb-gray-500)",marginBottom:"2rem"},children:"Example: Exchange $100 USD"}),u.jsx("div",{className:"card",style:{padding:"2rem"},children:u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[{tier:"Curious",bonus:10,color:"#888"},{tier:"Hooked",bonus:15,color:"#2e7d32"},{tier:"Line & Sinker",bonus:20,color:"#1565c0"},{tier:"Village Patron",bonus:25,color:"#c9a227"}].map((e,t)=>u.jsxs("div",{style:{padding:"1rem",borderRadius:"8px",background:`${e.color}10`,border:`1px solid ${e.color}30`},children:[u.jsx("div",{style:{fontSize:"0.85rem",color:e.color,fontWeight:"600"},children:e.tier}),u.jsxs("div",{style:{fontFamily:"var(--font-display)",fontSize:"1.8rem",fontWeight:"700",color:e.color},children:["$",100+e.bonus]}),u.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:"in Kinderbucks"})]},t))})}),u.jsx("div",{style:{marginTop:"2rem"},children:u.jsx(me,{to:"/exchange",className:"btn btn-gold",style:{padding:"1rem 2rem"},children:"Start Exchanging"})})]})}),u.jsxs("section",{style:{padding:"3rem 1rem",background:"var(--kb-green)",color:"var(--kb-white)",textAlign:"center"},children:[u.jsx("h3",{style:{marginBottom:"1rem"},children:"Start earning rewards today"}),u.jsx("p",{style:{opacity:.9,marginBottom:"1.5rem"},children:"Visit a participating business and scan their QR code to begin"}),u.jsx(me,{to:"/businesses",className:"btn btn-gold",children:"Find Businesses Near You"})]}),u.jsx(gr,{})]})}const vu="businesses";async function Bb(n){const e=zt(qe,vu,n),t=await ll(e);return t.exists()?{code:t.id,...t.data()}:null}async function No(){const n=bs(En(qe,vu),Is("name"));return(await pr(n)).docs.map(t=>({code:t.id,...t.data()}))}async function Dw(n,e,t){await uu(zt(qe,vu,n),{code:n,name:e,category:t,isActive:!0,checkinCount:0,createdAt:Vt()})}async function z6(n){const e=zt(qe,vu,n);await Gr(e,{checkinCount:Ty(1)})}async function U6(n,e){const t=zt(qe,vu,n);await Gr(t,{isActive:e})}const xm={food:{label:"Food & Drink",Icon:Kk,color:"#e74c3c"},retail:{label:"Retail",Icon:Wk,color:"#9b59b6"},services:{label:"Services",Icon:Lk,color:"#3498db"},arts:{label:"Arts & Culture",Icon:$k,color:"#1abc9c"}};function $6(){const[n,e]=N.useState([]),[t,r]=N.useState(!0),[s,a]=N.useState("all");N.useEffect(()=>{async function d(){const m=await No();e(m.filter(g=>g.isActive)),r(!1)}d()},[]);const l=s==="all"?n:n.filter(d=>d.category===s),f={total:n.length,food:n.filter(d=>d.category==="food").length,retail:n.filter(d=>d.category==="retail").length};return u.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[u.jsx(mr,{}),u.jsx("section",{style:{background:"var(--kb-navy)",color:"var(--kb-white)",padding:"4rem 1rem",textAlign:"center"},children:u.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[u.jsx("h1",{style:{marginBottom:"1rem"},children:"For Local Businesses"}),u.jsx("p",{style:{color:"var(--kb-gray-300)",fontSize:"1.1rem",marginBottom:"2rem"},children:"Join the Kinderbucks network and connect with customers committed to shopping local"}),u.jsx(me,{to:"/admin/businesses",className:"btn btn-gold",children:"Register Your Business"})]})}),u.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:u.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[u.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem",textAlign:"center"},children:"Why Accept Kinderbucks?"}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"2rem"},children:[{Icon:Si,title:"Committed Customers",description:"Kinderbucks holders have already decided to spend locally. They're not comparison shopping online."},{Icon:pM,title:"Money Stays Local",description:"Unlike credit cards that send fees elsewhere, Kinderbucks keep circulating in our village economy."},{Icon:oM,title:"Free Marketing",description:"Get listed in our business directory, featured on our homepage, and promoted to all members."},{Icon:FM,title:"Community Standing",description:"Show customers you're invested in Kinderhook's future. Participating businesses are community leaders."},{Icon:jy,title:"Easy Redemption",description:"Redeem Kinderbucks for USD at any time through our simple merchant portal. No waiting."},{Icon:Ok,title:"Customer Insights",description:"Access check-in data and understand your customers' behavior across the village."}].map((d,m)=>u.jsxs(xe.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:m*.1},viewport:{once:!0},className:"card",style:{textAlign:"center"},children:[u.jsx("div",{style:{width:"60px",height:"60px",background:"var(--kb-navy)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:u.jsx(d.Icon,{size:28,color:"var(--kb-gold)",strokeWidth:1.5})}),u.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:d.title}),u.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem"},children:d.description})]},m))})]})}),u.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:u.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[u.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem",textAlign:"center"},children:"How It Works"}),u.jsx("div",{style:{display:"grid",gap:"1.5rem"},children:[{step:1,title:"Register",desc:"Sign up as a participating business. It's free to join."},{step:2,title:"Get Your QR Code",desc:"We'll provide a unique check-in QR code for your location."},{step:3,title:"Display It",desc:"Put the QR code at your counter or entrance for customers to scan."},{step:4,title:"Accept Kinderbucks",desc:"Take Kinderbucks as payment, just like cash. Same denominations."},{step:5,title:"Redeem Anytime",desc:"Exchange accumulated Kinderbucks back to USD when you need."}].map((d,m)=>u.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center",background:"var(--kb-white)",padding:"1.5rem",borderRadius:"12px",boxShadow:"var(--shadow-sm)"},children:[u.jsx("div",{style:{width:"40px",height:"40px",background:"var(--kb-gold)",color:"var(--kb-navy)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"700",flexShrink:0},children:d.step}),u.jsxs("div",{children:[u.jsx("h4",{style:{color:"var(--kb-navy)",marginBottom:"0.25rem"},children:d.title}),u.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem",margin:0},children:d.desc})]})]},m))})]})}),u.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:u.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[u.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem",textAlign:"center"},children:"Participating Businesses"}),u.jsxs("p",{style:{color:"var(--kb-gray-500)",textAlign:"center",marginBottom:"2rem"},children:[f.total," businesses currently accepting Kinderbucks"]}),u.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center",marginBottom:"2rem",flexWrap:"wrap"},children:[u.jsxs("button",{onClick:()=>a("all"),className:s==="all"?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem"},children:["All (",f.total,")"]}),Object.entries(xm).map(([d,m])=>u.jsxs("button",{onClick:()=>a(d),className:s===d?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem",display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(m.Icon,{size:16})," ",m.label]},d))]}),t?u.jsx("p",{style:{textAlign:"center"},children:"Loading businesses..."}):l.length===0?u.jsxs("p",{style:{textAlign:"center",color:"var(--kb-gray-500)"},children:["No businesses found. ",u.jsx(me,{to:"/admin/businesses",children:"Add some!"})]}):u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:"1rem"},children:l.map((d,m)=>{const g=xm[d.category]||xm.services;return u.jsxs(xe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:m*.03},className:"card",style:{padding:"1.25rem"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[u.jsx("div",{style:{width:"40px",height:"40px",background:`${g.color}15`,borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsx(g.Icon,{size:20,color:g.color,strokeWidth:1.5})}),u.jsxs("div",{children:[u.jsx("h4",{style:{color:"var(--kb-navy)",margin:0,fontSize:"1rem"},children:d.name}),u.jsx("span",{style:{fontSize:"0.8rem",color:g.color},children:g.label})]})]}),d.checkinCount>0&&u.jsxs("div",{style:{marginTop:"0.75rem",fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:[d.checkinCount," check-ins"]})]},d.code)})})]})}),u.jsxs("section",{style:{padding:"3rem 1rem",background:"var(--kb-gold)",color:"var(--kb-navy)",textAlign:"center"},children:[u.jsx("h3",{style:{marginBottom:"1rem"},children:"Ready to join the network?"}),u.jsx("p",{style:{opacity:.9,marginBottom:"1.5rem"},children:"Registration is free. Start accepting Kinderbucks today."}),u.jsx(me,{to:"/admin/businesses",className:"btn btn-primary",children:"Register Your Business"})]}),u.jsx(gr,{})]})}const zb="members";function Gc(){let n=localStorage.getItem("kinderhooker_visitor_id");return n||(n="anon_"+Math.random().toString(36).substring(2,15),localStorage.setItem("kinderhooker_visitor_id",n)),n}async function Qc(n){const e=zt(qe,zb,n),t=await ll(e);return t.exists()?{visitorId:t.id,...t.data()}:null}async function W6(n,e){const t=zt(qe,zb,n),r=await ll(t);if(r.exists()){const s=r.data(),a=s.businessesVisited||[],l=!a.includes(e),f=l?a.length+1:a.length,d=Tg(f),m=d!==s.tier;return await Gr(t,{businessesVisited:ZD(e),totalCheckins:Ty(1),tier:d,lastCheckin:Vt()}),{isNewBusiness:l,tierChanged:m,oldTier:s.tier,newTier:d,businessesVisited:l?[...a,e]:a,totalCheckins:(s.totalCheckins||0)+1}}else{const s=Tg(1);return await uu(t,{visitorId:n,tier:s,businessesVisited:[e],totalCheckins:1,createdAt:Vt(),lastCheckin:Vt(),email:null}),{isNewBusiness:!0,tierChanged:!0,oldTier:null,newTier:s,businessesVisited:[e],totalCheckins:1}}}const H6={curious:fn,hooked:Kr,lineAndSinker:Ms,patron:Xn};function K6(){const[n,e]=N.useState(null),[t,r]=N.useState(!0),[s,a]=N.useState(20),[l,f]=N.useState(!1),[d,m]=N.useState(!1);N.useEffect(()=>{async function O(){const B=Gc(),j=await Qc(B);e(j),r(!1)}O()},[]);const g=(n==null?void 0:n.tier)||"curious",v=$r[g]||$r.curious,w=n?v.bonus:.1,k=s*w,T=s+k,I=async()=>{f(!0);try{await Ry(En(qe,"exchanges"),{visitorId:Gc(),usdAmount:s,bonusRate:w,bonusAmount:k,kinderbucksAmount:T,tier:g,status:"pending",createdAt:Vt()}),m(!0)}catch(O){console.error("Exchange error:",O),alert("Error submitting exchange request")}f(!1)},C=[10,20,50,100];return u.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[u.jsx(mr,{}),u.jsx("section",{style:{background:"linear-gradient(135deg, var(--kb-green) 0%, var(--kb-green-light) 100%)",color:"var(--kb-white)",padding:"3rem 1rem",textAlign:"center"},children:u.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto"},children:[u.jsx("h1",{style:{marginBottom:"0.5rem"},children:"Get Kinderbucks"}),u.jsx("p",{style:{opacity:.9},children:"Exchange USD for local currency with bonus value"})]})}),u.jsx("section",{style:{padding:"3rem 1rem",background:"var(--kb-cream)",flex:1},children:u.jsx("div",{style:{maxWidth:"500px",margin:"0 auto"},children:d?u.jsxs(xe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"card",style:{textAlign:"center",padding:"3rem 2rem"},children:[u.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:""}),u.jsx("h2",{style:{color:"var(--kb-green)",marginBottom:"1rem"},children:"Exchange Requested!"}),u.jsxs("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem"},children:["Your exchange request for ",u.jsxs("strong",{children:["$",s," USD"]})," "," ",u.jsxs("strong",{children:["$",T.toFixed(2)," Kinderbucks"]})," has been submitted."]}),u.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem",marginBottom:"2rem"},children:"Visit any exchange point to complete your transaction and receive your Kinderbucks."}),u.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[u.jsx("button",{onClick:()=>m(!1),className:"btn btn-primary",children:"Exchange More"}),u.jsx(me,{to:"/account",className:"btn btn-secondary",children:"View Account"})]})]}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)",marginBottom:"0.25rem"},children:"Your Tier"}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(()=>{const O=H6[g]||fn;return u.jsx(O,{size:28,color:v.color,strokeWidth:1.5})})(),u.jsx("span",{style:{fontWeight:"600",color:v.color,fontSize:"1.2rem"},children:v.name})]})]}),u.jsxs("div",{style:{textAlign:"right"},children:[u.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)",marginBottom:"0.25rem"},children:"Bonus Rate"}),u.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:v.color},children:[Math.round(w*100),"%"]})]})]}),!n&&u.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"var(--kb-gray-50)",borderRadius:"8px",fontSize:"0.85rem",color:"var(--kb-gray-600)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(XV,{size:16,color:"var(--kb-gold)"})," ",u.jsx(me,{to:"/profile",style:{color:"var(--kb-navy)"},children:"Visit businesses"})," to increase your tier and get better rates!"]})]}),u.jsxs("div",{className:"card",children:[u.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem"},children:"Exchange Calculator"}),u.jsxs("div",{style:{marginBottom:"1.5rem"},children:[u.jsx("label",{children:"Amount (USD)"}),u.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem"},children:C.map(O=>u.jsxs("button",{onClick:()=>a(O),className:s===O?"btn btn-primary":"btn btn-secondary",style:{flex:1,padding:"0.5rem"},children:["$",O]},O))}),u.jsx("input",{type:"number",value:s,onChange:O=>a(Math.max(1,Number(O.target.value))),min:"1",style:{width:"100%"}})]}),u.jsxs("div",{style:{background:"var(--kb-gray-50)",borderRadius:"12px",padding:"1.5rem",marginBottom:"1.5rem"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.75rem"},children:[u.jsx("span",{style:{color:"var(--kb-gray-600)"},children:"USD Amount"}),u.jsxs("span",{style:{fontWeight:"600"},children:["$",s.toFixed(2)]})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.75rem"},children:[u.jsxs("span",{style:{color:"var(--kb-gray-600)"},children:[v.name," Bonus (",Math.round(w*100),"%)"]}),u.jsxs("span",{style:{fontWeight:"600",color:"var(--kb-green)"},children:["+$",k.toFixed(2)]})]}),u.jsx("div",{className:"divider",style:{margin:"0.75rem 0"}}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsx("span",{style:{color:"var(--kb-navy)",fontWeight:"600"},children:"You Receive"}),u.jsxs("span",{style:{fontFamily:"var(--font-display)",fontSize:"1.8rem",fontWeight:"700",color:"var(--kb-gold-dark)"},children:["$",T.toFixed(2)]})]}),u.jsx("div",{style:{textAlign:"right",fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Kinderbucks"})]}),u.jsx("button",{onClick:I,disabled:l,className:"btn btn-gold",style:{width:"100%",padding:"1rem",fontSize:"1.1rem"},children:l?"Processing...":`Exchange $${s} for $${T.toFixed(2)} Kinderbucks`}),u.jsx("p",{style:{textAlign:"center",fontSize:"0.85rem",color:"var(--kb-gray-500)",marginTop:"1rem"},children:"Complete your exchange at any participating business or exchange point"})]}),u.jsxs("div",{className:"card",style:{marginTop:"1.5rem"},children:[u.jsx("h4",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Exchange Locations"}),u.jsxs("div",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem"},children:[u.jsxs("p",{style:{marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(ih,{size:16,color:"var(--kb-green)"})," ",u.jsx("strong",{children:"OK Pantry"})," - 2 Hudson Street"]}),u.jsxs("p",{style:{marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(ih,{size:16,color:"var(--kb-green)"})," ",u.jsx("strong",{children:"Community Bank NA"})," - 19 Broad Street"]}),u.jsxs("p",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(ih,{size:16,color:"var(--kb-green)"})," ",u.jsx("strong",{children:"Village Hall"})," - During events"]})]})]})]})})}),u.jsx(gr,{})]})}const Vw={curious:fn,hooked:Kr,lineAndSinker:Ms,patron:Xn};function q6(){var O,B;const[n,e]=N.useState(null),[t,r]=N.useState([]),[s,a]=N.useState([]),[l,f]=N.useState(!0),[d,m]=N.useState("overview");if(N.useEffect(()=>{async function j(){const Q=Gc(),W=await Qc(Q),H=await No();try{const A=bs(En(qe,"exchanges"),Bc("visitorId","==",Q),Is("createdAt","desc")),b=await pr(A);a(b.docs.map(P=>({id:P.id,...P.data()})))}catch(A){console.error("Error loading exchanges:",A)}e(W),r(H),f(!1)}j()},[]),l)return u.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[u.jsx(mr,{}),u.jsx("div",{className:"page page-center",style:{flex:1},children:u.jsx("div",{style:{fontSize:"2rem"},children:"Loading..."})}),u.jsx(gr,{})]});const g=(n==null?void 0:n.tier)||null,v=g?$r[g]:null,w=((O=n==null?void 0:n.businessesVisited)==null?void 0:O.length)||0,k=d0(w),T=((B=n==null?void 0:n.businessesVisited)==null?void 0:B.map(j=>{const Q=t.find(W=>W.code===j);return Q?Q.name:j}))||[],I=t.filter(j=>{var Q;return j.isActive&&!((Q=n==null?void 0:n.businessesVisited)!=null&&Q.includes(j.code))}),C=s.reduce((j,Q)=>j+(Q.kinderbucksAmount||0),0);return u.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[u.jsx(mr,{}),u.jsx("section",{style:{background:"var(--kb-navy)",color:"var(--kb-white)",padding:"2rem 1rem"},children:u.jsx("div",{style:{maxWidth:"800px",margin:"0 auto"},children:u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[u.jsx("div",{style:{width:"80px",height:"80px",background:v?v.color:"var(--kb-gray-500)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:(()=>{const j=g&&Vw[g]?Vw[g]:fn;return u.jsx(j,{size:40,color:"white",strokeWidth:1.5})})()}),u.jsxs("div",{style:{flex:1},children:[u.jsx("div",{style:{fontSize:"0.9rem",color:"var(--kb-gray-300)",marginBottom:"0.25rem"},children:"OK Membership"}),u.jsx("h1",{style:{fontSize:"1.5rem",marginBottom:"0.25rem"},children:v?v.name:"New Member"}),u.jsx("div",{style:{fontSize:"0.9rem",color:"var(--kb-gold)"},children:v?`${Math.round(v.bonus*100)}% Exchange Bonus`:"Start exploring to earn rewards"})]}),u.jsx(me,{to:"/exchange",className:"btn btn-gold",children:"Get Kinderbucks"})]})})}),u.jsx("div",{style:{background:"var(--kb-white)",borderBottom:"1px solid var(--kb-gray-200)",position:"sticky",top:"70px",zIndex:50},children:u.jsx("div",{style:{maxWidth:"800px",margin:"0 auto",display:"flex",gap:"2rem",padding:"0 1rem"},children:["overview","progress","history"].map(j=>u.jsx("button",{onClick:()=>m(j),style:{background:"none",border:"none",padding:"1rem 0",fontSize:"0.95rem",fontWeight:d===j?"600":"400",color:d===j?"var(--kb-navy)":"var(--kb-gray-500)",borderBottom:d===j?"2px solid var(--kb-gold)":"2px solid transparent",cursor:"pointer",textTransform:"capitalize"},children:j},j))})}),u.jsx("section",{style:{padding:"2rem 1rem",background:"var(--kb-cream)",flex:1},children:u.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[d==="overview"&&u.jsxs(xe.div,{initial:{opacity:0},animate:{opacity:1},children:[u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[u.jsxs("div",{className:"card",style:{textAlign:"center"},children:[u.jsx("div",{className:"stat-value",children:w}),u.jsx("div",{className:"stat-label",children:"Businesses Visited"})]}),u.jsxs("div",{className:"card",style:{textAlign:"center"},children:[u.jsx("div",{className:"stat-value",children:(n==null?void 0:n.totalCheckins)||0}),u.jsx("div",{className:"stat-label",children:"Total Check-ins"})]}),u.jsxs("div",{className:"card",style:{textAlign:"center"},children:[u.jsxs("div",{className:"stat-value",style:{color:"var(--kb-gold)"},children:["$",C.toFixed(0)]}),u.jsx("div",{className:"stat-label",children:"Kinderbucks Exchanged"})]})]}),u.jsxs("div",{className:"card",children:[u.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Quick Actions"}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"0.75rem"},children:[u.jsxs(me,{to:"/exchange",className:"btn btn-gold",style:{textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[u.jsx(jy,{size:18})," Exchange"]}),u.jsxs(me,{to:"/businesses",className:"btn btn-secondary",style:{textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[u.jsx(on,{size:18})," Find Businesses"]}),u.jsxs(me,{to:"/benefits",className:"btn btn-secondary",style:{textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[u.jsx(Hk,{size:18})," View Benefits"]})]})]})]}),d==="progress"&&u.jsxs(xe.div,{initial:{opacity:0},animate:{opacity:1},children:[v&&u.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[u.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Tier Progress"}),k.nextTier?u.jsxs(u.Fragment,{children:[u.jsxs("div",{style:{marginBottom:"0.5rem"},children:[u.jsx("span",{style:{color:v.color,fontWeight:"600"},children:v.name}),u.jsx("span",{style:{color:"var(--kb-gray-400)",margin:"0 0.5rem"},children:""}),u.jsx("span",{style:{color:k.nextTier.color,fontWeight:"600"},children:k.nextTier.name})]}),u.jsx("div",{className:"progress-bar",style:{height:"12px",marginBottom:"0.5rem"},children:u.jsx("div",{className:"progress-bar-fill",style:{width:`${k.progress}%`,background:v.color}})}),u.jsxs("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:[k.remaining," more business",k.remaining!==1?"es":""," to reach ",k.nextTier.name]})]}):u.jsxs("p",{style:{color:"var(--kb-gold)",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(Xn,{size:20})," Maximum tier reached! You're a Village Patron!"]})]}),u.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[u.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(zc,{size:20,color:"var(--kb-green)"})," Businesses Visited (",T.length,")"]}),T.length>0?u.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:T.map((j,Q)=>u.jsxs("span",{style:{background:"#d4edda",color:"var(--kb-green)",padding:"0.4rem 0.75rem",borderRadius:"100px",fontSize:"0.85rem",display:"inline-flex",alignItems:"center",gap:"0.25rem"},children:[u.jsx(zc,{size:14})," ",j]},Q))}):u.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"No businesses visited yet"})]}),I.length>0&&u.jsxs("div",{className:"card",children:[u.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(Fk,{size:20,color:"var(--kb-navy)"})," Still to Explore (",I.length,")"]}),u.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:[I.slice(0,12).map(j=>u.jsx("span",{style:{background:"var(--kb-gray-100)",color:"var(--kb-gray-600)",padding:"0.4rem 0.75rem",borderRadius:"100px",fontSize:"0.85rem"},children:j.name},j.code)),I.length>12&&u.jsxs("span",{style:{color:"var(--kb-gray-500)",padding:"0.4rem"},children:["+",I.length-12," more"]})]})]})]}),d==="history"&&u.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},children:u.jsxs("div",{className:"card",children:[u.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Exchange History"}),s.length>0?u.jsx("div",{children:s.map((j,Q)=>{var W,H,A,b;return u.jsxs("div",{style:{padding:"1rem 0",borderBottom:Q<s.length-1?"1px solid var(--kb-gray-100)":"none",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsxs("div",{children:[u.jsxs("div",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:["$",j.usdAmount,"  $",(W=j.kinderbucksAmount)==null?void 0:W.toFixed(2)," KB"]}),u.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:[((b=(A=(H=j.createdAt)==null?void 0:H.toDate)==null?void 0:A.call(H))==null?void 0:b.toLocaleDateString())||"Pending","  ",Math.round(j.bonusRate*100),"% bonus"]})]}),u.jsx("span",{className:"badge",style:{background:j.status==="completed"?"#d4edda":"#fff3cd",color:j.status==="completed"?"var(--kb-green)":"#856404"},children:j.status})]},j.id)})}):u.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"var(--kb-gray-500)"},children:[u.jsx("p",{style:{marginBottom:"1rem"},children:"No exchanges yet"}),u.jsx(me,{to:"/exchange",className:"btn btn-gold",children:"Make Your First Exchange"})]})]})})]})}),u.jsx(gr,{})]})}const G6={curious:fn,hooked:Kr,lineAndSinker:Ms,patron:Xn};function Q6(){var w,k;const[n,e]=N.useState(null),[t,r]=N.useState([]),[s,a]=N.useState(!0);if(N.useEffect(()=>{async function T(){const I=Gc(),C=await Qc(I),O=await No();e(C),r(O),a(!1)}T()},[]),s)return u.jsx("div",{className:"page page-center",style:{background:"#faf8f3",minHeight:"100vh"},children:u.jsx(xe.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:u.jsx(uf,{size:48,color:"var(--kb-navy)"})})});if(!n)return u.jsx("div",{className:"page page-center",style:{background:"#faf8f3",minHeight:"100vh",padding:"2rem"},children:u.jsxs(xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{background:"white",borderRadius:"20px",padding:"2rem",maxWidth:"400px",width:"100%",boxShadow:"0 4px 20px rgba(0,0,0,0.1)",textAlign:"center"},children:[u.jsx("div",{style:{width:"80px",height:"80px",background:"var(--kb-navy)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:u.jsx(p_,{size:40,color:"var(--kb-gold)"})}),u.jsx("h1",{style:{color:"#1a5f2a",marginBottom:"1rem"},children:"Kinderhooker"}),u.jsx("p",{style:{color:"#5a6c7d",marginBottom:"1.5rem"},children:"Start exploring local businesses to build your profile!"}),u.jsx("p",{style:{color:"#888",fontSize:"0.9rem",marginBottom:"1.5rem"},children:"Scan a QR code at any participating business to check in and earn rewards."}),u.jsx(me,{to:"/",className:"btn",style:{background:"#1a5f2a"},children:"Find Businesses"})]})});const l=n.tier||"curious",f=$r[l],d=((w=n.businessesVisited)==null?void 0:w.length)||0,m=d0(d),g=((k=n.businessesVisited)==null?void 0:k.map(T=>{const I=t.find(C=>C.code===T);return I?I.name:T}))||[],v=t.filter(T=>{var I;return T.isActive&&!((I=n.businessesVisited)!=null&&I.includes(T.code))});return u.jsx("div",{className:"page",style:{background:"#faf8f3",minHeight:"100vh",padding:"2rem"},children:u.jsxs("div",{style:{maxWidth:"500px",margin:"0 auto"},children:[u.jsx(xe.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},style:{textAlign:"center",marginBottom:"2rem"},children:u.jsxs("h1",{style:{color:"#1a5f2a",fontSize:"1.5rem",marginBottom:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[u.jsx(p_,{size:24})," KINDERHOOKER PROFILE"]})}),u.jsxs(xe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.1},style:{background:`linear-gradient(135deg, ${f.color} 0%, ${f.color}dd 100%)`,borderRadius:"20px",padding:"2rem",color:"white",textAlign:"center",marginBottom:"1.5rem",boxShadow:"0 4px 20px rgba(0,0,0,0.2)"},children:[u.jsx("div",{style:{marginBottom:"0.5rem"},children:(()=>{const T=G6[l]||fn;return u.jsx(T,{size:48,color:"white",strokeWidth:1.5})})()}),u.jsx("div",{style:{fontSize:"1.8rem",fontWeight:"bold",marginBottom:"0.25rem"},children:f.name}),u.jsxs("div",{style:{opacity:.9,fontSize:"0.9rem"},children:[Math.round(f.bonus*100),"% Kinderbuck Match Bonus"]})]}),u.jsxs(xe.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},style:{background:"white",borderRadius:"16px",padding:"1.5rem",marginBottom:"1.5rem",boxShadow:"0 2px 10px rgba(0,0,0,0.05)"},children:[u.jsxs("h3",{style:{color:"#2c3e50",marginBottom:"1rem",textAlign:"center"},children:["You've supported ",d," local business",d!==1?"es":"","!"]}),m.nextTier&&u.jsxs(u.Fragment,{children:[u.jsxs("p",{style:{color:"#5a6c7d",fontSize:"0.9rem",marginBottom:"0.5rem"},children:["Progress to ",u.jsx("strong",{style:{color:m.nextTier.color},children:m.nextTier.name}),":"]}),u.jsx("div",{style:{background:"#e0e0e0",borderRadius:"10px",height:"24px",overflow:"hidden",marginBottom:"0.5rem"},children:u.jsxs(xe.div,{initial:{width:0},animate:{width:`${m.progress}%`},transition:{delay:.5,duration:.8},style:{background:`linear-gradient(90deg, ${f.color}, ${m.nextTier.color})`,height:"100%",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"0.75rem",fontWeight:"bold"},children:[d,"/",m.nextTier.threshold]})}),u.jsxs("p",{style:{color:"#888",fontSize:"0.85rem",textAlign:"center"},children:[m.remaining," more business",m.remaining!==1?"es":""," to go!"]})]}),!m.nextTier&&u.jsxs("p",{style:{color:"#c9a227",fontWeight:"bold",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[u.jsx(Xn,{size:20})," Maximum tier reached! You're a true Village Patron!"]})]}),u.jsxs(xe.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},style:{background:"white",borderRadius:"16px",padding:"1.5rem",marginBottom:"1.5rem",boxShadow:"0 2px 10px rgba(0,0,0,0.05)"},children:[u.jsxs("h3",{style:{color:"#2c3e50",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(zc,{size:20,color:"var(--kb-green)"})," Businesses Visited"]}),g.length>0?u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:g.map((T,I)=>u.jsxs(xe.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4+I*.05},style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem",background:"#e8f5e9",borderRadius:"8px"},children:[u.jsx(zc,{size:16,color:"#2e7d32"}),u.jsx("span",{style:{color:"#2c3e50"},children:T})]},I))}):u.jsx("p",{style:{color:"#888"},children:"No businesses visited yet"})]}),v.length>0&&u.jsxs(xe.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},style:{background:"white",borderRadius:"16px",padding:"1.5rem",marginBottom:"1.5rem",boxShadow:"0 2px 10px rgba(0,0,0,0.05)"},children:[u.jsxs("h3",{style:{color:"#2c3e50",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(Fk,{size:20,color:"var(--kb-navy)"})," Still to Explore"]}),u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:v.map((T,I)=>u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem",background:"#f5f5f5",borderRadius:"8px"},children:[u.jsx("span",{style:{color:"#888"},children:""}),u.jsx("span",{style:{color:"#5a6c7d"},children:T.name})]},T.code))})]}),u.jsxs(xe.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},style:{textAlign:"center",color:"#888",marginBottom:"1.5rem"},children:["Total check-ins: ",n.totalCheckins||0]}),u.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},style:{display:"flex",gap:"0.5rem",justifyContent:"center"},children:u.jsx(me,{to:"/",className:"btn",style:{background:"#1a5f2a"},children:"Home"})})]})})}function Y6(){var O,B;const[n,e]=N.useState("login"),[t,r]=N.useState(""),[s,a]=N.useState(""),[l,f]=N.useState(""),[d,m]=N.useState(""),[g,v]=N.useState(!1),w=Xc(),k=Yn(),{isAuthenticated:T}=hu(),I=((B=(O=k.state)==null?void 0:O.from)==null?void 0:B.pathname)||"/profile",C=async j=>{j.preventDefault(),m(""),v(!0);try{if(n==="signup"){if(!l.trim()){m("Please enter your name"),v(!1);return}await aV(t,s,l)}else await lV(t,s);w(I,{replace:!0})}catch(Q){console.error("Auth error:",Q),Q.code==="auth/email-already-in-use"?m("An account with this email already exists"):Q.code==="auth/weak-password"?m("Password should be at least 6 characters"):Q.code==="auth/invalid-email"?m("Please enter a valid email address"):Q.code==="auth/user-not-found"||Q.code==="auth/wrong-password"||Q.code==="auth/invalid-credential"?m("Invalid email or password"):m("Something went wrong. Please try again.")}v(!1)};return u.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[u.jsx(mr,{}),u.jsx("section",{style:{flex:1,background:"linear-gradient(180deg, var(--kb-cream) 0%, var(--kb-white) 100%)",padding:"3rem 1rem",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsxs(xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{width:"100%",maxWidth:"420px"},children:[u.jsxs("div",{className:"card",style:{padding:"2rem"},children:[u.jsxs("div",{style:{display:"flex",marginBottom:"2rem",background:"var(--kb-gray-100)",borderRadius:"10px",padding:"4px"},children:[u.jsxs("button",{onClick:()=>{e("login"),m("")},style:{flex:1,padding:"0.75rem",border:"none",borderRadius:"8px",background:n==="login"?"white":"transparent",color:n==="login"?"var(--kb-navy)":"var(--kb-gray-500)",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",boxShadow:n==="login"?"0 1px 3px rgba(0,0,0,0.1)":"none",transition:"all 0.2s"},children:[u.jsx(Ch,{size:18})," Sign In"]}),u.jsxs("button",{onClick:()=>{e("signup"),m("")},style:{flex:1,padding:"0.75rem",border:"none",borderRadius:"8px",background:n==="signup"?"white":"transparent",color:n==="signup"?"var(--kb-navy)":"var(--kb-gray-500)",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",boxShadow:n==="signup"?"0 1px 3px rgba(0,0,0,0.1)":"none",transition:"all 0.2s"},children:[u.jsx(v_,{size:18})," Sign Up"]})]}),u.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[u.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:n==="login"?"Welcome Back":"Join Kinderbucks"}),u.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.95rem"},children:n==="login"?"Sign in to access your account":"Create an account to track your Kinderhooker status"})]}),d&&u.jsxs(xe.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},style:{background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",padding:"0.75rem 1rem",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem",color:"#dc2626",fontSize:"0.9rem"},children:[u.jsx(Dy,{size:18}),d]}),u.jsxs("form",{onSubmit:C,children:[n==="signup"&&u.jsxs("div",{style:{marginBottom:"1rem"},children:[u.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Your Name"}),u.jsxs("div",{style:{position:"relative"},children:[u.jsx(kc,{size:18,color:"var(--kb-gray-400)",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)"}}),u.jsx("input",{type:"text",value:l,onChange:j=>f(j.target.value),placeholder:"Jane Smith",style:{width:"100%",paddingLeft:"40px"},required:n==="signup"})]})]}),u.jsxs("div",{style:{marginBottom:"1rem"},children:[u.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Email"}),u.jsxs("div",{style:{position:"relative"},children:[u.jsx(Uk,{size:18,color:"var(--kb-gray-400)",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)"}}),u.jsx("input",{type:"email",value:t,onChange:j=>r(j.target.value),placeholder:"you@example.com",style:{width:"100%",paddingLeft:"40px"},required:!0})]})]}),u.jsxs("div",{style:{marginBottom:"1.5rem"},children:[u.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Password"}),u.jsxs("div",{style:{position:"relative"},children:[u.jsx(eM,{size:18,color:"var(--kb-gray-400)",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)"}}),u.jsx("input",{type:"password",value:s,onChange:j=>a(j.target.value),placeholder:"",style:{width:"100%",paddingLeft:"40px"},required:!0,minLength:6})]}),n==="signup"&&u.jsx("p",{style:{marginTop:"0.5rem",fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:"At least 6 characters"})]}),u.jsx("button",{type:"submit",className:"btn btn-gold",disabled:g,style:{width:"100%",padding:"0.875rem",fontSize:"1rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:g?u.jsxs(u.Fragment,{children:[u.jsx(uf,{size:20,className:"animate-spin",style:{animation:"spin 1s linear infinite"}}),n==="login"?"Signing in...":"Creating account..."]}):u.jsxs(u.Fragment,{children:[n==="login"?u.jsx(Ch,{size:20}):u.jsx(v_,{size:20}),n==="login"?"Sign In":"Create Account"]})})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",margin:"1.5rem 0",gap:"1rem"},children:[u.jsx("div",{style:{flex:1,height:"1px",background:"var(--kb-gray-200)"}}),u.jsx("span",{style:{color:"var(--kb-gray-400)",fontSize:"0.85rem"},children:"or"}),u.jsx("div",{style:{flex:1,height:"1px",background:"var(--kb-gray-200)"}})]}),u.jsxs("button",{type:"button",onClick:async()=>{m(""),v(!0);try{await cV(),w(I,{replace:!0})}catch(j){console.error("Google sign-in error:",j),j.code==="auth/popup-closed-by-user"?m("Sign-in cancelled"):m("Could not sign in with Google. Please try again.")}v(!1)},disabled:g,style:{width:"100%",padding:"0.75rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",background:"white",border:"1px solid var(--kb-gray-300)",borderRadius:"8px",cursor:"pointer",fontSize:"0.95rem",fontWeight:"500",color:"var(--kb-gray-700)",transition:"all 0.2s"},children:[u.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",children:[u.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),u.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),u.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),u.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),u.jsx("div",{style:{marginTop:"1rem"},children:u.jsx(me,{to:"/profile",style:{display:"block",textAlign:"center",color:"var(--kb-gray-500)",fontSize:"0.85rem",textDecoration:"none"},children:"Continue as guest (limited features)"})})]}),u.jsx("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"rgba(201, 162, 39, 0.1)",borderRadius:"12px",textAlign:"center"},children:u.jsx("p",{style:{color:"var(--kb-gray-700)",fontSize:"0.9rem",margin:0},children:"Create an account to sync your Kinderhooker status across devices and never lose your tier progress!"})})]})}),u.jsx(gr,{}),u.jsx("style",{children:`
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
      `})]})}const xu="kinderbucks",X6="scans";async function J6(n){const e=zt(qe,xu,n),t=await ll(e);return t.exists()?{serial:t.id,...t.data()}:null}async function Ub(){const n=bs(En(qe,xu),Is("serial"));return(await pr(n)).docs.map(t=>({serial:t.id,...t.data()}))}async function Z6(n,e){const t=n.map(r=>uu(zt(qe,xu,r),{serial:r,denomination:e,status:"draft",scanCount:0,createdAt:Vt()}));await Promise.all(t)}async function e8(n,e,t=null){const r=zt(qe,xu,n),s={status:e,issuedAt:Vt(),...t&&{issuedTo:t}};await Gr(r,s)}async function t8(n){const e=zt(qe,xu,n);await Gr(e,{scanCount:Ty(1),lastScanned:Vt(),status:"active"}),await Ry(En(qe,X6),{serial:n,scannedAt:Vt(),userAgent:navigator.userAgent||null})}function $b(){const[n,e]=N.useState([]);return N.useEffect(()=>{const t=["#2d5a27","#c9a227","#4a7c43","#d4af37","#5c4033"],r=Array.from({length:50},(s,a)=>({id:a,x:Math.random()*100,color:t[Math.floor(Math.random()*t.length)],delay:Math.random()*.5,duration:2+Math.random()*2,size:8+Math.random()*8}));e(r)},[]),u.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,pointerEvents:"none",overflow:"hidden",zIndex:100},children:n.map(t=>u.jsx(xe.div,{initial:{y:-20,x:`${t.x}vw`,opacity:1,rotate:0},animate:{y:"110vh",rotate:360*(Math.random()>.5?1:-1),opacity:[1,1,0]},transition:{duration:t.duration,delay:t.delay,ease:"linear"},style:{position:"absolute",width:t.size,height:t.size,background:t.color,borderRadius:Math.random()>.5?"50%":"2px"}},t.id))})}const Mw={1:{bg:"#d4edda",text:"#155724"},5:{bg:"#cce5ff",text:"#004085"},10:{bg:"#e2d5e7",text:"#4a235a"},20:{bg:"#fff3cd",text:"#856404"}};function n8({kinderbuck:n}){const e=Mw[n.denomination]||Mw[5];return u.jsxs(xe.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",duration:.5},className:"card",style:{textAlign:"center",maxWidth:"400px",background:e.bg},children:[u.jsxs(xe.div,{initial:{y:-20},animate:{y:0},transition:{delay:.2},children:[u.jsxs("h1",{style:{color:e.text,fontSize:"3rem",marginBottom:"0.5rem"},children:["$",n.denomination]}),u.jsx("p",{style:{fontFamily:"monospace",fontSize:"1.5rem",color:e.text},children:n.serial})]}),u.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},style:{marginTop:"1.5rem"},children:u.jsx("div",{style:{display:"inline-block",padding:"0.5rem 1rem",background:"rgba(255,255,255,0.7)",borderRadius:"20px",color:"var(--kb-green)",fontWeight:"bold"},children:"VERIFIED AUTHENTIC"})}),u.jsxs(xe.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},style:{marginTop:"1.5rem",fontSize:"0.9rem",opacity:.8},children:[u.jsxs("p",{children:["Status: ",u.jsx("strong",{children:n.status})]}),n.issuedAt&&u.jsxs("p",{children:["Issued: ",new Date(n.issuedAt.seconds*1e3).toLocaleDateString()]}),u.jsxs("p",{children:["Scans: ",n.scanCount||1]})]}),u.jsx(xe.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.8,type:"spring"},style:{marginTop:"1.5rem"},children:u.jsx("iframe",{src:"https://giphy.com/embed/B1txHfofr9y08bDB8b",width:"200",height:"200",frameBorder:"0",style:{borderRadius:"12px",pointerEvents:"none"},allowFullScreen:!0})})]})}function r8(){const{serial:n}=Qw(),[e,t]=N.useState(null),[r,s]=N.useState(!0),[a,l]=N.useState(null);return N.useEffect(()=>{async function f(){try{const d=await J6(n);d?(t(d),await t8(n)):l("not_found")}catch(d){console.error("Verification error:",d),l("error")}finally{s(!1)}}f()},[n]),r?u.jsxs("div",{className:"page page-center",children:[u.jsx(xe.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},style:{fontSize:"3rem"},children:"$"}),u.jsxs("p",{style:{marginTop:"1rem"},children:["Verifying ",n,"..."]})]}):a==="not_found"?u.jsxs("div",{className:"page page-center",children:[u.jsx("h1",{style:{color:"#c0392b"},children:"Not Found"}),u.jsxs("p",{children:["Serial ",u.jsx("strong",{children:n})," is not a valid Kinderbuck."]})]}):a?u.jsxs("div",{className:"page page-center",children:[u.jsx("h1",{style:{color:"#c0392b"},children:"Error"}),u.jsx("p",{children:"Something went wrong verifying this Kinderbuck."})]}):u.jsxs("div",{className:"page page-center",children:[u.jsx($b,{}),u.jsx(n8,{kinderbuck:e})]})}const h0="checkins",i8=3600*1e3;async function s8(n,e){var f;const t=new Date(Date.now()-i8),r=bs(En(qe,h0),Bc("visitorId","==",n),Bc("businessCode","==",e),Is("timestamp","desc"),Ay(1)),s=await pr(r);return s.empty?!1:(((f=s.docs[0].data().timestamp)==null?void 0:f.toDate())||new Date(0))>t}async function o8(n,e,t){await Ry(En(qe,h0),{visitorId:n,businessCode:e,timestamp:Vt(),kinderbucksMatched:!1,boostApplied:0,memberTier:t||"curious"})}async function a8(n){const e=bs(En(qe,h0),Bc("businessCode","==",n),Is("timestamp","desc"),Ay(100));return(await pr(e)).docs.map(r=>({id:r.id,...r.data()}))}const Lw={curious:fn,hooked:Kr,lineAndSinker:Ms,patron:Xn};function l8(){var O;const{businessCode:n}=Qw(),[e,t]=N.useState(null),[r,s]=N.useState(!0),[a,l]=N.useState(null),[f,d]=N.useState(null),[m,g]=N.useState(!1),[v,w]=N.useState(!1);if(N.useEffect(()=>{async function B(){try{const j=await Bb(n);if(!j){l("not_found"),s(!1);return}if(!j.isActive){l("inactive"),s(!1);return}t(j);const Q=Gc();if(await s8(Q,n)){g(!0);const P=await Qc(Q);P&&d({tierChanged:!1,newTier:P.tier,businessesVisited:P.businessesVisited||[],totalCheckins:P.totalCheckins||0,isNewBusiness:!1}),s(!1);return}const H=await Qc(Q),A=(H==null?void 0:H.tier)||null,b=await W6(Q,n);await o8(Q,n,b.newTier),await z6(n),d(b),b.tierChanged&&b.newTier&&w(!0),s(!1)}catch(j){console.error("Check-in error:",j),l("error"),s(!1)}}B()},[n]),r)return u.jsxs("div",{className:"page page-center",style:{background:"#faf8f3",minHeight:"100vh"},children:[u.jsx(xe.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:u.jsx(uf,{size:48,color:"var(--kb-navy)"})}),u.jsx("p",{style:{marginTop:"1rem",color:"#5a6c7d"},children:"Checking in..."})]});if(a==="not_found")return u.jsxs("div",{className:"page page-center",style:{background:"#faf8f3",minHeight:"100vh"},children:[u.jsx("h1",{style:{color:"#c0392b"},children:"Business Not Found"}),u.jsx("p",{style:{color:"#5a6c7d"},children:"This check-in code doesn't match any participating business."}),u.jsx(me,{to:"/",className:"btn",style:{marginTop:"1rem"},children:"Go Home"})]});if(a==="inactive")return u.jsxs("div",{className:"page page-center",style:{background:"#faf8f3",minHeight:"100vh"},children:[u.jsx("h1",{style:{color:"#e67e22"},children:"Business Not Active"}),u.jsx("p",{style:{color:"#5a6c7d"},children:"This business is not currently participating in Kinderhooker."}),u.jsx(me,{to:"/",className:"btn",style:{marginTop:"1rem"},children:"Go Home"})]});if(a)return u.jsxs("div",{className:"page page-center",style:{background:"#faf8f3",minHeight:"100vh"},children:[u.jsx("h1",{style:{color:"#c0392b"},children:"Something went wrong"}),u.jsx("p",{style:{color:"#5a6c7d"},children:"Please try scanning again."}),u.jsx(me,{to:"/",className:"btn",style:{marginTop:"1rem"},children:"Go Home"})]});const k=(f==null?void 0:f.newTier)||"curious",T=$r[k],I=((O=f==null?void 0:f.businessesVisited)==null?void 0:O.length)||0,C=d0(I);return u.jsxs("div",{className:"page page-center",style:{background:"#faf8f3",minHeight:"100vh",padding:"2rem"},children:[v&&u.jsx($b,{}),u.jsxs(xe.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",duration:.5},style:{background:"white",borderRadius:"20px",padding:"2rem",maxWidth:"400px",width:"100%",boxShadow:"0 4px 20px rgba(0,0,0,0.1)",textAlign:"center"},children:[m?u.jsxs(u.Fragment,{children:[u.jsx("div",{style:{width:"60px",height:"60px",background:"var(--kb-gray-100)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:u.jsx(qa,{size:32,color:"var(--kb-gray-500)"})}),u.jsx("h2",{style:{color:"#5a6c7d",marginBottom:"0.5rem"},children:"Already Checked In!"}),u.jsxs("p",{style:{color:"#888",marginBottom:"1.5rem"},children:["You visited ",u.jsx("strong",{children:e.name})," recently.",u.jsx("br",{}),"Come back in an hour for another check-in!"]})]}):u.jsxs(u.Fragment,{children:[u.jsxs(xe.div,{initial:{y:-20},animate:{y:0},transition:{delay:.2},children:[u.jsx("div",{style:{width:"50px",height:"50px",background:"#d4edda",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 0.5rem"},children:u.jsx(zc,{size:28,color:"var(--kb-green)"})}),u.jsxs("h2",{style:{color:"#1a5f2a",marginBottom:"0.5rem"},children:["Welcome to ",e.name,"!"]}),u.jsx("p",{style:{color:"#5a6c7d",marginBottom:"1.5rem"},children:"Check-in recorded!"})]}),(f==null?void 0:f.tierChanged)&&(f==null?void 0:f.newTier)&&u.jsxs(xe.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.4,type:"spring"},style:{background:T.bgColor,borderRadius:"12px",padding:"1rem",marginBottom:"1.5rem"},children:[u.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"0.5rem"},children:(()=>{const B=Lw[k]||fn;return u.jsx(B,{size:32,color:T.color,strokeWidth:1.5})})()}),u.jsx("div",{style:{color:T.color,fontWeight:"bold",fontSize:"1.2rem"},children:f.oldTier?"NEW TIER UNLOCKED!":"WELCOME, KINDERHOOKER!"}),u.jsx("div",{style:{color:T.color,fontSize:"1.5rem",fontWeight:"bold"},children:T.name})]})]}),u.jsxs(xe.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},style:{background:T.bgColor,borderRadius:"12px",padding:"1rem",marginBottom:"1.5rem"},children:[u.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"0.5rem"},children:(()=>{const B=Lw[k]||fn;return u.jsx(B,{size:40,color:T.color,strokeWidth:1.5})})()}),u.jsx("div",{style:{color:T.color,fontWeight:"bold",textTransform:"uppercase",letterSpacing:"1px"},children:T.name}),u.jsxs("div",{style:{color:"#5a6c7d",fontSize:"0.9rem",marginTop:"0.5rem"},children:[Math.round(T.bonus*100),"% Kinderbuck Match Bonus"]})]}),u.jsxs(xe.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:[u.jsxs("p",{style:{color:"#2c3e50",marginBottom:"0.5rem"},children:["You've visited ",u.jsx("strong",{children:I})," business",I!==1?"es":""]}),C.nextTier&&u.jsxs(u.Fragment,{children:[u.jsx("div",{style:{background:"#e0e0e0",borderRadius:"10px",height:"20px",overflow:"hidden",marginBottom:"0.5rem"},children:u.jsx(xe.div,{initial:{width:0},animate:{width:`${C.progress}%`},transition:{delay:.7,duration:.5},style:{background:`linear-gradient(90deg, ${T.color}, ${C.nextTier.color})`,height:"100%",borderRadius:"10px"}})}),u.jsxs("p",{style:{color:"#5a6c7d",fontSize:"0.85rem"},children:[C.remaining," more to reach ",u.jsx("strong",{style:{color:C.nextTier.color},children:C.nextTier.name}),"!"]})]}),!C.nextTier&&u.jsxs("p",{style:{color:"#c9a227",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[u.jsx(Xn,{size:20})," Maximum tier reached! You're a true Village Patron!"]})]}),u.jsxs(xe.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},style:{marginTop:"1.5rem",display:"flex",gap:"0.5rem",justifyContent:"center",flexWrap:"wrap"},children:[u.jsx(me,{to:"/profile",className:"btn",style:{background:"#1a5f2a"},children:"View My Profile"}),u.jsx(me,{to:"/",className:"btn btn-secondary",children:"Home"})]})]})]})}function c8(){const{profile:n}=hu(),[e,t]=N.useState(null),[r,s]=N.useState([]),[a,l]=N.useState(!0),[f,d]=N.useState(!1),[m,g]=N.useState(!1);N.useEffect(()=>{async function C(){if(!(n!=null&&n.businessCode)){l(!1);return}const[O,B]=await Promise.all([Bb(n.businessCode),a8(n.businessCode)]);t(O),s(B),l(!1)}C()},[n==null?void 0:n.businessCode]);const v=()=>{const C=`https://harmonicsystems.github.io/kinderbucks/#/checkin/${n.businessCode}`;navigator.clipboard.writeText(C),g(!0),setTimeout(()=>g(!1),2e3)},w=r.filter(C=>{var j;const O=(j=C.timestamp)!=null&&j.toDate?C.timestamp.toDate():new Date(C.timestamp),B=new Date;return O.toDateString()===B.toDateString()}).length,k=r.filter(C=>{var j;const O=(j=C.timestamp)!=null&&j.toDate?C.timestamp.toDate():new Date(C.timestamp),B=new Date;return B.setDate(B.getDate()-7),O>B}).length,T=new Set(r.map(C=>C.visitorId)).size;if(a)return u.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[u.jsx(mr,{}),u.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",background:"var(--kb-cream)"},children:u.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading..."})}),u.jsx(gr,{})]});if(!(n!=null&&n.businessCode))return u.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[u.jsx(mr,{}),u.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",background:"var(--kb-cream)",padding:"2rem"},children:u.jsxs("div",{className:"card",style:{maxWidth:"400px",textAlign:"center",padding:"2rem"},children:[u.jsx(on,{size:48,color:"var(--kb-gray-400)",style:{marginBottom:"1rem"}}),u.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"No Business Assigned"}),u.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem"},children:"Your account doesn't have a business assigned yet. Contact an administrator to get set up."}),u.jsx(me,{to:"/",className:"btn btn-primary",children:"Go Home"})]})}),u.jsx(gr,{})]});const I=`https://harmonicsystems.github.io/kinderbucks/#/checkin/${n.businessCode}`;return u.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[u.jsx(mr,{}),u.jsx("main",{style:{flex:1,background:"var(--kb-cream)",padding:"2rem 1rem"},children:u.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[u.jsx(xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{marginBottom:"2rem"},children:u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"1rem"},children:[u.jsxs("div",{children:[u.jsx("div",{className:"badge badge-gold",style:{marginBottom:"0.5rem"},children:"Business Dashboard"}),u.jsx("h1",{style:{color:"var(--kb-navy)",marginBottom:"0.25rem"},children:(e==null?void 0:e.name)||n.businessCode}),u.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"Manage your Kinderbucks check-ins"})]}),u.jsxs("button",{onClick:()=>d(!f),className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(vs,{size:18}),f?"Hide QR Code":"Show QR Code"]})]})}),f&&u.jsx(xe.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"card",style:{marginBottom:"2rem",padding:"2rem"},children:u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"2rem",flexWrap:"wrap"},children:[u.jsx("div",{style:{textAlign:"center"},children:u.jsx("div",{style:{background:"linear-gradient(135deg, var(--kb-green) 0%, #1e8449 100%)",borderRadius:"16px",padding:"3px",display:"inline-block"},children:u.jsxs("div",{style:{background:"white",borderRadius:"14px",padding:"16px"},children:[u.jsx("div",{style:{fontSize:"10px",fontWeight:"600",color:"var(--kb-green)",letterSpacing:"2px",marginBottom:"8px"},children:"CHECK IN AT"}),u.jsx(qc,{value:I,size:150,denomination:1,showFrame:!1}),u.jsx("div",{style:{marginTop:"8px",fontWeight:"600",color:"var(--kb-navy)"},children:e==null?void 0:e.name})]})})}),u.jsxs("div",{style:{flex:1,minWidth:"250px"},children:[u.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Display This QR Code"}),u.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1rem"},children:"Print and display this QR code at your counter. Customers can scan it with their phone to check in and build their Kinderhooker status."}),u.jsxs("div",{style:{marginBottom:"1rem"},children:[u.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontSize:"0.85rem"},children:"Check-in URL"}),u.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[u.jsx("input",{type:"text",value:I,readOnly:!0,style:{flex:1,fontFamily:"monospace",fontSize:"0.85rem"}}),u.jsxs("button",{onClick:v,className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[m?u.jsx(Cs,{size:16}):u.jsx(Bk,{size:16}),m?"Copied!":"Copy"]})]})]}),u.jsxs("button",{onClick:()=>window.print(),className:"btn btn-gold",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(zk,{size:18})," Print QR Code"]})]})]})}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[u.jsx(xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card",style:{padding:"1.5rem"},children:u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[u.jsx("div",{style:{width:"50px",height:"50px",background:"rgba(39, 174, 96, 0.1)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsx(fu,{size:24,color:"var(--kb-green)"})}),u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"var(--kb-navy)"},children:(e==null?void 0:e.checkinCount)||0}),u.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"Total Check-ins"})]})]})}),u.jsx(xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card",style:{padding:"1.5rem"},children:u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[u.jsx("div",{style:{width:"50px",height:"50px",background:"rgba(52, 152, 219, 0.1)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsx(qa,{size:24,color:"#3498db"})}),u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"var(--kb-navy)"},children:w}),u.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"Today"})]})]})}),u.jsx(xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"card",style:{padding:"1.5rem"},children:u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[u.jsx("div",{style:{width:"50px",height:"50px",background:"rgba(155, 89, 182, 0.1)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsx(Ny,{size:24,color:"#9b59b6"})}),u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"var(--kb-navy)"},children:k}),u.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"This Week"})]})]})}),u.jsx(xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"card",style:{padding:"1.5rem"},children:u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[u.jsx("div",{style:{width:"50px",height:"50px",background:"rgba(201, 162, 39, 0.1)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsx(Si,{size:24,color:"var(--kb-gold-dark)"})}),u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"var(--kb-navy)"},children:T}),u.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"Unique Visitors"})]})]})})]}),u.jsxs(xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"card",children:[u.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(qa,{size:20})," Recent Check-ins"]}),r.length===0?u.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[u.jsx(Si,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),u.jsx("p",{children:"No check-ins yet"}),u.jsx("p",{style:{fontSize:"0.9rem"},children:"Display your QR code to start receiving check-ins!"})]}):u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:r.slice(0,20).map((C,O)=>{var j;const B=(j=C.timestamp)!=null&&j.toDate?C.timestamp.toDate():new Date(C.timestamp);return u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"var(--kb-gray-50)",borderRadius:"8px"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[u.jsx("div",{style:{width:"36px",height:"36px",background:"var(--kb-green)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsx(Cs,{size:18,color:"white"})}),u.jsxs("div",{children:[u.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:"Check-in recorded"}),u.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:C.tier&&`${C.tier} member`})]})]}),u.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:B.toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]},C.id||O)})})]})]})}),u.jsx(gr,{})]})}function Vn({children:n,title:e}){const t=Yn(),r=Xc(),{user:s,profile:a,isAdmin:l}=hu(),f=[{to:"/admin/dashboard",label:"Dashboard",Icon:QV},{to:"/admin/exchanges",label:"Exchanges",Icon:cf},{to:"/admin/members",label:"Members",Icon:Si},{to:"/admin/generate",label:"Generate QR",Icon:vs},{to:"/admin/issue",label:"Issue Currency",Icon:Ah},{to:"/admin/businesses",label:"Businesses",Icon:on},{to:"/admin/users",label:"User Management",Icon:Rh}],d=async()=>{await Dk(),r("/")},m=g=>t.pathname===g;return u.jsxs("div",{style:{display:"flex",minHeight:"100vh"},children:[u.jsxs("aside",{style:{width:"260px",background:"var(--kb-navy)",color:"var(--kb-white)",display:"flex",flexDirection:"column",position:"fixed",top:0,left:0,bottom:0,zIndex:100},children:[u.jsx("div",{style:{padding:"1.5rem",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:u.jsxs(me,{to:"/",style:{display:"flex",alignItems:"center",gap:"0.75rem",textDecoration:"none"},children:[u.jsx("div",{style:{width:"40px",height:"40px",background:"var(--kb-gold)",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--kb-navy)",fontFamily:"var(--font-display)",fontWeight:"700",fontSize:"1.2rem"},children:"K"}),u.jsxs("div",{children:[u.jsx("div",{style:{fontFamily:"var(--font-display)",fontWeight:"600",color:"var(--kb-white)",fontSize:"1.1rem"},children:"Kinderbucks"}),u.jsx("div",{style:{fontSize:"0.7rem",color:"var(--kb-gold)",textTransform:"uppercase",letterSpacing:"0.1em"},children:"Admin Portal"})]})]})}),u.jsx("nav",{style:{flex:1,padding:"1rem 0",overflowY:"auto"},children:f.map(g=>u.jsxs(me,{to:g.to,style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.875rem 1.5rem",color:m(g.to)?"var(--kb-gold)":"var(--kb-gray-300)",background:m(g.to)?"rgba(201, 162, 39, 0.1)":"transparent",borderLeft:m(g.to)?"3px solid var(--kb-gold)":"3px solid transparent",textDecoration:"none",fontSize:"0.95rem",fontWeight:m(g.to)?"600":"400",transition:"all 0.2s"},children:[u.jsx(g.Icon,{size:20,strokeWidth:1.5}),g.label]},g.to))}),u.jsxs("div",{style:{padding:"1rem 1.5rem",borderTop:"1px solid rgba(255,255,255,0.1)"},children:[s&&u.jsxs("div",{style:{padding:"0.75rem 0",borderBottom:"1px solid rgba(255,255,255,0.1)",marginBottom:"0.75rem"},children:[u.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-300)"},children:(a==null?void 0:a.displayName)||s.email}),u.jsx("div",{style:{fontSize:"0.75rem",color:"var(--kb-gray-500)"},children:(a==null?void 0:a.role)||"member"})]}),u.jsxs(me,{to:"/",style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.5rem 0",color:"var(--kb-gray-400)",textDecoration:"none",fontSize:"0.9rem"},children:[u.jsx(qV,{size:18}),"Back to Site"]}),s&&u.jsxs("button",{onClick:d,style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.5rem 0",color:"var(--kb-gray-400)",background:"none",border:"none",cursor:"pointer",fontSize:"0.9rem",width:"100%"},children:[u.jsx(Xm,{size:18}),"Sign Out"]})]})]}),u.jsxs("main",{style:{flex:1,marginLeft:"260px",background:"var(--kb-cream)",minHeight:"100vh"},children:[u.jsx("header",{style:{background:"var(--kb-white)",borderBottom:"1px solid var(--kb-gray-200)",padding:"1.25rem 2rem",position:"sticky",top:0,zIndex:50},children:u.jsx("h1",{style:{fontFamily:"var(--font-display)",fontSize:"1.5rem",color:"var(--kb-navy)",margin:0},children:e})}),u.jsx("div",{style:{padding:"2rem"},children:n})]}),u.jsx("style",{children:`
        @media (max-width: 768px) {
          aside {
            width: 100% !important;
            position: relative !important;
            display: none;
          }
          main {
            margin-left: 0 !important;
          }
        }
      `})]})}function u8(){const[n,e]=N.useState({totalCurrency:0,inCirculation:0,circulationValue:0,pendingExchanges:0,pendingValue:0,totalMembers:0,activeBusinesses:0,totalCheckins:0}),[t,r]=N.useState([]),[s,a]=N.useState({}),[l,f]=N.useState(!0);N.useEffect(()=>{async function m(){try{const g=await Ub(),v=g.filter(A=>A.status==="issued"||A.status==="active"),w={};v.forEach(A=>{const b=A.denomination||0;w[b]=(w[b]||0)+1}),a(w);const k=await No(),T=k.filter(A=>A.isActive),I=k.reduce((A,b)=>A+(b.checkinCount||0),0),C=bs(En(qe,"exchanges"),Bc("status","==","pending"),Is("createdAt","desc")),B=(await pr(C)).docs.map(A=>({id:A.id,...A.data()})),j=B.reduce((A,b)=>A+(b.kinderbucksAmount||0),0),Q=bs(En(qe,"exchanges"),Is("createdAt","desc"),Ay(5)),W=await pr(Q);r(W.docs.map(A=>({id:A.id,...A.data()})));const H=await pr(En(qe,"members"));e({totalCurrency:g.length,inCirculation:v.length,circulationValue:v.reduce((A,b)=>A+(b.denomination||0),0),pendingExchanges:B.length,pendingValue:j,totalMembers:H.size,activeBusinesses:T.length,totalCheckins:I}),f(!1)}catch(g){console.error("Error loading dashboard data:",g),f(!1)}}m()},[]);const d=({icon:m,label:g,value:v,subtext:w,color:k,to:T})=>u.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[u.jsxs("div",{children:[u.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem",marginBottom:"0.5rem"},children:g}),u.jsx("div",{style:{fontFamily:"var(--font-display)",fontSize:"2rem",fontWeight:"700",color:k||"var(--kb-navy)"},children:v}),w&&u.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem",marginTop:"0.25rem"},children:w})]}),u.jsx("div",{style:{width:"48px",height:"48px",background:`${k||"var(--kb-navy)"}15`,borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsx(m,{size:24,color:k||"var(--kb-navy)"})})]}),T&&u.jsx(me,{to:T,style:{display:"block",marginTop:"1rem",paddingTop:"1rem",borderTop:"1px solid var(--kb-gray-100)",color:"var(--kb-navy)",fontSize:"0.85rem",fontWeight:"500"},children:"View Details "})]});return l?u.jsx(Vn,{title:"Dashboard",children:u.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:u.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading dashboard..."})})}):u.jsxs(Vn,{title:"Dashboard",children:[u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[u.jsx(d,{icon:jy,label:"In Circulation",value:`$${n.circulationValue.toLocaleString()}`,subtext:`${n.inCirculation} bills issued`,color:"var(--kb-green)"}),u.jsx(d,{icon:qa,label:"Pending Exchanges",value:n.pendingExchanges,subtext:`$${n.pendingValue.toFixed(2)} value`,color:n.pendingExchanges>0?"#e67e22":"var(--kb-gray-400)",to:"/admin/exchanges"}),u.jsx(d,{icon:Si,label:"OK Members",value:n.totalMembers,subtext:`${n.totalCheckins} total check-ins`,color:"var(--kb-navy)",to:"/admin/members"}),u.jsx(d,{icon:on,label:"Active Businesses",value:n.activeBusinesses,color:"var(--kb-gold-dark)",to:"/admin/businesses"})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem"},children:[u.jsxs("div",{className:"card",children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[u.jsx("h3",{style:{color:"var(--kb-navy)",margin:0},children:"Recent Exchanges"}),u.jsx(me,{to:"/admin/exchanges",style:{fontSize:"0.85rem",color:"var(--kb-navy)"},children:"View All "})]}),t.length===0?u.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"No exchanges yet"}):u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:t.map(m=>{var g,v,w,k;return u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem",background:"var(--kb-gray-50)",borderRadius:"8px"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[m.status==="completed"?u.jsx(Cs,{size:18,color:"var(--kb-green)"}):m.status==="pending"?u.jsx(qa,{size:18,color:"#e67e22"}):u.jsx(Dy,{size:18,color:"var(--kb-gray-400)"}),u.jsxs("div",{children:[u.jsxs("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:["$",m.usdAmount,"  $",(g=m.kinderbucksAmount)==null?void 0:g.toFixed(2)," KB"]}),u.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:((k=(w=(v=m.createdAt)==null?void 0:v.toDate)==null?void 0:w.call(v))==null?void 0:k.toLocaleDateString())||"Pending"})]})]}),u.jsx("span",{className:"badge",style:{background:m.status==="completed"?"#d4edda":m.status==="pending"?"#fff3cd":"#f8f9fa",color:m.status==="completed"?"var(--kb-green)":m.status==="pending"?"#856404":"var(--kb-gray-600)"},children:m.status})]},m.id)})})]}),u.jsxs("div",{className:"card",children:[u.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem"},children:"Circulation by Denomination"}),Object.keys(s).length===0?u.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"No currency in circulation yet"}):u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[1,5,10,20].map(m=>{const g=s[m]||0,v=Math.max(...Object.values(s),1),w=g/v*100,k={1:"#27ae60",5:"#3498db",10:"#9b59b6",20:"#c9a227"};return u.jsxs("div",{children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[u.jsxs("span",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:["$",m]}),u.jsxs("span",{style:{color:"var(--kb-gray-500)"},children:[g," bills ($",g*m,")"]})]}),u.jsx("div",{style:{height:"8px",background:"var(--kb-gray-100)",borderRadius:"4px",overflow:"hidden"},children:u.jsx("div",{style:{width:`${w}%`,height:"100%",background:k[m],borderRadius:"4px",transition:"width 0.5s ease"}})})]},m)})})]})]}),u.jsxs("div",{className:"card",style:{marginTop:"1.5rem"},children:[u.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Quick Actions"}),u.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[u.jsxs(me,{to:"/admin/generate",className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(vs,{size:18})," Generate QR Codes"]}),u.jsxs(me,{to:"/admin/issue",className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(Ah,{size:18})," Issue Currency"]}),u.jsxs(me,{to:"/admin/exchanges",className:"btn btn-gold",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(cf,{size:18})," Process Exchanges"]})]})]})]})}function d8(){const[n,e]=N.useState({start:1,end:100}),[t,r]=N.useState(5),[s,a]=N.useState([]),[l,f]=N.useState(!1),[d,m]=N.useState(!1),g=()=>{const T=[];for(let I=n.start;I<=n.end;I++)T.push(`KB-${String(I).padStart(4,"0")}`);a(T),m(!1)},v=async()=>{f(!0);try{await Z6(s,t),m(!0)}catch(T){console.error("Error saving:",T),alert("Error saving to database")}f(!1)},w="https://harmonicsystems.github.io/kinderbucks/#/scan/",k={1:{bg:"rgba(39, 174, 96, 0.1)",text:"var(--kb-green)"},5:{bg:"rgba(52, 152, 219, 0.1)",text:"#3498db"},10:{bg:"rgba(155, 89, 182, 0.1)",text:"#9b59b6"},20:{bg:"rgba(201, 162, 39, 0.1)",text:"var(--kb-gold-dark)"}};return u.jsxs(Vn,{title:"Generate QR Codes",children:[u.jsxs("div",{className:"card",style:{marginBottom:"2rem"},children:[u.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(vs,{size:20})," Generation Settings"]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1.5rem",marginBottom:"1.5rem"},children:[u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Start Number"}),u.jsx("input",{type:"number",value:n.start,onChange:T=>e(I=>({...I,start:Number(T.target.value)})),min:1,max:9999,style:{width:"100%"}})]}),u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"End Number"}),u.jsx("input",{type:"number",value:n.end,onChange:T=>e(I=>({...I,end:Number(T.target.value)})),min:1,max:9999,style:{width:"100%"}})]}),u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Denomination"}),u.jsxs("select",{value:t,onChange:T=>r(Number(T.target.value)),style:{width:"100%"},children:[u.jsx("option",{value:1,children:"$1"}),u.jsx("option",{value:5,children:"$5"}),u.jsx("option",{value:10,children:"$10"}),u.jsx("option",{value:20,children:"$20"})]})]})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[u.jsxs("button",{className:"btn btn-primary",onClick:g,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(vs,{size:18})," Generate ",n.end-n.start+1," Codes"]}),u.jsxs("div",{style:{padding:"0.75rem 1rem",background:k[t].bg,borderRadius:"8px",color:k[t].text,fontWeight:"600"},children:["Total Value: $",(n.end-n.start+1)*t]})]})]}),s.length>0&&u.jsxs("div",{className:"card",children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[u.jsxs("div",{children:[u.jsxs("h3",{style:{color:"var(--kb-navy)",margin:0},children:["Generated: ",s.length," Kinderbucks"]}),u.jsxs("p",{style:{color:"var(--kb-gray-500)",margin:"0.25rem 0 0",fontSize:"0.9rem"},children:["$",t," denomination  Total value: $",s.length*t]})]}),u.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[d?u.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--kb-green)",fontWeight:"600"},children:[u.jsx(Cs,{size:18})," Saved!"]}):u.jsxs("button",{className:"btn btn-gold",onClick:v,disabled:l,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(gM,{size:18}),l?"Saving...":"Save to Database"]}),u.jsxs("button",{className:"btn btn-secondary",onClick:()=>window.print(),style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(dM,{size:18})," Print"]})]})]}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gap:"1.5rem"},children:s.slice(0,50).map(T=>u.jsxs("div",{style:{background:"var(--kb-white)",border:"1px solid var(--kb-gray-200)",borderRadius:"12px",padding:"1rem",textAlign:"center"},children:[u.jsx(qc,{value:`${w}${T}`,size:140,denomination:t}),u.jsx("p",{style:{fontFamily:"monospace",marginTop:"0.75rem",fontSize:"0.9rem",color:"var(--kb-navy)",fontWeight:"600"},children:T})]},T))}),s.length>50&&u.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"var(--kb-gray-50)",borderRadius:"8px",textAlign:"center",color:"var(--kb-gray-600)"},children:["Showing 50 of ",s.length," codes. All will be saved and printable."]})]}),s.length===0&&u.jsxs("div",{className:"card",style:{textAlign:"center",padding:"4rem 2rem"},children:[u.jsx(vs,{size:64,color:"var(--kb-gray-300)",style:{marginBottom:"1rem"}}),u.jsx("h3",{style:{color:"var(--kb-gray-500)",marginBottom:"0.5rem"},children:"No codes generated yet"}),u.jsx("p",{style:{color:"var(--kb-gray-400)"},children:"Set your range and denomination above, then click Generate."})]})]})}function h8(){const[n,e]=N.useState([]),[t,r]=N.useState(!0),[s,a]=N.useState([]),[l,f]=N.useState(""),[d,m]=N.useState(!1),[g,v]=N.useState(0),w=async()=>{const A=await Ub();e(A.filter(b=>b.status==="draft"||b.status==="issued")),r(!1)};N.useEffect(()=>{w()},[]);const k=A=>{a(b=>b.includes(A)?b.filter(P=>P!==A):[...b,A])},T=()=>{const A=O.map(b=>b.serial);a(A)},I=()=>{a([])},C=async()=>{if(s.length!==0){m(!0);try{for(const A of s)await e8(A,"issued",l);v(s.length),a([]),f(""),await w(),setTimeout(()=>v(0),3e3)}catch(A){console.error("Error issuing:",A),alert("Error issuing Kinderbucks")}m(!1)}},O=n.filter(A=>A.status==="draft"),B=n.filter(A=>A.status==="issued"),j=s.reduce((A,b)=>{const P=n.find(M=>M.serial===b);return A+((P==null?void 0:P.denomination)||0)},0),W=(A=>{const b={1:[],5:[],10:[],20:[]};return A.forEach(P=>{const M=P.denomination||5;b[M]&&b[M].push(P)}),b})(O),H={1:"#27ae60",5:"#3498db",10:"#9b59b6",20:"#c9a227"};return t?u.jsx(Vn,{title:"Issue Currency",children:u.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:u.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading..."})})}):u.jsxs(Vn,{title:"Issue Currency",children:[g>0&&u.jsxs("div",{style:{position:"fixed",top:"100px",right:"2rem",background:"var(--kb-green)",color:"white",padding:"1rem 1.5rem",borderRadius:"8px",display:"flex",alignItems:"center",gap:"0.75rem",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:1e3},children:[u.jsx(Cs,{size:20}),u.jsxs("span",{children:["Issued ",g," Kinderbucks successfully!"]})]}),u.jsxs("div",{className:"card",style:{marginBottom:"2rem"},children:[u.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(Ah,{size:20})," Issue to Circulation"]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:"1.5rem",alignItems:"end"},children:[u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Recipient (optional)"}),u.jsx("input",{type:"text",value:l,onChange:A=>f(A.target.value),placeholder:"Business name or exchange point",style:{width:"100%"}})]}),u.jsxs("button",{className:"btn btn-gold",onClick:C,disabled:s.length===0||d,style:{display:"flex",alignItems:"center",gap:"0.5rem",height:"42px"},children:[u.jsx(Ah,{size:18}),d?"Issuing...":`Issue ${s.length} Selected`]})]}),s.length>0&&u.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem 1rem",background:"var(--kb-gold)",borderRadius:"8px",color:"var(--kb-navy)",fontWeight:"500"},children:["Selected: ",s.length," bills  Total value: $",j]})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[u.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[u.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-gray-500)"},children:O.length}),u.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Available (Draft)"})]}),u.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[u.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-green)"},children:B.length}),u.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Already Issued"})]}),u.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[u.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:s.length}),u.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Selected"})]})]}),u.jsxs("div",{className:"card",children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[u.jsxs("h3",{style:{color:"var(--kb-navy)",margin:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(m_,{size:20})," Available to Issue (",O.length,")"]}),u.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[u.jsx("button",{className:"btn btn-secondary",onClick:T,style:{padding:"0.4rem 0.75rem",fontSize:"0.85rem"},children:"Select All"}),u.jsx("button",{className:"btn btn-secondary",onClick:I,style:{padding:"0.4rem 0.75rem",fontSize:"0.85rem"},children:"Clear"})]})]}),O.length===0?u.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[u.jsx(m_,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),u.jsx("p",{children:"No draft Kinderbucks available."}),u.jsx("p",{style:{fontSize:"0.9rem"},children:"Generate some QR codes first."})]}):u.jsx("div",{children:[1,5,10,20].map(A=>{const b=W[A];return b.length===0?null:u.jsxs("div",{style:{marginBottom:"1.5rem"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem"},children:[u.jsxs("div",{style:{width:"24px",height:"24px",background:H[A],borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"0.75rem",fontWeight:"600"},children:["$",A]}),u.jsxs("span",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:["$",A," Bills (",b.length,")"]}),u.jsx("button",{onClick:()=>{const P=b.map(L=>L.serial),M=P.every(L=>s.includes(L));a(M?L=>L.filter($=>!P.includes($)):L=>[...new Set([...L,...P])])},style:{background:"none",border:"none",color:H[A],cursor:"pointer",fontSize:"0.85rem"},children:b.every(P=>s.includes(P.serial))?"Deselect all":"Select all"})]}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))",gap:"0.5rem"},children:b.map(P=>{const M=s.includes(P.serial);return u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.6rem 0.75rem",background:M?`${H[A]}15`:"var(--kb-gray-50)",borderRadius:"6px",cursor:"pointer",border:M?`2px solid ${H[A]}`:"2px solid transparent",transition:"all 0.15s"},children:[M?u.jsx(IM,{size:18,color:H[A]}):u.jsx(AM,{size:18,color:"var(--kb-gray-400)"}),u.jsx("input",{type:"checkbox",checked:M,onChange:()=>k(P.serial),style:{display:"none"}}),u.jsx("span",{style:{fontFamily:"monospace",fontSize:"0.85rem",color:M?H[A]:"var(--kb-gray-600)",fontWeight:M?"600":"400"},children:P.serial})]},P.serial)})})]},A)})})]})]})}const f8=[{code:"AVIARY",name:"The Aviary",category:"food"},{code:"MORNINGBIRD",name:"Morningbird Cafe",category:"food"},{code:"SAISONNIER",name:"Saisonnier",category:"food"},{code:"BROADST-BAGEL",name:"Broad Street Bagel Co.",category:"food"},{code:"BROOKLYN-PIZZA",name:"The Brooklyn Pizzeria",category:"food"},{code:"ISOLA",name:"Isola Wine Bar",category:"food"},{code:"HAMRAHS",name:"Hamrah's Lebanese Foods",category:"food"},{code:"OK-PANTRY",name:"OK Pantry",category:"retail"},{code:"BOTTLE-SHOP",name:"Kinderhook Bottle Shop",category:"retail"},{code:"BOOKS",name:"Kinderhook Books",category:"retail"},{code:"SAMASCOTTS",name:"Samascott's Garden Market",category:"retail"},{code:"SCHOOL-GALLERY",name:"The School | Jack Shainman Gallery",category:"arts"},{code:"SEPTEMBER",name:"September Gallery",category:"arts"},{code:"OLD-DUTCH",name:"Old Dutch Inn",category:"services"},{code:"MUSE",name:"Muse Aesthetics",category:"services"},{code:"PILATES",name:"Julia Jayne Pilates",category:"services"},{code:"HISTORICAL",name:"Columbia County Historical Society",category:"arts"}],_m={food:{label:"Food & Drink",Icon:Kk,color:"#e74c3c"},retail:{label:"Retail",Icon:Wk,color:"#9b59b6"},services:{label:"Services",Icon:Lk,color:"#3498db"},arts:{label:"Arts & Culture",Icon:$k,color:"#1abc9c"}};function p8(){const[n,e]=N.useState([]),[t,r]=N.useState(!0),[s,a]=N.useState({code:"",name:"",category:"food"}),[l,f]=N.useState(!1),[d,m]=N.useState(null),[g,v]=N.useState(!1),[w,k]=N.useState(null),T=async()=>{const W=await No();e(W),r(!1)};N.useEffect(()=>{T()},[]);const I=async W=>{if(W.preventDefault(),!(!s.code||!s.name)){f(!0);try{await Dw(s.code.toUpperCase(),s.name,s.category),a({code:"",name:"",category:"food"}),await T()}catch(H){console.error("Error creating business:",H),alert("Error creating business")}f(!1)}},C=async(W,H)=>{await U6(W,!H),await T()},O=async()=>{if(confirm("This will add all Kinderhook businesses. Continue?")){v(!0);try{for(const W of f8)n.find(A=>A.code===W.code)||await Dw(W.code,W.name,W.category);await T(),alert("Businesses seeded successfully!")}catch(W){console.error("Error seeding:",W),alert("Error seeding businesses")}v(!1)}},B=W=>{navigator.clipboard.writeText(W),k(W),setTimeout(()=>k(null),2e3)},j="https://harmonicsystems.github.io/kinderbucks/#/checkin/",Q={total:n.length,active:n.filter(W=>W.isActive).length,totalCheckins:n.reduce((W,H)=>W+(H.checkinCount||0),0)};return t?u.jsx(Vn,{title:"Business Directory",children:u.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:u.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading..."})})}):u.jsxs(Vn,{title:"Business Directory",children:[u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[u.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[u.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:Q.total}),u.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Businesses"})]}),u.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[u.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-green)"},children:Q.active}),u.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Active"})]}),u.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[u.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-gold-dark)"},children:Q.totalCheckins}),u.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Check-ins"})]})]}),u.jsxs("div",{className:"card",style:{marginBottom:"2rem"},children:[u.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(g_,{size:20})," Add Business"]}),u.jsxs("form",{onSubmit:I,children:[u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1.5rem",marginBottom:"1.5rem"},children:[u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Code"}),u.jsx("input",{type:"text",value:s.code,onChange:W=>a(H=>({...H,code:W.target.value.toUpperCase().replace(/[^A-Z0-9-]/g,"")})),placeholder:"CAFE-01",style:{width:"100%",fontFamily:"monospace"}})]}),u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Name"}),u.jsx("input",{type:"text",value:s.name,onChange:W=>a(H=>({...H,name:W.target.value})),placeholder:"Village Caf",style:{width:"100%"}})]}),u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Category"}),u.jsx("select",{value:s.category,onChange:W=>a(H=>({...H,category:W.target.value})),style:{width:"100%"},children:Object.entries(_m).map(([W,H])=>u.jsx("option",{value:W,children:H.label},W))})]})]}),u.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[u.jsxs("button",{type:"submit",className:"btn btn-primary",disabled:l||!s.code||!s.name,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(g_,{size:18})," ",l?"Adding...":"Add Business"]}),u.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:O,disabled:g,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(zk,{size:18})," ",g?"Seeding...":"Seed Kinderhook Businesses"]})]})]})]}),u.jsxs("div",{className:"card",children:[u.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(on,{size:20})," Participating Businesses (",n.length,")"]}),n.length===0?u.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[u.jsx(on,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),u.jsx("p",{children:"No businesses yet. Add one above or seed the Kinderhook businesses."})]}):u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:n.map(W=>{const H=_m[W.category]||_m.services,A=H.Icon,b=`${j}${W.code}`;return u.jsxs("div",{style:{background:W.isActive?"var(--kb-white)":"var(--kb-gray-50)",border:`1px solid ${W.isActive,"var(--kb-gray-200)"}`,borderRadius:"12px",padding:"1.25rem",opacity:W.isActive?1:.7},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"1rem"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[u.jsx("div",{style:{width:"48px",height:"48px",background:`${H.color}15`,borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsx(A,{size:24,color:H.color})}),u.jsxs("div",{children:[u.jsx("div",{style:{fontWeight:"600",color:W.isActive?"var(--kb-navy)":"var(--kb-gray-500)",fontSize:"1.1rem"},children:W.name}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginTop:"0.25rem"},children:[u.jsx("span",{style:{fontFamily:"monospace",fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:W.code}),u.jsx("span",{style:{fontSize:"0.85rem",color:H.color},children:H.label})]})]})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1.5rem"},children:[u.jsxs("div",{style:{textAlign:"center"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"var(--kb-green)",fontWeight:"600"},children:[u.jsx(fu,{size:16}),W.checkinCount||0]}),u.jsx("div",{style:{fontSize:"0.75rem",color:"var(--kb-gray-500)"},children:"check-ins"})]}),u.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[u.jsx("button",{onClick:()=>m(d===W.code?null:W.code),className:"btn btn-secondary",style:{padding:"0.5rem 0.75rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:u.jsx(vs,{size:16})}),u.jsxs("button",{onClick:()=>C(W.code,W.isActive),className:"btn",style:{padding:"0.5rem 0.75rem",background:W.isActive?"#e74c3c":"var(--kb-green)",color:"white",display:"flex",alignItems:"center",gap:"0.25rem"},children:[W.isActive?u.jsx(MM,{size:16}):u.jsx(DM,{size:16}),W.isActive?"Deactivate":"Activate"]})]})]})]}),d===W.code&&u.jsxs("div",{style:{marginTop:"1.5rem",paddingTop:"1.5rem",borderTop:"1px solid var(--kb-gray-200)",display:"flex",alignItems:"center",gap:"2rem",flexWrap:"wrap"},children:[u.jsx("div",{style:{textAlign:"center"},children:u.jsx(qc,{value:b,size:150,denomination:5,showFrame:!1})}),u.jsxs("div",{style:{flex:1,minWidth:"200px"},children:[u.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontSize:"0.85rem"},children:"Check-in URL"}),u.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[u.jsx("input",{type:"text",value:b,readOnly:!0,style:{flex:1,fontFamily:"monospace",fontSize:"0.85rem"}}),u.jsxs("button",{onClick:()=>B(b),className:"btn btn-secondary",style:{padding:"0.5rem 0.75rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:[u.jsx(Bk,{size:16}),w===b?"Copied!":"Copy"]})]}),u.jsx("p",{style:{marginTop:"0.75rem",fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Print this QR code and display it at the counter for customers to scan when they visit."})]})]})]},W.code)})})]})]})}const m8={curious:fn,hooked:Kr,lineAndSinker:Ms,patron:Xn};function g8(){const[n,e]=N.useState([]),[t,r]=N.useState(!0),[s,a]=N.useState("all"),[l,f]=N.useState(null),d=async()=>{try{const T=bs(En(qe,"exchanges"),Is("createdAt","desc")),I=await pr(T);e(I.docs.map(C=>({id:C.id,...C.data()}))),r(!1)}catch(T){console.error("Error loading exchanges:",T),r(!1)}};N.useEffect(()=>{d()},[]);const m=async(T,I)=>{f(T);try{await Gr(zt(qe,"exchanges",T),{status:I,processedAt:Vt()}),await d()}catch(C){console.error("Error updating exchange:",C),alert("Error updating exchange status")}f(null)},g=s==="all"?n:n.filter(T=>T.status===s),v={total:n.length,pending:n.filter(T=>T.status==="pending").length,completed:n.filter(T=>T.status==="completed").length,cancelled:n.filter(T=>T.status==="cancelled").length,totalValue:n.filter(T=>T.status==="completed").reduce((T,I)=>T+(I.kinderbucksAmount||0),0)},w=T=>{switch(T){case"completed":return u.jsx(Cs,{size:18,color:"var(--kb-green)"});case"pending":return u.jsx(qa,{size:18,color:"#e67e22"});case"cancelled":return u.jsx(PV,{size:18,color:"#e74c3c"});default:return u.jsx(Dy,{size:18,color:"var(--kb-gray-400)"})}},k=T=>{switch(T){case"completed":return{background:"#d4edda",color:"var(--kb-green)"};case"pending":return{background:"#fff3cd",color:"#856404"};case"cancelled":return{background:"#f8d7da",color:"#721c24"};default:return{background:"#f8f9fa",color:"var(--kb-gray-600)"}}};return t?u.jsx(Vn,{title:"Exchange Management",children:u.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:u.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading exchanges..."})})}):u.jsxs(Vn,{title:"Exchange Management",children:[u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[u.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[u.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"#e67e22"},children:v.pending}),u.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Pending"})]}),u.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[u.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-green)"},children:v.completed}),u.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Completed"})]}),u.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[u.jsxs("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-gold-dark)"},children:["$",v.totalValue.toFixed(0)]}),u.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Exchanged"})]})]}),u.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem",flexWrap:"wrap"},children:[{value:"all",label:`All (${v.total})`},{value:"pending",label:`Pending (${v.pending})`},{value:"completed",label:`Completed (${v.completed})`},{value:"cancelled",label:`Cancelled (${v.cancelled})`}].map(T=>u.jsx("button",{onClick:()=>a(T.value),className:s===T.value?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem"},children:T.label},T.value))}),u.jsx("div",{className:"card",children:g.length===0?u.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[u.jsx(cf,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),u.jsxs("p",{children:["No ",s!=="all"?s:""," exchanges found"]})]}):u.jsxs("div",{children:[u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 150px",gap:"1rem",padding:"0.75rem 1rem",borderBottom:"2px solid var(--kb-navy)",fontWeight:"600",color:"var(--kb-navy)",fontSize:"0.85rem"},children:[u.jsx("div",{children:"Date"}),u.jsx("div",{children:"Amount"}),u.jsx("div",{children:"Tier & Bonus"}),u.jsx("div",{children:"Status"}),u.jsx("div",{children:"Actions"})]}),g.map(T=>{var C,O,B,j,Q,W,H;const I=m8[T.tier]||fn;return u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 150px",gap:"1rem",padding:"1rem",borderBottom:"1px solid var(--kb-gray-100)",alignItems:"center",background:T.status==="pending"?"rgba(230, 126, 34, 0.05)":"transparent"},children:[u.jsxs("div",{children:[u.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:((B=(O=(C=T.createdAt)==null?void 0:C.toDate)==null?void 0:O.call(C))==null?void 0:B.toLocaleDateString())||"Unknown"}),u.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:((W=(Q=(j=T.createdAt)==null?void 0:j.toDate)==null?void 0:Q.call(j))==null?void 0:W.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))||""})]}),u.jsxs("div",{children:[u.jsxs("div",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:["$",T.usdAmount," USD"]}),u.jsxs("div",{style:{fontSize:"0.9rem",color:"var(--kb-gold-dark)"},children:[" $",(H=T.kinderbucksAmount)==null?void 0:H.toFixed(2)," KB"]})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(I,{size:18,color:"var(--kb-gray-500)"}),u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:"0.9rem",color:"var(--kb-gray-700)",textTransform:"capitalize"},children:T.tier||"curious"}),u.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--kb-green)"},children:["+",Math.round((T.bonusRate||.1)*100),"% bonus"]})]})]}),u.jsx("div",{children:u.jsxs("span",{className:"badge",style:{...k(T.status),display:"inline-flex",alignItems:"center",gap:"0.25rem"},children:[w(T.status),T.status]})}),u.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[T.status==="pending"&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>m(T.id,"completed"),disabled:l===T.id,className:"btn btn-primary",style:{padding:"0.4rem 0.75rem",fontSize:"0.8rem"},children:l===T.id?"...":"Approve"}),u.jsx("button",{onClick:()=>m(T.id,"cancelled"),disabled:l===T.id,className:"btn btn-secondary",style:{padding:"0.4rem 0.75rem",fontSize:"0.8rem"},children:"Cancel"})]}),T.status==="completed"&&u.jsx("span",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Processed"}),T.status==="cancelled"&&u.jsx("button",{onClick:()=>m(T.id,"pending"),disabled:l===T.id,className:"btn btn-secondary",style:{padding:"0.4rem 0.75rem",fontSize:"0.8rem"},children:"Reopen"})]})]},T.id)})]})})]})}const wm={curious:fn,hooked:Kr,lineAndSinker:Ms,patron:Xn},Em={curious:"#888888",hooked:"#2e7d32",lineAndSinker:"#1565c0",patron:"#c9a227"};function y8(){const[n,e]=N.useState([]),[t,r]=N.useState([]),[s,a]=N.useState(!0),[l,f]=N.useState("checkins"),[d,m]=N.useState("all");N.useEffect(()=>{async function T(){try{const C=(await pr(En(qe,"members"))).docs.map(B=>({id:B.id,...B.data()})),O=await No();e(C),r(O),a(!1)}catch(I){console.error("Error loading members:",I),a(!1)}}T()},[]);const g=T=>{const I=t.find(C=>C.code===T);return I?I.name:T},v=[...n].sort((T,I)=>{var C,O,B,j,Q,W;switch(l){case"checkins":return(I.totalCheckins||0)-(T.totalCheckins||0);case"businesses":return(((C=I.businessesVisited)==null?void 0:C.length)||0)-(((O=T.businessesVisited)==null?void 0:O.length)||0);case"recent":const H=((j=(B=T.lastCheckin)==null?void 0:B.toDate)==null?void 0:j.call(B))||new Date(0);return(((W=(Q=I.lastCheckin)==null?void 0:Q.toDate)==null?void 0:W.call(Q))||new Date(0))-H;default:return 0}}),w=d==="all"?v:v.filter(T=>T.tier===d),k={total:n.length,curious:n.filter(T=>T.tier==="curious").length,hooked:n.filter(T=>T.tier==="hooked").length,lineAndSinker:n.filter(T=>T.tier==="lineAndSinker").length,patron:n.filter(T=>T.tier==="patron").length,totalCheckins:n.reduce((T,I)=>T+(I.totalCheckins||0),0)};return s?u.jsx(Vn,{title:"Member Management",children:u.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:u.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading members..."})})}):u.jsxs(Vn,{title:"Member Management",children:[u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(130px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[u.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[u.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:k.total}),u.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Members"})]}),Object.entries(wm).map(([T,I])=>{var C;return u.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[u.jsx(I,{size:20,color:Em[T]}),u.jsx("span",{style:{fontSize:"1.5rem",fontWeight:"700",color:Em[T]},children:k[T]})]}),u.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)",textTransform:"capitalize"},children:((C=$r[T])==null?void 0:C.name)||T})]},T)})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[u.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[u.jsx("button",{onClick:()=>m("all"),className:d==="all"?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem"},children:"All"}),Object.entries(wm).map(([T,I])=>u.jsx("button",{onClick:()=>m(T),className:d===T?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:u.jsx(I,{size:16})},T))]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("span",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"Sort by:"}),u.jsxs("select",{value:l,onChange:T=>f(T.target.value),style:{padding:"0.5rem"},children:[u.jsx("option",{value:"checkins",children:"Most Check-ins"}),u.jsx("option",{value:"businesses",children:"Most Businesses"}),u.jsx("option",{value:"recent",children:"Recent Activity"})]})]})]}),u.jsx("div",{className:"card",children:w.length===0?u.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[u.jsx(Si,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),u.jsx("p",{children:"No members found"})]}):u.jsxs("div",{children:[u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 2fr",gap:"1rem",padding:"0.75rem 1rem",borderBottom:"2px solid var(--kb-navy)",fontWeight:"600",color:"var(--kb-navy)",fontSize:"0.85rem"},children:[u.jsx("div",{children:"Member"}),u.jsx("div",{children:"Tier"}),u.jsx("div",{children:"Activity"}),u.jsx("div",{children:"Businesses Visited"})]}),w.map(T=>{var j,Q,W,H,A;const I=wm[T.tier]||fn,C=Em[T.tier]||"#888",O=$r[T.tier]||$r.curious,B=((j=T.businessesVisited)==null?void 0:j.length)||0;return u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 2fr",gap:"1rem",padding:"1rem",borderBottom:"1px solid var(--kb-gray-100)",alignItems:"center"},children:[u.jsxs("div",{children:[u.jsxs("div",{style:{fontFamily:"monospace",fontSize:"0.85rem",color:"var(--kb-gray-500)",wordBreak:"break-all"},children:[T.id.substring(0,16),"..."]}),T.lastCheckin&&u.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-400)",display:"flex",alignItems:"center",gap:"0.25rem",marginTop:"0.25rem"},children:[u.jsx(Ny,{size:12}),"Last: ",((H=(W=(Q=T.lastCheckin)==null?void 0:Q.toDate)==null?void 0:W.call(Q))==null?void 0:H.toLocaleDateString())||"Unknown"]})]}),u.jsxs("div",{children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:C,fontWeight:"600"},children:[u.jsx(I,{size:20}),O.name]}),u.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:[Math.round(O.bonus*100),"% bonus"]})]}),u.jsxs("div",{children:[u.jsxs("div",{style:{fontWeight:"600",color:"var(--kb-navy)",display:"flex",alignItems:"center",gap:"0.25rem"},children:[u.jsx(fu,{size:16}),T.totalCheckins||0]}),u.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:"check-ins"})]}),u.jsxs("div",{children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",marginBottom:"0.5rem",color:"var(--kb-gray-600)"},children:[u.jsx(ih,{size:14}),u.jsx("span",{style:{fontWeight:"500"},children:B}),u.jsx("span",{style:{fontSize:"0.85rem"},children:"businesses"})]}),((A=T.businessesVisited)==null?void 0:A.length)>0&&u.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.25rem"},children:[T.businessesVisited.slice(0,3).map(b=>u.jsx("span",{style:{fontSize:"0.75rem",padding:"0.15rem 0.5rem",background:"var(--kb-gray-100)",borderRadius:"4px",color:"var(--kb-gray-600)"},children:g(b)},b)),T.businessesVisited.length>3&&u.jsxs("span",{style:{fontSize:"0.75rem",color:"var(--kb-gray-400)"},children:["+",T.businessesVisited.length-3," more"]})]})]})]},T.id)})]})}),u.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"var(--kb-gray-50)",borderRadius:"8px",textAlign:"center",color:"var(--kb-gray-600)",fontSize:"0.9rem"},children:["Total of ",u.jsx("strong",{children:k.totalCheckins})," check-ins across ",u.jsx("strong",{children:k.total})," members"]})]})}const Tm={admin:{label:"Admin",color:"#dc2626",bgColor:"#fef2f2",Icon:Rh,description:"Full system access"},business:{label:"Business",color:"#2563eb",bgColor:"#eff6ff",Icon:on,description:"Business owner access"},member:{label:"Member",color:"var(--kb-green)",bgColor:"#f0fdf4",Icon:kc,description:"Regular member"}};function v8(){const[n,e]=N.useState([]),[t,r]=N.useState([]),[s,a]=N.useState(!0),[l,f]=N.useState(""),[d,m]=N.useState("all"),[g,v]=N.useState(null),[w,k]=N.useState(null),[T,I]=N.useState(""),C=async()=>{const[H,A]=await Promise.all([hV(),No()]);e(H),r(A),a(!1)};N.useEffect(()=>{C()},[]);const O=async(H,A)=>{try{await uV(H,A),I("Role updated successfully"),setTimeout(()=>I(""),3e3),await C(),v(null)}catch(b){console.error("Error updating role:",b),alert("Error updating role")}},B=async(H,A)=>{try{await dV(H,A),I("Business assigned successfully"),setTimeout(()=>I(""),3e3),await C(),k(null)}catch(b){console.error("Error assigning business:",b),alert("Error assigning business")}},j=n.filter(H=>{var P,M;const A=((P=H.email)==null?void 0:P.toLowerCase().includes(l.toLowerCase()))||((M=H.displayName)==null?void 0:M.toLowerCase().includes(l.toLowerCase())),b=d==="all"||H.role===d;return A&&b}),Q={total:n.length,admins:n.filter(H=>H.role==="admin").length,businesses:n.filter(H=>H.role==="business").length,members:n.filter(H=>H.role==="member").length},W=H=>H?(H.toDate?H.toDate():new Date(H)).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Never";return s?u.jsx(Vn,{title:"User Management",children:u.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:u.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading..."})})}):u.jsxs(Vn,{title:"User Management",children:[T&&u.jsxs("div",{style:{position:"fixed",top:"100px",right:"2rem",background:"var(--kb-green)",color:"white",padding:"1rem 1.5rem",borderRadius:"8px",display:"flex",alignItems:"center",gap:"0.75rem",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:1e3},children:[u.jsx(Cs,{size:20}),u.jsx("span",{children:T})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[u.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[u.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:Q.total}),u.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Users"})]}),u.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[u.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"#dc2626"},children:Q.admins}),u.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Admins"})]}),u.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[u.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"#2563eb"},children:Q.businesses}),u.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Businesses"})]}),u.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[u.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-green)"},children:Q.members}),u.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Members"})]})]}),u.jsx("div",{className:"card",style:{marginBottom:"2rem"},children:u.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap",alignItems:"center"},children:[u.jsxs("div",{style:{flex:1,minWidth:"200px",position:"relative"},children:[u.jsx(vM,{size:18,color:"var(--kb-gray-400)",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)"}}),u.jsx("input",{type:"text",placeholder:"Search by name or email...",value:l,onChange:H=>f(H.target.value),style:{width:"100%",paddingLeft:"40px"}})]}),u.jsxs("select",{value:d,onChange:H=>m(H.target.value),style:{minWidth:"150px"},children:[u.jsx("option",{value:"all",children:"All Roles"}),u.jsx("option",{value:"admin",children:"Admins"}),u.jsx("option",{value:"business",children:"Businesses"}),u.jsx("option",{value:"member",children:"Members"})]})]})}),u.jsxs("div",{className:"card",children:[u.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(Si,{size:20})," All Users (",j.length,")"]}),j.length===0?u.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[u.jsx(Si,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),u.jsx("p",{children:"No users found"})]}):u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:j.map(H=>{const A=Tm[H.role]||Tm.member,b=A.Icon;return u.jsx("div",{style:{background:"var(--kb-gray-50)",border:"1px solid var(--kb-gray-200)",borderRadius:"12px",padding:"1.25rem"},children:u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"1rem"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[u.jsx("div",{style:{width:"48px",height:"48px",background:A.bgColor,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsx(b,{size:24,color:A.color})}),u.jsxs("div",{children:[u.jsxs("div",{style:{fontWeight:"600",color:"var(--kb-navy)",fontSize:"1.05rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[H.displayName||"Unnamed User",H.role==="admin"&&u.jsx(Xn,{size:16,color:"#c9a227"})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:[u.jsx(Uk,{size:14}),H.email]}),H.businessCode&&u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#2563eb",fontSize:"0.85rem",marginTop:"0.25rem"},children:[u.jsx(on,{size:14}),H.businessCode]})]})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[u.jsx("div",{style:{padding:"0.4rem 0.8rem",background:A.bgColor,color:A.color,borderRadius:"6px",fontSize:"0.85rem",fontWeight:"600"},children:A.label}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:[u.jsx(Ny,{size:14}),W(H.lastLogin)]}),u.jsxs("div",{style:{position:"relative"},children:[u.jsx("button",{onClick:()=>v(g===H.id?null:H.id),className:"btn btn-secondary",style:{padding:"0.5rem"},children:u.jsx(UV,{size:18})}),g===H.id&&u.jsxs("div",{style:{position:"absolute",right:0,top:"100%",marginTop:"0.5rem",background:"white",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:100,minWidth:"180px",overflow:"hidden"},children:[u.jsx("div",{style:{padding:"0.75rem",borderBottom:"1px solid var(--kb-gray-200)"},children:u.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)",marginBottom:"0.25rem"},children:"Change Role"})}),Object.entries(Tm).map(([P,M])=>u.jsxs("button",{onClick:()=>O(H.id,P),style:{display:"flex",alignItems:"center",gap:"0.5rem",width:"100%",padding:"0.75rem 1rem",border:"none",background:H.role===P?M.bgColor:"transparent",color:"var(--kb-gray-700)",cursor:"pointer",textAlign:"left"},children:[u.jsx(M.Icon,{size:16,color:M.color}),M.label,H.role===P&&u.jsx(Cs,{size:14,color:M.color,style:{marginLeft:"auto"}})]},P)),H.role==="business"&&u.jsxs(u.Fragment,{children:[u.jsx("div",{style:{borderTop:"1px solid var(--kb-gray-200)"}}),u.jsxs("button",{onClick:()=>{v(null),k(H.id)},style:{display:"flex",alignItems:"center",gap:"0.5rem",width:"100%",padding:"0.75rem 1rem",border:"none",background:"transparent",color:"#2563eb",cursor:"pointer",textAlign:"left"},children:[u.jsx(on,{size:16}),"Assign Business"]})]})]})]})]})]})},H.id)})})]}),w&&u.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:1e3},children:u.jsxs("div",{className:"card",style:{maxWidth:"400px",width:"100%",padding:"1.5rem"},children:[u.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Assign Business"}),u.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1rem"},children:"Select a business to assign to this user:"}),u.jsx("div",{style:{maxHeight:"300px",overflowY:"auto",marginBottom:"1rem"},children:t.map(H=>u.jsxs("button",{onClick:()=>B(w,H.code),style:{display:"flex",alignItems:"center",gap:"0.75rem",width:"100%",padding:"0.75rem",border:"1px solid var(--kb-gray-200)",borderRadius:"8px",background:"white",cursor:"pointer",marginBottom:"0.5rem",textAlign:"left"},children:[u.jsx(on,{size:18,color:"var(--kb-navy)"}),u.jsxs("div",{children:[u.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:H.name}),u.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:H.code})]})]},H.code))}),u.jsx("button",{onClick:()=>k(null),className:"btn btn-secondary",style:{width:"100%"},children:"Cancel"})]})})]})}function x8(){return u.jsx(pV,{children:u.jsx(IC,{children:u.jsxs(rC,{children:[u.jsx(Pt,{path:"/",element:u.jsx(S6,{})}),u.jsx(Pt,{path:"/about",element:u.jsx(O6,{})}),u.jsx(Pt,{path:"/benefits",element:u.jsx(B6,{})}),u.jsx(Pt,{path:"/businesses",element:u.jsx($6,{})}),u.jsx(Pt,{path:"/exchange",element:u.jsx(K6,{})}),u.jsx(Pt,{path:"/login",element:u.jsx(Y6,{})}),u.jsx(Pt,{path:"/account",element:u.jsx(q6,{})}),u.jsx(Pt,{path:"/profile",element:u.jsx(Q6,{})}),u.jsx(Pt,{path:"/scan/:serial",element:u.jsx(r8,{})}),u.jsx(Pt,{path:"/checkin/:businessCode",element:u.jsx(l8,{})}),u.jsx(Pt,{path:"/business/dashboard",element:u.jsx(os,{allowedRoles:["business","admin"],children:u.jsx(c8,{})})}),u.jsx(Pt,{path:"/admin/dashboard",element:u.jsx(os,{allowedRoles:["admin"],children:u.jsx(u8,{})})}),u.jsx(Pt,{path:"/admin/exchanges",element:u.jsx(os,{allowedRoles:["admin"],children:u.jsx(g8,{})})}),u.jsx(Pt,{path:"/admin/members",element:u.jsx(os,{allowedRoles:["admin"],children:u.jsx(y8,{})})}),u.jsx(Pt,{path:"/admin/generate",element:u.jsx(os,{allowedRoles:["admin"],children:u.jsx(d8,{})})}),u.jsx(Pt,{path:"/admin/issue",element:u.jsx(os,{allowedRoles:["admin"],children:u.jsx(h8,{})})}),u.jsx(Pt,{path:"/admin/businesses",element:u.jsx(os,{allowedRoles:["admin"],children:u.jsx(p8,{})})}),u.jsx(Pt,{path:"/admin/users",element:u.jsx(os,{allowedRoles:["admin"],children:u.jsx(v8,{})})})]})})})}s2.createRoot(document.getElementById("root")).render(u.jsx(N.StrictMode,{children:u.jsx(x8,{})}));
