(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();function zI(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var lp={exports:{}},kc={},cp={exports:{}},Be={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z1;function FI(){if(Z1)return Be;Z1=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function x(H){return H===null||typeof H!="object"?null:(H=y&&H[y]||H["@@iterator"],typeof H=="function"?H:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,S={};function I(H,te,Re){this.props=H,this.context=te,this.refs=S,this.updater=Re||E}I.prototype.isReactComponent={},I.prototype.setState=function(H,te){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,te,"setState")},I.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function N(){}N.prototype=I.prototype;function V(H,te,Re){this.props=H,this.context=te,this.refs=S,this.updater=Re||E}var P=V.prototype=new N;P.constructor=V,k(P,I.prototype),P.isPureReactComponent=!0;var K=Array.isArray,z=Object.prototype.hasOwnProperty,W={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function C(H,te,Re){var Ce,Ve={},Oe=null,Qe=null;if(te!=null)for(Ce in te.ref!==void 0&&(Qe=te.ref),te.key!==void 0&&(Oe=""+te.key),te)z.call(te,Ce)&&!A.hasOwnProperty(Ce)&&(Ve[Ce]=te[Ce]);var $e=arguments.length-2;if($e===1)Ve.children=Re;else if(1<$e){for(var et=Array($e),Yt=0;Yt<$e;Yt++)et[Yt]=arguments[Yt+2];Ve.children=et}if(H&&H.defaultProps)for(Ce in $e=H.defaultProps,$e)Ve[Ce]===void 0&&(Ve[Ce]=$e[Ce]);return{$$typeof:n,type:H,key:Oe,ref:Qe,props:Ve,_owner:W.current}}function M(H,te){return{$$typeof:n,type:H.type,key:te,ref:H.ref,props:H.props,_owner:H._owner}}function O(H){return typeof H=="object"&&H!==null&&H.$$typeof===n}function B(H){var te={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(Re){return te[Re]})}var U=/\/+/g;function L(H,te){return typeof H=="object"&&H!==null&&H.key!=null?B(""+H.key):te.toString(36)}function De(H,te,Re,Ce,Ve){var Oe=typeof H;(Oe==="undefined"||Oe==="boolean")&&(H=null);var Qe=!1;if(H===null)Qe=!0;else switch(Oe){case"string":case"number":Qe=!0;break;case"object":switch(H.$$typeof){case n:case e:Qe=!0}}if(Qe)return Qe=H,Ve=Ve(Qe),H=Ce===""?"."+L(Qe,0):Ce,K(Ve)?(Re="",H!=null&&(Re=H.replace(U,"$&/")+"/"),De(Ve,te,Re,"",function(Yt){return Yt})):Ve!=null&&(O(Ve)&&(Ve=M(Ve,Re+(!Ve.key||Qe&&Qe.key===Ve.key?"":(""+Ve.key).replace(U,"$&/")+"/")+H)),te.push(Ve)),1;if(Qe=0,Ce=Ce===""?".":Ce+":",K(H))for(var $e=0;$e<H.length;$e++){Oe=H[$e];var et=Ce+L(Oe,$e);Qe+=De(Oe,te,Re,et,Ve)}else if(et=x(H),typeof et=="function")for(H=et.call(H),$e=0;!(Oe=H.next()).done;)Oe=Oe.value,et=Ce+L(Oe,$e++),Qe+=De(Oe,te,Re,et,Ve);else if(Oe==="object")throw te=String(H),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.");return Qe}function Ke(H,te,Re){if(H==null)return H;var Ce=[],Ve=0;return De(H,Ce,"","",function(Oe){return te.call(Re,Oe,Ve++)}),Ce}function pt(H){if(H._status===-1){var te=H._result;te=te(),te.then(function(Re){(H._status===0||H._status===-1)&&(H._status=1,H._result=Re)},function(Re){(H._status===0||H._status===-1)&&(H._status=2,H._result=Re)}),H._status===-1&&(H._status=0,H._result=te)}if(H._status===1)return H._result.default;throw H._result}var Ee={current:null},ie={transition:null},me={ReactCurrentDispatcher:Ee,ReactCurrentBatchConfig:ie,ReactCurrentOwner:W};function le(){throw Error("act(...) is not supported in production builds of React.")}return Be.Children={map:Ke,forEach:function(H,te,Re){Ke(H,function(){te.apply(this,arguments)},Re)},count:function(H){var te=0;return Ke(H,function(){te++}),te},toArray:function(H){return Ke(H,function(te){return te})||[]},only:function(H){if(!O(H))throw Error("React.Children.only expected to receive a single React element child.");return H}},Be.Component=I,Be.Fragment=t,Be.Profiler=s,Be.PureComponent=V,Be.StrictMode=r,Be.Suspense=d,Be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=me,Be.act=le,Be.cloneElement=function(H,te,Re){if(H==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+H+".");var Ce=k({},H.props),Ve=H.key,Oe=H.ref,Qe=H._owner;if(te!=null){if(te.ref!==void 0&&(Oe=te.ref,Qe=W.current),te.key!==void 0&&(Ve=""+te.key),H.type&&H.type.defaultProps)var $e=H.type.defaultProps;for(et in te)z.call(te,et)&&!A.hasOwnProperty(et)&&(Ce[et]=te[et]===void 0&&$e!==void 0?$e[et]:te[et])}var et=arguments.length-2;if(et===1)Ce.children=Re;else if(1<et){$e=Array(et);for(var Yt=0;Yt<et;Yt++)$e[Yt]=arguments[Yt+2];Ce.children=$e}return{$$typeof:n,type:H.type,key:Ve,ref:Oe,props:Ce,_owner:Qe}},Be.createContext=function(H){return H={$$typeof:c,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},H.Provider={$$typeof:l,_context:H},H.Consumer=H},Be.createElement=C,Be.createFactory=function(H){var te=C.bind(null,H);return te.type=H,te},Be.createRef=function(){return{current:null}},Be.forwardRef=function(H){return{$$typeof:h,render:H}},Be.isValidElement=O,Be.lazy=function(H){return{$$typeof:g,_payload:{_status:-1,_result:H},_init:pt}},Be.memo=function(H,te){return{$$typeof:m,type:H,compare:te===void 0?null:te}},Be.startTransition=function(H){var te=ie.transition;ie.transition={};try{H()}finally{ie.transition=te}},Be.unstable_act=le,Be.useCallback=function(H,te){return Ee.current.useCallback(H,te)},Be.useContext=function(H){return Ee.current.useContext(H)},Be.useDebugValue=function(){},Be.useDeferredValue=function(H){return Ee.current.useDeferredValue(H)},Be.useEffect=function(H,te){return Ee.current.useEffect(H,te)},Be.useId=function(){return Ee.current.useId()},Be.useImperativeHandle=function(H,te,Re){return Ee.current.useImperativeHandle(H,te,Re)},Be.useInsertionEffect=function(H,te){return Ee.current.useInsertionEffect(H,te)},Be.useLayoutEffect=function(H,te){return Ee.current.useLayoutEffect(H,te)},Be.useMemo=function(H,te){return Ee.current.useMemo(H,te)},Be.useReducer=function(H,te,Re){return Ee.current.useReducer(H,te,Re)},Be.useRef=function(H){return Ee.current.useRef(H)},Be.useState=function(H){return Ee.current.useState(H)},Be.useSyncExternalStore=function(H,te,Re){return Ee.current.useSyncExternalStore(H,te,Re)},Be.useTransition=function(){return Ee.current.useTransition()},Be.version="18.3.1",Be}var ex;function ny(){return ex||(ex=1,cp.exports=FI()),cp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tx;function UI(){if(tx)return kc;tx=1;var n=ny(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(h,d,m){var g,y={},x=null,E=null;m!==void 0&&(x=""+m),d.key!==void 0&&(x=""+d.key),d.ref!==void 0&&(E=d.ref);for(g in d)r.call(d,g)&&!l.hasOwnProperty(g)&&(y[g]=d[g]);if(h&&h.defaultProps)for(g in d=h.defaultProps,d)y[g]===void 0&&(y[g]=d[g]);return{$$typeof:e,type:h,key:x,ref:E,props:y,_owner:s.current}}return kc.Fragment=t,kc.jsx=c,kc.jsxs=c,kc}var nx;function WI(){return nx||(nx=1,lp.exports=UI()),lp.exports}var a=WI(),j=ny();const Wt=zI(j);var qd={},up={exports:{}},An={},dp={exports:{}},hp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rx;function $I(){return rx||(rx=1,(function(n){function e(ie,me){var le=ie.length;ie.push(me);e:for(;0<le;){var H=le-1>>>1,te=ie[H];if(0<s(te,me))ie[H]=me,ie[le]=te,le=H;else break e}}function t(ie){return ie.length===0?null:ie[0]}function r(ie){if(ie.length===0)return null;var me=ie[0],le=ie.pop();if(le!==me){ie[0]=le;e:for(var H=0,te=ie.length,Re=te>>>1;H<Re;){var Ce=2*(H+1)-1,Ve=ie[Ce],Oe=Ce+1,Qe=ie[Oe];if(0>s(Ve,le))Oe<te&&0>s(Qe,Ve)?(ie[H]=Qe,ie[Oe]=le,H=Oe):(ie[H]=Ve,ie[Ce]=le,H=Ce);else if(Oe<te&&0>s(Qe,le))ie[H]=Qe,ie[Oe]=le,H=Oe;else break e}}return me}function s(ie,me){var le=ie.sortIndex-me.sortIndex;return le!==0?le:ie.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,h=c.now();n.unstable_now=function(){return c.now()-h}}var d=[],m=[],g=1,y=null,x=3,E=!1,k=!1,S=!1,I=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(ie){for(var me=t(m);me!==null;){if(me.callback===null)r(m);else if(me.startTime<=ie)r(m),me.sortIndex=me.expirationTime,e(d,me);else break;me=t(m)}}function K(ie){if(S=!1,P(ie),!k)if(t(d)!==null)k=!0,pt(z);else{var me=t(m);me!==null&&Ee(K,me.startTime-ie)}}function z(ie,me){k=!1,S&&(S=!1,N(C),C=-1),E=!0;var le=x;try{for(P(me),y=t(d);y!==null&&(!(y.expirationTime>me)||ie&&!B());){var H=y.callback;if(typeof H=="function"){y.callback=null,x=y.priorityLevel;var te=H(y.expirationTime<=me);me=n.unstable_now(),typeof te=="function"?y.callback=te:y===t(d)&&r(d),P(me)}else r(d);y=t(d)}if(y!==null)var Re=!0;else{var Ce=t(m);Ce!==null&&Ee(K,Ce.startTime-me),Re=!1}return Re}finally{y=null,x=le,E=!1}}var W=!1,A=null,C=-1,M=5,O=-1;function B(){return!(n.unstable_now()-O<M)}function U(){if(A!==null){var ie=n.unstable_now();O=ie;var me=!0;try{me=A(!0,ie)}finally{me?L():(W=!1,A=null)}}else W=!1}var L;if(typeof V=="function")L=function(){V(U)};else if(typeof MessageChannel<"u"){var De=new MessageChannel,Ke=De.port2;De.port1.onmessage=U,L=function(){Ke.postMessage(null)}}else L=function(){I(U,0)};function pt(ie){A=ie,W||(W=!0,L())}function Ee(ie,me){C=I(function(){ie(n.unstable_now())},me)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ie){ie.callback=null},n.unstable_continueExecution=function(){k||E||(k=!0,pt(z))},n.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<ie?Math.floor(1e3/ie):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(ie){switch(x){case 1:case 2:case 3:var me=3;break;default:me=x}var le=x;x=me;try{return ie()}finally{x=le}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ie,me){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var le=x;x=ie;try{return me()}finally{x=le}},n.unstable_scheduleCallback=function(ie,me,le){var H=n.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?H+le:H):le=H,ie){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=le+te,ie={id:g++,callback:me,priorityLevel:ie,startTime:le,expirationTime:te,sortIndex:-1},le>H?(ie.sortIndex=le,e(m,ie),t(d)===null&&ie===t(m)&&(S?(N(C),C=-1):S=!0,Ee(K,le-H))):(ie.sortIndex=te,e(d,ie),k||E||(k=!0,pt(z))),ie},n.unstable_shouldYield=B,n.unstable_wrapCallback=function(ie){var me=x;return function(){var le=x;x=me;try{return ie.apply(this,arguments)}finally{x=le}}}})(hp)),hp}var ix;function HI(){return ix||(ix=1,dp.exports=$I()),dp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sx;function KI(){if(sx)return An;sx=1;var n=ny(),e=HI();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function l(i,o){c(i,o),c(i+"Capture",o)}function c(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},y={};function x(i){return d.call(y,i)?!0:d.call(g,i)?!1:m.test(i)?y[i]=!0:(g[i]=!0,!1)}function E(i,o,u,p){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return p?!1:u!==null?!u.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function k(i,o,u,p){if(o===null||typeof o>"u"||E(i,o,u,p))return!0;if(p)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function S(i,o,u,p,v,w,T){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=p,this.attributeNamespace=v,this.mustUseProperty=u,this.propertyName=i,this.type=o,this.sanitizeURL=w,this.removeEmptyString=T}var I={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){I[i]=new S(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];I[o]=new S(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){I[i]=new S(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){I[i]=new S(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){I[i]=new S(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){I[i]=new S(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){I[i]=new S(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){I[i]=new S(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){I[i]=new S(i,5,!1,i.toLowerCase(),null,!1,!1)});var N=/[\-:]([a-z])/g;function V(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(N,V);I[o]=new S(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(N,V);I[o]=new S(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(N,V);I[o]=new S(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){I[i]=new S(i,1,!1,i.toLowerCase(),null,!1,!1)}),I.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){I[i]=new S(i,1,!1,i.toLowerCase(),null,!0,!0)});function P(i,o,u,p){var v=I.hasOwnProperty(o)?I[o]:null;(v!==null?v.type!==0:p||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(k(o,u,v,p)&&(u=null),p||v===null?x(o)&&(u===null?i.removeAttribute(o):i.setAttribute(o,""+u)):v.mustUseProperty?i[v.propertyName]=u===null?v.type===3?!1:"":u:(o=v.attributeName,p=v.attributeNamespace,u===null?i.removeAttribute(o):(v=v.type,u=v===3||v===4&&u===!0?"":""+u,p?i.setAttributeNS(p,o,u):i.setAttribute(o,u))))}var K=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,z=Symbol.for("react.element"),W=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),B=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),De=Symbol.for("react.suspense_list"),Ke=Symbol.for("react.memo"),pt=Symbol.for("react.lazy"),Ee=Symbol.for("react.offscreen"),ie=Symbol.iterator;function me(i){return i===null||typeof i!="object"?null:(i=ie&&i[ie]||i["@@iterator"],typeof i=="function"?i:null)}var le=Object.assign,H;function te(i){if(H===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);H=o&&o[1]||""}return`
`+H+i}var Re=!1;function Ce(i,o){if(!i||Re)return"";Re=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(Y){var p=Y}Reflect.construct(i,[],o)}else{try{o.call()}catch(Y){p=Y}i.call(o.prototype)}else{try{throw Error()}catch(Y){p=Y}i()}}catch(Y){if(Y&&p&&typeof Y.stack=="string"){for(var v=Y.stack.split(`
`),w=p.stack.split(`
`),T=v.length-1,D=w.length-1;1<=T&&0<=D&&v[T]!==w[D];)D--;for(;1<=T&&0<=D;T--,D--)if(v[T]!==w[D]){if(T!==1||D!==1)do if(T--,D--,0>D||v[T]!==w[D]){var F=`
`+v[T].replace(" at new "," at ");return i.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",i.displayName)),F}while(1<=T&&0<=D);break}}}finally{Re=!1,Error.prepareStackTrace=u}return(i=i?i.displayName||i.name:"")?te(i):""}function Ve(i){switch(i.tag){case 5:return te(i.type);case 16:return te("Lazy");case 13:return te("Suspense");case 19:return te("SuspenseList");case 0:case 2:case 15:return i=Ce(i.type,!1),i;case 11:return i=Ce(i.type.render,!1),i;case 1:return i=Ce(i.type,!0),i;default:return""}}function Oe(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case A:return"Fragment";case W:return"Portal";case M:return"Profiler";case C:return"StrictMode";case L:return"Suspense";case De:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case B:return(i.displayName||"Context")+".Consumer";case O:return(i._context.displayName||"Context")+".Provider";case U:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Ke:return o=i.displayName||null,o!==null?o:Oe(i.type)||"Memo";case pt:o=i._payload,i=i._init;try{return Oe(i(o))}catch{}}return null}function Qe(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Oe(o);case 8:return o===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function $e(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function et(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Yt(i){var o=et(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),p=""+i[o];if(!i.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var v=u.get,w=u.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return v.call(this)},set:function(T){p=""+T,w.call(this,T)}}),Object.defineProperty(i,o,{enumerable:u.enumerable}),{getValue:function(){return p},setValue:function(T){p=""+T},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Gi(i){i._valueTracker||(i._valueTracker=Yt(i))}function J(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var u=o.getValue(),p="";return i&&(p=et(i)?i.checked?"true":"false":i.value),i=p,i!==u?(o.setValue(i),!0):!1}function be(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Le(i,o){var u=o.checked;return le({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??i._wrapperState.initialChecked})}function Ye(i,o){var u=o.defaultValue==null?"":o.defaultValue,p=o.checked!=null?o.checked:o.defaultChecked;u=$e(o.value!=null?o.value:u),i._wrapperState={initialChecked:p,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Et(i,o){o=o.checked,o!=null&&P(i,"checked",o,!1)}function vn(i,o){Et(i,o);var u=$e(o.value),p=o.type;if(u!=null)p==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+u):i.value!==""+u&&(i.value=""+u);else if(p==="submit"||p==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?Nt(i,o.type,u):o.hasOwnProperty("defaultValue")&&Nt(i,o.type,$e(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function no(i,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var p=o.type;if(!(p!=="submit"&&p!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,u||o===i.value||(i.value=o),i.defaultValue=o}u=i.name,u!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,u!==""&&(i.name=u)}function Nt(i,o,u){(o!=="number"||be(i.ownerDocument)!==i)&&(u==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+u&&(i.defaultValue=""+u))}var Tt=Array.isArray;function pr(i,o,u,p){if(i=i.options,o){o={};for(var v=0;v<u.length;v++)o["$"+u[v]]=!0;for(u=0;u<i.length;u++)v=o.hasOwnProperty("$"+i[u].value),i[u].selected!==v&&(i[u].selected=v),v&&p&&(i[u].defaultSelected=!0)}else{for(u=""+$e(u),o=null,v=0;v<i.length;v++){if(i[v].value===u){i[v].selected=!0,p&&(i[v].defaultSelected=!0);return}o!==null||i[v].disabled||(o=i[v])}o!==null&&(o.selected=!0)}}function Al(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return le({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Rl(i,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(t(92));if(Tt(u)){if(1<u.length)throw Error(t(93));u=u[0]}o=u}o==null&&(o=""),u=o}i._wrapperState={initialValue:$e(u)}}function Nu(i,o){var u=$e(o.value),p=$e(o.defaultValue);u!=null&&(u=""+u,u!==i.value&&(i.value=u),o.defaultValue==null&&i.defaultValue!==u&&(i.defaultValue=u)),p!=null&&(i.defaultValue=""+p)}function Qi(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function Pl(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zo(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?Pl(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Yi,Mu=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,p,v){MSApp.execUnsafeLocalFunction(function(){return i(o,u,p,v)})}:i})(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(Yi=Yi||document.createElement("div"),Yi.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Yi.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function ro(i,o){if(o){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=o;return}}i.textContent=o}var Xi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Du=["Webkit","ms","Moz","O"];Object.keys(Xi).forEach(function(i){Du.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),Xi[o]=Xi[i]})});function Ji(i,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||Xi.hasOwnProperty(i)&&Xi[i]?(""+o).trim():o+"px"}function ea(i,o){i=i.style;for(var u in o)if(o.hasOwnProperty(u)){var p=u.indexOf("--")===0,v=Ji(u,o[u],p);u==="float"&&(u="cssFloat"),p?i.setProperty(u,v):i[u]=v}}var Nl=le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gr(i,o){if(o){if(Nl[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function ta(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zi=null;function na(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ui=null,di=null,wt=null;function Ml(i){if(i=ac(i)){if(typeof ui!="function")throw Error(t(280));var o=i.stateNode;o&&(o=ld(o),ui(i.stateNode,i.type,o))}}function es(i){di?wt?wt.push(i):wt=[i]:di=i}function ts(){if(di){var i=di,o=wt;if(wt=di=null,Ml(i),o)for(i=0;i<o.length;i++)Ml(o[i])}}function Vu(i,o){return i(o)}function Lu(){}var Lr=!1;function Ou(i,o,u){if(Lr)return i(o,u);Lr=!0;try{return Vu(i,o,u)}finally{Lr=!1,(di!==null||wt!==null)&&(Lu(),ts())}}function io(i,o){var u=i.stateNode;if(u===null)return null;var p=ld(u);if(p===null)return null;u=p[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(i=i.type,p=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!p;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(t(231,o,typeof u));return u}var ns=!1;if(h)try{var rs={};Object.defineProperty(rs,"passive",{get:function(){ns=!0}}),window.addEventListener("test",rs,rs),window.removeEventListener("test",rs,rs)}catch{ns=!1}function Bu(i,o,u,p,v,w,T,D,F){var Y=Array.prototype.slice.call(arguments,3);try{o.apply(u,Y)}catch(re){this.onError(re)}}var hi=!1,Or=null,ra=!1,Qn=null,zu={onError:function(i){hi=!0,Or=i}};function Fu(i,o,u,p,v,w,T,D,F){hi=!1,Or=null,Bu.apply(zu,arguments)}function Dl(i,o,u,p,v,w,T,D,F){if(Fu.apply(this,arguments),hi){if(hi){var Y=Or;hi=!1,Or=null}else throw Error(t(198));ra||(ra=!0,Qn=Y)}}function yr(i){var o=i,u=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(u=o.return),i=o.return;while(i)}return o.tag===3?u:null}function Vl(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function Uu(i){if(yr(i)!==i)throw Error(t(188))}function Wu(i){var o=i.alternate;if(!o){if(o=yr(i),o===null)throw Error(t(188));return o!==i?null:i}for(var u=i,p=o;;){var v=u.return;if(v===null)break;var w=v.alternate;if(w===null){if(p=v.return,p!==null){u=p;continue}break}if(v.child===w.child){for(w=v.child;w;){if(w===u)return Uu(v),i;if(w===p)return Uu(v),o;w=w.sibling}throw Error(t(188))}if(u.return!==p.return)u=v,p=w;else{for(var T=!1,D=v.child;D;){if(D===u){T=!0,u=v,p=w;break}if(D===p){T=!0,p=v,u=w;break}D=D.sibling}if(!T){for(D=w.child;D;){if(D===u){T=!0,u=w,p=v;break}if(D===p){T=!0,p=w,u=v;break}D=D.sibling}if(!T)throw Error(t(189))}}if(u.alternate!==p)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?i:o}function $u(i){return i=Wu(i),i!==null?so(i):null}function so(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=so(i);if(o!==null)return o;i=i.sibling}return null}var Ll=e.unstable_scheduleCallback,ia=e.unstable_cancelCallback,oo=e.unstable_shouldYield,fi=e.unstable_requestPaint,ot=e.unstable_now,Bf=e.unstable_getCurrentPriorityLevel,sa=e.unstable_ImmediatePriority,Ol=e.unstable_UserBlockingPriority,ao=e.unstable_NormalPriority,Bl=e.unstable_LowPriority,oa=e.unstable_IdlePriority,lo=null,Dn=null;function Hu(i){if(Dn&&typeof Dn.onCommitFiberRoot=="function")try{Dn.onCommitFiberRoot(lo,i,void 0,(i.current.flags&128)===128)}catch{}}var Vn=Math.clz32?Math.clz32:co,Br=Math.log,Yn=Math.LN2;function co(i){return i>>>=0,i===0?32:31-(Br(i)/Yn|0)|0}var zr=64,is=4194304;function Je(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function mi(i,o){var u=i.pendingLanes;if(u===0)return 0;var p=0,v=i.suspendedLanes,w=i.pingedLanes,T=u&268435455;if(T!==0){var D=T&~v;D!==0?p=Je(D):(w&=T,w!==0&&(p=Je(w)))}else T=u&~v,T!==0?p=Je(T):w!==0&&(p=Je(w));if(p===0)return 0;if(o!==0&&o!==p&&(o&v)===0&&(v=p&-p,w=o&-o,v>=w||v===16&&(w&4194240)!==0))return o;if((p&4)!==0&&(p|=u&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=p;0<o;)u=31-Vn(o),v=1<<u,p|=i[u],o&=~v;return p}function uo(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ho(i,o){for(var u=i.suspendedLanes,p=i.pingedLanes,v=i.expirationTimes,w=i.pendingLanes;0<w;){var T=31-Vn(w),D=1<<T,F=v[T];F===-1?((D&u)===0||(D&p)!==0)&&(v[T]=uo(D,o)):F<=o&&(i.expiredLanes|=D),w&=~D}}function zl(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Fl(){var i=zr;return zr<<=1,(zr&4194240)===0&&(zr=64),i}function Ul(i){for(var o=[],u=0;31>u;u++)o.push(i);return o}function fo(i,o,u){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-Vn(o),i[o]=u}function zf(i,o){var u=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var p=i.eventTimes;for(i=i.expirationTimes;0<u;){var v=31-Vn(u),w=1<<v;o[v]=0,p[v]=-1,i[v]=-1,u&=~w}}function Wl(i,o){var u=i.entangledLanes|=o;for(i=i.entanglements;u;){var p=31-Vn(u),v=1<<p;v&o|i[p]&o&&(i[p]|=o),u&=~v}}var He=0;function Fr(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var $l,aa,Hl,Kl,ql,Ur=!1,la=[],Wr=null,$r=null,Xt=null,mo=new Map,pi=new Map,Ln=[],Ku="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ss(i,o){switch(i){case"focusin":case"focusout":Wr=null;break;case"dragenter":case"dragleave":$r=null;break;case"mouseover":case"mouseout":Xt=null;break;case"pointerover":case"pointerout":mo.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":pi.delete(o.pointerId)}}function vr(i,o,u,p,v,w){return i===null||i.nativeEvent!==w?(i={blockedOn:o,domEventName:u,eventSystemFlags:p,nativeEvent:w,targetContainers:[v]},o!==null&&(o=ac(o),o!==null&&aa(o)),i):(i.eventSystemFlags|=p,o=i.targetContainers,v!==null&&o.indexOf(v)===-1&&o.push(v),i)}function qu(i,o,u,p,v){switch(o){case"focusin":return Wr=vr(Wr,i,o,u,p,v),!0;case"dragenter":return $r=vr($r,i,o,u,p,v),!0;case"mouseover":return Xt=vr(Xt,i,o,u,p,v),!0;case"pointerover":var w=v.pointerId;return mo.set(w,vr(mo.get(w)||null,i,o,u,p,v)),!0;case"gotpointercapture":return w=v.pointerId,pi.set(w,vr(pi.get(w)||null,i,o,u,p,v)),!0}return!1}function ca(i){var o=vo(i.target);if(o!==null){var u=yr(o);if(u!==null){if(o=u.tag,o===13){if(o=Vl(u),o!==null){i.blockedOn=o,ql(i.priority,function(){Hl(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function nt(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var u=ua(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(u===null){u=i.nativeEvent;var p=new u.constructor(u.type,u);Zi=p,u.target.dispatchEvent(p),Zi=null}else return o=ac(u),o!==null&&aa(o),i.blockedOn=u,!1;o.shift()}return!0}function Gu(i,o,u){nt(i)&&u.delete(o)}function Ff(){Ur=!1,Wr!==null&&nt(Wr)&&(Wr=null),$r!==null&&nt($r)&&($r=null),Xt!==null&&nt(Xt)&&(Xt=null),mo.forEach(Gu),pi.forEach(Gu)}function os(i,o){i.blockedOn===o&&(i.blockedOn=null,Ur||(Ur=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ff)))}function as(i){function o(v){return os(v,i)}if(0<la.length){os(la[0],i);for(var u=1;u<la.length;u++){var p=la[u];p.blockedOn===i&&(p.blockedOn=null)}}for(Wr!==null&&os(Wr,i),$r!==null&&os($r,i),Xt!==null&&os(Xt,i),mo.forEach(o),pi.forEach(o),u=0;u<Ln.length;u++)p=Ln[u],p.blockedOn===i&&(p.blockedOn=null);for(;0<Ln.length&&(u=Ln[0],u.blockedOn===null);)ca(u),u.blockedOn===null&&Ln.shift()}var gi=K.ReactCurrentBatchConfig,yi=!0;function Hr(i,o,u,p){var v=He,w=gi.transition;gi.transition=null;try{He=1,Gl(i,o,u,p)}finally{He=v,gi.transition=w}}function Qu(i,o,u,p){var v=He,w=gi.transition;gi.transition=null;try{He=4,Gl(i,o,u,p)}finally{He=v,gi.transition=w}}function Gl(i,o,u,p){if(yi){var v=ua(i,o,u,p);if(v===null)Jf(i,o,p,Kr,u),ss(i,p);else if(qu(v,i,o,u,p))p.stopPropagation();else if(ss(i,p),o&4&&-1<Ku.indexOf(i)){for(;v!==null;){var w=ac(v);if(w!==null&&$l(w),w=ua(i,o,u,p),w===null&&Jf(i,o,p,Kr,u),w===v)break;v=w}v!==null&&p.stopPropagation()}else Jf(i,o,p,null,u)}}var Kr=null;function ua(i,o,u,p){if(Kr=null,i=na(p),i=vo(i),i!==null)if(o=yr(i),o===null)i=null;else if(u=o.tag,u===13){if(i=Vl(o),i!==null)return i;i=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return Kr=i,null}function da(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Bf()){case sa:return 1;case Ol:return 4;case ao:case Bl:return 16;case oa:return 536870912;default:return 16}default:return 16}}var On=null,ha=null,vi=null;function Yu(){if(vi)return vi;var i,o=ha,u=o.length,p,v="value"in On?On.value:On.textContent,w=v.length;for(i=0;i<u&&o[i]===v[i];i++);var T=u-i;for(p=1;p<=T&&o[u-p]===v[w-p];p++);return vi=v.slice(i,1<p?1-p:void 0)}function po(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function qr(){return!0}function Ql(){return!1}function an(i){function o(u,p,v,w,T){this._reactName=u,this._targetInst=v,this.type=p,this.nativeEvent=w,this.target=T,this.currentTarget=null;for(var D in i)i.hasOwnProperty(D)&&(u=i[D],this[D]=u?u(w):w[D]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?qr:Ql,this.isPropagationStopped=Ql,this}return le(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=qr)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=qr)},persist:function(){},isPersistent:qr}),o}var Gr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},go=an(Gr),ls=le({},Gr,{view:0,detail:0}),fa=an(ls),ma,pa,Bn,yo=le({},ls,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ne,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Bn&&(Bn&&i.type==="mousemove"?(ma=i.screenX-Bn.screenX,pa=i.screenY-Bn.screenY):pa=ma=0,Bn=i),ma)},movementY:function(i){return"movementY"in i?i.movementY:pa}}),Yl=an(yo),Xu=le({},yo,{dataTransfer:0}),Ju=an(Xu),ga=le({},ls,{relatedTarget:0}),Jt=an(ga),Zu=le({},Gr,{animationName:0,elapsedTime:0,pseudoElement:0}),ed=an(Zu),cs=le({},Gr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),f=an(cs),b=le({},Gr,{data:0}),_=an(b),R={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},G={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},X={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ce(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=X[i])?!!o[i]:!1}function Ne(){return ce}var It=le({},ls,{key:function(i){if(i.key){var o=R[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=po(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?G[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ne,charCode:function(i){return i.type==="keypress"?po(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?po(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),tt=an(It),Mt=le({},yo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zn=an(Mt),xi=le({},ls,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ne}),Qr=an(xi),Yr=le({},Gr,{propertyName:0,elapsedTime:0,pseudoElement:0}),ya=an(Yr),Xl=le({},yo,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),MT=an(Xl),DT=[9,13,27,32],Uf=h&&"CompositionEvent"in window,Jl=null;h&&"documentMode"in document&&(Jl=document.documentMode);var VT=h&&"TextEvent"in window&&!Jl,H0=h&&(!Uf||Jl&&8<Jl&&11>=Jl),K0=" ",q0=!1;function G0(i,o){switch(i){case"keyup":return DT.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Q0(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var va=!1;function LT(i,o){switch(i){case"compositionend":return Q0(o);case"keypress":return o.which!==32?null:(q0=!0,K0);case"textInput":return i=o.data,i===K0&&q0?null:i;default:return null}}function OT(i,o){if(va)return i==="compositionend"||!Uf&&G0(i,o)?(i=Yu(),vi=ha=On=null,va=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return H0&&o.locale!=="ko"?null:o.data;default:return null}}var BT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Y0(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!BT[i.type]:o==="textarea"}function X0(i,o,u,p){es(p),o=sd(o,"onChange"),0<o.length&&(u=new go("onChange","change",null,u,p),i.push({event:u,listeners:o}))}var Zl=null,ec=null;function zT(i){pv(i,0)}function td(i){var o=_a(i);if(J(o))return i}function FT(i,o){if(i==="change")return o}var J0=!1;if(h){var Wf;if(h){var $f="oninput"in document;if(!$f){var Z0=document.createElement("div");Z0.setAttribute("oninput","return;"),$f=typeof Z0.oninput=="function"}Wf=$f}else Wf=!1;J0=Wf&&(!document.documentMode||9<document.documentMode)}function ev(){Zl&&(Zl.detachEvent("onpropertychange",tv),ec=Zl=null)}function tv(i){if(i.propertyName==="value"&&td(ec)){var o=[];X0(o,ec,i,na(i)),Ou(zT,o)}}function UT(i,o,u){i==="focusin"?(ev(),Zl=o,ec=u,Zl.attachEvent("onpropertychange",tv)):i==="focusout"&&ev()}function WT(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return td(ec)}function $T(i,o){if(i==="click")return td(o)}function HT(i,o){if(i==="input"||i==="change")return td(o)}function KT(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var xr=typeof Object.is=="function"?Object.is:KT;function tc(i,o){if(xr(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var u=Object.keys(i),p=Object.keys(o);if(u.length!==p.length)return!1;for(p=0;p<u.length;p++){var v=u[p];if(!d.call(o,v)||!xr(i[v],o[v]))return!1}return!0}function nv(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function rv(i,o){var u=nv(i);i=0;for(var p;u;){if(u.nodeType===3){if(p=i+u.textContent.length,i<=o&&p>=o)return{node:u,offset:o-i};i=p}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=nv(u)}}function iv(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?iv(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function sv(){for(var i=window,o=be();o instanceof i.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)i=o.contentWindow;else break;o=be(i.document)}return o}function Hf(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function qT(i){var o=sv(),u=i.focusedElem,p=i.selectionRange;if(o!==u&&u&&u.ownerDocument&&iv(u.ownerDocument.documentElement,u)){if(p!==null&&Hf(u)){if(o=p.start,i=p.end,i===void 0&&(i=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(i,u.value.length);else if(i=(o=u.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var v=u.textContent.length,w=Math.min(p.start,v);p=p.end===void 0?w:Math.min(p.end,v),!i.extend&&w>p&&(v=p,p=w,w=v),v=rv(u,w);var T=rv(u,p);v&&T&&(i.rangeCount!==1||i.anchorNode!==v.node||i.anchorOffset!==v.offset||i.focusNode!==T.node||i.focusOffset!==T.offset)&&(o=o.createRange(),o.setStart(v.node,v.offset),i.removeAllRanges(),w>p?(i.addRange(o),i.extend(T.node,T.offset)):(o.setEnd(T.node,T.offset),i.addRange(o)))}}for(o=[],i=u;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)i=o[u],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var GT=h&&"documentMode"in document&&11>=document.documentMode,xa=null,Kf=null,nc=null,qf=!1;function ov(i,o,u){var p=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;qf||xa==null||xa!==be(p)||(p=xa,"selectionStart"in p&&Hf(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),nc&&tc(nc,p)||(nc=p,p=sd(Kf,"onSelect"),0<p.length&&(o=new go("onSelect","select",null,o,u),i.push({event:o,listeners:p}),o.target=xa)))}function nd(i,o){var u={};return u[i.toLowerCase()]=o.toLowerCase(),u["Webkit"+i]="webkit"+o,u["Moz"+i]="moz"+o,u}var wa={animationend:nd("Animation","AnimationEnd"),animationiteration:nd("Animation","AnimationIteration"),animationstart:nd("Animation","AnimationStart"),transitionend:nd("Transition","TransitionEnd")},Gf={},av={};h&&(av=document.createElement("div").style,"AnimationEvent"in window||(delete wa.animationend.animation,delete wa.animationiteration.animation,delete wa.animationstart.animation),"TransitionEvent"in window||delete wa.transitionend.transition);function rd(i){if(Gf[i])return Gf[i];if(!wa[i])return i;var o=wa[i],u;for(u in o)if(o.hasOwnProperty(u)&&u in av)return Gf[i]=o[u];return i}var lv=rd("animationend"),cv=rd("animationiteration"),uv=rd("animationstart"),dv=rd("transitionend"),hv=new Map,fv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function us(i,o){hv.set(i,o),l(o,[i])}for(var Qf=0;Qf<fv.length;Qf++){var Yf=fv[Qf],QT=Yf.toLowerCase(),YT=Yf[0].toUpperCase()+Yf.slice(1);us(QT,"on"+YT)}us(lv,"onAnimationEnd"),us(cv,"onAnimationIteration"),us(uv,"onAnimationStart"),us("dblclick","onDoubleClick"),us("focusin","onFocus"),us("focusout","onBlur"),us(dv,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),XT=new Set("cancel close invalid load scroll toggle".split(" ").concat(rc));function mv(i,o,u){var p=i.type||"unknown-event";i.currentTarget=u,Dl(p,o,void 0,i),i.currentTarget=null}function pv(i,o){o=(o&4)!==0;for(var u=0;u<i.length;u++){var p=i[u],v=p.event;p=p.listeners;e:{var w=void 0;if(o)for(var T=p.length-1;0<=T;T--){var D=p[T],F=D.instance,Y=D.currentTarget;if(D=D.listener,F!==w&&v.isPropagationStopped())break e;mv(v,D,Y),w=F}else for(T=0;T<p.length;T++){if(D=p[T],F=D.instance,Y=D.currentTarget,D=D.listener,F!==w&&v.isPropagationStopped())break e;mv(v,D,Y),w=F}}}if(ra)throw i=Qn,ra=!1,Qn=null,i}function at(i,o){var u=o[im];u===void 0&&(u=o[im]=new Set);var p=i+"__bubble";u.has(p)||(gv(o,i,2,!1),u.add(p))}function Xf(i,o,u){var p=0;o&&(p|=4),gv(u,i,p,o)}var id="_reactListening"+Math.random().toString(36).slice(2);function ic(i){if(!i[id]){i[id]=!0,r.forEach(function(u){u!=="selectionchange"&&(XT.has(u)||Xf(u,!1,i),Xf(u,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[id]||(o[id]=!0,Xf("selectionchange",!1,o))}}function gv(i,o,u,p){switch(da(o)){case 1:var v=Hr;break;case 4:v=Qu;break;default:v=Gl}u=v.bind(null,o,u,i),v=void 0,!ns||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(v=!0),p?v!==void 0?i.addEventListener(o,u,{capture:!0,passive:v}):i.addEventListener(o,u,!0):v!==void 0?i.addEventListener(o,u,{passive:v}):i.addEventListener(o,u,!1)}function Jf(i,o,u,p,v){var w=p;if((o&1)===0&&(o&2)===0&&p!==null)e:for(;;){if(p===null)return;var T=p.tag;if(T===3||T===4){var D=p.stateNode.containerInfo;if(D===v||D.nodeType===8&&D.parentNode===v)break;if(T===4)for(T=p.return;T!==null;){var F=T.tag;if((F===3||F===4)&&(F=T.stateNode.containerInfo,F===v||F.nodeType===8&&F.parentNode===v))return;T=T.return}for(;D!==null;){if(T=vo(D),T===null)return;if(F=T.tag,F===5||F===6){p=w=T;continue e}D=D.parentNode}}p=p.return}Ou(function(){var Y=w,re=na(u),se=[];e:{var ne=hv.get(i);if(ne!==void 0){var fe=go,ve=i;switch(i){case"keypress":if(po(u)===0)break e;case"keydown":case"keyup":fe=tt;break;case"focusin":ve="focus",fe=Jt;break;case"focusout":ve="blur",fe=Jt;break;case"beforeblur":case"afterblur":fe=Jt;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=Yl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=Ju;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=Qr;break;case lv:case cv:case uv:fe=ed;break;case dv:fe=ya;break;case"scroll":fe=fa;break;case"wheel":fe=MT;break;case"copy":case"cut":case"paste":fe=f;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=zn}var xe=(o&4)!==0,Ct=!xe&&i==="scroll",q=xe?ne!==null?ne+"Capture":null:ne;xe=[];for(var $=Y,Q;$!==null;){Q=$;var oe=Q.stateNode;if(Q.tag===5&&oe!==null&&(Q=oe,q!==null&&(oe=io($,q),oe!=null&&xe.push(sc($,oe,Q)))),Ct)break;$=$.return}0<xe.length&&(ne=new fe(ne,ve,null,u,re),se.push({event:ne,listeners:xe}))}}if((o&7)===0){e:{if(ne=i==="mouseover"||i==="pointerover",fe=i==="mouseout"||i==="pointerout",ne&&u!==Zi&&(ve=u.relatedTarget||u.fromElement)&&(vo(ve)||ve[wi]))break e;if((fe||ne)&&(ne=re.window===re?re:(ne=re.ownerDocument)?ne.defaultView||ne.parentWindow:window,fe?(ve=u.relatedTarget||u.toElement,fe=Y,ve=ve?vo(ve):null,ve!==null&&(Ct=yr(ve),ve!==Ct||ve.tag!==5&&ve.tag!==6)&&(ve=null)):(fe=null,ve=Y),fe!==ve)){if(xe=Yl,oe="onMouseLeave",q="onMouseEnter",$="mouse",(i==="pointerout"||i==="pointerover")&&(xe=zn,oe="onPointerLeave",q="onPointerEnter",$="pointer"),Ct=fe==null?ne:_a(fe),Q=ve==null?ne:_a(ve),ne=new xe(oe,$+"leave",fe,u,re),ne.target=Ct,ne.relatedTarget=Q,oe=null,vo(re)===Y&&(xe=new xe(q,$+"enter",ve,u,re),xe.target=Q,xe.relatedTarget=Ct,oe=xe),Ct=oe,fe&&ve)t:{for(xe=fe,q=ve,$=0,Q=xe;Q;Q=ba(Q))$++;for(Q=0,oe=q;oe;oe=ba(oe))Q++;for(;0<$-Q;)xe=ba(xe),$--;for(;0<Q-$;)q=ba(q),Q--;for(;$--;){if(xe===q||q!==null&&xe===q.alternate)break t;xe=ba(xe),q=ba(q)}xe=null}else xe=null;fe!==null&&yv(se,ne,fe,xe,!1),ve!==null&&Ct!==null&&yv(se,Ct,ve,xe,!0)}}e:{if(ne=Y?_a(Y):window,fe=ne.nodeName&&ne.nodeName.toLowerCase(),fe==="select"||fe==="input"&&ne.type==="file")var we=FT;else if(Y0(ne))if(J0)we=HT;else{we=WT;var _e=UT}else(fe=ne.nodeName)&&fe.toLowerCase()==="input"&&(ne.type==="checkbox"||ne.type==="radio")&&(we=$T);if(we&&(we=we(i,Y))){X0(se,we,u,re);break e}_e&&_e(i,ne,Y),i==="focusout"&&(_e=ne._wrapperState)&&_e.controlled&&ne.type==="number"&&Nt(ne,"number",ne.value)}switch(_e=Y?_a(Y):window,i){case"focusin":(Y0(_e)||_e.contentEditable==="true")&&(xa=_e,Kf=Y,nc=null);break;case"focusout":nc=Kf=xa=null;break;case"mousedown":qf=!0;break;case"contextmenu":case"mouseup":case"dragend":qf=!1,ov(se,u,re);break;case"selectionchange":if(GT)break;case"keydown":case"keyup":ov(se,u,re)}var Se;if(Uf)e:{switch(i){case"compositionstart":var je="onCompositionStart";break e;case"compositionend":je="onCompositionEnd";break e;case"compositionupdate":je="onCompositionUpdate";break e}je=void 0}else va?G0(i,u)&&(je="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(je="onCompositionStart");je&&(H0&&u.locale!=="ko"&&(va||je!=="onCompositionStart"?je==="onCompositionEnd"&&va&&(Se=Yu()):(On=re,ha="value"in On?On.value:On.textContent,va=!0)),_e=sd(Y,je),0<_e.length&&(je=new _(je,i,null,u,re),se.push({event:je,listeners:_e}),Se?je.data=Se:(Se=Q0(u),Se!==null&&(je.data=Se)))),(Se=VT?LT(i,u):OT(i,u))&&(Y=sd(Y,"onBeforeInput"),0<Y.length&&(re=new _("onBeforeInput","beforeinput",null,u,re),se.push({event:re,listeners:Y}),re.data=Se))}pv(se,o)})}function sc(i,o,u){return{instance:i,listener:o,currentTarget:u}}function sd(i,o){for(var u=o+"Capture",p=[];i!==null;){var v=i,w=v.stateNode;v.tag===5&&w!==null&&(v=w,w=io(i,u),w!=null&&p.unshift(sc(i,w,v)),w=io(i,o),w!=null&&p.push(sc(i,w,v))),i=i.return}return p}function ba(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function yv(i,o,u,p,v){for(var w=o._reactName,T=[];u!==null&&u!==p;){var D=u,F=D.alternate,Y=D.stateNode;if(F!==null&&F===p)break;D.tag===5&&Y!==null&&(D=Y,v?(F=io(u,w),F!=null&&T.unshift(sc(u,F,D))):v||(F=io(u,w),F!=null&&T.push(sc(u,F,D)))),u=u.return}T.length!==0&&i.push({event:o,listeners:T})}var JT=/\r\n?/g,ZT=/\u0000|\uFFFD/g;function vv(i){return(typeof i=="string"?i:""+i).replace(JT,`
`).replace(ZT,"")}function od(i,o,u){if(o=vv(o),vv(i)!==o&&u)throw Error(t(425))}function ad(){}var Zf=null,em=null;function tm(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var nm=typeof setTimeout=="function"?setTimeout:void 0,eI=typeof clearTimeout=="function"?clearTimeout:void 0,xv=typeof Promise=="function"?Promise:void 0,tI=typeof queueMicrotask=="function"?queueMicrotask:typeof xv<"u"?function(i){return xv.resolve(null).then(i).catch(nI)}:nm;function nI(i){setTimeout(function(){throw i})}function rm(i,o){var u=o,p=0;do{var v=u.nextSibling;if(i.removeChild(u),v&&v.nodeType===8)if(u=v.data,u==="/$"){if(p===0){i.removeChild(v),as(o);return}p--}else u!=="$"&&u!=="$?"&&u!=="$!"||p++;u=v}while(u);as(o)}function ds(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function wv(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return i;o--}else u==="/$"&&o++}i=i.previousSibling}return null}var ka=Math.random().toString(36).slice(2),Xr="__reactFiber$"+ka,oc="__reactProps$"+ka,wi="__reactContainer$"+ka,im="__reactEvents$"+ka,rI="__reactListeners$"+ka,iI="__reactHandles$"+ka;function vo(i){var o=i[Xr];if(o)return o;for(var u=i.parentNode;u;){if(o=u[wi]||u[Xr]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(i=wv(i);i!==null;){if(u=i[Xr])return u;i=wv(i)}return o}i=u,u=i.parentNode}return null}function ac(i){return i=i[Xr]||i[wi],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function _a(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function ld(i){return i[oc]||null}var sm=[],Sa=-1;function hs(i){return{current:i}}function lt(i){0>Sa||(i.current=sm[Sa],sm[Sa]=null,Sa--)}function rt(i,o){Sa++,sm[Sa]=i.current,i.current=o}var fs={},ln=hs(fs),En=hs(!1),xo=fs;function Ea(i,o){var u=i.type.contextTypes;if(!u)return fs;var p=i.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===o)return p.__reactInternalMemoizedMaskedChildContext;var v={},w;for(w in u)v[w]=o[w];return p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=v),v}function Tn(i){return i=i.childContextTypes,i!=null}function cd(){lt(En),lt(ln)}function bv(i,o,u){if(ln.current!==fs)throw Error(t(168));rt(ln,o),rt(En,u)}function kv(i,o,u){var p=i.stateNode;if(o=o.childContextTypes,typeof p.getChildContext!="function")return u;p=p.getChildContext();for(var v in p)if(!(v in o))throw Error(t(108,Qe(i)||"Unknown",v));return le({},u,p)}function ud(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||fs,xo=ln.current,rt(ln,i),rt(En,En.current),!0}function _v(i,o,u){var p=i.stateNode;if(!p)throw Error(t(169));u?(i=kv(i,o,xo),p.__reactInternalMemoizedMergedChildContext=i,lt(En),lt(ln),rt(ln,i)):lt(En),rt(En,u)}var bi=null,dd=!1,om=!1;function Sv(i){bi===null?bi=[i]:bi.push(i)}function sI(i){dd=!0,Sv(i)}function ms(){if(!om&&bi!==null){om=!0;var i=0,o=He;try{var u=bi;for(He=1;i<u.length;i++){var p=u[i];do p=p(!0);while(p!==null)}bi=null,dd=!1}catch(v){throw bi!==null&&(bi=bi.slice(i+1)),Ll(sa,ms),v}finally{He=o,om=!1}}return null}var Ta=[],Ia=0,hd=null,fd=0,Xn=[],Jn=0,wo=null,ki=1,_i="";function bo(i,o){Ta[Ia++]=fd,Ta[Ia++]=hd,hd=i,fd=o}function Ev(i,o,u){Xn[Jn++]=ki,Xn[Jn++]=_i,Xn[Jn++]=wo,wo=i;var p=ki;i=_i;var v=32-Vn(p)-1;p&=~(1<<v),u+=1;var w=32-Vn(o)+v;if(30<w){var T=v-v%5;w=(p&(1<<T)-1).toString(32),p>>=T,v-=T,ki=1<<32-Vn(o)+v|u<<v|p,_i=w+i}else ki=1<<w|u<<v|p,_i=i}function am(i){i.return!==null&&(bo(i,1),Ev(i,1,0))}function lm(i){for(;i===hd;)hd=Ta[--Ia],Ta[Ia]=null,fd=Ta[--Ia],Ta[Ia]=null;for(;i===wo;)wo=Xn[--Jn],Xn[Jn]=null,_i=Xn[--Jn],Xn[Jn]=null,ki=Xn[--Jn],Xn[Jn]=null}var Fn=null,Un=null,ft=!1,wr=null;function Tv(i,o){var u=nr(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=i,o=i.deletions,o===null?(i.deletions=[u],i.flags|=16):o.push(u)}function Iv(i,o){switch(i.tag){case 5:var u=i.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,Fn=i,Un=ds(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,Fn=i,Un=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=wo!==null?{id:ki,overflow:_i}:null,i.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=nr(18,null,null,0),u.stateNode=o,u.return=i,i.child=u,Fn=i,Un=null,!0):!1;default:return!1}}function cm(i){return(i.mode&1)!==0&&(i.flags&128)===0}function um(i){if(ft){var o=Un;if(o){var u=o;if(!Iv(i,o)){if(cm(i))throw Error(t(418));o=ds(u.nextSibling);var p=Fn;o&&Iv(i,o)?Tv(p,u):(i.flags=i.flags&-4097|2,ft=!1,Fn=i)}}else{if(cm(i))throw Error(t(418));i.flags=i.flags&-4097|2,ft=!1,Fn=i}}}function Cv(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Fn=i}function md(i){if(i!==Fn)return!1;if(!ft)return Cv(i),ft=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!tm(i.type,i.memoizedProps)),o&&(o=Un)){if(cm(i))throw jv(),Error(t(418));for(;o;)Tv(i,o),o=ds(o.nextSibling)}if(Cv(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"){if(o===0){Un=ds(i.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}i=i.nextSibling}Un=null}}else Un=Fn?ds(i.stateNode.nextSibling):null;return!0}function jv(){for(var i=Un;i;)i=ds(i.nextSibling)}function Ca(){Un=Fn=null,ft=!1}function dm(i){wr===null?wr=[i]:wr.push(i)}var oI=K.ReactCurrentBatchConfig;function lc(i,o,u){if(i=u.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var p=u.stateNode}if(!p)throw Error(t(147,i));var v=p,w=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===w?o.ref:(o=function(T){var D=v.refs;T===null?delete D[w]:D[w]=T},o._stringRef=w,o)}if(typeof i!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,i))}return i}function pd(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function Av(i){var o=i._init;return o(i._payload)}function Rv(i){function o(q,$){if(i){var Q=q.deletions;Q===null?(q.deletions=[$],q.flags|=16):Q.push($)}}function u(q,$){if(!i)return null;for(;$!==null;)o(q,$),$=$.sibling;return null}function p(q,$){for(q=new Map;$!==null;)$.key!==null?q.set($.key,$):q.set($.index,$),$=$.sibling;return q}function v(q,$){return q=ks(q,$),q.index=0,q.sibling=null,q}function w(q,$,Q){return q.index=Q,i?(Q=q.alternate,Q!==null?(Q=Q.index,Q<$?(q.flags|=2,$):Q):(q.flags|=2,$)):(q.flags|=1048576,$)}function T(q){return i&&q.alternate===null&&(q.flags|=2),q}function D(q,$,Q,oe){return $===null||$.tag!==6?($=np(Q,q.mode,oe),$.return=q,$):($=v($,Q),$.return=q,$)}function F(q,$,Q,oe){var we=Q.type;return we===A?re(q,$,Q.props.children,oe,Q.key):$!==null&&($.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===pt&&Av(we)===$.type)?(oe=v($,Q.props),oe.ref=lc(q,$,Q),oe.return=q,oe):(oe=Bd(Q.type,Q.key,Q.props,null,q.mode,oe),oe.ref=lc(q,$,Q),oe.return=q,oe)}function Y(q,$,Q,oe){return $===null||$.tag!==4||$.stateNode.containerInfo!==Q.containerInfo||$.stateNode.implementation!==Q.implementation?($=rp(Q,q.mode,oe),$.return=q,$):($=v($,Q.children||[]),$.return=q,$)}function re(q,$,Q,oe,we){return $===null||$.tag!==7?($=jo(Q,q.mode,oe,we),$.return=q,$):($=v($,Q),$.return=q,$)}function se(q,$,Q){if(typeof $=="string"&&$!==""||typeof $=="number")return $=np(""+$,q.mode,Q),$.return=q,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case z:return Q=Bd($.type,$.key,$.props,null,q.mode,Q),Q.ref=lc(q,null,$),Q.return=q,Q;case W:return $=rp($,q.mode,Q),$.return=q,$;case pt:var oe=$._init;return se(q,oe($._payload),Q)}if(Tt($)||me($))return $=jo($,q.mode,Q,null),$.return=q,$;pd(q,$)}return null}function ne(q,$,Q,oe){var we=$!==null?$.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number")return we!==null?null:D(q,$,""+Q,oe);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case z:return Q.key===we?F(q,$,Q,oe):null;case W:return Q.key===we?Y(q,$,Q,oe):null;case pt:return we=Q._init,ne(q,$,we(Q._payload),oe)}if(Tt(Q)||me(Q))return we!==null?null:re(q,$,Q,oe,null);pd(q,Q)}return null}function fe(q,$,Q,oe,we){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return q=q.get(Q)||null,D($,q,""+oe,we);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case z:return q=q.get(oe.key===null?Q:oe.key)||null,F($,q,oe,we);case W:return q=q.get(oe.key===null?Q:oe.key)||null,Y($,q,oe,we);case pt:var _e=oe._init;return fe(q,$,Q,_e(oe._payload),we)}if(Tt(oe)||me(oe))return q=q.get(Q)||null,re($,q,oe,we,null);pd($,oe)}return null}function ve(q,$,Q,oe){for(var we=null,_e=null,Se=$,je=$=0,qt=null;Se!==null&&je<Q.length;je++){Se.index>je?(qt=Se,Se=null):qt=Se.sibling;var Xe=ne(q,Se,Q[je],oe);if(Xe===null){Se===null&&(Se=qt);break}i&&Se&&Xe.alternate===null&&o(q,Se),$=w(Xe,$,je),_e===null?we=Xe:_e.sibling=Xe,_e=Xe,Se=qt}if(je===Q.length)return u(q,Se),ft&&bo(q,je),we;if(Se===null){for(;je<Q.length;je++)Se=se(q,Q[je],oe),Se!==null&&($=w(Se,$,je),_e===null?we=Se:_e.sibling=Se,_e=Se);return ft&&bo(q,je),we}for(Se=p(q,Se);je<Q.length;je++)qt=fe(Se,q,je,Q[je],oe),qt!==null&&(i&&qt.alternate!==null&&Se.delete(qt.key===null?je:qt.key),$=w(qt,$,je),_e===null?we=qt:_e.sibling=qt,_e=qt);return i&&Se.forEach(function(_s){return o(q,_s)}),ft&&bo(q,je),we}function xe(q,$,Q,oe){var we=me(Q);if(typeof we!="function")throw Error(t(150));if(Q=we.call(Q),Q==null)throw Error(t(151));for(var _e=we=null,Se=$,je=$=0,qt=null,Xe=Q.next();Se!==null&&!Xe.done;je++,Xe=Q.next()){Se.index>je?(qt=Se,Se=null):qt=Se.sibling;var _s=ne(q,Se,Xe.value,oe);if(_s===null){Se===null&&(Se=qt);break}i&&Se&&_s.alternate===null&&o(q,Se),$=w(_s,$,je),_e===null?we=_s:_e.sibling=_s,_e=_s,Se=qt}if(Xe.done)return u(q,Se),ft&&bo(q,je),we;if(Se===null){for(;!Xe.done;je++,Xe=Q.next())Xe=se(q,Xe.value,oe),Xe!==null&&($=w(Xe,$,je),_e===null?we=Xe:_e.sibling=Xe,_e=Xe);return ft&&bo(q,je),we}for(Se=p(q,Se);!Xe.done;je++,Xe=Q.next())Xe=fe(Se,q,je,Xe.value,oe),Xe!==null&&(i&&Xe.alternate!==null&&Se.delete(Xe.key===null?je:Xe.key),$=w(Xe,$,je),_e===null?we=Xe:_e.sibling=Xe,_e=Xe);return i&&Se.forEach(function(BI){return o(q,BI)}),ft&&bo(q,je),we}function Ct(q,$,Q,oe){if(typeof Q=="object"&&Q!==null&&Q.type===A&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case z:e:{for(var we=Q.key,_e=$;_e!==null;){if(_e.key===we){if(we=Q.type,we===A){if(_e.tag===7){u(q,_e.sibling),$=v(_e,Q.props.children),$.return=q,q=$;break e}}else if(_e.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===pt&&Av(we)===_e.type){u(q,_e.sibling),$=v(_e,Q.props),$.ref=lc(q,_e,Q),$.return=q,q=$;break e}u(q,_e);break}else o(q,_e);_e=_e.sibling}Q.type===A?($=jo(Q.props.children,q.mode,oe,Q.key),$.return=q,q=$):(oe=Bd(Q.type,Q.key,Q.props,null,q.mode,oe),oe.ref=lc(q,$,Q),oe.return=q,q=oe)}return T(q);case W:e:{for(_e=Q.key;$!==null;){if($.key===_e)if($.tag===4&&$.stateNode.containerInfo===Q.containerInfo&&$.stateNode.implementation===Q.implementation){u(q,$.sibling),$=v($,Q.children||[]),$.return=q,q=$;break e}else{u(q,$);break}else o(q,$);$=$.sibling}$=rp(Q,q.mode,oe),$.return=q,q=$}return T(q);case pt:return _e=Q._init,Ct(q,$,_e(Q._payload),oe)}if(Tt(Q))return ve(q,$,Q,oe);if(me(Q))return xe(q,$,Q,oe);pd(q,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"?(Q=""+Q,$!==null&&$.tag===6?(u(q,$.sibling),$=v($,Q),$.return=q,q=$):(u(q,$),$=np(Q,q.mode,oe),$.return=q,q=$),T(q)):u(q,$)}return Ct}var ja=Rv(!0),Pv=Rv(!1),gd=hs(null),yd=null,Aa=null,hm=null;function fm(){hm=Aa=yd=null}function mm(i){var o=gd.current;lt(gd),i._currentValue=o}function pm(i,o,u){for(;i!==null;){var p=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,p!==null&&(p.childLanes|=o)):p!==null&&(p.childLanes&o)!==o&&(p.childLanes|=o),i===u)break;i=i.return}}function Ra(i,o){yd=i,hm=Aa=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(In=!0),i.firstContext=null)}function Zn(i){var o=i._currentValue;if(hm!==i)if(i={context:i,memoizedValue:o,next:null},Aa===null){if(yd===null)throw Error(t(308));Aa=i,yd.dependencies={lanes:0,firstContext:i}}else Aa=Aa.next=i;return o}var ko=null;function gm(i){ko===null?ko=[i]:ko.push(i)}function Nv(i,o,u,p){var v=o.interleaved;return v===null?(u.next=u,gm(o)):(u.next=v.next,v.next=u),o.interleaved=u,Si(i,p)}function Si(i,o){i.lanes|=o;var u=i.alternate;for(u!==null&&(u.lanes|=o),u=i,i=i.return;i!==null;)i.childLanes|=o,u=i.alternate,u!==null&&(u.childLanes|=o),u=i,i=i.return;return u.tag===3?u.stateNode:null}var ps=!1;function ym(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mv(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Ei(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function gs(i,o,u){var p=i.updateQueue;if(p===null)return null;if(p=p.shared,(Ge&2)!==0){var v=p.pending;return v===null?o.next=o:(o.next=v.next,v.next=o),p.pending=o,Si(i,u)}return v=p.interleaved,v===null?(o.next=o,gm(p)):(o.next=v.next,v.next=o),p.interleaved=o,Si(i,u)}function vd(i,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var p=o.lanes;p&=i.pendingLanes,u|=p,o.lanes=u,Wl(i,u)}}function Dv(i,o){var u=i.updateQueue,p=i.alternate;if(p!==null&&(p=p.updateQueue,u===p)){var v=null,w=null;if(u=u.firstBaseUpdate,u!==null){do{var T={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};w===null?v=w=T:w=w.next=T,u=u.next}while(u!==null);w===null?v=w=o:w=w.next=o}else v=w=o;u={baseState:p.baseState,firstBaseUpdate:v,lastBaseUpdate:w,shared:p.shared,effects:p.effects},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=o:i.next=o,u.lastBaseUpdate=o}function xd(i,o,u,p){var v=i.updateQueue;ps=!1;var w=v.firstBaseUpdate,T=v.lastBaseUpdate,D=v.shared.pending;if(D!==null){v.shared.pending=null;var F=D,Y=F.next;F.next=null,T===null?w=Y:T.next=Y,T=F;var re=i.alternate;re!==null&&(re=re.updateQueue,D=re.lastBaseUpdate,D!==T&&(D===null?re.firstBaseUpdate=Y:D.next=Y,re.lastBaseUpdate=F))}if(w!==null){var se=v.baseState;T=0,re=Y=F=null,D=w;do{var ne=D.lane,fe=D.eventTime;if((p&ne)===ne){re!==null&&(re=re.next={eventTime:fe,lane:0,tag:D.tag,payload:D.payload,callback:D.callback,next:null});e:{var ve=i,xe=D;switch(ne=o,fe=u,xe.tag){case 1:if(ve=xe.payload,typeof ve=="function"){se=ve.call(fe,se,ne);break e}se=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=xe.payload,ne=typeof ve=="function"?ve.call(fe,se,ne):ve,ne==null)break e;se=le({},se,ne);break e;case 2:ps=!0}}D.callback!==null&&D.lane!==0&&(i.flags|=64,ne=v.effects,ne===null?v.effects=[D]:ne.push(D))}else fe={eventTime:fe,lane:ne,tag:D.tag,payload:D.payload,callback:D.callback,next:null},re===null?(Y=re=fe,F=se):re=re.next=fe,T|=ne;if(D=D.next,D===null){if(D=v.shared.pending,D===null)break;ne=D,D=ne.next,ne.next=null,v.lastBaseUpdate=ne,v.shared.pending=null}}while(!0);if(re===null&&(F=se),v.baseState=F,v.firstBaseUpdate=Y,v.lastBaseUpdate=re,o=v.shared.interleaved,o!==null){v=o;do T|=v.lane,v=v.next;while(v!==o)}else w===null&&(v.shared.lanes=0);Eo|=T,i.lanes=T,i.memoizedState=se}}function Vv(i,o,u){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var p=i[o],v=p.callback;if(v!==null){if(p.callback=null,p=u,typeof v!="function")throw Error(t(191,v));v.call(p)}}}var cc={},Jr=hs(cc),uc=hs(cc),dc=hs(cc);function _o(i){if(i===cc)throw Error(t(174));return i}function vm(i,o){switch(rt(dc,o),rt(uc,i),rt(Jr,cc),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:Zo(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=Zo(o,i)}lt(Jr),rt(Jr,o)}function Pa(){lt(Jr),lt(uc),lt(dc)}function Lv(i){_o(dc.current);var o=_o(Jr.current),u=Zo(o,i.type);o!==u&&(rt(uc,i),rt(Jr,u))}function xm(i){uc.current===i&&(lt(Jr),lt(uc))}var gt=hs(0);function wd(i){for(var o=i;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var wm=[];function bm(){for(var i=0;i<wm.length;i++)wm[i]._workInProgressVersionPrimary=null;wm.length=0}var bd=K.ReactCurrentDispatcher,km=K.ReactCurrentBatchConfig,So=0,yt=null,zt=null,Ht=null,kd=!1,hc=!1,fc=0,aI=0;function cn(){throw Error(t(321))}function _m(i,o){if(o===null)return!1;for(var u=0;u<o.length&&u<i.length;u++)if(!xr(i[u],o[u]))return!1;return!0}function Sm(i,o,u,p,v,w){if(So=w,yt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,bd.current=i===null||i.memoizedState===null?dI:hI,i=u(p,v),hc){w=0;do{if(hc=!1,fc=0,25<=w)throw Error(t(301));w+=1,Ht=zt=null,o.updateQueue=null,bd.current=fI,i=u(p,v)}while(hc)}if(bd.current=Ed,o=zt!==null&&zt.next!==null,So=0,Ht=zt=yt=null,kd=!1,o)throw Error(t(300));return i}function Em(){var i=fc!==0;return fc=0,i}function Zr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?yt.memoizedState=Ht=i:Ht=Ht.next=i,Ht}function er(){if(zt===null){var i=yt.alternate;i=i!==null?i.memoizedState:null}else i=zt.next;var o=Ht===null?yt.memoizedState:Ht.next;if(o!==null)Ht=o,zt=i;else{if(i===null)throw Error(t(310));zt=i,i={memoizedState:zt.memoizedState,baseState:zt.baseState,baseQueue:zt.baseQueue,queue:zt.queue,next:null},Ht===null?yt.memoizedState=Ht=i:Ht=Ht.next=i}return Ht}function mc(i,o){return typeof o=="function"?o(i):o}function Tm(i){var o=er(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var p=zt,v=p.baseQueue,w=u.pending;if(w!==null){if(v!==null){var T=v.next;v.next=w.next,w.next=T}p.baseQueue=v=w,u.pending=null}if(v!==null){w=v.next,p=p.baseState;var D=T=null,F=null,Y=w;do{var re=Y.lane;if((So&re)===re)F!==null&&(F=F.next={lane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),p=Y.hasEagerState?Y.eagerState:i(p,Y.action);else{var se={lane:re,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null};F===null?(D=F=se,T=p):F=F.next=se,yt.lanes|=re,Eo|=re}Y=Y.next}while(Y!==null&&Y!==w);F===null?T=p:F.next=D,xr(p,o.memoizedState)||(In=!0),o.memoizedState=p,o.baseState=T,o.baseQueue=F,u.lastRenderedState=p}if(i=u.interleaved,i!==null){v=i;do w=v.lane,yt.lanes|=w,Eo|=w,v=v.next;while(v!==i)}else v===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function Im(i){var o=er(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var p=u.dispatch,v=u.pending,w=o.memoizedState;if(v!==null){u.pending=null;var T=v=v.next;do w=i(w,T.action),T=T.next;while(T!==v);xr(w,o.memoizedState)||(In=!0),o.memoizedState=w,o.baseQueue===null&&(o.baseState=w),u.lastRenderedState=w}return[w,p]}function Ov(){}function Bv(i,o){var u=yt,p=er(),v=o(),w=!xr(p.memoizedState,v);if(w&&(p.memoizedState=v,In=!0),p=p.queue,Cm(Uv.bind(null,u,p,i),[i]),p.getSnapshot!==o||w||Ht!==null&&Ht.memoizedState.tag&1){if(u.flags|=2048,pc(9,Fv.bind(null,u,p,v,o),void 0,null),Kt===null)throw Error(t(349));(So&30)!==0||zv(u,o,v)}return v}function zv(i,o,u){i.flags|=16384,i={getSnapshot:o,value:u},o=yt.updateQueue,o===null?(o={lastEffect:null,stores:null},yt.updateQueue=o,o.stores=[i]):(u=o.stores,u===null?o.stores=[i]:u.push(i))}function Fv(i,o,u,p){o.value=u,o.getSnapshot=p,Wv(o)&&$v(i)}function Uv(i,o,u){return u(function(){Wv(o)&&$v(i)})}function Wv(i){var o=i.getSnapshot;i=i.value;try{var u=o();return!xr(i,u)}catch{return!0}}function $v(i){var o=Si(i,1);o!==null&&Sr(o,i,1,-1)}function Hv(i){var o=Zr();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:mc,lastRenderedState:i},o.queue=i,i=i.dispatch=uI.bind(null,yt,i),[o.memoizedState,i]}function pc(i,o,u,p){return i={tag:i,create:o,destroy:u,deps:p,next:null},o=yt.updateQueue,o===null?(o={lastEffect:null,stores:null},yt.updateQueue=o,o.lastEffect=i.next=i):(u=o.lastEffect,u===null?o.lastEffect=i.next=i:(p=u.next,u.next=i,i.next=p,o.lastEffect=i)),i}function Kv(){return er().memoizedState}function _d(i,o,u,p){var v=Zr();yt.flags|=i,v.memoizedState=pc(1|o,u,void 0,p===void 0?null:p)}function Sd(i,o,u,p){var v=er();p=p===void 0?null:p;var w=void 0;if(zt!==null){var T=zt.memoizedState;if(w=T.destroy,p!==null&&_m(p,T.deps)){v.memoizedState=pc(o,u,w,p);return}}yt.flags|=i,v.memoizedState=pc(1|o,u,w,p)}function qv(i,o){return _d(8390656,8,i,o)}function Cm(i,o){return Sd(2048,8,i,o)}function Gv(i,o){return Sd(4,2,i,o)}function Qv(i,o){return Sd(4,4,i,o)}function Yv(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function Xv(i,o,u){return u=u!=null?u.concat([i]):null,Sd(4,4,Yv.bind(null,o,i),u)}function jm(){}function Jv(i,o){var u=er();o=o===void 0?null:o;var p=u.memoizedState;return p!==null&&o!==null&&_m(o,p[1])?p[0]:(u.memoizedState=[i,o],i)}function Zv(i,o){var u=er();o=o===void 0?null:o;var p=u.memoizedState;return p!==null&&o!==null&&_m(o,p[1])?p[0]:(i=i(),u.memoizedState=[i,o],i)}function e1(i,o,u){return(So&21)===0?(i.baseState&&(i.baseState=!1,In=!0),i.memoizedState=u):(xr(u,o)||(u=Fl(),yt.lanes|=u,Eo|=u,i.baseState=!0),o)}function lI(i,o){var u=He;He=u!==0&&4>u?u:4,i(!0);var p=km.transition;km.transition={};try{i(!1),o()}finally{He=u,km.transition=p}}function t1(){return er().memoizedState}function cI(i,o,u){var p=ws(i);if(u={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null},n1(i))r1(o,u);else if(u=Nv(i,o,u,p),u!==null){var v=wn();Sr(u,i,p,v),i1(u,o,p)}}function uI(i,o,u){var p=ws(i),v={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null};if(n1(i))r1(o,v);else{var w=i.alternate;if(i.lanes===0&&(w===null||w.lanes===0)&&(w=o.lastRenderedReducer,w!==null))try{var T=o.lastRenderedState,D=w(T,u);if(v.hasEagerState=!0,v.eagerState=D,xr(D,T)){var F=o.interleaved;F===null?(v.next=v,gm(o)):(v.next=F.next,F.next=v),o.interleaved=v;return}}catch{}finally{}u=Nv(i,o,v,p),u!==null&&(v=wn(),Sr(u,i,p,v),i1(u,o,p))}}function n1(i){var o=i.alternate;return i===yt||o!==null&&o===yt}function r1(i,o){hc=kd=!0;var u=i.pending;u===null?o.next=o:(o.next=u.next,u.next=o),i.pending=o}function i1(i,o,u){if((u&4194240)!==0){var p=o.lanes;p&=i.pendingLanes,u|=p,o.lanes=u,Wl(i,u)}}var Ed={readContext:Zn,useCallback:cn,useContext:cn,useEffect:cn,useImperativeHandle:cn,useInsertionEffect:cn,useLayoutEffect:cn,useMemo:cn,useReducer:cn,useRef:cn,useState:cn,useDebugValue:cn,useDeferredValue:cn,useTransition:cn,useMutableSource:cn,useSyncExternalStore:cn,useId:cn,unstable_isNewReconciler:!1},dI={readContext:Zn,useCallback:function(i,o){return Zr().memoizedState=[i,o===void 0?null:o],i},useContext:Zn,useEffect:qv,useImperativeHandle:function(i,o,u){return u=u!=null?u.concat([i]):null,_d(4194308,4,Yv.bind(null,o,i),u)},useLayoutEffect:function(i,o){return _d(4194308,4,i,o)},useInsertionEffect:function(i,o){return _d(4,2,i,o)},useMemo:function(i,o){var u=Zr();return o=o===void 0?null:o,i=i(),u.memoizedState=[i,o],i},useReducer:function(i,o,u){var p=Zr();return o=u!==void 0?u(o):o,p.memoizedState=p.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},p.queue=i,i=i.dispatch=cI.bind(null,yt,i),[p.memoizedState,i]},useRef:function(i){var o=Zr();return i={current:i},o.memoizedState=i},useState:Hv,useDebugValue:jm,useDeferredValue:function(i){return Zr().memoizedState=i},useTransition:function(){var i=Hv(!1),o=i[0];return i=lI.bind(null,i[1]),Zr().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,u){var p=yt,v=Zr();if(ft){if(u===void 0)throw Error(t(407));u=u()}else{if(u=o(),Kt===null)throw Error(t(349));(So&30)!==0||zv(p,o,u)}v.memoizedState=u;var w={value:u,getSnapshot:o};return v.queue=w,qv(Uv.bind(null,p,w,i),[i]),p.flags|=2048,pc(9,Fv.bind(null,p,w,u,o),void 0,null),u},useId:function(){var i=Zr(),o=Kt.identifierPrefix;if(ft){var u=_i,p=ki;u=(p&~(1<<32-Vn(p)-1)).toString(32)+u,o=":"+o+"R"+u,u=fc++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=aI++,o=":"+o+"r"+u.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},hI={readContext:Zn,useCallback:Jv,useContext:Zn,useEffect:Cm,useImperativeHandle:Xv,useInsertionEffect:Gv,useLayoutEffect:Qv,useMemo:Zv,useReducer:Tm,useRef:Kv,useState:function(){return Tm(mc)},useDebugValue:jm,useDeferredValue:function(i){var o=er();return e1(o,zt.memoizedState,i)},useTransition:function(){var i=Tm(mc)[0],o=er().memoizedState;return[i,o]},useMutableSource:Ov,useSyncExternalStore:Bv,useId:t1,unstable_isNewReconciler:!1},fI={readContext:Zn,useCallback:Jv,useContext:Zn,useEffect:Cm,useImperativeHandle:Xv,useInsertionEffect:Gv,useLayoutEffect:Qv,useMemo:Zv,useReducer:Im,useRef:Kv,useState:function(){return Im(mc)},useDebugValue:jm,useDeferredValue:function(i){var o=er();return zt===null?o.memoizedState=i:e1(o,zt.memoizedState,i)},useTransition:function(){var i=Im(mc)[0],o=er().memoizedState;return[i,o]},useMutableSource:Ov,useSyncExternalStore:Bv,useId:t1,unstable_isNewReconciler:!1};function br(i,o){if(i&&i.defaultProps){o=le({},o),i=i.defaultProps;for(var u in i)o[u]===void 0&&(o[u]=i[u]);return o}return o}function Am(i,o,u,p){o=i.memoizedState,u=u(p,o),u=u==null?o:le({},o,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var Td={isMounted:function(i){return(i=i._reactInternals)?yr(i)===i:!1},enqueueSetState:function(i,o,u){i=i._reactInternals;var p=wn(),v=ws(i),w=Ei(p,v);w.payload=o,u!=null&&(w.callback=u),o=gs(i,w,v),o!==null&&(Sr(o,i,v,p),vd(o,i,v))},enqueueReplaceState:function(i,o,u){i=i._reactInternals;var p=wn(),v=ws(i),w=Ei(p,v);w.tag=1,w.payload=o,u!=null&&(w.callback=u),o=gs(i,w,v),o!==null&&(Sr(o,i,v,p),vd(o,i,v))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var u=wn(),p=ws(i),v=Ei(u,p);v.tag=2,o!=null&&(v.callback=o),o=gs(i,v,p),o!==null&&(Sr(o,i,p,u),vd(o,i,p))}};function s1(i,o,u,p,v,w,T){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(p,w,T):o.prototype&&o.prototype.isPureReactComponent?!tc(u,p)||!tc(v,w):!0}function o1(i,o,u){var p=!1,v=fs,w=o.contextType;return typeof w=="object"&&w!==null?w=Zn(w):(v=Tn(o)?xo:ln.current,p=o.contextTypes,w=(p=p!=null)?Ea(i,v):fs),o=new o(u,w),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Td,i.stateNode=o,o._reactInternals=i,p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=v,i.__reactInternalMemoizedMaskedChildContext=w),o}function a1(i,o,u,p){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,p),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,p),o.state!==i&&Td.enqueueReplaceState(o,o.state,null)}function Rm(i,o,u,p){var v=i.stateNode;v.props=u,v.state=i.memoizedState,v.refs={},ym(i);var w=o.contextType;typeof w=="object"&&w!==null?v.context=Zn(w):(w=Tn(o)?xo:ln.current,v.context=Ea(i,w)),v.state=i.memoizedState,w=o.getDerivedStateFromProps,typeof w=="function"&&(Am(i,o,w,u),v.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(o=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),o!==v.state&&Td.enqueueReplaceState(v,v.state,null),xd(i,u,v,p),v.state=i.memoizedState),typeof v.componentDidMount=="function"&&(i.flags|=4194308)}function Na(i,o){try{var u="",p=o;do u+=Ve(p),p=p.return;while(p);var v=u}catch(w){v=`
Error generating stack: `+w.message+`
`+w.stack}return{value:i,source:o,stack:v,digest:null}}function Pm(i,o,u){return{value:i,source:null,stack:u??null,digest:o??null}}function Nm(i,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var mI=typeof WeakMap=="function"?WeakMap:Map;function l1(i,o,u){u=Ei(-1,u),u.tag=3,u.payload={element:null};var p=o.value;return u.callback=function(){Nd||(Nd=!0,Gm=p),Nm(i,o)},u}function c1(i,o,u){u=Ei(-1,u),u.tag=3;var p=i.type.getDerivedStateFromError;if(typeof p=="function"){var v=o.value;u.payload=function(){return p(v)},u.callback=function(){Nm(i,o)}}var w=i.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(u.callback=function(){Nm(i,o),typeof p!="function"&&(vs===null?vs=new Set([this]):vs.add(this));var T=o.stack;this.componentDidCatch(o.value,{componentStack:T!==null?T:""})}),u}function u1(i,o,u){var p=i.pingCache;if(p===null){p=i.pingCache=new mI;var v=new Set;p.set(o,v)}else v=p.get(o),v===void 0&&(v=new Set,p.set(o,v));v.has(u)||(v.add(u),i=CI.bind(null,i,o,u),o.then(i,i))}function d1(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function h1(i,o,u,p,v){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=Ei(-1,1),o.tag=2,gs(u,o,1))),u.lanes|=1),i):(i.flags|=65536,i.lanes=v,i)}var pI=K.ReactCurrentOwner,In=!1;function xn(i,o,u,p){o.child=i===null?Pv(o,null,u,p):ja(o,i.child,u,p)}function f1(i,o,u,p,v){u=u.render;var w=o.ref;return Ra(o,v),p=Sm(i,o,u,p,w,v),u=Em(),i!==null&&!In?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~v,Ti(i,o,v)):(ft&&u&&am(o),o.flags|=1,xn(i,o,p,v),o.child)}function m1(i,o,u,p,v){if(i===null){var w=u.type;return typeof w=="function"&&!tp(w)&&w.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=w,p1(i,o,w,p,v)):(i=Bd(u.type,null,p,o,o.mode,v),i.ref=o.ref,i.return=o,o.child=i)}if(w=i.child,(i.lanes&v)===0){var T=w.memoizedProps;if(u=u.compare,u=u!==null?u:tc,u(T,p)&&i.ref===o.ref)return Ti(i,o,v)}return o.flags|=1,i=ks(w,p),i.ref=o.ref,i.return=o,o.child=i}function p1(i,o,u,p,v){if(i!==null){var w=i.memoizedProps;if(tc(w,p)&&i.ref===o.ref)if(In=!1,o.pendingProps=p=w,(i.lanes&v)!==0)(i.flags&131072)!==0&&(In=!0);else return o.lanes=i.lanes,Ti(i,o,v)}return Mm(i,o,u,p,v)}function g1(i,o,u){var p=o.pendingProps,v=p.children,w=i!==null?i.memoizedState:null;if(p.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},rt(Da,Wn),Wn|=u;else{if((u&1073741824)===0)return i=w!==null?w.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,rt(Da,Wn),Wn|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=w!==null?w.baseLanes:u,rt(Da,Wn),Wn|=p}else w!==null?(p=w.baseLanes|u,o.memoizedState=null):p=u,rt(Da,Wn),Wn|=p;return xn(i,o,v,u),o.child}function y1(i,o){var u=o.ref;(i===null&&u!==null||i!==null&&i.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function Mm(i,o,u,p,v){var w=Tn(u)?xo:ln.current;return w=Ea(o,w),Ra(o,v),u=Sm(i,o,u,p,w,v),p=Em(),i!==null&&!In?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~v,Ti(i,o,v)):(ft&&p&&am(o),o.flags|=1,xn(i,o,u,v),o.child)}function v1(i,o,u,p,v){if(Tn(u)){var w=!0;ud(o)}else w=!1;if(Ra(o,v),o.stateNode===null)Cd(i,o),o1(o,u,p),Rm(o,u,p,v),p=!0;else if(i===null){var T=o.stateNode,D=o.memoizedProps;T.props=D;var F=T.context,Y=u.contextType;typeof Y=="object"&&Y!==null?Y=Zn(Y):(Y=Tn(u)?xo:ln.current,Y=Ea(o,Y));var re=u.getDerivedStateFromProps,se=typeof re=="function"||typeof T.getSnapshotBeforeUpdate=="function";se||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(D!==p||F!==Y)&&a1(o,T,p,Y),ps=!1;var ne=o.memoizedState;T.state=ne,xd(o,p,T,v),F=o.memoizedState,D!==p||ne!==F||En.current||ps?(typeof re=="function"&&(Am(o,u,re,p),F=o.memoizedState),(D=ps||s1(o,u,D,p,ne,F,Y))?(se||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(o.flags|=4194308)):(typeof T.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=p,o.memoizedState=F),T.props=p,T.state=F,T.context=Y,p=D):(typeof T.componentDidMount=="function"&&(o.flags|=4194308),p=!1)}else{T=o.stateNode,Mv(i,o),D=o.memoizedProps,Y=o.type===o.elementType?D:br(o.type,D),T.props=Y,se=o.pendingProps,ne=T.context,F=u.contextType,typeof F=="object"&&F!==null?F=Zn(F):(F=Tn(u)?xo:ln.current,F=Ea(o,F));var fe=u.getDerivedStateFromProps;(re=typeof fe=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(D!==se||ne!==F)&&a1(o,T,p,F),ps=!1,ne=o.memoizedState,T.state=ne,xd(o,p,T,v);var ve=o.memoizedState;D!==se||ne!==ve||En.current||ps?(typeof fe=="function"&&(Am(o,u,fe,p),ve=o.memoizedState),(Y=ps||s1(o,u,Y,p,ne,ve,F)||!1)?(re||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(p,ve,F),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(p,ve,F)),typeof T.componentDidUpdate=="function"&&(o.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof T.componentDidUpdate!="function"||D===i.memoizedProps&&ne===i.memoizedState||(o.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||D===i.memoizedProps&&ne===i.memoizedState||(o.flags|=1024),o.memoizedProps=p,o.memoizedState=ve),T.props=p,T.state=ve,T.context=F,p=Y):(typeof T.componentDidUpdate!="function"||D===i.memoizedProps&&ne===i.memoizedState||(o.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||D===i.memoizedProps&&ne===i.memoizedState||(o.flags|=1024),p=!1)}return Dm(i,o,u,p,w,v)}function Dm(i,o,u,p,v,w){y1(i,o);var T=(o.flags&128)!==0;if(!p&&!T)return v&&_v(o,u,!1),Ti(i,o,w);p=o.stateNode,pI.current=o;var D=T&&typeof u.getDerivedStateFromError!="function"?null:p.render();return o.flags|=1,i!==null&&T?(o.child=ja(o,i.child,null,w),o.child=ja(o,null,D,w)):xn(i,o,D,w),o.memoizedState=p.state,v&&_v(o,u,!0),o.child}function x1(i){var o=i.stateNode;o.pendingContext?bv(i,o.pendingContext,o.pendingContext!==o.context):o.context&&bv(i,o.context,!1),vm(i,o.containerInfo)}function w1(i,o,u,p,v){return Ca(),dm(v),o.flags|=256,xn(i,o,u,p),o.child}var Vm={dehydrated:null,treeContext:null,retryLane:0};function Lm(i){return{baseLanes:i,cachePool:null,transitions:null}}function b1(i,o,u){var p=o.pendingProps,v=gt.current,w=!1,T=(o.flags&128)!==0,D;if((D=T)||(D=i!==null&&i.memoizedState===null?!1:(v&2)!==0),D?(w=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(v|=1),rt(gt,v&1),i===null)return um(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(T=p.children,i=p.fallback,w?(p=o.mode,w=o.child,T={mode:"hidden",children:T},(p&1)===0&&w!==null?(w.childLanes=0,w.pendingProps=T):w=zd(T,p,0,null),i=jo(i,p,u,null),w.return=o,i.return=o,w.sibling=i,o.child=w,o.child.memoizedState=Lm(u),o.memoizedState=Vm,i):Om(o,T));if(v=i.memoizedState,v!==null&&(D=v.dehydrated,D!==null))return gI(i,o,T,p,D,v,u);if(w){w=p.fallback,T=o.mode,v=i.child,D=v.sibling;var F={mode:"hidden",children:p.children};return(T&1)===0&&o.child!==v?(p=o.child,p.childLanes=0,p.pendingProps=F,o.deletions=null):(p=ks(v,F),p.subtreeFlags=v.subtreeFlags&14680064),D!==null?w=ks(D,w):(w=jo(w,T,u,null),w.flags|=2),w.return=o,p.return=o,p.sibling=w,o.child=p,p=w,w=o.child,T=i.child.memoizedState,T=T===null?Lm(u):{baseLanes:T.baseLanes|u,cachePool:null,transitions:T.transitions},w.memoizedState=T,w.childLanes=i.childLanes&~u,o.memoizedState=Vm,p}return w=i.child,i=w.sibling,p=ks(w,{mode:"visible",children:p.children}),(o.mode&1)===0&&(p.lanes=u),p.return=o,p.sibling=null,i!==null&&(u=o.deletions,u===null?(o.deletions=[i],o.flags|=16):u.push(i)),o.child=p,o.memoizedState=null,p}function Om(i,o){return o=zd({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function Id(i,o,u,p){return p!==null&&dm(p),ja(o,i.child,null,u),i=Om(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function gI(i,o,u,p,v,w,T){if(u)return o.flags&256?(o.flags&=-257,p=Pm(Error(t(422))),Id(i,o,T,p)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(w=p.fallback,v=o.mode,p=zd({mode:"visible",children:p.children},v,0,null),w=jo(w,v,T,null),w.flags|=2,p.return=o,w.return=o,p.sibling=w,o.child=p,(o.mode&1)!==0&&ja(o,i.child,null,T),o.child.memoizedState=Lm(T),o.memoizedState=Vm,w);if((o.mode&1)===0)return Id(i,o,T,null);if(v.data==="$!"){if(p=v.nextSibling&&v.nextSibling.dataset,p)var D=p.dgst;return p=D,w=Error(t(419)),p=Pm(w,p,void 0),Id(i,o,T,p)}if(D=(T&i.childLanes)!==0,In||D){if(p=Kt,p!==null){switch(T&-T){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=(v&(p.suspendedLanes|T))!==0?0:v,v!==0&&v!==w.retryLane&&(w.retryLane=v,Si(i,v),Sr(p,i,v,-1))}return ep(),p=Pm(Error(t(421))),Id(i,o,T,p)}return v.data==="$?"?(o.flags|=128,o.child=i.child,o=jI.bind(null,i),v._reactRetry=o,null):(i=w.treeContext,Un=ds(v.nextSibling),Fn=o,ft=!0,wr=null,i!==null&&(Xn[Jn++]=ki,Xn[Jn++]=_i,Xn[Jn++]=wo,ki=i.id,_i=i.overflow,wo=o),o=Om(o,p.children),o.flags|=4096,o)}function k1(i,o,u){i.lanes|=o;var p=i.alternate;p!==null&&(p.lanes|=o),pm(i.return,o,u)}function Bm(i,o,u,p,v){var w=i.memoizedState;w===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:p,tail:u,tailMode:v}:(w.isBackwards=o,w.rendering=null,w.renderingStartTime=0,w.last=p,w.tail=u,w.tailMode=v)}function _1(i,o,u){var p=o.pendingProps,v=p.revealOrder,w=p.tail;if(xn(i,o,p.children,u),p=gt.current,(p&2)!==0)p=p&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&k1(i,u,o);else if(i.tag===19)k1(i,u,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}p&=1}if(rt(gt,p),(o.mode&1)===0)o.memoizedState=null;else switch(v){case"forwards":for(u=o.child,v=null;u!==null;)i=u.alternate,i!==null&&wd(i)===null&&(v=u),u=u.sibling;u=v,u===null?(v=o.child,o.child=null):(v=u.sibling,u.sibling=null),Bm(o,!1,v,u,w);break;case"backwards":for(u=null,v=o.child,o.child=null;v!==null;){if(i=v.alternate,i!==null&&wd(i)===null){o.child=v;break}i=v.sibling,v.sibling=u,u=v,v=i}Bm(o,!0,u,null,w);break;case"together":Bm(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Cd(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function Ti(i,o,u){if(i!==null&&(o.dependencies=i.dependencies),Eo|=o.lanes,(u&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,u=ks(i,i.pendingProps),o.child=u,u.return=o;i.sibling!==null;)i=i.sibling,u=u.sibling=ks(i,i.pendingProps),u.return=o;u.sibling=null}return o.child}function yI(i,o,u){switch(o.tag){case 3:x1(o),Ca();break;case 5:Lv(o);break;case 1:Tn(o.type)&&ud(o);break;case 4:vm(o,o.stateNode.containerInfo);break;case 10:var p=o.type._context,v=o.memoizedProps.value;rt(gd,p._currentValue),p._currentValue=v;break;case 13:if(p=o.memoizedState,p!==null)return p.dehydrated!==null?(rt(gt,gt.current&1),o.flags|=128,null):(u&o.child.childLanes)!==0?b1(i,o,u):(rt(gt,gt.current&1),i=Ti(i,o,u),i!==null?i.sibling:null);rt(gt,gt.current&1);break;case 19:if(p=(u&o.childLanes)!==0,(i.flags&128)!==0){if(p)return _1(i,o,u);o.flags|=128}if(v=o.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),rt(gt,gt.current),p)break;return null;case 22:case 23:return o.lanes=0,g1(i,o,u)}return Ti(i,o,u)}var S1,zm,E1,T1;S1=function(i,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)i.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},zm=function(){},E1=function(i,o,u,p){var v=i.memoizedProps;if(v!==p){i=o.stateNode,_o(Jr.current);var w=null;switch(u){case"input":v=Le(i,v),p=Le(i,p),w=[];break;case"select":v=le({},v,{value:void 0}),p=le({},p,{value:void 0}),w=[];break;case"textarea":v=Al(i,v),p=Al(i,p),w=[];break;default:typeof v.onClick!="function"&&typeof p.onClick=="function"&&(i.onclick=ad)}gr(u,p);var T;u=null;for(Y in v)if(!p.hasOwnProperty(Y)&&v.hasOwnProperty(Y)&&v[Y]!=null)if(Y==="style"){var D=v[Y];for(T in D)D.hasOwnProperty(T)&&(u||(u={}),u[T]="")}else Y!=="dangerouslySetInnerHTML"&&Y!=="children"&&Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&Y!=="autoFocus"&&(s.hasOwnProperty(Y)?w||(w=[]):(w=w||[]).push(Y,null));for(Y in p){var F=p[Y];if(D=v!=null?v[Y]:void 0,p.hasOwnProperty(Y)&&F!==D&&(F!=null||D!=null))if(Y==="style")if(D){for(T in D)!D.hasOwnProperty(T)||F&&F.hasOwnProperty(T)||(u||(u={}),u[T]="");for(T in F)F.hasOwnProperty(T)&&D[T]!==F[T]&&(u||(u={}),u[T]=F[T])}else u||(w||(w=[]),w.push(Y,u)),u=F;else Y==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,D=D?D.__html:void 0,F!=null&&D!==F&&(w=w||[]).push(Y,F)):Y==="children"?typeof F!="string"&&typeof F!="number"||(w=w||[]).push(Y,""+F):Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&(s.hasOwnProperty(Y)?(F!=null&&Y==="onScroll"&&at("scroll",i),w||D===F||(w=[])):(w=w||[]).push(Y,F))}u&&(w=w||[]).push("style",u);var Y=w;(o.updateQueue=Y)&&(o.flags|=4)}},T1=function(i,o,u,p){u!==p&&(o.flags|=4)};function gc(i,o){if(!ft)switch(i.tailMode){case"hidden":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:p.sibling=null}}function un(i){var o=i.alternate!==null&&i.alternate.child===i.child,u=0,p=0;if(o)for(var v=i.child;v!==null;)u|=v.lanes|v.childLanes,p|=v.subtreeFlags&14680064,p|=v.flags&14680064,v.return=i,v=v.sibling;else for(v=i.child;v!==null;)u|=v.lanes|v.childLanes,p|=v.subtreeFlags,p|=v.flags,v.return=i,v=v.sibling;return i.subtreeFlags|=p,i.childLanes=u,o}function vI(i,o,u){var p=o.pendingProps;switch(lm(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return un(o),null;case 1:return Tn(o.type)&&cd(),un(o),null;case 3:return p=o.stateNode,Pa(),lt(En),lt(ln),bm(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(i===null||i.child===null)&&(md(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,wr!==null&&(Xm(wr),wr=null))),zm(i,o),un(o),null;case 5:xm(o);var v=_o(dc.current);if(u=o.type,i!==null&&o.stateNode!=null)E1(i,o,u,p,v),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!p){if(o.stateNode===null)throw Error(t(166));return un(o),null}if(i=_o(Jr.current),md(o)){p=o.stateNode,u=o.type;var w=o.memoizedProps;switch(p[Xr]=o,p[oc]=w,i=(o.mode&1)!==0,u){case"dialog":at("cancel",p),at("close",p);break;case"iframe":case"object":case"embed":at("load",p);break;case"video":case"audio":for(v=0;v<rc.length;v++)at(rc[v],p);break;case"source":at("error",p);break;case"img":case"image":case"link":at("error",p),at("load",p);break;case"details":at("toggle",p);break;case"input":Ye(p,w),at("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!w.multiple},at("invalid",p);break;case"textarea":Rl(p,w),at("invalid",p)}gr(u,w),v=null;for(var T in w)if(w.hasOwnProperty(T)){var D=w[T];T==="children"?typeof D=="string"?p.textContent!==D&&(w.suppressHydrationWarning!==!0&&od(p.textContent,D,i),v=["children",D]):typeof D=="number"&&p.textContent!==""+D&&(w.suppressHydrationWarning!==!0&&od(p.textContent,D,i),v=["children",""+D]):s.hasOwnProperty(T)&&D!=null&&T==="onScroll"&&at("scroll",p)}switch(u){case"input":Gi(p),no(p,w,!0);break;case"textarea":Gi(p),Qi(p);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(p.onclick=ad)}p=v,o.updateQueue=p,p!==null&&(o.flags|=4)}else{T=v.nodeType===9?v:v.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Pl(u)),i==="http://www.w3.org/1999/xhtml"?u==="script"?(i=T.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof p.is=="string"?i=T.createElement(u,{is:p.is}):(i=T.createElement(u),u==="select"&&(T=i,p.multiple?T.multiple=!0:p.size&&(T.size=p.size))):i=T.createElementNS(i,u),i[Xr]=o,i[oc]=p,S1(i,o,!1,!1),o.stateNode=i;e:{switch(T=ta(u,p),u){case"dialog":at("cancel",i),at("close",i),v=p;break;case"iframe":case"object":case"embed":at("load",i),v=p;break;case"video":case"audio":for(v=0;v<rc.length;v++)at(rc[v],i);v=p;break;case"source":at("error",i),v=p;break;case"img":case"image":case"link":at("error",i),at("load",i),v=p;break;case"details":at("toggle",i),v=p;break;case"input":Ye(i,p),v=Le(i,p),at("invalid",i);break;case"option":v=p;break;case"select":i._wrapperState={wasMultiple:!!p.multiple},v=le({},p,{value:void 0}),at("invalid",i);break;case"textarea":Rl(i,p),v=Al(i,p),at("invalid",i);break;default:v=p}gr(u,v),D=v;for(w in D)if(D.hasOwnProperty(w)){var F=D[w];w==="style"?ea(i,F):w==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,F!=null&&Mu(i,F)):w==="children"?typeof F=="string"?(u!=="textarea"||F!=="")&&ro(i,F):typeof F=="number"&&ro(i,""+F):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(s.hasOwnProperty(w)?F!=null&&w==="onScroll"&&at("scroll",i):F!=null&&P(i,w,F,T))}switch(u){case"input":Gi(i),no(i,p,!1);break;case"textarea":Gi(i),Qi(i);break;case"option":p.value!=null&&i.setAttribute("value",""+$e(p.value));break;case"select":i.multiple=!!p.multiple,w=p.value,w!=null?pr(i,!!p.multiple,w,!1):p.defaultValue!=null&&pr(i,!!p.multiple,p.defaultValue,!0);break;default:typeof v.onClick=="function"&&(i.onclick=ad)}switch(u){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return un(o),null;case 6:if(i&&o.stateNode!=null)T1(i,o,i.memoizedProps,p);else{if(typeof p!="string"&&o.stateNode===null)throw Error(t(166));if(u=_o(dc.current),_o(Jr.current),md(o)){if(p=o.stateNode,u=o.memoizedProps,p[Xr]=o,(w=p.nodeValue!==u)&&(i=Fn,i!==null))switch(i.tag){case 3:od(p.nodeValue,u,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&od(p.nodeValue,u,(i.mode&1)!==0)}w&&(o.flags|=4)}else p=(u.nodeType===9?u:u.ownerDocument).createTextNode(p),p[Xr]=o,o.stateNode=p}return un(o),null;case 13:if(lt(gt),p=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(ft&&Un!==null&&(o.mode&1)!==0&&(o.flags&128)===0)jv(),Ca(),o.flags|=98560,w=!1;else if(w=md(o),p!==null&&p.dehydrated!==null){if(i===null){if(!w)throw Error(t(318));if(w=o.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(t(317));w[Xr]=o}else Ca(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;un(o),w=!1}else wr!==null&&(Xm(wr),wr=null),w=!0;if(!w)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=u,o):(p=p!==null,p!==(i!==null&&i.memoizedState!==null)&&p&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(gt.current&1)!==0?Ft===0&&(Ft=3):ep())),o.updateQueue!==null&&(o.flags|=4),un(o),null);case 4:return Pa(),zm(i,o),i===null&&ic(o.stateNode.containerInfo),un(o),null;case 10:return mm(o.type._context),un(o),null;case 17:return Tn(o.type)&&cd(),un(o),null;case 19:if(lt(gt),w=o.memoizedState,w===null)return un(o),null;if(p=(o.flags&128)!==0,T=w.rendering,T===null)if(p)gc(w,!1);else{if(Ft!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(T=wd(i),T!==null){for(o.flags|=128,gc(w,!1),p=T.updateQueue,p!==null&&(o.updateQueue=p,o.flags|=4),o.subtreeFlags=0,p=u,u=o.child;u!==null;)w=u,i=p,w.flags&=14680066,T=w.alternate,T===null?(w.childLanes=0,w.lanes=i,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=T.childLanes,w.lanes=T.lanes,w.child=T.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=T.memoizedProps,w.memoizedState=T.memoizedState,w.updateQueue=T.updateQueue,w.type=T.type,i=T.dependencies,w.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),u=u.sibling;return rt(gt,gt.current&1|2),o.child}i=i.sibling}w.tail!==null&&ot()>Va&&(o.flags|=128,p=!0,gc(w,!1),o.lanes=4194304)}else{if(!p)if(i=wd(T),i!==null){if(o.flags|=128,p=!0,u=i.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),gc(w,!0),w.tail===null&&w.tailMode==="hidden"&&!T.alternate&&!ft)return un(o),null}else 2*ot()-w.renderingStartTime>Va&&u!==1073741824&&(o.flags|=128,p=!0,gc(w,!1),o.lanes=4194304);w.isBackwards?(T.sibling=o.child,o.child=T):(u=w.last,u!==null?u.sibling=T:o.child=T,w.last=T)}return w.tail!==null?(o=w.tail,w.rendering=o,w.tail=o.sibling,w.renderingStartTime=ot(),o.sibling=null,u=gt.current,rt(gt,p?u&1|2:u&1),o):(un(o),null);case 22:case 23:return Zm(),p=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==p&&(o.flags|=8192),p&&(o.mode&1)!==0?(Wn&1073741824)!==0&&(un(o),o.subtreeFlags&6&&(o.flags|=8192)):un(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function xI(i,o){switch(lm(o),o.tag){case 1:return Tn(o.type)&&cd(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Pa(),lt(En),lt(ln),bm(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return xm(o),null;case 13:if(lt(gt),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));Ca()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return lt(gt),null;case 4:return Pa(),null;case 10:return mm(o.type._context),null;case 22:case 23:return Zm(),null;case 24:return null;default:return null}}var jd=!1,dn=!1,wI=typeof WeakSet=="function"?WeakSet:Set,ye=null;function Ma(i,o){var u=i.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(p){bt(i,o,p)}else u.current=null}function Fm(i,o,u){try{u()}catch(p){bt(i,o,p)}}var I1=!1;function bI(i,o){if(Zf=yi,i=sv(),Hf(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var p=u.getSelection&&u.getSelection();if(p&&p.rangeCount!==0){u=p.anchorNode;var v=p.anchorOffset,w=p.focusNode;p=p.focusOffset;try{u.nodeType,w.nodeType}catch{u=null;break e}var T=0,D=-1,F=-1,Y=0,re=0,se=i,ne=null;t:for(;;){for(var fe;se!==u||v!==0&&se.nodeType!==3||(D=T+v),se!==w||p!==0&&se.nodeType!==3||(F=T+p),se.nodeType===3&&(T+=se.nodeValue.length),(fe=se.firstChild)!==null;)ne=se,se=fe;for(;;){if(se===i)break t;if(ne===u&&++Y===v&&(D=T),ne===w&&++re===p&&(F=T),(fe=se.nextSibling)!==null)break;se=ne,ne=se.parentNode}se=fe}u=D===-1||F===-1?null:{start:D,end:F}}else u=null}u=u||{start:0,end:0}}else u=null;for(em={focusedElem:i,selectionRange:u},yi=!1,ye=o;ye!==null;)if(o=ye,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,ye=i;else for(;ye!==null;){o=ye;try{var ve=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(ve!==null){var xe=ve.memoizedProps,Ct=ve.memoizedState,q=o.stateNode,$=q.getSnapshotBeforeUpdate(o.elementType===o.type?xe:br(o.type,xe),Ct);q.__reactInternalSnapshotBeforeUpdate=$}break;case 3:var Q=o.stateNode.containerInfo;Q.nodeType===1?Q.textContent="":Q.nodeType===9&&Q.documentElement&&Q.removeChild(Q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(oe){bt(o,o.return,oe)}if(i=o.sibling,i!==null){i.return=o.return,ye=i;break}ye=o.return}return ve=I1,I1=!1,ve}function yc(i,o,u){var p=o.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var v=p=p.next;do{if((v.tag&i)===i){var w=v.destroy;v.destroy=void 0,w!==void 0&&Fm(o,u,w)}v=v.next}while(v!==p)}}function Ad(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&i)===i){var p=u.create;u.destroy=p()}u=u.next}while(u!==o)}}function Um(i){var o=i.ref;if(o!==null){var u=i.stateNode;switch(i.tag){case 5:i=u;break;default:i=u}typeof o=="function"?o(i):o.current=i}}function C1(i){var o=i.alternate;o!==null&&(i.alternate=null,C1(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[Xr],delete o[oc],delete o[im],delete o[rI],delete o[iI])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function j1(i){return i.tag===5||i.tag===3||i.tag===4}function A1(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||j1(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Wm(i,o,u){var p=i.tag;if(p===5||p===6)i=i.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(i,o):u.insertBefore(i,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(i,u)):(o=u,o.appendChild(i)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=ad));else if(p!==4&&(i=i.child,i!==null))for(Wm(i,o,u),i=i.sibling;i!==null;)Wm(i,o,u),i=i.sibling}function $m(i,o,u){var p=i.tag;if(p===5||p===6)i=i.stateNode,o?u.insertBefore(i,o):u.appendChild(i);else if(p!==4&&(i=i.child,i!==null))for($m(i,o,u),i=i.sibling;i!==null;)$m(i,o,u),i=i.sibling}var Zt=null,kr=!1;function ys(i,o,u){for(u=u.child;u!==null;)R1(i,o,u),u=u.sibling}function R1(i,o,u){if(Dn&&typeof Dn.onCommitFiberUnmount=="function")try{Dn.onCommitFiberUnmount(lo,u)}catch{}switch(u.tag){case 5:dn||Ma(u,o);case 6:var p=Zt,v=kr;Zt=null,ys(i,o,u),Zt=p,kr=v,Zt!==null&&(kr?(i=Zt,u=u.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)):Zt.removeChild(u.stateNode));break;case 18:Zt!==null&&(kr?(i=Zt,u=u.stateNode,i.nodeType===8?rm(i.parentNode,u):i.nodeType===1&&rm(i,u),as(i)):rm(Zt,u.stateNode));break;case 4:p=Zt,v=kr,Zt=u.stateNode.containerInfo,kr=!0,ys(i,o,u),Zt=p,kr=v;break;case 0:case 11:case 14:case 15:if(!dn&&(p=u.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){v=p=p.next;do{var w=v,T=w.destroy;w=w.tag,T!==void 0&&((w&2)!==0||(w&4)!==0)&&Fm(u,o,T),v=v.next}while(v!==p)}ys(i,o,u);break;case 1:if(!dn&&(Ma(u,o),p=u.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=u.memoizedProps,p.state=u.memoizedState,p.componentWillUnmount()}catch(D){bt(u,o,D)}ys(i,o,u);break;case 21:ys(i,o,u);break;case 22:u.mode&1?(dn=(p=dn)||u.memoizedState!==null,ys(i,o,u),dn=p):ys(i,o,u);break;default:ys(i,o,u)}}function P1(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var u=i.stateNode;u===null&&(u=i.stateNode=new wI),o.forEach(function(p){var v=AI.bind(null,i,p);u.has(p)||(u.add(p),p.then(v,v))})}}function _r(i,o){var u=o.deletions;if(u!==null)for(var p=0;p<u.length;p++){var v=u[p];try{var w=i,T=o,D=T;e:for(;D!==null;){switch(D.tag){case 5:Zt=D.stateNode,kr=!1;break e;case 3:Zt=D.stateNode.containerInfo,kr=!0;break e;case 4:Zt=D.stateNode.containerInfo,kr=!0;break e}D=D.return}if(Zt===null)throw Error(t(160));R1(w,T,v),Zt=null,kr=!1;var F=v.alternate;F!==null&&(F.return=null),v.return=null}catch(Y){bt(v,o,Y)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)N1(o,i),o=o.sibling}function N1(i,o){var u=i.alternate,p=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(_r(o,i),ei(i),p&4){try{yc(3,i,i.return),Ad(3,i)}catch(xe){bt(i,i.return,xe)}try{yc(5,i,i.return)}catch(xe){bt(i,i.return,xe)}}break;case 1:_r(o,i),ei(i),p&512&&u!==null&&Ma(u,u.return);break;case 5:if(_r(o,i),ei(i),p&512&&u!==null&&Ma(u,u.return),i.flags&32){var v=i.stateNode;try{ro(v,"")}catch(xe){bt(i,i.return,xe)}}if(p&4&&(v=i.stateNode,v!=null)){var w=i.memoizedProps,T=u!==null?u.memoizedProps:w,D=i.type,F=i.updateQueue;if(i.updateQueue=null,F!==null)try{D==="input"&&w.type==="radio"&&w.name!=null&&Et(v,w),ta(D,T);var Y=ta(D,w);for(T=0;T<F.length;T+=2){var re=F[T],se=F[T+1];re==="style"?ea(v,se):re==="dangerouslySetInnerHTML"?Mu(v,se):re==="children"?ro(v,se):P(v,re,se,Y)}switch(D){case"input":vn(v,w);break;case"textarea":Nu(v,w);break;case"select":var ne=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!w.multiple;var fe=w.value;fe!=null?pr(v,!!w.multiple,fe,!1):ne!==!!w.multiple&&(w.defaultValue!=null?pr(v,!!w.multiple,w.defaultValue,!0):pr(v,!!w.multiple,w.multiple?[]:"",!1))}v[oc]=w}catch(xe){bt(i,i.return,xe)}}break;case 6:if(_r(o,i),ei(i),p&4){if(i.stateNode===null)throw Error(t(162));v=i.stateNode,w=i.memoizedProps;try{v.nodeValue=w}catch(xe){bt(i,i.return,xe)}}break;case 3:if(_r(o,i),ei(i),p&4&&u!==null&&u.memoizedState.isDehydrated)try{as(o.containerInfo)}catch(xe){bt(i,i.return,xe)}break;case 4:_r(o,i),ei(i);break;case 13:_r(o,i),ei(i),v=i.child,v.flags&8192&&(w=v.memoizedState!==null,v.stateNode.isHidden=w,!w||v.alternate!==null&&v.alternate.memoizedState!==null||(qm=ot())),p&4&&P1(i);break;case 22:if(re=u!==null&&u.memoizedState!==null,i.mode&1?(dn=(Y=dn)||re,_r(o,i),dn=Y):_r(o,i),ei(i),p&8192){if(Y=i.memoizedState!==null,(i.stateNode.isHidden=Y)&&!re&&(i.mode&1)!==0)for(ye=i,re=i.child;re!==null;){for(se=ye=re;ye!==null;){switch(ne=ye,fe=ne.child,ne.tag){case 0:case 11:case 14:case 15:yc(4,ne,ne.return);break;case 1:Ma(ne,ne.return);var ve=ne.stateNode;if(typeof ve.componentWillUnmount=="function"){p=ne,u=ne.return;try{o=p,ve.props=o.memoizedProps,ve.state=o.memoizedState,ve.componentWillUnmount()}catch(xe){bt(p,u,xe)}}break;case 5:Ma(ne,ne.return);break;case 22:if(ne.memoizedState!==null){V1(se);continue}}fe!==null?(fe.return=ne,ye=fe):V1(se)}re=re.sibling}e:for(re=null,se=i;;){if(se.tag===5){if(re===null){re=se;try{v=se.stateNode,Y?(w=v.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(D=se.stateNode,F=se.memoizedProps.style,T=F!=null&&F.hasOwnProperty("display")?F.display:null,D.style.display=Ji("display",T))}catch(xe){bt(i,i.return,xe)}}}else if(se.tag===6){if(re===null)try{se.stateNode.nodeValue=Y?"":se.memoizedProps}catch(xe){bt(i,i.return,xe)}}else if((se.tag!==22&&se.tag!==23||se.memoizedState===null||se===i)&&se.child!==null){se.child.return=se,se=se.child;continue}if(se===i)break e;for(;se.sibling===null;){if(se.return===null||se.return===i)break e;re===se&&(re=null),se=se.return}re===se&&(re=null),se.sibling.return=se.return,se=se.sibling}}break;case 19:_r(o,i),ei(i),p&4&&P1(i);break;case 21:break;default:_r(o,i),ei(i)}}function ei(i){var o=i.flags;if(o&2){try{e:{for(var u=i.return;u!==null;){if(j1(u)){var p=u;break e}u=u.return}throw Error(t(160))}switch(p.tag){case 5:var v=p.stateNode;p.flags&32&&(ro(v,""),p.flags&=-33);var w=A1(i);$m(i,w,v);break;case 3:case 4:var T=p.stateNode.containerInfo,D=A1(i);Wm(i,D,T);break;default:throw Error(t(161))}}catch(F){bt(i,i.return,F)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function kI(i,o,u){ye=i,M1(i)}function M1(i,o,u){for(var p=(i.mode&1)!==0;ye!==null;){var v=ye,w=v.child;if(v.tag===22&&p){var T=v.memoizedState!==null||jd;if(!T){var D=v.alternate,F=D!==null&&D.memoizedState!==null||dn;D=jd;var Y=dn;if(jd=T,(dn=F)&&!Y)for(ye=v;ye!==null;)T=ye,F=T.child,T.tag===22&&T.memoizedState!==null?L1(v):F!==null?(F.return=T,ye=F):L1(v);for(;w!==null;)ye=w,M1(w),w=w.sibling;ye=v,jd=D,dn=Y}D1(i)}else(v.subtreeFlags&8772)!==0&&w!==null?(w.return=v,ye=w):D1(i)}}function D1(i){for(;ye!==null;){var o=ye;if((o.flags&8772)!==0){var u=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:dn||Ad(5,o);break;case 1:var p=o.stateNode;if(o.flags&4&&!dn)if(u===null)p.componentDidMount();else{var v=o.elementType===o.type?u.memoizedProps:br(o.type,u.memoizedProps);p.componentDidUpdate(v,u.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var w=o.updateQueue;w!==null&&Vv(o,w,p);break;case 3:var T=o.updateQueue;if(T!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}Vv(o,T,u)}break;case 5:var D=o.stateNode;if(u===null&&o.flags&4){u=D;var F=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":F.autoFocus&&u.focus();break;case"img":F.src&&(u.src=F.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var Y=o.alternate;if(Y!==null){var re=Y.memoizedState;if(re!==null){var se=re.dehydrated;se!==null&&as(se)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}dn||o.flags&512&&Um(o)}catch(ne){bt(o,o.return,ne)}}if(o===i){ye=null;break}if(u=o.sibling,u!==null){u.return=o.return,ye=u;break}ye=o.return}}function V1(i){for(;ye!==null;){var o=ye;if(o===i){ye=null;break}var u=o.sibling;if(u!==null){u.return=o.return,ye=u;break}ye=o.return}}function L1(i){for(;ye!==null;){var o=ye;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{Ad(4,o)}catch(F){bt(o,u,F)}break;case 1:var p=o.stateNode;if(typeof p.componentDidMount=="function"){var v=o.return;try{p.componentDidMount()}catch(F){bt(o,v,F)}}var w=o.return;try{Um(o)}catch(F){bt(o,w,F)}break;case 5:var T=o.return;try{Um(o)}catch(F){bt(o,T,F)}}}catch(F){bt(o,o.return,F)}if(o===i){ye=null;break}var D=o.sibling;if(D!==null){D.return=o.return,ye=D;break}ye=o.return}}var _I=Math.ceil,Rd=K.ReactCurrentDispatcher,Hm=K.ReactCurrentOwner,tr=K.ReactCurrentBatchConfig,Ge=0,Kt=null,Dt=null,en=0,Wn=0,Da=hs(0),Ft=0,vc=null,Eo=0,Pd=0,Km=0,xc=null,Cn=null,qm=0,Va=1/0,Ii=null,Nd=!1,Gm=null,vs=null,Md=!1,xs=null,Dd=0,wc=0,Qm=null,Vd=-1,Ld=0;function wn(){return(Ge&6)!==0?ot():Vd!==-1?Vd:Vd=ot()}function ws(i){return(i.mode&1)===0?1:(Ge&2)!==0&&en!==0?en&-en:oI.transition!==null?(Ld===0&&(Ld=Fl()),Ld):(i=He,i!==0||(i=window.event,i=i===void 0?16:da(i.type)),i)}function Sr(i,o,u,p){if(50<wc)throw wc=0,Qm=null,Error(t(185));fo(i,u,p),((Ge&2)===0||i!==Kt)&&(i===Kt&&((Ge&2)===0&&(Pd|=u),Ft===4&&bs(i,en)),jn(i,p),u===1&&Ge===0&&(o.mode&1)===0&&(Va=ot()+500,dd&&ms()))}function jn(i,o){var u=i.callbackNode;ho(i,o);var p=mi(i,i===Kt?en:0);if(p===0)u!==null&&ia(u),i.callbackNode=null,i.callbackPriority=0;else if(o=p&-p,i.callbackPriority!==o){if(u!=null&&ia(u),o===1)i.tag===0?sI(B1.bind(null,i)):Sv(B1.bind(null,i)),tI(function(){(Ge&6)===0&&ms()}),u=null;else{switch(Fr(p)){case 1:u=sa;break;case 4:u=Ol;break;case 16:u=ao;break;case 536870912:u=oa;break;default:u=ao}u=q1(u,O1.bind(null,i))}i.callbackPriority=o,i.callbackNode=u}}function O1(i,o){if(Vd=-1,Ld=0,(Ge&6)!==0)throw Error(t(327));var u=i.callbackNode;if(La()&&i.callbackNode!==u)return null;var p=mi(i,i===Kt?en:0);if(p===0)return null;if((p&30)!==0||(p&i.expiredLanes)!==0||o)o=Od(i,p);else{o=p;var v=Ge;Ge|=2;var w=F1();(Kt!==i||en!==o)&&(Ii=null,Va=ot()+500,Io(i,o));do try{TI();break}catch(D){z1(i,D)}while(!0);fm(),Rd.current=w,Ge=v,Dt!==null?o=0:(Kt=null,en=0,o=Ft)}if(o!==0){if(o===2&&(v=zl(i),v!==0&&(p=v,o=Ym(i,v))),o===1)throw u=vc,Io(i,0),bs(i,p),jn(i,ot()),u;if(o===6)bs(i,p);else{if(v=i.current.alternate,(p&30)===0&&!SI(v)&&(o=Od(i,p),o===2&&(w=zl(i),w!==0&&(p=w,o=Ym(i,w))),o===1))throw u=vc,Io(i,0),bs(i,p),jn(i,ot()),u;switch(i.finishedWork=v,i.finishedLanes=p,o){case 0:case 1:throw Error(t(345));case 2:Co(i,Cn,Ii);break;case 3:if(bs(i,p),(p&130023424)===p&&(o=qm+500-ot(),10<o)){if(mi(i,0)!==0)break;if(v=i.suspendedLanes,(v&p)!==p){wn(),i.pingedLanes|=i.suspendedLanes&v;break}i.timeoutHandle=nm(Co.bind(null,i,Cn,Ii),o);break}Co(i,Cn,Ii);break;case 4:if(bs(i,p),(p&4194240)===p)break;for(o=i.eventTimes,v=-1;0<p;){var T=31-Vn(p);w=1<<T,T=o[T],T>v&&(v=T),p&=~w}if(p=v,p=ot()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*_I(p/1960))-p,10<p){i.timeoutHandle=nm(Co.bind(null,i,Cn,Ii),p);break}Co(i,Cn,Ii);break;case 5:Co(i,Cn,Ii);break;default:throw Error(t(329))}}}return jn(i,ot()),i.callbackNode===u?O1.bind(null,i):null}function Ym(i,o){var u=xc;return i.current.memoizedState.isDehydrated&&(Io(i,o).flags|=256),i=Od(i,o),i!==2&&(o=Cn,Cn=u,o!==null&&Xm(o)),i}function Xm(i){Cn===null?Cn=i:Cn.push.apply(Cn,i)}function SI(i){for(var o=i;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var p=0;p<u.length;p++){var v=u[p],w=v.getSnapshot;v=v.value;try{if(!xr(w(),v))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function bs(i,o){for(o&=~Km,o&=~Pd,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var u=31-Vn(o),p=1<<u;i[u]=-1,o&=~p}}function B1(i){if((Ge&6)!==0)throw Error(t(327));La();var o=mi(i,0);if((o&1)===0)return jn(i,ot()),null;var u=Od(i,o);if(i.tag!==0&&u===2){var p=zl(i);p!==0&&(o=p,u=Ym(i,p))}if(u===1)throw u=vc,Io(i,0),bs(i,o),jn(i,ot()),u;if(u===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,Co(i,Cn,Ii),jn(i,ot()),null}function Jm(i,o){var u=Ge;Ge|=1;try{return i(o)}finally{Ge=u,Ge===0&&(Va=ot()+500,dd&&ms())}}function To(i){xs!==null&&xs.tag===0&&(Ge&6)===0&&La();var o=Ge;Ge|=1;var u=tr.transition,p=He;try{if(tr.transition=null,He=1,i)return i()}finally{He=p,tr.transition=u,Ge=o,(Ge&6)===0&&ms()}}function Zm(){Wn=Da.current,lt(Da)}function Io(i,o){i.finishedWork=null,i.finishedLanes=0;var u=i.timeoutHandle;if(u!==-1&&(i.timeoutHandle=-1,eI(u)),Dt!==null)for(u=Dt.return;u!==null;){var p=u;switch(lm(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&cd();break;case 3:Pa(),lt(En),lt(ln),bm();break;case 5:xm(p);break;case 4:Pa();break;case 13:lt(gt);break;case 19:lt(gt);break;case 10:mm(p.type._context);break;case 22:case 23:Zm()}u=u.return}if(Kt=i,Dt=i=ks(i.current,null),en=Wn=o,Ft=0,vc=null,Km=Pd=Eo=0,Cn=xc=null,ko!==null){for(o=0;o<ko.length;o++)if(u=ko[o],p=u.interleaved,p!==null){u.interleaved=null;var v=p.next,w=u.pending;if(w!==null){var T=w.next;w.next=v,p.next=T}u.pending=p}ko=null}return i}function z1(i,o){do{var u=Dt;try{if(fm(),bd.current=Ed,kd){for(var p=yt.memoizedState;p!==null;){var v=p.queue;v!==null&&(v.pending=null),p=p.next}kd=!1}if(So=0,Ht=zt=yt=null,hc=!1,fc=0,Hm.current=null,u===null||u.return===null){Ft=1,vc=o,Dt=null;break}e:{var w=i,T=u.return,D=u,F=o;if(o=en,D.flags|=32768,F!==null&&typeof F=="object"&&typeof F.then=="function"){var Y=F,re=D,se=re.tag;if((re.mode&1)===0&&(se===0||se===11||se===15)){var ne=re.alternate;ne?(re.updateQueue=ne.updateQueue,re.memoizedState=ne.memoizedState,re.lanes=ne.lanes):(re.updateQueue=null,re.memoizedState=null)}var fe=d1(T);if(fe!==null){fe.flags&=-257,h1(fe,T,D,w,o),fe.mode&1&&u1(w,Y,o),o=fe,F=Y;var ve=o.updateQueue;if(ve===null){var xe=new Set;xe.add(F),o.updateQueue=xe}else ve.add(F);break e}else{if((o&1)===0){u1(w,Y,o),ep();break e}F=Error(t(426))}}else if(ft&&D.mode&1){var Ct=d1(T);if(Ct!==null){(Ct.flags&65536)===0&&(Ct.flags|=256),h1(Ct,T,D,w,o),dm(Na(F,D));break e}}w=F=Na(F,D),Ft!==4&&(Ft=2),xc===null?xc=[w]:xc.push(w),w=T;do{switch(w.tag){case 3:w.flags|=65536,o&=-o,w.lanes|=o;var q=l1(w,F,o);Dv(w,q);break e;case 1:D=F;var $=w.type,Q=w.stateNode;if((w.flags&128)===0&&(typeof $.getDerivedStateFromError=="function"||Q!==null&&typeof Q.componentDidCatch=="function"&&(vs===null||!vs.has(Q)))){w.flags|=65536,o&=-o,w.lanes|=o;var oe=c1(w,D,o);Dv(w,oe);break e}}w=w.return}while(w!==null)}W1(u)}catch(we){o=we,Dt===u&&u!==null&&(Dt=u=u.return);continue}break}while(!0)}function F1(){var i=Rd.current;return Rd.current=Ed,i===null?Ed:i}function ep(){(Ft===0||Ft===3||Ft===2)&&(Ft=4),Kt===null||(Eo&268435455)===0&&(Pd&268435455)===0||bs(Kt,en)}function Od(i,o){var u=Ge;Ge|=2;var p=F1();(Kt!==i||en!==o)&&(Ii=null,Io(i,o));do try{EI();break}catch(v){z1(i,v)}while(!0);if(fm(),Ge=u,Rd.current=p,Dt!==null)throw Error(t(261));return Kt=null,en=0,Ft}function EI(){for(;Dt!==null;)U1(Dt)}function TI(){for(;Dt!==null&&!oo();)U1(Dt)}function U1(i){var o=K1(i.alternate,i,Wn);i.memoizedProps=i.pendingProps,o===null?W1(i):Dt=o,Hm.current=null}function W1(i){var o=i;do{var u=o.alternate;if(i=o.return,(o.flags&32768)===0){if(u=vI(u,o,Wn),u!==null){Dt=u;return}}else{if(u=xI(u,o),u!==null){u.flags&=32767,Dt=u;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Ft=6,Dt=null;return}}if(o=o.sibling,o!==null){Dt=o;return}Dt=o=i}while(o!==null);Ft===0&&(Ft=5)}function Co(i,o,u){var p=He,v=tr.transition;try{tr.transition=null,He=1,II(i,o,u,p)}finally{tr.transition=v,He=p}return null}function II(i,o,u,p){do La();while(xs!==null);if((Ge&6)!==0)throw Error(t(327));u=i.finishedWork;var v=i.finishedLanes;if(u===null)return null;if(i.finishedWork=null,i.finishedLanes=0,u===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var w=u.lanes|u.childLanes;if(zf(i,w),i===Kt&&(Dt=Kt=null,en=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Md||(Md=!0,q1(ao,function(){return La(),null})),w=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||w){w=tr.transition,tr.transition=null;var T=He;He=1;var D=Ge;Ge|=4,Hm.current=null,bI(i,u),N1(u,i),qT(em),yi=!!Zf,em=Zf=null,i.current=u,kI(u),fi(),Ge=D,He=T,tr.transition=w}else i.current=u;if(Md&&(Md=!1,xs=i,Dd=v),w=i.pendingLanes,w===0&&(vs=null),Hu(u.stateNode),jn(i,ot()),o!==null)for(p=i.onRecoverableError,u=0;u<o.length;u++)v=o[u],p(v.value,{componentStack:v.stack,digest:v.digest});if(Nd)throw Nd=!1,i=Gm,Gm=null,i;return(Dd&1)!==0&&i.tag!==0&&La(),w=i.pendingLanes,(w&1)!==0?i===Qm?wc++:(wc=0,Qm=i):wc=0,ms(),null}function La(){if(xs!==null){var i=Fr(Dd),o=tr.transition,u=He;try{if(tr.transition=null,He=16>i?16:i,xs===null)var p=!1;else{if(i=xs,xs=null,Dd=0,(Ge&6)!==0)throw Error(t(331));var v=Ge;for(Ge|=4,ye=i.current;ye!==null;){var w=ye,T=w.child;if((ye.flags&16)!==0){var D=w.deletions;if(D!==null){for(var F=0;F<D.length;F++){var Y=D[F];for(ye=Y;ye!==null;){var re=ye;switch(re.tag){case 0:case 11:case 15:yc(8,re,w)}var se=re.child;if(se!==null)se.return=re,ye=se;else for(;ye!==null;){re=ye;var ne=re.sibling,fe=re.return;if(C1(re),re===Y){ye=null;break}if(ne!==null){ne.return=fe,ye=ne;break}ye=fe}}}var ve=w.alternate;if(ve!==null){var xe=ve.child;if(xe!==null){ve.child=null;do{var Ct=xe.sibling;xe.sibling=null,xe=Ct}while(xe!==null)}}ye=w}}if((w.subtreeFlags&2064)!==0&&T!==null)T.return=w,ye=T;else e:for(;ye!==null;){if(w=ye,(w.flags&2048)!==0)switch(w.tag){case 0:case 11:case 15:yc(9,w,w.return)}var q=w.sibling;if(q!==null){q.return=w.return,ye=q;break e}ye=w.return}}var $=i.current;for(ye=$;ye!==null;){T=ye;var Q=T.child;if((T.subtreeFlags&2064)!==0&&Q!==null)Q.return=T,ye=Q;else e:for(T=$;ye!==null;){if(D=ye,(D.flags&2048)!==0)try{switch(D.tag){case 0:case 11:case 15:Ad(9,D)}}catch(we){bt(D,D.return,we)}if(D===T){ye=null;break e}var oe=D.sibling;if(oe!==null){oe.return=D.return,ye=oe;break e}ye=D.return}}if(Ge=v,ms(),Dn&&typeof Dn.onPostCommitFiberRoot=="function")try{Dn.onPostCommitFiberRoot(lo,i)}catch{}p=!0}return p}finally{He=u,tr.transition=o}}return!1}function $1(i,o,u){o=Na(u,o),o=l1(i,o,1),i=gs(i,o,1),o=wn(),i!==null&&(fo(i,1,o),jn(i,o))}function bt(i,o,u){if(i.tag===3)$1(i,i,u);else for(;o!==null;){if(o.tag===3){$1(o,i,u);break}else if(o.tag===1){var p=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(vs===null||!vs.has(p))){i=Na(u,i),i=c1(o,i,1),o=gs(o,i,1),i=wn(),o!==null&&(fo(o,1,i),jn(o,i));break}}o=o.return}}function CI(i,o,u){var p=i.pingCache;p!==null&&p.delete(o),o=wn(),i.pingedLanes|=i.suspendedLanes&u,Kt===i&&(en&u)===u&&(Ft===4||Ft===3&&(en&130023424)===en&&500>ot()-qm?Io(i,0):Km|=u),jn(i,o)}function H1(i,o){o===0&&((i.mode&1)===0?o=1:(o=is,is<<=1,(is&130023424)===0&&(is=4194304)));var u=wn();i=Si(i,o),i!==null&&(fo(i,o,u),jn(i,u))}function jI(i){var o=i.memoizedState,u=0;o!==null&&(u=o.retryLane),H1(i,u)}function AI(i,o){var u=0;switch(i.tag){case 13:var p=i.stateNode,v=i.memoizedState;v!==null&&(u=v.retryLane);break;case 19:p=i.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(o),H1(i,u)}var K1;K1=function(i,o,u){if(i!==null)if(i.memoizedProps!==o.pendingProps||En.current)In=!0;else{if((i.lanes&u)===0&&(o.flags&128)===0)return In=!1,yI(i,o,u);In=(i.flags&131072)!==0}else In=!1,ft&&(o.flags&1048576)!==0&&Ev(o,fd,o.index);switch(o.lanes=0,o.tag){case 2:var p=o.type;Cd(i,o),i=o.pendingProps;var v=Ea(o,ln.current);Ra(o,u),v=Sm(null,o,p,i,v,u);var w=Em();return o.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Tn(p)?(w=!0,ud(o)):w=!1,o.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,ym(o),v.updater=Td,o.stateNode=v,v._reactInternals=o,Rm(o,p,i,u),o=Dm(null,o,p,!0,w,u)):(o.tag=0,ft&&w&&am(o),xn(null,o,v,u),o=o.child),o;case 16:p=o.elementType;e:{switch(Cd(i,o),i=o.pendingProps,v=p._init,p=v(p._payload),o.type=p,v=o.tag=PI(p),i=br(p,i),v){case 0:o=Mm(null,o,p,i,u);break e;case 1:o=v1(null,o,p,i,u);break e;case 11:o=f1(null,o,p,i,u);break e;case 14:o=m1(null,o,p,br(p.type,i),u);break e}throw Error(t(306,p,""))}return o;case 0:return p=o.type,v=o.pendingProps,v=o.elementType===p?v:br(p,v),Mm(i,o,p,v,u);case 1:return p=o.type,v=o.pendingProps,v=o.elementType===p?v:br(p,v),v1(i,o,p,v,u);case 3:e:{if(x1(o),i===null)throw Error(t(387));p=o.pendingProps,w=o.memoizedState,v=w.element,Mv(i,o),xd(o,p,null,u);var T=o.memoizedState;if(p=T.element,w.isDehydrated)if(w={element:p,isDehydrated:!1,cache:T.cache,pendingSuspenseBoundaries:T.pendingSuspenseBoundaries,transitions:T.transitions},o.updateQueue.baseState=w,o.memoizedState=w,o.flags&256){v=Na(Error(t(423)),o),o=w1(i,o,p,u,v);break e}else if(p!==v){v=Na(Error(t(424)),o),o=w1(i,o,p,u,v);break e}else for(Un=ds(o.stateNode.containerInfo.firstChild),Fn=o,ft=!0,wr=null,u=Pv(o,null,p,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Ca(),p===v){o=Ti(i,o,u);break e}xn(i,o,p,u)}o=o.child}return o;case 5:return Lv(o),i===null&&um(o),p=o.type,v=o.pendingProps,w=i!==null?i.memoizedProps:null,T=v.children,tm(p,v)?T=null:w!==null&&tm(p,w)&&(o.flags|=32),y1(i,o),xn(i,o,T,u),o.child;case 6:return i===null&&um(o),null;case 13:return b1(i,o,u);case 4:return vm(o,o.stateNode.containerInfo),p=o.pendingProps,i===null?o.child=ja(o,null,p,u):xn(i,o,p,u),o.child;case 11:return p=o.type,v=o.pendingProps,v=o.elementType===p?v:br(p,v),f1(i,o,p,v,u);case 7:return xn(i,o,o.pendingProps,u),o.child;case 8:return xn(i,o,o.pendingProps.children,u),o.child;case 12:return xn(i,o,o.pendingProps.children,u),o.child;case 10:e:{if(p=o.type._context,v=o.pendingProps,w=o.memoizedProps,T=v.value,rt(gd,p._currentValue),p._currentValue=T,w!==null)if(xr(w.value,T)){if(w.children===v.children&&!En.current){o=Ti(i,o,u);break e}}else for(w=o.child,w!==null&&(w.return=o);w!==null;){var D=w.dependencies;if(D!==null){T=w.child;for(var F=D.firstContext;F!==null;){if(F.context===p){if(w.tag===1){F=Ei(-1,u&-u),F.tag=2;var Y=w.updateQueue;if(Y!==null){Y=Y.shared;var re=Y.pending;re===null?F.next=F:(F.next=re.next,re.next=F),Y.pending=F}}w.lanes|=u,F=w.alternate,F!==null&&(F.lanes|=u),pm(w.return,u,o),D.lanes|=u;break}F=F.next}}else if(w.tag===10)T=w.type===o.type?null:w.child;else if(w.tag===18){if(T=w.return,T===null)throw Error(t(341));T.lanes|=u,D=T.alternate,D!==null&&(D.lanes|=u),pm(T,u,o),T=w.sibling}else T=w.child;if(T!==null)T.return=w;else for(T=w;T!==null;){if(T===o){T=null;break}if(w=T.sibling,w!==null){w.return=T.return,T=w;break}T=T.return}w=T}xn(i,o,v.children,u),o=o.child}return o;case 9:return v=o.type,p=o.pendingProps.children,Ra(o,u),v=Zn(v),p=p(v),o.flags|=1,xn(i,o,p,u),o.child;case 14:return p=o.type,v=br(p,o.pendingProps),v=br(p.type,v),m1(i,o,p,v,u);case 15:return p1(i,o,o.type,o.pendingProps,u);case 17:return p=o.type,v=o.pendingProps,v=o.elementType===p?v:br(p,v),Cd(i,o),o.tag=1,Tn(p)?(i=!0,ud(o)):i=!1,Ra(o,u),o1(o,p,v),Rm(o,p,v,u),Dm(null,o,p,!0,i,u);case 19:return _1(i,o,u);case 22:return g1(i,o,u)}throw Error(t(156,o.tag))};function q1(i,o){return Ll(i,o)}function RI(i,o,u,p){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nr(i,o,u,p){return new RI(i,o,u,p)}function tp(i){return i=i.prototype,!(!i||!i.isReactComponent)}function PI(i){if(typeof i=="function")return tp(i)?1:0;if(i!=null){if(i=i.$$typeof,i===U)return 11;if(i===Ke)return 14}return 2}function ks(i,o){var u=i.alternate;return u===null?(u=nr(i.tag,o,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=o,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&14680064,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,o=i.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u}function Bd(i,o,u,p,v,w){var T=2;if(p=i,typeof i=="function")tp(i)&&(T=1);else if(typeof i=="string")T=5;else e:switch(i){case A:return jo(u.children,v,w,o);case C:T=8,v|=8;break;case M:return i=nr(12,u,o,v|2),i.elementType=M,i.lanes=w,i;case L:return i=nr(13,u,o,v),i.elementType=L,i.lanes=w,i;case De:return i=nr(19,u,o,v),i.elementType=De,i.lanes=w,i;case Ee:return zd(u,v,w,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case O:T=10;break e;case B:T=9;break e;case U:T=11;break e;case Ke:T=14;break e;case pt:T=16,p=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=nr(T,u,o,v),o.elementType=i,o.type=p,o.lanes=w,o}function jo(i,o,u,p){return i=nr(7,i,p,o),i.lanes=u,i}function zd(i,o,u,p){return i=nr(22,i,p,o),i.elementType=Ee,i.lanes=u,i.stateNode={isHidden:!1},i}function np(i,o,u){return i=nr(6,i,null,o),i.lanes=u,i}function rp(i,o,u){return o=nr(4,i.children!==null?i.children:[],i.key,o),o.lanes=u,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function NI(i,o,u,p,v){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ul(0),this.expirationTimes=Ul(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ul(0),this.identifierPrefix=p,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function ip(i,o,u,p,v,w,T,D,F){return i=new NI(i,o,u,D,F),o===1?(o=1,w===!0&&(o|=8)):o=0,w=nr(3,null,null,o),i.current=w,w.stateNode=i,w.memoizedState={element:p,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},ym(w),i}function MI(i,o,u){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:W,key:p==null?null:""+p,children:i,containerInfo:o,implementation:u}}function G1(i){if(!i)return fs;i=i._reactInternals;e:{if(yr(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Tn(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var u=i.type;if(Tn(u))return kv(i,u,o)}return o}function Q1(i,o,u,p,v,w,T,D,F){return i=ip(u,p,!0,i,v,w,T,D,F),i.context=G1(null),u=i.current,p=wn(),v=ws(u),w=Ei(p,v),w.callback=o??null,gs(u,w,v),i.current.lanes=v,fo(i,v,p),jn(i,p),i}function Fd(i,o,u,p){var v=o.current,w=wn(),T=ws(v);return u=G1(u),o.context===null?o.context=u:o.pendingContext=u,o=Ei(w,T),o.payload={element:i},p=p===void 0?null:p,p!==null&&(o.callback=p),i=gs(v,o,T),i!==null&&(Sr(i,v,T,w),vd(i,v,T)),T}function Ud(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function Y1(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<o?u:o}}function sp(i,o){Y1(i,o),(i=i.alternate)&&Y1(i,o)}function DI(){return null}var X1=typeof reportError=="function"?reportError:function(i){console.error(i)};function op(i){this._internalRoot=i}Wd.prototype.render=op.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));Fd(i,o,null,null)},Wd.prototype.unmount=op.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;To(function(){Fd(null,i,null,null)}),o[wi]=null}};function Wd(i){this._internalRoot=i}Wd.prototype.unstable_scheduleHydration=function(i){if(i){var o=Kl();i={blockedOn:null,target:i,priority:o};for(var u=0;u<Ln.length&&o!==0&&o<Ln[u].priority;u++);Ln.splice(u,0,i),u===0&&ca(i)}};function ap(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function $d(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function J1(){}function VI(i,o,u,p,v){if(v){if(typeof p=="function"){var w=p;p=function(){var Y=Ud(T);w.call(Y)}}var T=Q1(o,p,i,0,null,!1,!1,"",J1);return i._reactRootContainer=T,i[wi]=T.current,ic(i.nodeType===8?i.parentNode:i),To(),T}for(;v=i.lastChild;)i.removeChild(v);if(typeof p=="function"){var D=p;p=function(){var Y=Ud(F);D.call(Y)}}var F=ip(i,0,!1,null,null,!1,!1,"",J1);return i._reactRootContainer=F,i[wi]=F.current,ic(i.nodeType===8?i.parentNode:i),To(function(){Fd(o,F,u,p)}),F}function Hd(i,o,u,p,v){var w=u._reactRootContainer;if(w){var T=w;if(typeof v=="function"){var D=v;v=function(){var F=Ud(T);D.call(F)}}Fd(o,T,i,v)}else T=VI(u,o,i,v,p);return Ud(T)}$l=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var u=Je(o.pendingLanes);u!==0&&(Wl(o,u|1),jn(o,ot()),(Ge&6)===0&&(Va=ot()+500,ms()))}break;case 13:To(function(){var p=Si(i,1);if(p!==null){var v=wn();Sr(p,i,1,v)}}),sp(i,1)}},aa=function(i){if(i.tag===13){var o=Si(i,134217728);if(o!==null){var u=wn();Sr(o,i,134217728,u)}sp(i,134217728)}},Hl=function(i){if(i.tag===13){var o=ws(i),u=Si(i,o);if(u!==null){var p=wn();Sr(u,i,o,p)}sp(i,o)}},Kl=function(){return He},ql=function(i,o){var u=He;try{return He=i,o()}finally{He=u}},ui=function(i,o,u){switch(o){case"input":if(vn(i,u),o=u.name,u.type==="radio"&&o!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var p=u[o];if(p!==i&&p.form===i.form){var v=ld(p);if(!v)throw Error(t(90));J(p),vn(p,v)}}}break;case"textarea":Nu(i,u);break;case"select":o=u.value,o!=null&&pr(i,!!u.multiple,o,!1)}},Vu=Jm,Lu=To;var LI={usingClientEntryPoint:!1,Events:[ac,_a,ld,es,ts,Jm]},bc={findFiberByHostInstance:vo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},OI={bundleType:bc.bundleType,version:bc.version,rendererPackageName:bc.rendererPackageName,rendererConfig:bc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:K.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=$u(i),i===null?null:i.stateNode},findFiberByHostInstance:bc.findFiberByHostInstance||DI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kd.isDisabled&&Kd.supportsFiber)try{lo=Kd.inject(OI),Dn=Kd}catch{}}return An.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LI,An.createPortal=function(i,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ap(o))throw Error(t(200));return MI(i,o,null,u)},An.createRoot=function(i,o){if(!ap(i))throw Error(t(299));var u=!1,p="",v=X1;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onRecoverableError!==void 0&&(v=o.onRecoverableError)),o=ip(i,1,!1,null,null,u,!1,p,v),i[wi]=o.current,ic(i.nodeType===8?i.parentNode:i),new op(o)},An.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=$u(o),i=i===null?null:i.stateNode,i},An.flushSync=function(i){return To(i)},An.hydrate=function(i,o,u){if(!$d(o))throw Error(t(200));return Hd(null,i,o,!0,u)},An.hydrateRoot=function(i,o,u){if(!ap(i))throw Error(t(405));var p=u!=null&&u.hydratedSources||null,v=!1,w="",T=X1;if(u!=null&&(u.unstable_strictMode===!0&&(v=!0),u.identifierPrefix!==void 0&&(w=u.identifierPrefix),u.onRecoverableError!==void 0&&(T=u.onRecoverableError)),o=Q1(o,null,i,1,u??null,v,!1,w,T),i[wi]=o.current,ic(i),p)for(i=0;i<p.length;i++)u=p[i],v=u._getVersion,v=v(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,v]:o.mutableSourceEagerHydrationData.push(u,v);return new Wd(o)},An.render=function(i,o,u){if(!$d(o))throw Error(t(200));return Hd(null,i,o,!1,u)},An.unmountComponentAtNode=function(i){if(!$d(i))throw Error(t(40));return i._reactRootContainer?(To(function(){Hd(null,null,i,!1,function(){i._reactRootContainer=null,i[wi]=null})}),!0):!1},An.unstable_batchedUpdates=Jm,An.unstable_renderSubtreeIntoContainer=function(i,o,u,p){if(!$d(u))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return Hd(i,o,u,!1,p)},An.version="18.3.1-next-f1338f8080-20240426",An}var ox;function qI(){if(ox)return up.exports;ox=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),up.exports=KI(),up.exports}var ax;function GI(){if(ax)return qd;ax=1;var n=qI();return qd.createRoot=n.createRoot,qd.hydrateRoot=n.hydrateRoot,qd}var QI=GI();/**
 * react-router v7.12.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var lx="popstate";function YI(n={}){function e(s,l){let{pathname:c="/",search:h="",hash:d=""}=Qo(s.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),Zp("",{pathname:c,search:h,hash:d},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(s,l){let c=s.document.querySelector("base"),h="";if(c&&c.getAttribute("href")){let d=s.location.href,m=d.indexOf("#");h=m===-1?d:d.slice(0,m)}return h+"#"+(typeof l=="string"?l:Kc(l))}function r(s,l){Kn(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return JI(e,t,r,n)}function mt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Kn(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function XI(){return Math.random().toString(36).substring(2,10)}function cx(n,e){return{usr:n.state,key:n.key,idx:e}}function Zp(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Qo(e):e,state:t,key:e&&e.key||r||XI()}}function Kc({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Qo(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function JI(n,e,t,r={}){let{window:s=document.defaultView,v5Compat:l=!1}=r,c=s.history,h="POP",d=null,m=g();m==null&&(m=0,c.replaceState({...c.state,idx:m},""));function g(){return(c.state||{idx:null}).idx}function y(){h="POP";let I=g(),N=I==null?null:I-m;m=I,d&&d({action:h,location:S.location,delta:N})}function x(I,N){h="PUSH";let V=Zp(S.location,I,N);t&&t(V,I),m=g()+1;let P=cx(V,m),K=S.createHref(V);try{c.pushState(P,"",K)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;s.location.assign(K)}l&&d&&d({action:h,location:S.location,delta:1})}function E(I,N){h="REPLACE";let V=Zp(S.location,I,N);t&&t(V,I),m=g();let P=cx(V,m),K=S.createHref(V);c.replaceState(P,"",K),l&&d&&d({action:h,location:S.location,delta:0})}function k(I){return ZI(I)}let S={get action(){return h},get location(){return n(s,c)},listen(I){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(lx,y),d=I,()=>{s.removeEventListener(lx,y),d=null}},createHref(I){return e(s,I)},createURL:k,encodeLocation(I){let N=k(I);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:x,replace:E,go(I){return c.go(I)}};return S}function ZI(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),mt(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Kc(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function kk(n,e,t="/"){return eC(n,e,t,!1)}function eC(n,e,t,r){let s=typeof e=="string"?Qo(e):e,l=Oi(s.pathname||"/",t);if(l==null)return null;let c=_k(n);tC(c);let h=null;for(let d=0;h==null&&d<c.length;++d){let m=hC(l);h=uC(c[d],m,r)}return h}function _k(n,e=[],t=[],r="",s=!1){let l=(c,h,d=s,m)=>{let g={relativePath:m===void 0?c.path||"":m,caseSensitive:c.caseSensitive===!0,childrenIndex:h,route:c};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(r)&&d)return;mt(g.relativePath.startsWith(r),`Absolute route path "${g.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(r.length)}let y=Ni([r,g.relativePath]),x=t.concat(g);c.children&&c.children.length>0&&(mt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),_k(c.children,e,x,y,d)),!(c.path==null&&!c.index)&&e.push({path:y,score:lC(y,c.index),routesMeta:x})};return n.forEach((c,h)=>{var d;if(c.path===""||!((d=c.path)!=null&&d.includes("?")))l(c,h);else for(let m of Sk(c.path))l(c,h,!0,m)}),e}function Sk(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),l=t.replace(/\?$/,"");if(r.length===0)return s?[l,""]:[l];let c=Sk(r.join("/")),h=[];return h.push(...c.map(d=>d===""?l:[l,d].join("/"))),s&&h.push(...c),h.map(d=>n.startsWith("/")&&d===""?"/":d)}function tC(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:cC(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var nC=/^:[\w-]+$/,rC=3,iC=2,sC=1,oC=10,aC=-2,ux=n=>n==="*";function lC(n,e){let t=n.split("/"),r=t.length;return t.some(ux)&&(r+=aC),e&&(r+=iC),t.filter(s=>!ux(s)).reduce((s,l)=>s+(nC.test(l)?rC:l===""?sC:oC),r)}function cC(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function uC(n,e,t=!1){let{routesMeta:r}=n,s={},l="/",c=[];for(let h=0;h<r.length;++h){let d=r[h],m=h===r.length-1,g=l==="/"?e:e.slice(l.length)||"/",y=Sh({path:d.relativePath,caseSensitive:d.caseSensitive,end:m},g),x=d.route;if(!y&&m&&t&&!r[r.length-1].route.index&&(y=Sh({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!y)return null;Object.assign(s,y.params),c.push({params:s,pathname:Ni([l,y.pathname]),pathnameBase:gC(Ni([l,y.pathnameBase])),route:x}),y.pathnameBase!=="/"&&(l=Ni([l,y.pathnameBase]))}return c}function Sh(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=dC(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let l=s[0],c=l.replace(/(.)\/+$/,"$1"),h=s.slice(1);return{params:r.reduce((m,{paramName:g,isOptional:y},x)=>{if(g==="*"){let k=h[x]||"";c=l.slice(0,l.length-k.length).replace(/(.)\/+$/,"$1")}const E=h[x];return y&&!E?m[g]=void 0:m[g]=(E||"").replace(/%2F/g,"/"),m},{}),pathname:l,pathnameBase:c,pattern:n}}function dC(n,e=!1,t=!0){Kn(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,h,d)=>(r.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function hC(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Kn(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Oi(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}var Ek=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fC=n=>Ek.test(n);function mC(n,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?Qo(n):n,l;if(t)if(fC(t))l=t;else{if(t.includes("//")){let c=t;t=t.replace(/\/\/+/g,"/"),Kn(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${t}`)}t.startsWith("/")?l=dx(t.substring(1),"/"):l=dx(t,e)}else l=e;return{pathname:l,search:yC(r),hash:vC(s)}}function dx(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function fp(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function pC(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function ry(n){let e=pC(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function iy(n,e,t,r=!1){let s;typeof n=="string"?s=Qo(n):(s={...n},mt(!s.pathname||!s.pathname.includes("?"),fp("?","pathname","search",s)),mt(!s.pathname||!s.pathname.includes("#"),fp("#","pathname","hash",s)),mt(!s.search||!s.search.includes("#"),fp("#","search","hash",s)));let l=n===""||s.pathname==="",c=l?"/":s.pathname,h;if(c==null)h=t;else{let y=e.length-1;if(!r&&c.startsWith("..")){let x=c.split("/");for(;x[0]==="..";)x.shift(),y-=1;s.pathname=x.join("/")}h=y>=0?e[y]:"/"}let d=mC(s,h),m=c&&c!=="/"&&c.endsWith("/"),g=(l||c===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(m||g)&&(d.pathname+="/"),d}var Ni=n=>n.join("/").replace(/\/\/+/g,"/"),gC=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),yC=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,vC=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,xC=class{constructor(n,e,t,r=!1){this.status=n,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function wC(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function bC(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Tk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Ik(n,e){let t=n;if(typeof t!="string"||!Ek.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let r=t,s=!1;if(Tk)try{let l=new URL(window.location.href),c=t.startsWith("//")?new URL(l.protocol+t):new URL(t),h=Oi(c.pathname,e);c.origin===l.origin&&h!=null?t=h+c.search+c.hash:s=!0}catch{Kn(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:s,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Ck=["POST","PUT","PATCH","DELETE"];new Set(Ck);var kC=["GET",...Ck];new Set(kC);var ml=j.createContext(null);ml.displayName="DataRouter";var rf=j.createContext(null);rf.displayName="DataRouterState";var _C=j.createContext(!1),jk=j.createContext({isTransitioning:!1});jk.displayName="ViewTransition";var SC=j.createContext(new Map);SC.displayName="Fetchers";var EC=j.createContext(null);EC.displayName="Await";var qn=j.createContext(null);qn.displayName="Navigation";var uu=j.createContext(null);uu.displayName="Location";var Mr=j.createContext({outlet:null,matches:[],isDataRoute:!1});Mr.displayName="Route";var sy=j.createContext(null);sy.displayName="RouteError";var Ak="REACT_ROUTER_ERROR",TC="REDIRECT",IC="ROUTE_ERROR_RESPONSE";function CC(n){if(n.startsWith(`${Ak}:${TC}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function jC(n){if(n.startsWith(`${Ak}:${IC}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new xC(e.status,e.statusText,e.data)}catch{}}function AC(n,{relative:e}={}){mt(pl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=j.useContext(qn),{hash:s,pathname:l,search:c}=du(n,{relative:e}),h=l;return t!=="/"&&(h=l==="/"?t:Ni([t,l])),r.createHref({pathname:h,search:c,hash:s})}function pl(){return j.useContext(uu)!=null}function mr(){return mt(pl(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(uu).location}var Rk="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Pk(n){j.useContext(qn).static||j.useLayoutEffect(n)}function qs(){let{isDataRoute:n}=j.useContext(Mr);return n?WC():RC()}function RC(){mt(pl(),"useNavigate() may be used only in the context of a <Router> component.");let n=j.useContext(ml),{basename:e,navigator:t}=j.useContext(qn),{matches:r}=j.useContext(Mr),{pathname:s}=mr(),l=JSON.stringify(ry(r)),c=j.useRef(!1);return Pk(()=>{c.current=!0}),j.useCallback((d,m={})=>{if(Kn(c.current,Rk),!c.current)return;if(typeof d=="number"){t.go(d);return}let g=iy(d,JSON.parse(l),s,m.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Ni([e,g.pathname])),(m.replace?t.replace:t.push)(g,m.state,m)},[e,t,l,s,n])}j.createContext(null);function oy(){let{matches:n}=j.useContext(Mr),e=n[n.length-1];return e?e.params:{}}function du(n,{relative:e}={}){let{matches:t}=j.useContext(Mr),{pathname:r}=mr(),s=JSON.stringify(ry(t));return j.useMemo(()=>iy(n,JSON.parse(s),r,e==="path"),[n,s,r,e])}function PC(n,e){return Nk(n,e)}function Nk(n,e,t,r,s){var V;mt(pl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=j.useContext(qn),{matches:c}=j.useContext(Mr),h=c[c.length-1],d=h?h.params:{},m=h?h.pathname:"/",g=h?h.pathnameBase:"/",y=h&&h.route;{let P=y&&y.path||"";Dk(m,!y||P.endsWith("*")||P.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${P}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${P}"> to <Route path="${P==="/"?"*":`${P}/*`}">.`)}let x=mr(),E;if(e){let P=typeof e=="string"?Qo(e):e;mt(g==="/"||((V=P.pathname)==null?void 0:V.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${P.pathname}" was given in the \`location\` prop.`),E=P}else E=x;let k=E.pathname||"/",S=k;if(g!=="/"){let P=g.replace(/^\//,"").split("/");S="/"+k.replace(/^\//,"").split("/").slice(P.length).join("/")}let I=kk(n,{pathname:S});Kn(y||I!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),Kn(I==null||I[I.length-1].route.element!==void 0||I[I.length-1].route.Component!==void 0||I[I.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let N=LC(I&&I.map(P=>Object.assign({},P,{params:Object.assign({},d,P.params),pathname:Ni([g,l.encodeLocation?l.encodeLocation(P.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?g:Ni([g,l.encodeLocation?l.encodeLocation(P.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:P.pathnameBase])})),c,t,r,s);return e&&N?j.createElement(uu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},N):N}function NC(){let n=UC(),e=wC(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:l},"ErrorBoundary")," or"," ",j.createElement("code",{style:l},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),t?j.createElement("pre",{style:s},t):null,c)}var MC=j.createElement(NC,null),Mk=class extends j.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=jC(n.digest);t&&(n=t)}let e=n!==void 0?j.createElement(Mr.Provider,{value:this.props.routeContext},j.createElement(sy.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?j.createElement(DC,{error:n},e):e}};Mk.contextType=_C;var mp=new WeakMap;function DC({children:n,error:e}){let{basename:t}=j.useContext(qn);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=CC(e.digest);if(r){let s=mp.get(e);if(s)throw s;let l=Ik(r.location,t);if(Tk&&!mp.get(e))if(l.isExternal||r.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:r.replace}));throw mp.set(e,c),c}return j.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return n}function VC({routeContext:n,match:e,children:t}){let r=j.useContext(ml);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),j.createElement(Mr.Provider,{value:n},t)}function LC(n,e=[],t=null,r=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,c=t==null?void 0:t.errors;if(c!=null){let g=l.findIndex(y=>y.route.id&&(c==null?void 0:c[y.route.id])!==void 0);mt(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,g+1))}let h=!1,d=-1;if(t)for(let g=0;g<l.length;g++){let y=l[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(d=g),y.route.id){let{loaderData:x,errors:E}=t,k=y.route.loader&&!x.hasOwnProperty(y.route.id)&&(!E||E[y.route.id]===void 0);if(y.route.lazy||k){h=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}let m=t&&r?(g,y)=>{var x,E;r(g,{location:t.location,params:((E=(x=t.matches)==null?void 0:x[0])==null?void 0:E.params)??{},unstable_pattern:bC(t.matches),errorInfo:y})}:void 0;return l.reduceRight((g,y,x)=>{let E,k=!1,S=null,I=null;t&&(E=c&&y.route.id?c[y.route.id]:void 0,S=y.route.errorElement||MC,h&&(d<0&&x===0?(Dk("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),k=!0,I=null):d===x&&(k=!0,I=y.route.hydrateFallbackElement||null)));let N=e.concat(l.slice(0,x+1)),V=()=>{let P;return E?P=S:k?P=I:y.route.Component?P=j.createElement(y.route.Component,null):y.route.element?P=y.route.element:P=g,j.createElement(VC,{match:y,routeContext:{outlet:g,matches:N,isDataRoute:t!=null},children:P})};return t&&(y.route.ErrorBoundary||y.route.errorElement||x===0)?j.createElement(Mk,{location:t.location,revalidation:t.revalidation,component:S,error:E,children:V(),routeContext:{outlet:null,matches:N,isDataRoute:!0},onError:m}):V()},null)}function ay(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function OC(n){let e=j.useContext(ml);return mt(e,ay(n)),e}function BC(n){let e=j.useContext(rf);return mt(e,ay(n)),e}function zC(n){let e=j.useContext(Mr);return mt(e,ay(n)),e}function ly(n){let e=zC(n),t=e.matches[e.matches.length-1];return mt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function FC(){return ly("useRouteId")}function UC(){var r;let n=j.useContext(sy),e=BC("useRouteError"),t=ly("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function WC(){let{router:n}=OC("useNavigate"),e=ly("useNavigate"),t=j.useRef(!1);return Pk(()=>{t.current=!0}),j.useCallback(async(s,l={})=>{Kn(t.current,Rk),t.current&&(typeof s=="number"?await n.navigate(s):await n.navigate(s,{fromRouteId:e,...l}))},[n,e])}var hx={};function Dk(n,e,t){!e&&!hx[n]&&(hx[n]=!0,Kn(!1,t))}j.memo($C);function $C({routes:n,future:e,state:t,onError:r}){return Nk(n,void 0,t,r,e)}function HC({to:n,replace:e,state:t,relative:r}){mt(pl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=j.useContext(qn);Kn(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=j.useContext(Mr),{pathname:c}=mr(),h=qs(),d=iy(n,ry(l),c,r==="path"),m=JSON.stringify(d);return j.useEffect(()=>{h(JSON.parse(m),{replace:e,state:t,relative:r})},[h,m,r,e,t]),null}function ct(n){mt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function KC({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:l=!1,unstable_useTransitions:c}){mt(!pl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=n.replace(/^\/*/,"/"),d=j.useMemo(()=>({basename:h,navigator:s,static:l,unstable_useTransitions:c,future:{}}),[h,s,l,c]);typeof t=="string"&&(t=Qo(t));let{pathname:m="/",search:g="",hash:y="",state:x=null,key:E="default"}=t,k=j.useMemo(()=>{let S=Oi(m,h);return S==null?null:{location:{pathname:S,search:g,hash:y,state:x,key:E},navigationType:r}},[h,m,g,y,x,E,r]);return Kn(k!=null,`<Router basename="${h}"> is not able to match the URL "${m}${g}${y}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:j.createElement(qn.Provider,{value:d},j.createElement(uu.Provider,{children:e,value:k}))}function qC({children:n,location:e}){return PC(eg(n),e)}function eg(n,e=[]){let t=[];return j.Children.forEach(n,(r,s)=>{if(!j.isValidElement(r))return;let l=[...e,s];if(r.type===j.Fragment){t.push.apply(t,eg(r.props.children,l));return}mt(r.type===ct,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),mt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=eg(r.props.children,l)),t.push(c)}),t}var lh="get",ch="application/x-www-form-urlencoded";function sf(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function GC(n){return sf(n)&&n.tagName.toLowerCase()==="button"}function QC(n){return sf(n)&&n.tagName.toLowerCase()==="form"}function YC(n){return sf(n)&&n.tagName.toLowerCase()==="input"}function XC(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function JC(n,e){return n.button===0&&(!e||e==="_self")&&!XC(n)}var Gd=null;function ZC(){if(Gd===null)try{new FormData(document.createElement("form"),0),Gd=!1}catch{Gd=!0}return Gd}var ej=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function pp(n){return n!=null&&!ej.has(n)?(Kn(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ch}"`),null):n}function tj(n,e){let t,r,s,l,c;if(QC(n)){let h=n.getAttribute("action");r=h?Oi(h,e):null,t=n.getAttribute("method")||lh,s=pp(n.getAttribute("enctype"))||ch,l=new FormData(n)}else if(GC(n)||YC(n)&&(n.type==="submit"||n.type==="image")){let h=n.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=n.getAttribute("formaction")||h.getAttribute("action");if(r=d?Oi(d,e):null,t=n.getAttribute("formmethod")||h.getAttribute("method")||lh,s=pp(n.getAttribute("formenctype"))||pp(h.getAttribute("enctype"))||ch,l=new FormData(h,n),!ZC()){let{name:m,type:g,value:y}=n;if(g==="image"){let x=m?`${m}.`:"";l.append(`${x}x`,"0"),l.append(`${x}y`,"0")}else m&&l.append(m,y)}}else{if(sf(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=lh,r=null,s=ch,c=n}return l&&s==="text/plain"&&(c=l,l=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function cy(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function nj(n,e,t,r){let s=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?s.pathname.endsWith("/")?s.pathname=`${s.pathname}_.${r}`:s.pathname=`${s.pathname}.${r}`:s.pathname==="/"?s.pathname=`_root.${r}`:e&&Oi(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${r}`,s}async function rj(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ij(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function sj(n,e,t){let r=await Promise.all(n.map(async s=>{let l=e.routes[s.route.id];if(l){let c=await rj(l,t);return c.links?c.links():[]}return[]}));return cj(r.flat(1).filter(ij).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function fx(n,e,t,r,s,l){let c=(d,m)=>t[m]?d.route.id!==t[m].route.id:!0,h=(d,m)=>{var g;return t[m].pathname!==d.pathname||((g=t[m].route.path)==null?void 0:g.endsWith("*"))&&t[m].params["*"]!==d.params["*"]};return l==="assets"?e.filter((d,m)=>c(d,m)||h(d,m)):l==="data"?e.filter((d,m)=>{var y;let g=r.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(c(d,m)||h(d,m))return!0;if(d.route.shouldRevalidate){let x=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((y=t[0])==null?void 0:y.params)||{},nextUrl:new URL(n,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function oj(n,e,{includeHydrateFallback:t}={}){return aj(n.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let l=[s.module];return s.clientActionModule&&(l=l.concat(s.clientActionModule)),s.clientLoaderModule&&(l=l.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(l=l.concat(s.hydrateFallbackModule)),s.imports&&(l=l.concat(s.imports)),l}).flat(1))}function aj(n){return[...new Set(n)]}function lj(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function cj(n,e){let t=new Set;return new Set(e),n.reduce((r,s)=>{let l=JSON.stringify(lj(s));return t.has(l)||(t.add(l),r.push({key:l,link:s})),r},[])}function Vk(){let n=j.useContext(ml);return cy(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function uj(){let n=j.useContext(rf);return cy(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var uy=j.createContext(void 0);uy.displayName="FrameworkContext";function Lk(){let n=j.useContext(uy);return cy(n,"You must render this element inside a <HydratedRouter> element"),n}function dj(n,e){let t=j.useContext(uy),[r,s]=j.useState(!1),[l,c]=j.useState(!1),{onFocus:h,onBlur:d,onMouseEnter:m,onMouseLeave:g,onTouchStart:y}=e,x=j.useRef(null);j.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let S=N=>{N.forEach(V=>{c(V.isIntersecting)})},I=new IntersectionObserver(S,{threshold:.5});return x.current&&I.observe(x.current),()=>{I.disconnect()}}},[n]),j.useEffect(()=>{if(r){let S=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(S)}}},[r]);let E=()=>{s(!0)},k=()=>{s(!1),c(!1)};return t?n!=="intent"?[l,x,{}]:[l,x,{onFocus:_c(h,E),onBlur:_c(d,k),onMouseEnter:_c(m,E),onMouseLeave:_c(g,k),onTouchStart:_c(y,E)}]:[!1,x,{}]}function _c(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function hj({page:n,...e}){let{router:t}=Vk(),r=j.useMemo(()=>kk(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?j.createElement(mj,{page:n,matches:r,...e}):null}function fj(n){let{manifest:e,routeModules:t}=Lk(),[r,s]=j.useState([]);return j.useEffect(()=>{let l=!1;return sj(n,e,t).then(c=>{l||s(c)}),()=>{l=!0}},[n,e,t]),r}function mj({page:n,matches:e,...t}){let r=mr(),{future:s,manifest:l,routeModules:c}=Lk(),{basename:h}=Vk(),{loaderData:d,matches:m}=uj(),g=j.useMemo(()=>fx(n,e,m,l,r,"data"),[n,e,m,l,r]),y=j.useMemo(()=>fx(n,e,m,l,r,"assets"),[n,e,m,l,r]),x=j.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let S=new Set,I=!1;if(e.forEach(V=>{var K;let P=l.routes[V.route.id];!P||!P.hasLoader||(!g.some(z=>z.route.id===V.route.id)&&V.route.id in d&&((K=c[V.route.id])!=null&&K.shouldRevalidate)||P.hasClientLoader?I=!0:S.add(V.route.id))}),S.size===0)return[];let N=nj(n,h,s.unstable_trailingSlashAwareDataRequests,"data");return I&&S.size>0&&N.searchParams.set("_routes",e.filter(V=>S.has(V.route.id)).map(V=>V.route.id).join(",")),[N.pathname+N.search]},[h,s.unstable_trailingSlashAwareDataRequests,d,r,l,g,e,n,c]),E=j.useMemo(()=>oj(y,l),[y,l]),k=fj(y);return j.createElement(j.Fragment,null,x.map(S=>j.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...t})),E.map(S=>j.createElement("link",{key:S,rel:"modulepreload",href:S,...t})),k.map(({key:S,link:I})=>j.createElement("link",{key:S,nonce:t.nonce,...I})))}function pj(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var gj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{gj&&(window.__reactRouterVersion="7.12.0")}catch{}function yj({basename:n,children:e,unstable_useTransitions:t,window:r}){let s=j.useRef();s.current==null&&(s.current=YI({window:r,v5Compat:!0}));let l=s.current,[c,h]=j.useState({action:l.action,location:l.location}),d=j.useCallback(m=>{t===!1?h(m):j.startTransition(()=>h(m))},[t]);return j.useLayoutEffect(()=>l.listen(d),[l,d]),j.createElement(KC,{basename:n,children:e,location:c.location,navigationType:c.action,navigator:l,unstable_useTransitions:t})}var Ok=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ue=j.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:l,replace:c,state:h,target:d,to:m,preventScrollReset:g,viewTransition:y,unstable_defaultShouldRevalidate:x,...E},k){let{basename:S,unstable_useTransitions:I}=j.useContext(qn),N=typeof m=="string"&&Ok.test(m),V=Ik(m,S);m=V.to;let P=AC(m,{relative:s}),[K,z,W]=dj(r,E),A=bj(m,{replace:c,state:h,target:d,preventScrollReset:g,relative:s,viewTransition:y,unstable_defaultShouldRevalidate:x,unstable_useTransitions:I});function C(O){e&&e(O),O.defaultPrevented||A(O)}let M=j.createElement("a",{...E,...W,href:V.absoluteURL||P,onClick:V.isExternal||l?e:C,ref:pj(k,z),target:d,"data-discover":!N&&t==="render"?"true":void 0});return K&&!N?j.createElement(j.Fragment,null,M,j.createElement(hj,{page:P})):M});ue.displayName="Link";var vj=j.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:l,to:c,viewTransition:h,children:d,...m},g){let y=du(c,{relative:m.relative}),x=mr(),E=j.useContext(rf),{navigator:k,basename:S}=j.useContext(qn),I=E!=null&&Tj(y)&&h===!0,N=k.encodeLocation?k.encodeLocation(y).pathname:y.pathname,V=x.pathname,P=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;t||(V=V.toLowerCase(),P=P?P.toLowerCase():null,N=N.toLowerCase()),P&&S&&(P=Oi(P,S)||P);const K=N!=="/"&&N.endsWith("/")?N.length-1:N.length;let z=V===N||!s&&V.startsWith(N)&&V.charAt(K)==="/",W=P!=null&&(P===N||!s&&P.startsWith(N)&&P.charAt(N.length)==="/"),A={isActive:z,isPending:W,isTransitioning:I},C=z?e:void 0,M;typeof r=="function"?M=r(A):M=[r,z?"active":null,W?"pending":null,I?"transitioning":null].filter(Boolean).join(" ");let O=typeof l=="function"?l(A):l;return j.createElement(ue,{...m,"aria-current":C,className:M,ref:g,style:O,to:c,viewTransition:h},typeof d=="function"?d(A):d)});vj.displayName="NavLink";var xj=j.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:l,method:c=lh,action:h,onSubmit:d,relative:m,preventScrollReset:g,viewTransition:y,unstable_defaultShouldRevalidate:x,...E},k)=>{let{unstable_useTransitions:S}=j.useContext(qn),I=Sj(),N=Ej(h,{relative:m}),V=c.toLowerCase()==="get"?"get":"post",P=typeof h=="string"&&Ok.test(h),K=z=>{if(d&&d(z),z.defaultPrevented)return;z.preventDefault();let W=z.nativeEvent.submitter,A=(W==null?void 0:W.getAttribute("formmethod"))||c,C=()=>I(W||z.currentTarget,{fetcherKey:e,method:A,navigate:t,replace:s,state:l,relative:m,preventScrollReset:g,viewTransition:y,unstable_defaultShouldRevalidate:x});S&&t!==!1?j.startTransition(()=>C()):C()};return j.createElement("form",{ref:k,method:V,action:N,onSubmit:r?d:K,...E,"data-discover":!P&&n==="render"?"true":void 0})});xj.displayName="Form";function wj(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Bk(n){let e=j.useContext(ml);return mt(e,wj(n)),e}function bj(n,{target:e,replace:t,state:r,preventScrollReset:s,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:h,unstable_useTransitions:d}={}){let m=qs(),g=mr(),y=du(n,{relative:l});return j.useCallback(x=>{if(JC(x,e)){x.preventDefault();let E=t!==void 0?t:Kc(g)===Kc(y),k=()=>m(n,{replace:E,state:r,preventScrollReset:s,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:h});d?j.startTransition(()=>k()):k()}},[g,m,y,t,r,e,n,s,l,c,h,d])}var kj=0,_j=()=>`__${String(++kj)}__`;function Sj(){let{router:n}=Bk("useSubmit"),{basename:e}=j.useContext(qn),t=FC(),r=n.fetch,s=n.navigate;return j.useCallback(async(l,c={})=>{let{action:h,method:d,encType:m,formData:g,body:y}=tj(l,e);if(c.navigate===!1){let x=c.fetcherKey||_j();await r(x,t,c.action||h,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:g,body:y,formMethod:c.method||d,formEncType:c.encType||m,flushSync:c.flushSync})}else await s(c.action||h,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:g,body:y,formMethod:c.method||d,formEncType:c.encType||m,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[r,s,e,t])}function Ej(n,{relative:e}={}){let{basename:t}=j.useContext(qn),r=j.useContext(Mr);mt(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),l={...du(n||".",{relative:e})},c=mr();if(n==null){l.search=c.search;let h=new URLSearchParams(l.search),d=h.getAll("index");if(d.some(g=>g==="")){h.delete("index"),d.filter(y=>y).forEach(y=>h.append("index",y));let g=h.toString();l.search=g?`?${g}`:""}}return(!n||n===".")&&s.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Ni([t,l.pathname])),Kc(l)}function Tj(n,{relative:e}={}){let t=j.useContext(jk);mt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Bk("useViewTransitionState"),s=du(n,{relative:e});if(!t.isTransitioning)return!1;let l=Oi(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=Oi(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Sh(s.pathname,c)!=null||Sh(s.pathname,l)!=null}const Ij=()=>{};var mx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},Cj=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const l=n[t++];e[r++]=String.fromCharCode((s&31)<<6|l&63)}else if(s>239&&s<365){const l=n[t++],c=n[t++],h=n[t++],d=((s&7)<<18|(l&63)<<12|(c&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const l=n[t++],c=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(l&63)<<6|c&63)}}return e.join("")},Fk={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const l=n[s],c=s+1<n.length,h=c?n[s+1]:0,d=s+2<n.length,m=d?n[s+2]:0,g=l>>2,y=(l&3)<<4|h>>4;let x=(h&15)<<2|m>>6,E=m&63;d||(E=64,c||(x=64)),r.push(t[g],t[y],t[x],t[E])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(zk(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Cj(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const l=t[n.charAt(s++)],h=s<n.length?t[n.charAt(s)]:0;++s;const m=s<n.length?t[n.charAt(s)]:64;++s;const y=s<n.length?t[n.charAt(s)]:64;if(++s,l==null||h==null||m==null||y==null)throw new jj;const x=l<<2|h>>4;if(r.push(x),m!==64){const E=h<<4&240|m>>2;if(r.push(E),y!==64){const k=m<<6&192|y;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class jj extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Aj=function(n){const e=zk(n);return Fk.encodeByteArray(e,!0)},Eh=function(n){return Aj(n).replace(/\./g,"")},Uk=function(n){try{return Fk.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rj(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pj=()=>Rj().__FIREBASE_DEFAULTS__,Nj=()=>{if(typeof process>"u"||typeof mx>"u")return;const n=mx.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Mj=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Uk(n[1]);return e&&JSON.parse(e)},of=()=>{try{return Ij()||Pj()||Nj()||Mj()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Wk=n=>{var e,t;return(t=(e=of())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},Dj=n=>{const e=Wk(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},$k=()=>{var n;return(n=of())==null?void 0:n.config},Hk=n=>{var e;return(e=of())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Kk(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lj(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Eh(JSON.stringify(t)),Eh(JSON.stringify(c)),""].join(".")}const Vc={};function Oj(){const n={prod:[],emulator:[]};for(const e of Object.keys(Vc))Vc[e]?n.emulator.push(e):n.prod.push(e);return n}function Bj(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let px=!1;function qk(n,e){if(typeof window>"u"||typeof document>"u"||!gl(window.location.host)||Vc[n]===e||Vc[n]||px)return;Vc[n]=e;function t(x){return`__firebase__banner__${x}`}const r="__firebase__banner",l=Oj().prod.length>0;function c(){const x=document.getElementById(r);x&&x.remove()}function h(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function d(x,E){x.setAttribute("width","24"),x.setAttribute("id",E),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function m(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{px=!0,c()},x}function g(x,E){x.setAttribute("id",E),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function y(){const x=Bj(r),E=t("text"),k=document.getElementById(E)||document.createElement("span"),S=t("learnmore"),I=document.getElementById(S)||document.createElement("a"),N=t("preprendIcon"),V=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const P=x.element;h(P),g(I,S);const K=m();d(V,N),P.append(V,k,I,K),document.body.appendChild(P)}l?(k.innerText="Preview backend disconnected.",V.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(V.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zj(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(yn())}function Fj(){var e;const n=(e=of())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Uj(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Wj(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function $j(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Hj(){const n=yn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Kj(){return!Fj()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qj(){try{return typeof indexedDB=="object"}catch{return!1}}function Gj(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var l;e(((l=s.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qj="FirebaseError";class Hi extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Qj,Object.setPrototypeOf(this,Hi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hu.prototype.create)}}class hu{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,l=this.errors[e],c=l?Yj(l,r):"Error",h=`${this.serviceName}: ${c} (${s}).`;return new Hi(s,h,r)}}function Yj(n,e){return n.replace(Xj,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Xj=/\{\$([^}]+)}/g;function Jj(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ls(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const l=n[s],c=e[s];if(gx(l)&&gx(c)){if(!Ls(l,c))return!1}else if(l!==c)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function gx(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fu(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Cc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,l]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(l)}}),e}function jc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function Zj(n,e){const t=new eA(n,e);return t.subscribe.bind(t)}class eA{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");tA(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=gp),s.error===void 0&&(s.error=gp),s.complete===void 0&&(s.complete=gp);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tA(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function gp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(n){return n&&n._delegate?n._delegate:n}class zo{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Vj;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(iA(e))try{this.getOrInitializeService({instanceIdentifier:Ro})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:s});r.resolve(l)}catch{}}}}clearInstance(e=Ro){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ro){return this.instances.has(e)}getOptions(e=Ro){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);r===h&&c.resolve(s)}return s}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const l=this.instances.get(r);return l&&e(l,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:rA(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ro){return this.component?this.component.multipleInstances?e:Ro:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function rA(n){return n===Ro?void 0:n}function iA(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new nA(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Fe||(Fe={}));const oA={debug:Fe.DEBUG,verbose:Fe.VERBOSE,info:Fe.INFO,warn:Fe.WARN,error:Fe.ERROR,silent:Fe.SILENT},aA=Fe.INFO,lA={[Fe.DEBUG]:"log",[Fe.VERBOSE]:"log",[Fe.INFO]:"info",[Fe.WARN]:"warn",[Fe.ERROR]:"error"},cA=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=lA[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class dy{constructor(e){this.name=e,this._logLevel=aA,this._logHandler=cA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?oA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Fe.DEBUG,...e),this._logHandler(this,Fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Fe.VERBOSE,...e),this._logHandler(this,Fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Fe.INFO,...e),this._logHandler(this,Fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Fe.WARN,...e),this._logHandler(this,Fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Fe.ERROR,...e),this._logHandler(this,Fe.ERROR,...e)}}const uA=(n,e)=>e.some(t=>n instanceof t);let yx,vx;function dA(){return yx||(yx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hA(){return vx||(vx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Gk=new WeakMap,tg=new WeakMap,Qk=new WeakMap,yp=new WeakMap,hy=new WeakMap;function fA(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(Rs(n.result)),s()},c=()=>{r(n.error),s()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&Gk.set(t,n)}).catch(()=>{}),hy.set(e,n),e}function mA(n){if(tg.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),s()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});tg.set(n,e)}let ng={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return tg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Qk.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Rs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function pA(n){ng=n(ng)}function gA(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(vp(this),e,...t);return Qk.set(r,e.sort?e.sort():[e]),Rs(r)}:hA().includes(n)?function(...e){return n.apply(vp(this),e),Rs(Gk.get(this))}:function(...e){return Rs(n.apply(vp(this),e))}}function yA(n){return typeof n=="function"?gA(n):(n instanceof IDBTransaction&&mA(n),uA(n,dA())?new Proxy(n,ng):n)}function Rs(n){if(n instanceof IDBRequest)return fA(n);if(yp.has(n))return yp.get(n);const e=yA(n);return e!==n&&(yp.set(n,e),hy.set(e,n)),e}const vp=n=>hy.get(n);function vA(n,e,{blocked:t,upgrade:r,blocking:s,terminated:l}={}){const c=indexedDB.open(n,e),h=Rs(c);return r&&c.addEventListener("upgradeneeded",d=>{r(Rs(c.result),d.oldVersion,d.newVersion,Rs(c.transaction),d)}),t&&c.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),h.then(d=>{l&&d.addEventListener("close",()=>l()),s&&d.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const xA=["get","getKey","getAll","getAllKeys","count"],wA=["put","add","delete","clear"],xp=new Map;function xx(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(xp.get(e))return xp.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=wA.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||xA.includes(t)))return;const l=async function(c,...h){const d=this.transaction(c,s?"readwrite":"readonly");let m=d.store;return r&&(m=m.index(h.shift())),(await Promise.all([m[t](...h),s&&d.done]))[0]};return xp.set(e,l),l}pA(n=>({...n,get:(e,t,r)=>xx(e,t)||n.get(e,t,r),has:(e,t)=>!!xx(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(kA(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function kA(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const rg="@firebase/app",wx="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi=new dy("@firebase/app"),_A="@firebase/app-compat",SA="@firebase/analytics-compat",EA="@firebase/analytics",TA="@firebase/app-check-compat",IA="@firebase/app-check",CA="@firebase/auth",jA="@firebase/auth-compat",AA="@firebase/database",RA="@firebase/data-connect",PA="@firebase/database-compat",NA="@firebase/functions",MA="@firebase/functions-compat",DA="@firebase/installations",VA="@firebase/installations-compat",LA="@firebase/messaging",OA="@firebase/messaging-compat",BA="@firebase/performance",zA="@firebase/performance-compat",FA="@firebase/remote-config",UA="@firebase/remote-config-compat",WA="@firebase/storage",$A="@firebase/storage-compat",HA="@firebase/firestore",KA="@firebase/ai",qA="@firebase/firestore-compat",GA="firebase",QA="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ig="[DEFAULT]",YA={[rg]:"fire-core",[_A]:"fire-core-compat",[EA]:"fire-analytics",[SA]:"fire-analytics-compat",[IA]:"fire-app-check",[TA]:"fire-app-check-compat",[CA]:"fire-auth",[jA]:"fire-auth-compat",[AA]:"fire-rtdb",[RA]:"fire-data-connect",[PA]:"fire-rtdb-compat",[NA]:"fire-fn",[MA]:"fire-fn-compat",[DA]:"fire-iid",[VA]:"fire-iid-compat",[LA]:"fire-fcm",[OA]:"fire-fcm-compat",[BA]:"fire-perf",[zA]:"fire-perf-compat",[FA]:"fire-rc",[UA]:"fire-rc-compat",[WA]:"fire-gcs",[$A]:"fire-gcs-compat",[HA]:"fire-fst",[qA]:"fire-fst-compat",[KA]:"fire-vertex","fire-js":"fire-js",[GA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Th=new Map,XA=new Map,sg=new Map;function bx(n,e){try{n.container.addComponent(e)}catch(t){Bi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function nl(n){const e=n.name;if(sg.has(e))return Bi.debug(`There were multiple attempts to register component ${e}.`),!1;sg.set(e,n);for(const t of Th.values())bx(t,n);for(const t of XA.values())bx(t,n);return!0}function fy(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function $n(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ps=new hu("app","Firebase",JA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new zo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ps.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yl=QA;function Yk(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:ig,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Ps.create("bad-app-name",{appName:String(s)});if(t||(t=$k()),!t)throw Ps.create("no-options");const l=Th.get(s);if(l){if(Ls(t,l.options)&&Ls(r,l.config))return l;throw Ps.create("duplicate-app",{appName:s})}const c=new sA(s);for(const d of sg.values())c.addComponent(d);const h=new ZA(t,r,c);return Th.set(s,h),h}function Xk(n=ig){const e=Th.get(n);if(!e&&n===ig&&$k())return Yk();if(!e)throw Ps.create("no-app",{appName:n});return e}function Ns(n,e,t){let r=YA[n]??n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),l=e.match(/\s|\//);if(s||l){const c=[`Unable to register library "${r}" with version "${e}":`];s&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Bi.warn(c.join(" "));return}nl(new zo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e5="firebase-heartbeat-database",t5=1,qc="firebase-heartbeat-store";let wp=null;function Jk(){return wp||(wp=vA(e5,t5,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(qc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ps.create("idb-open",{originalErrorMessage:n.message})})),wp}async function n5(n){try{const t=(await Jk()).transaction(qc),r=await t.objectStore(qc).get(Zk(n));return await t.done,r}catch(e){if(e instanceof Hi)Bi.warn(e.message);else{const t=Ps.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Bi.warn(t.message)}}}async function kx(n,e){try{const r=(await Jk()).transaction(qc,"readwrite");await r.objectStore(qc).put(e,Zk(n)),await r.done}catch(t){if(t instanceof Hi)Bi.warn(t.message);else{const r=Ps.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Bi.warn(r.message)}}}function Zk(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r5=1024,i5=30;class s5{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new a5(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=_x();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:s}),this._heartbeatsCache.heartbeats.length>i5){const c=l5(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Bi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=_x(),{heartbeatsToSend:r,unsentEntries:s}=o5(this._heartbeatsCache.heartbeats),l=Eh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Bi.warn(t),""}}}function _x(){return new Date().toISOString().substring(0,10)}function o5(n,e=r5){const t=[];let r=n.slice();for(const s of n){const l=t.find(c=>c.agent===s.agent);if(l){if(l.dates.push(s.date),Sx(t)>e){l.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),Sx(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class a5{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return qj()?Gj().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await n5(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return kx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return kx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Sx(n){return Eh(JSON.stringify({version:2,heartbeats:n})).length}function l5(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c5(n){nl(new zo("platform-logger",e=>new bA(e),"PRIVATE")),nl(new zo("heartbeat",e=>new s5(e),"PRIVATE")),Ns(rg,wx,n),Ns(rg,wx,"esm2020"),Ns("fire-js","")}c5("");function e_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const u5=e_,t_=new hu("auth","Firebase",e_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ih=new dy("@firebase/auth");function d5(n,...e){Ih.logLevel<=Fe.WARN&&Ih.warn(`Auth (${yl}): ${n}`,...e)}function uh(n,...e){Ih.logLevel<=Fe.ERROR&&Ih.error(`Auth (${yl}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cr(n,...e){throw py(n,...e)}function jr(n,...e){return py(n,...e)}function my(n,e,t){const r={...u5(),[e]:t};return new hu("auth","Firebase",r).create(e,{appName:n.name})}function Mi(n){return my(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function h5(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&cr(n,"argument-error"),my(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function py(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return t_.create(n,...e)}function Te(n,e,...t){if(!n)throw py(e,...t)}function Ri(n){const e="INTERNAL ASSERTION FAILED: "+n;throw uh(e),new Error(e)}function zi(n,e){n||Ri(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function og(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function f5(){return Ex()==="http:"||Ex()==="https:"}function Ex(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(f5()||Wj()||"connection"in navigator)?navigator.onLine:!0}function p5(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e,t){this.shortDelay=e,this.longDelay=t,zi(t>e,"Short delay should be less than long delay!"),this.isMobile=zj()||$j()}get(){return m5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gy(n,e){zi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ri("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ri("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ri("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y5=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],v5=new mu(3e4,6e4);function Gs(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Ki(n,e,t,r,s={}){return r_(n,s,async()=>{let l={},c={};r&&(e==="GET"?c=r:l={body:JSON.stringify(r)});const h=fu({key:n.config.apiKey,...c}).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const m={method:e,headers:d,...l};return Uj()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&gl(n.emulatorConfig.host)&&(m.credentials="include"),n_.fetch()(await i_(n,n.config.apiHost,t,h),m)})}async function r_(n,e,t){n._canInitEmulator=!1;const r={...g5,...e};try{const s=new w5(n),l=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Qd(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const h=l.ok?c.errorMessage:c.error.message,[d,m]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Qd(n,"credential-already-in-use",c);if(d==="EMAIL_EXISTS")throw Qd(n,"email-already-in-use",c);if(d==="USER_DISABLED")throw Qd(n,"user-disabled",c);const g=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw my(n,g,m);cr(n,g)}}catch(s){if(s instanceof Hi)throw s;cr(n,"network-request-failed",{message:String(s)})}}async function pu(n,e,t,r,s={}){const l=await Ki(n,e,t,r,s);return"mfaPendingCredential"in l&&cr(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function i_(n,e,t,r){const s=`${e}${t}?${r}`,l=n,c=l.config.emulator?gy(n.config,s):`${n.config.apiScheme}://${s}`;return y5.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function x5(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class w5{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(jr(this.auth,"network-request-failed")),v5.get())})}}function Qd(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=jr(n,e,r);return s.customData._tokenResponse=t,s}function Tx(n){return n!==void 0&&n.enterprise!==void 0}class b5{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return x5(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function k5(n,e){return Ki(n,"GET","/v2/recaptchaConfig",Gs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _5(n,e){return Ki(n,"POST","/v1/accounts:delete",e)}async function Ch(n,e){return Ki(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function S5(n,e=!1){const t=Pt(n),r=await t.getIdToken(e),s=yy(r);Te(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const l=typeof s.firebase=="object"?s.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:s,token:r,authTime:Lc(bp(s.auth_time)),issuedAtTime:Lc(bp(s.iat)),expirationTime:Lc(bp(s.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function bp(n){return Number(n)*1e3}function yy(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return uh("JWT malformed, contained fewer than 3 sections"),null;try{const s=Uk(t);return s?JSON.parse(s):(uh("Failed to decode base64 JWT payload"),null)}catch(s){return uh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Ix(n){const e=yy(n);return Te(e,"internal-error"),Te(typeof e.exp<"u","internal-error"),Te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rl(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Hi&&E5(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function E5({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Lc(this.lastLoginAt),this.creationTime=Lc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jh(n){var y;const e=n.auth,t=await n.getIdToken(),r=await rl(n,Ch(e,{idToken:t}));Te(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const l=(y=s.providerUserInfo)!=null&&y.length?s_(s.providerUserInfo):[],c=C5(n.providerData,l),h=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!(c!=null&&c.length),m=h?d:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new ag(s.createdAt,s.lastLoginAt),isAnonymous:m};Object.assign(n,g)}async function I5(n){const e=Pt(n);await jh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function C5(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function s_(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j5(n,e){const t=await r_(n,{},async()=>{const r=fu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:l}=n.config,c=await i_(n,s,"/v1/token",`key=${l}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:h,body:r};return n.emulatorConfig&&gl(n.emulatorConfig.host)&&(d.credentials="include"),n_.fetch()(c,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function A5(n,e){return Ki(n,"POST","/v2/accounts:revokeToken",Gs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Te(e.idToken,"internal-error"),Te(typeof e.idToken<"u","internal-error"),Te(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ix(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Te(e.length!==0,"internal-error");const t=Ix(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:l}=await j5(e,t);this.updateTokensAndExpiration(r,s,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:l}=t,c=new Ga;return r&&(Te(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),s&&(Te(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),l&&(Te(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ga,this.toJSON())}_performRefresh(){return Ri("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ss(n,e){Te(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Cr{constructor({uid:e,auth:t,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new T5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ag(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await rl(this,this.stsTokenManager.getToken(this.auth,e));return Te(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return S5(this,e)}reload(){return I5(this)}_assign(e){this!==e&&(Te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Cr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await jh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if($n(this.auth.app))return Promise.reject(Mi(this.auth));const e=await this.getIdToken();return await rl(this,_5(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,s=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,h=t.tenantId??void 0,d=t._redirectEventId??void 0,m=t.createdAt??void 0,g=t.lastLoginAt??void 0,{uid:y,emailVerified:x,isAnonymous:E,providerData:k,stsTokenManager:S}=t;Te(y&&S,e,"internal-error");const I=Ga.fromJSON(this.name,S);Te(typeof y=="string",e,"internal-error"),Ss(r,e.name),Ss(s,e.name),Te(typeof x=="boolean",e,"internal-error"),Te(typeof E=="boolean",e,"internal-error"),Ss(l,e.name),Ss(c,e.name),Ss(h,e.name),Ss(d,e.name),Ss(m,e.name),Ss(g,e.name);const N=new Cr({uid:y,auth:e,email:s,emailVerified:x,displayName:r,isAnonymous:E,photoURL:c,phoneNumber:l,tenantId:h,stsTokenManager:I,createdAt:m,lastLoginAt:g});return k&&Array.isArray(k)&&(N.providerData=k.map(V=>({...V}))),d&&(N._redirectEventId=d),N}static async _fromIdTokenResponse(e,t,r=!1){const s=new Ga;s.updateFromServerResponse(t);const l=new Cr({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await jh(l),l}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];Te(s.localId!==void 0,"internal-error");const l=s.providerUserInfo!==void 0?s_(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!(l!=null&&l.length),h=new Ga;h.updateFromIdToken(r);const d=new Cr({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:c}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new ag(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(l!=null&&l.length)};return Object.assign(d,m),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx=new Map;function Pi(n){zi(n instanceof Function,"Expected a class definition");let e=Cx.get(n);return e?(zi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Cx.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}o_.type="NONE";const jx=o_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dh(n,e,t){return`firebase:${n}:${e}:${t}`}class Qa{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:l}=this.auth;this.fullUserKey=dh(this.userKey,s.apiKey,l),this.fullPersistenceKey=dh("persistence",s.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Ch(this.auth,{idToken:e}).catch(()=>{});return t?Cr._fromGetAccountInfoResponse(this.auth,t,e):null}return Cr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Qa(Pi(jx),e,r);const s=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let l=s[0]||Pi(jx);const c=dh(r,e.config.apiKey,e.name);let h=null;for(const m of t)try{const g=await m._get(c);if(g){let y;if(typeof g=="string"){const x=await Ch(e,{idToken:g}).catch(()=>{});if(!x)break;y=await Cr._fromGetAccountInfoResponse(e,x,g)}else y=Cr._fromJSON(e,g);m!==l&&(h=y),l=m;break}}catch{}const d=s.filter(m=>m._shouldAllowMigration);return!l._shouldAllowMigration||!d.length?new Qa(l,e,r):(l=d[0],h&&await l._set(c,h.toJSON()),await Promise.all(t.map(async m=>{if(m!==l)try{await m._remove(c)}catch{}})),new Qa(l,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ax(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(u_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(a_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(h_(e))return"Blackberry";if(f_(e))return"Webos";if(l_(e))return"Safari";if((e.includes("chrome/")||c_(e))&&!e.includes("edge/"))return"Chrome";if(d_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function a_(n=yn()){return/firefox\//i.test(n)}function l_(n=yn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function c_(n=yn()){return/crios\//i.test(n)}function u_(n=yn()){return/iemobile/i.test(n)}function d_(n=yn()){return/android/i.test(n)}function h_(n=yn()){return/blackberry/i.test(n)}function f_(n=yn()){return/webos/i.test(n)}function vy(n=yn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function R5(n=yn()){var e;return vy(n)&&!!((e=window.navigator)!=null&&e.standalone)}function P5(){return Hj()&&document.documentMode===10}function m_(n=yn()){return vy(n)||d_(n)||f_(n)||h_(n)||/windows phone/i.test(n)||u_(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p_(n,e=[]){let t;switch(n){case"Browser":t=Ax(yn());break;case"Worker":t=`${Ax(yn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${yl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((c,h)=>{try{const d=e(l);c(d)}catch(d){h(d)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M5(n,e={}){return Ki(n,"GET","/v2/passwordPolicy",Gs(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D5=6;class V5{constructor(e){var r;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??D5,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L5{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Rx(this),this.idTokenSubscription=new Rx(this),this.beforeStateQueue=new N5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=t_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Pi(t)),this._initializationPromise=this.queue(async()=>{var r,s,l;if(!this._deleted&&(this.persistenceManager=await Qa.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Ch(this,{idToken:e}),r=await Cr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if($n(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(h,h))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,h=r==null?void 0:r._redirectEventId,d=await this.tryRedirectSignIn(e);(!c||c===h)&&(d!=null&&d.user)&&(r=d.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await jh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=p5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if($n(this.app))return Promise.reject(Mi(this));const t=e?Pt(e):null;return t&&Te(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return $n(this.app)?Promise.reject(Mi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return $n(this.app)?Promise.reject(Mi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Pi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await M5(this),t=new V5(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new hu("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await A5(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Pi(e)||this._popupRedirectResolver;Te(t,this,"argument-error"),this.redirectPersistenceManager=await Qa.create(this,[Pi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Te(h,this,"internal-error"),h.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,r,s);return()=>{c=!0,d()}}else{const d=e.addObserver(t);return()=>{c=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=p_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if($n(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&d5(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Qs(n){return Pt(n)}class Rx{constructor(e){this.auth=e,this.observer=null,this.addObserver=Zj(t=>this.observer=t)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let af={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function O5(n){af=n}function g_(n){return af.loadJS(n)}function B5(){return af.recaptchaEnterpriseScript}function z5(){return af.gapiScript}function F5(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class U5{constructor(){this.enterprise=new W5}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class W5{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const $5="recaptcha-enterprise",y_="NO_RECAPTCHA";class H5{constructor(e){this.type=$5,this.auth=Qs(e)}async verify(e="verify",t=!1){async function r(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,h)=>{k5(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const m=new b5(d);return l.tenantId==null?l._agentRecaptchaConfig=m:l._tenantRecaptchaConfigs[l.tenantId]=m,c(m.siteKey)}}).catch(d=>{h(d)})})}function s(l,c,h){const d=window.grecaptcha;Tx(d)?d.enterprise.ready(()=>{d.enterprise.execute(l,{action:e}).then(m=>{c(m)}).catch(()=>{c(y_)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new U5().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{r(this.auth).then(h=>{if(!t&&Tx(window.grecaptcha))s(h,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let d=B5();d.length!==0&&(d+=h),g_(d).then(()=>{s(h,l,c)}).catch(m=>{c(m)})}}).catch(h=>{c(h)})})}}async function Px(n,e,t,r=!1,s=!1){const l=new H5(n);let c;if(s)c=y_;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const h={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const d=h.phoneEnrollmentInfo.phoneNumber,m=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const d=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return r?Object.assign(h,{captchaResp:c}):Object.assign(h,{captchaResponse:c}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function lg(n,e,t,r,s){var l;if((l=n._getRecaptchaConfig())!=null&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Px(n,e,t,t==="getOobCode");return r(n,c)}else return r(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await Px(n,e,t,t==="getOobCode");return r(n,h)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K5(n,e){const t=fy(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),l=t.getOptions();if(Ls(l,e??{}))return s;cr(s,"already-initialized")}return t.initialize({options:e})}function q5(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Pi);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function G5(n,e,t){const r=Qs(n);Te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,l=v_(e),{host:c,port:h}=Q5(e),d=h===null?"":`:${h}`,m={url:`${l}//${c}${d}/`},g=Object.freeze({host:c,port:h,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Te(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Te(Ls(m,r.config.emulator)&&Ls(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=m,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,gl(c)?(Kk(`${l}//${c}${d}`),qk("Auth",!0)):Y5()}function v_(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Q5(n){const e=v_(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const l=s[1];return{host:l,port:Nx(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:Nx(c)}}}function Nx(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function Y5(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ri("not implemented")}_getIdTokenResponse(e){return Ri("not implemented")}_linkToIdToken(e,t){return Ri("not implemented")}_getReauthenticationResolver(e){return Ri("not implemented")}}async function X5(n,e){return Ki(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J5(n,e){return pu(n,"POST","/v1/accounts:signInWithPassword",Gs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z5(n,e){return pu(n,"POST","/v1/accounts:signInWithEmailLink",Gs(n,e))}async function eR(n,e){return pu(n,"POST","/v1/accounts:signInWithEmailLink",Gs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc extends xy{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Gc(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Gc(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lg(e,t,"signInWithPassword",J5);case"emailLink":return Z5(e,{email:this._email,oobCode:this._password});default:cr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lg(e,r,"signUpPassword",X5);case"emailLink":return eR(e,{idToken:t,email:this._email,oobCode:this._password});default:cr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ya(n,e){return pu(n,"POST","/v1/accounts:signInWithIdp",Gs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR="http://localhost";class Fo extends xy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Fo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):cr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...l}=t;if(!r||!s)return null;const c=new Fo(r,s);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Ya(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Ya(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ya(e,t)}buildRequest(){const e={requestUri:tR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=fu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nR(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function rR(n){const e=Cc(jc(n)).link,t=e?Cc(jc(e)).deep_link_id:null,r=Cc(jc(n)).deep_link_id;return(r?Cc(jc(r)).link:null)||r||t||e||n}class wy{constructor(e){const t=Cc(jc(e)),r=t.apiKey??null,s=t.oobCode??null,l=nR(t.mode??null);Te(r&&s&&l,"argument-error"),this.apiKey=r,this.operation=l,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=rR(e);try{return new wy(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(){this.providerId=vl.PROVIDER_ID}static credential(e,t){return Gc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=wy.parseLink(t);return Te(r,"argument-error"),Gc._fromEmailAndCode(e,r.code,r.tenantId)}}vl.PROVIDER_ID="password";vl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";vl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu extends by{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts extends gu{constructor(){super("facebook.com")}static credential(e){return Fo._fromParams({providerId:Ts.PROVIDER_ID,signInMethod:Ts.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ts.credentialFromTaggedObject(e)}static credentialFromError(e){return Ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ts.credential(e.oauthAccessToken)}catch{return null}}}Ts.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ts.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji extends gu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Fo._fromParams({providerId:ji.PROVIDER_ID,signInMethod:ji.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ji.credentialFromTaggedObject(e)}static credentialFromError(e){return ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return ji.credential(t,r)}catch{return null}}}ji.GOOGLE_SIGN_IN_METHOD="google.com";ji.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is extends gu{constructor(){super("github.com")}static credential(e){return Fo._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Is.credentialFromTaggedObject(e)}static credentialFromError(e){return Is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Is.credential(e.oauthAccessToken)}catch{return null}}}Is.GITHUB_SIGN_IN_METHOD="github.com";Is.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs extends gu{constructor(){super("twitter.com")}static credential(e,t){return Fo._fromParams({providerId:Cs.PROVIDER_ID,signInMethod:Cs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Cs.credentialFromTaggedObject(e)}static credentialFromError(e){return Cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Cs.credential(t,r)}catch{return null}}}Cs.TWITTER_SIGN_IN_METHOD="twitter.com";Cs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iR(n,e){return pu(n,"POST","/v1/accounts:signUp",Gs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const l=await Cr._fromIdTokenResponse(e,r,s),c=Mx(r);return new Uo({user:l,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=Mx(r);return new Uo({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function Mx(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah extends Hi{constructor(e,t,r,s){super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Ah.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new Ah(e,t,r,s)}}function x_(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Ah._fromErrorAndOperation(n,l,e,r):l})}async function sR(n,e,t=!1){const r=await rl(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Uo._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oR(n,e,t=!1){const{auth:r}=n;if($n(r.app))return Promise.reject(Mi(r));const s="reauthenticate";try{const l=await rl(n,x_(r,s,e,n),t);Te(l.idToken,r,"internal-error");const c=yy(l.idToken);Te(c,r,"internal-error");const{sub:h}=c;return Te(n.uid===h,r,"user-mismatch"),Uo._forOperation(n,s,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&cr(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w_(n,e,t=!1){if($n(n.app))return Promise.reject(Mi(n));const r="signIn",s=await x_(n,r,e),l=await Uo._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(l.user),l}async function aR(n,e){return w_(Qs(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b_(n){const e=Qs(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function lR(n,e,t){if($n(n.app))return Promise.reject(Mi(n));const r=Qs(n),c=await lg(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",iR).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&b_(n),d}),h=await Uo._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(h.user),h}function cR(n,e,t){return $n(n.app)?Promise.reject(Mi(n)):aR(Pt(n),vl.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&b_(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uR(n,e){return Ki(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dR(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Pt(n),l={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=await rl(r,uR(r.auth,l));r.displayName=c.displayName||null,r.photoURL=c.photoUrl||null;const h=r.providerData.find(({providerId:d})=>d==="password");h&&(h.displayName=r.displayName,h.photoURL=r.photoURL),await r._updateTokensIfNecessary(c)}function hR(n,e,t,r){return Pt(n).onIdTokenChanged(e,t,r)}function fR(n,e,t){return Pt(n).beforeAuthStateChanged(e,t)}function mR(n,e,t,r){return Pt(n).onAuthStateChanged(e,t,r)}function pR(n){return Pt(n).signOut()}const Rh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Rh,"1"),this.storage.removeItem(Rh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR=1e3,yR=10;class __ extends k_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=m_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,h,d)=>{this.notifyListeners(c,d)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);P5()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,yR):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},gR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}__.type="LOCAL";const vR=__;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_ extends k_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}S_.type="SESSION";const E_=S_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xR(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new lf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:l}=t.data,c=this.handlersMap[s];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const h=Array.from(c).map(async m=>m(t.origin,l)),d=await xR(h);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}lf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ky(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let l,c;return new Promise((h,d)=>{const m=ky("",20);s.port1.start();const g=setTimeout(()=>{d(new Error("unsupported_event"))},r);c={messageChannel:s,onMessage(y){const x=y;if(x.data.eventId===m)switch(x.data.status){case"ack":clearTimeout(g),l=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),h(x.data.response);break;default:clearTimeout(g),clearTimeout(l),d(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ni(){return window}function bR(n){ni().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T_(){return typeof ni().WorkerGlobalScope<"u"&&typeof ni().importScripts=="function"}async function kR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _R(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function SR(){return T_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_="firebaseLocalStorageDb",ER=1,Ph="firebaseLocalStorage",C_="fbase_key";class yu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function cf(n,e){return n.transaction([Ph],e?"readwrite":"readonly").objectStore(Ph)}function TR(){const n=indexedDB.deleteDatabase(I_);return new yu(n).toPromise()}function cg(){const n=indexedDB.open(I_,ER);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Ph,{keyPath:C_})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Ph)?e(r):(r.close(),await TR(),e(await cg()))})})}async function Dx(n,e,t){const r=cf(n,!0).put({[C_]:e,value:t});return new yu(r).toPromise()}async function IR(n,e){const t=cf(n,!1).get(e),r=await new yu(t).toPromise();return r===void 0?null:r.value}function Vx(n,e){const t=cf(n,!0).delete(e);return new yu(t).toPromise()}const CR=800,jR=3;class j_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await cg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>jR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return T_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=lf._getInstance(SR()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await kR(),!this.activeServiceWorker)return;this.sender=new wR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_R()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await cg();return await Dx(e,Rh,"1"),await Vx(e,Rh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Dx(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>IR(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Vx(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const l=cf(s,!1).getAll();return new yu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:l}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(l)&&(this.notifyListeners(s,l),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),CR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}j_.type="LOCAL";const AR=j_;new mu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A_(n,e){return e?Pi(e):(Te(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y extends xy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ya(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ya(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ya(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function RR(n){return w_(n.auth,new _y(n),n.bypassAuthState)}function PR(n){const{auth:e,user:t}=n;return Te(t,e,"internal-error"),oR(t,new _y(n),n.bypassAuthState)}async function NR(n){const{auth:e,user:t}=n;return Te(t,e,"internal-error"),sR(t,new _y(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(e,t,r,s,l=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:l,error:c,type:h}=e;if(c){this.reject(c);return}const d={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return RR;case"linkViaPopup":case"linkViaRedirect":return NR;case"reauthViaPopup":case"reauthViaRedirect":return PR;default:cr(this.auth,"internal-error")}}resolve(e){zi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR=new mu(2e3,1e4);async function DR(n,e,t){if($n(n.app))return Promise.reject(jr(n,"operation-not-supported-in-this-environment"));const r=Qs(n);h5(n,e,by);const s=A_(r,t);return new No(r,"signInViaPopup",e,s).executeNotNull()}class No extends R_{constructor(e,t,r,s,l){super(e,t,s,l),this.provider=r,this.authWindow=null,this.pollId=null,No.currentPopupAction&&No.currentPopupAction.cancel(),No.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Te(e,this.auth,"internal-error"),e}async onExecution(){zi(this.filter.length===1,"Popup operations only handle one event");const e=ky();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(jr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(jr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,No.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if((r=(t=this.authWindow)==null?void 0:t.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(jr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,MR.get())};e()}}No.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR="pendingRedirect",hh=new Map;class LR extends R_{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=hh.get(this.auth._key());if(!e){try{const r=await OR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}hh.set(this.auth._key(),e)}return this.bypassAuthState||hh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function OR(n,e){const t=FR(e),r=zR(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function BR(n,e){hh.set(n._key(),e)}function zR(n){return Pi(n._redirectPersistence)}function FR(n){return dh(VR,n.config.apiKey,n.name)}async function UR(n,e,t=!1){if($n(n.app))return Promise.reject(Mi(n));const r=Qs(n),s=A_(r,e),c=await new LR(r,s,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR=600*1e3;class $R{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!HR(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!P_(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";t.onError(jr(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=WR&&this.cachedEventUids.clear(),this.cachedEventUids.has(Lx(e))}saveEventToCache(e){this.cachedEventUids.add(Lx(e)),this.lastProcessedEventTime=Date.now()}}function Lx(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function P_({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function HR(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return P_(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KR(n,e={}){return Ki(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,GR=/^https?/;async function QR(n){if(n.config.emulator)return;const{authorizedDomains:e}=await KR(n);for(const t of e)try{if(YR(t))return}catch{}cr(n,"unauthorized-domain")}function YR(n){const e=og(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!GR.test(t))return!1;if(qR.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR=new mu(3e4,6e4);function Ox(){const n=ni().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function JR(n){return new Promise((e,t)=>{var s,l,c;function r(){Ox(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ox(),t(jr(n,"network-request-failed"))},timeout:XR.get()})}if((l=(s=ni().gapi)==null?void 0:s.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((c=ni().gapi)!=null&&c.load)r();else{const h=F5("iframefcb");return ni()[h]=()=>{gapi.load?r():t(jr(n,"network-request-failed"))},g_(`${z5()}?onload=${h}`).catch(d=>t(d))}}).catch(e=>{throw fh=null,e})}let fh=null;function ZR(n){return fh=fh||JR(n),fh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eP=new mu(5e3,15e3),tP="__/auth/iframe",nP="emulator/auth/iframe",rP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},iP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sP(n){const e=n.config;Te(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?gy(e,nP):`https://${n.config.authDomain}/${tP}`,r={apiKey:e.apiKey,appName:n.name,v:yl},s=iP.get(n.config.apiHost);s&&(r.eid=s);const l=n._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${fu(r).slice(1)}`}async function oP(n){const e=await ZR(n),t=ni().gapi;return Te(t,n,"internal-error"),e.open({where:document.body,url:sP(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rP,dontclear:!0},r=>new Promise(async(s,l)=>{await r.restyle({setHideOnLeave:!1});const c=jr(n,"network-request-failed"),h=ni().setTimeout(()=>{l(c)},eP.get());function d(){ni().clearTimeout(h),s(r)}r.ping(d).then(d,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},lP=500,cP=600,uP="_blank",dP="http://localhost";class Bx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function hP(n,e,t,r=lP,s=cP){const l=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const d={...aP,width:r.toString(),height:s.toString(),top:l,left:c},m=yn().toLowerCase();t&&(h=c_(m)?uP:t),a_(m)&&(e=e||dP,d.scrollbars="yes");const g=Object.entries(d).reduce((x,[E,k])=>`${x}${E}=${k},`,"");if(R5(m)&&h!=="_self")return fP(e||"",h),new Bx(null);const y=window.open(e||"",h,g);Te(y,n,"popup-blocked");try{y.focus()}catch{}return new Bx(y)}function fP(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mP="__/auth/handler",pP="emulator/auth/handler",gP=encodeURIComponent("fac");async function zx(n,e,t,r,s,l){Te(n.config.authDomain,n,"auth-domain-config-required"),Te(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:yl,eventId:s};if(e instanceof by){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",Jj(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,y]of Object.entries({}))c[g]=y}if(e instanceof gu){const g=e.getScopes().filter(y=>y!=="");g.length>0&&(c.scopes=g.join(","))}n.tenantId&&(c.tid=n.tenantId);const h=c;for(const g of Object.keys(h))h[g]===void 0&&delete h[g];const d=await n._getAppCheckToken(),m=d?`#${gP}=${encodeURIComponent(d)}`:"";return`${yP(n)}?${fu(h).slice(1)}${m}`}function yP({config:n}){return n.emulator?gy(n,pP):`https://${n.authDomain}/${mP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kp="webStorageSupport";class vP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=E_,this._completeRedirectFn=UR,this._overrideRedirectResult=BR}async _openPopup(e,t,r,s){var c;zi((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await zx(e,t,r,og(),s);return hP(e,l,ky())}async _openRedirect(e,t,r,s){await this._originValidation(e);const l=await zx(e,t,r,og(),s);return bR(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:l}=this.eventManagers[t];return s?Promise.resolve(s):(zi(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await oP(e),r=new $R(e);return t.register("authEvent",s=>(Te(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(kp,{type:kp},s=>{var c;const l=(c=s==null?void 0:s[0])==null?void 0:c[kp];l!==void 0&&t(!!l),cr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=QR(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return m_()||l_()||vy()}}const xP=vP;var Fx="@firebase/auth",Ux="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bP(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function kP(n){nl(new zo("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=r.options;Te(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:c,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:p_(n)},m=new L5(r,s,l,d);return q5(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),nl(new zo("auth-internal",e=>{const t=Qs(e.getProvider("auth").getImmediate());return(r=>new wP(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ns(Fx,Ux,bP(n)),Ns(Fx,Ux,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _P=300,SP=Hk("authIdTokenMaxAge")||_P;let Wx=null;const EP=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>SP)return;const s=t==null?void 0:t.token;Wx!==s&&(Wx=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function TP(n=Xk()){const e=fy(n,"auth");if(e.isInitialized())return e.getImmediate();const t=K5(n,{popupRedirectResolver:xP,persistence:[AR,vR,E_]}),r=Hk("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const c=EP(l.toString());fR(t,c,()=>c(t.currentUser)),hR(t,h=>c(h))}}const s=Wk("auth");return s&&G5(t,`http://${s}`),t}function IP(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}O5({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const l=jr("internal-error");l.customData=s,t(l)},r.type="text/javascript",r.charset="UTF-8",IP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});kP("Browser");var $x=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ms,N_;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,C){function M(){}M.prototype=C.prototype,A.F=C.prototype,A.prototype=new M,A.prototype.constructor=A,A.D=function(O,B,U){for(var L=Array(arguments.length-2),De=2;De<arguments.length;De++)L[De-2]=arguments[De];return C.prototype[B].apply(O,L)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,C,M){M||(M=0);const O=Array(16);if(typeof C=="string")for(var B=0;B<16;++B)O[B]=C.charCodeAt(M++)|C.charCodeAt(M++)<<8|C.charCodeAt(M++)<<16|C.charCodeAt(M++)<<24;else for(B=0;B<16;++B)O[B]=C[M++]|C[M++]<<8|C[M++]<<16|C[M++]<<24;C=A.g[0],M=A.g[1],B=A.g[2];let U=A.g[3],L;L=C+(U^M&(B^U))+O[0]+3614090360&4294967295,C=M+(L<<7&4294967295|L>>>25),L=U+(B^C&(M^B))+O[1]+3905402710&4294967295,U=C+(L<<12&4294967295|L>>>20),L=B+(M^U&(C^M))+O[2]+606105819&4294967295,B=U+(L<<17&4294967295|L>>>15),L=M+(C^B&(U^C))+O[3]+3250441966&4294967295,M=B+(L<<22&4294967295|L>>>10),L=C+(U^M&(B^U))+O[4]+4118548399&4294967295,C=M+(L<<7&4294967295|L>>>25),L=U+(B^C&(M^B))+O[5]+1200080426&4294967295,U=C+(L<<12&4294967295|L>>>20),L=B+(M^U&(C^M))+O[6]+2821735955&4294967295,B=U+(L<<17&4294967295|L>>>15),L=M+(C^B&(U^C))+O[7]+4249261313&4294967295,M=B+(L<<22&4294967295|L>>>10),L=C+(U^M&(B^U))+O[8]+1770035416&4294967295,C=M+(L<<7&4294967295|L>>>25),L=U+(B^C&(M^B))+O[9]+2336552879&4294967295,U=C+(L<<12&4294967295|L>>>20),L=B+(M^U&(C^M))+O[10]+4294925233&4294967295,B=U+(L<<17&4294967295|L>>>15),L=M+(C^B&(U^C))+O[11]+2304563134&4294967295,M=B+(L<<22&4294967295|L>>>10),L=C+(U^M&(B^U))+O[12]+1804603682&4294967295,C=M+(L<<7&4294967295|L>>>25),L=U+(B^C&(M^B))+O[13]+4254626195&4294967295,U=C+(L<<12&4294967295|L>>>20),L=B+(M^U&(C^M))+O[14]+2792965006&4294967295,B=U+(L<<17&4294967295|L>>>15),L=M+(C^B&(U^C))+O[15]+1236535329&4294967295,M=B+(L<<22&4294967295|L>>>10),L=C+(B^U&(M^B))+O[1]+4129170786&4294967295,C=M+(L<<5&4294967295|L>>>27),L=U+(M^B&(C^M))+O[6]+3225465664&4294967295,U=C+(L<<9&4294967295|L>>>23),L=B+(C^M&(U^C))+O[11]+643717713&4294967295,B=U+(L<<14&4294967295|L>>>18),L=M+(U^C&(B^U))+O[0]+3921069994&4294967295,M=B+(L<<20&4294967295|L>>>12),L=C+(B^U&(M^B))+O[5]+3593408605&4294967295,C=M+(L<<5&4294967295|L>>>27),L=U+(M^B&(C^M))+O[10]+38016083&4294967295,U=C+(L<<9&4294967295|L>>>23),L=B+(C^M&(U^C))+O[15]+3634488961&4294967295,B=U+(L<<14&4294967295|L>>>18),L=M+(U^C&(B^U))+O[4]+3889429448&4294967295,M=B+(L<<20&4294967295|L>>>12),L=C+(B^U&(M^B))+O[9]+568446438&4294967295,C=M+(L<<5&4294967295|L>>>27),L=U+(M^B&(C^M))+O[14]+3275163606&4294967295,U=C+(L<<9&4294967295|L>>>23),L=B+(C^M&(U^C))+O[3]+4107603335&4294967295,B=U+(L<<14&4294967295|L>>>18),L=M+(U^C&(B^U))+O[8]+1163531501&4294967295,M=B+(L<<20&4294967295|L>>>12),L=C+(B^U&(M^B))+O[13]+2850285829&4294967295,C=M+(L<<5&4294967295|L>>>27),L=U+(M^B&(C^M))+O[2]+4243563512&4294967295,U=C+(L<<9&4294967295|L>>>23),L=B+(C^M&(U^C))+O[7]+1735328473&4294967295,B=U+(L<<14&4294967295|L>>>18),L=M+(U^C&(B^U))+O[12]+2368359562&4294967295,M=B+(L<<20&4294967295|L>>>12),L=C+(M^B^U)+O[5]+4294588738&4294967295,C=M+(L<<4&4294967295|L>>>28),L=U+(C^M^B)+O[8]+2272392833&4294967295,U=C+(L<<11&4294967295|L>>>21),L=B+(U^C^M)+O[11]+1839030562&4294967295,B=U+(L<<16&4294967295|L>>>16),L=M+(B^U^C)+O[14]+4259657740&4294967295,M=B+(L<<23&4294967295|L>>>9),L=C+(M^B^U)+O[1]+2763975236&4294967295,C=M+(L<<4&4294967295|L>>>28),L=U+(C^M^B)+O[4]+1272893353&4294967295,U=C+(L<<11&4294967295|L>>>21),L=B+(U^C^M)+O[7]+4139469664&4294967295,B=U+(L<<16&4294967295|L>>>16),L=M+(B^U^C)+O[10]+3200236656&4294967295,M=B+(L<<23&4294967295|L>>>9),L=C+(M^B^U)+O[13]+681279174&4294967295,C=M+(L<<4&4294967295|L>>>28),L=U+(C^M^B)+O[0]+3936430074&4294967295,U=C+(L<<11&4294967295|L>>>21),L=B+(U^C^M)+O[3]+3572445317&4294967295,B=U+(L<<16&4294967295|L>>>16),L=M+(B^U^C)+O[6]+76029189&4294967295,M=B+(L<<23&4294967295|L>>>9),L=C+(M^B^U)+O[9]+3654602809&4294967295,C=M+(L<<4&4294967295|L>>>28),L=U+(C^M^B)+O[12]+3873151461&4294967295,U=C+(L<<11&4294967295|L>>>21),L=B+(U^C^M)+O[15]+530742520&4294967295,B=U+(L<<16&4294967295|L>>>16),L=M+(B^U^C)+O[2]+3299628645&4294967295,M=B+(L<<23&4294967295|L>>>9),L=C+(B^(M|~U))+O[0]+4096336452&4294967295,C=M+(L<<6&4294967295|L>>>26),L=U+(M^(C|~B))+O[7]+1126891415&4294967295,U=C+(L<<10&4294967295|L>>>22),L=B+(C^(U|~M))+O[14]+2878612391&4294967295,B=U+(L<<15&4294967295|L>>>17),L=M+(U^(B|~C))+O[5]+4237533241&4294967295,M=B+(L<<21&4294967295|L>>>11),L=C+(B^(M|~U))+O[12]+1700485571&4294967295,C=M+(L<<6&4294967295|L>>>26),L=U+(M^(C|~B))+O[3]+2399980690&4294967295,U=C+(L<<10&4294967295|L>>>22),L=B+(C^(U|~M))+O[10]+4293915773&4294967295,B=U+(L<<15&4294967295|L>>>17),L=M+(U^(B|~C))+O[1]+2240044497&4294967295,M=B+(L<<21&4294967295|L>>>11),L=C+(B^(M|~U))+O[8]+1873313359&4294967295,C=M+(L<<6&4294967295|L>>>26),L=U+(M^(C|~B))+O[15]+4264355552&4294967295,U=C+(L<<10&4294967295|L>>>22),L=B+(C^(U|~M))+O[6]+2734768916&4294967295,B=U+(L<<15&4294967295|L>>>17),L=M+(U^(B|~C))+O[13]+1309151649&4294967295,M=B+(L<<21&4294967295|L>>>11),L=C+(B^(M|~U))+O[4]+4149444226&4294967295,C=M+(L<<6&4294967295|L>>>26),L=U+(M^(C|~B))+O[11]+3174756917&4294967295,U=C+(L<<10&4294967295|L>>>22),L=B+(C^(U|~M))+O[2]+718787259&4294967295,B=U+(L<<15&4294967295|L>>>17),L=M+(U^(B|~C))+O[9]+3951481745&4294967295,A.g[0]=A.g[0]+C&4294967295,A.g[1]=A.g[1]+(B+(L<<21&4294967295|L>>>11))&4294967295,A.g[2]=A.g[2]+B&4294967295,A.g[3]=A.g[3]+U&4294967295}r.prototype.v=function(A,C){C===void 0&&(C=A.length);const M=C-this.blockSize,O=this.C;let B=this.h,U=0;for(;U<C;){if(B==0)for(;U<=M;)s(this,A,U),U+=this.blockSize;if(typeof A=="string"){for(;U<C;)if(O[B++]=A.charCodeAt(U++),B==this.blockSize){s(this,O),B=0;break}}else for(;U<C;)if(O[B++]=A[U++],B==this.blockSize){s(this,O),B=0;break}}this.h=B,this.o+=C},r.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var C=1;C<A.length-8;++C)A[C]=0;C=this.o*8;for(var M=A.length-8;M<A.length;++M)A[M]=C&255,C/=256;for(this.v(A),A=Array(16),C=0,M=0;M<4;++M)for(let O=0;O<32;O+=8)A[C++]=this.g[M]>>>O&255;return A};function l(A,C){var M=h;return Object.prototype.hasOwnProperty.call(M,A)?M[A]:M[A]=C(A)}function c(A,C){this.h=C;const M=[];let O=!0;for(let B=A.length-1;B>=0;B--){const U=A[B]|0;O&&U==C||(M[B]=U,O=!1)}this.g=M}var h={};function d(A){return-128<=A&&A<128?l(A,function(C){return new c([C|0],C<0?-1:0)}):new c([A|0],A<0?-1:0)}function m(A){if(isNaN(A)||!isFinite(A))return y;if(A<0)return I(m(-A));const C=[];let M=1;for(let O=0;A>=M;O++)C[O]=A/M|0,M*=4294967296;return new c(C,0)}function g(A,C){if(A.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(A.charAt(0)=="-")return I(g(A.substring(1),C));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const M=m(Math.pow(C,8));let O=y;for(let U=0;U<A.length;U+=8){var B=Math.min(8,A.length-U);const L=parseInt(A.substring(U,U+B),C);B<8?(B=m(Math.pow(C,B)),O=O.j(B).add(m(L))):(O=O.j(M),O=O.add(m(L)))}return O}var y=d(0),x=d(1),E=d(16777216);n=c.prototype,n.m=function(){if(S(this))return-I(this).m();let A=0,C=1;for(let M=0;M<this.g.length;M++){const O=this.i(M);A+=(O>=0?O:4294967296+O)*C,C*=4294967296}return A},n.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(k(this))return"0";if(S(this))return"-"+I(this).toString(A);const C=m(Math.pow(A,6));var M=this;let O="";for(;;){const B=K(M,C).g;M=N(M,B.j(C));let U=((M.g.length>0?M.g[0]:M.h)>>>0).toString(A);if(M=B,k(M))return U+O;for(;U.length<6;)U="0"+U;O=U+O}},n.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function k(A){if(A.h!=0)return!1;for(let C=0;C<A.g.length;C++)if(A.g[C]!=0)return!1;return!0}function S(A){return A.h==-1}n.l=function(A){return A=N(this,A),S(A)?-1:k(A)?0:1};function I(A){const C=A.g.length,M=[];for(let O=0;O<C;O++)M[O]=~A.g[O];return new c(M,~A.h).add(x)}n.abs=function(){return S(this)?I(this):this},n.add=function(A){const C=Math.max(this.g.length,A.g.length),M=[];let O=0;for(let B=0;B<=C;B++){let U=O+(this.i(B)&65535)+(A.i(B)&65535),L=(U>>>16)+(this.i(B)>>>16)+(A.i(B)>>>16);O=L>>>16,U&=65535,L&=65535,M[B]=L<<16|U}return new c(M,M[M.length-1]&-2147483648?-1:0)};function N(A,C){return A.add(I(C))}n.j=function(A){if(k(this)||k(A))return y;if(S(this))return S(A)?I(this).j(I(A)):I(I(this).j(A));if(S(A))return I(this.j(I(A)));if(this.l(E)<0&&A.l(E)<0)return m(this.m()*A.m());const C=this.g.length+A.g.length,M=[];for(var O=0;O<2*C;O++)M[O]=0;for(O=0;O<this.g.length;O++)for(let B=0;B<A.g.length;B++){const U=this.i(O)>>>16,L=this.i(O)&65535,De=A.i(B)>>>16,Ke=A.i(B)&65535;M[2*O+2*B]+=L*Ke,V(M,2*O+2*B),M[2*O+2*B+1]+=U*Ke,V(M,2*O+2*B+1),M[2*O+2*B+1]+=L*De,V(M,2*O+2*B+1),M[2*O+2*B+2]+=U*De,V(M,2*O+2*B+2)}for(A=0;A<C;A++)M[A]=M[2*A+1]<<16|M[2*A];for(A=C;A<2*C;A++)M[A]=0;return new c(M,0)};function V(A,C){for(;(A[C]&65535)!=A[C];)A[C+1]+=A[C]>>>16,A[C]&=65535,C++}function P(A,C){this.g=A,this.h=C}function K(A,C){if(k(C))throw Error("division by zero");if(k(A))return new P(y,y);if(S(A))return C=K(I(A),C),new P(I(C.g),I(C.h));if(S(C))return C=K(A,I(C)),new P(I(C.g),C.h);if(A.g.length>30){if(S(A)||S(C))throw Error("slowDivide_ only works with positive integers.");for(var M=x,O=C;O.l(A)<=0;)M=z(M),O=z(O);var B=W(M,1),U=W(O,1);for(O=W(O,2),M=W(M,2);!k(O);){var L=U.add(O);L.l(A)<=0&&(B=B.add(M),U=L),O=W(O,1),M=W(M,1)}return C=N(A,B.j(C)),new P(B,C)}for(B=y;A.l(C)>=0;){for(M=Math.max(1,Math.floor(A.m()/C.m())),O=Math.ceil(Math.log(M)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),U=m(M),L=U.j(C);S(L)||L.l(A)>0;)M-=O,U=m(M),L=U.j(C);k(U)&&(U=x),B=B.add(U),A=N(A,L)}return new P(B,A)}n.B=function(A){return K(this,A).h},n.and=function(A){const C=Math.max(this.g.length,A.g.length),M=[];for(let O=0;O<C;O++)M[O]=this.i(O)&A.i(O);return new c(M,this.h&A.h)},n.or=function(A){const C=Math.max(this.g.length,A.g.length),M=[];for(let O=0;O<C;O++)M[O]=this.i(O)|A.i(O);return new c(M,this.h|A.h)},n.xor=function(A){const C=Math.max(this.g.length,A.g.length),M=[];for(let O=0;O<C;O++)M[O]=this.i(O)^A.i(O);return new c(M,this.h^A.h)};function z(A){const C=A.g.length+1,M=[];for(let O=0;O<C;O++)M[O]=A.i(O)<<1|A.i(O-1)>>>31;return new c(M,A.h)}function W(A,C){const M=C>>5;C%=32;const O=A.g.length-M,B=[];for(let U=0;U<O;U++)B[U]=C>0?A.i(U+M)>>>C|A.i(U+M+1)<<32-C:A.i(U+M);return new c(B,A.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,N_=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=g,Ms=c}).apply(typeof $x<"u"?$x:typeof self<"u"?self:typeof window<"u"?window:{});var Yd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var M_,Ac,D_,mh,ug,V_,L_,O_;(function(){var n,e=Object.defineProperty;function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Yd=="object"&&Yd];for(var b=0;b<f.length;++b){var _=f[b];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=t(this);function s(f,b){if(b)e:{var _=r;f=f.split(".");for(var R=0;R<f.length-1;R++){var G=f[R];if(!(G in _))break e;_=_[G]}f=f[f.length-1],R=_[f],b=b(R),b!=R&&b!=null&&e(_,f,{configurable:!0,writable:!0,value:b})}}s("Symbol.dispose",function(f){return f||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(f){return f||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(f){return f||function(b){var _=[],R;for(R in b)Object.prototype.hasOwnProperty.call(b,R)&&_.push([R,b[R]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function h(f){var b=typeof f;return b=="object"&&f!=null||b=="function"}function d(f,b,_){return f.call.apply(f.bind,arguments)}function m(f,b,_){return m=d,m.apply(null,arguments)}function g(f,b){var _=Array.prototype.slice.call(arguments,1);return function(){var R=_.slice();return R.push.apply(R,arguments),f.apply(this,R)}}function y(f,b){function _(){}_.prototype=b.prototype,f.Z=b.prototype,f.prototype=new _,f.prototype.constructor=f,f.Ob=function(R,G,X){for(var ce=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)ce[Ne-2]=arguments[Ne];return b.prototype[G].apply(R,ce)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?f=>f&&AsyncContext.Snapshot.wrap(f):f=>f;function E(f){const b=f.length;if(b>0){const _=Array(b);for(let R=0;R<b;R++)_[R]=f[R];return _}return[]}function k(f,b){for(let R=1;R<arguments.length;R++){const G=arguments[R];var _=typeof G;if(_=_!="object"?_:G?Array.isArray(G)?"array":_:"null",_=="array"||_=="object"&&typeof G.length=="number"){_=f.length||0;const X=G.length||0;f.length=_+X;for(let ce=0;ce<X;ce++)f[_+ce]=G[ce]}else f.push(G)}}class S{constructor(b,_){this.i=b,this.j=_,this.h=0,this.g=null}get(){let b;return this.h>0?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function I(f){c.setTimeout(()=>{throw f},0)}function N(){var f=A;let b=null;return f.g&&(b=f.g,f.g=f.g.next,f.g||(f.h=null),b.next=null),b}class V{constructor(){this.h=this.g=null}add(b,_){const R=P.get();R.set(b,_),this.h?this.h.next=R:this.g=R,this.h=R}}var P=new S(()=>new K,f=>f.reset());class K{constructor(){this.next=this.g=this.h=null}set(b,_){this.h=b,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let z,W=!1,A=new V,C=()=>{const f=Promise.resolve(void 0);z=()=>{f.then(M)}};function M(){for(var f;f=N();){try{f.h.call(f.g)}catch(_){I(_)}var b=P;b.j(f),b.h<100&&(b.h++,f.next=b.g,b.g=f)}W=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function B(f,b){this.type=f,this.g=this.target=b,this.defaultPrevented=!1}B.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var f=!1,b=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const _=()=>{};c.addEventListener("test",_,b),c.removeEventListener("test",_,b)}catch{}return f})();function L(f){return/^[\s\xa0]*$/.test(f)}function De(f,b){B.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f&&this.init(f,b)}y(De,B),De.prototype.init=function(f,b){const _=this.type=f.type,R=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;this.target=f.target||f.srcElement,this.g=b,b=f.relatedTarget,b||(_=="mouseover"?b=f.fromElement:_=="mouseout"&&(b=f.toElement)),this.relatedTarget=b,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=f.pointerType,this.state=f.state,this.i=f,f.defaultPrevented&&De.Z.h.call(this)},De.prototype.h=function(){De.Z.h.call(this);const f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Ke="closure_listenable_"+(Math.random()*1e6|0),pt=0;function Ee(f,b,_,R,G){this.listener=f,this.proxy=null,this.src=b,this.type=_,this.capture=!!R,this.ha=G,this.key=++pt,this.da=this.fa=!1}function ie(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function me(f,b,_){for(const R in f)b.call(_,f[R],R,f)}function le(f,b){for(const _ in f)b.call(void 0,f[_],_,f)}function H(f){const b={};for(const _ in f)b[_]=f[_];return b}const te="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Re(f,b){let _,R;for(let G=1;G<arguments.length;G++){R=arguments[G];for(_ in R)f[_]=R[_];for(let X=0;X<te.length;X++)_=te[X],Object.prototype.hasOwnProperty.call(R,_)&&(f[_]=R[_])}}function Ce(f){this.src=f,this.g={},this.h=0}Ce.prototype.add=function(f,b,_,R,G){const X=f.toString();f=this.g[X],f||(f=this.g[X]=[],this.h++);const ce=Oe(f,b,R,G);return ce>-1?(b=f[ce],_||(b.fa=!1)):(b=new Ee(b,this.src,X,!!R,G),b.fa=_,f.push(b)),b};function Ve(f,b){const _=b.type;if(_ in f.g){var R=f.g[_],G=Array.prototype.indexOf.call(R,b,void 0),X;(X=G>=0)&&Array.prototype.splice.call(R,G,1),X&&(ie(b),f.g[_].length==0&&(delete f.g[_],f.h--))}}function Oe(f,b,_,R){for(let G=0;G<f.length;++G){const X=f[G];if(!X.da&&X.listener==b&&X.capture==!!_&&X.ha==R)return G}return-1}var Qe="closure_lm_"+(Math.random()*1e6|0),$e={};function et(f,b,_,R,G){if(Array.isArray(b)){for(let X=0;X<b.length;X++)et(f,b[X],_,R,G);return null}return _=no(_),f&&f[Ke]?f.J(b,_,h(R)?!!R.capture:!1,G):Yt(f,b,_,!1,R,G)}function Yt(f,b,_,R,G,X){if(!b)throw Error("Invalid event type");const ce=h(G)?!!G.capture:!!G;let Ne=Et(f);if(Ne||(f[Qe]=Ne=new Ce(f)),_=Ne.add(b,_,R,ce,X),_.proxy)return _;if(R=Gi(),_.proxy=R,R.src=f,R.listener=_,f.addEventListener)U||(G=ce),G===void 0&&(G=!1),f.addEventListener(b.toString(),R,G);else if(f.attachEvent)f.attachEvent(Le(b.toString()),R);else if(f.addListener&&f.removeListener)f.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Gi(){function f(_){return b.call(f.src,f.listener,_)}const b=Ye;return f}function J(f,b,_,R,G){if(Array.isArray(b))for(var X=0;X<b.length;X++)J(f,b[X],_,R,G);else R=h(R)?!!R.capture:!!R,_=no(_),f&&f[Ke]?(f=f.i,X=String(b).toString(),X in f.g&&(b=f.g[X],_=Oe(b,_,R,G),_>-1&&(ie(b[_]),Array.prototype.splice.call(b,_,1),b.length==0&&(delete f.g[X],f.h--)))):f&&(f=Et(f))&&(b=f.g[b.toString()],f=-1,b&&(f=Oe(b,_,R,G)),(_=f>-1?b[f]:null)&&be(_))}function be(f){if(typeof f!="number"&&f&&!f.da){var b=f.src;if(b&&b[Ke])Ve(b.i,f);else{var _=f.type,R=f.proxy;b.removeEventListener?b.removeEventListener(_,R,f.capture):b.detachEvent?b.detachEvent(Le(_),R):b.addListener&&b.removeListener&&b.removeListener(R),(_=Et(b))?(Ve(_,f),_.h==0&&(_.src=null,b[Qe]=null)):ie(f)}}}function Le(f){return f in $e?$e[f]:$e[f]="on"+f}function Ye(f,b){if(f.da)f=!0;else{b=new De(b,this);const _=f.listener,R=f.ha||f.src;f.fa&&be(f),f=_.call(R,b)}return f}function Et(f){return f=f[Qe],f instanceof Ce?f:null}var vn="__closure_events_fn_"+(Math.random()*1e9>>>0);function no(f){return typeof f=="function"?f:(f[vn]||(f[vn]=function(b){return f.handleEvent(b)}),f[vn])}function Nt(){O.call(this),this.i=new Ce(this),this.M=this,this.G=null}y(Nt,O),Nt.prototype[Ke]=!0,Nt.prototype.removeEventListener=function(f,b,_,R){J(this,f,b,_,R)};function Tt(f,b){var _,R=f.G;if(R)for(_=[];R;R=R.G)_.push(R);if(f=f.M,R=b.type||b,typeof b=="string")b=new B(b,f);else if(b instanceof B)b.target=b.target||f;else{var G=b;b=new B(R,f),Re(b,G)}G=!0;let X,ce;if(_)for(ce=_.length-1;ce>=0;ce--)X=b.g=_[ce],G=pr(X,R,!0,b)&&G;if(X=b.g=f,G=pr(X,R,!0,b)&&G,G=pr(X,R,!1,b)&&G,_)for(ce=0;ce<_.length;ce++)X=b.g=_[ce],G=pr(X,R,!1,b)&&G}Nt.prototype.N=function(){if(Nt.Z.N.call(this),this.i){var f=this.i;for(const b in f.g){const _=f.g[b];for(let R=0;R<_.length;R++)ie(_[R]);delete f.g[b],f.h--}}this.G=null},Nt.prototype.J=function(f,b,_,R){return this.i.add(String(f),b,!1,_,R)},Nt.prototype.K=function(f,b,_,R){return this.i.add(String(f),b,!0,_,R)};function pr(f,b,_,R){if(b=f.i.g[String(b)],!b)return!0;b=b.concat();let G=!0;for(let X=0;X<b.length;++X){const ce=b[X];if(ce&&!ce.da&&ce.capture==_){const Ne=ce.listener,It=ce.ha||ce.src;ce.fa&&Ve(f.i,ce),G=Ne.call(It,R)!==!1&&G}}return G&&!R.defaultPrevented}function Al(f,b){if(typeof f!="function")if(f&&typeof f.handleEvent=="function")f=m(f.handleEvent,f);else throw Error("Invalid listener argument");return Number(b)>2147483647?-1:c.setTimeout(f,b||0)}function Rl(f){f.g=Al(()=>{f.g=null,f.i&&(f.i=!1,Rl(f))},f.l);const b=f.h;f.h=null,f.m.apply(null,b)}class Nu extends O{constructor(b,_){super(),this.m=b,this.l=_,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:Rl(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qi(f){O.call(this),this.h=f,this.g={}}y(Qi,O);var Pl=[];function Zo(f){me(f.g,function(b,_){this.g.hasOwnProperty(_)&&be(b)},f),f.g={}}Qi.prototype.N=function(){Qi.Z.N.call(this),Zo(this)},Qi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Yi=c.JSON.stringify,Mu=c.JSON.parse,ro=class{stringify(f){return c.JSON.stringify(f,void 0)}parse(f){return c.JSON.parse(f,void 0)}};function Xi(){}function Du(){}var Ji={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ea(){B.call(this,"d")}y(ea,B);function Nl(){B.call(this,"c")}y(Nl,B);var gr={},ta=null;function Zi(){return ta=ta||new Nt}gr.Ia="serverreachability";function na(f){B.call(this,gr.Ia,f)}y(na,B);function ui(f){const b=Zi();Tt(b,new na(b))}gr.STAT_EVENT="statevent";function di(f,b){B.call(this,gr.STAT_EVENT,f),this.stat=b}y(di,B);function wt(f){const b=Zi();Tt(b,new di(b,f))}gr.Ja="timingevent";function Ml(f,b){B.call(this,gr.Ja,f),this.size=b}y(Ml,B);function es(f,b){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){f()},b)}function ts(){this.g=!0}ts.prototype.ua=function(){this.g=!1};function Vu(f,b,_,R,G,X){f.info(function(){if(f.g)if(X){var ce="",Ne=X.split("&");for(let tt=0;tt<Ne.length;tt++){var It=Ne[tt].split("=");if(It.length>1){const Mt=It[0];It=It[1];const zn=Mt.split("_");ce=zn.length>=2&&zn[1]=="type"?ce+(Mt+"="+It+"&"):ce+(Mt+"=redacted&")}}}else ce=null;else ce=X;return"XMLHTTP REQ ("+R+") [attempt "+G+"]: "+b+`
`+_+`
`+ce})}function Lu(f,b,_,R,G,X,ce){f.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+G+"]: "+b+`
`+_+`
`+X+" "+ce})}function Lr(f,b,_,R){f.info(function(){return"XMLHTTP TEXT ("+b+"): "+io(f,_)+(R?" "+R:"")})}function Ou(f,b){f.info(function(){return"TIMEOUT: "+b})}ts.prototype.info=function(){};function io(f,b){if(!f.g)return b;if(!b)return null;try{const X=JSON.parse(b);if(X){for(f=0;f<X.length;f++)if(Array.isArray(X[f])){var _=X[f];if(!(_.length<2)){var R=_[1];if(Array.isArray(R)&&!(R.length<1)){var G=R[0];if(G!="noop"&&G!="stop"&&G!="close")for(let ce=1;ce<R.length;ce++)R[ce]=""}}}}return Yi(X)}catch{return b}}var ns={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},rs={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Bu;function hi(){}y(hi,Xi),hi.prototype.g=function(){return new XMLHttpRequest},Bu=new hi;function Or(f){return encodeURIComponent(String(f))}function ra(f){var b=1;f=f.split(":");const _=[];for(;b>0&&f.length;)_.push(f.shift()),b--;return f.length&&_.push(f.join(":")),_}function Qn(f,b,_,R){this.j=f,this.i=b,this.l=_,this.S=R||1,this.V=new Qi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new zu}function zu(){this.i=null,this.g="",this.h=!1}var Fu={},Dl={};function yr(f,b,_){f.M=1,f.A=mi(Yn(b)),f.u=_,f.R=!0,Vl(f,null)}function Vl(f,b){f.F=Date.now(),so(f),f.B=Yn(f.A);var _=f.B,R=f.S;Array.isArray(R)||(R=[String(R)]),Kl(_.i,"t",R),f.C=0,_=f.j.L,f.h=new zu,f.g=Xu(f.j,_?b:null,!f.u),f.P>0&&(f.O=new Nu(m(f.Y,f,f.g),f.P)),b=f.V,_=f.g,R=f.ba;var G="readystatechange";Array.isArray(G)||(G&&(Pl[0]=G.toString()),G=Pl);for(let X=0;X<G.length;X++){const ce=et(_,G[X],R||b.handleEvent,!1,b.h||b);if(!ce)break;b.g[ce.key]=ce}b=f.J?H(f.J):{},f.u?(f.v||(f.v="POST"),b["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.B,f.v,f.u,b)):(f.v="GET",f.g.ea(f.B,f.v,null,b)),ui(),Vu(f.i,f.v,f.B,f.l,f.S,f.u)}Qn.prototype.ba=function(f){f=f.target;const b=this.O;b&&Hr(f)==3?b.j():this.Y(f)},Qn.prototype.Y=function(f){try{if(f==this.g)e:{const Ne=Hr(this.g),It=this.g.ya(),tt=this.g.ca();if(!(Ne<3)&&(Ne!=3||this.g&&(this.h.h||this.g.la()||Qu(this.g)))){this.K||Ne!=4||It==7||(It==8||tt<=0?ui(3):ui(2)),ia(this);var b=this.g.ca();this.X=b;var _=Uu(this);if(this.o=b==200,Lu(this.i,this.v,this.B,this.l,this.S,Ne,b),this.o){if(this.U&&!this.L){t:{if(this.g){var R,G=this.g;if((R=G.g?G.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(R)){var X=R;break t}}X=null}if(f=X)Lr(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ot(this,f);else{this.o=!1,this.m=3,wt(12),fi(this),oo(this);break e}}if(this.R){f=!0;let Mt;for(;!this.K&&this.C<_.length;)if(Mt=$u(this,_),Mt==Dl){Ne==4&&(this.m=4,wt(14),f=!1),Lr(this.i,this.l,null,"[Incomplete Response]");break}else if(Mt==Fu){this.m=4,wt(15),Lr(this.i,this.l,_,"[Invalid Chunk]"),f=!1;break}else Lr(this.i,this.l,Mt,null),ot(this,Mt);if(Wu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ne!=4||_.length!=0||this.h.h||(this.m=1,wt(16),f=!1),this.o=this.o&&f,!f)Lr(this.i,this.l,_,"[Invalid Chunked Response]"),fi(this),oo(this);else if(_.length>0&&!this.W){this.W=!0;var ce=this.j;ce.g==this&&ce.aa&&!ce.P&&(ce.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),go(ce),ce.P=!0,wt(11))}}else Lr(this.i,this.l,_,null),ot(this,_);Ne==4&&fi(this),this.o&&!this.K&&(Ne==4?ma(this.j,this):(this.o=!1,so(this)))}else Gl(this.g),b==400&&_.indexOf("Unknown SID")>0?(this.m=3,wt(12)):(this.m=0,wt(13)),fi(this),oo(this)}}}catch{}finally{}};function Uu(f){if(!Wu(f))return f.g.la();const b=Qu(f.g);if(b==="")return"";let _="";const R=b.length,G=Hr(f.g)==4;if(!f.h.i){if(typeof TextDecoder>"u")return fi(f),oo(f),"";f.h.i=new c.TextDecoder}for(let X=0;X<R;X++)f.h.h=!0,_+=f.h.i.decode(b[X],{stream:!(G&&X==R-1)});return b.length=0,f.h.g+=_,f.C=0,f.h.g}function Wu(f){return f.g?f.v=="GET"&&f.M!=2&&f.j.Aa:!1}function $u(f,b){var _=f.C,R=b.indexOf(`
`,_);return R==-1?Dl:(_=Number(b.substring(_,R)),isNaN(_)?Fu:(R+=1,R+_>b.length?Dl:(b=b.slice(R,R+_),f.C=R+_,b)))}Qn.prototype.cancel=function(){this.K=!0,fi(this)};function so(f){f.T=Date.now()+f.H,Ll(f,f.H)}function Ll(f,b){if(f.D!=null)throw Error("WatchDog timer not null");f.D=es(m(f.aa,f),b)}function ia(f){f.D&&(c.clearTimeout(f.D),f.D=null)}Qn.prototype.aa=function(){this.D=null;const f=Date.now();f-this.T>=0?(Ou(this.i,this.B),this.M!=2&&(ui(),wt(17)),fi(this),this.m=2,oo(this)):Ll(this,this.T-f)};function oo(f){f.j.I==0||f.K||ma(f.j,f)}function fi(f){ia(f);var b=f.O;b&&typeof b.dispose=="function"&&b.dispose(),f.O=null,Zo(f.V),f.g&&(b=f.g,f.g=null,b.abort(),b.dispose())}function ot(f,b){try{var _=f.j;if(_.I!=0&&(_.g==f||Bl(_.h,f))){if(!f.L&&Bl(_.h,f)&&_.I==3){try{var R=_.Ba.g.parse(b)}catch{R=null}if(Array.isArray(R)&&R.length==3){var G=R;if(G[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<f.F)fa(_),On(_);else break e;Gr(_),wt(18)}}else _.xa=G[1],0<_.xa-_.K&&G[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=es(m(_.Va,_),6e3));ao(_.h)<=1&&_.ta&&(_.ta=void 0)}else Bn(_,11)}else if((f.L||_.g==f)&&fa(_),!L(b))for(G=_.Ba.g.parse(b),b=0;b<G.length;b++){let tt=G[b];const Mt=tt[0];if(!(Mt<=_.K))if(_.K=Mt,tt=tt[1],_.I==2)if(tt[0]=="c"){_.M=tt[1],_.ba=tt[2];const zn=tt[3];zn!=null&&(_.ka=zn,_.j.info("VER="+_.ka));const xi=tt[4];xi!=null&&(_.za=xi,_.j.info("SVER="+_.za));const Qr=tt[5];Qr!=null&&typeof Qr=="number"&&Qr>0&&(R=1.5*Qr,_.O=R,_.j.info("backChannelRequestTimeoutMs_="+R)),R=_;const Yr=f.g;if(Yr){const ya=Yr.g?Yr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ya){var X=R.h;X.g||ya.indexOf("spdy")==-1&&ya.indexOf("quic")==-1&&ya.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(oa(X,X.h),X.h=null))}if(R.G){const Xl=Yr.g?Yr.g.getResponseHeader("X-HTTP-Session-Id"):null;Xl&&(R.wa=Xl,Je(R.J,R.G,Xl))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-f.F,_.j.info("Handshake RTT: "+_.T+"ms")),R=_;var ce=f;if(R.na=Yl(R,R.L?R.ba:null,R.W),ce.L){lo(R.h,ce);var Ne=ce,It=R.O;It&&(Ne.H=It),Ne.D&&(ia(Ne),so(Ne)),R.g=ce}else an(R);_.i.length>0&&vi(_)}else tt[0]!="stop"&&tt[0]!="close"||Bn(_,7);else _.I==3&&(tt[0]=="stop"||tt[0]=="close"?tt[0]=="stop"?Bn(_,7):da(_):tt[0]!="noop"&&_.l&&_.l.qa(tt),_.A=0)}}ui(4)}catch{}}var Bf=class{constructor(f,b){this.g=f,this.map=b}};function sa(f){this.l=f||10,c.PerformanceNavigationTiming?(f=c.performance.getEntriesByType("navigation"),f=f.length>0&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ol(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function ao(f){return f.h?1:f.g?f.g.size:0}function Bl(f,b){return f.h?f.h==b:f.g?f.g.has(b):!1}function oa(f,b){f.g?f.g.add(b):f.h=b}function lo(f,b){f.h&&f.h==b?f.h=null:f.g&&f.g.has(b)&&f.g.delete(b)}sa.prototype.cancel=function(){if(this.i=Dn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Dn(f){if(f.h!=null)return f.i.concat(f.h.G);if(f.g!=null&&f.g.size!==0){let b=f.i;for(const _ of f.g.values())b=b.concat(_.G);return b}return E(f.i)}var Hu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Vn(f,b){if(f){f=f.split("&");for(let _=0;_<f.length;_++){const R=f[_].indexOf("=");let G,X=null;R>=0?(G=f[_].substring(0,R),X=f[_].substring(R+1)):G=f[_],b(G,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function Br(f){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let b;f instanceof Br?(this.l=f.l,co(this,f.j),this.o=f.o,this.g=f.g,zr(this,f.u),this.h=f.h,is(this,ql(f.i)),this.m=f.m):f&&(b=String(f).match(Hu))?(this.l=!1,co(this,b[1]||"",!0),this.o=uo(b[2]||""),this.g=uo(b[3]||"",!0),zr(this,b[4]),this.h=uo(b[5]||"",!0),is(this,b[6]||"",!0),this.m=uo(b[7]||"")):(this.l=!1,this.i=new He(null,this.l))}Br.prototype.toString=function(){const f=[];var b=this.j;b&&f.push(ho(b,Fl,!0),":");var _=this.g;return(_||b=="file")&&(f.push("//"),(b=this.o)&&f.push(ho(b,Fl,!0),"@"),f.push(Or(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&f.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&f.push("/"),f.push(ho(_,_.charAt(0)=="/"?fo:Ul,!0))),(_=this.i.toString())&&f.push("?",_),(_=this.m)&&f.push("#",ho(_,Wl)),f.join("")},Br.prototype.resolve=function(f){const b=Yn(this);let _=!!f.j;_?co(b,f.j):_=!!f.o,_?b.o=f.o:_=!!f.g,_?b.g=f.g:_=f.u!=null;var R=f.h;if(_)zr(b,f.u);else if(_=!!f.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var G=b.h.lastIndexOf("/");G!=-1&&(R=b.h.slice(0,G+1)+R)}if(G=R,G==".."||G==".")R="";else if(G.indexOf("./")!=-1||G.indexOf("/.")!=-1){R=G.lastIndexOf("/",0)==0,G=G.split("/");const X=[];for(let ce=0;ce<G.length;){const Ne=G[ce++];Ne=="."?R&&ce==G.length&&X.push(""):Ne==".."?((X.length>1||X.length==1&&X[0]!="")&&X.pop(),R&&ce==G.length&&X.push("")):(X.push(Ne),R=!0)}R=X.join("/")}else R=G}return _?b.h=R:_=f.i.toString()!=="",_?is(b,ql(f.i)):_=!!f.m,_&&(b.m=f.m),b};function Yn(f){return new Br(f)}function co(f,b,_){f.j=_?uo(b,!0):b,f.j&&(f.j=f.j.replace(/:$/,""))}function zr(f,b){if(b){if(b=Number(b),isNaN(b)||b<0)throw Error("Bad port number "+b);f.u=b}else f.u=null}function is(f,b,_){b instanceof He?(f.i=b,la(f.i,f.l)):(_||(b=ho(b,zf)),f.i=new He(b,f.l))}function Je(f,b,_){f.i.set(b,_)}function mi(f){return Je(f,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),f}function uo(f,b){return f?b?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function ho(f,b,_){return typeof f=="string"?(f=encodeURI(f).replace(b,zl),_&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function zl(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Fl=/[#\/\?@]/g,Ul=/[#\?:]/g,fo=/[#\?]/g,zf=/[#\?@]/g,Wl=/#/g;function He(f,b){this.h=this.g=null,this.i=f||null,this.j=!!b}function Fr(f){f.g||(f.g=new Map,f.h=0,f.i&&Vn(f.i,function(b,_){f.add(decodeURIComponent(b.replace(/\+/g," ")),_)}))}n=He.prototype,n.add=function(f,b){Fr(this),this.i=null,f=Ur(this,f);let _=this.g.get(f);return _||this.g.set(f,_=[]),_.push(b),this.h+=1,this};function $l(f,b){Fr(f),b=Ur(f,b),f.g.has(b)&&(f.i=null,f.h-=f.g.get(b).length,f.g.delete(b))}function aa(f,b){return Fr(f),b=Ur(f,b),f.g.has(b)}n.forEach=function(f,b){Fr(this),this.g.forEach(function(_,R){_.forEach(function(G){f.call(b,G,R,this)},this)},this)};function Hl(f,b){Fr(f);let _=[];if(typeof b=="string")aa(f,b)&&(_=_.concat(f.g.get(Ur(f,b))));else for(f=Array.from(f.g.values()),b=0;b<f.length;b++)_=_.concat(f[b]);return _}n.set=function(f,b){return Fr(this),this.i=null,f=Ur(this,f),aa(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[b]),this.h+=1,this},n.get=function(f,b){return f?(f=Hl(this,f),f.length>0?String(f[0]):b):b};function Kl(f,b,_){$l(f,b),_.length>0&&(f.i=null,f.g.set(Ur(f,b),E(_)),f.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],b=Array.from(this.g.keys());for(let R=0;R<b.length;R++){var _=b[R];const G=Or(_);_=Hl(this,_);for(let X=0;X<_.length;X++){let ce=G;_[X]!==""&&(ce+="="+Or(_[X])),f.push(ce)}}return this.i=f.join("&")};function ql(f){const b=new He;return b.i=f.i,f.g&&(b.g=new Map(f.g),b.h=f.h),b}function Ur(f,b){return b=String(b),f.j&&(b=b.toLowerCase()),b}function la(f,b){b&&!f.j&&(Fr(f),f.i=null,f.g.forEach(function(_,R){const G=R.toLowerCase();R!=G&&($l(this,R),Kl(this,G,_))},f)),f.j=b}function Wr(f,b){const _=new ts;if(c.Image){const R=new Image;R.onload=g(Xt,_,"TestLoadImage: loaded",!0,b,R),R.onerror=g(Xt,_,"TestLoadImage: error",!1,b,R),R.onabort=g(Xt,_,"TestLoadImage: abort",!1,b,R),R.ontimeout=g(Xt,_,"TestLoadImage: timeout",!1,b,R),c.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=f}else b(!1)}function $r(f,b){const _=new ts,R=new AbortController,G=setTimeout(()=>{R.abort(),Xt(_,"TestPingServer: timeout",!1,b)},1e4);fetch(f,{signal:R.signal}).then(X=>{clearTimeout(G),X.ok?Xt(_,"TestPingServer: ok",!0,b):Xt(_,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(G),Xt(_,"TestPingServer: error",!1,b)})}function Xt(f,b,_,R,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),R(_)}catch{}}function mo(){this.g=new ro}function pi(f){this.i=f.Sb||null,this.h=f.ab||!1}y(pi,Xi),pi.prototype.g=function(){return new Ln(this.i,this.h)};function Ln(f,b){Nt.call(this),this.H=f,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}y(Ln,Nt),n=Ln.prototype,n.open=function(f,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=f,this.D=b,this.readyState=1,vr(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const b={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};f&&(b.body=f),(this.H||c).fetch(new Request(this.D,b)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ss(this)),this.readyState=0},n.Pa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,vr(this)),this.g&&(this.readyState=3,vr(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ku(this)}else f.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ku(f){f.j.read().then(f.Ma.bind(f)).catch(f.ga.bind(f))}n.Ma=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var b=f.value?f.value:new Uint8Array(0);(b=this.B.decode(b,{stream:!f.done}))&&(this.response=this.responseText+=b)}f.done?ss(this):vr(this),this.readyState==3&&Ku(this)}},n.Oa=function(f){this.g&&(this.response=this.responseText=f,ss(this))},n.Na=function(f){this.g&&(this.response=f,ss(this))},n.ga=function(){this.g&&ss(this)};function ss(f){f.readyState=4,f.l=null,f.j=null,f.B=null,vr(f)}n.setRequestHeader=function(f,b){this.A.append(f,b)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],b=this.h.entries();for(var _=b.next();!_.done;)_=_.value,f.push(_[0]+": "+_[1]),_=b.next();return f.join(`\r
`)};function vr(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Ln.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function qu(f){let b="";return me(f,function(_,R){b+=R,b+=":",b+=_,b+=`\r
`}),b}function ca(f,b,_){e:{for(R in _){var R=!1;break e}R=!0}R||(_=qu(_),typeof f=="string"?_!=null&&Or(_):Je(f,b,_))}function nt(f){Nt.call(this),this.headers=new Map,this.L=f||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}y(nt,Nt);var Gu=/^https?$/i,Ff=["POST","PUT"];n=nt.prototype,n.Fa=function(f){this.H=f},n.ea=function(f,b,_,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);b=b?b.toUpperCase():"GET",this.D=f,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Bu.g(),this.g.onreadystatechange=x(m(this.Ca,this));try{this.B=!0,this.g.open(b,String(f),!0),this.B=!1}catch(X){os(this,X);return}if(f=_||"",_=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var G in R)_.set(G,R[G]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const X of R.keys())_.set(X,R.get(X));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(_.keys()).find(X=>X.toLowerCase()=="content-type"),G=c.FormData&&f instanceof c.FormData,!(Array.prototype.indexOf.call(Ff,b,void 0)>=0)||R||G||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,ce]of _)this.g.setRequestHeader(X,ce);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(f),this.v=!1}catch(X){os(this,X)}};function os(f,b){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=b,f.o=5,as(f),yi(f)}function as(f){f.A||(f.A=!0,Tt(f,"complete"),Tt(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=f||7,Tt(this,"complete"),Tt(this,"abort"),yi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yi(this,!0)),nt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?gi(this):this.Xa())},n.Xa=function(){gi(this)};function gi(f){if(f.h&&typeof l<"u"){if(f.v&&Hr(f)==4)setTimeout(f.Ca.bind(f),0);else if(Tt(f,"readystatechange"),Hr(f)==4){f.h=!1;try{const X=f.ca();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var _;if(!(_=b)){var R;if(R=X===0){let ce=String(f.D).match(Hu)[1]||null;!ce&&c.self&&c.self.location&&(ce=c.self.location.protocol.slice(0,-1)),R=!Gu.test(ce?ce.toLowerCase():"")}_=R}if(_)Tt(f,"complete"),Tt(f,"success");else{f.o=6;try{var G=Hr(f)>2?f.g.statusText:""}catch{G=""}f.l=G+" ["+f.ca()+"]",as(f)}}finally{yi(f)}}}}function yi(f,b){if(f.g){f.m&&(clearTimeout(f.m),f.m=null);const _=f.g;f.g=null,b||Tt(f,"ready");try{_.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Hr(f){return f.g?f.g.readyState:0}n.ca=function(){try{return Hr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(f){if(this.g){var b=this.g.responseText;return f&&b.indexOf(f)==0&&(b=b.substring(f.length)),Mu(b)}};function Qu(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.F){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Gl(f){const b={};f=(f.g&&Hr(f)>=2&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<f.length;R++){if(L(f[R]))continue;var _=ra(f[R]);const G=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const X=b[G]||[];b[G]=X,X.push(_)}le(b,function(R){return R.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Kr(f,b,_){return _&&_.internalChannelParams&&_.internalChannelParams[f]||b}function ua(f){this.za=0,this.i=[],this.j=new ts,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Kr("failFast",!1,f),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Kr("baseRetryDelayMs",5e3,f),this.Za=Kr("retryDelaySeedMs",1e4,f),this.Ta=Kr("forwardChannelMaxRetries",2,f),this.va=Kr("forwardChannelRequestTimeoutMs",2e4,f),this.ma=f&&f.xmlHttpFactory||void 0,this.Ua=f&&f.Rb||void 0,this.Aa=f&&f.useFetchStreams||!1,this.O=void 0,this.L=f&&f.supportsCrossDomainXhr||!1,this.M="",this.h=new sa(f&&f.concurrentRequestLimit),this.Ba=new mo,this.S=f&&f.fastHandshake||!1,this.R=f&&f.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=f&&f.Pb||!1,f&&f.ua&&this.j.ua(),f&&f.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&f&&f.detectBufferingProxy||!1,this.ia=void 0,f&&f.longPollingTimeout&&f.longPollingTimeout>0&&(this.ia=f.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=ua.prototype,n.ka=8,n.I=1,n.connect=function(f,b,_,R){wt(0),this.W=f,this.H=b||{},_&&R!==void 0&&(this.H.OSID=_,this.H.OAID=R),this.F=this.X,this.J=Yl(this,null,this.W),vi(this)};function da(f){if(ha(f),f.I==3){var b=f.V++,_=Yn(f.J);if(Je(_,"SID",f.M),Je(_,"RID",b),Je(_,"TYPE","terminate"),qr(f,_),b=new Qn(f,f.j,b),b.M=2,b.A=mi(Yn(_)),_=!1,c.navigator&&c.navigator.sendBeacon)try{_=c.navigator.sendBeacon(b.A.toString(),"")}catch{}!_&&c.Image&&(new Image().src=b.A,_=!0),_||(b.g=Xu(b.j,null),b.g.ea(b.A)),b.F=Date.now(),so(b)}yo(f)}function On(f){f.g&&(go(f),f.g.cancel(),f.g=null)}function ha(f){On(f),f.v&&(c.clearTimeout(f.v),f.v=null),fa(f),f.h.cancel(),f.m&&(typeof f.m=="number"&&c.clearTimeout(f.m),f.m=null)}function vi(f){if(!Ol(f.h)&&!f.m){f.m=!0;var b=f.Ea;z||C(),W||(z(),W=!0),A.add(b,f),f.D=0}}function Yu(f,b){return ao(f.h)>=f.h.j-(f.m?1:0)?!1:f.m?(f.i=b.G.concat(f.i),!0):f.I==1||f.I==2||f.D>=(f.Sa?0:f.Ta)?!1:(f.m=es(m(f.Ea,f,b),pa(f,f.D)),f.D++,!0)}n.Ea=function(f){if(this.m)if(this.m=null,this.I==1){if(!f){this.V=Math.floor(Math.random()*1e5),f=this.V++;const G=new Qn(this,this.j,f);let X=this.o;if(this.U&&(X?(X=H(X),Re(X,this.U)):X=this.U),this.u!==null||this.R||(G.J=X,X=null),this.S)e:{for(var b=0,_=0;_<this.i.length;_++){t:{var R=this.i[_];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(b+=R,b>4096){b=_;break e}if(b===4096||_===this.i.length-1){b=_+1;break e}}b=1e3}else b=1e3;b=Ql(this,G,b),_=Yn(this.J),Je(_,"RID",f),Je(_,"CVER",22),this.G&&Je(_,"X-HTTP-Session-Id",this.G),qr(this,_),X&&(this.R?b="headers="+Or(qu(X))+"&"+b:this.u&&ca(_,this.u,X)),oa(this.h,G),this.Ra&&Je(_,"TYPE","init"),this.S?(Je(_,"$req",b),Je(_,"SID","null"),G.U=!0,yr(G,_,null)):yr(G,_,b),this.I=2}}else this.I==3&&(f?po(this,f):this.i.length==0||Ol(this.h)||po(this))};function po(f,b){var _;b?_=b.l:_=f.V++;const R=Yn(f.J);Je(R,"SID",f.M),Je(R,"RID",_),Je(R,"AID",f.K),qr(f,R),f.u&&f.o&&ca(R,f.u,f.o),_=new Qn(f,f.j,_,f.D+1),f.u===null&&(_.J=f.o),b&&(f.i=b.G.concat(f.i)),b=Ql(f,_,1e3),_.H=Math.round(f.va*.5)+Math.round(f.va*.5*Math.random()),oa(f.h,_),yr(_,R,b)}function qr(f,b){f.H&&me(f.H,function(_,R){Je(b,R,_)}),f.l&&me({},function(_,R){Je(b,R,_)})}function Ql(f,b,_){_=Math.min(f.i.length,_);const R=f.l?m(f.l.Ka,f.l,f):null;e:{var G=f.i;let Ne=-1;for(;;){const It=["count="+_];Ne==-1?_>0?(Ne=G[0].g,It.push("ofs="+Ne)):Ne=0:It.push("ofs="+Ne);let tt=!0;for(let Mt=0;Mt<_;Mt++){var X=G[Mt].g;const zn=G[Mt].map;if(X-=Ne,X<0)Ne=Math.max(0,G[Mt].g-100),tt=!1;else try{X="req"+X+"_"||"";try{var ce=zn instanceof Map?zn:Object.entries(zn);for(const[xi,Qr]of ce){let Yr=Qr;h(Qr)&&(Yr=Yi(Qr)),It.push(X+xi+"="+encodeURIComponent(Yr))}}catch(xi){throw It.push(X+"type="+encodeURIComponent("_badmap")),xi}}catch{R&&R(zn)}}if(tt){ce=It.join("&");break e}}ce=void 0}return f=f.i.splice(0,_),b.G=f,ce}function an(f){if(!f.g&&!f.v){f.Y=1;var b=f.Da;z||C(),W||(z(),W=!0),A.add(b,f),f.A=0}}function Gr(f){return f.g||f.v||f.A>=3?!1:(f.Y++,f.v=es(m(f.Da,f),pa(f,f.A)),f.A++,!0)}n.Da=function(){if(this.v=null,ls(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var f=4*this.T;this.j.info("BP detection timer enabled: "+f),this.B=es(m(this.Wa,this),f)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,wt(10),On(this),ls(this))};function go(f){f.B!=null&&(c.clearTimeout(f.B),f.B=null)}function ls(f){f.g=new Qn(f,f.j,"rpc",f.Y),f.u===null&&(f.g.J=f.o),f.g.P=0;var b=Yn(f.na);Je(b,"RID","rpc"),Je(b,"SID",f.M),Je(b,"AID",f.K),Je(b,"CI",f.F?"0":"1"),!f.F&&f.ia&&Je(b,"TO",f.ia),Je(b,"TYPE","xmlhttp"),qr(f,b),f.u&&f.o&&ca(b,f.u,f.o),f.O&&(f.g.H=f.O);var _=f.g;f=f.ba,_.M=1,_.A=mi(Yn(b)),_.u=null,_.R=!0,Vl(_,f)}n.Va=function(){this.C!=null&&(this.C=null,On(this),Gr(this),wt(19))};function fa(f){f.C!=null&&(c.clearTimeout(f.C),f.C=null)}function ma(f,b){var _=null;if(f.g==b){fa(f),go(f),f.g=null;var R=2}else if(Bl(f.h,b))_=b.G,lo(f.h,b),R=1;else return;if(f.I!=0){if(b.o)if(R==1){_=b.u?b.u.length:0,b=Date.now()-b.F;var G=f.D;R=Zi(),Tt(R,new Ml(R,_)),vi(f)}else an(f);else if(G=b.m,G==3||G==0&&b.X>0||!(R==1&&Yu(f,b)||R==2&&Gr(f)))switch(_&&_.length>0&&(b=f.h,b.i=b.i.concat(_)),G){case 1:Bn(f,5);break;case 4:Bn(f,10);break;case 3:Bn(f,6);break;default:Bn(f,2)}}}function pa(f,b){let _=f.Qa+Math.floor(Math.random()*f.Za);return f.isActive()||(_*=2),_*b}function Bn(f,b){if(f.j.info("Error code "+b),b==2){var _=m(f.bb,f),R=f.Ua;const G=!R;R=new Br(R||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||co(R,"https"),mi(R),G?Wr(R.toString(),_):$r(R.toString(),_)}else wt(2);f.I=0,f.l&&f.l.pa(b),yo(f),ha(f)}n.bb=function(f){f?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function yo(f){if(f.I=0,f.ja=[],f.l){const b=Dn(f.h);(b.length!=0||f.i.length!=0)&&(k(f.ja,b),k(f.ja,f.i),f.h.i.length=0,E(f.i),f.i.length=0),f.l.oa()}}function Yl(f,b,_){var R=_ instanceof Br?Yn(_):new Br(_);if(R.g!="")b&&(R.g=b+"."+R.g),zr(R,R.u);else{var G=c.location;R=G.protocol,b=b?b+"."+G.hostname:G.hostname,G=+G.port;const X=new Br(null);R&&co(X,R),b&&(X.g=b),G&&zr(X,G),_&&(X.h=_),R=X}return _=f.G,b=f.wa,_&&b&&Je(R,_,b),Je(R,"VER",f.ka),qr(f,R),R}function Xu(f,b,_){if(b&&!f.L)throw Error("Can't create secondary domain capable XhrIo object.");return b=f.Aa&&!f.ma?new nt(new pi({ab:_})):new nt(f.ma),b.Fa(f.L),b}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ju(){}n=Ju.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function ga(){}ga.prototype.g=function(f,b){return new Jt(f,b)};function Jt(f,b){Nt.call(this),this.g=new ua(b),this.l=f,this.h=b&&b.messageUrlParams||null,f=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(f?f["X-WebChannel-Content-Type"]=b.messageContentType:f={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.sa&&(f?f["X-WebChannel-Client-Profile"]=b.sa:f={"X-WebChannel-Client-Profile":b.sa}),this.g.U=f,(f=b&&b.Qb)&&!L(f)&&(this.g.u=f),this.A=b&&b.supportsCrossDomainXhr||!1,this.v=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!L(b)&&(this.g.G=b,f=this.h,f!==null&&b in f&&(f=this.h,b in f&&delete f[b])),this.j=new cs(this)}y(Jt,Nt),Jt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Jt.prototype.close=function(){da(this.g)},Jt.prototype.o=function(f){var b=this.g;if(typeof f=="string"){var _={};_.__data__=f,f=_}else this.v&&(_={},_.__data__=Yi(f),f=_);b.i.push(new Bf(b.Ya++,f)),b.I==3&&vi(b)},Jt.prototype.N=function(){this.g.l=null,delete this.j,da(this.g),delete this.g,Jt.Z.N.call(this)};function Zu(f){ea.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var b=f.__sm__;if(b){e:{for(const _ in b){f=_;break e}f=void 0}(this.i=f)&&(f=this.i,b=b!==null&&f in b?b[f]:void 0),this.data=b}else this.data=f}y(Zu,ea);function ed(){Nl.call(this),this.status=1}y(ed,Nl);function cs(f){this.g=f}y(cs,Ju),cs.prototype.ra=function(){Tt(this.g,"a")},cs.prototype.qa=function(f){Tt(this.g,new Zu(f))},cs.prototype.pa=function(f){Tt(this.g,new ed)},cs.prototype.oa=function(){Tt(this.g,"b")},ga.prototype.createWebChannel=ga.prototype.g,Jt.prototype.send=Jt.prototype.o,Jt.prototype.open=Jt.prototype.m,Jt.prototype.close=Jt.prototype.close,O_=function(){return new ga},L_=function(){return Zi()},V_=gr,ug={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ns.NO_ERROR=0,ns.TIMEOUT=8,ns.HTTP_ERROR=6,mh=ns,rs.COMPLETE="complete",D_=rs,Du.EventType=Ji,Ji.OPEN="a",Ji.CLOSE="b",Ji.ERROR="c",Ji.MESSAGE="d",Nt.prototype.listen=Nt.prototype.J,Ac=Du,nt.prototype.listenOnce=nt.prototype.K,nt.prototype.getLastError=nt.prototype.Ha,nt.prototype.getLastErrorCode=nt.prototype.ya,nt.prototype.getStatus=nt.prototype.ca,nt.prototype.getResponseJson=nt.prototype.La,nt.prototype.getResponseText=nt.prototype.la,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Fa,M_=nt}).apply(typeof Yd<"u"?Yd:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};fn.UNAUTHENTICATED=new fn(null),fn.GOOGLE_CREDENTIALS=new fn("google-credentials-uid"),fn.FIRST_PARTY=new fn("first-party-uid"),fn.MOCK_USER=new fn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xl="12.8.0";function CP(n){xl=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo=new dy("@firebase/firestore");function Ba(){return Wo.logLevel}function pe(n,...e){if(Wo.logLevel<=Fe.DEBUG){const t=e.map(Sy);Wo.debug(`Firestore (${xl}): ${n}`,...t)}}function Fi(n,...e){if(Wo.logLevel<=Fe.ERROR){const t=e.map(Sy);Wo.error(`Firestore (${xl}): ${n}`,...t)}}function il(n,...e){if(Wo.logLevel<=Fe.WARN){const t=e.map(Sy);Wo.warn(`Firestore (${xl}): ${n}`,...t)}}function Sy(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,B_(n,r,t)}function B_(n,e,t){let r=`FIRESTORE (${xl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Fi(r),new Error(r)}function Ze(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||B_(e,s,r)}function Me(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends Hi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class jP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(fn.UNAUTHENTICATED)))}shutdown(){}}class AP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class RP{constructor(e){this.t=e,this.currentUser=fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ze(this.o===void 0,42304);let r=this.i;const s=d=>this.i!==r?(r=this.i,t(d)):Promise.resolve();let l=new Di;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Di,e.enqueueRetryable((()=>s(this.currentUser)))};const c=()=>{const d=l;e.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},h=d=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((d=>h(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?h(d):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Di)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ze(typeof r.accessToken=="string",31837,{l:r}),new z_(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ze(e===null||typeof e=="string",2055,{h:e}),new fn(e)}}class PP{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=fn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class NP{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new PP(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(fn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Hx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class MP{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,$n(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ze(this.o===void 0,3512);const r=l=>{l.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,pe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const s=l=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>s(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?s(l):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Hx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ze(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Hx(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DP(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=DP(40);for(let l=0;l<s.length;++l)r.length<20&&s[l]<t&&(r+=e.charAt(s[l]%62))}return r}}function Ue(n,e){return n<e?-1:n>e?1:0}function dg(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const s=n.charAt(r),l=e.charAt(r);if(s!==l)return _p(s)===_p(l)?Ue(s,l):_p(s)?1:-1}return Ue(n.length,e.length)}const VP=55296,LP=57343;function _p(n){const e=n.charCodeAt(0);return e>=VP&&e<=LP}function sl(n,e,t){return n.length===e.length&&n.every(((r,s)=>t(r,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kx="__name__";class ti{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ie(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ie(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return ti.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ti?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const l=ti.compareSegments(e.get(s),t.get(s));if(l!==0)return l}return Ue(e.length,t.length)}static compareSegments(e,t){const r=ti.isNumericId(e),s=ti.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?ti.extractNumericId(e).compare(ti.extractNumericId(t)):dg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ms.fromString(e.substring(4,e.length-2))}}class it extends ti{construct(e,t,r){return new it(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new he(Z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((s=>s.length>0)))}return new it(t)}static emptyPath(){return new it([])}}const OP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rn extends ti{construct(e,t,r){return new rn(e,t,r)}static isValidIdentifier(e){return OP.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Kx}static keyField(){return new rn([Kx])}static fromServerFormat(e){const t=[];let r="",s=0;const l=()=>{if(r.length===0)throw new he(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new he(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new he(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,s+=2}else h==="`"?(c=!c,s++):h!=="."||c?(r+=h,s++):(l(),s++)}if(l(),c)throw new he(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rn(t)}static emptyPath(){return new rn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.path=e}static fromPath(e){return new ke(it.fromString(e))}static fromName(e){return new ke(it.fromString(e).popFirst(5))}static empty(){return new ke(it.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&it.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return it.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ke(new it(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F_(n,e,t){if(!t)throw new he(Z.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function BP(n,e,t,r){if(e===!0&&r===!0)throw new he(Z.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function qx(n){if(!ke.isDocumentKey(n))throw new he(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Gx(n){if(ke.isDocumentKey(n))throw new he(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function U_(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function uf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ie(12329,{type:typeof n})}function ur(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new he(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=uf(n);throw new he(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(n,e){const t={typeString:n};return e&&(t.value=e),t}function vu(n,e){if(!U_(n))throw new he(Z.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const c=n[r];if(s&&typeof c!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${r}' field to equal '${l.value}'`;break}}if(t)throw new he(Z.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qx=-62135596800,Yx=1e6;class ut{static now(){return ut.fromMillis(Date.now())}static fromDate(e){return ut.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Yx);return new ut(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Qx)throw new he(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Yx}_compareTo(e){return this.seconds===e.seconds?Ue(this.nanoseconds,e.nanoseconds):Ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ut._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(vu(e,ut._jsonSchema))return new ut(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Qx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ut._jsonSchemaVersion="firestore/timestamp/1.0",ut._jsonSchema={type:Bt("string",ut._jsonSchemaVersion),seconds:Bt("number"),nanoseconds:Bt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{static fromTimestamp(e){return new Pe(e)}static min(){return new Pe(new ut(0,0))}static max(){return new Pe(new ut(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qc=-1;function zP(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Pe.fromTimestamp(r===1e9?new ut(t+1,0):new ut(t,r));return new Os(s,ke.empty(),e)}function FP(n){return new Os(n.readTime,n.key,Qc)}class Os{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Os(Pe.min(),ke.empty(),Qc)}static max(){return new Os(Pe.max(),ke.empty(),Qc)}}function UP(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ke.comparator(n.documentKey,e.documentKey),t!==0?t:Ue(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $P{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wl(n){if(n.code!==Z.FAILED_PRECONDITION||n.message!==WP)throw n;pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ee(((r,s)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,s)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ee?t:ee.resolve(t)}catch(t){return ee.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ee.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ee.reject(t)}static resolve(e){return new ee(((t,r)=>{t(e)}))}static reject(e){return new ee(((t,r)=>{r(e)}))}static waitFor(e){return new ee(((t,r)=>{let s=0,l=0,c=!1;e.forEach((h=>{++s,h.next((()=>{++l,c&&l===s&&t()}),(d=>r(d)))})),c=!0,l===s&&t()}))}static or(e){let t=ee.resolve(!1);for(const r of e)t=t.next((s=>s?ee.resolve(s):r()));return t}static forEach(e,t){const r=[];return e.forEach(((s,l)=>{r.push(t.call(this,s,l))})),this.waitFor(r)}static mapArray(e,t){return new ee(((r,s)=>{const l=e.length,c=new Array(l);let h=0;for(let d=0;d<l;d++){const m=d;t(e[m]).next((g=>{c[m]=g,++h,h===l&&r(c)}),(g=>s(g)))}}))}static doWhile(e,t){return new ee(((r,s)=>{const l=()=>{e()===!0?t().next((()=>{l()}),s):r()};l()}))}}function HP(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function bl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}df.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty=-1;function hf(n){return n==null}function Nh(n){return n===0&&1/n==-1/0}function KP(n){return typeof n=="number"&&Number.isInteger(n)&&!Nh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_="";function qP(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Xx(e)),e=GP(n.get(t),e);return Xx(e)}function GP(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const l=n.charAt(s);switch(l){case"\0":t+="";break;case W_:t+="";break;default:t+=l}}return t}function Xx(n){return n+W_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jx(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ys(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function $_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,t){this.comparator=e,this.root=t||nn.EMPTY}insert(e,t){return new xt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,nn.BLACK,null,null))}remove(e){return new xt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xd(this.root,e,this.comparator,!0)}}class Xd{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&s&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nn{constructor(e,t,r,s,l){this.key=e,this.value=t,this.color=r??nn.RED,this.left=s??nn.EMPTY,this.right=l??nn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,l){return new nn(e??this.key,t??this.value,r??this.color,s??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const l=r(e,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(e,t,r),null):l===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return nn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return nn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ie(27949);return e+(this.isRed()?0:1)}}nn.EMPTY=null,nn.RED=!0,nn.BLACK=!1;nn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie(57766)}get value(){throw Ie(16141)}get color(){throw Ie(16727)}get left(){throw Ie(29726)}get right(){throw Ie(36894)}copy(e,t,r,s,l){return this}insert(e,t,r){return new nn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.comparator=e,this.data=new xt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Zx(this.data.getIterator())}getIteratorFrom(e){return new Zx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof $t)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=r.getNext().key;if(this.comparator(s,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new $t(this.comparator);return t.data=e,t}}class Zx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.fields=e,e.sort(rn.comparator)}static empty(){return new Hn([])}unionWith(e){let t=new $t(rn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Hn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return sl(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new H_("Invalid base64 string: "+l):l}})(e);return new sn(t)}static fromUint8Array(e){const t=(function(s){let l="";for(let c=0;c<s.length;++c)l+=String.fromCharCode(s[c]);return l})(e);return new sn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}sn.EMPTY_BYTE_STRING=new sn("");const QP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bs(n){if(Ze(!!n,39018),typeof n=="string"){let e=0;const t=QP.exec(n);if(Ze(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:jt(n.seconds),nanos:jt(n.nanos)}}function jt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function zs(n){return typeof n=="string"?sn.fromBase64String(n):sn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_="server_timestamp",q_="__type__",G_="__previous_value__",Q_="__local_write_time__";function Iy(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[q_])==null?void 0:r.stringValue)===K_}function ff(n){const e=n.mapValue.fields[G_];return Iy(e)?ff(e):e}function Yc(n){const e=Bs(n.mapValue.fields[Q_].timestampValue);return new ut(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(e,t,r,s,l,c,h,d,m,g,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=m,this.isUsingEmulator=g,this.apiKey=y}}const Mh="(default)";class Xc{constructor(e,t){this.projectId=e,this.database=t||Mh}static empty(){return new Xc("","")}get isDefaultDatabase(){return this.database===Mh}isEqual(e){return e instanceof Xc&&e.projectId===this.projectId&&e.database===this.database}}function XP(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new he(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xc(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y_="__type__",JP="__max__",Jd={mapValue:{}},X_="__vector__",Dh="value";function Fs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Iy(n)?4:eN(n)?9007199254740991:ZP(n)?10:11:Ie(28295,{value:n})}function ai(n,e){if(n===e)return!0;const t=Fs(n);if(t!==Fs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Yc(n).isEqual(Yc(e));case 3:return(function(s,l){if(typeof s.timestampValue=="string"&&typeof l.timestampValue=="string"&&s.timestampValue.length===l.timestampValue.length)return s.timestampValue===l.timestampValue;const c=Bs(s.timestampValue),h=Bs(l.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,l){return zs(s.bytesValue).isEqual(zs(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,l){return jt(s.geoPointValue.latitude)===jt(l.geoPointValue.latitude)&&jt(s.geoPointValue.longitude)===jt(l.geoPointValue.longitude)})(n,e);case 2:return(function(s,l){if("integerValue"in s&&"integerValue"in l)return jt(s.integerValue)===jt(l.integerValue);if("doubleValue"in s&&"doubleValue"in l){const c=jt(s.doubleValue),h=jt(l.doubleValue);return c===h?Nh(c)===Nh(h):isNaN(c)&&isNaN(h)}return!1})(n,e);case 9:return sl(n.arrayValue.values||[],e.arrayValue.values||[],ai);case 10:case 11:return(function(s,l){const c=s.mapValue.fields||{},h=l.mapValue.fields||{};if(Jx(c)!==Jx(h))return!1;for(const d in c)if(c.hasOwnProperty(d)&&(h[d]===void 0||!ai(c[d],h[d])))return!1;return!0})(n,e);default:return Ie(52216,{left:n})}}function Jc(n,e){return(n.values||[]).find((t=>ai(t,e)))!==void 0}function ol(n,e){if(n===e)return 0;const t=Fs(n),r=Fs(e);if(t!==r)return Ue(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ue(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const h=jt(l.integerValue||l.doubleValue),d=jt(c.integerValue||c.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1})(n,e);case 3:return ew(n.timestampValue,e.timestampValue);case 4:return ew(Yc(n),Yc(e));case 5:return dg(n.stringValue,e.stringValue);case 6:return(function(l,c){const h=zs(l),d=zs(c);return h.compareTo(d)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const h=l.split("/"),d=c.split("/");for(let m=0;m<h.length&&m<d.length;m++){const g=Ue(h[m],d[m]);if(g!==0)return g}return Ue(h.length,d.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const h=Ue(jt(l.latitude),jt(c.latitude));return h!==0?h:Ue(jt(l.longitude),jt(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return tw(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var x,E,k,S;const h=l.fields||{},d=c.fields||{},m=(x=h[Dh])==null?void 0:x.arrayValue,g=(E=d[Dh])==null?void 0:E.arrayValue,y=Ue(((k=m==null?void 0:m.values)==null?void 0:k.length)||0,((S=g==null?void 0:g.values)==null?void 0:S.length)||0);return y!==0?y:tw(m,g)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===Jd.mapValue&&c===Jd.mapValue)return 0;if(l===Jd.mapValue)return 1;if(c===Jd.mapValue)return-1;const h=l.fields||{},d=Object.keys(h),m=c.fields||{},g=Object.keys(m);d.sort(),g.sort();for(let y=0;y<d.length&&y<g.length;++y){const x=dg(d[y],g[y]);if(x!==0)return x;const E=ol(h[d[y]],m[g[y]]);if(E!==0)return E}return Ue(d.length,g.length)})(n.mapValue,e.mapValue);default:throw Ie(23264,{he:t})}}function ew(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ue(n,e);const t=Bs(n),r=Bs(e),s=Ue(t.seconds,r.seconds);return s!==0?s:Ue(t.nanos,r.nanos)}function tw(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const l=ol(t[s],r[s]);if(l)return l}return Ue(t.length,r.length)}function al(n){return hg(n)}function hg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Bs(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return zs(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ke.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",s=!0;for(const l of t.values||[])s?s=!1:r+=",",r+=hg(l);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let s="{",l=!0;for(const c of r)l?l=!1:s+=",",s+=`${c}:${hg(t.fields[c])}`;return s+"}"})(n.mapValue):Ie(61005,{value:n})}function ph(n){switch(Fs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ff(n);return e?16+ph(e):16;case 5:return 2*n.stringValue.length;case 6:return zs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,l)=>s+ph(l)),0)})(n.arrayValue);case 10:case 11:return(function(r){let s=0;return Ys(r.fields,((l,c)=>{s+=l.length+ph(c)})),s})(n.mapValue);default:throw Ie(13486,{value:n})}}function nw(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function fg(n){return!!n&&"integerValue"in n}function Cy(n){return!!n&&"arrayValue"in n}function rw(n){return!!n&&"nullValue"in n}function iw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function gh(n){return!!n&&"mapValue"in n}function ZP(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[Y_])==null?void 0:r.stringValue)===X_}function Oc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ys(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Oc(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Oc(n.arrayValue.values[t]);return e}return{...n}}function eN(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===JP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.value=e}static empty(){return new Pn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!gh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Oc(t)}setAll(e){let t=rn.emptyPath(),r={},s=[];e.forEach(((c,h)=>{if(!t.isImmediateParentOf(h)){const d=this.getFieldsMap(t);this.applyChanges(d,r,s),r={},s=[],t=h.popLast()}c?r[h.lastSegment()]=Oc(c):s.push(h.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,r,s)}delete(e){const t=this.field(e.popLast());gh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ai(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];gh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Ys(t,((s,l)=>e[s]=l));for(const s of r)delete e[s]}clone(){return new Pn(Oc(this.value))}}function J_(n){const e=[];return Ys(n.fields,((t,r)=>{const s=new rn([t]);if(gh(r)){const l=J_(r.mapValue).fields;if(l.length===0)e.push(s);else for(const c of l)e.push(s.child(c))}else e.push(s)})),new Hn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e,t,r,s,l,c,h){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=l,this.data=c,this.documentState=h}static newInvalidDocument(e){return new mn(e,0,Pe.min(),Pe.min(),Pe.min(),Pn.empty(),0)}static newFoundDocument(e,t,r,s){return new mn(e,1,t,Pe.min(),r,s,0)}static newNoDocument(e,t){return new mn(e,2,t,Pe.min(),Pe.min(),Pn.empty(),0)}static newUnknownDocument(e,t){return new mn(e,3,t,Pe.min(),Pe.min(),Pn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,t){this.position=e,this.inclusive=t}}function sw(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const l=e[s],c=n.position[s];if(l.field.isKeyField()?r=ke.comparator(ke.fromName(c.referenceValue),t.key):r=ol(c,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function ow(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ai(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,t="asc"){this.field=e,this.dir=t}}function tN(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{}class Ot extends Z_{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new rN(e,t,r):t==="array-contains"?new oN(e,r):t==="in"?new aN(e,r):t==="not-in"?new lN(e,r):t==="array-contains-any"?new cN(e,r):new Ot(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new iN(e,r):new sN(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ol(t,this.value)):t!==null&&Fs(this.value)===Fs(t)&&this.matchesComparison(ol(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Pr extends Z_{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Pr(e,t)}matches(e){return eS(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function eS(n){return n.op==="and"}function tS(n){return nN(n)&&eS(n)}function nN(n){for(const e of n.filters)if(e instanceof Pr)return!1;return!0}function mg(n){if(n instanceof Ot)return n.field.canonicalString()+n.op.toString()+al(n.value);if(tS(n))return n.filters.map((e=>mg(e))).join(",");{const e=n.filters.map((t=>mg(t))).join(",");return`${n.op}(${e})`}}function nS(n,e){return n instanceof Ot?(function(r,s){return s instanceof Ot&&r.op===s.op&&r.field.isEqual(s.field)&&ai(r.value,s.value)})(n,e):n instanceof Pr?(function(r,s){return s instanceof Pr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((l,c,h)=>l&&nS(c,s.filters[h])),!0):!1})(n,e):void Ie(19439)}function rS(n){return n instanceof Ot?(function(t){return`${t.field.canonicalString()} ${t.op} ${al(t.value)}`})(n):n instanceof Pr?(function(t){return t.op.toString()+" {"+t.getFilters().map(rS).join(" ,")+"}"})(n):"Filter"}class rN extends Ot{constructor(e,t,r){super(e,t,r),this.key=ke.fromName(r.referenceValue)}matches(e){const t=ke.comparator(e.key,this.key);return this.matchesComparison(t)}}class iN extends Ot{constructor(e,t){super(e,"in",t),this.keys=iS("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class sN extends Ot{constructor(e,t){super(e,"not-in",t),this.keys=iS("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function iS(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((r=>ke.fromName(r.referenceValue)))}class oN extends Ot{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Cy(t)&&Jc(t.arrayValue,this.value)}}class aN extends Ot{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Jc(this.value.arrayValue,t)}}class lN extends Ot{constructor(e,t){super(e,"not-in",t)}matches(e){if(Jc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Jc(this.value.arrayValue,t)}}class cN extends Ot{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Cy(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Jc(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e,t=null,r=[],s=[],l=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=l,this.startAt=c,this.endAt=h,this.Te=null}}function aw(n,e=null,t=[],r=[],s=null,l=null,c=null){return new uN(n,e,t,r,s,l,c)}function jy(n){const e=Me(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>mg(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),hf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>al(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>al(r))).join(",")),e.Te=t}return e.Te}function Ay(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!tN(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!nS(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!ow(n.startAt,e.startAt)&&ow(n.endAt,e.endAt)}function pg(n){return ke.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e,t=null,r=[],s=[],l=null,c="F",h=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=l,this.limitType=c,this.startAt=h,this.endAt=d,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function dN(n,e,t,r,s,l,c,h){return new kl(n,e,t,r,s,l,c,h)}function Ry(n){return new kl(n)}function lw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function hN(n){return ke.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function sS(n){return n.collectionGroup!==null}function Bc(n){const e=Me(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new $t(rn.comparator);return c.filters.forEach((d=>{d.getFlattenedFilters().forEach((m=>{m.isInequality()&&(h=h.add(m.field))}))})),h})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Zc(l,r))})),t.has(rn.keyField().canonicalString())||e.Ie.push(new Zc(rn.keyField(),r))}return e.Ie}function ri(n){const e=Me(n);return e.Ee||(e.Ee=fN(e,Bc(n))),e.Ee}function fN(n,e){if(n.limitType==="F")return aw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const l=s.dir==="desc"?"asc":"desc";return new Zc(s.field,l)}));const t=n.endAt?new Vh(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Vh(n.startAt.position,n.startAt.inclusive):null;return aw(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function gg(n,e){const t=n.filters.concat([e]);return new kl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function mN(n,e){const t=n.explicitOrderBy.concat([e]);return new kl(n.path,n.collectionGroup,t,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}function Lh(n,e,t){return new kl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function mf(n,e){return Ay(ri(n),ri(e))&&n.limitType===e.limitType}function oS(n){return`${jy(ri(n))}|lt:${n.limitType}`}function za(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((s=>rS(s))).join(", ")}]`),hf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((s=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(s))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((s=>al(s))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((s=>al(s))).join(",")),`Target(${r})`})(ri(n))}; limitType=${n.limitType})`}function pf(n,e){return e.isFoundDocument()&&(function(r,s){const l=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):ke.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(n,e)&&(function(r,s){for(const l of Bc(r))if(!l.field.isKeyField()&&s.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(r,s){for(const l of r.filters)if(!l.matches(s))return!1;return!0})(n,e)&&(function(r,s){return!(r.startAt&&!(function(c,h,d){const m=sw(c,h,d);return c.inclusive?m<=0:m<0})(r.startAt,Bc(r),s)||r.endAt&&!(function(c,h,d){const m=sw(c,h,d);return c.inclusive?m>=0:m>0})(r.endAt,Bc(r),s))})(n,e)}function pN(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function aS(n){return(e,t)=>{let r=!1;for(const s of Bc(n)){const l=gN(s,e,t);if(l!==0)return l;r=r||s.field.isKeyField()}return 0}}function gN(n,e,t){const r=n.field.isKeyField()?ke.comparator(e.key,t.key):(function(l,c,h){const d=c.data.field(l),m=h.data.field(l);return d!==null&&m!==null?ol(d,m):Ie(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ie(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,l]of r)if(this.equalsFn(s,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return void(s[l]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ys(this.inner,((t,r)=>{for(const[s,l]of r)e(s,l)}))}isEmpty(){return $_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN=new xt(ke.comparator);function Ui(){return yN}const lS=new xt(ke.comparator);function Rc(...n){let e=lS;for(const t of n)e=e.insert(t.key,t);return e}function cS(n){let e=lS;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Mo(){return zc()}function uS(){return zc()}function zc(){return new Yo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const vN=new xt(ke.comparator),xN=new $t(ke.comparator);function We(...n){let e=xN;for(const t of n)e=e.add(t);return e}const wN=new $t(Ue);function bN(){return wN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Py(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nh(e)?"-0":e}}function dS(n){return{integerValue:""+n}}function hS(n,e){return KP(e)?dS(e):Py(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(){this._=void 0}}function kN(n,e,t){return n instanceof eu?(function(s,l){const c={fields:{[q_]:{stringValue:K_},[Q_]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return l&&Iy(l)&&(l=ff(l)),l&&(c.fields[G_]=l),{mapValue:c}})(t,e):n instanceof ll?mS(n,e):n instanceof tu?pS(n,e):(function(s,l){const c=fS(s,l),h=cw(c)+cw(s.Ae);return fg(c)&&fg(s.Ae)?dS(h):Py(s.serializer,h)})(n,e)}function _N(n,e,t){return n instanceof ll?mS(n,e):n instanceof tu?pS(n,e):t}function fS(n,e){return n instanceof nu?(function(r){return fg(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class eu extends gf{}class ll extends gf{constructor(e){super(),this.elements=e}}function mS(n,e){const t=gS(e);for(const r of n.elements)t.some((s=>ai(s,r)))||t.push(r);return{arrayValue:{values:t}}}class tu extends gf{constructor(e){super(),this.elements=e}}function pS(n,e){let t=gS(e);for(const r of n.elements)t=t.filter((s=>!ai(s,r)));return{arrayValue:{values:t}}}class nu extends gf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function cw(n){return jt(n.integerValue||n.doubleValue)}function gS(n){return Cy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{constructor(e,t){this.field=e,this.transform=t}}function SN(n,e){return n.field.isEqual(e.field)&&(function(r,s){return r instanceof ll&&s instanceof ll||r instanceof tu&&s instanceof tu?sl(r.elements,s.elements,ai):r instanceof nu&&s instanceof nu?ai(r.Ae,s.Ae):r instanceof eu&&s instanceof eu})(n.transform,e.transform)}class EN{constructor(e,t){this.version=e,this.transformResults=t}}class _n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new _n}static exists(e){return new _n(void 0,e)}static updateTime(e){return new _n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class yf{}function yS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new vf(n.key,_n.none()):new xu(n.key,n.data,_n.none());{const t=n.data,r=Pn.empty();let s=new $t(rn.comparator);for(let l of e.fields)if(!s.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?r.delete(l):r.set(l,c),s=s.add(l)}return new Xs(n.key,r,new Hn(s.toArray()),_n.none())}}function TN(n,e,t){n instanceof xu?(function(s,l,c){const h=s.value.clone(),d=dw(s.fieldTransforms,l,c.transformResults);h.setAll(d),l.convertToFoundDocument(c.version,h).setHasCommittedMutations()})(n,e,t):n instanceof Xs?(function(s,l,c){if(!yh(s.precondition,l))return void l.convertToUnknownDocument(c.version);const h=dw(s.fieldTransforms,l,c.transformResults),d=l.data;d.setAll(vS(s)),d.setAll(h),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):(function(s,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Fc(n,e,t,r){return n instanceof xu?(function(l,c,h,d){if(!yh(l.precondition,c))return h;const m=l.value.clone(),g=hw(l.fieldTransforms,d,c);return m.setAll(g),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null})(n,e,t,r):n instanceof Xs?(function(l,c,h,d){if(!yh(l.precondition,c))return h;const m=hw(l.fieldTransforms,d,c),g=c.data;return g.setAll(vS(l)),g.setAll(m),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),h===null?null:h.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((y=>y.field)))})(n,e,t,r):(function(l,c,h){return yh(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h})(n,e,t)}function IN(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),l=fS(r.transform,s||null);l!=null&&(t===null&&(t=Pn.empty()),t.set(r.field,l))}return t||null}function uw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&sl(r,s,((l,c)=>SN(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class xu extends yf{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Xs extends yf{constructor(e,t,r,s,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function vS(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function dw(n,e,t){const r=new Map;Ze(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let s=0;s<t.length;s++){const l=n[s],c=l.transform,h=e.data.field(l.field);r.set(l.field,_N(c,h,t[s]))}return r}function hw(n,e,t){const r=new Map;for(const s of n){const l=s.transform,c=t.data.field(s.field);r.set(s.field,kN(l,c,e))}return r}class vf extends yf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class CN extends yf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const l=this.mutations[s];l.key.isEqual(e.key)&&TN(l,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Fc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Fc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=uS();return this.mutations.forEach((s=>{const l=e.get(s.key),c=l.overlayedDocument;let h=this.applyToLocalView(c,l.mutatedFields);h=t.has(s.key)?null:h;const d=yS(c,h);d!==null&&r.set(s.key,d),c.isValidDocument()||c.convertToNoDocument(Pe.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),We())}isEqual(e){return this.batchId===e.batchId&&sl(this.mutations,e.mutations,((t,r)=>uw(t,r)))&&sl(this.baseMutations,e.baseMutations,((t,r)=>uw(t,r)))}}class My{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Ze(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return vN})();const l=e.mutations;for(let c=0;c<l.length;c++)s=s.insert(l[c].key,r[c].version);return new My(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vt,qe;function PN(n){switch(n){case Z.OK:return Ie(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return Ie(15467,{code:n})}}function xS(n){if(n===void 0)return Fi("GRPC error has no .code"),Z.UNKNOWN;switch(n){case Vt.OK:return Z.OK;case Vt.CANCELLED:return Z.CANCELLED;case Vt.UNKNOWN:return Z.UNKNOWN;case Vt.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case Vt.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case Vt.INTERNAL:return Z.INTERNAL;case Vt.UNAVAILABLE:return Z.UNAVAILABLE;case Vt.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case Vt.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case Vt.NOT_FOUND:return Z.NOT_FOUND;case Vt.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case Vt.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case Vt.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case Vt.ABORTED:return Z.ABORTED;case Vt.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case Vt.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case Vt.DATA_LOSS:return Z.DATA_LOSS;default:return Ie(39323,{code:n})}}(qe=Vt||(Vt={}))[qe.OK=0]="OK",qe[qe.CANCELLED=1]="CANCELLED",qe[qe.UNKNOWN=2]="UNKNOWN",qe[qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qe[qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qe[qe.NOT_FOUND=5]="NOT_FOUND",qe[qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",qe[qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",qe[qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",qe[qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qe[qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qe[qe.ABORTED=10]="ABORTED",qe[qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",qe[qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",qe[qe.INTERNAL=13]="INTERNAL",qe[qe.UNAVAILABLE=14]="UNAVAILABLE",qe[qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN=new Ms([4294967295,4294967295],0);function fw(n){const e=NN().encode(n),t=new N_;return t.update(e),new Uint8Array(t.digest())}function mw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ms([t,r],0),new Ms([s,l],0)]}class Dy{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Pc(`Invalid padding: ${t}`);if(r<0)throw new Pc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Pc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Pc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ms.fromNumber(this.ge)}ye(e,t,r){let s=e.add(t.multiply(Ms.fromNumber(r)));return s.compare(MN)===1&&(s=new Ms([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=fw(e),[r,s]=mw(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,s,l);if(!this.we(c))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Dy(l,s,t);return r.forEach((h=>c.insert(h))),c}insert(e){if(this.ge===0)return;const t=fw(e),[r,s]=mw(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,s,l);this.be(c)}}be(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Pc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e,t,r,s,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,wu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new xf(Pe.min(),s,new xt(Ue),Ui(),We())}}class wu{constructor(e,t,r,s,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new wu(r,t,We(),We(),We())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e,t,r,s){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=s}}class wS{constructor(e,t){this.targetId=e,this.Ce=t}}class bS{constructor(e,t,r=sn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class pw{constructor(){this.ve=0,this.Fe=gw(),this.Me=sn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=We(),t=We(),r=We();return this.Fe.forEach(((s,l)=>{switch(l){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Ie(38017,{changeType:l})}})),new wu(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=gw()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Ze(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class DN{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ui(),this.He=Zd(),this.Je=Zd(),this.Ze=new xt(Ue)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Ie(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,r=e.Ce.count,s=this.ot(t);if(s){const l=s.target;if(pg(l))if(r===0){const c=new ke(l.path);this.et(t,c,mn.newNoDocument(c,Pe.min()))}else Ze(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const h=this.ut(e),d=h?this.ct(h,e,c):1;if(d!==0){this.it(t);const m=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,m)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:l=0}=t;let c,h;try{c=zs(r).toUint8Array()}catch(d){if(d instanceof H_)return il("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new Dy(c,s,l)}catch(d){return il(d instanceof Pc?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.ge===0?null:h}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let s=0;return r.forEach((l=>{const c=this.Ge.ht(),h=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(h)||(this.et(t,l,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const h=this.ot(c);if(h){if(l.current&&pg(h.target)){const d=new ke(h.target.path);this.It(d).has(c)||this.Et(c,d)||this.et(c,d,mn.newNoDocument(d,e))}l.Be&&(t.set(c,l.ke()),l.Ke())}}));let r=We();this.Je.forEach(((l,c)=>{let h=!0;c.forEachWhile((d=>{const m=this.ot(d);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(r=r.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const s=new xf(e,t,this.Ze,this.je,r);return this.je=Ui(),this.He=Zd(),this.Je=Zd(),this.Ze=new xt(Ue),s}Ye(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.qe(t,1):s.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new pw,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new $t(Ue),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new $t(Ue),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||pe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new pw),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Zd(){return new xt(ke.comparator)}function gw(){return new xt(ke.comparator)}const VN={asc:"ASCENDING",desc:"DESCENDING"},LN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ON={and:"AND",or:"OR"};class BN{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function yg(n,e){return n.useProto3Json||hf(e)?e:{value:e}}function Oh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function zN(n,e){return Oh(n,e.toTimestamp())}function ii(n){return Ze(!!n,49232),Pe.fromTimestamp((function(t){const r=Bs(t);return new ut(r.seconds,r.nanos)})(n))}function Vy(n,e){return vg(n,e).canonicalString()}function vg(n,e){const t=(function(s){return new it(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function _S(n){const e=it.fromString(n);return Ze(CS(e),10190,{key:e.toString()}),e}function xg(n,e){return Vy(n.databaseId,e.path)}function Sp(n,e){const t=_S(e);if(t.get(1)!==n.databaseId.projectId)throw new he(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new he(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ke(ES(t))}function SS(n,e){return Vy(n.databaseId,e)}function FN(n){const e=_S(n);return e.length===4?it.emptyPath():ES(e)}function wg(n){return new it(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ES(n){return Ze(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function yw(n,e,t){return{name:xg(n,e),fields:t.value.mapValue.fields}}function UN(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Ie(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],l=(function(m,g){return m.useProto3Json?(Ze(g===void 0||typeof g=="string",58123),sn.fromBase64String(g||"")):(Ze(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),sn.fromUint8Array(g||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&(function(m){const g=m.code===void 0?Z.UNKNOWN:xS(m.code);return new he(g,m.message||"")})(c);t=new bS(r,s,l,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Sp(n,r.document.name),l=ii(r.document.updateTime),c=r.document.createTime?ii(r.document.createTime):Pe.min(),h=new Pn({mapValue:{fields:r.document.fields}}),d=mn.newFoundDocument(s,l,c,h),m=r.targetIds||[],g=r.removedTargetIds||[];t=new vh(m,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Sp(n,r.document),l=r.readTime?ii(r.readTime):Pe.min(),c=mn.newNoDocument(s,l),h=r.removedTargetIds||[];t=new vh([],h,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Sp(n,r.document),l=r.removedTargetIds||[];t=new vh([],l,s,null)}else{if(!("filter"in e))return Ie(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:l}=r,c=new RN(s,l),h=r.targetId;t=new wS(h,c)}}return t}function WN(n,e){let t;if(e instanceof xu)t={update:yw(n,e.key,e.value)};else if(e instanceof vf)t={delete:xg(n,e.key)};else if(e instanceof Xs)t={update:yw(n,e.key,e.data),updateMask:JN(e.fieldMask)};else{if(!(e instanceof CN))return Ie(16599,{dt:e.type});t={verify:xg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(l,c){const h=c.transform;if(h instanceof eu)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof ll)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof tu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof nu)return{fieldPath:c.field.canonicalString(),increment:h.Ae};throw Ie(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(s,l){return l.updateTime!==void 0?{updateTime:zN(s,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ie(27497)})(n,e.precondition)),t}function $N(n,e){return n&&n.length>0?(Ze(e!==void 0,14353),n.map((t=>(function(s,l){let c=s.updateTime?ii(s.updateTime):ii(l);return c.isEqual(Pe.min())&&(c=ii(l)),new EN(c,s.transformResults||[])})(t,e)))):[]}function HN(n,e){return{documents:[SS(n,e.path)]}}function KN(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=SS(n,s);const l=(function(m){if(m.length!==0)return IS(Pr.create(m,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(m){if(m.length!==0)return m.map((g=>(function(x){return{field:Fa(x.field),direction:QN(x.dir)}})(g)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=yg(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:t,parent:s}}function qN(n){let e=FN(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Ze(r===1,65062);const g=t.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let l=[];t.where&&(l=(function(y){const x=TS(y);return x instanceof Pr&&tS(x)?x.getFilters():[x]})(t.where));let c=[];t.orderBy&&(c=(function(y){return y.map((x=>(function(k){return new Zc(Ua(k.field),(function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(x)))})(t.orderBy));let h=null;t.limit&&(h=(function(y){let x;return x=typeof y=="object"?y.value:y,hf(x)?null:x})(t.limit));let d=null;t.startAt&&(d=(function(y){const x=!!y.before,E=y.values||[];return new Vh(E,x)})(t.startAt));let m=null;return t.endAt&&(m=(function(y){const x=!y.before,E=y.values||[];return new Vh(E,x)})(t.endAt)),dN(e,s,c,l,h,"F",d,m)}function GN(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function TS(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Ua(t.unaryFilter.field);return Ot.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ua(t.unaryFilter.field);return Ot.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Ua(t.unaryFilter.field);return Ot.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Ua(t.unaryFilter.field);return Ot.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ie(61313);default:return Ie(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ot.create(Ua(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ie(58110);default:return Ie(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Pr.create(t.compositeFilter.filters.map((r=>TS(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ie(1026)}})(t.compositeFilter.op))})(n):Ie(30097,{filter:n})}function QN(n){return VN[n]}function YN(n){return LN[n]}function XN(n){return ON[n]}function Fa(n){return{fieldPath:n.canonicalString()}}function Ua(n){return rn.fromServerFormat(n.fieldPath)}function IS(n){return n instanceof Ot?(function(t){if(t.op==="=="){if(iw(t.value))return{unaryFilter:{field:Fa(t.field),op:"IS_NAN"}};if(rw(t.value))return{unaryFilter:{field:Fa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(iw(t.value))return{unaryFilter:{field:Fa(t.field),op:"IS_NOT_NAN"}};if(rw(t.value))return{unaryFilter:{field:Fa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fa(t.field),op:YN(t.op),value:t.value}}})(n):n instanceof Pr?(function(t){const r=t.getFilters().map((s=>IS(s)));return r.length===1?r[0]:{compositeFilter:{op:XN(t.op),filters:r}}})(n):Ie(54877,{filter:n})}function JN(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function CS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function jS(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e,t,r,s,l=Pe.min(),c=Pe.min(),h=sn.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(e){return new js(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new js(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new js(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new js(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(e){this.yt=e}}function e4(n){const e=qN({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Lh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(){this.Sn=new n4}addToCollectionParentIndex(e,t){return this.Sn.add(t),ee.resolve()}getCollectionParents(e,t){return ee.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return ee.resolve()}deleteFieldIndex(e,t){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,t){return ee.resolve()}getDocumentsMatchingTarget(e,t){return ee.resolve(null)}getIndexType(e,t){return ee.resolve(0)}getFieldIndexes(e,t){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,t){return ee.resolve(Os.min())}getMinOffsetFromCollectionGroup(e,t){return ee.resolve(Os.min())}updateCollectionGroup(e,t,r){return ee.resolve()}updateIndexEntries(e,t){return ee.resolve()}}class n4{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new $t(it.comparator),l=!s.has(r);return this.index[t]=s.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new $t(it.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},AS=41943040;class Rn{static withCacheSize(e){return new Rn(e,Rn.DEFAULT_COLLECTION_PERCENTILE,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rn.DEFAULT_COLLECTION_PERCENTILE=10,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rn.DEFAULT=new Rn(AS,Rn.DEFAULT_COLLECTION_PERCENTILE,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rn.DISABLED=new Rn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new cl(0)}static ar(){return new cl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw="LruGarbageCollector",r4=1048576;function ww([n,e],[t,r]){const s=Ue(n,t);return s===0?Ue(e,r):s}class i4{constructor(e){this.Pr=e,this.buffer=new $t(ww),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();ww(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class s4{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){pe(xw,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){bl(t)?pe(xw,"Ignoring IndexedDB error during garbage collection: ",t):await wl(t)}await this.Ar(3e5)}))}}class o4{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return ee.resolve(df.ce);const r=new i4(t);return this.Vr.forEachTarget(e,(s=>r.Er(s.sequenceNumber))).next((()=>this.Vr.mr(e,(s=>r.Er(s))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(pe("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(vw)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),vw):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,s,l,c,h,d,m;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((y=>(y>this.params.maximumSequenceNumbersToCollect?(pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),s=this.params.maximumSequenceNumbersToCollect):s=y,c=Date.now(),this.nthSequenceNumber(e,s)))).next((y=>(r=y,h=Date.now(),this.removeTargets(e,r,t)))).next((y=>(l=y,d=Date.now(),this.removeOrphanedDocuments(e,r)))).next((y=>(m=Date.now(),Ba()<=Fe.DEBUG&&pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-g}ms
	Determined least recently used ${s} in `+(h-c)+`ms
	Removed ${l} targets in `+(d-h)+`ms
	Removed ${y} documents in `+(m-d)+`ms
Total Duration: ${m-g}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:l,documentsRemoved:y}))))}}function a4(n,e){return new o4(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(){this.changes=new Yo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,mn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ee.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(r!==null&&Fc(r.mutation,s,Hn.empty(),ut.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,We()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=We()){const s=Mo();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,r).next((l=>{let c=Rc();return l.forEach(((h,d)=>{c=c.insert(h,d.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=Mo();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,We())))}populateOverlays(e,t,r){const s=[];return r.forEach((l=>{t.has(l)||s.push(l)})),this.documentOverlayCache.getOverlays(e,s).next((l=>{l.forEach(((c,h)=>{t.set(c,h)}))}))}computeViews(e,t,r,s){let l=Ui();const c=zc(),h=(function(){return zc()})();return t.forEach(((d,m)=>{const g=r.get(m.key);s.has(m.key)&&(g===void 0||g.mutation instanceof Xs)?l=l.insert(m.key,m):g!==void 0?(c.set(m.key,g.mutation.getFieldMask()),Fc(g.mutation,m,g.mutation.getFieldMask(),ut.now())):c.set(m.key,Hn.empty())})),this.recalculateAndSaveOverlays(e,l).next((d=>(d.forEach(((m,g)=>c.set(m,g))),t.forEach(((m,g)=>h.set(m,new c4(g,c.get(m)??null)))),h)))}recalculateAndSaveOverlays(e,t){const r=zc();let s=new xt(((c,h)=>c-h)),l=We();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const h of c)h.keys().forEach((d=>{const m=t.get(d);if(m===null)return;let g=r.get(d)||Hn.empty();g=h.applyToLocalView(m,g),r.set(d,g);const y=(s.get(h.batchId)||We()).add(d);s=s.insert(h.batchId,y)}))})).next((()=>{const c=[],h=s.getReverseIterator();for(;h.hasNext();){const d=h.getNext(),m=d.key,g=d.value,y=uS();g.forEach((x=>{if(!l.has(x)){const E=yS(t.get(x),r.get(x));E!==null&&y.set(x,E),l=l.add(x)}})),c.push(this.documentOverlayCache.saveOverlays(e,m,y))}return ee.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,s){return hN(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):sS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next((l=>{const c=s-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-l.size):ee.resolve(Mo());let h=Qc,d=l;return c.next((m=>ee.forEach(m,((g,y)=>(h<y.largestBatchId&&(h=y.largestBatchId),l.get(g)?ee.resolve():this.remoteDocumentCache.getEntry(e,g).next((x=>{d=d.insert(g,x)}))))).next((()=>this.populateOverlays(e,m,l))).next((()=>this.computeViews(e,d,m,We()))).next((g=>({batchId:h,changes:cS(g)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ke(t)).next((r=>{let s=Rc();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const l=t.collectionGroup;let c=Rc();return this.indexManager.getCollectionParents(e,l).next((h=>ee.forEach(h,(d=>{const m=(function(y,x){return new kl(x,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(t,d.child(l));return this.getDocumentsMatchingCollectionQuery(e,m,r,s).next((g=>{g.forEach(((y,x)=>{c=c.insert(y,x)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,s){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,s)))).next((c=>{l.forEach(((d,m)=>{const g=m.getKey();c.get(g)===null&&(c=c.insert(g,mn.newInvalidDocument(g)))}));let h=Rc();return c.forEach(((d,m)=>{const g=l.get(d);g!==void 0&&Fc(g.mutation,m,Hn.empty(),ut.now()),pf(t,m)&&(h=h.insert(d,m))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return ee.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:ii(s.createTime)}})(t)),ee.resolve()}getNamedQuery(e,t){return ee.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(s){return{name:s.name,query:e4(s.bundledQuery),readTime:ii(s.readTime)}})(t)),ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4{constructor(){this.overlays=new xt(ke.comparator),this.Lr=new Map}getOverlay(e,t){return ee.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Mo();return ee.forEach(t,(s=>this.getOverlay(e,s).next((l=>{l!==null&&r.set(s,l)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((s,l)=>{this.bt(e,t,l)})),ee.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Lr.get(r);return s!==void 0&&(s.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(r)),ee.resolve()}getOverlaysForCollection(e,t,r){const s=Mo(),l=t.length+1,c=new ke(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const d=h.getNext().value,m=d.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===l&&d.largestBatchId>r&&s.set(d.getKey(),d)}return ee.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let l=new xt(((m,g)=>m-g));const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let g=l.get(m.largestBatchId);g===null&&(g=Mo(),l=l.insert(m.largestBatchId,g)),g.set(m.getKey(),m)}}const h=Mo(),d=l.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((m,g)=>h.set(m,g))),!(h.size()>=s)););return ee.resolve(h)}bt(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const c=this.Lr.get(s.largestBatchId).delete(r.key);this.Lr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new AN(t,r));let l=this.Lr.get(t);l===void 0&&(l=We(),this.Lr.set(t,l)),this.Lr.set(t,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{constructor(){this.sessionToken=sn.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{constructor(){this.kr=new $t(Gt.Kr),this.qr=new $t(Gt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const r=new Gt(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new Gt(e,t))}Qr(e,t){e.forEach((r=>this.removeReference(r,t)))}Gr(e){const t=new ke(new it([])),r=new Gt(t,e),s=new Gt(t,e+1),l=[];return this.qr.forEachInRange([r,s],(c=>{this.Wr(c),l.push(c.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new ke(new it([])),r=new Gt(t,e),s=new Gt(t,e+1);let l=We();return this.qr.forEachInRange([r,s],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Gt(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Gt{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return ke.comparator(e.key,t.key)||Ue(e.Hr,t.Hr)}static Ur(e,t){return Ue(e.Hr,t.Hr)||ke.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new $t(Gt.Kr)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new jN(l,t,r,s);this.mutationQueue.push(c);for(const h of s)this.Jr=this.Jr.add(new Gt(h.key,l)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ee.resolve(c)}lookupMutationBatch(e,t){return ee.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Xr(r),l=s<0?0:s;return ee.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?Ty:this.Yn-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Gt(t,0),s=new Gt(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([r,s],(c=>{const h=this.Zr(c.Hr);l.push(h)})),ee.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new $t(Ue);return t.forEach((s=>{const l=new Gt(s,0),c=new Gt(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,c],(h=>{r=r.add(h.Hr)}))})),ee.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let l=r;ke.isDocumentKey(l)||(l=l.child(""));const c=new Gt(new ke(l),0);let h=new $t(Ue);return this.Jr.forEachWhile((d=>{const m=d.key.path;return!!r.isPrefixOf(m)&&(m.length===s&&(h=h.add(d.Hr)),!0)}),c),ee.resolve(this.Yr(h))}Yr(e){const t=[];return e.forEach((r=>{const s=this.Zr(r);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){Ze(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return ee.forEach(t.mutations,(s=>{const l=new Gt(s.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,t){const r=new Gt(t,0),s=this.Jr.firstAfterOrEqual(r);return ee.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{constructor(e){this.ti=e,this.docs=(function(){return new xt(ke.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),l=s?s.size:0,c=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ee.resolve(r?r.document.mutableCopy():mn.newInvalidDocument(t))}getEntries(e,t){let r=Ui();return t.forEach((s=>{const l=this.docs.get(s);r=r.insert(s,l?l.document.mutableCopy():mn.newInvalidDocument(s))})),ee.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let l=Ui();const c=t.path,h=new ke(c.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){const{key:m,value:{document:g}}=d.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||UP(FP(g),r)<=0||(s.has(g.key)||pf(t,g))&&(l=l.insert(g.key,g.mutableCopy()))}return ee.resolve(l)}getAllFromCollectionGroup(e,t,r,s){Ie(9500)}ni(e,t){return ee.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new g4(this)}getSize(e){return ee.resolve(this.size)}}class g4 extends l4{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?t.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(r)})),ee.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(e){this.persistence=e,this.ri=new Yo((t=>jy(t)),Ay),this.lastRemoteSnapshotVersion=Pe.min(),this.highestTargetId=0,this.ii=0,this.si=new Ly,this.targetCount=0,this.oi=cl._r()}forEachTarget(e,t){return this.ri.forEach(((r,s)=>t(s))),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),ee.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new cl(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,ee.resolve()}updateTargetData(e,t){return this.lr(t),ee.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,t,r){let s=0;const l=[];return this.ri.forEach(((c,h)=>{h.sequenceNumber<=t&&r.get(h.targetId)===null&&(this.ri.delete(c),l.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)})),ee.waitFor(l).next((()=>s))}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,t){const r=this.ri.get(t)||null;return ee.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),ee.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);const s=this.persistence.referenceDelegate,l=[];return s&&t.forEach((c=>{l.push(s.markPotentiallyOrphaned(e,c))})),ee.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),ee.resolve()}getMatchingKeysForTargetId(e,t){const r=this.si.jr(t);return ee.resolve(r)}containsKey(e,t){return ee.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e,t){this._i={},this.overlays={},this.ai=new df(0),this.ui=!1,this.ui=!0,this.ci=new f4,this.referenceDelegate=e(this),this.li=new y4(this),this.indexManager=new t4,this.remoteDocumentCache=(function(s){return new p4(s)})((r=>this.referenceDelegate.hi(r))),this.serializer=new ZN(t),this.Pi=new d4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new h4,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new m4(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){pe("MemoryPersistence","Starting transaction:",e);const s=new v4(this.ai.next());return this.referenceDelegate.Ti(),r(s).next((l=>this.referenceDelegate.Ii(s).next((()=>l)))).toPromise().then((l=>(s.raiseOnCommittedEvent(),l)))}Ei(e,t){return ee.or(Object.values(this._i).map((r=>()=>r.containsKey(e,t))))}}class v4 extends $P{constructor(e){super(),this.currentSequenceNumber=e}}class Oy{constructor(e){this.persistence=e,this.Ri=new Ly,this.Ai=null}static Vi(e){return new Oy(e)}get di(){if(this.Ai)return this.Ai;throw Ie(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),ee.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),ee.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),ee.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((s=>this.di.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((l=>this.di.add(l.toString())))})).next((()=>r.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.di,(r=>{const s=ke.fromPath(r);return this.mi(e,s).next((l=>{l||t.removeEntry(s,Pe.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return ee.or([()=>ee.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Bh{constructor(e,t){this.persistence=e,this.fi=new Yo((r=>qP(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=a4(this,t)}static Vi(e,t){return new Bh(e,t)}Ti(){}Ii(e){return ee.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}mr(e,t){return ee.forEach(this.fi,((r,s)=>this.wr(e,r,s).next((l=>l?ee.resolve():t(s)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),l=s.newChangeBuffer();return s.ni(e,(c=>this.wr(e,c,t).next((h=>{h||(r++,l.removeEntry(c,Pe.min()))})))).next((()=>l.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),ee.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),ee.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),ee.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),ee.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ph(e.data.value)),t}wr(e,t,r){return ee.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.fi.get(t);return ee.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=s}static Es(e,t){let r=We(),s=We();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:s=s.add(l.doc.key)}return new By(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return Kj()?8:HP(yn())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,s){const l={result:null};return this.gs(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ps(e,t,s,r).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new x4;return this.ys(e,t,c).next((h=>{if(l.result=h,this.As)return this.ws(e,t,c,h.size)}))})).next((()=>l.result))}ws(e,t,r,s){return r.documentReadCount<this.Vs?(Ba()<=Fe.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",za(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ee.resolve()):(Ba()<=Fe.DEBUG&&pe("QueryEngine","Query:",za(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(Ba()<=Fe.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",za(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ri(t))):ee.resolve())}gs(e,t){if(lw(t))return ee.resolve(null);let r=ri(t);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=Lh(t,null,"F"),r=ri(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const c=We(...l);return this.fs.getDocuments(e,c).next((h=>this.indexManager.getMinOffset(e,r).next((d=>{const m=this.bs(t,h);return this.Ss(t,m,c,d.readTime)?this.gs(e,Lh(t,null,"F")):this.Ds(e,m,t,d)}))))})))))}ps(e,t,r,s){return lw(t)||s.isEqual(Pe.min())?ee.resolve(null):this.fs.getDocuments(e,r).next((l=>{const c=this.bs(t,l);return this.Ss(t,c,r,s)?ee.resolve(null):(Ba()<=Fe.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),za(t)),this.Ds(e,c,t,zP(s,Qc)).next((h=>h)))}))}bs(e,t){let r=new $t(aS(e));return t.forEach(((s,l)=>{pf(e,l)&&(r=r.add(l))})),r}Ss(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(s)>0)}ys(e,t,r){return Ba()<=Fe.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",za(t)),this.fs.getDocumentsMatchingQuery(e,t,Os.min(),r)}Ds(e,t,r,s){return this.fs.getDocumentsMatchingQuery(e,r,s).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zy="LocalStore",b4=3e8;class k4{constructor(e,t,r,s){this.persistence=e,this.Cs=t,this.serializer=s,this.vs=new xt(Ue),this.Fs=new Yo((l=>jy(l)),Ay),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new u4(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function _4(n,e,t,r){return new k4(n,e,t,r)}async function PS(n,e){const t=Me(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next((l=>(s=l,t.Os(e),t.mutationQueue.getAllMutationBatches(r)))).next((l=>{const c=[],h=[];let d=We();for(const m of s){c.push(m.batchId);for(const g of m.mutations)d=d.add(g.key)}for(const m of l){h.push(m.batchId);for(const g of m.mutations)d=d.add(g.key)}return t.localDocuments.getDocuments(r,d).next((m=>({Ns:m,removedBatchIds:c,addedBatchIds:h})))}))}))}function S4(n,e){const t=Me(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(h,d,m,g){const y=m.batch,x=y.keys();let E=ee.resolve();return x.forEach((k=>{E=E.next((()=>g.getEntry(d,k))).next((S=>{const I=m.docVersions.get(k);Ze(I!==null,48541),S.version.compareTo(I)<0&&(y.applyToRemoteDocument(S,m),S.isValidDocument()&&(S.setReadTime(m.commitVersion),g.addEntry(S)))}))})),E.next((()=>h.mutationQueue.removeMutationBatch(d,y)))})(t,r,e,l).next((()=>l.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(h){let d=We();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(d=d.add(h.batch.mutations[m].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(r,s)))}))}function NS(n){const e=Me(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function E4(n,e){const t=Me(n),r=e.snapshotVersion;let s=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.xs.newChangeBuffer({trackRemovals:!0});s=t.vs;const h=[];e.targetChanges.forEach(((g,y)=>{const x=s.get(y);if(!x)return;h.push(t.li.removeMatchingKeys(l,g.removedDocuments,y).next((()=>t.li.addMatchingKeys(l,g.addedDocuments,y))));let E=x.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(y)!==null?E=E.withResumeToken(sn.EMPTY_BYTE_STRING,Pe.min()).withLastLimboFreeSnapshotVersion(Pe.min()):g.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(g.resumeToken,r)),s=s.insert(y,E),(function(S,I,N){return S.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=b4?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0})(x,E,g)&&h.push(t.li.updateTargetData(l,E))}));let d=Ui(),m=We();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(l,g))})),h.push(T4(l,c,e.documentUpdates).next((g=>{d=g.Bs,m=g.Ls}))),!r.isEqual(Pe.min())){const g=t.li.getLastRemoteSnapshotVersion(l).next((y=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,r)));h.push(g)}return ee.waitFor(h).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,d,m))).next((()=>d))})).then((l=>(t.vs=s,l)))}function T4(n,e,t){let r=We(),s=We();return t.forEach((l=>r=r.add(l))),e.getEntries(n,r).next((l=>{let c=Ui();return t.forEach(((h,d)=>{const m=l.get(h);d.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(h)),d.isNoDocument()&&d.version.isEqual(Pe.min())?(e.removeEntry(h,d.readTime),c=c.insert(h,d)):!m.isValidDocument()||d.version.compareTo(m.version)>0||d.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(d),c=c.insert(h,d)):pe(zy,"Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",d.version)})),{Bs:c,Ls:s}}))}function I4(n,e){const t=Me(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Ty),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function C4(n,e){const t=Me(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return t.li.getTargetData(r,e).next((l=>l?(s=l,ee.resolve(s)):t.li.allocateTargetId(r).next((c=>(s=new js(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=t.vs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r}))}async function bg(n,e,t){const r=Me(n),s=r.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,(c=>r.persistence.referenceDelegate.removeTarget(c,s)))}catch(c){if(!bl(c))throw c;pe(zy,`Failed to update sequence numbers for target ${e}: ${c}`)}r.vs=r.vs.remove(e),r.Fs.delete(s.target)}function bw(n,e,t){const r=Me(n);let s=Pe.min(),l=We();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(d,m,g){const y=Me(d),x=y.Fs.get(g);return x!==void 0?ee.resolve(y.vs.get(x)):y.li.getTargetData(m,g)})(r,c,ri(e)).next((h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(c,h.targetId).next((d=>{l=d}))})).next((()=>r.Cs.getDocumentsMatchingQuery(c,e,t?s:Pe.min(),t?l:We()))).next((h=>(j4(r,pN(e),h),{documents:h,ks:l})))))}function j4(n,e,t){let r=n.Ms.get(e)||Pe.min();t.forEach(((s,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),n.Ms.set(e,r)}class kw{constructor(){this.activeTargetIds=bN()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class A4{constructor(){this.vo=new kw,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new kw,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w="ConnectivityMonitor";class Sw{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){pe(_w,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){pe(_w,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eh=null;function kg(){return eh===null?eh=(function(){return 268435456+Math.round(2147483648*Math.random())})():eh++,"0x"+eh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ep="RestConnection",P4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class N4{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.$o=this.databaseId.database===Mh?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,t,r,s,l){const c=kg(),h=this.Qo(e,t.toUriEncodedString());pe(Ep,`Sending RPC '${e}' ${c}:`,h,r);const d={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(d,s,l);const{host:m}=new URL(h),g=gl(m);return this.zo(e,h,d,r,g).then((y=>(pe(Ep,`Received RPC '${e}' ${c}: `,y),y)),(y=>{throw il(Ep,`RPC '${e}' ${c} failed with error: `,y,"url: ",h,"request:",r),y}))}jo(e,t,r,s,l,c){return this.Wo(e,t,r,s,l)}Go(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+xl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,l)=>e[l]=s)),r&&r.headers.forEach(((s,l)=>e[l]=s))}Qo(e,t){const r=P4[e];let s=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hn="WebChannelConnection",Sc=(n,e,t)=>{n.listen(e,(r=>{try{t(r)}catch(s){setTimeout((()=>{throw s}),0)}}))};class Xa extends N4{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Xa.c_){const e=L_();Sc(e,V_.STAT_EVENT,(t=>{t.stat===ug.PROXY?pe(hn,"STAT_EVENT: detected buffering proxy"):t.stat===ug.NOPROXY&&pe(hn,"STAT_EVENT: detected no buffering proxy")})),Xa.c_=!0}}zo(e,t,r,s,l){const c=kg();return new Promise(((h,d)=>{const m=new M_;m.setWithCredentials(!0),m.listenOnce(D_.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case mh.NO_ERROR:const y=m.getResponseJson();pe(hn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(y)),h(y);break;case mh.TIMEOUT:pe(hn,`RPC '${e}' ${c} timed out`),d(new he(Z.DEADLINE_EXCEEDED,"Request time out"));break;case mh.HTTP_ERROR:const x=m.getStatus();if(pe(hn,`RPC '${e}' ${c} failed with status:`,x,"response text:",m.getResponseText()),x>0){let E=m.getResponseJson();Array.isArray(E)&&(E=E[0]);const k=E==null?void 0:E.error;if(k&&k.status&&k.message){const S=(function(N){const V=N.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(V)>=0?V:Z.UNKNOWN})(k.status);d(new he(S,k.message))}else d(new he(Z.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new he(Z.UNAVAILABLE,"Connection failed."));break;default:Ie(9055,{l_:e,streamId:c,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{pe(hn,`RPC '${e}' ${c} completed.`)}}));const g=JSON.stringify(s);pe(hn,`RPC '${e}' ${c} sending request:`,s),m.send(t,"POST",g,r,15)}))}T_(e,t,r){const s=kg(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(h.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(h.useFetchStreams=!0),this.Go(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const m=l.join("");pe(hn,`Creating RPC '${e}' stream ${s}: ${m}`,h);const g=c.createWebChannel(m,h);this.I_(g);let y=!1,x=!1;const E=new M4({Ho:k=>{x?pe(hn,`Not sending because RPC '${e}' stream ${s} is closed:`,k):(y||(pe(hn,`Opening RPC '${e}' stream ${s} transport.`),g.open(),y=!0),pe(hn,`RPC '${e}' stream ${s} sending:`,k),g.send(k))},Jo:()=>g.close()});return Sc(g,Ac.EventType.OPEN,(()=>{x||(pe(hn,`RPC '${e}' stream ${s} transport opened.`),E.i_())})),Sc(g,Ac.EventType.CLOSE,(()=>{x||(x=!0,pe(hn,`RPC '${e}' stream ${s} transport closed`),E.o_(),this.E_(g))})),Sc(g,Ac.EventType.ERROR,(k=>{x||(x=!0,il(hn,`RPC '${e}' stream ${s} transport errored. Name:`,k.name,"Message:",k.message),E.o_(new he(Z.UNAVAILABLE,"The operation could not be completed")))})),Sc(g,Ac.EventType.MESSAGE,(k=>{var S;if(!x){const I=k.data[0];Ze(!!I,16349);const N=I,V=(N==null?void 0:N.error)||((S=N[0])==null?void 0:S.error);if(V){pe(hn,`RPC '${e}' stream ${s} received error:`,V);const P=V.status;let K=(function(A){const C=Vt[A];if(C!==void 0)return xS(C)})(P),z=V.message;K===void 0&&(K=Z.INTERNAL,z="Unknown error status: "+P+" with message "+V.message),x=!0,E.o_(new he(K,z)),g.close()}else pe(hn,`RPC '${e}' stream ${s} received:`,I),E.__(I)}})),Xa.u_(),setTimeout((()=>{E.s_()}),0),E}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return O_()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D4(n){return new Xa(n)}function Tp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wf(n){return new BN(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xa.c_=!1;class MS{constructor(e,t,r=1e3,s=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=s,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-r);s>0&&pe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew="PersistentStream";class DS{constructor(e,t,r,s,l,c,h,d){this.Ci=e,this.b_=r,this.S_=s,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new MS(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Z.RESOURCE_EXHAUSTED?(Fi(t.toString()),Fi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===t&&this.G_(r,s)}),(r=>{e((()=>{const s=new he(Z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,t){const r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.H_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return pe(Ew,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(pe(Ew,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class V4 extends DS{constructor(e,t,r,s,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=UN(this.serializer,e),r=(function(l){if(!("targetChange"in l))return Pe.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Pe.min():c.readTime?ii(c.readTime):Pe.min()})(e);return this.listener.J_(t,r)}Z_(e){const t={};t.database=wg(this.serializer),t.addTarget=(function(l,c){let h;const d=c.target;if(h=pg(d)?{documents:HN(l,d)}:{query:KN(l,d).ft},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=kS(l,c.resumeToken);const m=yg(l,c.expectedCount);m!==null&&(h.expectedCount=m)}else if(c.snapshotVersion.compareTo(Pe.min())>0){h.readTime=Oh(l,c.snapshotVersion.toTimestamp());const m=yg(l,c.expectedCount);m!==null&&(h.expectedCount=m)}return h})(this.serializer,e);const r=GN(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){const t={};t.database=wg(this.serializer),t.removeTarget=e,this.K_(t)}}class L4 extends DS{constructor(e,t,r,s,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,c),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=$N(e.writeResults,e.commitTime),r=ii(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=wg(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>WN(this.serializer,r)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{}class B4 extends O4{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new he(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,vg(t,r),s,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new he(Z.UNKNOWN,l.toString())}))}jo(e,t,r,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,h])=>this.connection.jo(e,vg(t,r),s,c,h,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new he(Z.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function z4(n,e,t,r){return new B4(n,e,t,r)}class F4{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Fi(t),this.aa=!1):pe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $o="RemoteStore";class U4{constructor(e,t,r,s,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((c=>{r.enqueueAndForget((async()=>{Xo(this)&&(pe($o,"Restarting streams for network reachability change."),await(async function(d){const m=Me(d);m.Ea.add(4),await bu(m),m.Va.set("Unknown"),m.Ea.delete(4),await bf(m)})(this))}))})),this.Va=new F4(r,s)}}async function bf(n){if(Xo(n))for(const e of n.Ra)await e(!0)}async function bu(n){for(const e of n.Ra)await e(!1)}function VS(n,e){const t=Me(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),$y(t)?Wy(t):_l(t).O_()&&Uy(t,e))}function Fy(n,e){const t=Me(n),r=_l(t);t.Ia.delete(e),r.O_()&&LS(t,e),t.Ia.size===0&&(r.O_()?r.L_():Xo(t)&&t.Va.set("Unknown"))}function Uy(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}_l(n).Z_(e)}function LS(n,e){n.da.$e(e),_l(n).X_(e)}function Wy(n){n.da=new DN({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),_l(n).start(),n.Va.ua()}function $y(n){return Xo(n)&&!_l(n).x_()&&n.Ia.size>0}function Xo(n){return Me(n).Ea.size===0}function OS(n){n.da=void 0}async function W4(n){n.Va.set("Online")}async function $4(n){n.Ia.forEach(((e,t)=>{Uy(n,e)}))}async function H4(n,e){OS(n),$y(n)?(n.Va.ha(e),Wy(n)):n.Va.set("Unknown")}async function K4(n,e,t){if(n.Va.set("Online"),e instanceof bS&&e.state===2&&e.cause)try{await(async function(s,l){const c=l.cause;for(const h of l.targetIds)s.Ia.has(h)&&(await s.remoteSyncer.rejectListen(h,c),s.Ia.delete(h),s.da.removeTarget(h))})(n,e)}catch(r){pe($o,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await zh(n,r)}else if(e instanceof vh?n.da.Xe(e):e instanceof wS?n.da.st(e):n.da.tt(e),!t.isEqual(Pe.min()))try{const r=await NS(n.localStore);t.compareTo(r)>=0&&await(function(l,c){const h=l.da.Tt(c);return h.targetChanges.forEach(((d,m)=>{if(d.resumeToken.approximateByteSize()>0){const g=l.Ia.get(m);g&&l.Ia.set(m,g.withResumeToken(d.resumeToken,c))}})),h.targetMismatches.forEach(((d,m)=>{const g=l.Ia.get(d);if(!g)return;l.Ia.set(d,g.withResumeToken(sn.EMPTY_BYTE_STRING,g.snapshotVersion)),LS(l,d);const y=new js(g.target,d,m,g.sequenceNumber);Uy(l,y)})),l.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(r){pe($o,"Failed to raise snapshot:",r),await zh(n,r)}}async function zh(n,e,t){if(!bl(e))throw e;n.Ea.add(1),await bu(n),n.Va.set("Offline"),t||(t=()=>NS(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{pe($o,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await bf(n)}))}function BS(n,e){return e().catch((t=>zh(n,t,e)))}async function kf(n){const e=Me(n),t=Us(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ty;for(;q4(e);)try{const s=await I4(e.localStore,r);if(s===null){e.Ta.length===0&&t.L_();break}r=s.batchId,G4(e,s)}catch(s){await zh(e,s)}zS(e)&&FS(e)}function q4(n){return Xo(n)&&n.Ta.length<10}function G4(n,e){n.Ta.push(e);const t=Us(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function zS(n){return Xo(n)&&!Us(n).x_()&&n.Ta.length>0}function FS(n){Us(n).start()}async function Q4(n){Us(n).ra()}async function Y4(n){const e=Us(n);for(const t of n.Ta)e.ea(t.mutations)}async function X4(n,e,t){const r=n.Ta.shift(),s=My.from(r,e,t);await BS(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await kf(n)}async function J4(n,e){e&&Us(n).Y_&&await(async function(r,s){if((function(c){return PN(c)&&c!==Z.ABORTED})(s.code)){const l=r.Ta.shift();Us(r).B_(),await BS(r,(()=>r.remoteSyncer.rejectFailedWrite(l.batchId,s))),await kf(r)}})(n,e),zS(n)&&FS(n)}async function Tw(n,e){const t=Me(n);t.asyncQueue.verifyOperationInProgress(),pe($o,"RemoteStore received new credentials");const r=Xo(t);t.Ea.add(3),await bu(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await bf(t)}async function Z4(n,e){const t=Me(n);e?(t.Ea.delete(2),await bf(t)):e||(t.Ea.add(2),await bu(t),t.Va.set("Unknown"))}function _l(n){return n.ma||(n.ma=(function(t,r,s){const l=Me(t);return l.sa(),new V4(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(n.datastore,n.asyncQueue,{Zo:W4.bind(null,n),Yo:$4.bind(null,n),t_:H4.bind(null,n),J_:K4.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),$y(n)?Wy(n):n.Va.set("Unknown")):(await n.ma.stop(),OS(n))}))),n.ma}function Us(n){return n.fa||(n.fa=(function(t,r,s){const l=Me(t);return l.sa(),new L4(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:Q4.bind(null,n),t_:J4.bind(null,n),ta:Y4.bind(null,n),na:X4.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await kf(n)):(await n.fa.stop(),n.Ta.length>0&&(pe($o,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(e,t,r,s,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=l,this.deferred=new Di,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,l){const c=Date.now()+r,h=new Hy(e,t,c,s,l);return h.start(r),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ky(n,e){if(Fi("AsyncQueue",`${e}: ${n}`),bl(n))return new he(Z.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{static emptySet(e){return new Ja(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ke.comparator(t.key,r.key):(t,r)=>ke.comparator(t.key,r.key),this.keyedMap=Rc(),this.sortedSet=new xt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ja)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=r.getNext().key;if(!s.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ja;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(){this.ga=new xt(ke.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ie(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class ul{constructor(e,t,r,s,l,c,h,d,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,s,l){const c=[];return t.forEach((h=>{c.push({type:0,doc:h})})),new ul(e,t,Ja.emptySet(t),c,r,s,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class tM{constructor(){this.queries=Cw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const s=Me(t),l=s.queries;s.queries=Cw(),l.forEach(((c,h)=>{for(const d of h.ba)d.onError(r)}))})(this,new he(Z.ABORTED,"Firestore shutting down"))}}function Cw(){return new Yo((n=>oS(n)),mf)}async function US(n,e){const t=Me(n);let r=3;const s=e.query;let l=t.queries.get(s);l?!l.Sa()&&e.Da()&&(r=2):(l=new eM,r=e.Da()?0:1);try{switch(r){case 0:l.wa=await t.onListen(s,!0);break;case 1:l.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(c){const h=Ky(c,`Initialization of query '${za(e.query)}' failed`);return void e.onError(h)}t.queries.set(s,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&qy(t)}async function WS(n,e){const t=Me(n),r=e.query;let s=3;const l=t.queries.get(r);if(l){const c=l.ba.indexOf(e);c>=0&&(l.ba.splice(c,1),l.ba.length===0?s=e.Da()?0:1:!l.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function nM(n,e){const t=Me(n);let r=!1;for(const s of e){const l=s.query,c=t.queries.get(l);if(c){for(const h of c.ba)h.Fa(s)&&(r=!0);c.wa=s}}r&&qy(t)}function rM(n,e,t){const r=Me(n),s=r.queries.get(e);if(s)for(const l of s.ba)l.onError(t);r.queries.delete(e)}function qy(n){n.Ca.forEach((e=>{e.next()}))}var _g,jw;(jw=_g||(_g={})).Ma="default",jw.Cache="cache";class $S{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ul(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ul.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==_g.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e){this.key=e}}class KS{constructor(e){this.key=e}}class iM{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=We(),this.mutatedKeys=We(),this.eu=aS(e),this.tu=new Ja(this.eu)}get nu(){return this.Za}ru(e,t){const r=t?t.iu:new Iw,s=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=s,h=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((g,y)=>{const x=s.get(g),E=pf(this.query,y)?y:null,k=!!x&&this.mutatedKeys.has(x.key),S=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let I=!1;x&&E?x.data.isEqual(E.data)?k!==S&&(r.track({type:3,doc:E}),I=!0):this.su(x,E)||(r.track({type:2,doc:E}),I=!0,(d&&this.eu(E,d)>0||m&&this.eu(E,m)<0)&&(h=!0)):!x&&E?(r.track({type:0,doc:E}),I=!0):x&&!E&&(r.track({type:1,doc:x}),I=!0,(d||m)&&(h=!0)),I&&(E?(c=c.add(E),l=S?l.add(g):l.delete(g)):(c=c.delete(g),l=l.delete(g)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const g=this.query.limitType==="F"?c.last():c.first();c=c.delete(g.key),l=l.delete(g.key),r.track({type:1,doc:g})}return{tu:c,iu:r,Ss:h,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((g,y)=>(function(E,k){const S=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie(20277,{Vt:I})}};return S(E)-S(k)})(g.type,y.type)||this.eu(g.doc,y.doc))),this.ou(r),s=s??!1;const h=t&&!s?this._u():[],d=this.Ya.size===0&&this.current&&!s?1:0,m=d!==this.Xa;return this.Xa=d,c.length!==0||m?{snapshot:new ul(this.query,e.tu,l,c,e.mutatedKeys,d===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Iw,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=We(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const t=[];return e.forEach((r=>{this.Ya.has(r)||t.push(new KS(r))})),this.Ya.forEach((r=>{e.has(r)||t.push(new HS(r))})),t}cu(e){this.Za=e.ks,this.Ya=We();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ul.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Gy="SyncEngine";class sM{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class oM{constructor(e){this.key=e,this.hu=!1}}class aM{constructor(e,t,r,s,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Yo((h=>oS(h)),mf),this.Iu=new Map,this.Eu=new Set,this.Ru=new xt(ke.comparator),this.Au=new Map,this.Vu=new Ly,this.du={},this.mu=new Map,this.fu=cl.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function lM(n,e,t=!0){const r=JS(n);let s;const l=r.Tu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),s=l.view.lu()):s=await qS(r,e,t,!0),s}async function cM(n,e){const t=JS(n);await qS(t,e,!0,!1)}async function qS(n,e,t,r){const s=await C4(n.localStore,ri(e)),l=s.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let h;return r&&(h=await uM(n,e,l,c==="current",s.resumeToken)),n.isPrimaryClient&&t&&VS(n.remoteStore,s),h}async function uM(n,e,t,r,s){n.pu=(y,x,E)=>(async function(S,I,N,V){let P=I.view.ru(N);P.Ss&&(P=await bw(S.localStore,I.query,!1).then((({documents:A})=>I.view.ru(A,P))));const K=V&&V.targetChanges.get(I.targetId),z=V&&V.targetMismatches.get(I.targetId)!=null,W=I.view.applyChanges(P,S.isPrimaryClient,K,z);return Rw(S,I.targetId,W.au),W.snapshot})(n,y,x,E);const l=await bw(n.localStore,e,!0),c=new iM(e,l.ks),h=c.ru(l.documents),d=wu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),m=c.applyChanges(h,n.isPrimaryClient,d);Rw(n,t,m.au);const g=new sM(e,t,c);return n.Tu.set(e,g),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),m.snapshot}async function dM(n,e,t){const r=Me(n),s=r.Tu.get(e),l=r.Iu.get(s.targetId);if(l.length>1)return r.Iu.set(s.targetId,l.filter((c=>!mf(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await bg(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),t&&Fy(r.remoteStore,s.targetId),Sg(r,s.targetId)})).catch(wl)):(Sg(r,s.targetId),await bg(r.localStore,s.targetId,!0))}async function hM(n,e){const t=Me(n),r=t.Tu.get(e),s=t.Iu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Fy(t.remoteStore,r.targetId))}async function fM(n,e,t){const r=wM(n);try{const s=await(function(c,h){const d=Me(c),m=ut.now(),g=h.reduce(((E,k)=>E.add(k.key)),We());let y,x;return d.persistence.runTransaction("Locally write mutations","readwrite",(E=>{let k=Ui(),S=We();return d.xs.getEntries(E,g).next((I=>{k=I,k.forEach(((N,V)=>{V.isValidDocument()||(S=S.add(N))}))})).next((()=>d.localDocuments.getOverlayedDocuments(E,k))).next((I=>{y=I;const N=[];for(const V of h){const P=IN(V,y.get(V.key).overlayedDocument);P!=null&&N.push(new Xs(V.key,P,J_(P.value.mapValue),_n.exists(!0)))}return d.mutationQueue.addMutationBatch(E,m,N,h)})).next((I=>{x=I;const N=I.applyToLocalDocumentSet(y,S);return d.documentOverlayCache.saveOverlays(E,I.batchId,N)}))})).then((()=>({batchId:x.batchId,changes:cS(y)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(c,h,d){let m=c.du[c.currentUser.toKey()];m||(m=new xt(Ue)),m=m.insert(h,d),c.du[c.currentUser.toKey()]=m})(r,s.batchId,t),await ku(r,s.changes),await kf(r.remoteStore)}catch(s){const l=Ky(s,"Failed to persist write");t.reject(l)}}async function GS(n,e){const t=Me(n);try{const r=await E4(t.localStore,e);e.targetChanges.forEach(((s,l)=>{const c=t.Au.get(l);c&&(Ze(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c.hu=!0:s.modifiedDocuments.size>0?Ze(c.hu,14607):s.removedDocuments.size>0&&(Ze(c.hu,42227),c.hu=!1))})),await ku(t,r,e)}catch(r){await wl(r)}}function Aw(n,e,t){const r=Me(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Tu.forEach(((l,c)=>{const h=c.view.va(e);h.snapshot&&s.push(h.snapshot)})),(function(c,h){const d=Me(c);d.onlineState=h;let m=!1;d.queries.forEach(((g,y)=>{for(const x of y.ba)x.va(h)&&(m=!0)})),m&&qy(d)})(r.eventManager,e),s.length&&r.Pu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function mM(n,e,t){const r=Me(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Au.get(e),l=s&&s.key;if(l){let c=new xt(ke.comparator);c=c.insert(l,mn.newNoDocument(l,Pe.min()));const h=We().add(l),d=new xf(Pe.min(),new Map,new xt(Ue),c,h);await GS(r,d),r.Ru=r.Ru.remove(l),r.Au.delete(e),Qy(r)}else await bg(r.localStore,e,!1).then((()=>Sg(r,e,t))).catch(wl)}async function pM(n,e){const t=Me(n),r=e.batch.batchId;try{const s=await S4(t.localStore,e);YS(t,r,null),QS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await ku(t,s)}catch(s){await wl(s)}}async function gM(n,e,t){const r=Me(n);try{const s=await(function(c,h){const d=Me(c);return d.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let g;return d.mutationQueue.lookupMutationBatch(m,h).next((y=>(Ze(y!==null,37113),g=y.keys(),d.mutationQueue.removeMutationBatch(m,y)))).next((()=>d.mutationQueue.performConsistencyCheck(m))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(m,g,h))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,g))).next((()=>d.localDocuments.getDocuments(m,g)))}))})(r.localStore,e);YS(r,e,t),QS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await ku(r,s)}catch(s){await wl(s)}}function QS(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function YS(n,e,t){const r=Me(n);let s=r.du[r.currentUser.toKey()];if(s){const l=s.get(e);l&&(t?l.reject(t):l.resolve(),s=s.remove(e)),r.du[r.currentUser.toKey()]=s}}function Sg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((r=>{n.Vu.containsKey(r)||XS(n,r)}))}function XS(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(Fy(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),Qy(n))}function Rw(n,e,t){for(const r of t)r instanceof HS?(n.Vu.addReference(r.key,e),yM(n,r)):r instanceof KS?(pe(Gy,"Document no longer in limbo: "+r.key),n.Vu.removeReference(r.key,e),n.Vu.containsKey(r.key)||XS(n,r.key)):Ie(19791,{wu:r})}function yM(n,e){const t=e.key,r=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(r)||(pe(Gy,"New document in limbo: "+t),n.Eu.add(r),Qy(n))}function Qy(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ke(it.fromString(e)),r=n.fu.next();n.Au.set(r,new oM(t)),n.Ru=n.Ru.insert(t,r),VS(n.remoteStore,new js(ri(Ry(t.path)),r,"TargetPurposeLimboResolution",df.ce))}}async function ku(n,e,t){const r=Me(n),s=[],l=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((h,d)=>{c.push(r.pu(d,e,t).then((m=>{var g;if((m||t)&&r.isPrimaryClient){const y=m?!m.fromCache:(g=t==null?void 0:t.targetChanges.get(d.targetId))==null?void 0:g.current;r.sharedClientState.updateQueryState(d.targetId,y?"current":"not-current")}if(m){s.push(m);const y=By.Es(d.targetId,m);l.push(y)}})))})),await Promise.all(c),r.Pu.J_(s),await(async function(d,m){const g=Me(d);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(y=>ee.forEach(m,(x=>ee.forEach(x.Ts,(E=>g.persistence.referenceDelegate.addReference(y,x.targetId,E))).next((()=>ee.forEach(x.Is,(E=>g.persistence.referenceDelegate.removeReference(y,x.targetId,E)))))))))}catch(y){if(!bl(y))throw y;pe(zy,"Failed to update sequence numbers: "+y)}for(const y of m){const x=y.targetId;if(!y.fromCache){const E=g.vs.get(x),k=E.snapshotVersion,S=E.withLastLimboFreeSnapshotVersion(k);g.vs=g.vs.insert(x,S)}}})(r.localStore,l))}async function vM(n,e){const t=Me(n);if(!t.currentUser.isEqual(e)){pe(Gy,"User change. New user:",e.toKey());const r=await PS(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((h=>{h.forEach((d=>{d.reject(new he(Z.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ku(t,r.Ns)}}function xM(n,e){const t=Me(n),r=t.Au.get(e);if(r&&r.hu)return We().add(r.key);{let s=We();const l=t.Iu.get(e);if(!l)return s;for(const c of l){const h=t.Tu.get(c);s=s.unionWith(h.view.nu)}return s}}function JS(n){const e=Me(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=GS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=xM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mM.bind(null,e),e.Pu.J_=nM.bind(null,e.eventManager),e.Pu.yu=rM.bind(null,e.eventManager),e}function wM(n){const e=Me(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=pM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=gM.bind(null,e),e}class Fh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=wf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return _4(this.persistence,new w4,e.initialUser,this.serializer)}Cu(e){return new RS(Oy.Vi,this.serializer)}Du(e){return new A4}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Fh.provider={build:()=>new Fh};class bM extends Fh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ze(this.persistence.referenceDelegate instanceof Bh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new s4(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Rn.withCacheSize(this.cacheSizeBytes):Rn.DEFAULT;return new RS((r=>Bh.Vi(r,t)),this.serializer)}}class Eg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Aw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=vM.bind(null,this.syncEngine),await Z4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new tM})()}createDatastore(e){const t=wf(e.databaseInfo.databaseId),r=D4(e.databaseInfo);return z4(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,s,l,c,h){return new U4(r,s,l,c,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>Aw(this.syncEngine,t,0)),(function(){return Sw.v()?new Sw:new R4})())}createSyncEngine(e,t){return(function(s,l,c,h,d,m,g){const y=new aM(s,l,c,h,d,m);return g&&(y.gu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const l=Me(s);pe($o,"RemoteStore shutting down."),l.Ea.add(5),await bu(l),l.Aa.shutdown(),l.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Eg.provider={build:()=>new Eg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Fi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws="FirestoreClient";class kM{constructor(e,t,r,s,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=s,this.user=fn.UNAUTHENTICATED,this.clientId=Ey.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(async c=>{pe(Ws,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(pe(Ws,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Di;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Ky(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Ip(n,e){n.asyncQueue.verifyOperationInProgress(),pe(Ws,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async s=>{r.isEqual(s)||(await PS(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Pw(n,e){n.asyncQueue.verifyOperationInProgress();const t=await _M(n);pe(Ws,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>Tw(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,s)=>Tw(e.remoteStore,s))),n._onlineComponents=e}async function _M(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){pe(Ws,"Using user provided OfflineComponentProvider");try{await Ip(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===Z.FAILED_PRECONDITION||s.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;il("Error using user provided cache. Falling back to memory cache: "+t),await Ip(n,new Fh)}}else pe(Ws,"Using default OfflineComponentProvider"),await Ip(n,new bM(void 0));return n._offlineComponents}async function e2(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(pe(Ws,"Using user provided OnlineComponentProvider"),await Pw(n,n._uninitializedComponentsProvider._online)):(pe(Ws,"Using default OnlineComponentProvider"),await Pw(n,new Eg))),n._onlineComponents}function SM(n){return e2(n).then((e=>e.syncEngine))}async function t2(n){const e=await e2(n),t=e.eventManager;return t.onListen=lM.bind(null,e.syncEngine),t.onUnlisten=dM.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=cM.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=hM.bind(null,e.syncEngine),t}function EM(n,e,t={}){const r=new Di;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,h,d,m){const g=new ZS({next:x=>{g.Nu(),c.enqueueAndForget((()=>WS(l,y)));const E=x.docs.has(h);!E&&x.fromCache?m.reject(new he(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&x.fromCache&&d&&d.source==="server"?m.reject(new he(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(x)},error:x=>m.reject(x)}),y=new $S(Ry(h.path),g,{includeMetadataChanges:!0,Ka:!0});return US(l,y)})(await t2(n),n.asyncQueue,e,t,r))),r.promise}function TM(n,e,t={}){const r=new Di;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,h,d,m){const g=new ZS({next:x=>{g.Nu(),c.enqueueAndForget((()=>WS(l,y))),x.fromCache&&d.source==="server"?m.reject(new he(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(x)},error:x=>m.reject(x)}),y=new $S(h,g,{includeMetadataChanges:!0,Ka:!0});return US(l,y)})(await t2(n),n.asyncQueue,e,t,r))),r.promise}function IM(n,e){const t=new Di;return n.asyncQueue.enqueueAndForget((async()=>fM(await SM(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n2(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CM="ComponentProvider",Nw=new Map;function jM(n,e,t,r,s){return new YP(n,e,t,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,n2(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2="firestore.googleapis.com",Mw=!0;class Dw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=r2,this.ssl=Mw}else this.host=e.host,this.ssl=e.ssl??Mw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=AS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<r4)throw new he(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}BP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=n2(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new he(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new he(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new he(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _f{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Dw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Dw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new jP;switch(r.type){case"firstParty":return new NP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new he(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=Nw.get(t);r&&(pe(CM,"Removing Datastore"),Nw.delete(t),r.terminate())})(this),Promise.resolve()}}function AM(n,e,t,r={}){var m;n=ur(n,_f);const s=gl(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},h=`${e}:${t}`;s&&(Kk(`https://${h}`),qk("Firestore",!0)),l.host!==r2&&l.host!==h&&il("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...l,host:h,ssl:s,emulatorOptions:r};if(!Ls(d,c)&&(n._setSettings(d),r.mockUserToken)){let g,y;if(typeof r.mockUserToken=="string")g=r.mockUserToken,y=fn.MOCK_USER;else{g=Lj(r.mockUserToken,(m=n._app)==null?void 0:m.options.projectId);const x=r.mockUserToken.sub||r.mockUserToken.user_id;if(!x)throw new he(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new fn(x)}n._authCredentials=new AP(new z_(g,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Js(this.firestore,e,this._query)}}class At{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ds(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new At(this.firestore,e,this._key)}toJSON(){return{type:At._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(vu(t,At._jsonSchema))return new At(e,r||null,new ke(it.fromString(t.referencePath)))}}At._jsonSchemaVersion="firestore/documentReference/1.0",At._jsonSchema={type:Bt("string",At._jsonSchemaVersion),referencePath:Bt("string")};class Ds extends Js{constructor(e,t,r){super(e,t,Ry(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new At(this.firestore,null,new ke(e))}withConverter(e){return new Ds(this.firestore,e,this._path)}}function Rt(n,e,...t){if(n=Pt(n),F_("collection","path",e),n instanceof _f){const r=it.fromString(e,...t);return Gx(r),new Ds(n,null,r)}{if(!(n instanceof At||n instanceof Ds))throw new he(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(it.fromString(e,...t));return Gx(r),new Ds(n.firestore,null,r)}}function st(n,e,...t){if(n=Pt(n),arguments.length===1&&(e=Ey.newId()),F_("doc","path",e),n instanceof _f){const r=it.fromString(e,...t);return qx(r),new At(n,null,new ke(r))}{if(!(n instanceof At||n instanceof Ds))throw new he(Z.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(it.fromString(e,...t));return qx(r),new At(n.firestore,n instanceof Ds?n.converter:null,new ke(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vw="AsyncQueue";class Lw{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new MS(this,"async_queue_retry"),this._c=()=>{const r=Tp();r&&pe(Vw,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Tp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Tp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Di;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!bl(e))throw e;pe(Vw,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Fi("INTERNAL UNHANDLED ERROR: ",Ow(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=Hy.createAndSchedule(this,e,t,r,(l=>this.hc(l)));return this.tc.push(s),s}uc(){this.nc&&Ie(47125,{Pc:Ow(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Ow(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Zs extends _f{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new Lw,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Lw(e),this._firestoreClient=void 0,await e}}}function RM(n,e){const t=typeof n=="object"?n:Xk(),r=typeof n=="string"?n:Mh,s=fy(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const l=Dj("firestore");l&&AM(s,...l)}return s}function Sf(n){if(n._terminated)throw new he(Z.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||PM(n),n._firestoreClient}function PM(n){var r,s,l,c;const e=n._freezeSettings(),t=jM(n._databaseId,((r=n._app)==null?void 0:r.options.appId)||"",n._persistenceKey,(s=n._app)==null?void 0:s.options.apiKey,e);n._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new kM(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(d){const m=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(m),_online:m}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ir(sn.fromBase64String(e))}catch(t){throw new he(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ir(sn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ir._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(vu(e,ir._jsonSchema))return ir.fromBase64String(e.bytes)}}ir._jsonSchemaVersion="firestore/bytes/1.0",ir._jsonSchema={type:Bt("string",ir._jsonSchemaVersion),bytes:Bt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ue(this._lat,e._lat)||Ue(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:si._jsonSchemaVersion}}static fromJSON(e){if(vu(e,si._jsonSchema))return new si(e.latitude,e.longitude)}}si._jsonSchemaVersion="firestore/geoPoint/1.0",si._jsonSchema={type:Bt("string",si._jsonSchemaVersion),latitude:Bt("number"),longitude:Bt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==s[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ar._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(vu(e,Ar._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ar(e.vectorValues);throw new he(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ar._jsonSchemaVersion="firestore/vectorValue/1.0",Ar._jsonSchema={type:Bt("string",Ar._jsonSchemaVersion),vectorValues:Bt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NM=/^__.*__$/;class MM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Xs(e,this.data,this.fieldMask,t,this.fieldTransforms):new xu(e,this.data,t,this.fieldTransforms)}}class i2{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Xs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function s2(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie(40011,{dataSource:n})}}class Tf{constructor(e,t,r,s,l,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Tf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const t=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var s;const t=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Uh(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(s2(this.dataSource)&&NM.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class DM{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||wf(e)}createContext(e,t,r,s=!1){return new Tf({dataSource:e,methodName:t,targetDoc:r,path:rn.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _u(n){const e=n._freezeSettings(),t=wf(n._databaseId);return new DM(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Yy(n,e,t,r,s,l={}){const c=n.createContext(l.merge||l.mergeFields?2:0,e,t,s);e0("Data must be an object, but it was:",c,r);const h=l2(r,c);let d,m;if(l.merge)d=new Hn(c.fieldMask),m=c.fieldTransforms;else if(l.mergeFields){const g=[];for(const y of l.mergeFields){const x=Ho(e,y,t);if(!c.contains(x))throw new he(Z.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);d2(g,x)||g.push(x)}d=new Hn(g),m=c.fieldTransforms.filter((y=>d.covers(y.field)))}else d=null,m=c.fieldTransforms;return new MM(new Pn(h),d,m)}class If extends Sl{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof If}}function VM(n,e,t){return new Tf({dataSource:3,targetDoc:e.settings.targetDoc,methodName:n._methodName,arrayElement:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Xy extends Sl{_toFieldTransform(e){return new Ny(e.path,new eu)}isEqual(e){return e instanceof Xy}}class Jy extends Sl{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=VM(this,e,!0),r=this.Ac.map((l=>El(l,t))),s=new ll(r);return new Ny(e.path,s)}isEqual(e){return e instanceof Jy&&Ls(this.Ac,e.Ac)}}class Zy extends Sl{constructor(e,t){super(e),this.Vc=t}_toFieldTransform(e){const t=new nu(e.serializer,hS(e.serializer,this.Vc));return new Ny(e.path,t)}isEqual(e){return e instanceof Zy&&this.Vc===e.Vc}}function o2(n,e,t,r){const s=n.createContext(1,e,t);e0("Data must be an object, but it was:",s,r);const l=[],c=Pn.empty();Ys(r,((d,m)=>{const g=u2(e,d,t);m=Pt(m);const y=s.childContextForFieldPath(g);if(m instanceof If)l.push(g);else{const x=El(m,y);x!=null&&(l.push(g),c.set(g,x))}}));const h=new Hn(l);return new i2(c,h,s.fieldTransforms)}function a2(n,e,t,r,s,l){const c=n.createContext(1,e,t),h=[Ho(e,r,t)],d=[s];if(l.length%2!=0)throw new he(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<l.length;x+=2)h.push(Ho(e,l[x])),d.push(l[x+1]);const m=[],g=Pn.empty();for(let x=h.length-1;x>=0;--x)if(!d2(m,h[x])){const E=h[x];let k=d[x];k=Pt(k);const S=c.childContextForFieldPath(E);if(k instanceof If)m.push(E);else{const I=El(k,S);I!=null&&(m.push(E),g.set(E,I))}}const y=new Hn(m);return new i2(g,y,c.fieldTransforms)}function LM(n,e,t,r=!1){return El(t,n.createContext(r?4:3,e))}function El(n,e){if(c2(n=Pt(n)))return e0("Unsupported field value:",e,n),l2(n,e);if(n instanceof Sl)return(function(r,s){if(!s2(s.dataSource))throw s.createError(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(s);l&&s.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,s){const l=[];let c=0;for(const h of r){let d=El(h,s.childContextForArray(c));d==null&&(d={nullValue:"NULL_VALUE"}),l.push(d),c++}return{arrayValue:{values:l}}})(n,e)}return(function(r,s){if((r=Pt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return hS(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=ut.fromDate(r);return{timestampValue:Oh(s.serializer,l)}}if(r instanceof ut){const l=new ut(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Oh(s.serializer,l)}}if(r instanceof si)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ir)return{bytesValue:kS(s.serializer,r._byteString)};if(r instanceof At){const l=s.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw s.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Vy(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Ar)return(function(c,h){const d=c instanceof Ar?c.toArray():c;return{mapValue:{fields:{[Y_]:{stringValue:X_},[Dh]:{arrayValue:{values:d.map((g=>{if(typeof g!="number")throw h.createError("VectorValues must only contain numeric values.");return Py(h.serializer,g)}))}}}}}})(r,s);if(jS(r))return r._toProto(s.serializer);throw s.createError(`Unsupported field value: ${uf(r)}`)})(n,e)}function l2(n,e){const t={};return $_(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ys(n,((r,s)=>{const l=El(s,e.childContextForField(r));l!=null&&(t[r]=l)})),{mapValue:{fields:t}}}function c2(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ut||n instanceof si||n instanceof ir||n instanceof At||n instanceof Sl||n instanceof Ar||jS(n))}function e0(n,e,t){if(!c2(t)||!U_(t)){const r=uf(t);throw r==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+r)}}function Ho(n,e,t){if((e=Pt(e))instanceof Ef)return e._internalPath;if(typeof e=="string")return u2(n,e);throw Uh("Field path arguments must be of type string or ",n,!1,void 0,t)}const OM=new RegExp("[~\\*/\\[\\]]");function u2(n,e,t){if(e.search(OM)>=0)throw Uh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ef(...e.split("."))._internalPath}catch{throw Uh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Uh(n,e,t,r,s){const l=r&&!r.isEmpty(),c=s!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(l||c)&&(d+=" (found",l&&(d+=` in field ${r}`),c&&(d+=` in document ${s}`),d+=")"),new he(Z.INVALID_ARGUMENT,h+n+d)}function d2(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{convertValue(e,t="none"){switch(Fs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(zs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ys(e,((s,l)=>{r[s]=this.convertValue(l,t)})),r}convertVectorValue(e){var r,s,l;const t=(l=(s=(r=e.fields)==null?void 0:r[Dh].arrayValue)==null?void 0:s.values)==null?void 0:l.map((c=>jt(c.doubleValue)));return new Ar(t)}convertGeoPoint(e){return new si(jt(e.latitude),jt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=ff(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Yc(e));default:return null}}convertTimestamp(e){const t=Bs(e);return new ut(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=it.fromString(e);Ze(CS(r),9688,{name:e});const s=new Xc(r.get(1),r.get(3)),l=new ke(r.popFirst(5));return s.isEqual(t)||Fi(`Document ${l} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2 extends BM{constructor(e){super(),this.firestore=e}convertBytes(e){return new ir(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new At(this.firestore,null,t)}}function ht(){return new Xy("serverTimestamp")}function zM(...n){return new Jy("arrayUnion",n)}function Ko(n){return new Zy("increment",n)}const Bw="@firebase/firestore",zw="4.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e,t,r,s,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new At(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new FM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(Ho("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class FM extends f2{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UM(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new he(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class t0{}class n0 extends t0{}function dr(n,e,...t){let r=[];e instanceof t0&&r.push(e),r=r.concat(t),(function(l){const c=l.filter((d=>d instanceof r0)).length,h=l.filter((d=>d instanceof Cf)).length;if(c>1||c>0&&h>0)throw new he(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)n=s._apply(n);return n}class Cf extends n0{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Cf(e,t,r)}_apply(e){const t=this._parse(e);return m2(e._query,t),new Js(e.firestore,e.converter,gg(e._query,t))}_parse(e){const t=_u(e.firestore);return(function(l,c,h,d,m,g,y){let x;if(m.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new he(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){Uw(y,g);const k=[];for(const S of y)k.push(Fw(d,l,S));x={arrayValue:{values:k}}}else x=Fw(d,l,y)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||Uw(y,g),x=LM(h,c,y,g==="in"||g==="not-in");return Ot.create(m,g,x)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function li(n,e,t){const r=e,s=Ho("where",n);return Cf._create(s,r,t)}class r0 extends t0{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new r0(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:Pr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,l){let c=s;const h=l.getFlattenedFilters();for(const d of h)m2(c,d),c=gg(c,d)})(e._query,t),new Js(e.firestore,e.converter,gg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class i0 extends n0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new i0(e,t)}_apply(e){const t=(function(s,l,c){if(s.startAt!==null)throw new he(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new he(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Zc(l,c)})(e._query,this._field,this._direction);return new Js(e.firestore,e.converter,mN(e._query,t))}}function Wi(n,e="asc"){const t=e,r=Ho("orderBy",n);return i0._create(r,t)}class s0 extends n0{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new s0(e,t,r)}_apply(e){return new Js(e.firestore,e.converter,Lh(e._query,this._limit,this._limitType))}}function WM(n){return s0._create("limit",n,"F")}function Fw(n,e,t){if(typeof(t=Pt(t))=="string"){if(t==="")throw new he(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sS(e)&&t.indexOf("/")!==-1)throw new he(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(it.fromString(t));if(!ke.isDocumentKey(r))throw new he(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return nw(n,new ke(r))}if(t instanceof At)return nw(n,t._key);throw new he(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${uf(t)}.`)}function Uw(n,e){if(!Array.isArray(n)||n.length===0)throw new he(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function m2(n,e){const t=(function(s,l){for(const c of s)for(const h of c.getFlattenedFilters())if(l.indexOf(h.op)>=0)return h.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new he(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function o0(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Nc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Lo extends f2{constructor(e,t,r,s,l,c){super(e,t,r,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new xh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Ho("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Lo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Lo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Lo._jsonSchema={type:Bt("string",Lo._jsonSchemaVersion),bundleSource:Bt("string","DocumentSnapshot"),bundleName:Bt("string"),bundle:Bt("string")};class xh extends Lo{data(e={}){return super.data(e)}}class Za{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Nc(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new xh(this._firestore,this._userDataWriter,r.key,r,new Nc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,l){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map((h=>{const d=new xh(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Nc(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:d,oldIndex:-1,newIndex:c++}}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((h=>l||h.type!==3)).map((h=>{const d=new xh(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Nc(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,g=-1;return h.type!==0&&(m=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),g=c.indexOf(h.doc.key)),{type:$M(h.type),doc:d,oldIndex:m,newIndex:g}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Za._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ey.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),s.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function $M(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Za._jsonSchemaVersion="firestore/querySnapshot/1.0",Za._jsonSchema={type:Bt("string",Za._jsonSchemaVersion),bundleSource:Bt("string","QuerySnapshot"),bundleName:Bt("string"),bundle:Bt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=_u(e)}set(e,t,r){this._verifyNotCommitted();const s=Cp(e,this._firestore),l=o0(s.converter,t,r),c=Yy(this._dataReader,"WriteBatch.set",s._key,l,s.converter!==null,r);return this._mutations.push(c.toMutation(s._key,_n.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const l=Cp(e,this._firestore);let c;return c=typeof(t=Pt(t))=="string"||t instanceof Ef?a2(this._dataReader,"WriteBatch.update",l._key,t,r,s):o2(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,_n.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Cp(e,this._firestore);return this._mutations=this._mutations.concat(new vf(t._key,_n.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new he(Z.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Cp(n,e){if((n=Pt(n)).firestore!==e)throw new he(Z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eo(n){n=ur(n,At);const e=ur(n.firestore,Zs),t=Sf(e);return EM(t,n._key).then((r=>qM(e,n,r)))}function gn(n){n=ur(n,Js);const e=ur(n.firestore,Zs),t=Sf(e),r=new h2(e);return UM(n._query),TM(t,n._query).then((s=>new Za(e,r,n,s)))}function Tl(n,e,t){n=ur(n,At);const r=ur(n.firestore,Zs),s=o0(n.converter,e,t),l=_u(r);return Su(r,[Yy(l,"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,_n.none())])}function Dr(n,e,t,...r){n=ur(n,At);const s=ur(n.firestore,Zs),l=_u(s);let c;return c=typeof(e=Pt(e))=="string"||e instanceof Ef?a2(l,"updateDoc",n._key,e,t,r):o2(l,"updateDoc",n._key,e),Su(s,[c.toMutation(n._key,_n.exists(!0))])}function KM(n){return Su(ur(n.firestore,Zs),[new vf(n._key,_n.none())])}function jf(n,e){const t=ur(n.firestore,Zs),r=st(n),s=o0(n.converter,e),l=_u(n.firestore);return Su(t,[Yy(l,"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,_n.exists(!1))]).then((()=>r))}function Su(n,e){const t=Sf(n);return IM(t,e)}function qM(n,e,t){const r=t.docs.get(e._key),s=new h2(n);return new Lo(n,s,e._key,r,new Nc(t.hasPendingWrites,t.fromCache),e.converter)}function p2(n){return n=ur(n,Zs),Sf(n),new HM(n,(e=>Su(n,e)))}(function(e,t=!0){CP(yl),nl(new zo("firestore",((r,{instanceIdentifier:s,options:l})=>{const c=r.getProvider("app").getImmediate(),h=new Zs(new RP(r.getProvider("auth-internal")),new MP(c,r.getProvider("app-check-internal")),XP(c,s),c);return l={useFetchStreams:t,...l},h._setSettings(l),h}),"PUBLIC").setMultipleInstances(!0)),Ns(Bw,zw,e),Ns(Bw,zw,"esm2020")})();var GM="firebase",QM="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ns(GM,QM,"app");const YM={apiKey:"AIzaSyCf4uRHqqZtYR3ZvlbHF9w59qGuEjlXcW4",authDomain:"kinderbucks-e3e8c.firebaseapp.com",projectId:"kinderbucks-e3e8c",storageBucket:"kinderbucks-e3e8c.firebasestorage.app",messagingSenderId:"18326874439",appId:"1:18326874439:web:ad902e6a1c794b2b3c4462",measurementId:"G-3JMD9HSMC3"},g2=Yk(YM),Ae=RM(g2),qo=TP(g2),Jo="users",Oo={ADMIN:"admin",BUSINESS:"business",MEMBER:"member"};async function XM(n,e,t){const s=(await lR(qo,n,e)).user;return await dR(s,{displayName:t}),await Tl(st(Ae,Jo,s.uid),{uid:s.uid,email:s.email,displayName:t,role:Oo.MEMBER,createdAt:ht(),lastLogin:ht()}),s}async function JM(n,e){const t=await cR(qo,n,e);return await Dr(st(Ae,Jo,t.user.uid),{lastLogin:ht()}),t.user}async function ZM(){var l;const n=new ji,t=(await DR(qo,n)).user,r=st(Ae,Jo,t.uid);return(await eo(r)).exists()?await Dr(r,{lastLogin:ht(),photoURL:t.photoURL}):await Tl(r,{uid:t.uid,email:t.email,displayName:t.displayName||((l=t.email)==null?void 0:l.split("@")[0]),photoURL:t.photoURL,role:Oo.MEMBER,createdAt:ht(),lastLogin:ht(),provider:"google"}),t}async function y2(){return pR(qo)}async function Ww(n){const e=st(Ae,Jo,n),t=await eo(e);return t.exists()?t.data():null}async function eD(n,e){if(!Object.values(Oo).includes(e))throw new Error("Invalid role");await Dr(st(Ae,Jo,n),{role:e,updatedAt:ht()})}async function tD(n,e){await Dr(st(Ae,Jo,n),{role:Oo.BUSINESS,businessCode:e,updatedAt:ht()})}async function nD(){return(await gn(Rt(Ae,Jo))).docs.map(e=>({id:e.id,...e.data()}))}function rD(n){return mR(qo,n)}const v2=j.createContext(null);function iD({children:n}){const[e,t]=j.useState(null),[r,s]=j.useState(null),[l,c]=j.useState(!0);j.useEffect(()=>{const k=rD(async S=>{if(t(S),S){const I=await Ww(S.uid);s(I)}else s(null);c(!1)});return()=>k()},[]);const h=!!e,d=(r==null?void 0:r.role)===Oo.ADMIN,m=(r==null?void 0:r.role)===Oo.BUSINESS||d&&(r==null?void 0:r.businessCode),g=(r==null?void 0:r.role)===Oo.MEMBER||h,E={user:e,profile:r,loading:l,isAuthenticated:h,isAdmin:d,isBusiness:m,isMember:g,hasRole:(...k)=>r?k.includes(r.role):!1,refreshProfile:async()=>{if(e){const k=await Ww(e.uid);s(k)}}};return a.jsx(v2.Provider,{value:E,children:n})}function Vr(){const n=j.useContext(v2);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n}/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sD=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),oD=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),$w=n=>{const e=oD(n);return e.charAt(0).toUpperCase()+e.slice(1)},x2=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),aD=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var lD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cD=j.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:l,iconNode:c,...h},d)=>j.createElement("svg",{ref:d,...lD,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:x2("lucide",s),...!l&&!aD(h)&&{"aria-hidden":"true"},...h},[...c.map(([m,g])=>j.createElement(m,g)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=(n,e)=>{const t=j.forwardRef(({className:r,...s},l)=>j.createElement(cD,{ref:l,iconNode:e,className:x2(`lucide-${sD($w(n))}`,`lucide-${n}`,r),...s}));return t.displayName=$w(n),t};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uD=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],Hw=ae("arrow-down-right",uD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dD=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],w2=ae("arrow-left",dD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hD=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],Af=ae("arrow-right-left",hD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fD=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Tg=ae("arrow-right",fD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mD=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],Kw=ae("arrow-up-right",mD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pD=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],hr=ae("award",pD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gD=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],Vi=ae("banknote",gD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yD=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],qw=ae("book-open",yD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vD=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],b2=ae("briefcase",vD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xD=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],wD=ae("building-2",xD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bD=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Rf=ae("calendar",bD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kD=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],a0=ae("chart-column",kD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _D=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ai=ae("check",_D);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SD=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ED=ae("chevron-down",SD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TD=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],ID=ae("chevron-left",TD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CD=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],jD=ae("chevron-up",CD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Vs=ae("circle-alert",AD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RD=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Sn=ae("circle-check-big",RD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],k2=ae("circle-x",PD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ND=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],or=ae("clock",ND);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MD=[["path",{d:"M6 16.326A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 .5 8.973",key:"1cez44"}],["path",{d:"m13 12-3 5h4l-3 5",key:"1t22er"}]],jp=ae("cloud-lightning",MD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DD=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]],Ci=ae("cloud-rain",DD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VD=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M8 15h.01",key:"a7atzg"}],["path",{d:"M8 19h.01",key:"puxtts"}],["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M12 21h.01",key:"h35vbk"}],["path",{d:"M16 15h.01",key:"rnfrdf"}],["path",{d:"M16 19h.01",key:"1vcnzz"}]],Oa=ae("cloud-snow",VD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LD=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],th=ae("cloud",LD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OD=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],BD=ae("coins",OD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zD=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],_2=ae("compass",zD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FD=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],l0=ae("copy",FD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UD=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Ig=ae("credit-card",UD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WD=[["path",{d:"M10.2 18H4.774a1.5 1.5 0 0 1-1.352-.97 11 11 0 0 1 .132-6.487",key:"14kkz9"}],["path",{d:"M18 10.2V4.774a1.5 1.5 0 0 0-.97-1.352 11 11 0 0 0-6.486.132",key:"1g7v07"}],["path",{d:"M18 5a4 3 0 0 1 4 3 2 2 0 0 1-2 2 10 10 0 0 0-5.139 1.42",key:"ratg6b"}],["path",{d:"M5 18a3 4 0 0 0 3 4 2 2 0 0 0 2-2 10 10 0 0 1 1.42-5.14",key:"4454f0"}],["path",{d:"M8.709 2.554a10 10 0 0 0-6.155 6.155 1.5 1.5 0 0 0 .676 1.626l9.807 5.42a2 2 0 0 0 2.718-2.718l-5.42-9.807a1.5 1.5 0 0 0-1.626-.676",key:"qmemie"}]],$D=ae("croissant",WD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HD=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Gn=ae("crown",HD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KD=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Wh=ae("dollar-sign",KD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qD=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],S2=ae("download",qD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GD=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],QD=ae("droplets",GD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YD=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],XD=ae("ellipsis-vertical",YD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JD=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],ZD=ae("external-link",JD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eV=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],tV=ae("eye-off",eV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nV=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],E2=ae("eye",nV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rV=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],T2=ae("gift",rV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iV=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],sV=ae("house",iV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],aV=ae("info",oV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lV=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],cV=ae("layout-dashboard",lV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uV=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],dV=ae("lightbulb",uV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hV=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],c0=ae("loader-circle",hV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fV=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],mV=ae("lock",fV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pV=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],dl=ae("log-in",pV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gV=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Cg=ae("log-out",gV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yV=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],I2=ae("mail",yV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vV=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],ru=ae("map-pin",vV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xV=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],wV=ae("megaphone",xV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bV=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],kV=ae("navigation",bV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _V=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Gw=ae("package",_V);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SV=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],C2=ae("palette",SV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EV=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],TV=ae("percent",EV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IV=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],CV=ae("phone",IV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jV=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],iu=ae("plus",jV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AV=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],j2=ae("printer",AV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RV=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],Rr=ae("qr-code",RV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PV=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],NV=ae("refresh-cw",PV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MV=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],DV=ae("save",MV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VV=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],A2=ae("search",VV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LV=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],$h=ae("send",LV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OV=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],BV=ae("share-2",OV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zV=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],R2=ae("shield-check",zV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FV=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Hh=ae("shield",FV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UV=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],u0=ae("shopping-bag",UV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WV=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],jg=ae("smartphone",WV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $V=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],d0=ae("sparkles",$V);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HV=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],KV=ae("square-check-big",HV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qV=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],GV=ae("square",qV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QV=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],fr=ae("star",QV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YV=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],St=ae("store",YV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XV=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Qw=ae("sun",XV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JV=[["path",{d:"M12 2v8",key:"1q4o3n"}],["path",{d:"m4.93 10.93 1.41 1.41",key:"2a7f42"}],["path",{d:"M2 18h2",key:"j10viu"}],["path",{d:"M20 18h2",key:"wocana"}],["path",{d:"m19.07 10.93-1.41 1.41",key:"15zs5n"}],["path",{d:"M22 22H2",key:"19qnx5"}],["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}],["path",{d:"M16 18a4 4 0 0 0-8 0",key:"1lzouq"}]],ZV=ae("sunrise",JV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=[["path",{d:"M12 10V2",key:"16sf7g"}],["path",{d:"m4.93 10.93 1.41 1.41",key:"2a7f42"}],["path",{d:"M2 18h2",key:"j10viu"}],["path",{d:"M20 18h2",key:"wocana"}],["path",{d:"m19.07 10.93-1.41 1.41",key:"15zs5n"}],["path",{d:"M22 22H2",key:"19qnx5"}],["path",{d:"m16 6-4 4-4-4",key:"6wukr"}],["path",{d:"M16 18a4 4 0 0 0-8 0",key:"1lzouq"}]],t3=ae("sunset",e3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Ec=ae("tag",n3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],on=ae("target",r3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],s3=ae("toggle-left",i3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],a3=ae("toggle-right",o3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],c3=ae("trash-2",l3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],$s=ae("trending-up",u3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],h3=ae("trophy",d3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Kh=ae("user-plus",f3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],el=ae("user",m3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Nr=ae("users",p3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]],P2=ae("utensils-crossed",g3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]],v3=ae("wind",y3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],N2=ae("x",x3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],b3=ae("zap",w3);function Er({children:n,allowedRoles:e=[]}){const{user:t,profile:r,loading:s,isAuthenticated:l}=Vr(),c=mr();return s?a.jsxs("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"var(--kb-cream)"},children:[a.jsxs("div",{style:{textAlign:"center"},children:[a.jsx(c0,{size:48,color:"var(--kb-navy)",style:{animation:"spin 1s linear infinite"}}),a.jsx("p",{style:{marginTop:"1rem",color:"var(--kb-gray-500)"},children:"Loading..."})]}),a.jsx("style",{children:`
          @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
          }
        `})]}):l?e.length>0&&r&&!e.includes(r.role)?a.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"var(--kb-cream)",padding:"2rem"},children:a.jsxs("div",{className:"card",style:{maxWidth:"400px",textAlign:"center",padding:"2rem"},children:[a.jsx("h2",{style:{color:"#dc2626",marginBottom:"1rem"},children:"Access Denied"}),a.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem"},children:"You don't have permission to access this page."}),a.jsx("a",{href:"/",className:"btn btn-primary",children:"Go Home"})]})}):n:a.jsx(HC,{to:"/login",state:{from:c},replace:!0})}const h0=j.createContext({});function f0(n){const e=j.useRef(null);return e.current===null&&(e.current=n()),e.current}const M2=typeof window<"u",D2=M2?j.useLayoutEffect:j.useEffect,Pf=j.createContext(null);function m0(n,e){n.indexOf(e)===-1&&n.push(e)}function p0(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const ci=(n,e,t)=>t>e?e:t<n?n:t;let g0=()=>{};const $i={},V2=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function L2(n){return typeof n=="object"&&n!==null}const O2=n=>/^0[^.\s]+$/u.test(n);function y0(n){let e;return()=>(e===void 0&&(e=n()),e)}const ar=n=>n,k3=(n,e)=>t=>e(n(t)),Eu=(...n)=>n.reduce(k3),su=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r};class v0{constructor(){this.subscriptions=[]}add(e){return m0(this.subscriptions,e),()=>p0(this.subscriptions,e)}notify(e,t,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,t,r);else for(let l=0;l<s;l++){const c=this.subscriptions[l];c&&c(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Li=n=>n*1e3,sr=n=>n/1e3;function B2(n,e){return e?n*(1e3/e):0}const z2=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,_3=1e-7,S3=12;function E3(n,e,t,r,s){let l,c,h=0;do c=e+(t-e)/2,l=z2(c,r,s)-n,l>0?t=c:e=c;while(Math.abs(l)>_3&&++h<S3);return c}function Tu(n,e,t,r){if(n===e&&t===r)return ar;const s=l=>E3(l,0,1,n,t);return l=>l===0||l===1?l:z2(s(l),e,r)}const F2=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,U2=n=>e=>1-n(1-e),W2=Tu(.33,1.53,.69,.99),x0=U2(W2),$2=F2(x0),H2=n=>(n*=2)<1?.5*x0(n):.5*(2-Math.pow(2,-10*(n-1))),w0=n=>1-Math.sin(Math.acos(n)),K2=U2(w0),q2=F2(w0),T3=Tu(.42,0,1,1),I3=Tu(0,0,.58,1),G2=Tu(.42,0,.58,1),C3=n=>Array.isArray(n)&&typeof n[0]!="number",Q2=n=>Array.isArray(n)&&typeof n[0]=="number",j3={linear:ar,easeIn:T3,easeInOut:G2,easeOut:I3,circIn:w0,circInOut:q2,circOut:K2,backIn:x0,backInOut:$2,backOut:W2,anticipate:H2},A3=n=>typeof n=="string",Yw=n=>{if(Q2(n)){g0(n.length===4);const[e,t,r,s]=n;return Tu(e,t,r,s)}else if(A3(n))return j3[n];return n},nh=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function R3(n,e){let t=new Set,r=new Set,s=!1,l=!1;const c=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1};function d(g){c.has(g)&&(m.schedule(g),n()),g(h)}const m={schedule:(g,y=!1,x=!1)=>{const k=x&&s?t:r;return y&&c.add(g),k.has(g)||k.add(g),g},cancel:g=>{r.delete(g),c.delete(g)},process:g=>{if(h=g,s){l=!0;return}s=!0,[t,r]=[r,t],t.forEach(d),t.clear(),s=!1,l&&(l=!1,m.process(g))}};return m}const P3=40;function Y2(n,e){let t=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},l=()=>t=!0,c=nh.reduce((P,K)=>(P[K]=R3(l),P),{}),{setup:h,read:d,resolveKeyframes:m,preUpdate:g,update:y,preRender:x,render:E,postRender:k}=c,S=()=>{const P=$i.useManualTiming?s.timestamp:performance.now();t=!1,$i.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(P-s.timestamp,P3),1)),s.timestamp=P,s.isProcessing=!0,h.process(s),d.process(s),m.process(s),g.process(s),y.process(s),x.process(s),E.process(s),k.process(s),s.isProcessing=!1,t&&e&&(r=!1,n(S))},I=()=>{t=!0,r=!0,s.isProcessing||n(S)};return{schedule:nh.reduce((P,K)=>{const z=c[K];return P[K]=(W,A=!1,C=!1)=>(t||I(),z.schedule(W,A,C)),P},{}),cancel:P=>{for(let K=0;K<nh.length;K++)c[nh[K]].cancel(P)},state:s,steps:c}}const{schedule:dt,cancel:Hs,state:tn,steps:Ap}=Y2(typeof requestAnimationFrame<"u"?requestAnimationFrame:ar,!0);let wh;function N3(){wh=void 0}const bn={now:()=>(wh===void 0&&bn.set(tn.isProcessing||$i.useManualTiming?tn.timestamp:performance.now()),wh),set:n=>{wh=n,queueMicrotask(N3)}},X2=n=>e=>typeof e=="string"&&e.startsWith(n),J2=X2("--"),M3=X2("var(--"),b0=n=>M3(n)?D3.test(n.split("/*")[0].trim()):!1,D3=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function Xw(n){return typeof n!="string"?!1:n.split("/*")[0].includes("var(--")}const Il={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},ou={...Il,transform:n=>ci(0,1,n)},rh={...Il,default:1},Uc=n=>Math.round(n*1e5)/1e5,k0=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function V3(n){return n==null}const L3=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,_0=(n,e)=>t=>!!(typeof t=="string"&&L3.test(t)&&t.startsWith(n)||e&&!V3(t)&&Object.prototype.hasOwnProperty.call(t,e)),Z2=(n,e,t)=>r=>{if(typeof r!="string")return r;const[s,l,c,h]=r.match(k0);return{[n]:parseFloat(s),[e]:parseFloat(l),[t]:parseFloat(c),alpha:h!==void 0?parseFloat(h):1}},O3=n=>ci(0,255,n),Rp={...Il,transform:n=>Math.round(O3(n))},Do={test:_0("rgb","red"),parse:Z2("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+Rp.transform(n)+", "+Rp.transform(e)+", "+Rp.transform(t)+", "+Uc(ou.transform(r))+")"};function B3(n){let e="",t="",r="",s="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),s=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),s=n.substring(4,5),e+=e,t+=t,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Ag={test:_0("#"),parse:B3,transform:Do.transform},Iu=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Es=Iu("deg"),oi=Iu("%"),ge=Iu("px"),z3=Iu("vh"),F3=Iu("vw"),Jw={...oi,parse:n=>oi.parse(n)/100,transform:n=>oi.transform(n*100)},Wa={test:_0("hsl","hue"),parse:Z2("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+oi.transform(Uc(e))+", "+oi.transform(Uc(t))+", "+Uc(ou.transform(r))+")"},Lt={test:n=>Do.test(n)||Ag.test(n)||Wa.test(n),parse:n=>Do.test(n)?Do.parse(n):Wa.test(n)?Wa.parse(n):Ag.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Do.transform(n):Wa.transform(n),getAnimatableNone:n=>{const e=Lt.parse(n);return e.alpha=0,Lt.transform(e)}},U3=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function W3(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(k0))==null?void 0:e.length)||0)+(((t=n.match(U3))==null?void 0:t.length)||0)>0}const eE="number",tE="color",$3="var",H3="var(",Zw="${}",K3=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function au(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},s=[];let l=0;const h=e.replace(K3,d=>(Lt.test(d)?(r.color.push(l),s.push(tE),t.push(Lt.parse(d))):d.startsWith(H3)?(r.var.push(l),s.push($3),t.push(d)):(r.number.push(l),s.push(eE),t.push(parseFloat(d))),++l,Zw)).split(Zw);return{values:t,split:h,indexes:r,types:s}}function nE(n){return au(n).values}function rE(n){const{split:e,types:t}=au(n),r=e.length;return s=>{let l="";for(let c=0;c<r;c++)if(l+=e[c],s[c]!==void 0){const h=t[c];h===eE?l+=Uc(s[c]):h===tE?l+=Lt.transform(s[c]):l+=s[c]}return l}}const q3=n=>typeof n=="number"?0:Lt.test(n)?Lt.getAnimatableNone(n):n;function G3(n){const e=nE(n);return rE(n)(e.map(q3))}const Ks={test:W3,parse:nE,createTransformer:rE,getAnimatableNone:G3};function Pp(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function Q3({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let s=0,l=0,c=0;if(!e)s=l=c=t;else{const h=t<.5?t*(1+e):t+e-t*e,d=2*t-h;s=Pp(d,h,n+1/3),l=Pp(d,h,n),c=Pp(d,h,n-1/3)}return{red:Math.round(s*255),green:Math.round(l*255),blue:Math.round(c*255),alpha:r}}function qh(n,e){return t=>t>0?e:n}const vt=(n,e,t)=>n+(e-n)*t,Np=(n,e,t)=>{const r=n*n,s=t*(e*e-r)+r;return s<0?0:Math.sqrt(s)},Y3=[Ag,Do,Wa],X3=n=>Y3.find(e=>e.test(n));function eb(n){const e=X3(n);if(!e)return!1;let t=e.parse(n);return e===Wa&&(t=Q3(t)),t}const tb=(n,e)=>{const t=eb(n),r=eb(e);if(!t||!r)return qh(n,e);const s={...t};return l=>(s.red=Np(t.red,r.red,l),s.green=Np(t.green,r.green,l),s.blue=Np(t.blue,r.blue,l),s.alpha=vt(t.alpha,r.alpha,l),Do.transform(s))},Rg=new Set(["none","hidden"]);function J3(n,e){return Rg.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function Z3(n,e){return t=>vt(n,e,t)}function S0(n){return typeof n=="number"?Z3:typeof n=="string"?b0(n)?qh:Lt.test(n)?tb:n6:Array.isArray(n)?iE:typeof n=="object"?Lt.test(n)?tb:e6:qh}function iE(n,e){const t=[...n],r=t.length,s=n.map((l,c)=>S0(l)(l,e[c]));return l=>{for(let c=0;c<r;c++)t[c]=s[c](l);return t}}function e6(n,e){const t={...n,...e},r={};for(const s in t)n[s]!==void 0&&e[s]!==void 0&&(r[s]=S0(n[s])(n[s],e[s]));return s=>{for(const l in r)t[l]=r[l](s);return t}}function t6(n,e){const t=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const l=e.types[s],c=n.indexes[l][r[l]],h=n.values[c]??0;t[s]=h,r[l]++}return t}const n6=(n,e)=>{const t=Ks.createTransformer(e),r=au(n),s=au(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?Rg.has(n)&&!s.values.length||Rg.has(e)&&!r.values.length?J3(n,e):Eu(iE(t6(r,s),s.values),t):qh(n,e)};function sE(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?vt(n,e,t):S0(n)(n,e)}const r6=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>dt.update(e,t),stop:()=>Hs(e),now:()=>tn.isProcessing?tn.timestamp:bn.now()}},oE=(n,e,t=10)=>{let r="";const s=Math.max(Math.round(e/t),2);for(let l=0;l<s;l++)r+=Math.round(n(l/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Gh=2e4;function E0(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<Gh;)e+=t,r=n.next(e);return e>=Gh?1/0:e}function i6(n,e=100,t){const r=t({...n,keyframes:[0,e]}),s=Math.min(E0(r),Gh);return{type:"keyframes",ease:l=>r.next(s*l).value/e,duration:sr(s)}}const s6=5;function aE(n,e,t){const r=Math.max(e-s6,0);return B2(t-n(r),e-r)}const _t={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Mp=.001;function o6({duration:n=_t.duration,bounce:e=_t.bounce,velocity:t=_t.velocity,mass:r=_t.mass}){let s,l,c=1-e;c=ci(_t.minDamping,_t.maxDamping,c),n=ci(_t.minDuration,_t.maxDuration,sr(n)),c<1?(s=m=>{const g=m*c,y=g*n,x=g-t,E=Pg(m,c),k=Math.exp(-y);return Mp-x/E*k},l=m=>{const y=m*c*n,x=y*t+t,E=Math.pow(c,2)*Math.pow(m,2)*n,k=Math.exp(-y),S=Pg(Math.pow(m,2),c);return(-s(m)+Mp>0?-1:1)*((x-E)*k)/S}):(s=m=>{const g=Math.exp(-m*n),y=(m-t)*n+1;return-Mp+g*y},l=m=>{const g=Math.exp(-m*n),y=(t-m)*(n*n);return g*y});const h=5/n,d=l6(s,l,h);if(n=Li(n),isNaN(d))return{stiffness:_t.stiffness,damping:_t.damping,duration:n};{const m=Math.pow(d,2)*r;return{stiffness:m,damping:c*2*Math.sqrt(r*m),duration:n}}}const a6=12;function l6(n,e,t){let r=t;for(let s=1;s<a6;s++)r=r-n(r)/e(r);return r}function Pg(n,e){return n*Math.sqrt(1-e*e)}const c6=["duration","bounce"],u6=["stiffness","damping","mass"];function nb(n,e){return e.some(t=>n[t]!==void 0)}function d6(n){let e={velocity:_t.velocity,stiffness:_t.stiffness,damping:_t.damping,mass:_t.mass,isResolvedFromDuration:!1,...n};if(!nb(n,u6)&&nb(n,c6))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),s=r*r,l=2*ci(.05,1,1-(n.bounce||0))*Math.sqrt(s);e={...e,mass:_t.mass,stiffness:s,damping:l}}else{const t=o6(n);e={...e,...t,mass:_t.mass},e.isResolvedFromDuration=!0}return e}function Qh(n=_t.visualDuration,e=_t.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:s}=t;const l=t.keyframes[0],c=t.keyframes[t.keyframes.length-1],h={done:!1,value:l},{stiffness:d,damping:m,mass:g,duration:y,velocity:x,isResolvedFromDuration:E}=d6({...t,velocity:-sr(t.velocity||0)}),k=x||0,S=m/(2*Math.sqrt(d*g)),I=c-l,N=sr(Math.sqrt(d/g)),V=Math.abs(I)<5;r||(r=V?_t.restSpeed.granular:_t.restSpeed.default),s||(s=V?_t.restDelta.granular:_t.restDelta.default);let P;if(S<1){const z=Pg(N,S);P=W=>{const A=Math.exp(-S*N*W);return c-A*((k+S*N*I)/z*Math.sin(z*W)+I*Math.cos(z*W))}}else if(S===1)P=z=>c-Math.exp(-N*z)*(I+(k+N*I)*z);else{const z=N*Math.sqrt(S*S-1);P=W=>{const A=Math.exp(-S*N*W),C=Math.min(z*W,300);return c-A*((k+S*N*I)*Math.sinh(C)+z*I*Math.cosh(C))/z}}const K={calculatedDuration:E&&y||null,next:z=>{const W=P(z);if(E)h.done=z>=y;else{let A=z===0?k:0;S<1&&(A=z===0?Li(k):aE(P,z,W));const C=Math.abs(A)<=r,M=Math.abs(c-W)<=s;h.done=C&&M}return h.value=h.done?c:W,h},toString:()=>{const z=Math.min(E0(K),Gh),W=oE(A=>K.next(z*A).value,z,30);return z+"ms "+W},toTransition:()=>{}};return K}Qh.applyToOptions=n=>{const e=i6(n,100,Qh);return n.ease=e.ease,n.duration=Li(e.duration),n.type="keyframes",n};function Ng({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:l=500,modifyTarget:c,min:h,max:d,restDelta:m=.5,restSpeed:g}){const y=n[0],x={done:!1,value:y},E=C=>h!==void 0&&C<h||d!==void 0&&C>d,k=C=>h===void 0?d:d===void 0||Math.abs(h-C)<Math.abs(d-C)?h:d;let S=t*e;const I=y+S,N=c===void 0?I:c(I);N!==I&&(S=N-y);const V=C=>-S*Math.exp(-C/r),P=C=>N+V(C),K=C=>{const M=V(C),O=P(C);x.done=Math.abs(M)<=m,x.value=x.done?N:O};let z,W;const A=C=>{E(x.value)&&(z=C,W=Qh({keyframes:[x.value,k(x.value)],velocity:aE(P,C,x.value),damping:s,stiffness:l,restDelta:m,restSpeed:g}))};return A(0),{calculatedDuration:null,next:C=>{let M=!1;return!W&&z===void 0&&(M=!0,K(C),A(C)),z!==void 0&&C>=z?W.next(C-z):(!M&&K(C),x)}}}function h6(n,e,t){const r=[],s=t||$i.mix||sE,l=n.length-1;for(let c=0;c<l;c++){let h=s(n[c],n[c+1]);if(e){const d=Array.isArray(e)?e[c]||ar:e;h=Eu(d,h)}r.push(h)}return r}function f6(n,e,{clamp:t=!0,ease:r,mixer:s}={}){const l=n.length;if(g0(l===e.length),l===1)return()=>e[0];if(l===2&&e[0]===e[1])return()=>e[1];const c=n[0]===n[1];n[0]>n[l-1]&&(n=[...n].reverse(),e=[...e].reverse());const h=h6(e,r,s),d=h.length,m=g=>{if(c&&g<n[0])return e[0];let y=0;if(d>1)for(;y<n.length-2&&!(g<n[y+1]);y++);const x=su(n[y],n[y+1],g);return h[y](x)};return t?g=>m(ci(n[0],n[l-1],g)):m}function m6(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const s=su(0,e,r);n.push(vt(t,1,s))}}function p6(n){const e=[0];return m6(e,n.length-1),e}function g6(n,e){return n.map(t=>t*e)}function y6(n,e){return n.map(()=>e||G2).splice(0,n.length-1)}function Wc({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const s=C3(r)?r.map(Yw):Yw(r),l={done:!1,value:e[0]},c=g6(t&&t.length===e.length?t:p6(e),n),h=f6(c,e,{ease:Array.isArray(s)?s:y6(e,s)});return{calculatedDuration:n,next:d=>(l.value=h(d),l.done=d>=n,l)}}const v6=n=>n!==null;function T0(n,{repeat:e,repeatType:t="loop"},r,s=1){const l=n.filter(v6),h=s<0||e&&t!=="loop"&&e%2===1?0:l.length-1;return!h||r===void 0?l[h]:r}const x6={decay:Ng,inertia:Ng,tween:Wc,keyframes:Wc,spring:Qh};function lE(n){typeof n.type=="string"&&(n.type=x6[n.type])}class I0{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const w6=n=>n/100;class C0 extends I0{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:t}=this.options;t&&t.updatedAt!==bn.now()&&this.tick(bn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;lE(e);const{type:t=Wc,repeat:r=0,repeatDelay:s=0,repeatType:l,velocity:c=0}=e;let{keyframes:h}=e;const d=t||Wc;d!==Wc&&typeof h[0]!="number"&&(this.mixKeyframes=Eu(w6,sE(h[0],h[1])),h=[0,100]);const m=d({...e,keyframes:h});l==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...h].reverse(),velocity:-c})),m.calculatedDuration===null&&(m.calculatedDuration=E0(m));const{calculatedDuration:g}=m;this.calculatedDuration=g,this.resolvedDuration=g+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=m}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:r,totalDuration:s,mixKeyframes:l,mirroredGenerator:c,resolvedDuration:h,calculatedDuration:d}=this;if(this.startTime===null)return r.next(0);const{delay:m=0,keyframes:g,repeat:y,repeatType:x,repeatDelay:E,type:k,onUpdate:S,finalKeyframe:I}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const N=this.currentTime-m*(this.playbackSpeed>=0?1:-1),V=this.playbackSpeed>=0?N<0:N>s;this.currentTime=Math.max(N,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let P=this.currentTime,K=r;if(y){const C=Math.min(this.currentTime,s)/h;let M=Math.floor(C),O=C%1;!O&&C>=1&&(O=1),O===1&&M--,M=Math.min(M,y+1),!!(M%2)&&(x==="reverse"?(O=1-O,E&&(O-=E/h)):x==="mirror"&&(K=c)),P=ci(0,1,O)*h}const z=V?{done:!1,value:g[0]}:K.next(P);l&&(z.value=l(z.value));let{done:W}=z;!V&&d!==null&&(W=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const A=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&W);return A&&k!==Ng&&(z.value=T0(g,this.options,I,this.speed)),S&&S(z.value),A&&this.finish(),z}then(e,t){return this.finished.then(e,t)}get duration(){return sr(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+sr(e)}get time(){return sr(this.currentTime)}set time(e){var t;e=Li(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(t=this.driver)==null||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(bn.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=sr(this.currentTime))}play(){var s,l;if(this.isStopped)return;const{driver:e=r6,startTime:t}=this.options;this.driver||(this.driver=e(c=>this.tick(c))),(l=(s=this.options).onPlay)==null||l.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=t??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(bn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",(t=(e=this.options).onComplete)==null||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(t=(e=this.options).onCancel)==null||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(t=this.driver)==null||t.stop(),e.observe(this)}}function b6(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const Vo=n=>n*180/Math.PI,Mg=n=>{const e=Vo(Math.atan2(n[1],n[0]));return Dg(e)},k6={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:Mg,rotateZ:Mg,skewX:n=>Vo(Math.atan(n[1])),skewY:n=>Vo(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},Dg=n=>(n=n%360,n<0&&(n+=360),n),rb=Mg,ib=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),sb=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),_6={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:ib,scaleY:sb,scale:n=>(ib(n)+sb(n))/2,rotateX:n=>Dg(Vo(Math.atan2(n[6],n[5]))),rotateY:n=>Dg(Vo(Math.atan2(-n[2],n[0]))),rotateZ:rb,rotate:rb,skewX:n=>Vo(Math.atan(n[4])),skewY:n=>Vo(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function Vg(n){return n.includes("scale")?1:0}function Lg(n,e){if(!n||n==="none")return Vg(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(t)r=_6,s=t;else{const h=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=k6,s=h}if(!s)return Vg(e);const l=r[e],c=s[1].split(",").map(E6);return typeof l=="function"?l(c):c[l]}const S6=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return Lg(t,e)};function E6(n){return parseFloat(n.trim())}const Cl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],jl=new Set(Cl),ob=n=>n===Il||n===ge,T6=new Set(["x","y","z"]),I6=Cl.filter(n=>!T6.has(n));function C6(n){const e=[];return I6.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const As={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>Lg(e,"x"),y:(n,{transform:e})=>Lg(e,"y")};As.translateX=As.x;As.translateY=As.y;const Bo=new Set;let Og=!1,Bg=!1,zg=!1;function cE(){if(Bg){const n=Array.from(Bo).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const s=C6(r);s.length&&(t.set(r,s),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=t.get(r);s&&s.forEach(([l,c])=>{var h;(h=r.getValue(l))==null||h.set(c)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Bg=!1,Og=!1,Bo.forEach(n=>n.complete(zg)),Bo.clear()}function uE(){Bo.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Bg=!0)})}function j6(){zg=!0,uE(),cE(),zg=!1}class j0{constructor(e,t,r,s,l,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=s,this.element=l,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(Bo.add(this),Og||(Og=!0,dt.read(uE),dt.resolveKeyframes(cE))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:s}=this;if(e[0]===null){const l=s==null?void 0:s.get(),c=e[e.length-1];if(l!==void 0)e[0]=l;else if(r&&t){const h=r.readValue(t,c);h!=null&&(e[0]=h)}e[0]===void 0&&(e[0]=c),s&&l===void 0&&s.set(e[0])}b6(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Bo.delete(this)}cancel(){this.state==="scheduled"&&(Bo.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const A6=n=>n.startsWith("--");function R6(n,e,t){A6(e)?n.style.setProperty(e,t):n.style[e]=t}const P6=y0(()=>window.ScrollTimeline!==void 0),N6={};function M6(n,e){const t=y0(n);return()=>N6[e]??t()}const dE=M6(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Mc=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,ab={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Mc([0,.65,.55,1]),circOut:Mc([.55,0,1,.45]),backIn:Mc([.31,.01,.66,-.59]),backOut:Mc([.33,1.53,.69,.99])};function hE(n,e){if(n)return typeof n=="function"?dE()?oE(n,e):"ease-out":Q2(n)?Mc(n):Array.isArray(n)?n.map(t=>hE(t,e)||ab.easeOut):ab[n]}function D6(n,e,t,{delay:r=0,duration:s=300,repeat:l=0,repeatType:c="loop",ease:h="easeOut",times:d}={},m=void 0){const g={[e]:t};d&&(g.offset=d);const y=hE(h,s);Array.isArray(y)&&(g.easing=y);const x={delay:r,duration:s,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:l+1,direction:c==="reverse"?"alternate":"normal"};return m&&(x.pseudoElement=m),n.animate(g,x)}function fE(n){return typeof n=="function"&&"applyToOptions"in n}function V6({type:n,...e}){return fE(n)&&dE()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class L6 extends I0{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:t,name:r,keyframes:s,pseudoElement:l,allowFlatten:c=!1,finalKeyframe:h,onComplete:d}=e;this.isPseudoElement=!!l,this.allowFlatten=c,this.options=e,g0(typeof e.type!="string");const m=V6(e);this.animation=D6(t,r,s,m,l),m.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!l){const g=T0(s,this.options,h,this.speed);this.updateMotionValue?this.updateMotionValue(g):R6(t,r,g),this.animation.cancel()}d==null||d(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;(t=(e=this.animation).finish)==null||t.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(t=(e=this.animation).commitStyles)==null||t.call(e)}get duration(){var t,r;const e=((r=(t=this.animation.effect)==null?void 0:t.getComputedTiming)==null?void 0:r.call(t).duration)||0;return sr(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+sr(e)}get time(){return sr(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=Li(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&P6()?(this.animation.timeline=e,ar):t(this)}}const mE={anticipate:H2,backInOut:$2,circInOut:q2};function O6(n){return n in mE}function B6(n){typeof n.ease=="string"&&O6(n.ease)&&(n.ease=mE[n.ease])}const Dp=10;class z6 extends L6{constructor(e){B6(e),lE(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:r,onComplete:s,element:l,...c}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const h=new C0({...c,autoplay:!1}),d=Math.max(Dp,bn.now()-this.startTime),m=ci(0,Dp,d-Dp);t.setWithVelocity(h.sample(Math.max(0,d-m)).value,h.sample(d).value,m),h.stop()}}const lb=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Ks.test(n)||n==="0")&&!n.startsWith("url("));function F6(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function U6(n,e,t,r){const s=n[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const l=n[n.length-1],c=lb(s,e),h=lb(l,e);return!c||!h?!1:F6(n)||(t==="spring"||fE(t))&&r}function Fg(n){n.duration=0,n.type="keyframes"}const W6=new Set(["opacity","clipPath","filter","transform"]),$6=y0(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function H6(n){var g;const{motionValue:e,name:t,repeatDelay:r,repeatType:s,damping:l,type:c}=n;if(!(((g=e==null?void 0:e.owner)==null?void 0:g.current)instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:m}=e.owner.getProps();return $6()&&t&&W6.has(t)&&(t!=="transform"||!m)&&!d&&!r&&s!=="mirror"&&l!==0&&c!=="inertia"}const K6=40;class q6 extends I0{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:s=0,repeatDelay:l=0,repeatType:c="loop",keyframes:h,name:d,motionValue:m,element:g,...y}){var k;super(),this.stop=()=>{var S,I;this._animation&&(this._animation.stop(),(S=this.stopTimeline)==null||S.call(this)),(I=this.keyframeResolver)==null||I.cancel()},this.createdAt=bn.now();const x={autoplay:e,delay:t,type:r,repeat:s,repeatDelay:l,repeatType:c,name:d,motionValue:m,element:g,...y},E=(g==null?void 0:g.KeyframeResolver)||j0;this.keyframeResolver=new E(h,(S,I,N)=>this.onKeyframesResolved(S,I,x,!N),d,m,g),(k=this.keyframeResolver)==null||k.scheduleResolve()}onKeyframesResolved(e,t,r,s){var I,N;this.keyframeResolver=void 0;const{name:l,type:c,velocity:h,delay:d,isHandoff:m,onUpdate:g}=r;this.resolvedAt=bn.now(),U6(e,l,c,h)||(($i.instantAnimations||!d)&&(g==null||g(T0(e,r,t))),e[0]=e[e.length-1],Fg(r),r.repeat=0);const x={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>K6?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...r,keyframes:e},E=!m&&H6(x),k=(N=(I=x.motionValue)==null?void 0:I.owner)==null?void 0:N.current,S=E?new z6({...x,element:k}):new C0(x);S.finished.then(()=>{this.notifyFinished()}).catch(ar),this.pendingTimeline&&(this.stopTimeline=S.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=S}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),j6()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}function pE(n,e,t,r=0,s=1){const l=Array.from(n).sort((m,g)=>m.sortNodePosition(g)).indexOf(e),c=n.size,h=(c-1)*r;return typeof t=="function"?t(l,c):s===1?l*r:h-l*r}const G6=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Q6(n){const e=G6.exec(n);if(!e)return[,];const[,t,r,s]=e;return[`--${t??r}`,s]}function gE(n,e,t=1){const[r,s]=Q6(n);if(!r)return;const l=window.getComputedStyle(e).getPropertyValue(r);if(l){const c=l.trim();return V2(c)?parseFloat(c):c}return b0(s)?gE(s,e,t+1):s}const Y6={type:"spring",stiffness:500,damping:25,restSpeed:10},X6=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),J6={type:"keyframes",duration:.8},Z6={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},eL=(n,{keyframes:e})=>e.length>2?J6:jl.has(n)?n.startsWith("scale")?X6(e[1]):Y6:Z6,tL=n=>n!==null;function nL(n,{repeat:e,repeatType:t="loop"},r){const s=n.filter(tL),l=e&&t!=="loop"&&e%2===1?0:s.length-1;return s[l]}function A0(n,e){return(n==null?void 0:n[e])??(n==null?void 0:n.default)??n}function rL({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:s,repeat:l,repeatType:c,repeatDelay:h,from:d,elapsed:m,...g}){return!!Object.keys(g).length}const R0=(n,e,t,r={},s,l)=>c=>{const h=A0(r,n)||{},d=h.delay||r.delay||0;let{elapsed:m=0}=r;m=m-Li(d);const g={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...h,delay:-m,onUpdate:x=>{e.set(x),h.onUpdate&&h.onUpdate(x)},onComplete:()=>{c(),h.onComplete&&h.onComplete()},name:n,motionValue:e,element:l?void 0:s};rL(h)||Object.assign(g,eL(n,g)),g.duration&&(g.duration=Li(g.duration)),g.repeatDelay&&(g.repeatDelay=Li(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let y=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(Fg(g),g.delay===0&&(y=!0)),($i.instantAnimations||$i.skipAnimations)&&(y=!0,Fg(g),g.delay=0),g.allowFlatten=!h.type&&!h.ease,y&&!l&&e.get()!==void 0){const x=nL(g.keyframes,h);if(x!==void 0){dt.update(()=>{g.onUpdate(x),g.onComplete()});return}}return h.isSync?new C0(g):new q6(g)};function cb(n){const e=[{},{}];return n==null||n.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function P0(n,e,t,r){if(typeof e=="function"){const[s,l]=cb(r);e=e(t!==void 0?t:n.custom,s,l)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[s,l]=cb(r);e=e(t!==void 0?t:n.custom,s,l)}return e}function tl(n,e,t){const r=n.getProps();return P0(r,e,t!==void 0?t:r.custom,n)}const yE=new Set(["width","height","top","left","right","bottom",...Cl]),ub=30,iL=n=>!isNaN(parseFloat(n));class sL{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var l;const s=bn.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((l=this.events.change)==null||l.notify(this.current),this.dependents))for(const c of this.dependents)c.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=bn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=iL(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new v0);const r=this.events[e].add(t);return e==="change"?()=>{r(),dt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=bn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>ub)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,ub);return B2(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;(e=this.dependents)==null||e.clear(),(t=this.events.destroy)==null||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function hl(n,e){return new sL(n,e)}const Ug=n=>Array.isArray(n);function oL(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,hl(t))}function aL(n){return Ug(n)?n[n.length-1]||0:n}function lL(n,e){const t=tl(n,e);let{transitionEnd:r={},transition:s={},...l}=t||{};l={...l,...r};for(const c in l){const h=aL(l[c]);oL(n,c,h)}}const pn=n=>!!(n&&n.getVelocity);function cL(n){return!!(pn(n)&&n.add)}function Wg(n,e){const t=n.getValue("willChange");if(cL(t))return t.add(e);if(!t&&$i.WillChange){const r=new $i.WillChange("auto");n.addValue("willChange",r),r.add(e)}}function N0(n){return n.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const uL="framerAppearId",vE="data-"+N0(uL);function xE(n){return n.props[vE]}function dL({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function wE(n,e,{delay:t=0,transitionOverride:r,type:s}={}){let{transition:l=n.getDefaultTransition(),transitionEnd:c,...h}=e;r&&(l=r);const d=[],m=s&&n.animationState&&n.animationState.getState()[s];for(const g in h){const y=n.getValue(g,n.latestValues[g]??null),x=h[g];if(x===void 0||m&&dL(m,g))continue;const E={delay:t,...A0(l||{},g)},k=y.get();if(k!==void 0&&!y.isAnimating&&!Array.isArray(x)&&x===k&&!E.velocity)continue;let S=!1;if(window.MotionHandoffAnimation){const N=xE(n);if(N){const V=window.MotionHandoffAnimation(N,g,dt);V!==null&&(E.startTime=V,S=!0)}}Wg(n,g),y.start(R0(g,y,x,n.shouldReduceMotion&&yE.has(g)?{type:!1}:E,n,S));const I=y.animation;I&&d.push(I)}return c&&Promise.all(d).then(()=>{dt.update(()=>{c&&lL(n,c)})}),d}function $g(n,e,t={}){var d;const r=tl(n,e,t.type==="exit"?(d=n.presenceContext)==null?void 0:d.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(s=t.transitionOverride);const l=r?()=>Promise.all(wE(n,r,t)):()=>Promise.resolve(),c=n.variantChildren&&n.variantChildren.size?(m=0)=>{const{delayChildren:g=0,staggerChildren:y,staggerDirection:x}=s;return hL(n,e,m,g,y,x,t)}:()=>Promise.resolve(),{when:h}=s;if(h){const[m,g]=h==="beforeChildren"?[l,c]:[c,l];return m().then(()=>g())}else return Promise.all([l(),c(t.delay)])}function hL(n,e,t=0,r=0,s=0,l=1,c){const h=[];for(const d of n.variantChildren)d.notify("AnimationStart",e),h.push($g(d,e,{...c,delay:t+(typeof r=="function"?0:r)+pE(n.variantChildren,d,r,s,l)}).then(()=>d.notify("AnimationComplete",e)));return Promise.all(h)}function fL(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(l=>$g(n,l,t));r=Promise.all(s)}else if(typeof e=="string")r=$g(n,e,t);else{const s=typeof e=="function"?tl(n,e,t.custom):e;r=Promise.all(wE(n,s,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}const mL={test:n=>n==="auto",parse:n=>n},bE=n=>e=>e.test(n),kE=[Il,ge,oi,Es,F3,z3,mL],db=n=>kE.find(bE(n));function pL(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||O2(n):!0}const gL=new Set(["brightness","contrast","saturate","opacity"]);function yL(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(k0)||[];if(!r)return n;const s=t.replace(r,"");let l=gL.has(e)?1:0;return r!==t&&(l*=100),e+"("+l+s+")"}const vL=/\b([a-z-]*)\(.*?\)/gu,Hg={...Ks,getAnimatableNone:n=>{const e=n.match(vL);return e?e.map(yL).join(" "):n}},hb={...Il,transform:Math.round},xL={rotate:Es,rotateX:Es,rotateY:Es,rotateZ:Es,scale:rh,scaleX:rh,scaleY:rh,scaleZ:rh,skew:Es,skewX:Es,skewY:Es,distance:ge,translateX:ge,translateY:ge,translateZ:ge,x:ge,y:ge,z:ge,perspective:ge,transformPerspective:ge,opacity:ou,originX:Jw,originY:Jw,originZ:ge},M0={borderWidth:ge,borderTopWidth:ge,borderRightWidth:ge,borderBottomWidth:ge,borderLeftWidth:ge,borderRadius:ge,radius:ge,borderTopLeftRadius:ge,borderTopRightRadius:ge,borderBottomRightRadius:ge,borderBottomLeftRadius:ge,width:ge,maxWidth:ge,height:ge,maxHeight:ge,top:ge,right:ge,bottom:ge,left:ge,inset:ge,insetBlock:ge,insetBlockStart:ge,insetBlockEnd:ge,insetInline:ge,insetInlineStart:ge,insetInlineEnd:ge,padding:ge,paddingTop:ge,paddingRight:ge,paddingBottom:ge,paddingLeft:ge,paddingBlock:ge,paddingBlockStart:ge,paddingBlockEnd:ge,paddingInline:ge,paddingInlineStart:ge,paddingInlineEnd:ge,margin:ge,marginTop:ge,marginRight:ge,marginBottom:ge,marginLeft:ge,marginBlock:ge,marginBlockStart:ge,marginBlockEnd:ge,marginInline:ge,marginInlineStart:ge,marginInlineEnd:ge,backgroundPositionX:ge,backgroundPositionY:ge,...xL,zIndex:hb,fillOpacity:ou,strokeOpacity:ou,numOctaves:hb},wL={...M0,color:Lt,backgroundColor:Lt,outlineColor:Lt,fill:Lt,stroke:Lt,borderColor:Lt,borderTopColor:Lt,borderRightColor:Lt,borderBottomColor:Lt,borderLeftColor:Lt,filter:Hg,WebkitFilter:Hg},_E=n=>wL[n];function SE(n,e){let t=_E(n);return t!==Hg&&(t=Ks),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const bL=new Set(["auto","none","0"]);function kL(n,e,t){let r=0,s;for(;r<n.length&&!s;){const l=n[r];typeof l=="string"&&!bL.has(l)&&au(l).values.length&&(s=n[r]),r++}if(s&&t)for(const l of e)n[l]=SE(t,s)}class _L extends j0{constructor(e,t,r,s,l){super(e,t,r,s,l,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let g=0;g<e.length;g++){let y=e[g];if(typeof y=="string"&&(y=y.trim(),b0(y))){const x=gE(y,t.current);x!==void 0&&(e[g]=x),g===e.length-1&&(this.finalKeyframe=y)}}if(this.resolveNoneKeyframes(),!yE.has(r)||e.length!==2)return;const[s,l]=e,c=db(s),h=db(l),d=Xw(s),m=Xw(l);if(d!==m&&As[r]){this.needsMeasurement=!0;return}if(c!==h)if(ob(c)&&ob(h))for(let g=0;g<e.length;g++){const y=e[g];typeof y=="string"&&(e[g]=parseFloat(y))}else As[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||pL(e[s]))&&r.push(s);r.length&&kL(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=As[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const s=t[t.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var h;const{element:e,name:t,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(t);s&&s.jump(this.measuredOrigin,!1);const l=r.length-1,c=r[l];r[l]=As[t](e.measureViewportBox(),window.getComputedStyle(e.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),(h=this.removedTransforms)!=null&&h.length&&this.removedTransforms.forEach(([d,m])=>{e.getValue(d).set(m)}),this.resolveNoneKeyframes()}}function SL(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let r=document;const s=(t==null?void 0:t[n])??r.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n)}const EE=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function TE(n){return L2(n)&&"offsetHeight"in n}const{schedule:D0}=Y2(queueMicrotask,!1),Ir={x:!1,y:!1};function IE(){return Ir.x||Ir.y}function EL(n){return n==="x"||n==="y"?Ir[n]?null:(Ir[n]=!0,()=>{Ir[n]=!1}):Ir.x||Ir.y?null:(Ir.x=Ir.y=!0,()=>{Ir.x=Ir.y=!1})}function CE(n,e){const t=SL(n),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[t,s,()=>r.abort()]}function fb(n){return!(n.pointerType==="touch"||IE())}function TL(n,e,t={}){const[r,s,l]=CE(n,t),c=h=>{if(!fb(h))return;const{target:d}=h,m=e(d,h);if(typeof m!="function"||!d)return;const g=y=>{fb(y)&&(m(y),d.removeEventListener("pointerleave",g))};d.addEventListener("pointerleave",g,s)};return r.forEach(h=>{h.addEventListener("pointerenter",c,s)}),l}const jE=(n,e)=>e?n===e?!0:jE(n,e.parentElement):!1,V0=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,IL=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function AE(n){return IL.has(n.tagName)||n.isContentEditable===!0}const bh=new WeakSet;function mb(n){return e=>{e.key==="Enter"&&n(e)}}function Vp(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const CL=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=mb(()=>{if(bh.has(t))return;Vp(t,"down");const s=mb(()=>{Vp(t,"up")}),l=()=>Vp(t,"cancel");t.addEventListener("keyup",s,e),t.addEventListener("blur",l,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function pb(n){return V0(n)&&!IE()}function jL(n,e,t={}){const[r,s,l]=CE(n,t),c=h=>{const d=h.currentTarget;if(!pb(h))return;bh.add(d);const m=e(d,h),g=(E,k)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",x),bh.has(d)&&bh.delete(d),pb(E)&&typeof m=="function"&&m(E,{success:k})},y=E=>{g(E,d===window||d===document||t.useGlobalTarget||jE(d,E.target))},x=E=>{g(E,!1)};window.addEventListener("pointerup",y,s),window.addEventListener("pointercancel",x,s)};return r.forEach(h=>{(t.useGlobalTarget?window:h).addEventListener("pointerdown",c,s),TE(h)&&(h.addEventListener("focus",m=>CL(m,s)),!AE(h)&&!h.hasAttribute("tabindex")&&(h.tabIndex=0))}),l}function RE(n){return L2(n)&&"ownerSVGElement"in n}function AL(n){return RE(n)&&n.tagName==="svg"}const RL=[...kE,Lt,Ks],PL=n=>RL.find(bE(n)),gb=()=>({translate:0,scale:1,origin:0,originPoint:0}),$a=()=>({x:gb(),y:gb()}),yb=()=>({min:0,max:0}),Ut=()=>({x:yb(),y:yb()}),Kg={current:null},PE={current:!1},NL=typeof window<"u";function ML(){if(PE.current=!0,!!NL)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>Kg.current=n.matches;n.addEventListener("change",e),e()}else Kg.current=!1}const DL=new WeakMap;function Nf(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function lu(n){return typeof n=="string"||Array.isArray(n)}const L0=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],O0=["initial",...L0];function Mf(n){return Nf(n.animate)||O0.some(e=>lu(n[e]))}function NE(n){return!!(Mf(n)||n.variants)}function VL(n,e,t){for(const r in e){const s=e[r],l=t[r];if(pn(s))n.addValue(r,s);else if(pn(l))n.addValue(r,hl(s,{owner:n}));else if(l!==s)if(n.hasValue(r)){const c=n.getValue(r);c.liveStyle===!0?c.jump(s):c.hasAnimated||c.set(s)}else{const c=n.getStaticValue(r);n.addValue(r,hl(c!==void 0?c:s,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const vb=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let Yh={};function ME(n){Yh=n}function LL(){return Yh}class OL{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:l,visualState:c},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=j0,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=bn.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,dt.render(this.render,!1,!0))};const{latestValues:d,renderState:m}=c;this.latestValues=d,this.baseTarget={...d},this.initialValues=t.initial?{...d}:{},this.renderState=m,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=h,this.blockInitialAnimation=!!l,this.isControllingVariants=Mf(t),this.isVariantNode=NE(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...y}=this.scrapeMotionValuesFromProps(t,{},this);for(const x in y){const E=y[x];d[x]!==void 0&&pn(E)&&E.set(d[x])}}mount(e){var t;this.current=e,DL.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,s)=>this.bindToMotionValue(s,r)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(PE.current||ML(),this.shouldReduceMotion=Kg.current),(t=this.parent)==null||t.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),Hs(this.notifyUpdate),Hs(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=jl.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=t.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&dt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let l;typeof window<"u"&&window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{s(),l&&l(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Yh){const t=Yh[e];if(!t)continue;const{isEnabled:r,Feature:s}=t;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const l=this.features[e];l.isMounted?l.update():(l.mount(),l.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ut()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<vb.length;r++){const s=vb[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const l="on"+s,c=e[l];c&&(this.propEventSubscriptions[s]=this.on(s,c))}this.prevMotionValues=VL(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=hl(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(V2(r)||O2(r))?r=parseFloat(r):!PL(r)&&Ks.test(t)&&(r=SE(e,t)),this.setBaseTarget(e,pn(r)?r.get():r)),pn(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var l;const{initial:t}=this.props;let r;if(typeof t=="string"||typeof t=="object"){const c=P0(this.props,t,(l=this.presenceContext)==null?void 0:l.custom);c&&(r=c[e])}if(t&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!pn(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new v0),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){D0.render(this.render)}}class DE extends OL{constructor(){super(...arguments),this.KeyframeResolver=_L}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){const r=e.style;return r?r[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;pn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}class to{constructor(e){this.isMounted=!1,this.node=e}update(){}}function VE({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function BL({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function zL(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function Lp(n){return n===void 0||n===1}function qg({scale:n,scaleX:e,scaleY:t}){return!Lp(n)||!Lp(e)||!Lp(t)}function Po(n){return qg(n)||LE(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function LE(n){return xb(n.x)||xb(n.y)}function xb(n){return n&&n!=="0%"}function Xh(n,e,t){const r=n-t,s=e*r;return t+s}function wb(n,e,t,r,s){return s!==void 0&&(n=Xh(n,s,r)),Xh(n,t,r)+e}function Gg(n,e=0,t=1,r,s){n.min=wb(n.min,e,t,r,s),n.max=wb(n.max,e,t,r,s)}function OE(n,{x:e,y:t}){Gg(n.x,e.translate,e.scale,e.originPoint),Gg(n.y,t.translate,t.scale,t.originPoint)}const bb=.999999999999,kb=1.0000000000001;function FL(n,e,t,r=!1){const s=t.length;if(!s)return;e.x=e.y=1;let l,c;for(let h=0;h<s;h++){l=t[h],c=l.projectionDelta;const{visualElement:d}=l.options;d&&d.props.style&&d.props.style.display==="contents"||(r&&l.options.layoutScroll&&l.scroll&&l!==l.root&&Ka(n,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,OE(n,c)),r&&Po(l.latestValues)&&Ka(n,l.latestValues))}e.x<kb&&e.x>bb&&(e.x=1),e.y<kb&&e.y>bb&&(e.y=1)}function Ha(n,e){n.min=n.min+e,n.max=n.max+e}function _b(n,e,t,r,s=.5){const l=vt(n.min,n.max,s);Gg(n,e,t,l,r)}function Ka(n,e){_b(n.x,e.x,e.scaleX,e.scale,e.originX),_b(n.y,e.y,e.scaleY,e.scale,e.originY)}function BE(n,e){return VE(zL(n.getBoundingClientRect(),e))}function UL(n,e,t){const r=BE(n,t),{scroll:s}=e;return s&&(Ha(r.x,s.offset.x),Ha(r.y,s.offset.y)),r}const WL={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},$L=Cl.length;function HL(n,e,t){let r="",s=!0;for(let l=0;l<$L;l++){const c=Cl[l],h=n[c];if(h===void 0)continue;let d=!0;if(typeof h=="number"?d=h===(c.startsWith("scale")?1:0):d=parseFloat(h)===0,!d||t){const m=EE(h,M0[c]);if(!d){s=!1;const g=WL[c]||c;r+=`${g}(${m}) `}t&&(e[c]=m)}}return r=r.trim(),t?r=t(e,s?"":r):s&&(r="none"),r}function B0(n,e,t){const{style:r,vars:s,transformOrigin:l}=n;let c=!1,h=!1;for(const d in e){const m=e[d];if(jl.has(d)){c=!0;continue}else if(J2(d)){s[d]=m;continue}else{const g=EE(m,M0[d]);d.startsWith("origin")?(h=!0,l[d]=g):r[d]=g}}if(e.transform||(c||t?r.transform=HL(e,n.transform,t):r.transform&&(r.transform="none")),h){const{originX:d="50%",originY:m="50%",originZ:g=0}=l;r.transformOrigin=`${d} ${m} ${g}`}}function zE(n,{style:e,vars:t},r,s){const l=n.style;let c;for(c in e)l[c]=e[c];s==null||s.applyProjectionStyles(l,r);for(c in t)l.setProperty(c,t[c])}function Sb(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Tc={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(ge.test(n))n=parseFloat(n);else return n;const t=Sb(n,e.target.x),r=Sb(n,e.target.y);return`${t}% ${r}%`}},KL={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,s=Ks.parse(n);if(s.length>5)return r;const l=Ks.createTransformer(n),c=typeof s[0]!="number"?1:0,h=t.x.scale*e.x,d=t.y.scale*e.y;s[0+c]/=h,s[1+c]/=d;const m=vt(h,d,.5);return typeof s[2+c]=="number"&&(s[2+c]/=m),typeof s[3+c]=="number"&&(s[3+c]/=m),l(s)}},Qg={borderRadius:{...Tc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Tc,borderTopRightRadius:Tc,borderBottomLeftRadius:Tc,borderBottomRightRadius:Tc,boxShadow:KL};function FE(n,{layout:e,layoutId:t}){return jl.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Qg[n]||n==="opacity")}function z0(n,e,t){var c;const r=n.style,s=e==null?void 0:e.style,l={};if(!r)return l;for(const h in r)(pn(r[h])||s&&pn(s[h])||FE(h,n)||((c=t==null?void 0:t.getValue(h))==null?void 0:c.liveStyle)!==void 0)&&(l[h]=r[h]);return l}function qL(n){return window.getComputedStyle(n)}class GL extends DE{constructor(){super(...arguments),this.type="html",this.renderInstance=zE}readValueFromInstance(e,t){var r;if(jl.has(t))return(r=this.projection)!=null&&r.isProjecting?Vg(t):S6(e,t);{const s=qL(e),l=(J2(t)?s.getPropertyValue(t):s[t])||0;return typeof l=="string"?l.trim():l}}measureInstanceViewportBox(e,{transformPagePoint:t}){return BE(e,t)}build(e,t,r){B0(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return z0(e,t,r)}}const QL={offset:"stroke-dashoffset",array:"stroke-dasharray"},YL={offset:"strokeDashoffset",array:"strokeDasharray"};function XL(n,e,t=1,r=0,s=!0){n.pathLength=1;const l=s?QL:YL;n[l.offset]=ge.transform(-r);const c=ge.transform(e),h=ge.transform(t);n[l.array]=`${c} ${h}`}const JL=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function UE(n,{attrX:e,attrY:t,attrScale:r,pathLength:s,pathSpacing:l=1,pathOffset:c=0,...h},d,m,g){if(B0(n,h,m),d){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:y,style:x}=n;y.transform&&(x.transform=y.transform,delete y.transform),(x.transform||y.transformOrigin)&&(x.transformOrigin=y.transformOrigin??"50% 50%",delete y.transformOrigin),x.transform&&(x.transformBox=(g==null?void 0:g.transformBox)??"fill-box",delete y.transformBox);for(const E of JL)y[E]!==void 0&&(x[E]=y[E],delete y[E]);e!==void 0&&(y.x=e),t!==void 0&&(y.y=t),r!==void 0&&(y.scale=r),s!==void 0&&XL(y,s,l,c,!1)}const WE=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),$E=n=>typeof n=="string"&&n.toLowerCase()==="svg";function ZL(n,e,t,r){zE(n,e,void 0,r);for(const s in e.attrs)n.setAttribute(WE.has(s)?s:N0(s),e.attrs[s])}function HE(n,e,t){const r=z0(n,e,t);for(const s in n)if(pn(n[s])||pn(e[s])){const l=Cl.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[l]=n[s]}return r}class eO extends DE{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ut}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(jl.has(t)){const r=_E(t);return r&&r.default||0}return t=WE.has(t)?t:N0(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return HE(e,t,r)}build(e,t,r){UE(e,t,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,t,r,s){ZL(e,t,r,s)}mount(e){this.isSVGTag=$E(e.tagName),super.mount(e)}}const tO=O0.length;function KE(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?KE(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<tO;t++){const r=O0[t],s=n.props[r];(lu(s)||s===!1)&&(e[r]=s)}return e}function qE(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}const nO=[...L0].reverse(),rO=L0.length;function iO(n){return e=>Promise.all(e.map(({animation:t,options:r})=>fL(n,t,r)))}function sO(n){let e=iO(n),t=Eb(),r=!0;const s=d=>(m,g)=>{var x;const y=tl(n,g,d==="exit"?(x=n.presenceContext)==null?void 0:x.custom:void 0);if(y){const{transition:E,transitionEnd:k,...S}=y;m={...m,...S,...k}}return m};function l(d){e=d(n)}function c(d){const{props:m}=n,g=KE(n.parent)||{},y=[],x=new Set;let E={},k=1/0;for(let I=0;I<rO;I++){const N=nO[I],V=t[N],P=m[N]!==void 0?m[N]:g[N],K=lu(P),z=N===d?V.isActive:null;z===!1&&(k=I);let W=P===g[N]&&P!==m[N]&&K;if(W&&r&&n.manuallyAnimateOnMount&&(W=!1),V.protectedKeys={...E},!V.isActive&&z===null||!P&&!V.prevProp||Nf(P)||typeof P=="boolean")continue;const A=oO(V.prevProp,P);let C=A||N===d&&V.isActive&&!W&&K||I>k&&K,M=!1;const O=Array.isArray(P)?P:[P];let B=O.reduce(s(N),{});z===!1&&(B={});const{prevResolvedValues:U={}}=V,L={...U,...B},De=Ee=>{C=!0,x.has(Ee)&&(M=!0,x.delete(Ee)),V.needsAnimating[Ee]=!0;const ie=n.getValue(Ee);ie&&(ie.liveStyle=!1)};for(const Ee in L){const ie=B[Ee],me=U[Ee];if(E.hasOwnProperty(Ee))continue;let le=!1;Ug(ie)&&Ug(me)?le=!qE(ie,me):le=ie!==me,le?ie!=null?De(Ee):x.add(Ee):ie!==void 0&&x.has(Ee)?De(Ee):V.protectedKeys[Ee]=!0}V.prevProp=P,V.prevResolvedValues=B,V.isActive&&(E={...E,...B}),r&&n.blockInitialAnimation&&(C=!1);const Ke=W&&A;C&&(!Ke||M)&&y.push(...O.map(Ee=>{const ie={type:N};if(typeof Ee=="string"&&r&&!Ke&&n.manuallyAnimateOnMount&&n.parent){const{parent:me}=n,le=tl(me,Ee);if(me.enteringChildren&&le){const{delayChildren:H}=le.transition||{};ie.delay=pE(me.enteringChildren,n,H)}}return{animation:Ee,options:ie}}))}if(x.size){const I={};if(typeof m.initial!="boolean"){const N=tl(n,Array.isArray(m.initial)?m.initial[0]:m.initial);N&&N.transition&&(I.transition=N.transition)}x.forEach(N=>{const V=n.getBaseTarget(N),P=n.getValue(N);P&&(P.liveStyle=!0),I[N]=V??null}),y.push({animation:I})}let S=!!y.length;return r&&(m.initial===!1||m.initial===m.animate)&&!n.manuallyAnimateOnMount&&(S=!1),r=!1,S?e(y):Promise.resolve()}function h(d,m){var y;if(t[d].isActive===m)return Promise.resolve();(y=n.variantChildren)==null||y.forEach(x=>{var E;return(E=x.animationState)==null?void 0:E.setActive(d,m)}),t[d].isActive=m;const g=c(d);for(const x in t)t[x].protectedKeys={};return g}return{animateChanges:c,setActive:h,setAnimateFunction:l,getState:()=>t,reset:()=>{t=Eb()}}}function oO(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!qE(e,n):!1}function Ao(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Eb(){return{animate:Ao(!0),whileInView:Ao(),whileHover:Ao(),whileTap:Ao(),whileDrag:Ao(),whileFocus:Ao(),exit:Ao()}}function Tb(n,e){n.min=e.min,n.max=e.max}function Tr(n,e){Tb(n.x,e.x),Tb(n.y,e.y)}function Ib(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}const GE=1e-4,aO=1-GE,lO=1+GE,QE=.01,cO=0-QE,uO=0+QE;function kn(n){return n.max-n.min}function dO(n,e,t){return Math.abs(n-e)<=t}function Cb(n,e,t,r=.5){n.origin=r,n.originPoint=vt(e.min,e.max,n.origin),n.scale=kn(t)/kn(e),n.translate=vt(t.min,t.max,n.origin)-n.originPoint,(n.scale>=aO&&n.scale<=lO||isNaN(n.scale))&&(n.scale=1),(n.translate>=cO&&n.translate<=uO||isNaN(n.translate))&&(n.translate=0)}function $c(n,e,t,r){Cb(n.x,e.x,t.x,r?r.originX:void 0),Cb(n.y,e.y,t.y,r?r.originY:void 0)}function jb(n,e,t){n.min=t.min+e.min,n.max=n.min+kn(e)}function hO(n,e,t){jb(n.x,e.x,t.x),jb(n.y,e.y,t.y)}function Ab(n,e,t){n.min=e.min-t.min,n.max=n.min+kn(e)}function Jh(n,e,t){Ab(n.x,e.x,t.x),Ab(n.y,e.y,t.y)}function Rb(n,e,t,r,s){return n-=e,n=Xh(n,1/t,r),s!==void 0&&(n=Xh(n,1/s,r)),n}function fO(n,e=0,t=1,r=.5,s,l=n,c=n){if(oi.test(e)&&(e=parseFloat(e),e=vt(c.min,c.max,e/100)-c.min),typeof e!="number")return;let h=vt(l.min,l.max,r);n===l&&(h-=e),n.min=Rb(n.min,e,t,h,s),n.max=Rb(n.max,e,t,h,s)}function Pb(n,e,[t,r,s],l,c){fO(n,e[t],e[r],e[s],e.scale,l,c)}const mO=["x","scaleX","originX"],pO=["y","scaleY","originY"];function Nb(n,e,t,r){Pb(n.x,e,mO,t?t.x:void 0,r?r.x:void 0),Pb(n.y,e,pO,t?t.y:void 0,r?r.y:void 0)}function Mb(n){return n.translate===0&&n.scale===1}function YE(n){return Mb(n.x)&&Mb(n.y)}function Db(n,e){return n.min===e.min&&n.max===e.max}function gO(n,e){return Db(n.x,e.x)&&Db(n.y,e.y)}function Vb(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function XE(n,e){return Vb(n.x,e.x)&&Vb(n.y,e.y)}function Lb(n){return kn(n.x)/kn(n.y)}function Ob(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}function rr(n){return[n("x"),n("y")]}function yO(n,e,t){let r="";const s=n.x.translate/e.x,l=n.y.translate/e.y,c=(t==null?void 0:t.z)||0;if((s||l||c)&&(r=`translate3d(${s}px, ${l}px, ${c}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:m,rotate:g,rotateX:y,rotateY:x,skewX:E,skewY:k}=t;m&&(r=`perspective(${m}px) ${r}`),g&&(r+=`rotate(${g}deg) `),y&&(r+=`rotateX(${y}deg) `),x&&(r+=`rotateY(${x}deg) `),E&&(r+=`skewX(${E}deg) `),k&&(r+=`skewY(${k}deg) `)}const h=n.x.scale*e.x,d=n.y.scale*e.y;return(h!==1||d!==1)&&(r+=`scale(${h}, ${d})`),r||"none"}const JE=["TopLeft","TopRight","BottomLeft","BottomRight"],vO=JE.length,Bb=n=>typeof n=="string"?parseFloat(n):n,zb=n=>typeof n=="number"||ge.test(n);function xO(n,e,t,r,s,l){s?(n.opacity=vt(0,t.opacity??1,wO(r)),n.opacityExit=vt(e.opacity??1,0,bO(r))):l&&(n.opacity=vt(e.opacity??1,t.opacity??1,r));for(let c=0;c<vO;c++){const h=`border${JE[c]}Radius`;let d=Fb(e,h),m=Fb(t,h);if(d===void 0&&m===void 0)continue;d||(d=0),m||(m=0),d===0||m===0||zb(d)===zb(m)?(n[h]=Math.max(vt(Bb(d),Bb(m),r),0),(oi.test(m)||oi.test(d))&&(n[h]+="%")):n[h]=m}(e.rotate||t.rotate)&&(n.rotate=vt(e.rotate||0,t.rotate||0,r))}function Fb(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const wO=ZE(0,.5,K2),bO=ZE(.5,.95,ar);function ZE(n,e,t){return r=>r<n?0:r>e?1:t(su(n,e,r))}function kO(n,e,t){const r=pn(n)?n:hl(n);return r.start(R0("",r,e,t)),r.animation}function cu(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}const _O=(n,e)=>n.depth-e.depth;class SO{constructor(){this.children=[],this.isDirty=!1}add(e){m0(this.children,e),this.isDirty=!0}remove(e){p0(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(_O),this.isDirty=!1,this.children.forEach(e)}}function EO(n,e){const t=bn.now(),r=({timestamp:s})=>{const l=s-t;l>=e&&(Hs(r),n(l-e))};return dt.setup(r,!0),()=>Hs(r)}function kh(n){return pn(n)?n.get():n}class TO{constructor(){this.members=[]}add(e){m0(this.members,e),e.scheduleRender()}remove(e){if(p0(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(s=>e===s);if(t===0)return!1;let r;for(let s=t;s>=0;s--){const l=this.members[s];if(l.isPresent!==!1){r=l;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const _h={hasAnimatedSinceResize:!0,hasEverUpdated:!1},Op=["","X","Y","Z"],IO=1e3;let CO=0;function Bp(n,e,t,r){const{latestValues:s}=e;s[n]&&(t[n]=s[n],e.setStaticValue(n,0),r&&(r[n]=0))}function eT(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=xE(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:s,layoutId:l}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",dt,!(s||l))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&eT(r)}function tT({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(c={},h=e==null?void 0:e()){this.id=CO++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(RO),this.nodes.forEach(DO),this.nodes.forEach(VO),this.nodes.forEach(PO)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new SO)}addEventListener(c,h){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new v0),this.eventHandlers.get(c).add(h)}notifyListeners(c,...h){const d=this.eventHandlers.get(c);d&&d.notify(...h)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=RE(c)&&!AL(c),this.instance=c;const{layoutId:h,layout:d,visualElement:m}=this.options;if(m&&!m.current&&m.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||h)&&(this.isLayoutDirty=!0),n){let g,y=0;const x=()=>this.root.updateBlockedByResize=!1;dt.read(()=>{y=window.innerWidth}),n(c,()=>{const E=window.innerWidth;E!==y&&(y=E,this.root.updateBlockedByResize=!0,g&&g(),g=EO(x,250),_h.hasAnimatedSinceResize&&(_h.hasAnimatedSinceResize=!1,this.nodes.forEach($b)))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&m&&(h||d)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:y,hasRelativeLayoutChanged:x,layout:E})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const k=this.options.transition||m.getDefaultTransition()||FO,{onLayoutAnimationStart:S,onLayoutAnimationComplete:I}=m.getProps(),N=!this.targetLayout||!XE(this.targetLayout,E),V=!y&&x;if(this.options.layoutRoot||this.resumeFrom||V||y&&(N||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const P={...A0(k,"layout"),onPlay:S,onComplete:I};(m.shouldReduceMotion||this.options.layoutRoot)&&(P.delay=0,P.type=!1),this.startAnimation(P),this.setAnimationOrigin(g,V)}else y||$b(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=E})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Hs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(LO),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&eT(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const y=this.path[g];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:h,layout:d}=this.options;if(h===void 0&&!d)return;const m=this.getTransformTemplate();this.prevTransformTemplateValue=m?m(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Ub);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Wb);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(MO),this.nodes.forEach(jO),this.nodes.forEach(AO)):this.nodes.forEach(Wb),this.clearAllSnapshots();const h=bn.now();tn.delta=ci(0,1e3/60,h-tn.timestamp),tn.timestamp=h,tn.isProcessing=!0,Ap.update.process(tn),Ap.preRender.process(tn),Ap.render.process(tn),tn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,D0.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(NO),this.sharedNodes.forEach(OO)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,dt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){dt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!kn(this.snapshot.measuredBox.x)&&!kn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Ut(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(h=!1),h&&this.instance){const d=r(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:d,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!s)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!YE(this.projectionDelta),d=this.getTransformTemplate(),m=d?d(this.latestValues,""):void 0,g=m!==this.prevTransformTemplateValue;c&&this.instance&&(h||Po(this.latestValues)||g)&&(s(this.instance,m),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const h=this.measurePageBox();let d=this.removeElementScroll(h);return c&&(d=this.removeTransform(d)),UO(d),{animationId:this.root.animationId,measuredBox:h,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var m;const{visualElement:c}=this.options;if(!c)return Ut();const h=c.measureViewportBox();if(!(((m=this.scroll)==null?void 0:m.wasRoot)||this.path.some(WO))){const{scroll:g}=this.root;g&&(Ha(h.x,g.offset.x),Ha(h.y,g.offset.y))}return h}removeElementScroll(c){var d;const h=Ut();if(Tr(h,c),(d=this.scroll)!=null&&d.wasRoot)return h;for(let m=0;m<this.path.length;m++){const g=this.path[m],{scroll:y,options:x}=g;g!==this.root&&y&&x.layoutScroll&&(y.wasRoot&&Tr(h,c),Ha(h.x,y.offset.x),Ha(h.y,y.offset.y))}return h}applyTransform(c,h=!1){const d=Ut();Tr(d,c);for(let m=0;m<this.path.length;m++){const g=this.path[m];!h&&g.options.layoutScroll&&g.scroll&&g!==g.root&&Ka(d,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),Po(g.latestValues)&&Ka(d,g.latestValues)}return Po(this.latestValues)&&Ka(d,this.latestValues),d}removeTransform(c){const h=Ut();Tr(h,c);for(let d=0;d<this.path.length;d++){const m=this.path[d];if(!m.instance||!Po(m.latestValues))continue;qg(m.latestValues)&&m.updateSnapshot();const g=Ut(),y=m.measurePageBox();Tr(g,y),Nb(h,m.latestValues,m.snapshot?m.snapshot.layoutBox:void 0,g)}return Po(this.latestValues)&&Nb(h,this.latestValues),h}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==tn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){var E;const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==h;if(!(c||d&&this.isSharedProjectionDirty||this.isProjectionDirty||(E=this.parent)!=null&&E.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:y}=this.options;if(!this.layout||!(g||y))return;this.resolvedRelativeTargetAt=tn.timestamp;const x=this.getClosestProjectingParent();x&&this.linkedParentVersion!==x.layoutVersion&&!x.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(x&&x.layout?this.createRelativeTarget(x,this.layout.layoutBox,x.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ut(),this.targetWithTransforms=Ut()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),hO(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Tr(this.target,this.layout.layoutBox),OE(this.target,this.targetDelta)):Tr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?this.createRelativeTarget(x,this.target,x.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||qg(this.parent.latestValues)||LE(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(c,h,d){this.relativeParent=c,this.linkedParentVersion=c.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ut(),this.relativeTargetOrigin=Ut(),Jh(this.relativeTargetOrigin,h,d),Tr(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var k;const c=this.getLead(),h=!!this.resumingFrom||this!==c;let d=!0;if((this.isProjectionDirty||(k=this.parent)!=null&&k.isProjectionDirty)&&(d=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===tn.timestamp&&(d=!1),d)return;const{layout:m,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||g))return;Tr(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,x=this.treeScale.y;FL(this.layoutCorrected,this.treeScale,this.path,h),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=Ut());const{target:E}=c;if(!E){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Ib(this.prevProjectionDelta.x,this.projectionDelta.x),Ib(this.prevProjectionDelta.y,this.projectionDelta.y)),$c(this.projectionDelta,this.layoutCorrected,E,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==x||!Ob(this.projectionDelta.x,this.prevProjectionDelta.x)||!Ob(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",E))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){var h;if((h=this.options.visualElement)==null||h.scheduleRender(),c){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=$a(),this.projectionDelta=$a(),this.projectionDeltaWithTransform=$a()}setAnimationOrigin(c,h=!1){const d=this.snapshot,m=d?d.latestValues:{},g={...this.latestValues},y=$a();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const x=Ut(),E=d?d.source:void 0,k=this.layout?this.layout.source:void 0,S=E!==k,I=this.getStack(),N=!I||I.members.length<=1,V=!!(S&&!N&&this.options.crossfade===!0&&!this.path.some(zO));this.animationProgress=0;let P;this.mixTargetDelta=K=>{const z=K/1e3;Hb(y.x,c.x,z),Hb(y.y,c.y,z),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Jh(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),BO(this.relativeTarget,this.relativeTargetOrigin,x,z),P&&gO(this.relativeTarget,P)&&(this.isProjectionDirty=!1),P||(P=Ut()),Tr(P,this.relativeTarget)),S&&(this.animationValues=g,xO(g,m,this.latestValues,z,V,N)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=z},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){var h,d,m;this.notifyListeners("animationStart"),(h=this.currentAnimation)==null||h.stop(),(m=(d=this.resumingFrom)==null?void 0:d.currentAnimation)==null||m.stop(),this.pendingAnimation&&(Hs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=dt.update(()=>{_h.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=hl(0)),this.currentAnimation=kO(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:g=>{this.mixTargetDelta(g),c.onUpdate&&c.onUpdate(g)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(IO),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:h,target:d,layout:m,latestValues:g}=c;if(!(!h||!d||!m)){if(this!==c&&this.layout&&m&&nT(this.options.animationType,this.layout.layoutBox,m.layoutBox)){d=this.target||Ut();const y=kn(this.layout.layoutBox.x);d.x.min=c.target.x.min,d.x.max=d.x.min+y;const x=kn(this.layout.layoutBox.y);d.y.min=c.target.y.min,d.y.max=d.y.min+x}Tr(h,d),Ka(h,g),$c(this.projectionDeltaWithTransform,this.layoutCorrected,h,g)}}registerSharedNode(c,h){this.sharedNodes.has(c)||this.sharedNodes.set(c,new TO),this.sharedNodes.get(c).add(h);const m=h.options.initialPromotionConfig;h.promote({transition:m?m.transition:void 0,preserveFollowOpacity:m&&m.shouldPreserveFollowOpacity?m.shouldPreserveFollowOpacity(h):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){var h;const{layoutId:c}=this.options;return c?((h=this.getStack())==null?void 0:h.lead)||this:this}getPrevLead(){var h;const{layoutId:c}=this.options;return c?(h=this.getStack())==null?void 0:h.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:h,preserveFollowOpacity:d}={}){const m=this.getStack();m&&m.promote(this,d),c&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let h=!1;const{latestValues:d}=c;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(h=!0),!h)return;const m={};d.z&&Bp("z",c,m,this.animationValues);for(let g=0;g<Op.length;g++)Bp(`rotate${Op[g]}`,c,m,this.animationValues),Bp(`skew${Op[g]}`,c,m,this.animationValues);c.render();for(const g in m)c.setStaticValue(g,m[g]),this.animationValues&&(this.animationValues[g]=m[g]);c.scheduleRender()}applyProjectionStyles(c,h){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=kh(h==null?void 0:h.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none";return}const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=kh(h==null?void 0:h.pointerEvents)||""),this.hasProjected&&!Po(this.latestValues)&&(c.transform=d?d({},""):"none",this.hasProjected=!1);return}c.visibility="";const g=m.animationValues||m.latestValues;this.applyTransformsToTarget();let y=yO(this.projectionDeltaWithTransform,this.treeScale,g);d&&(y=d(g,y)),c.transform=y;const{x,y:E}=this.projectionDelta;c.transformOrigin=`${x.origin*100}% ${E.origin*100}% 0`,m.animationValues?c.opacity=m===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:c.opacity=m===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const k in Qg){if(g[k]===void 0)continue;const{correct:S,applyTo:I,isCSSVariable:N}=Qg[k],V=y==="none"?g[k]:S(g[k],m);if(I){const P=I.length;for(let K=0;K<P;K++)c[I[K]]=V}else N?this.options.visualElement.renderState.vars[k]=V:c[k]=V}this.options.layoutId&&(c.pointerEvents=m===this?kh(h==null?void 0:h.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>{var h;return(h=c.currentAnimation)==null?void 0:h.stop()}),this.root.nodes.forEach(Ub),this.root.sharedNodes.clear()}}}function jO(n){n.updateLayout()}function AO(n){var t;const e=((t=n.resumeFrom)==null?void 0:t.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=n.layout,{animationType:l}=n.options,c=e.source!==n.layout.source;l==="size"?rr(y=>{const x=c?e.measuredBox[y]:e.layoutBox[y],E=kn(x);x.min=r[y].min,x.max=x.min+E}):nT(l,e.layoutBox,r)&&rr(y=>{const x=c?e.measuredBox[y]:e.layoutBox[y],E=kn(r[y]);x.max=x.min+E,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[y].max=n.relativeTarget[y].min+E)});const h=$a();$c(h,r,e.layoutBox);const d=$a();c?$c(d,n.applyTransform(s,!0),e.measuredBox):$c(d,r,e.layoutBox);const m=!YE(h);let g=!1;if(!n.resumeFrom){const y=n.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:x,layout:E}=y;if(x&&E){const k=Ut();Jh(k,e.layoutBox,x.layoutBox);const S=Ut();Jh(S,r,E.layoutBox),XE(k,S)||(g=!0),y.options.layoutRoot&&(n.relativeTarget=S,n.relativeTargetOrigin=k,n.relativeParent=y)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:d,layoutDelta:h,hasLayoutChanged:m,hasRelativeLayoutChanged:g})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function RO(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function PO(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function NO(n){n.clearSnapshot()}function Ub(n){n.clearMeasurements()}function Wb(n){n.isLayoutDirty=!1}function MO(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function $b(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function DO(n){n.resolveTargetDelta()}function VO(n){n.calcProjection()}function LO(n){n.resetSkewAndRotation()}function OO(n){n.removeLeadSnapshot()}function Hb(n,e,t){n.translate=vt(e.translate,0,t),n.scale=vt(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function Kb(n,e,t,r){n.min=vt(e.min,t.min,r),n.max=vt(e.max,t.max,r)}function BO(n,e,t,r){Kb(n.x,e.x,t.x,r),Kb(n.y,e.y,t.y,r)}function zO(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const FO={duration:.45,ease:[.4,0,.1,1]},qb=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),Gb=qb("applewebkit/")&&!qb("chrome/")?Math.round:ar;function Qb(n){n.min=Gb(n.min),n.max=Gb(n.max)}function UO(n){Qb(n.x),Qb(n.y)}function nT(n,e,t){return n==="position"||n==="preserve-aspect"&&!dO(Lb(e),Lb(t),.2)}function WO(n){var e;return n!==n.root&&((e=n.scroll)==null?void 0:e.wasRoot)}const $O=tT({attachResizeListener:(n,e)=>cu(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),zp={current:void 0},rT=tT({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!zp.current){const n=new $O({});n.mount(window),n.setOptions({layoutScroll:!0}),zp.current=n}return zp.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),F0=j.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function Yb(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function HO(...n){return e=>{let t=!1;const r=n.map(s=>{const l=Yb(s,e);return!t&&typeof l=="function"&&(t=!0),l});if(t)return()=>{for(let s=0;s<r.length;s++){const l=r[s];typeof l=="function"?l():Yb(n[s],null)}}}}function KO(...n){return j.useCallback(HO(...n),n)}class qO extends j.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=t.offsetParent,s=TE(r)&&r.offsetWidth||0,l=this.props.sizeRef.current;l.height=t.offsetHeight||0,l.width=t.offsetWidth||0,l.top=t.offsetTop,l.left=t.offsetLeft,l.right=s-l.width-l.left}return null}componentDidUpdate(){}render(){return this.props.children}}function GO({children:n,isPresent:e,anchorX:t,root:r}){var g;const s=j.useId(),l=j.useRef(null),c=j.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=j.useContext(F0),d=((g=n.props)==null?void 0:g.ref)??(n==null?void 0:n.ref),m=KO(l,d);return j.useInsertionEffect(()=>{const{width:y,height:x,top:E,left:k,right:S}=c.current;if(e||!l.current||!y||!x)return;const I=t==="left"?`left: ${k}`:`right: ${S}`;l.current.dataset.motionPopId=s;const N=document.createElement("style");h&&(N.nonce=h);const V=r??document.head;return V.appendChild(N),N.sheet&&N.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${y}px !important;
            height: ${x}px !important;
            ${I}px !important;
            top: ${E}px !important;
          }
        `),()=>{V.contains(N)&&V.removeChild(N)}},[e]),a.jsx(qO,{isPresent:e,childRef:l,sizeRef:c,children:j.cloneElement(n,{ref:m})})}const QO=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:s,presenceAffectsLayout:l,mode:c,anchorX:h,root:d})=>{const m=f0(YO),g=j.useId();let y=!0,x=j.useMemo(()=>(y=!1,{id:g,initial:e,isPresent:t,custom:s,onExitComplete:E=>{m.set(E,!0);for(const k of m.values())if(!k)return;r&&r()},register:E=>(m.set(E,!1),()=>m.delete(E))}),[t,m,r]);return l&&y&&(x={...x}),j.useMemo(()=>{m.forEach((E,k)=>m.set(k,!1))},[t]),j.useEffect(()=>{!t&&!m.size&&r&&r()},[t]),c==="popLayout"&&(n=a.jsx(GO,{isPresent:t,anchorX:h,root:d,children:n})),a.jsx(Pf.Provider,{value:x,children:n})};function YO(){return new Map}function iT(n=!0){const e=j.useContext(Pf);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:s}=e,l=j.useId();j.useEffect(()=>{if(n)return s(l)},[n]);const c=j.useCallback(()=>n&&r&&r(l),[l,r,n]);return!t&&r?[!1,c]:[!0]}const ih=n=>n.key||"";function Xb(n){const e=[];return j.Children.forEach(n,t=>{j.isValidElement(t)&&e.push(t)}),e}const U0=({children:n,custom:e,initial:t=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:l="sync",propagate:c=!1,anchorX:h="left",root:d})=>{const[m,g]=iT(c),y=j.useMemo(()=>Xb(n),[n]),x=c&&!m?[]:y.map(ih),E=j.useRef(!0),k=j.useRef(y),S=f0(()=>new Map),I=j.useRef(new Set),[N,V]=j.useState(y),[P,K]=j.useState(y);D2(()=>{E.current=!1,k.current=y;for(let A=0;A<P.length;A++){const C=ih(P[A]);x.includes(C)?(S.delete(C),I.current.delete(C)):S.get(C)!==!0&&S.set(C,!1)}},[P,x.length,x.join("-")]);const z=[];if(y!==N){let A=[...y];for(let C=0;C<P.length;C++){const M=P[C],O=ih(M);x.includes(O)||(A.splice(C,0,M),z.push(M))}return l==="wait"&&z.length&&(A=z),K(Xb(A)),V(y),null}const{forceRender:W}=j.useContext(h0);return a.jsx(a.Fragment,{children:P.map(A=>{const C=ih(A),M=c&&!m?!1:y===P||x.includes(C),O=()=>{if(I.current.has(C))return;if(I.current.add(C),S.has(C))S.set(C,!0);else return;let B=!0;S.forEach(U=>{U||(B=!1)}),B&&(W==null||W(),K(k.current),c&&(g==null||g()),r&&r())};return a.jsx(QO,{isPresent:M,initial:!E.current||t?void 0:!1,custom:e,presenceAffectsLayout:s,mode:l,root:d,onExitComplete:M?void 0:O,anchorX:h,children:A},C)})})},sT=j.createContext({strict:!1}),Jb={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let Zb=!1;function XO(){if(Zb)return;const n={};for(const e in Jb)n[e]={isEnabled:t=>Jb[e].some(r=>!!t[r])};ME(n),Zb=!0}function oT(){return XO(),LL()}function JO(n){const e=oT();for(const t in n)e[t]={...e[t],...n[t]};ME(e)}const ZO=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Zh(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||ZO.has(n)}let aT=n=>!Zh(n);function e8(n){typeof n=="function"&&(aT=e=>e.startsWith("on")?!Zh(e):n(e))}try{e8(require("@emotion/is-prop-valid").default)}catch{}function t8(n,e,t){const r={};for(const s in n)s==="values"&&typeof n.values=="object"||(aT(s)||t===!0&&Zh(s)||!e&&!Zh(s)||n.draggable&&s.startsWith("onDrag"))&&(r[s]=n[s]);return r}const Df=j.createContext({});function n8(n,e){if(Mf(n)){const{initial:t,animate:r}=n;return{initial:t===!1||lu(t)?t:void 0,animate:lu(r)?r:void 0}}return n.inherit!==!1?e:{}}function r8(n){const{initial:e,animate:t}=n8(n,j.useContext(Df));return j.useMemo(()=>({initial:e,animate:t}),[ek(e),ek(t)])}function ek(n){return Array.isArray(n)?n.join(" "):n}const W0=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function lT(n,e,t){for(const r in e)!pn(e[r])&&!FE(r,t)&&(n[r]=e[r])}function i8({transformTemplate:n},e){return j.useMemo(()=>{const t=W0();return B0(t,e,n),Object.assign({},t.vars,t.style)},[e])}function s8(n,e){const t=n.style||{},r={};return lT(r,t,n),Object.assign(r,i8(n,e)),r}function o8(n,e){const t={},r=s8(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}const cT=()=>({...W0(),attrs:{}});function a8(n,e,t,r){const s=j.useMemo(()=>{const l=cT();return UE(l,e,$E(r),n.transformTemplate,n.style),{...l.attrs,style:{...l.style}}},[e]);if(n.style){const l={};lT(l,n.style,n),s.style={...l,...s.style}}return s}const l8=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function $0(n){return typeof n!="string"||n.includes("-")?!1:!!(l8.indexOf(n)>-1||/[A-Z]/u.test(n))}function c8(n,e,t,{latestValues:r},s,l=!1,c){const d=(c??$0(n)?a8:o8)(e,r,s,n),m=t8(e,typeof n=="string",l),g=n!==j.Fragment?{...m,...d,ref:t}:{},{children:y}=e,x=j.useMemo(()=>pn(y)?y.get():y,[y]);return j.createElement(n,{...g,children:x})}function u8({scrapeMotionValuesFromProps:n,createRenderState:e},t,r,s){return{latestValues:d8(t,r,s,n),renderState:e()}}function d8(n,e,t,r){const s={},l=r(n,{});for(const x in l)s[x]=kh(l[x]);let{initial:c,animate:h}=n;const d=Mf(n),m=NE(n);e&&m&&!d&&n.inherit!==!1&&(c===void 0&&(c=e.initial),h===void 0&&(h=e.animate));let g=t?t.initial===!1:!1;g=g||c===!1;const y=g?h:c;if(y&&typeof y!="boolean"&&!Nf(y)){const x=Array.isArray(y)?y:[y];for(let E=0;E<x.length;E++){const k=P0(n,x[E]);if(k){const{transitionEnd:S,transition:I,...N}=k;for(const V in N){let P=N[V];if(Array.isArray(P)){const K=g?P.length-1:0;P=P[K]}P!==null&&(s[V]=P)}for(const V in S)s[V]=S[V]}}}return s}const uT=n=>(e,t)=>{const r=j.useContext(Df),s=j.useContext(Pf),l=()=>u8(n,e,r,s);return t?l():f0(l)},h8=uT({scrapeMotionValuesFromProps:z0,createRenderState:W0}),f8=uT({scrapeMotionValuesFromProps:HE,createRenderState:cT}),m8=Symbol.for("motionComponentSymbol");function p8(n,e,t){const r=j.useRef(t);j.useInsertionEffect(()=>{r.current=t});const s=j.useRef(null);return j.useCallback(l=>{var h;l&&((h=n.onMount)==null||h.call(n,l)),e&&(l?e.mount(l):e.unmount());const c=r.current;if(typeof c=="function")if(l){const d=c(l);typeof d=="function"&&(s.current=d)}else s.current?(s.current(),s.current=null):c(l);else c&&(c.current=l)},[e])}const dT=j.createContext({});function Dc(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function g8(n,e,t,r,s,l){var I,N;const{visualElement:c}=j.useContext(Df),h=j.useContext(sT),d=j.useContext(Pf),m=j.useContext(F0).reducedMotion,g=j.useRef(null);r=r||h.renderer,!g.current&&r&&(g.current=r(n,{visualState:e,parent:c,props:t,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:m,isSVG:l}));const y=g.current,x=j.useContext(dT);y&&!y.projection&&s&&(y.type==="html"||y.type==="svg")&&y8(g.current,t,s,x);const E=j.useRef(!1);j.useInsertionEffect(()=>{y&&E.current&&y.update(t,d)});const k=t[vE],S=j.useRef(!!k&&!((I=window.MotionHandoffIsComplete)!=null&&I.call(window,k))&&((N=window.MotionHasOptimisedAnimation)==null?void 0:N.call(window,k)));return D2(()=>{y&&(E.current=!0,window.MotionIsMounted=!0,y.updateFeatures(),y.scheduleRenderMicrotask(),S.current&&y.animationState&&y.animationState.animateChanges())}),j.useEffect(()=>{y&&(!S.current&&y.animationState&&y.animationState.animateChanges(),S.current&&(queueMicrotask(()=>{var V;(V=window.MotionHandoffMarkAsComplete)==null||V.call(window,k)}),S.current=!1),y.enteringChildren=void 0)}),y}function y8(n,e,t,r){const{layoutId:s,layout:l,drag:c,dragConstraints:h,layoutScroll:d,layoutRoot:m,layoutCrossfade:g}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:hT(n.parent)),n.projection.setOptions({layoutId:s,layout:l,alwaysMeasureLayout:!!c||h&&Dc(h),visualElement:n,animationType:typeof l=="string"?l:"both",initialPromotionConfig:r,crossfade:g,layoutScroll:d,layoutRoot:m})}function hT(n){if(n)return n.options.allowProjection!==!1?n.projection:hT(n.parent)}function Fp(n,{forwardMotionProps:e=!1,type:t}={},r,s){r&&JO(r);const l=t?t==="svg":$0(n),c=l?f8:h8;function h(m,g){let y;const x={...j.useContext(F0),...m,layoutId:v8(m)},{isStatic:E}=x,k=r8(m),S=c(m,E);if(!E&&M2){x8();const I=w8(x);y=I.MeasureLayout,k.visualElement=g8(n,S,x,s,I.ProjectionNode,l)}return a.jsxs(Df.Provider,{value:k,children:[y&&k.visualElement?a.jsx(y,{visualElement:k.visualElement,...x}):null,c8(n,m,p8(S,k.visualElement,g),S,E,e,l)]})}h.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const d=j.forwardRef(h);return d[m8]=n,d}function v8({layoutId:n}){const e=j.useContext(h0).id;return e&&n!==void 0?e+"-"+n:n}function x8(n,e){j.useContext(sT).strict}function w8(n){const e=oT(),{drag:t,layout:r}=e;if(!t&&!r)return{};const s={...t,...r};return{MeasureLayout:t!=null&&t.isEnabled(n)||r!=null&&r.isEnabled(n)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function b8(n,e){if(typeof Proxy>"u")return Fp;const t=new Map,r=(l,c)=>Fp(l,c,n,e),s=(l,c)=>r(l,c);return new Proxy(s,{get:(l,c)=>c==="create"?r:(t.has(c)||t.set(c,Fp(c,void 0,n,e)),t.get(c))})}const k8=(n,e)=>e.isSVG??$0(n)?new eO(e):new GL(e,{allowProjection:n!==j.Fragment});class _8 extends to{constructor(e){super(e),e.animationState||(e.animationState=sO(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Nf(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let S8=0;class E8 extends to{constructor(){super(...arguments),this.id=S8++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);t&&!e&&s.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const T8={animation:{Feature:_8},exit:{Feature:E8}};function Cu(n){return{point:{x:n.pageX,y:n.pageY}}}const I8=n=>e=>V0(e)&&n(e,Cu(e));function Hc(n,e,t,r){return cu(n,e,I8(t),r)}const fT=({current:n})=>n?n.ownerDocument.defaultView:null,tk=(n,e)=>Math.abs(n-e);function C8(n,e){const t=tk(n.x,e.x),r=tk(n.y,e.y);return Math.sqrt(t**2+r**2)}const nk=new Set(["auto","scroll"]);class mT{constructor(e,t,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:l=!1,distanceThreshold:c=3,element:h}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=E=>{this.handleScroll(E.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=Wp(this.lastMoveEventInfo,this.history),k=this.startEvent!==null,S=C8(E.offset,{x:0,y:0})>=this.distanceThreshold;if(!k&&!S)return;const{point:I}=E,{timestamp:N}=tn;this.history.push({...I,timestamp:N});const{onStart:V,onMove:P}=this.handlers;k||(V&&V(this.lastMoveEvent,E),this.startEvent=this.lastMoveEvent),P&&P(this.lastMoveEvent,E)},this.handlePointerMove=(E,k)=>{this.lastMoveEvent=E,this.lastMoveEventInfo=Up(k,this.transformPagePoint),dt.update(this.updatePoint,!0)},this.handlePointerUp=(E,k)=>{this.end();const{onEnd:S,onSessionEnd:I,resumeAnimation:N}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&N&&N(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const V=Wp(E.type==="pointercancel"?this.lastMoveEventInfo:Up(k,this.transformPagePoint),this.history);this.startEvent&&S&&S(E,V),I&&I(E,V)},!V0(e))return;this.dragSnapToOrigin=l,this.handlers=t,this.transformPagePoint=r,this.distanceThreshold=c,this.contextWindow=s||window;const d=Cu(e),m=Up(d,this.transformPagePoint),{point:g}=m,{timestamp:y}=tn;this.history=[{...g,timestamp:y}];const{onSessionStart:x}=t;x&&x(e,Wp(m,this.history)),this.removeListeners=Eu(Hc(this.contextWindow,"pointermove",this.handlePointerMove),Hc(this.contextWindow,"pointerup",this.handlePointerUp),Hc(this.contextWindow,"pointercancel",this.handlePointerUp)),h&&this.startScrollTracking(h)}startScrollTracking(e){let t=e.parentElement;for(;t;){const r=getComputedStyle(t);(nk.has(r.overflowX)||nk.has(r.overflowY))&&this.scrollPositions.set(t,{x:t.scrollLeft,y:t.scrollTop}),t=t.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const t=this.scrollPositions.get(e);if(!t)return;const r=e===window,s=r?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},l={x:s.x-t.x,y:s.y-t.y};l.x===0&&l.y===0||(r?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=l.x,this.lastMoveEventInfo.point.y+=l.y):this.history.length>0&&(this.history[0].x-=l.x,this.history[0].y-=l.y),this.scrollPositions.set(e,s),dt.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),Hs(this.updatePoint)}}function Up(n,e){return e?{point:e(n.point)}:n}function rk(n,e){return{x:n.x-e.x,y:n.y-e.y}}function Wp({point:n},e){return{point:n,delta:rk(n,pT(e)),offset:rk(n,j8(e)),velocity:A8(e,.1)}}function j8(n){return n[0]}function pT(n){return n[n.length-1]}function A8(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const s=pT(n);for(;t>=0&&(r=n[t],!(s.timestamp-r.timestamp>Li(e)));)t--;if(!r)return{x:0,y:0};const l=sr(s.timestamp-r.timestamp);if(l===0)return{x:0,y:0};const c={x:(s.x-r.x)/l,y:(s.y-r.y)/l};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function R8(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?vt(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?vt(t,n,r.max):Math.min(n,t)),n}function ik(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function P8(n,{top:e,left:t,bottom:r,right:s}){return{x:ik(n.x,t,s),y:ik(n.y,e,r)}}function sk(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function N8(n,e){return{x:sk(n.x,e.x),y:sk(n.y,e.y)}}function M8(n,e){let t=.5;const r=kn(n),s=kn(e);return s>r?t=su(e.min,e.max-r,n.min):r>s&&(t=su(n.min,n.max-s,e.min)),ci(0,1,t)}function D8(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const Yg=.35;function V8(n=Yg){return n===!1?n=0:n===!0&&(n=Yg),{x:ok(n,"left","right"),y:ok(n,"top","bottom")}}function ok(n,e,t){return{min:ak(n,e),max:ak(n,t)}}function ak(n,e){return typeof n=="number"?n:n[e]||0}const L8=new WeakMap;class O8{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ut(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const l=y=>{t?(this.stopAnimation(),this.snapToCursor(Cu(y).point)):this.pauseAnimation()},c=(y,x)=>{this.stopAnimation();const{drag:E,dragPropagation:k,onDragStart:S}=this.getProps();if(E&&!k&&(this.openDragLock&&this.openDragLock(),this.openDragLock=EL(E),!this.openDragLock))return;this.latestPointerEvent=y,this.latestPanInfo=x,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),rr(N=>{let V=this.getAxisMotionValue(N).get()||0;if(oi.test(V)){const{projection:P}=this.visualElement;if(P&&P.layout){const K=P.layout.layoutBox[N];K&&(V=kn(K)*(parseFloat(V)/100))}}this.originPoint[N]=V}),S&&dt.postRender(()=>S(y,x)),Wg(this.visualElement,"transform");const{animationState:I}=this.visualElement;I&&I.setActive("whileDrag",!0)},h=(y,x)=>{this.latestPointerEvent=y,this.latestPanInfo=x;const{dragPropagation:E,dragDirectionLock:k,onDirectionLock:S,onDrag:I}=this.getProps();if(!E&&!this.openDragLock)return;const{offset:N}=x;if(k&&this.currentDirection===null){this.currentDirection=B8(N),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",x.point,N),this.updateAxis("y",x.point,N),this.visualElement.render(),I&&I(y,x)},d=(y,x)=>{this.latestPointerEvent=y,this.latestPanInfo=x,this.stop(y,x),this.latestPointerEvent=null,this.latestPanInfo=null},m=()=>rr(y=>{var x;return this.getAnimationState(y)==="paused"&&((x=this.getAxisMotionValue(y).animation)==null?void 0:x.play())}),{dragSnapToOrigin:g}=this.getProps();this.panSession=new mT(e,{onSessionStart:l,onStart:c,onMove:h,onSessionEnd:d,resumeAnimation:m},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,distanceThreshold:r,contextWindow:fT(this.visualElement),element:this.visualElement.current})}stop(e,t){const r=e||this.latestPointerEvent,s=t||this.latestPanInfo,l=this.isDragging;if(this.cancel(),!l||!s||!r)return;const{velocity:c}=s;this.startAnimation(c);const{onDragEnd:h}=this.getProps();h&&dt.postRender(()=>h(r,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:s}=this.getProps();if(!r||!sh(e,s,this.currentDirection))return;const l=this.getAxisMotionValue(e);let c=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(c=R8(c,this.constraints[e],this.elastic[e])),l.set(c)}resolveConstraints(){var l;const{dragConstraints:e,dragElastic:t}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(l=this.visualElement.projection)==null?void 0:l.layout,s=this.constraints;e&&Dc(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=P8(r.layoutBox,e):this.constraints=!1,this.elastic=V8(t),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&rr(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=D8(r.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Dc(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const l=UL(r,s.root,this.visualElement.getTransformPagePoint());let c=N8(s.layout.layoutBox,l);if(t){const h=t(BL(c));this.hasMutatedConstraints=!!h,h&&(c=VE(h))}return c}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:s,dragTransition:l,dragSnapToOrigin:c,onDragTransitionEnd:h}=this.getProps(),d=this.constraints||{},m=rr(g=>{if(!sh(g,t,this.currentDirection))return;let y=d&&d[g]||{};c&&(y={min:0,max:0});const x=s?200:1e6,E=s?40:1e7,k={type:"inertia",velocity:r?e[g]:0,bounceStiffness:x,bounceDamping:E,timeConstant:750,restDelta:1,restSpeed:10,...l,...y};return this.startAxisValueAnimation(g,k)});return Promise.all(m).then(h)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return Wg(this.visualElement,e),r.start(R0(e,r,0,t,this.visualElement,!1))}stopAnimation(){rr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){rr(e=>{var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[t];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){rr(t=>{const{drag:r}=this.getProps();if(!sh(t,r,this.currentDirection))return;const{projection:s}=this.visualElement,l=this.getAxisMotionValue(t);if(s&&s.layout){const{min:c,max:h}=s.layout.layoutBox[t],d=l.get()||0;l.set(e[t]-vt(c,h,.5)+d)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!Dc(t)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};rr(c=>{const h=this.getAxisMotionValue(c);if(h&&this.constraints!==!1){const d=h.get();s[c]=M8({min:d,max:d},this.constraints[c])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),rr(c=>{if(!sh(c,e,null))return;const h=this.getAxisMotionValue(c),{min:d,max:m}=this.constraints[c];h.set(vt(d,m,s[c]))})}addListeners(){if(!this.visualElement.current)return;L8.set(this.visualElement,this);const e=this.visualElement.current,t=Hc(e,"pointerdown",d=>{const{drag:m,dragListener:g=!0}=this.getProps();m&&g&&!AE(d.target)&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();Dc(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,l=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),dt.read(r);const c=cu(window,"resize",()=>this.scalePositionWithinConstraints()),h=s.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:m})=>{this.isDragging&&m&&(rr(g=>{const y=this.getAxisMotionValue(g);y&&(this.originPoint[g]+=d[g].translate,y.set(y.get()+d[g].translate))}),this.visualElement.render())}));return()=>{c(),t(),l(),h&&h()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:l=!1,dragElastic:c=Yg,dragMomentum:h=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:s,dragConstraints:l,dragElastic:c,dragMomentum:h}}}function sh(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function B8(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class z8 extends to{constructor(e){super(e),this.removeGroupControls=ar,this.removeListeners=ar,this.controls=new O8(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ar}update(){const{dragControls:e}=this.node.getProps(),{dragControls:t}=this.node.prevProps||{};e!==t&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners()}}const lk=n=>(e,t)=>{n&&dt.postRender(()=>n(e,t))};class F8 extends to{constructor(){super(...arguments),this.removePointerDownListener=ar}onPointerDown(e){this.session=new mT(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:fT(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:lk(e),onStart:lk(t),onMove:r,onEnd:(l,c)=>{delete this.session,s&&dt.postRender(()=>s(l,c))}}}mount(){this.removePointerDownListener=Hc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let $p=!1;class U8 extends j.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:s}=this.props,{projection:l}=e;l&&(t.group&&t.group.add(l),r&&r.register&&s&&r.register(l),$p&&l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),_h.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:s,isPresent:l}=this.props,{projection:c}=r;return c&&(c.isPresent=l,$p=!0,s||e.layoutDependency!==t||t===void 0||e.isPresent!==l?c.willUpdate():this.safeToRemove(),e.isPresent!==l&&(l?c.promote():c.relegate()||dt.postRender(()=>{const h=c.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),D0.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:s}=e;$p=!0,s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function gT(n){const[e,t]=iT(),r=j.useContext(h0);return a.jsx(U8,{...n,layoutGroup:r,switchLayoutGroup:j.useContext(dT),isPresent:e,safeToRemove:t})}const W8={pan:{Feature:F8},drag:{Feature:z8,ProjectionNode:rT,MeasureLayout:gT}};function ck(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const s="onHover"+t,l=r[s];l&&dt.postRender(()=>l(e,Cu(e)))}class $8 extends to{mount(){const{current:e}=this.node;e&&(this.unmount=TL(e,(t,r)=>(ck(this.node,r,"Start"),s=>ck(this.node,s,"End"))))}unmount(){}}class H8 extends to{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Eu(cu(this.node.current,"focus",()=>this.onFocus()),cu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function uk(n,e,t){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const s="onTap"+(t==="End"?"":t),l=r[s];l&&dt.postRender(()=>l(e,Cu(e)))}class K8 extends to{mount(){const{current:e}=this.node;e&&(this.unmount=jL(e,(t,r)=>(uk(this.node,r,"Start"),(s,{success:l})=>uk(this.node,s,l?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Xg=new WeakMap,Hp=new WeakMap,q8=n=>{const e=Xg.get(n.target);e&&e(n)},G8=n=>{n.forEach(q8)};function Q8({root:n,...e}){const t=n||document;Hp.has(t)||Hp.set(t,{});const r=Hp.get(t),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(G8,{root:n,...e})),r[s]}function Y8(n,e,t){const r=Q8(e);return Xg.set(n,t),r.observe(n),()=>{Xg.delete(n),r.unobserve(n)}}const X8={some:0,all:1};class J8 extends to{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:s="some",once:l}=e,c={root:t?t.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:X8[s]},h=d=>{const{isIntersecting:m}=d;if(this.isInView===m||(this.isInView=m,l&&!m&&this.hasEnteredView))return;m&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",m);const{onViewportEnter:g,onViewportLeave:y}=this.node.getProps(),x=m?g:y;x&&x(d)};return Y8(this.node.current,c,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(Z8(e,t))&&this.startObserver()}unmount(){}}function Z8({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const e9={inView:{Feature:J8},tap:{Feature:K8},focus:{Feature:H8},hover:{Feature:$8}},t9={layout:{ProjectionNode:rT,MeasureLayout:gT}},n9={...T8,...e9,...W8,...t9},de=b8(n9,k8);function Nn(){var k;const n=mr(),e=qs(),{user:t,profile:r,isAuthenticated:s,isAdmin:l,isBusiness:c}=Vr(),[h,d]=j.useState(!1),[m,g]=j.useState(!1),y=[{to:"/",label:"Home"},{to:"/map",label:"Village Map"},{to:"/demo",label:"See Demo"},{to:"/about",label:"How It Works"},{to:"/businesses",label:"For Businesses"}],x=async()=>{await y2(),g(!1),e("/")},E=S=>n.pathname===S;return a.jsxs("header",{style:{background:"var(--kb-white)",borderBottom:"1px solid var(--kb-gray-200)",position:"sticky",top:0,zIndex:100},children:[a.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 1rem",display:"flex",alignItems:"center",justifyContent:"space-between",height:"70px"},children:[a.jsxs(ue,{to:s?"/map":"/",style:{display:"flex",alignItems:"center",gap:"0.5rem",textDecoration:"none"},children:[a.jsx("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, var(--kb-navy) 0%, var(--kb-navy-light) 100%)",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--kb-gold)",fontFamily:"var(--font-display)",fontWeight:"700",fontSize:"1.2rem"},children:"K"}),a.jsxs("div",{children:[a.jsx("div",{style:{fontFamily:"var(--font-display)",fontWeight:"600",color:"var(--kb-navy)",fontSize:"1.1rem",lineHeight:1.1},children:"Kinderbucks"}),a.jsx("div",{style:{fontSize:"0.65rem",color:"var(--kb-gray-500)",textTransform:"uppercase",letterSpacing:"0.1em"},children:"Village Currency"})]})]}),a.jsx("nav",{style:{display:"flex",alignItems:"center",gap:"2rem"},className:"desktop-nav",children:y.map(S=>a.jsx(ue,{to:S.to,style:{color:E(S.to)?"var(--kb-navy)":"var(--kb-gray-500)",fontWeight:E(S.to)?"600":"500",fontSize:"0.95rem",transition:"color 0.2s",borderBottom:E(S.to)?"2px solid var(--kb-gold)":"2px solid transparent",paddingBottom:"4px"},children:S.label},S.to))}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},className:"desktop-nav",children:[s?a.jsx(a.Fragment,{children:a.jsxs("div",{style:{position:"relative"},children:[a.jsxs("button",{onClick:()=>g(!m),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"var(--kb-gray-100)",border:"none",borderRadius:"8px",cursor:"pointer",color:"var(--kb-navy)",fontWeight:"500"},children:[a.jsx(el,{size:18}),(r==null?void 0:r.displayName)||((k=t.email)==null?void 0:k.split("@")[0])]}),m&&a.jsxs("div",{style:{position:"absolute",right:0,top:"100%",marginTop:"0.5rem",background:"white",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",minWidth:"180px",zIndex:200,overflow:"hidden"},children:[a.jsxs(ue,{to:"/card",onClick:()=>g(!1),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",color:"var(--kb-gold-dark)",textDecoration:"none",borderBottom:"1px solid var(--kb-gray-100)",fontWeight:"600",background:"rgba(201, 162, 39, 0.1)"},children:[a.jsx(Ig,{size:16})," My OK Card"]}),a.jsxs(ue,{to:"/profile",onClick:()=>g(!1),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",color:"var(--kb-gray-700)",textDecoration:"none",borderBottom:"1px solid var(--kb-gray-100)"},children:[a.jsx(el,{size:16})," My Profile"]}),c&&a.jsxs(ue,{to:"/business/dashboard",onClick:()=>g(!1),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",color:"#2563eb",textDecoration:"none",borderBottom:"1px solid var(--kb-gray-100)"},children:[a.jsx(St,{size:16})," Business Dashboard"]}),l&&a.jsxs(ue,{to:"/admin/dashboard",onClick:()=>g(!1),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",color:"#dc2626",textDecoration:"none",borderBottom:"1px solid var(--kb-gray-100)"},children:[a.jsx(Hh,{size:16})," Admin Portal"]}),a.jsxs("button",{onClick:x,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",color:"var(--kb-gray-600)",background:"none",border:"none",cursor:"pointer",width:"100%",textAlign:"left"},children:[a.jsx(Cg,{size:16})," Sign Out"]})]})]})}):a.jsx(a.Fragment,{children:a.jsxs(ue,{to:"/login",className:"btn btn-secondary",style:{padding:"0.5rem 1rem",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(dl,{size:16})," Sign In"]})}),a.jsx(ue,{to:"/exchange",className:"btn btn-gold",style:{padding:"0.5rem 1rem",fontSize:"0.9rem"},children:"Get Kinderbucks"})]}),a.jsx("button",{onClick:()=>d(!h),className:"mobile-menu-btn",style:{display:"none",background:"none",border:"none",padding:"0.5rem",cursor:"pointer"},children:a.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:h?a.jsx("path",{d:"M6 6l12 12M6 18L18 6"}):a.jsx("path",{d:"M3 12h18M3 6h18M3 18h18"})})})]}),h&&a.jsxs("div",{className:"mobile-menu",style:{background:"var(--kb-white)",borderTop:"1px solid var(--kb-gray-200)",padding:"1rem"},children:[y.map(S=>a.jsx(ue,{to:S.to,onClick:()=>d(!1),style:{display:"block",padding:"0.75rem 0",color:E(S.to)?"var(--kb-navy)":"var(--kb-gray-700)",fontWeight:E(S.to)?"600":"400",borderBottom:"1px solid var(--kb-gray-100)"},children:S.label},S.to)),a.jsxs("div",{style:{marginTop:"1rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:[s?a.jsxs(a.Fragment,{children:[a.jsxs("div",{style:{padding:"0.75rem",background:"var(--kb-gray-50)",borderRadius:"8px",marginBottom:"0.5rem"},children:[a.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:(r==null?void 0:r.displayName)||t.email}),a.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:(r==null?void 0:r.role)||"member"})]}),a.jsxs(ue,{to:"/profile",onClick:()=>d(!1),className:"btn btn-secondary",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[a.jsx(el,{size:16})," My Profile"]}),c&&a.jsxs(ue,{to:"/business/dashboard",onClick:()=>d(!1),className:"btn",style:{background:"#2563eb",color:"white",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[a.jsx(St,{size:16})," Business Dashboard"]}),l&&a.jsxs(ue,{to:"/admin/dashboard",onClick:()=>d(!1),className:"btn",style:{background:"#dc2626",color:"white",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[a.jsx(Hh,{size:16})," Admin Portal"]}),a.jsxs("button",{onClick:()=>{x(),d(!1)},className:"btn btn-secondary",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[a.jsx(Cg,{size:16})," Sign Out"]})]}):a.jsxs(ue,{to:"/login",onClick:()=>d(!1),className:"btn btn-secondary",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[a.jsx(dl,{size:16})," Sign In"]}),a.jsx(ue,{to:"/exchange",onClick:()=>d(!1),className:"btn btn-gold",children:"Get Kinderbucks"})]})]}),a.jsx("style",{children:`
        @media (max-width: 768px) {
          .desktop-nav {
            display: none !important;
          }
          .mobile-menu-btn {
            display: block !important;
          }
        }
      `})]})}function Mn(){return a.jsxs("footer",{style:{background:"var(--kb-navy)",color:"var(--kb-white)",padding:"3rem 1rem 2rem",marginTop:"auto"},children:[a.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"2rem"},children:[a.jsxs("div",{children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[a.jsx("div",{style:{width:"36px",height:"36px",background:"var(--kb-gold)",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--kb-navy)",fontFamily:"var(--font-display)",fontWeight:"700"},children:"K"}),a.jsx("span",{style:{fontFamily:"var(--font-display)",fontWeight:"600",fontSize:"1.1rem"},children:"Kinderbucks"})]}),a.jsx("p",{style:{color:"var(--kb-gray-300)",fontSize:"0.9rem",lineHeight:1.6},children:"Village of Kinderhook's local currency program. Supporting local businesses, strengthening community."}),a.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.8rem",marginTop:"1rem"},children:"Est. 2026"})]}),a.jsxs("div",{children:[a.jsx("h4",{style:{color:"var(--kb-gold)",marginBottom:"1rem",fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Quick Links"}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[a.jsx(ue,{to:"/demo",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"See Demo"}),a.jsx(ue,{to:"/about",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"How It Works"}),a.jsx(ue,{to:"/benefits",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"Member Benefits"}),a.jsx(ue,{to:"/exchange",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"Get Kinderbucks"}),a.jsx(ue,{to:"/businesses",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"For Businesses"})]})]}),a.jsxs("div",{children:[a.jsx("h4",{style:{color:"var(--kb-gold)",marginBottom:"1rem",fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"For Members"}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[a.jsx(ue,{to:"/account",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"My Account"}),a.jsx(ue,{to:"/profile",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"Kinderhooker Profile"}),a.jsx(ue,{to:"/scan/KB-0001",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"Verify Currency"})]})]}),a.jsxs("div",{children:[a.jsx("h4",{style:{color:"var(--kb-gold)",marginBottom:"1rem",fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Contact"}),a.jsxs("p",{style:{color:"var(--kb-gray-300)",fontSize:"0.9rem",lineHeight:1.8},children:["Village of Kinderhook",a.jsx("br",{}),"Columbia County, NY"]})]})]}),a.jsxs("div",{style:{maxWidth:"1200px",margin:"2rem auto 0",paddingTop:"2rem",borderTop:"1px solid var(--kb-navy-light)",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"1rem"},children:[a.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.8rem"},children:" 2026 Kinderbucks. A Harmonic Systems project."}),a.jsx("div",{style:{display:"flex",gap:"1.5rem"},children:a.jsx(ue,{to:"/admin/dashboard",style:{color:"var(--kb-gray-500)",fontSize:"0.8rem"},children:"Admin"})})]})]})}function r9(){const{isAuthenticated:n,loading:e}=Vr(),t=qs();return j.useEffect(()=>{!e&&n&&t("/card",{replace:!0})},[n,e,t]),e?null:a.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[a.jsx(Nn,{}),a.jsx("section",{style:{background:"linear-gradient(135deg, var(--kb-navy) 0%, var(--kb-navy-light) 100%)",color:"var(--kb-white)",padding:"4rem 1rem",textAlign:"center"},children:a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},style:{maxWidth:"800px",margin:"0 auto"},children:[a.jsx("div",{style:{display:"inline-block",background:"rgba(201, 162, 39, 0.2)",color:"var(--kb-gold)",padding:"0.5rem 1rem",borderRadius:"100px",fontSize:"0.85rem",fontWeight:"600",marginBottom:"1.5rem"},children:"Village of Kinderhook  Est. 2026"}),a.jsxs("h1",{style:{fontFamily:"var(--font-display)",fontSize:"clamp(2.5rem, 5vw, 3.5rem)",fontWeight:"700",marginBottom:"1.5rem",lineHeight:1.2},children:["Strengthen Our Village,",a.jsx("br",{}),a.jsx("span",{style:{color:"var(--kb-gold)"},children:"One Kinderbuck at a Time"})]}),a.jsx("p",{style:{fontSize:"1.2rem",color:"var(--kb-gray-300)",marginBottom:"2rem",maxWidth:"600px",margin:"0 auto 2rem"},children:"A local currency program that keeps money circulating in Kinderhook, rewards loyal customers, and strengthens our community economy."}),a.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[a.jsx(ue,{to:"/exchange",className:"btn btn-gold",style:{padding:"1rem 2rem",fontSize:"1.1rem"},children:"Get Kinderbucks"}),a.jsx(ue,{to:"/demo",className:"btn btn-outline",style:{padding:"1rem 2rem",fontSize:"1.1rem",borderColor:"var(--kb-white)",color:"var(--kb-white)"},children:"See Demo"})]})]})}),a.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:a.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[a.jsxs("div",{style:{textAlign:"center",marginBottom:"3rem"},children:[a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"How Kinderbucks Works"}),a.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"Simple steps to start supporting local"})]}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"2rem"},children:[{step:"1",title:"Exchange",description:"Convert USD to Kinderbucks at participating locations or online. Members get bonus rates!",Icon:Af},{step:"2",title:"Spend Local",description:"Use Kinderbucks at any of our 19+ participating village businesses.",Icon:St},{step:"3",title:"Check In",description:"Scan QR codes when you visit to build your Kinderhooker status and unlock rewards.",Icon:Rr},{step:"4",title:"Earn More",description:"Higher tiers mean better exchange rates. Village Patrons get 25% bonus!",Icon:$s}].map((r,s)=>a.jsxs(de.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:s*.1},viewport:{once:!0},className:"card",style:{textAlign:"center"},children:[a.jsx("div",{style:{width:"60px",height:"60px",background:"var(--kb-navy)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:a.jsx(r.Icon,{size:28,color:"var(--kb-gold)",strokeWidth:1.5})}),a.jsxs("div",{style:{color:"var(--kb-gold)",fontSize:"0.8rem",fontWeight:"600",marginBottom:"0.25rem"},children:["STEP ",r.step]}),a.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:r.title}),a.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.95rem"},children:r.description})]},s))})]})}),a.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:a.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[a.jsxs("div",{style:{textAlign:"center",marginBottom:"3rem"},children:[a.jsx("div",{className:"badge badge-gold",style:{marginBottom:"1rem"},children:"OK Membership"}),a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"Become a Kinderhooker"}),a.jsx("p",{style:{color:"var(--kb-gray-500)",maxWidth:"600px",margin:"0 auto"},children:"Visit local businesses to level up your membership and unlock better exchange rates"})]}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"1.5rem"},children:[{name:"Curious",businesses:"1+",bonus:"10%",color:"#888888",Icon:on},{name:"Hooked",businesses:"5+",bonus:"15%",color:"#2e7d32",Icon:fr},{name:"Line & Sinker",businesses:"10+",bonus:"20%",color:"#1565c0",Icon:hr},{name:"Village Patron",businesses:"15+",bonus:"25%",color:"#c9a227",Icon:Gn,featured:!0}].map((r,s)=>a.jsxs(de.div,{initial:{opacity:0,scale:.95},whileInView:{opacity:1,scale:1},transition:{delay:s*.1},viewport:{once:!0},className:"card",style:{textAlign:"center",border:r.featured?"2px solid var(--kb-gold)":void 0,position:"relative",overflow:"hidden"},children:[r.featured&&a.jsx("div",{style:{position:"absolute",top:"10px",right:"-30px",background:"var(--kb-gold)",color:"var(--kb-navy)",padding:"0.25rem 2rem",fontSize:"0.7rem",fontWeight:"600",transform:"rotate(45deg)"},children:"BEST"}),a.jsx("div",{style:{width:"50px",height:"50px",background:`${r.color}15`,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 0.75rem"},children:a.jsx(r.Icon,{size:24,color:r.color,strokeWidth:1.5})}),a.jsx("h3",{style:{color:r.color,marginBottom:"0.5rem"},children:r.name}),a.jsxs("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem",marginBottom:"1rem"},children:[r.businesses," businesses visited"]}),a.jsxs("div",{style:{background:`${r.color}15`,borderRadius:"8px",padding:"1rem"},children:[a.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:r.color},children:r.bonus}),a.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:"Exchange Bonus"})]})]},s))}),a.jsx("div",{style:{textAlign:"center",marginTop:"2rem"},children:a.jsx(ue,{to:"/profile",className:"btn btn-primary",children:"View My Progress"})})]})}),a.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:a.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[a.jsxs("div",{style:{textAlign:"center",marginBottom:"3rem"},children:[a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"Participating Businesses"}),a.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"Support these local Kinderhook establishments"})]}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"1rem"},children:["The Aviary","Morningbird Cafe","Saisonnier","Broad Street Bagel","Brooklyn Pizzeria","Isola Wine Bar","OK Pantry","Kinderhook Books","Samascott's","The School Gallery","Old Dutch Inn","Muse Aesthetics"].map((r,s)=>a.jsx("div",{style:{background:"var(--kb-white)",borderRadius:"8px",padding:"1rem",textAlign:"center",fontSize:"0.9rem",color:"var(--kb-gray-700)",border:"1px solid var(--kb-gray-200)"},children:r},s))}),a.jsx("div",{style:{textAlign:"center",marginTop:"2rem"},children:a.jsx(ue,{to:"/businesses",className:"btn btn-secondary",children:"View All 19 Businesses "})})]})}),a.jsx("section",{style:{padding:"4rem 1rem",background:"linear-gradient(135deg, var(--kb-green) 0%, var(--kb-green-light) 100%)",color:"var(--kb-white)",textAlign:"center"},children:a.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto"},children:[a.jsx("h2",{style:{marginBottom:"1rem"},children:"Ready to Support Local?"}),a.jsx("p",{style:{opacity:.9,marginBottom:"2rem"},children:"Join the Kinderbucks program today and start earning rewards while strengthening our village economy."}),a.jsx("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:a.jsx(ue,{to:"/exchange",className:"btn btn-gold",style:{padding:"1rem 2rem"},children:"Get Your First Kinderbucks"})})]})}),a.jsx(Mn,{})]})}const dk={customer:{id:"customer",title:"For Customers",subtitle:"Start supporting local in minutes",Icon:u0,color:"var(--kb-green)",minCommitment:"Start with just $10"},business:{id:"business",title:"For Business Owners",subtitle:"Accept Kinderbucks and grow your customer base",Icon:St,color:"var(--kb-navy)",minCommitment:"No upfront cost to join"},association:{id:"association",title:"For the Business Association",subtitle:"Strengthen the village economy together",Icon:wD,color:"var(--kb-gold-dark)",minCommitment:"Community-driven program"}},hk=[{number:1,title:"Get Your First Kinderbucks",description:"Visit any exchange location with USD. Start with as little as $10.",visual:"exchange",details:["Visit Village Hall, OK Pantry, or The Aviary","Exchange any amount ($10, $20, $50, $100)","New members get 10% bonus automatically","Receive physical Kinderbucks bills"],tip:"First-time? You'll get $11 in Kinderbucks for every $10 USD!"},{number:2,title:"Spend at Local Businesses",description:"Use Kinderbucks like cash at 19+ participating village businesses.",visual:"spend",details:["Accepted at restaurants, shops, and services","Works just like regular currency","Businesses give change in Kinderbucks when possible","100% of your money stays in Kinderhook"],tip:"Check the business directory to plan your local shopping route!"},{number:3,title:"Check In When You Visit",description:"Scan QR codes at businesses to track your visits and earn rewards.",visual:"checkin",details:["Look for the Kinderbucks QR code at each business","Scan with your phone camera","Each unique business counts toward your tier","One check-in per business per hour"],tip:"You don't need an app - just scan and go!"},{number:4,title:"Level Up Your Membership",description:"Visit more businesses to unlock better exchange rates.",visual:"tiers",details:["Curious (1+ businesses): 10% bonus","Hooked (5+ businesses): 15% bonus","Line & Sinker (10+ businesses): 20% bonus","Village Patron (15+ businesses): 25% bonus"],tip:"At 25% bonus, $100 USD gets you $125 in Kinderbucks!"}],i9=[{number:1,title:"Register Your Business",description:"Join the program with no upfront costs or monthly fees.",visual:"register",details:["Contact the Business Association to register","Receive your unique business QR code","Get listed in the Kinderbucks directory","No fees, no contracts, no risk"],tip:"Registration takes less than 10 minutes!"},{number:2,title:"Accept Kinderbucks Payments",description:"Accept Kinderbucks just like you accept cash.",visual:"accept",details:["Kinderbucks bills have QR codes for verification","Scan any bill to verify authenticity","Make change in Kinderbucks when possible","Train staff in minutes"],tip:"Verification is instant - just scan the QR code on any bill."},{number:3,title:"Build Customer Loyalty",description:"Customers check in at your business, driving repeat visits.",visual:"loyalty",details:["Display your QR code prominently","Customers scan to record their visit","Each check-in helps customers level up","Higher tiers = more valuable customers"],tip:"Village Patrons have visited 15+ businesses - they're your most loyal customers!"},{number:4,title:"Redeem or Recirculate",description:"Use Kinderbucks at other businesses or redeem for USD.",visual:"redeem",details:["Spend at other participating businesses","Pay suppliers who accept Kinderbucks","Redeem for USD at exchange locations (1:1)","Keep money circulating locally"],tip:"Most businesses find it easier to spend than redeem - the money keeps moving!"}],s9=[{number:1,title:"Program Overview",description:"A local currency that strengthens the village economy.",visual:"overview",details:["Kinderbucks is a complementary currency for Kinderhook","Backed 1:1 by USD in a dedicated account","Bonus rates funded by interest and community investment","QR verification prevents counterfeiting"],tip:"Complementary currencies have been used successfully in communities worldwide."},{number:2,title:"Economic Impact",description:"Money that circulates locally multiplies its impact.",visual:"impact",details:["Studies show local currency circulates 3-4x more than USD","$10,000 in circulation = $30,000-40,000 in local economic activity",'Encourages "buy local" behavior',"Builds connections between businesses and residents"],tip:"Every Kinderbuck spent is guaranteed to stay in the village."},{number:3,title:"Member Engagement",description:"Tier system drives exploration of local businesses.",visual:"engagement",details:["Gamification encourages visiting new businesses","Tier bonuses reward loyal community members","Check-in data shows foot traffic patterns","Members become ambassadors for local spending"],tip:"The average member discovers 3 new businesses they didn't know about."},{number:4,title:"Administration & Growth",description:"Simple management with room to scale.",visual:"admin",details:["Digital dashboard tracks circulation and usage","New businesses join with minimal onboarding","Seasonal promotions drive engagement","Expand to neighboring communities over time"],tip:"The program is designed to be self-sustaining once established."}];function o9({step:n,isActive:e,onClick:t}){return a.jsx(de.div,{onClick:t,whileHover:{scale:1.02},whileTap:{scale:.98},style:{background:e?"var(--kb-navy)":"var(--kb-white)",color:e?"var(--kb-white)":"var(--kb-gray-700)",borderRadius:"12px",padding:"1.25rem",cursor:"pointer",border:e?"none":"1px solid var(--kb-gray-200)",transition:"all 0.2s"},children:a.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[a.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"50%",background:e?"var(--kb-gold)":"var(--kb-gray-100)",color:e?"var(--kb-navy)":"var(--kb-gray-500)",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"700",fontSize:"1rem",flexShrink:0},children:n.number}),a.jsxs("div",{children:[a.jsx("h4",{style:{margin:0,fontSize:"1rem",fontWeight:"600",marginBottom:"0.25rem"},children:n.title}),a.jsx("p",{style:{margin:0,fontSize:"0.85rem",opacity:.8},children:n.description})]})]})})}function a9({step:n,audienceColor:e}){return a.jsxs(de.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},style:{background:"var(--kb-white)",borderRadius:"16px",padding:"2rem",height:"100%",display:"flex",flexDirection:"column"},children:[a.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",background:`${e}15`,color:e,padding:"0.5rem 1rem",borderRadius:"100px",fontSize:"0.8rem",fontWeight:"600",marginBottom:"1rem",alignSelf:"flex-start"},children:["STEP ",n.number]}),a.jsx("h3",{style:{color:"var(--kb-navy)",fontSize:"1.5rem",marginBottom:"0.5rem"},children:n.title}),a.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem",fontSize:"1.05rem"},children:n.description}),a.jsxs("div",{style:{background:"var(--kb-cream)",borderRadius:"12px",padding:"1.5rem",marginBottom:"1.5rem",flex:1},children:[a.jsx("h4",{style:{color:"var(--kb-navy)",fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"1rem"},children:"What This Looks Like"}),a.jsx("ul",{style:{margin:0,padding:0,listStyle:"none"},children:n.details.map((t,r)=>a.jsxs("li",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",marginBottom:"0.75rem",color:"var(--kb-gray-700)"},children:[a.jsx("span",{style:{color:"var(--kb-green)",fontWeight:"600"},children:""}),t]},r))})]}),a.jsxs("div",{style:{background:"linear-gradient(135deg, var(--kb-gold) 0%, #d4af37 100%)",borderRadius:"12px",padding:"1rem 1.25rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[a.jsx("span",{style:{fontSize:"1.5rem"},children:""}),a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:"600",color:"var(--kb-navy)",fontSize:"0.8rem",textTransform:"uppercase",marginBottom:"0.25rem"},children:"Pro Tip"}),a.jsx("div",{style:{color:"var(--kb-navy)",fontSize:"0.95rem"},children:n.tip})]})]})]},n.number)}function l9({audience:n,steps:e}){const[t,r]=j.useState(0);return a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1.5fr",gap:"2rem",minHeight:"500px"},className:"demo-flow-grid",children:[a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:e.map((s,l)=>a.jsx(o9,{step:s,isActive:t===l,onClick:()=>r(l)},s.number))}),a.jsx(U0,{mode:"wait",children:a.jsx(a9,{step:e[t],audienceColor:n.color},t)})]})}function oh({icon:n,title:e,description:t}){return a.jsxs("div",{style:{background:"var(--kb-white)",borderRadius:"12px",padding:"1.5rem",textAlign:"center",border:"1px solid var(--kb-gray-200)"},children:[a.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.75rem"},children:n}),a.jsx("h4",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:e}),a.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem",margin:0},children:t})]})}function c9(){const[n,e]=j.useState("customer"),t=dk[n],r=()=>{switch(n){case"customer":return hk;case"business":return i9;case"association":return s9;default:return hk}},l=(()=>{switch(n){case"customer":return{to:"/exchange",text:"Get Your First Kinderbucks",secondary:"/businesses",secondaryText:"Browse Businesses"};case"business":return{to:"/businesses",text:"Register Your Business",secondary:"/about",secondaryText:"Learn More"};case"association":return{to:"/about",text:"Full Program Details",secondary:"/admin/dashboard",secondaryText:"View Dashboard"};default:return{to:"/exchange",text:"Get Started"}}})();return a.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[a.jsx(Nn,{}),a.jsx("section",{style:{background:"linear-gradient(135deg, var(--kb-navy) 0%, var(--kb-navy-light) 100%)",color:"var(--kb-white)",padding:"3rem 1rem",textAlign:"center"},children:a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{maxWidth:"800px",margin:"0 auto"},children:[a.jsx("div",{className:"badge badge-gold",style:{marginBottom:"1rem"},children:"Interactive Demo"}),a.jsx("h1",{style:{fontFamily:"var(--font-display)",fontSize:"clamp(2rem, 4vw, 2.75rem)",fontWeight:"700",marginBottom:"1rem"},children:"See How Kinderbucks Works"}),a.jsx("p",{style:{fontSize:"1.15rem",color:"var(--kb-gray-300)",maxWidth:"600px",margin:"0 auto"},children:"Choose your perspective below to see a step-by-step walkthrough of the Kinderbucks program."})]})}),a.jsx("section",{style:{background:"var(--kb-white)",padding:"2rem 1rem",borderBottom:"1px solid var(--kb-gray-200)"},children:a.jsx("div",{style:{maxWidth:"900px",margin:"0 auto"},children:a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem"},children:Object.values(dk).map(c=>{const h=c.Icon;return a.jsxs(de.button,{onClick:()=>e(c.id),whileHover:{scale:1.02},whileTap:{scale:.98},style:{background:n===c.id?`linear-gradient(135deg, ${c.color} 0%, ${c.color}dd 100%)`:"var(--kb-cream)",color:n===c.id?"var(--kb-white)":"var(--kb-gray-700)",border:n===c.id?"none":"2px solid var(--kb-gray-200)",borderRadius:"12px",padding:"1.5rem",cursor:"pointer",textAlign:"left",transition:"all 0.2s"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[a.jsx(h,{size:28,strokeWidth:1.5}),a.jsx("span",{style:{fontWeight:"600",fontSize:"1.1rem"},children:c.title})]}),a.jsx("p",{style:{margin:0,fontSize:"0.9rem",opacity:.85},children:c.subtitle}),a.jsx("div",{style:{marginTop:"0.75rem",fontSize:"0.8rem",fontWeight:"600",opacity:n===c.id?1:.7},children:c.minCommitment})]},c.id)})})})}),a.jsx("section",{style:{background:"var(--kb-cream)",padding:"3rem 1rem",flex:1},children:a.jsx("div",{style:{maxWidth:"1100px",margin:"0 auto"},children:a.jsx(U0,{mode:"wait",children:a.jsx(de.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:a.jsx(l9,{audience:t,steps:r()})},n)})})}),a.jsx("section",{style:{background:"var(--kb-white)",padding:"3rem 1rem",borderTop:"1px solid var(--kb-gray-200)"},children:a.jsxs("div",{style:{maxWidth:"900px",margin:"0 auto"},children:[a.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"Minimal Commitment, Maximum Impact"}),a.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"Kinderbucks is designed to be easy to try and rewarding to use"})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem"},children:[a.jsx(oh,{icon:"",title:"Start with $10",description:"No minimum exchange amount. Try it with pocket change."}),a.jsx(oh,{icon:"",title:"No Fees",description:"No signup fees, no monthly costs, no hidden charges."}),a.jsx(oh,{icon:"",title:"Full Refund",description:"Businesses can redeem Kinderbucks for USD 1:1 anytime."}),a.jsx(oh,{icon:"",title:"Instant Setup",description:"Customers start immediately. Businesses onboard in minutes."})]})]})}),a.jsx("section",{style:{background:t.color,padding:"3rem 1rem",textAlign:"center"},children:a.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto"},children:[a.jsx("h2",{style:{color:"var(--kb-white)",marginBottom:"0.5rem"},children:"Ready to Get Started?"}),a.jsxs("p",{style:{color:"rgba(255,255,255,0.85)",marginBottom:"2rem"},children:[n==="customer"&&"Join hundreds of Kinderhook residents supporting local businesses.",n==="business"&&"Join 19 local businesses already accepting Kinderbucks.",n==="association"&&"See the full details of how the program operates."]}),a.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[a.jsx(ue,{to:l.to,className:"btn",style:{background:"var(--kb-white)",color:t.color,padding:"1rem 2rem",fontSize:"1.1rem",fontWeight:"600"},children:l.text}),l.secondary&&a.jsx(ue,{to:l.secondary,className:"btn btn-outline",style:{borderColor:"var(--kb-white)",color:"var(--kb-white)",padding:"1rem 2rem",fontSize:"1.1rem"},children:l.secondaryText})]})]})}),a.jsx(Mn,{}),a.jsx("style",{children:`
        @media (max-width: 900px) {
          .demo-flow-grid {
            grid-template-columns: 1fr !important;
            gap: 1.5rem !important;
          }
        }
      `})]})}var u9=Object.defineProperty,ef=Object.getOwnPropertySymbols,yT=Object.prototype.hasOwnProperty,vT=Object.prototype.propertyIsEnumerable,fk=(n,e,t)=>e in n?u9(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Jg=(n,e)=>{for(var t in e||(e={}))yT.call(e,t)&&fk(n,t,e[t]);if(ef)for(var t of ef(e))vT.call(e,t)&&fk(n,t,e[t]);return n},Zg=(n,e)=>{var t={};for(var r in n)yT.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&ef)for(var r of ef(n))e.indexOf(r)<0&&vT.call(n,r)&&(t[r]=n[r]);return t};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Go;(n=>{const e=class ze{constructor(d,m,g,y){if(this.version=d,this.errorCorrectionLevel=m,this.modules=[],this.isFunction=[],d<ze.MIN_VERSION||d>ze.MAX_VERSION)throw new RangeError("Version value out of range");if(y<-1||y>7)throw new RangeError("Mask value out of range");this.size=d*4+17;let x=[];for(let k=0;k<this.size;k++)x.push(!1);for(let k=0;k<this.size;k++)this.modules.push(x.slice()),this.isFunction.push(x.slice());this.drawFunctionPatterns();const E=this.addEccAndInterleave(g);if(this.drawCodewords(E),y==-1){let k=1e9;for(let S=0;S<8;S++){this.applyMask(S),this.drawFormatBits(S);const I=this.getPenaltyScore();I<k&&(y=S,k=I),this.applyMask(S)}}s(0<=y&&y<=7),this.mask=y,this.applyMask(y),this.drawFormatBits(y),this.isFunction=[]}static encodeText(d,m){const g=n.QrSegment.makeSegments(d);return ze.encodeSegments(g,m)}static encodeBinary(d,m){const g=n.QrSegment.makeBytes(d);return ze.encodeSegments([g],m)}static encodeSegments(d,m,g=1,y=40,x=-1,E=!0){if(!(ze.MIN_VERSION<=g&&g<=y&&y<=ze.MAX_VERSION)||x<-1||x>7)throw new RangeError("Invalid value");let k,S;for(k=g;;k++){const P=ze.getNumDataCodewords(k,m)*8,K=c.getTotalBits(d,k);if(K<=P){S=K;break}if(k>=y)throw new RangeError("Data too long")}for(const P of[ze.Ecc.MEDIUM,ze.Ecc.QUARTILE,ze.Ecc.HIGH])E&&S<=ze.getNumDataCodewords(k,P)*8&&(m=P);let I=[];for(const P of d){t(P.mode.modeBits,4,I),t(P.numChars,P.mode.numCharCountBits(k),I);for(const K of P.getData())I.push(K)}s(I.length==S);const N=ze.getNumDataCodewords(k,m)*8;s(I.length<=N),t(0,Math.min(4,N-I.length),I),t(0,(8-I.length%8)%8,I),s(I.length%8==0);for(let P=236;I.length<N;P^=253)t(P,8,I);let V=[];for(;V.length*8<I.length;)V.push(0);return I.forEach((P,K)=>V[K>>>3]|=P<<7-(K&7)),new ze(k,m,V,x)}getModule(d,m){return 0<=d&&d<this.size&&0<=m&&m<this.size&&this.modules[m][d]}getModules(){return this.modules}drawFunctionPatterns(){for(let g=0;g<this.size;g++)this.setFunctionModule(6,g,g%2==0),this.setFunctionModule(g,6,g%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const d=this.getAlignmentPatternPositions(),m=d.length;for(let g=0;g<m;g++)for(let y=0;y<m;y++)g==0&&y==0||g==0&&y==m-1||g==m-1&&y==0||this.drawAlignmentPattern(d[g],d[y]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(d){const m=this.errorCorrectionLevel.formatBits<<3|d;let g=m;for(let x=0;x<10;x++)g=g<<1^(g>>>9)*1335;const y=(m<<10|g)^21522;s(y>>>15==0);for(let x=0;x<=5;x++)this.setFunctionModule(8,x,r(y,x));this.setFunctionModule(8,7,r(y,6)),this.setFunctionModule(8,8,r(y,7)),this.setFunctionModule(7,8,r(y,8));for(let x=9;x<15;x++)this.setFunctionModule(14-x,8,r(y,x));for(let x=0;x<8;x++)this.setFunctionModule(this.size-1-x,8,r(y,x));for(let x=8;x<15;x++)this.setFunctionModule(8,this.size-15+x,r(y,x));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let d=this.version;for(let g=0;g<12;g++)d=d<<1^(d>>>11)*7973;const m=this.version<<12|d;s(m>>>18==0);for(let g=0;g<18;g++){const y=r(m,g),x=this.size-11+g%3,E=Math.floor(g/3);this.setFunctionModule(x,E,y),this.setFunctionModule(E,x,y)}}drawFinderPattern(d,m){for(let g=-4;g<=4;g++)for(let y=-4;y<=4;y++){const x=Math.max(Math.abs(y),Math.abs(g)),E=d+y,k=m+g;0<=E&&E<this.size&&0<=k&&k<this.size&&this.setFunctionModule(E,k,x!=2&&x!=4)}}drawAlignmentPattern(d,m){for(let g=-2;g<=2;g++)for(let y=-2;y<=2;y++)this.setFunctionModule(d+y,m+g,Math.max(Math.abs(y),Math.abs(g))!=1)}setFunctionModule(d,m,g){this.modules[m][d]=g,this.isFunction[m][d]=!0}addEccAndInterleave(d){const m=this.version,g=this.errorCorrectionLevel;if(d.length!=ze.getNumDataCodewords(m,g))throw new RangeError("Invalid argument");const y=ze.NUM_ERROR_CORRECTION_BLOCKS[g.ordinal][m],x=ze.ECC_CODEWORDS_PER_BLOCK[g.ordinal][m],E=Math.floor(ze.getNumRawDataModules(m)/8),k=y-E%y,S=Math.floor(E/y);let I=[];const N=ze.reedSolomonComputeDivisor(x);for(let P=0,K=0;P<y;P++){let z=d.slice(K,K+S-x+(P<k?0:1));K+=z.length;const W=ze.reedSolomonComputeRemainder(z,N);P<k&&z.push(0),I.push(z.concat(W))}let V=[];for(let P=0;P<I[0].length;P++)I.forEach((K,z)=>{(P!=S-x||z>=k)&&V.push(K[P])});return s(V.length==E),V}drawCodewords(d){if(d.length!=Math.floor(ze.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let m=0;for(let g=this.size-1;g>=1;g-=2){g==6&&(g=5);for(let y=0;y<this.size;y++)for(let x=0;x<2;x++){const E=g-x,S=(g+1&2)==0?this.size-1-y:y;!this.isFunction[S][E]&&m<d.length*8&&(this.modules[S][E]=r(d[m>>>3],7-(m&7)),m++)}}s(m==d.length*8)}applyMask(d){if(d<0||d>7)throw new RangeError("Mask value out of range");for(let m=0;m<this.size;m++)for(let g=0;g<this.size;g++){let y;switch(d){case 0:y=(g+m)%2==0;break;case 1:y=m%2==0;break;case 2:y=g%3==0;break;case 3:y=(g+m)%3==0;break;case 4:y=(Math.floor(g/3)+Math.floor(m/2))%2==0;break;case 5:y=g*m%2+g*m%3==0;break;case 6:y=(g*m%2+g*m%3)%2==0;break;case 7:y=((g+m)%2+g*m%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[m][g]&&y&&(this.modules[m][g]=!this.modules[m][g])}}getPenaltyScore(){let d=0;for(let x=0;x<this.size;x++){let E=!1,k=0,S=[0,0,0,0,0,0,0];for(let I=0;I<this.size;I++)this.modules[x][I]==E?(k++,k==5?d+=ze.PENALTY_N1:k>5&&d++):(this.finderPenaltyAddHistory(k,S),E||(d+=this.finderPenaltyCountPatterns(S)*ze.PENALTY_N3),E=this.modules[x][I],k=1);d+=this.finderPenaltyTerminateAndCount(E,k,S)*ze.PENALTY_N3}for(let x=0;x<this.size;x++){let E=!1,k=0,S=[0,0,0,0,0,0,0];for(let I=0;I<this.size;I++)this.modules[I][x]==E?(k++,k==5?d+=ze.PENALTY_N1:k>5&&d++):(this.finderPenaltyAddHistory(k,S),E||(d+=this.finderPenaltyCountPatterns(S)*ze.PENALTY_N3),E=this.modules[I][x],k=1);d+=this.finderPenaltyTerminateAndCount(E,k,S)*ze.PENALTY_N3}for(let x=0;x<this.size-1;x++)for(let E=0;E<this.size-1;E++){const k=this.modules[x][E];k==this.modules[x][E+1]&&k==this.modules[x+1][E]&&k==this.modules[x+1][E+1]&&(d+=ze.PENALTY_N2)}let m=0;for(const x of this.modules)m=x.reduce((E,k)=>E+(k?1:0),m);const g=this.size*this.size,y=Math.ceil(Math.abs(m*20-g*10)/g)-1;return s(0<=y&&y<=9),d+=y*ze.PENALTY_N4,s(0<=d&&d<=2568888),d}getAlignmentPatternPositions(){if(this.version==1)return[];{const d=Math.floor(this.version/7)+2,m=this.version==32?26:Math.ceil((this.version*4+4)/(d*2-2))*2;let g=[6];for(let y=this.size-7;g.length<d;y-=m)g.splice(1,0,y);return g}}static getNumRawDataModules(d){if(d<ze.MIN_VERSION||d>ze.MAX_VERSION)throw new RangeError("Version number out of range");let m=(16*d+128)*d+64;if(d>=2){const g=Math.floor(d/7)+2;m-=(25*g-10)*g-55,d>=7&&(m-=36)}return s(208<=m&&m<=29648),m}static getNumDataCodewords(d,m){return Math.floor(ze.getNumRawDataModules(d)/8)-ze.ECC_CODEWORDS_PER_BLOCK[m.ordinal][d]*ze.NUM_ERROR_CORRECTION_BLOCKS[m.ordinal][d]}static reedSolomonComputeDivisor(d){if(d<1||d>255)throw new RangeError("Degree out of range");let m=[];for(let y=0;y<d-1;y++)m.push(0);m.push(1);let g=1;for(let y=0;y<d;y++){for(let x=0;x<m.length;x++)m[x]=ze.reedSolomonMultiply(m[x],g),x+1<m.length&&(m[x]^=m[x+1]);g=ze.reedSolomonMultiply(g,2)}return m}static reedSolomonComputeRemainder(d,m){let g=m.map(y=>0);for(const y of d){const x=y^g.shift();g.push(0),m.forEach((E,k)=>g[k]^=ze.reedSolomonMultiply(E,x))}return g}static reedSolomonMultiply(d,m){if(d>>>8||m>>>8)throw new RangeError("Byte out of range");let g=0;for(let y=7;y>=0;y--)g=g<<1^(g>>>7)*285,g^=(m>>>y&1)*d;return s(g>>>8==0),g}finderPenaltyCountPatterns(d){const m=d[1];s(m<=this.size*3);const g=m>0&&d[2]==m&&d[3]==m*3&&d[4]==m&&d[5]==m;return(g&&d[0]>=m*4&&d[6]>=m?1:0)+(g&&d[6]>=m*4&&d[0]>=m?1:0)}finderPenaltyTerminateAndCount(d,m,g){return d&&(this.finderPenaltyAddHistory(m,g),m=0),m+=this.size,this.finderPenaltyAddHistory(m,g),this.finderPenaltyCountPatterns(g)}finderPenaltyAddHistory(d,m){m[0]==0&&(d+=this.size),m.pop(),m.unshift(d)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],n.QrCode=e;function t(h,d,m){if(d<0||d>31||h>>>d)throw new RangeError("Value out of range");for(let g=d-1;g>=0;g--)m.push(h>>>g&1)}function r(h,d){return(h>>>d&1)!=0}function s(h){if(!h)throw new Error("Assertion error")}const l=class kt{constructor(d,m,g){if(this.mode=d,this.numChars=m,this.bitData=g,m<0)throw new RangeError("Invalid argument");this.bitData=g.slice()}static makeBytes(d){let m=[];for(const g of d)t(g,8,m);return new kt(kt.Mode.BYTE,d.length,m)}static makeNumeric(d){if(!kt.isNumeric(d))throw new RangeError("String contains non-numeric characters");let m=[];for(let g=0;g<d.length;){const y=Math.min(d.length-g,3);t(parseInt(d.substring(g,g+y),10),y*3+1,m),g+=y}return new kt(kt.Mode.NUMERIC,d.length,m)}static makeAlphanumeric(d){if(!kt.isAlphanumeric(d))throw new RangeError("String contains unencodable characters in alphanumeric mode");let m=[],g;for(g=0;g+2<=d.length;g+=2){let y=kt.ALPHANUMERIC_CHARSET.indexOf(d.charAt(g))*45;y+=kt.ALPHANUMERIC_CHARSET.indexOf(d.charAt(g+1)),t(y,11,m)}return g<d.length&&t(kt.ALPHANUMERIC_CHARSET.indexOf(d.charAt(g)),6,m),new kt(kt.Mode.ALPHANUMERIC,d.length,m)}static makeSegments(d){return d==""?[]:kt.isNumeric(d)?[kt.makeNumeric(d)]:kt.isAlphanumeric(d)?[kt.makeAlphanumeric(d)]:[kt.makeBytes(kt.toUtf8ByteArray(d))]}static makeEci(d){let m=[];if(d<0)throw new RangeError("ECI assignment value out of range");if(d<128)t(d,8,m);else if(d<16384)t(2,2,m),t(d,14,m);else if(d<1e6)t(6,3,m),t(d,21,m);else throw new RangeError("ECI assignment value out of range");return new kt(kt.Mode.ECI,0,m)}static isNumeric(d){return kt.NUMERIC_REGEX.test(d)}static isAlphanumeric(d){return kt.ALPHANUMERIC_REGEX.test(d)}getData(){return this.bitData.slice()}static getTotalBits(d,m){let g=0;for(const y of d){const x=y.mode.numCharCountBits(m);if(y.numChars>=1<<x)return 1/0;g+=4+x+y.bitData.length}return g}static toUtf8ByteArray(d){d=encodeURI(d);let m=[];for(let g=0;g<d.length;g++)d.charAt(g)!="%"?m.push(d.charCodeAt(g)):(m.push(parseInt(d.substring(g+1,g+3),16)),g+=2);return m}};l.NUMERIC_REGEX=/^[0-9]*$/,l.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,l.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let c=l;n.QrSegment=l})(Go||(Go={}));(n=>{(e=>{const t=class{constructor(s,l){this.ordinal=s,this.formatBits=l}};t.LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2),e.Ecc=t})(n.QrCode||(n.QrCode={}))})(Go||(Go={}));(n=>{(e=>{const t=class{constructor(s,l){this.modeBits=s,this.numBitsCharCount=l}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};t.NUMERIC=new t(1,[10,12,14]),t.ALPHANUMERIC=new t(2,[9,11,13]),t.BYTE=new t(4,[8,16,16]),t.KANJI=new t(8,[8,10,12]),t.ECI=new t(7,[0,0,0]),e.Mode=t})(n.QrSegment||(n.QrSegment={}))})(Go||(Go={}));var qa=Go;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var d9={L:qa.QrCode.Ecc.LOW,M:qa.QrCode.Ecc.MEDIUM,Q:qa.QrCode.Ecc.QUARTILE,H:qa.QrCode.Ecc.HIGH},xT=128,wT="L",bT="#FFFFFF",kT="#000000",_T=!1,ST=1,h9=4,f9=0,m9=.1;function ET(n,e=0){const t=[];return n.forEach(function(r,s){let l=null;r.forEach(function(c,h){if(!c&&l!==null){t.push(`M${l+e} ${s+e}h${h-l}v1H${l+e}z`),l=null;return}if(h===r.length-1){if(!c)return;l===null?t.push(`M${h+e},${s+e} h1v1H${h+e}z`):t.push(`M${l+e},${s+e} h${h+1-l}v1H${l+e}z`);return}c&&l===null&&(l=h)})}),t.join("")}function TT(n,e){return n.slice().map((t,r)=>r<e.y||r>=e.y+e.h?t:t.map((s,l)=>l<e.x||l>=e.x+e.w?s:!1))}function p9(n,e,t,r){if(r==null)return null;const s=n.length+t*2,l=Math.floor(e*m9),c=s/e,h=(r.width||l)*c,d=(r.height||l)*c,m=r.x==null?n.length/2-h/2:r.x*c,g=r.y==null?n.length/2-d/2:r.y*c,y=r.opacity==null?1:r.opacity;let x=null;if(r.excavate){let k=Math.floor(m),S=Math.floor(g),I=Math.ceil(h+m-k),N=Math.ceil(d+g-S);x={x:k,y:S,w:I,h:N}}const E=r.crossOrigin;return{x:m,y:g,h:d,w:h,excavation:x,opacity:y,crossOrigin:E}}function g9(n,e){return e!=null?Math.max(Math.floor(e),0):n?h9:f9}function IT({value:n,level:e,minVersion:t,includeMargin:r,marginSize:s,imageSettings:l,size:c,boostLevel:h}){let d=Wt.useMemo(()=>{const k=(Array.isArray(n)?n:[n]).reduce((S,I)=>(S.push(...qa.QrSegment.makeSegments(I)),S),[]);return qa.QrCode.encodeSegments(k,d9[e],t,void 0,void 0,h)},[n,e,t,h]);const{cells:m,margin:g,numCells:y,calculatedImageSettings:x}=Wt.useMemo(()=>{let E=d.getModules();const k=g9(r,s),S=E.length+k*2,I=p9(E,c,k,l);return{cells:E,margin:k,numCells:S,calculatedImageSettings:I}},[d,c,l,r,s]);return{qrcode:d,margin:g,cells:m,numCells:y,calculatedImageSettings:x}}var y9=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),v9=Wt.forwardRef(function(e,t){const r=e,{value:s,size:l=xT,level:c=wT,bgColor:h=bT,fgColor:d=kT,includeMargin:m=_T,minVersion:g=ST,boostLevel:y,marginSize:x,imageSettings:E}=r,S=Zg(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:I}=S,N=Zg(S,["style"]),V=E==null?void 0:E.src,P=Wt.useRef(null),K=Wt.useRef(null),z=Wt.useCallback(De=>{P.current=De,typeof t=="function"?t(De):t&&(t.current=De)},[t]),[W,A]=Wt.useState(!1),{margin:C,cells:M,numCells:O,calculatedImageSettings:B}=IT({value:s,level:c,minVersion:g,boostLevel:y,includeMargin:m,marginSize:x,imageSettings:E,size:l});Wt.useEffect(()=>{if(P.current!=null){const De=P.current,Ke=De.getContext("2d");if(!Ke)return;let pt=M;const Ee=K.current,ie=B!=null&&Ee!==null&&Ee.complete&&Ee.naturalHeight!==0&&Ee.naturalWidth!==0;ie&&B.excavation!=null&&(pt=TT(M,B.excavation));const me=window.devicePixelRatio||1;De.height=De.width=l*me;const le=l/O*me;Ke.scale(le,le),Ke.fillStyle=h,Ke.fillRect(0,0,O,O),Ke.fillStyle=d,y9?Ke.fill(new Path2D(ET(pt,C))):M.forEach(function(H,te){H.forEach(function(Re,Ce){Re&&Ke.fillRect(Ce+C,te+C,1,1)})}),B&&(Ke.globalAlpha=B.opacity),ie&&Ke.drawImage(Ee,B.x+C,B.y+C,B.w,B.h)}}),Wt.useEffect(()=>{A(!1)},[V]);const U=Jg({height:l,width:l},I);let L=null;return V!=null&&(L=Wt.createElement("img",{src:V,key:V,style:{display:"none"},onLoad:()=>{A(!0)},ref:K,crossOrigin:B==null?void 0:B.crossOrigin})),Wt.createElement(Wt.Fragment,null,Wt.createElement("canvas",Jg({style:U,height:l,width:l,ref:z,role:"img"},N)),L)});v9.displayName="QRCodeCanvas";var ey=Wt.forwardRef(function(e,t){const r=e,{value:s,size:l=xT,level:c=wT,bgColor:h=bT,fgColor:d=kT,includeMargin:m=_T,minVersion:g=ST,boostLevel:y,title:x,marginSize:E,imageSettings:k}=r,S=Zg(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:I,cells:N,numCells:V,calculatedImageSettings:P}=IT({value:s,level:c,minVersion:g,boostLevel:y,includeMargin:m,marginSize:E,imageSettings:k,size:l});let K=N,z=null;k!=null&&P!=null&&(P.excavation!=null&&(K=TT(N,P.excavation)),z=Wt.createElement("image",{href:k.src,height:P.h,width:P.w,x:P.x+I,y:P.y+I,preserveAspectRatio:"none",opacity:P.opacity,crossOrigin:P.crossOrigin}));const W=ET(K,I);return Wt.createElement("svg",Jg({height:l,width:l,viewBox:`0 0 ${V} ${V}`,ref:t,role:"img"},S),!!x&&Wt.createElement("title",null,x),Wt.createElement("path",{fill:h,d:`M0,0 h${V}v${V}H0z`,shapeRendering:"crispEdges"}),Wt.createElement("path",{fill:d,d:W,shapeRendering:"crispEdges"}),z)});ey.displayName="QRCodeSVG";const mk={1:{color:"#2d5a27",gradient:["#3d7a37","#2d5a27"],label:"ONE",accent:"#90c695"},5:{color:"#1e3a5f",gradient:["#2e5a8f","#1e3a5f"],label:"FIVE",accent:"#7ba3cc"},10:{color:"#5c2d5c",gradient:["#7c4d7c","#5c2d5c"],label:"TEN",accent:"#b89db8"},20:{color:"#8b6914",gradient:["#c9a227","#8b6914"],label:"TWENTY",accent:"#e8d48a"}};function fl({value:n,size:e=128,denomination:t=5,showFrame:r=!0}){const s=mk[t]||mk[5],l=e+48,c=16;return r?a.jsx("div",{style:{width:l,background:`linear-gradient(135deg, ${s.gradient[0]} 0%, ${s.gradient[1]} 100%)`,borderRadius:c,padding:"3px",display:"inline-block",boxShadow:"0 4px 12px rgba(0,0,0,0.2)"},children:a.jsxs("div",{style:{background:"linear-gradient(135deg, #fefefe 0%, #f5f5f0 100%)",borderRadius:c-2,padding:"8px",position:"relative"},children:[a.jsx("div",{style:{textAlign:"center",marginBottom:"6px",fontFamily:'"Georgia", serif',fontSize:"10px",fontWeight:"bold",color:s.color,letterSpacing:"3px",textTransform:"uppercase"},children:"KINDERBUCKS"}),a.jsxs("div",{style:{background:"white",borderRadius:"8px",padding:"8px",border:`2px solid ${s.accent}`,position:"relative"},children:[a.jsx("div",{style:{position:"absolute",top:"4px",left:"4px",width:"12px",height:"12px",borderTop:`2px solid ${s.color}`,borderLeft:`2px solid ${s.color}`,borderRadius:"2px 0 0 0"}}),a.jsx("div",{style:{position:"absolute",top:"4px",right:"4px",width:"12px",height:"12px",borderTop:`2px solid ${s.color}`,borderRight:`2px solid ${s.color}`,borderRadius:"0 2px 0 0"}}),a.jsx("div",{style:{position:"absolute",bottom:"4px",left:"4px",width:"12px",height:"12px",borderBottom:`2px solid ${s.color}`,borderLeft:`2px solid ${s.color}`,borderRadius:"0 0 0 2px"}}),a.jsx("div",{style:{position:"absolute",bottom:"4px",right:"4px",width:"12px",height:"12px",borderBottom:`2px solid ${s.color}`,borderRight:`2px solid ${s.color}`,borderRadius:"0 0 2px 0"}}),a.jsx(ey,{value:n,size:e,level:"H",fgColor:s.color,style:{display:"block"},imageSettings:{src:`data:image/svg+xml,${encodeURIComponent(`
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="${s.color}">
                  <circle cx="12" cy="12" r="11" fill="white" stroke="${s.color}" stroke-width="1.5"/>
                  <text x="12" y="16" text-anchor="middle" font-size="12" font-weight="bold" fill="${s.color}" font-family="Georgia">K</text>
                </svg>
              `)}`,height:e*.2,width:e*.2,excavate:!0}})]}),a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"6px",padding:"0 4px"},children:[a.jsxs("span",{style:{fontFamily:'"Georgia", serif',fontSize:"14px",fontWeight:"bold",color:s.color},children:["$",t]}),a.jsx("span",{style:{fontFamily:'"Georgia", serif',fontSize:"9px",color:s.color,letterSpacing:"1px",opacity:.8},children:s.label}),a.jsxs("span",{style:{fontFamily:'"Georgia", serif',fontSize:"14px",fontWeight:"bold",color:s.color},children:["$",t]})]})]})}):a.jsx(ey,{value:n,size:e,level:"M",fgColor:s.color,style:{display:"block"}})}const x9="https://harmonicsystems.github.io/kinderbucks/#/scan/KB-0001",w9="https://harmonicsystems.github.io/kinderbucks/#/checkin/BROADST-BAGEL",b9="Broad Street Bagel Co.";function k9(){const[n,e]=j.useState(null),[t,r]=j.useState(0),[s,l]=j.useState(!1);return a.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)",overflow:"hidden"},children:a.jsxs("div",{style:{maxWidth:"1100px",margin:"0 auto"},children:[a.jsxs(de.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},style:{textAlign:"center",marginBottom:"3rem"},children:[a.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",background:"linear-gradient(135deg, var(--kb-gold) 0%, #e8c33a 100%)",color:"var(--kb-navy)",padding:"0.5rem 1rem",borderRadius:"100px",fontSize:"0.85rem",fontWeight:"600",marginBottom:"1rem"},children:[a.jsx(b3,{size:16})," Try It Live"]}),a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.75rem"},children:"See Kinderbucks in Action"}),a.jsx("p",{style:{color:"var(--kb-gray-600)",maxWidth:"600px",margin:"0 auto"},children:"Scan these real QR codes with your phone's camera to experience the magic"})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(320px, 1fr))",gap:"2rem",marginBottom:"3rem"},children:[a.jsxs(de.div,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},transition:{delay:.1},viewport:{once:!0},className:"card",style:{padding:"2rem",background:"linear-gradient(180deg, #f8fbff 0%, #ffffff 100%)",border:"2px solid #e8f0ff",position:"relative",overflow:"hidden"},children:[a.jsx("div",{style:{position:"absolute",top:0,right:0,width:"80px",height:"80px",background:"linear-gradient(135deg, transparent 50%, rgba(52, 152, 219, 0.1) 50%)"}}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[a.jsx("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, #3498db 0%, #2980b9 100%)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(R2,{size:22,color:"white"})}),a.jsxs("div",{children:[a.jsx("h3",{style:{color:"var(--kb-navy)",margin:0,fontSize:"1.2rem"},children:"Verify Currency"}),a.jsx("p",{style:{color:"var(--kb-gray-500)",margin:0,fontSize:"0.85rem"},children:"Confirm authenticity instantly"})]})]}),a.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem",marginBottom:"1.5rem"},children:"Every Kinderbuck has a unique QR code. Scan to verify it's real, see its value, and track its journey through the village."}),a.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1.5rem"},children:a.jsx(de.div,{whileHover:{scale:1.02},transition:{type:"spring",stiffness:300},children:a.jsx(fl,{value:x9,size:130,denomination:5,showFrame:!0})})}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1rem",background:"rgba(52, 152, 219, 0.08)",borderRadius:"10px",marginBottom:"1rem"},children:[a.jsx(jg,{size:20,color:"#3498db"}),a.jsx("span",{style:{color:"var(--kb-gray-700)",fontSize:"0.9rem"},children:"Point your phone camera at the QR code"})]}),a.jsxs("div",{style:{borderTop:"1px dashed var(--kb-gray-200)",paddingTop:"1rem"},children:[a.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)",marginBottom:"0.5rem"},children:"You'll see:"}),a.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:["Verified","$5 Value","Active Status","Serial: KB-0001"].map((c,h)=>a.jsx("span",{style:{padding:"0.25rem 0.6rem",background:"var(--kb-gray-100)",borderRadius:"4px",fontSize:"0.8rem",color:"var(--kb-gray-600)"},children:c},h))})]})]}),a.jsxs(de.div,{initial:{opacity:0,x:30},whileInView:{opacity:1,x:0},transition:{delay:.2},viewport:{once:!0},className:"card",style:{padding:"2rem",background:"linear-gradient(180deg, #f8fff8 0%, #ffffff 100%)",border:"2px solid #e8ffe8",position:"relative",overflow:"hidden"},children:[a.jsx("div",{style:{position:"absolute",top:0,right:0,width:"80px",height:"80px",background:"linear-gradient(135deg, transparent 50%, rgba(39, 174, 96, 0.1) 50%)"}}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[a.jsx("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, var(--kb-green) 0%, #1e8449 100%)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(St,{size:22,color:"white"})}),a.jsxs("div",{children:[a.jsx("h3",{style:{color:"var(--kb-navy)",margin:0,fontSize:"1.2rem"},children:"Check In"}),a.jsx("p",{style:{color:"var(--kb-gray-500)",margin:0,fontSize:"0.85rem"},children:"Record visits, earn rewards"})]})]}),a.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem",marginBottom:"1.5rem"},children:"Scan the QR code at each business you visit. Build your Kinderhooker status and unlock better exchange rates!"}),a.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1.5rem"},children:a.jsx(de.div,{whileHover:{scale:1.02},transition:{type:"spring",stiffness:300},style:{background:"linear-gradient(135deg, var(--kb-green) 0%, #1e8449 100%)",borderRadius:"16px",padding:"3px",boxShadow:"0 4px 12px rgba(39, 174, 96, 0.3)"},children:a.jsxs("div",{style:{background:"white",borderRadius:"14px",padding:"12px",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"10px",fontWeight:"600",color:"var(--kb-green)",letterSpacing:"2px",marginBottom:"8px"},children:"CHECK IN AT"}),a.jsx(fl,{value:w9,size:110,denomination:1,showFrame:!1}),a.jsxs("div",{style:{marginTop:"8px",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.4rem"},children:[a.jsx($D,{size:14,color:"var(--kb-green)"}),a.jsx("span",{style:{fontWeight:"600",color:"var(--kb-navy)",fontSize:"0.9rem"},children:b9})]})]})})}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1rem",background:"rgba(39, 174, 96, 0.08)",borderRadius:"10px",marginBottom:"1rem"},children:[a.jsx(jg,{size:20,color:"var(--kb-green)"}),a.jsx("span",{style:{color:"var(--kb-gray-700)",fontSize:"0.9rem"},children:"Scan when you visit a business"})]}),a.jsxs("div",{style:{borderTop:"1px dashed var(--kb-gray-200)",paddingTop:"1rem"},children:[a.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)",marginBottom:"0.5rem"},children:"You'll see:"}),a.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:["Check-in Recorded","+1 Business","Tier Progress","Next Reward"].map((c,h)=>a.jsx("span",{style:{padding:"0.25rem 0.6rem",background:"var(--kb-gray-100)",borderRadius:"4px",fontSize:"0.8rem",color:"var(--kb-gray-600)"},children:c},h))})]})]})]}),a.jsxs(de.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{delay:.3},viewport:{once:!0},style:{background:"linear-gradient(135deg, var(--kb-navy) 0%, #1a3a5c 100%)",borderRadius:"20px",padding:"2rem",color:"white",position:"relative",overflow:"hidden"},children:[a.jsx("div",{style:{position:"absolute",top:"-50%",right:"-10%",width:"300px",height:"300px",background:"radial-gradient(circle, rgba(201, 162, 39, 0.1) 0%, transparent 70%)",borderRadius:"50%"}}),a.jsxs("div",{style:{position:"relative",zIndex:1},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1.5rem"},children:[a.jsx(d0,{size:20,color:"var(--kb-gold)"}),a.jsx("span",{style:{color:"var(--kb-gold)",fontWeight:"600",fontSize:"0.9rem"},children:"The Kinderbucks Loop"})]}),a.jsx("h3",{style:{fontSize:"1.5rem",marginBottom:"2rem",maxWidth:"500px"},children:"Check-ins unlock better exchange rates on currency"}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem",alignItems:"center"},children:[a.jsxs(de.div,{initial:{opacity:0},whileInView:{opacity:1},transition:{delay:.4},viewport:{once:!0},style:{display:"flex",alignItems:"center",gap:"1rem"},children:[a.jsx("div",{style:{width:"50px",height:"50px",background:"rgba(255,255,255,0.1)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:a.jsx(St,{size:24,color:"var(--kb-gold)"})}),a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Visit & Check In"}),a.jsx("div",{style:{fontSize:"0.85rem",opacity:.8},children:"Scan at local businesses"})]})]}),a.jsx("div",{style:{display:"flex",justifyContent:"center"},children:a.jsx(Tg,{size:24,color:"var(--kb-gold)",style:{opacity:.5}})}),a.jsxs(de.div,{initial:{opacity:0},whileInView:{opacity:1},transition:{delay:.5},viewport:{once:!0},style:{display:"flex",alignItems:"center",gap:"1rem"},children:[a.jsx("div",{style:{width:"50px",height:"50px",background:"rgba(255,255,255,0.1)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:a.jsx($s,{size:24,color:"var(--kb-gold)"})}),a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Level Up"}),a.jsx("div",{style:{fontSize:"0.85rem",opacity:.8},children:"Reach new tiers"})]})]}),a.jsx("div",{style:{display:"flex",justifyContent:"center"},children:a.jsx(Tg,{size:24,color:"var(--kb-gold)",style:{opacity:.5}})}),a.jsxs(de.div,{initial:{opacity:0},whileInView:{opacity:1},transition:{delay:.6},viewport:{once:!0},style:{display:"flex",alignItems:"center",gap:"1rem"},children:[a.jsx("div",{style:{width:"50px",height:"50px",background:"linear-gradient(135deg, var(--kb-gold) 0%, #b8922d 100%)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:a.jsx(fr,{size:24,color:"var(--kb-navy)"})}),a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Earn More"}),a.jsx("div",{style:{fontSize:"0.85rem",opacity:.8},children:"Up to 25% bonus!"})]})]})]}),a.jsx("div",{style:{marginTop:"2rem",display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[{name:"Curious",visits:"1+",bonus:"10%"},{name:"Hooked",visits:"5+",bonus:"15%"},{name:"Line & Sinker",visits:"10+",bonus:"20%"},{name:"Village Patron",visits:"15+",bonus:"25%",featured:!0}].map((c,h)=>a.jsxs("div",{style:{padding:"0.5rem 1rem",background:c.featured?"linear-gradient(135deg, var(--kb-gold) 0%, #b8922d 100%)":"rgba(255,255,255,0.1)",borderRadius:"8px",fontSize:"0.85rem",color:c.featured?"var(--kb-navy)":"white",fontWeight:c.featured?"600":"400"},children:[c.name,": ",c.bonus]},h))})]})]}),a.jsxs(de.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:.4},viewport:{once:!0},style:{textAlign:"center",marginTop:"2.5rem"},children:[a.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1rem"},children:"Ready to start your Kinderhooker journey?"}),a.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[a.jsx(ue,{to:"/profile",className:"btn btn-primary",children:"View My Progress"}),a.jsx(ue,{to:"/businesses",className:"btn btn-secondary",children:"Find Businesses to Visit"})]})]})]})})}function _9(){return a.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[a.jsx(Nn,{}),a.jsx("section",{style:{background:"var(--kb-navy)",color:"var(--kb-white)",padding:"4rem 1rem",textAlign:"center"},children:a.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[a.jsx("h1",{style:{marginBottom:"1rem"},children:"How Kinderbucks Works"}),a.jsx("p",{style:{color:"var(--kb-gray-300)",fontSize:"1.1rem"},children:"A simple system designed to keep money local and reward community participation"})]})}),a.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:a.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem"},children:"What is Kinderbucks?"}),a.jsxs("div",{style:{color:"var(--kb-gray-700)",lineHeight:1.8},children:[a.jsxs("p",{style:{marginBottom:"1rem"},children:[a.jsx("strong",{children:"Kinderbucks"})," is a local currency program for the Village of Kinderhook, NY. It's real money  physical bills with QR codes for verification  that can only be spent at participating local businesses."]}),a.jsx("p",{style:{marginBottom:"1rem"},children:"When you exchange US dollars for Kinderbucks, you're making a commitment to spend locally. In return, you receive bonus value through our OK Membership program, turning $10 into $11, $12, or even $12.50 in local spending power."}),a.jsx("p",{children:"Every Kinderbuck spent stays in the village, circulating between businesses and residents, strengthening our local economy with each transaction."})]})]})}),a.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:a.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem",textAlign:"center"},children:"The Exchange Process"}),a.jsx("div",{style:{display:"grid",gap:"2rem",maxWidth:"700px",margin:"0 auto"},children:[{step:1,title:"Visit an Exchange Point",description:"Stop by any participating business or our central exchange location with US dollars."},{step:2,title:"Show Your Membership",description:"Scan your profile QR code or provide your phone number to apply your tier bonus."},{step:3,title:"Receive Your Kinderbucks",description:"Get physical Kinderbuck bills in $1, $5, $10, and $20 denominations with your bonus applied."},{step:4,title:"Spend Locally",description:"Use your Kinderbucks at any of our 19+ participating businesses."}].map((n,e)=>a.jsxs(de.div,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},transition:{delay:e*.1},viewport:{once:!0},style:{display:"flex",gap:"1.5rem",alignItems:"flex-start"},children:[a.jsx("div",{style:{width:"50px",height:"50px",background:"var(--kb-navy)",color:"var(--kb-gold)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"var(--font-display)",fontWeight:"700",fontSize:"1.2rem",flexShrink:0},children:n.step}),a.jsxs("div",{children:[a.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:n.title}),a.jsx("p",{style:{color:"var(--kb-gray-600)"},children:n.description})]})]},e))})]})}),a.jsx(k9,{}),a.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:a.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[a.jsx("div",{className:"badge badge-gold",style:{marginBottom:"1rem"},children:"OK Membership"}),a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem"},children:"The Kinderhooker Program"}),a.jsxs("div",{style:{color:"var(--kb-gray-700)",lineHeight:1.8},children:[a.jsxs("p",{style:{marginBottom:"1rem"},children:[a.jsx("strong",{children:"OK Membership"})," rewards customers who actively support local businesses. The more businesses you visit, the higher your tier  and the better your exchange rate."]}),a.jsxs("p",{style:{marginBottom:"1rem"},children:['Each participating business has a QR code. Scan it when you visit to record a "check-in." Your tier is based on how many ',a.jsx("em",{children:"unique"})," businesses you've visited, encouraging exploration of the entire village."]}),a.jsx("p",{children:`There's no cost to join. Simply start checking in at businesses, and you'll automatically become a "Kinderhooker" with access to bonus exchange rates.`})]}),a.jsxs("div",{style:{marginTop:"2rem",display:"flex",gap:"1rem",flexWrap:"wrap"},children:[a.jsx(ue,{to:"/benefits",className:"btn btn-primary",children:"View All Benefits"}),a.jsx(ue,{to:"/profile",className:"btn btn-secondary",children:"Check My Status"})]})]})}),a.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:a.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem"},children:"Frequently Asked Questions"}),[{q:"Is Kinderbucks real money?",a:"Kinderbucks are a local complementary currency. They have value within our participating business network but cannot be deposited in banks or used outside Kinderhook."},{q:"Can I convert Kinderbucks back to USD?",a:"Kinderbucks are designed to circulate locally. While businesses can redeem them, individual customers are encouraged to spend them at participating businesses."},{q:"What if a business closes?",a:"Kinderbucks remain valid at all other participating businesses. The program maintains reserves to ensure stability."},{q:"How do businesses benefit?",a:"Businesses receive customers committed to spending locally, gain exposure through our directory, and become part of a community-strengthening initiative."},{q:"Is there a fee to exchange?",a:"No fees. You receive full value plus your membership bonus when exchanging USD for Kinderbucks."}].map((n,e)=>a.jsxs("div",{style:{marginBottom:"1.5rem"},children:[a.jsx("h4",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:n.q}),a.jsx("p",{style:{color:"var(--kb-gray-600)"},children:n.a})]},e))]})}),a.jsxs("section",{style:{padding:"3rem 1rem",background:"var(--kb-navy)",color:"var(--kb-white)",textAlign:"center"},children:[a.jsx("h3",{style:{marginBottom:"1rem"},children:"Ready to get started?"}),a.jsx(ue,{to:"/exchange",className:"btn btn-gold",children:"Get Your Kinderbucks"})]}),a.jsx(Mn,{})]})}const lr={curious:{name:"Curious",threshold:1,bonus:.1,color:"#888888",bgColor:"#f0f0f0",emoji:""},hooked:{name:"Hooked",threshold:5,bonus:.15,color:"#2e7d32",bgColor:"#e8f5e9",emoji:""},lineAndSinker:{name:"Line & Sinker",threshold:10,bonus:.2,color:"#1565c0",bgColor:"#e3f2fd",emoji:""},patron:{name:"Village Patron",threshold:15,bonus:.25,color:"#c9a227",bgColor:"#fff8e1",emoji:""}};function ty(n){return n>=15?"patron":n>=10?"lineAndSinker":n>=5?"hooked":n>=1?"curious":null}function S9(n){const e=["curious","hooked","lineAndSinker","patron"],t=e.indexOf(n);return t<e.length-1?e[t+1]:null}function CT(n){const e=ty(n),t=S9(e);if(!t)return{progress:100,remaining:0,nextTier:null};const r=lr[t],s=e?lr[e].threshold:0,l=(n-s)/(r.threshold-s)*100;return{progress:Math.min(100,Math.max(0,l)),remaining:r.threshold-n,nextTier:r}}function E9(){const n=[{Icon:BD,title:"Bonus Exchange Rates",description:"Get up to 25% extra when converting USD to Kinderbucks. A $100 exchange becomes $125 in local spending power.",highlight:"Up to 25% bonus"},{Icon:St,title:"Exclusive Local Deals",description:"Participating businesses offer special discounts and promotions exclusively for Kinderhooker members.",highlight:"Member-only offers"},{Icon:fr,title:"Priority Access",description:"Higher-tier members get early access to limited events, seasonal specials, and new business openings.",highlight:"First in line"},{Icon:T2,title:"Seasonal Bonuses",description:"Extra rewards during holidays and special village events. Double check-in points, bonus exchanges, and more.",highlight:"Special events"},{Icon:a0,title:"Impact Tracking",description:"See exactly how your spending supports local businesses and contributes to the village economy.",highlight:"Track your impact"},{Icon:Nr,title:"Community Recognition",description:"Village Patrons are recognized in our annual report and invited to exclusive community appreciation events.",highlight:"Be celebrated"}];return a.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[a.jsx(Nn,{}),a.jsx("section",{style:{background:"linear-gradient(135deg, var(--kb-gold-dark) 0%, var(--kb-gold) 100%)",color:"var(--kb-navy)",padding:"4rem 1rem",textAlign:"center"},children:a.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[a.jsx("div",{className:"badge badge-navy",style:{marginBottom:"1rem"},children:"OK Membership"}),a.jsx("h1",{style:{marginBottom:"1rem"},children:"Member Benefits & Rewards"}),a.jsx("p",{style:{fontSize:"1.1rem",opacity:.9},children:"The more you support local, the more you earn. It pays to be a Kinderhooker."})]})}),a.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:a.jsxs("div",{style:{maxWidth:"1100px",margin:"0 auto"},children:[a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem",textAlign:"center"},children:"Membership Tiers"}),a.jsx("p",{style:{color:"var(--kb-gray-500)",textAlign:"center",marginBottom:"2rem"},children:"Visit more businesses to unlock better rewards"}),a.jsx("div",{style:{overflowX:"auto"},children:a.jsxs("table",{style:{minWidth:"700px"},children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{style:{width:"25%"},children:"Tier"}),a.jsx("th",{style:{width:"20%"},children:"Requirement"}),a.jsx("th",{style:{width:"20%"},children:"Exchange Bonus"}),a.jsx("th",{style:{width:"35%"},children:"Perks"})]})}),a.jsxs("tbody",{children:[a.jsxs("tr",{children:[a.jsx("td",{children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(on,{size:18,color:"#888"}),a.jsx("span",{style:{fontWeight:"600",color:"#888"},children:"Curious"})]})}),a.jsx("td",{children:"1+ businesses"}),a.jsx("td",{children:a.jsx("span",{style:{color:"#888",fontWeight:"600"},children:"10%"})}),a.jsx("td",{style:{fontSize:"0.9rem",color:"var(--kb-gray-600)"},children:"Basic exchange bonus, check-in tracking"})]}),a.jsxs("tr",{children:[a.jsx("td",{children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(fr,{size:18,color:"#2e7d32"}),a.jsx("span",{style:{fontWeight:"600",color:"#2e7d32"},children:"Hooked"})]})}),a.jsx("td",{children:"5+ businesses"}),a.jsx("td",{children:a.jsx("span",{style:{color:"#2e7d32",fontWeight:"600"},children:"15%"})}),a.jsx("td",{style:{fontSize:"0.9rem",color:"var(--kb-gray-600)"},children:"Seasonal bonus events, member deals"})]}),a.jsxs("tr",{children:[a.jsx("td",{children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(hr,{size:18,color:"#1565c0"}),a.jsx("span",{style:{fontWeight:"600",color:"#1565c0"},children:"Line & Sinker"})]})}),a.jsx("td",{children:"10+ businesses"}),a.jsx("td",{children:a.jsx("span",{style:{color:"#1565c0",fontWeight:"600"},children:"20%"})}),a.jsx("td",{style:{fontSize:"0.9rem",color:"var(--kb-gray-600)"},children:"Priority access, exclusive events"})]}),a.jsxs("tr",{style:{background:"rgba(201, 162, 39, 0.1)"},children:[a.jsx("td",{children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(Gn,{size:18,color:"#c9a227"}),a.jsx("span",{style:{fontWeight:"600",color:"#c9a227"},children:"Village Patron"})]})}),a.jsx("td",{children:"15+ businesses"}),a.jsx("td",{children:a.jsx("span",{style:{color:"#c9a227",fontWeight:"600"},children:"25%"})}),a.jsx("td",{style:{fontSize:"0.9rem",color:"var(--kb-gray-600)"},children:"All perks + community recognition + VIP events"})]})]})]})}),a.jsx("div",{style:{textAlign:"center",marginTop:"2rem"},children:a.jsx(ue,{to:"/profile",className:"btn btn-primary",children:"Check My Progress"})})]})}),a.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:a.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem",textAlign:"center"},children:"All Member Benefits"}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1.5rem"},children:n.map((e,t)=>a.jsx(de.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:t*.1},viewport:{once:!0},className:"card",children:a.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[a.jsx("div",{style:{width:"50px",height:"50px",background:"var(--kb-navy)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:a.jsx(e.Icon,{size:24,color:"var(--kb-gold)",strokeWidth:1.5})}),a.jsxs("div",{children:[a.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"0.25rem",fontSize:"1.1rem"},children:e.title}),a.jsx("span",{className:"badge badge-gold",style:{marginBottom:"0.5rem"},children:e.highlight}),a.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem",marginTop:"0.5rem"},children:e.description})]})]})},t))})]})}),a.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:a.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto",textAlign:"center"},children:[a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"See Your Savings"}),a.jsx("p",{style:{color:"var(--kb-gray-500)",marginBottom:"2rem"},children:"Example: Exchange $100 USD"}),a.jsx("div",{className:"card",style:{padding:"2rem"},children:a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[{tier:"Curious",bonus:10,color:"#888"},{tier:"Hooked",bonus:15,color:"#2e7d32"},{tier:"Line & Sinker",bonus:20,color:"#1565c0"},{tier:"Village Patron",bonus:25,color:"#c9a227"}].map((e,t)=>a.jsxs("div",{style:{padding:"1rem",borderRadius:"8px",background:`${e.color}10`,border:`1px solid ${e.color}30`},children:[a.jsx("div",{style:{fontSize:"0.85rem",color:e.color,fontWeight:"600"},children:e.tier}),a.jsxs("div",{style:{fontFamily:"var(--font-display)",fontSize:"1.8rem",fontWeight:"700",color:e.color},children:["$",100+e.bonus]}),a.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:"in Kinderbucks"})]},t))})}),a.jsx("div",{style:{marginTop:"2rem"},children:a.jsx(ue,{to:"/exchange",className:"btn btn-gold",style:{padding:"1rem 2rem"},children:"Start Exchanging"})})]})}),a.jsxs("section",{style:{padding:"3rem 1rem",background:"var(--kb-green)",color:"var(--kb-white)",textAlign:"center"},children:[a.jsx("h3",{style:{marginBottom:"1rem"},children:"Start earning rewards today"}),a.jsx("p",{style:{opacity:.9,marginBottom:"1.5rem"},children:"Visit a participating business and scan their QR code to begin"}),a.jsx(ue,{to:"/businesses",className:"btn btn-gold",children:"Find Businesses Near You"})]}),a.jsx(Mn,{})]})}const ju="businesses";async function Vf(n){const e=st(Ae,ju,n),t=await eo(e);return t.exists()?{code:t.id,...t.data()}:null}async function qi(){const n=dr(Rt(Ae,ju),Wi("name"));return(await gn(n)).docs.map(t=>({code:t.id,...t.data()}))}async function pk(n,e,t){await Tl(st(Ae,ju,n),{code:n,name:e,category:t,isActive:!0,checkinCount:0,createdAt:ht()})}async function T9(n){const e=st(Ae,ju,n);await Dr(e,{checkinCount:Ko(1)})}async function I9(n,e){const t=st(Ae,ju,n);await Dr(t,{isActive:e})}async function C9(n){const e=await Vf(n);return e?{...e,kinderbucksBalance:e.kinderbucksBalance||0,lifetimeAccepted:e.lifetimeAccepted||0,lifetimeRedeemed:e.lifetimeRedeemed||0}:null}const Kp={food:{label:"Food & Drink",Icon:P2,color:"#e74c3c"},retail:{label:"Retail",Icon:u0,color:"#9b59b6"},services:{label:"Services",Icon:b2,color:"#3498db"},arts:{label:"Arts & Culture",Icon:C2,color:"#1abc9c"}};function j9(){const[n,e]=j.useState([]),[t,r]=j.useState(!0),[s,l]=j.useState("all");j.useEffect(()=>{async function d(){const m=await qi();e(m.filter(g=>g.isActive)),r(!1)}d()},[]);const c=s==="all"?n:n.filter(d=>d.category===s),h={total:n.length,food:n.filter(d=>d.category==="food").length,retail:n.filter(d=>d.category==="retail").length};return a.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[a.jsx(Nn,{}),a.jsx("section",{style:{background:"var(--kb-navy)",color:"var(--kb-white)",padding:"4rem 1rem",textAlign:"center"},children:a.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[a.jsx("h1",{style:{marginBottom:"1rem"},children:"For Local Businesses"}),a.jsx("p",{style:{color:"var(--kb-gray-300)",fontSize:"1.1rem",marginBottom:"2rem"},children:"Join the Kinderbucks network and connect with customers committed to shopping local"}),a.jsx(ue,{to:"/admin/businesses",className:"btn btn-gold",children:"Register Your Business"})]})}),a.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:a.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem",textAlign:"center"},children:"Why Accept Kinderbucks?"}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"2rem"},children:[{Icon:Nr,title:"Committed Customers",description:"Kinderbucks holders have already decided to spend locally. They're not comparison shopping online."},{Icon:NV,title:"Money Stays Local",description:"Unlike credit cards that send fees elsewhere, Kinderbucks keep circulating in our village economy."},{Icon:wV,title:"Free Marketing",description:"Get listed in our business directory, featured on our homepage, and promoted to all members."},{Icon:h3,title:"Community Standing",description:"Show customers you're invested in Kinderhook's future. Participating businesses are community leaders."},{Icon:Vi,title:"Easy Redemption",description:"Redeem Kinderbucks for USD at any time through our simple merchant portal. No waiting."},{Icon:a0,title:"Customer Insights",description:"Access check-in data and understand your customers' behavior across the village."}].map((d,m)=>a.jsxs(de.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:m*.1},viewport:{once:!0},className:"card",style:{textAlign:"center"},children:[a.jsx("div",{style:{width:"60px",height:"60px",background:"var(--kb-navy)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:a.jsx(d.Icon,{size:28,color:"var(--kb-gold)",strokeWidth:1.5})}),a.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:d.title}),a.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem"},children:d.description})]},m))})]})}),a.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:a.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem",textAlign:"center"},children:"How It Works"}),a.jsx("div",{style:{display:"grid",gap:"1.5rem"},children:[{step:1,title:"Register",desc:"Sign up as a participating business. It's free to join."},{step:2,title:"Get Your QR Code",desc:"We'll provide a unique check-in QR code for your location."},{step:3,title:"Display It",desc:"Put the QR code at your counter or entrance for customers to scan."},{step:4,title:"Accept Kinderbucks",desc:"Take Kinderbucks as payment, just like cash. Same denominations."},{step:5,title:"Redeem Anytime",desc:"Exchange accumulated Kinderbucks back to USD when you need."}].map((d,m)=>a.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center",background:"var(--kb-white)",padding:"1.5rem",borderRadius:"12px",boxShadow:"var(--shadow-sm)"},children:[a.jsx("div",{style:{width:"40px",height:"40px",background:"var(--kb-gold)",color:"var(--kb-navy)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"700",flexShrink:0},children:d.step}),a.jsxs("div",{children:[a.jsx("h4",{style:{color:"var(--kb-navy)",marginBottom:"0.25rem"},children:d.title}),a.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem",margin:0},children:d.desc})]})]},m))})]})}),a.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:a.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem",textAlign:"center"},children:"Participating Businesses"}),a.jsxs("p",{style:{color:"var(--kb-gray-500)",textAlign:"center",marginBottom:"2rem"},children:[h.total," businesses currently accepting Kinderbucks"]}),a.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center",marginBottom:"2rem",flexWrap:"wrap"},children:[a.jsxs("button",{onClick:()=>l("all"),className:s==="all"?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem"},children:["All (",h.total,")"]}),Object.entries(Kp).map(([d,m])=>a.jsxs("button",{onClick:()=>l(d),className:s===d?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem",display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(m.Icon,{size:16})," ",m.label]},d))]}),t?a.jsx("p",{style:{textAlign:"center"},children:"Loading businesses..."}):c.length===0?a.jsxs("p",{style:{textAlign:"center",color:"var(--kb-gray-500)"},children:["No businesses found. ",a.jsx(ue,{to:"/admin/businesses",children:"Add some!"})]}):a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:"1rem"},children:c.map((d,m)=>{const g=Kp[d.category]||Kp.services;return a.jsxs(de.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:m*.03},className:"card",style:{padding:"1.25rem"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[a.jsx("div",{style:{width:"40px",height:"40px",background:`${g.color}15`,borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(g.Icon,{size:20,color:g.color,strokeWidth:1.5})}),a.jsxs("div",{children:[a.jsx("h4",{style:{color:"var(--kb-navy)",margin:0,fontSize:"1rem"},children:d.name}),a.jsx("span",{style:{fontSize:"0.8rem",color:g.color},children:g.label})]})]}),d.checkinCount>0&&a.jsxs("div",{style:{marginTop:"0.75rem",fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:[d.checkinCount," check-ins"]})]},d.code)})})]})}),a.jsxs("section",{style:{padding:"3rem 1rem",background:"var(--kb-gold)",color:"var(--kb-navy)",textAlign:"center"},children:[a.jsx("h3",{style:{marginBottom:"1rem"},children:"Ready to join the network?"}),a.jsx("p",{style:{opacity:.9,marginBottom:"1.5rem"},children:"Registration is free. Start accepting Kinderbucks today."}),a.jsx(ue,{to:"/admin/businesses",className:"btn btn-primary",children:"Register Your Business"})]}),a.jsx(Mn,{})]})}const jT="members";function tf(){return qo.currentUser?qo.currentUser.uid:nf()}function nf(){let n=localStorage.getItem("kinderhooker_visitor_id");return n||(n="anon_"+Math.random().toString(36).substring(2,15),localStorage.setItem("kinderhooker_visitor_id",n)),n}async function Au(n){const e=st(Ae,jT,n),t=await eo(e);return t.exists()?{visitorId:t.id,...t.data()}:null}async function A9(n,e){const t=st(Ae,jT,n),r=await eo(t);if(r.exists()){const s=r.data(),l=s.businessesVisited||[],c=!l.includes(e),h=c?l.length+1:l.length,d=ty(h),m=d!==s.tier;return await Dr(t,{businessesVisited:zM(e),totalCheckins:Ko(1),tier:d,lastCheckin:ht()}),{isNewBusiness:c,tierChanged:m,oldTier:s.tier,newTier:d,businessesVisited:c?[...l,e]:l,totalCheckins:(s.totalCheckins||0)+1}}else{const s=ty(1);return await Tl(t,{visitorId:n,tier:s,businessesVisited:[e],totalCheckins:1,createdAt:ht(),lastCheckin:ht(),email:null}),{isNewBusiness:!0,tierChanged:!0,oldTier:null,newTier:s,businessesVisited:[e],totalCheckins:1}}}const R9={curious:on,hooked:fr,lineAndSinker:hr,patron:Gn};function P9(){const[n,e]=j.useState(null),[t,r]=j.useState(!0),[s,l]=j.useState(20),[c,h]=j.useState(!1),[d,m]=j.useState(!1);j.useEffect(()=>{async function N(){const V=nf(),P=await Au(V);e(P),r(!1)}N()},[]);const g=(n==null?void 0:n.tier)||"curious",y=lr[g]||lr.curious,x=n?y.bonus:.1,E=s*x,k=s+E,S=async()=>{h(!0);try{await jf(Rt(Ae,"exchanges"),{visitorId:nf(),usdAmount:s,bonusRate:x,bonusAmount:E,kinderbucksAmount:k,tier:g,status:"pending",createdAt:ht()}),m(!0)}catch(N){console.error("Exchange error:",N),alert("Error submitting exchange request")}h(!1)},I=[10,20,50,100];return a.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[a.jsx(Nn,{}),a.jsx("section",{style:{background:"linear-gradient(135deg, var(--kb-green) 0%, var(--kb-green-light) 100%)",color:"var(--kb-white)",padding:"3rem 1rem",textAlign:"center"},children:a.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto"},children:[a.jsx("h1",{style:{marginBottom:"0.5rem"},children:"Get Kinderbucks"}),a.jsx("p",{style:{opacity:.9},children:"Exchange USD for local currency with bonus value"})]})}),a.jsx("section",{style:{padding:"3rem 1rem",background:"var(--kb-cream)",flex:1},children:a.jsx("div",{style:{maxWidth:"500px",margin:"0 auto"},children:d?a.jsxs(de.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"card",style:{textAlign:"center",padding:"3rem 2rem"},children:[a.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:""}),a.jsx("h2",{style:{color:"var(--kb-green)",marginBottom:"1rem"},children:"Exchange Requested!"}),a.jsxs("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem"},children:["Your exchange request for ",a.jsxs("strong",{children:["$",s," USD"]})," "," ",a.jsxs("strong",{children:["$",k.toFixed(2)," Kinderbucks"]})," has been submitted."]}),a.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem",marginBottom:"2rem"},children:"Visit any exchange point to complete your transaction and receive your Kinderbucks."}),a.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[a.jsx("button",{onClick:()=>m(!1),className:"btn btn-primary",children:"Exchange More"}),a.jsx(ue,{to:"/account",className:"btn btn-secondary",children:"View Account"})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)",marginBottom:"0.25rem"},children:"Your Tier"}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(()=>{const N=R9[g]||on;return a.jsx(N,{size:28,color:y.color,strokeWidth:1.5})})(),a.jsx("span",{style:{fontWeight:"600",color:y.color,fontSize:"1.2rem"},children:y.name})]})]}),a.jsxs("div",{style:{textAlign:"right"},children:[a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)",marginBottom:"0.25rem"},children:"Bonus Rate"}),a.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:y.color},children:[Math.round(x*100),"%"]})]})]}),!n&&a.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"var(--kb-gray-50)",borderRadius:"8px",fontSize:"0.85rem",color:"var(--kb-gray-600)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(dV,{size:16,color:"var(--kb-gold)"})," ",a.jsx(ue,{to:"/profile",style:{color:"var(--kb-navy)"},children:"Visit businesses"})," to increase your tier and get better rates!"]})]}),a.jsxs("div",{className:"card",children:[a.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem"},children:"Exchange Calculator"}),a.jsxs("div",{style:{marginBottom:"1.5rem"},children:[a.jsx("label",{children:"Amount (USD)"}),a.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem"},children:I.map(N=>a.jsxs("button",{onClick:()=>l(N),className:s===N?"btn btn-primary":"btn btn-secondary",style:{flex:1,padding:"0.5rem"},children:["$",N]},N))}),a.jsx("input",{type:"number",value:s,onChange:N=>l(Math.max(1,Number(N.target.value))),min:"1",style:{width:"100%"}})]}),a.jsxs("div",{style:{background:"var(--kb-gray-50)",borderRadius:"12px",padding:"1.5rem",marginBottom:"1.5rem"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.75rem"},children:[a.jsx("span",{style:{color:"var(--kb-gray-600)"},children:"USD Amount"}),a.jsxs("span",{style:{fontWeight:"600"},children:["$",s.toFixed(2)]})]}),a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.75rem"},children:[a.jsxs("span",{style:{color:"var(--kb-gray-600)"},children:[y.name," Bonus (",Math.round(x*100),"%)"]}),a.jsxs("span",{style:{fontWeight:"600",color:"var(--kb-green)"},children:["+$",E.toFixed(2)]})]}),a.jsx("div",{className:"divider",style:{margin:"0.75rem 0"}}),a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsx("span",{style:{color:"var(--kb-navy)",fontWeight:"600"},children:"You Receive"}),a.jsxs("span",{style:{fontFamily:"var(--font-display)",fontSize:"1.8rem",fontWeight:"700",color:"var(--kb-gold-dark)"},children:["$",k.toFixed(2)]})]}),a.jsx("div",{style:{textAlign:"right",fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Kinderbucks"})]}),a.jsx("button",{onClick:S,disabled:c,className:"btn btn-gold",style:{width:"100%",padding:"1rem",fontSize:"1.1rem"},children:c?"Processing...":`Exchange $${s} for $${k.toFixed(2)} Kinderbucks`}),a.jsx("p",{style:{textAlign:"center",fontSize:"0.85rem",color:"var(--kb-gray-500)",marginTop:"1rem"},children:"Complete your exchange at any participating business or exchange point"})]}),a.jsxs("div",{className:"card",style:{marginTop:"1.5rem"},children:[a.jsx("h4",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Exchange Locations"}),a.jsxs("div",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem"},children:[a.jsxs("p",{style:{marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(ru,{size:16,color:"var(--kb-green)"})," ",a.jsx("strong",{children:"OK Pantry"})," - 2 Hudson Street"]}),a.jsxs("p",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(ru,{size:16,color:"var(--kb-green)"})," ",a.jsx("strong",{children:"Village Hall"})," - During events"]})]})]})]})})}),a.jsx(Mn,{})]})}const gk={curious:on,hooked:fr,lineAndSinker:hr,patron:Gn};function N9(){var N,V;const[n,e]=j.useState(null),[t,r]=j.useState([]),[s,l]=j.useState([]),[c,h]=j.useState(!0),[d,m]=j.useState("overview");if(j.useEffect(()=>{async function P(){const K=nf(),z=await Au(K),W=await qi();try{const A=dr(Rt(Ae,"exchanges"),li("visitorId","==",K),Wi("createdAt","desc")),C=await gn(A);l(C.docs.map(M=>({id:M.id,...M.data()})))}catch(A){console.error("Error loading exchanges:",A)}e(z),r(W),h(!1)}P()},[]),c)return a.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[a.jsx(Nn,{}),a.jsx("div",{className:"page page-center",style:{flex:1},children:a.jsx("div",{style:{fontSize:"2rem"},children:"Loading..."})}),a.jsx(Mn,{})]});const g=(n==null?void 0:n.tier)||null,y=g?lr[g]:null,x=((N=n==null?void 0:n.businessesVisited)==null?void 0:N.length)||0,E=CT(x),k=((V=n==null?void 0:n.businessesVisited)==null?void 0:V.map(P=>{const K=t.find(z=>z.code===P);return K?K.name:P}))||[],S=t.filter(P=>{var K;return P.isActive&&!((K=n==null?void 0:n.businessesVisited)!=null&&K.includes(P.code))}),I=s.reduce((P,K)=>P+(K.kinderbucksAmount||0),0);return a.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[a.jsx(Nn,{}),a.jsx("section",{style:{background:"var(--kb-navy)",color:"var(--kb-white)",padding:"2rem 1rem"},children:a.jsx("div",{style:{maxWidth:"800px",margin:"0 auto"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[a.jsx("div",{style:{width:"80px",height:"80px",background:y?y.color:"var(--kb-gray-500)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:(()=>{const P=g&&gk[g]?gk[g]:on;return a.jsx(P,{size:40,color:"white",strokeWidth:1.5})})()}),a.jsxs("div",{style:{flex:1},children:[a.jsx("div",{style:{fontSize:"0.9rem",color:"var(--kb-gray-300)",marginBottom:"0.25rem"},children:"OK Membership"}),a.jsx("h1",{style:{fontSize:"1.5rem",marginBottom:"0.25rem"},children:y?y.name:"New Member"}),a.jsx("div",{style:{fontSize:"0.9rem",color:"var(--kb-gold)"},children:y?`${Math.round(y.bonus*100)}% Exchange Bonus`:"Start exploring to earn rewards"})]}),a.jsx(ue,{to:"/exchange",className:"btn btn-gold",children:"Get Kinderbucks"})]})})}),a.jsx("div",{style:{background:"var(--kb-white)",borderBottom:"1px solid var(--kb-gray-200)",position:"sticky",top:"70px",zIndex:50},children:a.jsx("div",{style:{maxWidth:"800px",margin:"0 auto",display:"flex",gap:"2rem",padding:"0 1rem"},children:["overview","progress","history"].map(P=>a.jsx("button",{onClick:()=>m(P),style:{background:"none",border:"none",padding:"1rem 0",fontSize:"0.95rem",fontWeight:d===P?"600":"400",color:d===P?"var(--kb-navy)":"var(--kb-gray-500)",borderBottom:d===P?"2px solid var(--kb-gold)":"2px solid transparent",cursor:"pointer",textTransform:"capitalize"},children:P},P))})}),a.jsx("section",{style:{padding:"2rem 1rem",background:"var(--kb-cream)",flex:1},children:a.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[d==="overview"&&a.jsxs(de.div,{initial:{opacity:0},animate:{opacity:1},children:[a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[a.jsxs("div",{className:"card",style:{textAlign:"center"},children:[a.jsx("div",{className:"stat-value",children:x}),a.jsx("div",{className:"stat-label",children:"Businesses Visited"})]}),a.jsxs("div",{className:"card",style:{textAlign:"center"},children:[a.jsx("div",{className:"stat-value",children:(n==null?void 0:n.totalCheckins)||0}),a.jsx("div",{className:"stat-label",children:"Total Check-ins"})]}),a.jsxs("div",{className:"card",style:{textAlign:"center"},children:[a.jsxs("div",{className:"stat-value",style:{color:"var(--kb-gold)"},children:["$",I.toFixed(0)]}),a.jsx("div",{className:"stat-label",children:"Kinderbucks Exchanged"})]})]}),a.jsxs("div",{className:"card",children:[a.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Quick Actions"}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"0.75rem"},children:[a.jsxs(ue,{to:"/exchange",className:"btn btn-gold",style:{textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[a.jsx(Vi,{size:18})," Exchange"]}),a.jsxs(ue,{to:"/businesses",className:"btn btn-secondary",style:{textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[a.jsx(St,{size:18})," Find Businesses"]}),a.jsxs(ue,{to:"/benefits",className:"btn btn-secondary",style:{textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[a.jsx(d0,{size:18})," View Benefits"]})]})]})]}),d==="progress"&&a.jsxs(de.div,{initial:{opacity:0},animate:{opacity:1},children:[y&&a.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[a.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Tier Progress"}),E.nextTier?a.jsxs(a.Fragment,{children:[a.jsxs("div",{style:{marginBottom:"0.5rem"},children:[a.jsx("span",{style:{color:y.color,fontWeight:"600"},children:y.name}),a.jsx("span",{style:{color:"var(--kb-gray-400)",margin:"0 0.5rem"},children:""}),a.jsx("span",{style:{color:E.nextTier.color,fontWeight:"600"},children:E.nextTier.name})]}),a.jsx("div",{className:"progress-bar",style:{height:"12px",marginBottom:"0.5rem"},children:a.jsx("div",{className:"progress-bar-fill",style:{width:`${E.progress}%`,background:y.color}})}),a.jsxs("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:[E.remaining," more business",E.remaining!==1?"es":""," to reach ",E.nextTier.name]})]}):a.jsxs("p",{style:{color:"var(--kb-gold)",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(Gn,{size:20})," Maximum tier reached! You're a Village Patron!"]})]}),a.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[a.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(Ai,{size:20,color:"var(--kb-green)"})," Businesses Visited (",k.length,")"]}),k.length>0?a.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:k.map((P,K)=>a.jsxs("span",{style:{background:"#d4edda",color:"var(--kb-green)",padding:"0.4rem 0.75rem",borderRadius:"100px",fontSize:"0.85rem",display:"inline-flex",alignItems:"center",gap:"0.25rem"},children:[a.jsx(Ai,{size:14})," ",P]},K))}):a.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"No businesses visited yet"})]}),S.length>0&&a.jsxs("div",{className:"card",children:[a.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(_2,{size:20,color:"var(--kb-navy)"})," Still to Explore (",S.length,")"]}),a.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:[S.slice(0,12).map(P=>a.jsx("span",{style:{background:"var(--kb-gray-100)",color:"var(--kb-gray-600)",padding:"0.4rem 0.75rem",borderRadius:"100px",fontSize:"0.85rem"},children:P.name},P.code)),S.length>12&&a.jsxs("span",{style:{color:"var(--kb-gray-500)",padding:"0.4rem"},children:["+",S.length-12," more"]})]})]})]}),d==="history"&&a.jsx(de.div,{initial:{opacity:0},animate:{opacity:1},children:a.jsxs("div",{className:"card",children:[a.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Exchange History"}),s.length>0?a.jsx("div",{children:s.map((P,K)=>{var z,W,A,C;return a.jsxs("div",{style:{padding:"1rem 0",borderBottom:K<s.length-1?"1px solid var(--kb-gray-100)":"none",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsxs("div",{children:[a.jsxs("div",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:["$",P.usdAmount,"  $",(z=P.kinderbucksAmount)==null?void 0:z.toFixed(2)," KB"]}),a.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:[((C=(A=(W=P.createdAt)==null?void 0:W.toDate)==null?void 0:A.call(W))==null?void 0:C.toLocaleDateString())||"Pending","  ",Math.round(P.bonusRate*100),"% bonus"]})]}),a.jsx("span",{className:"badge",style:{background:P.status==="completed"?"#d4edda":"#fff3cd",color:P.status==="completed"?"var(--kb-green)":"#856404"},children:P.status})]},P.id)})}):a.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"var(--kb-gray-500)"},children:[a.jsx("p",{style:{marginBottom:"1rem"},children:"No exchanges yet"}),a.jsx(ue,{to:"/exchange",className:"btn btn-gold",children:"Make Your First Exchange"})]})]})})]})}),a.jsx(Mn,{})]})}const yk={curious:on,hooked:fr,lineAndSinker:hr,patron:Gn},Ic={curious:"#888888",hooked:"#2e7d32",lineAndSinker:"#1565c0",patron:"#c9a227"};function M9(){var S,I;const{user:n,profile:e,isAuthenticated:t}=Vr(),[r,s]=j.useState(null),[l,c]=j.useState([]),[h,d]=j.useState(!0);j.useEffect(()=>{async function N(){const V=tf(),P=await Au(V),K=await qi();s(P),c(K.filter(z=>z.isActive)),d(!1)}N()},[n]);const m=(r==null?void 0:r.tier)||"curious",g=lr[m],y=((S=r==null?void 0:r.businessesVisited)==null?void 0:S.length)||0,x=CT(y),E=((I=r==null?void 0:r.businessesVisited)==null?void 0:I.map(N=>{const V=l.find(P=>P.code===N);return V?V.name:N}))||[],k=l.filter(N=>{var V;return!((V=r==null?void 0:r.businessesVisited)!=null&&V.includes(N.code))});return a.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[a.jsx(Nn,{}),a.jsx("main",{style:{flex:1,background:"var(--kb-cream)",padding:"2rem 1rem"},children:a.jsx("div",{style:{maxWidth:"600px",margin:"0 auto"},children:h?a.jsx("div",{style:{textAlign:"center",padding:"4rem 0"},children:a.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading your profile..."})}):r?a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[t&&e&&a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1.5rem",padding:"1rem",background:"white",borderRadius:"12px"},children:[a.jsx("div",{style:{width:"48px",height:"48px",background:"var(--kb-gray-100)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(el,{size:24,color:"var(--kb-gray-500)"})}),a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:e.displayName||n.email}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:n.email})]})]}),a.jsxs(de.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.1},style:{background:`linear-gradient(135deg, ${Ic[m]} 0%, ${Ic[m]}dd 100%)`,borderRadius:"20px",padding:"2rem",color:"white",textAlign:"center",marginBottom:"1.5rem",boxShadow:"0 4px 20px rgba(0,0,0,0.2)"},children:[(()=>{const N=yk[m]||on;return a.jsx(N,{size:48,color:"white",strokeWidth:1.5,style:{marginBottom:"0.5rem"}})})(),a.jsx("div",{style:{fontSize:"1.8rem",fontWeight:"bold",marginBottom:"0.25rem"},children:g.name}),a.jsxs("div",{style:{opacity:.9,fontSize:"1rem"},children:[Math.round(g.bonus*100),"% Kinderbuck Exchange Bonus"]})]}),a.jsxs(ue,{to:"/card",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",width:"100%",padding:"1.25rem",background:"linear-gradient(135deg, var(--kb-gold) 0%, #d4af37 100%)",color:"var(--kb-navy)",borderRadius:"16px",fontSize:"1.25rem",fontWeight:"700",textDecoration:"none",marginBottom:"1.5rem",boxShadow:"0 4px 12px rgba(201, 162, 39, 0.3)"},children:[a.jsx(Ig,{size:28}),"SHOW MY OK CARD"]}),a.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[a.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",textAlign:"center"},children:[y," Business",y!==1?"es":""," Visited"]}),x.nextTier?a.jsxs(a.Fragment,{children:[a.jsx("div",{style:{background:"var(--kb-gray-100)",borderRadius:"10px",height:"28px",overflow:"hidden",marginBottom:"0.75rem"},children:a.jsxs(de.div,{initial:{width:0},animate:{width:`${x.progress}%`},transition:{delay:.3,duration:.8},style:{background:`linear-gradient(90deg, ${Ic[m]}, ${x.nextTier.color})`,height:"100%",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"0.85rem",fontWeight:"bold"},children:[y,"/",x.nextTier.threshold]})}),a.jsxs("p",{style:{color:"var(--kb-gray-600)",textAlign:"center"},children:[a.jsx("strong",{children:x.remaining})," more to reach"," ",a.jsx("strong",{style:{color:x.nextTier.color},children:x.nextTier.name})]})]}):a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",color:"var(--kb-gold-dark)",fontWeight:"600"},children:[a.jsx(Gn,{size:20})," Maximum tier reached! You're a true Village Patron!"]})]}),E.length>0&&a.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[a.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(Ai,{size:20,color:"var(--kb-green)"})," Visited"]}),a.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:E.map((N,V)=>a.jsxs("span",{style:{padding:"0.4rem 0.8rem",background:"#e8f5e9",borderRadius:"6px",color:"#2e7d32",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:[a.jsx(Ai,{size:14})," ",N]},V))})]}),k.length>0&&a.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[a.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(_2,{size:20})," Still to Explore (",k.length,")"]}),a.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:[k.slice(0,10).map(N=>a.jsx("span",{style:{padding:"0.4rem 0.8rem",background:"var(--kb-gray-100)",borderRadius:"6px",color:"var(--kb-gray-600)",fontSize:"0.9rem"},children:N.name},N.code)),k.length>10&&a.jsxs("span",{style:{padding:"0.4rem 0.8rem",color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:["+",k.length-10," more"]})]}),a.jsxs(ue,{to:"/businesses",style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",marginTop:"1rem",color:"var(--kb-navy)",fontWeight:"500",fontSize:"0.9rem"},children:["View all businesses ",a.jsx(Tg,{size:16})]})]}),a.jsxs("div",{style:{textAlign:"center",color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:["Total check-ins: ",r.totalCheckins||0]}),!t&&a.jsxs("div",{style:{marginTop:"2rem",padding:"1rem",background:"rgba(201, 162, 39, 0.1)",borderRadius:"12px",textAlign:"center"},children:[a.jsx("p",{style:{color:"var(--kb-gray-700)",marginBottom:"0.75rem"},children:"Sign in to save your progress across devices"}),a.jsxs(ue,{to:"/login",className:"btn btn-gold",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(dl,{size:18})," Sign In"]})]})]}):a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[a.jsxs("div",{className:"card",style:{padding:"2rem",textAlign:"center",marginBottom:"2rem"},children:[a.jsx("div",{style:{width:"80px",height:"80px",background:"linear-gradient(135deg, var(--kb-navy) 0%, var(--kb-navy-light) 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.5rem"},children:a.jsx(d0,{size:36,color:"var(--kb-gold)"})}),a.jsx("h1",{style:{color:"var(--kb-navy)",marginBottom:"0.75rem"},children:"Welcome to Kinderbucks!"}),a.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem",fontSize:"1.05rem"},children:"You haven't checked in anywhere yet. Visit a local business and scan their QR code to start building your Kinderhooker status!"}),!t&&a.jsxs("div",{style:{background:"rgba(201, 162, 39, 0.1)",borderRadius:"12px",padding:"1rem",marginBottom:"1.5rem"},children:[a.jsx("p",{style:{color:"var(--kb-gray-700)",fontSize:"0.9rem",marginBottom:"0.75rem"},children:"Sign in to save your progress across devices"}),a.jsxs(ue,{to:"/login",className:"btn btn-gold",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(dl,{size:18})," Sign In or Create Account"]})]}),a.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap",justifyContent:"center"},children:[a.jsxs(ue,{to:"/businesses",className:"btn btn-primary",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(ru,{size:18})," Find Businesses"]}),a.jsxs(ue,{to:"/card",className:"btn btn-gold",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(Ig,{size:18})," View My Card"]})]})]}),a.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[a.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",textAlign:"center"},children:"How to Get Started"}),a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[{step:1,text:"Visit any participating Kinderhook business",icon:St},{step:2,text:"Scan their check-in QR code with your phone",icon:on},{step:3,text:"Build your tier to unlock better exchange rates",icon:$s}].map(N=>a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[a.jsx("div",{style:{width:"44px",height:"44px",background:"var(--kb-navy)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:a.jsx(N.icon,{size:20,color:"var(--kb-gold)"})}),a.jsx("div",{style:{color:"var(--kb-gray-700)"},children:N.text})]},N.step))})]}),a.jsxs("div",{style:{marginTop:"2rem"},children:[a.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",textAlign:"center"},children:"Tier Rewards"}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.75rem"},children:Object.entries(lr).map(([N,V])=>{const P=yk[N];return a.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"1rem",textAlign:"center",border:"1px solid var(--kb-gray-200)"},children:[a.jsx(P,{size:24,color:Ic[N],style:{marginBottom:"0.5rem"}}),a.jsx("div",{style:{fontWeight:"600",color:Ic[N],marginBottom:"0.25rem"},children:V.name}),a.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:[Math.round(V.bonus*100),"% bonus"]})]},N)})})]})]})})}),a.jsx(Mn,{})]})}function D9(){var P,K;const[n,e]=j.useState("login"),[t,r]=j.useState(""),[s,l]=j.useState(""),[c,h]=j.useState(""),[d,m]=j.useState(""),[g,y]=j.useState(!1),x=qs(),E=mr(),{isAuthenticated:k}=Vr(),N=new URLSearchParams(E.search).get("redirect")||((K=(P=E.state)==null?void 0:P.from)==null?void 0:K.pathname)||"/card",V=async z=>{z.preventDefault(),m(""),y(!0);try{if(n==="signup"){if(!c.trim()){m("Please enter your name"),y(!1);return}await XM(t,s,c)}else await JM(t,s);x(N,{replace:!0})}catch(W){console.error("Auth error:",W),W.code==="auth/email-already-in-use"?m("An account with this email already exists"):W.code==="auth/weak-password"?m("Password should be at least 6 characters"):W.code==="auth/invalid-email"?m("Please enter a valid email address"):W.code==="auth/user-not-found"||W.code==="auth/wrong-password"||W.code==="auth/invalid-credential"?m("Invalid email or password"):m("Something went wrong. Please try again.")}y(!1)};return a.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[a.jsx(Nn,{}),a.jsx("section",{style:{flex:1,background:"linear-gradient(180deg, var(--kb-cream) 0%, var(--kb-white) 100%)",padding:"3rem 1rem",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{width:"100%",maxWidth:"420px"},children:[a.jsxs("div",{className:"card",style:{padding:"2rem"},children:[a.jsxs("div",{style:{display:"flex",marginBottom:"2rem",background:"var(--kb-gray-100)",borderRadius:"10px",padding:"4px"},children:[a.jsxs("button",{onClick:()=>{e("login"),m("")},style:{flex:1,padding:"0.75rem",border:"none",borderRadius:"8px",background:n==="login"?"white":"transparent",color:n==="login"?"var(--kb-navy)":"var(--kb-gray-500)",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",boxShadow:n==="login"?"0 1px 3px rgba(0,0,0,0.1)":"none",transition:"all 0.2s"},children:[a.jsx(dl,{size:18})," Sign In"]}),a.jsxs("button",{onClick:()=>{e("signup"),m("")},style:{flex:1,padding:"0.75rem",border:"none",borderRadius:"8px",background:n==="signup"?"white":"transparent",color:n==="signup"?"var(--kb-navy)":"var(--kb-gray-500)",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",boxShadow:n==="signup"?"0 1px 3px rgba(0,0,0,0.1)":"none",transition:"all 0.2s"},children:[a.jsx(Kh,{size:18})," Sign Up"]})]}),a.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:n==="login"?"Welcome Back":"Join Kinderbucks"}),a.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.95rem"},children:n==="login"?"Sign in to access your account":"Create an account to track your Kinderhooker status"})]}),d&&a.jsxs(de.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},style:{background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",padding:"0.75rem 1rem",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem",color:"#dc2626",fontSize:"0.9rem"},children:[a.jsx(Vs,{size:18}),d]}),a.jsxs("form",{onSubmit:V,children:[n==="signup"&&a.jsxs("div",{style:{marginBottom:"1rem"},children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Your Name"}),a.jsxs("div",{style:{position:"relative"},children:[a.jsx(el,{size:18,color:"var(--kb-gray-400)",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)"}}),a.jsx("input",{type:"text",value:c,onChange:z=>h(z.target.value),placeholder:"Jane Smith",style:{width:"100%",paddingLeft:"40px"},required:n==="signup"})]})]}),a.jsxs("div",{style:{marginBottom:"1rem"},children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Email"}),a.jsxs("div",{style:{position:"relative"},children:[a.jsx(I2,{size:18,color:"var(--kb-gray-400)",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)"}}),a.jsx("input",{type:"email",value:t,onChange:z=>r(z.target.value),placeholder:"you@example.com",style:{width:"100%",paddingLeft:"40px"},required:!0})]})]}),a.jsxs("div",{style:{marginBottom:"1.5rem"},children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Password"}),a.jsxs("div",{style:{position:"relative"},children:[a.jsx(mV,{size:18,color:"var(--kb-gray-400)",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)"}}),a.jsx("input",{type:"password",value:s,onChange:z=>l(z.target.value),placeholder:"",style:{width:"100%",paddingLeft:"40px"},required:!0,minLength:6})]}),n==="signup"&&a.jsx("p",{style:{marginTop:"0.5rem",fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:"At least 6 characters"})]}),a.jsx("button",{type:"submit",className:"btn btn-gold",disabled:g,style:{width:"100%",padding:"0.875rem",fontSize:"1rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:g?a.jsxs(a.Fragment,{children:[a.jsx(c0,{size:20,className:"animate-spin",style:{animation:"spin 1s linear infinite"}}),n==="login"?"Signing in...":"Creating account..."]}):a.jsxs(a.Fragment,{children:[n==="login"?a.jsx(dl,{size:20}):a.jsx(Kh,{size:20}),n==="login"?"Sign In":"Create Account"]})})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",margin:"1.5rem 0",gap:"1rem"},children:[a.jsx("div",{style:{flex:1,height:"1px",background:"var(--kb-gray-200)"}}),a.jsx("span",{style:{color:"var(--kb-gray-400)",fontSize:"0.85rem"},children:"or"}),a.jsx("div",{style:{flex:1,height:"1px",background:"var(--kb-gray-200)"}})]}),a.jsxs("button",{type:"button",onClick:async()=>{m(""),y(!0);try{await ZM(),x(N,{replace:!0})}catch(z){console.error("Google sign-in error:",z),z.code==="auth/popup-closed-by-user"?m("Sign-in cancelled"):m("Could not sign in with Google. Please try again.")}y(!1)},disabled:g,style:{width:"100%",padding:"0.75rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",background:"white",border:"1px solid var(--kb-gray-300)",borderRadius:"8px",cursor:"pointer",fontSize:"0.95rem",fontWeight:"500",color:"var(--kb-gray-700)",transition:"all 0.2s"},children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",children:[a.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),a.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),a.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),a.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),a.jsx("div",{style:{marginTop:"1rem"},children:a.jsx(ue,{to:"/profile",style:{display:"block",textAlign:"center",color:"var(--kb-gray-500)",fontSize:"0.85rem",textDecoration:"none"},children:"Continue as guest (limited features)"})})]}),a.jsx("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"rgba(201, 162, 39, 0.1)",borderRadius:"12px",textAlign:"center"},children:a.jsx("p",{style:{color:"var(--kb-gray-700)",fontSize:"0.9rem",margin:0},children:"Create an account to sync your Kinderhooker status across devices and never lose your tier progress!"})})]})}),a.jsx(Mn,{}),a.jsx("style",{children:`
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
      `})]})}const V9={curious:on,hooked:fr,lineAndSinker:hr,patron:Gn},L9={curious:{primary:"#6b7280",secondary:"#9ca3af",bg:"#f3f4f6"},hooked:{primary:"#16a34a",secondary:"#22c55e",bg:"#dcfce7"},lineAndSinker:{primary:"#2563eb",secondary:"#3b82f6",bg:"#dbeafe"},patron:{primary:"#ca8a04",secondary:"#eab308",bg:"#fef3c7"}};function O9(){var S;const{user:n,profile:e,isAuthenticated:t}=Vr(),[r,s]=j.useState(null),[l,c]=j.useState(!0);j.useEffect(()=>{async function I(){const N=tf(),V=await Au(N);s(V),c(!1)}I()},[n]);const h=(r==null?void 0:r.tier)||"curious",d=lr[h],m=L9[h],g=V9[h],y=((S=r==null?void 0:r.businessesVisited)==null?void 0:S.length)||0,x=Math.round(d.bonus*100),E=tf(),k=E?`OK-${E.substring(0,6).toUpperCase()}`:"OK-GUEST";return l?a.jsx("div",{style:{minHeight:"100vh",background:"var(--kb-navy)",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx("div",{style:{color:"white",fontSize:"1.5rem"},children:"Loading..."})}):a.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(180deg, var(--kb-navy) 0%, #1a3a5c 100%)",padding:"1rem",display:"flex",flexDirection:"column"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[a.jsxs(ue,{to:"/map",style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",color:"white",opacity:.8,textDecoration:"none",fontSize:"1rem"},children:[a.jsx(ID,{size:20})," Village Map"]}),a.jsx(ue,{to:"/profile",style:{color:"white",opacity:.8,textDecoration:"none",fontSize:"1rem"},children:"My Profile"})]}),a.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsxs(de.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},style:{width:"100%",maxWidth:"380px"},children:[a.jsxs("div",{style:{background:"white",borderRadius:"20px",overflow:"hidden",boxShadow:"0 20px 60px rgba(0,0,0,0.3)",border:"3px solid var(--kb-gold)"},children:[a.jsxs("div",{style:{background:"var(--kb-navy)",padding:"1.25rem 1.5rem",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[a.jsxs("div",{children:[a.jsx("div",{style:{color:"var(--kb-gold)",fontFamily:"var(--font-display)",fontWeight:"700",fontSize:"1.5rem",letterSpacing:"0.02em"},children:"KINDERBUCKS"}),a.jsx("div",{style:{color:"rgba(255,255,255,0.7)",fontSize:"0.8rem",marginTop:"0.1rem"},children:"OK MEMBER CARD"})]}),a.jsx("div",{style:{width:"50px",height:"50px",background:"var(--kb-gold)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--kb-navy)",fontFamily:"var(--font-display)",fontWeight:"700",fontSize:"1.75rem"},children:"K"})]}),a.jsxs("div",{style:{padding:"1.5rem"},children:[a.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"600",color:"var(--kb-navy)",marginBottom:"0.25rem"},children:t&&(e!=null&&e.displayName)?e.displayName:"OK Member"}),a.jsx("div",{style:{fontFamily:"monospace",fontSize:"1.1rem",color:"var(--kb-gray-500)",marginBottom:"1.5rem"},children:k}),a.jsxs("div",{style:{background:`linear-gradient(135deg, ${m.primary} 0%, ${m.secondary} 100%)`,borderRadius:"16px",padding:"1.5rem",textAlign:"center",color:"white",marginBottom:"1.5rem"},children:[a.jsx(g,{size:40,strokeWidth:1.5,style:{marginBottom:"0.5rem"}}),a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",textTransform:"uppercase",marginBottom:"0.25rem"},children:d.name}),a.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"800",lineHeight:1},children:[x,"%"]}),a.jsx("div",{style:{fontSize:"1rem",opacity:.9,marginTop:"0.25rem"},children:"Exchange Bonus"})]}),a.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"2rem",padding:"1rem 0",borderTop:"1px solid var(--kb-gray-200)",borderBottom:"1px solid var(--kb-gray-200)",marginBottom:"1.5rem"},children:[a.jsxs("div",{style:{textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:y}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Businesses"})]}),a.jsxs("div",{style:{textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:(r==null?void 0:r.totalCheckins)||0}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Check-ins"})]})]}),a.jsxs("div",{style:{background:"var(--kb-cream)",borderRadius:"12px",padding:"1rem",textAlign:"center"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"0.5rem",color:"var(--kb-navy)",fontWeight:"600"},children:[a.jsx(Rr,{size:20}),"How to use"]}),a.jsxs("p",{style:{fontSize:"0.95rem",color:"var(--kb-gray-600)",margin:0,lineHeight:1.5},children:["Scan the business QR code",a.jsx("br",{}),"to check in and get your discount code"]})]})]}),a.jsx("div",{style:{background:"var(--kb-cream)",padding:"0.75rem 1.5rem",textAlign:"center",borderTop:"1px solid var(--kb-gray-200)"},children:a.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:"Village of Kinderhook  Est. 2026"})})]}),a.jsxs(ue,{to:"/businesses",className:"btn btn-gold",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",width:"100%",marginTop:"1.5rem",padding:"1rem",fontSize:"1.1rem"},children:[a.jsx(Rr,{size:22}),"Find a Business to Check In"]})]})})]})}const Ru="kinderbucks",B9="scans";async function AT(n){const e=st(Ae,Ru,n),t=await eo(e);return t.exists()?{serial:t.id,...t.data()}:null}async function RT(){const n=dr(Rt(Ae,Ru),Wi("serial"));return(await gn(n)).docs.map(t=>({serial:t.id,...t.data()}))}async function z9(n,e){const t=n.map(r=>Tl(st(Ae,Ru,r),{serial:r,denomination:e,status:"draft",scanCount:0,createdAt:ht()}));await Promise.all(t)}async function F9(n,e,t=null){const r=st(Ae,Ru,n),s={status:e,issuedAt:ht(),...t&&{issuedTo:t}};await Dr(r,s)}async function U9(n){const e=st(Ae,Ru,n);await Dr(e,{scanCount:Ko(1),lastScanned:ht(),status:"active"}),await jf(Rt(Ae,B9),{serial:n,scannedAt:ht(),userAgent:navigator.userAgent||null})}async function W9(n){const e=await AT(n);return e?e.status!=="active"?{valid:!1,error:`Kinderbuck status is "${e.status}" - must be "active"`}:e.currentHolder&&e.holderType==="business"?{valid:!1,error:"Kinderbuck is already held by a business"}:{valid:!0,kb:e}:{valid:!1,error:"Kinderbuck not found"}}function PT(){const[n,e]=j.useState([]);return j.useEffect(()=>{const t=["#2d5a27","#c9a227","#4a7c43","#d4af37","#5c4033"],r=Array.from({length:50},(s,l)=>({id:l,x:Math.random()*100,color:t[Math.floor(Math.random()*t.length)],delay:Math.random()*.5,duration:2+Math.random()*2,size:8+Math.random()*8}));e(r)},[]),a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,pointerEvents:"none",overflow:"hidden",zIndex:100},children:n.map(t=>a.jsx(de.div,{initial:{y:-20,x:`${t.x}vw`,opacity:1,rotate:0},animate:{y:"110vh",rotate:360*(Math.random()>.5?1:-1),opacity:[1,1,0]},transition:{duration:t.duration,delay:t.delay,ease:"linear"},style:{position:"absolute",width:t.size,height:t.size,background:t.color,borderRadius:Math.random()>.5?"50%":"2px"}},t.id))})}const vk={1:{bg:"#d4edda",text:"#155724"},5:{bg:"#cce5ff",text:"#004085"},10:{bg:"#e2d5e7",text:"#4a235a"},20:{bg:"#fff3cd",text:"#856404"}};function $9({kinderbuck:n}){const e=vk[n.denomination]||vk[5];return a.jsxs(de.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",duration:.5},className:"card",style:{textAlign:"center",maxWidth:"400px",background:e.bg},children:[a.jsxs(de.div,{initial:{y:-20},animate:{y:0},transition:{delay:.2},children:[a.jsxs("h1",{style:{color:e.text,fontSize:"3rem",marginBottom:"0.5rem"},children:["$",n.denomination]}),a.jsx("p",{style:{fontFamily:"monospace",fontSize:"1.5rem",color:e.text},children:n.serial})]}),a.jsx(de.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},style:{marginTop:"1.5rem"},children:a.jsx("div",{style:{display:"inline-block",padding:"0.5rem 1rem",background:"rgba(255,255,255,0.7)",borderRadius:"20px",color:"var(--kb-green)",fontWeight:"bold"},children:"VERIFIED AUTHENTIC"})}),a.jsxs(de.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},style:{marginTop:"1.5rem",fontSize:"0.9rem",opacity:.8},children:[a.jsxs("p",{children:["Status: ",a.jsx("strong",{children:n.status})]}),n.issuedAt&&a.jsxs("p",{children:["Issued: ",new Date(n.issuedAt.seconds*1e3).toLocaleDateString()]}),a.jsxs("p",{children:["Scans: ",n.scanCount||1]})]}),a.jsx(de.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.8,type:"spring"},style:{marginTop:"1.5rem"},children:a.jsx("iframe",{src:"https://giphy.com/embed/B1txHfofr9y08bDB8b",width:"200",height:"200",frameBorder:"0",style:{borderRadius:"12px",pointerEvents:"none"},allowFullScreen:!0})})]})}function H9(){const{serial:n}=oy(),[e,t]=j.useState(null),[r,s]=j.useState(!0),[l,c]=j.useState(null);return j.useEffect(()=>{async function h(){try{const d=await AT(n);d?(t(d),await U9(n)):c("not_found")}catch(d){console.error("Verification error:",d),c("error")}finally{s(!1)}}h()},[n]),r?a.jsxs("div",{className:"page page-center",children:[a.jsx(de.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},style:{fontSize:"3rem"},children:"$"}),a.jsxs("p",{style:{marginTop:"1rem"},children:["Verifying ",n,"..."]})]}):l==="not_found"?a.jsxs("div",{className:"page page-center",children:[a.jsx("h1",{style:{color:"#c0392b"},children:"Not Found"}),a.jsxs("p",{children:["Serial ",a.jsx("strong",{children:n})," is not a valid Kinderbuck."]})]}):l?a.jsxs("div",{className:"page page-center",children:[a.jsx("h1",{style:{color:"#c0392b"},children:"Error"}),a.jsx("p",{children:"Something went wrong verifying this Kinderbuck."})]}):a.jsxs("div",{className:"page page-center",children:[a.jsx(PT,{}),a.jsx($9,{kinderbuck:e})]})}const Lf="checkins",K9=3600*1e3;async function q9(n,e){var t;try{const r=new Date(Date.now()-K9),s=dr(Rt(Ae,Lf),li("visitorId","==",n),li("businessCode","==",e)),l=await gn(s);if(l.empty)return!1;for(const c of l.docs)if((((t=c.data().timestamp)==null?void 0:t.toDate())||new Date(0))>r)return!0;return!1}catch(r){return console.error("hasRecentCheckin error (allowing checkin):",r),!1}}async function G9(n,e,t){await jf(Rt(Ae,Lf),{visitorId:n,businessCode:e,timestamp:ht(),kinderbucksMatched:!1,boostApplied:0,memberTier:t||"curious"})}async function NT(n){try{const e=dr(Rt(Ae,Lf),li("businessCode","==",n));return(await gn(e)).docs.map(s=>({id:s.id,...s.data()})).sort((s,l)=>{var d,m,g,y;const c=((m=(d=s.timestamp)==null?void 0:d.toDate)==null?void 0:m.call(d))||new Date(0);return(((y=(g=l.timestamp)==null?void 0:g.toDate)==null?void 0:y.call(g))||new Date(0))-c}).slice(0,100)}catch(e){return console.error("getCheckinsByBusiness error:",e),[]}}async function Q9(){try{return(await gn(Rt(Ae,Lf))).docs.map(e=>({id:e.id,...e.data()}))}catch(n){return console.error("getAllCheckins error:",n),[]}}const Y9={curious:on,hooked:fr,lineAndSinker:hr,patron:Gn},X9={curious:"#6b7280",hooked:"#16a34a",lineAndSinker:"#2563eb",patron:"#ca8a04"};function J9(n,e){const t=new Date,r=t.getHours().toString().padStart(2,"0")+t.getMinutes().toString().padStart(2,"0"),s=e.substring(0,4).toUpperCase();return`${n.substring(0,3).toUpperCase()}-${s}-${r}`}function Z9(){const{businessCode:n}=oy(),{isAuthenticated:e}=Vr(),[t,r]=j.useState(null),[s,l]=j.useState(!0),[c,h]=j.useState(null),[d,m]=j.useState(null),[g,y]=j.useState(!1),[x,E]=j.useState(!1),[k,S]=j.useState("");if(j.useEffect(()=>{async function W(){try{const A=await Vf(n);if(!A){h("not_found"),l(!1);return}if(!A.isActive){h("inactive"),l(!1);return}if(r(A),!e){l(!1);return}const C=tf();if(S(J9(n,C)),await q9(C,n)){y(!0);const B=await Au(C);B&&m({tierChanged:!1,newTier:B.tier,businessesVisited:B.businessesVisited||[],totalCheckins:B.totalCheckins||0,isNewBusiness:!1}),l(!1);return}const O=await A9(C,n);await G9(C,n,O.newTier),await T9(n),m(O),O.tierChanged&&O.newTier&&E(!0),l(!1)}catch(A){console.error("Check-in error:",A),h("error"),l(!1)}}W()},[n,e]),s)return a.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"linear-gradient(180deg, var(--kb-navy) 0%, #1a3a5c 100%)",padding:"2rem"},children:[a.jsx(de.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:a.jsx(c0,{size:64,color:"var(--kb-gold)"})}),a.jsx("p",{style:{marginTop:"1.5rem",color:"white",fontSize:"1.25rem"},children:"Checking in..."})]});if(c==="not_found")return a.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#fef2f2",padding:"2rem",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:"?"}),a.jsx("h1",{style:{color:"#dc2626",fontSize:"1.75rem",marginBottom:"0.75rem"},children:"Business Not Found"}),a.jsx("p",{style:{color:"#7f1d1d",fontSize:"1.1rem",marginBottom:"2rem"},children:"This QR code doesn't match any participating business."}),a.jsx(ue,{to:"/",className:"btn btn-primary",style:{fontSize:"1.1rem",padding:"1rem 2rem"},children:"Go Home"})]});if(c==="inactive")return a.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#fffbeb",padding:"2rem",textAlign:"center"},children:[a.jsx("h1",{style:{color:"#d97706",fontSize:"1.75rem",marginBottom:"0.75rem"},children:"Business Not Active"}),a.jsx("p",{style:{color:"#92400e",fontSize:"1.1rem",marginBottom:"2rem"},children:"This business is not currently participating."}),a.jsx(ue,{to:"/",className:"btn btn-primary",style:{fontSize:"1.1rem",padding:"1rem 2rem"},children:"Go Home"})]});if(c)return a.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#fef2f2",padding:"2rem",textAlign:"center"},children:[a.jsx("h1",{style:{color:"#dc2626",fontSize:"1.75rem",marginBottom:"0.75rem"},children:"Something went wrong"}),a.jsx("p",{style:{color:"#7f1d1d",fontSize:"1.1rem",marginBottom:"2rem"},children:"Please try scanning again."}),a.jsx(ue,{to:"/",className:"btn btn-primary",style:{fontSize:"1.1rem",padding:"1rem 2rem"},children:"Go Home"})]});const I=(d==null?void 0:d.newTier)||"curious",N=lr[I],V=X9[I],P=Y9[I],K=Math.round(N.bonus*100),z=e?g?"#6b7280":V:"var(--kb-navy)";return a.jsxs("div",{style:{minHeight:"100vh",background:`linear-gradient(180deg, ${z} 0%, ${z}dd 100%)`,padding:"1.5rem",display:"flex",flexDirection:"column"},children:[x&&a.jsx(PT,{}),a.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",maxWidth:"400px",margin:"0 auto",width:"100%"},children:[g?a.jsxs(de.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},style:{textAlign:"center",color:"white"},children:[a.jsx(or,{size:80,strokeWidth:1.5,style:{marginBottom:"1rem",opacity:.8}}),a.jsx("h1",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"Already Checked In"}),a.jsxs("p",{style:{fontSize:"1.25rem",opacity:.9,marginBottom:"2rem"},children:["at ",t.name]}),a.jsxs("p",{style:{fontSize:"1.1rem",opacity:.8},children:["Come back in about an hour",a.jsx("br",{}),"for another check-in!"]})]}):e?a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{width:"100%"},children:[a.jsxs("div",{style:{textAlign:"center",color:"white",marginBottom:"1.5rem"},children:[a.jsx(de.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.2},children:a.jsx("div",{style:{width:"80px",height:"80px",background:"rgba(255,255,255,0.2)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:a.jsx(Ai,{size:48,strokeWidth:2.5})})}),a.jsx("h1",{style:{fontSize:"1.75rem",marginBottom:"0.25rem"},children:"Checked In!"}),a.jsx("p",{style:{fontSize:"1.25rem",opacity:.9},children:t.name})]}),a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},style:{background:"white",borderRadius:"24px",padding:"2rem",textAlign:"center",boxShadow:"0 10px 40px rgba(0,0,0,0.2)"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"1rem"},children:[a.jsx(P,{size:28,color:V}),a.jsx("span",{style:{fontSize:"1.25rem",fontWeight:"700",color:V,textTransform:"uppercase"},children:N.name})]}),a.jsxs("div",{style:{background:`${V}15`,borderRadius:"16px",padding:"1.5rem",marginBottom:"1.5rem"},children:[a.jsxs("div",{style:{fontSize:"4rem",fontWeight:"800",color:V,lineHeight:1},children:[K,"%"]}),a.jsx("div",{style:{fontSize:"1.1rem",color:"var(--kb-gray-600)",marginTop:"0.25rem"},children:"Exchange Bonus"})]}),a.jsxs("div",{style:{background:"var(--kb-navy)",borderRadius:"12px",padding:"1rem",marginBottom:"1rem"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[a.jsx(R2,{size:18,color:"var(--kb-gold)"}),a.jsx("span",{style:{color:"var(--kb-gold)",fontSize:"0.85rem",fontWeight:"600"},children:"VERIFICATION CODE"})]}),a.jsx("div",{style:{fontFamily:"monospace",fontSize:"1.75rem",fontWeight:"700",color:"white",letterSpacing:"0.1em"},children:k})]}),a.jsxs("p",{style:{fontSize:"1.1rem",color:"var(--kb-gray-600)",lineHeight:1.5},children:["Show this screen to the cashier",a.jsx("br",{}),"to receive your ",a.jsxs("strong",{children:[K,"% bonus"]})]})]}),(d==null?void 0:d.tierChanged)&&a.jsxs(de.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},style:{marginTop:"1.5rem",padding:"1rem",background:"rgba(255,255,255,0.15)",borderRadius:"12px",textAlign:"center",color:"white"},children:[a.jsx("span",{style:{fontSize:"1.25rem"},children:""}),a.jsxs("span",{style:{marginLeft:"0.5rem",fontWeight:"600"},children:["You just leveled up to ",N.name,"!"]})]})]}):a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{width:"100%"},children:[a.jsxs("div",{style:{textAlign:"center",color:"white",marginBottom:"1.5rem"},children:[a.jsx(de.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.2},children:a.jsx("div",{style:{width:"80px",height:"80px",background:"rgba(255,255,255,0.2)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:a.jsx(Kh,{size:40,strokeWidth:1.5})})}),a.jsxs("h1",{style:{fontSize:"1.75rem",marginBottom:"0.25rem"},children:["Welcome to ",t.name,"!"]}),a.jsx("p",{style:{fontSize:"1.1rem",opacity:.9},children:"Sign in to complete your check-in and unlock your discount"})]}),a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},style:{background:"white",borderRadius:"24px",padding:"2rem",textAlign:"center",boxShadow:"0 10px 40px rgba(0,0,0,0.2)"},children:[a.jsx("div",{style:{width:"60px",height:"60px",background:"var(--kb-gold)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.25rem"},children:a.jsx(T2,{size:28,color:"var(--kb-navy)"})}),a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem",fontSize:"1.5rem"},children:"Your Discount is Waiting!"}),a.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"1rem",marginBottom:"1.5rem",lineHeight:1.5},children:"Create a free OK Member account to unlock your exclusive bonus discount."}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",marginBottom:"1.5rem",textAlign:"left",background:"var(--kb-cream)",borderRadius:"12px",padding:"1rem 1.25rem"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"0.95rem",color:"var(--kb-gray-700)"},children:[a.jsx("div",{style:{width:"24px",height:"24px",background:"var(--kb-green)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(Ai,{size:14,color:"white"})}),"Unlock your discount code"]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"0.95rem",color:"var(--kb-gray-700)"},children:[a.jsx("div",{style:{width:"24px",height:"24px",background:"var(--kb-green)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(Ai,{size:14,color:"white"})}),"Track your tier progress"]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"0.95rem",color:"var(--kb-gray-700)"},children:[a.jsx("div",{style:{width:"24px",height:"24px",background:"var(--kb-green)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(Ai,{size:14,color:"white"})}),"Get your digital OK Member Card"]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"0.95rem",color:"var(--kb-gray-700)"},children:[a.jsx("div",{style:{width:"24px",height:"24px",background:"var(--kb-green)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(Ai,{size:14,color:"white"})}),"Earn higher bonuses as you level up"]})]}),a.jsxs(ue,{to:`/login?redirect=/checkin/${n}`,className:"btn btn-gold",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",padding:"1rem",fontSize:"1.15rem",marginBottom:"0.75rem"},children:[a.jsx(Kh,{size:22}),"Sign Up Free"]}),a.jsxs("p",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:["Already have an account? ",a.jsx(ue,{to:`/login?redirect=/checkin/${n}`,style:{color:"var(--kb-navy)",fontWeight:"600"},children:"Sign In"})]})]})]}),a.jsxs(de.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},style:{marginTop:"2rem",display:"flex",gap:"0.75rem"},children:[a.jsx(ue,{to:"/profile",className:"btn",style:{background:"rgba(255,255,255,0.2)",color:"white",padding:"0.875rem 1.5rem",fontSize:"1rem"},children:"My Profile"}),a.jsx(ue,{to:"/",className:"btn",style:{background:"white",color:"var(--kb-navy)",padding:"0.875rem 1.5rem",fontSize:"1rem"},children:"Home"})]})]})]})}const Of="promoCodes";async function ah(n){const e=dr(Rt(Ae,Of),li("businessCode","==",n),Wi("createdAt","desc"));return(await gn(e)).docs.map(r=>({id:r.id,...r.data()}))}async function eB({businessCode:n,code:e,description:t,discountType:r,discountValue:s,minTier:l,expiresAt:c,usageLimit:h}){const d=`${n}-${e.toUpperCase()}`;return await Tl(st(Ae,Of,d),{businessCode:n,code:e.toUpperCase(),description:t,discountType:r,discountValue:s,minTier:l||null,expiresAt:c||null,usageLimit:h||null,usageCount:0,isActive:!0,createdAt:ht()}),d}async function tB(n,e){const t=st(Ae,Of,n);await Dr(t,{isActive:e})}async function nB(n){await KM(st(Ae,Of,n))}const Pu="transactions";async function rB(n,e,t){const r=p2(Ae),s=st(Ae,"kinderbucks",n),l=await eo(s);if(!l.exists())throw new Error("Kinderbuck not found");const h=l.data().denomination;r.update(s,{currentHolder:e,holderType:"business",lastTransferAt:ht()});const d=st(Ae,"businesses",e);r.update(d,{kinderbucksBalance:Ko(h),lifetimeAccepted:Ko(h)});const m=st(Rt(Ae,Pu));return r.set(m,{type:"payment",kinderbuckSerial:n,denomination:h,businessCode:e,businessName:t,amount:h,status:"completed",createdAt:ht()}),await r.commit(),{serial:n,amount:h,businessCode:e}}async function iB(n,e=50){const t=dr(Rt(Ae,Pu),li("businessCode","==",n),Wi("createdAt","desc"));return(await gn(t)).docs.slice(0,e).map(s=>({id:s.id,...s.data()}))}async function sB(n,e,t){return{id:(await jf(Rt(Ae,Pu),{type:"redemption",businessCode:n,businessName:e,amount:t,status:"pending",createdAt:ht()})).id,amount:t,businessCode:n}}async function oB(n,e,t){const r=st(Ae,Pu,n),s=await eo(r);if(!s.exists())throw new Error("Transaction not found");const l=s.data();if(l.status!=="pending")throw new Error("Transaction already processed");const c=p2(Ae);if(c.update(r,{status:e?"approved":"rejected",processedBy:t,processedAt:ht()}),e){const h=st(Ae,"businesses",l.businessCode);c.update(h,{kinderbucksBalance:Ko(-l.amount),lifetimeRedeemed:Ko(l.amount)});const d=dr(Rt(Ae,"kinderbucks"),li("currentHolder","==",l.businessCode),li("status","==","active")),m=await gn(d);let g=l.amount;const y=[];for(const x of m.docs){if(g<=0)break;const E=x.data();c.update(x.ref,{status:"redeemed",redeemedAt:ht(),redeemedInTransaction:n}),g-=E.denomination,y.push(x.id)}c.update(r,{redeemedSerials:y})}return await c.commit(),{txnId:n,approved:e,status:e?"approved":"rejected"}}async function aB(){const n=dr(Rt(Ae,Pu),li("type","==","redemption"),Wi("createdAt","desc"));return(await gn(n)).docs.map(t=>({id:t.id,...t.data()}))}function lB({isOpen:n,onClose:e,businessCode:t,businessName:r,currentBalance:s,onSuccess:l}){const[c,h]=j.useState(""),[d,m]=j.useState(!1),[g,y]=j.useState(""),[x,E]=j.useState(!1),k=async I=>{I.preventDefault(),y("");const N=parseFloat(c);if(!N||N<=0){y("Please enter a valid amount");return}if(N>s){y(`Amount exceeds your balance of $${s}`);return}m(!0);try{await sB(t,r,N),E(!0),setTimeout(()=>{l==null||l(),e(),E(!1),h("")},2e3)}catch(V){console.error("Error creating redemption:",V),y("Failed to create redemption request")}m(!1)},S=()=>{d||(h(""),y(""),E(!1),e())};return n?a.jsx(U0,{children:a.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},onClick:S,children:a.jsxs(de.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"card",style:{maxWidth:"400px",width:"100%",padding:0,overflow:"hidden"},onClick:I=>I.stopPropagation(),children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1.25rem 1.5rem",borderBottom:"1px solid var(--kb-gray-200)",background:"var(--kb-gray-50)"},children:[a.jsxs("h3",{style:{margin:0,color:"var(--kb-navy)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(Wh,{size:20}),"Request Redemption"]}),a.jsx("button",{onClick:S,style:{background:"none",border:"none",cursor:"pointer",padding:"0.25rem",color:"var(--kb-gray-500)"},children:a.jsx(N2,{size:20})})]}),a.jsx("div",{style:{padding:"1.5rem"},children:x?a.jsxs("div",{style:{textAlign:"center",padding:"2rem 0"},children:[a.jsx("div",{style:{width:"64px",height:"64px",background:"rgba(39, 174, 96, 0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:a.jsx(Sn,{size:32,color:"var(--kb-green)"})}),a.jsx("h4",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"Request Submitted"}),a.jsxs("p",{style:{color:"var(--kb-gray-600)",margin:0},children:["Your redemption request for $",c," has been submitted for admin approval."]})]}):a.jsxs("form",{onSubmit:k,children:[a.jsxs("div",{style:{background:"linear-gradient(135deg, var(--kb-gold) 0%, var(--kb-gold-dark) 100%)",borderRadius:"12px",padding:"1.25rem",marginBottom:"1.5rem",color:"white",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"0.85rem",opacity:.9,marginBottom:"0.25rem"},children:"Available Balance"}),a.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700"},children:["$",s.toFixed(2)]})]}),a.jsxs("div",{style:{marginBottom:"1.5rem"},children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Amount to Redeem (USD)"}),a.jsxs("div",{style:{position:"relative"},children:[a.jsx("span",{style:{position:"absolute",left:"1rem",top:"50%",transform:"translateY(-50%)",color:"var(--kb-gray-500)",fontWeight:"500"},children:"$"}),a.jsx("input",{type:"number",value:c,onChange:I=>h(I.target.value),placeholder:"0.00",min:"1",max:s,step:"0.01",style:{width:"100%",paddingLeft:"2rem",fontSize:"1.25rem",fontWeight:"500"},required:!0})]}),a.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.75rem",flexWrap:"wrap"},children:[[25,50,100].map(I=>s>=I&&a.jsxs("button",{type:"button",onClick:()=>h(I.toString()),className:"btn btn-secondary",style:{padding:"0.4rem 0.75rem",fontSize:"0.85rem"},children:["$",I]},I)),a.jsx("button",{type:"button",onClick:()=>h(s.toString()),className:"btn btn-secondary",style:{padding:"0.4rem 0.75rem",fontSize:"0.85rem"},children:"Max"})]})]}),g&&a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",background:"#fef2f2",borderRadius:"8px",color:"#dc2626",marginBottom:"1rem",fontSize:"0.9rem"},children:[a.jsx(Vs,{size:18}),g]}),a.jsxs("div",{style:{padding:"1rem",background:"var(--kb-gray-50)",borderRadius:"8px",marginBottom:"1.5rem",fontSize:"0.85rem",color:"var(--kb-gray-600)"},children:[a.jsx("strong",{children:"How it works:"})," Your request will be reviewed by an administrator. Once approved, you'll receive USD equivalent and the corresponding Kinderbucks bills will be marked as redeemed."]}),a.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[a.jsx("button",{type:"button",onClick:S,className:"btn btn-secondary",style:{flex:1},disabled:d,children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",style:{flex:1},disabled:d||!c,children:d?"Submitting...":"Submit Request"})]})]})})]})})}):null}function cB(){const{profile:n}=Vr(),e=qs(),[t,r]=j.useState(null),[s,l]=j.useState([]),[c,h]=j.useState([]),[d,m]=j.useState([]),[g,y]=j.useState([]),[x,E]=j.useState([]),[k,S]=j.useState(!0),[I,N]=j.useState("overview"),[V,P]=j.useState(!1),[K,z]=j.useState(!1),[W,A]=j.useState(!1),[C,M]=j.useState(!1),[O,B]=j.useState(null),[U,L]=j.useState({code:"",description:"",discountType:"percent",discountValue:10,minTier:"",expiresAt:"",usageLimit:""}),[De,Ke]=j.useState(!1),pt=async()=>{if(!(n!=null&&n.businessCode)){S(!1);return}const[J,be,Le,Ye,Et,vn]=await Promise.all([C9(n.businessCode),NT(n.businessCode),ah(n.businessCode),qi(),Q9(),iB(n.businessCode)]);r(J),l(be),h(Le),m(Ye.filter(no=>no.isActive)),y(Et),E(vn),S(!1)};j.useEffect(()=>{pt()},[n==null?void 0:n.businessCode]);const Ee=()=>{const J=`https://harmonicsystems.github.io/kinderbucks/#/checkin/${n.businessCode}`;navigator.clipboard.writeText(J),z(!0),setTimeout(()=>z(!1),2e3)};s.filter(J=>{var Ye;const be=(Ye=J.timestamp)!=null&&Ye.toDate?J.timestamp.toDate():new Date(J.timestamp),Le=new Date;return be.toDateString()===Le.toDateString()}).length;const ie=s.filter(J=>{var Ye;const be=(Ye=J.timestamp)!=null&&Ye.toDate?J.timestamp.toDate():new Date(J.timestamp),Le=new Date;return Le.setDate(Le.getDate()-7),be>Le}).length,me=s.filter(J=>{var Et;const be=(Et=J.timestamp)!=null&&Et.toDate?J.timestamp.toDate():new Date(J.timestamp),Le=new Date,Ye=new Date;return Le.setDate(Le.getDate()-7),Ye.setDate(Ye.getDate()-14),be>Ye&&be<=Le}).length,le=me>0?Math.round((ie-me)/me*100):ie>0?100:0,H=new Set(s.map(J=>J.visitorId)).size,te=g.length,Re=g.filter(J=>{var Ye;const be=(Ye=J.timestamp)!=null&&Ye.toDate?J.timestamp.toDate():new Date(J.timestamp),Le=new Date;return Le.setDate(Le.getDate()-7),be>Le}).length,Ce=d.sort((J,be)=>(be.checkinCount||0)-(J.checkinCount||0)).slice(0,5),Ve=d.sort((J,be)=>(be.checkinCount||0)-(J.checkinCount||0)).findIndex(J=>J.code===(n==null?void 0:n.businessCode))+1,Oe=async J=>{if(J.preventDefault(),!(!U.code||!U.description)){Ke(!0);try{await eB({businessCode:n.businessCode,code:U.code,description:U.description,discountType:U.discountType,discountValue:Number(U.discountValue),minTier:U.minTier||null,expiresAt:U.expiresAt?new Date(U.expiresAt):null,usageLimit:U.usageLimit?Number(U.usageLimit):null});const be=await ah(n.businessCode);h(be),L({code:"",description:"",discountType:"percent",discountValue:10,minTier:"",expiresAt:"",usageLimit:""}),A(!1)}catch(be){console.error("Error creating promo:",be),alert("Error creating promo code")}Ke(!1)}},Qe=async(J,be)=>{await tB(J,!be);const Le=await ah(n.businessCode);h(Le)},$e=async J=>{if(!confirm("Delete this promo code?"))return;await nB(J);const be=await ah(n.businessCode);h(be)};if(k)return a.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[a.jsx(Nn,{}),a.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",background:"var(--kb-cream)"},children:a.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading..."})}),a.jsx(Mn,{})]});if(!(n!=null&&n.businessCode))return a.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[a.jsx(Nn,{}),a.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",background:"var(--kb-cream)",padding:"2rem"},children:a.jsxs("div",{className:"card",style:{maxWidth:"400px",textAlign:"center",padding:"2rem"},children:[a.jsx(St,{size:48,color:"var(--kb-gray-400)",style:{marginBottom:"1rem"}}),a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"No Business Assigned"}),a.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem"},children:"Your account doesn't have a business assigned yet. Contact an administrator to get set up."}),a.jsx(ue,{to:"/",className:"btn btn-primary",children:"Go Home"})]})}),a.jsx(Mn,{})]});const et=`https://harmonicsystems.github.io/kinderbucks/#/checkin/${n.businessCode}`,Yt=[{key:"overview",label:"Overview",icon:a0},{key:"kinderbucks",label:"Kinderbucks",icon:Vi},{key:"qrcode",label:"QR Code",icon:Rr},{key:"promos",label:"Promo Codes",icon:Ec},{key:"trends",label:"Village Trends",icon:$s},{key:"guide",label:"Resource Guide",icon:qw}],Gi=[{id:"qr-setup",title:"Setting Up Your QR Code",icon:Rr,content:["Print your unique QR code and display it prominently at your counter or entrance","Use a stand or frame to keep it visible and accessible for customers","Consider printing multiple codes for different checkout areas","Test the code regularly to ensure it scans correctly"]},{id:"customer-flow",title:"Customer Check-in Flow",icon:jg,content:["Customers scan the QR code with their phone camera","They're taken to your check-in page (no app download needed)","If signed in, they earn a check-in toward their Kinderhooker status","Their tier badge appears so you can offer appropriate discounts"]},{id:"tier-discounts",title:"Member Tier Discounts",icon:hr,content:["Curious (0-4 check-ins): New to Kinderhook - welcome them warmly!","Hooked (5-14 check-ins): Regular visitors - consider small perks","Line & Sinker (15-29 check-ins): Loyal customers - offer meaningful discounts","Village Patron (30+ check-ins): Your best customers - VIP treatment!"]},{id:"promo-tips",title:"Creating Effective Promos",icon:Ec,content:["Create tier-specific promos to reward loyalty","Set expiration dates to create urgency","Use memorable, easy-to-type codes","Track usage to see what resonates with customers"]}];return a.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[a.jsx(Nn,{}),a.jsx("main",{style:{flex:1,background:"var(--kb-cream)",padding:"2rem 1rem"},children:a.jsxs("div",{style:{maxWidth:"1100px",margin:"0 auto"},children:[a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{marginBottom:"1.5rem"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"1rem"},children:[a.jsxs("div",{children:[a.jsx("div",{className:"badge badge-gold",style:{marginBottom:"0.5rem"},children:"Business Resource Center"}),a.jsx("h1",{style:{color:"var(--kb-navy)",marginBottom:"0.25rem"},children:(t==null?void 0:t.name)||n.businessCode}),a.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"Manage check-ins, promos, and see village trends"})]}),Ve>0&&a.jsxs("div",{style:{background:"linear-gradient(135deg, var(--kb-gold) 0%, var(--kb-gold-dark) 100%)",color:"white",padding:"0.75rem 1.25rem",borderRadius:"12px",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"0.75rem",opacity:.9},children:"Village Rank"}),a.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700"},children:["#",Ve]})]})]})}),a.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem",overflowX:"auto",paddingBottom:"0.5rem"},children:Yt.map(J=>{const be=J.icon;return a.jsxs("button",{onClick:()=>N(J.key),className:"btn",style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.6rem 1rem",background:I===J.key?"var(--kb-navy)":"white",color:I===J.key?"white":"var(--kb-gray-600)",border:"1px solid var(--kb-gray-200)",whiteSpace:"nowrap"},children:[a.jsx(be,{size:16}),J.label]},J.key)})}),I==="overview"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card",style:{padding:"1.25rem"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[a.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(39, 174, 96, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx($s,{size:22,color:"var(--kb-green)"})}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:(t==null?void 0:t.checkinCount)||0}),a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Total Check-ins"})]})]})}),a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card",style:{padding:"1.25rem"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[a.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(52, 152, 219, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(Rf,{size:22,color:"#3498db"})}),a.jsxs("div",{children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx("span",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:ie}),le!==0&&a.jsxs("span",{style:{fontSize:"0.75rem",padding:"0.15rem 0.4rem",borderRadius:"4px",background:le>0?"rgba(39, 174, 96, 0.1)":"rgba(231, 76, 60, 0.1)",color:le>0?"var(--kb-green)":"#e74c3c"},children:[le>0?"+":"",le,"%"]})]}),a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"This Week"})]})]})}),a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"card",style:{padding:"1.25rem"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[a.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(201, 162, 39, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(Nr,{size:22,color:"var(--kb-gold-dark)"})}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:H}),a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Unique Visitors"})]})]})}),a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"card",style:{padding:"1.25rem"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[a.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(155, 89, 182, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(Ec,{size:22,color:"#9b59b6"})}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:c.filter(J=>J.isActive).length}),a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Active Promos"})]})]})})]}),a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"card",children:[a.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(or,{size:20})," Recent Check-ins"]}),s.length===0?a.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[a.jsx(Nr,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),a.jsx("p",{children:"No check-ins yet"}),a.jsx("p",{style:{fontSize:"0.9rem"},children:"Display your QR code to start receiving check-ins!"}),a.jsx("button",{onClick:()=>N("qrcode"),className:"btn btn-gold",style:{marginTop:"1rem"},children:"View QR Code"})]}):a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:s.slice(0,10).map((J,be)=>{var Et;const Le=(Et=J.timestamp)!=null&&Et.toDate?J.timestamp.toDate():new Date(J.timestamp),Ye={"Village Patron":"#9b59b6","Line & Sinker":"#c9a227",Hooked:"#27ae60",Curious:"#3498db"};return a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"var(--kb-gray-50)",borderRadius:"8px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[a.jsx("div",{style:{width:"36px",height:"36px",background:"var(--kb-green)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(Sn,{size:18,color:"white"})}),a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:"Check-in recorded"}),J.tier&&a.jsx("span",{style:{fontSize:"0.75rem",padding:"0.1rem 0.5rem",borderRadius:"4px",background:`${Ye[J.tier]||"#95a5a6"}20`,color:Ye[J.tier]||"#95a5a6",fontWeight:"500"},children:J.tier})]})]}),a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:Le.toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]},J.id||be)})})]})]}),I==="kinderbucks"&&a.jsxs(a.Fragment,{children:[a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",style:{marginBottom:"1.5rem",background:"linear-gradient(135deg, var(--kb-gold) 0%, var(--kb-gold-dark) 100%)",color:"white",padding:"2rem"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"1.5rem"},children:[a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"0.9rem",opacity:.9,marginBottom:"0.25rem"},children:"Current Kinderbucks Balance"}),a.jsxs("div",{style:{fontSize:"3rem",fontWeight:"700",lineHeight:1},children:["$",((t==null?void 0:t.kinderbucksBalance)||0).toFixed(2)]}),a.jsx("div",{style:{fontSize:"0.85rem",opacity:.8,marginTop:"0.5rem"},children:"Available for redemption to USD"})]}),a.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[a.jsxs("button",{onClick:()=>e("/business/accept-payment"),className:"btn",style:{background:"rgba(255,255,255,0.2)",color:"white",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(iu,{size:18}),"Accept Payment"]}),a.jsxs("button",{onClick:()=>M(!0),className:"btn",style:{background:"white",color:"var(--kb-gold-dark)",display:"flex",alignItems:"center",gap:"0.5rem"},disabled:((t==null?void 0:t.kinderbucksBalance)||0)===0,children:[a.jsx(Wh,{size:18}),"Request Redemption"]})]})]})}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card",style:{padding:"1.25rem"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[a.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(39, 174, 96, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(Hw,{size:22,color:"var(--kb-green)"})}),a.jsxs("div",{children:[a.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"var(--kb-navy)"},children:["$",((t==null?void 0:t.lifetimeAccepted)||0).toFixed(0)]}),a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Total Accepted"})]})]})}),a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card",style:{padding:"1.25rem"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[a.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(52, 152, 219, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(Kw,{size:22,color:"#3498db"})}),a.jsxs("div",{children:[a.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"var(--kb-navy)"},children:["$",((t==null?void 0:t.lifetimeRedeemed)||0).toFixed(0)]}),a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Total Redeemed"})]})]})}),a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"card",style:{padding:"1.25rem"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[a.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(155, 89, 182, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(Vi,{size:22,color:"#9b59b6"})}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"var(--kb-navy)"},children:x.filter(J=>J.type==="payment").length}),a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Payments Received"})]})]})})]}),a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"card",children:[a.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(or,{size:20})," Recent Transactions"]}),x.length===0?a.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[a.jsx(Vi,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),a.jsx("p",{children:"No transactions yet"}),a.jsx("p",{style:{fontSize:"0.9rem"},children:"Accept Kinderbucks payments to see them here."}),a.jsx("button",{onClick:()=>e("/business/accept-payment"),className:"btn btn-gold",style:{marginTop:"1rem"},children:"Accept First Payment"})]}):a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:x.slice(0,10).map((J,be)=>{var Et,vn;const Le=(Et=J.createdAt)!=null&&Et.toDate?J.createdAt.toDate():new Date(J.createdAt),Ye=J.type==="payment";return a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"var(--kb-gray-50)",borderRadius:"8px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[a.jsx("div",{style:{width:"36px",height:"36px",background:Ye?"rgba(39, 174, 96, 0.1)":"rgba(52, 152, 219, 0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:Ye?a.jsx(Hw,{size:18,color:"var(--kb-green)"}):a.jsx(Kw,{size:18,color:"#3498db"})}),a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:Ye?"Payment received":"Redemption"}),J.kinderbuckSerial&&a.jsx("span",{style:{fontSize:"0.75rem",fontFamily:"monospace",color:"var(--kb-gray-500)"},children:J.kinderbuckSerial}),J.status==="pending"&&a.jsx("span",{style:{fontSize:"0.75rem",padding:"0.1rem 0.4rem",borderRadius:"4px",background:"#fff3cd",color:"#856404",marginLeft:"0.5rem"},children:"Pending"})]})]}),a.jsxs("div",{style:{textAlign:"right"},children:[a.jsxs("div",{style:{fontWeight:"600",color:Ye?"var(--kb-green)":"#3498db"},children:[Ye?"+":"-","$",(vn=J.amount)==null?void 0:vn.toFixed(2)]}),a.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:Le.toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]})]},J.id||be)})})]})]}),I==="qrcode"&&a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",style:{padding:"2rem"},children:a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"2rem",alignItems:"start"},children:[a.jsxs("div",{style:{textAlign:"center"},children:[a.jsx("div",{style:{background:"linear-gradient(135deg, var(--kb-green) 0%, #1e8449 100%)",borderRadius:"20px",padding:"4px",display:"inline-block"},children:a.jsxs("div",{style:{background:"white",borderRadius:"18px",padding:"20px"},children:[a.jsx("div",{style:{fontSize:"11px",fontWeight:"600",color:"var(--kb-green)",letterSpacing:"2px",marginBottom:"12px"},children:"CHECK IN AT"}),a.jsx(fl,{value:et,size:180,denomination:1,showFrame:!1}),a.jsx("div",{style:{marginTop:"12px",fontWeight:"600",color:"var(--kb-navy)",fontSize:"1.1rem"},children:t==null?void 0:t.name})]})}),a.jsxs("div",{style:{marginTop:"1.5rem",display:"flex",gap:"0.5rem",justifyContent:"center",flexWrap:"wrap"},children:[a.jsxs("button",{onClick:()=>window.print(),className:"btn btn-gold",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(j2,{size:18})," Print"]}),a.jsxs("button",{onClick:Ee,className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[K?a.jsx(Sn,{size:18}):a.jsx(l0,{size:18}),K?"Copied!":"Copy URL"]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"How Customers Use This"}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[a.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"start"},children:[a.jsx("div",{style:{width:"32px",height:"32px",background:"var(--kb-navy)",color:"white",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"600",fontSize:"0.9rem",flexShrink:0},children:"1"}),a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:"Customer scans with phone"}),a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"Using their camera app or QR reader"})]})]}),a.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"start"},children:[a.jsx("div",{style:{width:"32px",height:"32px",background:"var(--kb-navy)",color:"white",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"600",fontSize:"0.9rem",flexShrink:0},children:"2"}),a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:"Opens check-in page"}),a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"No app download required!"})]})]}),a.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"start"},children:[a.jsx("div",{style:{width:"32px",height:"32px",background:"var(--kb-navy)",color:"white",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"600",fontSize:"0.9rem",flexShrink:0},children:"3"}),a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:'They tap "Check In"'}),a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"Earns progress toward their Kinderhooker tier"})]})]}),a.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"start"},children:[a.jsx("div",{style:{width:"32px",height:"32px",background:"var(--kb-green)",color:"white",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:a.jsx(Sn,{size:18})}),a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:"You see their tier badge"}),a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"Offer appropriate discounts for their loyalty level"})]})]})]}),a.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"rgba(201, 162, 39, 0.1)",borderRadius:"8px",borderLeft:"3px solid var(--kb-gold)"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--kb-gold-dark)",fontWeight:"600",marginBottom:"0.5rem"},children:[a.jsx(aV,{size:16})," Pro Tip"]}),a.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.9rem",margin:0},children:"Place your QR code near the register or on table tents so customers can check in while they wait!"})]})]})]})}),I==="promos"&&a.jsx(a.Fragment,{children:a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",style:{marginBottom:"1.5rem"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1.5rem"},children:[a.jsxs("h3",{style:{color:"var(--kb-navy)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(Ec,{size:20})," Your Promo Codes"]}),a.jsxs("button",{onClick:()=>A(!W),className:"btn btn-gold",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(iu,{size:18})," Create Promo"]})]}),W&&a.jsxs("form",{onSubmit:Oe,style:{padding:"1.5rem",background:"var(--kb-gray-50)",borderRadius:"12px",marginBottom:"1.5rem"},children:[a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Code *"}),a.jsx("input",{type:"text",value:U.code,onChange:J=>L(be=>({...be,code:J.target.value.toUpperCase().replace(/[^A-Z0-9]/g,"")})),placeholder:"SUMMER20",style:{width:"100%",fontFamily:"monospace"},required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Discount Type"}),a.jsxs("select",{value:U.discountType,onChange:J=>L(be=>({...be,discountType:J.target.value})),style:{width:"100%"},children:[a.jsx("option",{value:"percent",children:"Percent Off"}),a.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:U.discountType==="percent"?"Percent Off":"Amount Off ($)"}),a.jsx("input",{type:"number",value:U.discountValue,onChange:J=>L(be=>({...be,discountValue:J.target.value})),min:"1",max:U.discountType==="percent"?100:1e3,style:{width:"100%"}})]})]}),a.jsxs("div",{style:{marginBottom:"1rem"},children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Description *"}),a.jsx("input",{type:"text",value:U.description,onChange:J=>L(be=>({...be,description:J.target.value})),placeholder:"10% off your entire purchase",style:{width:"100%"},required:!0})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Min. Tier (optional)"}),a.jsxs("select",{value:U.minTier,onChange:J=>L(be=>({...be,minTier:J.target.value})),style:{width:"100%"},children:[a.jsx("option",{value:"",children:"Any tier"}),a.jsx("option",{value:"Curious",children:"Curious"}),a.jsx("option",{value:"Hooked",children:"Hooked"}),a.jsx("option",{value:"Line & Sinker",children:"Line & Sinker"}),a.jsx("option",{value:"Village Patron",children:"Village Patron"})]})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Expires (optional)"}),a.jsx("input",{type:"date",value:U.expiresAt,onChange:J=>L(be=>({...be,expiresAt:J.target.value})),style:{width:"100%"}})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Usage Limit (optional)"}),a.jsx("input",{type:"number",value:U.usageLimit,onChange:J=>L(be=>({...be,usageLimit:J.target.value})),placeholder:"Unlimited",min:"1",style:{width:"100%"}})]})]}),a.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[a.jsx("button",{type:"submit",className:"btn btn-primary",disabled:De,children:De?"Creating...":"Create Promo Code"}),a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>A(!1),children:"Cancel"})]})]}),c.length===0?a.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[a.jsx(Ec,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),a.jsx("p",{children:"No promo codes yet"}),a.jsx("p",{style:{fontSize:"0.9rem"},children:"Create your first promo to reward loyal customers!"})]}):a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:c.map(J=>a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem",background:J.isActive?"var(--kb-gray-50)":"var(--kb-gray-100)",borderRadius:"8px",opacity:J.isActive?1:.6,flexWrap:"wrap",gap:"1rem"},children:[a.jsxs("div",{children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.25rem"},children:[a.jsx("code",{style:{padding:"0.25rem 0.5rem",background:"var(--kb-navy)",color:"var(--kb-gold)",borderRadius:"4px",fontWeight:"600"},children:J.code}),a.jsxs("span",{style:{padding:"0.15rem 0.5rem",background:J.discountType==="percent"?"rgba(39, 174, 96, 0.1)":"rgba(52, 152, 219, 0.1)",color:J.discountType==="percent"?"var(--kb-green)":"#3498db",borderRadius:"4px",fontSize:"0.8rem",fontWeight:"500"},children:[J.discountType==="percent"?a.jsx(TV,{size:12,style:{marginRight:4}}):a.jsx(Wh,{size:12,style:{marginRight:4}}),J.discountValue,J.discountType==="percent"?"% off":" off"]})]}),a.jsx("div",{style:{color:"var(--kb-gray-600)",fontSize:"0.9rem"},children:J.description}),a.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"0.5rem",fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:[J.minTier&&a.jsxs("span",{children:["Min tier: ",J.minTier]}),J.usageLimit&&a.jsxs("span",{children:["Limit: ",J.usageCount||0,"/",J.usageLimit]}),J.expiresAt&&a.jsxs("span",{children:["Expires: ",new Date(J.expiresAt.toDate?J.expiresAt.toDate():J.expiresAt).toLocaleDateString()]})]})]}),a.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[a.jsxs("button",{onClick:()=>Qe(J.id,J.isActive),className:"btn btn-secondary",style:{padding:"0.4rem 0.6rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:[J.isActive?a.jsx(tV,{size:16}):a.jsx(E2,{size:16}),J.isActive?"Disable":"Enable"]}),a.jsx("button",{onClick:()=>$e(J.id),className:"btn",style:{padding:"0.4rem 0.6rem",background:"#e74c3c",color:"white"},children:a.jsx(c3,{size:16})})]})]},J.id))})]})}),I==="trends"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",style:{padding:"1.5rem"},children:[a.jsx("h4",{style:{color:"var(--kb-gray-500)",marginBottom:"0.5rem",fontSize:"0.9rem"},children:"Village-Wide Check-ins"}),a.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"var(--kb-navy)"},children:te}),a.jsxs("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:[Re," this week across all businesses"]})]}),a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card",style:{padding:"1.5rem"},children:[a.jsx("h4",{style:{color:"var(--kb-gray-500)",marginBottom:"0.5rem",fontSize:"0.9rem"},children:"Participating Businesses"}),a.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"var(--kb-navy)"},children:d.length}),a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Active in the Kinderbucks network"})]}),a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card",style:{padding:"1.5rem",background:"linear-gradient(135deg, var(--kb-gold) 0%, var(--kb-gold-dark) 100%)",color:"white"},children:[a.jsx("h4",{style:{opacity:.9,marginBottom:"0.5rem",fontSize:"0.9rem"},children:"Your Market Share"}),a.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"700"},children:[te>0?Math.round(((t==null?void 0:t.checkinCount)||0)/te*100):0,"%"]}),a.jsx("div",{style:{opacity:.9,fontSize:"0.85rem"},children:"of all village check-ins"})]})]}),a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"card",children:[a.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(hr,{size:20})," Top Businesses This Month"]}),a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:Ce.map((J,be)=>{var vn;const Le=J.code===(n==null?void 0:n.businessCode),Ye=((vn=Ce[0])==null?void 0:vn.checkinCount)||1,Et=(J.checkinCount||0)/Ye*100;return a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"0.75rem 1rem",background:Le?"rgba(201, 162, 39, 0.1)":"var(--kb-gray-50)",borderRadius:"8px",border:Le?"2px solid var(--kb-gold)":"none"},children:[a.jsx("div",{style:{width:"28px",height:"28px",background:be===0?"var(--kb-gold)":be===1?"#c0c0c0":be===2?"#cd7f32":"var(--kb-gray-300)",color:"white",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"600",fontSize:"0.85rem"},children:be+1}),a.jsxs("div",{style:{flex:1},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:[a.jsx("span",{style:{fontWeight:Le?"600":"500",color:"var(--kb-navy)"},children:J.name}),Le&&a.jsx("span",{style:{fontSize:"0.7rem",padding:"0.1rem 0.4rem",background:"var(--kb-gold)",color:"white",borderRadius:"4px"},children:"YOU"})]}),a.jsx("div",{style:{height:"6px",background:"var(--kb-gray-200)",borderRadius:"3px",overflow:"hidden"},children:a.jsx("div",{style:{width:`${Et}%`,height:"100%",background:Le?"var(--kb-gold)":"var(--kb-green)",borderRadius:"3px"}})})]}),a.jsx("div",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:J.checkinCount||0})]},J.code)})})]})]}),I==="guide"&&a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",children:[a.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(qw,{size:20})," Business Resource Guide"]}),a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:Gi.map(J=>{const be=J.icon,Le=O===J.id;return a.jsxs("div",{style:{border:"1px solid var(--kb-gray-200)",borderRadius:"12px",overflow:"hidden"},children:[a.jsxs("button",{onClick:()=>B(Le?null:J.id),style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem 1.25rem",background:Le?"var(--kb-gray-50)":"white",border:"none",cursor:"pointer",textAlign:"left"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[a.jsx("div",{style:{width:"40px",height:"40px",background:"rgba(201, 162, 39, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(be,{size:20,color:"var(--kb-gold-dark)"})}),a.jsx("span",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:J.title})]}),Le?a.jsx(jD,{size:20,color:"var(--kb-gray-400)"}):a.jsx(ED,{size:20,color:"var(--kb-gray-400)"})]}),Le&&a.jsx("div",{style:{padding:"1rem 1.25rem",borderTop:"1px solid var(--kb-gray-200)"},children:a.jsx("ul",{style:{margin:0,paddingLeft:"1.25rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:J.content.map((Ye,Et)=>a.jsx("li",{style:{color:"var(--kb-gray-600)",lineHeight:1.5},children:Ye},Et))})})]},J.id)})}),a.jsxs("div",{style:{marginTop:"2rem",padding:"1.5rem",background:"linear-gradient(135deg, var(--kb-navy) 0%, var(--kb-navy-light) 100%)",borderRadius:"12px",color:"white"},children:[a.jsx("h4",{style:{marginBottom:"0.5rem"},children:"Need Help?"}),a.jsx("p",{style:{opacity:.9,marginBottom:"1rem",fontSize:"0.95rem"},children:"Questions about Kinderbucks or need assistance with your account? We're here to help!"}),a.jsx("a",{href:"mailto:support@kinderbucks.com",className:"btn",style:{background:"rgba(255,255,255,0.2)",color:"white"},children:"Contact Support"})]})]})]})}),a.jsx(Mn,{}),a.jsx(lB,{isOpen:C,onClose:()=>M(!1),businessCode:n==null?void 0:n.businessCode,businessName:t==null?void 0:t.name,currentBalance:(t==null?void 0:t.kinderbucksBalance)||0,onSuccess:()=>pt()})]})}function Qt({children:n,title:e}){const t=mr(),r=qs(),{user:s,profile:l,isAdmin:c}=Vr(),h=[{to:"/admin/dashboard",label:"Dashboard",Icon:cV},{to:"/admin/exchanges",label:"Exchanges",Icon:Af},{to:"/admin/redemptions",label:"Redemptions",Icon:Vi},{to:"/admin/members",label:"Members",Icon:Nr},{to:"/admin/generate",label:"Generate QR",Icon:Rr},{to:"/admin/issue",label:"Issue Currency",Icon:$h},{to:"/admin/businesses",label:"Businesses",Icon:St},{to:"/admin/users",label:"User Management",Icon:Hh}],d=async()=>{await y2(),r("/")},m=g=>t.pathname===g;return a.jsxs("div",{style:{display:"flex",minHeight:"100vh"},children:[a.jsxs("aside",{style:{width:"260px",background:"var(--kb-navy)",color:"var(--kb-white)",display:"flex",flexDirection:"column",position:"fixed",top:0,left:0,bottom:0,zIndex:100},children:[a.jsx("div",{style:{padding:"1.5rem",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:a.jsxs(ue,{to:"/map",style:{display:"flex",alignItems:"center",gap:"0.75rem",textDecoration:"none"},children:[a.jsx("div",{style:{width:"40px",height:"40px",background:"var(--kb-gold)",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--kb-navy)",fontFamily:"var(--font-display)",fontWeight:"700",fontSize:"1.2rem"},children:"K"}),a.jsxs("div",{children:[a.jsx("div",{style:{fontFamily:"var(--font-display)",fontWeight:"600",color:"var(--kb-white)",fontSize:"1.1rem"},children:"Kinderbucks"}),a.jsx("div",{style:{fontSize:"0.7rem",color:"var(--kb-gold)",textTransform:"uppercase",letterSpacing:"0.1em"},children:"Admin Portal"})]})]})}),a.jsx("nav",{style:{flex:1,padding:"1rem 0",overflowY:"auto"},children:h.map(g=>a.jsxs(ue,{to:g.to,style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.875rem 1.5rem",color:m(g.to)?"var(--kb-gold)":"var(--kb-gray-300)",background:m(g.to)?"rgba(201, 162, 39, 0.1)":"transparent",borderLeft:m(g.to)?"3px solid var(--kb-gold)":"3px solid transparent",textDecoration:"none",fontSize:"0.95rem",fontWeight:m(g.to)?"600":"400",transition:"all 0.2s"},children:[a.jsx(g.Icon,{size:20,strokeWidth:1.5}),g.label]},g.to))}),a.jsxs("div",{style:{padding:"1rem 1.5rem",borderTop:"1px solid rgba(255,255,255,0.1)"},children:[s&&a.jsxs("div",{style:{padding:"0.75rem 0",borderBottom:"1px solid rgba(255,255,255,0.1)",marginBottom:"0.75rem"},children:[a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-300)"},children:(l==null?void 0:l.displayName)||s.email}),a.jsx("div",{style:{fontSize:"0.75rem",color:"var(--kb-gray-500)"},children:(l==null?void 0:l.role)||"member"})]}),a.jsxs(ue,{to:"/map",style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.5rem 0",color:"var(--kb-gray-400)",textDecoration:"none",fontSize:"0.9rem"},children:[a.jsx(sV,{size:18}),"Back to Site"]}),s&&a.jsxs("button",{onClick:d,style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.5rem 0",color:"var(--kb-gray-400)",background:"none",border:"none",cursor:"pointer",fontSize:"0.9rem",width:"100%"},children:[a.jsx(Cg,{size:18}),"Sign Out"]})]})]}),a.jsxs("main",{style:{flex:1,marginLeft:"260px",background:"var(--kb-cream)",minHeight:"100vh"},children:[a.jsx("header",{style:{background:"var(--kb-white)",borderBottom:"1px solid var(--kb-gray-200)",padding:"1.25rem 2rem",position:"sticky",top:0,zIndex:50},children:a.jsx("h1",{style:{fontFamily:"var(--font-display)",fontSize:"1.5rem",color:"var(--kb-navy)",margin:0},children:e})}),a.jsx("div",{style:{padding:"2rem"},children:n})]}),a.jsx("style",{children:`
        @media (max-width: 768px) {
          aside {
            width: 100% !important;
            position: relative !important;
            display: none;
          }
          main {
            margin-left: 0 !important;
          }
        }
      `})]})}function uB(){const[n,e]=j.useState({totalCurrency:0,inCirculation:0,circulationValue:0,pendingExchanges:0,pendingValue:0,totalMembers:0,activeBusinesses:0,totalCheckins:0}),[t,r]=j.useState([]),[s,l]=j.useState({}),[c,h]=j.useState(!0);j.useEffect(()=>{async function m(){try{const g=await RT(),y=g.filter(A=>A.status==="issued"||A.status==="active"),x={};y.forEach(A=>{const C=A.denomination||0;x[C]=(x[C]||0)+1}),l(x);const E=await qi(),k=E.filter(A=>A.isActive),S=E.reduce((A,C)=>A+(C.checkinCount||0),0),I=dr(Rt(Ae,"exchanges"),li("status","==","pending"),Wi("createdAt","desc")),V=(await gn(I)).docs.map(A=>({id:A.id,...A.data()})),P=V.reduce((A,C)=>A+(C.kinderbucksAmount||0),0),K=dr(Rt(Ae,"exchanges"),Wi("createdAt","desc"),WM(5)),z=await gn(K);r(z.docs.map(A=>({id:A.id,...A.data()})));const W=await gn(Rt(Ae,"members"));e({totalCurrency:g.length,inCirculation:y.length,circulationValue:y.reduce((A,C)=>A+(C.denomination||0),0),pendingExchanges:V.length,pendingValue:P,totalMembers:W.size,activeBusinesses:k.length,totalCheckins:S}),h(!1)}catch(g){console.error("Error loading dashboard data:",g),h(!1)}}m()},[]);const d=({icon:m,label:g,value:y,subtext:x,color:E,to:k})=>a.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[a.jsxs("div",{children:[a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem",marginBottom:"0.5rem"},children:g}),a.jsx("div",{style:{fontFamily:"var(--font-display)",fontSize:"2rem",fontWeight:"700",color:E||"var(--kb-navy)"},children:y}),x&&a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem",marginTop:"0.25rem"},children:x})]}),a.jsx("div",{style:{width:"48px",height:"48px",background:`${E||"var(--kb-navy)"}15`,borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(m,{size:24,color:E||"var(--kb-navy)"})})]}),k&&a.jsx(ue,{to:k,style:{display:"block",marginTop:"1rem",paddingTop:"1rem",borderTop:"1px solid var(--kb-gray-100)",color:"var(--kb-navy)",fontSize:"0.85rem",fontWeight:"500"},children:"View Details "})]});return c?a.jsx(Qt,{title:"Dashboard",children:a.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:a.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading dashboard..."})})}):a.jsxs(Qt,{title:"Dashboard",children:[a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[a.jsx(d,{icon:Vi,label:"In Circulation",value:`$${n.circulationValue.toLocaleString()}`,subtext:`${n.inCirculation} bills issued`,color:"var(--kb-green)"}),a.jsx(d,{icon:or,label:"Pending Exchanges",value:n.pendingExchanges,subtext:`$${n.pendingValue.toFixed(2)} value`,color:n.pendingExchanges>0?"#e67e22":"var(--kb-gray-400)",to:"/admin/exchanges"}),a.jsx(d,{icon:Nr,label:"OK Members",value:n.totalMembers,subtext:`${n.totalCheckins} total check-ins`,color:"var(--kb-navy)",to:"/admin/members"}),a.jsx(d,{icon:St,label:"Active Businesses",value:n.activeBusinesses,color:"var(--kb-gold-dark)",to:"/admin/businesses"})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem"},children:[a.jsxs("div",{className:"card",children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[a.jsx("h3",{style:{color:"var(--kb-navy)",margin:0},children:"Recent Exchanges"}),a.jsx(ue,{to:"/admin/exchanges",style:{fontSize:"0.85rem",color:"var(--kb-navy)"},children:"View All "})]}),t.length===0?a.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"No exchanges yet"}):a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:t.map(m=>{var g,y,x,E;return a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem",background:"var(--kb-gray-50)",borderRadius:"8px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[m.status==="completed"?a.jsx(Sn,{size:18,color:"var(--kb-green)"}):m.status==="pending"?a.jsx(or,{size:18,color:"#e67e22"}):a.jsx(Vs,{size:18,color:"var(--kb-gray-400)"}),a.jsxs("div",{children:[a.jsxs("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:["$",m.usdAmount,"  $",(g=m.kinderbucksAmount)==null?void 0:g.toFixed(2)," KB"]}),a.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:((E=(x=(y=m.createdAt)==null?void 0:y.toDate)==null?void 0:x.call(y))==null?void 0:E.toLocaleDateString())||"Pending"})]})]}),a.jsx("span",{className:"badge",style:{background:m.status==="completed"?"#d4edda":m.status==="pending"?"#fff3cd":"#f8f9fa",color:m.status==="completed"?"var(--kb-green)":m.status==="pending"?"#856404":"var(--kb-gray-600)"},children:m.status})]},m.id)})})]}),a.jsxs("div",{className:"card",children:[a.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem"},children:"Circulation by Denomination"}),Object.keys(s).length===0?a.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"No currency in circulation yet"}):a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[1,5,10,20].map(m=>{const g=s[m]||0,y=Math.max(...Object.values(s),1),x=g/y*100,E={1:"#27ae60",5:"#3498db",10:"#9b59b6",20:"#c9a227"};return a.jsxs("div",{children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[a.jsxs("span",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:["$",m]}),a.jsxs("span",{style:{color:"var(--kb-gray-500)"},children:[g," bills ($",g*m,")"]})]}),a.jsx("div",{style:{height:"8px",background:"var(--kb-gray-100)",borderRadius:"4px",overflow:"hidden"},children:a.jsx("div",{style:{width:`${x}%`,height:"100%",background:E[m],borderRadius:"4px",transition:"width 0.5s ease"}})})]},m)})})]})]}),a.jsxs("div",{className:"card",style:{marginTop:"1.5rem"},children:[a.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Quick Actions"}),a.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[a.jsxs(ue,{to:"/admin/generate",className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(Rr,{size:18})," Generate QR Codes"]}),a.jsxs(ue,{to:"/admin/issue",className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx($h,{size:18})," Issue Currency"]}),a.jsxs(ue,{to:"/admin/exchanges",className:"btn btn-gold",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(Af,{size:18})," Process Exchanges"]})]})]})]})}function dB(){const[n,e]=j.useState({start:1,end:100}),[t,r]=j.useState(5),[s,l]=j.useState([]),[c,h]=j.useState(!1),[d,m]=j.useState(!1),g=()=>{const k=[];for(let S=n.start;S<=n.end;S++)k.push(`KB-${String(S).padStart(4,"0")}`);l(k),m(!1)},y=async()=>{h(!0);try{await z9(s,t),m(!0)}catch(k){console.error("Error saving:",k),alert("Error saving to database")}h(!1)},x="https://harmonicsystems.github.io/kinderbucks/#/scan/",E={1:{bg:"rgba(39, 174, 96, 0.1)",text:"var(--kb-green)"},5:{bg:"rgba(52, 152, 219, 0.1)",text:"#3498db"},10:{bg:"rgba(155, 89, 182, 0.1)",text:"#9b59b6"},20:{bg:"rgba(201, 162, 39, 0.1)",text:"var(--kb-gold-dark)"}};return a.jsxs(Qt,{title:"Generate QR Codes",children:[a.jsxs("div",{className:"card",style:{marginBottom:"2rem"},children:[a.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(Rr,{size:20})," Generation Settings"]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1.5rem",marginBottom:"1.5rem"},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Start Number"}),a.jsx("input",{type:"number",value:n.start,onChange:k=>e(S=>({...S,start:Number(k.target.value)})),min:1,max:9999,style:{width:"100%"}})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"End Number"}),a.jsx("input",{type:"number",value:n.end,onChange:k=>e(S=>({...S,end:Number(k.target.value)})),min:1,max:9999,style:{width:"100%"}})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Denomination"}),a.jsxs("select",{value:t,onChange:k=>r(Number(k.target.value)),style:{width:"100%"},children:[a.jsx("option",{value:1,children:"$1"}),a.jsx("option",{value:5,children:"$5"}),a.jsx("option",{value:10,children:"$10"}),a.jsx("option",{value:20,children:"$20"})]})]})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[a.jsxs("button",{className:"btn btn-primary",onClick:g,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(Rr,{size:18})," Generate ",n.end-n.start+1," Codes"]}),a.jsxs("div",{style:{padding:"0.75rem 1rem",background:E[t].bg,borderRadius:"8px",color:E[t].text,fontWeight:"600"},children:["Total Value: $",(n.end-n.start+1)*t]})]})]}),s.length>0&&a.jsxs("div",{className:"card",children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[a.jsxs("div",{children:[a.jsxs("h3",{style:{color:"var(--kb-navy)",margin:0},children:["Generated: ",s.length," Kinderbucks"]}),a.jsxs("p",{style:{color:"var(--kb-gray-500)",margin:"0.25rem 0 0",fontSize:"0.9rem"},children:["$",t," denomination  Total value: $",s.length*t]})]}),a.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[d?a.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--kb-green)",fontWeight:"600"},children:[a.jsx(Sn,{size:18})," Saved!"]}):a.jsxs("button",{className:"btn btn-gold",onClick:y,disabled:c,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(DV,{size:18}),c?"Saving...":"Save to Database"]}),a.jsxs("button",{className:"btn btn-secondary",onClick:()=>window.print(),style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(j2,{size:18})," Print"]})]})]}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gap:"1.5rem"},children:s.slice(0,50).map(k=>a.jsxs("div",{style:{background:"var(--kb-white)",border:"1px solid var(--kb-gray-200)",borderRadius:"12px",padding:"1rem",textAlign:"center"},children:[a.jsx(fl,{value:`${x}${k}`,size:140,denomination:t}),a.jsx("p",{style:{fontFamily:"monospace",marginTop:"0.75rem",fontSize:"0.9rem",color:"var(--kb-navy)",fontWeight:"600"},children:k})]},k))}),s.length>50&&a.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"var(--kb-gray-50)",borderRadius:"8px",textAlign:"center",color:"var(--kb-gray-600)"},children:["Showing 50 of ",s.length," codes. All will be saved and printable."]})]}),s.length===0&&a.jsxs("div",{className:"card",style:{textAlign:"center",padding:"4rem 2rem"},children:[a.jsx(Rr,{size:64,color:"var(--kb-gray-300)",style:{marginBottom:"1rem"}}),a.jsx("h3",{style:{color:"var(--kb-gray-500)",marginBottom:"0.5rem"},children:"No codes generated yet"}),a.jsx("p",{style:{color:"var(--kb-gray-400)"},children:"Set your range and denomination above, then click Generate."})]})]})}function hB(){const[n,e]=j.useState([]),[t,r]=j.useState(!0),[s,l]=j.useState([]),[c,h]=j.useState(""),[d,m]=j.useState(!1),[g,y]=j.useState(0),x=async()=>{const A=await RT();e(A.filter(C=>C.status==="draft"||C.status==="issued")),r(!1)};j.useEffect(()=>{x()},[]);const E=A=>{l(C=>C.includes(A)?C.filter(M=>M!==A):[...C,A])},k=()=>{const A=N.map(C=>C.serial);l(A)},S=()=>{l([])},I=async()=>{if(s.length!==0){m(!0);try{for(const A of s)await F9(A,"issued",c);y(s.length),l([]),h(""),await x(),setTimeout(()=>y(0),3e3)}catch(A){console.error("Error issuing:",A),alert("Error issuing Kinderbucks")}m(!1)}},N=n.filter(A=>A.status==="draft"),V=n.filter(A=>A.status==="issued"),P=s.reduce((A,C)=>{const M=n.find(O=>O.serial===C);return A+((M==null?void 0:M.denomination)||0)},0),z=(A=>{const C={1:[],5:[],10:[],20:[]};return A.forEach(M=>{const O=M.denomination||5;C[O]&&C[O].push(M)}),C})(N),W={1:"#27ae60",5:"#3498db",10:"#9b59b6",20:"#c9a227"};return t?a.jsx(Qt,{title:"Issue Currency",children:a.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:a.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading..."})})}):a.jsxs(Qt,{title:"Issue Currency",children:[g>0&&a.jsxs("div",{style:{position:"fixed",top:"100px",right:"2rem",background:"var(--kb-green)",color:"white",padding:"1rem 1.5rem",borderRadius:"8px",display:"flex",alignItems:"center",gap:"0.75rem",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:1e3},children:[a.jsx(Sn,{size:20}),a.jsxs("span",{children:["Issued ",g," Kinderbucks successfully!"]})]}),a.jsxs("div",{className:"card",style:{marginBottom:"2rem"},children:[a.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx($h,{size:20})," Issue to Circulation"]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:"1.5rem",alignItems:"end"},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Recipient (optional)"}),a.jsx("input",{type:"text",value:c,onChange:A=>h(A.target.value),placeholder:"Business name or exchange point",style:{width:"100%"}})]}),a.jsxs("button",{className:"btn btn-gold",onClick:I,disabled:s.length===0||d,style:{display:"flex",alignItems:"center",gap:"0.5rem",height:"42px"},children:[a.jsx($h,{size:18}),d?"Issuing...":`Issue ${s.length} Selected`]})]}),s.length>0&&a.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem 1rem",background:"var(--kb-gold)",borderRadius:"8px",color:"var(--kb-navy)",fontWeight:"500"},children:["Selected: ",s.length," bills  Total value: $",P]})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[a.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-gray-500)"},children:N.length}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Available (Draft)"})]}),a.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-green)"},children:V.length}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Already Issued"})]}),a.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:s.length}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Selected"})]})]}),a.jsxs("div",{className:"card",children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[a.jsxs("h3",{style:{color:"var(--kb-navy)",margin:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(Gw,{size:20})," Available to Issue (",N.length,")"]}),a.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[a.jsx("button",{className:"btn btn-secondary",onClick:k,style:{padding:"0.4rem 0.75rem",fontSize:"0.85rem"},children:"Select All"}),a.jsx("button",{className:"btn btn-secondary",onClick:S,style:{padding:"0.4rem 0.75rem",fontSize:"0.85rem"},children:"Clear"})]})]}),N.length===0?a.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[a.jsx(Gw,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),a.jsx("p",{children:"No draft Kinderbucks available."}),a.jsx("p",{style:{fontSize:"0.9rem"},children:"Generate some QR codes first."})]}):a.jsx("div",{children:[1,5,10,20].map(A=>{const C=z[A];return C.length===0?null:a.jsxs("div",{style:{marginBottom:"1.5rem"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem"},children:[a.jsxs("div",{style:{width:"24px",height:"24px",background:W[A],borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"0.75rem",fontWeight:"600"},children:["$",A]}),a.jsxs("span",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:["$",A," Bills (",C.length,")"]}),a.jsx("button",{onClick:()=>{const M=C.map(B=>B.serial),O=M.every(B=>s.includes(B));l(O?B=>B.filter(U=>!M.includes(U)):B=>[...new Set([...B,...M])])},style:{background:"none",border:"none",color:W[A],cursor:"pointer",fontSize:"0.85rem"},children:C.every(M=>s.includes(M.serial))?"Deselect all":"Select all"})]}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))",gap:"0.5rem"},children:C.map(M=>{const O=s.includes(M.serial);return a.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.6rem 0.75rem",background:O?`${W[A]}15`:"var(--kb-gray-50)",borderRadius:"6px",cursor:"pointer",border:O?`2px solid ${W[A]}`:"2px solid transparent",transition:"all 0.15s"},children:[O?a.jsx(KV,{size:18,color:W[A]}):a.jsx(GV,{size:18,color:"var(--kb-gray-400)"}),a.jsx("input",{type:"checkbox",checked:O,onChange:()=>E(M.serial),style:{display:"none"}}),a.jsx("span",{style:{fontFamily:"monospace",fontSize:"0.85rem",color:O?W[A]:"var(--kb-gray-600)",fontWeight:O?"600":"400"},children:M.serial})]},M.serial)})})]},A)})})]})]})}const fB=[{code:"AVIARY",name:"The Aviary",category:"food"},{code:"MORNINGBIRD",name:"Morningbird Cafe",category:"food"},{code:"SAISONNIER",name:"Saisonnier",category:"food"},{code:"BROADST-BAGEL",name:"Broad Street Bagel Co.",category:"food"},{code:"ISOLA",name:"Isola Wine Bar",category:"food"},{code:"BOTTLE-SHOP",name:"Kinderhook Bottle Shop",category:"retail"},{code:"SAMASCOTTS",name:"Samascott's Garden Market",category:"retail"},{code:"SAMASCOTT-ORCHARDS",name:"Samascott Orchards",category:"retail"},{code:"SCHOOL-GALLERY",name:"The School | Jack Shainman Gallery",category:"arts"},{code:"FEED-SEED",name:"The Feed and Seed",category:"services"},{code:"OLD-DUTCH",name:"The Old Dutch Inn",category:"services"},{code:"VILLAGE-YOGA",name:"Village Yoga",category:"services"},{code:"WALSH-DENTISTRY",name:"Walsh & Walsh Dentistry",category:"services"}],qp={food:{label:"Food & Drink",Icon:P2,color:"#e74c3c"},retail:{label:"Retail",Icon:u0,color:"#9b59b6"},services:{label:"Services",Icon:b2,color:"#3498db"},arts:{label:"Arts & Culture",Icon:C2,color:"#1abc9c"}};function mB(){const[n,e]=j.useState([]),[t,r]=j.useState(!0),[s,l]=j.useState({code:"",name:"",category:"food"}),[c,h]=j.useState(!1),[d,m]=j.useState(null),[g,y]=j.useState(!1),[x,E]=j.useState(null),k=async()=>{const z=await qi();e(z),r(!1)};j.useEffect(()=>{k()},[]);const S=async z=>{if(z.preventDefault(),!(!s.code||!s.name)){h(!0);try{await pk(s.code.toUpperCase(),s.name,s.category),l({code:"",name:"",category:"food"}),await k()}catch(W){console.error("Error creating business:",W),alert("Error creating business")}h(!1)}},I=async(z,W)=>{await I9(z,!W),await k()},N=async()=>{if(confirm("This will add all Kinderhook businesses. Continue?")){y(!0);try{for(const z of fB)n.find(A=>A.code===z.code)||await pk(z.code,z.name,z.category);await k(),alert("Businesses seeded successfully!")}catch(z){console.error("Error seeding:",z),alert("Error seeding businesses")}y(!1)}},V=z=>{navigator.clipboard.writeText(z),E(z),setTimeout(()=>E(null),2e3)},P="https://harmonicsystems.github.io/kinderbucks/#/checkin/",K={total:n.length,active:n.filter(z=>z.isActive).length,totalCheckins:n.reduce((z,W)=>z+(W.checkinCount||0),0)};return t?a.jsx(Qt,{title:"Business Directory",children:a.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:a.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading..."})})}):a.jsxs(Qt,{title:"Business Directory",children:[a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[a.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:K.total}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Businesses"})]}),a.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-green)"},children:K.active}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Active"})]}),a.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-gold-dark)"},children:K.totalCheckins}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Check-ins"})]})]}),a.jsxs("div",{className:"card",style:{marginBottom:"2rem"},children:[a.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(iu,{size:20})," Add Business"]}),a.jsxs("form",{onSubmit:S,children:[a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1.5rem",marginBottom:"1.5rem"},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Code"}),a.jsx("input",{type:"text",value:s.code,onChange:z=>l(W=>({...W,code:z.target.value.toUpperCase().replace(/[^A-Z0-9-]/g,"")})),placeholder:"CAFE-01",style:{width:"100%",fontFamily:"monospace"}})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Name"}),a.jsx("input",{type:"text",value:s.name,onChange:z=>l(W=>({...W,name:z.target.value})),placeholder:"Village Caf",style:{width:"100%"}})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Category"}),a.jsx("select",{value:s.category,onChange:z=>l(W=>({...W,category:z.target.value})),style:{width:"100%"},children:Object.entries(qp).map(([z,W])=>a.jsx("option",{value:z,children:W.label},z))})]})]}),a.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[a.jsxs("button",{type:"submit",className:"btn btn-primary",disabled:c||!s.code||!s.name,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(iu,{size:18})," ",c?"Adding...":"Add Business"]}),a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:N,disabled:g,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(S2,{size:18})," ",g?"Seeding...":"Seed Kinderhook Businesses"]})]})]})]}),a.jsxs("div",{className:"card",children:[a.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(St,{size:20})," Participating Businesses (",n.length,")"]}),n.length===0?a.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[a.jsx(St,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),a.jsx("p",{children:"No businesses yet. Add one above or seed the Kinderhook businesses."})]}):a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:n.map(z=>{const W=qp[z.category]||qp.services,A=W.Icon,C=`${P}${z.code}`;return a.jsxs("div",{style:{background:z.isActive?"var(--kb-white)":"var(--kb-gray-50)",border:`1px solid ${z.isActive,"var(--kb-gray-200)"}`,borderRadius:"12px",padding:"1.25rem",opacity:z.isActive?1:.7},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"1rem"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[a.jsx("div",{style:{width:"48px",height:"48px",background:`${W.color}15`,borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(A,{size:24,color:W.color})}),a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:"600",color:z.isActive?"var(--kb-navy)":"var(--kb-gray-500)",fontSize:"1.1rem"},children:z.name}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginTop:"0.25rem"},children:[a.jsx("span",{style:{fontFamily:"monospace",fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:z.code}),a.jsx("span",{style:{fontSize:"0.85rem",color:W.color},children:W.label})]})]})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1.5rem"},children:[a.jsxs("div",{style:{textAlign:"center"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"var(--kb-green)",fontWeight:"600"},children:[a.jsx($s,{size:16}),z.checkinCount||0]}),a.jsx("div",{style:{fontSize:"0.75rem",color:"var(--kb-gray-500)"},children:"check-ins"})]}),a.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[a.jsxs(ue,{to:`/admin/businesses/${z.code}`,className:"btn btn-gold",style:{padding:"0.5rem 0.75rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:[a.jsx(E2,{size:16})," Details"]}),a.jsx("button",{onClick:()=>m(d===z.code?null:z.code),className:"btn btn-secondary",style:{padding:"0.5rem 0.75rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:a.jsx(Rr,{size:16})}),a.jsxs("button",{onClick:()=>I(z.code,z.isActive),className:"btn",style:{padding:"0.5rem 0.75rem",background:z.isActive?"#e74c3c":"var(--kb-green)",color:"white",display:"flex",alignItems:"center",gap:"0.25rem"},children:[z.isActive?a.jsx(a3,{size:16}):a.jsx(s3,{size:16}),z.isActive?"Deactivate":"Activate"]})]})]})]}),d===z.code&&a.jsxs("div",{style:{marginTop:"1.5rem",paddingTop:"1.5rem",borderTop:"1px solid var(--kb-gray-200)",display:"flex",alignItems:"center",gap:"2rem",flexWrap:"wrap"},children:[a.jsx("div",{style:{textAlign:"center"},children:a.jsx(fl,{value:C,size:150,denomination:5,showFrame:!1})}),a.jsxs("div",{style:{flex:1,minWidth:"200px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontSize:"0.85rem"},children:"Check-in URL"}),a.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[a.jsx("input",{type:"text",value:C,readOnly:!0,style:{flex:1,fontFamily:"monospace",fontSize:"0.85rem"}}),a.jsxs("button",{onClick:()=>V(C),className:"btn btn-secondary",style:{padding:"0.5rem 0.75rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:[a.jsx(l0,{size:16}),x===C?"Copied!":"Copy"]})]}),a.jsx("p",{style:{marginTop:"0.75rem",fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Print this QR code and display it at the counter for customers to scan when they visit."})]})]})]},z.code)})})]})]})}const pB={curious:on,hooked:fr,lineAndSinker:hr,patron:Gn};function gB(){const[n,e]=j.useState([]),[t,r]=j.useState(!0),[s,l]=j.useState("all"),[c,h]=j.useState(null),d=async()=>{try{const k=dr(Rt(Ae,"exchanges"),Wi("createdAt","desc")),S=await gn(k);e(S.docs.map(I=>({id:I.id,...I.data()}))),r(!1)}catch(k){console.error("Error loading exchanges:",k),r(!1)}};j.useEffect(()=>{d()},[]);const m=async(k,S)=>{h(k);try{await Dr(st(Ae,"exchanges",k),{status:S,processedAt:ht()}),await d()}catch(I){console.error("Error updating exchange:",I),alert("Error updating exchange status")}h(null)},g=s==="all"?n:n.filter(k=>k.status===s),y={total:n.length,pending:n.filter(k=>k.status==="pending").length,completed:n.filter(k=>k.status==="completed").length,cancelled:n.filter(k=>k.status==="cancelled").length,totalValue:n.filter(k=>k.status==="completed").reduce((k,S)=>k+(S.kinderbucksAmount||0),0)},x=k=>{switch(k){case"completed":return a.jsx(Sn,{size:18,color:"var(--kb-green)"});case"pending":return a.jsx(or,{size:18,color:"#e67e22"});case"cancelled":return a.jsx(k2,{size:18,color:"#e74c3c"});default:return a.jsx(Vs,{size:18,color:"var(--kb-gray-400)"})}},E=k=>{switch(k){case"completed":return{background:"#d4edda",color:"var(--kb-green)"};case"pending":return{background:"#fff3cd",color:"#856404"};case"cancelled":return{background:"#f8d7da",color:"#721c24"};default:return{background:"#f8f9fa",color:"var(--kb-gray-600)"}}};return t?a.jsx(Qt,{title:"Exchange Management",children:a.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:a.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading exchanges..."})})}):a.jsxs(Qt,{title:"Exchange Management",children:[a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[a.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"#e67e22"},children:y.pending}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Pending"})]}),a.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-green)"},children:y.completed}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Completed"})]}),a.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[a.jsxs("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-gold-dark)"},children:["$",y.totalValue.toFixed(0)]}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Exchanged"})]})]}),a.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem",flexWrap:"wrap"},children:[{value:"all",label:`All (${y.total})`},{value:"pending",label:`Pending (${y.pending})`},{value:"completed",label:`Completed (${y.completed})`},{value:"cancelled",label:`Cancelled (${y.cancelled})`}].map(k=>a.jsx("button",{onClick:()=>l(k.value),className:s===k.value?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem"},children:k.label},k.value))}),a.jsx("div",{className:"card",children:g.length===0?a.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[a.jsx(Af,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),a.jsxs("p",{children:["No ",s!=="all"?s:""," exchanges found"]})]}):a.jsxs("div",{children:[a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 150px",gap:"1rem",padding:"0.75rem 1rem",borderBottom:"2px solid var(--kb-navy)",fontWeight:"600",color:"var(--kb-navy)",fontSize:"0.85rem"},children:[a.jsx("div",{children:"Date"}),a.jsx("div",{children:"Amount"}),a.jsx("div",{children:"Tier & Bonus"}),a.jsx("div",{children:"Status"}),a.jsx("div",{children:"Actions"})]}),g.map(k=>{var I,N,V,P,K,z,W;const S=pB[k.tier]||on;return a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 150px",gap:"1rem",padding:"1rem",borderBottom:"1px solid var(--kb-gray-100)",alignItems:"center",background:k.status==="pending"?"rgba(230, 126, 34, 0.05)":"transparent"},children:[a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:((V=(N=(I=k.createdAt)==null?void 0:I.toDate)==null?void 0:N.call(I))==null?void 0:V.toLocaleDateString())||"Unknown"}),a.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:((z=(K=(P=k.createdAt)==null?void 0:P.toDate)==null?void 0:K.call(P))==null?void 0:z.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))||""})]}),a.jsxs("div",{children:[a.jsxs("div",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:["$",k.usdAmount," USD"]}),a.jsxs("div",{style:{fontSize:"0.9rem",color:"var(--kb-gold-dark)"},children:[" $",(W=k.kinderbucksAmount)==null?void 0:W.toFixed(2)," KB"]})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(S,{size:18,color:"var(--kb-gray-500)"}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"0.9rem",color:"var(--kb-gray-700)",textTransform:"capitalize"},children:k.tier||"curious"}),a.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--kb-green)"},children:["+",Math.round((k.bonusRate||.1)*100),"% bonus"]})]})]}),a.jsx("div",{children:a.jsxs("span",{className:"badge",style:{...E(k.status),display:"inline-flex",alignItems:"center",gap:"0.25rem"},children:[x(k.status),k.status]})}),a.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[k.status==="pending"&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>m(k.id,"completed"),disabled:c===k.id,className:"btn btn-primary",style:{padding:"0.4rem 0.75rem",fontSize:"0.8rem"},children:c===k.id?"...":"Approve"}),a.jsx("button",{onClick:()=>m(k.id,"cancelled"),disabled:c===k.id,className:"btn btn-secondary",style:{padding:"0.4rem 0.75rem",fontSize:"0.8rem"},children:"Cancel"})]}),k.status==="completed"&&a.jsx("span",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Processed"}),k.status==="cancelled"&&a.jsx("button",{onClick:()=>m(k.id,"pending"),disabled:c===k.id,className:"btn btn-secondary",style:{padding:"0.4rem 0.75rem",fontSize:"0.8rem"},children:"Reopen"})]})]},k.id)})]})})]})}const Gp={curious:on,hooked:fr,lineAndSinker:hr,patron:Gn},Qp={curious:"#888888",hooked:"#2e7d32",lineAndSinker:"#1565c0",patron:"#c9a227"};function yB(){const[n,e]=j.useState([]),[t,r]=j.useState([]),[s,l]=j.useState(!0),[c,h]=j.useState("checkins"),[d,m]=j.useState("all");j.useEffect(()=>{async function k(){try{const I=(await gn(Rt(Ae,"members"))).docs.map(V=>({id:V.id,...V.data()})),N=await qi();e(I),r(N),l(!1)}catch(S){console.error("Error loading members:",S),l(!1)}}k()},[]);const g=k=>{const S=t.find(I=>I.code===k);return S?S.name:k},y=[...n].sort((k,S)=>{var I,N,V,P,K,z;switch(c){case"checkins":return(S.totalCheckins||0)-(k.totalCheckins||0);case"businesses":return(((I=S.businessesVisited)==null?void 0:I.length)||0)-(((N=k.businessesVisited)==null?void 0:N.length)||0);case"recent":const W=((P=(V=k.lastCheckin)==null?void 0:V.toDate)==null?void 0:P.call(V))||new Date(0);return(((z=(K=S.lastCheckin)==null?void 0:K.toDate)==null?void 0:z.call(K))||new Date(0))-W;default:return 0}}),x=d==="all"?y:y.filter(k=>k.tier===d),E={total:n.length,curious:n.filter(k=>k.tier==="curious").length,hooked:n.filter(k=>k.tier==="hooked").length,lineAndSinker:n.filter(k=>k.tier==="lineAndSinker").length,patron:n.filter(k=>k.tier==="patron").length,totalCheckins:n.reduce((k,S)=>k+(S.totalCheckins||0),0)};return s?a.jsx(Qt,{title:"Member Management",children:a.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:a.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading members..."})})}):a.jsxs(Qt,{title:"Member Management",children:[a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(130px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[a.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:E.total}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Members"})]}),Object.entries(Gp).map(([k,S])=>{var I;return a.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[a.jsx(S,{size:20,color:Qp[k]}),a.jsx("span",{style:{fontSize:"1.5rem",fontWeight:"700",color:Qp[k]},children:E[k]})]}),a.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)",textTransform:"capitalize"},children:((I=lr[k])==null?void 0:I.name)||k})]},k)})]}),a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[a.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[a.jsx("button",{onClick:()=>m("all"),className:d==="all"?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem"},children:"All"}),Object.entries(Gp).map(([k,S])=>a.jsx("button",{onClick:()=>m(k),className:d===k?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:a.jsx(S,{size:16})},k))]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx("span",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"Sort by:"}),a.jsxs("select",{value:c,onChange:k=>h(k.target.value),style:{padding:"0.5rem"},children:[a.jsx("option",{value:"checkins",children:"Most Check-ins"}),a.jsx("option",{value:"businesses",children:"Most Businesses"}),a.jsx("option",{value:"recent",children:"Recent Activity"})]})]})]}),a.jsx("div",{className:"card",children:x.length===0?a.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[a.jsx(Nr,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),a.jsx("p",{children:"No members found"})]}):a.jsxs("div",{children:[a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 2fr",gap:"1rem",padding:"0.75rem 1rem",borderBottom:"2px solid var(--kb-navy)",fontWeight:"600",color:"var(--kb-navy)",fontSize:"0.85rem"},children:[a.jsx("div",{children:"Member"}),a.jsx("div",{children:"Tier"}),a.jsx("div",{children:"Activity"}),a.jsx("div",{children:"Businesses Visited"})]}),x.map(k=>{var P,K,z,W,A;const S=Gp[k.tier]||on,I=Qp[k.tier]||"#888",N=lr[k.tier]||lr.curious,V=((P=k.businessesVisited)==null?void 0:P.length)||0;return a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 2fr",gap:"1rem",padding:"1rem",borderBottom:"1px solid var(--kb-gray-100)",alignItems:"center"},children:[a.jsxs("div",{children:[a.jsxs("div",{style:{fontFamily:"monospace",fontSize:"0.85rem",color:"var(--kb-gray-500)",wordBreak:"break-all"},children:[k.id.substring(0,16),"..."]}),k.lastCheckin&&a.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-400)",display:"flex",alignItems:"center",gap:"0.25rem",marginTop:"0.25rem"},children:[a.jsx(Rf,{size:12}),"Last: ",((W=(z=(K=k.lastCheckin)==null?void 0:K.toDate)==null?void 0:z.call(K))==null?void 0:W.toLocaleDateString())||"Unknown"]})]}),a.jsxs("div",{children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:I,fontWeight:"600"},children:[a.jsx(S,{size:20}),N.name]}),a.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:[Math.round(N.bonus*100),"% bonus"]})]}),a.jsxs("div",{children:[a.jsxs("div",{style:{fontWeight:"600",color:"var(--kb-navy)",display:"flex",alignItems:"center",gap:"0.25rem"},children:[a.jsx($s,{size:16}),k.totalCheckins||0]}),a.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:"check-ins"})]}),a.jsxs("div",{children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",marginBottom:"0.5rem",color:"var(--kb-gray-600)"},children:[a.jsx(ru,{size:14}),a.jsx("span",{style:{fontWeight:"500"},children:V}),a.jsx("span",{style:{fontSize:"0.85rem"},children:"businesses"})]}),((A=k.businessesVisited)==null?void 0:A.length)>0&&a.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.25rem"},children:[k.businessesVisited.slice(0,3).map(C=>a.jsx("span",{style:{fontSize:"0.75rem",padding:"0.15rem 0.5rem",background:"var(--kb-gray-100)",borderRadius:"4px",color:"var(--kb-gray-600)"},children:g(C)},C)),k.businessesVisited.length>3&&a.jsxs("span",{style:{fontSize:"0.75rem",color:"var(--kb-gray-400)"},children:["+",k.businessesVisited.length-3," more"]})]})]})]},k.id)})]})}),a.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"var(--kb-gray-50)",borderRadius:"8px",textAlign:"center",color:"var(--kb-gray-600)",fontSize:"0.9rem"},children:["Total of ",a.jsx("strong",{children:E.totalCheckins})," check-ins across ",a.jsx("strong",{children:E.total})," members"]})]})}const Yp={admin:{label:"Admin",color:"#dc2626",bgColor:"#fef2f2",Icon:Hh,description:"Full system access"},business:{label:"Business",color:"#2563eb",bgColor:"#eff6ff",Icon:St,description:"Business owner access"},member:{label:"Member",color:"var(--kb-green)",bgColor:"#f0fdf4",Icon:el,description:"Regular member"}};function vB(){const[n,e]=j.useState([]),[t,r]=j.useState([]),[s,l]=j.useState(!0),[c,h]=j.useState(""),[d,m]=j.useState("all"),[g,y]=j.useState(null),[x,E]=j.useState(null),[k,S]=j.useState(""),I=async()=>{const[W,A]=await Promise.all([nD(),qi()]);e(W),r(A),l(!1)};j.useEffect(()=>{I()},[]);const N=async(W,A)=>{try{await eD(W,A),S("Role updated successfully"),setTimeout(()=>S(""),3e3),await I(),y(null)}catch(C){console.error("Error updating role:",C),alert("Error updating role")}},V=async(W,A)=>{try{await tD(W,A),S("Business assigned successfully"),setTimeout(()=>S(""),3e3),await I(),E(null)}catch(C){console.error("Error assigning business:",C),alert("Error assigning business")}},P=n.filter(W=>{var M,O;const A=((M=W.email)==null?void 0:M.toLowerCase().includes(c.toLowerCase()))||((O=W.displayName)==null?void 0:O.toLowerCase().includes(c.toLowerCase())),C=d==="all"||W.role===d;return A&&C}),K={total:n.length,admins:n.filter(W=>W.role==="admin").length,businesses:n.filter(W=>W.role==="business").length,members:n.filter(W=>W.role==="member").length},z=W=>W?(W.toDate?W.toDate():new Date(W)).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Never";return s?a.jsx(Qt,{title:"User Management",children:a.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:a.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading..."})})}):a.jsxs(Qt,{title:"User Management",children:[k&&a.jsxs("div",{style:{position:"fixed",top:"100px",right:"2rem",background:"var(--kb-green)",color:"white",padding:"1rem 1.5rem",borderRadius:"8px",display:"flex",alignItems:"center",gap:"0.75rem",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:1e3},children:[a.jsx(Sn,{size:20}),a.jsx("span",{children:k})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[a.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:K.total}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Users"})]}),a.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"#dc2626"},children:K.admins}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Admins"})]}),a.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"#2563eb"},children:K.businesses}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Businesses"})]}),a.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-green)"},children:K.members}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Members"})]})]}),a.jsx("div",{className:"card",style:{marginBottom:"2rem"},children:a.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap",alignItems:"center"},children:[a.jsxs("div",{style:{flex:1,minWidth:"200px",position:"relative"},children:[a.jsx(A2,{size:18,color:"var(--kb-gray-400)",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)"}}),a.jsx("input",{type:"text",placeholder:"Search by name or email...",value:c,onChange:W=>h(W.target.value),style:{width:"100%",paddingLeft:"40px"}})]}),a.jsxs("select",{value:d,onChange:W=>m(W.target.value),style:{minWidth:"150px"},children:[a.jsx("option",{value:"all",children:"All Roles"}),a.jsx("option",{value:"admin",children:"Admins"}),a.jsx("option",{value:"business",children:"Businesses"}),a.jsx("option",{value:"member",children:"Members"})]})]})}),a.jsxs("div",{className:"card",children:[a.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(Nr,{size:20})," All Users (",P.length,")"]}),P.length===0?a.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[a.jsx(Nr,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),a.jsx("p",{children:"No users found"})]}):a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:P.map(W=>{const A=Yp[W.role]||Yp.member,C=A.Icon;return a.jsx("div",{style:{background:"var(--kb-gray-50)",border:"1px solid var(--kb-gray-200)",borderRadius:"12px",padding:"1.25rem"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"1rem"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[a.jsx("div",{style:{width:"48px",height:"48px",background:A.bgColor,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(C,{size:24,color:A.color})}),a.jsxs("div",{children:[a.jsxs("div",{style:{fontWeight:"600",color:"var(--kb-navy)",fontSize:"1.05rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[W.displayName||"Unnamed User",W.role==="admin"&&a.jsx(Gn,{size:16,color:"#c9a227"})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:[a.jsx(I2,{size:14}),W.email]}),W.businessCode&&a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#2563eb",fontSize:"0.85rem",marginTop:"0.25rem"},children:[a.jsx(St,{size:14}),W.businessCode]})]})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[a.jsx("div",{style:{padding:"0.4rem 0.8rem",background:A.bgColor,color:A.color,borderRadius:"6px",fontSize:"0.85rem",fontWeight:"600"},children:A.label}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:[a.jsx(Rf,{size:14}),z(W.lastLogin)]}),a.jsxs("div",{style:{position:"relative"},children:[a.jsx("button",{onClick:()=>y(g===W.id?null:W.id),className:"btn btn-secondary",style:{padding:"0.5rem"},children:a.jsx(XD,{size:18})}),g===W.id&&a.jsxs("div",{style:{position:"absolute",right:0,top:"100%",marginTop:"0.5rem",background:"white",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:100,minWidth:"180px",overflow:"hidden"},children:[a.jsx("div",{style:{padding:"0.75rem",borderBottom:"1px solid var(--kb-gray-200)"},children:a.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)",marginBottom:"0.25rem"},children:"Change Role"})}),Object.entries(Yp).map(([M,O])=>a.jsxs("button",{onClick:()=>N(W.id,M),style:{display:"flex",alignItems:"center",gap:"0.5rem",width:"100%",padding:"0.75rem 1rem",border:"none",background:W.role===M?O.bgColor:"transparent",color:"var(--kb-gray-700)",cursor:"pointer",textAlign:"left"},children:[a.jsx(O.Icon,{size:16,color:O.color}),O.label,W.role===M&&a.jsx(Sn,{size:14,color:O.color,style:{marginLeft:"auto"}})]},M)),(W.role==="business"||W.role==="admin")&&a.jsxs(a.Fragment,{children:[a.jsx("div",{style:{borderTop:"1px solid var(--kb-gray-200)"}}),a.jsxs("button",{onClick:()=>{y(null),E(W.id)},style:{display:"flex",alignItems:"center",gap:"0.5rem",width:"100%",padding:"0.75rem 1rem",border:"none",background:"transparent",color:"#2563eb",cursor:"pointer",textAlign:"left"},children:[a.jsx(St,{size:16}),W.businessCode?"Change Business":"Assign Business"]})]})]})]})]})]})},W.id)})})]}),x&&a.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:1e3},children:a.jsxs("div",{className:"card",style:{maxWidth:"400px",width:"100%",padding:"1.5rem"},children:[a.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Assign Business"}),a.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1rem"},children:"Select a business to assign to this user:"}),a.jsx("div",{style:{maxHeight:"300px",overflowY:"auto",marginBottom:"1rem"},children:t.map(W=>a.jsxs("button",{onClick:()=>V(x,W.code),style:{display:"flex",alignItems:"center",gap:"0.75rem",width:"100%",padding:"0.75rem",border:"1px solid var(--kb-gray-200)",borderRadius:"8px",background:"white",cursor:"pointer",marginBottom:"0.5rem",textAlign:"left"},children:[a.jsx(St,{size:18,color:"var(--kb-navy)"}),a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:W.name}),a.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:W.code})]})]},W.code))}),a.jsx("button",{onClick:()=>E(null),className:"btn btn-secondary",style:{width:"100%"},children:"Cancel"})]})})]})}const xk={curious:on,hooked:fr,lineAndSinker:hr,patron:Gn},wk={curious:"#6b7280",hooked:"#16a34a",lineAndSinker:"#2563eb",patron:"#ca8a04"};function xB(){const{businessCode:n}=oy(),[e,t]=j.useState(null),[r,s]=j.useState([]),[l,c]=j.useState(!0),[h,d]=j.useState(!1);j.useEffect(()=>{async function S(){const[I,N]=await Promise.all([Vf(n),NT(n)]);t(I),s(N),c(!1)}S()},[n]);const m=()=>{const S=`https://harmonicsystems.github.io/kinderbucks/#/checkin/${n}`;navigator.clipboard.writeText(S),d(!0),setTimeout(()=>d(!1),2e3)},g=r.filter(S=>{var V;const I=(V=S.timestamp)!=null&&V.toDate?S.timestamp.toDate():new Date(S.timestamp),N=new Date;return I.toDateString()===N.toDateString()}).length,y=r.filter(S=>{var V;const I=(V=S.timestamp)!=null&&V.toDate?S.timestamp.toDate():new Date(S.timestamp),N=new Date;return N.setDate(N.getDate()-7),I>N}).length,x=new Set(r.map(S=>S.visitorId)).size,E=r.reduce((S,I)=>{const N=I.memberTier||"curious";return S[N]=(S[N]||0)+1,S},{});if(l)return a.jsx(Qt,{title:"Business Details",children:a.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:a.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading..."})})});if(!e)return a.jsx(Qt,{title:"Business Details",children:a.jsxs("div",{style:{textAlign:"center",padding:"4rem"},children:[a.jsx(St,{size:48,color:"var(--kb-gray-300)",style:{marginBottom:"1rem"}}),a.jsx("h2",{style:{color:"var(--kb-navy)"},children:"Business Not Found"}),a.jsxs("p",{style:{color:"var(--kb-gray-500)",marginBottom:"1.5rem"},children:['No business with code "',n,'" exists.']}),a.jsx(ue,{to:"/admin/businesses",className:"btn btn-primary",children:"Back to Businesses"})]})});const k=`https://harmonicsystems.github.io/kinderbucks/#/checkin/${n}`;return a.jsxs(Qt,{title:"Business Details",children:[a.jsxs(ue,{to:"/admin/businesses",style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",color:"var(--kb-gray-500)",marginBottom:"1.5rem",fontSize:"0.9rem"},children:[a.jsx(w2,{size:16})," Back to Directory"]}),a.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",flexWrap:"wrap",gap:"1.5rem",marginBottom:"2rem"},children:[a.jsxs("div",{children:[a.jsx("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.25rem 0.75rem",background:e.isActive?"rgba(39, 174, 96, 0.1)":"rgba(231, 76, 60, 0.1)",color:e.isActive?"var(--kb-green)":"#e74c3c",borderRadius:"6px",fontSize:"0.85rem",fontWeight:"600",marginBottom:"0.75rem"},children:e.isActive?"Active":"Inactive"}),a.jsx("h1",{style:{color:"var(--kb-navy)",marginBottom:"0.25rem",fontSize:"2rem"},children:e.name}),a.jsx("div",{style:{fontFamily:"monospace",color:"var(--kb-gray-500)"},children:n})]}),a.jsxs("div",{className:"card",style:{padding:"1.5rem",textAlign:"center"},children:[a.jsx("div",{style:{background:"white",borderRadius:"12px",padding:"12px",marginBottom:"1rem"},children:a.jsx(fl,{value:k,size:120,showFrame:!1})}),a.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[a.jsxs("button",{onClick:m,className:"btn btn-secondary",style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.25rem",fontSize:"0.85rem"},children:[a.jsx(l0,{size:14})," ",h?"Copied!":"Copy URL"]}),a.jsxs("button",{onClick:()=>window.print(),className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"0.85rem"},children:[a.jsx(S2,{size:14})," Print"]})]})]})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[a.jsx("div",{className:"card",style:{padding:"1.25rem"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[a.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(39, 174, 96, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx($s,{size:22,color:"var(--kb-green)"})}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:e.checkinCount||0}),a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Total Check-ins"})]})]})}),a.jsx("div",{className:"card",style:{padding:"1.25rem"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[a.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(52, 152, 219, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(or,{size:22,color:"#3498db"})}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:g}),a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Today"})]})]})}),a.jsx("div",{className:"card",style:{padding:"1.25rem"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[a.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(155, 89, 182, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(Rf,{size:22,color:"#9b59b6"})}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:y}),a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"This Week"})]})]})}),a.jsx("div",{className:"card",style:{padding:"1.25rem"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[a.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(201, 162, 39, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(Nr,{size:22,color:"var(--kb-gold-dark)"})}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:x}),a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Unique Visitors"})]})]})})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem"},children:[a.jsxs("div",{className:"card",children:[a.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem"},children:"Check-ins by Member Tier"}),Object.keys(E).length===0?a.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"No check-ins yet"}):a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:["curious","hooked","lineAndSinker","patron"].map(S=>{const I=E[S]||0;if(I===0&&!E[S])return null;const N=xk[S],V=wk[S],P={curious:"Curious",hooked:"Hooked",lineAndSinker:"Line & Sinker",patron:"Village Patron"},K=Math.max(...Object.values(E),1),z=I/K*100;return a.jsxs("div",{children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.5rem"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(N,{size:18,color:V}),a.jsx("span",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:P[S]})]}),a.jsx("span",{style:{color:"var(--kb-gray-500)",fontWeight:"600"},children:I})]}),a.jsx("div",{style:{height:"8px",background:"var(--kb-gray-100)",borderRadius:"4px",overflow:"hidden"},children:a.jsx("div",{style:{width:`${z}%`,height:"100%",background:V,borderRadius:"4px"}})})]},S)}).filter(Boolean)})]}),a.jsxs("div",{className:"card",children:[a.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Check-in Information"}),a.jsxs("div",{style:{marginBottom:"1rem"},children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontSize:"0.85rem"},children:"Check-in URL"}),a.jsx("input",{type:"text",value:k,readOnly:!0,style:{width:"100%",fontFamily:"monospace",fontSize:"0.85rem"}})]}),a.jsxs("div",{style:{background:"var(--kb-cream)",borderRadius:"8px",padding:"1rem"},children:[a.jsx("h4",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem",fontSize:"0.95rem"},children:"How Check-ins Work"}),a.jsxs("ul",{style:{color:"var(--kb-gray-600)",fontSize:"0.9rem",paddingLeft:"1.25rem",lineHeight:1.6},children:[a.jsx("li",{children:"Customer scans QR code with phone"}),a.jsx("li",{children:"App shows verification code + bonus %"}),a.jsx("li",{children:"Customer shows screen to cashier"}),a.jsx("li",{children:"1 hour cooldown between check-ins"})]})]})]})]}),a.jsxs("div",{className:"card",style:{marginTop:"1.5rem"},children:[a.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(or,{size:20})," Recent Check-ins"]}),r.length===0?a.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[a.jsx(Nr,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),a.jsx("p",{children:"No check-ins recorded yet"})]}):a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:r.slice(0,25).map((S,I)=>{var K,z;const N=(K=S.timestamp)!=null&&K.toDate?S.timestamp.toDate():new Date(S.timestamp),V=xk[S.memberTier]||on,P=wk[S.memberTier]||"#6b7280";return a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"var(--kb-gray-50)",borderRadius:"8px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[a.jsx("div",{style:{width:"36px",height:"36px",background:"var(--kb-green)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(Sn,{size:18,color:"white"})}),a.jsxs("div",{children:[a.jsxs("div",{style:{fontWeight:"500",color:"var(--kb-navy)",display:"flex",alignItems:"center",gap:"0.5rem"},children:["Check-in",S.memberTier&&a.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",fontSize:"0.75rem",color:P,background:`${P}15`,padding:"0.125rem 0.5rem",borderRadius:"4px"},children:[a.jsx(V,{size:12}),S.memberTier]})]}),a.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)",fontFamily:"monospace"},children:[(z=S.visitorId)==null?void 0:z.substring(0,8),"..."]})]})]}),a.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:N.toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]},S.id||I)})})]})]})}function wB(){const{user:n}=Vr(),[e,t]=j.useState([]),[r,s]=j.useState(!0),[l,c]=j.useState("all"),[h,d]=j.useState(null),m=async()=>{try{const S=await aB();t(S),s(!1)}catch(S){console.error("Error loading redemptions:",S),s(!1)}};j.useEffect(()=>{m()},[]);const g=async(S,I)=>{d(S);try{await oB(S,I,n.uid),await m()}catch(N){console.error("Error processing redemption:",N),alert("Error processing redemption: "+N.message)}d(null)},y=l==="all"?e:e.filter(S=>S.status===l),x={total:e.length,pending:e.filter(S=>S.status==="pending").length,approved:e.filter(S=>S.status==="approved").length,rejected:e.filter(S=>S.status==="rejected").length,totalValue:e.filter(S=>S.status==="approved").reduce((S,I)=>S+(I.amount||0),0)},E=S=>{switch(S){case"approved":return a.jsx(Sn,{size:18,color:"var(--kb-green)"});case"pending":return a.jsx(or,{size:18,color:"#e67e22"});case"rejected":return a.jsx(k2,{size:18,color:"#e74c3c"});default:return a.jsx(Vs,{size:18,color:"var(--kb-gray-400)"})}},k=S=>{switch(S){case"approved":return{background:"#d4edda",color:"var(--kb-green)"};case"pending":return{background:"#fff3cd",color:"#856404"};case"rejected":return{background:"#f8d7da",color:"#721c24"};default:return{background:"#f8f9fa",color:"var(--kb-gray-600)"}}};return r?a.jsx(Qt,{title:"Redemption Requests",children:a.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:a.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading redemptions..."})})}):a.jsxs(Qt,{title:"Redemption Requests",children:[a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[a.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"#e67e22"},children:x.pending}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Pending"})]}),a.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-green)"},children:x.approved}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Approved"})]}),a.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"#e74c3c"},children:x.rejected}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Rejected"})]}),a.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[a.jsxs("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-gold-dark)"},children:["$",x.totalValue.toFixed(0)]}),a.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Redeemed"})]})]}),a.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem",flexWrap:"wrap"},children:[{value:"all",label:`All (${x.total})`},{value:"pending",label:`Pending (${x.pending})`},{value:"approved",label:`Approved (${x.approved})`},{value:"rejected",label:`Rejected (${x.rejected})`}].map(S=>a.jsx("button",{onClick:()=>c(S.value),className:l===S.value?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem"},children:S.label},S.value))}),a.jsx("div",{className:"card",children:y.length===0?a.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[a.jsx(Vi,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),a.jsxs("p",{children:["No ",l!=="all"?l:""," redemption requests"]})]}):a.jsxs("div",{children:[a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 150px",gap:"1rem",padding:"0.75rem 1rem",borderBottom:"2px solid var(--kb-navy)",fontWeight:"600",color:"var(--kb-navy)",fontSize:"0.85rem"},children:[a.jsx("div",{children:"Date"}),a.jsx("div",{children:"Business"}),a.jsx("div",{children:"Amount"}),a.jsx("div",{children:"Status"}),a.jsx("div",{children:"Actions"})]}),y.map(S=>{var I,N,V,P,K,z,W;return a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 150px",gap:"1rem",padding:"1rem",borderBottom:"1px solid var(--kb-gray-100)",alignItems:"center",background:S.status==="pending"?"rgba(230, 126, 34, 0.05)":"transparent"},children:[a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:((V=(N=(I=S.createdAt)==null?void 0:I.toDate)==null?void 0:N.call(I))==null?void 0:V.toLocaleDateString())||"Unknown"}),a.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:((z=(K=(P=S.createdAt)==null?void 0:P.toDate)==null?void 0:K.call(P))==null?void 0:z.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))||""})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(St,{size:18,color:"var(--kb-gray-400)"}),a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:S.businessName||S.businessCode}),a.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:S.businessCode})]})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(Wh,{size:18,color:"var(--kb-gold-dark)"}),a.jsxs("span",{style:{fontSize:"1.25rem",fontWeight:"600",color:"var(--kb-navy)"},children:["$",(W=S.amount)==null?void 0:W.toFixed(2)]})]}),a.jsx("div",{children:a.jsxs("span",{className:"badge",style:{...k(S.status),display:"inline-flex",alignItems:"center",gap:"0.25rem"},children:[E(S.status),S.status]})}),a.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[S.status==="pending"&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>g(S.id,!0),disabled:h===S.id,className:"btn btn-primary",style:{padding:"0.4rem 0.75rem",fontSize:"0.8rem"},children:h===S.id?"...":"Approve"}),a.jsx("button",{onClick:()=>g(S.id,!1),disabled:h===S.id,className:"btn btn-secondary",style:{padding:"0.4rem 0.75rem",fontSize:"0.8rem"},children:"Reject"})]}),S.status==="approved"&&a.jsx("span",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Processed"}),S.status==="rejected"&&a.jsx("span",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Rejected"})]})]},S.id)})]})})]})}function bB(){const{profile:n}=Vr(),e=qs(),[t,r]=j.useState(""),[s,l]=j.useState(!1),[c,h]=j.useState(null),[d,m]=j.useState(""),[g,y]=j.useState(!1),[x,E]=j.useState(null),[k,S]=j.useState("");j.useState(()=>{async function K(){if(n!=null&&n.businessCode){const z=await Vf(n.businessCode);z&&S(z.name)}}K()},[n==null?void 0:n.businessCode]);const I=async K=>{K.preventDefault(),m(""),h(null);const z=t.trim().toUpperCase();if(!z){m("Please enter a serial number");return}l(!0);try{const W=await W9(z);W.valid?h(W.kb):m(W.error)}catch(W){console.error("Validation error:",W),m("Failed to validate serial number")}l(!1)},N=async()=>{if(!(!c||!(n!=null&&n.businessCode))){y(!0);try{await rB(c.serial,n.businessCode,k),E({serial:c.serial,amount:c.denomination}),h(null),r("")}catch(K){console.error("Payment error:",K),m("Failed to record payment")}y(!1)}},V=()=>{r(""),h(null),m(""),E(null)};if(!(n!=null&&n.businessCode))return a.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"var(--kb-cream)",padding:"2rem"},children:a.jsxs("div",{className:"card",style:{maxWidth:"400px",textAlign:"center",padding:"2rem"},children:[a.jsx(Vs,{size:48,color:"var(--kb-gray-400)",style:{marginBottom:"1rem"}}),a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"No Business Assigned"}),a.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem"},children:"You need a business account to accept payments."}),a.jsx(ue,{to:"/",className:"btn btn-primary",children:"Go Home"})]})});const P=K=>{switch(K){case 1:return"#27ae60";case 5:return"#3498db";case 10:return"#9b59b6";case 20:return"#e67e22";case 50:return"#c0392b";default:return"var(--kb-gold)"}};return a.jsxs("div",{style:{minHeight:"100vh",background:"var(--kb-navy)",display:"flex",flexDirection:"column"},children:[a.jsxs("header",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem 1.5rem",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:[a.jsxs(ue,{to:"/business/dashboard",style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--kb-gray-300)",textDecoration:"none"},children:[a.jsx(w2,{size:20}),"Back to Dashboard"]}),a.jsx("div",{style:{color:"var(--kb-gold)",fontWeight:"500"},children:k})]}),a.jsx("main",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem"},children:a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{width:"100%",maxWidth:"500px"},children:[x&&a.jsxs("div",{className:"card",style:{padding:"3rem 2rem",textAlign:"center"},children:[a.jsx(de.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200,damping:15},children:a.jsx("div",{style:{width:"80px",height:"80px",background:"rgba(39, 174, 96, 0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.5rem"},children:a.jsx(Sn,{size:40,color:"var(--kb-green)"})})}),a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"Payment Accepted"}),a.jsxs("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem"},children:["$",x.amount," Kinderbuck has been added to your balance"]}),a.jsx("div",{style:{background:"var(--kb-gray-50)",borderRadius:"8px",padding:"1rem",marginBottom:"2rem",fontFamily:"monospace",fontSize:"1.25rem",color:"var(--kb-navy)"},children:x.serial}),a.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[a.jsxs("button",{onClick:V,className:"btn btn-gold",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(iu,{size:18}),"Accept Another"]}),a.jsx("button",{onClick:()=>e("/business/dashboard"),className:"btn btn-secondary",children:"Done"})]})]}),c&&!x&&a.jsxs("div",{className:"card",style:{padding:"2rem"},children:[a.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"Confirm Payment"}),a.jsx("p",{style:{color:"var(--kb-gray-600)"},children:"Review the Kinderbuck details below"})]}),a.jsx("div",{style:{background:"linear-gradient(135deg, var(--kb-cream) 0%, var(--kb-gray-100) 100%)",borderRadius:"16px",padding:"2rem",marginBottom:"1.5rem",border:`3px solid ${P(c.denomination)}`},children:a.jsxs("div",{style:{textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"0.75rem",color:"var(--kb-gray-500)",textTransform:"uppercase",letterSpacing:"0.1em",marginBottom:"0.5rem"},children:"Serial Number"}),a.jsx("div",{style:{fontFamily:"monospace",fontSize:"1.5rem",fontWeight:"600",color:"var(--kb-navy)",marginBottom:"1.5rem"},children:c.serial}),a.jsxs("div",{style:{fontSize:"4rem",fontWeight:"700",color:P(c.denomination),lineHeight:1},children:["$",c.denomination]}),a.jsx("div",{style:{fontSize:"0.9rem",color:"var(--kb-gray-600)",marginTop:"0.5rem"},children:"Kinderbuck"})]})}),d&&a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",background:"#fef2f2",borderRadius:"8px",color:"#dc2626",marginBottom:"1rem",fontSize:"0.9rem"},children:[a.jsx(Vs,{size:18}),d]}),a.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[a.jsxs("button",{onClick:V,className:"btn btn-secondary",style:{flex:1},disabled:g,children:[a.jsx(N2,{size:18,style:{marginRight:"0.5rem"}}),"Cancel"]}),a.jsx("button",{onClick:N,className:"btn btn-primary",style:{flex:1},disabled:g,children:g?"Processing...":a.jsxs(a.Fragment,{children:[a.jsx(Sn,{size:18,style:{marginRight:"0.5rem"}}),"Accept $",c.denomination]})})]})]}),!c&&!x&&a.jsxs("div",{className:"card",style:{padding:"2rem"},children:[a.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[a.jsx("div",{style:{width:"64px",height:"64px",background:"rgba(201, 162, 39, 0.1)",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:a.jsx(Vi,{size:32,color:"var(--kb-gold-dark)"})}),a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"Accept Kinderbuck Payment"}),a.jsx("p",{style:{color:"var(--kb-gray-600)"},children:"Enter the serial number from the physical bill"})]}),a.jsxs("form",{onSubmit:I,children:[a.jsxs("div",{style:{marginBottom:"1.5rem"},children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Serial Number"}),a.jsx("input",{type:"text",value:t,onChange:K=>r(K.target.value.toUpperCase()),placeholder:"KB-0001",style:{width:"100%",fontFamily:"monospace",fontSize:"1.25rem",textAlign:"center",letterSpacing:"0.1em"},autoFocus:!0})]}),d&&a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",background:"#fef2f2",borderRadius:"8px",color:"#dc2626",marginBottom:"1rem",fontSize:"0.9rem"},children:[a.jsx(Vs,{size:18}),d]}),a.jsx("button",{type:"submit",className:"btn btn-gold",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",padding:"1rem",fontSize:"1.1rem"},disabled:s,children:s?"Validating...":a.jsxs(a.Fragment,{children:[a.jsx(A2,{size:20}),"Validate"]})})]}),a.jsxs("div",{style:{marginTop:"2rem",padding:"1rem",background:"var(--kb-gray-50)",borderRadius:"8px",fontSize:"0.85rem",color:"var(--kb-gray-600)"},children:[a.jsx("strong",{children:"Tip:"})," The serial number is printed on the front of the Kinderbuck bill, typically in the format KB-XXXX."]})]})]})})]})}const kB={AVIARY:{address:"4 Hudson Street, Kinderhook, NY 12106",phone:"(518) 610-8543",website:"https://theaviarykinderhook.com",hours:{monday:"Closed",tuesday:"Closed",wednesday:"5:00 PM - 9:00 PM",thursday:"5:00 PM - 9:00 PM",friday:"5:00 PM - 10:00 PM",saturday:"5:00 PM - 10:00 PM",sunday:"5:00 PM - 9:00 PM"}},MORNINGBIRD:{address:"4 Hudson Street, Kinderhook, NY 12106",phone:"(518) 610-8543",website:"https://theaviarykinderhook.com/morningbird",hours:{monday:"Closed",tuesday:"8:00 AM - 3:00 PM",wednesday:"8:00 AM - 3:00 PM",thursday:"8:00 AM - 3:00 PM",friday:"8:00 AM - 3:00 PM",saturday:"8:00 AM - 3:00 PM",sunday:"8:00 AM - 3:00 PM"}},SAISONNIER:{address:"11 Chatham Street, Kinderhook, NY 12106",phone:"(518) 610-8100",website:"https://www.saisonnier.us",hours:{monday:"Closed",tuesday:"Closed",wednesday:"5:00 PM - 9:00 PM",thursday:"5:00 PM - 9:00 PM",friday:"5:00 PM - 10:00 PM",saturday:"11:30 AM - 2:30 PM, 5:00 PM - 10:00 PM",sunday:"11:30 AM - 2:30 PM, 5:00 PM - 9:00 PM"}},"BROADST-BAGEL":{address:"1 Broad Street, Kinderhook, NY 12106",phone:"(518) 758-8084",website:"https://broadstreetbagelco.com",hours:{monday:"7:00 AM - 2:00 PM",tuesday:"7:00 AM - 2:00 PM",wednesday:"7:00 AM - 2:00 PM",thursday:"7:00 AM - 2:00 PM",friday:"7:00 AM - 2:00 PM",saturday:"7:00 AM - 2:00 PM",sunday:"8:00 AM - 1:00 PM"}},"BOTTLE-SHOP":{address:"8 Hudson Street, Kinderhook, NY 12106",phone:"(518) 610-8111",website:"https://kinderhookbottleshop.com",hours:{monday:"12:00 PM - 7:00 PM",tuesday:"12:00 PM - 7:00 PM",wednesday:"12:00 PM - 7:00 PM",thursday:"12:00 PM - 7:00 PM",friday:"12:00 PM - 8:00 PM",saturday:"11:00 AM - 8:00 PM",sunday:"12:00 PM - 5:00 PM"}},"OLD-DUTCH":{address:"8 Broad Street, Kinderhook, NY 12106",phone:"(518) 203-3347",website:"https://theolddutchinn.com",hours:{monday:"Closed",tuesday:"Closed",wednesday:"5:00 PM - 9:00 PM",thursday:"5:00 PM - 9:00 PM",friday:"5:00 PM - 10:00 PM",saturday:"11:00 AM - 10:00 PM",sunday:"11:00 AM - 8:00 PM"}},SAMASCOTTS:{address:"65 Chatham Street, Kinderhook, NY 12106",phone:"(518) 758-9292",website:"https://www.samascott.com/gardenmarket",hours:{monday:"9:00 AM - 6:00 PM",tuesday:"9:00 AM - 6:00 PM",wednesday:"9:00 AM - 6:00 PM",thursday:"9:00 AM - 6:00 PM",friday:"9:00 AM - 6:00 PM",saturday:"9:00 AM - 6:00 PM",sunday:"9:00 AM - 5:00 PM"}},"SAMASCOTT-ORCHARDS":{address:"5 Sunset Avenue, Kinderhook, NY 12106",phone:"(518) 758-7224",website:"https://www.samascott.com",hours:{monday:"9:00 AM - 6:00 PM",tuesday:"9:00 AM - 6:00 PM",wednesday:"9:00 AM - 6:00 PM",thursday:"9:00 AM - 6:00 PM",friday:"9:00 AM - 6:00 PM",saturday:"9:00 AM - 6:00 PM",sunday:"9:00 AM - 5:00 PM"}},"SCHOOL-GALLERY":{address:"25 Broad Street, Kinderhook, NY 12106",phone:"(518) 758-1620",website:"https://jackshainman.com/the_school",hours:{monday:"Closed",tuesday:"Closed",wednesday:"11:00 AM - 6:00 PM",thursday:"11:00 AM - 6:00 PM",friday:"11:00 AM - 6:00 PM",saturday:"11:00 AM - 6:00 PM",sunday:"Closed"}},ISOLA:{address:"16 Hudson Street, Kinderhook, NY 12106",phone:"(518) 567-7181",website:"https://isolawinebar.com",hours:{monday:"Closed",tuesday:"Closed",wednesday:"4:00 PM - 9:00 PM",thursday:"4:00 PM - 9:00 PM",friday:"4:00 PM - 10:00 PM",saturday:"12:00 PM - 10:00 PM",sunday:"12:00 PM - 8:00 PM"}},"VILLAGE-YOGA":{address:"6 Hudson Street, 2nd Floor, Kinderhook, NY 12106",phone:"(518) 610-8135",website:"https://villageyoga.co",hours:{monday:"9:00 AM - 7:00 PM",tuesday:"9:00 AM - 7:00 PM",wednesday:"9:00 AM - 7:00 PM",thursday:"9:00 AM - 7:00 PM",friday:"9:00 AM - 5:00 PM",saturday:"9:00 AM - 12:00 PM",sunday:"Closed"}},"WALSH-DENTISTRY":{address:"3 Hudson Street, 2nd Floor, Kinderhook, NY 12106",phone:"(518) 758-7071",website:"https://walshdentistry.com",hours:{monday:"8:00 AM - 5:00 PM",tuesday:"8:00 AM - 5:00 PM",wednesday:"8:00 AM - 5:00 PM",thursday:"8:00 AM - 5:00 PM",friday:"8:00 AM - 3:00 PM",saturday:"Closed",sunday:"Closed"}},"FEED-SEED":{address:"22 Hudson Street, Kinderhook, NY 12106",hours:{monday:"9:00 AM - 5:00 PM",tuesday:"9:00 AM - 5:00 PM",wednesday:"9:00 AM - 5:00 PM",thursday:"9:00 AM - 5:00 PM",friday:"9:00 AM - 5:00 PM",saturday:"9:00 AM - 4:00 PM",sunday:"Closed"}}};function Xp(n){if(!n)return null;const e=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],t=new Date,r=e[t.getDay()],s=n[r];if(!s||s==="Closed")return!1;const l=s.match(/(\d+):(\d+)\s*(AM|PM)/gi);if(!l||l.length<2)return null;const c=t.getHours(),h=t.getMinutes(),d=c*60+h,m=s.match(/(\d+):(\d+)\s*(AM|PM)/i);if(m){let g=parseInt(m[1]);const y=parseInt(m[2]),x=m[3].toUpperCase();x==="PM"&&g!==12&&(g+=12),x==="AM"&&g===12&&(g=0);const E=g*60+y,k=s.match(/(\d+):(\d+)\s*(AM|PM)/gi);if(k&&k.length>=2){const S=k[k.length-1].match(/(\d+):(\d+)\s*(AM|PM)/i);if(S){let I=parseInt(S[1]);const N=parseInt(S[2]),V=S[3].toUpperCase();V==="PM"&&I!==12&&(I+=12),V==="AM"&&I===12&&(I=0);const P=I*60+N;return d>=E&&d<P}}}return null}function _B(n){if(!n)return"Hours not available";const r=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][new Date().getDay()];return n[r]||"Hours not available"}const SB=42.3944,EB=-73.7059,bk={0:{icon:Qw,description:"Clear sky",suggestion:"Perfect day to explore the village!"},1:{icon:Qw,description:"Mainly clear",suggestion:"Great weather for a village stroll!"},2:{icon:th,description:"Partly cloudy",suggestion:"Nice day to visit local shops!"},3:{icon:th,description:"Overcast",suggestion:"Good day to cozy up at a cafe!"},45:{icon:th,description:"Foggy",suggestion:"Mysterious village vibes today!"},48:{icon:th,description:"Foggy",suggestion:"Grab a warm drink at a local cafe!"},51:{icon:Ci,description:"Light drizzle",suggestion:"Pop into a shop to stay dry!"},53:{icon:Ci,description:"Drizzle",suggestion:"Perfect excuse for a coffee break!"},55:{icon:Ci,description:"Heavy drizzle",suggestion:"Browse the bookstore while it passes!"},61:{icon:Ci,description:"Light rain",suggestion:"Duck into a local business!"},63:{icon:Ci,description:"Rain",suggestion:"Great day for indoor shopping!"},65:{icon:Ci,description:"Heavy rain",suggestion:"Stay cozy at a village restaurant!"},71:{icon:Oa,description:"Light snow",suggestion:"Beautiful! Warm up with hot cocoa!"},73:{icon:Oa,description:"Snow",suggestion:"Snow day! Explore the charming village!"},75:{icon:Oa,description:"Heavy snow",suggestion:"Cozy up at a local spot!"},77:{icon:Oa,description:"Snow grains",suggestion:"Winter wonderland vibes!"},80:{icon:Ci,description:"Light showers",suggestion:"Quick visits between showers!"},81:{icon:Ci,description:"Showers",suggestion:"Pop into shops along the way!"},82:{icon:Ci,description:"Heavy showers",suggestion:"Find shelter at a cozy cafe!"},85:{icon:Oa,description:"Snow showers",suggestion:"Magical village views!"},86:{icon:Oa,description:"Heavy snow showers",suggestion:"Warm drinks are calling!"},95:{icon:jp,description:"Thunderstorm",suggestion:"Stay safe indoors!"},96:{icon:jp,description:"Thunderstorm with hail",suggestion:"Seek shelter in a shop!"},99:{icon:jp,description:"Severe thunderstorm",suggestion:"Stay safe inside!"}};function TB({compact:n=!1}){const[e,t]=j.useState(null),[r,s]=j.useState(!0),[l,c]=j.useState(null);if(j.useEffect(()=>{async function m(){var y,x,E,k;try{const S=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${SB}&longitude=${EB}&current=temperature_2m,relative_humidity_2m,weather_code,wind_speed_10m&daily=sunrise,sunset&temperature_unit=fahrenheit&wind_speed_unit=mph&timezone=America%2FNew_York`);if(!S.ok)throw new Error("Weather fetch failed");const I=await S.json(),N=(x=(y=I.daily)==null?void 0:y.sunrise)!=null&&x[0]?new Date(I.daily.sunrise[0]):null,V=(k=(E=I.daily)==null?void 0:E.sunset)!=null&&k[0]?new Date(I.daily.sunset[0]):null;t({temp:Math.round(I.current.temperature_2m),humidity:I.current.relative_humidity_2m,windSpeed:Math.round(I.current.wind_speed_10m),code:I.current.weather_code,sunrise:N,sunset:V}),s(!1)}catch(S){console.error("Weather error:",S),c("Could not load weather"),s(!1)}}m();const g=setInterval(m,1800*1e3);return()=>clearInterval(g)},[]),r)return a.jsx("div",{style:{background:"linear-gradient(135deg, #4a90d9 0%, #67b8e3 100%)",borderRadius:"12px",padding:n?"0.75rem 1rem":"1rem 1.25rem",color:"white",opacity:.7},children:"Loading weather..."});if(l||!e)return null;const h=bk[e.code]||bk[0],d=h.icon;return n?a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",background:"linear-gradient(135deg, #4a90d9 0%, #67b8e3 100%)",borderRadius:"10px",padding:"0.5rem 1rem",color:"white"},children:[a.jsx(d,{size:24}),a.jsxs("span",{style:{fontSize:"1.25rem",fontWeight:"700"},children:[e.temp,"F"]}),a.jsx("span",{style:{opacity:.9,fontSize:"0.85rem"},children:h.description})]}):a.jsxs("div",{style:{background:"linear-gradient(135deg, #4a90d9 0%, #67b8e3 100%)",borderRadius:"16px",padding:"1.25rem",color:"white"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.75rem"},children:[a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"0.8rem",opacity:.9,marginBottom:"0.25rem"},children:"Kinderhook, NY"}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsxs("span",{style:{fontSize:"2.5rem",fontWeight:"700",lineHeight:1},children:[e.temp,""]}),a.jsx("span",{style:{fontSize:"1rem"},children:"F"})]})]}),a.jsx(d,{size:56,strokeWidth:1.5})]}),a.jsx("div",{style:{fontSize:"1rem",fontWeight:"600",marginBottom:"0.5rem"},children:h.description}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem",fontSize:"0.8rem",opacity:.9,marginBottom:"1rem"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[a.jsx(QD,{size:14})," ",e.humidity,"%"]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[a.jsx(v3,{size:14})," ",e.windSpeed," mph"]}),e.sunrise&&a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[a.jsx(ZV,{size:14})," ",e.sunrise.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})]}),e.sunset&&a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[a.jsx(t3,{size:14})," ",e.sunset.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})]})]}),a.jsx("div",{style:{background:"rgba(255,255,255,0.2)",borderRadius:"8px",padding:"0.75rem",fontSize:"0.9rem",fontStyle:"italic"},children:h.suggestion})]})}const Jp=new Map;function IB({businessName:n,address:e,size:t="medium",style:r={}}){const[s,l]=j.useState(null),[c,h]=j.useState(!0),[d,m]=j.useState(!1),g={small:{width:80,height:80},medium:{width:150,height:100},large:{width:300,height:200}},{width:y,height:x}=g[t]||g.medium;j.useEffect(()=>{if(!n){h(!1),m(!0);return}const k=`${n}-${e}`;if(Jp.has(k)){l(Jp.get(k)),h(!1);return}const S=setInterval(()=>{var V,P;(P=(V=window.google)==null?void 0:V.maps)!=null&&P.places&&(clearInterval(S),N())},100),I=setTimeout(()=>{clearInterval(S),h(!1),m(!0)},5e3);async function N(){try{const V=document.createElement("div"),P=new window.google.maps.places.PlacesService(V),K=`${n} ${e||"Kinderhook NY"}`;P.findPlaceFromQuery({query:K,fields:["photos","place_id"]},(z,W)=>{var A,C;if(clearTimeout(I),W===window.google.maps.places.PlacesServiceStatus.OK&&((C=(A=z==null?void 0:z[0])==null?void 0:A.photos)==null?void 0:C.length)>0){const O=z[0].photos[0].getUrl({maxWidth:y*2,maxHeight:x*2});Jp.set(k,O),l(O)}else m(!0);h(!1)})}catch(V){console.error("Place photo error:",V),m(!0),h(!1)}}return()=>{clearInterval(S),clearTimeout(I)}},[n,e,y,x]);const E={width:`${y}px`,height:`${x}px`,borderRadius:"8px",overflow:"hidden",background:"var(--kb-gray-100)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,...r};return c?a.jsxs("div",{style:E,children:[a.jsx("div",{style:{width:"24px",height:"24px",border:"2px solid var(--kb-gray-200)",borderTopColor:"var(--kb-navy)",borderRadius:"50%",animation:"spin 1s linear infinite"}}),a.jsx("style",{children:`
          @keyframes spin {
            to { transform: rotate(360deg); }
          }
        `})]}):d||!s?a.jsx("div",{style:{...E,background:"linear-gradient(135deg, var(--kb-gray-100) 0%, var(--kb-gray-200) 100%)"},children:a.jsx(St,{size:24,color:"var(--kb-gray-400)"})}):a.jsx("div",{style:E,children:a.jsx("img",{src:s,alt:n,style:{width:"100%",height:"100%",objectFit:"cover"},onError:()=>m(!0)})})}function CB(){const[n,e]=j.useState([]),[t,r]=j.useState(!0),[s,l]=j.useState("all"),[c,h]=j.useState(!1);j.useEffect(()=>{async function k(){const S=await qi();e(S.filter(I=>I.isActive)),r(!1)}k()},[]);const d=n.map(k=>({...k,...kB[k.code]})),m=d.filter(k=>!(!k.address||s==="open"&&!Xp(k.hours))),g=d.filter(k=>k.address&&Xp(k.hours)),y=()=>{const S=new Date().toLocaleDateString("en-US",{weekday:"long"}),I=g.map(N=>N.name).join(", ");return`What's open in Kinderhook this ${S}? ${g.length} businesses are ready to serve you: ${I}. Show your OK Member card for bonus discounts! #Kinderbucks #ShopLocal`},x=async()=>{const k=y();if(navigator.share)try{await navigator.share({title:"What's Open in Kinderhook",text:k})}catch{}else navigator.clipboard.writeText(k),h(!0),setTimeout(()=>h(!1),2e3)},E=k=>{switch(k){case"food":return"#e67e22";case"retail":return"#3498db";case"services":return"#9b59b6";case"arts":return"#1abc9c";default:return"var(--kb-gray-500)"}};return a.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[a.jsx(Nn,{}),a.jsxs("main",{style:{flex:1,background:"var(--kb-cream)"},children:[a.jsx("section",{style:{background:"linear-gradient(135deg, var(--kb-navy) 0%, var(--kb-navy-light) 100%)",padding:"2rem 1rem",color:"white",textAlign:"center"},children:a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[a.jsx("div",{className:"badge badge-gold",style:{marginBottom:"0.75rem"},children:"Village Directory"}),a.jsx("h1",{style:{marginBottom:"0.5rem"},children:"Explore Kinderhook"}),a.jsx("p",{style:{opacity:.8,maxWidth:"500px",margin:"0 auto"},children:"Find participating businesses, check hours, and earn rewards"})]})}),a.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto",padding:"2rem 1rem"},children:[a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:a.jsx(TB,{})}),a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card",style:{background:"linear-gradient(135deg, var(--kb-green) 0%, #1e8449 100%)",color:"white"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"1rem"},children:[a.jsxs("div",{children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[a.jsx(or,{size:20}),a.jsx("span",{style:{fontWeight:"600"},children:"Open Right Now"})]}),a.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700"},children:[g.length," Businesses"]}),a.jsx("div",{style:{opacity:.9,fontSize:"0.9rem"},children:"Show your OK card for bonus discounts!"})]}),a.jsxs("button",{onClick:x,className:"btn",style:{background:"rgba(255,255,255,0.2)",color:"white",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c?a.jsx(Sn,{size:18}):a.jsx(BV,{size:18}),c?"Copied!":"Share"]})]})})]}),a.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem"},children:[a.jsxs("button",{onClick:()=>l("all"),className:"btn",style:{padding:"0.6rem 1.25rem",fontSize:"0.9rem",background:s==="all"?"var(--kb-navy)":"white",color:s==="all"?"white":"var(--kb-gray-600)",border:"1px solid var(--kb-gray-200)"},children:["All (",d.filter(k=>k.address).length,")"]}),a.jsxs("button",{onClick:()=>l("open"),className:"btn",style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.6rem 1.25rem",fontSize:"0.9rem",background:s==="open"?"var(--kb-green)":"white",color:s==="open"?"white":"var(--kb-gray-600)",border:"1px solid var(--kb-gray-200)"},children:[a.jsx(or,{size:16}),"Open Now (",g.length,")"]})]}),a.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:s==="open"?"Open Now":"All Businesses"}),t?a.jsx("div",{className:"card",style:{padding:"4rem",textAlign:"center",color:"var(--kb-gray-500)"},children:"Loading businesses..."}):a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"1rem"},children:m.map((k,S)=>{const I=Xp(k.hours),N=_B(k.hours);return a.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:S*.05},className:"card",style:{padding:"1.25rem",overflow:"hidden"},children:[a.jsx("div",{style:{margin:"-1.25rem -1.25rem 1rem -1.25rem"},children:a.jsx(IB,{businessName:k.name,address:k.address,size:"large",style:{width:"100%",height:"120px",borderRadius:0}})}),a.jsxs("div",{style:{marginBottom:"0.75rem"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.25rem"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx("span",{style:{display:"inline-block",width:"8px",height:"8px",borderRadius:"50%",background:I?"#27ae60":"#95a5a6"}}),a.jsx("span",{style:{fontSize:"0.7rem",fontWeight:"600",color:I?"#27ae60":"var(--kb-gray-500)"},children:I?"OPEN NOW":"CLOSED"})]}),a.jsx("span",{style:{fontSize:"0.7rem",padding:"0.15rem 0.5rem",borderRadius:"4px",background:`${E(k.category)}15`,color:E(k.category),fontWeight:"500",textTransform:"capitalize"},children:k.category})]}),a.jsx("h3",{style:{color:"var(--kb-navy)",fontSize:"1.1rem",marginBottom:"0.25rem"},children:k.name})]}),k.address&&a.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.5rem",fontSize:"0.85rem",color:"var(--kb-gray-600)",marginBottom:"0.5rem"},children:[a.jsx(ru,{size:14,style:{flexShrink:0,marginTop:"2px"}}),a.jsx("span",{children:k.address})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem",color:"var(--kb-gray-600)",marginBottom:"0.5rem"},children:[a.jsx(or,{size:14}),"Today: ",N]}),k.phone&&a.jsxs("a",{href:`tel:${k.phone}`,style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem",color:"var(--kb-gray-600)",textDecoration:"none",marginBottom:"0.75rem"},children:[a.jsx(CV,{size:14}),k.phone]}),k.website&&a.jsxs("a",{href:k.website,target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem",color:"var(--kb-gold-dark)",textDecoration:"none",marginBottom:"0.75rem"},children:[a.jsx(ZD,{size:14}),"Visit Website"]}),k.address&&a.jsxs("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(k.address)}`,target:"_blank",rel:"noopener noreferrer",className:"btn btn-gold",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",width:"100%",fontSize:"0.85rem",padding:"0.5rem"},children:[a.jsx(kV,{size:14})," Get Directions"]})]},k.code)})}),m.length===0&&!t&&a.jsxs("div",{className:"card",style:{padding:"3rem",textAlign:"center",color:"var(--kb-gray-500)"},children:[a.jsx(St,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),a.jsx("p",{children:s==="open"?"No businesses are open right now":"No businesses found"}),s==="open"&&a.jsx("button",{onClick:()=>l("all"),className:"btn btn-secondary",style:{marginTop:"1rem"},children:"View All Businesses"})]})]})]}),a.jsx(Mn,{})]})}function jB(){return a.jsx(iD,{children:a.jsx(yj,{children:a.jsxs(qC,{children:[a.jsx(ct,{path:"/",element:a.jsx(r9,{})}),a.jsx(ct,{path:"/demo",element:a.jsx(c9,{})}),a.jsx(ct,{path:"/about",element:a.jsx(_9,{})}),a.jsx(ct,{path:"/benefits",element:a.jsx(E9,{})}),a.jsx(ct,{path:"/businesses",element:a.jsx(j9,{})}),a.jsx(ct,{path:"/map",element:a.jsx(CB,{})}),a.jsx(ct,{path:"/exchange",element:a.jsx(P9,{})}),a.jsx(ct,{path:"/login",element:a.jsx(D9,{})}),a.jsx(ct,{path:"/account",element:a.jsx(N9,{})}),a.jsx(ct,{path:"/profile",element:a.jsx(M9,{})}),a.jsx(ct,{path:"/card",element:a.jsx(O9,{})}),a.jsx(ct,{path:"/scan/:serial",element:a.jsx(H9,{})}),a.jsx(ct,{path:"/checkin/:businessCode",element:a.jsx(Z9,{})}),a.jsx(ct,{path:"/business/dashboard",element:a.jsx(Er,{allowedRoles:["business","admin"],children:a.jsx(cB,{})})}),a.jsx(ct,{path:"/business/accept-payment",element:a.jsx(Er,{allowedRoles:["business","admin"],children:a.jsx(bB,{})})}),a.jsx(ct,{path:"/admin/dashboard",element:a.jsx(Er,{allowedRoles:["admin"],children:a.jsx(uB,{})})}),a.jsx(ct,{path:"/admin/exchanges",element:a.jsx(Er,{allowedRoles:["admin"],children:a.jsx(gB,{})})}),a.jsx(ct,{path:"/admin/members",element:a.jsx(Er,{allowedRoles:["admin"],children:a.jsx(yB,{})})}),a.jsx(ct,{path:"/admin/generate",element:a.jsx(Er,{allowedRoles:["admin"],children:a.jsx(dB,{})})}),a.jsx(ct,{path:"/admin/issue",element:a.jsx(Er,{allowedRoles:["admin"],children:a.jsx(hB,{})})}),a.jsx(ct,{path:"/admin/businesses",element:a.jsx(Er,{allowedRoles:["admin"],children:a.jsx(mB,{})})}),a.jsx(ct,{path:"/admin/businesses/:businessCode",element:a.jsx(Er,{allowedRoles:["admin"],children:a.jsx(xB,{})})}),a.jsx(ct,{path:"/admin/users",element:a.jsx(Er,{allowedRoles:["admin"],children:a.jsx(vB,{})})}),a.jsx(ct,{path:"/admin/redemptions",element:a.jsx(Er,{allowedRoles:["admin"],children:a.jsx(wB,{})})})]})})})}QI.createRoot(document.getElementById("root")).render(a.jsx(j.StrictMode,{children:a.jsx(jB,{})}));
