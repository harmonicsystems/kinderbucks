(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();function OT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Pp={exports:{}},Hc={},Dp={exports:{}},Ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A1;function BT(){if(A1)return Ke;A1=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function x($){return $===null||typeof $!="object"?null:($=y&&$[y]||$["@@iterator"],typeof $=="function"?$:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,_={};function T($,te,Ie){this.props=$,this.context=te,this.refs=_,this.updater=Ie||S}T.prototype.isReactComponent={},T.prototype.setState=function($,te){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,te,"setState")},T.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function P(){}P.prototype=T.prototype;function V($,te,Ie){this.props=$,this.context=te,this.refs=_,this.updater=Ie||S}var M=V.prototype=new P;M.constructor=V,w(M,T.prototype),M.isPureReactComponent=!0;var F=Array.isArray,K=Object.prototype.hasOwnProperty,q={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function E($,te,Ie){var Te,Le={},ze=null,se=null;if(te!=null)for(Te in te.ref!==void 0&&(se=te.ref),te.key!==void 0&&(ze=""+te.key),te)K.call(te,Te)&&!A.hasOwnProperty(Te)&&(Le[Te]=te[Te]);var G=arguments.length-2;if(G===1)Le.children=Ie;else if(1<G){for(var pe=Array(G),qe=0;qe<G;qe++)pe[qe]=arguments[qe+2];Le.children=pe}if($&&$.defaultProps)for(Te in G=$.defaultProps,G)Le[Te]===void 0&&(Le[Te]=G[Te]);return{$$typeof:t,type:$,key:ze,ref:se,props:Le,_owner:q.current}}function I($,te){return{$$typeof:t,type:$.type,key:te,ref:$.ref,props:$.props,_owner:$._owner}}function D($){return typeof $=="object"&&$!==null&&$.$$typeof===t}function L($){var te={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(Ie){return te[Ie]})}var z=/\/+/g;function O($,te){return typeof $=="object"&&$!==null&&$.key!=null?L(""+$.key):te.toString(36)}function Re($,te,Ie,Te,Le){var ze=typeof $;(ze==="undefined"||ze==="boolean")&&($=null);var se=!1;if($===null)se=!0;else switch(ze){case"string":case"number":se=!0;break;case"object":switch($.$$typeof){case t:case e:se=!0}}if(se)return se=$,Le=Le(se),$=Te===""?"."+O(se,0):Te,F(Le)?(Ie="",$!=null&&(Ie=$.replace(z,"$&/")+"/"),Re(Le,te,Ie,"",function(qe){return qe})):Le!=null&&(D(Le)&&(Le=I(Le,Ie+(!Le.key||se&&se.key===Le.key?"":(""+Le.key).replace(z,"$&/")+"/")+$)),te.push(Le)),1;if(se=0,Te=Te===""?".":Te+":",F($))for(var G=0;G<$.length;G++){ze=$[G];var pe=Te+O(ze,G);se+=Re(ze,te,Ie,pe,Le)}else if(pe=x($),typeof pe=="function")for($=pe.call($),G=0;!(ze=$.next()).done;)ze=ze.value,pe=Te+O(ze,G++),se+=Re(ze,te,Ie,pe,Le);else if(ze==="object")throw te=String($),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.");return se}function $e($,te,Ie){if($==null)return $;var Te=[],Le=0;return Re($,Te,"","",function(ze){return te.call(Ie,ze,Le++)}),Te}function tt($){if($._status===-1){var te=$._result;te=te(),te.then(function(Ie){($._status===0||$._status===-1)&&($._status=1,$._result=Ie)},function(Ie){($._status===0||$._status===-1)&&($._status=2,$._result=Ie)}),$._status===-1&&($._status=0,$._result=te)}if($._status===1)return $._result.default;throw $._result}var Ce={current:null},ie={transition:null},me={ReactCurrentDispatcher:Ce,ReactCurrentBatchConfig:ie,ReactCurrentOwner:q};function ue(){throw Error("act(...) is not supported in production builds of React.")}return Ke.Children={map:$e,forEach:function($,te,Ie){$e($,function(){te.apply(this,arguments)},Ie)},count:function($){var te=0;return $e($,function(){te++}),te},toArray:function($){return $e($,function(te){return te})||[]},only:function($){if(!D($))throw Error("React.Children.only expected to receive a single React element child.");return $}},Ke.Component=T,Ke.Fragment=n,Ke.Profiler=o,Ke.PureComponent=V,Ke.StrictMode=r,Ke.Suspense=d,Ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=me,Ke.act=ue,Ke.cloneElement=function($,te,Ie){if($==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+$+".");var Te=w({},$.props),Le=$.key,ze=$.ref,se=$._owner;if(te!=null){if(te.ref!==void 0&&(ze=te.ref,se=q.current),te.key!==void 0&&(Le=""+te.key),$.type&&$.type.defaultProps)var G=$.type.defaultProps;for(pe in te)K.call(te,pe)&&!A.hasOwnProperty(pe)&&(Te[pe]=te[pe]===void 0&&G!==void 0?G[pe]:te[pe])}var pe=arguments.length-2;if(pe===1)Te.children=Ie;else if(1<pe){G=Array(pe);for(var qe=0;qe<pe;qe++)G[qe]=arguments[qe+2];Te.children=G}return{$$typeof:t,type:$.type,key:Le,ref:ze,props:Te,_owner:se}},Ke.createContext=function($){return $={$$typeof:c,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},$.Provider={$$typeof:l,_context:$},$.Consumer=$},Ke.createElement=E,Ke.createFactory=function($){var te=E.bind(null,$);return te.type=$,te},Ke.createRef=function(){return{current:null}},Ke.forwardRef=function($){return{$$typeof:h,render:$}},Ke.isValidElement=D,Ke.lazy=function($){return{$$typeof:g,_payload:{_status:-1,_result:$},_init:tt}},Ke.memo=function($,te){return{$$typeof:m,type:$,compare:te===void 0?null:te}},Ke.startTransition=function($){var te=ie.transition;ie.transition={};try{$()}finally{ie.transition=te}},Ke.unstable_act=ue,Ke.useCallback=function($,te){return Ce.current.useCallback($,te)},Ke.useContext=function($){return Ce.current.useContext($)},Ke.useDebugValue=function(){},Ke.useDeferredValue=function($){return Ce.current.useDeferredValue($)},Ke.useEffect=function($,te){return Ce.current.useEffect($,te)},Ke.useId=function(){return Ce.current.useId()},Ke.useImperativeHandle=function($,te,Ie){return Ce.current.useImperativeHandle($,te,Ie)},Ke.useInsertionEffect=function($,te){return Ce.current.useInsertionEffect($,te)},Ke.useLayoutEffect=function($,te){return Ce.current.useLayoutEffect($,te)},Ke.useMemo=function($,te){return Ce.current.useMemo($,te)},Ke.useReducer=function($,te,Ie){return Ce.current.useReducer($,te,Ie)},Ke.useRef=function($){return Ce.current.useRef($)},Ke.useState=function($){return Ce.current.useState($)},Ke.useSyncExternalStore=function($,te,Ie){return Ce.current.useSyncExternalStore($,te,Ie)},Ke.useTransition=function(){return Ce.current.useTransition()},Ke.version="18.3.1",Ke}var R1;function Ry(){return R1||(R1=1,Dp.exports=BT()),Dp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P1;function zT(){if(P1)return Hc;P1=1;var t=Ry(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,o=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(h,d,m){var g,y={},x=null,S=null;m!==void 0&&(x=""+m),d.key!==void 0&&(x=""+d.key),d.ref!==void 0&&(S=d.ref);for(g in d)r.call(d,g)&&!l.hasOwnProperty(g)&&(y[g]=d[g]);if(h&&h.defaultProps)for(g in d=h.defaultProps,d)y[g]===void 0&&(y[g]=d[g]);return{$$typeof:e,type:h,key:x,ref:S,props:y,_owner:o.current}}return Hc.Fragment=n,Hc.jsx=c,Hc.jsxs=c,Hc}var D1;function FT(){return D1||(D1=1,Pp.exports=zT()),Pp.exports}var i=FT(),C=Ry();const Xt=OT(C);var hh={},Np={exports:{}},qn={},Mp={exports:{}},Vp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N1;function UT(){return N1||(N1=1,(function(t){function e(ie,me){var ue=ie.length;ie.push(me);e:for(;0<ue;){var $=ue-1>>>1,te=ie[$];if(0<o(te,me))ie[$]=me,ie[ue]=te,ue=$;else break e}}function n(ie){return ie.length===0?null:ie[0]}function r(ie){if(ie.length===0)return null;var me=ie[0],ue=ie.pop();if(ue!==me){ie[0]=ue;e:for(var $=0,te=ie.length,Ie=te>>>1;$<Ie;){var Te=2*($+1)-1,Le=ie[Te],ze=Te+1,se=ie[ze];if(0>o(Le,ue))ze<te&&0>o(se,Le)?(ie[$]=se,ie[ze]=ue,$=ze):(ie[$]=Le,ie[Te]=ue,$=Te);else if(ze<te&&0>o(se,ue))ie[$]=se,ie[ze]=ue,$=ze;else break e}}return me}function o(ie,me){var ue=ie.sortIndex-me.sortIndex;return ue!==0?ue:ie.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,h=c.now();t.unstable_now=function(){return c.now()-h}}var d=[],m=[],g=1,y=null,x=3,S=!1,w=!1,_=!1,T=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(ie){for(var me=n(m);me!==null;){if(me.callback===null)r(m);else if(me.startTime<=ie)r(m),me.sortIndex=me.expirationTime,e(d,me);else break;me=n(m)}}function F(ie){if(_=!1,M(ie),!w)if(n(d)!==null)w=!0,tt(K);else{var me=n(m);me!==null&&Ce(F,me.startTime-ie)}}function K(ie,me){w=!1,_&&(_=!1,P(E),E=-1),S=!0;var ue=x;try{for(M(me),y=n(d);y!==null&&(!(y.expirationTime>me)||ie&&!L());){var $=y.callback;if(typeof $=="function"){y.callback=null,x=y.priorityLevel;var te=$(y.expirationTime<=me);me=t.unstable_now(),typeof te=="function"?y.callback=te:y===n(d)&&r(d),M(me)}else r(d);y=n(d)}if(y!==null)var Ie=!0;else{var Te=n(m);Te!==null&&Ce(F,Te.startTime-me),Ie=!1}return Ie}finally{y=null,x=ue,S=!1}}var q=!1,A=null,E=-1,I=5,D=-1;function L(){return!(t.unstable_now()-D<I)}function z(){if(A!==null){var ie=t.unstable_now();D=ie;var me=!0;try{me=A(!0,ie)}finally{me?O():(q=!1,A=null)}}else q=!1}var O;if(typeof V=="function")O=function(){V(z)};else if(typeof MessageChannel<"u"){var Re=new MessageChannel,$e=Re.port2;Re.port1.onmessage=z,O=function(){$e.postMessage(null)}}else O=function(){T(z,0)};function tt(ie){A=ie,q||(q=!0,O())}function Ce(ie,me){E=T(function(){ie(t.unstable_now())},me)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ie){ie.callback=null},t.unstable_continueExecution=function(){w||S||(w=!0,tt(K))},t.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<ie?Math.floor(1e3/ie):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(ie){switch(x){case 1:case 2:case 3:var me=3;break;default:me=x}var ue=x;x=me;try{return ie()}finally{x=ue}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ie,me){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var ue=x;x=ie;try{return me()}finally{x=ue}},t.unstable_scheduleCallback=function(ie,me,ue){var $=t.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?$+ue:$):ue=$,ie){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=ue+te,ie={id:g++,callback:me,priorityLevel:ie,startTime:ue,expirationTime:te,sortIndex:-1},ue>$?(ie.sortIndex=ue,e(m,ie),n(d)===null&&ie===n(m)&&(_?(P(E),E=-1):_=!0,Ce(F,ue-$))):(ie.sortIndex=te,e(d,ie),w||S||(w=!0,tt(K))),ie},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(ie){var me=x;return function(){var ue=x;x=me;try{return ie.apply(this,arguments)}finally{x=ue}}}})(Vp)),Vp}var M1;function WT(){return M1||(M1=1,Mp.exports=UT()),Mp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V1;function $T(){if(V1)return qn;V1=1;var t=Ry(),e=WT();function n(s){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+s,u=1;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,o={};function l(s,a){c(s,a),c(s+"Capture",a)}function c(s,a){for(o[s]=a,s=0;s<a.length;s++)r.add(a[s])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},y={};function x(s){return d.call(y,s)?!0:d.call(g,s)?!1:m.test(s)?y[s]=!0:(g[s]=!0,!1)}function S(s,a,u,p){if(u!==null&&u.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return p?!1:u!==null?!u.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function w(s,a,u,p){if(a===null||typeof a>"u"||S(s,a,u,p))return!0;if(p)return!1;if(u!==null)switch(u.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function _(s,a,u,p,v,b,R){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=p,this.attributeNamespace=v,this.mustUseProperty=u,this.propertyName=s,this.type=a,this.sanitizeURL=b,this.removeEmptyString=R}var T={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){T[s]=new _(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var a=s[0];T[a]=new _(a,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){T[s]=new _(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){T[s]=new _(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){T[s]=new _(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){T[s]=new _(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){T[s]=new _(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){T[s]=new _(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){T[s]=new _(s,5,!1,s.toLowerCase(),null,!1,!1)});var P=/[\-:]([a-z])/g;function V(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var a=s.replace(P,V);T[a]=new _(a,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var a=s.replace(P,V);T[a]=new _(a,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var a=s.replace(P,V);T[a]=new _(a,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){T[s]=new _(s,1,!1,s.toLowerCase(),null,!1,!1)}),T.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){T[s]=new _(s,1,!1,s.toLowerCase(),null,!0,!0)});function M(s,a,u,p){var v=T.hasOwnProperty(a)?T[a]:null;(v!==null?v.type!==0:p||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(w(a,u,v,p)&&(u=null),p||v===null?x(a)&&(u===null?s.removeAttribute(a):s.setAttribute(a,""+u)):v.mustUseProperty?s[v.propertyName]=u===null?v.type===3?!1:"":u:(a=v.attributeName,p=v.attributeNamespace,u===null?s.removeAttribute(a):(v=v.type,u=v===3||v===4&&u===!0?"":""+u,p?s.setAttributeNS(p,a,u):s.setAttribute(a,u))))}var F=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,K=Symbol.for("react.element"),q=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),L=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),Re=Symbol.for("react.suspense_list"),$e=Symbol.for("react.memo"),tt=Symbol.for("react.lazy"),Ce=Symbol.for("react.offscreen"),ie=Symbol.iterator;function me(s){return s===null||typeof s!="object"?null:(s=ie&&s[ie]||s["@@iterator"],typeof s=="function"?s:null)}var ue=Object.assign,$;function te(s){if($===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);$=a&&a[1]||""}return`
`+$+s}var Ie=!1;function Te(s,a){if(!s||Ie)return"";Ie=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(J){var p=J}Reflect.construct(s,[],a)}else{try{a.call()}catch(J){p=J}s.call(a.prototype)}else{try{throw Error()}catch(J){p=J}s()}}catch(J){if(J&&p&&typeof J.stack=="string"){for(var v=J.stack.split(`
`),b=p.stack.split(`
`),R=v.length-1,B=b.length-1;1<=R&&0<=B&&v[R]!==b[B];)B--;for(;1<=R&&0<=B;R--,B--)if(v[R]!==b[B]){if(R!==1||B!==1)do if(R--,B--,0>B||v[R]!==b[B]){var W=`
`+v[R].replace(" at new "," at ");return s.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",s.displayName)),W}while(1<=R&&0<=B);break}}}finally{Ie=!1,Error.prepareStackTrace=u}return(s=s?s.displayName||s.name:"")?te(s):""}function Le(s){switch(s.tag){case 5:return te(s.type);case 16:return te("Lazy");case 13:return te("Suspense");case 19:return te("SuspenseList");case 0:case 2:case 15:return s=Te(s.type,!1),s;case 11:return s=Te(s.type.render,!1),s;case 1:return s=Te(s.type,!0),s;default:return""}}function ze(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case A:return"Fragment";case q:return"Portal";case I:return"Profiler";case E:return"StrictMode";case O:return"Suspense";case Re:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case L:return(s.displayName||"Context")+".Consumer";case D:return(s._context.displayName||"Context")+".Provider";case z:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case $e:return a=s.displayName||null,a!==null?a:ze(s.type)||"Memo";case tt:a=s._payload,s=s._init;try{return ze(s(a))}catch{}}return null}function se(s){var a=s.type;switch(s.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=a.render,s=s.displayName||s.name||"",a.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ze(a);case 8:return a===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function G(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function pe(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function qe(s){var a=pe(s)?"checked":"value",u=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),p=""+s[a];if(!s.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var v=u.get,b=u.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return v.call(this)},set:function(R){p=""+R,b.call(this,R)}}),Object.defineProperty(s,a,{enumerable:u.enumerable}),{getValue:function(){return p},setValue:function(R){p=""+R},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function gt(s){s._valueTracker||(s._valueTracker=qe(s))}function qt(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var u=a.getValue(),p="";return s&&(p=pe(s)?s.checked?"true":"false":s.value),s=p,s!==u?(a.setValue(s),!0):!1}function yt(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function dn(s,a){var u=a.checked;return ue({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??s._wrapperState.initialChecked})}function bn(s,a){var u=a.defaultValue==null?"":a.defaultValue,p=a.checked!=null?a.checked:a.defaultChecked;u=G(a.value!=null?a.value:u),s._wrapperState={initialChecked:p,initialValue:u,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function Pn(s,a){a=a.checked,a!=null&&M(s,"checked",a,!1)}function Bn(s,a){Pn(s,a);var u=G(a.value),p=a.type;if(u!=null)p==="number"?(u===0&&s.value===""||s.value!=u)&&(s.value=""+u):s.value!==""+u&&(s.value=""+u);else if(p==="submit"||p==="reset"){s.removeAttribute("value");return}a.hasOwnProperty("value")?lt(s,a.type,u):a.hasOwnProperty("defaultValue")&&lt(s,a.type,G(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(s.defaultChecked=!!a.defaultChecked)}function zn(s,a,u){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var p=a.type;if(!(p!=="submit"&&p!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+s._wrapperState.initialValue,u||a===s.value||(s.value=a),s.defaultValue=a}u=s.name,u!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,u!==""&&(s.name=u)}function lt(s,a,u){(a!=="number"||yt(s.ownerDocument)!==s)&&(u==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+u&&(s.defaultValue=""+u))}var dt=Array.isArray;function Fn(s,a,u,p){if(s=s.options,a){a={};for(var v=0;v<u.length;v++)a["$"+u[v]]=!0;for(u=0;u<s.length;u++)v=a.hasOwnProperty("$"+s[u].value),s[u].selected!==v&&(s[u].selected=v),v&&p&&(s[u].defaultSelected=!0)}else{for(u=""+G(u),a=null,v=0;v<s.length;v++){if(s[v].value===u){s[v].selected=!0,p&&(s[v].defaultSelected=!0);return}a!==null||s[v].disabled||(a=s[v])}a!==null&&(a.selected=!0)}}function Es(s,a){if(a.dangerouslySetInnerHTML!=null)throw Error(n(91));return ue({},a,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function To(s,a){var u=a.value;if(u==null){if(u=a.children,a=a.defaultValue,u!=null){if(a!=null)throw Error(n(92));if(dt(u)){if(1<u.length)throw Error(n(93));u=u[0]}a=u}a==null&&(a=""),u=a}s._wrapperState={initialValue:G(u)}}function Ts(s,a){var u=G(a.value),p=G(a.defaultValue);u!=null&&(u=""+u,u!==s.value&&(s.value=u),a.defaultValue==null&&s.defaultValue!==u&&(s.defaultValue=u)),p!=null&&(s.defaultValue=""+p)}function vr(s){var a=s.textContent;a===s._wrapperState.initialValue&&a!==""&&a!==null&&(s.value=a)}function zr(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Cs(s,a){return s==null||s==="http://www.w3.org/1999/xhtml"?zr(a):s==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var xr,_a=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,u,p,v){MSApp.execUnsafeLocalFunction(function(){return s(a,u,p,v)})}:s})(function(s,a){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=a;else{for(xr=xr||document.createElement("div"),xr.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=xr.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;a.firstChild;)s.appendChild(a.firstChild)}});function ui(s,a){if(a){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=a;return}}s.textContent=a}var Fr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ja=["Webkit","ms","Moz","O"];Object.keys(Fr).forEach(function(s){ja.forEach(function(a){a=a+s.charAt(0).toUpperCase()+s.substring(1),Fr[a]=Fr[s]})});function di(s,a,u){return a==null||typeof a=="boolean"||a===""?"":u||typeof a!="number"||a===0||Fr.hasOwnProperty(s)&&Fr[s]?(""+a).trim():a+"px"}function Is(s,a){s=s.style;for(var u in a)if(a.hasOwnProperty(u)){var p=u.indexOf("--")===0,v=di(u,a[u],p);u==="float"&&(u="cssFloat"),p?s.setProperty(u,v):s[u]=v}}var Co=ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Jn(s,a){if(a){if(Co[s]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(n(137,s));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(n(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(n(61))}if(a.style!=null&&typeof a.style!="object")throw Error(n(62))}}function As(s,a){if(s.indexOf("-")===-1)return typeof a.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hi=null;function Rs(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Ur=null,Wr=null,wt=null;function Io(s){if(s=Ac(s)){if(typeof Ur!="function")throw Error(n(280));var a=s.stateNode;a&&(a=Td(a),Ur(s.stateNode,s.type,a))}}function fi(s){Wr?wt?wt.push(s):wt=[s]:Wr=s}function mi(){if(Wr){var s=Wr,a=wt;if(wt=Wr=null,Io(s),a)for(s=0;s<a.length;s++)Io(a[s])}}function U(s,a){return s(a)}function ne(){}var Se=!1;function He(s,a,u){if(Se)return s(a,u);Se=!0;try{return U(s,a,u)}finally{Se=!1,(Wr!==null||wt!==null)&&(ne(),mi())}}function St(s,a){var u=s.stateNode;if(u===null)return null;var p=Td(u);if(p===null)return null;u=p[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(s=s.type,p=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!p;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(n(231,a,typeof u));return u}var kn=!1;if(h)try{var pi={};Object.defineProperty(pi,"passive",{get:function(){kn=!0}}),window.addEventListener("test",pi,pi),window.removeEventListener("test",pi,pi)}catch{kn=!1}function id(s,a,u,p,v,b,R,B,W){var J=Array.prototype.slice.call(arguments,3);try{a.apply(u,J)}catch(le){this.onError(le)}}var Ui=!1,gi=null,Ea=!1,br=null,sd={onError:function(s){Ui=!0,gi=s}};function od(s,a,u,p,v,b,R,B,W){Ui=!1,gi=null,id.apply(sd,arguments)}function ic(s,a,u,p,v,b,R,B,W){if(od.apply(this,arguments),Ui){if(Ui){var J=gi;Ui=!1,gi=null}else throw Error(n(198));Ea||(Ea=!0,br=J)}}function $r(s){var a=s,u=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(u=a.return),s=a.return;while(s)}return a.tag===3?u:null}function sc(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function ad(s){if($r(s)!==s)throw Error(n(188))}function ld(s){var a=s.alternate;if(!a){if(a=$r(s),a===null)throw Error(n(188));return a!==s?null:s}for(var u=s,p=a;;){var v=u.return;if(v===null)break;var b=v.alternate;if(b===null){if(p=v.return,p!==null){u=p;continue}break}if(v.child===b.child){for(b=v.child;b;){if(b===u)return ad(v),s;if(b===p)return ad(v),a;b=b.sibling}throw Error(n(188))}if(u.return!==p.return)u=v,p=b;else{for(var R=!1,B=v.child;B;){if(B===u){R=!0,u=v,p=b;break}if(B===p){R=!0,p=v,u=b;break}B=B.sibling}if(!R){for(B=b.child;B;){if(B===u){R=!0,u=b,p=v;break}if(B===p){R=!0,p=b,u=v;break}B=B.sibling}if(!R)throw Error(n(189))}}if(u.alternate!==p)throw Error(n(190))}if(u.tag!==3)throw Error(n(188));return u.stateNode.current===u?s:a}function cd(s){return s=ld(s),s!==null?Ao(s):null}function Ao(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var a=Ao(s);if(a!==null)return a;s=s.sibling}return null}var oc=e.unstable_scheduleCallback,Ta=e.unstable_cancelCallback,Ro=e.unstable_shouldYield,Wi=e.unstable_requestPaint,vt=e.unstable_now,cm=e.unstable_getCurrentPriorityLevel,Ca=e.unstable_ImmediatePriority,ac=e.unstable_UserBlockingPriority,Po=e.unstable_NormalPriority,lc=e.unstable_LowPriority,Ia=e.unstable_IdlePriority,Do=null,Zn=null;function ud(s){if(Zn&&typeof Zn.onCommitFiberRoot=="function")try{Zn.onCommitFiberRoot(Do,s,void 0,(s.current.flags&128)===128)}catch{}}var er=Math.clz32?Math.clz32:No,yi=Math.log,kr=Math.LN2;function No(s){return s>>>=0,s===0?32:31-(yi(s)/kr|0)|0}var vi=64,Ps=4194304;function st(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function $i(s,a){var u=s.pendingLanes;if(u===0)return 0;var p=0,v=s.suspendedLanes,b=s.pingedLanes,R=u&268435455;if(R!==0){var B=R&~v;B!==0?p=st(B):(b&=R,b!==0&&(p=st(b)))}else R=u&~v,R!==0?p=st(R):b!==0&&(p=st(b));if(p===0)return 0;if(a!==0&&a!==p&&(a&v)===0&&(v=p&-p,b=a&-a,v>=b||v===16&&(b&4194240)!==0))return a;if((p&4)!==0&&(p|=u&16),a=s.entangledLanes,a!==0)for(s=s.entanglements,a&=p;0<a;)u=31-er(a),v=1<<u,p|=s[u],a&=~v;return p}function Mo(s,a){switch(s){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vo(s,a){for(var u=s.suspendedLanes,p=s.pingedLanes,v=s.expirationTimes,b=s.pendingLanes;0<b;){var R=31-er(b),B=1<<R,W=v[R];W===-1?((B&u)===0||(B&p)!==0)&&(v[R]=Mo(B,a)):W<=a&&(s.expiredLanes|=B),b&=~B}}function cc(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function uc(){var s=vi;return vi<<=1,(vi&4194240)===0&&(vi=64),s}function dc(s){for(var a=[],u=0;31>u;u++)a.push(s);return a}function Lo(s,a,u){s.pendingLanes|=a,a!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,a=31-er(a),s[a]=u}function um(s,a){var u=s.pendingLanes&~a;s.pendingLanes=a,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=a,s.mutableReadLanes&=a,s.entangledLanes&=a,a=s.entanglements;var p=s.eventTimes;for(s=s.expirationTimes;0<u;){var v=31-er(u),b=1<<v;a[v]=0,p[v]=-1,s[v]=-1,u&=~b}}function hc(s,a){var u=s.entangledLanes|=a;for(s=s.entanglements;u;){var p=31-er(u),v=1<<p;v&a|s[p]&a&&(s[p]|=a),u&=~v}}var Je=0;function xi(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var fc,Aa,mc,pc,gc,bi=!1,Ra=[],ki=null,wi=null,hn=null,Oo=new Map,Hi=new Map,tr=[],dd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ds(s,a){switch(s){case"focusin":case"focusout":ki=null;break;case"dragenter":case"dragleave":wi=null;break;case"mouseover":case"mouseout":hn=null;break;case"pointerover":case"pointerout":Oo.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hi.delete(a.pointerId)}}function Hr(s,a,u,p,v,b){return s===null||s.nativeEvent!==b?(s={blockedOn:a,domEventName:u,eventSystemFlags:p,nativeEvent:b,targetContainers:[v]},a!==null&&(a=Ac(a),a!==null&&Aa(a)),s):(s.eventSystemFlags|=p,a=s.targetContainers,v!==null&&a.indexOf(v)===-1&&a.push(v),s)}function hd(s,a,u,p,v){switch(a){case"focusin":return ki=Hr(ki,s,a,u,p,v),!0;case"dragenter":return wi=Hr(wi,s,a,u,p,v),!0;case"mouseover":return hn=Hr(hn,s,a,u,p,v),!0;case"pointerover":var b=v.pointerId;return Oo.set(b,Hr(Oo.get(b)||null,s,a,u,p,v)),!0;case"gotpointercapture":return b=v.pointerId,Hi.set(b,Hr(Hi.get(b)||null,s,a,u,p,v)),!0}return!1}function Pa(s){var a=Uo(s.target);if(a!==null){var u=$r(a);if(u!==null){if(a=u.tag,a===13){if(a=sc(u),a!==null){s.blockedOn=a,gc(s.priority,function(){mc(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function ht(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var u=Da(s.domEventName,s.eventSystemFlags,a[0],s.nativeEvent);if(u===null){u=s.nativeEvent;var p=new u.constructor(u.type,u);hi=p,u.target.dispatchEvent(p),hi=null}else return a=Ac(u),a!==null&&Aa(a),s.blockedOn=u,!1;a.shift()}return!0}function fd(s,a,u){ht(s)&&u.delete(a)}function dm(){bi=!1,ki!==null&&ht(ki)&&(ki=null),wi!==null&&ht(wi)&&(wi=null),hn!==null&&ht(hn)&&(hn=null),Oo.forEach(fd),Hi.forEach(fd)}function Ns(s,a){s.blockedOn===a&&(s.blockedOn=null,bi||(bi=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,dm)))}function Ms(s){function a(v){return Ns(v,s)}if(0<Ra.length){Ns(Ra[0],s);for(var u=1;u<Ra.length;u++){var p=Ra[u];p.blockedOn===s&&(p.blockedOn=null)}}for(ki!==null&&Ns(ki,s),wi!==null&&Ns(wi,s),hn!==null&&Ns(hn,s),Oo.forEach(a),Hi.forEach(a),u=0;u<tr.length;u++)p=tr[u],p.blockedOn===s&&(p.blockedOn=null);for(;0<tr.length&&(u=tr[0],u.blockedOn===null);)Pa(u),u.blockedOn===null&&tr.shift()}var Ki=F.ReactCurrentBatchConfig,qi=!0;function Si(s,a,u,p){var v=Je,b=Ki.transition;Ki.transition=null;try{Je=1,yc(s,a,u,p)}finally{Je=v,Ki.transition=b}}function md(s,a,u,p){var v=Je,b=Ki.transition;Ki.transition=null;try{Je=4,yc(s,a,u,p)}finally{Je=v,Ki.transition=b}}function yc(s,a,u,p){if(qi){var v=Da(s,a,u,p);if(v===null)wm(s,a,p,_i,u),Ds(s,p);else if(hd(v,s,a,u,p))p.stopPropagation();else if(Ds(s,p),a&4&&-1<dd.indexOf(s)){for(;v!==null;){var b=Ac(v);if(b!==null&&fc(b),b=Da(s,a,u,p),b===null&&wm(s,a,p,_i,u),b===v)break;v=b}v!==null&&p.stopPropagation()}else wm(s,a,p,null,u)}}var _i=null;function Da(s,a,u,p){if(_i=null,s=Rs(p),s=Uo(s),s!==null)if(a=$r(s),a===null)s=null;else if(u=a.tag,u===13){if(s=sc(a),s!==null)return s;s=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null);return _i=s,null}function Na(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cm()){case Ca:return 1;case ac:return 4;case Po:case lc:return 16;case Ia:return 536870912;default:return 16}default:return 16}}var nr=null,Ma=null,Gi=null;function pd(){if(Gi)return Gi;var s,a=Ma,u=a.length,p,v="value"in nr?nr.value:nr.textContent,b=v.length;for(s=0;s<u&&a[s]===v[s];s++);var R=u-s;for(p=1;p<=R&&a[u-p]===v[b-p];p++);return Gi=v.slice(s,1<p?1-p:void 0)}function Bo(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function ji(){return!0}function vc(){return!1}function wn(s){function a(u,p,v,b,R){this._reactName=u,this._targetInst=v,this.type=p,this.nativeEvent=b,this.target=R,this.currentTarget=null;for(var B in s)s.hasOwnProperty(B)&&(u=s[B],this[B]=u?u(b):b[B]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?ji:vc,this.isPropagationStopped=vc,this}return ue(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=ji)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=ji)},persist:function(){},isPersistent:ji}),a}var Ei={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zo=wn(Ei),Vs=ue({},Ei,{view:0,detail:0}),Va=wn(Vs),La,Oa,rr,Fo=ue({},Vs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ue,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==rr&&(rr&&s.type==="mousemove"?(La=s.screenX-rr.screenX,Oa=s.screenY-rr.screenY):Oa=La=0,rr=s),La)},movementY:function(s){return"movementY"in s?s.movementY:Oa}}),xc=wn(Fo),gd=ue({},Fo,{dataTransfer:0}),yd=wn(gd),Ba=ue({},Vs,{relatedTarget:0}),fn=wn(Ba),vd=ue({},Ei,{animationName:0,elapsedTime:0,pseudoElement:0}),xd=wn(vd),Ls=ue({},Ei,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),f=wn(Ls),k=ue({},Ei,{data:0}),j=wn(k),N={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Y={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Z={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ge(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=Z[s])?!!a[s]:!1}function Ue(){return ge}var Vt=ue({},Vs,{key:function(s){if(s.key){var a=N[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=Bo(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Y[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ue,charCode:function(s){return s.type==="keypress"?Bo(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Bo(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),ct=wn(Vt),zt=ue({},Fo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ir=wn(zt),Qi=ue({},Vs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ue}),Ti=wn(Qi),Ci=ue({},Ei,{propertyName:0,elapsedTime:0,pseudoElement:0}),za=wn(Ci),bc=ue({},Fo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),PE=wn(bc),DE=[9,13,27,32],hm=h&&"CompositionEvent"in window,kc=null;h&&"documentMode"in document&&(kc=document.documentMode);var NE=h&&"TextEvent"in window&&!kc,wv=h&&(!hm||kc&&8<kc&&11>=kc),Sv=" ",_v=!1;function jv(s,a){switch(s){case"keyup":return DE.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ev(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Fa=!1;function ME(s,a){switch(s){case"compositionend":return Ev(a);case"keypress":return a.which!==32?null:(_v=!0,Sv);case"textInput":return s=a.data,s===Sv&&_v?null:s;default:return null}}function VE(s,a){if(Fa)return s==="compositionend"||!hm&&jv(s,a)?(s=pd(),Gi=Ma=nr=null,Fa=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return wv&&a.locale!=="ko"?null:a.data;default:return null}}var LE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tv(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!LE[s.type]:a==="textarea"}function Cv(s,a,u,p){fi(p),a=_d(a,"onChange"),0<a.length&&(u=new zo("onChange","change",null,u,p),s.push({event:u,listeners:a}))}var wc=null,Sc=null;function OE(s){Kv(s,0)}function bd(s){var a=Ka(s);if(qt(a))return s}function BE(s,a){if(s==="change")return a}var Iv=!1;if(h){var fm;if(h){var mm="oninput"in document;if(!mm){var Av=document.createElement("div");Av.setAttribute("oninput","return;"),mm=typeof Av.oninput=="function"}fm=mm}else fm=!1;Iv=fm&&(!document.documentMode||9<document.documentMode)}function Rv(){wc&&(wc.detachEvent("onpropertychange",Pv),Sc=wc=null)}function Pv(s){if(s.propertyName==="value"&&bd(Sc)){var a=[];Cv(a,Sc,s,Rs(s)),He(OE,a)}}function zE(s,a,u){s==="focusin"?(Rv(),wc=a,Sc=u,wc.attachEvent("onpropertychange",Pv)):s==="focusout"&&Rv()}function FE(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return bd(Sc)}function UE(s,a){if(s==="click")return bd(a)}function WE(s,a){if(s==="input"||s==="change")return bd(a)}function $E(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var Kr=typeof Object.is=="function"?Object.is:$E;function _c(s,a){if(Kr(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var u=Object.keys(s),p=Object.keys(a);if(u.length!==p.length)return!1;for(p=0;p<u.length;p++){var v=u[p];if(!d.call(a,v)||!Kr(s[v],a[v]))return!1}return!0}function Dv(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Nv(s,a){var u=Dv(s);s=0;for(var p;u;){if(u.nodeType===3){if(p=s+u.textContent.length,s<=a&&p>=a)return{node:u,offset:a-s};s=p}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Dv(u)}}function Mv(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?Mv(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function Vv(){for(var s=window,a=yt();a instanceof s.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)s=a.contentWindow;else break;a=yt(s.document)}return a}function pm(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}function HE(s){var a=Vv(),u=s.focusedElem,p=s.selectionRange;if(a!==u&&u&&u.ownerDocument&&Mv(u.ownerDocument.documentElement,u)){if(p!==null&&pm(u)){if(a=p.start,s=p.end,s===void 0&&(s=a),"selectionStart"in u)u.selectionStart=a,u.selectionEnd=Math.min(s,u.value.length);else if(s=(a=u.ownerDocument||document)&&a.defaultView||window,s.getSelection){s=s.getSelection();var v=u.textContent.length,b=Math.min(p.start,v);p=p.end===void 0?b:Math.min(p.end,v),!s.extend&&b>p&&(v=p,p=b,b=v),v=Nv(u,b);var R=Nv(u,p);v&&R&&(s.rangeCount!==1||s.anchorNode!==v.node||s.anchorOffset!==v.offset||s.focusNode!==R.node||s.focusOffset!==R.offset)&&(a=a.createRange(),a.setStart(v.node,v.offset),s.removeAllRanges(),b>p?(s.addRange(a),s.extend(R.node,R.offset)):(a.setEnd(R.node,R.offset),s.addRange(a)))}}for(a=[],s=u;s=s.parentNode;)s.nodeType===1&&a.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<a.length;u++)s=a[u],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var KE=h&&"documentMode"in document&&11>=document.documentMode,Ua=null,gm=null,jc=null,ym=!1;function Lv(s,a,u){var p=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;ym||Ua==null||Ua!==yt(p)||(p=Ua,"selectionStart"in p&&pm(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),jc&&_c(jc,p)||(jc=p,p=_d(gm,"onSelect"),0<p.length&&(a=new zo("onSelect","select",null,a,u),s.push({event:a,listeners:p}),a.target=Ua)))}function kd(s,a){var u={};return u[s.toLowerCase()]=a.toLowerCase(),u["Webkit"+s]="webkit"+a,u["Moz"+s]="moz"+a,u}var Wa={animationend:kd("Animation","AnimationEnd"),animationiteration:kd("Animation","AnimationIteration"),animationstart:kd("Animation","AnimationStart"),transitionend:kd("Transition","TransitionEnd")},vm={},Ov={};h&&(Ov=document.createElement("div").style,"AnimationEvent"in window||(delete Wa.animationend.animation,delete Wa.animationiteration.animation,delete Wa.animationstart.animation),"TransitionEvent"in window||delete Wa.transitionend.transition);function wd(s){if(vm[s])return vm[s];if(!Wa[s])return s;var a=Wa[s],u;for(u in a)if(a.hasOwnProperty(u)&&u in Ov)return vm[s]=a[u];return s}var Bv=wd("animationend"),zv=wd("animationiteration"),Fv=wd("animationstart"),Uv=wd("transitionend"),Wv=new Map,$v="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Os(s,a){Wv.set(s,a),l(a,[s])}for(var xm=0;xm<$v.length;xm++){var bm=$v[xm],qE=bm.toLowerCase(),GE=bm[0].toUpperCase()+bm.slice(1);Os(qE,"on"+GE)}Os(Bv,"onAnimationEnd"),Os(zv,"onAnimationIteration"),Os(Fv,"onAnimationStart"),Os("dblclick","onDoubleClick"),Os("focusin","onFocus"),Os("focusout","onBlur"),Os(Uv,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ec="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),QE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ec));function Hv(s,a,u){var p=s.type||"unknown-event";s.currentTarget=u,ic(p,a,void 0,s),s.currentTarget=null}function Kv(s,a){a=(a&4)!==0;for(var u=0;u<s.length;u++){var p=s[u],v=p.event;p=p.listeners;e:{var b=void 0;if(a)for(var R=p.length-1;0<=R;R--){var B=p[R],W=B.instance,J=B.currentTarget;if(B=B.listener,W!==b&&v.isPropagationStopped())break e;Hv(v,B,J),b=W}else for(R=0;R<p.length;R++){if(B=p[R],W=B.instance,J=B.currentTarget,B=B.listener,W!==b&&v.isPropagationStopped())break e;Hv(v,B,J),b=W}}}if(Ea)throw s=br,Ea=!1,br=null,s}function xt(s,a){var u=a[Cm];u===void 0&&(u=a[Cm]=new Set);var p=s+"__bubble";u.has(p)||(qv(a,s,2,!1),u.add(p))}function km(s,a,u){var p=0;a&&(p|=4),qv(u,s,p,a)}var Sd="_reactListening"+Math.random().toString(36).slice(2);function Tc(s){if(!s[Sd]){s[Sd]=!0,r.forEach(function(u){u!=="selectionchange"&&(QE.has(u)||km(u,!1,s),km(u,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[Sd]||(a[Sd]=!0,km("selectionchange",!1,a))}}function qv(s,a,u,p){switch(Na(a)){case 1:var v=Si;break;case 4:v=md;break;default:v=yc}u=v.bind(null,a,u,s),v=void 0,!kn||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(v=!0),p?v!==void 0?s.addEventListener(a,u,{capture:!0,passive:v}):s.addEventListener(a,u,!0):v!==void 0?s.addEventListener(a,u,{passive:v}):s.addEventListener(a,u,!1)}function wm(s,a,u,p,v){var b=p;if((a&1)===0&&(a&2)===0&&p!==null)e:for(;;){if(p===null)return;var R=p.tag;if(R===3||R===4){var B=p.stateNode.containerInfo;if(B===v||B.nodeType===8&&B.parentNode===v)break;if(R===4)for(R=p.return;R!==null;){var W=R.tag;if((W===3||W===4)&&(W=R.stateNode.containerInfo,W===v||W.nodeType===8&&W.parentNode===v))return;R=R.return}for(;B!==null;){if(R=Uo(B),R===null)return;if(W=R.tag,W===5||W===6){p=b=R;continue e}B=B.parentNode}}p=p.return}He(function(){var J=b,le=Rs(u),de=[];e:{var ae=Wv.get(s);if(ae!==void 0){var xe=zo,_e=s;switch(s){case"keypress":if(Bo(u)===0)break e;case"keydown":case"keyup":xe=ct;break;case"focusin":_e="focus",xe=fn;break;case"focusout":_e="blur",xe=fn;break;case"beforeblur":case"afterblur":xe=fn;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":xe=xc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":xe=yd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":xe=Ti;break;case Bv:case zv:case Fv:xe=xd;break;case Uv:xe=za;break;case"scroll":xe=Va;break;case"wheel":xe=PE;break;case"copy":case"cut":case"paste":xe=f;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":xe=ir}var je=(a&4)!==0,Lt=!je&&s==="scroll",Q=je?ae!==null?ae+"Capture":null:ae;je=[];for(var H=J,X;H!==null;){X=H;var he=X.stateNode;if(X.tag===5&&he!==null&&(X=he,Q!==null&&(he=St(H,Q),he!=null&&je.push(Cc(H,he,X)))),Lt)break;H=H.return}0<je.length&&(ae=new xe(ae,_e,null,u,le),de.push({event:ae,listeners:je}))}}if((a&7)===0){e:{if(ae=s==="mouseover"||s==="pointerover",xe=s==="mouseout"||s==="pointerout",ae&&u!==hi&&(_e=u.relatedTarget||u.fromElement)&&(Uo(_e)||_e[Yi]))break e;if((xe||ae)&&(ae=le.window===le?le:(ae=le.ownerDocument)?ae.defaultView||ae.parentWindow:window,xe?(_e=u.relatedTarget||u.toElement,xe=J,_e=_e?Uo(_e):null,_e!==null&&(Lt=$r(_e),_e!==Lt||_e.tag!==5&&_e.tag!==6)&&(_e=null)):(xe=null,_e=J),xe!==_e)){if(je=xc,he="onMouseLeave",Q="onMouseEnter",H="mouse",(s==="pointerout"||s==="pointerover")&&(je=ir,he="onPointerLeave",Q="onPointerEnter",H="pointer"),Lt=xe==null?ae:Ka(xe),X=_e==null?ae:Ka(_e),ae=new je(he,H+"leave",xe,u,le),ae.target=Lt,ae.relatedTarget=X,he=null,Uo(le)===J&&(je=new je(Q,H+"enter",_e,u,le),je.target=X,je.relatedTarget=Lt,he=je),Lt=he,xe&&_e)t:{for(je=xe,Q=_e,H=0,X=je;X;X=$a(X))H++;for(X=0,he=Q;he;he=$a(he))X++;for(;0<H-X;)je=$a(je),H--;for(;0<X-H;)Q=$a(Q),X--;for(;H--;){if(je===Q||Q!==null&&je===Q.alternate)break t;je=$a(je),Q=$a(Q)}je=null}else je=null;xe!==null&&Gv(de,ae,xe,je,!1),_e!==null&&Lt!==null&&Gv(de,Lt,_e,je,!0)}}e:{if(ae=J?Ka(J):window,xe=ae.nodeName&&ae.nodeName.toLowerCase(),xe==="select"||xe==="input"&&ae.type==="file")var Ee=BE;else if(Tv(ae))if(Iv)Ee=WE;else{Ee=FE;var Pe=zE}else(xe=ae.nodeName)&&xe.toLowerCase()==="input"&&(ae.type==="checkbox"||ae.type==="radio")&&(Ee=UE);if(Ee&&(Ee=Ee(s,J))){Cv(de,Ee,u,le);break e}Pe&&Pe(s,ae,J),s==="focusout"&&(Pe=ae._wrapperState)&&Pe.controlled&&ae.type==="number"&&lt(ae,"number",ae.value)}switch(Pe=J?Ka(J):window,s){case"focusin":(Tv(Pe)||Pe.contentEditable==="true")&&(Ua=Pe,gm=J,jc=null);break;case"focusout":jc=gm=Ua=null;break;case"mousedown":ym=!0;break;case"contextmenu":case"mouseup":case"dragend":ym=!1,Lv(de,u,le);break;case"selectionchange":if(KE)break;case"keydown":case"keyup":Lv(de,u,le)}var De;if(hm)e:{switch(s){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else Fa?jv(s,u)&&(Oe="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(Oe="onCompositionStart");Oe&&(wv&&u.locale!=="ko"&&(Fa||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&Fa&&(De=pd()):(nr=le,Ma="value"in nr?nr.value:nr.textContent,Fa=!0)),Pe=_d(J,Oe),0<Pe.length&&(Oe=new j(Oe,s,null,u,le),de.push({event:Oe,listeners:Pe}),De?Oe.data=De:(De=Ev(u),De!==null&&(Oe.data=De)))),(De=NE?ME(s,u):VE(s,u))&&(J=_d(J,"onBeforeInput"),0<J.length&&(le=new j("onBeforeInput","beforeinput",null,u,le),de.push({event:le,listeners:J}),le.data=De))}Kv(de,a)})}function Cc(s,a,u){return{instance:s,listener:a,currentTarget:u}}function _d(s,a){for(var u=a+"Capture",p=[];s!==null;){var v=s,b=v.stateNode;v.tag===5&&b!==null&&(v=b,b=St(s,u),b!=null&&p.unshift(Cc(s,b,v)),b=St(s,a),b!=null&&p.push(Cc(s,b,v))),s=s.return}return p}function $a(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function Gv(s,a,u,p,v){for(var b=a._reactName,R=[];u!==null&&u!==p;){var B=u,W=B.alternate,J=B.stateNode;if(W!==null&&W===p)break;B.tag===5&&J!==null&&(B=J,v?(W=St(u,b),W!=null&&R.unshift(Cc(u,W,B))):v||(W=St(u,b),W!=null&&R.push(Cc(u,W,B)))),u=u.return}R.length!==0&&s.push({event:a,listeners:R})}var YE=/\r\n?/g,XE=/\u0000|\uFFFD/g;function Qv(s){return(typeof s=="string"?s:""+s).replace(YE,`
`).replace(XE,"")}function jd(s,a,u){if(a=Qv(a),Qv(s)!==a&&u)throw Error(n(425))}function Ed(){}var Sm=null,_m=null;function jm(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Em=typeof setTimeout=="function"?setTimeout:void 0,JE=typeof clearTimeout=="function"?clearTimeout:void 0,Yv=typeof Promise=="function"?Promise:void 0,ZE=typeof queueMicrotask=="function"?queueMicrotask:typeof Yv<"u"?function(s){return Yv.resolve(null).then(s).catch(eT)}:Em;function eT(s){setTimeout(function(){throw s})}function Tm(s,a){var u=a,p=0;do{var v=u.nextSibling;if(s.removeChild(u),v&&v.nodeType===8)if(u=v.data,u==="/$"){if(p===0){s.removeChild(v),Ms(a);return}p--}else u!=="$"&&u!=="$?"&&u!=="$!"||p++;u=v}while(u);Ms(a)}function Bs(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return s}function Xv(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"){if(a===0)return s;a--}else u==="/$"&&a++}s=s.previousSibling}return null}var Ha=Math.random().toString(36).slice(2),Ii="__reactFiber$"+Ha,Ic="__reactProps$"+Ha,Yi="__reactContainer$"+Ha,Cm="__reactEvents$"+Ha,tT="__reactListeners$"+Ha,nT="__reactHandles$"+Ha;function Uo(s){var a=s[Ii];if(a)return a;for(var u=s.parentNode;u;){if(a=u[Yi]||u[Ii]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(s=Xv(s);s!==null;){if(u=s[Ii])return u;s=Xv(s)}return a}s=u,u=s.parentNode}return null}function Ac(s){return s=s[Ii]||s[Yi],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Ka(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(n(33))}function Td(s){return s[Ic]||null}var Im=[],qa=-1;function zs(s){return{current:s}}function bt(s){0>qa||(s.current=Im[qa],Im[qa]=null,qa--)}function mt(s,a){qa++,Im[qa]=s.current,s.current=a}var Fs={},Sn=zs(Fs),Un=zs(!1),Wo=Fs;function Ga(s,a){var u=s.type.contextTypes;if(!u)return Fs;var p=s.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===a)return p.__reactInternalMemoizedMaskedChildContext;var v={},b;for(b in u)v[b]=a[b];return p&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=a,s.__reactInternalMemoizedMaskedChildContext=v),v}function Wn(s){return s=s.childContextTypes,s!=null}function Cd(){bt(Un),bt(Sn)}function Jv(s,a,u){if(Sn.current!==Fs)throw Error(n(168));mt(Sn,a),mt(Un,u)}function Zv(s,a,u){var p=s.stateNode;if(a=a.childContextTypes,typeof p.getChildContext!="function")return u;p=p.getChildContext();for(var v in p)if(!(v in a))throw Error(n(108,se(s)||"Unknown",v));return ue({},u,p)}function Id(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Fs,Wo=Sn.current,mt(Sn,s),mt(Un,Un.current),!0}function ex(s,a,u){var p=s.stateNode;if(!p)throw Error(n(169));u?(s=Zv(s,a,Wo),p.__reactInternalMemoizedMergedChildContext=s,bt(Un),bt(Sn),mt(Sn,s)):bt(Un),mt(Un,u)}var Xi=null,Ad=!1,Am=!1;function tx(s){Xi===null?Xi=[s]:Xi.push(s)}function rT(s){Ad=!0,tx(s)}function Us(){if(!Am&&Xi!==null){Am=!0;var s=0,a=Je;try{var u=Xi;for(Je=1;s<u.length;s++){var p=u[s];do p=p(!0);while(p!==null)}Xi=null,Ad=!1}catch(v){throw Xi!==null&&(Xi=Xi.slice(s+1)),oc(Ca,Us),v}finally{Je=a,Am=!1}}return null}var Qa=[],Ya=0,Rd=null,Pd=0,wr=[],Sr=0,$o=null,Ji=1,Zi="";function Ho(s,a){Qa[Ya++]=Pd,Qa[Ya++]=Rd,Rd=s,Pd=a}function nx(s,a,u){wr[Sr++]=Ji,wr[Sr++]=Zi,wr[Sr++]=$o,$o=s;var p=Ji;s=Zi;var v=32-er(p)-1;p&=~(1<<v),u+=1;var b=32-er(a)+v;if(30<b){var R=v-v%5;b=(p&(1<<R)-1).toString(32),p>>=R,v-=R,Ji=1<<32-er(a)+v|u<<v|p,Zi=b+s}else Ji=1<<b|u<<v|p,Zi=s}function Rm(s){s.return!==null&&(Ho(s,1),nx(s,1,0))}function Pm(s){for(;s===Rd;)Rd=Qa[--Ya],Qa[Ya]=null,Pd=Qa[--Ya],Qa[Ya]=null;for(;s===$o;)$o=wr[--Sr],wr[Sr]=null,Zi=wr[--Sr],wr[Sr]=null,Ji=wr[--Sr],wr[Sr]=null}var sr=null,or=null,_t=!1,qr=null;function rx(s,a){var u=Tr(5,null,null,0);u.elementType="DELETED",u.stateNode=a,u.return=s,a=s.deletions,a===null?(s.deletions=[u],s.flags|=16):a.push(u)}function ix(s,a){switch(s.tag){case 5:var u=s.type;return a=a.nodeType!==1||u.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(s.stateNode=a,sr=s,or=Bs(a.firstChild),!0):!1;case 6:return a=s.pendingProps===""||a.nodeType!==3?null:a,a!==null?(s.stateNode=a,sr=s,or=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(u=$o!==null?{id:Ji,overflow:Zi}:null,s.memoizedState={dehydrated:a,treeContext:u,retryLane:1073741824},u=Tr(18,null,null,0),u.stateNode=a,u.return=s,s.child=u,sr=s,or=null,!0):!1;default:return!1}}function Dm(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Nm(s){if(_t){var a=or;if(a){var u=a;if(!ix(s,a)){if(Dm(s))throw Error(n(418));a=Bs(u.nextSibling);var p=sr;a&&ix(s,a)?rx(p,u):(s.flags=s.flags&-4097|2,_t=!1,sr=s)}}else{if(Dm(s))throw Error(n(418));s.flags=s.flags&-4097|2,_t=!1,sr=s}}}function sx(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;sr=s}function Dd(s){if(s!==sr)return!1;if(!_t)return sx(s),_t=!0,!1;var a;if((a=s.tag!==3)&&!(a=s.tag!==5)&&(a=s.type,a=a!=="head"&&a!=="body"&&!jm(s.type,s.memoizedProps)),a&&(a=or)){if(Dm(s))throw ox(),Error(n(418));for(;a;)rx(s,a),a=Bs(a.nextSibling)}if(sx(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));e:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"){if(a===0){or=Bs(s.nextSibling);break e}a--}else u!=="$"&&u!=="$!"&&u!=="$?"||a++}s=s.nextSibling}or=null}}else or=sr?Bs(s.stateNode.nextSibling):null;return!0}function ox(){for(var s=or;s;)s=Bs(s.nextSibling)}function Xa(){or=sr=null,_t=!1}function Mm(s){qr===null?qr=[s]:qr.push(s)}var iT=F.ReactCurrentBatchConfig;function Rc(s,a,u){if(s=u.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(n(309));var p=u.stateNode}if(!p)throw Error(n(147,s));var v=p,b=""+s;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===b?a.ref:(a=function(R){var B=v.refs;R===null?delete B[b]:B[b]=R},a._stringRef=b,a)}if(typeof s!="string")throw Error(n(284));if(!u._owner)throw Error(n(290,s))}return s}function Nd(s,a){throw s=Object.prototype.toString.call(a),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s))}function ax(s){var a=s._init;return a(s._payload)}function lx(s){function a(Q,H){if(s){var X=Q.deletions;X===null?(Q.deletions=[H],Q.flags|=16):X.push(H)}}function u(Q,H){if(!s)return null;for(;H!==null;)a(Q,H),H=H.sibling;return null}function p(Q,H){for(Q=new Map;H!==null;)H.key!==null?Q.set(H.key,H):Q.set(H.index,H),H=H.sibling;return Q}function v(Q,H){return Q=Ys(Q,H),Q.index=0,Q.sibling=null,Q}function b(Q,H,X){return Q.index=X,s?(X=Q.alternate,X!==null?(X=X.index,X<H?(Q.flags|=2,H):X):(Q.flags|=2,H)):(Q.flags|=1048576,H)}function R(Q){return s&&Q.alternate===null&&(Q.flags|=2),Q}function B(Q,H,X,he){return H===null||H.tag!==6?(H=Ep(X,Q.mode,he),H.return=Q,H):(H=v(H,X),H.return=Q,H)}function W(Q,H,X,he){var Ee=X.type;return Ee===A?le(Q,H,X.props.children,he,X.key):H!==null&&(H.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===tt&&ax(Ee)===H.type)?(he=v(H,X.props),he.ref=Rc(Q,H,X),he.return=Q,he):(he=ih(X.type,X.key,X.props,null,Q.mode,he),he.ref=Rc(Q,H,X),he.return=Q,he)}function J(Q,H,X,he){return H===null||H.tag!==4||H.stateNode.containerInfo!==X.containerInfo||H.stateNode.implementation!==X.implementation?(H=Tp(X,Q.mode,he),H.return=Q,H):(H=v(H,X.children||[]),H.return=Q,H)}function le(Q,H,X,he,Ee){return H===null||H.tag!==7?(H=Zo(X,Q.mode,he,Ee),H.return=Q,H):(H=v(H,X),H.return=Q,H)}function de(Q,H,X){if(typeof H=="string"&&H!==""||typeof H=="number")return H=Ep(""+H,Q.mode,X),H.return=Q,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case K:return X=ih(H.type,H.key,H.props,null,Q.mode,X),X.ref=Rc(Q,null,H),X.return=Q,X;case q:return H=Tp(H,Q.mode,X),H.return=Q,H;case tt:var he=H._init;return de(Q,he(H._payload),X)}if(dt(H)||me(H))return H=Zo(H,Q.mode,X,null),H.return=Q,H;Nd(Q,H)}return null}function ae(Q,H,X,he){var Ee=H!==null?H.key:null;if(typeof X=="string"&&X!==""||typeof X=="number")return Ee!==null?null:B(Q,H,""+X,he);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case K:return X.key===Ee?W(Q,H,X,he):null;case q:return X.key===Ee?J(Q,H,X,he):null;case tt:return Ee=X._init,ae(Q,H,Ee(X._payload),he)}if(dt(X)||me(X))return Ee!==null?null:le(Q,H,X,he,null);Nd(Q,X)}return null}function xe(Q,H,X,he,Ee){if(typeof he=="string"&&he!==""||typeof he=="number")return Q=Q.get(X)||null,B(H,Q,""+he,Ee);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case K:return Q=Q.get(he.key===null?X:he.key)||null,W(H,Q,he,Ee);case q:return Q=Q.get(he.key===null?X:he.key)||null,J(H,Q,he,Ee);case tt:var Pe=he._init;return xe(Q,H,X,Pe(he._payload),Ee)}if(dt(he)||me(he))return Q=Q.get(X)||null,le(H,Q,he,Ee,null);Nd(H,he)}return null}function _e(Q,H,X,he){for(var Ee=null,Pe=null,De=H,Oe=H=0,rn=null;De!==null&&Oe<X.length;Oe++){De.index>Oe?(rn=De,De=null):rn=De.sibling;var nt=ae(Q,De,X[Oe],he);if(nt===null){De===null&&(De=rn);break}s&&De&&nt.alternate===null&&a(Q,De),H=b(nt,H,Oe),Pe===null?Ee=nt:Pe.sibling=nt,Pe=nt,De=rn}if(Oe===X.length)return u(Q,De),_t&&Ho(Q,Oe),Ee;if(De===null){for(;Oe<X.length;Oe++)De=de(Q,X[Oe],he),De!==null&&(H=b(De,H,Oe),Pe===null?Ee=De:Pe.sibling=De,Pe=De);return _t&&Ho(Q,Oe),Ee}for(De=p(Q,De);Oe<X.length;Oe++)rn=xe(De,Q,Oe,X[Oe],he),rn!==null&&(s&&rn.alternate!==null&&De.delete(rn.key===null?Oe:rn.key),H=b(rn,H,Oe),Pe===null?Ee=rn:Pe.sibling=rn,Pe=rn);return s&&De.forEach(function(Xs){return a(Q,Xs)}),_t&&Ho(Q,Oe),Ee}function je(Q,H,X,he){var Ee=me(X);if(typeof Ee!="function")throw Error(n(150));if(X=Ee.call(X),X==null)throw Error(n(151));for(var Pe=Ee=null,De=H,Oe=H=0,rn=null,nt=X.next();De!==null&&!nt.done;Oe++,nt=X.next()){De.index>Oe?(rn=De,De=null):rn=De.sibling;var Xs=ae(Q,De,nt.value,he);if(Xs===null){De===null&&(De=rn);break}s&&De&&Xs.alternate===null&&a(Q,De),H=b(Xs,H,Oe),Pe===null?Ee=Xs:Pe.sibling=Xs,Pe=Xs,De=rn}if(nt.done)return u(Q,De),_t&&Ho(Q,Oe),Ee;if(De===null){for(;!nt.done;Oe++,nt=X.next())nt=de(Q,nt.value,he),nt!==null&&(H=b(nt,H,Oe),Pe===null?Ee=nt:Pe.sibling=nt,Pe=nt);return _t&&Ho(Q,Oe),Ee}for(De=p(Q,De);!nt.done;Oe++,nt=X.next())nt=xe(De,Q,Oe,nt.value,he),nt!==null&&(s&&nt.alternate!==null&&De.delete(nt.key===null?Oe:nt.key),H=b(nt,H,Oe),Pe===null?Ee=nt:Pe.sibling=nt,Pe=nt);return s&&De.forEach(function(LT){return a(Q,LT)}),_t&&Ho(Q,Oe),Ee}function Lt(Q,H,X,he){if(typeof X=="object"&&X!==null&&X.type===A&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case K:e:{for(var Ee=X.key,Pe=H;Pe!==null;){if(Pe.key===Ee){if(Ee=X.type,Ee===A){if(Pe.tag===7){u(Q,Pe.sibling),H=v(Pe,X.props.children),H.return=Q,Q=H;break e}}else if(Pe.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===tt&&ax(Ee)===Pe.type){u(Q,Pe.sibling),H=v(Pe,X.props),H.ref=Rc(Q,Pe,X),H.return=Q,Q=H;break e}u(Q,Pe);break}else a(Q,Pe);Pe=Pe.sibling}X.type===A?(H=Zo(X.props.children,Q.mode,he,X.key),H.return=Q,Q=H):(he=ih(X.type,X.key,X.props,null,Q.mode,he),he.ref=Rc(Q,H,X),he.return=Q,Q=he)}return R(Q);case q:e:{for(Pe=X.key;H!==null;){if(H.key===Pe)if(H.tag===4&&H.stateNode.containerInfo===X.containerInfo&&H.stateNode.implementation===X.implementation){u(Q,H.sibling),H=v(H,X.children||[]),H.return=Q,Q=H;break e}else{u(Q,H);break}else a(Q,H);H=H.sibling}H=Tp(X,Q.mode,he),H.return=Q,Q=H}return R(Q);case tt:return Pe=X._init,Lt(Q,H,Pe(X._payload),he)}if(dt(X))return _e(Q,H,X,he);if(me(X))return je(Q,H,X,he);Nd(Q,X)}return typeof X=="string"&&X!==""||typeof X=="number"?(X=""+X,H!==null&&H.tag===6?(u(Q,H.sibling),H=v(H,X),H.return=Q,Q=H):(u(Q,H),H=Ep(X,Q.mode,he),H.return=Q,Q=H),R(Q)):u(Q,H)}return Lt}var Ja=lx(!0),cx=lx(!1),Md=zs(null),Vd=null,Za=null,Vm=null;function Lm(){Vm=Za=Vd=null}function Om(s){var a=Md.current;bt(Md),s._currentValue=a}function Bm(s,a,u){for(;s!==null;){var p=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,p!==null&&(p.childLanes|=a)):p!==null&&(p.childLanes&a)!==a&&(p.childLanes|=a),s===u)break;s=s.return}}function el(s,a){Vd=s,Vm=Za=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&a)!==0&&($n=!0),s.firstContext=null)}function _r(s){var a=s._currentValue;if(Vm!==s)if(s={context:s,memoizedValue:a,next:null},Za===null){if(Vd===null)throw Error(n(308));Za=s,Vd.dependencies={lanes:0,firstContext:s}}else Za=Za.next=s;return a}var Ko=null;function zm(s){Ko===null?Ko=[s]:Ko.push(s)}function ux(s,a,u,p){var v=a.interleaved;return v===null?(u.next=u,zm(a)):(u.next=v.next,v.next=u),a.interleaved=u,es(s,p)}function es(s,a){s.lanes|=a;var u=s.alternate;for(u!==null&&(u.lanes|=a),u=s,s=s.return;s!==null;)s.childLanes|=a,u=s.alternate,u!==null&&(u.childLanes|=a),u=s,s=s.return;return u.tag===3?u.stateNode:null}var Ws=!1;function Fm(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dx(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function ts(s,a){return{eventTime:s,lane:a,tag:0,payload:null,callback:null,next:null}}function $s(s,a,u){var p=s.updateQueue;if(p===null)return null;if(p=p.shared,(et&2)!==0){var v=p.pending;return v===null?a.next=a:(a.next=v.next,v.next=a),p.pending=a,es(s,u)}return v=p.interleaved,v===null?(a.next=a,zm(p)):(a.next=v.next,v.next=a),p.interleaved=a,es(s,u)}function Ld(s,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194240)!==0)){var p=a.lanes;p&=s.pendingLanes,u|=p,a.lanes=u,hc(s,u)}}function hx(s,a){var u=s.updateQueue,p=s.alternate;if(p!==null&&(p=p.updateQueue,u===p)){var v=null,b=null;if(u=u.firstBaseUpdate,u!==null){do{var R={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};b===null?v=b=R:b=b.next=R,u=u.next}while(u!==null);b===null?v=b=a:b=b.next=a}else v=b=a;u={baseState:p.baseState,firstBaseUpdate:v,lastBaseUpdate:b,shared:p.shared,effects:p.effects},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=a:s.next=a,u.lastBaseUpdate=a}function Od(s,a,u,p){var v=s.updateQueue;Ws=!1;var b=v.firstBaseUpdate,R=v.lastBaseUpdate,B=v.shared.pending;if(B!==null){v.shared.pending=null;var W=B,J=W.next;W.next=null,R===null?b=J:R.next=J,R=W;var le=s.alternate;le!==null&&(le=le.updateQueue,B=le.lastBaseUpdate,B!==R&&(B===null?le.firstBaseUpdate=J:B.next=J,le.lastBaseUpdate=W))}if(b!==null){var de=v.baseState;R=0,le=J=W=null,B=b;do{var ae=B.lane,xe=B.eventTime;if((p&ae)===ae){le!==null&&(le=le.next={eventTime:xe,lane:0,tag:B.tag,payload:B.payload,callback:B.callback,next:null});e:{var _e=s,je=B;switch(ae=a,xe=u,je.tag){case 1:if(_e=je.payload,typeof _e=="function"){de=_e.call(xe,de,ae);break e}de=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=je.payload,ae=typeof _e=="function"?_e.call(xe,de,ae):_e,ae==null)break e;de=ue({},de,ae);break e;case 2:Ws=!0}}B.callback!==null&&B.lane!==0&&(s.flags|=64,ae=v.effects,ae===null?v.effects=[B]:ae.push(B))}else xe={eventTime:xe,lane:ae,tag:B.tag,payload:B.payload,callback:B.callback,next:null},le===null?(J=le=xe,W=de):le=le.next=xe,R|=ae;if(B=B.next,B===null){if(B=v.shared.pending,B===null)break;ae=B,B=ae.next,ae.next=null,v.lastBaseUpdate=ae,v.shared.pending=null}}while(!0);if(le===null&&(W=de),v.baseState=W,v.firstBaseUpdate=J,v.lastBaseUpdate=le,a=v.shared.interleaved,a!==null){v=a;do R|=v.lane,v=v.next;while(v!==a)}else b===null&&(v.shared.lanes=0);Qo|=R,s.lanes=R,s.memoizedState=de}}function fx(s,a,u){if(s=a.effects,a.effects=null,s!==null)for(a=0;a<s.length;a++){var p=s[a],v=p.callback;if(v!==null){if(p.callback=null,p=u,typeof v!="function")throw Error(n(191,v));v.call(p)}}}var Pc={},Ai=zs(Pc),Dc=zs(Pc),Nc=zs(Pc);function qo(s){if(s===Pc)throw Error(n(174));return s}function Um(s,a){switch(mt(Nc,a),mt(Dc,s),mt(Ai,Pc),s=a.nodeType,s){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:Cs(null,"");break;default:s=s===8?a.parentNode:a,a=s.namespaceURI||null,s=s.tagName,a=Cs(a,s)}bt(Ai),mt(Ai,a)}function tl(){bt(Ai),bt(Dc),bt(Nc)}function mx(s){qo(Nc.current);var a=qo(Ai.current),u=Cs(a,s.type);a!==u&&(mt(Dc,s),mt(Ai,u))}function Wm(s){Dc.current===s&&(bt(Ai),bt(Dc))}var Et=zs(0);function Bd(s){for(var a=s;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var $m=[];function Hm(){for(var s=0;s<$m.length;s++)$m[s]._workInProgressVersionPrimary=null;$m.length=0}var zd=F.ReactCurrentDispatcher,Km=F.ReactCurrentBatchConfig,Go=0,Tt=null,Gt=null,tn=null,Fd=!1,Mc=!1,Vc=0,sT=0;function _n(){throw Error(n(321))}function qm(s,a){if(a===null)return!1;for(var u=0;u<a.length&&u<s.length;u++)if(!Kr(s[u],a[u]))return!1;return!0}function Gm(s,a,u,p,v,b){if(Go=b,Tt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,zd.current=s===null||s.memoizedState===null?cT:uT,s=u(p,v),Mc){b=0;do{if(Mc=!1,Vc=0,25<=b)throw Error(n(301));b+=1,tn=Gt=null,a.updateQueue=null,zd.current=dT,s=u(p,v)}while(Mc)}if(zd.current=$d,a=Gt!==null&&Gt.next!==null,Go=0,tn=Gt=Tt=null,Fd=!1,a)throw Error(n(300));return s}function Qm(){var s=Vc!==0;return Vc=0,s}function Ri(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tn===null?Tt.memoizedState=tn=s:tn=tn.next=s,tn}function jr(){if(Gt===null){var s=Tt.alternate;s=s!==null?s.memoizedState:null}else s=Gt.next;var a=tn===null?Tt.memoizedState:tn.next;if(a!==null)tn=a,Gt=s;else{if(s===null)throw Error(n(310));Gt=s,s={memoizedState:Gt.memoizedState,baseState:Gt.baseState,baseQueue:Gt.baseQueue,queue:Gt.queue,next:null},tn===null?Tt.memoizedState=tn=s:tn=tn.next=s}return tn}function Lc(s,a){return typeof a=="function"?a(s):a}function Ym(s){var a=jr(),u=a.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=s;var p=Gt,v=p.baseQueue,b=u.pending;if(b!==null){if(v!==null){var R=v.next;v.next=b.next,b.next=R}p.baseQueue=v=b,u.pending=null}if(v!==null){b=v.next,p=p.baseState;var B=R=null,W=null,J=b;do{var le=J.lane;if((Go&le)===le)W!==null&&(W=W.next={lane:0,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),p=J.hasEagerState?J.eagerState:s(p,J.action);else{var de={lane:le,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null};W===null?(B=W=de,R=p):W=W.next=de,Tt.lanes|=le,Qo|=le}J=J.next}while(J!==null&&J!==b);W===null?R=p:W.next=B,Kr(p,a.memoizedState)||($n=!0),a.memoizedState=p,a.baseState=R,a.baseQueue=W,u.lastRenderedState=p}if(s=u.interleaved,s!==null){v=s;do b=v.lane,Tt.lanes|=b,Qo|=b,v=v.next;while(v!==s)}else v===null&&(u.lanes=0);return[a.memoizedState,u.dispatch]}function Xm(s){var a=jr(),u=a.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=s;var p=u.dispatch,v=u.pending,b=a.memoizedState;if(v!==null){u.pending=null;var R=v=v.next;do b=s(b,R.action),R=R.next;while(R!==v);Kr(b,a.memoizedState)||($n=!0),a.memoizedState=b,a.baseQueue===null&&(a.baseState=b),u.lastRenderedState=b}return[b,p]}function px(){}function gx(s,a){var u=Tt,p=jr(),v=a(),b=!Kr(p.memoizedState,v);if(b&&(p.memoizedState=v,$n=!0),p=p.queue,Jm(xx.bind(null,u,p,s),[s]),p.getSnapshot!==a||b||tn!==null&&tn.memoizedState.tag&1){if(u.flags|=2048,Oc(9,vx.bind(null,u,p,v,a),void 0,null),nn===null)throw Error(n(349));(Go&30)!==0||yx(u,a,v)}return v}function yx(s,a,u){s.flags|=16384,s={getSnapshot:a,value:u},a=Tt.updateQueue,a===null?(a={lastEffect:null,stores:null},Tt.updateQueue=a,a.stores=[s]):(u=a.stores,u===null?a.stores=[s]:u.push(s))}function vx(s,a,u,p){a.value=u,a.getSnapshot=p,bx(a)&&kx(s)}function xx(s,a,u){return u(function(){bx(a)&&kx(s)})}function bx(s){var a=s.getSnapshot;s=s.value;try{var u=a();return!Kr(s,u)}catch{return!0}}function kx(s){var a=es(s,1);a!==null&&Xr(a,s,1,-1)}function wx(s){var a=Ri();return typeof s=="function"&&(s=s()),a.memoizedState=a.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Lc,lastRenderedState:s},a.queue=s,s=s.dispatch=lT.bind(null,Tt,s),[a.memoizedState,s]}function Oc(s,a,u,p){return s={tag:s,create:a,destroy:u,deps:p,next:null},a=Tt.updateQueue,a===null?(a={lastEffect:null,stores:null},Tt.updateQueue=a,a.lastEffect=s.next=s):(u=a.lastEffect,u===null?a.lastEffect=s.next=s:(p=u.next,u.next=s,s.next=p,a.lastEffect=s)),s}function Sx(){return jr().memoizedState}function Ud(s,a,u,p){var v=Ri();Tt.flags|=s,v.memoizedState=Oc(1|a,u,void 0,p===void 0?null:p)}function Wd(s,a,u,p){var v=jr();p=p===void 0?null:p;var b=void 0;if(Gt!==null){var R=Gt.memoizedState;if(b=R.destroy,p!==null&&qm(p,R.deps)){v.memoizedState=Oc(a,u,b,p);return}}Tt.flags|=s,v.memoizedState=Oc(1|a,u,b,p)}function _x(s,a){return Ud(8390656,8,s,a)}function Jm(s,a){return Wd(2048,8,s,a)}function jx(s,a){return Wd(4,2,s,a)}function Ex(s,a){return Wd(4,4,s,a)}function Tx(s,a){if(typeof a=="function")return s=s(),a(s),function(){a(null)};if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function Cx(s,a,u){return u=u!=null?u.concat([s]):null,Wd(4,4,Tx.bind(null,a,s),u)}function Zm(){}function Ix(s,a){var u=jr();a=a===void 0?null:a;var p=u.memoizedState;return p!==null&&a!==null&&qm(a,p[1])?p[0]:(u.memoizedState=[s,a],s)}function Ax(s,a){var u=jr();a=a===void 0?null:a;var p=u.memoizedState;return p!==null&&a!==null&&qm(a,p[1])?p[0]:(s=s(),u.memoizedState=[s,a],s)}function Rx(s,a,u){return(Go&21)===0?(s.baseState&&(s.baseState=!1,$n=!0),s.memoizedState=u):(Kr(u,a)||(u=uc(),Tt.lanes|=u,Qo|=u,s.baseState=!0),a)}function oT(s,a){var u=Je;Je=u!==0&&4>u?u:4,s(!0);var p=Km.transition;Km.transition={};try{s(!1),a()}finally{Je=u,Km.transition=p}}function Px(){return jr().memoizedState}function aT(s,a,u){var p=Gs(s);if(u={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null},Dx(s))Nx(a,u);else if(u=ux(s,a,u,p),u!==null){var v=Nn();Xr(u,s,p,v),Mx(u,a,p)}}function lT(s,a,u){var p=Gs(s),v={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null};if(Dx(s))Nx(a,v);else{var b=s.alternate;if(s.lanes===0&&(b===null||b.lanes===0)&&(b=a.lastRenderedReducer,b!==null))try{var R=a.lastRenderedState,B=b(R,u);if(v.hasEagerState=!0,v.eagerState=B,Kr(B,R)){var W=a.interleaved;W===null?(v.next=v,zm(a)):(v.next=W.next,W.next=v),a.interleaved=v;return}}catch{}finally{}u=ux(s,a,v,p),u!==null&&(v=Nn(),Xr(u,s,p,v),Mx(u,a,p))}}function Dx(s){var a=s.alternate;return s===Tt||a!==null&&a===Tt}function Nx(s,a){Mc=Fd=!0;var u=s.pending;u===null?a.next=a:(a.next=u.next,u.next=a),s.pending=a}function Mx(s,a,u){if((u&4194240)!==0){var p=a.lanes;p&=s.pendingLanes,u|=p,a.lanes=u,hc(s,u)}}var $d={readContext:_r,useCallback:_n,useContext:_n,useEffect:_n,useImperativeHandle:_n,useInsertionEffect:_n,useLayoutEffect:_n,useMemo:_n,useReducer:_n,useRef:_n,useState:_n,useDebugValue:_n,useDeferredValue:_n,useTransition:_n,useMutableSource:_n,useSyncExternalStore:_n,useId:_n,unstable_isNewReconciler:!1},cT={readContext:_r,useCallback:function(s,a){return Ri().memoizedState=[s,a===void 0?null:a],s},useContext:_r,useEffect:_x,useImperativeHandle:function(s,a,u){return u=u!=null?u.concat([s]):null,Ud(4194308,4,Tx.bind(null,a,s),u)},useLayoutEffect:function(s,a){return Ud(4194308,4,s,a)},useInsertionEffect:function(s,a){return Ud(4,2,s,a)},useMemo:function(s,a){var u=Ri();return a=a===void 0?null:a,s=s(),u.memoizedState=[s,a],s},useReducer:function(s,a,u){var p=Ri();return a=u!==void 0?u(a):a,p.memoizedState=p.baseState=a,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:a},p.queue=s,s=s.dispatch=aT.bind(null,Tt,s),[p.memoizedState,s]},useRef:function(s){var a=Ri();return s={current:s},a.memoizedState=s},useState:wx,useDebugValue:Zm,useDeferredValue:function(s){return Ri().memoizedState=s},useTransition:function(){var s=wx(!1),a=s[0];return s=oT.bind(null,s[1]),Ri().memoizedState=s,[a,s]},useMutableSource:function(){},useSyncExternalStore:function(s,a,u){var p=Tt,v=Ri();if(_t){if(u===void 0)throw Error(n(407));u=u()}else{if(u=a(),nn===null)throw Error(n(349));(Go&30)!==0||yx(p,a,u)}v.memoizedState=u;var b={value:u,getSnapshot:a};return v.queue=b,_x(xx.bind(null,p,b,s),[s]),p.flags|=2048,Oc(9,vx.bind(null,p,b,u,a),void 0,null),u},useId:function(){var s=Ri(),a=nn.identifierPrefix;if(_t){var u=Zi,p=Ji;u=(p&~(1<<32-er(p)-1)).toString(32)+u,a=":"+a+"R"+u,u=Vc++,0<u&&(a+="H"+u.toString(32)),a+=":"}else u=sT++,a=":"+a+"r"+u.toString(32)+":";return s.memoizedState=a},unstable_isNewReconciler:!1},uT={readContext:_r,useCallback:Ix,useContext:_r,useEffect:Jm,useImperativeHandle:Cx,useInsertionEffect:jx,useLayoutEffect:Ex,useMemo:Ax,useReducer:Ym,useRef:Sx,useState:function(){return Ym(Lc)},useDebugValue:Zm,useDeferredValue:function(s){var a=jr();return Rx(a,Gt.memoizedState,s)},useTransition:function(){var s=Ym(Lc)[0],a=jr().memoizedState;return[s,a]},useMutableSource:px,useSyncExternalStore:gx,useId:Px,unstable_isNewReconciler:!1},dT={readContext:_r,useCallback:Ix,useContext:_r,useEffect:Jm,useImperativeHandle:Cx,useInsertionEffect:jx,useLayoutEffect:Ex,useMemo:Ax,useReducer:Xm,useRef:Sx,useState:function(){return Xm(Lc)},useDebugValue:Zm,useDeferredValue:function(s){var a=jr();return Gt===null?a.memoizedState=s:Rx(a,Gt.memoizedState,s)},useTransition:function(){var s=Xm(Lc)[0],a=jr().memoizedState;return[s,a]},useMutableSource:px,useSyncExternalStore:gx,useId:Px,unstable_isNewReconciler:!1};function Gr(s,a){if(s&&s.defaultProps){a=ue({},a),s=s.defaultProps;for(var u in s)a[u]===void 0&&(a[u]=s[u]);return a}return a}function ep(s,a,u,p){a=s.memoizedState,u=u(p,a),u=u==null?a:ue({},a,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var Hd={isMounted:function(s){return(s=s._reactInternals)?$r(s)===s:!1},enqueueSetState:function(s,a,u){s=s._reactInternals;var p=Nn(),v=Gs(s),b=ts(p,v);b.payload=a,u!=null&&(b.callback=u),a=$s(s,b,v),a!==null&&(Xr(a,s,v,p),Ld(a,s,v))},enqueueReplaceState:function(s,a,u){s=s._reactInternals;var p=Nn(),v=Gs(s),b=ts(p,v);b.tag=1,b.payload=a,u!=null&&(b.callback=u),a=$s(s,b,v),a!==null&&(Xr(a,s,v,p),Ld(a,s,v))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var u=Nn(),p=Gs(s),v=ts(u,p);v.tag=2,a!=null&&(v.callback=a),a=$s(s,v,p),a!==null&&(Xr(a,s,p,u),Ld(a,s,p))}};function Vx(s,a,u,p,v,b,R){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(p,b,R):a.prototype&&a.prototype.isPureReactComponent?!_c(u,p)||!_c(v,b):!0}function Lx(s,a,u){var p=!1,v=Fs,b=a.contextType;return typeof b=="object"&&b!==null?b=_r(b):(v=Wn(a)?Wo:Sn.current,p=a.contextTypes,b=(p=p!=null)?Ga(s,v):Fs),a=new a(u,b),s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Hd,s.stateNode=a,a._reactInternals=s,p&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=v,s.__reactInternalMemoizedMaskedChildContext=b),a}function Ox(s,a,u,p){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,p),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,p),a.state!==s&&Hd.enqueueReplaceState(a,a.state,null)}function tp(s,a,u,p){var v=s.stateNode;v.props=u,v.state=s.memoizedState,v.refs={},Fm(s);var b=a.contextType;typeof b=="object"&&b!==null?v.context=_r(b):(b=Wn(a)?Wo:Sn.current,v.context=Ga(s,b)),v.state=s.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&(ep(s,a,b,u),v.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(a=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),a!==v.state&&Hd.enqueueReplaceState(v,v.state,null),Od(s,u,v,p),v.state=s.memoizedState),typeof v.componentDidMount=="function"&&(s.flags|=4194308)}function nl(s,a){try{var u="",p=a;do u+=Le(p),p=p.return;while(p);var v=u}catch(b){v=`
Error generating stack: `+b.message+`
`+b.stack}return{value:s,source:a,stack:v,digest:null}}function np(s,a,u){return{value:s,source:null,stack:u??null,digest:a??null}}function rp(s,a){try{console.error(a.value)}catch(u){setTimeout(function(){throw u})}}var hT=typeof WeakMap=="function"?WeakMap:Map;function Bx(s,a,u){u=ts(-1,u),u.tag=3,u.payload={element:null};var p=a.value;return u.callback=function(){Jd||(Jd=!0,vp=p),rp(s,a)},u}function zx(s,a,u){u=ts(-1,u),u.tag=3;var p=s.type.getDerivedStateFromError;if(typeof p=="function"){var v=a.value;u.payload=function(){return p(v)},u.callback=function(){rp(s,a)}}var b=s.stateNode;return b!==null&&typeof b.componentDidCatch=="function"&&(u.callback=function(){rp(s,a),typeof p!="function"&&(Ks===null?Ks=new Set([this]):Ks.add(this));var R=a.stack;this.componentDidCatch(a.value,{componentStack:R!==null?R:""})}),u}function Fx(s,a,u){var p=s.pingCache;if(p===null){p=s.pingCache=new hT;var v=new Set;p.set(a,v)}else v=p.get(a),v===void 0&&(v=new Set,p.set(a,v));v.has(u)||(v.add(u),s=ET.bind(null,s,a,u),a.then(s,s))}function Ux(s){do{var a;if((a=s.tag===13)&&(a=s.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return s;s=s.return}while(s!==null);return null}function Wx(s,a,u,p,v){return(s.mode&1)===0?(s===a?s.flags|=65536:(s.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(a=ts(-1,1),a.tag=2,$s(u,a,1))),u.lanes|=1),s):(s.flags|=65536,s.lanes=v,s)}var fT=F.ReactCurrentOwner,$n=!1;function Dn(s,a,u,p){a.child=s===null?cx(a,null,u,p):Ja(a,s.child,u,p)}function $x(s,a,u,p,v){u=u.render;var b=a.ref;return el(a,v),p=Gm(s,a,u,p,b,v),u=Qm(),s!==null&&!$n?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~v,ns(s,a,v)):(_t&&u&&Rm(a),a.flags|=1,Dn(s,a,p,v),a.child)}function Hx(s,a,u,p,v){if(s===null){var b=u.type;return typeof b=="function"&&!jp(b)&&b.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(a.tag=15,a.type=b,Kx(s,a,b,p,v)):(s=ih(u.type,null,p,a,a.mode,v),s.ref=a.ref,s.return=a,a.child=s)}if(b=s.child,(s.lanes&v)===0){var R=b.memoizedProps;if(u=u.compare,u=u!==null?u:_c,u(R,p)&&s.ref===a.ref)return ns(s,a,v)}return a.flags|=1,s=Ys(b,p),s.ref=a.ref,s.return=a,a.child=s}function Kx(s,a,u,p,v){if(s!==null){var b=s.memoizedProps;if(_c(b,p)&&s.ref===a.ref)if($n=!1,a.pendingProps=p=b,(s.lanes&v)!==0)(s.flags&131072)!==0&&($n=!0);else return a.lanes=s.lanes,ns(s,a,v)}return ip(s,a,u,p,v)}function qx(s,a,u){var p=a.pendingProps,v=p.children,b=s!==null?s.memoizedState:null;if(p.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},mt(il,ar),ar|=u;else{if((u&1073741824)===0)return s=b!==null?b.baseLanes|u:u,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:s,cachePool:null,transitions:null},a.updateQueue=null,mt(il,ar),ar|=s,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=b!==null?b.baseLanes:u,mt(il,ar),ar|=p}else b!==null?(p=b.baseLanes|u,a.memoizedState=null):p=u,mt(il,ar),ar|=p;return Dn(s,a,v,u),a.child}function Gx(s,a){var u=a.ref;(s===null&&u!==null||s!==null&&s.ref!==u)&&(a.flags|=512,a.flags|=2097152)}function ip(s,a,u,p,v){var b=Wn(u)?Wo:Sn.current;return b=Ga(a,b),el(a,v),u=Gm(s,a,u,p,b,v),p=Qm(),s!==null&&!$n?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~v,ns(s,a,v)):(_t&&p&&Rm(a),a.flags|=1,Dn(s,a,u,v),a.child)}function Qx(s,a,u,p,v){if(Wn(u)){var b=!0;Id(a)}else b=!1;if(el(a,v),a.stateNode===null)qd(s,a),Lx(a,u,p),tp(a,u,p,v),p=!0;else if(s===null){var R=a.stateNode,B=a.memoizedProps;R.props=B;var W=R.context,J=u.contextType;typeof J=="object"&&J!==null?J=_r(J):(J=Wn(u)?Wo:Sn.current,J=Ga(a,J));var le=u.getDerivedStateFromProps,de=typeof le=="function"||typeof R.getSnapshotBeforeUpdate=="function";de||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(B!==p||W!==J)&&Ox(a,R,p,J),Ws=!1;var ae=a.memoizedState;R.state=ae,Od(a,p,R,v),W=a.memoizedState,B!==p||ae!==W||Un.current||Ws?(typeof le=="function"&&(ep(a,u,le,p),W=a.memoizedState),(B=Ws||Vx(a,u,B,p,ae,W,J))?(de||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount()),typeof R.componentDidMount=="function"&&(a.flags|=4194308)):(typeof R.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=p,a.memoizedState=W),R.props=p,R.state=W,R.context=J,p=B):(typeof R.componentDidMount=="function"&&(a.flags|=4194308),p=!1)}else{R=a.stateNode,dx(s,a),B=a.memoizedProps,J=a.type===a.elementType?B:Gr(a.type,B),R.props=J,de=a.pendingProps,ae=R.context,W=u.contextType,typeof W=="object"&&W!==null?W=_r(W):(W=Wn(u)?Wo:Sn.current,W=Ga(a,W));var xe=u.getDerivedStateFromProps;(le=typeof xe=="function"||typeof R.getSnapshotBeforeUpdate=="function")||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(B!==de||ae!==W)&&Ox(a,R,p,W),Ws=!1,ae=a.memoizedState,R.state=ae,Od(a,p,R,v);var _e=a.memoizedState;B!==de||ae!==_e||Un.current||Ws?(typeof xe=="function"&&(ep(a,u,xe,p),_e=a.memoizedState),(J=Ws||Vx(a,u,J,p,ae,_e,W)||!1)?(le||typeof R.UNSAFE_componentWillUpdate!="function"&&typeof R.componentWillUpdate!="function"||(typeof R.componentWillUpdate=="function"&&R.componentWillUpdate(p,_e,W),typeof R.UNSAFE_componentWillUpdate=="function"&&R.UNSAFE_componentWillUpdate(p,_e,W)),typeof R.componentDidUpdate=="function"&&(a.flags|=4),typeof R.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof R.componentDidUpdate!="function"||B===s.memoizedProps&&ae===s.memoizedState||(a.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||B===s.memoizedProps&&ae===s.memoizedState||(a.flags|=1024),a.memoizedProps=p,a.memoizedState=_e),R.props=p,R.state=_e,R.context=W,p=J):(typeof R.componentDidUpdate!="function"||B===s.memoizedProps&&ae===s.memoizedState||(a.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||B===s.memoizedProps&&ae===s.memoizedState||(a.flags|=1024),p=!1)}return sp(s,a,u,p,b,v)}function sp(s,a,u,p,v,b){Gx(s,a);var R=(a.flags&128)!==0;if(!p&&!R)return v&&ex(a,u,!1),ns(s,a,b);p=a.stateNode,fT.current=a;var B=R&&typeof u.getDerivedStateFromError!="function"?null:p.render();return a.flags|=1,s!==null&&R?(a.child=Ja(a,s.child,null,b),a.child=Ja(a,null,B,b)):Dn(s,a,B,b),a.memoizedState=p.state,v&&ex(a,u,!0),a.child}function Yx(s){var a=s.stateNode;a.pendingContext?Jv(s,a.pendingContext,a.pendingContext!==a.context):a.context&&Jv(s,a.context,!1),Um(s,a.containerInfo)}function Xx(s,a,u,p,v){return Xa(),Mm(v),a.flags|=256,Dn(s,a,u,p),a.child}var op={dehydrated:null,treeContext:null,retryLane:0};function ap(s){return{baseLanes:s,cachePool:null,transitions:null}}function Jx(s,a,u){var p=a.pendingProps,v=Et.current,b=!1,R=(a.flags&128)!==0,B;if((B=R)||(B=s!==null&&s.memoizedState===null?!1:(v&2)!==0),B?(b=!0,a.flags&=-129):(s===null||s.memoizedState!==null)&&(v|=1),mt(Et,v&1),s===null)return Nm(a),s=a.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((a.mode&1)===0?a.lanes=1:s.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(R=p.children,s=p.fallback,b?(p=a.mode,b=a.child,R={mode:"hidden",children:R},(p&1)===0&&b!==null?(b.childLanes=0,b.pendingProps=R):b=sh(R,p,0,null),s=Zo(s,p,u,null),b.return=a,s.return=a,b.sibling=s,a.child=b,a.child.memoizedState=ap(u),a.memoizedState=op,s):lp(a,R));if(v=s.memoizedState,v!==null&&(B=v.dehydrated,B!==null))return mT(s,a,R,p,B,v,u);if(b){b=p.fallback,R=a.mode,v=s.child,B=v.sibling;var W={mode:"hidden",children:p.children};return(R&1)===0&&a.child!==v?(p=a.child,p.childLanes=0,p.pendingProps=W,a.deletions=null):(p=Ys(v,W),p.subtreeFlags=v.subtreeFlags&14680064),B!==null?b=Ys(B,b):(b=Zo(b,R,u,null),b.flags|=2),b.return=a,p.return=a,p.sibling=b,a.child=p,p=b,b=a.child,R=s.child.memoizedState,R=R===null?ap(u):{baseLanes:R.baseLanes|u,cachePool:null,transitions:R.transitions},b.memoizedState=R,b.childLanes=s.childLanes&~u,a.memoizedState=op,p}return b=s.child,s=b.sibling,p=Ys(b,{mode:"visible",children:p.children}),(a.mode&1)===0&&(p.lanes=u),p.return=a,p.sibling=null,s!==null&&(u=a.deletions,u===null?(a.deletions=[s],a.flags|=16):u.push(s)),a.child=p,a.memoizedState=null,p}function lp(s,a){return a=sh({mode:"visible",children:a},s.mode,0,null),a.return=s,s.child=a}function Kd(s,a,u,p){return p!==null&&Mm(p),Ja(a,s.child,null,u),s=lp(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function mT(s,a,u,p,v,b,R){if(u)return a.flags&256?(a.flags&=-257,p=np(Error(n(422))),Kd(s,a,R,p)):a.memoizedState!==null?(a.child=s.child,a.flags|=128,null):(b=p.fallback,v=a.mode,p=sh({mode:"visible",children:p.children},v,0,null),b=Zo(b,v,R,null),b.flags|=2,p.return=a,b.return=a,p.sibling=b,a.child=p,(a.mode&1)!==0&&Ja(a,s.child,null,R),a.child.memoizedState=ap(R),a.memoizedState=op,b);if((a.mode&1)===0)return Kd(s,a,R,null);if(v.data==="$!"){if(p=v.nextSibling&&v.nextSibling.dataset,p)var B=p.dgst;return p=B,b=Error(n(419)),p=np(b,p,void 0),Kd(s,a,R,p)}if(B=(R&s.childLanes)!==0,$n||B){if(p=nn,p!==null){switch(R&-R){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=(v&(p.suspendedLanes|R))!==0?0:v,v!==0&&v!==b.retryLane&&(b.retryLane=v,es(s,v),Xr(p,s,v,-1))}return _p(),p=np(Error(n(421))),Kd(s,a,R,p)}return v.data==="$?"?(a.flags|=128,a.child=s.child,a=TT.bind(null,s),v._reactRetry=a,null):(s=b.treeContext,or=Bs(v.nextSibling),sr=a,_t=!0,qr=null,s!==null&&(wr[Sr++]=Ji,wr[Sr++]=Zi,wr[Sr++]=$o,Ji=s.id,Zi=s.overflow,$o=a),a=lp(a,p.children),a.flags|=4096,a)}function Zx(s,a,u){s.lanes|=a;var p=s.alternate;p!==null&&(p.lanes|=a),Bm(s.return,a,u)}function cp(s,a,u,p,v){var b=s.memoizedState;b===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:p,tail:u,tailMode:v}:(b.isBackwards=a,b.rendering=null,b.renderingStartTime=0,b.last=p,b.tail=u,b.tailMode=v)}function e1(s,a,u){var p=a.pendingProps,v=p.revealOrder,b=p.tail;if(Dn(s,a,p.children,u),p=Et.current,(p&2)!==0)p=p&1|2,a.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Zx(s,u,a);else if(s.tag===19)Zx(s,u,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}p&=1}if(mt(Et,p),(a.mode&1)===0)a.memoizedState=null;else switch(v){case"forwards":for(u=a.child,v=null;u!==null;)s=u.alternate,s!==null&&Bd(s)===null&&(v=u),u=u.sibling;u=v,u===null?(v=a.child,a.child=null):(v=u.sibling,u.sibling=null),cp(a,!1,v,u,b);break;case"backwards":for(u=null,v=a.child,a.child=null;v!==null;){if(s=v.alternate,s!==null&&Bd(s)===null){a.child=v;break}s=v.sibling,v.sibling=u,u=v,v=s}cp(a,!0,u,null,b);break;case"together":cp(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function qd(s,a){(a.mode&1)===0&&s!==null&&(s.alternate=null,a.alternate=null,a.flags|=2)}function ns(s,a,u){if(s!==null&&(a.dependencies=s.dependencies),Qo|=a.lanes,(u&a.childLanes)===0)return null;if(s!==null&&a.child!==s.child)throw Error(n(153));if(a.child!==null){for(s=a.child,u=Ys(s,s.pendingProps),a.child=u,u.return=a;s.sibling!==null;)s=s.sibling,u=u.sibling=Ys(s,s.pendingProps),u.return=a;u.sibling=null}return a.child}function pT(s,a,u){switch(a.tag){case 3:Yx(a),Xa();break;case 5:mx(a);break;case 1:Wn(a.type)&&Id(a);break;case 4:Um(a,a.stateNode.containerInfo);break;case 10:var p=a.type._context,v=a.memoizedProps.value;mt(Md,p._currentValue),p._currentValue=v;break;case 13:if(p=a.memoizedState,p!==null)return p.dehydrated!==null?(mt(Et,Et.current&1),a.flags|=128,null):(u&a.child.childLanes)!==0?Jx(s,a,u):(mt(Et,Et.current&1),s=ns(s,a,u),s!==null?s.sibling:null);mt(Et,Et.current&1);break;case 19:if(p=(u&a.childLanes)!==0,(s.flags&128)!==0){if(p)return e1(s,a,u);a.flags|=128}if(v=a.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),mt(Et,Et.current),p)break;return null;case 22:case 23:return a.lanes=0,qx(s,a,u)}return ns(s,a,u)}var t1,up,n1,r1;t1=function(s,a){for(var u=a.child;u!==null;){if(u.tag===5||u.tag===6)s.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},up=function(){},n1=function(s,a,u,p){var v=s.memoizedProps;if(v!==p){s=a.stateNode,qo(Ai.current);var b=null;switch(u){case"input":v=dn(s,v),p=dn(s,p),b=[];break;case"select":v=ue({},v,{value:void 0}),p=ue({},p,{value:void 0}),b=[];break;case"textarea":v=Es(s,v),p=Es(s,p),b=[];break;default:typeof v.onClick!="function"&&typeof p.onClick=="function"&&(s.onclick=Ed)}Jn(u,p);var R;u=null;for(J in v)if(!p.hasOwnProperty(J)&&v.hasOwnProperty(J)&&v[J]!=null)if(J==="style"){var B=v[J];for(R in B)B.hasOwnProperty(R)&&(u||(u={}),u[R]="")}else J!=="dangerouslySetInnerHTML"&&J!=="children"&&J!=="suppressContentEditableWarning"&&J!=="suppressHydrationWarning"&&J!=="autoFocus"&&(o.hasOwnProperty(J)?b||(b=[]):(b=b||[]).push(J,null));for(J in p){var W=p[J];if(B=v!=null?v[J]:void 0,p.hasOwnProperty(J)&&W!==B&&(W!=null||B!=null))if(J==="style")if(B){for(R in B)!B.hasOwnProperty(R)||W&&W.hasOwnProperty(R)||(u||(u={}),u[R]="");for(R in W)W.hasOwnProperty(R)&&B[R]!==W[R]&&(u||(u={}),u[R]=W[R])}else u||(b||(b=[]),b.push(J,u)),u=W;else J==="dangerouslySetInnerHTML"?(W=W?W.__html:void 0,B=B?B.__html:void 0,W!=null&&B!==W&&(b=b||[]).push(J,W)):J==="children"?typeof W!="string"&&typeof W!="number"||(b=b||[]).push(J,""+W):J!=="suppressContentEditableWarning"&&J!=="suppressHydrationWarning"&&(o.hasOwnProperty(J)?(W!=null&&J==="onScroll"&&xt("scroll",s),b||B===W||(b=[])):(b=b||[]).push(J,W))}u&&(b=b||[]).push("style",u);var J=b;(a.updateQueue=J)&&(a.flags|=4)}},r1=function(s,a,u,p){u!==p&&(a.flags|=4)};function Bc(s,a){if(!_t)switch(s.tailMode){case"hidden":a=s.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:p.sibling=null}}function jn(s){var a=s.alternate!==null&&s.alternate.child===s.child,u=0,p=0;if(a)for(var v=s.child;v!==null;)u|=v.lanes|v.childLanes,p|=v.subtreeFlags&14680064,p|=v.flags&14680064,v.return=s,v=v.sibling;else for(v=s.child;v!==null;)u|=v.lanes|v.childLanes,p|=v.subtreeFlags,p|=v.flags,v.return=s,v=v.sibling;return s.subtreeFlags|=p,s.childLanes=u,a}function gT(s,a,u){var p=a.pendingProps;switch(Pm(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jn(a),null;case 1:return Wn(a.type)&&Cd(),jn(a),null;case 3:return p=a.stateNode,tl(),bt(Un),bt(Sn),Hm(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(s===null||s.child===null)&&(Dd(a)?a.flags|=4:s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,qr!==null&&(kp(qr),qr=null))),up(s,a),jn(a),null;case 5:Wm(a);var v=qo(Nc.current);if(u=a.type,s!==null&&a.stateNode!=null)n1(s,a,u,p,v),s.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!p){if(a.stateNode===null)throw Error(n(166));return jn(a),null}if(s=qo(Ai.current),Dd(a)){p=a.stateNode,u=a.type;var b=a.memoizedProps;switch(p[Ii]=a,p[Ic]=b,s=(a.mode&1)!==0,u){case"dialog":xt("cancel",p),xt("close",p);break;case"iframe":case"object":case"embed":xt("load",p);break;case"video":case"audio":for(v=0;v<Ec.length;v++)xt(Ec[v],p);break;case"source":xt("error",p);break;case"img":case"image":case"link":xt("error",p),xt("load",p);break;case"details":xt("toggle",p);break;case"input":bn(p,b),xt("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!b.multiple},xt("invalid",p);break;case"textarea":To(p,b),xt("invalid",p)}Jn(u,b),v=null;for(var R in b)if(b.hasOwnProperty(R)){var B=b[R];R==="children"?typeof B=="string"?p.textContent!==B&&(b.suppressHydrationWarning!==!0&&jd(p.textContent,B,s),v=["children",B]):typeof B=="number"&&p.textContent!==""+B&&(b.suppressHydrationWarning!==!0&&jd(p.textContent,B,s),v=["children",""+B]):o.hasOwnProperty(R)&&B!=null&&R==="onScroll"&&xt("scroll",p)}switch(u){case"input":gt(p),zn(p,b,!0);break;case"textarea":gt(p),vr(p);break;case"select":case"option":break;default:typeof b.onClick=="function"&&(p.onclick=Ed)}p=v,a.updateQueue=p,p!==null&&(a.flags|=4)}else{R=v.nodeType===9?v:v.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=zr(u)),s==="http://www.w3.org/1999/xhtml"?u==="script"?(s=R.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof p.is=="string"?s=R.createElement(u,{is:p.is}):(s=R.createElement(u),u==="select"&&(R=s,p.multiple?R.multiple=!0:p.size&&(R.size=p.size))):s=R.createElementNS(s,u),s[Ii]=a,s[Ic]=p,t1(s,a,!1,!1),a.stateNode=s;e:{switch(R=As(u,p),u){case"dialog":xt("cancel",s),xt("close",s),v=p;break;case"iframe":case"object":case"embed":xt("load",s),v=p;break;case"video":case"audio":for(v=0;v<Ec.length;v++)xt(Ec[v],s);v=p;break;case"source":xt("error",s),v=p;break;case"img":case"image":case"link":xt("error",s),xt("load",s),v=p;break;case"details":xt("toggle",s),v=p;break;case"input":bn(s,p),v=dn(s,p),xt("invalid",s);break;case"option":v=p;break;case"select":s._wrapperState={wasMultiple:!!p.multiple},v=ue({},p,{value:void 0}),xt("invalid",s);break;case"textarea":To(s,p),v=Es(s,p),xt("invalid",s);break;default:v=p}Jn(u,v),B=v;for(b in B)if(B.hasOwnProperty(b)){var W=B[b];b==="style"?Is(s,W):b==="dangerouslySetInnerHTML"?(W=W?W.__html:void 0,W!=null&&_a(s,W)):b==="children"?typeof W=="string"?(u!=="textarea"||W!=="")&&ui(s,W):typeof W=="number"&&ui(s,""+W):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(o.hasOwnProperty(b)?W!=null&&b==="onScroll"&&xt("scroll",s):W!=null&&M(s,b,W,R))}switch(u){case"input":gt(s),zn(s,p,!1);break;case"textarea":gt(s),vr(s);break;case"option":p.value!=null&&s.setAttribute("value",""+G(p.value));break;case"select":s.multiple=!!p.multiple,b=p.value,b!=null?Fn(s,!!p.multiple,b,!1):p.defaultValue!=null&&Fn(s,!!p.multiple,p.defaultValue,!0);break;default:typeof v.onClick=="function"&&(s.onclick=Ed)}switch(u){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return jn(a),null;case 6:if(s&&a.stateNode!=null)r1(s,a,s.memoizedProps,p);else{if(typeof p!="string"&&a.stateNode===null)throw Error(n(166));if(u=qo(Nc.current),qo(Ai.current),Dd(a)){if(p=a.stateNode,u=a.memoizedProps,p[Ii]=a,(b=p.nodeValue!==u)&&(s=sr,s!==null))switch(s.tag){case 3:jd(p.nodeValue,u,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&jd(p.nodeValue,u,(s.mode&1)!==0)}b&&(a.flags|=4)}else p=(u.nodeType===9?u:u.ownerDocument).createTextNode(p),p[Ii]=a,a.stateNode=p}return jn(a),null;case 13:if(bt(Et),p=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(_t&&or!==null&&(a.mode&1)!==0&&(a.flags&128)===0)ox(),Xa(),a.flags|=98560,b=!1;else if(b=Dd(a),p!==null&&p.dehydrated!==null){if(s===null){if(!b)throw Error(n(318));if(b=a.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(n(317));b[Ii]=a}else Xa(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;jn(a),b=!1}else qr!==null&&(kp(qr),qr=null),b=!0;if(!b)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=u,a):(p=p!==null,p!==(s!==null&&s.memoizedState!==null)&&p&&(a.child.flags|=8192,(a.mode&1)!==0&&(s===null||(Et.current&1)!==0?Qt===0&&(Qt=3):_p())),a.updateQueue!==null&&(a.flags|=4),jn(a),null);case 4:return tl(),up(s,a),s===null&&Tc(a.stateNode.containerInfo),jn(a),null;case 10:return Om(a.type._context),jn(a),null;case 17:return Wn(a.type)&&Cd(),jn(a),null;case 19:if(bt(Et),b=a.memoizedState,b===null)return jn(a),null;if(p=(a.flags&128)!==0,R=b.rendering,R===null)if(p)Bc(b,!1);else{if(Qt!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(R=Bd(s),R!==null){for(a.flags|=128,Bc(b,!1),p=R.updateQueue,p!==null&&(a.updateQueue=p,a.flags|=4),a.subtreeFlags=0,p=u,u=a.child;u!==null;)b=u,s=p,b.flags&=14680066,R=b.alternate,R===null?(b.childLanes=0,b.lanes=s,b.child=null,b.subtreeFlags=0,b.memoizedProps=null,b.memoizedState=null,b.updateQueue=null,b.dependencies=null,b.stateNode=null):(b.childLanes=R.childLanes,b.lanes=R.lanes,b.child=R.child,b.subtreeFlags=0,b.deletions=null,b.memoizedProps=R.memoizedProps,b.memoizedState=R.memoizedState,b.updateQueue=R.updateQueue,b.type=R.type,s=R.dependencies,b.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),u=u.sibling;return mt(Et,Et.current&1|2),a.child}s=s.sibling}b.tail!==null&&vt()>sl&&(a.flags|=128,p=!0,Bc(b,!1),a.lanes=4194304)}else{if(!p)if(s=Bd(R),s!==null){if(a.flags|=128,p=!0,u=s.updateQueue,u!==null&&(a.updateQueue=u,a.flags|=4),Bc(b,!0),b.tail===null&&b.tailMode==="hidden"&&!R.alternate&&!_t)return jn(a),null}else 2*vt()-b.renderingStartTime>sl&&u!==1073741824&&(a.flags|=128,p=!0,Bc(b,!1),a.lanes=4194304);b.isBackwards?(R.sibling=a.child,a.child=R):(u=b.last,u!==null?u.sibling=R:a.child=R,b.last=R)}return b.tail!==null?(a=b.tail,b.rendering=a,b.tail=a.sibling,b.renderingStartTime=vt(),a.sibling=null,u=Et.current,mt(Et,p?u&1|2:u&1),a):(jn(a),null);case 22:case 23:return Sp(),p=a.memoizedState!==null,s!==null&&s.memoizedState!==null!==p&&(a.flags|=8192),p&&(a.mode&1)!==0?(ar&1073741824)!==0&&(jn(a),a.subtreeFlags&6&&(a.flags|=8192)):jn(a),null;case 24:return null;case 25:return null}throw Error(n(156,a.tag))}function yT(s,a){switch(Pm(a),a.tag){case 1:return Wn(a.type)&&Cd(),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return tl(),bt(Un),bt(Sn),Hm(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 5:return Wm(a),null;case 13:if(bt(Et),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(n(340));Xa()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return bt(Et),null;case 4:return tl(),null;case 10:return Om(a.type._context),null;case 22:case 23:return Sp(),null;case 24:return null;default:return null}}var Gd=!1,En=!1,vT=typeof WeakSet=="function"?WeakSet:Set,we=null;function rl(s,a){var u=s.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(p){Rt(s,a,p)}else u.current=null}function dp(s,a,u){try{u()}catch(p){Rt(s,a,p)}}var i1=!1;function xT(s,a){if(Sm=qi,s=Vv(),pm(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var p=u.getSelection&&u.getSelection();if(p&&p.rangeCount!==0){u=p.anchorNode;var v=p.anchorOffset,b=p.focusNode;p=p.focusOffset;try{u.nodeType,b.nodeType}catch{u=null;break e}var R=0,B=-1,W=-1,J=0,le=0,de=s,ae=null;t:for(;;){for(var xe;de!==u||v!==0&&de.nodeType!==3||(B=R+v),de!==b||p!==0&&de.nodeType!==3||(W=R+p),de.nodeType===3&&(R+=de.nodeValue.length),(xe=de.firstChild)!==null;)ae=de,de=xe;for(;;){if(de===s)break t;if(ae===u&&++J===v&&(B=R),ae===b&&++le===p&&(W=R),(xe=de.nextSibling)!==null)break;de=ae,ae=de.parentNode}de=xe}u=B===-1||W===-1?null:{start:B,end:W}}else u=null}u=u||{start:0,end:0}}else u=null;for(_m={focusedElem:s,selectionRange:u},qi=!1,we=a;we!==null;)if(a=we,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,we=s;else for(;we!==null;){a=we;try{var _e=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(_e!==null){var je=_e.memoizedProps,Lt=_e.memoizedState,Q=a.stateNode,H=Q.getSnapshotBeforeUpdate(a.elementType===a.type?je:Gr(a.type,je),Lt);Q.__reactInternalSnapshotBeforeUpdate=H}break;case 3:var X=a.stateNode.containerInfo;X.nodeType===1?X.textContent="":X.nodeType===9&&X.documentElement&&X.removeChild(X.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(he){Rt(a,a.return,he)}if(s=a.sibling,s!==null){s.return=a.return,we=s;break}we=a.return}return _e=i1,i1=!1,_e}function zc(s,a,u){var p=a.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var v=p=p.next;do{if((v.tag&s)===s){var b=v.destroy;v.destroy=void 0,b!==void 0&&dp(a,u,b)}v=v.next}while(v!==p)}}function Qd(s,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var u=a=a.next;do{if((u.tag&s)===s){var p=u.create;u.destroy=p()}u=u.next}while(u!==a)}}function hp(s){var a=s.ref;if(a!==null){var u=s.stateNode;switch(s.tag){case 5:s=u;break;default:s=u}typeof a=="function"?a(s):a.current=s}}function s1(s){var a=s.alternate;a!==null&&(s.alternate=null,s1(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&(delete a[Ii],delete a[Ic],delete a[Cm],delete a[tT],delete a[nT])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function o1(s){return s.tag===5||s.tag===3||s.tag===4}function a1(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||o1(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function fp(s,a,u){var p=s.tag;if(p===5||p===6)s=s.stateNode,a?u.nodeType===8?u.parentNode.insertBefore(s,a):u.insertBefore(s,a):(u.nodeType===8?(a=u.parentNode,a.insertBefore(s,u)):(a=u,a.appendChild(s)),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=Ed));else if(p!==4&&(s=s.child,s!==null))for(fp(s,a,u),s=s.sibling;s!==null;)fp(s,a,u),s=s.sibling}function mp(s,a,u){var p=s.tag;if(p===5||p===6)s=s.stateNode,a?u.insertBefore(s,a):u.appendChild(s);else if(p!==4&&(s=s.child,s!==null))for(mp(s,a,u),s=s.sibling;s!==null;)mp(s,a,u),s=s.sibling}var mn=null,Qr=!1;function Hs(s,a,u){for(u=u.child;u!==null;)l1(s,a,u),u=u.sibling}function l1(s,a,u){if(Zn&&typeof Zn.onCommitFiberUnmount=="function")try{Zn.onCommitFiberUnmount(Do,u)}catch{}switch(u.tag){case 5:En||rl(u,a);case 6:var p=mn,v=Qr;mn=null,Hs(s,a,u),mn=p,Qr=v,mn!==null&&(Qr?(s=mn,u=u.stateNode,s.nodeType===8?s.parentNode.removeChild(u):s.removeChild(u)):mn.removeChild(u.stateNode));break;case 18:mn!==null&&(Qr?(s=mn,u=u.stateNode,s.nodeType===8?Tm(s.parentNode,u):s.nodeType===1&&Tm(s,u),Ms(s)):Tm(mn,u.stateNode));break;case 4:p=mn,v=Qr,mn=u.stateNode.containerInfo,Qr=!0,Hs(s,a,u),mn=p,Qr=v;break;case 0:case 11:case 14:case 15:if(!En&&(p=u.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){v=p=p.next;do{var b=v,R=b.destroy;b=b.tag,R!==void 0&&((b&2)!==0||(b&4)!==0)&&dp(u,a,R),v=v.next}while(v!==p)}Hs(s,a,u);break;case 1:if(!En&&(rl(u,a),p=u.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=u.memoizedProps,p.state=u.memoizedState,p.componentWillUnmount()}catch(B){Rt(u,a,B)}Hs(s,a,u);break;case 21:Hs(s,a,u);break;case 22:u.mode&1?(En=(p=En)||u.memoizedState!==null,Hs(s,a,u),En=p):Hs(s,a,u);break;default:Hs(s,a,u)}}function c1(s){var a=s.updateQueue;if(a!==null){s.updateQueue=null;var u=s.stateNode;u===null&&(u=s.stateNode=new vT),a.forEach(function(p){var v=CT.bind(null,s,p);u.has(p)||(u.add(p),p.then(v,v))})}}function Yr(s,a){var u=a.deletions;if(u!==null)for(var p=0;p<u.length;p++){var v=u[p];try{var b=s,R=a,B=R;e:for(;B!==null;){switch(B.tag){case 5:mn=B.stateNode,Qr=!1;break e;case 3:mn=B.stateNode.containerInfo,Qr=!0;break e;case 4:mn=B.stateNode.containerInfo,Qr=!0;break e}B=B.return}if(mn===null)throw Error(n(160));l1(b,R,v),mn=null,Qr=!1;var W=v.alternate;W!==null&&(W.return=null),v.return=null}catch(J){Rt(v,a,J)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)u1(a,s),a=a.sibling}function u1(s,a){var u=s.alternate,p=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Yr(a,s),Pi(s),p&4){try{zc(3,s,s.return),Qd(3,s)}catch(je){Rt(s,s.return,je)}try{zc(5,s,s.return)}catch(je){Rt(s,s.return,je)}}break;case 1:Yr(a,s),Pi(s),p&512&&u!==null&&rl(u,u.return);break;case 5:if(Yr(a,s),Pi(s),p&512&&u!==null&&rl(u,u.return),s.flags&32){var v=s.stateNode;try{ui(v,"")}catch(je){Rt(s,s.return,je)}}if(p&4&&(v=s.stateNode,v!=null)){var b=s.memoizedProps,R=u!==null?u.memoizedProps:b,B=s.type,W=s.updateQueue;if(s.updateQueue=null,W!==null)try{B==="input"&&b.type==="radio"&&b.name!=null&&Pn(v,b),As(B,R);var J=As(B,b);for(R=0;R<W.length;R+=2){var le=W[R],de=W[R+1];le==="style"?Is(v,de):le==="dangerouslySetInnerHTML"?_a(v,de):le==="children"?ui(v,de):M(v,le,de,J)}switch(B){case"input":Bn(v,b);break;case"textarea":Ts(v,b);break;case"select":var ae=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!b.multiple;var xe=b.value;xe!=null?Fn(v,!!b.multiple,xe,!1):ae!==!!b.multiple&&(b.defaultValue!=null?Fn(v,!!b.multiple,b.defaultValue,!0):Fn(v,!!b.multiple,b.multiple?[]:"",!1))}v[Ic]=b}catch(je){Rt(s,s.return,je)}}break;case 6:if(Yr(a,s),Pi(s),p&4){if(s.stateNode===null)throw Error(n(162));v=s.stateNode,b=s.memoizedProps;try{v.nodeValue=b}catch(je){Rt(s,s.return,je)}}break;case 3:if(Yr(a,s),Pi(s),p&4&&u!==null&&u.memoizedState.isDehydrated)try{Ms(a.containerInfo)}catch(je){Rt(s,s.return,je)}break;case 4:Yr(a,s),Pi(s);break;case 13:Yr(a,s),Pi(s),v=s.child,v.flags&8192&&(b=v.memoizedState!==null,v.stateNode.isHidden=b,!b||v.alternate!==null&&v.alternate.memoizedState!==null||(yp=vt())),p&4&&c1(s);break;case 22:if(le=u!==null&&u.memoizedState!==null,s.mode&1?(En=(J=En)||le,Yr(a,s),En=J):Yr(a,s),Pi(s),p&8192){if(J=s.memoizedState!==null,(s.stateNode.isHidden=J)&&!le&&(s.mode&1)!==0)for(we=s,le=s.child;le!==null;){for(de=we=le;we!==null;){switch(ae=we,xe=ae.child,ae.tag){case 0:case 11:case 14:case 15:zc(4,ae,ae.return);break;case 1:rl(ae,ae.return);var _e=ae.stateNode;if(typeof _e.componentWillUnmount=="function"){p=ae,u=ae.return;try{a=p,_e.props=a.memoizedProps,_e.state=a.memoizedState,_e.componentWillUnmount()}catch(je){Rt(p,u,je)}}break;case 5:rl(ae,ae.return);break;case 22:if(ae.memoizedState!==null){f1(de);continue}}xe!==null?(xe.return=ae,we=xe):f1(de)}le=le.sibling}e:for(le=null,de=s;;){if(de.tag===5){if(le===null){le=de;try{v=de.stateNode,J?(b=v.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none"):(B=de.stateNode,W=de.memoizedProps.style,R=W!=null&&W.hasOwnProperty("display")?W.display:null,B.style.display=di("display",R))}catch(je){Rt(s,s.return,je)}}}else if(de.tag===6){if(le===null)try{de.stateNode.nodeValue=J?"":de.memoizedProps}catch(je){Rt(s,s.return,je)}}else if((de.tag!==22&&de.tag!==23||de.memoizedState===null||de===s)&&de.child!==null){de.child.return=de,de=de.child;continue}if(de===s)break e;for(;de.sibling===null;){if(de.return===null||de.return===s)break e;le===de&&(le=null),de=de.return}le===de&&(le=null),de.sibling.return=de.return,de=de.sibling}}break;case 19:Yr(a,s),Pi(s),p&4&&c1(s);break;case 21:break;default:Yr(a,s),Pi(s)}}function Pi(s){var a=s.flags;if(a&2){try{e:{for(var u=s.return;u!==null;){if(o1(u)){var p=u;break e}u=u.return}throw Error(n(160))}switch(p.tag){case 5:var v=p.stateNode;p.flags&32&&(ui(v,""),p.flags&=-33);var b=a1(s);mp(s,b,v);break;case 3:case 4:var R=p.stateNode.containerInfo,B=a1(s);fp(s,B,R);break;default:throw Error(n(161))}}catch(W){Rt(s,s.return,W)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function bT(s,a,u){we=s,d1(s)}function d1(s,a,u){for(var p=(s.mode&1)!==0;we!==null;){var v=we,b=v.child;if(v.tag===22&&p){var R=v.memoizedState!==null||Gd;if(!R){var B=v.alternate,W=B!==null&&B.memoizedState!==null||En;B=Gd;var J=En;if(Gd=R,(En=W)&&!J)for(we=v;we!==null;)R=we,W=R.child,R.tag===22&&R.memoizedState!==null?m1(v):W!==null?(W.return=R,we=W):m1(v);for(;b!==null;)we=b,d1(b),b=b.sibling;we=v,Gd=B,En=J}h1(s)}else(v.subtreeFlags&8772)!==0&&b!==null?(b.return=v,we=b):h1(s)}}function h1(s){for(;we!==null;){var a=we;if((a.flags&8772)!==0){var u=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:En||Qd(5,a);break;case 1:var p=a.stateNode;if(a.flags&4&&!En)if(u===null)p.componentDidMount();else{var v=a.elementType===a.type?u.memoizedProps:Gr(a.type,u.memoizedProps);p.componentDidUpdate(v,u.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var b=a.updateQueue;b!==null&&fx(a,b,p);break;case 3:var R=a.updateQueue;if(R!==null){if(u=null,a.child!==null)switch(a.child.tag){case 5:u=a.child.stateNode;break;case 1:u=a.child.stateNode}fx(a,R,u)}break;case 5:var B=a.stateNode;if(u===null&&a.flags&4){u=B;var W=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":W.autoFocus&&u.focus();break;case"img":W.src&&(u.src=W.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var J=a.alternate;if(J!==null){var le=J.memoizedState;if(le!==null){var de=le.dehydrated;de!==null&&Ms(de)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}En||a.flags&512&&hp(a)}catch(ae){Rt(a,a.return,ae)}}if(a===s){we=null;break}if(u=a.sibling,u!==null){u.return=a.return,we=u;break}we=a.return}}function f1(s){for(;we!==null;){var a=we;if(a===s){we=null;break}var u=a.sibling;if(u!==null){u.return=a.return,we=u;break}we=a.return}}function m1(s){for(;we!==null;){var a=we;try{switch(a.tag){case 0:case 11:case 15:var u=a.return;try{Qd(4,a)}catch(W){Rt(a,u,W)}break;case 1:var p=a.stateNode;if(typeof p.componentDidMount=="function"){var v=a.return;try{p.componentDidMount()}catch(W){Rt(a,v,W)}}var b=a.return;try{hp(a)}catch(W){Rt(a,b,W)}break;case 5:var R=a.return;try{hp(a)}catch(W){Rt(a,R,W)}}}catch(W){Rt(a,a.return,W)}if(a===s){we=null;break}var B=a.sibling;if(B!==null){B.return=a.return,we=B;break}we=a.return}}var kT=Math.ceil,Yd=F.ReactCurrentDispatcher,pp=F.ReactCurrentOwner,Er=F.ReactCurrentBatchConfig,et=0,nn=null,Ft=null,pn=0,ar=0,il=zs(0),Qt=0,Fc=null,Qo=0,Xd=0,gp=0,Uc=null,Hn=null,yp=0,sl=1/0,rs=null,Jd=!1,vp=null,Ks=null,Zd=!1,qs=null,eh=0,Wc=0,xp=null,th=-1,nh=0;function Nn(){return(et&6)!==0?vt():th!==-1?th:th=vt()}function Gs(s){return(s.mode&1)===0?1:(et&2)!==0&&pn!==0?pn&-pn:iT.transition!==null?(nh===0&&(nh=uc()),nh):(s=Je,s!==0||(s=window.event,s=s===void 0?16:Na(s.type)),s)}function Xr(s,a,u,p){if(50<Wc)throw Wc=0,xp=null,Error(n(185));Lo(s,u,p),((et&2)===0||s!==nn)&&(s===nn&&((et&2)===0&&(Xd|=u),Qt===4&&Qs(s,pn)),Kn(s,p),u===1&&et===0&&(a.mode&1)===0&&(sl=vt()+500,Ad&&Us()))}function Kn(s,a){var u=s.callbackNode;Vo(s,a);var p=$i(s,s===nn?pn:0);if(p===0)u!==null&&Ta(u),s.callbackNode=null,s.callbackPriority=0;else if(a=p&-p,s.callbackPriority!==a){if(u!=null&&Ta(u),a===1)s.tag===0?rT(g1.bind(null,s)):tx(g1.bind(null,s)),ZE(function(){(et&6)===0&&Us()}),u=null;else{switch(xi(p)){case 1:u=Ca;break;case 4:u=ac;break;case 16:u=Po;break;case 536870912:u=Ia;break;default:u=Po}u=_1(u,p1.bind(null,s))}s.callbackPriority=a,s.callbackNode=u}}function p1(s,a){if(th=-1,nh=0,(et&6)!==0)throw Error(n(327));var u=s.callbackNode;if(ol()&&s.callbackNode!==u)return null;var p=$i(s,s===nn?pn:0);if(p===0)return null;if((p&30)!==0||(p&s.expiredLanes)!==0||a)a=rh(s,p);else{a=p;var v=et;et|=2;var b=v1();(nn!==s||pn!==a)&&(rs=null,sl=vt()+500,Xo(s,a));do try{_T();break}catch(B){y1(s,B)}while(!0);Lm(),Yd.current=b,et=v,Ft!==null?a=0:(nn=null,pn=0,a=Qt)}if(a!==0){if(a===2&&(v=cc(s),v!==0&&(p=v,a=bp(s,v))),a===1)throw u=Fc,Xo(s,0),Qs(s,p),Kn(s,vt()),u;if(a===6)Qs(s,p);else{if(v=s.current.alternate,(p&30)===0&&!wT(v)&&(a=rh(s,p),a===2&&(b=cc(s),b!==0&&(p=b,a=bp(s,b))),a===1))throw u=Fc,Xo(s,0),Qs(s,p),Kn(s,vt()),u;switch(s.finishedWork=v,s.finishedLanes=p,a){case 0:case 1:throw Error(n(345));case 2:Jo(s,Hn,rs);break;case 3:if(Qs(s,p),(p&130023424)===p&&(a=yp+500-vt(),10<a)){if($i(s,0)!==0)break;if(v=s.suspendedLanes,(v&p)!==p){Nn(),s.pingedLanes|=s.suspendedLanes&v;break}s.timeoutHandle=Em(Jo.bind(null,s,Hn,rs),a);break}Jo(s,Hn,rs);break;case 4:if(Qs(s,p),(p&4194240)===p)break;for(a=s.eventTimes,v=-1;0<p;){var R=31-er(p);b=1<<R,R=a[R],R>v&&(v=R),p&=~b}if(p=v,p=vt()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*kT(p/1960))-p,10<p){s.timeoutHandle=Em(Jo.bind(null,s,Hn,rs),p);break}Jo(s,Hn,rs);break;case 5:Jo(s,Hn,rs);break;default:throw Error(n(329))}}}return Kn(s,vt()),s.callbackNode===u?p1.bind(null,s):null}function bp(s,a){var u=Uc;return s.current.memoizedState.isDehydrated&&(Xo(s,a).flags|=256),s=rh(s,a),s!==2&&(a=Hn,Hn=u,a!==null&&kp(a)),s}function kp(s){Hn===null?Hn=s:Hn.push.apply(Hn,s)}function wT(s){for(var a=s;;){if(a.flags&16384){var u=a.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var p=0;p<u.length;p++){var v=u[p],b=v.getSnapshot;v=v.value;try{if(!Kr(b(),v))return!1}catch{return!1}}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Qs(s,a){for(a&=~gp,a&=~Xd,s.suspendedLanes|=a,s.pingedLanes&=~a,s=s.expirationTimes;0<a;){var u=31-er(a),p=1<<u;s[u]=-1,a&=~p}}function g1(s){if((et&6)!==0)throw Error(n(327));ol();var a=$i(s,0);if((a&1)===0)return Kn(s,vt()),null;var u=rh(s,a);if(s.tag!==0&&u===2){var p=cc(s);p!==0&&(a=p,u=bp(s,p))}if(u===1)throw u=Fc,Xo(s,0),Qs(s,a),Kn(s,vt()),u;if(u===6)throw Error(n(345));return s.finishedWork=s.current.alternate,s.finishedLanes=a,Jo(s,Hn,rs),Kn(s,vt()),null}function wp(s,a){var u=et;et|=1;try{return s(a)}finally{et=u,et===0&&(sl=vt()+500,Ad&&Us())}}function Yo(s){qs!==null&&qs.tag===0&&(et&6)===0&&ol();var a=et;et|=1;var u=Er.transition,p=Je;try{if(Er.transition=null,Je=1,s)return s()}finally{Je=p,Er.transition=u,et=a,(et&6)===0&&Us()}}function Sp(){ar=il.current,bt(il)}function Xo(s,a){s.finishedWork=null,s.finishedLanes=0;var u=s.timeoutHandle;if(u!==-1&&(s.timeoutHandle=-1,JE(u)),Ft!==null)for(u=Ft.return;u!==null;){var p=u;switch(Pm(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&Cd();break;case 3:tl(),bt(Un),bt(Sn),Hm();break;case 5:Wm(p);break;case 4:tl();break;case 13:bt(Et);break;case 19:bt(Et);break;case 10:Om(p.type._context);break;case 22:case 23:Sp()}u=u.return}if(nn=s,Ft=s=Ys(s.current,null),pn=ar=a,Qt=0,Fc=null,gp=Xd=Qo=0,Hn=Uc=null,Ko!==null){for(a=0;a<Ko.length;a++)if(u=Ko[a],p=u.interleaved,p!==null){u.interleaved=null;var v=p.next,b=u.pending;if(b!==null){var R=b.next;b.next=v,p.next=R}u.pending=p}Ko=null}return s}function y1(s,a){do{var u=Ft;try{if(Lm(),zd.current=$d,Fd){for(var p=Tt.memoizedState;p!==null;){var v=p.queue;v!==null&&(v.pending=null),p=p.next}Fd=!1}if(Go=0,tn=Gt=Tt=null,Mc=!1,Vc=0,pp.current=null,u===null||u.return===null){Qt=1,Fc=a,Ft=null;break}e:{var b=s,R=u.return,B=u,W=a;if(a=pn,B.flags|=32768,W!==null&&typeof W=="object"&&typeof W.then=="function"){var J=W,le=B,de=le.tag;if((le.mode&1)===0&&(de===0||de===11||de===15)){var ae=le.alternate;ae?(le.updateQueue=ae.updateQueue,le.memoizedState=ae.memoizedState,le.lanes=ae.lanes):(le.updateQueue=null,le.memoizedState=null)}var xe=Ux(R);if(xe!==null){xe.flags&=-257,Wx(xe,R,B,b,a),xe.mode&1&&Fx(b,J,a),a=xe,W=J;var _e=a.updateQueue;if(_e===null){var je=new Set;je.add(W),a.updateQueue=je}else _e.add(W);break e}else{if((a&1)===0){Fx(b,J,a),_p();break e}W=Error(n(426))}}else if(_t&&B.mode&1){var Lt=Ux(R);if(Lt!==null){(Lt.flags&65536)===0&&(Lt.flags|=256),Wx(Lt,R,B,b,a),Mm(nl(W,B));break e}}b=W=nl(W,B),Qt!==4&&(Qt=2),Uc===null?Uc=[b]:Uc.push(b),b=R;do{switch(b.tag){case 3:b.flags|=65536,a&=-a,b.lanes|=a;var Q=Bx(b,W,a);hx(b,Q);break e;case 1:B=W;var H=b.type,X=b.stateNode;if((b.flags&128)===0&&(typeof H.getDerivedStateFromError=="function"||X!==null&&typeof X.componentDidCatch=="function"&&(Ks===null||!Ks.has(X)))){b.flags|=65536,a&=-a,b.lanes|=a;var he=zx(b,B,a);hx(b,he);break e}}b=b.return}while(b!==null)}b1(u)}catch(Ee){a=Ee,Ft===u&&u!==null&&(Ft=u=u.return);continue}break}while(!0)}function v1(){var s=Yd.current;return Yd.current=$d,s===null?$d:s}function _p(){(Qt===0||Qt===3||Qt===2)&&(Qt=4),nn===null||(Qo&268435455)===0&&(Xd&268435455)===0||Qs(nn,pn)}function rh(s,a){var u=et;et|=2;var p=v1();(nn!==s||pn!==a)&&(rs=null,Xo(s,a));do try{ST();break}catch(v){y1(s,v)}while(!0);if(Lm(),et=u,Yd.current=p,Ft!==null)throw Error(n(261));return nn=null,pn=0,Qt}function ST(){for(;Ft!==null;)x1(Ft)}function _T(){for(;Ft!==null&&!Ro();)x1(Ft)}function x1(s){var a=S1(s.alternate,s,ar);s.memoizedProps=s.pendingProps,a===null?b1(s):Ft=a,pp.current=null}function b1(s){var a=s;do{var u=a.alternate;if(s=a.return,(a.flags&32768)===0){if(u=gT(u,a,ar),u!==null){Ft=u;return}}else{if(u=yT(u,a),u!==null){u.flags&=32767,Ft=u;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Qt=6,Ft=null;return}}if(a=a.sibling,a!==null){Ft=a;return}Ft=a=s}while(a!==null);Qt===0&&(Qt=5)}function Jo(s,a,u){var p=Je,v=Er.transition;try{Er.transition=null,Je=1,jT(s,a,u,p)}finally{Er.transition=v,Je=p}return null}function jT(s,a,u,p){do ol();while(qs!==null);if((et&6)!==0)throw Error(n(327));u=s.finishedWork;var v=s.finishedLanes;if(u===null)return null;if(s.finishedWork=null,s.finishedLanes=0,u===s.current)throw Error(n(177));s.callbackNode=null,s.callbackPriority=0;var b=u.lanes|u.childLanes;if(um(s,b),s===nn&&(Ft=nn=null,pn=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Zd||(Zd=!0,_1(Po,function(){return ol(),null})),b=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||b){b=Er.transition,Er.transition=null;var R=Je;Je=1;var B=et;et|=4,pp.current=null,xT(s,u),u1(u,s),HE(_m),qi=!!Sm,_m=Sm=null,s.current=u,bT(u),Wi(),et=B,Je=R,Er.transition=b}else s.current=u;if(Zd&&(Zd=!1,qs=s,eh=v),b=s.pendingLanes,b===0&&(Ks=null),ud(u.stateNode),Kn(s,vt()),a!==null)for(p=s.onRecoverableError,u=0;u<a.length;u++)v=a[u],p(v.value,{componentStack:v.stack,digest:v.digest});if(Jd)throw Jd=!1,s=vp,vp=null,s;return(eh&1)!==0&&s.tag!==0&&ol(),b=s.pendingLanes,(b&1)!==0?s===xp?Wc++:(Wc=0,xp=s):Wc=0,Us(),null}function ol(){if(qs!==null){var s=xi(eh),a=Er.transition,u=Je;try{if(Er.transition=null,Je=16>s?16:s,qs===null)var p=!1;else{if(s=qs,qs=null,eh=0,(et&6)!==0)throw Error(n(331));var v=et;for(et|=4,we=s.current;we!==null;){var b=we,R=b.child;if((we.flags&16)!==0){var B=b.deletions;if(B!==null){for(var W=0;W<B.length;W++){var J=B[W];for(we=J;we!==null;){var le=we;switch(le.tag){case 0:case 11:case 15:zc(8,le,b)}var de=le.child;if(de!==null)de.return=le,we=de;else for(;we!==null;){le=we;var ae=le.sibling,xe=le.return;if(s1(le),le===J){we=null;break}if(ae!==null){ae.return=xe,we=ae;break}we=xe}}}var _e=b.alternate;if(_e!==null){var je=_e.child;if(je!==null){_e.child=null;do{var Lt=je.sibling;je.sibling=null,je=Lt}while(je!==null)}}we=b}}if((b.subtreeFlags&2064)!==0&&R!==null)R.return=b,we=R;else e:for(;we!==null;){if(b=we,(b.flags&2048)!==0)switch(b.tag){case 0:case 11:case 15:zc(9,b,b.return)}var Q=b.sibling;if(Q!==null){Q.return=b.return,we=Q;break e}we=b.return}}var H=s.current;for(we=H;we!==null;){R=we;var X=R.child;if((R.subtreeFlags&2064)!==0&&X!==null)X.return=R,we=X;else e:for(R=H;we!==null;){if(B=we,(B.flags&2048)!==0)try{switch(B.tag){case 0:case 11:case 15:Qd(9,B)}}catch(Ee){Rt(B,B.return,Ee)}if(B===R){we=null;break e}var he=B.sibling;if(he!==null){he.return=B.return,we=he;break e}we=B.return}}if(et=v,Us(),Zn&&typeof Zn.onPostCommitFiberRoot=="function")try{Zn.onPostCommitFiberRoot(Do,s)}catch{}p=!0}return p}finally{Je=u,Er.transition=a}}return!1}function k1(s,a,u){a=nl(u,a),a=Bx(s,a,1),s=$s(s,a,1),a=Nn(),s!==null&&(Lo(s,1,a),Kn(s,a))}function Rt(s,a,u){if(s.tag===3)k1(s,s,u);else for(;a!==null;){if(a.tag===3){k1(a,s,u);break}else if(a.tag===1){var p=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Ks===null||!Ks.has(p))){s=nl(u,s),s=zx(a,s,1),a=$s(a,s,1),s=Nn(),a!==null&&(Lo(a,1,s),Kn(a,s));break}}a=a.return}}function ET(s,a,u){var p=s.pingCache;p!==null&&p.delete(a),a=Nn(),s.pingedLanes|=s.suspendedLanes&u,nn===s&&(pn&u)===u&&(Qt===4||Qt===3&&(pn&130023424)===pn&&500>vt()-yp?Xo(s,0):gp|=u),Kn(s,a)}function w1(s,a){a===0&&((s.mode&1)===0?a=1:(a=Ps,Ps<<=1,(Ps&130023424)===0&&(Ps=4194304)));var u=Nn();s=es(s,a),s!==null&&(Lo(s,a,u),Kn(s,u))}function TT(s){var a=s.memoizedState,u=0;a!==null&&(u=a.retryLane),w1(s,u)}function CT(s,a){var u=0;switch(s.tag){case 13:var p=s.stateNode,v=s.memoizedState;v!==null&&(u=v.retryLane);break;case 19:p=s.stateNode;break;default:throw Error(n(314))}p!==null&&p.delete(a),w1(s,u)}var S1;S1=function(s,a,u){if(s!==null)if(s.memoizedProps!==a.pendingProps||Un.current)$n=!0;else{if((s.lanes&u)===0&&(a.flags&128)===0)return $n=!1,pT(s,a,u);$n=(s.flags&131072)!==0}else $n=!1,_t&&(a.flags&1048576)!==0&&nx(a,Pd,a.index);switch(a.lanes=0,a.tag){case 2:var p=a.type;qd(s,a),s=a.pendingProps;var v=Ga(a,Sn.current);el(a,u),v=Gm(null,a,p,s,v,u);var b=Qm();return a.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Wn(p)?(b=!0,Id(a)):b=!1,a.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,Fm(a),v.updater=Hd,a.stateNode=v,v._reactInternals=a,tp(a,p,s,u),a=sp(null,a,p,!0,b,u)):(a.tag=0,_t&&b&&Rm(a),Dn(null,a,v,u),a=a.child),a;case 16:p=a.elementType;e:{switch(qd(s,a),s=a.pendingProps,v=p._init,p=v(p._payload),a.type=p,v=a.tag=AT(p),s=Gr(p,s),v){case 0:a=ip(null,a,p,s,u);break e;case 1:a=Qx(null,a,p,s,u);break e;case 11:a=$x(null,a,p,s,u);break e;case 14:a=Hx(null,a,p,Gr(p.type,s),u);break e}throw Error(n(306,p,""))}return a;case 0:return p=a.type,v=a.pendingProps,v=a.elementType===p?v:Gr(p,v),ip(s,a,p,v,u);case 1:return p=a.type,v=a.pendingProps,v=a.elementType===p?v:Gr(p,v),Qx(s,a,p,v,u);case 3:e:{if(Yx(a),s===null)throw Error(n(387));p=a.pendingProps,b=a.memoizedState,v=b.element,dx(s,a),Od(a,p,null,u);var R=a.memoizedState;if(p=R.element,b.isDehydrated)if(b={element:p,isDehydrated:!1,cache:R.cache,pendingSuspenseBoundaries:R.pendingSuspenseBoundaries,transitions:R.transitions},a.updateQueue.baseState=b,a.memoizedState=b,a.flags&256){v=nl(Error(n(423)),a),a=Xx(s,a,p,u,v);break e}else if(p!==v){v=nl(Error(n(424)),a),a=Xx(s,a,p,u,v);break e}else for(or=Bs(a.stateNode.containerInfo.firstChild),sr=a,_t=!0,qr=null,u=cx(a,null,p,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Xa(),p===v){a=ns(s,a,u);break e}Dn(s,a,p,u)}a=a.child}return a;case 5:return mx(a),s===null&&Nm(a),p=a.type,v=a.pendingProps,b=s!==null?s.memoizedProps:null,R=v.children,jm(p,v)?R=null:b!==null&&jm(p,b)&&(a.flags|=32),Gx(s,a),Dn(s,a,R,u),a.child;case 6:return s===null&&Nm(a),null;case 13:return Jx(s,a,u);case 4:return Um(a,a.stateNode.containerInfo),p=a.pendingProps,s===null?a.child=Ja(a,null,p,u):Dn(s,a,p,u),a.child;case 11:return p=a.type,v=a.pendingProps,v=a.elementType===p?v:Gr(p,v),$x(s,a,p,v,u);case 7:return Dn(s,a,a.pendingProps,u),a.child;case 8:return Dn(s,a,a.pendingProps.children,u),a.child;case 12:return Dn(s,a,a.pendingProps.children,u),a.child;case 10:e:{if(p=a.type._context,v=a.pendingProps,b=a.memoizedProps,R=v.value,mt(Md,p._currentValue),p._currentValue=R,b!==null)if(Kr(b.value,R)){if(b.children===v.children&&!Un.current){a=ns(s,a,u);break e}}else for(b=a.child,b!==null&&(b.return=a);b!==null;){var B=b.dependencies;if(B!==null){R=b.child;for(var W=B.firstContext;W!==null;){if(W.context===p){if(b.tag===1){W=ts(-1,u&-u),W.tag=2;var J=b.updateQueue;if(J!==null){J=J.shared;var le=J.pending;le===null?W.next=W:(W.next=le.next,le.next=W),J.pending=W}}b.lanes|=u,W=b.alternate,W!==null&&(W.lanes|=u),Bm(b.return,u,a),B.lanes|=u;break}W=W.next}}else if(b.tag===10)R=b.type===a.type?null:b.child;else if(b.tag===18){if(R=b.return,R===null)throw Error(n(341));R.lanes|=u,B=R.alternate,B!==null&&(B.lanes|=u),Bm(R,u,a),R=b.sibling}else R=b.child;if(R!==null)R.return=b;else for(R=b;R!==null;){if(R===a){R=null;break}if(b=R.sibling,b!==null){b.return=R.return,R=b;break}R=R.return}b=R}Dn(s,a,v.children,u),a=a.child}return a;case 9:return v=a.type,p=a.pendingProps.children,el(a,u),v=_r(v),p=p(v),a.flags|=1,Dn(s,a,p,u),a.child;case 14:return p=a.type,v=Gr(p,a.pendingProps),v=Gr(p.type,v),Hx(s,a,p,v,u);case 15:return Kx(s,a,a.type,a.pendingProps,u);case 17:return p=a.type,v=a.pendingProps,v=a.elementType===p?v:Gr(p,v),qd(s,a),a.tag=1,Wn(p)?(s=!0,Id(a)):s=!1,el(a,u),Lx(a,p,v),tp(a,p,v,u),sp(null,a,p,!0,s,u);case 19:return e1(s,a,u);case 22:return qx(s,a,u)}throw Error(n(156,a.tag))};function _1(s,a){return oc(s,a)}function IT(s,a,u,p){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tr(s,a,u,p){return new IT(s,a,u,p)}function jp(s){return s=s.prototype,!(!s||!s.isReactComponent)}function AT(s){if(typeof s=="function")return jp(s)?1:0;if(s!=null){if(s=s.$$typeof,s===z)return 11;if(s===$e)return 14}return 2}function Ys(s,a){var u=s.alternate;return u===null?(u=Tr(s.tag,a,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=a,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&14680064,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,a=s.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u}function ih(s,a,u,p,v,b){var R=2;if(p=s,typeof s=="function")jp(s)&&(R=1);else if(typeof s=="string")R=5;else e:switch(s){case A:return Zo(u.children,v,b,a);case E:R=8,v|=8;break;case I:return s=Tr(12,u,a,v|2),s.elementType=I,s.lanes=b,s;case O:return s=Tr(13,u,a,v),s.elementType=O,s.lanes=b,s;case Re:return s=Tr(19,u,a,v),s.elementType=Re,s.lanes=b,s;case Ce:return sh(u,v,b,a);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case D:R=10;break e;case L:R=9;break e;case z:R=11;break e;case $e:R=14;break e;case tt:R=16,p=null;break e}throw Error(n(130,s==null?s:typeof s,""))}return a=Tr(R,u,a,v),a.elementType=s,a.type=p,a.lanes=b,a}function Zo(s,a,u,p){return s=Tr(7,s,p,a),s.lanes=u,s}function sh(s,a,u,p){return s=Tr(22,s,p,a),s.elementType=Ce,s.lanes=u,s.stateNode={isHidden:!1},s}function Ep(s,a,u){return s=Tr(6,s,null,a),s.lanes=u,s}function Tp(s,a,u){return a=Tr(4,s.children!==null?s.children:[],s.key,a),a.lanes=u,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}function RT(s,a,u,p,v){this.tag=a,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=dc(0),this.expirationTimes=dc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dc(0),this.identifierPrefix=p,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function Cp(s,a,u,p,v,b,R,B,W){return s=new RT(s,a,u,B,W),a===1?(a=1,b===!0&&(a|=8)):a=0,b=Tr(3,null,null,a),s.current=b,b.stateNode=s,b.memoizedState={element:p,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fm(b),s}function PT(s,a,u){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:q,key:p==null?null:""+p,children:s,containerInfo:a,implementation:u}}function j1(s){if(!s)return Fs;s=s._reactInternals;e:{if($r(s)!==s||s.tag!==1)throw Error(n(170));var a=s;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(Wn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(n(171))}if(s.tag===1){var u=s.type;if(Wn(u))return Zv(s,u,a)}return a}function E1(s,a,u,p,v,b,R,B,W){return s=Cp(u,p,!0,s,v,b,R,B,W),s.context=j1(null),u=s.current,p=Nn(),v=Gs(u),b=ts(p,v),b.callback=a??null,$s(u,b,v),s.current.lanes=v,Lo(s,v,p),Kn(s,p),s}function oh(s,a,u,p){var v=a.current,b=Nn(),R=Gs(v);return u=j1(u),a.context===null?a.context=u:a.pendingContext=u,a=ts(b,R),a.payload={element:s},p=p===void 0?null:p,p!==null&&(a.callback=p),s=$s(v,a,R),s!==null&&(Xr(s,v,R,b),Ld(s,v,R)),R}function ah(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function T1(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<a?u:a}}function Ip(s,a){T1(s,a),(s=s.alternate)&&T1(s,a)}function DT(){return null}var C1=typeof reportError=="function"?reportError:function(s){console.error(s)};function Ap(s){this._internalRoot=s}lh.prototype.render=Ap.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(n(409));oh(s,a,null,null)},lh.prototype.unmount=Ap.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;Yo(function(){oh(null,s,null,null)}),a[Yi]=null}};function lh(s){this._internalRoot=s}lh.prototype.unstable_scheduleHydration=function(s){if(s){var a=pc();s={blockedOn:null,target:s,priority:a};for(var u=0;u<tr.length&&a!==0&&a<tr[u].priority;u++);tr.splice(u,0,s),u===0&&Pa(s)}};function Rp(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function ch(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function I1(){}function NT(s,a,u,p,v){if(v){if(typeof p=="function"){var b=p;p=function(){var J=ah(R);b.call(J)}}var R=E1(a,p,s,0,null,!1,!1,"",I1);return s._reactRootContainer=R,s[Yi]=R.current,Tc(s.nodeType===8?s.parentNode:s),Yo(),R}for(;v=s.lastChild;)s.removeChild(v);if(typeof p=="function"){var B=p;p=function(){var J=ah(W);B.call(J)}}var W=Cp(s,0,!1,null,null,!1,!1,"",I1);return s._reactRootContainer=W,s[Yi]=W.current,Tc(s.nodeType===8?s.parentNode:s),Yo(function(){oh(a,W,u,p)}),W}function uh(s,a,u,p,v){var b=u._reactRootContainer;if(b){var R=b;if(typeof v=="function"){var B=v;v=function(){var W=ah(R);B.call(W)}}oh(a,R,s,v)}else R=NT(u,a,s,v,p);return ah(R)}fc=function(s){switch(s.tag){case 3:var a=s.stateNode;if(a.current.memoizedState.isDehydrated){var u=st(a.pendingLanes);u!==0&&(hc(a,u|1),Kn(a,vt()),(et&6)===0&&(sl=vt()+500,Us()))}break;case 13:Yo(function(){var p=es(s,1);if(p!==null){var v=Nn();Xr(p,s,1,v)}}),Ip(s,1)}},Aa=function(s){if(s.tag===13){var a=es(s,134217728);if(a!==null){var u=Nn();Xr(a,s,134217728,u)}Ip(s,134217728)}},mc=function(s){if(s.tag===13){var a=Gs(s),u=es(s,a);if(u!==null){var p=Nn();Xr(u,s,a,p)}Ip(s,a)}},pc=function(){return Je},gc=function(s,a){var u=Je;try{return Je=s,a()}finally{Je=u}},Ur=function(s,a,u){switch(a){case"input":if(Bn(s,u),a=u.name,u.type==="radio"&&a!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<u.length;a++){var p=u[a];if(p!==s&&p.form===s.form){var v=Td(p);if(!v)throw Error(n(90));qt(p),Bn(p,v)}}}break;case"textarea":Ts(s,u);break;case"select":a=u.value,a!=null&&Fn(s,!!u.multiple,a,!1)}},U=wp,ne=Yo;var MT={usingClientEntryPoint:!1,Events:[Ac,Ka,Td,fi,mi,wp]},$c={findFiberByHostInstance:Uo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},VT={bundleType:$c.bundleType,version:$c.version,rendererPackageName:$c.rendererPackageName,rendererConfig:$c.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:F.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=cd(s),s===null?null:s.stateNode},findFiberByHostInstance:$c.findFiberByHostInstance||DT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dh.isDisabled&&dh.supportsFiber)try{Do=dh.inject(VT),Zn=dh}catch{}}return qn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MT,qn.createPortal=function(s,a){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Rp(a))throw Error(n(200));return PT(s,a,null,u)},qn.createRoot=function(s,a){if(!Rp(s))throw Error(n(299));var u=!1,p="",v=C1;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),a=Cp(s,1,!1,null,null,u,!1,p,v),s[Yi]=a.current,Tc(s.nodeType===8?s.parentNode:s),new Ap(a)},qn.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=cd(a),s=s===null?null:s.stateNode,s},qn.flushSync=function(s){return Yo(s)},qn.hydrate=function(s,a,u){if(!ch(a))throw Error(n(200));return uh(null,s,a,!0,u)},qn.hydrateRoot=function(s,a,u){if(!Rp(s))throw Error(n(405));var p=u!=null&&u.hydratedSources||null,v=!1,b="",R=C1;if(u!=null&&(u.unstable_strictMode===!0&&(v=!0),u.identifierPrefix!==void 0&&(b=u.identifierPrefix),u.onRecoverableError!==void 0&&(R=u.onRecoverableError)),a=E1(a,null,s,1,u??null,v,!1,b,R),s[Yi]=a.current,Tc(s),p)for(s=0;s<p.length;s++)u=p[s],v=u._getVersion,v=v(u._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[u,v]:a.mutableSourceEagerHydrationData.push(u,v);return new lh(a)},qn.render=function(s,a,u){if(!ch(a))throw Error(n(200));return uh(null,s,a,!1,u)},qn.unmountComponentAtNode=function(s){if(!ch(s))throw Error(n(40));return s._reactRootContainer?(Yo(function(){uh(null,null,s,!1,function(){s._reactRootContainer=null,s[Yi]=null})}),!0):!1},qn.unstable_batchedUpdates=wp,qn.unstable_renderSubtreeIntoContainer=function(s,a,u,p){if(!ch(u))throw Error(n(200));if(s==null||s._reactInternals===void 0)throw Error(n(38));return uh(s,a,u,!1,p)},qn.version="18.3.1-next-f1338f8080-20240426",qn}var L1;function HT(){if(L1)return Np.exports;L1=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Np.exports=$T(),Np.exports}var O1;function KT(){if(O1)return hh;O1=1;var t=HT();return hh.createRoot=t.createRoot,hh.hydrateRoot=t.hydrateRoot,hh}var qT=KT();/**
 * react-router v7.12.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var B1="popstate";function GT(t={}){function e(o,l){let{pathname:c="/",search:h="",hash:d=""}=ba(o.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),jg("",{pathname:c,search:h,hash:d},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(o,l){let c=o.document.querySelector("base"),h="";if(c&&c.getAttribute("href")){let d=o.location.href,m=d.indexOf("#");h=m===-1?d:d.slice(0,m)}return h+"#"+(typeof l=="string"?l:pu(l))}function r(o,l){fr(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return YT(e,n,r,t)}function jt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function fr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function QT(){return Math.random().toString(36).substring(2,10)}function z1(t,e){return{usr:t.state,key:t.key,idx:e}}function jg(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?ba(e):e,state:n,key:e&&e.key||r||QT()}}function pu({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function ba(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function YT(t,e,n,r={}){let{window:o=document.defaultView,v5Compat:l=!1}=r,c=o.history,h="POP",d=null,m=g();m==null&&(m=0,c.replaceState({...c.state,idx:m},""));function g(){return(c.state||{idx:null}).idx}function y(){h="POP";let T=g(),P=T==null?null:T-m;m=T,d&&d({action:h,location:_.location,delta:P})}function x(T,P){h="PUSH";let V=jg(_.location,T,P);n&&n(V,T),m=g()+1;let M=z1(V,m),F=_.createHref(V);try{c.pushState(M,"",F)}catch(K){if(K instanceof DOMException&&K.name==="DataCloneError")throw K;o.location.assign(F)}l&&d&&d({action:h,location:_.location,delta:1})}function S(T,P){h="REPLACE";let V=jg(_.location,T,P);n&&n(V,T),m=g();let M=z1(V,m),F=_.createHref(V);c.replaceState(M,"",F),l&&d&&d({action:h,location:_.location,delta:0})}function w(T){return XT(T)}let _={get action(){return h},get location(){return t(o,c)},listen(T){if(d)throw new Error("A history only accepts one active listener");return o.addEventListener(B1,y),d=T,()=>{o.removeEventListener(B1,y),d=null}},createHref(T){return e(o,T)},createURL:w,encodeLocation(T){let P=w(T);return{pathname:P.pathname,search:P.search,hash:P.hash}},push:x,replace:S,go(T){return c.go(T)}};return _}function XT(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),jt(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:pu(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function s2(t,e,n="/"){return JT(t,e,n,!1)}function JT(t,e,n,r){let o=typeof e=="string"?ba(e):e,l=ms(o.pathname||"/",n);if(l==null)return null;let c=o2(t);ZT(c);let h=null;for(let d=0;h==null&&d<c.length;++d){let m=uC(l);h=lC(c[d],m,r)}return h}function o2(t,e=[],n=[],r="",o=!1){let l=(c,h,d=o,m)=>{let g={relativePath:m===void 0?c.path||"":m,caseSensitive:c.caseSensitive===!0,childrenIndex:h,route:c};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(r)&&d)return;jt(g.relativePath.startsWith(r),`Absolute route path "${g.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(r.length)}let y=ls([r,g.relativePath]),x=n.concat(g);c.children&&c.children.length>0&&(jt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),o2(c.children,e,x,y,d)),!(c.path==null&&!c.index)&&e.push({path:y,score:oC(y,c.index),routesMeta:x})};return t.forEach((c,h)=>{var d;if(c.path===""||!((d=c.path)!=null&&d.includes("?")))l(c,h);else for(let m of a2(c.path))l(c,h,!0,m)}),e}function a2(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,o=n.endsWith("?"),l=n.replace(/\?$/,"");if(r.length===0)return o?[l,""]:[l];let c=a2(r.join("/")),h=[];return h.push(...c.map(d=>d===""?l:[l,d].join("/"))),o&&h.push(...c),h.map(d=>t.startsWith("/")&&d===""?"/":d)}function ZT(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:aC(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var eC=/^:[\w-]+$/,tC=3,nC=2,rC=1,iC=10,sC=-2,F1=t=>t==="*";function oC(t,e){let n=t.split("/"),r=n.length;return n.some(F1)&&(r+=sC),e&&(r+=nC),n.filter(o=>!F1(o)).reduce((o,l)=>o+(eC.test(l)?tC:l===""?rC:iC),r)}function aC(t,e){return t.length===e.length&&t.slice(0,-1).every((r,o)=>r===e[o])?t[t.length-1]-e[e.length-1]:0}function lC(t,e,n=!1){let{routesMeta:r}=t,o={},l="/",c=[];for(let h=0;h<r.length;++h){let d=r[h],m=h===r.length-1,g=l==="/"?e:e.slice(l.length)||"/",y=Uh({path:d.relativePath,caseSensitive:d.caseSensitive,end:m},g),x=d.route;if(!y&&m&&n&&!r[r.length-1].route.index&&(y=Uh({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!y)return null;Object.assign(o,y.params),c.push({params:o,pathname:ls([l,y.pathname]),pathnameBase:mC(ls([l,y.pathnameBase])),route:x}),y.pathnameBase!=="/"&&(l=ls([l,y.pathnameBase]))}return c}function Uh(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=cC(t.path,t.caseSensitive,t.end),o=e.match(n);if(!o)return null;let l=o[0],c=l.replace(/(.)\/+$/,"$1"),h=o.slice(1);return{params:r.reduce((m,{paramName:g,isOptional:y},x)=>{if(g==="*"){let w=h[x]||"";c=l.slice(0,l.length-w.length).replace(/(.)\/+$/,"$1")}const S=h[x];return y&&!S?m[g]=void 0:m[g]=(S||"").replace(/%2F/g,"/"),m},{}),pathname:l,pathnameBase:c,pattern:t}}function cC(t,e=!1,n=!0){fr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,h,d)=>(r.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),r]}function uC(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return fr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function ms(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var l2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,dC=t=>l2.test(t);function hC(t,e="/"){let{pathname:n,search:r="",hash:o=""}=typeof t=="string"?ba(t):t,l;if(n)if(dC(n))l=n;else{if(n.includes("//")){let c=n;n=n.replace(/\/\/+/g,"/"),fr(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${n}`)}n.startsWith("/")?l=U1(n.substring(1),"/"):l=U1(n,e)}else l=e;return{pathname:l,search:pC(r),hash:gC(o)}}function U1(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Lp(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function fC(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Py(t){let e=fC(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function Dy(t,e,n,r=!1){let o;typeof t=="string"?o=ba(t):(o={...t},jt(!o.pathname||!o.pathname.includes("?"),Lp("?","pathname","search",o)),jt(!o.pathname||!o.pathname.includes("#"),Lp("#","pathname","hash",o)),jt(!o.search||!o.search.includes("#"),Lp("#","search","hash",o)));let l=t===""||o.pathname==="",c=l?"/":o.pathname,h;if(c==null)h=n;else{let y=e.length-1;if(!r&&c.startsWith("..")){let x=c.split("/");for(;x[0]==="..";)x.shift(),y-=1;o.pathname=x.join("/")}h=y>=0?e[y]:"/"}let d=hC(o,h),m=c&&c!=="/"&&c.endsWith("/"),g=(l||c===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(m||g)&&(d.pathname+="/"),d}var ls=t=>t.join("/").replace(/\/\/+/g,"/"),mC=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),pC=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,gC=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,yC=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function vC(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function xC(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var c2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function u2(t,e){let n=t;if(typeof n!="string"||!l2.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,o=!1;if(c2)try{let l=new URL(window.location.href),c=n.startsWith("//")?new URL(l.protocol+n):new URL(n),h=ms(c.pathname,e);c.origin===l.origin&&h!=null?n=h+c.search+c.hash:o=!0}catch{fr(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:o,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var d2=["POST","PUT","PATCH","DELETE"];new Set(d2);var bC=["GET",...d2];new Set(bC);var Ul=C.createContext(null);Ul.displayName="DataRouter";var _f=C.createContext(null);_f.displayName="DataRouterState";var kC=C.createContext(!1),h2=C.createContext({isTransitioning:!1});h2.displayName="ViewTransition";var wC=C.createContext(new Map);wC.displayName="Fetchers";var SC=C.createContext(null);SC.displayName="Await";var pr=C.createContext(null);pr.displayName="Navigation";var Au=C.createContext(null);Au.displayName="Location";var li=C.createContext({outlet:null,matches:[],isDataRoute:!1});li.displayName="Route";var Ny=C.createContext(null);Ny.displayName="RouteError";var f2="REACT_ROUTER_ERROR",_C="REDIRECT",jC="ROUTE_ERROR_RESPONSE";function EC(t){if(t.startsWith(`${f2}:${_C}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function TC(t){if(t.startsWith(`${f2}:${jC}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new yC(e.status,e.statusText,e.data)}catch{}}function CC(t,{relative:e}={}){jt(Wl(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=C.useContext(pr),{hash:o,pathname:l,search:c}=Ru(t,{relative:e}),h=l;return n!=="/"&&(h=l==="/"?n:ls([n,l])),r.createHref({pathname:h,search:c,hash:o})}function Wl(){return C.useContext(Au)!=null}function Or(){return jt(Wl(),"useLocation() may be used only in the context of a <Router> component."),C.useContext(Au).location}var m2="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function p2(t){C.useContext(pr).static||C.useLayoutEffect(t)}function bo(){let{isDataRoute:t}=C.useContext(li);return t?FC():IC()}function IC(){jt(Wl(),"useNavigate() may be used only in the context of a <Router> component.");let t=C.useContext(Ul),{basename:e,navigator:n}=C.useContext(pr),{matches:r}=C.useContext(li),{pathname:o}=Or(),l=JSON.stringify(Py(r)),c=C.useRef(!1);return p2(()=>{c.current=!0}),C.useCallback((d,m={})=>{if(fr(c.current,m2),!c.current)return;if(typeof d=="number"){n.go(d);return}let g=Dy(d,JSON.parse(l),o,m.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:ls([e,g.pathname])),(m.replace?n.replace:n.push)(g,m.state,m)},[e,n,l,o,t])}C.createContext(null);function jf(){let{matches:t}=C.useContext(li),e=t[t.length-1];return e?e.params:{}}function Ru(t,{relative:e}={}){let{matches:n}=C.useContext(li),{pathname:r}=Or(),o=JSON.stringify(Py(n));return C.useMemo(()=>Dy(t,JSON.parse(o),r,e==="path"),[t,o,r,e])}function AC(t,e){return g2(t,e)}function g2(t,e,n,r,o){var V;jt(Wl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=C.useContext(pr),{matches:c}=C.useContext(li),h=c[c.length-1],d=h?h.params:{},m=h?h.pathname:"/",g=h?h.pathnameBase:"/",y=h&&h.route;{let M=y&&y.path||"";v2(m,!y||M.endsWith("*")||M.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${M}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${M}"> to <Route path="${M==="/"?"*":`${M}/*`}">.`)}let x=Or(),S;if(e){let M=typeof e=="string"?ba(e):e;jt(g==="/"||((V=M.pathname)==null?void 0:V.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${M.pathname}" was given in the \`location\` prop.`),S=M}else S=x;let w=S.pathname||"/",_=w;if(g!=="/"){let M=g.replace(/^\//,"").split("/");_="/"+w.replace(/^\//,"").split("/").slice(M.length).join("/")}let T=s2(t,{pathname:_});fr(y||T!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),fr(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let P=MC(T&&T.map(M=>Object.assign({},M,{params:Object.assign({},d,M.params),pathname:ls([g,l.encodeLocation?l.encodeLocation(M.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?g:ls([g,l.encodeLocation?l.encodeLocation(M.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:M.pathnameBase])})),c,n,r,o);return e&&P?C.createElement(Au.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},P):P}function RC(){let t=zC(),e=vC(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",t),c=C.createElement(C.Fragment,null,C.createElement("p",null," Hey developer "),C.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",C.createElement("code",{style:l},"ErrorBoundary")," or"," ",C.createElement("code",{style:l},"errorElement")," prop on your route.")),C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),n?C.createElement("pre",{style:o},n):null,c)}var PC=C.createElement(RC,null),y2=class extends C.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=TC(t.digest);n&&(t=n)}let e=t!==void 0?C.createElement(li.Provider,{value:this.props.routeContext},C.createElement(Ny.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?C.createElement(DC,{error:t},e):e}};y2.contextType=kC;var Op=new WeakMap;function DC({children:t,error:e}){let{basename:n}=C.useContext(pr);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=EC(e.digest);if(r){let o=Op.get(e);if(o)throw o;let l=u2(r.location,n);if(c2&&!Op.get(e))if(l.isExternal||r.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:r.replace}));throw Op.set(e,c),c}return C.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return t}function NC({routeContext:t,match:e,children:n}){let r=C.useContext(Ul);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),C.createElement(li.Provider,{value:t},n)}function MC(t,e=[],n=null,r=null,o=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,c=n==null?void 0:n.errors;if(c!=null){let g=l.findIndex(y=>y.route.id&&(c==null?void 0:c[y.route.id])!==void 0);jt(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,g+1))}let h=!1,d=-1;if(n)for(let g=0;g<l.length;g++){let y=l[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(d=g),y.route.id){let{loaderData:x,errors:S}=n,w=y.route.loader&&!x.hasOwnProperty(y.route.id)&&(!S||S[y.route.id]===void 0);if(y.route.lazy||w){h=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}let m=n&&r?(g,y)=>{var x,S;r(g,{location:n.location,params:((S=(x=n.matches)==null?void 0:x[0])==null?void 0:S.params)??{},unstable_pattern:xC(n.matches),errorInfo:y})}:void 0;return l.reduceRight((g,y,x)=>{let S,w=!1,_=null,T=null;n&&(S=c&&y.route.id?c[y.route.id]:void 0,_=y.route.errorElement||PC,h&&(d<0&&x===0?(v2("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,T=null):d===x&&(w=!0,T=y.route.hydrateFallbackElement||null)));let P=e.concat(l.slice(0,x+1)),V=()=>{let M;return S?M=_:w?M=T:y.route.Component?M=C.createElement(y.route.Component,null):y.route.element?M=y.route.element:M=g,C.createElement(NC,{match:y,routeContext:{outlet:g,matches:P,isDataRoute:n!=null},children:M})};return n&&(y.route.ErrorBoundary||y.route.errorElement||x===0)?C.createElement(y2,{location:n.location,revalidation:n.revalidation,component:_,error:S,children:V(),routeContext:{outlet:null,matches:P,isDataRoute:!0},onError:m}):V()},null)}function My(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function VC(t){let e=C.useContext(Ul);return jt(e,My(t)),e}function LC(t){let e=C.useContext(_f);return jt(e,My(t)),e}function OC(t){let e=C.useContext(li);return jt(e,My(t)),e}function Vy(t){let e=OC(t),n=e.matches[e.matches.length-1];return jt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function BC(){return Vy("useRouteId")}function zC(){var r;let t=C.useContext(Ny),e=LC("useRouteError"),n=Vy("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function FC(){let{router:t}=VC("useNavigate"),e=Vy("useNavigate"),n=C.useRef(!1);return p2(()=>{n.current=!0}),C.useCallback(async(o,l={})=>{fr(n.current,m2),n.current&&(typeof o=="number"?await t.navigate(o):await t.navigate(o,{fromRouteId:e,...l}))},[t,e])}var W1={};function v2(t,e,n){!e&&!W1[t]&&(W1[t]=!0,fr(!1,n))}C.memo(UC);function UC({routes:t,future:e,state:n,onError:r}){return g2(t,void 0,n,r,e)}function WC({to:t,replace:e,state:n,relative:r}){jt(Wl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=C.useContext(pr);fr(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=C.useContext(li),{pathname:c}=Or(),h=bo(),d=Dy(t,Py(l),c,r==="path"),m=JSON.stringify(d);return C.useEffect(()=>{h(JSON.parse(m),{replace:e,state:n,relative:r})},[h,m,r,e,n]),null}function ot(t){jt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function $C({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:o,static:l=!1,unstable_useTransitions:c}){jt(!Wl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=t.replace(/^\/*/,"/"),d=C.useMemo(()=>({basename:h,navigator:o,static:l,unstable_useTransitions:c,future:{}}),[h,o,l,c]);typeof n=="string"&&(n=ba(n));let{pathname:m="/",search:g="",hash:y="",state:x=null,key:S="default"}=n,w=C.useMemo(()=>{let _=ms(m,h);return _==null?null:{location:{pathname:_,search:g,hash:y,state:x,key:S},navigationType:r}},[h,m,g,y,x,S,r]);return fr(w!=null,`<Router basename="${h}"> is not able to match the URL "${m}${g}${y}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:C.createElement(pr.Provider,{value:d},C.createElement(Au.Provider,{children:e,value:w}))}function HC({children:t,location:e}){return AC(Eg(t),e)}function Eg(t,e=[]){let n=[];return C.Children.forEach(t,(r,o)=>{if(!C.isValidElement(r))return;let l=[...e,o];if(r.type===C.Fragment){n.push.apply(n,Eg(r.props.children,l));return}jt(r.type===ot,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),jt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=Eg(r.props.children,l)),n.push(c)}),n}var Th="get",Ch="application/x-www-form-urlencoded";function Ef(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function KC(t){return Ef(t)&&t.tagName.toLowerCase()==="button"}function qC(t){return Ef(t)&&t.tagName.toLowerCase()==="form"}function GC(t){return Ef(t)&&t.tagName.toLowerCase()==="input"}function QC(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function YC(t,e){return t.button===0&&(!e||e==="_self")&&!QC(t)}var fh=null;function XC(){if(fh===null)try{new FormData(document.createElement("form"),0),fh=!1}catch{fh=!0}return fh}var JC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Bp(t){return t!=null&&!JC.has(t)?(fr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ch}"`),null):t}function ZC(t,e){let n,r,o,l,c;if(qC(t)){let h=t.getAttribute("action");r=h?ms(h,e):null,n=t.getAttribute("method")||Th,o=Bp(t.getAttribute("enctype"))||Ch,l=new FormData(t)}else if(KC(t)||GC(t)&&(t.type==="submit"||t.type==="image")){let h=t.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=t.getAttribute("formaction")||h.getAttribute("action");if(r=d?ms(d,e):null,n=t.getAttribute("formmethod")||h.getAttribute("method")||Th,o=Bp(t.getAttribute("formenctype"))||Bp(h.getAttribute("enctype"))||Ch,l=new FormData(h,t),!XC()){let{name:m,type:g,value:y}=t;if(g==="image"){let x=m?`${m}.`:"";l.append(`${x}x`,"0"),l.append(`${x}y`,"0")}else m&&l.append(m,y)}}else{if(Ef(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Th,r=null,o=Ch,c=t}return l&&o==="text/plain"&&(c=l,l=void 0),{action:r,method:n.toLowerCase(),encType:o,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ly(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function eI(t,e,n,r){let o=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n?o.pathname.endsWith("/")?o.pathname=`${o.pathname}_.${r}`:o.pathname=`${o.pathname}.${r}`:o.pathname==="/"?o.pathname=`_root.${r}`:e&&ms(o.pathname,e)==="/"?o.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${r}`,o}async function tI(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function nI(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function rI(t,e,n){let r=await Promise.all(t.map(async o=>{let l=e.routes[o.route.id];if(l){let c=await tI(l,n);return c.links?c.links():[]}return[]}));return aI(r.flat(1).filter(nI).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function $1(t,e,n,r,o,l){let c=(d,m)=>n[m]?d.route.id!==n[m].route.id:!0,h=(d,m)=>{var g;return n[m].pathname!==d.pathname||((g=n[m].route.path)==null?void 0:g.endsWith("*"))&&n[m].params["*"]!==d.params["*"]};return l==="assets"?e.filter((d,m)=>c(d,m)||h(d,m)):l==="data"?e.filter((d,m)=>{var y;let g=r.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(c(d,m)||h(d,m))return!0;if(d.route.shouldRevalidate){let x=d.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((y=n[0])==null?void 0:y.params)||{},nextUrl:new URL(t,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function iI(t,e,{includeHydrateFallback:n}={}){return sI(t.map(r=>{let o=e.routes[r.route.id];if(!o)return[];let l=[o.module];return o.clientActionModule&&(l=l.concat(o.clientActionModule)),o.clientLoaderModule&&(l=l.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(l=l.concat(o.hydrateFallbackModule)),o.imports&&(l=l.concat(o.imports)),l}).flat(1))}function sI(t){return[...new Set(t)]}function oI(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function aI(t,e){let n=new Set;return new Set(e),t.reduce((r,o)=>{let l=JSON.stringify(oI(o));return n.has(l)||(n.add(l),r.push({key:l,link:o})),r},[])}function x2(){let t=C.useContext(Ul);return Ly(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function lI(){let t=C.useContext(_f);return Ly(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Oy=C.createContext(void 0);Oy.displayName="FrameworkContext";function b2(){let t=C.useContext(Oy);return Ly(t,"You must render this element inside a <HydratedRouter> element"),t}function cI(t,e){let n=C.useContext(Oy),[r,o]=C.useState(!1),[l,c]=C.useState(!1),{onFocus:h,onBlur:d,onMouseEnter:m,onMouseLeave:g,onTouchStart:y}=e,x=C.useRef(null);C.useEffect(()=>{if(t==="render"&&c(!0),t==="viewport"){let _=P=>{P.forEach(V=>{c(V.isIntersecting)})},T=new IntersectionObserver(_,{threshold:.5});return x.current&&T.observe(x.current),()=>{T.disconnect()}}},[t]),C.useEffect(()=>{if(r){let _=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(_)}}},[r]);let S=()=>{o(!0)},w=()=>{o(!1),c(!1)};return n?t!=="intent"?[l,x,{}]:[l,x,{onFocus:Kc(h,S),onBlur:Kc(d,w),onMouseEnter:Kc(m,S),onMouseLeave:Kc(g,w),onTouchStart:Kc(y,S)}]:[!1,x,{}]}function Kc(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function uI({page:t,...e}){let{router:n}=x2(),r=C.useMemo(()=>s2(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?C.createElement(hI,{page:t,matches:r,...e}):null}function dI(t){let{manifest:e,routeModules:n}=b2(),[r,o]=C.useState([]);return C.useEffect(()=>{let l=!1;return rI(t,e,n).then(c=>{l||o(c)}),()=>{l=!0}},[t,e,n]),r}function hI({page:t,matches:e,...n}){let r=Or(),{future:o,manifest:l,routeModules:c}=b2(),{basename:h}=x2(),{loaderData:d,matches:m}=lI(),g=C.useMemo(()=>$1(t,e,m,l,r,"data"),[t,e,m,l,r]),y=C.useMemo(()=>$1(t,e,m,l,r,"assets"),[t,e,m,l,r]),x=C.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let _=new Set,T=!1;if(e.forEach(V=>{var F;let M=l.routes[V.route.id];!M||!M.hasLoader||(!g.some(K=>K.route.id===V.route.id)&&V.route.id in d&&((F=c[V.route.id])!=null&&F.shouldRevalidate)||M.hasClientLoader?T=!0:_.add(V.route.id))}),_.size===0)return[];let P=eI(t,h,o.unstable_trailingSlashAwareDataRequests,"data");return T&&_.size>0&&P.searchParams.set("_routes",e.filter(V=>_.has(V.route.id)).map(V=>V.route.id).join(",")),[P.pathname+P.search]},[h,o.unstable_trailingSlashAwareDataRequests,d,r,l,g,e,t,c]),S=C.useMemo(()=>iI(y,l),[y,l]),w=dI(y);return C.createElement(C.Fragment,null,x.map(_=>C.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...n})),S.map(_=>C.createElement("link",{key:_,rel:"modulepreload",href:_,...n})),w.map(({key:_,link:T})=>C.createElement("link",{key:_,nonce:n.nonce,...T})))}function fI(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var mI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{mI&&(window.__reactRouterVersion="7.12.0")}catch{}function pI({basename:t,children:e,unstable_useTransitions:n,window:r}){let o=C.useRef();o.current==null&&(o.current=GT({window:r,v5Compat:!0}));let l=o.current,[c,h]=C.useState({action:l.action,location:l.location}),d=C.useCallback(m=>{n===!1?h(m):C.startTransition(()=>h(m))},[n]);return C.useLayoutEffect(()=>l.listen(d),[l,d]),C.createElement($C,{basename:t,children:e,location:c.location,navigationType:c.action,navigator:l,unstable_useTransitions:n})}var k2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fe=C.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:o,reloadDocument:l,replace:c,state:h,target:d,to:m,preventScrollReset:g,viewTransition:y,unstable_defaultShouldRevalidate:x,...S},w){let{basename:_,unstable_useTransitions:T}=C.useContext(pr),P=typeof m=="string"&&k2.test(m),V=u2(m,_);m=V.to;let M=CC(m,{relative:o}),[F,K,q]=cI(r,S),A=xI(m,{replace:c,state:h,target:d,preventScrollReset:g,relative:o,viewTransition:y,unstable_defaultShouldRevalidate:x,unstable_useTransitions:T});function E(D){e&&e(D),D.defaultPrevented||A(D)}let I=C.createElement("a",{...S,...q,href:V.absoluteURL||M,onClick:V.isExternal||l?e:E,ref:fI(w,K),target:d,"data-discover":!P&&n==="render"?"true":void 0});return F&&!P?C.createElement(C.Fragment,null,I,C.createElement(uI,{page:M})):I});fe.displayName="Link";var gI=C.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:o=!1,style:l,to:c,viewTransition:h,children:d,...m},g){let y=Ru(c,{relative:m.relative}),x=Or(),S=C.useContext(_f),{navigator:w,basename:_}=C.useContext(pr),T=S!=null&&_I(y)&&h===!0,P=w.encodeLocation?w.encodeLocation(y).pathname:y.pathname,V=x.pathname,M=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;n||(V=V.toLowerCase(),M=M?M.toLowerCase():null,P=P.toLowerCase()),M&&_&&(M=ms(M,_)||M);const F=P!=="/"&&P.endsWith("/")?P.length-1:P.length;let K=V===P||!o&&V.startsWith(P)&&V.charAt(F)==="/",q=M!=null&&(M===P||!o&&M.startsWith(P)&&M.charAt(P.length)==="/"),A={isActive:K,isPending:q,isTransitioning:T},E=K?e:void 0,I;typeof r=="function"?I=r(A):I=[r,K?"active":null,q?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let D=typeof l=="function"?l(A):l;return C.createElement(fe,{...m,"aria-current":E,className:I,ref:g,style:D,to:c,viewTransition:h},typeof d=="function"?d(A):d)});gI.displayName="NavLink";var yI=C.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:o,state:l,method:c=Th,action:h,onSubmit:d,relative:m,preventScrollReset:g,viewTransition:y,unstable_defaultShouldRevalidate:x,...S},w)=>{let{unstable_useTransitions:_}=C.useContext(pr),T=wI(),P=SI(h,{relative:m}),V=c.toLowerCase()==="get"?"get":"post",M=typeof h=="string"&&k2.test(h),F=K=>{if(d&&d(K),K.defaultPrevented)return;K.preventDefault();let q=K.nativeEvent.submitter,A=(q==null?void 0:q.getAttribute("formmethod"))||c,E=()=>T(q||K.currentTarget,{fetcherKey:e,method:A,navigate:n,replace:o,state:l,relative:m,preventScrollReset:g,viewTransition:y,unstable_defaultShouldRevalidate:x});_&&n!==!1?C.startTransition(()=>E()):E()};return C.createElement("form",{ref:w,method:V,action:P,onSubmit:r?d:F,...S,"data-discover":!M&&t==="render"?"true":void 0})});yI.displayName="Form";function vI(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function w2(t){let e=C.useContext(Ul);return jt(e,vI(t)),e}function xI(t,{target:e,replace:n,state:r,preventScrollReset:o,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:h,unstable_useTransitions:d}={}){let m=bo(),g=Or(),y=Ru(t,{relative:l});return C.useCallback(x=>{if(YC(x,e)){x.preventDefault();let S=n!==void 0?n:pu(g)===pu(y),w=()=>m(t,{replace:S,state:r,preventScrollReset:o,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:h});d?C.startTransition(()=>w()):w()}},[g,m,y,n,r,e,t,o,l,c,h,d])}var bI=0,kI=()=>`__${String(++bI)}__`;function wI(){let{router:t}=w2("useSubmit"),{basename:e}=C.useContext(pr),n=BC(),r=t.fetch,o=t.navigate;return C.useCallback(async(l,c={})=>{let{action:h,method:d,encType:m,formData:g,body:y}=ZC(l,e);if(c.navigate===!1){let x=c.fetcherKey||kI();await r(x,n,c.action||h,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:g,body:y,formMethod:c.method||d,formEncType:c.encType||m,flushSync:c.flushSync})}else await o(c.action||h,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:g,body:y,formMethod:c.method||d,formEncType:c.encType||m,replace:c.replace,state:c.state,fromRouteId:n,flushSync:c.flushSync,viewTransition:c.viewTransition})},[r,o,e,n])}function SI(t,{relative:e}={}){let{basename:n}=C.useContext(pr),r=C.useContext(li);jt(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),l={...Ru(t||".",{relative:e})},c=Or();if(t==null){l.search=c.search;let h=new URLSearchParams(l.search),d=h.getAll("index");if(d.some(g=>g==="")){h.delete("index"),d.filter(y=>y).forEach(y=>h.append("index",y));let g=h.toString();l.search=g?`?${g}`:""}}return(!t||t===".")&&o.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(l.pathname=l.pathname==="/"?n:ls([n,l.pathname])),pu(l)}function _I(t,{relative:e}={}){let n=C.useContext(h2);jt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=w2("useViewTransitionState"),o=Ru(t,{relative:e});if(!n.isTransitioning)return!1;let l=ms(n.currentLocation.pathname,r)||n.currentLocation.pathname,c=ms(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Uh(o.pathname,c)!=null||Uh(o.pathname,l)!=null}const jI=()=>{};var H1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let o=t.charCodeAt(r);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},EI=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const o=t[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const l=t[n++];e[r++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=t[n++],c=t[n++],h=t[n++],d=((o&7)<<18|(l&63)<<12|(c&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const l=t[n++],c=t[n++];e[r++]=String.fromCharCode((o&15)<<12|(l&63)<<6|c&63)}}return e.join("")},_2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<t.length;o+=3){const l=t[o],c=o+1<t.length,h=c?t[o+1]:0,d=o+2<t.length,m=d?t[o+2]:0,g=l>>2,y=(l&3)<<4|h>>4;let x=(h&15)<<2|m>>6,S=m&63;d||(S=64,c||(x=64)),r.push(n[g],n[y],n[x],n[S])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(S2(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):EI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<t.length;){const l=n[t.charAt(o++)],h=o<t.length?n[t.charAt(o)]:0;++o;const m=o<t.length?n[t.charAt(o)]:64;++o;const y=o<t.length?n[t.charAt(o)]:64;if(++o,l==null||h==null||m==null||y==null)throw new TI;const x=l<<2|h>>4;if(r.push(x),m!==64){const S=h<<4&240|m>>2;if(r.push(S),y!==64){const w=m<<6&192|y;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class TI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const CI=function(t){const e=S2(t);return _2.encodeByteArray(e,!0)},Wh=function(t){return CI(t).replace(/\./g,"")},j2=function(t){try{return _2.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI=()=>II().__FIREBASE_DEFAULTS__,RI=()=>{if(typeof process>"u"||typeof H1>"u")return;const t=H1.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},PI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&j2(t[1]);return e&&JSON.parse(e)},Tf=()=>{try{return jI()||AI()||RI()||PI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},E2=t=>{var e,n;return(n=(e=Tf())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},DI=t=>{const e=E2(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},T2=()=>{var t;return(t=Tf())==null?void 0:t.config},C2=t=>{var e;return(e=Tf())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $l(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function I2(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",o=t.iat||0,l=t.sub||t.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Wh(JSON.stringify(n)),Wh(JSON.stringify(c)),""].join(".")}const iu={};function VI(){const t={prod:[],emulator:[]};for(const e of Object.keys(iu))iu[e]?t.emulator.push(e):t.prod.push(e);return t}function LI(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let K1=!1;function A2(t,e){if(typeof window>"u"||typeof document>"u"||!$l(window.location.host)||iu[t]===e||iu[t]||K1)return;iu[t]=e;function n(x){return`__firebase__banner__${x}`}const r="__firebase__banner",l=VI().prod.length>0;function c(){const x=document.getElementById(r);x&&x.remove()}function h(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function d(x,S){x.setAttribute("width","24"),x.setAttribute("id",S),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function m(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{K1=!0,c()},x}function g(x,S){x.setAttribute("id",S),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function y(){const x=LI(r),S=n("text"),w=document.getElementById(S)||document.createElement("span"),_=n("learnmore"),T=document.getElementById(_)||document.createElement("a"),P=n("preprendIcon"),V=document.getElementById(P)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const M=x.element;h(M),g(T,_);const F=m();d(V,P),M.append(V,w,T,F),document.body.appendChild(M)}l?(w.innerText="Preview backend disconnected.",V.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(V.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function OI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Rn())}function BI(){var e;const t=(e=Tf())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function zI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function FI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function UI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function WI(){const t=Rn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function $I(){return!BI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function HI(){try{return typeof indexedDB=="object"}catch{return!1}}function KI(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var l;e(((l=o.error)==null?void 0:l.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI="FirebaseError";class ws extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=qI,Object.setPrototypeOf(this,ws.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pu.prototype.create)}}class Pu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},o=`${this.service}/${e}`,l=this.errors[e],c=l?GI(l,r):"Error",h=`${this.serviceName}: ${c} (${o}).`;return new ws(o,h,r)}}function GI(t,e){return t.replace(QI,(n,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const QI=/\{\$([^}]+)}/g;function YI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ps(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const o of n){if(!r.includes(o))return!1;const l=t[o],c=e[o];if(q1(l)&&q1(c)){if(!ps(l,c))return!1}else if(l!==c)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function q1(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Du(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Xc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,l]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function Jc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function XI(t,e){const n=new JI(t,e);return n.subscribe.bind(n)}class JI{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let o;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");ZI(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:r},o.next===void 0&&(o.next=zp),o.error===void 0&&(o.error=zp),o.complete===void 0&&(o.complete=zp);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ZI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function zp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(t){return t&&t._delegate?t._delegate:t}class ca{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new NI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(nA(e))try{this.getOrInitializeService({instanceIdentifier:ta})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:o});r.resolve(l)}catch{}}}}clearInstance(e=ta){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ta){return this.instances.has(e)}getOptions(e=ta){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[l,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);r===h&&c.resolve(o)}return o}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const l=this.instances.get(r);return l&&e(l,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const o of r)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:tA(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ta){return this.component?this.component.multipleInstances?e:ta:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function tA(t){return t===ta?void 0:t}function nA(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new eA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Qe||(Qe={}));const iA={debug:Qe.DEBUG,verbose:Qe.VERBOSE,info:Qe.INFO,warn:Qe.WARN,error:Qe.ERROR,silent:Qe.SILENT},sA=Qe.INFO,oA={[Qe.DEBUG]:"log",[Qe.VERBOSE]:"log",[Qe.INFO]:"info",[Qe.WARN]:"warn",[Qe.ERROR]:"error"},aA=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),o=oA[e];if(o)console[o](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class By{constructor(e){this.name=e,this._logLevel=sA,this._logHandler=aA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?iA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Qe.DEBUG,...e),this._logHandler(this,Qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Qe.VERBOSE,...e),this._logHandler(this,Qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Qe.INFO,...e),this._logHandler(this,Qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Qe.WARN,...e),this._logHandler(this,Qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Qe.ERROR,...e),this._logHandler(this,Qe.ERROR,...e)}}const lA=(t,e)=>e.some(n=>t instanceof n);let G1,Q1;function cA(){return G1||(G1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function uA(){return Q1||(Q1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const R2=new WeakMap,Tg=new WeakMap,P2=new WeakMap,Fp=new WeakMap,zy=new WeakMap;function dA(t){const e=new Promise((n,r)=>{const o=()=>{t.removeEventListener("success",l),t.removeEventListener("error",c)},l=()=>{n(so(t.result)),o()},c=()=>{r(t.error),o()};t.addEventListener("success",l),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&R2.set(n,t)}).catch(()=>{}),zy.set(e,t),e}function hA(t){if(Tg.has(t))return;const e=new Promise((n,r)=>{const o=()=>{t.removeEventListener("complete",l),t.removeEventListener("error",c),t.removeEventListener("abort",c)},l=()=>{n(),o()},c=()=>{r(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",l),t.addEventListener("error",c),t.addEventListener("abort",c)});Tg.set(t,e)}let Cg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Tg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||P2.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return so(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function fA(t){Cg=t(Cg)}function mA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Up(this),e,...n);return P2.set(r,e.sort?e.sort():[e]),so(r)}:uA().includes(t)?function(...e){return t.apply(Up(this),e),so(R2.get(this))}:function(...e){return so(t.apply(Up(this),e))}}function pA(t){return typeof t=="function"?mA(t):(t instanceof IDBTransaction&&hA(t),lA(t,cA())?new Proxy(t,Cg):t)}function so(t){if(t instanceof IDBRequest)return dA(t);if(Fp.has(t))return Fp.get(t);const e=pA(t);return e!==t&&(Fp.set(t,e),zy.set(e,t)),e}const Up=t=>zy.get(t);function gA(t,e,{blocked:n,upgrade:r,blocking:o,terminated:l}={}){const c=indexedDB.open(t,e),h=so(c);return r&&c.addEventListener("upgradeneeded",d=>{r(so(c.result),d.oldVersion,d.newVersion,so(c.transaction),d)}),n&&c.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),h.then(d=>{l&&d.addEventListener("close",()=>l()),o&&d.addEventListener("versionchange",m=>o(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const yA=["get","getKey","getAll","getAllKeys","count"],vA=["put","add","delete","clear"],Wp=new Map;function Y1(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Wp.get(e))return Wp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=vA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||yA.includes(n)))return;const l=async function(c,...h){const d=this.transaction(c,o?"readwrite":"readonly");let m=d.store;return r&&(m=m.index(h.shift())),(await Promise.all([m[n](...h),o&&d.done]))[0]};return Wp.set(e,l),l}fA(t=>({...t,get:(e,n,r)=>Y1(e,n)||t.get(e,n,r),has:(e,n)=>!!Y1(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(bA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function bA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ig="@firebase/app",X1="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs=new By("@firebase/app"),kA="@firebase/app-compat",wA="@firebase/analytics-compat",SA="@firebase/analytics",_A="@firebase/app-check-compat",jA="@firebase/app-check",EA="@firebase/auth",TA="@firebase/auth-compat",CA="@firebase/database",IA="@firebase/data-connect",AA="@firebase/database-compat",RA="@firebase/functions",PA="@firebase/functions-compat",DA="@firebase/installations",NA="@firebase/installations-compat",MA="@firebase/messaging",VA="@firebase/messaging-compat",LA="@firebase/performance",OA="@firebase/performance-compat",BA="@firebase/remote-config",zA="@firebase/remote-config-compat",FA="@firebase/storage",UA="@firebase/storage-compat",WA="@firebase/firestore",$A="@firebase/ai",HA="@firebase/firestore-compat",KA="firebase",qA="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ag="[DEFAULT]",GA={[Ig]:"fire-core",[kA]:"fire-core-compat",[SA]:"fire-analytics",[wA]:"fire-analytics-compat",[jA]:"fire-app-check",[_A]:"fire-app-check-compat",[EA]:"fire-auth",[TA]:"fire-auth-compat",[CA]:"fire-rtdb",[IA]:"fire-data-connect",[AA]:"fire-rtdb-compat",[RA]:"fire-fn",[PA]:"fire-fn-compat",[DA]:"fire-iid",[NA]:"fire-iid-compat",[MA]:"fire-fcm",[VA]:"fire-fcm-compat",[LA]:"fire-perf",[OA]:"fire-perf-compat",[BA]:"fire-rc",[zA]:"fire-rc-compat",[FA]:"fire-gcs",[UA]:"fire-gcs-compat",[WA]:"fire-fst",[HA]:"fire-fst-compat",[$A]:"fire-vertex","fire-js":"fire-js",[KA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $h=new Map,QA=new Map,Rg=new Map;function J1(t,e){try{t.container.addComponent(e)}catch(n){gs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Tl(t){const e=t.name;if(Rg.has(e))return gs.debug(`There were multiple attempts to register component ${e}.`),!1;Rg.set(e,t);for(const n of $h.values())J1(n,t);for(const n of QA.values())J1(n,t);return!0}function Fy(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function cr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},oo=new Pu("app","Firebase",YA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ca("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw oo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hl=qA;function D2(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Ag,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw oo.create("bad-app-name",{appName:String(o)});if(n||(n=T2()),!n)throw oo.create("no-options");const l=$h.get(o);if(l){if(ps(n,l.options)&&ps(r,l.config))return l;throw oo.create("duplicate-app",{appName:o})}const c=new rA(o);for(const d of Rg.values())c.addComponent(d);const h=new XA(n,r,c);return $h.set(o,h),h}function N2(t=Ag){const e=$h.get(t);if(!e&&t===Ag&&T2())return D2();if(!e)throw oo.create("no-app",{appName:t});return e}function ao(t,e,n){let r=GA[t]??t;n&&(r+=`-${n}`);const o=r.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const c=[`Unable to register library "${r}" with version "${e}":`];o&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),gs.warn(c.join(" "));return}Tl(new ca(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA="firebase-heartbeat-database",ZA=1,gu="firebase-heartbeat-store";let $p=null;function M2(){return $p||($p=gA(JA,ZA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(gu)}catch(n){console.warn(n)}}}}).catch(t=>{throw oo.create("idb-open",{originalErrorMessage:t.message})})),$p}async function eR(t){try{const n=(await M2()).transaction(gu),r=await n.objectStore(gu).get(V2(t));return await n.done,r}catch(e){if(e instanceof ws)gs.warn(e.message);else{const n=oo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});gs.warn(n.message)}}}async function Z1(t,e){try{const r=(await M2()).transaction(gu,"readwrite");await r.objectStore(gu).put(e,V2(t)),await r.done}catch(n){if(n instanceof ws)gs.warn(n.message);else{const r=oo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});gs.warn(r.message)}}}function V2(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR=1024,nR=30;class rR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new sR(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=eb();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>nR){const c=oR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){gs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=eb(),{heartbeatsToSend:r,unsentEntries:o}=iR(this._heartbeatsCache.heartbeats),l=Wh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(n){return gs.warn(n),""}}}function eb(){return new Date().toISOString().substring(0,10)}function iR(t,e=tR){const n=[];let r=t.slice();for(const o of t){const l=n.find(c=>c.agent===o.agent);if(l){if(l.dates.push(o.date),tb(n)>e){l.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),tb(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class sR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return HI()?KI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await eR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Z1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Z1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function tb(t){return Wh(JSON.stringify({version:2,heartbeats:t})).length}function oR(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aR(t){Tl(new ca("platform-logger",e=>new xA(e),"PRIVATE")),Tl(new ca("heartbeat",e=>new rR(e),"PRIVATE")),ao(Ig,X1,t),ao(Ig,X1,"esm2020"),ao("fire-js","")}aR("");function L2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const lR=L2,O2=new Pu("auth","Firebase",L2());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hh=new By("@firebase/auth");function cR(t,...e){Hh.logLevel<=Qe.WARN&&Hh.warn(`Auth (${Hl}): ${t}`,...e)}function Ih(t,...e){Hh.logLevel<=Qe.ERROR&&Hh.error(`Auth (${Hl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mr(t,...e){throw Wy(t,...e)}function si(t,...e){return Wy(t,...e)}function Uy(t,e,n){const r={...lR(),[e]:n};return new Pu("auth","Firebase",r).create(e,{appName:t.name})}function cs(t){return Uy(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function uR(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Mr(t,"argument-error"),Uy(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Wy(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return O2.create(t,...e)}function Ne(t,e,...n){if(!t)throw Wy(e,...n)}function os(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ih(e),new Error(e)}function ys(t,e){t||os(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pg(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function dR(){return nb()==="http:"||nb()==="https:"}function nb(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(dR()||FI()||"connection"in navigator)?navigator.onLine:!0}function fR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e,n){this.shortDelay=e,this.longDelay=n,ys(n>e,"Short delay should be less than long delay!"),this.isMobile=OI()||UI()}get(){return hR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $y(t,e){ys(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;os("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;os("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;os("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],gR=new Nu(3e4,6e4);function ko(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ss(t,e,n,r,o={}){return z2(t,o,async()=>{let l={},c={};r&&(e==="GET"?c=r:l={body:JSON.stringify(r)});const h=Du({key:t.config.apiKey,...c}).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const m={method:e,headers:d,...l};return zI()||(m.referrerPolicy="no-referrer"),t.emulatorConfig&&$l(t.emulatorConfig.host)&&(m.credentials="include"),B2.fetch()(await F2(t,t.config.apiHost,n,h),m)})}async function z2(t,e,n){t._canInitEmulator=!1;const r={...mR,...e};try{const o=new vR(t),l=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw mh(t,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const h=l.ok?c.errorMessage:c.error.message,[d,m]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw mh(t,"credential-already-in-use",c);if(d==="EMAIL_EXISTS")throw mh(t,"email-already-in-use",c);if(d==="USER_DISABLED")throw mh(t,"user-disabled",c);const g=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw Uy(t,g,m);Mr(t,g)}}catch(o){if(o instanceof ws)throw o;Mr(t,"network-request-failed",{message:String(o)})}}async function Mu(t,e,n,r,o={}){const l=await Ss(t,e,n,r,o);return"mfaPendingCredential"in l&&Mr(t,"multi-factor-auth-required",{_serverResponse:l}),l}async function F2(t,e,n,r){const o=`${e}${n}?${r}`,l=t,c=l.config.emulator?$y(t.config,o):`${t.config.apiScheme}://${o}`;return pR.includes(n)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function yR(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class vR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(si(this.auth,"network-request-failed")),gR.get())})}}function mh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const o=si(t,e,r);return o.customData._tokenResponse=n,o}function rb(t){return t!==void 0&&t.enterprise!==void 0}class xR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return yR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function bR(t,e){return Ss(t,"GET","/v2/recaptchaConfig",ko(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kR(t,e){return Ss(t,"POST","/v1/accounts:delete",e)}async function Kh(t,e){return Ss(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function su(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function wR(t,e=!1){const n=Bt(t),r=await n.getIdToken(e),o=Hy(r);Ne(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:o,token:r,authTime:su(Hp(o.auth_time)),issuedAtTime:su(Hp(o.iat)),expirationTime:su(Hp(o.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Hp(t){return Number(t)*1e3}function Hy(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ih("JWT malformed, contained fewer than 3 sections"),null;try{const o=j2(n);return o?JSON.parse(o):(Ih("Failed to decode base64 JWT payload"),null)}catch(o){return Ih("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function ib(t){const e=Hy(t);return Ne(e,"internal-error"),Ne(typeof e.exp<"u","internal-error"),Ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ws&&SR(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function SR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=su(this.lastLoginAt),this.creationTime=su(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qh(t){var y;const e=t.auth,n=await t.getIdToken(),r=await Cl(t,Kh(e,{idToken:n}));Ne(r==null?void 0:r.users.length,e,"internal-error");const o=r.users[0];t._notifyReloadListener(o);const l=(y=o.providerUserInfo)!=null&&y.length?U2(o.providerUserInfo):[],c=ER(t.providerData,l),h=t.isAnonymous,d=!(t.email&&o.passwordHash)&&!(c!=null&&c.length),m=h?d:!1,g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Dg(o.createdAt,o.lastLoginAt),isAnonymous:m};Object.assign(t,g)}async function jR(t){const e=Bt(t);await qh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ER(t,e){return[...t.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function U2(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TR(t,e){const n=await z2(t,{},async()=>{const r=Du({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=t.config,c=await F2(t,o,"/v1/token",`key=${l}`),h=await t._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:h,body:r};return t.emulatorConfig&&$l(t.emulatorConfig.host)&&(d.credentials="include"),B2.fetch()(c,d)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function CR(t,e){return Ss(t,"POST","/v2/accounts:revokeToken",ko(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ne(e.idToken,"internal-error"),Ne(typeof e.idToken<"u","internal-error"),Ne(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ib(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ne(e.length!==0,"internal-error");const n=ib(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:o,expiresIn:l}=await TR(e,n);this.updateTokensAndExpiration(r,o,Number(l))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:o,expirationTime:l}=n,c=new vl;return r&&(Ne(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),o&&(Ne(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),l&&(Ne(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new vl,this.toJSON())}_performRefresh(){return os("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Js(t,e){Ne(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ri{constructor({uid:e,auth:n,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new _R(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Dg(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Cl(this,this.stsTokenManager.getToken(this.auth,e));return Ne(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return wR(this,e)}reload(){return jR(this)}_assign(e){this!==e&&(Ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ri({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await qh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(cr(this.auth.app))return Promise.reject(cs(this.auth));const e=await this.getIdToken();return await Cl(this,kR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,o=n.email??void 0,l=n.phoneNumber??void 0,c=n.photoURL??void 0,h=n.tenantId??void 0,d=n._redirectEventId??void 0,m=n.createdAt??void 0,g=n.lastLoginAt??void 0,{uid:y,emailVerified:x,isAnonymous:S,providerData:w,stsTokenManager:_}=n;Ne(y&&_,e,"internal-error");const T=vl.fromJSON(this.name,_);Ne(typeof y=="string",e,"internal-error"),Js(r,e.name),Js(o,e.name),Ne(typeof x=="boolean",e,"internal-error"),Ne(typeof S=="boolean",e,"internal-error"),Js(l,e.name),Js(c,e.name),Js(h,e.name),Js(d,e.name),Js(m,e.name),Js(g,e.name);const P=new ri({uid:y,auth:e,email:o,emailVerified:x,displayName:r,isAnonymous:S,photoURL:c,phoneNumber:l,tenantId:h,stsTokenManager:T,createdAt:m,lastLoginAt:g});return w&&Array.isArray(w)&&(P.providerData=w.map(V=>({...V}))),d&&(P._redirectEventId=d),P}static async _fromIdTokenResponse(e,n,r=!1){const o=new vl;o.updateFromServerResponse(n);const l=new ri({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await qh(l),l}static async _fromGetAccountInfoResponse(e,n,r){const o=n.users[0];Ne(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?U2(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),h=new vl;h.updateFromIdToken(r);const d=new ri({uid:o.localId,auth:e,stsTokenManager:h,isAnonymous:c}),m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Dg(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(d,m),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb=new Map;function as(t){ys(t instanceof Function,"Expected a class definition");let e=sb.get(t);return e?(ys(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,sb.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}W2.type="NONE";const ob=W2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ah(t,e,n){return`firebase:${t}:${e}:${n}`}class xl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:o,name:l}=this.auth;this.fullUserKey=Ah(this.userKey,o.apiKey,l),this.fullPersistenceKey=Ah("persistence",o.apiKey,l),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Kh(this.auth,{idToken:e}).catch(()=>{});return n?ri._fromGetAccountInfoResponse(this.auth,n,e):null}return ri._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new xl(as(ob),e,r);const o=(await Promise.all(n.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let l=o[0]||as(ob);const c=Ah(r,e.config.apiKey,e.name);let h=null;for(const m of n)try{const g=await m._get(c);if(g){let y;if(typeof g=="string"){const x=await Kh(e,{idToken:g}).catch(()=>{});if(!x)break;y=await ri._fromGetAccountInfoResponse(e,x,g)}else y=ri._fromJSON(e,g);m!==l&&(h=y),l=m;break}}catch{}const d=o.filter(m=>m._shouldAllowMigration);return!l._shouldAllowMigration||!d.length?new xl(l,e,r):(l=d[0],h&&await l._set(c,h.toJSON()),await Promise.all(n.map(async m=>{if(m!==l)try{await m._remove(c)}catch{}})),new xl(l,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ab(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(q2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if($2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Q2(e))return"Blackberry";if(Y2(e))return"Webos";if(H2(e))return"Safari";if((e.includes("chrome/")||K2(e))&&!e.includes("edge/"))return"Chrome";if(G2(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function $2(t=Rn()){return/firefox\//i.test(t)}function H2(t=Rn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function K2(t=Rn()){return/crios\//i.test(t)}function q2(t=Rn()){return/iemobile/i.test(t)}function G2(t=Rn()){return/android/i.test(t)}function Q2(t=Rn()){return/blackberry/i.test(t)}function Y2(t=Rn()){return/webos/i.test(t)}function Ky(t=Rn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function IR(t=Rn()){var e;return Ky(t)&&!!((e=window.navigator)!=null&&e.standalone)}function AR(){return WI()&&document.documentMode===10}function X2(t=Rn()){return Ky(t)||G2(t)||Y2(t)||Q2(t)||/windows phone/i.test(t)||q2(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J2(t,e=[]){let n;switch(t){case"Browser":n=ab(Rn());break;case"Worker":n=`${ab(Rn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Hl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=l=>new Promise((c,h)=>{try{const d=e(l);c(d)}catch(d){h(d)}});r.onAbort=n,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PR(t,e={}){return Ss(t,"GET","/v2/passwordPolicy",ko(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR=6;class NR{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??DR,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e,n,r,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lb(this),this.idTokenSubscription=new lb(this),this.beforeStateQueue=new RR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=O2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=as(n)),this._initializationPromise=this.queue(async()=>{var r,o,l;if(!this._deleted&&(this.persistenceManager=await xl.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Kh(this,{idToken:e}),r=await ri._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(cr(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(h,h))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,h=r==null?void 0:r._redirectEventId,d=await this.tryRedirectSignIn(e);(!c||c===h)&&(d!=null&&d.user)&&(r=d.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await qh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=fR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(cr(this.app))return Promise.reject(cs(this));const n=e?Bt(e):null;return n&&Ne(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return cr(this.app)?Promise.reject(cs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return cr(this.app)?Promise.reject(cs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(as(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await PR(this),n=new NR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Pu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await CR(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&as(e)||this._popupRedirectResolver;Ne(n,this,"argument-error"),this.redirectPersistenceManager=await xl.create(this,[as(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,o){if(this._deleted)return()=>{};const l=typeof n=="function"?n:n.next.bind(n);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ne(h,this,"internal-error"),h.then(()=>{c||l(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,r,o);return()=>{c=!0,d()}}else{const d=e.addObserver(n);return()=>{c=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=J2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(cr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&cR(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function wo(t){return Bt(t)}class lb{constructor(e){this.auth=e,this.observer=null,this.addObserver=XI(n=>this.observer=n)}get next(){return Ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function VR(t){Cf=t}function Z2(t){return Cf.loadJS(t)}function LR(){return Cf.recaptchaEnterpriseScript}function OR(){return Cf.gapiScript}function BR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class zR{constructor(){this.enterprise=new FR}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class FR{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const UR="recaptcha-enterprise",eS="NO_RECAPTCHA";class WR{constructor(e){this.type=UR,this.auth=wo(e)}async verify(e="verify",n=!1){async function r(l){if(!n){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,h)=>{bR(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const m=new xR(d);return l.tenantId==null?l._agentRecaptchaConfig=m:l._tenantRecaptchaConfigs[l.tenantId]=m,c(m.siteKey)}}).catch(d=>{h(d)})})}function o(l,c,h){const d=window.grecaptcha;rb(d)?d.enterprise.ready(()=>{d.enterprise.execute(l,{action:e}).then(m=>{c(m)}).catch(()=>{c(eS)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new zR().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{r(this.auth).then(h=>{if(!n&&rb(window.grecaptcha))o(h,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let d=LR();d.length!==0&&(d+=h),Z2(d).then(()=>{o(h,l,c)}).catch(m=>{c(m)})}}).catch(h=>{c(h)})})}}async function cb(t,e,n,r=!1,o=!1){const l=new WR(t);let c;if(o)c=eS;else try{c=await l.verify(n)}catch{c=await l.verify(n,!0)}const h={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const d=h.phoneEnrollmentInfo.phoneNumber,m=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const d=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return r?Object.assign(h,{captchaResp:c}):Object.assign(h,{captchaResponse:c}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function Ng(t,e,n,r,o){var l;if((l=t._getRecaptchaConfig())!=null&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await cb(t,e,n,n==="getOobCode");return r(t,c)}else return r(t,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await cb(t,e,n,n==="getOobCode");return r(t,h)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $R(t,e){const n=Fy(t,"auth");if(n.isInitialized()){const o=n.getImmediate(),l=n.getOptions();if(ps(l,e??{}))return o;Mr(o,"already-initialized")}return n.initialize({options:e})}function HR(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(as);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function KR(t,e,n){const r=wo(t);Ne(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,l=tS(e),{host:c,port:h}=qR(e),d=h===null?"":`:${h}`,m={url:`${l}//${c}${d}/`},g=Object.freeze({host:c,port:h,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Ne(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ne(ps(m,r.config.emulator)&&ps(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=m,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,$l(c)?(I2(`${l}//${c}${d}`),A2("Auth",!0)):GR()}function tS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function qR(t){const e=tS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const l=o[1];return{host:l,port:ub(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:ub(c)}}}function ub(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function GR(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return os("not implemented")}_getIdTokenResponse(e){return os("not implemented")}_linkToIdToken(e,n){return os("not implemented")}_getReauthenticationResolver(e){return os("not implemented")}}async function QR(t,e){return Ss(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YR(t,e){return Mu(t,"POST","/v1/accounts:signInWithPassword",ko(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XR(t,e){return Mu(t,"POST","/v1/accounts:signInWithEmailLink",ko(t,e))}async function JR(t,e){return Mu(t,"POST","/v1/accounts:signInWithEmailLink",ko(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu extends qy{constructor(e,n,r,o=null){super("password",r),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new yu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new yu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ng(e,n,"signInWithPassword",YR);case"emailLink":return XR(e,{email:this._email,oobCode:this._password});default:Mr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ng(e,r,"signUpPassword",QR);case"emailLink":return JR(e,{idToken:n,email:this._email,oobCode:this._password});default:Mr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bl(t,e){return Mu(t,"POST","/v1/accounts:signInWithIdp",ko(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR="http://localhost";class ua extends qy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ua(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Mr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...l}=n;if(!r||!o)return null;const c=new ua(r,o);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const n=this.buildRequest();return bl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,bl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,bl(e,n)}buildRequest(){const e={requestUri:ZR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Du(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eP(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function tP(t){const e=Xc(Jc(t)).link,n=e?Xc(Jc(e)).deep_link_id:null,r=Xc(Jc(t)).deep_link_id;return(r?Xc(Jc(r)).link:null)||r||n||e||t}class Gy{constructor(e){const n=Xc(Jc(e)),r=n.apiKey??null,o=n.oobCode??null,l=eP(n.mode??null);Ne(r&&o&&l,"argument-error"),this.apiKey=r,this.operation=l,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=tP(e);try{return new Gy(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(){this.providerId=Kl.PROVIDER_ID}static credential(e,n){return yu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Gy.parseLink(n);return Ne(r,"argument-error"),yu._fromEmailAndCode(e,r.code,r.tenantId)}}Kl.PROVIDER_ID="password";Kl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Kl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu extends Qy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo extends Vu{constructor(){super("facebook.com")}static credential(e){return ua._fromParams({providerId:eo.PROVIDER_ID,signInMethod:eo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return eo.credentialFromTaggedObject(e)}static credentialFromError(e){return eo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return eo.credential(e.oauthAccessToken)}catch{return null}}}eo.FACEBOOK_SIGN_IN_METHOD="facebook.com";eo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss extends Vu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ua._fromParams({providerId:ss.PROVIDER_ID,signInMethod:ss.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ss.credentialFromTaggedObject(e)}static credentialFromError(e){return ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ss.credential(n,r)}catch{return null}}}ss.GOOGLE_SIGN_IN_METHOD="google.com";ss.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to extends Vu{constructor(){super("github.com")}static credential(e){return ua._fromParams({providerId:to.PROVIDER_ID,signInMethod:to.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return to.credentialFromTaggedObject(e)}static credentialFromError(e){return to.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return to.credential(e.oauthAccessToken)}catch{return null}}}to.GITHUB_SIGN_IN_METHOD="github.com";to.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no extends Vu{constructor(){super("twitter.com")}static credential(e,n){return ua._fromParams({providerId:no.PROVIDER_ID,signInMethod:no.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return no.credentialFromTaggedObject(e)}static credentialFromError(e){return no.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return no.credential(n,r)}catch{return null}}}no.TWITTER_SIGN_IN_METHOD="twitter.com";no.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nP(t,e){return Mu(t,"POST","/v1/accounts:signUp",ko(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,o=!1){const l=await ri._fromIdTokenResponse(e,r,o),c=db(r);return new da({user:l,providerId:c,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const o=db(r);return new da({user:e,providerId:o,_tokenResponse:r,operationType:n})}}function db(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh extends ws{constructor(e,n,r,o){super(n.code,n.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,Gh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,o){return new Gh(e,n,r,o)}}function nS(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Gh._fromErrorAndOperation(t,l,e,r):l})}async function rP(t,e,n=!1){const r=await Cl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return da._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iP(t,e,n=!1){const{auth:r}=t;if(cr(r.app))return Promise.reject(cs(r));const o="reauthenticate";try{const l=await Cl(t,nS(r,o,e,t),n);Ne(l.idToken,r,"internal-error");const c=Hy(l.idToken);Ne(c,r,"internal-error");const{sub:h}=c;return Ne(t.uid===h,r,"user-mismatch"),da._forOperation(t,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Mr(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rS(t,e,n=!1){if(cr(t.app))return Promise.reject(cs(t));const r="signIn",o=await nS(t,r,e),l=await da._fromIdTokenResponse(t,r,o);return n||await t._updateCurrentUser(l.user),l}async function sP(t,e){return rS(wo(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iS(t){const e=wo(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function oP(t,e,n){if(cr(t.app))return Promise.reject(cs(t));const r=wo(t),c=await Ng(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",nP).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&iS(t),d}),h=await da._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(h.user),h}function aP(t,e,n){return cr(t.app)?Promise.reject(cs(t)):sP(Bt(t),Kl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&iS(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lP(t,e){return Ss(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cP(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Bt(t),l={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},c=await Cl(r,lP(r.auth,l));r.displayName=c.displayName||null,r.photoURL=c.photoUrl||null;const h=r.providerData.find(({providerId:d})=>d==="password");h&&(h.displayName=r.displayName,h.photoURL=r.photoURL),await r._updateTokensIfNecessary(c)}function uP(t,e,n,r){return Bt(t).onIdTokenChanged(e,n,r)}function dP(t,e,n){return Bt(t).beforeAuthStateChanged(e,n)}function hP(t,e,n,r){return Bt(t).onAuthStateChanged(e,n,r)}function fP(t){return Bt(t).signOut()}const Qh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Qh,"1"),this.storage.removeItem(Qh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mP=1e3,pP=10;class oS extends sS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=X2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),o=this.localCache[n];r!==o&&e(n,o,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,h,d)=>{this.notifyListeners(c,d)});return}const r=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(r);!n&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);AR()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,pP):o()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},mP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}oS.type="LOCAL";const gP=oS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS extends sS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}aS.type="SESSION";const lS=aS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yP(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const r=new If(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:o,data:l}=n.data,c=this.handlersMap[o];if(!(c!=null&&c.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const h=Array.from(c).map(async m=>m(n.origin,l)),d=await yP(h);n.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}If.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yy(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,c;return new Promise((h,d)=>{const m=Yy("",20);o.port1.start();const g=setTimeout(()=>{d(new Error("unsupported_event"))},r);c={messageChannel:o,onMessage(y){const x=y;if(x.data.eventId===m)switch(x.data.status){case"ack":clearTimeout(g),l=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),h(x.data.response);break;default:clearTimeout(g),clearTimeout(l),d(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:m,data:n},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mi(){return window}function xP(t){Mi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cS(){return typeof Mi().WorkerGlobalScope<"u"&&typeof Mi().importScripts=="function"}async function bP(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function kP(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function wP(){return cS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS="firebaseLocalStorageDb",SP=1,Yh="firebaseLocalStorage",dS="fbase_key";class Lu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Af(t,e){return t.transaction([Yh],e?"readwrite":"readonly").objectStore(Yh)}function _P(){const t=indexedDB.deleteDatabase(uS);return new Lu(t).toPromise()}function Mg(){const t=indexedDB.open(uS,SP);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Yh,{keyPath:dS})}catch(o){n(o)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Yh)?e(r):(r.close(),await _P(),e(await Mg()))})})}async function hb(t,e,n){const r=Af(t,!0).put({[dS]:e,value:n});return new Lu(r).toPromise()}async function jP(t,e){const n=Af(t,!1).get(e),r=await new Lu(n).toPromise();return r===void 0?null:r.value}function fb(t,e){const n=Af(t,!0).delete(e);return new Lu(n).toPromise()}const EP=800,TP=3;class hS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Mg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>TP)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return cS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=If._getInstance(wP()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await bP(),!this.activeServiceWorker)return;this.sender=new vP(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||kP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Mg();return await hb(e,Qh,"1"),await fb(e,Qh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>hb(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>jP(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>fb(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Af(o,!1).getAll();return new Lu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),EP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}hS.type="LOCAL";const CP=hS;new Nu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fS(t,e){return e?as(e):(Ne(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy extends qy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return bl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return bl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function IP(t){return rS(t.auth,new Xy(t),t.bypassAuthState)}function AP(t){const{auth:e,user:n}=t;return Ne(n,e,"internal-error"),iP(n,new Xy(t),t.bypassAuthState)}async function RP(t){const{auth:e,user:n}=t;return Ne(n,e,"internal-error"),rP(n,new Xy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e,n,r,o,l=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:o,tenantId:l,error:c,type:h}=e;if(c){this.reject(c);return}const d={auth:this.auth,requestUri:n,sessionId:r,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return IP;case"linkViaPopup":case"linkViaRedirect":return RP;case"reauthViaPopup":case"reauthViaRedirect":return AP;default:Mr(this.auth,"internal-error")}}resolve(e){ys(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ys(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PP=new Nu(2e3,1e4);async function DP(t,e,n){if(cr(t.app))return Promise.reject(si(t,"operation-not-supported-in-this-environment"));const r=wo(t);uR(t,e,Qy);const o=fS(r,n);return new ra(r,"signInViaPopup",e,o).executeNotNull()}class ra extends mS{constructor(e,n,r,o,l){super(e,n,o,l),this.provider=r,this.authWindow=null,this.pollId=null,ra.currentPopupAction&&ra.currentPopupAction.cancel(),ra.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ne(e,this.auth,"internal-error"),e}async onExecution(){ys(this.filter.length===1,"Popup operations only handle one event");const e=Yy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(si(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(si(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ra.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(si(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,PP.get())};e()}}ra.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NP="pendingRedirect",Rh=new Map;class MP extends mS{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Rh.get(this.auth._key());if(!e){try{const r=await VP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Rh.set(this.auth._key(),e)}return this.bypassAuthState||Rh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function VP(t,e){const n=BP(e),r=OP(t);if(!await r._isAvailable())return!1;const o=await r._get(n)==="true";return await r._remove(n),o}function LP(t,e){Rh.set(t._key(),e)}function OP(t){return as(t._redirectPersistence)}function BP(t){return Ah(NP,t.config.apiKey,t.name)}async function zP(t,e,n=!1){if(cr(t.app))return Promise.reject(cs(t));const r=wo(t),o=fS(r,e),c=await new MP(r,o,n).execute();return c&&!n&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FP=600*1e3;class UP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!WP(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!pS(e)){const o=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(si(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=FP&&this.cachedEventUids.clear(),this.cachedEventUids.has(mb(e))}saveEventToCache(e){this.cachedEventUids.add(mb(e)),this.lastProcessedEventTime=Date.now()}}function mb(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function pS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function WP(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $P(t,e={}){return Ss(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,KP=/^https?/;async function qP(t){if(t.config.emulator)return;const{authorizedDomains:e}=await $P(t);for(const n of e)try{if(GP(n))return}catch{}Mr(t,"unauthorized-domain")}function GP(t){const e=Pg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===r}if(!KP.test(n))return!1;if(HP.test(t))return r===t;const o=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP=new Nu(3e4,6e4);function pb(){const t=Mi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function YP(t){return new Promise((e,n)=>{var o,l,c;function r(){pb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{pb(),n(si(t,"network-request-failed"))},timeout:QP.get()})}if((l=(o=Mi().gapi)==null?void 0:o.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((c=Mi().gapi)!=null&&c.load)r();else{const h=BR("iframefcb");return Mi()[h]=()=>{gapi.load?r():n(si(t,"network-request-failed"))},Z2(`${OR()}?onload=${h}`).catch(d=>n(d))}}).catch(e=>{throw Ph=null,e})}let Ph=null;function XP(t){return Ph=Ph||YP(t),Ph}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP=new Nu(5e3,15e3),ZP="__/auth/iframe",eD="emulator/auth/iframe",tD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},nD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rD(t){const e=t.config;Ne(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?$y(e,eD):`https://${t.config.authDomain}/${ZP}`,r={apiKey:e.apiKey,appName:t.name,v:Hl},o=nD.get(t.config.apiHost);o&&(r.eid=o);const l=t._getFrameworks();return l.length&&(r.fw=l.join(",")),`${n}?${Du(r).slice(1)}`}async function iD(t){const e=await XP(t),n=Mi().gapi;return Ne(n,t,"internal-error"),e.open({where:document.body,url:rD(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tD,dontclear:!0},r=>new Promise(async(o,l)=>{await r.restyle({setHideOnLeave:!1});const c=si(t,"network-request-failed"),h=Mi().setTimeout(()=>{l(c)},JP.get());function d(){Mi().clearTimeout(h),o(r)}r.ping(d).then(d,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},oD=500,aD=600,lD="_blank",cD="http://localhost";class gb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function uD(t,e,n,r=oD,o=aD){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const d={...sD,width:r.toString(),height:o.toString(),top:l,left:c},m=Rn().toLowerCase();n&&(h=K2(m)?lD:n),$2(m)&&(e=e||cD,d.scrollbars="yes");const g=Object.entries(d).reduce((x,[S,w])=>`${x}${S}=${w},`,"");if(IR(m)&&h!=="_self")return dD(e||"",h),new gb(null);const y=window.open(e||"",h,g);Ne(y,t,"popup-blocked");try{y.focus()}catch{}return new gb(y)}function dD(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hD="__/auth/handler",fD="emulator/auth/handler",mD=encodeURIComponent("fac");async function yb(t,e,n,r,o,l){Ne(t.config.authDomain,t,"auth-domain-config-required"),Ne(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Hl,eventId:o};if(e instanceof Qy){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",YI(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,y]of Object.entries({}))c[g]=y}if(e instanceof Vu){const g=e.getScopes().filter(y=>y!=="");g.length>0&&(c.scopes=g.join(","))}t.tenantId&&(c.tid=t.tenantId);const h=c;for(const g of Object.keys(h))h[g]===void 0&&delete h[g];const d=await t._getAppCheckToken(),m=d?`#${mD}=${encodeURIComponent(d)}`:"";return`${pD(t)}?${Du(h).slice(1)}${m}`}function pD({config:t}){return t.emulator?$y(t,fD):`https://${t.authDomain}/${hD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kp="webStorageSupport";class gD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lS,this._completeRedirectFn=zP,this._overrideRedirectResult=LP}async _openPopup(e,n,r,o){var c;ys((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await yb(e,n,r,Pg(),o);return uD(e,l,Yy())}async _openRedirect(e,n,r,o){await this._originValidation(e);const l=await yb(e,n,r,Pg(),o);return xP(l),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:l}=this.eventManagers[n];return o?Promise.resolve(o):(ys(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await iD(e),r=new UP(e);return n.register("authEvent",o=>(Ne(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Kp,{type:Kp},o=>{var c;const l=(c=o==null?void 0:o[0])==null?void 0:c[Kp];l!==void 0&&n(!!l),Mr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=qP(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return X2()||H2()||Ky()}}const yD=gD;var vb="@firebase/auth",xb="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xD(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function bD(t){Tl(new ca("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=r.options;Ne(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:c,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:J2(t)},m=new MR(r,o,l,d);return HR(m,n),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Tl(new ca("auth-internal",e=>{const n=wo(e.getProvider("auth").getImmediate());return(r=>new vD(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ao(vb,xb,xD(t)),ao(vb,xb,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD=300,wD=C2("authIdTokenMaxAge")||kD;let bb=null;const SD=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>wD)return;const o=n==null?void 0:n.token;bb!==o&&(bb=o,await fetch(t,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function _D(t=N2()){const e=Fy(t,"auth");if(e.isInitialized())return e.getImmediate();const n=$R(t,{popupRedirectResolver:yD,persistence:[CP,gP,lS]}),r=C2("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const c=SD(l.toString());dP(n,c,()=>c(n.currentUser)),uP(n,h=>c(h))}}const o=E2("auth");return o&&KR(n,`http://${o}`),n}function jD(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}VR({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=o=>{const l=si("internal-error");l.customData=o,n(l)},r.type="text/javascript",r.charset="UTF-8",jD().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});bD("Browser");var kb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var lo,gS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,E){function I(){}I.prototype=E.prototype,A.F=E.prototype,A.prototype=new I,A.prototype.constructor=A,A.D=function(D,L,z){for(var O=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)O[Re-2]=arguments[Re];return E.prototype[L].apply(D,O)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(A,E,I){I||(I=0);const D=Array(16);if(typeof E=="string")for(var L=0;L<16;++L)D[L]=E.charCodeAt(I++)|E.charCodeAt(I++)<<8|E.charCodeAt(I++)<<16|E.charCodeAt(I++)<<24;else for(L=0;L<16;++L)D[L]=E[I++]|E[I++]<<8|E[I++]<<16|E[I++]<<24;E=A.g[0],I=A.g[1],L=A.g[2];let z=A.g[3],O;O=E+(z^I&(L^z))+D[0]+3614090360&4294967295,E=I+(O<<7&4294967295|O>>>25),O=z+(L^E&(I^L))+D[1]+3905402710&4294967295,z=E+(O<<12&4294967295|O>>>20),O=L+(I^z&(E^I))+D[2]+606105819&4294967295,L=z+(O<<17&4294967295|O>>>15),O=I+(E^L&(z^E))+D[3]+3250441966&4294967295,I=L+(O<<22&4294967295|O>>>10),O=E+(z^I&(L^z))+D[4]+4118548399&4294967295,E=I+(O<<7&4294967295|O>>>25),O=z+(L^E&(I^L))+D[5]+1200080426&4294967295,z=E+(O<<12&4294967295|O>>>20),O=L+(I^z&(E^I))+D[6]+2821735955&4294967295,L=z+(O<<17&4294967295|O>>>15),O=I+(E^L&(z^E))+D[7]+4249261313&4294967295,I=L+(O<<22&4294967295|O>>>10),O=E+(z^I&(L^z))+D[8]+1770035416&4294967295,E=I+(O<<7&4294967295|O>>>25),O=z+(L^E&(I^L))+D[9]+2336552879&4294967295,z=E+(O<<12&4294967295|O>>>20),O=L+(I^z&(E^I))+D[10]+4294925233&4294967295,L=z+(O<<17&4294967295|O>>>15),O=I+(E^L&(z^E))+D[11]+2304563134&4294967295,I=L+(O<<22&4294967295|O>>>10),O=E+(z^I&(L^z))+D[12]+1804603682&4294967295,E=I+(O<<7&4294967295|O>>>25),O=z+(L^E&(I^L))+D[13]+4254626195&4294967295,z=E+(O<<12&4294967295|O>>>20),O=L+(I^z&(E^I))+D[14]+2792965006&4294967295,L=z+(O<<17&4294967295|O>>>15),O=I+(E^L&(z^E))+D[15]+1236535329&4294967295,I=L+(O<<22&4294967295|O>>>10),O=E+(L^z&(I^L))+D[1]+4129170786&4294967295,E=I+(O<<5&4294967295|O>>>27),O=z+(I^L&(E^I))+D[6]+3225465664&4294967295,z=E+(O<<9&4294967295|O>>>23),O=L+(E^I&(z^E))+D[11]+643717713&4294967295,L=z+(O<<14&4294967295|O>>>18),O=I+(z^E&(L^z))+D[0]+3921069994&4294967295,I=L+(O<<20&4294967295|O>>>12),O=E+(L^z&(I^L))+D[5]+3593408605&4294967295,E=I+(O<<5&4294967295|O>>>27),O=z+(I^L&(E^I))+D[10]+38016083&4294967295,z=E+(O<<9&4294967295|O>>>23),O=L+(E^I&(z^E))+D[15]+3634488961&4294967295,L=z+(O<<14&4294967295|O>>>18),O=I+(z^E&(L^z))+D[4]+3889429448&4294967295,I=L+(O<<20&4294967295|O>>>12),O=E+(L^z&(I^L))+D[9]+568446438&4294967295,E=I+(O<<5&4294967295|O>>>27),O=z+(I^L&(E^I))+D[14]+3275163606&4294967295,z=E+(O<<9&4294967295|O>>>23),O=L+(E^I&(z^E))+D[3]+4107603335&4294967295,L=z+(O<<14&4294967295|O>>>18),O=I+(z^E&(L^z))+D[8]+1163531501&4294967295,I=L+(O<<20&4294967295|O>>>12),O=E+(L^z&(I^L))+D[13]+2850285829&4294967295,E=I+(O<<5&4294967295|O>>>27),O=z+(I^L&(E^I))+D[2]+4243563512&4294967295,z=E+(O<<9&4294967295|O>>>23),O=L+(E^I&(z^E))+D[7]+1735328473&4294967295,L=z+(O<<14&4294967295|O>>>18),O=I+(z^E&(L^z))+D[12]+2368359562&4294967295,I=L+(O<<20&4294967295|O>>>12),O=E+(I^L^z)+D[5]+4294588738&4294967295,E=I+(O<<4&4294967295|O>>>28),O=z+(E^I^L)+D[8]+2272392833&4294967295,z=E+(O<<11&4294967295|O>>>21),O=L+(z^E^I)+D[11]+1839030562&4294967295,L=z+(O<<16&4294967295|O>>>16),O=I+(L^z^E)+D[14]+4259657740&4294967295,I=L+(O<<23&4294967295|O>>>9),O=E+(I^L^z)+D[1]+2763975236&4294967295,E=I+(O<<4&4294967295|O>>>28),O=z+(E^I^L)+D[4]+1272893353&4294967295,z=E+(O<<11&4294967295|O>>>21),O=L+(z^E^I)+D[7]+4139469664&4294967295,L=z+(O<<16&4294967295|O>>>16),O=I+(L^z^E)+D[10]+3200236656&4294967295,I=L+(O<<23&4294967295|O>>>9),O=E+(I^L^z)+D[13]+681279174&4294967295,E=I+(O<<4&4294967295|O>>>28),O=z+(E^I^L)+D[0]+3936430074&4294967295,z=E+(O<<11&4294967295|O>>>21),O=L+(z^E^I)+D[3]+3572445317&4294967295,L=z+(O<<16&4294967295|O>>>16),O=I+(L^z^E)+D[6]+76029189&4294967295,I=L+(O<<23&4294967295|O>>>9),O=E+(I^L^z)+D[9]+3654602809&4294967295,E=I+(O<<4&4294967295|O>>>28),O=z+(E^I^L)+D[12]+3873151461&4294967295,z=E+(O<<11&4294967295|O>>>21),O=L+(z^E^I)+D[15]+530742520&4294967295,L=z+(O<<16&4294967295|O>>>16),O=I+(L^z^E)+D[2]+3299628645&4294967295,I=L+(O<<23&4294967295|O>>>9),O=E+(L^(I|~z))+D[0]+4096336452&4294967295,E=I+(O<<6&4294967295|O>>>26),O=z+(I^(E|~L))+D[7]+1126891415&4294967295,z=E+(O<<10&4294967295|O>>>22),O=L+(E^(z|~I))+D[14]+2878612391&4294967295,L=z+(O<<15&4294967295|O>>>17),O=I+(z^(L|~E))+D[5]+4237533241&4294967295,I=L+(O<<21&4294967295|O>>>11),O=E+(L^(I|~z))+D[12]+1700485571&4294967295,E=I+(O<<6&4294967295|O>>>26),O=z+(I^(E|~L))+D[3]+2399980690&4294967295,z=E+(O<<10&4294967295|O>>>22),O=L+(E^(z|~I))+D[10]+4293915773&4294967295,L=z+(O<<15&4294967295|O>>>17),O=I+(z^(L|~E))+D[1]+2240044497&4294967295,I=L+(O<<21&4294967295|O>>>11),O=E+(L^(I|~z))+D[8]+1873313359&4294967295,E=I+(O<<6&4294967295|O>>>26),O=z+(I^(E|~L))+D[15]+4264355552&4294967295,z=E+(O<<10&4294967295|O>>>22),O=L+(E^(z|~I))+D[6]+2734768916&4294967295,L=z+(O<<15&4294967295|O>>>17),O=I+(z^(L|~E))+D[13]+1309151649&4294967295,I=L+(O<<21&4294967295|O>>>11),O=E+(L^(I|~z))+D[4]+4149444226&4294967295,E=I+(O<<6&4294967295|O>>>26),O=z+(I^(E|~L))+D[11]+3174756917&4294967295,z=E+(O<<10&4294967295|O>>>22),O=L+(E^(z|~I))+D[2]+718787259&4294967295,L=z+(O<<15&4294967295|O>>>17),O=I+(z^(L|~E))+D[9]+3951481745&4294967295,A.g[0]=A.g[0]+E&4294967295,A.g[1]=A.g[1]+(L+(O<<21&4294967295|O>>>11))&4294967295,A.g[2]=A.g[2]+L&4294967295,A.g[3]=A.g[3]+z&4294967295}r.prototype.v=function(A,E){E===void 0&&(E=A.length);const I=E-this.blockSize,D=this.C;let L=this.h,z=0;for(;z<E;){if(L==0)for(;z<=I;)o(this,A,z),z+=this.blockSize;if(typeof A=="string"){for(;z<E;)if(D[L++]=A.charCodeAt(z++),L==this.blockSize){o(this,D),L=0;break}}else for(;z<E;)if(D[L++]=A[z++],L==this.blockSize){o(this,D),L=0;break}}this.h=L,this.o+=E},r.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var E=1;E<A.length-8;++E)A[E]=0;E=this.o*8;for(var I=A.length-8;I<A.length;++I)A[I]=E&255,E/=256;for(this.v(A),A=Array(16),E=0,I=0;I<4;++I)for(let D=0;D<32;D+=8)A[E++]=this.g[I]>>>D&255;return A};function l(A,E){var I=h;return Object.prototype.hasOwnProperty.call(I,A)?I[A]:I[A]=E(A)}function c(A,E){this.h=E;const I=[];let D=!0;for(let L=A.length-1;L>=0;L--){const z=A[L]|0;D&&z==E||(I[L]=z,D=!1)}this.g=I}var h={};function d(A){return-128<=A&&A<128?l(A,function(E){return new c([E|0],E<0?-1:0)}):new c([A|0],A<0?-1:0)}function m(A){if(isNaN(A)||!isFinite(A))return y;if(A<0)return T(m(-A));const E=[];let I=1;for(let D=0;A>=I;D++)E[D]=A/I|0,I*=4294967296;return new c(E,0)}function g(A,E){if(A.length==0)throw Error("number format error: empty string");if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(A.charAt(0)=="-")return T(g(A.substring(1),E));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=m(Math.pow(E,8));let D=y;for(let z=0;z<A.length;z+=8){var L=Math.min(8,A.length-z);const O=parseInt(A.substring(z,z+L),E);L<8?(L=m(Math.pow(E,L)),D=D.j(L).add(m(O))):(D=D.j(I),D=D.add(m(O)))}return D}var y=d(0),x=d(1),S=d(16777216);t=c.prototype,t.m=function(){if(_(this))return-T(this).m();let A=0,E=1;for(let I=0;I<this.g.length;I++){const D=this.i(I);A+=(D>=0?D:4294967296+D)*E,E*=4294967296}return A},t.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(w(this))return"0";if(_(this))return"-"+T(this).toString(A);const E=m(Math.pow(A,6));var I=this;let D="";for(;;){const L=F(I,E).g;I=P(I,L.j(E));let z=((I.g.length>0?I.g[0]:I.h)>>>0).toString(A);if(I=L,w(I))return z+D;for(;z.length<6;)z="0"+z;D=z+D}},t.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function w(A){if(A.h!=0)return!1;for(let E=0;E<A.g.length;E++)if(A.g[E]!=0)return!1;return!0}function _(A){return A.h==-1}t.l=function(A){return A=P(this,A),_(A)?-1:w(A)?0:1};function T(A){const E=A.g.length,I=[];for(let D=0;D<E;D++)I[D]=~A.g[D];return new c(I,~A.h).add(x)}t.abs=function(){return _(this)?T(this):this},t.add=function(A){const E=Math.max(this.g.length,A.g.length),I=[];let D=0;for(let L=0;L<=E;L++){let z=D+(this.i(L)&65535)+(A.i(L)&65535),O=(z>>>16)+(this.i(L)>>>16)+(A.i(L)>>>16);D=O>>>16,z&=65535,O&=65535,I[L]=O<<16|z}return new c(I,I[I.length-1]&-2147483648?-1:0)};function P(A,E){return A.add(T(E))}t.j=function(A){if(w(this)||w(A))return y;if(_(this))return _(A)?T(this).j(T(A)):T(T(this).j(A));if(_(A))return T(this.j(T(A)));if(this.l(S)<0&&A.l(S)<0)return m(this.m()*A.m());const E=this.g.length+A.g.length,I=[];for(var D=0;D<2*E;D++)I[D]=0;for(D=0;D<this.g.length;D++)for(let L=0;L<A.g.length;L++){const z=this.i(D)>>>16,O=this.i(D)&65535,Re=A.i(L)>>>16,$e=A.i(L)&65535;I[2*D+2*L]+=O*$e,V(I,2*D+2*L),I[2*D+2*L+1]+=z*$e,V(I,2*D+2*L+1),I[2*D+2*L+1]+=O*Re,V(I,2*D+2*L+1),I[2*D+2*L+2]+=z*Re,V(I,2*D+2*L+2)}for(A=0;A<E;A++)I[A]=I[2*A+1]<<16|I[2*A];for(A=E;A<2*E;A++)I[A]=0;return new c(I,0)};function V(A,E){for(;(A[E]&65535)!=A[E];)A[E+1]+=A[E]>>>16,A[E]&=65535,E++}function M(A,E){this.g=A,this.h=E}function F(A,E){if(w(E))throw Error("division by zero");if(w(A))return new M(y,y);if(_(A))return E=F(T(A),E),new M(T(E.g),T(E.h));if(_(E))return E=F(A,T(E)),new M(T(E.g),E.h);if(A.g.length>30){if(_(A)||_(E))throw Error("slowDivide_ only works with positive integers.");for(var I=x,D=E;D.l(A)<=0;)I=K(I),D=K(D);var L=q(I,1),z=q(D,1);for(D=q(D,2),I=q(I,2);!w(D);){var O=z.add(D);O.l(A)<=0&&(L=L.add(I),z=O),D=q(D,1),I=q(I,1)}return E=P(A,L.j(E)),new M(L,E)}for(L=y;A.l(E)>=0;){for(I=Math.max(1,Math.floor(A.m()/E.m())),D=Math.ceil(Math.log(I)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),z=m(I),O=z.j(E);_(O)||O.l(A)>0;)I-=D,z=m(I),O=z.j(E);w(z)&&(z=x),L=L.add(z),A=P(A,O)}return new M(L,A)}t.B=function(A){return F(this,A).h},t.and=function(A){const E=Math.max(this.g.length,A.g.length),I=[];for(let D=0;D<E;D++)I[D]=this.i(D)&A.i(D);return new c(I,this.h&A.h)},t.or=function(A){const E=Math.max(this.g.length,A.g.length),I=[];for(let D=0;D<E;D++)I[D]=this.i(D)|A.i(D);return new c(I,this.h|A.h)},t.xor=function(A){const E=Math.max(this.g.length,A.g.length),I=[];for(let D=0;D<E;D++)I[D]=this.i(D)^A.i(D);return new c(I,this.h^A.h)};function K(A){const E=A.g.length+1,I=[];for(let D=0;D<E;D++)I[D]=A.i(D)<<1|A.i(D-1)>>>31;return new c(I,A.h)}function q(A,E){const I=E>>5;E%=32;const D=A.g.length-I,L=[];for(let z=0;z<D;z++)L[z]=E>0?A.i(z+I)>>>E|A.i(z+I+1)<<32-E:A.i(z+I);return new c(L,A.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,gS=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=g,lo=c}).apply(typeof kb<"u"?kb:typeof self<"u"?self:typeof window<"u"?window:{});var ph=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yS,Zc,vS,Dh,Vg,xS,bS,kS;(function(){var t,e=Object.defineProperty;function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof ph=="object"&&ph];for(var k=0;k<f.length;++k){var j=f[k];if(j&&j.Math==Math)return j}throw Error("Cannot find global object")}var r=n(this);function o(f,k){if(k)e:{var j=r;f=f.split(".");for(var N=0;N<f.length-1;N++){var Y=f[N];if(!(Y in j))break e;j=j[Y]}f=f[f.length-1],N=j[f],k=k(N),k!=N&&k!=null&&e(j,f,{configurable:!0,writable:!0,value:k})}}o("Symbol.dispose",function(f){return f||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(f){return f||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(f){return f||function(k){var j=[],N;for(N in k)Object.prototype.hasOwnProperty.call(k,N)&&j.push([N,k[N]]);return j}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function h(f){var k=typeof f;return k=="object"&&f!=null||k=="function"}function d(f,k,j){return f.call.apply(f.bind,arguments)}function m(f,k,j){return m=d,m.apply(null,arguments)}function g(f,k){var j=Array.prototype.slice.call(arguments,1);return function(){var N=j.slice();return N.push.apply(N,arguments),f.apply(this,N)}}function y(f,k){function j(){}j.prototype=k.prototype,f.Z=k.prototype,f.prototype=new j,f.prototype.constructor=f,f.Ob=function(N,Y,Z){for(var ge=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)ge[Ue-2]=arguments[Ue];return k.prototype[Y].apply(N,ge)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?f=>f&&AsyncContext.Snapshot.wrap(f):f=>f;function S(f){const k=f.length;if(k>0){const j=Array(k);for(let N=0;N<k;N++)j[N]=f[N];return j}return[]}function w(f,k){for(let N=1;N<arguments.length;N++){const Y=arguments[N];var j=typeof Y;if(j=j!="object"?j:Y?Array.isArray(Y)?"array":j:"null",j=="array"||j=="object"&&typeof Y.length=="number"){j=f.length||0;const Z=Y.length||0;f.length=j+Z;for(let ge=0;ge<Z;ge++)f[j+ge]=Y[ge]}else f.push(Y)}}class _{constructor(k,j){this.i=k,this.j=j,this.h=0,this.g=null}get(){let k;return this.h>0?(this.h--,k=this.g,this.g=k.next,k.next=null):k=this.i(),k}}function T(f){c.setTimeout(()=>{throw f},0)}function P(){var f=A;let k=null;return f.g&&(k=f.g,f.g=f.g.next,f.g||(f.h=null),k.next=null),k}class V{constructor(){this.h=this.g=null}add(k,j){const N=M.get();N.set(k,j),this.h?this.h.next=N:this.g=N,this.h=N}}var M=new _(()=>new F,f=>f.reset());class F{constructor(){this.next=this.g=this.h=null}set(k,j){this.h=k,this.g=j,this.next=null}reset(){this.next=this.g=this.h=null}}let K,q=!1,A=new V,E=()=>{const f=Promise.resolve(void 0);K=()=>{f.then(I)}};function I(){for(var f;f=P();){try{f.h.call(f.g)}catch(j){T(j)}var k=M;k.j(f),k.h<100&&(k.h++,f.next=k.g,k.g=f)}q=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function L(f,k){this.type=f,this.g=this.target=k,this.defaultPrevented=!1}L.prototype.h=function(){this.defaultPrevented=!0};var z=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var f=!1,k=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const j=()=>{};c.addEventListener("test",j,k),c.removeEventListener("test",j,k)}catch{}return f})();function O(f){return/^[\s\xa0]*$/.test(f)}function Re(f,k){L.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f&&this.init(f,k)}y(Re,L),Re.prototype.init=function(f,k){const j=this.type=f.type,N=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;this.target=f.target||f.srcElement,this.g=k,k=f.relatedTarget,k||(j=="mouseover"?k=f.fromElement:j=="mouseout"&&(k=f.toElement)),this.relatedTarget=k,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=f.pointerType,this.state=f.state,this.i=f,f.defaultPrevented&&Re.Z.h.call(this)},Re.prototype.h=function(){Re.Z.h.call(this);const f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var $e="closure_listenable_"+(Math.random()*1e6|0),tt=0;function Ce(f,k,j,N,Y){this.listener=f,this.proxy=null,this.src=k,this.type=j,this.capture=!!N,this.ha=Y,this.key=++tt,this.da=this.fa=!1}function ie(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function me(f,k,j){for(const N in f)k.call(j,f[N],N,f)}function ue(f,k){for(const j in f)k.call(void 0,f[j],j,f)}function $(f){const k={};for(const j in f)k[j]=f[j];return k}const te="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ie(f,k){let j,N;for(let Y=1;Y<arguments.length;Y++){N=arguments[Y];for(j in N)f[j]=N[j];for(let Z=0;Z<te.length;Z++)j=te[Z],Object.prototype.hasOwnProperty.call(N,j)&&(f[j]=N[j])}}function Te(f){this.src=f,this.g={},this.h=0}Te.prototype.add=function(f,k,j,N,Y){const Z=f.toString();f=this.g[Z],f||(f=this.g[Z]=[],this.h++);const ge=ze(f,k,N,Y);return ge>-1?(k=f[ge],j||(k.fa=!1)):(k=new Ce(k,this.src,Z,!!N,Y),k.fa=j,f.push(k)),k};function Le(f,k){const j=k.type;if(j in f.g){var N=f.g[j],Y=Array.prototype.indexOf.call(N,k,void 0),Z;(Z=Y>=0)&&Array.prototype.splice.call(N,Y,1),Z&&(ie(k),f.g[j].length==0&&(delete f.g[j],f.h--))}}function ze(f,k,j,N){for(let Y=0;Y<f.length;++Y){const Z=f[Y];if(!Z.da&&Z.listener==k&&Z.capture==!!j&&Z.ha==N)return Y}return-1}var se="closure_lm_"+(Math.random()*1e6|0),G={};function pe(f,k,j,N,Y){if(Array.isArray(k)){for(let Z=0;Z<k.length;Z++)pe(f,k[Z],j,N,Y);return null}return j=zn(j),f&&f[$e]?f.J(k,j,h(N)?!!N.capture:!1,Y):qe(f,k,j,!1,N,Y)}function qe(f,k,j,N,Y,Z){if(!k)throw Error("Invalid event type");const ge=h(Y)?!!Y.capture:!!Y;let Ue=Pn(f);if(Ue||(f[se]=Ue=new Te(f)),j=Ue.add(k,j,N,ge,Z),j.proxy)return j;if(N=gt(),j.proxy=N,N.src=f,N.listener=j,f.addEventListener)z||(Y=ge),Y===void 0&&(Y=!1),f.addEventListener(k.toString(),N,Y);else if(f.attachEvent)f.attachEvent(dn(k.toString()),N);else if(f.addListener&&f.removeListener)f.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return j}function gt(){function f(j){return k.call(f.src,f.listener,j)}const k=bn;return f}function qt(f,k,j,N,Y){if(Array.isArray(k))for(var Z=0;Z<k.length;Z++)qt(f,k[Z],j,N,Y);else N=h(N)?!!N.capture:!!N,j=zn(j),f&&f[$e]?(f=f.i,Z=String(k).toString(),Z in f.g&&(k=f.g[Z],j=ze(k,j,N,Y),j>-1&&(ie(k[j]),Array.prototype.splice.call(k,j,1),k.length==0&&(delete f.g[Z],f.h--)))):f&&(f=Pn(f))&&(k=f.g[k.toString()],f=-1,k&&(f=ze(k,j,N,Y)),(j=f>-1?k[f]:null)&&yt(j))}function yt(f){if(typeof f!="number"&&f&&!f.da){var k=f.src;if(k&&k[$e])Le(k.i,f);else{var j=f.type,N=f.proxy;k.removeEventListener?k.removeEventListener(j,N,f.capture):k.detachEvent?k.detachEvent(dn(j),N):k.addListener&&k.removeListener&&k.removeListener(N),(j=Pn(k))?(Le(j,f),j.h==0&&(j.src=null,k[se]=null)):ie(f)}}}function dn(f){return f in G?G[f]:G[f]="on"+f}function bn(f,k){if(f.da)f=!0;else{k=new Re(k,this);const j=f.listener,N=f.ha||f.src;f.fa&&yt(f),f=j.call(N,k)}return f}function Pn(f){return f=f[se],f instanceof Te?f:null}var Bn="__closure_events_fn_"+(Math.random()*1e9>>>0);function zn(f){return typeof f=="function"?f:(f[Bn]||(f[Bn]=function(k){return f.handleEvent(k)}),f[Bn])}function lt(){D.call(this),this.i=new Te(this),this.M=this,this.G=null}y(lt,D),lt.prototype[$e]=!0,lt.prototype.removeEventListener=function(f,k,j,N){qt(this,f,k,j,N)};function dt(f,k){var j,N=f.G;if(N)for(j=[];N;N=N.G)j.push(N);if(f=f.M,N=k.type||k,typeof k=="string")k=new L(k,f);else if(k instanceof L)k.target=k.target||f;else{var Y=k;k=new L(N,f),Ie(k,Y)}Y=!0;let Z,ge;if(j)for(ge=j.length-1;ge>=0;ge--)Z=k.g=j[ge],Y=Fn(Z,N,!0,k)&&Y;if(Z=k.g=f,Y=Fn(Z,N,!0,k)&&Y,Y=Fn(Z,N,!1,k)&&Y,j)for(ge=0;ge<j.length;ge++)Z=k.g=j[ge],Y=Fn(Z,N,!1,k)&&Y}lt.prototype.N=function(){if(lt.Z.N.call(this),this.i){var f=this.i;for(const k in f.g){const j=f.g[k];for(let N=0;N<j.length;N++)ie(j[N]);delete f.g[k],f.h--}}this.G=null},lt.prototype.J=function(f,k,j,N){return this.i.add(String(f),k,!1,j,N)},lt.prototype.K=function(f,k,j,N){return this.i.add(String(f),k,!0,j,N)};function Fn(f,k,j,N){if(k=f.i.g[String(k)],!k)return!0;k=k.concat();let Y=!0;for(let Z=0;Z<k.length;++Z){const ge=k[Z];if(ge&&!ge.da&&ge.capture==j){const Ue=ge.listener,Vt=ge.ha||ge.src;ge.fa&&Le(f.i,ge),Y=Ue.call(Vt,N)!==!1&&Y}}return Y&&!N.defaultPrevented}function Es(f,k){if(typeof f!="function")if(f&&typeof f.handleEvent=="function")f=m(f.handleEvent,f);else throw Error("Invalid listener argument");return Number(k)>2147483647?-1:c.setTimeout(f,k||0)}function To(f){f.g=Es(()=>{f.g=null,f.i&&(f.i=!1,To(f))},f.l);const k=f.h;f.h=null,f.m.apply(null,k)}class Ts extends D{constructor(k,j){super(),this.m=k,this.l=j,this.h=null,this.i=!1,this.g=null}j(k){this.h=arguments,this.g?this.i=!0:To(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vr(f){D.call(this),this.h=f,this.g={}}y(vr,D);var zr=[];function Cs(f){me(f.g,function(k,j){this.g.hasOwnProperty(j)&&yt(k)},f),f.g={}}vr.prototype.N=function(){vr.Z.N.call(this),Cs(this)},vr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xr=c.JSON.stringify,_a=c.JSON.parse,ui=class{stringify(f){return c.JSON.stringify(f,void 0)}parse(f){return c.JSON.parse(f,void 0)}};function Fr(){}function ja(){}var di={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Is(){L.call(this,"d")}y(Is,L);function Co(){L.call(this,"c")}y(Co,L);var Jn={},As=null;function hi(){return As=As||new lt}Jn.Ia="serverreachability";function Rs(f){L.call(this,Jn.Ia,f)}y(Rs,L);function Ur(f){const k=hi();dt(k,new Rs(k))}Jn.STAT_EVENT="statevent";function Wr(f,k){L.call(this,Jn.STAT_EVENT,f),this.stat=k}y(Wr,L);function wt(f){const k=hi();dt(k,new Wr(k,f))}Jn.Ja="timingevent";function Io(f,k){L.call(this,Jn.Ja,f),this.size=k}y(Io,L);function fi(f,k){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){f()},k)}function mi(){this.g=!0}mi.prototype.ua=function(){this.g=!1};function U(f,k,j,N,Y,Z){f.info(function(){if(f.g)if(Z){var ge="",Ue=Z.split("&");for(let ct=0;ct<Ue.length;ct++){var Vt=Ue[ct].split("=");if(Vt.length>1){const zt=Vt[0];Vt=Vt[1];const ir=zt.split("_");ge=ir.length>=2&&ir[1]=="type"?ge+(zt+"="+Vt+"&"):ge+(zt+"=redacted&")}}}else ge=null;else ge=Z;return"XMLHTTP REQ ("+N+") [attempt "+Y+"]: "+k+`
`+j+`
`+ge})}function ne(f,k,j,N,Y,Z,ge){f.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+Y+"]: "+k+`
`+j+`
`+Z+" "+ge})}function Se(f,k,j,N){f.info(function(){return"XMLHTTP TEXT ("+k+"): "+St(f,j)+(N?" "+N:"")})}function He(f,k){f.info(function(){return"TIMEOUT: "+k})}mi.prototype.info=function(){};function St(f,k){if(!f.g)return k;if(!k)return null;try{const Z=JSON.parse(k);if(Z){for(f=0;f<Z.length;f++)if(Array.isArray(Z[f])){var j=Z[f];if(!(j.length<2)){var N=j[1];if(Array.isArray(N)&&!(N.length<1)){var Y=N[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(let ge=1;ge<N.length;ge++)N[ge]=""}}}}return xr(Z)}catch{return k}}var kn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},pi={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},id;function Ui(){}y(Ui,Fr),Ui.prototype.g=function(){return new XMLHttpRequest},id=new Ui;function gi(f){return encodeURIComponent(String(f))}function Ea(f){var k=1;f=f.split(":");const j=[];for(;k>0&&f.length;)j.push(f.shift()),k--;return f.length&&j.push(f.join(":")),j}function br(f,k,j,N){this.j=f,this.i=k,this.l=j,this.S=N||1,this.V=new vr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new sd}function sd(){this.i=null,this.g="",this.h=!1}var od={},ic={};function $r(f,k,j){f.M=1,f.A=$i(kr(k)),f.u=j,f.R=!0,sc(f,null)}function sc(f,k){f.F=Date.now(),Ao(f),f.B=kr(f.A);var j=f.B,N=f.S;Array.isArray(N)||(N=[String(N)]),pc(j.i,"t",N),f.C=0,j=f.j.L,f.h=new sd,f.g=gd(f.j,j?k:null,!f.u),f.P>0&&(f.O=new Ts(m(f.Y,f,f.g),f.P)),k=f.V,j=f.g,N=f.ba;var Y="readystatechange";Array.isArray(Y)||(Y&&(zr[0]=Y.toString()),Y=zr);for(let Z=0;Z<Y.length;Z++){const ge=pe(j,Y[Z],N||k.handleEvent,!1,k.h||k);if(!ge)break;k.g[ge.key]=ge}k=f.J?$(f.J):{},f.u?(f.v||(f.v="POST"),k["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.B,f.v,f.u,k)):(f.v="GET",f.g.ea(f.B,f.v,null,k)),Ur(),U(f.i,f.v,f.B,f.l,f.S,f.u)}br.prototype.ba=function(f){f=f.target;const k=this.O;k&&Si(f)==3?k.j():this.Y(f)},br.prototype.Y=function(f){try{if(f==this.g)e:{const Ue=Si(this.g),Vt=this.g.ya(),ct=this.g.ca();if(!(Ue<3)&&(Ue!=3||this.g&&(this.h.h||this.g.la()||md(this.g)))){this.K||Ue!=4||Vt==7||(Vt==8||ct<=0?Ur(3):Ur(2)),Ta(this);var k=this.g.ca();this.X=k;var j=ad(this);if(this.o=k==200,ne(this.i,this.v,this.B,this.l,this.S,Ue,k),this.o){if(this.U&&!this.L){t:{if(this.g){var N,Y=this.g;if((N=Y.g?Y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(N)){var Z=N;break t}}Z=null}if(f=Z)Se(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,vt(this,f);else{this.o=!1,this.m=3,wt(12),Wi(this),Ro(this);break e}}if(this.R){f=!0;let zt;for(;!this.K&&this.C<j.length;)if(zt=cd(this,j),zt==ic){Ue==4&&(this.m=4,wt(14),f=!1),Se(this.i,this.l,null,"[Incomplete Response]");break}else if(zt==od){this.m=4,wt(15),Se(this.i,this.l,j,"[Invalid Chunk]"),f=!1;break}else Se(this.i,this.l,zt,null),vt(this,zt);if(ld(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ue!=4||j.length!=0||this.h.h||(this.m=1,wt(16),f=!1),this.o=this.o&&f,!f)Se(this.i,this.l,j,"[Invalid Chunked Response]"),Wi(this),Ro(this);else if(j.length>0&&!this.W){this.W=!0;var ge=this.j;ge.g==this&&ge.aa&&!ge.P&&(ge.j.info("Great, no buffering proxy detected. Bytes received: "+j.length),zo(ge),ge.P=!0,wt(11))}}else Se(this.i,this.l,j,null),vt(this,j);Ue==4&&Wi(this),this.o&&!this.K&&(Ue==4?La(this.j,this):(this.o=!1,Ao(this)))}else yc(this.g),k==400&&j.indexOf("Unknown SID")>0?(this.m=3,wt(12)):(this.m=0,wt(13)),Wi(this),Ro(this)}}}catch{}finally{}};function ad(f){if(!ld(f))return f.g.la();const k=md(f.g);if(k==="")return"";let j="";const N=k.length,Y=Si(f.g)==4;if(!f.h.i){if(typeof TextDecoder>"u")return Wi(f),Ro(f),"";f.h.i=new c.TextDecoder}for(let Z=0;Z<N;Z++)f.h.h=!0,j+=f.h.i.decode(k[Z],{stream:!(Y&&Z==N-1)});return k.length=0,f.h.g+=j,f.C=0,f.h.g}function ld(f){return f.g?f.v=="GET"&&f.M!=2&&f.j.Aa:!1}function cd(f,k){var j=f.C,N=k.indexOf(`
`,j);return N==-1?ic:(j=Number(k.substring(j,N)),isNaN(j)?od:(N+=1,N+j>k.length?ic:(k=k.slice(N,N+j),f.C=N+j,k)))}br.prototype.cancel=function(){this.K=!0,Wi(this)};function Ao(f){f.T=Date.now()+f.H,oc(f,f.H)}function oc(f,k){if(f.D!=null)throw Error("WatchDog timer not null");f.D=fi(m(f.aa,f),k)}function Ta(f){f.D&&(c.clearTimeout(f.D),f.D=null)}br.prototype.aa=function(){this.D=null;const f=Date.now();f-this.T>=0?(He(this.i,this.B),this.M!=2&&(Ur(),wt(17)),Wi(this),this.m=2,Ro(this)):oc(this,this.T-f)};function Ro(f){f.j.I==0||f.K||La(f.j,f)}function Wi(f){Ta(f);var k=f.O;k&&typeof k.dispose=="function"&&k.dispose(),f.O=null,Cs(f.V),f.g&&(k=f.g,f.g=null,k.abort(),k.dispose())}function vt(f,k){try{var j=f.j;if(j.I!=0&&(j.g==f||lc(j.h,f))){if(!f.L&&lc(j.h,f)&&j.I==3){try{var N=j.Ba.g.parse(k)}catch{N=null}if(Array.isArray(N)&&N.length==3){var Y=N;if(Y[0]==0){e:if(!j.v){if(j.g)if(j.g.F+3e3<f.F)Va(j),nr(j);else break e;Ei(j),wt(18)}}else j.xa=Y[1],0<j.xa-j.K&&Y[2]<37500&&j.F&&j.A==0&&!j.C&&(j.C=fi(m(j.Va,j),6e3));Po(j.h)<=1&&j.ta&&(j.ta=void 0)}else rr(j,11)}else if((f.L||j.g==f)&&Va(j),!O(k))for(Y=j.Ba.g.parse(k),k=0;k<Y.length;k++){let ct=Y[k];const zt=ct[0];if(!(zt<=j.K))if(j.K=zt,ct=ct[1],j.I==2)if(ct[0]=="c"){j.M=ct[1],j.ba=ct[2];const ir=ct[3];ir!=null&&(j.ka=ir,j.j.info("VER="+j.ka));const Qi=ct[4];Qi!=null&&(j.za=Qi,j.j.info("SVER="+j.za));const Ti=ct[5];Ti!=null&&typeof Ti=="number"&&Ti>0&&(N=1.5*Ti,j.O=N,j.j.info("backChannelRequestTimeoutMs_="+N)),N=j;const Ci=f.g;if(Ci){const za=Ci.g?Ci.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(za){var Z=N.h;Z.g||za.indexOf("spdy")==-1&&za.indexOf("quic")==-1&&za.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(Ia(Z,Z.h),Z.h=null))}if(N.G){const bc=Ci.g?Ci.g.getResponseHeader("X-HTTP-Session-Id"):null;bc&&(N.wa=bc,st(N.J,N.G,bc))}}j.I=3,j.l&&j.l.ra(),j.aa&&(j.T=Date.now()-f.F,j.j.info("Handshake RTT: "+j.T+"ms")),N=j;var ge=f;if(N.na=xc(N,N.L?N.ba:null,N.W),ge.L){Do(N.h,ge);var Ue=ge,Vt=N.O;Vt&&(Ue.H=Vt),Ue.D&&(Ta(Ue),Ao(Ue)),N.g=ge}else wn(N);j.i.length>0&&Gi(j)}else ct[0]!="stop"&&ct[0]!="close"||rr(j,7);else j.I==3&&(ct[0]=="stop"||ct[0]=="close"?ct[0]=="stop"?rr(j,7):Na(j):ct[0]!="noop"&&j.l&&j.l.qa(ct),j.A=0)}}Ur(4)}catch{}}var cm=class{constructor(f,k){this.g=f,this.map=k}};function Ca(f){this.l=f||10,c.PerformanceNavigationTiming?(f=c.performance.getEntriesByType("navigation"),f=f.length>0&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ac(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Po(f){return f.h?1:f.g?f.g.size:0}function lc(f,k){return f.h?f.h==k:f.g?f.g.has(k):!1}function Ia(f,k){f.g?f.g.add(k):f.h=k}function Do(f,k){f.h&&f.h==k?f.h=null:f.g&&f.g.has(k)&&f.g.delete(k)}Ca.prototype.cancel=function(){if(this.i=Zn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Zn(f){if(f.h!=null)return f.i.concat(f.h.G);if(f.g!=null&&f.g.size!==0){let k=f.i;for(const j of f.g.values())k=k.concat(j.G);return k}return S(f.i)}var ud=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function er(f,k){if(f){f=f.split("&");for(let j=0;j<f.length;j++){const N=f[j].indexOf("=");let Y,Z=null;N>=0?(Y=f[j].substring(0,N),Z=f[j].substring(N+1)):Y=f[j],k(Y,Z?decodeURIComponent(Z.replace(/\+/g," ")):"")}}}function yi(f){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let k;f instanceof yi?(this.l=f.l,No(this,f.j),this.o=f.o,this.g=f.g,vi(this,f.u),this.h=f.h,Ps(this,gc(f.i)),this.m=f.m):f&&(k=String(f).match(ud))?(this.l=!1,No(this,k[1]||"",!0),this.o=Mo(k[2]||""),this.g=Mo(k[3]||"",!0),vi(this,k[4]),this.h=Mo(k[5]||"",!0),Ps(this,k[6]||"",!0),this.m=Mo(k[7]||"")):(this.l=!1,this.i=new Je(null,this.l))}yi.prototype.toString=function(){const f=[];var k=this.j;k&&f.push(Vo(k,uc,!0),":");var j=this.g;return(j||k=="file")&&(f.push("//"),(k=this.o)&&f.push(Vo(k,uc,!0),"@"),f.push(gi(j).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),j=this.u,j!=null&&f.push(":",String(j))),(j=this.h)&&(this.g&&j.charAt(0)!="/"&&f.push("/"),f.push(Vo(j,j.charAt(0)=="/"?Lo:dc,!0))),(j=this.i.toString())&&f.push("?",j),(j=this.m)&&f.push("#",Vo(j,hc)),f.join("")},yi.prototype.resolve=function(f){const k=kr(this);let j=!!f.j;j?No(k,f.j):j=!!f.o,j?k.o=f.o:j=!!f.g,j?k.g=f.g:j=f.u!=null;var N=f.h;if(j)vi(k,f.u);else if(j=!!f.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var Y=k.h.lastIndexOf("/");Y!=-1&&(N=k.h.slice(0,Y+1)+N)}if(Y=N,Y==".."||Y==".")N="";else if(Y.indexOf("./")!=-1||Y.indexOf("/.")!=-1){N=Y.lastIndexOf("/",0)==0,Y=Y.split("/");const Z=[];for(let ge=0;ge<Y.length;){const Ue=Y[ge++];Ue=="."?N&&ge==Y.length&&Z.push(""):Ue==".."?((Z.length>1||Z.length==1&&Z[0]!="")&&Z.pop(),N&&ge==Y.length&&Z.push("")):(Z.push(Ue),N=!0)}N=Z.join("/")}else N=Y}return j?k.h=N:j=f.i.toString()!=="",j?Ps(k,gc(f.i)):j=!!f.m,j&&(k.m=f.m),k};function kr(f){return new yi(f)}function No(f,k,j){f.j=j?Mo(k,!0):k,f.j&&(f.j=f.j.replace(/:$/,""))}function vi(f,k){if(k){if(k=Number(k),isNaN(k)||k<0)throw Error("Bad port number "+k);f.u=k}else f.u=null}function Ps(f,k,j){k instanceof Je?(f.i=k,Ra(f.i,f.l)):(j||(k=Vo(k,um)),f.i=new Je(k,f.l))}function st(f,k,j){f.i.set(k,j)}function $i(f){return st(f,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),f}function Mo(f,k){return f?k?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Vo(f,k,j){return typeof f=="string"?(f=encodeURI(f).replace(k,cc),j&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function cc(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var uc=/[#\/\?@]/g,dc=/[#\?:]/g,Lo=/[#\?]/g,um=/[#\?@]/g,hc=/#/g;function Je(f,k){this.h=this.g=null,this.i=f||null,this.j=!!k}function xi(f){f.g||(f.g=new Map,f.h=0,f.i&&er(f.i,function(k,j){f.add(decodeURIComponent(k.replace(/\+/g," ")),j)}))}t=Je.prototype,t.add=function(f,k){xi(this),this.i=null,f=bi(this,f);let j=this.g.get(f);return j||this.g.set(f,j=[]),j.push(k),this.h+=1,this};function fc(f,k){xi(f),k=bi(f,k),f.g.has(k)&&(f.i=null,f.h-=f.g.get(k).length,f.g.delete(k))}function Aa(f,k){return xi(f),k=bi(f,k),f.g.has(k)}t.forEach=function(f,k){xi(this),this.g.forEach(function(j,N){j.forEach(function(Y){f.call(k,Y,N,this)},this)},this)};function mc(f,k){xi(f);let j=[];if(typeof k=="string")Aa(f,k)&&(j=j.concat(f.g.get(bi(f,k))));else for(f=Array.from(f.g.values()),k=0;k<f.length;k++)j=j.concat(f[k]);return j}t.set=function(f,k){return xi(this),this.i=null,f=bi(this,f),Aa(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[k]),this.h+=1,this},t.get=function(f,k){return f?(f=mc(this,f),f.length>0?String(f[0]):k):k};function pc(f,k,j){fc(f,k),j.length>0&&(f.i=null,f.g.set(bi(f,k),S(j)),f.h+=j.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],k=Array.from(this.g.keys());for(let N=0;N<k.length;N++){var j=k[N];const Y=gi(j);j=mc(this,j);for(let Z=0;Z<j.length;Z++){let ge=Y;j[Z]!==""&&(ge+="="+gi(j[Z])),f.push(ge)}}return this.i=f.join("&")};function gc(f){const k=new Je;return k.i=f.i,f.g&&(k.g=new Map(f.g),k.h=f.h),k}function bi(f,k){return k=String(k),f.j&&(k=k.toLowerCase()),k}function Ra(f,k){k&&!f.j&&(xi(f),f.i=null,f.g.forEach(function(j,N){const Y=N.toLowerCase();N!=Y&&(fc(this,N),pc(this,Y,j))},f)),f.j=k}function ki(f,k){const j=new mi;if(c.Image){const N=new Image;N.onload=g(hn,j,"TestLoadImage: loaded",!0,k,N),N.onerror=g(hn,j,"TestLoadImage: error",!1,k,N),N.onabort=g(hn,j,"TestLoadImage: abort",!1,k,N),N.ontimeout=g(hn,j,"TestLoadImage: timeout",!1,k,N),c.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=f}else k(!1)}function wi(f,k){const j=new mi,N=new AbortController,Y=setTimeout(()=>{N.abort(),hn(j,"TestPingServer: timeout",!1,k)},1e4);fetch(f,{signal:N.signal}).then(Z=>{clearTimeout(Y),Z.ok?hn(j,"TestPingServer: ok",!0,k):hn(j,"TestPingServer: server error",!1,k)}).catch(()=>{clearTimeout(Y),hn(j,"TestPingServer: error",!1,k)})}function hn(f,k,j,N,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),N(j)}catch{}}function Oo(){this.g=new ui}function Hi(f){this.i=f.Sb||null,this.h=f.ab||!1}y(Hi,Fr),Hi.prototype.g=function(){return new tr(this.i,this.h)};function tr(f,k){lt.call(this),this.H=f,this.o=k,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}y(tr,lt),t=tr.prototype,t.open=function(f,k){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=f,this.D=k,this.readyState=1,Hr(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const k={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};f&&(k.body=f),(this.H||c).fetch(new Request(this.D,k)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ds(this)),this.readyState=0},t.Pa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Hr(this)),this.g&&(this.readyState=3,Hr(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;dd(this)}else f.text().then(this.Oa.bind(this),this.ga.bind(this))};function dd(f){f.j.read().then(f.Ma.bind(f)).catch(f.ga.bind(f))}t.Ma=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var k=f.value?f.value:new Uint8Array(0);(k=this.B.decode(k,{stream:!f.done}))&&(this.response=this.responseText+=k)}f.done?Ds(this):Hr(this),this.readyState==3&&dd(this)}},t.Oa=function(f){this.g&&(this.response=this.responseText=f,Ds(this))},t.Na=function(f){this.g&&(this.response=f,Ds(this))},t.ga=function(){this.g&&Ds(this)};function Ds(f){f.readyState=4,f.l=null,f.j=null,f.B=null,Hr(f)}t.setRequestHeader=function(f,k){this.A.append(f,k)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],k=this.h.entries();for(var j=k.next();!j.done;)j=j.value,f.push(j[0]+": "+j[1]),j=k.next();return f.join(`\r
`)};function Hr(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(tr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function hd(f){let k="";return me(f,function(j,N){k+=N,k+=":",k+=j,k+=`\r
`}),k}function Pa(f,k,j){e:{for(N in j){var N=!1;break e}N=!0}N||(j=hd(j),typeof f=="string"?j!=null&&gi(j):st(f,k,j))}function ht(f){lt.call(this),this.headers=new Map,this.L=f||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}y(ht,lt);var fd=/^https?$/i,dm=["POST","PUT"];t=ht.prototype,t.Fa=function(f){this.H=f},t.ea=function(f,k,j,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);k=k?k.toUpperCase():"GET",this.D=f,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():id.g(),this.g.onreadystatechange=x(m(this.Ca,this));try{this.B=!0,this.g.open(k,String(f),!0),this.B=!1}catch(Z){Ns(this,Z);return}if(f=j||"",j=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var Y in N)j.set(Y,N[Y]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const Z of N.keys())j.set(Z,N.get(Z));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(j.keys()).find(Z=>Z.toLowerCase()=="content-type"),Y=c.FormData&&f instanceof c.FormData,!(Array.prototype.indexOf.call(dm,k,void 0)>=0)||N||Y||j.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,ge]of j)this.g.setRequestHeader(Z,ge);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(f),this.v=!1}catch(Z){Ns(this,Z)}};function Ns(f,k){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=k,f.o=5,Ms(f),qi(f)}function Ms(f){f.A||(f.A=!0,dt(f,"complete"),dt(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=f||7,dt(this,"complete"),dt(this,"abort"),qi(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qi(this,!0)),ht.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Ki(this):this.Xa())},t.Xa=function(){Ki(this)};function Ki(f){if(f.h&&typeof l<"u"){if(f.v&&Si(f)==4)setTimeout(f.Ca.bind(f),0);else if(dt(f,"readystatechange"),Si(f)==4){f.h=!1;try{const Z=f.ca();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var k=!0;break e;default:k=!1}var j;if(!(j=k)){var N;if(N=Z===0){let ge=String(f.D).match(ud)[1]||null;!ge&&c.self&&c.self.location&&(ge=c.self.location.protocol.slice(0,-1)),N=!fd.test(ge?ge.toLowerCase():"")}j=N}if(j)dt(f,"complete"),dt(f,"success");else{f.o=6;try{var Y=Si(f)>2?f.g.statusText:""}catch{Y=""}f.l=Y+" ["+f.ca()+"]",Ms(f)}}finally{qi(f)}}}}function qi(f,k){if(f.g){f.m&&(clearTimeout(f.m),f.m=null);const j=f.g;f.g=null,k||dt(f,"ready");try{j.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Si(f){return f.g?f.g.readyState:0}t.ca=function(){try{return Si(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(f){if(this.g){var k=this.g.responseText;return f&&k.indexOf(f)==0&&(k=k.substring(f.length)),_a(k)}};function md(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.F){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function yc(f){const k={};f=(f.g&&Si(f)>=2&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<f.length;N++){if(O(f[N]))continue;var j=Ea(f[N]);const Y=j[0];if(j=j[1],typeof j!="string")continue;j=j.trim();const Z=k[Y]||[];k[Y]=Z,Z.push(j)}ue(k,function(N){return N.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function _i(f,k,j){return j&&j.internalChannelParams&&j.internalChannelParams[f]||k}function Da(f){this.za=0,this.i=[],this.j=new mi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=_i("failFast",!1,f),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=_i("baseRetryDelayMs",5e3,f),this.Za=_i("retryDelaySeedMs",1e4,f),this.Ta=_i("forwardChannelMaxRetries",2,f),this.va=_i("forwardChannelRequestTimeoutMs",2e4,f),this.ma=f&&f.xmlHttpFactory||void 0,this.Ua=f&&f.Rb||void 0,this.Aa=f&&f.useFetchStreams||!1,this.O=void 0,this.L=f&&f.supportsCrossDomainXhr||!1,this.M="",this.h=new Ca(f&&f.concurrentRequestLimit),this.Ba=new Oo,this.S=f&&f.fastHandshake||!1,this.R=f&&f.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=f&&f.Pb||!1,f&&f.ua&&this.j.ua(),f&&f.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&f&&f.detectBufferingProxy||!1,this.ia=void 0,f&&f.longPollingTimeout&&f.longPollingTimeout>0&&(this.ia=f.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Da.prototype,t.ka=8,t.I=1,t.connect=function(f,k,j,N){wt(0),this.W=f,this.H=k||{},j&&N!==void 0&&(this.H.OSID=j,this.H.OAID=N),this.F=this.X,this.J=xc(this,null,this.W),Gi(this)};function Na(f){if(Ma(f),f.I==3){var k=f.V++,j=kr(f.J);if(st(j,"SID",f.M),st(j,"RID",k),st(j,"TYPE","terminate"),ji(f,j),k=new br(f,f.j,k),k.M=2,k.A=$i(kr(j)),j=!1,c.navigator&&c.navigator.sendBeacon)try{j=c.navigator.sendBeacon(k.A.toString(),"")}catch{}!j&&c.Image&&(new Image().src=k.A,j=!0),j||(k.g=gd(k.j,null),k.g.ea(k.A)),k.F=Date.now(),Ao(k)}Fo(f)}function nr(f){f.g&&(zo(f),f.g.cancel(),f.g=null)}function Ma(f){nr(f),f.v&&(c.clearTimeout(f.v),f.v=null),Va(f),f.h.cancel(),f.m&&(typeof f.m=="number"&&c.clearTimeout(f.m),f.m=null)}function Gi(f){if(!ac(f.h)&&!f.m){f.m=!0;var k=f.Ea;K||E(),q||(K(),q=!0),A.add(k,f),f.D=0}}function pd(f,k){return Po(f.h)>=f.h.j-(f.m?1:0)?!1:f.m?(f.i=k.G.concat(f.i),!0):f.I==1||f.I==2||f.D>=(f.Sa?0:f.Ta)?!1:(f.m=fi(m(f.Ea,f,k),Oa(f,f.D)),f.D++,!0)}t.Ea=function(f){if(this.m)if(this.m=null,this.I==1){if(!f){this.V=Math.floor(Math.random()*1e5),f=this.V++;const Y=new br(this,this.j,f);let Z=this.o;if(this.U&&(Z?(Z=$(Z),Ie(Z,this.U)):Z=this.U),this.u!==null||this.R||(Y.J=Z,Z=null),this.S)e:{for(var k=0,j=0;j<this.i.length;j++){t:{var N=this.i[j];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(k+=N,k>4096){k=j;break e}if(k===4096||j===this.i.length-1){k=j+1;break e}}k=1e3}else k=1e3;k=vc(this,Y,k),j=kr(this.J),st(j,"RID",f),st(j,"CVER",22),this.G&&st(j,"X-HTTP-Session-Id",this.G),ji(this,j),Z&&(this.R?k="headers="+gi(hd(Z))+"&"+k:this.u&&Pa(j,this.u,Z)),Ia(this.h,Y),this.Ra&&st(j,"TYPE","init"),this.S?(st(j,"$req",k),st(j,"SID","null"),Y.U=!0,$r(Y,j,null)):$r(Y,j,k),this.I=2}}else this.I==3&&(f?Bo(this,f):this.i.length==0||ac(this.h)||Bo(this))};function Bo(f,k){var j;k?j=k.l:j=f.V++;const N=kr(f.J);st(N,"SID",f.M),st(N,"RID",j),st(N,"AID",f.K),ji(f,N),f.u&&f.o&&Pa(N,f.u,f.o),j=new br(f,f.j,j,f.D+1),f.u===null&&(j.J=f.o),k&&(f.i=k.G.concat(f.i)),k=vc(f,j,1e3),j.H=Math.round(f.va*.5)+Math.round(f.va*.5*Math.random()),Ia(f.h,j),$r(j,N,k)}function ji(f,k){f.H&&me(f.H,function(j,N){st(k,N,j)}),f.l&&me({},function(j,N){st(k,N,j)})}function vc(f,k,j){j=Math.min(f.i.length,j);const N=f.l?m(f.l.Ka,f.l,f):null;e:{var Y=f.i;let Ue=-1;for(;;){const Vt=["count="+j];Ue==-1?j>0?(Ue=Y[0].g,Vt.push("ofs="+Ue)):Ue=0:Vt.push("ofs="+Ue);let ct=!0;for(let zt=0;zt<j;zt++){var Z=Y[zt].g;const ir=Y[zt].map;if(Z-=Ue,Z<0)Ue=Math.max(0,Y[zt].g-100),ct=!1;else try{Z="req"+Z+"_"||"";try{var ge=ir instanceof Map?ir:Object.entries(ir);for(const[Qi,Ti]of ge){let Ci=Ti;h(Ti)&&(Ci=xr(Ti)),Vt.push(Z+Qi+"="+encodeURIComponent(Ci))}}catch(Qi){throw Vt.push(Z+"type="+encodeURIComponent("_badmap")),Qi}}catch{N&&N(ir)}}if(ct){ge=Vt.join("&");break e}}ge=void 0}return f=f.i.splice(0,j),k.G=f,ge}function wn(f){if(!f.g&&!f.v){f.Y=1;var k=f.Da;K||E(),q||(K(),q=!0),A.add(k,f),f.A=0}}function Ei(f){return f.g||f.v||f.A>=3?!1:(f.Y++,f.v=fi(m(f.Da,f),Oa(f,f.A)),f.A++,!0)}t.Da=function(){if(this.v=null,Vs(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var f=4*this.T;this.j.info("BP detection timer enabled: "+f),this.B=fi(m(this.Wa,this),f)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,wt(10),nr(this),Vs(this))};function zo(f){f.B!=null&&(c.clearTimeout(f.B),f.B=null)}function Vs(f){f.g=new br(f,f.j,"rpc",f.Y),f.u===null&&(f.g.J=f.o),f.g.P=0;var k=kr(f.na);st(k,"RID","rpc"),st(k,"SID",f.M),st(k,"AID",f.K),st(k,"CI",f.F?"0":"1"),!f.F&&f.ia&&st(k,"TO",f.ia),st(k,"TYPE","xmlhttp"),ji(f,k),f.u&&f.o&&Pa(k,f.u,f.o),f.O&&(f.g.H=f.O);var j=f.g;f=f.ba,j.M=1,j.A=$i(kr(k)),j.u=null,j.R=!0,sc(j,f)}t.Va=function(){this.C!=null&&(this.C=null,nr(this),Ei(this),wt(19))};function Va(f){f.C!=null&&(c.clearTimeout(f.C),f.C=null)}function La(f,k){var j=null;if(f.g==k){Va(f),zo(f),f.g=null;var N=2}else if(lc(f.h,k))j=k.G,Do(f.h,k),N=1;else return;if(f.I!=0){if(k.o)if(N==1){j=k.u?k.u.length:0,k=Date.now()-k.F;var Y=f.D;N=hi(),dt(N,new Io(N,j)),Gi(f)}else wn(f);else if(Y=k.m,Y==3||Y==0&&k.X>0||!(N==1&&pd(f,k)||N==2&&Ei(f)))switch(j&&j.length>0&&(k=f.h,k.i=k.i.concat(j)),Y){case 1:rr(f,5);break;case 4:rr(f,10);break;case 3:rr(f,6);break;default:rr(f,2)}}}function Oa(f,k){let j=f.Qa+Math.floor(Math.random()*f.Za);return f.isActive()||(j*=2),j*k}function rr(f,k){if(f.j.info("Error code "+k),k==2){var j=m(f.bb,f),N=f.Ua;const Y=!N;N=new yi(N||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||No(N,"https"),$i(N),Y?ki(N.toString(),j):wi(N.toString(),j)}else wt(2);f.I=0,f.l&&f.l.pa(k),Fo(f),Ma(f)}t.bb=function(f){f?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function Fo(f){if(f.I=0,f.ja=[],f.l){const k=Zn(f.h);(k.length!=0||f.i.length!=0)&&(w(f.ja,k),w(f.ja,f.i),f.h.i.length=0,S(f.i),f.i.length=0),f.l.oa()}}function xc(f,k,j){var N=j instanceof yi?kr(j):new yi(j);if(N.g!="")k&&(N.g=k+"."+N.g),vi(N,N.u);else{var Y=c.location;N=Y.protocol,k=k?k+"."+Y.hostname:Y.hostname,Y=+Y.port;const Z=new yi(null);N&&No(Z,N),k&&(Z.g=k),Y&&vi(Z,Y),j&&(Z.h=j),N=Z}return j=f.G,k=f.wa,j&&k&&st(N,j,k),st(N,"VER",f.ka),ji(f,N),N}function gd(f,k,j){if(k&&!f.L)throw Error("Can't create secondary domain capable XhrIo object.");return k=f.Aa&&!f.ma?new ht(new Hi({ab:j})):new ht(f.ma),k.Fa(f.L),k}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function yd(){}t=yd.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Ba(){}Ba.prototype.g=function(f,k){return new fn(f,k)};function fn(f,k){lt.call(this),this.g=new Da(k),this.l=f,this.h=k&&k.messageUrlParams||null,f=k&&k.messageHeaders||null,k&&k.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=k&&k.initMessageHeaders||null,k&&k.messageContentType&&(f?f["X-WebChannel-Content-Type"]=k.messageContentType:f={"X-WebChannel-Content-Type":k.messageContentType}),k&&k.sa&&(f?f["X-WebChannel-Client-Profile"]=k.sa:f={"X-WebChannel-Client-Profile":k.sa}),this.g.U=f,(f=k&&k.Qb)&&!O(f)&&(this.g.u=f),this.A=k&&k.supportsCrossDomainXhr||!1,this.v=k&&k.sendRawJson||!1,(k=k&&k.httpSessionIdParam)&&!O(k)&&(this.g.G=k,f=this.h,f!==null&&k in f&&(f=this.h,k in f&&delete f[k])),this.j=new Ls(this)}y(fn,lt),fn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){Na(this.g)},fn.prototype.o=function(f){var k=this.g;if(typeof f=="string"){var j={};j.__data__=f,f=j}else this.v&&(j={},j.__data__=xr(f),f=j);k.i.push(new cm(k.Ya++,f)),k.I==3&&Gi(k)},fn.prototype.N=function(){this.g.l=null,delete this.j,Na(this.g),delete this.g,fn.Z.N.call(this)};function vd(f){Is.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var k=f.__sm__;if(k){e:{for(const j in k){f=j;break e}f=void 0}(this.i=f)&&(f=this.i,k=k!==null&&f in k?k[f]:void 0),this.data=k}else this.data=f}y(vd,Is);function xd(){Co.call(this),this.status=1}y(xd,Co);function Ls(f){this.g=f}y(Ls,yd),Ls.prototype.ra=function(){dt(this.g,"a")},Ls.prototype.qa=function(f){dt(this.g,new vd(f))},Ls.prototype.pa=function(f){dt(this.g,new xd)},Ls.prototype.oa=function(){dt(this.g,"b")},Ba.prototype.createWebChannel=Ba.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,kS=function(){return new Ba},bS=function(){return hi()},xS=Jn,Vg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},kn.NO_ERROR=0,kn.TIMEOUT=8,kn.HTTP_ERROR=6,Dh=kn,pi.COMPLETE="complete",vS=pi,ja.EventType=di,di.OPEN="a",di.CLOSE="b",di.ERROR="c",di.MESSAGE="d",lt.prototype.listen=lt.prototype.J,Zc=ja,ht.prototype.listenOnce=ht.prototype.K,ht.prototype.getLastError=ht.prototype.Ha,ht.prototype.getLastErrorCode=ht.prototype.ya,ht.prototype.getStatus=ht.prototype.ca,ht.prototype.getResponseJson=ht.prototype.La,ht.prototype.getResponseText=ht.prototype.la,ht.prototype.send=ht.prototype.ea,ht.prototype.setWithCredentials=ht.prototype.Fa,yS=ht}).apply(typeof ph<"u"?ph:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Cn.UNAUTHENTICATED=new Cn(null),Cn.GOOGLE_CREDENTIALS=new Cn("google-credentials-uid"),Cn.FIRST_PARTY=new Cn("first-party-uid"),Cn.MOCK_USER=new Cn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ql="12.8.0";function ED(t){ql=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha=new By("@firebase/firestore");function ll(){return ha.logLevel}function be(t,...e){if(ha.logLevel<=Qe.DEBUG){const n=e.map(Jy);ha.debug(`Firestore (${ql}): ${t}`,...n)}}function vs(t,...e){if(ha.logLevel<=Qe.ERROR){const n=e.map(Jy);ha.error(`Firestore (${ql}): ${t}`,...n)}}function fa(t,...e){if(ha.logLevel<=Qe.WARN){const n=e.map(Jy);ha.warn(`Firestore (${ql}): ${t}`,...n)}}function Jy(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,wS(t,r,n)}function wS(t,e,n){let r=`FIRESTORE (${ql}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw vs(r),new Error(r)}function at(t,e,n,r){let o="Unexpected state";typeof n=="string"?o=n:r=n,t||wS(e,o,r)}function We(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends ws{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _S{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Cn.UNAUTHENTICATED)))}shutdown(){}}class TD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class CD{constructor(e){this.t=e,this.currentUser=Cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){at(this.o===void 0,42304);let r=this.i;const o=d=>this.i!==r?(r=this.i,n(d)):Promise.resolve();let l=new us;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new us,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const d=l;e.enqueueRetryable((async()=>{await d.promise,await o(this.currentUser)}))},h=d=>{be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((d=>h(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?h(d):(be("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new us)}}),0),c()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(at(typeof r.accessToken=="string",31837,{l:r}),new SS(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return at(e===null||typeof e=="string",2055,{h:e}),new Cn(e)}}class ID{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Cn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class AD{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new ID(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Cn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class wb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class RD{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,cr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){at(this.o===void 0,3512);const r=l=>{l.error!=null&&be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,be("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const o=l=>{be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new wb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(at(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new wb(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PD(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=PD(40);for(let l=0;l<o.length;++l)r.length<20&&o[l]<n&&(r+=e.charAt(o[l]%62))}return r}}function Ye(t,e){return t<e?-1:t>e?1:0}function Lg(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const o=t.charAt(r),l=e.charAt(r);if(o!==l)return qp(o)===qp(l)?Ye(o,l):qp(o)?1:-1}return Ye(t.length,e.length)}const DD=55296,ND=57343;function qp(t){const e=t.charCodeAt(0);return e>=DD&&e<=ND}function Il(t,e,n){return t.length===e.length&&t.every(((r,o)=>n(r,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sb="__name__";class Di{constructor(e,n,r){n===void 0?n=0:n>e.length&&Me(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Me(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Di.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Di?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let o=0;o<r;o++){const l=Di.compareSegments(e.get(o),n.get(o));if(l!==0)return l}return Ye(e.length,n.length)}static compareSegments(e,n){const r=Di.isNumericId(e),o=Di.isNumericId(n);return r&&!o?-1:!r&&o?1:r&&o?Di.extractNumericId(e).compare(Di.extractNumericId(n)):Lg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return lo.fromString(e.substring(4,e.length-2))}}class pt extends Di{construct(e,n,r){return new pt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ve(ee.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((o=>o.length>0)))}return new pt(n)}static emptyPath(){return new pt([])}}const MD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class on extends Di{construct(e,n,r){return new on(e,n,r)}static isValidIdentifier(e){return MD.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),on.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Sb}static keyField(){return new on([Sb])}static fromServerFormat(e){const n=[];let r="",o=0;const l=()=>{if(r.length===0)throw new ve(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let c=!1;for(;o<e.length;){const h=e[o];if(h==="\\"){if(o+1===e.length)throw new ve(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[o+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ve(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,o+=2}else h==="`"?(c=!c,o++):h!=="."||c?(r+=h,o++):(l(),o++)}if(l(),c)throw new ve(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new on(n)}static emptyPath(){return new on([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.path=e}static fromPath(e){return new Ae(pt.fromString(e))}static fromName(e){return new Ae(pt.fromString(e).popFirst(5))}static empty(){return new Ae(pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return pt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ae(new pt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jS(t,e,n){if(!n)throw new ve(ee.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function ES(t,e,n,r){if(e===!0&&r===!0)throw new ve(ee.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function _b(t){if(!Ae.isDocumentKey(t))throw new ve(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function jb(t){if(Ae.isDocumentKey(t))throw new ve(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function TS(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Pf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Me(12329,{type:typeof t})}function mr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ve(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Pf(t);throw new ve(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ou(t,e){if(!TS(t))throw new ve(ee.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const o=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const c=t[r];if(o&&typeof c!==o){n=`JSON field '${r}' must be a ${o}.`;break}if(l!==void 0&&c!==l.value){n=`Expected '${r}' field to equal '${l.value}'`;break}}if(n)throw new ve(ee.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb=-62135596800,Tb=1e6;class rt{static now(){return rt.fromMillis(Date.now())}static fromDate(e){return rt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Tb);return new rt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ve(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ve(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Eb)throw new ve(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Tb}_compareTo(e){return this.seconds===e.seconds?Ye(this.nanoseconds,e.nanoseconds):Ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:rt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ou(e,rt._jsonSchema))return new rt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Eb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}rt._jsonSchemaVersion="firestore/timestamp/1.0",rt._jsonSchema={type:Ht("string",rt._jsonSchemaVersion),seconds:Ht("number"),nanoseconds:Ht("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{static fromTimestamp(e){return new Fe(e)}static min(){return new Fe(new rt(0,0))}static max(){return new Fe(new rt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vu=-1;function VD(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,o=Fe.fromTimestamp(r===1e9?new rt(n+1,0):new rt(n,r));return new uo(o,Ae.empty(),e)}function LD(t){return new uo(t.readTime,t.key,vu)}class uo{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new uo(Fe.min(),Ae.empty(),vu)}static max(){return new uo(Fe.max(),Ae.empty(),vu)}}function OD(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ae.comparator(t.documentKey,e.documentKey),n!==0?n:Ye(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class zD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gl(t){if(t.code!==ee.FAILED_PRECONDITION||t.message!==BD)throw t;be("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new re(((r,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,o)},this.catchCallback=l=>{this.wrapFailure(n,l).next(r,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof re?n:re.resolve(n)}catch(n){return re.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):re.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):re.reject(n)}static resolve(e){return new re(((n,r)=>{n(e)}))}static reject(e){return new re(((n,r)=>{r(e)}))}static waitFor(e){return new re(((n,r)=>{let o=0,l=0,c=!1;e.forEach((h=>{++o,h.next((()=>{++l,c&&l===o&&n()}),(d=>r(d)))})),c=!0,l===o&&n()}))}static or(e){let n=re.resolve(!1);for(const r of e)n=n.next((o=>o?re.resolve(o):r()));return n}static forEach(e,n){const r=[];return e.forEach(((o,l)=>{r.push(n.call(this,o,l))})),this.waitFor(r)}static mapArray(e,n){return new re(((r,o)=>{const l=e.length,c=new Array(l);let h=0;for(let d=0;d<l;d++){const m=d;n(e[m]).next((g=>{c[m]=g,++h,h===l&&r(c)}),(g=>o(g)))}}))}static doWhile(e,n){return new re(((r,o)=>{const l=()=>{e()===!0?n().next((()=>{l()}),o):r()};l()}))}}function FD(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ql(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Df.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zy=-1;function Nf(t){return t==null}function Xh(t){return t===0&&1/t==-1/0}function UD(t){return typeof t=="number"&&Number.isInteger(t)&&!Xh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS="";function WD(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Cb(e)),e=$D(t.get(n),e);return Cb(e)}function $D(t,e){let n=e;const r=t.length;for(let o=0;o<r;o++){const l=t.charAt(o);switch(l){case"\0":n+="";break;case CS:n+="";break;default:n+=l}}return n}function Cb(t){return t+CS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function So(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function IS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,n){this.comparator=e,this.root=n||yn.EMPTY}insert(e,n){return new At(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,yn.BLACK,null,null))}remove(e){return new At(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return n+r.left.size;o<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new gh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new gh(this.root,e,this.comparator,!1)}getReverseIterator(){return new gh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new gh(this.root,e,this.comparator,!0)}}class gh{constructor(e,n,r,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=n?r(e.key,n):1,n&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yn{constructor(e,n,r,o,l){this.key=e,this.value=n,this.color=r??yn.RED,this.left=o??yn.EMPTY,this.right=l??yn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,o,l){return new yn(e??this.key,n??this.value,r??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let o=this;const l=r(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,n,r),null):l===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return yn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return yn.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Me(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Me(27949);return e+(this.isRed()?0:1)}}yn.EMPTY=null,yn.RED=!0,yn.BLACK=!1;yn.EMPTY=new class{constructor(){this.size=0}get key(){throw Me(57766)}get value(){throw Me(16141)}get color(){throw Me(16727)}get left(){throw Me(29726)}get right(){throw Me(36894)}copy(e,n,r,o,l){return this}insert(e,n,r){return new yn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.comparator=e,this.data=new At(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ab(this.data.getIterator())}getIteratorFrom(e){return new Ab(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Jt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,l=r.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Jt(this.comparator);return n.data=e,n}}class Ab{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e){this.fields=e,e.sort(on.comparator)}static empty(){return new dr([])}unionWith(e){let n=new Jt(on.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new dr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Il(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new AS("Invalid base64 string: "+l):l}})(e);return new cn(n)}static fromUint8Array(e){const n=(function(o){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);return l})(e);return new cn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}cn.EMPTY_BYTE_STRING=new cn("");const HD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ho(t){if(at(!!t,39018),typeof t=="string"){let e=0;const n=HD.exec(t);if(at(!!n,46558,{timestamp:t}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ot(t.seconds),nanos:Ot(t.nanos)}}function Ot(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function fo(t){return typeof t=="string"?cn.fromBase64String(t):cn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS="server_timestamp",PS="__type__",DS="__previous_value__",NS="__local_write_time__";function e0(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[PS])==null?void 0:r.stringValue)===RS}function Mf(t){const e=t.mapValue.fields[DS];return e0(e)?Mf(e):e}function xu(t){const e=ho(t.mapValue.fields[NS].timestampValue);return new rt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(e,n,r,o,l,c,h,d,m,g,y){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=o,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=m,this.isUsingEmulator=g,this.apiKey=y}}const Jh="(default)";class Al{constructor(e,n){this.projectId=e,this.database=n||Jh}static empty(){return new Al("","")}get isDefaultDatabase(){return this.database===Jh}isEqual(e){return e instanceof Al&&e.projectId===this.projectId&&e.database===this.database}}function qD(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new ve(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Al(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS="__type__",GD="__max__",yh={mapValue:{}},VS="__vector__",Zh="value";function mo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?e0(t)?4:YD(t)?9007199254740991:QD(t)?10:11:Me(28295,{value:t})}function Bi(t,e){if(t===e)return!0;const n=mo(t);if(n!==mo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return xu(t).isEqual(xu(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const c=ho(o.timestampValue),h=ho(l.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(o,l){return fo(o.bytesValue).isEqual(fo(l.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(o,l){return Ot(o.geoPointValue.latitude)===Ot(l.geoPointValue.latitude)&&Ot(o.geoPointValue.longitude)===Ot(l.geoPointValue.longitude)})(t,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return Ot(o.integerValue)===Ot(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const c=Ot(o.doubleValue),h=Ot(l.doubleValue);return c===h?Xh(c)===Xh(h):isNaN(c)&&isNaN(h)}return!1})(t,e);case 9:return Il(t.arrayValue.values||[],e.arrayValue.values||[],Bi);case 10:case 11:return(function(o,l){const c=o.mapValue.fields||{},h=l.mapValue.fields||{};if(Ib(c)!==Ib(h))return!1;for(const d in c)if(c.hasOwnProperty(d)&&(h[d]===void 0||!Bi(c[d],h[d])))return!1;return!0})(t,e);default:return Me(52216,{left:t})}}function bu(t,e){return(t.values||[]).find((n=>Bi(n,e)))!==void 0}function Rl(t,e){if(t===e)return 0;const n=mo(t),r=mo(e);if(n!==r)return Ye(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ye(t.booleanValue,e.booleanValue);case 2:return(function(l,c){const h=Ot(l.integerValue||l.doubleValue),d=Ot(c.integerValue||c.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1})(t,e);case 3:return Rb(t.timestampValue,e.timestampValue);case 4:return Rb(xu(t),xu(e));case 5:return Lg(t.stringValue,e.stringValue);case 6:return(function(l,c){const h=fo(l),d=fo(c);return h.compareTo(d)})(t.bytesValue,e.bytesValue);case 7:return(function(l,c){const h=l.split("/"),d=c.split("/");for(let m=0;m<h.length&&m<d.length;m++){const g=Ye(h[m],d[m]);if(g!==0)return g}return Ye(h.length,d.length)})(t.referenceValue,e.referenceValue);case 8:return(function(l,c){const h=Ye(Ot(l.latitude),Ot(c.latitude));return h!==0?h:Ye(Ot(l.longitude),Ot(c.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return Pb(t.arrayValue,e.arrayValue);case 10:return(function(l,c){var x,S,w,_;const h=l.fields||{},d=c.fields||{},m=(x=h[Zh])==null?void 0:x.arrayValue,g=(S=d[Zh])==null?void 0:S.arrayValue,y=Ye(((w=m==null?void 0:m.values)==null?void 0:w.length)||0,((_=g==null?void 0:g.values)==null?void 0:_.length)||0);return y!==0?y:Pb(m,g)})(t.mapValue,e.mapValue);case 11:return(function(l,c){if(l===yh.mapValue&&c===yh.mapValue)return 0;if(l===yh.mapValue)return 1;if(c===yh.mapValue)return-1;const h=l.fields||{},d=Object.keys(h),m=c.fields||{},g=Object.keys(m);d.sort(),g.sort();for(let y=0;y<d.length&&y<g.length;++y){const x=Lg(d[y],g[y]);if(x!==0)return x;const S=Rl(h[d[y]],m[g[y]]);if(S!==0)return S}return Ye(d.length,g.length)})(t.mapValue,e.mapValue);default:throw Me(23264,{he:n})}}function Rb(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ye(t,e);const n=ho(t),r=ho(e),o=Ye(n.seconds,r.seconds);return o!==0?o:Ye(n.nanos,r.nanos)}function Pb(t,e){const n=t.values||[],r=e.values||[];for(let o=0;o<n.length&&o<r.length;++o){const l=Rl(n[o],r[o]);if(l)return l}return Ye(n.length,r.length)}function Pl(t){return Og(t)}function Og(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=ho(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return fo(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Ae.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",o=!0;for(const l of n.values||[])o?o=!1:r+=",",r+=Og(l);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let o="{",l=!0;for(const c of r)l?l=!1:o+=",",o+=`${c}:${Og(n.fields[c])}`;return o+"}"})(t.mapValue):Me(61005,{value:t})}function Nh(t){switch(mo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Mf(t);return e?16+Nh(e):16;case 5:return 2*t.stringValue.length;case 6:return fo(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,l)=>o+Nh(l)),0)})(t.arrayValue);case 10:case 11:return(function(r){let o=0;return So(r.fields,((l,c)=>{o+=l.length+Nh(c)})),o})(t.mapValue);default:throw Me(13486,{value:t})}}function Db(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Bg(t){return!!t&&"integerValue"in t}function t0(t){return!!t&&"arrayValue"in t}function Nb(t){return!!t&&"nullValue"in t}function Mb(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Mh(t){return!!t&&"mapValue"in t}function QD(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[MS])==null?void 0:r.stringValue)===VS}function ou(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return So(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=ou(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ou(t.arrayValue.values[n]);return e}return{...t}}function YD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===GD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this.value=e}static empty(){return new Qn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Mh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ou(n)}setAll(e){let n=on.emptyPath(),r={},o=[];e.forEach(((c,h)=>{if(!n.isImmediateParentOf(h)){const d=this.getFieldsMap(n);this.applyChanges(d,r,o),r={},o=[],n=h.popLast()}c?r[h.lastSegment()]=ou(c):o.push(h.lastSegment())}));const l=this.getFieldsMap(n);this.applyChanges(l,r,o)}delete(e){const n=this.field(e.popLast());Mh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Bi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=n.mapValue.fields[e.get(r)];Mh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,r){So(n,((o,l)=>e[o]=l));for(const o of r)delete e[o]}clone(){return new Qn(ou(this.value))}}function LS(t){const e=[];return So(t.fields,((n,r)=>{const o=new on([n]);if(Mh(r)){const l=LS(r.mapValue).fields;if(l.length===0)e.push(o);else for(const c of l)e.push(o.child(c))}else e.push(o)})),new dr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e,n,r,o,l,c,h){this.key=e,this.documentType=n,this.version=r,this.readTime=o,this.createTime=l,this.data=c,this.documentState=h}static newInvalidDocument(e){return new In(e,0,Fe.min(),Fe.min(),Fe.min(),Qn.empty(),0)}static newFoundDocument(e,n,r,o){return new In(e,1,n,Fe.min(),r,o,0)}static newNoDocument(e,n){return new In(e,2,n,Fe.min(),Fe.min(),Qn.empty(),0)}static newUnknownDocument(e,n){return new In(e,3,n,Fe.min(),Fe.min(),Qn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof In&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new In(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e,n){this.position=e,this.inclusive=n}}function Vb(t,e,n){let r=0;for(let o=0;o<t.position.length;o++){const l=e[o],c=t.position[o];if(l.field.isKeyField()?r=Ae.comparator(Ae.fromName(c.referenceValue),n.key):r=Rl(c,n.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function Lb(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Bi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e,n="asc"){this.field=e,this.dir=n}}function XD(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{}class $t extends OS{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new ZD(e,n,r):n==="array-contains"?new n4(e,r):n==="in"?new r4(e,r):n==="not-in"?new i4(e,r):n==="array-contains-any"?new s4(e,r):new $t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new e4(e,r):new t4(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Rl(n,this.value)):n!==null&&mo(this.value)===mo(n)&&this.matchesComparison(Rl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ai extends OS{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ai(e,n)}matches(e){return BS(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function BS(t){return t.op==="and"}function zS(t){return JD(t)&&BS(t)}function JD(t){for(const e of t.filters)if(e instanceof ai)return!1;return!0}function zg(t){if(t instanceof $t)return t.field.canonicalString()+t.op.toString()+Pl(t.value);if(zS(t))return t.filters.map((e=>zg(e))).join(",");{const e=t.filters.map((n=>zg(n))).join(",");return`${t.op}(${e})`}}function FS(t,e){return t instanceof $t?(function(r,o){return o instanceof $t&&r.op===o.op&&r.field.isEqual(o.field)&&Bi(r.value,o.value)})(t,e):t instanceof ai?(function(r,o){return o instanceof ai&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((l,c,h)=>l&&FS(c,o.filters[h])),!0):!1})(t,e):void Me(19439)}function US(t){return t instanceof $t?(function(n){return`${n.field.canonicalString()} ${n.op} ${Pl(n.value)}`})(t):t instanceof ai?(function(n){return n.op.toString()+" {"+n.getFilters().map(US).join(" ,")+"}"})(t):"Filter"}class ZD extends $t{constructor(e,n,r){super(e,n,r),this.key=Ae.fromName(r.referenceValue)}matches(e){const n=Ae.comparator(e.key,this.key);return this.matchesComparison(n)}}class e4 extends $t{constructor(e,n){super(e,"in",n),this.keys=WS("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class t4 extends $t{constructor(e,n){super(e,"not-in",n),this.keys=WS("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function WS(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((r=>Ae.fromName(r.referenceValue)))}class n4 extends $t{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return t0(n)&&bu(n.arrayValue,this.value)}}class r4 extends $t{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&bu(this.value.arrayValue,n)}}class i4 extends $t{constructor(e,n){super(e,"not-in",n)}matches(e){if(bu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!bu(this.value.arrayValue,n)}}class s4 extends $t{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!t0(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>bu(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4{constructor(e,n=null,r=[],o=[],l=null,c=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=o,this.limit=l,this.startAt=c,this.endAt=h,this.Te=null}}function Ob(t,e=null,n=[],r=[],o=null,l=null,c=null){return new o4(t,e,n,r,o,l,c)}function n0(t){const e=We(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>zg(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),Nf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Pl(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Pl(r))).join(",")),e.Te=n}return e.Te}function r0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!XD(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!FS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Lb(t.startAt,e.startAt)&&Lb(t.endAt,e.endAt)}function Fg(t){return Ae.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e,n=null,r=[],o=[],l=null,c="F",h=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=o,this.limit=l,this.limitType=c,this.startAt=h,this.endAt=d,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function a4(t,e,n,r,o,l,c,h){return new Yl(t,e,n,r,o,l,c,h)}function i0(t){return new Yl(t)}function Bb(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function l4(t){return Ae.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function $S(t){return t.collectionGroup!==null}function au(t){const e=We(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),n.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new Jt(on.comparator);return c.filters.forEach((d=>{d.getFlattenedFilters().forEach((m=>{m.isInequality()&&(h=h.add(m.field))}))})),h})(e).forEach((l=>{n.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new ku(l,r))})),n.has(on.keyField().canonicalString())||e.Ie.push(new ku(on.keyField(),r))}return e.Ie}function Vi(t){const e=We(t);return e.Ee||(e.Ee=c4(e,au(t))),e.Ee}function c4(t,e){if(t.limitType==="F")return Ob(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new ku(o.field,l)}));const n=t.endAt?new ef(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ef(t.startAt.position,t.startAt.inclusive):null;return Ob(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ug(t,e){const n=t.filters.concat([e]);return new Yl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function u4(t,e){const n=t.explicitOrderBy.concat([e]);return new Yl(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}function tf(t,e,n){return new Yl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Vf(t,e){return r0(Vi(t),Vi(e))&&t.limitType===e.limitType}function HS(t){return`${n0(Vi(t))}|lt:${t.limitType}`}function cl(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((o=>US(o))).join(", ")}]`),Nf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((o=>Pl(o))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((o=>Pl(o))).join(",")),`Target(${r})`})(Vi(t))}; limitType=${t.limitType})`}function Lf(t,e){return e.isFoundDocument()&&(function(r,o){const l=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):Ae.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(t,e)&&(function(r,o){for(const l of au(r))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(t,e)&&(function(r,o){for(const l of r.filters)if(!l.matches(o))return!1;return!0})(t,e)&&(function(r,o){return!(r.startAt&&!(function(c,h,d){const m=Vb(c,h,d);return c.inclusive?m<=0:m<0})(r.startAt,au(r),o)||r.endAt&&!(function(c,h,d){const m=Vb(c,h,d);return c.inclusive?m>=0:m>0})(r.endAt,au(r),o))})(t,e)}function d4(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function KS(t){return(e,n)=>{let r=!1;for(const o of au(t)){const l=h4(o,e,n);if(l!==0)return l;r=r||o.field.isKeyField()}return 0}}function h4(t,e,n){const r=t.field.isKeyField()?Ae.comparator(e.key,n.key):(function(l,c,h){const d=c.data.field(l),m=h.data.field(l);return d!==null&&m!==null?Rl(d,m):Me(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Me(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[o,l]of r)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[n]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){So(this.inner,((n,r)=>{for(const[o,l]of r)e(o,l)}))}isEmpty(){return IS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f4=new At(Ae.comparator);function xs(){return f4}const qS=new At(Ae.comparator);function eu(...t){let e=qS;for(const n of t)e=e.insert(n.key,n);return e}function GS(t){let e=qS;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function ia(){return lu()}function QS(){return lu()}function lu(){return new ka((t=>t.toString()),((t,e)=>t.isEqual(e)))}const m4=new At(Ae.comparator),p4=new Jt(Ae.comparator);function Xe(...t){let e=p4;for(const n of t)e=e.add(n);return e}const g4=new Jt(Ye);function y4(){return g4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xh(e)?"-0":e}}function YS(t){return{integerValue:""+t}}function XS(t,e){return UD(e)?YS(e):s0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(){this._=void 0}}function v4(t,e,n){return t instanceof wu?(function(o,l){const c={fields:{[PS]:{stringValue:RS},[NS]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&e0(l)&&(l=Mf(l)),l&&(c.fields[DS]=l),{mapValue:c}})(n,e):t instanceof Dl?ZS(t,e):t instanceof Nl?e_(t,e):(function(o,l){const c=JS(o,l),h=zb(c)+zb(o.Ae);return Bg(c)&&Bg(o.Ae)?YS(h):s0(o.serializer,h)})(t,e)}function x4(t,e,n){return t instanceof Dl?ZS(t,e):t instanceof Nl?e_(t,e):n}function JS(t,e){return t instanceof Su?(function(r){return Bg(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class wu extends Of{}class Dl extends Of{constructor(e){super(),this.elements=e}}function ZS(t,e){const n=t_(e);for(const r of t.elements)n.some((o=>Bi(o,r)))||n.push(r);return{arrayValue:{values:n}}}class Nl extends Of{constructor(e){super(),this.elements=e}}function e_(t,e){let n=t_(e);for(const r of t.elements)n=n.filter((o=>!Bi(o,r)));return{arrayValue:{values:n}}}class Su extends Of{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function zb(t){return Ot(t.integerValue||t.doubleValue)}function t_(t){return t0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e,n){this.field=e,this.transform=n}}function b4(t,e){return t.field.isEqual(e.field)&&(function(r,o){return r instanceof Dl&&o instanceof Dl||r instanceof Nl&&o instanceof Nl?Il(r.elements,o.elements,Bi):r instanceof Su&&o instanceof Su?Bi(r.Ae,o.Ae):r instanceof wu&&o instanceof wu})(t.transform,e.transform)}class k4{constructor(e,n){this.version=e,this.transformResults=n}}class Ln{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ln}static exists(e){return new Ln(void 0,e)}static updateTime(e){return new Ln(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Vh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class zf{}function n_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ff(t.key,Ln.none()):new Bu(t.key,t.data,Ln.none());{const n=t.data,r=Qn.empty();let o=new Jt(on.comparator);for(let l of e.fields)if(!o.has(l)){let c=n.field(l);c===null&&l.length>1&&(l=l.popLast(),c=n.field(l)),c===null?r.delete(l):r.set(l,c),o=o.add(l)}return new _o(t.key,r,new dr(o.toArray()),Ln.none())}}function w4(t,e,n){t instanceof Bu?(function(o,l,c){const h=o.value.clone(),d=Ub(o.fieldTransforms,l,c.transformResults);h.setAll(d),l.convertToFoundDocument(c.version,h).setHasCommittedMutations()})(t,e,n):t instanceof _o?(function(o,l,c){if(!Vh(o.precondition,l))return void l.convertToUnknownDocument(c.version);const h=Ub(o.fieldTransforms,l,c.transformResults),d=l.data;d.setAll(r_(o)),d.setAll(h),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(t,e,n):(function(o,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,n)}function cu(t,e,n,r){return t instanceof Bu?(function(l,c,h,d){if(!Vh(l.precondition,c))return h;const m=l.value.clone(),g=Wb(l.fieldTransforms,d,c);return m.setAll(g),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null})(t,e,n,r):t instanceof _o?(function(l,c,h,d){if(!Vh(l.precondition,c))return h;const m=Wb(l.fieldTransforms,d,c),g=c.data;return g.setAll(r_(l)),g.setAll(m),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),h===null?null:h.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((y=>y.field)))})(t,e,n,r):(function(l,c,h){return Vh(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h})(t,e,n)}function S4(t,e){let n=null;for(const r of t.fieldTransforms){const o=e.data.field(r.field),l=JS(r.transform,o||null);l!=null&&(n===null&&(n=Qn.empty()),n.set(r.field,l))}return n||null}function Fb(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Il(r,o,((l,c)=>b4(l,c)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Bu extends zf{constructor(e,n,r,o=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class _o extends zf{constructor(e,n,r,o,l=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function r_(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function Ub(t,e,n){const r=new Map;at(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let o=0;o<n.length;o++){const l=t[o],c=l.transform,h=e.data.field(l.field);r.set(l.field,x4(c,h,n[o]))}return r}function Wb(t,e,n){const r=new Map;for(const o of t){const l=o.transform,c=n.data.field(o.field);r.set(o.field,v4(l,c,e))}return r}class Ff extends zf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _4 extends zf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(e,n,r,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&w4(l,e,r[o])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=cu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=cu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=QS();return this.mutations.forEach((o=>{const l=e.get(o.key),c=l.overlayedDocument;let h=this.applyToLocalView(c,l.mutatedFields);h=n.has(o.key)?null:h;const d=n_(c,h);d!==null&&r.set(o.key,d),c.isValidDocument()||c.convertToNoDocument(Fe.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Xe())}isEqual(e){return this.batchId===e.batchId&&Il(this.mutations,e.mutations,((n,r)=>Fb(n,r)))&&Il(this.baseMutations,e.baseMutations,((n,r)=>Fb(n,r)))}}class o0{constructor(e,n,r,o){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=o}static from(e,n,r){at(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=(function(){return m4})();const l=e.mutations;for(let c=0;c<l.length;c++)o=o.insert(l[c].key,r[c].version);return new o0(e,n,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ut,Ze;function C4(t){switch(t){case ee.OK:return Me(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return Me(15467,{code:t})}}function i_(t){if(t===void 0)return vs("GRPC error has no .code"),ee.UNKNOWN;switch(t){case Ut.OK:return ee.OK;case Ut.CANCELLED:return ee.CANCELLED;case Ut.UNKNOWN:return ee.UNKNOWN;case Ut.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case Ut.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case Ut.INTERNAL:return ee.INTERNAL;case Ut.UNAVAILABLE:return ee.UNAVAILABLE;case Ut.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case Ut.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case Ut.NOT_FOUND:return ee.NOT_FOUND;case Ut.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case Ut.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case Ut.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case Ut.ABORTED:return ee.ABORTED;case Ut.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case Ut.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case Ut.DATA_LOSS:return ee.DATA_LOSS;default:return Me(39323,{code:t})}}(Ze=Ut||(Ut={}))[Ze.OK=0]="OK",Ze[Ze.CANCELLED=1]="CANCELLED",Ze[Ze.UNKNOWN=2]="UNKNOWN",Ze[Ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ze[Ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ze[Ze.NOT_FOUND=5]="NOT_FOUND",Ze[Ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ze[Ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ze[Ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ze[Ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ze[Ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ze[Ze.ABORTED=10]="ABORTED",Ze[Ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ze[Ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ze[Ze.INTERNAL=13]="INTERNAL",Ze[Ze.UNAVAILABLE=14]="UNAVAILABLE",Ze[Ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A4=new lo([4294967295,4294967295],0);function $b(t){const e=I4().encode(t),n=new gS;return n.update(e),new Uint8Array(n.digest())}function Hb(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new lo([n,r],0),new lo([o,l],0)]}class a0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new tu(`Invalid padding: ${n}`);if(r<0)throw new tu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new tu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new tu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=lo.fromNumber(this.ge)}ye(e,n,r){let o=e.add(n.multiply(lo.fromNumber(r)));return o.compare(A4)===1&&(o=new lo([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=$b(e),[r,o]=Hb(n);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,o,l);if(!this.we(c))return!1}return!0}static create(e,n,r){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new a0(l,o,n);return r.forEach((h=>c.insert(h))),c}insert(e){if(this.ge===0)return;const n=$b(e),[r,o]=Hb(n);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,o,l);this.be(c)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class tu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,n,r,o,l){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const o=new Map;return o.set(e,zu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Uf(Fe.min(),o,new At(Ye),xs(),Xe())}}class zu{constructor(e,n,r,o,l){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new zu(r,n,Xe(),Xe(),Xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,n,r,o){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=o}}class s_{constructor(e,n){this.targetId=e,this.Ce=n}}class o_{constructor(e,n,r=cn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=o}}class Kb{constructor(){this.ve=0,this.Fe=qb(),this.Me=cn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Xe(),n=Xe(),r=Xe();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:r=r.add(o);break;default:Me(38017,{changeType:l})}})),new zu(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=qb()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,at(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class R4{constructor(e){this.Ge=e,this.ze=new Map,this.je=xs(),this.He=vh(),this.Je=vh(),this.Ze=new At(Ye)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Me(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,r=e.Ce.count,o=this.ot(n);if(o){const l=o.target;if(Fg(l))if(r===0){const c=new Ae(l.path);this.et(n,c,In.newNoDocument(c,Fe.min()))}else at(r===1,20013,{expectedCount:r});else{const c=this._t(n);if(c!==r){const h=this.ut(e),d=h?this.ct(h,e,c):1;if(d!==0){this.it(n);const m=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,m)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:l=0}=n;let c,h;try{c=fo(r).toUint8Array()}catch(d){if(d instanceof AS)return fa("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new a0(c,o,l)}catch(d){return fa(d instanceof tu?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.ge===0?null:h}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let o=0;return r.forEach((l=>{const c=this.Ge.ht(),h=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(h)||(this.et(n,l,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((l,c)=>{const h=this.ot(c);if(h){if(l.current&&Fg(h.target)){const d=new Ae(h.target.path);this.It(d).has(c)||this.Et(c,d)||this.et(c,d,In.newNoDocument(d,e))}l.Be&&(n.set(c,l.ke()),l.Ke())}}));let r=Xe();this.Je.forEach(((l,c)=>{let h=!0;c.forEachWhile((d=>{const m=this.ot(d);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(r=r.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const o=new Uf(e,n,this.Ze,this.je,r);return this.je=xs(),this.He=vh(),this.Je=vh(),this.Ze=new At(Ye),o}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.qe(n,1):o.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new Kb,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Jt(Ye),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Jt(Ye),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||be("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Kb),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function vh(){return new At(Ae.comparator)}function qb(){return new At(Ae.comparator)}const P4={asc:"ASCENDING",desc:"DESCENDING"},D4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},N4={and:"AND",or:"OR"};class M4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Wg(t,e){return t.useProto3Json||Nf(e)?e:{value:e}}function nf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function a_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function V4(t,e){return nf(t,e.toTimestamp())}function Li(t){return at(!!t,49232),Fe.fromTimestamp((function(n){const r=ho(n);return new rt(r.seconds,r.nanos)})(t))}function l0(t,e){return $g(t,e).canonicalString()}function $g(t,e){const n=(function(o){return new pt(["projects",o.projectId,"databases",o.database])})(t).child("documents");return e===void 0?n:n.child(e)}function l_(t){const e=pt.fromString(t);return at(f_(e),10190,{key:e.toString()}),e}function Hg(t,e){return l0(t.databaseId,e.path)}function Gp(t,e){const n=l_(e);if(n.get(1)!==t.databaseId.projectId)throw new ve(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ve(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ae(u_(n))}function c_(t,e){return l0(t.databaseId,e)}function L4(t){const e=l_(t);return e.length===4?pt.emptyPath():u_(e)}function Kg(t){return new pt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function u_(t){return at(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Gb(t,e,n){return{name:Hg(t,e),fields:n.value.mapValue.fields}}function O4(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Me(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(m,g){return m.useProto3Json?(at(g===void 0||typeof g=="string",58123),cn.fromBase64String(g||"")):(at(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),cn.fromUint8Array(g||new Uint8Array))})(t,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&(function(m){const g=m.code===void 0?ee.UNKNOWN:i_(m.code);return new ve(g,m.message||"")})(c);n=new o_(r,o,l,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=Gp(t,r.document.name),l=Li(r.document.updateTime),c=r.document.createTime?Li(r.document.createTime):Fe.min(),h=new Qn({mapValue:{fields:r.document.fields}}),d=In.newFoundDocument(o,l,c,h),m=r.targetIds||[],g=r.removedTargetIds||[];n=new Lh(m,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=Gp(t,r.document),l=r.readTime?Li(r.readTime):Fe.min(),c=In.newNoDocument(o,l),h=r.removedTargetIds||[];n=new Lh([],h,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=Gp(t,r.document),l=r.removedTargetIds||[];n=new Lh([],l,o,null)}else{if(!("filter"in e))return Me(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:l}=r,c=new T4(o,l),h=r.targetId;n=new s_(h,c)}}return n}function B4(t,e){let n;if(e instanceof Bu)n={update:Gb(t,e.key,e.value)};else if(e instanceof Ff)n={delete:Hg(t,e.key)};else if(e instanceof _o)n={update:Gb(t,e.key,e.data),updateMask:G4(e.fieldMask)};else{if(!(e instanceof _4))return Me(16599,{dt:e.type});n={verify:Hg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(l,c){const h=c.transform;if(h instanceof wu)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Dl)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Nl)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Su)return{fieldPath:c.field.canonicalString(),increment:h.Ae};throw Me(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:V4(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Me(27497)})(t,e.precondition)),n}function z4(t,e){return t&&t.length>0?(at(e!==void 0,14353),t.map((n=>(function(o,l){let c=o.updateTime?Li(o.updateTime):Li(l);return c.isEqual(Fe.min())&&(c=Li(l)),new k4(c,o.transformResults||[])})(n,e)))):[]}function F4(t,e){return{documents:[c_(t,e.path)]}}function U4(t,e){const n={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=c_(t,o);const l=(function(m){if(m.length!==0)return h_(ai.create(m,"and"))})(e.filters);l&&(n.structuredQuery.where=l);const c=(function(m){if(m.length!==0)return m.map((g=>(function(x){return{field:ul(x.field),direction:H4(x.dir)}})(g)))})(e.orderBy);c&&(n.structuredQuery.orderBy=c);const h=Wg(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:n,parent:o}}function W4(t){let e=L4(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let o=null;if(r>0){at(r===1,65062);const g=n.from[0];g.allDescendants?o=g.collectionId:e=e.child(g.collectionId)}let l=[];n.where&&(l=(function(y){const x=d_(y);return x instanceof ai&&zS(x)?x.getFilters():[x]})(n.where));let c=[];n.orderBy&&(c=(function(y){return y.map((x=>(function(w){return new ku(dl(w.field),(function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(w.direction))})(x)))})(n.orderBy));let h=null;n.limit&&(h=(function(y){let x;return x=typeof y=="object"?y.value:y,Nf(x)?null:x})(n.limit));let d=null;n.startAt&&(d=(function(y){const x=!!y.before,S=y.values||[];return new ef(S,x)})(n.startAt));let m=null;return n.endAt&&(m=(function(y){const x=!y.before,S=y.values||[];return new ef(S,x)})(n.endAt)),a4(e,o,c,l,h,"F",d,m)}function $4(t,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Me(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function d_(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=dl(n.unaryFilter.field);return $t.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=dl(n.unaryFilter.field);return $t.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=dl(n.unaryFilter.field);return $t.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=dl(n.unaryFilter.field);return $t.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Me(61313);default:return Me(60726)}})(t):t.fieldFilter!==void 0?(function(n){return $t.create(dl(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Me(58110);default:return Me(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return ai.create(n.compositeFilter.filters.map((r=>d_(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Me(1026)}})(n.compositeFilter.op))})(t):Me(30097,{filter:t})}function H4(t){return P4[t]}function K4(t){return D4[t]}function q4(t){return N4[t]}function ul(t){return{fieldPath:t.canonicalString()}}function dl(t){return on.fromServerFormat(t.fieldPath)}function h_(t){return t instanceof $t?(function(n){if(n.op==="=="){if(Mb(n.value))return{unaryFilter:{field:ul(n.field),op:"IS_NAN"}};if(Nb(n.value))return{unaryFilter:{field:ul(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Mb(n.value))return{unaryFilter:{field:ul(n.field),op:"IS_NOT_NAN"}};if(Nb(n.value))return{unaryFilter:{field:ul(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ul(n.field),op:K4(n.op),value:n.value}}})(t):t instanceof ai?(function(n){const r=n.getFilters().map((o=>h_(o)));return r.length===1?r[0]:{compositeFilter:{op:q4(n.op),filters:r}}})(t):Me(54877,{filter:t})}function G4(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function f_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function m_(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e,n,r,o,l=Fe.min(),c=Fe.min(),h=cn.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(e){return new ro(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ro(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ro(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ro(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q4{constructor(e){this.yt=e}}function Y4(t){const e=W4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?tf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(){this.Sn=new J4}addToCollectionParentIndex(e,n){return this.Sn.add(n),re.resolve()}getCollectionParents(e,n){return re.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return re.resolve()}deleteFieldIndex(e,n){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,n){return re.resolve()}getDocumentsMatchingTarget(e,n){return re.resolve(null)}getIndexType(e,n){return re.resolve(0)}getFieldIndexes(e,n){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,n){return re.resolve(uo.min())}getMinOffsetFromCollectionGroup(e,n){return re.resolve(uo.min())}updateCollectionGroup(e,n,r){return re.resolve()}updateIndexEntries(e,n){return re.resolve()}}class J4{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n]||new Jt(pt.comparator),l=!o.has(r);return this.index[n]=o.add(r),l}has(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Jt(pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},p_=41943040;class Gn{static withCacheSize(e){return new Gn(e,Gn.DEFAULT_COLLECTION_PERCENTILE,Gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gn.DEFAULT_COLLECTION_PERCENTILE=10,Gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gn.DEFAULT=new Gn(p_,Gn.DEFAULT_COLLECTION_PERCENTILE,Gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gn.DISABLED=new Gn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Ml(0)}static ar(){return new Ml(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb="LruGarbageCollector",Z4=1048576;function Xb([t,e],[n,r]){const o=Ye(t,n);return o===0?Ye(e,r):o}class eN{constructor(e){this.Pr=e,this.buffer=new Jt(Xb),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Xb(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class tN{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){be(Yb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ql(n)?be(Yb,"Ignoring IndexedDB error during garbage collection: ",n):await Gl(n)}await this.Ar(3e5)}))}}class nN{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return re.resolve(Df.ce);const r=new eN(n);return this.Vr.forEachTarget(e,(o=>r.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>r.Er(o))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(be("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(Qb)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Qb):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,o,l,c,h,d,m;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((y=>(y>this.params.maximumSequenceNumbersToCollect?(be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),o=this.params.maximumSequenceNumbersToCollect):o=y,c=Date.now(),this.nthSequenceNumber(e,o)))).next((y=>(r=y,h=Date.now(),this.removeTargets(e,r,n)))).next((y=>(l=y,d=Date.now(),this.removeOrphanedDocuments(e,r)))).next((y=>(m=Date.now(),ll()<=Qe.DEBUG&&be("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-g}ms
	Determined least recently used ${o} in `+(h-c)+`ms
	Removed ${l} targets in `+(d-h)+`ms
	Removed ${y} documents in `+(m-d)+`ms
Total Duration: ${m-g}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:y}))))}}function rN(t,e){return new nN(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(){this.changes=new ka((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,In.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?re.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(e,n,r,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(r!==null&&cu(r.mutation,o,dr.empty(),rt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Xe()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Xe()){const o=ia();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,r).next((l=>{let c=eu();return l.forEach(((h,d)=>{c=c.insert(h,d.overlayedDocument)})),c}))))}getOverlayedDocuments(e,n){const r=ia();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Xe())))}populateOverlays(e,n,r){const o=[];return r.forEach((l=>{n.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((c,h)=>{n.set(c,h)}))}))}computeViews(e,n,r,o){let l=xs();const c=lu(),h=(function(){return lu()})();return n.forEach(((d,m)=>{const g=r.get(m.key);o.has(m.key)&&(g===void 0||g.mutation instanceof _o)?l=l.insert(m.key,m):g!==void 0?(c.set(m.key,g.mutation.getFieldMask()),cu(g.mutation,m,g.mutation.getFieldMask(),rt.now())):c.set(m.key,dr.empty())})),this.recalculateAndSaveOverlays(e,l).next((d=>(d.forEach(((m,g)=>c.set(m,g))),n.forEach(((m,g)=>h.set(m,new sN(g,c.get(m)??null)))),h)))}recalculateAndSaveOverlays(e,n){const r=lu();let o=new At(((c,h)=>c-h)),l=Xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((c=>{for(const h of c)h.keys().forEach((d=>{const m=n.get(d);if(m===null)return;let g=r.get(d)||dr.empty();g=h.applyToLocalView(m,g),r.set(d,g);const y=(o.get(h.batchId)||Xe()).add(d);o=o.insert(h.batchId,y)}))})).next((()=>{const c=[],h=o.getReverseIterator();for(;h.hasNext();){const d=h.getNext(),m=d.key,g=d.value,y=QS();g.forEach((x=>{if(!l.has(x)){const S=n_(n.get(x),r.get(x));S!==null&&y.set(x,S),l=l.add(x)}})),c.push(this.documentOverlayCache.saveOverlays(e,m,y))}return re.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,o){return l4(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):$S(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,o):this.getDocumentsMatchingCollectionQuery(e,n,r,o)}getNextDocuments(e,n,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,o).next((l=>{const c=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,o-l.size):re.resolve(ia());let h=vu,d=l;return c.next((m=>re.forEach(m,((g,y)=>(h<y.largestBatchId&&(h=y.largestBatchId),l.get(g)?re.resolve():this.remoteDocumentCache.getEntry(e,g).next((x=>{d=d.insert(g,x)}))))).next((()=>this.populateOverlays(e,m,l))).next((()=>this.computeViews(e,d,m,Xe()))).next((g=>({batchId:h,changes:GS(g)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ae(n)).next((r=>{let o=eu();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,o){const l=n.collectionGroup;let c=eu();return this.indexManager.getCollectionParents(e,l).next((h=>re.forEach(h,(d=>{const m=(function(y,x){return new Yl(x,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(n,d.child(l));return this.getDocumentsMatchingCollectionQuery(e,m,r,o).next((g=>{g.forEach(((y,x)=>{c=c.insert(y,x)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,n,r,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,l,o)))).next((c=>{l.forEach(((d,m)=>{const g=m.getKey();c.get(g)===null&&(c=c.insert(g,In.newInvalidDocument(g)))}));let h=eu();return c.forEach(((d,m)=>{const g=l.get(d);g!==void 0&&cu(g.mutation,m,dr.empty(),rt.now()),Lf(n,m)&&(h=h.insert(d,m))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return re.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Li(o.createTime)}})(n)),re.resolve()}getNamedQuery(e,n){return re.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(o){return{name:o.name,query:Y4(o.bundledQuery),readTime:Li(o.readTime)}})(n)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(){this.overlays=new At(Ae.comparator),this.Lr=new Map}getOverlay(e,n){return re.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ia();return re.forEach(n,(o=>this.getOverlay(e,o).next((l=>{l!==null&&r.set(o,l)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((o,l)=>{this.bt(e,n,l)})),re.resolve()}removeOverlaysForBatchId(e,n,r){const o=this.Lr.get(r);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(r)),re.resolve()}getOverlaysForCollection(e,n,r){const o=ia(),l=n.length+1,c=new Ae(n.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const d=h.getNext().value,m=d.getKey();if(!n.isPrefixOf(m.path))break;m.path.length===l&&d.largestBatchId>r&&o.set(d.getKey(),d)}return re.resolve(o)}getOverlaysForCollectionGroup(e,n,r,o){let l=new At(((m,g)=>m-g));const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===n&&m.largestBatchId>r){let g=l.get(m.largestBatchId);g===null&&(g=ia(),l=l.insert(m.largestBatchId,g)),g.set(m.getKey(),m)}}const h=ia(),d=l.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((m,g)=>h.set(m,g))),!(h.size()>=o)););return re.resolve(h)}bt(e,n,r){const o=this.overlays.get(r.key);if(o!==null){const c=this.Lr.get(o.largestBatchId).delete(r.key);this.Lr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new E4(n,r));let l=this.Lr.get(n);l===void 0&&(l=Xe(),this.Lr.set(n,l)),this.Lr.set(n,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(){this.sessionToken=cn.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(){this.kr=new Jt(sn.Kr),this.qr=new Jt(sn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new sn(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Wr(new sn(e,n))}Qr(e,n){e.forEach((r=>this.removeReference(r,n)))}Gr(e){const n=new Ae(new pt([])),r=new sn(n,e),o=new sn(n,e+1),l=[];return this.qr.forEachInRange([r,o],(c=>{this.Wr(c),l.push(c.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new Ae(new pt([])),r=new sn(n,e),o=new sn(n,e+1);let l=Xe();return this.qr.forEachInRange([r,o],(c=>{l=l.add(c.key)})),l}containsKey(e){const n=new sn(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class sn{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return Ae.comparator(e.key,n.key)||Ye(e.Hr,n.Hr)}static Ur(e,n){return Ye(e.Hr,n.Hr)||Ae.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Jt(sn.Kr)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,o){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new j4(l,n,r,o);this.mutationQueue.push(c);for(const h of o)this.Jr=this.Jr.add(new sn(h.key,l)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return re.resolve(c)}lookupMutationBatch(e,n){return re.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,o=this.Xr(r),l=o<0?0:o;return re.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?Zy:this.Yn-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new sn(n,0),o=new sn(n,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([r,o],(c=>{const h=this.Zr(c.Hr);l.push(h)})),re.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Jt(Ye);return n.forEach((o=>{const l=new sn(o,0),c=new sn(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,c],(h=>{r=r.add(h.Hr)}))})),re.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,o=r.length+1;let l=r;Ae.isDocumentKey(l)||(l=l.child(""));const c=new sn(new Ae(l),0);let h=new Jt(Ye);return this.Jr.forEachWhile((d=>{const m=d.key.path;return!!r.isPrefixOf(m)&&(m.length===o&&(h=h.add(d.Hr)),!0)}),c),re.resolve(this.Yr(h))}Yr(e){const n=[];return e.forEach((r=>{const o=this.Zr(r);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){at(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return re.forEach(n.mutations,(o=>{const l=new sn(o.key,n.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,n){const r=new sn(n,0),o=this.Jr.firstAfterOrEqual(r);return re.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e){this.ti=e,this.docs=(function(){return new At(Ae.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,o=this.docs.get(r),l=o?o.size:0,c=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return re.resolve(r?r.document.mutableCopy():In.newInvalidDocument(n))}getEntries(e,n){let r=xs();return n.forEach((o=>{const l=this.docs.get(o);r=r.insert(o,l?l.document.mutableCopy():In.newInvalidDocument(o))})),re.resolve(r)}getDocumentsMatchingQuery(e,n,r,o){let l=xs();const c=n.path,h=new Ae(c.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){const{key:m,value:{document:g}}=d.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||OD(LD(g),r)<=0||(o.has(g.key)||Lf(n,g))&&(l=l.insert(g.key,g.mutableCopy()))}return re.resolve(l)}getAllFromCollectionGroup(e,n,r,o){Me(9500)}ni(e,n){return re.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new hN(this)}getSize(e){return re.resolve(this.size)}}class hN extends iN{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?n.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(r)})),re.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(e){this.persistence=e,this.ri=new ka((n=>n0(n)),r0),this.lastRemoteSnapshotVersion=Fe.min(),this.highestTargetId=0,this.ii=0,this.si=new c0,this.targetCount=0,this.oi=Ml._r()}forEachTarget(e,n){return this.ri.forEach(((r,o)=>n(o))),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),re.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Ml(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,re.resolve()}updateTargetData(e,n){return this.lr(n),re.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,n,r){let o=0;const l=[];return this.ri.forEach(((c,h)=>{h.sequenceNumber<=n&&r.get(h.targetId)===null&&(this.ri.delete(c),l.push(this.removeMatchingKeysForTargetId(e,h.targetId)),o++)})),re.waitFor(l).next((()=>o))}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return re.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),re.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const o=this.persistence.referenceDelegate,l=[];return o&&n.forEach((c=>{l.push(o.markPotentiallyOrphaned(e,c))})),re.waitFor(l)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),re.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return re.resolve(r)}containsKey(e,n){return re.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(e,n){this._i={},this.overlays={},this.ai=new Df(0),this.ui=!1,this.ui=!0,this.ci=new cN,this.referenceDelegate=e(this),this.li=new fN(this),this.indexManager=new X4,this.remoteDocumentCache=(function(o){return new dN(o)})((r=>this.referenceDelegate.hi(r))),this.serializer=new Q4(n),this.Pi=new aN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new lN,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new uN(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){be("MemoryPersistence","Starting transaction:",e);const o=new mN(this.ai.next());return this.referenceDelegate.Ti(),r(o).next((l=>this.referenceDelegate.Ii(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ei(e,n){return re.or(Object.values(this._i).map((r=>()=>r.containsKey(e,n))))}}class mN extends zD{constructor(e){super(),this.currentSequenceNumber=e}}class u0{constructor(e){this.persistence=e,this.Ri=new c0,this.Ai=null}static Vi(e){return new u0(e)}get di(){if(this.Ai)return this.Ai;throw Me(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),re.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),re.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),re.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((o=>this.di.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((l=>this.di.add(l.toString())))})).next((()=>r.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.di,(r=>{const o=Ae.fromPath(r);return this.mi(e,o).next((l=>{l||n.removeEntry(o,Fe.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return re.or([()=>re.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class rf{constructor(e,n){this.persistence=e,this.fi=new ka((r=>WD(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=rN(this,n)}static Vi(e,n){return new rf(e,n)}Ti(){}Ii(e){return re.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((o=>r+o))))}pr(e){let n=0;return this.mr(e,(r=>{n++})).next((()=>n))}mr(e,n){return re.forEach(this.fi,((r,o)=>this.wr(e,r,o).next((l=>l?re.resolve():n(o)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ni(e,(c=>this.wr(e,c,n).next((h=>{h||(r++,l.removeEntry(c,Fe.min()))})))).next((()=>l.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),re.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),re.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),re.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Nh(e.data.value)),n}wr(e,n,r){return re.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.fi.get(n);return re.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(e,n,r,o){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=o}static Es(e,n){let r=Xe(),o=Xe();for(const l of n.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new d0(e,n.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return $I()?8:FD(Rn())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,o){const l={result:null};return this.gs(e,n).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ps(e,n,o,r).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new pN;return this.ys(e,n,c).next((h=>{if(l.result=h,this.As)return this.ws(e,n,c,h.size)}))})).next((()=>l.result))}ws(e,n,r,o){return r.documentReadCount<this.Vs?(ll()<=Qe.DEBUG&&be("QueryEngine","SDK will not create cache indexes for query:",cl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),re.resolve()):(ll()<=Qe.DEBUG&&be("QueryEngine","Query:",cl(n),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.ds*o?(ll()<=Qe.DEBUG&&be("QueryEngine","The SDK decides to create cache indexes for query:",cl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vi(n))):re.resolve())}gs(e,n){if(Bb(n))return re.resolve(null);let r=Vi(n);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=tf(n,null,"F"),r=Vi(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const c=Xe(...l);return this.fs.getDocuments(e,c).next((h=>this.indexManager.getMinOffset(e,r).next((d=>{const m=this.bs(n,h);return this.Ss(n,m,c,d.readTime)?this.gs(e,tf(n,null,"F")):this.Ds(e,m,n,d)}))))})))))}ps(e,n,r,o){return Bb(n)||o.isEqual(Fe.min())?re.resolve(null):this.fs.getDocuments(e,r).next((l=>{const c=this.bs(n,l);return this.Ss(n,c,r,o)?re.resolve(null):(ll()<=Qe.DEBUG&&be("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),cl(n)),this.Ds(e,c,n,VD(o,vu)).next((h=>h)))}))}bs(e,n){let r=new Jt(KS(e));return n.forEach(((o,l)=>{Lf(e,l)&&(r=r.add(l))})),r}Ss(e,n,r,o){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const l=e.limitType==="F"?n.last():n.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ys(e,n,r){return ll()<=Qe.DEBUG&&be("QueryEngine","Using full collection scan to execute query:",cl(n)),this.fs.getDocumentsMatchingQuery(e,n,uo.min(),r)}Ds(e,n,r,o){return this.fs.getDocumentsMatchingQuery(e,r,o).next((l=>(n.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0="LocalStore",yN=3e8;class vN{constructor(e,n,r,o){this.persistence=e,this.Cs=n,this.serializer=o,this.vs=new At(Ye),this.Fs=new ka((l=>n0(l)),r0),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new oN(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function xN(t,e,n,r){return new vN(t,e,n,r)}async function y_(t,e){const n=We(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return n.mutationQueue.getAllMutationBatches(r).next((l=>(o=l,n.Os(e),n.mutationQueue.getAllMutationBatches(r)))).next((l=>{const c=[],h=[];let d=Xe();for(const m of o){c.push(m.batchId);for(const g of m.mutations)d=d.add(g.key)}for(const m of l){h.push(m.batchId);for(const g of m.mutations)d=d.add(g.key)}return n.localDocuments.getDocuments(r,d).next((m=>({Ns:m,removedBatchIds:c,addedBatchIds:h})))}))}))}function bN(t,e){const n=We(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),l=n.xs.newChangeBuffer({trackRemovals:!0});return(function(h,d,m,g){const y=m.batch,x=y.keys();let S=re.resolve();return x.forEach((w=>{S=S.next((()=>g.getEntry(d,w))).next((_=>{const T=m.docVersions.get(w);at(T!==null,48541),_.version.compareTo(T)<0&&(y.applyToRemoteDocument(_,m),_.isValidDocument()&&(_.setReadTime(m.commitVersion),g.addEntry(_)))}))})),S.next((()=>h.mutationQueue.removeMutationBatch(d,y)))})(n,r,e,l).next((()=>l.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(h){let d=Xe();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(d=d.add(h.batch.mutations[m].key));return d})(e)))).next((()=>n.localDocuments.getDocuments(r,o)))}))}function v_(t){const e=We(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function kN(t,e){const n=We(t),r=e.snapshotVersion;let o=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=n.xs.newChangeBuffer({trackRemovals:!0});o=n.vs;const h=[];e.targetChanges.forEach(((g,y)=>{const x=o.get(y);if(!x)return;h.push(n.li.removeMatchingKeys(l,g.removedDocuments,y).next((()=>n.li.addMatchingKeys(l,g.addedDocuments,y))));let S=x.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(y)!==null?S=S.withResumeToken(cn.EMPTY_BYTE_STRING,Fe.min()).withLastLimboFreeSnapshotVersion(Fe.min()):g.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(g.resumeToken,r)),o=o.insert(y,S),(function(_,T,P){return _.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=yN?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0})(x,S,g)&&h.push(n.li.updateTargetData(l,S))}));let d=xs(),m=Xe();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(l,g))})),h.push(wN(l,c,e.documentUpdates).next((g=>{d=g.Bs,m=g.Ls}))),!r.isEqual(Fe.min())){const g=n.li.getLastRemoteSnapshotVersion(l).next((y=>n.li.setTargetsMetadata(l,l.currentSequenceNumber,r)));h.push(g)}return re.waitFor(h).next((()=>c.apply(l))).next((()=>n.localDocuments.getLocalViewOfDocuments(l,d,m))).next((()=>d))})).then((l=>(n.vs=o,l)))}function wN(t,e,n){let r=Xe(),o=Xe();return n.forEach((l=>r=r.add(l))),e.getEntries(t,r).next((l=>{let c=xs();return n.forEach(((h,d)=>{const m=l.get(h);d.isFoundDocument()!==m.isFoundDocument()&&(o=o.add(h)),d.isNoDocument()&&d.version.isEqual(Fe.min())?(e.removeEntry(h,d.readTime),c=c.insert(h,d)):!m.isValidDocument()||d.version.compareTo(m.version)>0||d.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(d),c=c.insert(h,d)):be(h0,"Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",d.version)})),{Bs:c,Ls:o}}))}function SN(t,e){const n=We(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Zy),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function _N(t,e){const n=We(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return n.li.getTargetData(r,e).next((l=>l?(o=l,re.resolve(o)):n.li.allocateTargetId(r).next((c=>(o=new ro(e,c,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=n.vs.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r}))}async function qg(t,e,n){const r=We(t),o=r.vs.get(e),l=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",l,(c=>r.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!Ql(c))throw c;be(h0,`Failed to update sequence numbers for target ${e}: ${c}`)}r.vs=r.vs.remove(e),r.Fs.delete(o.target)}function Jb(t,e,n){const r=We(t);let o=Fe.min(),l=Xe();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(d,m,g){const y=We(d),x=y.Fs.get(g);return x!==void 0?re.resolve(y.vs.get(x)):y.li.getTargetData(m,g)})(r,c,Vi(e)).next((h=>{if(h)return o=h.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(c,h.targetId).next((d=>{l=d}))})).next((()=>r.Cs.getDocumentsMatchingQuery(c,e,n?o:Fe.min(),n?l:Xe()))).next((h=>(jN(r,d4(e),h),{documents:h,ks:l})))))}function jN(t,e,n){let r=t.Ms.get(e)||Fe.min();n.forEach(((o,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),t.Ms.set(e,r)}class Zb{constructor(){this.activeTargetIds=y4()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class EN{constructor(){this.vo=new Zb,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Zb,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ek="ConnectivityMonitor";class tk{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){be(ek,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){be(ek,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xh=null;function Gg(){return xh===null?xh=(function(){return 268435456+Math.round(2147483648*Math.random())})():xh++,"0x"+xh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qp="RestConnection",CN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class IN{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${o}`,this.$o=this.databaseId.database===Jh?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Wo(e,n,r,o,l){const c=Gg(),h=this.Qo(e,n.toUriEncodedString());be(Qp,`Sending RPC '${e}' ${c}:`,h,r);const d={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(d,o,l);const{host:m}=new URL(h),g=$l(m);return this.zo(e,h,d,r,g).then((y=>(be(Qp,`Received RPC '${e}' ${c}: `,y),y)),(y=>{throw fa(Qp,`RPC '${e}' ${c} failed with error: `,y,"url: ",h,"request:",r),y}))}jo(e,n,r,o,l,c){return this.Wo(e,n,r,o,l)}Go(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ql})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,l)=>e[l]=o)),r&&r.headers.forEach(((o,l)=>e[l]=o))}Qo(e,n){const r=CN[e];let o=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tn="WebChannelConnection",qc=(t,e,n)=>{t.listen(e,(r=>{try{n(r)}catch(o){setTimeout((()=>{throw o}),0)}}))};class kl extends IN{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!kl.c_){const e=bS();qc(e,xS.STAT_EVENT,(n=>{n.stat===Vg.PROXY?be(Tn,"STAT_EVENT: detected buffering proxy"):n.stat===Vg.NOPROXY&&be(Tn,"STAT_EVENT: detected no buffering proxy")})),kl.c_=!0}}zo(e,n,r,o,l){const c=Gg();return new Promise(((h,d)=>{const m=new yS;m.setWithCredentials(!0),m.listenOnce(vS.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case Dh.NO_ERROR:const y=m.getResponseJson();be(Tn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(y)),h(y);break;case Dh.TIMEOUT:be(Tn,`RPC '${e}' ${c} timed out`),d(new ve(ee.DEADLINE_EXCEEDED,"Request time out"));break;case Dh.HTTP_ERROR:const x=m.getStatus();if(be(Tn,`RPC '${e}' ${c} failed with status:`,x,"response text:",m.getResponseText()),x>0){let S=m.getResponseJson();Array.isArray(S)&&(S=S[0]);const w=S==null?void 0:S.error;if(w&&w.status&&w.message){const _=(function(P){const V=P.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(V)>=0?V:ee.UNKNOWN})(w.status);d(new ve(_,w.message))}else d(new ve(ee.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new ve(ee.UNAVAILABLE,"Connection failed."));break;default:Me(9055,{l_:e,streamId:c,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{be(Tn,`RPC '${e}' ${c} completed.`)}}));const g=JSON.stringify(o);be(Tn,`RPC '${e}' ${c} sending request:`,o),m.send(n,"POST",g,r,15)}))}T_(e,n,r){const o=Gg(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(h.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(h.useFetchStreams=!0),this.Go(h.initMessageHeaders,n,r),h.encodeInitMessageHeaders=!0;const m=l.join("");be(Tn,`Creating RPC '${e}' stream ${o}: ${m}`,h);const g=c.createWebChannel(m,h);this.I_(g);let y=!1,x=!1;const S=new AN({Ho:w=>{x?be(Tn,`Not sending because RPC '${e}' stream ${o} is closed:`,w):(y||(be(Tn,`Opening RPC '${e}' stream ${o} transport.`),g.open(),y=!0),be(Tn,`RPC '${e}' stream ${o} sending:`,w),g.send(w))},Jo:()=>g.close()});return qc(g,Zc.EventType.OPEN,(()=>{x||(be(Tn,`RPC '${e}' stream ${o} transport opened.`),S.i_())})),qc(g,Zc.EventType.CLOSE,(()=>{x||(x=!0,be(Tn,`RPC '${e}' stream ${o} transport closed`),S.o_(),this.E_(g))})),qc(g,Zc.EventType.ERROR,(w=>{x||(x=!0,fa(Tn,`RPC '${e}' stream ${o} transport errored. Name:`,w.name,"Message:",w.message),S.o_(new ve(ee.UNAVAILABLE,"The operation could not be completed")))})),qc(g,Zc.EventType.MESSAGE,(w=>{var _;if(!x){const T=w.data[0];at(!!T,16349);const P=T,V=(P==null?void 0:P.error)||((_=P[0])==null?void 0:_.error);if(V){be(Tn,`RPC '${e}' stream ${o} received error:`,V);const M=V.status;let F=(function(A){const E=Ut[A];if(E!==void 0)return i_(E)})(M),K=V.message;F===void 0&&(F=ee.INTERNAL,K="Unknown error status: "+M+" with message "+V.message),x=!0,S.o_(new ve(F,K)),g.close()}else be(Tn,`RPC '${e}' stream ${o} received:`,T),S.__(T)}})),kl.u_(),setTimeout((()=>{S.s_()}),0),S}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return kS()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RN(t){return new kl(t)}function Yp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wf(t){return new M4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kl.c_=!1;class x_{constructor(e,n,r=1e3,o=1.5,l=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=o,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-r);o>0&&be("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nk="PersistentStream";class b_{constructor(e,n,r,o,l,c,h,d){this.Ci=e,this.b_=r,this.S_=o,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new x_(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ee.RESOURCE_EXHAUSTED?(vs(n.toString()),vs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===n&&this.G_(r,o)}),(r=>{e((()=>{const o=new ve(ee.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return be(nk,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(be(nk,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class PN extends b_{constructor(e,n,r,o,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,o,c),this.serializer=l}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=O4(this.serializer,e),r=(function(l){if(!("targetChange"in l))return Fe.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Fe.min():c.readTime?Li(c.readTime):Fe.min()})(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=Kg(this.serializer),n.addTarget=(function(l,c){let h;const d=c.target;if(h=Fg(d)?{documents:F4(l,d)}:{query:U4(l,d).ft},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=a_(l,c.resumeToken);const m=Wg(l,c.expectedCount);m!==null&&(h.expectedCount=m)}else if(c.snapshotVersion.compareTo(Fe.min())>0){h.readTime=nf(l,c.snapshotVersion.toTimestamp());const m=Wg(l,c.expectedCount);m!==null&&(h.expectedCount=m)}return h})(this.serializer,e);const r=$4(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=Kg(this.serializer),n.removeTarget=e,this.K_(n)}}class DN extends b_{constructor(e,n,r,o,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,o,c),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return at(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,at(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){at(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=z4(e.writeResults,e.commitTime),r=Li(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Kg(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>B4(this.serializer,r)))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{}class MN extends NN{constructor(e,n,r,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ve(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,$g(n,r),o,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ve(ee.UNKNOWN,l.toString())}))}jo(e,n,r,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,h])=>this.connection.jo(e,$g(n,r),o,c,h,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ve(ee.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function VN(t,e,n,r){return new MN(t,e,n,r)}class LN{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(vs(n),this.aa=!1):be("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma="RemoteStore";class ON{constructor(e,n,r,o,l){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((c=>{r.enqueueAndForget((async()=>{wa(this)&&(be(ma,"Restarting streams for network reachability change."),await(async function(d){const m=We(d);m.Ea.add(4),await Fu(m),m.Va.set("Unknown"),m.Ea.delete(4),await $f(m)})(this))}))})),this.Va=new LN(r,o)}}async function $f(t){if(wa(t))for(const e of t.Ra)await e(!0)}async function Fu(t){for(const e of t.Ra)await e(!1)}function k_(t,e){const n=We(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),g0(n)?p0(n):Xl(n).O_()&&m0(n,e))}function f0(t,e){const n=We(t),r=Xl(n);n.Ia.delete(e),r.O_()&&w_(n,e),n.Ia.size===0&&(r.O_()?r.L_():wa(n)&&n.Va.set("Unknown"))}function m0(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Fe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Xl(t).Z_(e)}function w_(t,e){t.da.$e(e),Xl(t).X_(e)}function p0(t){t.da=new R4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Xl(t).start(),t.Va.ua()}function g0(t){return wa(t)&&!Xl(t).x_()&&t.Ia.size>0}function wa(t){return We(t).Ea.size===0}function S_(t){t.da=void 0}async function BN(t){t.Va.set("Online")}async function zN(t){t.Ia.forEach(((e,n)=>{m0(t,e)}))}async function FN(t,e){S_(t),g0(t)?(t.Va.ha(e),p0(t)):t.Va.set("Unknown")}async function UN(t,e,n){if(t.Va.set("Online"),e instanceof o_&&e.state===2&&e.cause)try{await(async function(o,l){const c=l.cause;for(const h of l.targetIds)o.Ia.has(h)&&(await o.remoteSyncer.rejectListen(h,c),o.Ia.delete(h),o.da.removeTarget(h))})(t,e)}catch(r){be(ma,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await sf(t,r)}else if(e instanceof Lh?t.da.Xe(e):e instanceof s_?t.da.st(e):t.da.tt(e),!n.isEqual(Fe.min()))try{const r=await v_(t.localStore);n.compareTo(r)>=0&&await(function(l,c){const h=l.da.Tt(c);return h.targetChanges.forEach(((d,m)=>{if(d.resumeToken.approximateByteSize()>0){const g=l.Ia.get(m);g&&l.Ia.set(m,g.withResumeToken(d.resumeToken,c))}})),h.targetMismatches.forEach(((d,m)=>{const g=l.Ia.get(d);if(!g)return;l.Ia.set(d,g.withResumeToken(cn.EMPTY_BYTE_STRING,g.snapshotVersion)),w_(l,d);const y=new ro(g.target,d,m,g.sequenceNumber);m0(l,y)})),l.remoteSyncer.applyRemoteEvent(h)})(t,n)}catch(r){be(ma,"Failed to raise snapshot:",r),await sf(t,r)}}async function sf(t,e,n){if(!Ql(e))throw e;t.Ea.add(1),await Fu(t),t.Va.set("Offline"),n||(n=()=>v_(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{be(ma,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await $f(t)}))}function __(t,e){return e().catch((n=>sf(t,n,e)))}async function Hf(t){const e=We(t),n=po(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Zy;for(;WN(e);)try{const o=await SN(e.localStore,r);if(o===null){e.Ta.length===0&&n.L_();break}r=o.batchId,$N(e,o)}catch(o){await sf(e,o)}j_(e)&&E_(e)}function WN(t){return wa(t)&&t.Ta.length<10}function $N(t,e){t.Ta.push(e);const n=po(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function j_(t){return wa(t)&&!po(t).x_()&&t.Ta.length>0}function E_(t){po(t).start()}async function HN(t){po(t).ra()}async function KN(t){const e=po(t);for(const n of t.Ta)e.ea(n.mutations)}async function qN(t,e,n){const r=t.Ta.shift(),o=o0.from(r,e,n);await __(t,(()=>t.remoteSyncer.applySuccessfulWrite(o))),await Hf(t)}async function GN(t,e){e&&po(t).Y_&&await(async function(r,o){if((function(c){return C4(c)&&c!==ee.ABORTED})(o.code)){const l=r.Ta.shift();po(r).B_(),await __(r,(()=>r.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Hf(r)}})(t,e),j_(t)&&E_(t)}async function rk(t,e){const n=We(t);n.asyncQueue.verifyOperationInProgress(),be(ma,"RemoteStore received new credentials");const r=wa(n);n.Ea.add(3),await Fu(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await $f(n)}async function QN(t,e){const n=We(t);e?(n.Ea.delete(2),await $f(n)):e||(n.Ea.add(2),await Fu(n),n.Va.set("Unknown"))}function Xl(t){return t.ma||(t.ma=(function(n,r,o){const l=We(n);return l.sa(),new PN(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(t.datastore,t.asyncQueue,{Zo:BN.bind(null,t),Yo:zN.bind(null,t),t_:FN.bind(null,t),J_:UN.bind(null,t)}),t.Ra.push((async e=>{e?(t.ma.B_(),g0(t)?p0(t):t.Va.set("Unknown")):(await t.ma.stop(),S_(t))}))),t.ma}function po(t){return t.fa||(t.fa=(function(n,r,o){const l=We(n);return l.sa(),new DN(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:HN.bind(null,t),t_:GN.bind(null,t),ta:KN.bind(null,t),na:qN.bind(null,t)}),t.Ra.push((async e=>{e?(t.fa.B_(),await Hf(t)):(await t.fa.stop(),t.Ta.length>0&&(be(ma,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(e,n,r,o,l){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=o,this.removalCallback=l,this.deferred=new us,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,o,l){const c=Date.now()+r,h=new y0(e,n,c,o,l);return h.start(r),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function v0(t,e){if(vs("AsyncQueue",`${e}: ${t}`),Ql(t))return new ve(ee.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{static emptySet(e){return new wl(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ae.comparator(n.key,r.key):(n,r)=>Ae.comparator(n.key,r.key),this.keyedMap=eu(),this.sortedSet=new At(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof wl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,l=r.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new wl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(){this.ga=new At(Ae.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Me(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Vl{constructor(e,n,r,o,l,c,h,d,m){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=m}static fromInitialDocuments(e,n,r,o,l){const c=[];return n.forEach((h=>{c.push({type:0,doc:h})})),new Vl(e,n,wl.emptySet(n),c,r,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==r[o].type||!n[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class XN{constructor(){this.queries=sk(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const o=We(n),l=o.queries;o.queries=sk(),l.forEach(((c,h)=>{for(const d of h.ba)d.onError(r)}))})(this,new ve(ee.ABORTED,"Firestore shutting down"))}}function sk(){return new ka((t=>HS(t)),Vf)}async function T_(t,e){const n=We(t);let r=3;const o=e.query;let l=n.queries.get(o);l?!l.Sa()&&e.Da()&&(r=2):(l=new YN,r=e.Da()?0:1);try{switch(r){case 0:l.wa=await n.onListen(o,!0);break;case 1:l.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(c){const h=v0(c,`Initialization of query '${cl(e.query)}' failed`);return void e.onError(h)}n.queries.set(o,l),l.ba.push(e),e.va(n.onlineState),l.wa&&e.Fa(l.wa)&&x0(n)}async function C_(t,e){const n=We(t),r=e.query;let o=3;const l=n.queries.get(r);if(l){const c=l.ba.indexOf(e);c>=0&&(l.ba.splice(c,1),l.ba.length===0?o=e.Da()?0:1:!l.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function JN(t,e){const n=We(t);let r=!1;for(const o of e){const l=o.query,c=n.queries.get(l);if(c){for(const h of c.ba)h.Fa(o)&&(r=!0);c.wa=o}}r&&x0(n)}function ZN(t,e,n){const r=We(t),o=r.queries.get(e);if(o)for(const l of o.ba)l.onError(n);r.queries.delete(e)}function x0(t){t.Ca.forEach((e=>{e.next()}))}var Qg,ok;(ok=Qg||(Qg={})).Ma="default",ok.Cache="cache";class I_{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new Vl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Vl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Qg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(e){this.key=e}}class R_{constructor(e){this.key=e}}class eM{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Xe(),this.mutatedKeys=Xe(),this.eu=KS(e),this.tu=new wl(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new ik,o=n?n.tu:this.tu;let l=n?n.mutatedKeys:this.mutatedKeys,c=o,h=!1;const d=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,m=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((g,y)=>{const x=o.get(g),S=Lf(this.query,y)?y:null,w=!!x&&this.mutatedKeys.has(x.key),_=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let T=!1;x&&S?x.data.isEqual(S.data)?w!==_&&(r.track({type:3,doc:S}),T=!0):this.su(x,S)||(r.track({type:2,doc:S}),T=!0,(d&&this.eu(S,d)>0||m&&this.eu(S,m)<0)&&(h=!0)):!x&&S?(r.track({type:0,doc:S}),T=!0):x&&!S&&(r.track({type:1,doc:x}),T=!0,(d||m)&&(h=!0)),T&&(S?(c=c.add(S),l=_?l.add(g):l.delete(g)):(c=c.delete(g),l=l.delete(g)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const g=this.query.limitType==="F"?c.last():c.first();c=c.delete(g.key),l=l.delete(g.key),r.track({type:1,doc:g})}return{tu:c,iu:r,Ss:h,mutatedKeys:l}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((g,y)=>(function(S,w){const _=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Me(20277,{Vt:T})}};return _(S)-_(w)})(g.type,y.type)||this.eu(g.doc,y.doc))),this.ou(r),o=o??!1;const h=n&&!o?this._u():[],d=this.Ya.size===0&&this.current&&!o?1:0,m=d!==this.Xa;return this.Xa=d,c.length!==0||m?{snapshot:new Vl(this.query,e.tu,l,c,e.mutatedKeys,d===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ik,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Xe(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const n=[];return e.forEach((r=>{this.Ya.has(r)||n.push(new R_(r))})),this.Ya.forEach((r=>{e.has(r)||n.push(new A_(r))})),n}cu(e){this.Za=e.ks,this.Ya=Xe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Vl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const b0="SyncEngine";class tM{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class nM{constructor(e){this.key=e,this.hu=!1}}class rM{constructor(e,n,r,o,l,c){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new ka((h=>HS(h)),Vf),this.Iu=new Map,this.Eu=new Set,this.Ru=new At(Ae.comparator),this.Au=new Map,this.Vu=new c0,this.du={},this.mu=new Map,this.fu=Ml.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function iM(t,e,n=!0){const r=L_(t);let o;const l=r.Tu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await P_(r,e,n,!0),o}async function sM(t,e){const n=L_(t);await P_(n,e,!0,!1)}async function P_(t,e,n,r){const o=await _N(t.localStore,Vi(e)),l=o.targetId,c=t.sharedClientState.addLocalQueryTarget(l,n);let h;return r&&(h=await oM(t,e,l,c==="current",o.resumeToken)),t.isPrimaryClient&&n&&k_(t.remoteStore,o),h}async function oM(t,e,n,r,o){t.pu=(y,x,S)=>(async function(_,T,P,V){let M=T.view.ru(P);M.Ss&&(M=await Jb(_.localStore,T.query,!1).then((({documents:A})=>T.view.ru(A,M))));const F=V&&V.targetChanges.get(T.targetId),K=V&&V.targetMismatches.get(T.targetId)!=null,q=T.view.applyChanges(M,_.isPrimaryClient,F,K);return lk(_,T.targetId,q.au),q.snapshot})(t,y,x,S);const l=await Jb(t.localStore,e,!0),c=new eM(e,l.ks),h=c.ru(l.documents),d=zu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",o),m=c.applyChanges(h,t.isPrimaryClient,d);lk(t,n,m.au);const g=new tM(e,n,c);return t.Tu.set(e,g),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),m.snapshot}async function aM(t,e,n){const r=We(t),o=r.Tu.get(e),l=r.Iu.get(o.targetId);if(l.length>1)return r.Iu.set(o.targetId,l.filter((c=>!Vf(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await qg(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),n&&f0(r.remoteStore,o.targetId),Yg(r,o.targetId)})).catch(Gl)):(Yg(r,o.targetId),await qg(r.localStore,o.targetId,!0))}async function lM(t,e){const n=We(t),r=n.Tu.get(e),o=n.Iu.get(r.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),f0(n.remoteStore,r.targetId))}async function cM(t,e,n){const r=gM(t);try{const o=await(function(c,h){const d=We(c),m=rt.now(),g=h.reduce(((S,w)=>S.add(w.key)),Xe());let y,x;return d.persistence.runTransaction("Locally write mutations","readwrite",(S=>{let w=xs(),_=Xe();return d.xs.getEntries(S,g).next((T=>{w=T,w.forEach(((P,V)=>{V.isValidDocument()||(_=_.add(P))}))})).next((()=>d.localDocuments.getOverlayedDocuments(S,w))).next((T=>{y=T;const P=[];for(const V of h){const M=S4(V,y.get(V.key).overlayedDocument);M!=null&&P.push(new _o(V.key,M,LS(M.value.mapValue),Ln.exists(!0)))}return d.mutationQueue.addMutationBatch(S,m,P,h)})).next((T=>{x=T;const P=T.applyToLocalDocumentSet(y,_);return d.documentOverlayCache.saveOverlays(S,T.batchId,P)}))})).then((()=>({batchId:x.batchId,changes:GS(y)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(c,h,d){let m=c.du[c.currentUser.toKey()];m||(m=new At(Ye)),m=m.insert(h,d),c.du[c.currentUser.toKey()]=m})(r,o.batchId,n),await Uu(r,o.changes),await Hf(r.remoteStore)}catch(o){const l=v0(o,"Failed to persist write");n.reject(l)}}async function D_(t,e){const n=We(t);try{const r=await kN(n.localStore,e);e.targetChanges.forEach(((o,l)=>{const c=n.Au.get(l);c&&(at(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?at(c.hu,14607):o.removedDocuments.size>0&&(at(c.hu,42227),c.hu=!1))})),await Uu(n,r,e)}catch(r){await Gl(r)}}function ak(t,e,n){const r=We(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const o=[];r.Tu.forEach(((l,c)=>{const h=c.view.va(e);h.snapshot&&o.push(h.snapshot)})),(function(c,h){const d=We(c);d.onlineState=h;let m=!1;d.queries.forEach(((g,y)=>{for(const x of y.ba)x.va(h)&&(m=!0)})),m&&x0(d)})(r.eventManager,e),o.length&&r.Pu.J_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function uM(t,e,n){const r=We(t);r.sharedClientState.updateQueryState(e,"rejected",n);const o=r.Au.get(e),l=o&&o.key;if(l){let c=new At(Ae.comparator);c=c.insert(l,In.newNoDocument(l,Fe.min()));const h=Xe().add(l),d=new Uf(Fe.min(),new Map,new At(Ye),c,h);await D_(r,d),r.Ru=r.Ru.remove(l),r.Au.delete(e),k0(r)}else await qg(r.localStore,e,!1).then((()=>Yg(r,e,n))).catch(Gl)}async function dM(t,e){const n=We(t),r=e.batch.batchId;try{const o=await bN(n.localStore,e);M_(n,r,null),N_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Uu(n,o)}catch(o){await Gl(o)}}async function hM(t,e,n){const r=We(t);try{const o=await(function(c,h){const d=We(c);return d.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let g;return d.mutationQueue.lookupMutationBatch(m,h).next((y=>(at(y!==null,37113),g=y.keys(),d.mutationQueue.removeMutationBatch(m,y)))).next((()=>d.mutationQueue.performConsistencyCheck(m))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(m,g,h))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,g))).next((()=>d.localDocuments.getDocuments(m,g)))}))})(r.localStore,e);M_(r,e,n),N_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Uu(r,o)}catch(o){await Gl(o)}}function N_(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function M_(t,e,n){const r=We(t);let o=r.du[r.currentUser.toKey()];if(o){const l=o.get(e);l&&(n?l.reject(n):l.resolve(),o=o.remove(e)),r.du[r.currentUser.toKey()]=o}}function Yg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach((r=>{t.Vu.containsKey(r)||V_(t,r)}))}function V_(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(f0(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),k0(t))}function lk(t,e,n){for(const r of n)r instanceof A_?(t.Vu.addReference(r.key,e),fM(t,r)):r instanceof R_?(be(b0,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||V_(t,r.key)):Me(19791,{wu:r})}function fM(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(be(b0,"New document in limbo: "+n),t.Eu.add(r),k0(t))}function k0(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Ae(pt.fromString(e)),r=t.fu.next();t.Au.set(r,new nM(n)),t.Ru=t.Ru.insert(n,r),k_(t.remoteStore,new ro(Vi(i0(n.path)),r,"TargetPurposeLimboResolution",Df.ce))}}async function Uu(t,e,n){const r=We(t),o=[],l=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((h,d)=>{c.push(r.pu(d,e,n).then((m=>{var g;if((m||n)&&r.isPrimaryClient){const y=m?!m.fromCache:(g=n==null?void 0:n.targetChanges.get(d.targetId))==null?void 0:g.current;r.sharedClientState.updateQueryState(d.targetId,y?"current":"not-current")}if(m){o.push(m);const y=d0.Es(d.targetId,m);l.push(y)}})))})),await Promise.all(c),r.Pu.J_(o),await(async function(d,m){const g=We(d);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(y=>re.forEach(m,(x=>re.forEach(x.Ts,(S=>g.persistence.referenceDelegate.addReference(y,x.targetId,S))).next((()=>re.forEach(x.Is,(S=>g.persistence.referenceDelegate.removeReference(y,x.targetId,S)))))))))}catch(y){if(!Ql(y))throw y;be(h0,"Failed to update sequence numbers: "+y)}for(const y of m){const x=y.targetId;if(!y.fromCache){const S=g.vs.get(x),w=S.snapshotVersion,_=S.withLastLimboFreeSnapshotVersion(w);g.vs=g.vs.insert(x,_)}}})(r.localStore,l))}async function mM(t,e){const n=We(t);if(!n.currentUser.isEqual(e)){be(b0,"User change. New user:",e.toKey());const r=await y_(n.localStore,e);n.currentUser=e,(function(l,c){l.mu.forEach((h=>{h.forEach((d=>{d.reject(new ve(ee.CANCELLED,c))}))})),l.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Uu(n,r.Ns)}}function pM(t,e){const n=We(t),r=n.Au.get(e);if(r&&r.hu)return Xe().add(r.key);{let o=Xe();const l=n.Iu.get(e);if(!l)return o;for(const c of l){const h=n.Tu.get(c);o=o.unionWith(h.view.nu)}return o}}function L_(t){const e=We(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=D_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=uM.bind(null,e),e.Pu.J_=JN.bind(null,e.eventManager),e.Pu.yu=ZN.bind(null,e.eventManager),e}function gM(t){const e=We(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=dM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hM.bind(null,e),e}class of{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Wf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return xN(this.persistence,new gN,e.initialUser,this.serializer)}Cu(e){return new g_(u0.Vi,this.serializer)}Du(e){return new EN}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}of.provider={build:()=>new of};class yM extends of{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){at(this.persistence.referenceDelegate instanceof rf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new tN(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Gn.withCacheSize(this.cacheSizeBytes):Gn.DEFAULT;return new g_((r=>rf.Vi(r,n)),this.serializer)}}class Xg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ak(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=mM.bind(null,this.syncEngine),await QN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new XN})()}createDatastore(e){const n=Wf(e.databaseInfo.databaseId),r=RN(e.databaseInfo);return VN(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,o,l,c,h){return new ON(r,o,l,c,h)})(this.localStore,this.datastore,e.asyncQueue,(n=>ak(this.syncEngine,n,0)),(function(){return tk.v()?new tk:new TN})())}createSyncEngine(e,n){return(function(o,l,c,h,d,m,g){const y=new rM(o,l,c,h,d,m);return g&&(y.gu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(o){const l=We(o);be(ma,"RemoteStore shutting down."),l.Ea.add(5),await Fu(l),l.Aa.shutdown(),l.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Xg.provider={build:()=>new Xg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):vs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go="FirestoreClient";class vM{constructor(e,n,r,o,l){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=o,this.user=Cn.UNAUTHENTICATED,this.clientId=Rf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(async c=>{be(go,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(be(go,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new us;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=v0(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Xp(t,e){t.asyncQueue.verifyOperationInProgress(),be(go,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async o=>{r.isEqual(o)||(await y_(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function ck(t,e){t.asyncQueue.verifyOperationInProgress();const n=await xM(t);be(go,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>rk(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,o)=>rk(e.remoteStore,o))),t._onlineComponents=e}async function xM(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){be(go,"Using user provided OfflineComponentProvider");try{await Xp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ee.FAILED_PRECONDITION||o.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;fa("Error using user provided cache. Falling back to memory cache: "+n),await Xp(t,new of)}}else be(go,"Using default OfflineComponentProvider"),await Xp(t,new yM(void 0));return t._offlineComponents}async function B_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(be(go,"Using user provided OnlineComponentProvider"),await ck(t,t._uninitializedComponentsProvider._online)):(be(go,"Using default OnlineComponentProvider"),await ck(t,new Xg))),t._onlineComponents}function bM(t){return B_(t).then((e=>e.syncEngine))}async function z_(t){const e=await B_(t),n=e.eventManager;return n.onListen=iM.bind(null,e.syncEngine),n.onUnlisten=aM.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=sM.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=lM.bind(null,e.syncEngine),n}function kM(t,e,n={}){const r=new us;return t.asyncQueue.enqueueAndForget((async()=>(function(l,c,h,d,m){const g=new O_({next:x=>{g.Nu(),c.enqueueAndForget((()=>C_(l,y)));const S=x.docs.has(h);!S&&x.fromCache?m.reject(new ve(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&x.fromCache&&d&&d.source==="server"?m.reject(new ve(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(x)},error:x=>m.reject(x)}),y=new I_(i0(h.path),g,{includeMetadataChanges:!0,Ka:!0});return T_(l,y)})(await z_(t),t.asyncQueue,e,n,r))),r.promise}function wM(t,e,n={}){const r=new us;return t.asyncQueue.enqueueAndForget((async()=>(function(l,c,h,d,m){const g=new O_({next:x=>{g.Nu(),c.enqueueAndForget((()=>C_(l,y))),x.fromCache&&d.source==="server"?m.reject(new ve(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(x)},error:x=>m.reject(x)}),y=new I_(h,g,{includeMetadataChanges:!0,Ka:!0});return T_(l,y)})(await z_(t),t.asyncQueue,e,n,r))),r.promise}function SM(t,e){const n=new us;return t.asyncQueue.enqueueAndForget((async()=>cM(await bM(t),e,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F_(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _M="ComponentProvider",uk=new Map;function jM(t,e,n,r,o){return new KD(t,e,n,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,F_(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_="firestore.googleapis.com",dk=!0;class hk{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ve(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=U_,this.ssl=dk}else this.host=e.host,this.ssl=e.ssl??dk;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=p_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Z4)throw new ve(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ES("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=F_(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ve(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ve(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ve(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Kf{constructor(e,n,r,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hk({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ve(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ve(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hk(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new _S;switch(r.type){case"firstParty":return new AD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ve(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=uk.get(n);r&&(be(_M,"Removing Datastore"),uk.delete(n),r.terminate())})(this),Promise.resolve()}}function W_(t,e,n,r={}){var m;t=mr(t,Kf);const o=$l(e),l=t._getSettings(),c={...l,emulatorOptions:t._getEmulatorOptions()},h=`${e}:${n}`;o&&(I2(`https://${h}`),A2("Firestore",!0)),l.host!==U_&&l.host!==h&&fa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...l,host:h,ssl:o,emulatorOptions:r};if(!ps(d,c)&&(t._setSettings(d),r.mockUserToken)){let g,y;if(typeof r.mockUserToken=="string")g=r.mockUserToken,y=Cn.MOCK_USER;else{g=MI(r.mockUserToken,(m=t._app)==null?void 0:m.options.projectId);const x=r.mockUserToken.sub||r.mockUserToken.user_id;if(!x)throw new ve(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Cn(x)}t._authCredentials=new TD(new SS(g,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new _s(this.firestore,e,this._query)}}class Nt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ds(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nt(this.firestore,e,this._key)}toJSON(){return{type:Nt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Ou(n,Nt._jsonSchema))return new Nt(e,r||null,new Ae(pt.fromString(n.referencePath)))}}Nt._jsonSchemaVersion="firestore/documentReference/1.0",Nt._jsonSchema={type:Ht("string",Nt._jsonSchemaVersion),referencePath:Ht("string")};class ds extends _s{constructor(e,n,r){super(e,n,i0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nt(this.firestore,null,new Ae(e))}withConverter(e){return new ds(this.firestore,e,this._path)}}function it(t,e,...n){if(t=Bt(t),jS("collection","path",e),t instanceof Kf){const r=pt.fromString(e,...n);return jb(r),new ds(t,null,r)}{if(!(t instanceof Nt||t instanceof ds))throw new ve(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(pt.fromString(e,...n));return jb(r),new ds(t.firestore,null,r)}}function Ve(t,e,...n){if(t=Bt(t),arguments.length===1&&(e=Rf.newId()),jS("doc","path",e),t instanceof Kf){const r=pt.fromString(e,...n);return _b(r),new Nt(t,null,new Ae(r))}{if(!(t instanceof Nt||t instanceof ds))throw new ve(ee.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(pt.fromString(e,...n));return _b(r),new Nt(t.firestore,t instanceof ds?t.converter:null,new Ae(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk="AsyncQueue";class mk{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new x_(this,"async_queue_retry"),this._c=()=>{const r=Yp();r&&be(fk,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Yp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Yp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new us;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Ql(e))throw e;be(fk,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,vs("INTERNAL UNHANDLED ERROR: ",pk(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=y0.createAndSchedule(this,e,n,r,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&Me(47125,{Pc:pk(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function pk(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class js extends Kf{constructor(e,n,r,o){super(e,n,r,o),this.type="firestore",this._queue=new mk,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new mk(e),this._firestoreClient=void 0,await e}}}function $_(t,e){const n=typeof t=="object"?t:N2(),r=typeof t=="string"?t:Jh,o=Fy(n,"firestore").getImmediate({identifier:r});if(!o._initialized){const l=DI("firestore");l&&W_(o,...l)}return o}function Wu(t){if(t._terminated)throw new ve(ee.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||EM(t),t._firestoreClient}function EM(t){var r,o,l,c;const e=t._freezeSettings(),n=jM(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,(o=t._app)==null?void 0:o.options.apiKey,e);t._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new vM(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(d){const m=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(m),_online:m}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ur(cn.fromBase64String(e))}catch(n){throw new ve(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ur(cn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ur._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ou(e,ur._jsonSchema))return ur.fromBase64String(e.bytes)}}ur._jsonSchemaVersion="firestore/bytes/1.0",ur._jsonSchema={type:Ht("string",ur._jsonSchemaVersion),bytes:Ht("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ve(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new on(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ve(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ve(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ye(this._lat,e._lat)||Ye(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:oi._jsonSchemaVersion}}static fromJSON(e){if(Ou(e,oi._jsonSchema))return new oi(e.latitude,e.longitude)}}oi._jsonSchemaVersion="firestore/geoPoint/1.0",oi._jsonSchema={type:Ht("string",oi._jsonSchemaVersion),latitude:Ht("number"),longitude:Ht("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ar._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ou(e,Ar._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Ar(e.vectorValues);throw new ve(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ar._jsonSchemaVersion="firestore/vectorValue/1.0",Ar._jsonSchema={type:Ht("string",Ar._jsonSchemaVersion),vectorValues:Ht("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TM=/^__.*__$/;class CM{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new _o(e,this.data,this.fieldMask,n,this.fieldTransforms):new Bu(e,this.data,n,this.fieldTransforms)}}class H_{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new _o(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function K_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Me(40011,{dataSource:t})}}class qf{constructor(e,n,r,o,l,c){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=o,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new qf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var o;const n=(o=this.path)==null?void 0:o.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var o;const n=(o=this.path)==null?void 0:o.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return af(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(K_(this.dataSource)&&TM.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class IM{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Wf(e)}createContext(e,n,r,o=!1){return new qf({dataSource:e,methodName:n,targetDoc:r,path:on.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Hu(t){const e=t._freezeSettings(),n=Wf(t._databaseId);return new IM(t._databaseId,!!e.ignoreUndefinedProperties,n)}function w0(t,e,n,r,o,l={}){const c=t.createContext(l.merge||l.mergeFields?2:0,e,n,o);T0("Data must be an object, but it was:",c,r);const h=Y_(r,c);let d,m;if(l.merge)d=new dr(c.fieldMask),m=c.fieldTransforms;else if(l.mergeFields){const g=[];for(const y of l.mergeFields){const x=pa(e,y,n);if(!c.contains(x))throw new ve(ee.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);Z_(g,x)||g.push(x)}d=new dr(g),m=c.fieldTransforms.filter((y=>d.covers(y.field)))}else d=null,m=c.fieldTransforms;return new CM(new Qn(h),d,m)}class Gf extends jo{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gf}}function q_(t,e,n){return new qf({dataSource:3,targetDoc:e.settings.targetDoc,methodName:t._methodName,arrayElement:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class S0 extends jo{_toFieldTransform(e){return new Bf(e.path,new wu)}isEqual(e){return e instanceof S0}}class _0 extends jo{constructor(e,n){super(e),this.Ac=n}_toFieldTransform(e){const n=q_(this,e,!0),r=this.Ac.map((l=>Sa(l,n))),o=new Dl(r);return new Bf(e.path,o)}isEqual(e){return e instanceof _0&&ps(this.Ac,e.Ac)}}class j0 extends jo{constructor(e,n){super(e),this.Ac=n}_toFieldTransform(e){const n=q_(this,e,!0),r=this.Ac.map((l=>Sa(l,n))),o=new Nl(r);return new Bf(e.path,o)}isEqual(e){return e instanceof j0&&ps(this.Ac,e.Ac)}}class E0 extends jo{constructor(e,n){super(e),this.Vc=n}_toFieldTransform(e){const n=new Su(e.serializer,XS(e.serializer,this.Vc));return new Bf(e.path,n)}isEqual(e){return e instanceof E0&&this.Vc===e.Vc}}function G_(t,e,n,r){const o=t.createContext(1,e,n);T0("Data must be an object, but it was:",o,r);const l=[],c=Qn.empty();So(r,((d,m)=>{const g=J_(e,d,n);m=Bt(m);const y=o.childContextForFieldPath(g);if(m instanceof Gf)l.push(g);else{const x=Sa(m,y);x!=null&&(l.push(g),c.set(g,x))}}));const h=new dr(l);return new H_(c,h,o.fieldTransforms)}function Q_(t,e,n,r,o,l){const c=t.createContext(1,e,n),h=[pa(e,r,n)],d=[o];if(l.length%2!=0)throw new ve(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<l.length;x+=2)h.push(pa(e,l[x])),d.push(l[x+1]);const m=[],g=Qn.empty();for(let x=h.length-1;x>=0;--x)if(!Z_(m,h[x])){const S=h[x];let w=d[x];w=Bt(w);const _=c.childContextForFieldPath(S);if(w instanceof Gf)m.push(S);else{const T=Sa(w,_);T!=null&&(m.push(S),g.set(S,T))}}const y=new dr(m);return new H_(g,y,c.fieldTransforms)}function AM(t,e,n,r=!1){return Sa(n,t.createContext(r?4:3,e))}function Sa(t,e){if(X_(t=Bt(t)))return T0("Unsupported field value:",e,t),Y_(t,e);if(t instanceof jo)return(function(r,o){if(!K_(o.dataSource))throw o.createError(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,o){const l=[];let c=0;for(const h of r){let d=Sa(h,o.childContextForArray(c));d==null&&(d={nullValue:"NULL_VALUE"}),l.push(d),c++}return{arrayValue:{values:l}}})(t,e)}return(function(r,o){if((r=Bt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return XS(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=rt.fromDate(r);return{timestampValue:nf(o.serializer,l)}}if(r instanceof rt){const l=new rt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:nf(o.serializer,l)}}if(r instanceof oi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ur)return{bytesValue:a_(o.serializer,r._byteString)};if(r instanceof Nt){const l=o.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw o.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:l0(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Ar)return(function(c,h){const d=c instanceof Ar?c.toArray():c;return{mapValue:{fields:{[MS]:{stringValue:VS},[Zh]:{arrayValue:{values:d.map((g=>{if(typeof g!="number")throw h.createError("VectorValues must only contain numeric values.");return s0(h.serializer,g)}))}}}}}})(r,o);if(m_(r))return r._toProto(o.serializer);throw o.createError(`Unsupported field value: ${Pf(r)}`)})(t,e)}function Y_(t,e){const n={};return IS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):So(t,((r,o)=>{const l=Sa(o,e.childContextForField(r));l!=null&&(n[r]=l)})),{mapValue:{fields:n}}}function X_(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof rt||t instanceof oi||t instanceof ur||t instanceof Nt||t instanceof jo||t instanceof Ar||m_(t))}function T0(t,e,n){if(!X_(n)||!TS(n)){const r=Pf(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function pa(t,e,n){if((e=Bt(e))instanceof $u)return e._internalPath;if(typeof e=="string")return J_(t,e);throw af("Field path arguments must be of type string or ",t,!1,void 0,n)}const RM=new RegExp("[~\\*/\\[\\]]");function J_(t,e,n){if(e.search(RM)>=0)throw af(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new $u(...e.split("."))._internalPath}catch{throw af(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function af(t,e,n,r,o){const l=r&&!r.isEmpty(),c=o!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(l||c)&&(d+=" (found",l&&(d+=` in field ${r}`),c&&(d+=` in document ${o}`),d+=")"),new ve(ee.INVALID_ARGUMENT,h+t+d)}function Z_(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e5{convertValue(e,n="none"){switch(mo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(fo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Me(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return So(e,((o,l)=>{r[o]=this.convertValue(l,n)})),r}convertVectorValue(e){var r,o,l;const n=(l=(o=(r=e.fields)==null?void 0:r[Zh].arrayValue)==null?void 0:o.values)==null?void 0:l.map((c=>Ot(c.doubleValue)));return new Ar(n)}convertGeoPoint(e){return new oi(Ot(e.latitude),Ot(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Mf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(xu(e));default:return null}}convertTimestamp(e){const n=ho(e);return new rt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=pt.fromString(e);at(f_(r),9688,{name:e});const o=new Al(r.get(1),r.get(3)),l=new Ae(r.popFirst(5));return o.isEqual(n)||vs(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t5 extends e5{constructor(e){super(),this.firestore=e}convertBytes(e){return new ur(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Nt(this.firestore,null,n)}}function Be(){return new S0("serverTimestamp")}function C0(...t){return new _0("arrayUnion",t)}function n5(...t){return new j0("arrayRemove",t)}function yo(t){return new E0("increment",t)}const gk="@firebase/firestore",yk="4.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r5{constructor(e,n,r,o,l){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Nt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new PM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(pa("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class PM extends r5{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DM(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ve(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class I0{}class Qf extends I0{}function Mt(t,e,...n){let r=[];e instanceof I0&&r.push(e),r=r.concat(n),(function(l){const c=l.filter((d=>d instanceof Yf)).length,h=l.filter((d=>d instanceof Ku)).length;if(c>1||c>0&&h>0)throw new ve(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)t=o._apply(t);return t}class Ku extends Qf{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Ku(e,n,r)}_apply(e){const n=this._parse(e);return s5(e._query,n),new _s(e.firestore,e.converter,Ug(e._query,n))}_parse(e){const n=Hu(e.firestore);return(function(l,c,h,d,m,g,y){let x;if(m.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new ve(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){xk(y,g);const w=[];for(const _ of y)w.push(vk(d,l,_));x={arrayValue:{values:w}}}else x=vk(d,l,y)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||xk(y,g),x=AM(h,c,y,g==="in"||g==="not-in");return $t.create(m,g,x)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function un(t,e,n){const r=e,o=pa("where",t);return Ku._create(o,r,n)}class Yf extends I0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Yf(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:ai.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,l){let c=o;const h=l.getFlattenedFilters();for(const d of h)s5(c,d),c=Ug(c,d)})(e._query,n),new _s(e.firestore,e.converter,Ug(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Xf extends Qf{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Xf(e,n)}_apply(e){const n=(function(o,l,c){if(o.startAt!==null)throw new ve(ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ve(ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ku(l,c)})(e._query,this._field,this._direction);return new _s(e.firestore,e.converter,u4(e._query,n))}}function Vr(t,e="asc"){const n=e,r=pa("orderBy",t);return Xf._create(r,n)}class Jf extends Qf{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Jf(e,n,r)}_apply(e){return new _s(e.firestore,e.converter,tf(e._query,this._limit,this._limitType))}}function i5(t){return Jf._create("limit",t,"F")}function vk(t,e,n){if(typeof(n=Bt(n))=="string"){if(n==="")throw new ve(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$S(e)&&n.indexOf("/")!==-1)throw new ve(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(pt.fromString(n));if(!Ae.isDocumentKey(r))throw new ve(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Db(t,new Ae(r))}if(n instanceof Nt)return Db(t,n._key);throw new ve(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Pf(n)}.`)}function xk(t,e){if(!Array.isArray(t)||t.length===0)throw new ve(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function s5(t,e){const n=(function(o,l){for(const c of o)for(const h of c.getFlattenedFilters())if(l.indexOf(h.op)>=0)return h.op;return null})(t.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ve(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ve(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function A0(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class hl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class co extends r5{constructor(e,n,r,o,l,c){super(e,n,r,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new uu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(pa("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=co._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}co._jsonSchemaVersion="firestore/documentSnapshot/1.0",co._jsonSchema={type:Ht("string",co._jsonSchemaVersion),bundleSource:Ht("string","DocumentSnapshot"),bundleName:Ht("string"),bundle:Ht("string")};class uu extends co{data(e={}){return super.data(e)}}class aa{constructor(e,n,r,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new hl(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new uu(this._firestore,this._userDataWriter,r.key,r,new hl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ve(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((h=>{const d=new uu(o._firestore,o._userDataWriter,h.doc.key,h.doc,new hl(o._snapshot.mutatedKeys.has(h.doc.key),o._snapshot.fromCache),o.query.converter);return h.doc,{type:"added",doc:d,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((h=>l||h.type!==3)).map((h=>{const d=new uu(o._firestore,o._userDataWriter,h.doc.key,h.doc,new hl(o._snapshot.mutatedKeys.has(h.doc.key),o._snapshot.fromCache),o.query.converter);let m=-1,g=-1;return h.type!==0&&(m=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),g=c.indexOf(h.doc.key)),{type:NM(h.type),doc:d,oldIndex:m,newIndex:g}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=aa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Rf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(n.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function NM(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Me(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */aa._jsonSchemaVersion="firestore/querySnapshot/1.0",aa._jsonSchema={type:Ht("string",aa._jsonSchemaVersion),bundleSource:Ht("string","QuerySnapshot"),bundleName:Ht("string"),bundle:Ht("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Hu(e)}set(e,n,r){this._verifyNotCommitted();const o=Jp(e,this._firestore),l=A0(o.converter,n,r),c=w0(this._dataReader,"WriteBatch.set",o._key,l,o.converter!==null,r);return this._mutations.push(c.toMutation(o._key,Ln.none())),this}update(e,n,r,...o){this._verifyNotCommitted();const l=Jp(e,this._firestore);let c;return c=typeof(n=Bt(n))=="string"||n instanceof $u?Q_(this._dataReader,"WriteBatch.update",l._key,n,r,o):G_(this._dataReader,"WriteBatch.update",l._key,n),this._mutations.push(c.toMutation(l._key,Ln.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Jp(e,this._firestore);return this._mutations=this._mutations.concat(new Ff(n._key,Ln.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ve(ee.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Jp(t,e){if((t=Bt(t)).firestore!==e)throw new ve(ee.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(t){t=mr(t,Nt);const e=mr(t.firestore,js),n=Wu(e);return kM(n,t._key).then((r=>MM(e,t,r)))}function ft(t){t=mr(t,_s);const e=mr(t.firestore,js),n=Wu(e),r=new t5(e);return DM(t._query),wM(n,t._query).then((o=>new aa(e,r,t,o)))}function Fi(t,e,n){t=mr(t,Nt);const r=mr(t.firestore,js),o=A0(t.converter,e,n),l=Hu(r);return Jl(r,[w0(l,"setDoc",t._key,o,t.converter!==null,n).toMutation(t._key,Ln.none())])}function ut(t,e,n,...r){t=mr(t,Nt);const o=mr(t.firestore,js),l=Hu(o);let c;return c=typeof(e=Bt(e))=="string"||e instanceof $u?Q_(l,"updateDoc",t._key,e,n,r):G_(l,"updateDoc",t._key,e),Jl(o,[c.toMutation(t._key,Ln.exists(!0))])}function Zf(t){return Jl(mr(t.firestore,js),[new Ff(t._key,Ln.none())])}function qu(t,e){const n=mr(t.firestore,js),r=Ve(t),o=A0(t.converter,e),l=Hu(t.firestore);return Jl(n,[w0(l,"addDoc",r._key,o,t.converter!==null,{}).toMutation(r._key,Ln.exists(!1))]).then((()=>r))}function Jl(t,e){const n=Wu(t);return SM(n,e)}function MM(t,e,n){const r=n.docs.get(e._key),o=new t5(t);return new co(t,o,e._key,r,new hl(n.hasPendingWrites,n.fromCache),e.converter)}function R0(t){return t=mr(t,js),Wu(t),new o5(t,(e=>Jl(t,e)))}(function(e,n=!0){ED(Hl),Tl(new ca("firestore",((r,{instanceIdentifier:o,options:l})=>{const c=r.getProvider("app").getImmediate(),h=new js(new CD(r.getProvider("auth-internal")),new RD(c,r.getProvider("app-check-internal")),qD(c,o),c);return l={useFetchStreams:n,...l},h._setSettings(l),h}),"PUBLIC").setMultipleInstances(!0)),ao(gk,yk,e),ao(gk,yk,"esm2020")})();const a5=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:e5,Bytes:ur,CollectionReference:ds,DocumentReference:Nt,DocumentSnapshot:co,FieldPath:$u,FieldValue:jo,Firestore:js,FirestoreError:ve,GeoPoint:oi,Query:_s,QueryCompositeFilterConstraint:Yf,QueryConstraint:Qf,QueryDocumentSnapshot:uu,QueryFieldFilterConstraint:Ku,QueryLimitConstraint:Jf,QueryOrderByConstraint:Xf,QuerySnapshot:aa,SnapshotMetadata:hl,Timestamp:rt,VectorValue:Ar,WriteBatch:o5,_AutoId:Rf,_ByteString:cn,_DatabaseId:Al,_DocumentKey:Ae,_EmptyAuthCredentialsProvider:_S,_FieldPath:on,_cast:mr,_logWarn:fa,_validateIsNotUsedTogether:ES,addDoc:qu,arrayRemove:n5,arrayUnion:C0,collection:it,connectFirestoreEmulator:W_,deleteDoc:Zf,doc:Ve,ensureFirestoreConfigured:Wu,executeWrite:Jl,getDoc:On,getDocs:ft,getFirestore:$_,increment:yo,limit:i5,orderBy:Vr,query:Mt,serverTimestamp:Be,setDoc:Fi,updateDoc:ut,where:un,writeBatch:R0},Symbol.toStringTag,{value:"Module"}));var VM="firebase",LM="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ao(VM,LM,"app");const OM={apiKey:"AIzaSyCf4uRHqqZtYR3ZvlbHF9w59qGuEjlXcW4",authDomain:"kinderbucks-e3e8c.firebaseapp.com",projectId:"kinderbucks-e3e8c",storageBucket:"kinderbucks-e3e8c.firebasestorage.app",messagingSenderId:"18326874439",appId:"1:18326874439:web:ad902e6a1c794b2b3c4462",measurementId:"G-3JMD9HSMC3"},l5=D2(OM),ye=$_(l5),ga=_D(l5),ci="users",Yn={ADMIN:"admin",BUSINESS:"business",MEMBER:"member"};function ei(t){return t?Array.isArray(t.roles)?t.roles:Array.isArray(t.role)?t.role:t.role&&typeof t.role=="string"?[t.role]:[Yn.MEMBER]:[]}function BM(t,e){return ei(t).includes(e)}async function zM(t,e,n){const o=(await oP(ga,t,e)).user;return await cP(o,{displayName:n}),await Fi(Ve(ye,ci,o.uid),{uid:o.uid,email:o.email,displayName:n,roles:[Yn.MEMBER],createdAt:Be(),lastLogin:Be()}),o}async function FM(t,e){const n=await aP(ga,t,e);return await ut(Ve(ye,ci,n.user.uid),{lastLogin:Be()}),n.user}async function UM(){var l;const t=new ss,n=(await DP(ga,t)).user,r=Ve(ye,ci,n.uid);return(await On(r)).exists()?await ut(r,{lastLogin:Be(),photoURL:n.photoURL}):await Fi(r,{uid:n.uid,email:n.email,displayName:n.displayName||((l=n.email)==null?void 0:l.split("@")[0]),photoURL:n.photoURL,roles:[Yn.MEMBER],createdAt:Be(),lastLogin:Be(),provider:"google"}),n}async function c5(){return fP(ga)}async function Jg(t){const e=Ve(ye,ci,t),n=await On(e);return n.exists()?n.data():null}async function WM(t,e){if(!Object.values(Yn).includes(e))throw new Error("Invalid role");const n=Ve(ye,ci,t),r=await On(n);if(r.exists()){const o=r.data();if(Array.isArray(o.roles))await ut(n,{roles:C0(e),updatedAt:Be()});else{const l=o.role?[o.role]:[Yn.MEMBER];l.includes(e)||l.push(e),await ut(n,{roles:l,updatedAt:Be()})}}}async function $M(t,e){if(!Object.values(Yn).includes(e))throw new Error("Invalid role");const n=Ve(ye,ci,t),r=await On(n);if(r.exists()){const o=r.data(),l=ei(o);if(l.length===1&&l[0]===e){await ut(n,{roles:[Yn.MEMBER],updatedAt:Be()});return}if(Array.isArray(o.roles))await ut(n,{roles:n5(e),updatedAt:Be()});else{const h=(o.role?[o.role]:[Yn.MEMBER]).filter(d=>d!==e);await ut(n,{roles:h.length>0?h:[Yn.MEMBER],updatedAt:Be()})}}}async function HM(t,e){const n=Ve(ye,ci,t),r=await On(n);if(r.exists()){const o=r.data(),l=ei(o),c=l.includes(Yn.BUSINESS)?l:[...l,Yn.BUSINESS];await ut(n,{roles:c,businessCode:e,updatedAt:Be()})}}async function KM(){return(await ft(it(ye,ci))).docs.map(e=>({id:e.id,...e.data()}))}function qM(t){return hP(ga,t)}async function u5(t){const e=await Jg(t);if(!e)return{exists:!1,canDelete:!1,reason:"User not found"};const n=Mt(it(ye,"checkins"),un("memberId","==",t)),o=(await ft(n)).size,l=Mt(it(ye,"exchanges"),un("userId","==",t)),h=(await ft(l)).size,d=!!e.businessCode,m=o>0||h>0||d;return{exists:!0,uid:t,displayName:e.displayName,email:e.email,roles:ei(e),checkinCount:o,exchangeCount:h,isBusinessOwner:d,businessCode:e.businessCode,hasData:m,canSafeDelete:!m,reason:m?`Has ${o} check-ins, ${h} exchanges${d?", is business owner":""}`:"No associated data"}}async function GM(t,e=null,n=!1){const r=await u5(t);if(!r.exists)throw new Error("User not found");if(r.hasData&&!n)throw new Error(`Cannot delete: ${r.reason}. Use force=true to soft delete anyway.`);const o=Ve(ye,ci,t);return await ut(o,{isDeleted:!0,deletedAt:Be(),deletedBy:e}),{success:!0,wasForced:r.hasData&&n}}async function QM(t){const e=Ve(ye,ci,t);await ut(e,{isDeleted:!1,deletedAt:null,deletedBy:null,restoredAt:Be()})}async function YM(t=!1){const n=(await ft(it(ye,ci))).docs.map(r=>({id:r.id,...r.data()}));return t?n:n.filter(r=>!r.isDeleted)}async function XM(){return(await YM(!0)).filter(e=>e.isDeleted)}const d5=C.createContext(null);function JM({children:t}){const[e,n]=C.useState(null),[r,o]=C.useState(null),[l,c]=C.useState(!0);C.useEffect(()=>{const T=qM(async P=>{if(n(P),P){const V=await Jg(P.uid);o(V)}else o(null);c(!1)});return()=>T()},[]);const h=ei(r),d=!!e,m=h.includes(Yn.ADMIN),g=h.includes(Yn.BUSINESS),y=h.includes(Yn.MEMBER)||d,_={user:e,profile:r,roles:h,loading:l,isAuthenticated:d,isAdmin:m,isBusiness:g,isMember:y,hasRole:T=>BM(r,T),hasAnyRole:(...T)=>T.some(P=>h.includes(P)),refreshProfile:async()=>{if(e){const T=await Jg(e.uid);o(T)}}};return i.jsx(d5.Provider,{value:_,children:t})}function gr(){const t=C.useContext(d5);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t}/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZM=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),e3=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),bk=t=>{const e=e3(t);return e.charAt(0).toUpperCase()+e.slice(1)},h5=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),t3=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var n3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=C.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:l,iconNode:c,...h},d)=>C.createElement("svg",{ref:d,...n3,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:h5("lucide",o),...!l&&!t3(h)&&{"aria-hidden":"true"},...h},[...c.map(([m,g])=>C.createElement(m,g)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=(t,e)=>{const n=C.forwardRef(({className:r,...o},l)=>C.createElement(r3,{ref:l,iconNode:e,className:h5(`lucide-${ZM(bk(t))}`,`lucide-${t}`,r),...o}));return n.displayName=bk(t),n};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],f5=oe("archive",i3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],kk=oe("arrow-down-right",s3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],m5=oe("arrow-left",o3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],P0=oe("arrow-right-left",a3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Zg=oe("arrow-right",l3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],wk=oe("arrow-up-right",c3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Rr=oe("award",u3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],ii=oe("banknote",d3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],ey=oe("book-open",h3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],D0=oe("briefcase",f3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],ty=oe("building-2",m3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Gu=oe("calendar",p3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],p5=oe("camera",g3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],N0=oe("chart-column",y3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ti=oe("check",v3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],g5=oe("chevron-down",x3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],k3=oe("chevron-left",b3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],em=oe("chevron-right",w3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],_3=oe("chevron-up",S3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],hs=oe("circle-alert",j3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],vn=oe("circle-check-big",E3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],C3=oe("circle-question-mark",T3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],y5=oe("circle-x",I3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],hr=oe("clock",A3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=[["path",{d:"M6 16.326A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 .5 8.973",key:"1cez44"}],["path",{d:"m13 12-3 5h4l-3 5",key:"1t22er"}]],Zp=oe("cloud-lightning",R3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]],is=oe("cloud-rain",P3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M8 15h.01",key:"a7atzg"}],["path",{d:"M8 19h.01",key:"puxtts"}],["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M12 21h.01",key:"h35vbk"}],["path",{d:"M16 15h.01",key:"rnfrdf"}],["path",{d:"M16 19h.01",key:"1vcnzz"}]],al=oe("cloud-snow",D3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],bh=oe("cloud",N3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M3=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],V3=oe("coins",M3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L3=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],M0=oe("compass",L3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],V0=oe("copy",O3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B3=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],lf=oe("credit-card",B3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z3=[["path",{d:"M10.2 18H4.774a1.5 1.5 0 0 1-1.352-.97 11 11 0 0 1 .132-6.487",key:"14kkz9"}],["path",{d:"M18 10.2V4.774a1.5 1.5 0 0 0-.97-1.352 11 11 0 0 0-6.486.132",key:"1g7v07"}],["path",{d:"M18 5a4 3 0 0 1 4 3 2 2 0 0 1-2 2 10 10 0 0 0-5.139 1.42",key:"ratg6b"}],["path",{d:"M5 18a3 4 0 0 0 3 4 2 2 0 0 0 2-2 10 10 0 0 1 1.42-5.14",key:"4454f0"}],["path",{d:"M8.709 2.554a10 10 0 0 0-6.155 6.155 1.5 1.5 0 0 0 .676 1.626l9.807 5.42a2 2 0 0 0 2.718-2.718l-5.42-9.807a1.5 1.5 0 0 0-1.626-.676",key:"qmemie"}]],F3=oe("croissant",z3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U3=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],yr=oe("crown",U3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W3=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Ll=oe("dollar-sign",W3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $3=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],L0=oe("download",$3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H3=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],K3=oe("droplets",H3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q3=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],v5=oe("external-link",q3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G3=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],cf=oe("eye-off",G3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q3=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],_u=oe("eye",Q3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y3=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Sk=oe("file-text",Y3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X3=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],_k=oe("flame",X3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J3=[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]],Z3=oe("gamepad-2",J3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e6=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],Sl=oe("gift",e6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t6=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],x5=oe("heart",t6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n6=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],r6=oe("house",n6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],eg=oe("info",i6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s6=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],o6=oe("layout-dashboard",s6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a6=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],l6=oe("lightbulb",a6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c6=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],O0=oe("loader-circle",c6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u6=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],jk=oe("loader",u6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d6=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],h6=oe("lock",d6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f6=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],Ol=oe("log-in",f6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m6=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],ny=oe("log-out",m6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p6=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],b5=oe("mail",p6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g6=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],an=oe("map-pin",g6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y6=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],ya=oe("map",y6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v6=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],x6=oe("megaphone",v6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b6=[["path",{d:"M5 12h14",key:"1ays0h"}]],k6=oe("minus",b6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w6=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],S6=oe("navigation",w6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _6=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],j6=oe("network",_6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E6=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Ek=oe("package",E6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T6=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],B0=oe("palette",T6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C6=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],I6=oe("percent",C6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A6=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],R6=oe("phone",A6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P6=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ni=oe("plus",P6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D6=[["path",{d:"M2 3h20",key:"91anmk"}],["path",{d:"M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3",key:"2k9sn8"}],["path",{d:"m7 21 5-5 5 5",key:"bip4we"}]],k5=oe("presentation",D6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N6=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],z0=oe("printer",N6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M6=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],Pr=oe("qr-code",M6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V6=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],L6=oe("refresh-cw",V6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O6=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],w5=oe("rocket",O6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B6=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],S5=oe("rotate-ccw",B6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z6=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],F6=oe("save",z6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U6=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],tm=oe("search",U6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W6=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],uf=oe("send",W6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $6=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],H6=oe("share-2",$6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K6=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],_5=oe("shield-check",K6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q6=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],df=oe("shield",q6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G6=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],nm=oe("shopping-bag",G6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q6=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],ry=oe("smartphone",Q6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y6=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Qu=oe("sparkles",Y6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X6=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],J6=oe("square-check-big",X6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z6=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],j5=oe("square-pen",Z6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eV=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],tV=oe("square",eV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nV=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Lr=oe("star",nV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rV=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],It=oe("store",rV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iV=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Tk=oe("sun",iV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sV=[["path",{d:"M12 2v8",key:"1q4o3n"}],["path",{d:"m4.93 10.93 1.41 1.41",key:"2a7f42"}],["path",{d:"M2 18h2",key:"j10viu"}],["path",{d:"M20 18h2",key:"wocana"}],["path",{d:"m19.07 10.93-1.41 1.41",key:"15zs5n"}],["path",{d:"M22 22H2",key:"19qnx5"}],["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}],["path",{d:"M16 18a4 4 0 0 0-8 0",key:"1lzouq"}]],oV=oe("sunrise",sV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aV=[["path",{d:"M12 10V2",key:"16sf7g"}],["path",{d:"m4.93 10.93 1.41 1.41",key:"2a7f42"}],["path",{d:"M2 18h2",key:"j10viu"}],["path",{d:"M20 18h2",key:"wocana"}],["path",{d:"m19.07 10.93-1.41 1.41",key:"15zs5n"}],["path",{d:"M22 22H2",key:"19qnx5"}],["path",{d:"m16 6-4 4-4-4",key:"6wukr"}],["path",{d:"M16 18a4 4 0 0 0-8 0",key:"1lzouq"}]],lV=oe("sunset",aV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cV=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Gc=oe("tag",cV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],xn=oe("target",uV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dV=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],hV=oe("toggle-left",dV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fV=[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],mV=oe("toggle-right",fV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pV=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ni=oe("trash-2",pV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gV=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],bs=oe("trending-up",gV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yV=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],E5=oe("triangle-alert",yV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vV=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Bl=oe("trophy",vV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xV=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],hf=oe("user-plus",xV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bV=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],_l=oe("user",bV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kV=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ln=oe("users",kV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wV=[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]],F0=oe("utensils-crossed",wV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SV=[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]],_V=oe("wind",SV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jV=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],rm=oe("x",jV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EV=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],TV=oe("zap",EV);function lr({children:t,allowedRoles:e=[]}){const{user:n,roles:r,loading:o,isAuthenticated:l}=gr(),c=Or();return o?i.jsxs("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"var(--kb-cream)"},children:[i.jsxs("div",{style:{textAlign:"center"},children:[i.jsx(O0,{size:48,color:"var(--kb-navy)",style:{animation:"spin 1s linear infinite"}}),i.jsx("p",{style:{marginTop:"1rem",color:"var(--kb-gray-500)"},children:"Loading..."})]}),i.jsx("style",{children:`
          @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
          }
        `})]}):l?e.length>0&&!e.some(d=>r.includes(d))?i.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"var(--kb-cream)",padding:"2rem"},children:i.jsxs("div",{className:"card",style:{maxWidth:"400px",textAlign:"center",padding:"2rem"},children:[i.jsx("h2",{style:{color:"#dc2626",marginBottom:"1rem"},children:"Access Denied"}),i.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem"},children:"You don't have permission to access this page."}),i.jsx("a",{href:"/",className:"btn btn-primary",children:"Go Home"})]})}):t:i.jsx(WC,{to:"/login",state:{from:c},replace:!0})}const U0=C.createContext({});function W0(t){const e=C.useRef(null);return e.current===null&&(e.current=t()),e.current}const T5=typeof window<"u",C5=T5?C.useLayoutEffect:C.useEffect,im=C.createContext(null);function $0(t,e){t.indexOf(e)===-1&&t.push(e)}function H0(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const zi=(t,e,n)=>n>e?e:n<t?t:n;let K0=()=>{};const ks={},I5=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function A5(t){return typeof t=="object"&&t!==null}const R5=t=>/^0[^.\s]+$/u.test(t);function q0(t){let e;return()=>(e===void 0&&(e=t()),e)}const Dr=t=>t,CV=(t,e)=>n=>e(t(n)),Yu=(...t)=>t.reduce(CV),ju=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class G0{constructor(){this.subscriptions=[]}add(e){return $0(this.subscriptions,e),()=>H0(this.subscriptions,e)}notify(e,n,r){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](e,n,r);else for(let l=0;l<o;l++){const c=this.subscriptions[l];c&&c(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const fs=t=>t*1e3,Ir=t=>t/1e3;function P5(t,e){return e?t*(1e3/e):0}const D5=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,IV=1e-7,AV=12;function RV(t,e,n,r,o){let l,c,h=0;do c=e+(n-e)/2,l=D5(c,r,o)-t,l>0?n=c:e=c;while(Math.abs(l)>IV&&++h<AV);return c}function Xu(t,e,n,r){if(t===e&&n===r)return Dr;const o=l=>RV(l,0,1,t,n);return l=>l===0||l===1?l:D5(o(l),e,r)}const N5=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,M5=t=>e=>1-t(1-e),V5=Xu(.33,1.53,.69,.99),Q0=M5(V5),L5=N5(Q0),O5=t=>(t*=2)<1?.5*Q0(t):.5*(2-Math.pow(2,-10*(t-1))),Y0=t=>1-Math.sin(Math.acos(t)),B5=M5(Y0),z5=N5(Y0),PV=Xu(.42,0,1,1),DV=Xu(0,0,.58,1),F5=Xu(.42,0,.58,1),NV=t=>Array.isArray(t)&&typeof t[0]!="number",U5=t=>Array.isArray(t)&&typeof t[0]=="number",MV={linear:Dr,easeIn:PV,easeInOut:F5,easeOut:DV,circIn:Y0,circInOut:z5,circOut:B5,backIn:Q0,backInOut:L5,backOut:V5,anticipate:O5},VV=t=>typeof t=="string",Ck=t=>{if(U5(t)){K0(t.length===4);const[e,n,r,o]=t;return Xu(e,n,r,o)}else if(VV(t))return MV[t];return t},kh=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function LV(t,e){let n=new Set,r=new Set,o=!1,l=!1;const c=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1};function d(g){c.has(g)&&(m.schedule(g),t()),g(h)}const m={schedule:(g,y=!1,x=!1)=>{const w=x&&o?n:r;return y&&c.add(g),w.has(g)||w.add(g),g},cancel:g=>{r.delete(g),c.delete(g)},process:g=>{if(h=g,o){l=!0;return}o=!0,[n,r]=[r,n],n.forEach(d),n.clear(),o=!1,l&&(l=!1,m.process(g))}};return m}const OV=40;function W5(t,e){let n=!1,r=!0;const o={delta:0,timestamp:0,isProcessing:!1},l=()=>n=!0,c=kh.reduce((M,F)=>(M[F]=LV(l),M),{}),{setup:h,read:d,resolveKeyframes:m,preUpdate:g,update:y,preRender:x,render:S,postRender:w}=c,_=()=>{const M=ks.useManualTiming?o.timestamp:performance.now();n=!1,ks.useManualTiming||(o.delta=r?1e3/60:Math.max(Math.min(M-o.timestamp,OV),1)),o.timestamp=M,o.isProcessing=!0,h.process(o),d.process(o),m.process(o),g.process(o),y.process(o),x.process(o),S.process(o),w.process(o),o.isProcessing=!1,n&&e&&(r=!1,t(_))},T=()=>{n=!0,r=!0,o.isProcessing||t(_)};return{schedule:kh.reduce((M,F)=>{const K=c[F];return M[F]=(q,A=!1,E=!1)=>(n||T(),K.schedule(q,A,E)),M},{}),cancel:M=>{for(let F=0;F<kh.length;F++)c[kh[F]].cancel(M)},state:o,steps:c}}const{schedule:kt,cancel:vo,state:gn,steps:tg}=W5(typeof requestAnimationFrame<"u"?requestAnimationFrame:Dr,!0);let Oh;function BV(){Oh=void 0}const Mn={now:()=>(Oh===void 0&&Mn.set(gn.isProcessing||ks.useManualTiming?gn.timestamp:performance.now()),Oh),set:t=>{Oh=t,queueMicrotask(BV)}},$5=t=>e=>typeof e=="string"&&e.startsWith(t),H5=$5("--"),zV=$5("var(--"),X0=t=>zV(t)?FV.test(t.split("/*")[0].trim()):!1,FV=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function Ik(t){return typeof t!="string"?!1:t.split("/*")[0].includes("var(--")}const Zl={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Eu={...Zl,transform:t=>zi(0,1,t)},wh={...Zl,default:1},du=t=>Math.round(t*1e5)/1e5,J0=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function UV(t){return t==null}const WV=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Z0=(t,e)=>n=>!!(typeof n=="string"&&WV.test(n)&&n.startsWith(t)||e&&!UV(n)&&Object.prototype.hasOwnProperty.call(n,e)),K5=(t,e,n)=>r=>{if(typeof r!="string")return r;const[o,l,c,h]=r.match(J0);return{[t]:parseFloat(o),[e]:parseFloat(l),[n]:parseFloat(c),alpha:h!==void 0?parseFloat(h):1}},$V=t=>zi(0,255,t),ng={...Zl,transform:t=>Math.round($V(t))},sa={test:Z0("rgb","red"),parse:K5("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+ng.transform(t)+", "+ng.transform(e)+", "+ng.transform(n)+", "+du(Eu.transform(r))+")"};function HV(t){let e="",n="",r="",o="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),o=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),o=t.substring(4,5),e+=e,n+=n,r+=r,o+=o),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:o?parseInt(o,16)/255:1}}const iy={test:Z0("#"),parse:HV,transform:sa.transform},Ju=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Zs=Ju("deg"),Oi=Ju("%"),ke=Ju("px"),KV=Ju("vh"),qV=Ju("vw"),Ak={...Oi,parse:t=>Oi.parse(t)/100,transform:t=>Oi.transform(t*100)},fl={test:Z0("hsl","hue"),parse:K5("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Oi.transform(du(e))+", "+Oi.transform(du(n))+", "+du(Eu.transform(r))+")"},Wt={test:t=>sa.test(t)||iy.test(t)||fl.test(t),parse:t=>sa.test(t)?sa.parse(t):fl.test(t)?fl.parse(t):iy.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?sa.transform(t):fl.transform(t),getAnimatableNone:t=>{const e=Wt.parse(t);return e.alpha=0,Wt.transform(e)}},GV=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function QV(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(J0))==null?void 0:e.length)||0)+(((n=t.match(GV))==null?void 0:n.length)||0)>0}const q5="number",G5="color",YV="var",XV="var(",Rk="${}",JV=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Tu(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},o=[];let l=0;const h=e.replace(JV,d=>(Wt.test(d)?(r.color.push(l),o.push(G5),n.push(Wt.parse(d))):d.startsWith(XV)?(r.var.push(l),o.push(YV),n.push(d)):(r.number.push(l),o.push(q5),n.push(parseFloat(d))),++l,Rk)).split(Rk);return{values:n,split:h,indexes:r,types:o}}function Q5(t){return Tu(t).values}function Y5(t){const{split:e,types:n}=Tu(t),r=e.length;return o=>{let l="";for(let c=0;c<r;c++)if(l+=e[c],o[c]!==void 0){const h=n[c];h===q5?l+=du(o[c]):h===G5?l+=Wt.transform(o[c]):l+=o[c]}return l}}const ZV=t=>typeof t=="number"?0:Wt.test(t)?Wt.getAnimatableNone(t):t;function eL(t){const e=Q5(t);return Y5(t)(e.map(ZV))}const xo={test:QV,parse:Q5,createTransformer:Y5,getAnimatableNone:eL};function rg(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function tL({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let o=0,l=0,c=0;if(!e)o=l=c=n;else{const h=n<.5?n*(1+e):n+e-n*e,d=2*n-h;o=rg(d,h,t+1/3),l=rg(d,h,t),c=rg(d,h,t-1/3)}return{red:Math.round(o*255),green:Math.round(l*255),blue:Math.round(c*255),alpha:r}}function ff(t,e){return n=>n>0?e:t}const Ct=(t,e,n)=>t+(e-t)*n,ig=(t,e,n)=>{const r=t*t,o=n*(e*e-r)+r;return o<0?0:Math.sqrt(o)},nL=[iy,sa,fl],rL=t=>nL.find(e=>e.test(t));function Pk(t){const e=rL(t);if(!e)return!1;let n=e.parse(t);return e===fl&&(n=tL(n)),n}const Dk=(t,e)=>{const n=Pk(t),r=Pk(e);if(!n||!r)return ff(t,e);const o={...n};return l=>(o.red=ig(n.red,r.red,l),o.green=ig(n.green,r.green,l),o.blue=ig(n.blue,r.blue,l),o.alpha=Ct(n.alpha,r.alpha,l),sa.transform(o))},sy=new Set(["none","hidden"]);function iL(t,e){return sy.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function sL(t,e){return n=>Ct(t,e,n)}function ev(t){return typeof t=="number"?sL:typeof t=="string"?X0(t)?ff:Wt.test(t)?Dk:lL:Array.isArray(t)?X5:typeof t=="object"?Wt.test(t)?Dk:oL:ff}function X5(t,e){const n=[...t],r=n.length,o=t.map((l,c)=>ev(l)(l,e[c]));return l=>{for(let c=0;c<r;c++)n[c]=o[c](l);return n}}function oL(t,e){const n={...t,...e},r={};for(const o in n)t[o]!==void 0&&e[o]!==void 0&&(r[o]=ev(t[o])(t[o],e[o]));return o=>{for(const l in r)n[l]=r[l](o);return n}}function aL(t,e){const n=[],r={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const l=e.types[o],c=t.indexes[l][r[l]],h=t.values[c]??0;n[o]=h,r[l]++}return n}const lL=(t,e)=>{const n=xo.createTransformer(e),r=Tu(t),o=Tu(e);return r.indexes.var.length===o.indexes.var.length&&r.indexes.color.length===o.indexes.color.length&&r.indexes.number.length>=o.indexes.number.length?sy.has(t)&&!o.values.length||sy.has(e)&&!r.values.length?iL(t,e):Yu(X5(aL(r,o),o.values),n):ff(t,e)};function J5(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Ct(t,e,n):ev(t)(t,e)}const cL=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>kt.update(e,n),stop:()=>vo(e),now:()=>gn.isProcessing?gn.timestamp:Mn.now()}},Z5=(t,e,n=10)=>{let r="";const o=Math.max(Math.round(e/n),2);for(let l=0;l<o;l++)r+=Math.round(t(l/(o-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},mf=2e4;function tv(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<mf;)e+=n,r=t.next(e);return e>=mf?1/0:e}function uL(t,e=100,n){const r=n({...t,keyframes:[0,e]}),o=Math.min(tv(r),mf);return{type:"keyframes",ease:l=>r.next(o*l).value/e,duration:Ir(o)}}const dL=5;function ej(t,e,n){const r=Math.max(e-dL,0);return P5(n-t(r),e-r)}const Dt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},sg=.001;function hL({duration:t=Dt.duration,bounce:e=Dt.bounce,velocity:n=Dt.velocity,mass:r=Dt.mass}){let o,l,c=1-e;c=zi(Dt.minDamping,Dt.maxDamping,c),t=zi(Dt.minDuration,Dt.maxDuration,Ir(t)),c<1?(o=m=>{const g=m*c,y=g*t,x=g-n,S=oy(m,c),w=Math.exp(-y);return sg-x/S*w},l=m=>{const y=m*c*t,x=y*n+n,S=Math.pow(c,2)*Math.pow(m,2)*t,w=Math.exp(-y),_=oy(Math.pow(m,2),c);return(-o(m)+sg>0?-1:1)*((x-S)*w)/_}):(o=m=>{const g=Math.exp(-m*t),y=(m-n)*t+1;return-sg+g*y},l=m=>{const g=Math.exp(-m*t),y=(n-m)*(t*t);return g*y});const h=5/t,d=mL(o,l,h);if(t=fs(t),isNaN(d))return{stiffness:Dt.stiffness,damping:Dt.damping,duration:t};{const m=Math.pow(d,2)*r;return{stiffness:m,damping:c*2*Math.sqrt(r*m),duration:t}}}const fL=12;function mL(t,e,n){let r=n;for(let o=1;o<fL;o++)r=r-t(r)/e(r);return r}function oy(t,e){return t*Math.sqrt(1-e*e)}const pL=["duration","bounce"],gL=["stiffness","damping","mass"];function Nk(t,e){return e.some(n=>t[n]!==void 0)}function yL(t){let e={velocity:Dt.velocity,stiffness:Dt.stiffness,damping:Dt.damping,mass:Dt.mass,isResolvedFromDuration:!1,...t};if(!Nk(t,gL)&&Nk(t,pL))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),o=r*r,l=2*zi(.05,1,1-(t.bounce||0))*Math.sqrt(o);e={...e,mass:Dt.mass,stiffness:o,damping:l}}else{const n=hL(t);e={...e,...n,mass:Dt.mass},e.isResolvedFromDuration=!0}return e}function pf(t=Dt.visualDuration,e=Dt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:o}=n;const l=n.keyframes[0],c=n.keyframes[n.keyframes.length-1],h={done:!1,value:l},{stiffness:d,damping:m,mass:g,duration:y,velocity:x,isResolvedFromDuration:S}=yL({...n,velocity:-Ir(n.velocity||0)}),w=x||0,_=m/(2*Math.sqrt(d*g)),T=c-l,P=Ir(Math.sqrt(d/g)),V=Math.abs(T)<5;r||(r=V?Dt.restSpeed.granular:Dt.restSpeed.default),o||(o=V?Dt.restDelta.granular:Dt.restDelta.default);let M;if(_<1){const K=oy(P,_);M=q=>{const A=Math.exp(-_*P*q);return c-A*((w+_*P*T)/K*Math.sin(K*q)+T*Math.cos(K*q))}}else if(_===1)M=K=>c-Math.exp(-P*K)*(T+(w+P*T)*K);else{const K=P*Math.sqrt(_*_-1);M=q=>{const A=Math.exp(-_*P*q),E=Math.min(K*q,300);return c-A*((w+_*P*T)*Math.sinh(E)+K*T*Math.cosh(E))/K}}const F={calculatedDuration:S&&y||null,next:K=>{const q=M(K);if(S)h.done=K>=y;else{let A=K===0?w:0;_<1&&(A=K===0?fs(w):ej(M,K,q));const E=Math.abs(A)<=r,I=Math.abs(c-q)<=o;h.done=E&&I}return h.value=h.done?c:q,h},toString:()=>{const K=Math.min(tv(F),mf),q=Z5(A=>F.next(K*A).value,K,30);return K+"ms "+q},toTransition:()=>{}};return F}pf.applyToOptions=t=>{const e=uL(t,100,pf);return t.ease=e.ease,t.duration=fs(e.duration),t.type="keyframes",t};function ay({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:o=10,bounceStiffness:l=500,modifyTarget:c,min:h,max:d,restDelta:m=.5,restSpeed:g}){const y=t[0],x={done:!1,value:y},S=E=>h!==void 0&&E<h||d!==void 0&&E>d,w=E=>h===void 0?d:d===void 0||Math.abs(h-E)<Math.abs(d-E)?h:d;let _=n*e;const T=y+_,P=c===void 0?T:c(T);P!==T&&(_=P-y);const V=E=>-_*Math.exp(-E/r),M=E=>P+V(E),F=E=>{const I=V(E),D=M(E);x.done=Math.abs(I)<=m,x.value=x.done?P:D};let K,q;const A=E=>{S(x.value)&&(K=E,q=pf({keyframes:[x.value,w(x.value)],velocity:ej(M,E,x.value),damping:o,stiffness:l,restDelta:m,restSpeed:g}))};return A(0),{calculatedDuration:null,next:E=>{let I=!1;return!q&&K===void 0&&(I=!0,F(E),A(E)),K!==void 0&&E>=K?q.next(E-K):(!I&&F(E),x)}}}function vL(t,e,n){const r=[],o=n||ks.mix||J5,l=t.length-1;for(let c=0;c<l;c++){let h=o(t[c],t[c+1]);if(e){const d=Array.isArray(e)?e[c]||Dr:e;h=Yu(d,h)}r.push(h)}return r}function xL(t,e,{clamp:n=!0,ease:r,mixer:o}={}){const l=t.length;if(K0(l===e.length),l===1)return()=>e[0];if(l===2&&e[0]===e[1])return()=>e[1];const c=t[0]===t[1];t[0]>t[l-1]&&(t=[...t].reverse(),e=[...e].reverse());const h=vL(e,r,o),d=h.length,m=g=>{if(c&&g<t[0])return e[0];let y=0;if(d>1)for(;y<t.length-2&&!(g<t[y+1]);y++);const x=ju(t[y],t[y+1],g);return h[y](x)};return n?g=>m(zi(t[0],t[l-1],g)):m}function bL(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const o=ju(0,e,r);t.push(Ct(n,1,o))}}function kL(t){const e=[0];return bL(e,t.length-1),e}function wL(t,e){return t.map(n=>n*e)}function SL(t,e){return t.map(()=>e||F5).splice(0,t.length-1)}function hu({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const o=NV(r)?r.map(Ck):Ck(r),l={done:!1,value:e[0]},c=wL(n&&n.length===e.length?n:kL(e),t),h=xL(c,e,{ease:Array.isArray(o)?o:SL(e,o)});return{calculatedDuration:t,next:d=>(l.value=h(d),l.done=d>=t,l)}}const _L=t=>t!==null;function nv(t,{repeat:e,repeatType:n="loop"},r,o=1){const l=t.filter(_L),h=o<0||e&&n!=="loop"&&e%2===1?0:l.length-1;return!h||r===void 0?l[h]:r}const jL={decay:ay,inertia:ay,tween:hu,keyframes:hu,spring:pf};function tj(t){typeof t.type=="string"&&(t.type=jL[t.type])}class rv{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const EL=t=>t/100;class iv extends rv{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,o;const{motionValue:n}=this.options;n&&n.updatedAt!==Mn.now()&&this.tick(Mn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(o=(r=this.options).onStop)==null||o.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;tj(e);const{type:n=hu,repeat:r=0,repeatDelay:o=0,repeatType:l,velocity:c=0}=e;let{keyframes:h}=e;const d=n||hu;d!==hu&&typeof h[0]!="number"&&(this.mixKeyframes=Yu(EL,J5(h[0],h[1])),h=[0,100]);const m=d({...e,keyframes:h});l==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...h].reverse(),velocity:-c})),m.calculatedDuration===null&&(m.calculatedDuration=tv(m));const{calculatedDuration:g}=m;this.calculatedDuration=g,this.resolvedDuration=g+o,this.totalDuration=this.resolvedDuration*(r+1)-o,this.generator=m}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:o,mixKeyframes:l,mirroredGenerator:c,resolvedDuration:h,calculatedDuration:d}=this;if(this.startTime===null)return r.next(0);const{delay:m=0,keyframes:g,repeat:y,repeatType:x,repeatDelay:S,type:w,onUpdate:_,finalKeyframe:T}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-o/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const P=this.currentTime-m*(this.playbackSpeed>=0?1:-1),V=this.playbackSpeed>=0?P<0:P>o;this.currentTime=Math.max(P,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=o);let M=this.currentTime,F=r;if(y){const E=Math.min(this.currentTime,o)/h;let I=Math.floor(E),D=E%1;!D&&E>=1&&(D=1),D===1&&I--,I=Math.min(I,y+1),!!(I%2)&&(x==="reverse"?(D=1-D,S&&(D-=S/h)):x==="mirror"&&(F=c)),M=zi(0,1,D)*h}const K=V?{done:!1,value:g[0]}:F.next(M);l&&(K.value=l(K.value));let{done:q}=K;!V&&d!==null&&(q=this.playbackSpeed>=0?this.currentTime>=o:this.currentTime<=0);const A=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&q);return A&&w!==ay&&(K.value=nv(g,this.options,T,this.speed)),_&&_(K.value),A&&this.finish(),K}then(e,n){return this.finished.then(e,n)}get duration(){return Ir(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Ir(e)}get time(){return Ir(this.currentTime)}set time(e){var n;e=fs(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Mn.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Ir(this.currentTime))}play(){var o,l;if(this.isStopped)return;const{driver:e=cL,startTime:n}=this.options;this.driver||(this.driver=e(c=>this.tick(c))),(l=(o=this.options).onPlay)==null||l.call(o);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Mn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function TL(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const oa=t=>t*180/Math.PI,ly=t=>{const e=oa(Math.atan2(t[1],t[0]));return cy(e)},CL={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:ly,rotateZ:ly,skewX:t=>oa(Math.atan(t[1])),skewY:t=>oa(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},cy=t=>(t=t%360,t<0&&(t+=360),t),Mk=ly,Vk=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Lk=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),IL={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Vk,scaleY:Lk,scale:t=>(Vk(t)+Lk(t))/2,rotateX:t=>cy(oa(Math.atan2(t[6],t[5]))),rotateY:t=>cy(oa(Math.atan2(-t[2],t[0]))),rotateZ:Mk,rotate:Mk,skewX:t=>oa(Math.atan(t[4])),skewY:t=>oa(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function uy(t){return t.includes("scale")?1:0}function dy(t,e){if(!t||t==="none")return uy(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,o;if(n)r=IL,o=n;else{const h=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=CL,o=h}if(!o)return uy(e);const l=r[e],c=o[1].split(",").map(RL);return typeof l=="function"?l(c):c[l]}const AL=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return dy(n,e)};function RL(t){return parseFloat(t.trim())}const ec=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],tc=new Set(ec),Ok=t=>t===Zl||t===ke,PL=new Set(["x","y","z"]),DL=ec.filter(t=>!PL.has(t));function NL(t){const e=[];return DL.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const io={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>dy(e,"x"),y:(t,{transform:e})=>dy(e,"y")};io.translateX=io.x;io.translateY=io.y;const la=new Set;let hy=!1,fy=!1,my=!1;function nj(){if(fy){const t=Array.from(la).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const o=NL(r);o.length&&(n.set(r,o),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const o=n.get(r);o&&o.forEach(([l,c])=>{var h;(h=r.getValue(l))==null||h.set(c)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}fy=!1,hy=!1,la.forEach(t=>t.complete(my)),la.clear()}function rj(){la.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(fy=!0)})}function ML(){my=!0,rj(),nj(),my=!1}class sv{constructor(e,n,r,o,l,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=o,this.element=l,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(la.add(this),hy||(hy=!0,kt.read(rj),kt.resolveKeyframes(nj))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:o}=this;if(e[0]===null){const l=o==null?void 0:o.get(),c=e[e.length-1];if(l!==void 0)e[0]=l;else if(r&&n){const h=r.readValue(n,c);h!=null&&(e[0]=h)}e[0]===void 0&&(e[0]=c),o&&l===void 0&&o.set(e[0])}TL(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),la.delete(this)}cancel(){this.state==="scheduled"&&(la.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const VL=t=>t.startsWith("--");function LL(t,e,n){VL(e)?t.style.setProperty(e,n):t.style[e]=n}const OL=q0(()=>window.ScrollTimeline!==void 0),BL={};function zL(t,e){const n=q0(t);return()=>BL[e]??n()}const ij=zL(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),nu=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Bk={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:nu([0,.65,.55,1]),circOut:nu([.55,0,1,.45]),backIn:nu([.31,.01,.66,-.59]),backOut:nu([.33,1.53,.69,.99])};function sj(t,e){if(t)return typeof t=="function"?ij()?Z5(t,e):"ease-out":U5(t)?nu(t):Array.isArray(t)?t.map(n=>sj(n,e)||Bk.easeOut):Bk[t]}function FL(t,e,n,{delay:r=0,duration:o=300,repeat:l=0,repeatType:c="loop",ease:h="easeOut",times:d}={},m=void 0){const g={[e]:n};d&&(g.offset=d);const y=sj(h,o);Array.isArray(y)&&(g.easing=y);const x={delay:r,duration:o,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:l+1,direction:c==="reverse"?"alternate":"normal"};return m&&(x.pseudoElement=m),t.animate(g,x)}function oj(t){return typeof t=="function"&&"applyToOptions"in t}function UL({type:t,...e}){return oj(t)&&ij()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class WL extends rv{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:n,name:r,keyframes:o,pseudoElement:l,allowFlatten:c=!1,finalKeyframe:h,onComplete:d}=e;this.isPseudoElement=!!l,this.allowFlatten=c,this.options=e,K0(typeof e.type!="string");const m=UL(e);this.animation=FL(n,r,o,m,l),m.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!l){const g=nv(o,this.options,h,this.speed);this.updateMotionValue?this.updateMotionValue(g):LL(n,r,g),this.animation.cancel()}d==null||d(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Ir(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Ir(e)}get time(){return Ir(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=fs(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&OL()?(this.animation.timeline=e,Dr):n(this)}}const aj={anticipate:O5,backInOut:L5,circInOut:z5};function $L(t){return t in aj}function HL(t){typeof t.ease=="string"&&$L(t.ease)&&(t.ease=aj[t.ease])}const og=10;class KL extends WL{constructor(e){HL(e),tj(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:o,element:l,...c}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const h=new iv({...c,autoplay:!1}),d=Math.max(og,Mn.now()-this.startTime),m=zi(0,og,d-og);n.setWithVelocity(h.sample(Math.max(0,d-m)).value,h.sample(d).value,m),h.stop()}}const zk=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(xo.test(t)||t==="0")&&!t.startsWith("url("));function qL(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function GL(t,e,n,r){const o=t[0];if(o===null)return!1;if(e==="display"||e==="visibility")return!0;const l=t[t.length-1],c=zk(o,e),h=zk(l,e);return!c||!h?!1:qL(t)||(n==="spring"||oj(n))&&r}function py(t){t.duration=0,t.type="keyframes"}const QL=new Set(["opacity","clipPath","filter","transform"]),YL=q0(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function XL(t){var g;const{motionValue:e,name:n,repeatDelay:r,repeatType:o,damping:l,type:c}=t;if(!(((g=e==null?void 0:e.owner)==null?void 0:g.current)instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:m}=e.owner.getProps();return YL()&&n&&QL.has(n)&&(n!=="transform"||!m)&&!d&&!r&&o!=="mirror"&&l!==0&&c!=="inertia"}const JL=40;class ZL extends rv{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:o=0,repeatDelay:l=0,repeatType:c="loop",keyframes:h,name:d,motionValue:m,element:g,...y}){var w;super(),this.stop=()=>{var _,T;this._animation&&(this._animation.stop(),(_=this.stopTimeline)==null||_.call(this)),(T=this.keyframeResolver)==null||T.cancel()},this.createdAt=Mn.now();const x={autoplay:e,delay:n,type:r,repeat:o,repeatDelay:l,repeatType:c,name:d,motionValue:m,element:g,...y},S=(g==null?void 0:g.KeyframeResolver)||sv;this.keyframeResolver=new S(h,(_,T,P)=>this.onKeyframesResolved(_,T,x,!P),d,m,g),(w=this.keyframeResolver)==null||w.scheduleResolve()}onKeyframesResolved(e,n,r,o){var T,P;this.keyframeResolver=void 0;const{name:l,type:c,velocity:h,delay:d,isHandoff:m,onUpdate:g}=r;this.resolvedAt=Mn.now(),GL(e,l,c,h)||((ks.instantAnimations||!d)&&(g==null||g(nv(e,r,n))),e[0]=e[e.length-1],py(r),r.repeat=0);const x={startTime:o?this.resolvedAt?this.resolvedAt-this.createdAt>JL?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},S=!m&&XL(x),w=(P=(T=x.motionValue)==null?void 0:T.owner)==null?void 0:P.current,_=S?new KL({...x,element:w}):new iv(x);_.finished.then(()=>{this.notifyFinished()}).catch(Dr),this.pendingTimeline&&(this.stopTimeline=_.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=_}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),ML()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}function lj(t,e,n,r=0,o=1){const l=Array.from(t).sort((m,g)=>m.sortNodePosition(g)).indexOf(e),c=t.size,h=(c-1)*r;return typeof n=="function"?n(l,c):o===1?l*r:h-l*r}const e8=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function t8(t){const e=e8.exec(t);if(!e)return[,];const[,n,r,o]=e;return[`--${n??r}`,o]}function cj(t,e,n=1){const[r,o]=t8(t);if(!r)return;const l=window.getComputedStyle(e).getPropertyValue(r);if(l){const c=l.trim();return I5(c)?parseFloat(c):c}return X0(o)?cj(o,e,n+1):o}const n8={type:"spring",stiffness:500,damping:25,restSpeed:10},r8=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),i8={type:"keyframes",duration:.8},s8={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},o8=(t,{keyframes:e})=>e.length>2?i8:tc.has(t)?t.startsWith("scale")?r8(e[1]):n8:s8,a8=t=>t!==null;function l8(t,{repeat:e,repeatType:n="loop"},r){const o=t.filter(a8),l=e&&n!=="loop"&&e%2===1?0:o.length-1;return o[l]}function ov(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}function c8({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:o,repeat:l,repeatType:c,repeatDelay:h,from:d,elapsed:m,...g}){return!!Object.keys(g).length}const av=(t,e,n,r={},o,l)=>c=>{const h=ov(r,t)||{},d=h.delay||r.delay||0;let{elapsed:m=0}=r;m=m-fs(d);const g={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...h,delay:-m,onUpdate:x=>{e.set(x),h.onUpdate&&h.onUpdate(x)},onComplete:()=>{c(),h.onComplete&&h.onComplete()},name:t,motionValue:e,element:l?void 0:o};c8(h)||Object.assign(g,o8(t,g)),g.duration&&(g.duration=fs(g.duration)),g.repeatDelay&&(g.repeatDelay=fs(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let y=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(py(g),g.delay===0&&(y=!0)),(ks.instantAnimations||ks.skipAnimations)&&(y=!0,py(g),g.delay=0),g.allowFlatten=!h.type&&!h.ease,y&&!l&&e.get()!==void 0){const x=l8(g.keyframes,h);if(x!==void 0){kt.update(()=>{g.onUpdate(x),g.onComplete()});return}}return h.isSync?new iv(g):new ZL(g)};function Fk(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function lv(t,e,n,r){if(typeof e=="function"){const[o,l]=Fk(r);e=e(n!==void 0?n:t.custom,o,l)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[o,l]=Fk(r);e=e(n!==void 0?n:t.custom,o,l)}return e}function jl(t,e,n){const r=t.getProps();return lv(r,e,n!==void 0?n:r.custom,t)}const uj=new Set(["width","height","top","left","right","bottom",...ec]),Uk=30,u8=t=>!isNaN(parseFloat(t));class d8{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var l;const o=Mn.now();if(this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((l=this.events.change)==null||l.notify(this.current),this.dependents))for(const c of this.dependents)c.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Mn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=u8(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new G0);const r=this.events[e].add(n);return e==="change"?()=>{r(),kt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Mn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Uk)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Uk);return P5(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function zl(t,e){return new d8(t,e)}const gy=t=>Array.isArray(t);function h8(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,zl(n))}function f8(t){return gy(t)?t[t.length-1]||0:t}function m8(t,e){const n=jl(t,e);let{transitionEnd:r={},transition:o={},...l}=n||{};l={...l,...r};for(const c in l){const h=f8(l[c]);h8(t,c,h)}}const An=t=>!!(t&&t.getVelocity);function p8(t){return!!(An(t)&&t.add)}function yy(t,e){const n=t.getValue("willChange");if(p8(n))return n.add(e);if(!n&&ks.WillChange){const r=new ks.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function cv(t){return t.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const g8="framerAppearId",dj="data-"+cv(g8);function hj(t){return t.props[dj]}function y8({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function fj(t,e,{delay:n=0,transitionOverride:r,type:o}={}){let{transition:l=t.getDefaultTransition(),transitionEnd:c,...h}=e;r&&(l=r);const d=[],m=o&&t.animationState&&t.animationState.getState()[o];for(const g in h){const y=t.getValue(g,t.latestValues[g]??null),x=h[g];if(x===void 0||m&&y8(m,g))continue;const S={delay:n,...ov(l||{},g)},w=y.get();if(w!==void 0&&!y.isAnimating&&!Array.isArray(x)&&x===w&&!S.velocity)continue;let _=!1;if(window.MotionHandoffAnimation){const P=hj(t);if(P){const V=window.MotionHandoffAnimation(P,g,kt);V!==null&&(S.startTime=V,_=!0)}}yy(t,g),y.start(av(g,y,x,t.shouldReduceMotion&&uj.has(g)?{type:!1}:S,t,_));const T=y.animation;T&&d.push(T)}return c&&Promise.all(d).then(()=>{kt.update(()=>{c&&m8(t,c)})}),d}function vy(t,e,n={}){var d;const r=jl(t,e,n.type==="exit"?(d=t.presenceContext)==null?void 0:d.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(o=n.transitionOverride);const l=r?()=>Promise.all(fj(t,r,n)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(m=0)=>{const{delayChildren:g=0,staggerChildren:y,staggerDirection:x}=o;return v8(t,e,m,g,y,x,n)}:()=>Promise.resolve(),{when:h}=o;if(h){const[m,g]=h==="beforeChildren"?[l,c]:[c,l];return m().then(()=>g())}else return Promise.all([l(),c(n.delay)])}function v8(t,e,n=0,r=0,o=0,l=1,c){const h=[];for(const d of t.variantChildren)d.notify("AnimationStart",e),h.push(vy(d,e,{...c,delay:n+(typeof r=="function"?0:r)+lj(t.variantChildren,d,r,o,l)}).then(()=>d.notify("AnimationComplete",e)));return Promise.all(h)}function x8(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const o=e.map(l=>vy(t,l,n));r=Promise.all(o)}else if(typeof e=="string")r=vy(t,e,n);else{const o=typeof e=="function"?jl(t,e,n.custom):e;r=Promise.all(fj(t,o,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const b8={test:t=>t==="auto",parse:t=>t},mj=t=>e=>e.test(t),pj=[Zl,ke,Oi,Zs,qV,KV,b8],Wk=t=>pj.find(mj(t));function k8(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||R5(t):!0}const w8=new Set(["brightness","contrast","saturate","opacity"]);function S8(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(J0)||[];if(!r)return t;const o=n.replace(r,"");let l=w8.has(e)?1:0;return r!==n&&(l*=100),e+"("+l+o+")"}const _8=/\b([a-z-]*)\(.*?\)/gu,xy={...xo,getAnimatableNone:t=>{const e=t.match(_8);return e?e.map(S8).join(" "):t}},$k={...Zl,transform:Math.round},j8={rotate:Zs,rotateX:Zs,rotateY:Zs,rotateZ:Zs,scale:wh,scaleX:wh,scaleY:wh,scaleZ:wh,skew:Zs,skewX:Zs,skewY:Zs,distance:ke,translateX:ke,translateY:ke,translateZ:ke,x:ke,y:ke,z:ke,perspective:ke,transformPerspective:ke,opacity:Eu,originX:Ak,originY:Ak,originZ:ke},uv={borderWidth:ke,borderTopWidth:ke,borderRightWidth:ke,borderBottomWidth:ke,borderLeftWidth:ke,borderRadius:ke,radius:ke,borderTopLeftRadius:ke,borderTopRightRadius:ke,borderBottomRightRadius:ke,borderBottomLeftRadius:ke,width:ke,maxWidth:ke,height:ke,maxHeight:ke,top:ke,right:ke,bottom:ke,left:ke,inset:ke,insetBlock:ke,insetBlockStart:ke,insetBlockEnd:ke,insetInline:ke,insetInlineStart:ke,insetInlineEnd:ke,padding:ke,paddingTop:ke,paddingRight:ke,paddingBottom:ke,paddingLeft:ke,paddingBlock:ke,paddingBlockStart:ke,paddingBlockEnd:ke,paddingInline:ke,paddingInlineStart:ke,paddingInlineEnd:ke,margin:ke,marginTop:ke,marginRight:ke,marginBottom:ke,marginLeft:ke,marginBlock:ke,marginBlockStart:ke,marginBlockEnd:ke,marginInline:ke,marginInlineStart:ke,marginInlineEnd:ke,backgroundPositionX:ke,backgroundPositionY:ke,...j8,zIndex:$k,fillOpacity:Eu,strokeOpacity:Eu,numOctaves:$k},E8={...uv,color:Wt,backgroundColor:Wt,outlineColor:Wt,fill:Wt,stroke:Wt,borderColor:Wt,borderTopColor:Wt,borderRightColor:Wt,borderBottomColor:Wt,borderLeftColor:Wt,filter:xy,WebkitFilter:xy},gj=t=>E8[t];function yj(t,e){let n=gj(t);return n!==xy&&(n=xo),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const T8=new Set(["auto","none","0"]);function C8(t,e,n){let r=0,o;for(;r<t.length&&!o;){const l=t[r];typeof l=="string"&&!T8.has(l)&&Tu(l).values.length&&(o=t[r]),r++}if(o&&n)for(const l of e)t[l]=yj(n,o)}class I8 extends sv{constructor(e,n,r,o,l){super(e,n,r,o,l,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let g=0;g<e.length;g++){let y=e[g];if(typeof y=="string"&&(y=y.trim(),X0(y))){const x=cj(y,n.current);x!==void 0&&(e[g]=x),g===e.length-1&&(this.finalKeyframe=y)}}if(this.resolveNoneKeyframes(),!uj.has(r)||e.length!==2)return;const[o,l]=e,c=Wk(o),h=Wk(l),d=Ik(o),m=Ik(l);if(d!==m&&io[r]){this.needsMeasurement=!0;return}if(c!==h)if(Ok(c)&&Ok(h))for(let g=0;g<e.length;g++){const y=e[g];typeof y=="string"&&(e[g]=parseFloat(y))}else io[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let o=0;o<e.length;o++)(e[o]===null||k8(e[o]))&&r.push(o);r.length&&C8(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=io[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const o=n[n.length-1];o!==void 0&&e.getValue(r,o).jump(o,!1)}measureEndState(){var h;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const o=e.getValue(n);o&&o.jump(this.measuredOrigin,!1);const l=r.length-1,c=r[l];r[l]=io[n](e.measureViewportBox(),window.getComputedStyle(e.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),(h=this.removedTransforms)!=null&&h.length&&this.removedTransforms.forEach(([d,m])=>{e.getValue(d).set(m)}),this.resolveNoneKeyframes()}}function A8(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const o=(n==null?void 0:n[t])??r.querySelectorAll(t);return o?Array.from(o):[]}return Array.from(t)}const vj=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function xj(t){return A5(t)&&"offsetHeight"in t}const{schedule:dv}=W5(queueMicrotask,!1),Zr={x:!1,y:!1};function bj(){return Zr.x||Zr.y}function R8(t){return t==="x"||t==="y"?Zr[t]?null:(Zr[t]=!0,()=>{Zr[t]=!1}):Zr.x||Zr.y?null:(Zr.x=Zr.y=!0,()=>{Zr.x=Zr.y=!1})}function kj(t,e){const n=A8(t),r=new AbortController,o={passive:!0,...e,signal:r.signal};return[n,o,()=>r.abort()]}function Hk(t){return!(t.pointerType==="touch"||bj())}function P8(t,e,n={}){const[r,o,l]=kj(t,n),c=h=>{if(!Hk(h))return;const{target:d}=h,m=e(d,h);if(typeof m!="function"||!d)return;const g=y=>{Hk(y)&&(m(y),d.removeEventListener("pointerleave",g))};d.addEventListener("pointerleave",g,o)};return r.forEach(h=>{h.addEventListener("pointerenter",c,o)}),l}const wj=(t,e)=>e?t===e?!0:wj(t,e.parentElement):!1,hv=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,D8=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Sj(t){return D8.has(t.tagName)||t.isContentEditable===!0}const Bh=new WeakSet;function Kk(t){return e=>{e.key==="Enter"&&t(e)}}function ag(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const N8=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=Kk(()=>{if(Bh.has(n))return;ag(n,"down");const o=Kk(()=>{ag(n,"up")}),l=()=>ag(n,"cancel");n.addEventListener("keyup",o,e),n.addEventListener("blur",l,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function qk(t){return hv(t)&&!bj()}function M8(t,e,n={}){const[r,o,l]=kj(t,n),c=h=>{const d=h.currentTarget;if(!qk(h))return;Bh.add(d);const m=e(d,h),g=(S,w)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",x),Bh.has(d)&&Bh.delete(d),qk(S)&&typeof m=="function"&&m(S,{success:w})},y=S=>{g(S,d===window||d===document||n.useGlobalTarget||wj(d,S.target))},x=S=>{g(S,!1)};window.addEventListener("pointerup",y,o),window.addEventListener("pointercancel",x,o)};return r.forEach(h=>{(n.useGlobalTarget?window:h).addEventListener("pointerdown",c,o),xj(h)&&(h.addEventListener("focus",m=>N8(m,o)),!Sj(h)&&!h.hasAttribute("tabindex")&&(h.tabIndex=0))}),l}function _j(t){return A5(t)&&"ownerSVGElement"in t}function V8(t){return _j(t)&&t.tagName==="svg"}const L8=[...pj,Wt,xo],O8=t=>L8.find(mj(t)),Gk=()=>({translate:0,scale:1,origin:0,originPoint:0}),ml=()=>({x:Gk(),y:Gk()}),Qk=()=>({min:0,max:0}),Yt=()=>({x:Qk(),y:Qk()}),by={current:null},jj={current:!1},B8=typeof window<"u";function z8(){if(jj.current=!0,!!B8)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>by.current=t.matches;t.addEventListener("change",e),e()}else by.current=!1}const F8=new WeakMap;function sm(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Cu(t){return typeof t=="string"||Array.isArray(t)}const fv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],mv=["initial",...fv];function om(t){return sm(t.animate)||mv.some(e=>Cu(t[e]))}function Ej(t){return!!(om(t)||t.variants)}function U8(t,e,n){for(const r in e){const o=e[r],l=n[r];if(An(o))t.addValue(r,o);else if(An(l))t.addValue(r,zl(o,{owner:t}));else if(l!==o)if(t.hasValue(r)){const c=t.getValue(r);c.liveStyle===!0?c.jump(o):c.hasAnimated||c.set(o)}else{const c=t.getStaticValue(r);t.addValue(r,zl(c!==void 0?c:o,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const Yk=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let gf={};function Tj(t){gf=t}function W8(){return gf}class $8{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:o,blockInitialAnimation:l,visualState:c},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=sv,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=Mn.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,kt.render(this.render,!1,!0))};const{latestValues:d,renderState:m}=c;this.latestValues=d,this.baseTarget={...d},this.initialValues=n.initial?{...d}:{},this.renderState=m,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=o,this.options=h,this.blockInitialAnimation=!!l,this.isControllingVariants=om(n),this.isVariantNode=Ej(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...y}=this.scrapeMotionValuesFromProps(n,{},this);for(const x in y){const S=y[x];d[x]!==void 0&&An(S)&&S.set(d[x])}}mount(e){var n;this.current=e,F8.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,o)=>this.bindToMotionValue(o,r)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(jj.current||z8(),this.shouldReduceMotion=by.current),(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),vo(this.notifyUpdate),vo(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=tc.has(e);r&&this.onBindTransform&&this.onBindTransform();const o=n.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&kt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let l;typeof window<"u"&&window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{o(),l&&l(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in gf){const n=gf[e];if(!n)continue;const{isEnabled:r,Feature:o}=n;if(!this.features[e]&&o&&r(this.props)&&(this.features[e]=new o(this)),this.features[e]){const l=this.features[e];l.isMounted?l.update():(l.mount(),l.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Yt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Yk.length;r++){const o=Yk[r];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const l="on"+o,c=e[l];c&&(this.propEventSubscriptions[o]=this.on(o,c))}this.prevMotionValues=U8(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=zl(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(I5(r)||R5(r))?r=parseFloat(r):!O8(r)&&xo.test(n)&&(r=yj(e,n)),this.setBaseTarget(e,An(r)?r.get():r)),An(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var l;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const c=lv(this.props,n,(l=this.presenceContext)==null?void 0:l.custom);c&&(r=c[e])}if(n&&r!==void 0)return r;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!An(o)?o:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new G0),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){dv.render(this.render)}}class Cj extends $8{constructor(){super(...arguments),this.KeyframeResolver=I8}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){const r=e.style;return r?r[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;An(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class Eo{constructor(e){this.isMounted=!1,this.node=e}update(){}}function Ij({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function H8({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function K8(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function lg(t){return t===void 0||t===1}function ky({scale:t,scaleX:e,scaleY:n}){return!lg(t)||!lg(e)||!lg(n)}function na(t){return ky(t)||Aj(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Aj(t){return Xk(t.x)||Xk(t.y)}function Xk(t){return t&&t!=="0%"}function yf(t,e,n){const r=t-n,o=e*r;return n+o}function Jk(t,e,n,r,o){return o!==void 0&&(t=yf(t,o,r)),yf(t,n,r)+e}function wy(t,e=0,n=1,r,o){t.min=Jk(t.min,e,n,r,o),t.max=Jk(t.max,e,n,r,o)}function Rj(t,{x:e,y:n}){wy(t.x,e.translate,e.scale,e.originPoint),wy(t.y,n.translate,n.scale,n.originPoint)}const Zk=.999999999999,ew=1.0000000000001;function q8(t,e,n,r=!1){const o=n.length;if(!o)return;e.x=e.y=1;let l,c;for(let h=0;h<o;h++){l=n[h],c=l.projectionDelta;const{visualElement:d}=l.options;d&&d.props.style&&d.props.style.display==="contents"||(r&&l.options.layoutScroll&&l.scroll&&l!==l.root&&gl(t,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,Rj(t,c)),r&&na(l.latestValues)&&gl(t,l.latestValues))}e.x<ew&&e.x>Zk&&(e.x=1),e.y<ew&&e.y>Zk&&(e.y=1)}function pl(t,e){t.min=t.min+e,t.max=t.max+e}function tw(t,e,n,r,o=.5){const l=Ct(t.min,t.max,o);wy(t,e,n,l,r)}function gl(t,e){tw(t.x,e.x,e.scaleX,e.scale,e.originX),tw(t.y,e.y,e.scaleY,e.scale,e.originY)}function Pj(t,e){return Ij(K8(t.getBoundingClientRect(),e))}function G8(t,e,n){const r=Pj(t,n),{scroll:o}=e;return o&&(pl(r.x,o.offset.x),pl(r.y,o.offset.y)),r}const Q8={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Y8=ec.length;function X8(t,e,n){let r="",o=!0;for(let l=0;l<Y8;l++){const c=ec[l],h=t[c];if(h===void 0)continue;let d=!0;if(typeof h=="number"?d=h===(c.startsWith("scale")?1:0):d=parseFloat(h)===0,!d||n){const m=vj(h,uv[c]);if(!d){o=!1;const g=Q8[c]||c;r+=`${g}(${m}) `}n&&(e[c]=m)}}return r=r.trim(),n?r=n(e,o?"":r):o&&(r="none"),r}function pv(t,e,n){const{style:r,vars:o,transformOrigin:l}=t;let c=!1,h=!1;for(const d in e){const m=e[d];if(tc.has(d)){c=!0;continue}else if(H5(d)){o[d]=m;continue}else{const g=vj(m,uv[d]);d.startsWith("origin")?(h=!0,l[d]=g):r[d]=g}}if(e.transform||(c||n?r.transform=X8(e,t.transform,n):r.transform&&(r.transform="none")),h){const{originX:d="50%",originY:m="50%",originZ:g=0}=l;r.transformOrigin=`${d} ${m} ${g}`}}function Dj(t,{style:e,vars:n},r,o){const l=t.style;let c;for(c in e)l[c]=e[c];o==null||o.applyProjectionStyles(l,r);for(c in n)l.setProperty(c,n[c])}function nw(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Qc={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ke.test(t))t=parseFloat(t);else return t;const n=nw(t,e.target.x),r=nw(t,e.target.y);return`${n}% ${r}%`}},J8={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,o=xo.parse(t);if(o.length>5)return r;const l=xo.createTransformer(t),c=typeof o[0]!="number"?1:0,h=n.x.scale*e.x,d=n.y.scale*e.y;o[0+c]/=h,o[1+c]/=d;const m=Ct(h,d,.5);return typeof o[2+c]=="number"&&(o[2+c]/=m),typeof o[3+c]=="number"&&(o[3+c]/=m),l(o)}},Sy={borderRadius:{...Qc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Qc,borderTopRightRadius:Qc,borderBottomLeftRadius:Qc,borderBottomRightRadius:Qc,boxShadow:J8};function Nj(t,{layout:e,layoutId:n}){return tc.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Sy[t]||t==="opacity")}function gv(t,e,n){var c;const r=t.style,o=e==null?void 0:e.style,l={};if(!r)return l;for(const h in r)(An(r[h])||o&&An(o[h])||Nj(h,t)||((c=n==null?void 0:n.getValue(h))==null?void 0:c.liveStyle)!==void 0)&&(l[h]=r[h]);return l}function Z8(t){return window.getComputedStyle(t)}class eO extends Cj{constructor(){super(...arguments),this.type="html",this.renderInstance=Dj}readValueFromInstance(e,n){var r;if(tc.has(n))return(r=this.projection)!=null&&r.isProjecting?uy(n):AL(e,n);{const o=Z8(e),l=(H5(n)?o.getPropertyValue(n):o[n])||0;return typeof l=="string"?l.trim():l}}measureInstanceViewportBox(e,{transformPagePoint:n}){return Pj(e,n)}build(e,n,r){pv(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return gv(e,n,r)}}const tO={offset:"stroke-dashoffset",array:"stroke-dasharray"},nO={offset:"strokeDashoffset",array:"strokeDasharray"};function rO(t,e,n=1,r=0,o=!0){t.pathLength=1;const l=o?tO:nO;t[l.offset]=ke.transform(-r);const c=ke.transform(e),h=ke.transform(n);t[l.array]=`${c} ${h}`}const iO=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function Mj(t,{attrX:e,attrY:n,attrScale:r,pathLength:o,pathSpacing:l=1,pathOffset:c=0,...h},d,m,g){if(pv(t,h,m),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:y,style:x}=t;y.transform&&(x.transform=y.transform,delete y.transform),(x.transform||y.transformOrigin)&&(x.transformOrigin=y.transformOrigin??"50% 50%",delete y.transformOrigin),x.transform&&(x.transformBox=(g==null?void 0:g.transformBox)??"fill-box",delete y.transformBox);for(const S of iO)y[S]!==void 0&&(x[S]=y[S],delete y[S]);e!==void 0&&(y.x=e),n!==void 0&&(y.y=n),r!==void 0&&(y.scale=r),o!==void 0&&rO(y,o,l,c,!1)}const Vj=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),Lj=t=>typeof t=="string"&&t.toLowerCase()==="svg";function sO(t,e,n,r){Dj(t,e,void 0,r);for(const o in e.attrs)t.setAttribute(Vj.has(o)?o:cv(o),e.attrs[o])}function Oj(t,e,n){const r=gv(t,e,n);for(const o in t)if(An(t[o])||An(e[o])){const l=ec.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;r[l]=t[o]}return r}class oO extends Cj{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Yt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(tc.has(n)){const r=gj(n);return r&&r.default||0}return n=Vj.has(n)?n:cv(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return Oj(e,n,r)}build(e,n,r){Mj(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,o){sO(e,n,r,o)}mount(e){this.isSVGTag=Lj(e.tagName),super.mount(e)}}const aO=mv.length;function Bj(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?Bj(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<aO;n++){const r=mv[n],o=t.props[r];(Cu(o)||o===!1)&&(e[r]=o)}return e}function zj(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const lO=[...fv].reverse(),cO=fv.length;function uO(t){return e=>Promise.all(e.map(({animation:n,options:r})=>x8(t,n,r)))}function dO(t){let e=uO(t),n=rw(),r=!0;const o=d=>(m,g)=>{var x;const y=jl(t,g,d==="exit"?(x=t.presenceContext)==null?void 0:x.custom:void 0);if(y){const{transition:S,transitionEnd:w,..._}=y;m={...m,..._,...w}}return m};function l(d){e=d(t)}function c(d){const{props:m}=t,g=Bj(t.parent)||{},y=[],x=new Set;let S={},w=1/0;for(let T=0;T<cO;T++){const P=lO[T],V=n[P],M=m[P]!==void 0?m[P]:g[P],F=Cu(M),K=P===d?V.isActive:null;K===!1&&(w=T);let q=M===g[P]&&M!==m[P]&&F;if(q&&r&&t.manuallyAnimateOnMount&&(q=!1),V.protectedKeys={...S},!V.isActive&&K===null||!M&&!V.prevProp||sm(M)||typeof M=="boolean")continue;const A=hO(V.prevProp,M);let E=A||P===d&&V.isActive&&!q&&F||T>w&&F,I=!1;const D=Array.isArray(M)?M:[M];let L=D.reduce(o(P),{});K===!1&&(L={});const{prevResolvedValues:z={}}=V,O={...z,...L},Re=Ce=>{E=!0,x.has(Ce)&&(I=!0,x.delete(Ce)),V.needsAnimating[Ce]=!0;const ie=t.getValue(Ce);ie&&(ie.liveStyle=!1)};for(const Ce in O){const ie=L[Ce],me=z[Ce];if(S.hasOwnProperty(Ce))continue;let ue=!1;gy(ie)&&gy(me)?ue=!zj(ie,me):ue=ie!==me,ue?ie!=null?Re(Ce):x.add(Ce):ie!==void 0&&x.has(Ce)?Re(Ce):V.protectedKeys[Ce]=!0}V.prevProp=M,V.prevResolvedValues=L,V.isActive&&(S={...S,...L}),r&&t.blockInitialAnimation&&(E=!1);const $e=q&&A;E&&(!$e||I)&&y.push(...D.map(Ce=>{const ie={type:P};if(typeof Ce=="string"&&r&&!$e&&t.manuallyAnimateOnMount&&t.parent){const{parent:me}=t,ue=jl(me,Ce);if(me.enteringChildren&&ue){const{delayChildren:$}=ue.transition||{};ie.delay=lj(me.enteringChildren,t,$)}}return{animation:Ce,options:ie}}))}if(x.size){const T={};if(typeof m.initial!="boolean"){const P=jl(t,Array.isArray(m.initial)?m.initial[0]:m.initial);P&&P.transition&&(T.transition=P.transition)}x.forEach(P=>{const V=t.getBaseTarget(P),M=t.getValue(P);M&&(M.liveStyle=!0),T[P]=V??null}),y.push({animation:T})}let _=!!y.length;return r&&(m.initial===!1||m.initial===m.animate)&&!t.manuallyAnimateOnMount&&(_=!1),r=!1,_?e(y):Promise.resolve()}function h(d,m){var y;if(n[d].isActive===m)return Promise.resolve();(y=t.variantChildren)==null||y.forEach(x=>{var S;return(S=x.animationState)==null?void 0:S.setActive(d,m)}),n[d].isActive=m;const g=c(d);for(const x in n)n[x].protectedKeys={};return g}return{animateChanges:c,setActive:h,setAnimateFunction:l,getState:()=>n,reset:()=>{n=rw()}}}function hO(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!zj(e,t):!1}function ea(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function rw(){return{animate:ea(!0),whileInView:ea(),whileHover:ea(),whileTap:ea(),whileDrag:ea(),whileFocus:ea(),exit:ea()}}function iw(t,e){t.min=e.min,t.max=e.max}function Jr(t,e){iw(t.x,e.x),iw(t.y,e.y)}function sw(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}const Fj=1e-4,fO=1-Fj,mO=1+Fj,Uj=.01,pO=0-Uj,gO=0+Uj;function Vn(t){return t.max-t.min}function yO(t,e,n){return Math.abs(t-e)<=n}function ow(t,e,n,r=.5){t.origin=r,t.originPoint=Ct(e.min,e.max,t.origin),t.scale=Vn(n)/Vn(e),t.translate=Ct(n.min,n.max,t.origin)-t.originPoint,(t.scale>=fO&&t.scale<=mO||isNaN(t.scale))&&(t.scale=1),(t.translate>=pO&&t.translate<=gO||isNaN(t.translate))&&(t.translate=0)}function fu(t,e,n,r){ow(t.x,e.x,n.x,r?r.originX:void 0),ow(t.y,e.y,n.y,r?r.originY:void 0)}function aw(t,e,n){t.min=n.min+e.min,t.max=t.min+Vn(e)}function vO(t,e,n){aw(t.x,e.x,n.x),aw(t.y,e.y,n.y)}function lw(t,e,n){t.min=e.min-n.min,t.max=t.min+Vn(e)}function vf(t,e,n){lw(t.x,e.x,n.x),lw(t.y,e.y,n.y)}function cw(t,e,n,r,o){return t-=e,t=yf(t,1/n,r),o!==void 0&&(t=yf(t,1/o,r)),t}function xO(t,e=0,n=1,r=.5,o,l=t,c=t){if(Oi.test(e)&&(e=parseFloat(e),e=Ct(c.min,c.max,e/100)-c.min),typeof e!="number")return;let h=Ct(l.min,l.max,r);t===l&&(h-=e),t.min=cw(t.min,e,n,h,o),t.max=cw(t.max,e,n,h,o)}function uw(t,e,[n,r,o],l,c){xO(t,e[n],e[r],e[o],e.scale,l,c)}const bO=["x","scaleX","originX"],kO=["y","scaleY","originY"];function dw(t,e,n,r){uw(t.x,e,bO,n?n.x:void 0,r?r.x:void 0),uw(t.y,e,kO,n?n.y:void 0,r?r.y:void 0)}function hw(t){return t.translate===0&&t.scale===1}function Wj(t){return hw(t.x)&&hw(t.y)}function fw(t,e){return t.min===e.min&&t.max===e.max}function wO(t,e){return fw(t.x,e.x)&&fw(t.y,e.y)}function mw(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function $j(t,e){return mw(t.x,e.x)&&mw(t.y,e.y)}function pw(t){return Vn(t.x)/Vn(t.y)}function gw(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}function Cr(t){return[t("x"),t("y")]}function SO(t,e,n){let r="";const o=t.x.translate/e.x,l=t.y.translate/e.y,c=(n==null?void 0:n.z)||0;if((o||l||c)&&(r=`translate3d(${o}px, ${l}px, ${c}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:m,rotate:g,rotateX:y,rotateY:x,skewX:S,skewY:w}=n;m&&(r=`perspective(${m}px) ${r}`),g&&(r+=`rotate(${g}deg) `),y&&(r+=`rotateX(${y}deg) `),x&&(r+=`rotateY(${x}deg) `),S&&(r+=`skewX(${S}deg) `),w&&(r+=`skewY(${w}deg) `)}const h=t.x.scale*e.x,d=t.y.scale*e.y;return(h!==1||d!==1)&&(r+=`scale(${h}, ${d})`),r||"none"}const Hj=["TopLeft","TopRight","BottomLeft","BottomRight"],_O=Hj.length,yw=t=>typeof t=="string"?parseFloat(t):t,vw=t=>typeof t=="number"||ke.test(t);function jO(t,e,n,r,o,l){o?(t.opacity=Ct(0,n.opacity??1,EO(r)),t.opacityExit=Ct(e.opacity??1,0,TO(r))):l&&(t.opacity=Ct(e.opacity??1,n.opacity??1,r));for(let c=0;c<_O;c++){const h=`border${Hj[c]}Radius`;let d=xw(e,h),m=xw(n,h);if(d===void 0&&m===void 0)continue;d||(d=0),m||(m=0),d===0||m===0||vw(d)===vw(m)?(t[h]=Math.max(Ct(yw(d),yw(m),r),0),(Oi.test(m)||Oi.test(d))&&(t[h]+="%")):t[h]=m}(e.rotate||n.rotate)&&(t.rotate=Ct(e.rotate||0,n.rotate||0,r))}function xw(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const EO=Kj(0,.5,B5),TO=Kj(.5,.95,Dr);function Kj(t,e,n){return r=>r<t?0:r>e?1:n(ju(t,e,r))}function CO(t,e,n){const r=An(t)?t:zl(t);return r.start(av("",r,e,n)),r.animation}function Iu(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const IO=(t,e)=>t.depth-e.depth;class AO{constructor(){this.children=[],this.isDirty=!1}add(e){$0(this.children,e),this.isDirty=!0}remove(e){H0(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(IO),this.isDirty=!1,this.children.forEach(e)}}function RO(t,e){const n=Mn.now(),r=({timestamp:o})=>{const l=o-n;l>=e&&(vo(r),t(l-e))};return kt.setup(r,!0),()=>vo(r)}function zh(t){return An(t)?t.get():t}class PO{constructor(){this.members=[]}add(e){$0(this.members,e),e.scheduleRender()}remove(e){if(H0(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(o=>e===o);if(n===0)return!1;let r;for(let o=n;o>=0;o--){const l=this.members[o];if(l.isPresent!==!1){r=l;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:o}=e.options;o===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const Fh={hasAnimatedSinceResize:!0,hasEverUpdated:!1},cg=["","X","Y","Z"],DO=1e3;let NO=0;function ug(t,e,n,r){const{latestValues:o}=e;o[t]&&(n[t]=o[t],e.setStaticValue(t,0),r&&(r[t]=0))}function qj(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=hj(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:o,layoutId:l}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",kt,!(o||l))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&qj(r)}function Gj({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:o}){return class{constructor(c={},h=e==null?void 0:e()){this.id=NO++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(LO),this.nodes.forEach(FO),this.nodes.forEach(UO),this.nodes.forEach(OO)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new AO)}addEventListener(c,h){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new G0),this.eventHandlers.get(c).add(h)}notifyListeners(c,...h){const d=this.eventHandlers.get(c);d&&d.notify(...h)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=_j(c)&&!V8(c),this.instance=c;const{layoutId:h,layout:d,visualElement:m}=this.options;if(m&&!m.current&&m.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||h)&&(this.isLayoutDirty=!0),t){let g,y=0;const x=()=>this.root.updateBlockedByResize=!1;kt.read(()=>{y=window.innerWidth}),t(c,()=>{const S=window.innerWidth;S!==y&&(y=S,this.root.updateBlockedByResize=!0,g&&g(),g=RO(x,250),Fh.hasAnimatedSinceResize&&(Fh.hasAnimatedSinceResize=!1,this.nodes.forEach(ww)))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&m&&(h||d)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:y,hasRelativeLayoutChanged:x,layout:S})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||m.getDefaultTransition()||qO,{onLayoutAnimationStart:_,onLayoutAnimationComplete:T}=m.getProps(),P=!this.targetLayout||!$j(this.targetLayout,S),V=!y&&x;if(this.options.layoutRoot||this.resumeFrom||V||y&&(P||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const M={...ov(w,"layout"),onPlay:_,onComplete:T};(m.shouldReduceMotion||this.options.layoutRoot)&&(M.delay=0,M.type=!1),this.startAnimation(M),this.setAnimationOrigin(g,V)}else y||ww(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=S})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),vo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(WO),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&qj(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const y=this.path[g];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:h,layout:d}=this.options;if(h===void 0&&!d)return;const m=this.getTransformTemplate();this.prevTransformTemplateValue=m?m(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(bw);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(kw);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(zO),this.nodes.forEach(MO),this.nodes.forEach(VO)):this.nodes.forEach(kw),this.clearAllSnapshots();const h=Mn.now();gn.delta=zi(0,1e3/60,h-gn.timestamp),gn.timestamp=h,gn.isProcessing=!0,tg.update.process(gn),tg.preRender.process(gn),tg.render.process(gn),gn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,dv.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(BO),this.sharedNodes.forEach($O)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,kt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){kt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Vn(this.snapshot.measuredBox.x)&&!Vn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Yt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(h=!1),h&&this.instance){const d=r(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:d,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!o)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!Wj(this.projectionDelta),d=this.getTransformTemplate(),m=d?d(this.latestValues,""):void 0,g=m!==this.prevTransformTemplateValue;c&&this.instance&&(h||na(this.latestValues)||g)&&(o(this.instance,m),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const h=this.measurePageBox();let d=this.removeElementScroll(h);return c&&(d=this.removeTransform(d)),GO(d),{animationId:this.root.animationId,measuredBox:h,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var m;const{visualElement:c}=this.options;if(!c)return Yt();const h=c.measureViewportBox();if(!(((m=this.scroll)==null?void 0:m.wasRoot)||this.path.some(QO))){const{scroll:g}=this.root;g&&(pl(h.x,g.offset.x),pl(h.y,g.offset.y))}return h}removeElementScroll(c){var d;const h=Yt();if(Jr(h,c),(d=this.scroll)!=null&&d.wasRoot)return h;for(let m=0;m<this.path.length;m++){const g=this.path[m],{scroll:y,options:x}=g;g!==this.root&&y&&x.layoutScroll&&(y.wasRoot&&Jr(h,c),pl(h.x,y.offset.x),pl(h.y,y.offset.y))}return h}applyTransform(c,h=!1){const d=Yt();Jr(d,c);for(let m=0;m<this.path.length;m++){const g=this.path[m];!h&&g.options.layoutScroll&&g.scroll&&g!==g.root&&gl(d,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),na(g.latestValues)&&gl(d,g.latestValues)}return na(this.latestValues)&&gl(d,this.latestValues),d}removeTransform(c){const h=Yt();Jr(h,c);for(let d=0;d<this.path.length;d++){const m=this.path[d];if(!m.instance||!na(m.latestValues))continue;ky(m.latestValues)&&m.updateSnapshot();const g=Yt(),y=m.measurePageBox();Jr(g,y),dw(h,m.latestValues,m.snapshot?m.snapshot.layoutBox:void 0,g)}return na(this.latestValues)&&dw(h,this.latestValues),h}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==gn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){var S;const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==h;if(!(c||d&&this.isSharedProjectionDirty||this.isProjectionDirty||(S=this.parent)!=null&&S.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:y}=this.options;if(!this.layout||!(g||y))return;this.resolvedRelativeTargetAt=gn.timestamp;const x=this.getClosestProjectingParent();x&&this.linkedParentVersion!==x.layoutVersion&&!x.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(x&&x.layout?this.createRelativeTarget(x,this.layout.layoutBox,x.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Yt(),this.targetWithTransforms=Yt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),vO(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Jr(this.target,this.layout.layoutBox),Rj(this.target,this.targetDelta)):Jr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?this.createRelativeTarget(x,this.target,x.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||ky(this.parent.latestValues)||Aj(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(c,h,d){this.relativeParent=c,this.linkedParentVersion=c.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Yt(),this.relativeTargetOrigin=Yt(),vf(this.relativeTargetOrigin,h,d),Jr(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var w;const c=this.getLead(),h=!!this.resumingFrom||this!==c;let d=!0;if((this.isProjectionDirty||(w=this.parent)!=null&&w.isProjectionDirty)&&(d=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===gn.timestamp&&(d=!1),d)return;const{layout:m,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||g))return;Jr(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,x=this.treeScale.y;q8(this.layoutCorrected,this.treeScale,this.path,h),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=Yt());const{target:S}=c;if(!S){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(sw(this.prevProjectionDelta.x,this.projectionDelta.x),sw(this.prevProjectionDelta.y,this.projectionDelta.y)),fu(this.projectionDelta,this.layoutCorrected,S,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==x||!gw(this.projectionDelta.x,this.prevProjectionDelta.x)||!gw(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",S))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){var h;if((h=this.options.visualElement)==null||h.scheduleRender(),c){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ml(),this.projectionDelta=ml(),this.projectionDeltaWithTransform=ml()}setAnimationOrigin(c,h=!1){const d=this.snapshot,m=d?d.latestValues:{},g={...this.latestValues},y=ml();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const x=Yt(),S=d?d.source:void 0,w=this.layout?this.layout.source:void 0,_=S!==w,T=this.getStack(),P=!T||T.members.length<=1,V=!!(_&&!P&&this.options.crossfade===!0&&!this.path.some(KO));this.animationProgress=0;let M;this.mixTargetDelta=F=>{const K=F/1e3;Sw(y.x,c.x,K),Sw(y.y,c.y,K),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(vf(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),HO(this.relativeTarget,this.relativeTargetOrigin,x,K),M&&wO(this.relativeTarget,M)&&(this.isProjectionDirty=!1),M||(M=Yt()),Jr(M,this.relativeTarget)),_&&(this.animationValues=g,jO(g,m,this.latestValues,K,V,P)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=K},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){var h,d,m;this.notifyListeners("animationStart"),(h=this.currentAnimation)==null||h.stop(),(m=(d=this.resumingFrom)==null?void 0:d.currentAnimation)==null||m.stop(),this.pendingAnimation&&(vo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=kt.update(()=>{Fh.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=zl(0)),this.currentAnimation=CO(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:g=>{this.mixTargetDelta(g),c.onUpdate&&c.onUpdate(g)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(DO),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:h,target:d,layout:m,latestValues:g}=c;if(!(!h||!d||!m)){if(this!==c&&this.layout&&m&&Qj(this.options.animationType,this.layout.layoutBox,m.layoutBox)){d=this.target||Yt();const y=Vn(this.layout.layoutBox.x);d.x.min=c.target.x.min,d.x.max=d.x.min+y;const x=Vn(this.layout.layoutBox.y);d.y.min=c.target.y.min,d.y.max=d.y.min+x}Jr(h,d),gl(h,g),fu(this.projectionDeltaWithTransform,this.layoutCorrected,h,g)}}registerSharedNode(c,h){this.sharedNodes.has(c)||this.sharedNodes.set(c,new PO),this.sharedNodes.get(c).add(h);const m=h.options.initialPromotionConfig;h.promote({transition:m?m.transition:void 0,preserveFollowOpacity:m&&m.shouldPreserveFollowOpacity?m.shouldPreserveFollowOpacity(h):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){var h;const{layoutId:c}=this.options;return c?((h=this.getStack())==null?void 0:h.lead)||this:this}getPrevLead(){var h;const{layoutId:c}=this.options;return c?(h=this.getStack())==null?void 0:h.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:h,preserveFollowOpacity:d}={}){const m=this.getStack();m&&m.promote(this,d),c&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let h=!1;const{latestValues:d}=c;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(h=!0),!h)return;const m={};d.z&&ug("z",c,m,this.animationValues);for(let g=0;g<cg.length;g++)ug(`rotate${cg[g]}`,c,m,this.animationValues),ug(`skew${cg[g]}`,c,m,this.animationValues);c.render();for(const g in m)c.setStaticValue(g,m[g]),this.animationValues&&(this.animationValues[g]=m[g]);c.scheduleRender()}applyProjectionStyles(c,h){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=zh(h==null?void 0:h.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none";return}const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=zh(h==null?void 0:h.pointerEvents)||""),this.hasProjected&&!na(this.latestValues)&&(c.transform=d?d({},""):"none",this.hasProjected=!1);return}c.visibility="";const g=m.animationValues||m.latestValues;this.applyTransformsToTarget();let y=SO(this.projectionDeltaWithTransform,this.treeScale,g);d&&(y=d(g,y)),c.transform=y;const{x,y:S}=this.projectionDelta;c.transformOrigin=`${x.origin*100}% ${S.origin*100}% 0`,m.animationValues?c.opacity=m===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:c.opacity=m===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const w in Sy){if(g[w]===void 0)continue;const{correct:_,applyTo:T,isCSSVariable:P}=Sy[w],V=y==="none"?g[w]:_(g[w],m);if(T){const M=T.length;for(let F=0;F<M;F++)c[T[F]]=V}else P?this.options.visualElement.renderState.vars[w]=V:c[w]=V}this.options.layoutId&&(c.pointerEvents=m===this?zh(h==null?void 0:h.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>{var h;return(h=c.currentAnimation)==null?void 0:h.stop()}),this.root.nodes.forEach(bw),this.root.sharedNodes.clear()}}}function MO(t){t.updateLayout()}function VO(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:o}=t.layout,{animationType:l}=t.options,c=e.source!==t.layout.source;l==="size"?Cr(y=>{const x=c?e.measuredBox[y]:e.layoutBox[y],S=Vn(x);x.min=r[y].min,x.max=x.min+S}):Qj(l,e.layoutBox,r)&&Cr(y=>{const x=c?e.measuredBox[y]:e.layoutBox[y],S=Vn(r[y]);x.max=x.min+S,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[y].max=t.relativeTarget[y].min+S)});const h=ml();fu(h,r,e.layoutBox);const d=ml();c?fu(d,t.applyTransform(o,!0),e.measuredBox):fu(d,r,e.layoutBox);const m=!Wj(h);let g=!1;if(!t.resumeFrom){const y=t.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:x,layout:S}=y;if(x&&S){const w=Yt();vf(w,e.layoutBox,x.layoutBox);const _=Yt();vf(_,r,S.layoutBox),$j(w,_)||(g=!0),y.options.layoutRoot&&(t.relativeTarget=_,t.relativeTargetOrigin=w,t.relativeParent=y)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:d,layoutDelta:h,hasLayoutChanged:m,hasRelativeLayoutChanged:g})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function LO(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function OO(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function BO(t){t.clearSnapshot()}function bw(t){t.clearMeasurements()}function kw(t){t.isLayoutDirty=!1}function zO(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function ww(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function FO(t){t.resolveTargetDelta()}function UO(t){t.calcProjection()}function WO(t){t.resetSkewAndRotation()}function $O(t){t.removeLeadSnapshot()}function Sw(t,e,n){t.translate=Ct(e.translate,0,n),t.scale=Ct(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function _w(t,e,n,r){t.min=Ct(e.min,n.min,r),t.max=Ct(e.max,n.max,r)}function HO(t,e,n,r){_w(t.x,e.x,n.x,r),_w(t.y,e.y,n.y,r)}function KO(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const qO={duration:.45,ease:[.4,0,.1,1]},jw=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Ew=jw("applewebkit/")&&!jw("chrome/")?Math.round:Dr;function Tw(t){t.min=Ew(t.min),t.max=Ew(t.max)}function GO(t){Tw(t.x),Tw(t.y)}function Qj(t,e,n){return t==="position"||t==="preserve-aspect"&&!yO(pw(e),pw(n),.2)}function QO(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const YO=Gj({attachResizeListener:(t,e)=>Iu(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),dg={current:void 0},Yj=Gj({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!dg.current){const t=new YO({});t.mount(window),t.setOptions({layoutScroll:!0}),dg.current=t}return dg.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),yv=C.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function Cw(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function XO(...t){return e=>{let n=!1;const r=t.map(o=>{const l=Cw(o,e);return!n&&typeof l=="function"&&(n=!0),l});if(n)return()=>{for(let o=0;o<r.length;o++){const l=r[o];typeof l=="function"?l():Cw(t[o],null)}}}}function JO(...t){return C.useCallback(XO(...t),t)}class ZO extends C.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,o=xj(r)&&r.offsetWidth||0,l=this.props.sizeRef.current;l.height=n.offsetHeight||0,l.width=n.offsetWidth||0,l.top=n.offsetTop,l.left=n.offsetLeft,l.right=o-l.width-l.left}return null}componentDidUpdate(){}render(){return this.props.children}}function eB({children:t,isPresent:e,anchorX:n,root:r}){var g;const o=C.useId(),l=C.useRef(null),c=C.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=C.useContext(yv),d=((g=t.props)==null?void 0:g.ref)??(t==null?void 0:t.ref),m=JO(l,d);return C.useInsertionEffect(()=>{const{width:y,height:x,top:S,left:w,right:_}=c.current;if(e||!l.current||!y||!x)return;const T=n==="left"?`left: ${w}`:`right: ${_}`;l.current.dataset.motionPopId=o;const P=document.createElement("style");h&&(P.nonce=h);const V=r??document.head;return V.appendChild(P),P.sheet&&P.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${y}px !important;
            height: ${x}px !important;
            ${T}px !important;
            top: ${S}px !important;
          }
        `),()=>{V.contains(P)&&V.removeChild(P)}},[e]),i.jsx(ZO,{isPresent:e,childRef:l,sizeRef:c,children:C.cloneElement(t,{ref:m})})}const tB=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:o,presenceAffectsLayout:l,mode:c,anchorX:h,root:d})=>{const m=W0(nB),g=C.useId();let y=!0,x=C.useMemo(()=>(y=!1,{id:g,initial:e,isPresent:n,custom:o,onExitComplete:S=>{m.set(S,!0);for(const w of m.values())if(!w)return;r&&r()},register:S=>(m.set(S,!1),()=>m.delete(S))}),[n,m,r]);return l&&y&&(x={...x}),C.useMemo(()=>{m.forEach((S,w)=>m.set(w,!1))},[n]),C.useEffect(()=>{!n&&!m.size&&r&&r()},[n]),c==="popLayout"&&(t=i.jsx(eB,{isPresent:n,anchorX:h,root:d,children:t})),i.jsx(im.Provider,{value:x,children:t})};function nB(){return new Map}function Xj(t=!0){const e=C.useContext(im);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:o}=e,l=C.useId();C.useEffect(()=>{if(t)return o(l)},[t]);const c=C.useCallback(()=>t&&r&&r(l),[l,r,t]);return!n&&r?[!1,c]:[!0]}const Sh=t=>t.key||"";function Iw(t){const e=[];return C.Children.forEach(t,n=>{C.isValidElement(n)&&e.push(n)}),e}const El=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:o=!0,mode:l="sync",propagate:c=!1,anchorX:h="left",root:d})=>{const[m,g]=Xj(c),y=C.useMemo(()=>Iw(t),[t]),x=c&&!m?[]:y.map(Sh),S=C.useRef(!0),w=C.useRef(y),_=W0(()=>new Map),T=C.useRef(new Set),[P,V]=C.useState(y),[M,F]=C.useState(y);C5(()=>{S.current=!1,w.current=y;for(let A=0;A<M.length;A++){const E=Sh(M[A]);x.includes(E)?(_.delete(E),T.current.delete(E)):_.get(E)!==!0&&_.set(E,!1)}},[M,x.length,x.join("-")]);const K=[];if(y!==P){let A=[...y];for(let E=0;E<M.length;E++){const I=M[E],D=Sh(I);x.includes(D)||(A.splice(E,0,I),K.push(I))}return l==="wait"&&K.length&&(A=K),F(Iw(A)),V(y),null}const{forceRender:q}=C.useContext(U0);return i.jsx(i.Fragment,{children:M.map(A=>{const E=Sh(A),I=c&&!m?!1:y===M||x.includes(E),D=()=>{if(T.current.has(E))return;if(T.current.add(E),_.has(E))_.set(E,!0);else return;let L=!0;_.forEach(z=>{z||(L=!1)}),L&&(q==null||q(),F(w.current),c&&(g==null||g()),r&&r())};return i.jsx(tB,{isPresent:I,initial:!S.current||n?void 0:!1,custom:e,presenceAffectsLayout:o,mode:l,root:d,onExitComplete:I?void 0:D,anchorX:h,children:A},E)})})},Jj=C.createContext({strict:!1}),Aw={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let Rw=!1;function rB(){if(Rw)return;const t={};for(const e in Aw)t[e]={isEnabled:n=>Aw[e].some(r=>!!n[r])};Tj(t),Rw=!0}function Zj(){return rB(),W8()}function iB(t){const e=Zj();for(const n in t)e[n]={...e[n],...t[n]};Tj(e)}const sB=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function xf(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||sB.has(t)}let eE=t=>!xf(t);function oB(t){typeof t=="function"&&(eE=e=>e.startsWith("on")?!xf(e):t(e))}try{oB(require("@emotion/is-prop-valid").default)}catch{}function aB(t,e,n){const r={};for(const o in t)o==="values"&&typeof t.values=="object"||(eE(o)||n===!0&&xf(o)||!e&&!xf(o)||t.draggable&&o.startsWith("onDrag"))&&(r[o]=t[o]);return r}const am=C.createContext({});function lB(t,e){if(om(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Cu(n)?n:void 0,animate:Cu(r)?r:void 0}}return t.inherit!==!1?e:{}}function cB(t){const{initial:e,animate:n}=lB(t,C.useContext(am));return C.useMemo(()=>({initial:e,animate:n}),[Pw(e),Pw(n)])}function Pw(t){return Array.isArray(t)?t.join(" "):t}const vv=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function tE(t,e,n){for(const r in e)!An(e[r])&&!Nj(r,n)&&(t[r]=e[r])}function uB({transformTemplate:t},e){return C.useMemo(()=>{const n=vv();return pv(n,e,t),Object.assign({},n.vars,n.style)},[e])}function dB(t,e){const n=t.style||{},r={};return tE(r,n,t),Object.assign(r,uB(t,e)),r}function hB(t,e){const n={},r=dB(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const nE=()=>({...vv(),attrs:{}});function fB(t,e,n,r){const o=C.useMemo(()=>{const l=nE();return Mj(l,e,Lj(r),t.transformTemplate,t.style),{...l.attrs,style:{...l.style}}},[e]);if(t.style){const l={};tE(l,t.style,t),o.style={...l,...o.style}}return o}const mB=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function xv(t){return typeof t!="string"||t.includes("-")?!1:!!(mB.indexOf(t)>-1||/[A-Z]/u.test(t))}function pB(t,e,n,{latestValues:r},o,l=!1,c){const d=(c??xv(t)?fB:hB)(e,r,o,t),m=aB(e,typeof t=="string",l),g=t!==C.Fragment?{...m,...d,ref:n}:{},{children:y}=e,x=C.useMemo(()=>An(y)?y.get():y,[y]);return C.createElement(t,{...g,children:x})}function gB({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,o){return{latestValues:yB(n,r,o,t),renderState:e()}}function yB(t,e,n,r){const o={},l=r(t,{});for(const x in l)o[x]=zh(l[x]);let{initial:c,animate:h}=t;const d=om(t),m=Ej(t);e&&m&&!d&&t.inherit!==!1&&(c===void 0&&(c=e.initial),h===void 0&&(h=e.animate));let g=n?n.initial===!1:!1;g=g||c===!1;const y=g?h:c;if(y&&typeof y!="boolean"&&!sm(y)){const x=Array.isArray(y)?y:[y];for(let S=0;S<x.length;S++){const w=lv(t,x[S]);if(w){const{transitionEnd:_,transition:T,...P}=w;for(const V in P){let M=P[V];if(Array.isArray(M)){const F=g?M.length-1:0;M=M[F]}M!==null&&(o[V]=M)}for(const V in _)o[V]=_[V]}}}return o}const rE=t=>(e,n)=>{const r=C.useContext(am),o=C.useContext(im),l=()=>gB(t,e,r,o);return n?l():W0(l)},vB=rE({scrapeMotionValuesFromProps:gv,createRenderState:vv}),xB=rE({scrapeMotionValuesFromProps:Oj,createRenderState:nE}),bB=Symbol.for("motionComponentSymbol");function kB(t,e,n){const r=C.useRef(n);C.useInsertionEffect(()=>{r.current=n});const o=C.useRef(null);return C.useCallback(l=>{var h;l&&((h=t.onMount)==null||h.call(t,l)),e&&(l?e.mount(l):e.unmount());const c=r.current;if(typeof c=="function")if(l){const d=c(l);typeof d=="function"&&(o.current=d)}else o.current?(o.current(),o.current=null):c(l);else c&&(c.current=l)},[e])}const iE=C.createContext({});function ru(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function wB(t,e,n,r,o,l){var T,P;const{visualElement:c}=C.useContext(am),h=C.useContext(Jj),d=C.useContext(im),m=C.useContext(yv).reducedMotion,g=C.useRef(null);r=r||h.renderer,!g.current&&r&&(g.current=r(t,{visualState:e,parent:c,props:n,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:m,isSVG:l}));const y=g.current,x=C.useContext(iE);y&&!y.projection&&o&&(y.type==="html"||y.type==="svg")&&SB(g.current,n,o,x);const S=C.useRef(!1);C.useInsertionEffect(()=>{y&&S.current&&y.update(n,d)});const w=n[dj],_=C.useRef(!!w&&!((T=window.MotionHandoffIsComplete)!=null&&T.call(window,w))&&((P=window.MotionHasOptimisedAnimation)==null?void 0:P.call(window,w)));return C5(()=>{y&&(S.current=!0,window.MotionIsMounted=!0,y.updateFeatures(),y.scheduleRenderMicrotask(),_.current&&y.animationState&&y.animationState.animateChanges())}),C.useEffect(()=>{y&&(!_.current&&y.animationState&&y.animationState.animateChanges(),_.current&&(queueMicrotask(()=>{var V;(V=window.MotionHandoffMarkAsComplete)==null||V.call(window,w)}),_.current=!1),y.enteringChildren=void 0)}),y}function SB(t,e,n,r){const{layoutId:o,layout:l,drag:c,dragConstraints:h,layoutScroll:d,layoutRoot:m,layoutCrossfade:g}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:sE(t.parent)),t.projection.setOptions({layoutId:o,layout:l,alwaysMeasureLayout:!!c||h&&ru(h),visualElement:t,animationType:typeof l=="string"?l:"both",initialPromotionConfig:r,crossfade:g,layoutScroll:d,layoutRoot:m})}function sE(t){if(t)return t.options.allowProjection!==!1?t.projection:sE(t.parent)}function hg(t,{forwardMotionProps:e=!1,type:n}={},r,o){r&&iB(r);const l=n?n==="svg":xv(t),c=l?xB:vB;function h(m,g){let y;const x={...C.useContext(yv),...m,layoutId:_B(m)},{isStatic:S}=x,w=cB(m),_=c(m,S);if(!S&&T5){jB();const T=EB(x);y=T.MeasureLayout,w.visualElement=wB(t,_,x,o,T.ProjectionNode,l)}return i.jsxs(am.Provider,{value:w,children:[y&&w.visualElement?i.jsx(y,{visualElement:w.visualElement,...x}):null,pB(t,m,kB(_,w.visualElement,g),_,S,e,l)]})}h.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const d=C.forwardRef(h);return d[bB]=t,d}function _B({layoutId:t}){const e=C.useContext(U0).id;return e&&t!==void 0?e+"-"+t:t}function jB(t,e){C.useContext(Jj).strict}function EB(t){const e=Zj(),{drag:n,layout:r}=e;if(!n&&!r)return{};const o={...n,...r};return{MeasureLayout:n!=null&&n.isEnabled(t)||r!=null&&r.isEnabled(t)?o.MeasureLayout:void 0,ProjectionNode:o.ProjectionNode}}function TB(t,e){if(typeof Proxy>"u")return hg;const n=new Map,r=(l,c)=>hg(l,c,t,e),o=(l,c)=>r(l,c);return new Proxy(o,{get:(l,c)=>c==="create"?r:(n.has(c)||n.set(c,hg(c,void 0,t,e)),n.get(c))})}const CB=(t,e)=>e.isSVG??xv(t)?new oO(e):new eO(e,{allowProjection:t!==C.Fragment});class IB extends Eo{constructor(e){super(e),e.animationState||(e.animationState=dO(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();sm(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let AB=0;class RB extends Eo{constructor(){super(...arguments),this.id=AB++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const o=this.node.animationState.setActive("exit",!e);n&&!e&&o.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const PB={animation:{Feature:IB},exit:{Feature:RB}};function Zu(t){return{point:{x:t.pageX,y:t.pageY}}}const DB=t=>e=>hv(e)&&t(e,Zu(e));function mu(t,e,n,r){return Iu(t,e,DB(n),r)}const oE=({current:t})=>t?t.ownerDocument.defaultView:null,Dw=(t,e)=>Math.abs(t-e);function NB(t,e){const n=Dw(t.x,e.x),r=Dw(t.y,e.y);return Math.sqrt(n**2+r**2)}const Nw=new Set(["auto","scroll"]);class aE{constructor(e,n,{transformPagePoint:r,contextWindow:o=window,dragSnapToOrigin:l=!1,distanceThreshold:c=3,element:h}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=S=>{this.handleScroll(S.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=mg(this.lastMoveEventInfo,this.history),w=this.startEvent!==null,_=NB(S.offset,{x:0,y:0})>=this.distanceThreshold;if(!w&&!_)return;const{point:T}=S,{timestamp:P}=gn;this.history.push({...T,timestamp:P});const{onStart:V,onMove:M}=this.handlers;w||(V&&V(this.lastMoveEvent,S),this.startEvent=this.lastMoveEvent),M&&M(this.lastMoveEvent,S)},this.handlePointerMove=(S,w)=>{this.lastMoveEvent=S,this.lastMoveEventInfo=fg(w,this.transformPagePoint),kt.update(this.updatePoint,!0)},this.handlePointerUp=(S,w)=>{this.end();const{onEnd:_,onSessionEnd:T,resumeAnimation:P}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&P&&P(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const V=mg(S.type==="pointercancel"?this.lastMoveEventInfo:fg(w,this.transformPagePoint),this.history);this.startEvent&&_&&_(S,V),T&&T(S,V)},!hv(e))return;this.dragSnapToOrigin=l,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=c,this.contextWindow=o||window;const d=Zu(e),m=fg(d,this.transformPagePoint),{point:g}=m,{timestamp:y}=gn;this.history=[{...g,timestamp:y}];const{onSessionStart:x}=n;x&&x(e,mg(m,this.history)),this.removeListeners=Yu(mu(this.contextWindow,"pointermove",this.handlePointerMove),mu(this.contextWindow,"pointerup",this.handlePointerUp),mu(this.contextWindow,"pointercancel",this.handlePointerUp)),h&&this.startScrollTracking(h)}startScrollTracking(e){let n=e.parentElement;for(;n;){const r=getComputedStyle(n);(Nw.has(r.overflowX)||Nw.has(r.overflowY))&&this.scrollPositions.set(n,{x:n.scrollLeft,y:n.scrollTop}),n=n.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const n=this.scrollPositions.get(e);if(!n)return;const r=e===window,o=r?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},l={x:o.x-n.x,y:o.y-n.y};l.x===0&&l.y===0||(r?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=l.x,this.lastMoveEventInfo.point.y+=l.y):this.history.length>0&&(this.history[0].x-=l.x,this.history[0].y-=l.y),this.scrollPositions.set(e,o),kt.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),vo(this.updatePoint)}}function fg(t,e){return e?{point:e(t.point)}:t}function Mw(t,e){return{x:t.x-e.x,y:t.y-e.y}}function mg({point:t},e){return{point:t,delta:Mw(t,lE(e)),offset:Mw(t,MB(e)),velocity:VB(e,.1)}}function MB(t){return t[0]}function lE(t){return t[t.length-1]}function VB(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const o=lE(t);for(;n>=0&&(r=t[n],!(o.timestamp-r.timestamp>fs(e)));)n--;if(!r)return{x:0,y:0};const l=Ir(o.timestamp-r.timestamp);if(l===0)return{x:0,y:0};const c={x:(o.x-r.x)/l,y:(o.y-r.y)/l};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function LB(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Ct(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Ct(n,t,r.max):Math.min(t,n)),t}function Vw(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function OB(t,{top:e,left:n,bottom:r,right:o}){return{x:Vw(t.x,n,o),y:Vw(t.y,e,r)}}function Lw(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function BB(t,e){return{x:Lw(t.x,e.x),y:Lw(t.y,e.y)}}function zB(t,e){let n=.5;const r=Vn(t),o=Vn(e);return o>r?n=ju(e.min,e.max-r,t.min):r>o&&(n=ju(t.min,t.max-o,e.min)),zi(0,1,n)}function FB(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const _y=.35;function UB(t=_y){return t===!1?t=0:t===!0&&(t=_y),{x:Ow(t,"left","right"),y:Ow(t,"top","bottom")}}function Ow(t,e,n){return{min:Bw(t,e),max:Bw(t,n)}}function Bw(t,e){return typeof t=="number"?t:t[e]||0}const WB=new WeakMap;class $B{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Yt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:o}=this.visualElement;if(o&&o.isPresent===!1)return;const l=y=>{n?(this.stopAnimation(),this.snapToCursor(Zu(y).point)):this.pauseAnimation()},c=(y,x)=>{this.stopAnimation();const{drag:S,dragPropagation:w,onDragStart:_}=this.getProps();if(S&&!w&&(this.openDragLock&&this.openDragLock(),this.openDragLock=R8(S),!this.openDragLock))return;this.latestPointerEvent=y,this.latestPanInfo=x,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Cr(P=>{let V=this.getAxisMotionValue(P).get()||0;if(Oi.test(V)){const{projection:M}=this.visualElement;if(M&&M.layout){const F=M.layout.layoutBox[P];F&&(V=Vn(F)*(parseFloat(V)/100))}}this.originPoint[P]=V}),_&&kt.postRender(()=>_(y,x)),yy(this.visualElement,"transform");const{animationState:T}=this.visualElement;T&&T.setActive("whileDrag",!0)},h=(y,x)=>{this.latestPointerEvent=y,this.latestPanInfo=x;const{dragPropagation:S,dragDirectionLock:w,onDirectionLock:_,onDrag:T}=this.getProps();if(!S&&!this.openDragLock)return;const{offset:P}=x;if(w&&this.currentDirection===null){this.currentDirection=HB(P),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",x.point,P),this.updateAxis("y",x.point,P),this.visualElement.render(),T&&T(y,x)},d=(y,x)=>{this.latestPointerEvent=y,this.latestPanInfo=x,this.stop(y,x),this.latestPointerEvent=null,this.latestPanInfo=null},m=()=>Cr(y=>{var x;return this.getAnimationState(y)==="paused"&&((x=this.getAxisMotionValue(y).animation)==null?void 0:x.play())}),{dragSnapToOrigin:g}=this.getProps();this.panSession=new aE(e,{onSessionStart:l,onStart:c,onMove:h,onSessionEnd:d,resumeAnimation:m},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,distanceThreshold:r,contextWindow:oE(this.visualElement),element:this.visualElement.current})}stop(e,n){const r=e||this.latestPointerEvent,o=n||this.latestPanInfo,l=this.isDragging;if(this.cancel(),!l||!o||!r)return;const{velocity:c}=o;this.startAnimation(c);const{onDragEnd:h}=this.getProps();h&&kt.postRender(()=>h(r,o))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:o}=this.getProps();if(!r||!_h(e,o,this.currentDirection))return;const l=this.getAxisMotionValue(e);let c=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(c=LB(c,this.constraints[e],this.elastic[e])),l.set(c)}resolveConstraints(){var l;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(l=this.visualElement.projection)==null?void 0:l.layout,o=this.constraints;e&&ru(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=OB(r.layoutBox,e):this.constraints=!1,this.elastic=UB(n),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Cr(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=FB(r.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!ru(e))return!1;const r=e.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const l=G8(r,o.root,this.visualElement.getTransformPagePoint());let c=BB(o.layout.layoutBox,l);if(n){const h=n(H8(c));this.hasMutatedConstraints=!!h,h&&(c=Ij(h))}return c}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:o,dragTransition:l,dragSnapToOrigin:c,onDragTransitionEnd:h}=this.getProps(),d=this.constraints||{},m=Cr(g=>{if(!_h(g,n,this.currentDirection))return;let y=d&&d[g]||{};c&&(y={min:0,max:0});const x=o?200:1e6,S=o?40:1e7,w={type:"inertia",velocity:r?e[g]:0,bounceStiffness:x,bounceDamping:S,timeConstant:750,restDelta:1,restSpeed:10,...l,...y};return this.startAxisValueAnimation(g,w)});return Promise.all(m).then(h)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return yy(this.visualElement,e),r.start(av(e,r,0,n,this.visualElement,!1))}stopAnimation(){Cr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Cr(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),o=r[n];return o||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Cr(n=>{const{drag:r}=this.getProps();if(!_h(n,r,this.currentDirection))return;const{projection:o}=this.visualElement,l=this.getAxisMotionValue(n);if(o&&o.layout){const{min:c,max:h}=o.layout.layoutBox[n],d=l.get()||0;l.set(e[n]-Ct(c,h,.5)+d)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!ru(n)||!r||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};Cr(c=>{const h=this.getAxisMotionValue(c);if(h&&this.constraints!==!1){const d=h.get();o[c]=zB({min:d,max:d},this.constraints[c])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Cr(c=>{if(!_h(c,e,null))return;const h=this.getAxisMotionValue(c),{min:d,max:m}=this.constraints[c];h.set(Ct(d,m,o[c]))})}addListeners(){if(!this.visualElement.current)return;WB.set(this.visualElement,this);const e=this.visualElement.current,n=mu(e,"pointerdown",d=>{const{drag:m,dragListener:g=!0}=this.getProps();m&&g&&!Sj(d.target)&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();ru(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,l=o.addEventListener("measure",r);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),kt.read(r);const c=Iu(window,"resize",()=>this.scalePositionWithinConstraints()),h=o.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:m})=>{this.isDragging&&m&&(Cr(g=>{const y=this.getAxisMotionValue(g);y&&(this.originPoint[g]+=d[g].translate,y.set(y.get()+d[g].translate))}),this.visualElement.render())}));return()=>{c(),n(),l(),h&&h()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:o=!1,dragConstraints:l=!1,dragElastic:c=_y,dragMomentum:h=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:o,dragConstraints:l,dragElastic:c,dragMomentum:h}}}function _h(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function HB(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class KB extends Eo{constructor(e){super(e),this.removeGroupControls=Dr,this.removeListeners=Dr,this.controls=new $B(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Dr}update(){const{dragControls:e}=this.node.getProps(),{dragControls:n}=this.node.prevProps||{};e!==n&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners()}}const zw=t=>(e,n)=>{t&&kt.postRender(()=>t(e,n))};class qB extends Eo{constructor(){super(...arguments),this.removePointerDownListener=Dr}onPointerDown(e){this.session=new aE(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:oE(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:o}=this.node.getProps();return{onSessionStart:zw(e),onStart:zw(n),onMove:r,onEnd:(l,c)=>{delete this.session,o&&kt.postRender(()=>o(l,c))}}}mount(){this.removePointerDownListener=mu(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let pg=!1;class GB extends C.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:o}=this.props,{projection:l}=e;l&&(n.group&&n.group.add(l),r&&r.register&&o&&r.register(l),pg&&l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),Fh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:o,isPresent:l}=this.props,{projection:c}=r;return c&&(c.isPresent=l,pg=!0,o||e.layoutDependency!==n||n===void 0||e.isPresent!==l?c.willUpdate():this.safeToRemove(),e.isPresent!==l&&(l?c.promote():c.relegate()||kt.postRender(()=>{const h=c.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),dv.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:o}=e;pg=!0,o&&(o.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(o),r&&r.deregister&&r.deregister(o))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function cE(t){const[e,n]=Xj(),r=C.useContext(U0);return i.jsx(GB,{...t,layoutGroup:r,switchLayoutGroup:C.useContext(iE),isPresent:e,safeToRemove:n})}const QB={pan:{Feature:qB},drag:{Feature:KB,ProjectionNode:Yj,MeasureLayout:cE}};function Fw(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const o="onHover"+n,l=r[o];l&&kt.postRender(()=>l(e,Zu(e)))}class YB extends Eo{mount(){const{current:e}=this.node;e&&(this.unmount=P8(e,(n,r)=>(Fw(this.node,r,"Start"),o=>Fw(this.node,o,"End"))))}unmount(){}}class XB extends Eo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Yu(Iu(this.node.current,"focus",()=>this.onFocus()),Iu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Uw(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const o="onTap"+(n==="End"?"":n),l=r[o];l&&kt.postRender(()=>l(e,Zu(e)))}class JB extends Eo{mount(){const{current:e}=this.node;e&&(this.unmount=M8(e,(n,r)=>(Uw(this.node,r,"Start"),(o,{success:l})=>Uw(this.node,o,l?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const jy=new WeakMap,gg=new WeakMap,ZB=t=>{const e=jy.get(t.target);e&&e(t)},e9=t=>{t.forEach(ZB)};function t9({root:t,...e}){const n=t||document;gg.has(n)||gg.set(n,{});const r=gg.get(n),o=JSON.stringify(e);return r[o]||(r[o]=new IntersectionObserver(e9,{root:t,...e})),r[o]}function n9(t,e,n){const r=t9(e);return jy.set(t,n),r.observe(t),()=>{jy.delete(t),r.unobserve(t)}}const r9={some:0,all:1};class i9 extends Eo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:o="some",once:l}=e,c={root:n?n.current:void 0,rootMargin:r,threshold:typeof o=="number"?o:r9[o]},h=d=>{const{isIntersecting:m}=d;if(this.isInView===m||(this.isInView=m,l&&!m&&this.hasEnteredView))return;m&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",m);const{onViewportEnter:g,onViewportLeave:y}=this.node.getProps(),x=m?g:y;x&&x(d)};return n9(this.node.current,c,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(s9(e,n))&&this.startObserver()}unmount(){}}function s9({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const o9={inView:{Feature:i9},tap:{Feature:JB},focus:{Feature:XB},hover:{Feature:YB}},a9={layout:{ProjectionNode:Yj,MeasureLayout:cE}},l9={...PB,...o9,...QB,...a9},ce=TB(l9,CB);function Zt(){var w;const t=Or(),e=bo(),{user:n,profile:r,isAuthenticated:o,isAdmin:l,isBusiness:c}=gr(),[h,d]=C.useState(!1),[m,g]=C.useState(!1),y=[{to:"/",label:"Home"},{to:"/map",label:"Directory"},{to:"/hunts",label:"Explore"},{to:"/demo",label:"See Demo"},{to:"/about",label:"How It Works"},{to:"/businesses",label:"For Businesses"}],x=async()=>{await c5(),g(!1),e("/")},S=_=>t.pathname===_;return i.jsxs("header",{style:{background:"var(--kb-white)",borderBottom:"1px solid var(--kb-gray-200)",position:"sticky",top:0,zIndex:100},children:[i.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 1rem",display:"flex",alignItems:"center",justifyContent:"space-between",height:"70px"},children:[i.jsxs(fe,{to:o?"/map":"/",style:{display:"flex",alignItems:"center",gap:"0.5rem",textDecoration:"none"},children:[i.jsx("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, var(--kb-navy) 0%, var(--kb-navy-light) 100%)",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--kb-gold)",fontFamily:"var(--font-display)",fontWeight:"700",fontSize:"0.9rem"},children:"OK"}),i.jsxs("div",{children:[i.jsx("div",{style:{fontFamily:"var(--font-display)",fontWeight:"600",color:"var(--kb-navy)",fontSize:"1.1rem",lineHeight:1.1},children:"OK Kinderhook"}),i.jsx("div",{style:{fontSize:"0.65rem",color:"var(--kb-gray-500)",textTransform:"uppercase",letterSpacing:"0.1em"},children:"Shop Local"})]})]}),i.jsx("nav",{style:{display:"flex",alignItems:"center",gap:"2rem"},className:"desktop-nav",children:y.map(_=>i.jsx(fe,{to:_.to,style:{color:S(_.to)?"var(--kb-navy)":"var(--kb-gray-500)",fontWeight:S(_.to)?"600":"500",fontSize:"0.95rem",transition:"color 0.2s",borderBottom:S(_.to)?"2px solid var(--kb-gold)":"2px solid transparent",paddingBottom:"4px"},children:_.label},_.to))}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},className:"desktop-nav",children:[o?i.jsx(i.Fragment,{children:i.jsxs("div",{style:{position:"relative"},children:[i.jsxs("button",{onClick:()=>g(!m),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"var(--kb-gray-100)",border:"none",borderRadius:"8px",cursor:"pointer",color:"var(--kb-navy)",fontWeight:"500"},children:[i.jsx(_l,{size:18}),(r==null?void 0:r.displayName)||((w=n.email)==null?void 0:w.split("@")[0])]}),m&&i.jsxs("div",{style:{position:"absolute",right:0,top:"100%",marginTop:"0.5rem",background:"white",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",minWidth:"180px",zIndex:200,overflow:"hidden"},children:[i.jsxs(fe,{to:"/card",onClick:()=>g(!1),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",color:"var(--kb-gold-dark)",textDecoration:"none",borderBottom:"1px solid var(--kb-gray-100)",fontWeight:"600",background:"rgba(201, 162, 39, 0.1)"},children:[i.jsx(lf,{size:16})," My OK Card"]}),i.jsxs(fe,{to:"/profile",onClick:()=>g(!1),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",color:"var(--kb-gray-700)",textDecoration:"none",borderBottom:"1px solid var(--kb-gray-100)"},children:[i.jsx(_l,{size:16})," My Profile"]}),c&&i.jsxs(fe,{to:"/business/dashboard",onClick:()=>g(!1),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",color:"#2563eb",textDecoration:"none",borderBottom:"1px solid var(--kb-gray-100)"},children:[i.jsx(It,{size:16})," Business Dashboard"]}),l&&i.jsxs(fe,{to:"/admin/dashboard",onClick:()=>g(!1),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",color:"#dc2626",textDecoration:"none",borderBottom:"1px solid var(--kb-gray-100)"},children:[i.jsx(df,{size:16})," Admin Portal"]}),i.jsxs("button",{onClick:x,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",color:"var(--kb-gray-600)",background:"none",border:"none",cursor:"pointer",width:"100%",textAlign:"left"},children:[i.jsx(ny,{size:16})," Sign Out"]})]})]})}):i.jsx(i.Fragment,{children:i.jsxs(fe,{to:"/login",className:"btn btn-secondary",style:{padding:"0.5rem 1rem",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(Ol,{size:16})," Sign In"]})}),i.jsx(fe,{to:"/exchange",className:"btn btn-gold",style:{padding:"0.5rem 1rem",fontSize:"0.9rem"},children:"Get Kinderbucks"})]}),i.jsx("button",{onClick:()=>d(!h),className:"mobile-menu-btn",style:{display:"none",background:"none",border:"none",padding:"0.5rem",cursor:"pointer"},children:i.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:h?i.jsx("path",{d:"M6 6l12 12M6 18L18 6"}):i.jsx("path",{d:"M3 12h18M3 6h18M3 18h18"})})})]}),h&&i.jsxs("div",{className:"mobile-menu",style:{background:"var(--kb-white)",borderTop:"1px solid var(--kb-gray-200)",padding:"1rem"},children:[y.map(_=>i.jsx(fe,{to:_.to,onClick:()=>d(!1),style:{display:"block",padding:"0.75rem 0",color:S(_.to)?"var(--kb-navy)":"var(--kb-gray-700)",fontWeight:S(_.to)?"600":"400",borderBottom:"1px solid var(--kb-gray-100)"},children:_.label},_.to)),i.jsxs("div",{style:{marginTop:"1rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:[o?i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{padding:"0.75rem",background:"var(--kb-gray-50)",borderRadius:"8px",marginBottom:"0.5rem"},children:[i.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:(r==null?void 0:r.displayName)||n.email}),i.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:(r==null?void 0:r.role)||"member"})]}),i.jsxs(fe,{to:"/profile",onClick:()=>d(!1),className:"btn btn-secondary",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[i.jsx(_l,{size:16})," My Profile"]}),c&&i.jsxs(fe,{to:"/business/dashboard",onClick:()=>d(!1),className:"btn",style:{background:"#2563eb",color:"white",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[i.jsx(It,{size:16})," Business Dashboard"]}),l&&i.jsxs(fe,{to:"/admin/dashboard",onClick:()=>d(!1),className:"btn",style:{background:"#dc2626",color:"white",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[i.jsx(df,{size:16})," Admin Portal"]}),i.jsxs("button",{onClick:()=>{x(),d(!1)},className:"btn btn-secondary",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[i.jsx(ny,{size:16})," Sign Out"]})]}):i.jsxs(fe,{to:"/login",onClick:()=>d(!1),className:"btn btn-secondary",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[i.jsx(Ol,{size:16})," Sign In"]}),i.jsx(fe,{to:"/exchange",onClick:()=>d(!1),className:"btn btn-gold",children:"Get Kinderbucks"})]})]}),i.jsx("style",{children:`
        @media (max-width: 768px) {
          .desktop-nav {
            display: none !important;
          }
          .mobile-menu-btn {
            display: block !important;
          }
        }
      `})]})}function en(){return i.jsxs("footer",{style:{background:"var(--kb-navy)",color:"var(--kb-white)",padding:"3rem 1rem 2rem",marginTop:"auto"},children:[i.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"2rem"},children:[i.jsxs("div",{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[i.jsx("div",{style:{width:"36px",height:"36px",background:"var(--kb-gold)",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--kb-navy)",fontFamily:"var(--font-display)",fontWeight:"700",fontSize:"0.75rem"},children:"OK"}),i.jsx("span",{style:{fontFamily:"var(--font-display)",fontWeight:"600",fontSize:"1.1rem"},children:"OK Kinderhook"})]}),i.jsx("p",{style:{color:"var(--kb-gray-300)",fontSize:"0.9rem",lineHeight:1.6},children:"Columbia County's oldest village. Your newest reason to shop local."}),i.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.8rem",marginTop:"1rem"},children:"Est. 2026"})]}),i.jsxs("div",{children:[i.jsx("h4",{style:{color:"var(--kb-gold)",marginBottom:"1rem",fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Quick Links"}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[i.jsx(fe,{to:"/demo",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"See Demo"}),i.jsx(fe,{to:"/about",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"How It Works"}),i.jsx(fe,{to:"/benefits",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"Member Benefits"}),i.jsx(fe,{to:"/exchange",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"Get Kinderbucks"}),i.jsx(fe,{to:"/businesses",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"For Businesses"})]})]}),i.jsxs("div",{children:[i.jsx("h4",{style:{color:"var(--kb-gold)",marginBottom:"1rem",fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"For Members"}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[i.jsx(fe,{to:"/account",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"My Account"}),i.jsx(fe,{to:"/profile",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"My Profile"}),i.jsx(fe,{to:"/scan/KB-0001",style:{color:"var(--kb-gray-300)",fontSize:"0.9rem"},children:"Verify Currency"})]})]}),i.jsxs("div",{children:[i.jsx("h4",{style:{color:"var(--kb-gold)",marginBottom:"1rem",fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Contact"}),i.jsxs("p",{style:{color:"var(--kb-gray-300)",fontSize:"0.9rem",lineHeight:1.8},children:["Village of Kinderhook",i.jsx("br",{}),"Columbia County, NY"]})]})]}),i.jsxs("div",{style:{maxWidth:"1200px",margin:"2rem auto 0",paddingTop:"2rem",borderTop:"1px solid var(--kb-navy-light)",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"1rem"},children:[i.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.8rem"},children:" 2026 OK Kinderhook. A Harmonic Systems project."}),i.jsx("div",{style:{display:"flex",gap:"1.5rem"},children:i.jsx(fe,{to:"/admin/dashboard",style:{color:"var(--kb-gray-500)",fontSize:"0.8rem"},children:"Admin"})})]})]})}function c9(){const{isAuthenticated:t,loading:e}=gr(),n=bo();if(C.useEffect(()=>{!e&&t&&n("/card",{replace:!0})},[t,e,n]),e)return null;const r=[{icon:lf,title:"OK Membership",subtitle:"Discounts at Local Businesses",description:"Show your OK Member card at any participating business for exclusive discounts. The more you visit, the better your rewards.",color:"#c9a227",link:"/login",cta:"Become a Member"},{icon:Pr,title:"Check-ins & Badges",subtitle:"Earn Rewards for Exploring",description:"Scan QR codes at businesses and landmarks to track visits, earn category badges, and complete scavenger hunts around the village.",color:"#27ae60",link:"/hunts",cta:"Explore Now"},{icon:ii,title:"Kinderbucks",subtitle:"Local Currency That Stays Local",description:"Exchange USD for Kinderbucks and spend them at any participating business. Every Kinderbuck keeps dollars circulating in our village.",color:"#2563eb",link:"/exchange",cta:"Get Kinderbucks"}],o=[{value:"19+",label:"Local Businesses",icon:It},{value:"100%",label:"Stays in Kinderhook",icon:x5},{value:"25%",label:"Max Member Bonus",icon:bs}],l=["The Aviary","Morningbird Cafe","Saisonnier","Broad Street Bagel","Brooklyn Pizzeria","Isola Wine Bar","OK Pantry","Kinderhook Books","Samascott's","The School Gallery","Old Dutch Inn","Village Yoga","Kinderhook Bottle Shop","Walsh Dentistry","Feed and Seed","Muse Aesthetics"];return i.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[i.jsx(Zt,{}),i.jsxs("section",{style:{background:"linear-gradient(135deg, var(--kb-navy) 0%, #1a3a5c 100%)",color:"var(--kb-white)",padding:"4rem 1rem 5rem",textAlign:"center",position:"relative",overflow:"hidden"},children:[i.jsx("div",{style:{position:"absolute",top:"-50%",right:"-20%",width:"600px",height:"600px",background:"radial-gradient(circle, rgba(201,162,39,0.1) 0%, transparent 70%)",borderRadius:"50%"}}),i.jsxs(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},style:{maxWidth:"800px",margin:"0 auto",position:"relative"},children:[i.jsx("div",{style:{display:"inline-block",background:"rgba(201, 162, 39, 0.2)",color:"var(--kb-gold)",padding:"0.5rem 1.25rem",borderRadius:"100px",fontSize:"0.9rem",fontWeight:"600",marginBottom:"1.5rem",border:"1px solid rgba(201, 162, 39, 0.3)"},children:"Columbia County's Oldest Village"}),i.jsxs("h1",{style:{fontFamily:"var(--font-display)",fontSize:"clamp(2.5rem, 6vw, 4rem)",fontWeight:"700",marginBottom:"1rem",lineHeight:1.1},children:[i.jsx("span",{style:{color:"var(--kb-gold)"},children:"OK"})," Kinderhook"]}),i.jsx("p",{style:{fontSize:"clamp(1.1rem, 2.5vw, 1.4rem)",color:"var(--kb-gray-300)",marginBottom:"0.5rem",fontWeight:"500"},children:"Shop Local. Earn Rewards."}),i.jsx("p",{style:{fontSize:"1.05rem",color:"var(--kb-gray-400)",marginBottom:"2.5rem",maxWidth:"550px",margin:"0 auto 2.5rem"},children:"A village loyalty program that rewards you for supporting local businesses while keeping dollars circulating in our community."}),i.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[i.jsx(fe,{to:"/login",className:"btn btn-gold",style:{padding:"1rem 2rem",fontSize:"1.1rem"},children:"Join as OK Member"}),i.jsx(fe,{to:"/businesses",className:"btn",style:{padding:"1rem 2rem",fontSize:"1.1rem",background:"transparent",border:"2px solid rgba(255,255,255,0.3)",color:"white"},children:"I'm a Business"})]})]})]}),i.jsx("section",{style:{background:"var(--kb-gold)",padding:"1.5rem 1rem"},children:i.jsx("div",{style:{maxWidth:"800px",margin:"0 auto",display:"flex",justifyContent:"space-around",flexWrap:"wrap",gap:"1.5rem"},children:o.map((c,h)=>i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[i.jsx(c.icon,{size:24,color:"var(--kb-navy)"}),i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"var(--kb-navy)",lineHeight:1},children:c.value}),i.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-navy)",opacity:.8},children:c.label})]})]},h))})}),i.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:i.jsxs("div",{style:{maxWidth:"700px",margin:"0 auto",textAlign:"center"},children:[i.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"What is OK Kinderhook?"}),i.jsx("p",{style:{fontSize:"1.15rem",color:"var(--kb-gray-600)",lineHeight:1.7},children:"OK Kinderhook is a village-wide loyalty program connecting residents with local businesses. Earn discounts, collect badges, and use local currency that keeps money circulating in our community."})]})}),i.jsx("section",{style:{padding:"4rem 1rem",background:"white"},children:i.jsxs("div",{style:{maxWidth:"1100px",margin:"0 auto"},children:[i.jsxs("div",{style:{textAlign:"center",marginBottom:"3rem"},children:[i.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"Three Ways to Participate"}),i.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"Choose one, two, or all three - it's up to you!"})]}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"2rem"},children:r.map((c,h)=>i.jsxs(ce.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{delay:h*.15},viewport:{once:!0},style:{background:"var(--kb-white)",borderRadius:"16px",padding:"2rem",border:"1px solid var(--kb-gray-200)",boxShadow:"0 4px 20px rgba(0,0,0,0.05)",display:"flex",flexDirection:"column"},children:[i.jsx("div",{style:{width:"64px",height:"64px",background:`${c.color}15`,borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1.5rem"},children:i.jsx(c.icon,{size:32,color:c.color,strokeWidth:1.5})}),i.jsx("h3",{style:{color:c.color,marginBottom:"0.25rem",fontSize:"1.3rem"},children:c.title}),i.jsx("div",{style:{color:"var(--kb-navy)",fontWeight:"600",marginBottom:"1rem",fontSize:"1.05rem"},children:c.subtitle}),i.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem",lineHeight:1.6,flex:1},children:c.description}),i.jsxs(fe,{to:c.link,style:{display:"flex",alignItems:"center",gap:"0.5rem",color:c.color,fontWeight:"600",marginTop:"1.5rem",textDecoration:"none"},children:[c.cta,i.jsx(em,{size:18})]})]},h))})]})}),i.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:i.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[i.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[i.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"Participating Businesses"}),i.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"Earn rewards at these local Kinderhook establishments"})]}),i.jsx("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",gap:"0.75rem"},children:l.map((c,h)=>i.jsx(ce.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},transition:{delay:h*.03},viewport:{once:!0},style:{background:"white",borderRadius:"8px",padding:"0.75rem 1.25rem",fontSize:"0.9rem",color:"var(--kb-navy)",fontWeight:"500",border:"1px solid var(--kb-gray-200)"},children:c},h))}),i.jsx("div",{style:{textAlign:"center",marginTop:"2rem"},children:i.jsx(fe,{to:"/map",className:"btn btn-primary",children:"View All Businesses on Map"})})]})}),i.jsx("section",{style:{padding:"4rem 1rem",background:"linear-gradient(135deg, var(--kb-navy) 0%, #1a3a5c 100%)",color:"white"},children:i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto",textAlign:"center"},children:[i.jsx(ln,{size:40,style:{marginBottom:"1rem",opacity:.9}}),i.jsx("h2",{style:{marginBottom:"0.75rem"},children:"Are You a Local Business?"}),i.jsx("p",{style:{opacity:.9,marginBottom:"2rem",maxWidth:"500px",margin:"0 auto 2rem"},children:"Join OK Kinderhook to attract loyal customers, increase foot traffic, and keep dollars in our village economy."}),i.jsx(fe,{to:"/businesses",className:"btn btn-gold",style:{padding:"1rem 2rem"},children:"Learn About Business Benefits"})]})}),i.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-gold)",textAlign:"center"},children:i.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto"},children:[i.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.75rem"},children:"Ready to Support Local?"}),i.jsx("p",{style:{color:"var(--kb-navy)",opacity:.8,marginBottom:"2rem"},children:"Join OK Kinderhook today and start earning rewards while strengthening our village."}),i.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[i.jsx(fe,{to:"/login",className:"btn",style:{background:"var(--kb-navy)",color:"white",padding:"1rem 2rem"},children:"Become an OK Member"}),i.jsx(fe,{to:"/demo",className:"btn",style:{background:"transparent",color:"var(--kb-navy)",border:"2px solid var(--kb-navy)",padding:"1rem 2rem"},children:"See How It Works"})]})]})}),i.jsx(en,{})]})}const Ww={customer:{id:"customer",title:"For Customers",subtitle:"Start supporting local in minutes",Icon:nm,color:"var(--kb-green)",minCommitment:"Start with just $10"},business:{id:"business",title:"For Business Owners",subtitle:"Accept Kinderbucks and grow your customer base",Icon:It,color:"var(--kb-navy)",minCommitment:"No upfront cost to join"},association:{id:"association",title:"For the Business Association",subtitle:"Strengthen the village economy together",Icon:ty,color:"var(--kb-gold-dark)",minCommitment:"Community-driven program"}},$w=[{number:1,title:"Get Your First Kinderbucks",description:"Visit any exchange location with USD. Start with as little as $10.",visual:"exchange",details:["Visit Village Hall, OK Pantry, or The Aviary","Exchange any amount ($10, $20, $50, $100)","New members get 10% bonus automatically","Receive physical Kinderbucks bills"],tip:"First-time? You'll get $11 in Kinderbucks for every $10 USD!"},{number:2,title:"Spend at Local Businesses",description:"Use Kinderbucks like cash at 19+ participating village businesses.",visual:"spend",details:["Accepted at restaurants, shops, and services","Works just like regular currency","Businesses give change in Kinderbucks when possible","100% of your money stays in Kinderhook"],tip:"Check the business directory to plan your local shopping route!"},{number:3,title:"Check In When You Visit",description:"Scan QR codes at businesses to track your visits and earn rewards.",visual:"checkin",details:["Look for the Kinderbucks QR code at each business","Scan with your phone camera","Each unique business counts toward your tier","One check-in per business per hour"],tip:"You don't need an app - just scan and go!"},{number:4,title:"Level Up Your Membership",description:"Visit more businesses to unlock better exchange rates.",visual:"tiers",details:["Curious (1+ businesses): 10% bonus","Hooked (5+ businesses): 15% bonus","Line & Sinker (10+ businesses): 20% bonus","Village Patron (15+ businesses): 25% bonus"],tip:"At 25% bonus, $100 USD gets you $125 in Kinderbucks!"}],u9=[{number:1,title:"Register Your Business",description:"Join the program with no upfront costs or monthly fees.",visual:"register",details:["Contact the Business Association to register","Receive your unique business QR code","Get listed in the Kinderbucks directory","No fees, no contracts, no risk"],tip:"Registration takes less than 10 minutes!"},{number:2,title:"Accept Kinderbucks Payments",description:"Accept Kinderbucks just like you accept cash.",visual:"accept",details:["Kinderbucks bills have QR codes for verification","Scan any bill to verify authenticity","Make change in Kinderbucks when possible","Train staff in minutes"],tip:"Verification is instant - just scan the QR code on any bill."},{number:3,title:"Build Customer Loyalty",description:"Customers check in at your business, driving repeat visits.",visual:"loyalty",details:["Display your QR code prominently","Customers scan to record their visit","Each check-in helps customers level up","Higher tiers = more valuable customers"],tip:"Village Patrons have visited 15+ businesses - they're your most loyal customers!"},{number:4,title:"Redeem or Recirculate",description:"Use Kinderbucks at other businesses or redeem for USD.",visual:"redeem",details:["Spend at other participating businesses","Pay suppliers who accept Kinderbucks","Redeem for USD at exchange locations (1:1)","Keep money circulating locally"],tip:"Most businesses find it easier to spend than redeem - the money keeps moving!"}],d9=[{number:1,title:"Program Overview",description:"A local currency that strengthens the village economy.",visual:"overview",details:["Kinderbucks is a complementary currency for Kinderhook","Backed 1:1 by USD in a dedicated account","Bonus rates funded by interest and community investment","QR verification prevents counterfeiting"],tip:"Complementary currencies have been used successfully in communities worldwide."},{number:2,title:"Economic Impact",description:"Money that circulates locally multiplies its impact.",visual:"impact",details:["Studies show local currency circulates 3-4x more than USD","$10,000 in circulation = $30,000-40,000 in local economic activity",'Encourages "buy local" behavior',"Builds connections between businesses and residents"],tip:"Every Kinderbuck spent is guaranteed to stay in the village."},{number:3,title:"Member Engagement",description:"Tier system drives exploration of local businesses.",visual:"engagement",details:["Gamification encourages visiting new businesses","Tier bonuses reward loyal community members","Check-in data shows foot traffic patterns","Members become ambassadors for local spending"],tip:"The average member discovers 3 new businesses they didn't know about."},{number:4,title:"Administration & Growth",description:"Simple management with room to scale.",visual:"admin",details:["Digital dashboard tracks circulation and usage","New businesses join with minimal onboarding","Seasonal promotions drive engagement","Expand to neighboring communities over time"],tip:"The program is designed to be self-sustaining once established."}];function h9({step:t,isActive:e,onClick:n}){return i.jsx(ce.div,{onClick:n,whileHover:{scale:1.02},whileTap:{scale:.98},style:{background:e?"var(--kb-navy)":"var(--kb-white)",color:e?"var(--kb-white)":"var(--kb-gray-700)",borderRadius:"12px",padding:"1.25rem",cursor:"pointer",border:e?"none":"1px solid var(--kb-gray-200)",transition:"all 0.2s"},children:i.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[i.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"50%",background:e?"var(--kb-gold)":"var(--kb-gray-100)",color:e?"var(--kb-navy)":"var(--kb-gray-500)",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"700",fontSize:"1rem",flexShrink:0},children:t.number}),i.jsxs("div",{children:[i.jsx("h4",{style:{margin:0,fontSize:"1rem",fontWeight:"600",marginBottom:"0.25rem"},children:t.title}),i.jsx("p",{style:{margin:0,fontSize:"0.85rem",opacity:.8},children:t.description})]})]})})}function f9({step:t,audienceColor:e}){return i.jsxs(ce.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},style:{background:"var(--kb-white)",borderRadius:"16px",padding:"2rem",height:"100%",display:"flex",flexDirection:"column"},children:[i.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",background:`${e}15`,color:e,padding:"0.5rem 1rem",borderRadius:"100px",fontSize:"0.8rem",fontWeight:"600",marginBottom:"1rem",alignSelf:"flex-start"},children:["STEP ",t.number]}),i.jsx("h3",{style:{color:"var(--kb-navy)",fontSize:"1.5rem",marginBottom:"0.5rem"},children:t.title}),i.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem",fontSize:"1.05rem"},children:t.description}),i.jsxs("div",{style:{background:"var(--kb-cream)",borderRadius:"12px",padding:"1.5rem",marginBottom:"1.5rem",flex:1},children:[i.jsx("h4",{style:{color:"var(--kb-navy)",fontSize:"0.9rem",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"1rem"},children:"What This Looks Like"}),i.jsx("ul",{style:{margin:0,padding:0,listStyle:"none"},children:t.details.map((n,r)=>i.jsxs("li",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",marginBottom:"0.75rem",color:"var(--kb-gray-700)"},children:[i.jsx("span",{style:{color:"var(--kb-green)",fontWeight:"600"},children:""}),n]},r))})]}),i.jsxs("div",{style:{background:"linear-gradient(135deg, var(--kb-gold) 0%, #d4af37 100%)",borderRadius:"12px",padding:"1rem 1.25rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[i.jsx("span",{style:{fontSize:"1.5rem"},children:""}),i.jsxs("div",{children:[i.jsx("div",{style:{fontWeight:"600",color:"var(--kb-navy)",fontSize:"0.8rem",textTransform:"uppercase",marginBottom:"0.25rem"},children:"Pro Tip"}),i.jsx("div",{style:{color:"var(--kb-navy)",fontSize:"0.95rem"},children:t.tip})]})]})]},t.number)}function m9({audience:t,steps:e}){const[n,r]=C.useState(0);return i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1.5fr",gap:"2rem",minHeight:"500px"},className:"demo-flow-grid",children:[i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:e.map((o,l)=>i.jsx(h9,{step:o,isActive:n===l,onClick:()=>r(l)},o.number))}),i.jsx(El,{mode:"wait",children:i.jsx(f9,{step:e[n],audienceColor:t.color},n)})]})}function jh({icon:t,title:e,description:n}){return i.jsxs("div",{style:{background:"var(--kb-white)",borderRadius:"12px",padding:"1.5rem",textAlign:"center",border:"1px solid var(--kb-gray-200)"},children:[i.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.75rem"},children:t}),i.jsx("h4",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:e}),i.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem",margin:0},children:n})]})}function p9(){const[t,e]=C.useState("customer"),n=Ww[t],r=()=>{switch(t){case"customer":return $w;case"business":return u9;case"association":return d9;default:return $w}},l=(()=>{switch(t){case"customer":return{to:"/exchange",text:"Get Your First Kinderbucks",secondary:"/businesses",secondaryText:"Browse Businesses"};case"business":return{to:"/businesses",text:"Register Your Business",secondary:"/about",secondaryText:"Learn More"};case"association":return{to:"/about",text:"Full Program Details",secondary:"/admin/dashboard",secondaryText:"View Dashboard"};default:return{to:"/exchange",text:"Get Started"}}})();return i.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[i.jsx(Zt,{}),i.jsx("section",{style:{background:"linear-gradient(135deg, var(--kb-navy) 0%, var(--kb-navy-light) 100%)",color:"var(--kb-white)",padding:"3rem 1rem",textAlign:"center"},children:i.jsxs(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsx("div",{className:"badge badge-gold",style:{marginBottom:"1rem"},children:"Interactive Demo"}),i.jsx("h1",{style:{fontFamily:"var(--font-display)",fontSize:"clamp(2rem, 4vw, 2.75rem)",fontWeight:"700",marginBottom:"1rem"},children:"See How Kinderbucks Works"}),i.jsx("p",{style:{fontSize:"1.15rem",color:"var(--kb-gray-300)",maxWidth:"600px",margin:"0 auto"},children:"Choose your perspective below to see a step-by-step walkthrough of the Kinderbucks program."})]})}),i.jsx("section",{style:{background:"var(--kb-white)",padding:"2rem 1rem",borderBottom:"1px solid var(--kb-gray-200)"},children:i.jsx("div",{style:{maxWidth:"900px",margin:"0 auto"},children:i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem"},children:Object.values(Ww).map(c=>{const h=c.Icon;return i.jsxs(ce.button,{onClick:()=>e(c.id),whileHover:{scale:1.02},whileTap:{scale:.98},style:{background:t===c.id?`linear-gradient(135deg, ${c.color} 0%, ${c.color}dd 100%)`:"var(--kb-cream)",color:t===c.id?"var(--kb-white)":"var(--kb-gray-700)",border:t===c.id?"none":"2px solid var(--kb-gray-200)",borderRadius:"12px",padding:"1.5rem",cursor:"pointer",textAlign:"left",transition:"all 0.2s"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[i.jsx(h,{size:28,strokeWidth:1.5}),i.jsx("span",{style:{fontWeight:"600",fontSize:"1.1rem"},children:c.title})]}),i.jsx("p",{style:{margin:0,fontSize:"0.9rem",opacity:.85},children:c.subtitle}),i.jsx("div",{style:{marginTop:"0.75rem",fontSize:"0.8rem",fontWeight:"600",opacity:t===c.id?1:.7},children:c.minCommitment})]},c.id)})})})}),i.jsx("section",{style:{background:"var(--kb-cream)",padding:"3rem 1rem",flex:1},children:i.jsx("div",{style:{maxWidth:"1100px",margin:"0 auto"},children:i.jsx(El,{mode:"wait",children:i.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:i.jsx(m9,{audience:n,steps:r()})},t)})})}),i.jsx("section",{style:{background:"var(--kb-white)",padding:"3rem 1rem",borderTop:"1px solid var(--kb-gray-200)"},children:i.jsxs("div",{style:{maxWidth:"900px",margin:"0 auto"},children:[i.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[i.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"Minimal Commitment, Maximum Impact"}),i.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"Kinderbucks is designed to be easy to try and rewarding to use"})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem"},children:[i.jsx(jh,{icon:"",title:"Start with $10",description:"No minimum exchange amount. Try it with pocket change."}),i.jsx(jh,{icon:"",title:"No Fees",description:"No signup fees, no monthly costs, no hidden charges."}),i.jsx(jh,{icon:"",title:"Full Refund",description:"Businesses can redeem Kinderbucks for USD 1:1 anytime."}),i.jsx(jh,{icon:"",title:"Instant Setup",description:"Customers start immediately. Businesses onboard in minutes."})]})]})}),i.jsx("section",{style:{background:n.color,padding:"3rem 1rem",textAlign:"center"},children:i.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto"},children:[i.jsx("h2",{style:{color:"var(--kb-white)",marginBottom:"0.5rem"},children:"Ready to Get Started?"}),i.jsxs("p",{style:{color:"rgba(255,255,255,0.85)",marginBottom:"2rem"},children:[t==="customer"&&"Join hundreds of Kinderhook residents supporting local businesses.",t==="business"&&"Join 19 local businesses already accepting Kinderbucks.",t==="association"&&"See the full details of how the program operates."]}),i.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[i.jsx(fe,{to:l.to,className:"btn",style:{background:"var(--kb-white)",color:n.color,padding:"1rem 2rem",fontSize:"1.1rem",fontWeight:"600"},children:l.text}),l.secondary&&i.jsx(fe,{to:l.secondary,className:"btn btn-outline",style:{borderColor:"var(--kb-white)",color:"var(--kb-white)",padding:"1rem 2rem",fontSize:"1.1rem"},children:l.secondaryText})]})]})}),i.jsx(en,{}),i.jsx("style",{children:`
        @media (max-width: 900px) {
          .demo-flow-grid {
            grid-template-columns: 1fr !important;
            gap: 1.5rem !important;
          }
        }
      `})]})}var g9=Object.defineProperty,bf=Object.getOwnPropertySymbols,uE=Object.prototype.hasOwnProperty,dE=Object.prototype.propertyIsEnumerable,Hw=(t,e,n)=>e in t?g9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ey=(t,e)=>{for(var n in e||(e={}))uE.call(e,n)&&Hw(t,n,e[n]);if(bf)for(var n of bf(e))dE.call(e,n)&&Hw(t,n,e[n]);return t},Ty=(t,e)=>{var n={};for(var r in t)uE.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&bf)for(var r of bf(t))e.indexOf(r)<0&&dE.call(t,r)&&(n[r]=t[r]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var va;(t=>{const e=class Ge{constructor(d,m,g,y){if(this.version=d,this.errorCorrectionLevel=m,this.modules=[],this.isFunction=[],d<Ge.MIN_VERSION||d>Ge.MAX_VERSION)throw new RangeError("Version value out of range");if(y<-1||y>7)throw new RangeError("Mask value out of range");this.size=d*4+17;let x=[];for(let w=0;w<this.size;w++)x.push(!1);for(let w=0;w<this.size;w++)this.modules.push(x.slice()),this.isFunction.push(x.slice());this.drawFunctionPatterns();const S=this.addEccAndInterleave(g);if(this.drawCodewords(S),y==-1){let w=1e9;for(let _=0;_<8;_++){this.applyMask(_),this.drawFormatBits(_);const T=this.getPenaltyScore();T<w&&(y=_,w=T),this.applyMask(_)}}o(0<=y&&y<=7),this.mask=y,this.applyMask(y),this.drawFormatBits(y),this.isFunction=[]}static encodeText(d,m){const g=t.QrSegment.makeSegments(d);return Ge.encodeSegments(g,m)}static encodeBinary(d,m){const g=t.QrSegment.makeBytes(d);return Ge.encodeSegments([g],m)}static encodeSegments(d,m,g=1,y=40,x=-1,S=!0){if(!(Ge.MIN_VERSION<=g&&g<=y&&y<=Ge.MAX_VERSION)||x<-1||x>7)throw new RangeError("Invalid value");let w,_;for(w=g;;w++){const M=Ge.getNumDataCodewords(w,m)*8,F=c.getTotalBits(d,w);if(F<=M){_=F;break}if(w>=y)throw new RangeError("Data too long")}for(const M of[Ge.Ecc.MEDIUM,Ge.Ecc.QUARTILE,Ge.Ecc.HIGH])S&&_<=Ge.getNumDataCodewords(w,M)*8&&(m=M);let T=[];for(const M of d){n(M.mode.modeBits,4,T),n(M.numChars,M.mode.numCharCountBits(w),T);for(const F of M.getData())T.push(F)}o(T.length==_);const P=Ge.getNumDataCodewords(w,m)*8;o(T.length<=P),n(0,Math.min(4,P-T.length),T),n(0,(8-T.length%8)%8,T),o(T.length%8==0);for(let M=236;T.length<P;M^=253)n(M,8,T);let V=[];for(;V.length*8<T.length;)V.push(0);return T.forEach((M,F)=>V[F>>>3]|=M<<7-(F&7)),new Ge(w,m,V,x)}getModule(d,m){return 0<=d&&d<this.size&&0<=m&&m<this.size&&this.modules[m][d]}getModules(){return this.modules}drawFunctionPatterns(){for(let g=0;g<this.size;g++)this.setFunctionModule(6,g,g%2==0),this.setFunctionModule(g,6,g%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const d=this.getAlignmentPatternPositions(),m=d.length;for(let g=0;g<m;g++)for(let y=0;y<m;y++)g==0&&y==0||g==0&&y==m-1||g==m-1&&y==0||this.drawAlignmentPattern(d[g],d[y]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(d){const m=this.errorCorrectionLevel.formatBits<<3|d;let g=m;for(let x=0;x<10;x++)g=g<<1^(g>>>9)*1335;const y=(m<<10|g)^21522;o(y>>>15==0);for(let x=0;x<=5;x++)this.setFunctionModule(8,x,r(y,x));this.setFunctionModule(8,7,r(y,6)),this.setFunctionModule(8,8,r(y,7)),this.setFunctionModule(7,8,r(y,8));for(let x=9;x<15;x++)this.setFunctionModule(14-x,8,r(y,x));for(let x=0;x<8;x++)this.setFunctionModule(this.size-1-x,8,r(y,x));for(let x=8;x<15;x++)this.setFunctionModule(8,this.size-15+x,r(y,x));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let d=this.version;for(let g=0;g<12;g++)d=d<<1^(d>>>11)*7973;const m=this.version<<12|d;o(m>>>18==0);for(let g=0;g<18;g++){const y=r(m,g),x=this.size-11+g%3,S=Math.floor(g/3);this.setFunctionModule(x,S,y),this.setFunctionModule(S,x,y)}}drawFinderPattern(d,m){for(let g=-4;g<=4;g++)for(let y=-4;y<=4;y++){const x=Math.max(Math.abs(y),Math.abs(g)),S=d+y,w=m+g;0<=S&&S<this.size&&0<=w&&w<this.size&&this.setFunctionModule(S,w,x!=2&&x!=4)}}drawAlignmentPattern(d,m){for(let g=-2;g<=2;g++)for(let y=-2;y<=2;y++)this.setFunctionModule(d+y,m+g,Math.max(Math.abs(y),Math.abs(g))!=1)}setFunctionModule(d,m,g){this.modules[m][d]=g,this.isFunction[m][d]=!0}addEccAndInterleave(d){const m=this.version,g=this.errorCorrectionLevel;if(d.length!=Ge.getNumDataCodewords(m,g))throw new RangeError("Invalid argument");const y=Ge.NUM_ERROR_CORRECTION_BLOCKS[g.ordinal][m],x=Ge.ECC_CODEWORDS_PER_BLOCK[g.ordinal][m],S=Math.floor(Ge.getNumRawDataModules(m)/8),w=y-S%y,_=Math.floor(S/y);let T=[];const P=Ge.reedSolomonComputeDivisor(x);for(let M=0,F=0;M<y;M++){let K=d.slice(F,F+_-x+(M<w?0:1));F+=K.length;const q=Ge.reedSolomonComputeRemainder(K,P);M<w&&K.push(0),T.push(K.concat(q))}let V=[];for(let M=0;M<T[0].length;M++)T.forEach((F,K)=>{(M!=_-x||K>=w)&&V.push(F[M])});return o(V.length==S),V}drawCodewords(d){if(d.length!=Math.floor(Ge.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let m=0;for(let g=this.size-1;g>=1;g-=2){g==6&&(g=5);for(let y=0;y<this.size;y++)for(let x=0;x<2;x++){const S=g-x,_=(g+1&2)==0?this.size-1-y:y;!this.isFunction[_][S]&&m<d.length*8&&(this.modules[_][S]=r(d[m>>>3],7-(m&7)),m++)}}o(m==d.length*8)}applyMask(d){if(d<0||d>7)throw new RangeError("Mask value out of range");for(let m=0;m<this.size;m++)for(let g=0;g<this.size;g++){let y;switch(d){case 0:y=(g+m)%2==0;break;case 1:y=m%2==0;break;case 2:y=g%3==0;break;case 3:y=(g+m)%3==0;break;case 4:y=(Math.floor(g/3)+Math.floor(m/2))%2==0;break;case 5:y=g*m%2+g*m%3==0;break;case 6:y=(g*m%2+g*m%3)%2==0;break;case 7:y=((g+m)%2+g*m%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[m][g]&&y&&(this.modules[m][g]=!this.modules[m][g])}}getPenaltyScore(){let d=0;for(let x=0;x<this.size;x++){let S=!1,w=0,_=[0,0,0,0,0,0,0];for(let T=0;T<this.size;T++)this.modules[x][T]==S?(w++,w==5?d+=Ge.PENALTY_N1:w>5&&d++):(this.finderPenaltyAddHistory(w,_),S||(d+=this.finderPenaltyCountPatterns(_)*Ge.PENALTY_N3),S=this.modules[x][T],w=1);d+=this.finderPenaltyTerminateAndCount(S,w,_)*Ge.PENALTY_N3}for(let x=0;x<this.size;x++){let S=!1,w=0,_=[0,0,0,0,0,0,0];for(let T=0;T<this.size;T++)this.modules[T][x]==S?(w++,w==5?d+=Ge.PENALTY_N1:w>5&&d++):(this.finderPenaltyAddHistory(w,_),S||(d+=this.finderPenaltyCountPatterns(_)*Ge.PENALTY_N3),S=this.modules[T][x],w=1);d+=this.finderPenaltyTerminateAndCount(S,w,_)*Ge.PENALTY_N3}for(let x=0;x<this.size-1;x++)for(let S=0;S<this.size-1;S++){const w=this.modules[x][S];w==this.modules[x][S+1]&&w==this.modules[x+1][S]&&w==this.modules[x+1][S+1]&&(d+=Ge.PENALTY_N2)}let m=0;for(const x of this.modules)m=x.reduce((S,w)=>S+(w?1:0),m);const g=this.size*this.size,y=Math.ceil(Math.abs(m*20-g*10)/g)-1;return o(0<=y&&y<=9),d+=y*Ge.PENALTY_N4,o(0<=d&&d<=2568888),d}getAlignmentPatternPositions(){if(this.version==1)return[];{const d=Math.floor(this.version/7)+2,m=this.version==32?26:Math.ceil((this.version*4+4)/(d*2-2))*2;let g=[6];for(let y=this.size-7;g.length<d;y-=m)g.splice(1,0,y);return g}}static getNumRawDataModules(d){if(d<Ge.MIN_VERSION||d>Ge.MAX_VERSION)throw new RangeError("Version number out of range");let m=(16*d+128)*d+64;if(d>=2){const g=Math.floor(d/7)+2;m-=(25*g-10)*g-55,d>=7&&(m-=36)}return o(208<=m&&m<=29648),m}static getNumDataCodewords(d,m){return Math.floor(Ge.getNumRawDataModules(d)/8)-Ge.ECC_CODEWORDS_PER_BLOCK[m.ordinal][d]*Ge.NUM_ERROR_CORRECTION_BLOCKS[m.ordinal][d]}static reedSolomonComputeDivisor(d){if(d<1||d>255)throw new RangeError("Degree out of range");let m=[];for(let y=0;y<d-1;y++)m.push(0);m.push(1);let g=1;for(let y=0;y<d;y++){for(let x=0;x<m.length;x++)m[x]=Ge.reedSolomonMultiply(m[x],g),x+1<m.length&&(m[x]^=m[x+1]);g=Ge.reedSolomonMultiply(g,2)}return m}static reedSolomonComputeRemainder(d,m){let g=m.map(y=>0);for(const y of d){const x=y^g.shift();g.push(0),m.forEach((S,w)=>g[w]^=Ge.reedSolomonMultiply(S,x))}return g}static reedSolomonMultiply(d,m){if(d>>>8||m>>>8)throw new RangeError("Byte out of range");let g=0;for(let y=7;y>=0;y--)g=g<<1^(g>>>7)*285,g^=(m>>>y&1)*d;return o(g>>>8==0),g}finderPenaltyCountPatterns(d){const m=d[1];o(m<=this.size*3);const g=m>0&&d[2]==m&&d[3]==m*3&&d[4]==m&&d[5]==m;return(g&&d[0]>=m*4&&d[6]>=m?1:0)+(g&&d[6]>=m*4&&d[0]>=m?1:0)}finderPenaltyTerminateAndCount(d,m,g){return d&&(this.finderPenaltyAddHistory(m,g),m=0),m+=this.size,this.finderPenaltyAddHistory(m,g),this.finderPenaltyCountPatterns(g)}finderPenaltyAddHistory(d,m){m[0]==0&&(d+=this.size),m.pop(),m.unshift(d)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=e;function n(h,d,m){if(d<0||d>31||h>>>d)throw new RangeError("Value out of range");for(let g=d-1;g>=0;g--)m.push(h>>>g&1)}function r(h,d){return(h>>>d&1)!=0}function o(h){if(!h)throw new Error("Assertion error")}const l=class Pt{constructor(d,m,g){if(this.mode=d,this.numChars=m,this.bitData=g,m<0)throw new RangeError("Invalid argument");this.bitData=g.slice()}static makeBytes(d){let m=[];for(const g of d)n(g,8,m);return new Pt(Pt.Mode.BYTE,d.length,m)}static makeNumeric(d){if(!Pt.isNumeric(d))throw new RangeError("String contains non-numeric characters");let m=[];for(let g=0;g<d.length;){const y=Math.min(d.length-g,3);n(parseInt(d.substring(g,g+y),10),y*3+1,m),g+=y}return new Pt(Pt.Mode.NUMERIC,d.length,m)}static makeAlphanumeric(d){if(!Pt.isAlphanumeric(d))throw new RangeError("String contains unencodable characters in alphanumeric mode");let m=[],g;for(g=0;g+2<=d.length;g+=2){let y=Pt.ALPHANUMERIC_CHARSET.indexOf(d.charAt(g))*45;y+=Pt.ALPHANUMERIC_CHARSET.indexOf(d.charAt(g+1)),n(y,11,m)}return g<d.length&&n(Pt.ALPHANUMERIC_CHARSET.indexOf(d.charAt(g)),6,m),new Pt(Pt.Mode.ALPHANUMERIC,d.length,m)}static makeSegments(d){return d==""?[]:Pt.isNumeric(d)?[Pt.makeNumeric(d)]:Pt.isAlphanumeric(d)?[Pt.makeAlphanumeric(d)]:[Pt.makeBytes(Pt.toUtf8ByteArray(d))]}static makeEci(d){let m=[];if(d<0)throw new RangeError("ECI assignment value out of range");if(d<128)n(d,8,m);else if(d<16384)n(2,2,m),n(d,14,m);else if(d<1e6)n(6,3,m),n(d,21,m);else throw new RangeError("ECI assignment value out of range");return new Pt(Pt.Mode.ECI,0,m)}static isNumeric(d){return Pt.NUMERIC_REGEX.test(d)}static isAlphanumeric(d){return Pt.ALPHANUMERIC_REGEX.test(d)}getData(){return this.bitData.slice()}static getTotalBits(d,m){let g=0;for(const y of d){const x=y.mode.numCharCountBits(m);if(y.numChars>=1<<x)return 1/0;g+=4+x+y.bitData.length}return g}static toUtf8ByteArray(d){d=encodeURI(d);let m=[];for(let g=0;g<d.length;g++)d.charAt(g)!="%"?m.push(d.charCodeAt(g)):(m.push(parseInt(d.substring(g+1,g+3),16)),g+=2);return m}};l.NUMERIC_REGEX=/^[0-9]*$/,l.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,l.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let c=l;t.QrSegment=l})(va||(va={}));(t=>{(e=>{const n=class{constructor(o,l){this.ordinal=o,this.formatBits=l}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),e.Ecc=n})(t.QrCode||(t.QrCode={}))})(va||(va={}));(t=>{(e=>{const n=class{constructor(o,l){this.modeBits=o,this.numBitsCharCount=l}numCharCountBits(o){return this.numBitsCharCount[Math.floor((o+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),e.Mode=n})(t.QrSegment||(t.QrSegment={}))})(va||(va={}));var yl=va;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var y9={L:yl.QrCode.Ecc.LOW,M:yl.QrCode.Ecc.MEDIUM,Q:yl.QrCode.Ecc.QUARTILE,H:yl.QrCode.Ecc.HIGH},hE=128,fE="L",mE="#FFFFFF",pE="#000000",gE=!1,yE=1,v9=4,x9=0,b9=.1;function vE(t,e=0){const n=[];return t.forEach(function(r,o){let l=null;r.forEach(function(c,h){if(!c&&l!==null){n.push(`M${l+e} ${o+e}h${h-l}v1H${l+e}z`),l=null;return}if(h===r.length-1){if(!c)return;l===null?n.push(`M${h+e},${o+e} h1v1H${h+e}z`):n.push(`M${l+e},${o+e} h${h+1-l}v1H${l+e}z`);return}c&&l===null&&(l=h)})}),n.join("")}function xE(t,e){return t.slice().map((n,r)=>r<e.y||r>=e.y+e.h?n:n.map((o,l)=>l<e.x||l>=e.x+e.w?o:!1))}function k9(t,e,n,r){if(r==null)return null;const o=t.length+n*2,l=Math.floor(e*b9),c=o/e,h=(r.width||l)*c,d=(r.height||l)*c,m=r.x==null?t.length/2-h/2:r.x*c,g=r.y==null?t.length/2-d/2:r.y*c,y=r.opacity==null?1:r.opacity;let x=null;if(r.excavate){let w=Math.floor(m),_=Math.floor(g),T=Math.ceil(h+m-w),P=Math.ceil(d+g-_);x={x:w,y:_,w:T,h:P}}const S=r.crossOrigin;return{x:m,y:g,h:d,w:h,excavation:x,opacity:y,crossOrigin:S}}function w9(t,e){return e!=null?Math.max(Math.floor(e),0):t?v9:x9}function bE({value:t,level:e,minVersion:n,includeMargin:r,marginSize:o,imageSettings:l,size:c,boostLevel:h}){let d=Xt.useMemo(()=>{const w=(Array.isArray(t)?t:[t]).reduce((_,T)=>(_.push(...yl.QrSegment.makeSegments(T)),_),[]);return yl.QrCode.encodeSegments(w,y9[e],n,void 0,void 0,h)},[t,e,n,h]);const{cells:m,margin:g,numCells:y,calculatedImageSettings:x}=Xt.useMemo(()=>{let S=d.getModules();const w=w9(r,o),_=S.length+w*2,T=k9(S,c,w,l);return{cells:S,margin:w,numCells:_,calculatedImageSettings:T}},[d,c,l,r,o]);return{qrcode:d,margin:g,cells:m,numCells:y,calculatedImageSettings:x}}var S9=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),_9=Xt.forwardRef(function(e,n){const r=e,{value:o,size:l=hE,level:c=fE,bgColor:h=mE,fgColor:d=pE,includeMargin:m=gE,minVersion:g=yE,boostLevel:y,marginSize:x,imageSettings:S}=r,_=Ty(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:T}=_,P=Ty(_,["style"]),V=S==null?void 0:S.src,M=Xt.useRef(null),F=Xt.useRef(null),K=Xt.useCallback(Re=>{M.current=Re,typeof n=="function"?n(Re):n&&(n.current=Re)},[n]),[q,A]=Xt.useState(!1),{margin:E,cells:I,numCells:D,calculatedImageSettings:L}=bE({value:o,level:c,minVersion:g,boostLevel:y,includeMargin:m,marginSize:x,imageSettings:S,size:l});Xt.useEffect(()=>{if(M.current!=null){const Re=M.current,$e=Re.getContext("2d");if(!$e)return;let tt=I;const Ce=F.current,ie=L!=null&&Ce!==null&&Ce.complete&&Ce.naturalHeight!==0&&Ce.naturalWidth!==0;ie&&L.excavation!=null&&(tt=xE(I,L.excavation));const me=window.devicePixelRatio||1;Re.height=Re.width=l*me;const ue=l/D*me;$e.scale(ue,ue),$e.fillStyle=h,$e.fillRect(0,0,D,D),$e.fillStyle=d,S9?$e.fill(new Path2D(vE(tt,E))):I.forEach(function($,te){$.forEach(function(Ie,Te){Ie&&$e.fillRect(Te+E,te+E,1,1)})}),L&&($e.globalAlpha=L.opacity),ie&&$e.drawImage(Ce,L.x+E,L.y+E,L.w,L.h)}}),Xt.useEffect(()=>{A(!1)},[V]);const z=Ey({height:l,width:l},T);let O=null;return V!=null&&(O=Xt.createElement("img",{src:V,key:V,style:{display:"none"},onLoad:()=>{A(!0)},ref:F,crossOrigin:L==null?void 0:L.crossOrigin})),Xt.createElement(Xt.Fragment,null,Xt.createElement("canvas",Ey({style:z,height:l,width:l,ref:K,role:"img"},P)),O)});_9.displayName="QRCodeCanvas";var Cy=Xt.forwardRef(function(e,n){const r=e,{value:o,size:l=hE,level:c=fE,bgColor:h=mE,fgColor:d=pE,includeMargin:m=gE,minVersion:g=yE,boostLevel:y,title:x,marginSize:S,imageSettings:w}=r,_=Ty(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:T,cells:P,numCells:V,calculatedImageSettings:M}=bE({value:o,level:c,minVersion:g,boostLevel:y,includeMargin:m,marginSize:S,imageSettings:w,size:l});let F=P,K=null;w!=null&&M!=null&&(M.excavation!=null&&(F=xE(P,M.excavation)),K=Xt.createElement("image",{href:w.src,height:M.h,width:M.w,x:M.x+T,y:M.y+T,preserveAspectRatio:"none",opacity:M.opacity,crossOrigin:M.crossOrigin}));const q=vE(F,T);return Xt.createElement("svg",Ey({height:l,width:l,viewBox:`0 0 ${V} ${V}`,ref:n,role:"img"},_),!!x&&Xt.createElement("title",null,x),Xt.createElement("path",{fill:h,d:`M0,0 h${V}v${V}H0z`,shapeRendering:"crispEdges"}),Xt.createElement("path",{fill:d,d:q,shapeRendering:"crispEdges"}),K)});Cy.displayName="QRCodeSVG";const Kw={1:{color:"#2d5a27",gradient:["#3d7a37","#2d5a27"],label:"ONE",accent:"#90c695"},5:{color:"#1e3a5f",gradient:["#2e5a8f","#1e3a5f"],label:"FIVE",accent:"#7ba3cc"},10:{color:"#5c2d5c",gradient:["#7c4d7c","#5c2d5c"],label:"TEN",accent:"#b89db8"},20:{color:"#8b6914",gradient:["#c9a227","#8b6914"],label:"TWENTY",accent:"#e8d48a"}};function xa({value:t,size:e=128,denomination:n=5,showFrame:r=!0}){const o=Kw[n]||Kw[5],l=e+48,c=16;return r?i.jsx("div",{style:{width:l,background:`linear-gradient(135deg, ${o.gradient[0]} 0%, ${o.gradient[1]} 100%)`,borderRadius:c,padding:"3px",display:"inline-block",boxShadow:"0 4px 12px rgba(0,0,0,0.2)"},children:i.jsxs("div",{style:{background:"linear-gradient(135deg, #fefefe 0%, #f5f5f0 100%)",borderRadius:c-2,padding:"8px",position:"relative"},children:[i.jsx("div",{style:{textAlign:"center",marginBottom:"6px",fontFamily:'"Georgia", serif',fontSize:"10px",fontWeight:"bold",color:o.color,letterSpacing:"3px",textTransform:"uppercase"},children:"KINDERBUCKS"}),i.jsxs("div",{style:{background:"white",borderRadius:"8px",padding:"8px",border:`2px solid ${o.accent}`,position:"relative"},children:[i.jsx("div",{style:{position:"absolute",top:"4px",left:"4px",width:"12px",height:"12px",borderTop:`2px solid ${o.color}`,borderLeft:`2px solid ${o.color}`,borderRadius:"2px 0 0 0"}}),i.jsx("div",{style:{position:"absolute",top:"4px",right:"4px",width:"12px",height:"12px",borderTop:`2px solid ${o.color}`,borderRight:`2px solid ${o.color}`,borderRadius:"0 2px 0 0"}}),i.jsx("div",{style:{position:"absolute",bottom:"4px",left:"4px",width:"12px",height:"12px",borderBottom:`2px solid ${o.color}`,borderLeft:`2px solid ${o.color}`,borderRadius:"0 0 0 2px"}}),i.jsx("div",{style:{position:"absolute",bottom:"4px",right:"4px",width:"12px",height:"12px",borderBottom:`2px solid ${o.color}`,borderRight:`2px solid ${o.color}`,borderRadius:"0 0 2px 0"}}),i.jsx(Cy,{value:t,size:e,level:"H",fgColor:o.color,style:{display:"block"},imageSettings:{src:`data:image/svg+xml,${encodeURIComponent(`
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="${o.color}">
                  <circle cx="12" cy="12" r="11" fill="white" stroke="${o.color}" stroke-width="1.5"/>
                  <text x="12" y="16" text-anchor="middle" font-size="12" font-weight="bold" fill="${o.color}" font-family="Georgia">K</text>
                </svg>
              `)}`,height:e*.2,width:e*.2,excavate:!0}})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"6px",padding:"0 4px"},children:[i.jsxs("span",{style:{fontFamily:'"Georgia", serif',fontSize:"14px",fontWeight:"bold",color:o.color},children:["$",n]}),i.jsx("span",{style:{fontFamily:'"Georgia", serif',fontSize:"9px",color:o.color,letterSpacing:"1px",opacity:.8},children:o.label}),i.jsxs("span",{style:{fontFamily:'"Georgia", serif',fontSize:"14px",fontWeight:"bold",color:o.color},children:["$",n]})]})]})}):i.jsx(Cy,{value:t,size:e,level:"M",fgColor:o.color,style:{display:"block"}})}const j9="https://harmonicsystems.github.io/kinderbucks/#/scan/KB-0001",E9="https://harmonicsystems.github.io/kinderbucks/#/checkin/BROADST-BAGEL",T9="Broad Street Bagel Co.";function C9(){const[t,e]=C.useState(null),[n,r]=C.useState(0),[o,l]=C.useState(!1);return i.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)",overflow:"hidden"},children:i.jsxs("div",{style:{maxWidth:"1100px",margin:"0 auto"},children:[i.jsxs(ce.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},style:{textAlign:"center",marginBottom:"3rem"},children:[i.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",background:"linear-gradient(135deg, var(--kb-gold) 0%, #e8c33a 100%)",color:"var(--kb-navy)",padding:"0.5rem 1rem",borderRadius:"100px",fontSize:"0.85rem",fontWeight:"600",marginBottom:"1rem"},children:[i.jsx(TV,{size:16})," Try It Live"]}),i.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.75rem"},children:"See Kinderbucks in Action"}),i.jsx("p",{style:{color:"var(--kb-gray-600)",maxWidth:"600px",margin:"0 auto"},children:"Scan these real QR codes with your phone's camera to experience the magic"})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(320px, 1fr))",gap:"2rem",marginBottom:"3rem"},children:[i.jsxs(ce.div,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},transition:{delay:.1},viewport:{once:!0},className:"card",style:{padding:"2rem",background:"linear-gradient(180deg, #f8fbff 0%, #ffffff 100%)",border:"2px solid #e8f0ff",position:"relative",overflow:"hidden"},children:[i.jsx("div",{style:{position:"absolute",top:0,right:0,width:"80px",height:"80px",background:"linear-gradient(135deg, transparent 50%, rgba(52, 152, 219, 0.1) 50%)"}}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[i.jsx("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, #3498db 0%, #2980b9 100%)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(_5,{size:22,color:"white"})}),i.jsxs("div",{children:[i.jsx("h3",{style:{color:"var(--kb-navy)",margin:0,fontSize:"1.2rem"},children:"Verify Currency"}),i.jsx("p",{style:{color:"var(--kb-gray-500)",margin:0,fontSize:"0.85rem"},children:"Confirm authenticity instantly"})]})]}),i.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem",marginBottom:"1.5rem"},children:"Every Kinderbuck has a unique QR code. Scan to verify it's real, see its value, and track its journey through the village."}),i.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1.5rem"},children:i.jsx(ce.div,{whileHover:{scale:1.02},transition:{type:"spring",stiffness:300},children:i.jsx(xa,{value:j9,size:130,denomination:5,showFrame:!0})})}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1rem",background:"rgba(52, 152, 219, 0.08)",borderRadius:"10px",marginBottom:"1rem"},children:[i.jsx(ry,{size:20,color:"#3498db"}),i.jsx("span",{style:{color:"var(--kb-gray-700)",fontSize:"0.9rem"},children:"Point your phone camera at the QR code"})]}),i.jsxs("div",{style:{borderTop:"1px dashed var(--kb-gray-200)",paddingTop:"1rem"},children:[i.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)",marginBottom:"0.5rem"},children:"You'll see:"}),i.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:["Verified","$5 Value","Active Status","Serial: KB-0001"].map((c,h)=>i.jsx("span",{style:{padding:"0.25rem 0.6rem",background:"var(--kb-gray-100)",borderRadius:"4px",fontSize:"0.8rem",color:"var(--kb-gray-600)"},children:c},h))})]})]}),i.jsxs(ce.div,{initial:{opacity:0,x:30},whileInView:{opacity:1,x:0},transition:{delay:.2},viewport:{once:!0},className:"card",style:{padding:"2rem",background:"linear-gradient(180deg, #f8fff8 0%, #ffffff 100%)",border:"2px solid #e8ffe8",position:"relative",overflow:"hidden"},children:[i.jsx("div",{style:{position:"absolute",top:0,right:0,width:"80px",height:"80px",background:"linear-gradient(135deg, transparent 50%, rgba(39, 174, 96, 0.1) 50%)"}}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[i.jsx("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, var(--kb-green) 0%, #1e8449 100%)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(It,{size:22,color:"white"})}),i.jsxs("div",{children:[i.jsx("h3",{style:{color:"var(--kb-navy)",margin:0,fontSize:"1.2rem"},children:"Check In"}),i.jsx("p",{style:{color:"var(--kb-gray-500)",margin:0,fontSize:"0.85rem"},children:"Record visits, earn rewards"})]})]}),i.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem",marginBottom:"1.5rem"},children:"Scan the QR code at each business you visit. Build your OK Member status and unlock better exchange rates!"}),i.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1.5rem"},children:i.jsx(ce.div,{whileHover:{scale:1.02},transition:{type:"spring",stiffness:300},style:{background:"linear-gradient(135deg, var(--kb-green) 0%, #1e8449 100%)",borderRadius:"16px",padding:"3px",boxShadow:"0 4px 12px rgba(39, 174, 96, 0.3)"},children:i.jsxs("div",{style:{background:"white",borderRadius:"14px",padding:"12px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"10px",fontWeight:"600",color:"var(--kb-green)",letterSpacing:"2px",marginBottom:"8px"},children:"CHECK IN AT"}),i.jsx(xa,{value:E9,size:110,denomination:1,showFrame:!1}),i.jsxs("div",{style:{marginTop:"8px",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.4rem"},children:[i.jsx(F3,{size:14,color:"var(--kb-green)"}),i.jsx("span",{style:{fontWeight:"600",color:"var(--kb-navy)",fontSize:"0.9rem"},children:T9})]})]})})}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1rem",background:"rgba(39, 174, 96, 0.08)",borderRadius:"10px",marginBottom:"1rem"},children:[i.jsx(ry,{size:20,color:"var(--kb-green)"}),i.jsx("span",{style:{color:"var(--kb-gray-700)",fontSize:"0.9rem"},children:"Scan when you visit a business"})]}),i.jsxs("div",{style:{borderTop:"1px dashed var(--kb-gray-200)",paddingTop:"1rem"},children:[i.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)",marginBottom:"0.5rem"},children:"You'll see:"}),i.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:["Check-in Recorded","+1 Business","Tier Progress","Next Reward"].map((c,h)=>i.jsx("span",{style:{padding:"0.25rem 0.6rem",background:"var(--kb-gray-100)",borderRadius:"4px",fontSize:"0.8rem",color:"var(--kb-gray-600)"},children:c},h))})]})]})]}),i.jsxs(ce.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{delay:.3},viewport:{once:!0},style:{background:"linear-gradient(135deg, var(--kb-navy) 0%, #1a3a5c 100%)",borderRadius:"20px",padding:"2rem",color:"white",position:"relative",overflow:"hidden"},children:[i.jsx("div",{style:{position:"absolute",top:"-50%",right:"-10%",width:"300px",height:"300px",background:"radial-gradient(circle, rgba(201, 162, 39, 0.1) 0%, transparent 70%)",borderRadius:"50%"}}),i.jsxs("div",{style:{position:"relative",zIndex:1},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1.5rem"},children:[i.jsx(Qu,{size:20,color:"var(--kb-gold)"}),i.jsx("span",{style:{color:"var(--kb-gold)",fontWeight:"600",fontSize:"0.9rem"},children:"The Kinderbucks Loop"})]}),i.jsx("h3",{style:{fontSize:"1.5rem",marginBottom:"2rem",maxWidth:"500px"},children:"Check-ins unlock better exchange rates on currency"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem",alignItems:"center"},children:[i.jsxs(ce.div,{initial:{opacity:0},whileInView:{opacity:1},transition:{delay:.4},viewport:{once:!0},style:{display:"flex",alignItems:"center",gap:"1rem"},children:[i.jsx("div",{style:{width:"50px",height:"50px",background:"rgba(255,255,255,0.1)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:i.jsx(It,{size:24,color:"var(--kb-gold)"})}),i.jsxs("div",{children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Visit & Check In"}),i.jsx("div",{style:{fontSize:"0.85rem",opacity:.8},children:"Scan at local businesses"})]})]}),i.jsx("div",{style:{display:"flex",justifyContent:"center"},children:i.jsx(Zg,{size:24,color:"var(--kb-gold)",style:{opacity:.5}})}),i.jsxs(ce.div,{initial:{opacity:0},whileInView:{opacity:1},transition:{delay:.5},viewport:{once:!0},style:{display:"flex",alignItems:"center",gap:"1rem"},children:[i.jsx("div",{style:{width:"50px",height:"50px",background:"rgba(255,255,255,0.1)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:i.jsx(bs,{size:24,color:"var(--kb-gold)"})}),i.jsxs("div",{children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Level Up"}),i.jsx("div",{style:{fontSize:"0.85rem",opacity:.8},children:"Reach new tiers"})]})]}),i.jsx("div",{style:{display:"flex",justifyContent:"center"},children:i.jsx(Zg,{size:24,color:"var(--kb-gold)",style:{opacity:.5}})}),i.jsxs(ce.div,{initial:{opacity:0},whileInView:{opacity:1},transition:{delay:.6},viewport:{once:!0},style:{display:"flex",alignItems:"center",gap:"1rem"},children:[i.jsx("div",{style:{width:"50px",height:"50px",background:"linear-gradient(135deg, var(--kb-gold) 0%, #b8922d 100%)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:i.jsx(Lr,{size:24,color:"var(--kb-navy)"})}),i.jsxs("div",{children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Earn More"}),i.jsx("div",{style:{fontSize:"0.85rem",opacity:.8},children:"Up to 25% bonus!"})]})]})]}),i.jsx("div",{style:{marginTop:"2rem",display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[{name:"Curious",visits:"1+",bonus:"10%"},{name:"Hooked",visits:"5+",bonus:"15%"},{name:"Line & Sinker",visits:"10+",bonus:"20%"},{name:"Village Patron",visits:"15+",bonus:"25%",featured:!0}].map((c,h)=>i.jsxs("div",{style:{padding:"0.5rem 1rem",background:c.featured?"linear-gradient(135deg, var(--kb-gold) 0%, #b8922d 100%)":"rgba(255,255,255,0.1)",borderRadius:"8px",fontSize:"0.85rem",color:c.featured?"var(--kb-navy)":"white",fontWeight:c.featured?"600":"400"},children:[c.name,": ",c.bonus]},h))})]})]}),i.jsxs(ce.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:.4},viewport:{once:!0},style:{textAlign:"center",marginTop:"2.5rem"},children:[i.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1rem"},children:"Ready to start your OK Member journey?"}),i.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[i.jsx(fe,{to:"/profile",className:"btn btn-primary",children:"View My Progress"}),i.jsx(fe,{to:"/businesses",className:"btn btn-secondary",children:"Find Businesses to Visit"})]})]})]})})}function I9(){return i.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[i.jsx(Zt,{}),i.jsx("section",{style:{background:"var(--kb-navy)",color:"var(--kb-white)",padding:"4rem 1rem",textAlign:"center"},children:i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsx("h1",{style:{marginBottom:"1rem"},children:"How Kinderbucks Works"}),i.jsx("p",{style:{color:"var(--kb-gray-300)",fontSize:"1.1rem"},children:"A simple system designed to keep money local and reward community participation"})]})}),i.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem"},children:"What is Kinderbucks?"}),i.jsxs("div",{style:{color:"var(--kb-gray-700)",lineHeight:1.8},children:[i.jsxs("p",{style:{marginBottom:"1rem"},children:[i.jsx("strong",{children:"Kinderbucks"})," is a local currency program for the Village of Kinderhook, NY. It's real money  physical bills with QR codes for verification  that can only be spent at participating local businesses."]}),i.jsx("p",{style:{marginBottom:"1rem"},children:"When you exchange US dollars for Kinderbucks, you're making a commitment to spend locally. In return, you receive bonus value through our OK Membership program, turning $10 into $11, $12, or even $12.50 in local spending power."}),i.jsx("p",{children:"Every Kinderbuck spent stays in the village, circulating between businesses and residents, strengthening our local economy with each transaction."})]})]})}),i.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:i.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[i.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem",textAlign:"center"},children:"The Exchange Process"}),i.jsx("div",{style:{display:"grid",gap:"2rem",maxWidth:"700px",margin:"0 auto"},children:[{step:1,title:"Visit an Exchange Point",description:"Stop by any participating business or our central exchange location with US dollars."},{step:2,title:"Show Your Membership",description:"Scan your profile QR code or provide your phone number to apply your tier bonus."},{step:3,title:"Receive Your Kinderbucks",description:"Get physical Kinderbuck bills in $1, $5, $10, and $20 denominations with your bonus applied."},{step:4,title:"Spend Locally",description:"Use your Kinderbucks at any of our 19+ participating businesses."}].map((t,e)=>i.jsxs(ce.div,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},transition:{delay:e*.1},viewport:{once:!0},style:{display:"flex",gap:"1.5rem",alignItems:"flex-start"},children:[i.jsx("div",{style:{width:"50px",height:"50px",background:"var(--kb-navy)",color:"var(--kb-gold)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"var(--font-display)",fontWeight:"700",fontSize:"1.2rem",flexShrink:0},children:t.step}),i.jsxs("div",{children:[i.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:t.title}),i.jsx("p",{style:{color:"var(--kb-gray-600)"},children:t.description})]})]},e))})]})}),i.jsx(C9,{}),i.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsx("div",{className:"badge badge-gold",style:{marginBottom:"1rem"},children:"OK Membership"}),i.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem"},children:"The OK Membership Program"}),i.jsxs("div",{style:{color:"var(--kb-gray-700)",lineHeight:1.8},children:[i.jsxs("p",{style:{marginBottom:"1rem"},children:[i.jsx("strong",{children:"OK Membership"})," rewards customers who actively support local businesses. The more businesses you visit, the higher your tier  and the better your exchange rate."]}),i.jsxs("p",{style:{marginBottom:"1rem"},children:['Each participating business has a QR code. Scan it when you visit to record a "check-in." Your tier is based on how many ',i.jsx("em",{children:"unique"})," businesses you've visited, encouraging exploration of the entire village."]}),i.jsx("p",{children:"There's no cost to join. Simply start checking in at businesses, and you'll automatically become an OK Member with access to bonus exchange rates."})]}),i.jsxs("div",{style:{marginTop:"2rem",display:"flex",gap:"1rem",flexWrap:"wrap"},children:[i.jsx(fe,{to:"/benefits",className:"btn btn-primary",children:"View All Benefits"}),i.jsx(fe,{to:"/profile",className:"btn btn-secondary",children:"Check My Status"})]})]})}),i.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem"},children:"Frequently Asked Questions"}),[{q:"Is Kinderbucks real money?",a:"Kinderbucks are a local complementary currency. They have value within our participating business network but cannot be deposited in banks or used outside Kinderhook."},{q:"Can I convert Kinderbucks back to USD?",a:"Kinderbucks are designed to circulate locally. While businesses can redeem them, individual customers are encouraged to spend them at participating businesses."},{q:"What if a business closes?",a:"Kinderbucks remain valid at all other participating businesses. The program maintains reserves to ensure stability."},{q:"How do businesses benefit?",a:"Businesses receive customers committed to spending locally, gain exposure through our directory, and become part of a community-strengthening initiative."},{q:"Is there a fee to exchange?",a:"No fees. You receive full value plus your membership bonus when exchanging USD for Kinderbucks."}].map((t,e)=>i.jsxs("div",{style:{marginBottom:"1.5rem"},children:[i.jsx("h4",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:t.q}),i.jsx("p",{style:{color:"var(--kb-gray-600)"},children:t.a})]},e))]})}),i.jsxs("section",{style:{padding:"3rem 1rem",background:"var(--kb-navy)",color:"var(--kb-white)",textAlign:"center"},children:[i.jsx("h3",{style:{marginBottom:"1rem"},children:"Ready to get started?"}),i.jsx(fe,{to:"/exchange",className:"btn btn-gold",children:"Get Your Kinderbucks"})]}),i.jsx(en,{})]})}const Nr={curious:{name:"Curious",threshold:1,bonus:.1,color:"#888888",bgColor:"#f0f0f0",emoji:""},hooked:{name:"Hooked",threshold:5,bonus:.15,color:"#2e7d32",bgColor:"#e8f5e9",emoji:""},lineAndSinker:{name:"Line & Sinker",threshold:10,bonus:.2,color:"#1565c0",bgColor:"#e3f2fd",emoji:""},patron:{name:"Village Patron",threshold:15,bonus:.25,color:"#c9a227",bgColor:"#fff8e1",emoji:""}};function Iy(t){return t>=15?"patron":t>=10?"lineAndSinker":t>=5?"hooked":t>=1?"curious":null}function A9(t){const e=["curious","hooked","lineAndSinker","patron"],n=e.indexOf(t);return n<e.length-1?e[n+1]:null}function kE(t){const e=Iy(t),n=A9(e);if(!n)return{progress:100,remaining:0,nextTier:null};const r=Nr[n],o=e?Nr[e].threshold:0,l=(t-o)/(r.threshold-o)*100;return{progress:Math.min(100,Math.max(0,l)),remaining:r.threshold-t,nextTier:r}}function R9(){const t=[{Icon:V3,title:"Bonus Exchange Rates",description:"Get up to 25% extra when converting USD to Kinderbucks. A $100 exchange becomes $125 in local spending power.",highlight:"Up to 25% bonus"},{Icon:It,title:"Exclusive Local Deals",description:"Participating businesses offer special discounts and promotions exclusively for OK Members.",highlight:"Member-only offers"},{Icon:Lr,title:"Priority Access",description:"Higher-tier members get early access to limited events, seasonal specials, and new business openings.",highlight:"First in line"},{Icon:Sl,title:"Seasonal Bonuses",description:"Extra rewards during holidays and special village events. Double check-in points, bonus exchanges, and more.",highlight:"Special events"},{Icon:N0,title:"Impact Tracking",description:"See exactly how your spending supports local businesses and contributes to the village economy.",highlight:"Track your impact"},{Icon:ln,title:"Community Recognition",description:"Village Patrons are recognized in our annual report and invited to exclusive community appreciation events.",highlight:"Be celebrated"}];return i.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[i.jsx(Zt,{}),i.jsx("section",{style:{background:"linear-gradient(135deg, var(--kb-gold-dark) 0%, var(--kb-gold) 100%)",color:"var(--kb-navy)",padding:"4rem 1rem",textAlign:"center"},children:i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsx("div",{className:"badge badge-navy",style:{marginBottom:"1rem"},children:"OK Membership"}),i.jsx("h1",{style:{marginBottom:"1rem"},children:"Member Benefits & Rewards"}),i.jsx("p",{style:{fontSize:"1.1rem",opacity:.9},children:"The more you support local, the more you earn. It pays to be an OK Member."})]})}),i.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:i.jsxs("div",{style:{maxWidth:"1100px",margin:"0 auto"},children:[i.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem",textAlign:"center"},children:"Membership Tiers"}),i.jsx("p",{style:{color:"var(--kb-gray-500)",textAlign:"center",marginBottom:"2rem"},children:"Visit more businesses to unlock better rewards"}),i.jsx("div",{style:{overflowX:"auto"},children:i.jsxs("table",{style:{minWidth:"700px"},children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{style:{width:"25%"},children:"Tier"}),i.jsx("th",{style:{width:"20%"},children:"Requirement"}),i.jsx("th",{style:{width:"20%"},children:"Exchange Bonus"}),i.jsx("th",{style:{width:"35%"},children:"Perks"})]})}),i.jsxs("tbody",{children:[i.jsxs("tr",{children:[i.jsx("td",{children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(xn,{size:18,color:"#888"}),i.jsx("span",{style:{fontWeight:"600",color:"#888"},children:"Curious"})]})}),i.jsx("td",{children:"1+ businesses"}),i.jsx("td",{children:i.jsx("span",{style:{color:"#888",fontWeight:"600"},children:"10%"})}),i.jsx("td",{style:{fontSize:"0.9rem",color:"var(--kb-gray-600)"},children:"Basic exchange bonus, check-in tracking"})]}),i.jsxs("tr",{children:[i.jsx("td",{children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(Lr,{size:18,color:"#2e7d32"}),i.jsx("span",{style:{fontWeight:"600",color:"#2e7d32"},children:"Hooked"})]})}),i.jsx("td",{children:"5+ businesses"}),i.jsx("td",{children:i.jsx("span",{style:{color:"#2e7d32",fontWeight:"600"},children:"15%"})}),i.jsx("td",{style:{fontSize:"0.9rem",color:"var(--kb-gray-600)"},children:"Seasonal bonus events, member deals"})]}),i.jsxs("tr",{children:[i.jsx("td",{children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(Rr,{size:18,color:"#1565c0"}),i.jsx("span",{style:{fontWeight:"600",color:"#1565c0"},children:"Line & Sinker"})]})}),i.jsx("td",{children:"10+ businesses"}),i.jsx("td",{children:i.jsx("span",{style:{color:"#1565c0",fontWeight:"600"},children:"20%"})}),i.jsx("td",{style:{fontSize:"0.9rem",color:"var(--kb-gray-600)"},children:"Priority access, exclusive events"})]}),i.jsxs("tr",{style:{background:"rgba(201, 162, 39, 0.1)"},children:[i.jsx("td",{children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(yr,{size:18,color:"#c9a227"}),i.jsx("span",{style:{fontWeight:"600",color:"#c9a227"},children:"Village Patron"})]})}),i.jsx("td",{children:"15+ businesses"}),i.jsx("td",{children:i.jsx("span",{style:{color:"#c9a227",fontWeight:"600"},children:"25%"})}),i.jsx("td",{style:{fontSize:"0.9rem",color:"var(--kb-gray-600)"},children:"All perks + community recognition + VIP events"})]})]})]})}),i.jsx("div",{style:{textAlign:"center",marginTop:"2rem"},children:i.jsx(fe,{to:"/profile",className:"btn btn-primary",children:"Check My Progress"})})]})}),i.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:i.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[i.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem",textAlign:"center"},children:"All Member Benefits"}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1.5rem"},children:t.map((e,n)=>i.jsx(ce.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:n*.1},viewport:{once:!0},className:"card",children:i.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[i.jsx("div",{style:{width:"50px",height:"50px",background:"var(--kb-navy)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:i.jsx(e.Icon,{size:24,color:"var(--kb-gold)",strokeWidth:1.5})}),i.jsxs("div",{children:[i.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"0.25rem",fontSize:"1.1rem"},children:e.title}),i.jsx("span",{className:"badge badge-gold",style:{marginBottom:"0.5rem"},children:e.highlight}),i.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem",marginTop:"0.5rem"},children:e.description})]})]})},n))})]})}),i.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:i.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto",textAlign:"center"},children:[i.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"See Your Savings"}),i.jsx("p",{style:{color:"var(--kb-gray-500)",marginBottom:"2rem"},children:"Example: Exchange $100 USD"}),i.jsx("div",{className:"card",style:{padding:"2rem"},children:i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[{tier:"Curious",bonus:10,color:"#888"},{tier:"Hooked",bonus:15,color:"#2e7d32"},{tier:"Line & Sinker",bonus:20,color:"#1565c0"},{tier:"Village Patron",bonus:25,color:"#c9a227"}].map((e,n)=>i.jsxs("div",{style:{padding:"1rem",borderRadius:"8px",background:`${e.color}10`,border:`1px solid ${e.color}30`},children:[i.jsx("div",{style:{fontSize:"0.85rem",color:e.color,fontWeight:"600"},children:e.tier}),i.jsxs("div",{style:{fontFamily:"var(--font-display)",fontSize:"1.8rem",fontWeight:"700",color:e.color},children:["$",100+e.bonus]}),i.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:"in Kinderbucks"})]},n))})}),i.jsx("div",{style:{marginTop:"2rem"},children:i.jsx(fe,{to:"/exchange",className:"btn btn-gold",style:{padding:"1rem 2rem"},children:"Start Exchanging"})})]})}),i.jsxs("section",{style:{padding:"3rem 1rem",background:"var(--kb-green)",color:"var(--kb-white)",textAlign:"center"},children:[i.jsx("h3",{style:{marginBottom:"1rem"},children:"Start earning rewards today"}),i.jsx("p",{style:{opacity:.9,marginBottom:"1.5rem"},children:"Visit a participating business and scan their QR code to begin"}),i.jsx(fe,{to:"/businesses",className:"btn btn-gold",children:"Find Businesses Near You"})]}),i.jsx(en,{})]})}const P9="modulepreload",D9=function(t){return"/kinderbucks/"+t},qw={},wE=function(e,n,r){let o=Promise.resolve();if(n&&n.length>0){let c=function(m){return Promise.all(m.map(g=>Promise.resolve(g).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),d=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));o=c(n.map(m=>{if(m=D9(m),m in qw)return;qw[m]=!0;const g=m.endsWith(".css"),y=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${y}`))return;const x=document.createElement("link");if(x.rel=g?"stylesheet":P9,g||(x.as="script"),x.crossOrigin="",x.href=m,d&&x.setAttribute("nonce",d),document.head.appendChild(x),g)return new Promise((S,w)=>{x.addEventListener("load",S),x.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${m}`)))})}))}function l(c){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=c,window.dispatchEvent(h),!h.defaultPrevented)throw c}return o.then(c=>{for(const h of c||[])h.status==="rejected"&&l(h.reason);return e().catch(l)})},Br="businesses",N9="checkins",M9="transactions";async function ed(t){const e=Ve(ye,Br,t),n=await On(e);return n.exists()?{code:n.id,...n.data()}:null}async function Xn(t=!1){const e=Mt(it(ye,Br),Vr("name")),r=(await ft(e)).docs.map(o=>({code:o.id,...o.data()}));return t?r:r.filter(o=>!o.isDeleted)}async function V9(){return(await Xn(!0)).filter(e=>e.isDeleted)}async function Gw(t,e,n,r={}){const o={code:t,name:e,category:n,isActive:!0,checkinCount:0,createdAt:Be()};r.address&&(o.address=r.address),r.placeId&&(o.placeId=r.placeId),r.phone&&(o.phone=r.phone),r.website&&(o.website=r.website),r.photoUrl&&(o.photoUrl=r.photoUrl),await Fi(Ve(ye,Br,t),o)}async function SE(t){const e=await ed(t);if(!e)return{exists:!1,canDelete:!1,reason:"Business not found"};const n=Mt(it(ye,N9),un("businessCode","==",t)),o=(await ft(n)).size,l=Mt(it(ye,M9),un("businessCode","==",t)),h=(await ft(l)).size,d=e.kinderbucksBalance||0,m=o>0||h>0||d>0;return{exists:!0,code:t,name:e.name,checkinCount:o,transactionCount:h,balance:d,hasData:m,canSafeDelete:!m,reason:m?`Has ${o} check-ins, ${h} transactions, $${d} balance`:"No associated data"}}async function L9(t,e=null,n=!1){const r=await SE(t);if(!r.exists)throw new Error("Business not found");if(r.hasData&&!n)throw new Error(`Cannot delete: ${r.reason}. Use force=true to soft delete anyway.`);const o=Ve(ye,Br,t);return await ut(o,{isDeleted:!0,deletedAt:Be(),deletedBy:e,isActive:!1}),{success:!0,wasForced:r.hasData&&n}}async function O9(t){const e=Ve(ye,Br,t);await ut(e,{isDeleted:!1,deletedAt:null,deletedBy:null,restoredAt:Be()})}async function B9(t){const e=Ve(ye,Br,t);await ut(e,{checkinCount:yo(1)})}async function z9(t,e){const n=Ve(ye,Br,t);await ut(n,{isActive:e})}async function F9(t){const e=await ed(t);return e?{...e,kinderbucksBalance:e.kinderbucksBalance||0,lifetimeAccepted:e.lifetimeAccepted||0,lifetimeRedeemed:e.lifetimeRedeemed||0}:null}async function U9(t,e){const n=Ve(ye,Br,t);await ut(n,{photoUrl:e,photoUpdatedAt:Be()})}async function W9(t,e){const n=Ve(ye,Br,t);await ut(n,{okMemberDiscount:e,discountUpdatedAt:Be()})}async function Qw(t,e){const n=Ve(ye,Br,t);await ut(n,{kinderbucksSpecials:e,specialsUpdatedAt:Be()})}async function Yw(t,e){const n=Ve(ye,Br,t);await ut(n,{loyaltyRewards:e,loyaltyUpdatedAt:Be()})}async function yg(t,e){const n=Ve(ye,Br,t);await ut(n,{crossRewards:e,crossRewardsUpdatedAt:Be()})}async function $9(){const t=await Xn(),e=[];for(const n of t)if(n.crossRewards&&n.crossRewards.length>0)for(const r of n.crossRewards)r.isActive&&e.push({...r,offeringBusiness:n.code,offeringBusinessName:n.name});return e}async function H9(t,e){const n=await $9(),r=await Xn(),o=Object.fromEntries(r.map(l=>[l.code,l]));return n.map(l=>{var m,g;const c=((m=e[l.partnerBusiness])==null?void 0:m.count)||0,h=c>=l.requiredCheckins,d=Math.min(100,c/l.requiredCheckins*100);return{...l,partnerBusinessName:((g=o[l.partnerBusiness])==null?void 0:g.name)||l.partnerBusiness,currentCheckins:c,isUnlocked:h,progress:d,checkinsRemaining:Math.max(0,l.requiredCheckins-c)}})}const vg={food:{label:"Food & Drink",Icon:F0,color:"#e74c3c"},retail:{label:"Retail",Icon:nm,color:"#9b59b6"},services:{label:"Services",Icon:D0,color:"#3498db"},arts:{label:"Arts & Culture",Icon:B0,color:"#1abc9c"}};function K9(){const[t,e]=C.useState([]),[n,r]=C.useState(!0),[o,l]=C.useState("all");C.useEffect(()=>{async function d(){const m=await Xn();e(m.filter(g=>g.isActive)),r(!1)}d()},[]);const c=o==="all"?t:t.filter(d=>d.category===o),h={total:t.length,food:t.filter(d=>d.category==="food").length,retail:t.filter(d=>d.category==="retail").length};return i.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[i.jsx(Zt,{}),i.jsx("section",{style:{background:"var(--kb-navy)",color:"var(--kb-white)",padding:"4rem 1rem",textAlign:"center"},children:i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsx("h1",{style:{marginBottom:"1rem"},children:"For Local Businesses"}),i.jsx("p",{style:{color:"var(--kb-gray-300)",fontSize:"1.1rem",marginBottom:"2rem"},children:"Join the Kinderbucks network and connect with customers committed to shopping local"}),i.jsx(fe,{to:"/admin/businesses",className:"btn btn-gold",children:"Register Your Business"})]})}),i.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:i.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[i.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem",textAlign:"center"},children:"Why Accept Kinderbucks?"}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"2rem"},children:[{Icon:ln,title:"Committed Customers",description:"Kinderbucks holders have already decided to spend locally. They're not comparison shopping online."},{Icon:L6,title:"Money Stays Local",description:"Unlike credit cards that send fees elsewhere, Kinderbucks keep circulating in our village economy."},{Icon:x6,title:"Free Marketing",description:"Get listed in our business directory, featured on our homepage, and promoted to all members."},{Icon:Bl,title:"Community Standing",description:"Show customers you're invested in Kinderhook's future. Participating businesses are community leaders."},{Icon:ii,title:"Easy Redemption",description:"Redeem Kinderbucks for USD at any time through our simple merchant portal. No waiting."},{Icon:N0,title:"Customer Insights",description:"Access check-in data and understand your customers' behavior across the village."}].map((d,m)=>i.jsxs(ce.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:m*.1},viewport:{once:!0},className:"card",style:{textAlign:"center"},children:[i.jsx("div",{style:{width:"60px",height:"60px",background:"var(--kb-navy)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:i.jsx(d.Icon,{size:28,color:"var(--kb-gold)",strokeWidth:1.5})}),i.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:d.title}),i.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem"},children:d.description})]},m))})]})}),i.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-cream)"},children:i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"2rem",textAlign:"center"},children:"How It Works"}),i.jsx("div",{style:{display:"grid",gap:"1.5rem"},children:[{step:1,title:"Register",desc:"Sign up as a participating business. It's free to join."},{step:2,title:"Get Your QR Code",desc:"We'll provide a unique check-in QR code for your location."},{step:3,title:"Display It",desc:"Put the QR code at your counter or entrance for customers to scan."},{step:4,title:"Accept Kinderbucks",desc:"Take Kinderbucks as payment, just like cash. Same denominations."},{step:5,title:"Redeem Anytime",desc:"Exchange accumulated Kinderbucks back to USD when you need."}].map((d,m)=>i.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center",background:"var(--kb-white)",padding:"1.5rem",borderRadius:"12px",boxShadow:"var(--shadow-sm)"},children:[i.jsx("div",{style:{width:"40px",height:"40px",background:"var(--kb-gold)",color:"var(--kb-navy)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"700",flexShrink:0},children:d.step}),i.jsxs("div",{children:[i.jsx("h4",{style:{color:"var(--kb-navy)",marginBottom:"0.25rem"},children:d.title}),i.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem",margin:0},children:d.desc})]})]},m))})]})}),i.jsx("section",{style:{padding:"4rem 1rem",background:"var(--kb-white)"},children:i.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[i.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem",textAlign:"center"},children:"Participating Businesses"}),i.jsxs("p",{style:{color:"var(--kb-gray-500)",textAlign:"center",marginBottom:"2rem"},children:[h.total," businesses currently accepting Kinderbucks"]}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center",marginBottom:"2rem",flexWrap:"wrap"},children:[i.jsxs("button",{onClick:()=>l("all"),className:o==="all"?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem"},children:["All (",h.total,")"]}),Object.entries(vg).map(([d,m])=>i.jsxs("button",{onClick:()=>l(d),className:o===d?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem",display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(m.Icon,{size:16})," ",m.label]},d))]}),n?i.jsx("p",{style:{textAlign:"center"},children:"Loading businesses..."}):c.length===0?i.jsxs("p",{style:{textAlign:"center",color:"var(--kb-gray-500)"},children:["No businesses found. ",i.jsx(fe,{to:"/admin/businesses",children:"Add some!"})]}):i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:"1rem"},children:c.map((d,m)=>{const g=vg[d.category]||vg.services;return i.jsxs(ce.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:m*.03},className:"card",style:{padding:"1.25rem"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[i.jsx("div",{style:{width:"40px",height:"40px",background:`${g.color}15`,borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(g.Icon,{size:20,color:g.color,strokeWidth:1.5})}),i.jsxs("div",{children:[i.jsx("h4",{style:{color:"var(--kb-navy)",margin:0,fontSize:"1rem"},children:d.name}),i.jsx("span",{style:{fontSize:"0.8rem",color:g.color},children:g.label})]})]}),d.checkinCount>0&&i.jsxs("div",{style:{marginTop:"0.75rem",fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:[d.checkinCount," check-ins"]})]},d.code)})})]})}),i.jsxs("section",{style:{padding:"3rem 1rem",background:"var(--kb-gold)",color:"var(--kb-navy)",textAlign:"center"},children:[i.jsx("h3",{style:{marginBottom:"1rem"},children:"Ready to join the network?"}),i.jsx("p",{style:{opacity:.9,marginBottom:"1.5rem"},children:"Registration is free. Start accepting Kinderbucks today."}),i.jsx(fe,{to:"/admin/businesses",className:"btn btn-primary",children:"Register Your Business"})]}),i.jsx(en,{})]})}const _E="members";function kf(){return ga.currentUser?ga.currentUser.uid:wf()}function wf(){let t=localStorage.getItem("kinderhooker_visitor_id");return t||(t="anon_"+Math.random().toString(36).substring(2,15),localStorage.setItem("kinderhooker_visitor_id",t)),t}async function td(t){const e=Ve(ye,_E,t),n=await On(e);return n.exists()?{visitorId:n.id,...n.data()}:null}async function q9(t,e){const n=Ve(ye,_E,t),r=await On(n);if(r.exists()){const o=r.data(),l=o.businessesVisited||[],c=!l.includes(e),h=c?l.length+1:l.length,d=Iy(h),m=d!==o.tier;return await ut(n,{businessesVisited:C0(e),totalCheckins:yo(1),tier:d,lastCheckin:Be()}),{isNewBusiness:c,tierChanged:m,oldTier:o.tier,newTier:d,businessesVisited:c?[...l,e]:l,totalCheckins:(o.totalCheckins||0)+1}}else{const o=Iy(1);return await Fi(n,{visitorId:t,tier:o,businessesVisited:[e],totalCheckins:1,createdAt:Be(),lastCheckin:Be(),email:null}),{isNewBusiness:!0,tierChanged:!0,oldTier:null,newTier:o,businessesVisited:[e],totalCheckins:1}}}const G9={curious:xn,hooked:Lr,lineAndSinker:Rr,patron:yr};function Q9(){const[t,e]=C.useState(null),[n,r]=C.useState(!0),[o,l]=C.useState(20),[c,h]=C.useState(!1),[d,m]=C.useState(!1);C.useEffect(()=>{async function P(){const V=wf(),M=await td(V);e(M),r(!1)}P()},[]);const g=(t==null?void 0:t.tier)||"curious",y=Nr[g]||Nr.curious,x=t?y.bonus:.1,S=o*x,w=o+S,_=async()=>{h(!0);try{await qu(it(ye,"exchanges"),{visitorId:wf(),usdAmount:o,bonusRate:x,bonusAmount:S,kinderbucksAmount:w,tier:g,status:"pending",createdAt:Be()}),m(!0)}catch(P){console.error("Exchange error:",P),alert("Error submitting exchange request")}h(!1)},T=[10,20,50,100];return i.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[i.jsx(Zt,{}),i.jsx("section",{style:{background:"linear-gradient(135deg, var(--kb-green) 0%, var(--kb-green-light) 100%)",color:"var(--kb-white)",padding:"3rem 1rem",textAlign:"center"},children:i.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto"},children:[i.jsx("h1",{style:{marginBottom:"0.5rem"},children:"Get Kinderbucks"}),i.jsx("p",{style:{opacity:.9},children:"Exchange USD for local currency with bonus value"})]})}),i.jsx("section",{style:{padding:"3rem 1rem",background:"var(--kb-cream)",flex:1},children:i.jsx("div",{style:{maxWidth:"500px",margin:"0 auto"},children:d?i.jsxs(ce.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"card",style:{textAlign:"center",padding:"3rem 2rem"},children:[i.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:""}),i.jsx("h2",{style:{color:"var(--kb-green)",marginBottom:"1rem"},children:"Exchange Requested!"}),i.jsxs("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem"},children:["Your exchange request for ",i.jsxs("strong",{children:["$",o," USD"]})," "," ",i.jsxs("strong",{children:["$",w.toFixed(2)," Kinderbucks"]})," has been submitted."]}),i.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem",marginBottom:"2rem"},children:"Visit any exchange point to complete your transaction and receive your Kinderbucks."}),i.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[i.jsx("button",{onClick:()=>m(!1),className:"btn btn-primary",children:"Exchange More"}),i.jsx(fe,{to:"/account",className:"btn btn-secondary",children:"View Account"})]})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)",marginBottom:"0.25rem"},children:"Your Tier"}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(()=>{const P=G9[g]||xn;return i.jsx(P,{size:28,color:y.color,strokeWidth:1.5})})(),i.jsx("span",{style:{fontWeight:"600",color:y.color,fontSize:"1.2rem"},children:y.name})]})]}),i.jsxs("div",{style:{textAlign:"right"},children:[i.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)",marginBottom:"0.25rem"},children:"Bonus Rate"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:y.color},children:[Math.round(x*100),"%"]})]})]}),!t&&i.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"var(--kb-gray-50)",borderRadius:"8px",fontSize:"0.85rem",color:"var(--kb-gray-600)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(l6,{size:16,color:"var(--kb-gold)"})," ",i.jsx(fe,{to:"/profile",style:{color:"var(--kb-navy)"},children:"Visit businesses"})," to increase your tier and get better rates!"]})]}),i.jsxs("div",{className:"card",children:[i.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem"},children:"Exchange Calculator"}),i.jsxs("div",{style:{marginBottom:"1.5rem"},children:[i.jsx("label",{children:"Amount (USD)"}),i.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem"},children:T.map(P=>i.jsxs("button",{onClick:()=>l(P),className:o===P?"btn btn-primary":"btn btn-secondary",style:{flex:1,padding:"0.5rem"},children:["$",P]},P))}),i.jsx("input",{type:"number",value:o,onChange:P=>l(Math.max(1,Number(P.target.value))),min:"1",style:{width:"100%"}})]}),i.jsxs("div",{style:{background:"var(--kb-gray-50)",borderRadius:"12px",padding:"1.5rem",marginBottom:"1.5rem"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.75rem"},children:[i.jsx("span",{style:{color:"var(--kb-gray-600)"},children:"USD Amount"}),i.jsxs("span",{style:{fontWeight:"600"},children:["$",o.toFixed(2)]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.75rem"},children:[i.jsxs("span",{style:{color:"var(--kb-gray-600)"},children:[y.name," Bonus (",Math.round(x*100),"%)"]}),i.jsxs("span",{style:{fontWeight:"600",color:"var(--kb-green)"},children:["+$",S.toFixed(2)]})]}),i.jsx("div",{className:"divider",style:{margin:"0.75rem 0"}}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[i.jsx("span",{style:{color:"var(--kb-navy)",fontWeight:"600"},children:"You Receive"}),i.jsxs("span",{style:{fontFamily:"var(--font-display)",fontSize:"1.8rem",fontWeight:"700",color:"var(--kb-gold-dark)"},children:["$",w.toFixed(2)]})]}),i.jsx("div",{style:{textAlign:"right",fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Kinderbucks"})]}),i.jsx("button",{onClick:_,disabled:c,className:"btn btn-gold",style:{width:"100%",padding:"1rem",fontSize:"1.1rem"},children:c?"Processing...":`Exchange $${o} for $${w.toFixed(2)} Kinderbucks`}),i.jsx("p",{style:{textAlign:"center",fontSize:"0.85rem",color:"var(--kb-gray-500)",marginTop:"1rem"},children:"Complete your exchange at any participating business or exchange point"})]}),i.jsxs("div",{className:"card",style:{marginTop:"1.5rem"},children:[i.jsx("h4",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Exchange Locations"}),i.jsxs("div",{style:{color:"var(--kb-gray-600)",fontSize:"0.95rem"},children:[i.jsxs("p",{style:{marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(an,{size:16,color:"var(--kb-green)"})," ",i.jsx("strong",{children:"OK Pantry"})," - 2 Hudson Street"]}),i.jsxs("p",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(an,{size:16,color:"var(--kb-green)"})," ",i.jsx("strong",{children:"Village Hall"})," - During events"]})]})]})]})})}),i.jsx(en,{})]})}const Xw={curious:xn,hooked:Lr,lineAndSinker:Rr,patron:yr};function Y9(){var P,V;const[t,e]=C.useState(null),[n,r]=C.useState([]),[o,l]=C.useState([]),[c,h]=C.useState(!0),[d,m]=C.useState("overview");if(C.useEffect(()=>{async function M(){const F=wf(),K=await td(F),q=await Xn();try{const A=Mt(it(ye,"exchanges"),un("visitorId","==",F),Vr("createdAt","desc")),E=await ft(A);l(E.docs.map(I=>({id:I.id,...I.data()})))}catch(A){console.error("Error loading exchanges:",A)}e(K),r(q),h(!1)}M()},[]),c)return i.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[i.jsx(Zt,{}),i.jsx("div",{className:"page page-center",style:{flex:1},children:i.jsx("div",{style:{fontSize:"2rem"},children:"Loading..."})}),i.jsx(en,{})]});const g=(t==null?void 0:t.tier)||null,y=g?Nr[g]:null,x=((P=t==null?void 0:t.businessesVisited)==null?void 0:P.length)||0,S=kE(x),w=((V=t==null?void 0:t.businessesVisited)==null?void 0:V.map(M=>{const F=n.find(K=>K.code===M);return F?F.name:M}))||[],_=n.filter(M=>{var F;return M.isActive&&!((F=t==null?void 0:t.businessesVisited)!=null&&F.includes(M.code))}),T=o.reduce((M,F)=>M+(F.kinderbucksAmount||0),0);return i.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[i.jsx(Zt,{}),i.jsx("section",{style:{background:"var(--kb-navy)",color:"var(--kb-white)",padding:"2rem 1rem"},children:i.jsx("div",{style:{maxWidth:"800px",margin:"0 auto"},children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[i.jsx("div",{style:{width:"80px",height:"80px",background:y?y.color:"var(--kb-gray-500)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:(()=>{const M=g&&Xw[g]?Xw[g]:xn;return i.jsx(M,{size:40,color:"white",strokeWidth:1.5})})()}),i.jsxs("div",{style:{flex:1},children:[i.jsx("div",{style:{fontSize:"0.9rem",color:"var(--kb-gray-300)",marginBottom:"0.25rem"},children:"OK Membership"}),i.jsx("h1",{style:{fontSize:"1.5rem",marginBottom:"0.25rem"},children:y?y.name:"New Member"}),i.jsx("div",{style:{fontSize:"0.9rem",color:"var(--kb-gold)"},children:y?`${Math.round(y.bonus*100)}% Exchange Bonus`:"Start exploring to earn rewards"})]}),i.jsx(fe,{to:"/exchange",className:"btn btn-gold",children:"Get Kinderbucks"})]})})}),i.jsx("div",{style:{background:"var(--kb-white)",borderBottom:"1px solid var(--kb-gray-200)",position:"sticky",top:"70px",zIndex:50},children:i.jsx("div",{style:{maxWidth:"800px",margin:"0 auto",display:"flex",gap:"2rem",padding:"0 1rem"},children:["overview","progress","history"].map(M=>i.jsx("button",{onClick:()=>m(M),style:{background:"none",border:"none",padding:"1rem 0",fontSize:"0.95rem",fontWeight:d===M?"600":"400",color:d===M?"var(--kb-navy)":"var(--kb-gray-500)",borderBottom:d===M?"2px solid var(--kb-gold)":"2px solid transparent",cursor:"pointer",textTransform:"capitalize"},children:M},M))})}),i.jsx("section",{style:{padding:"2rem 1rem",background:"var(--kb-cream)",flex:1},children:i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[d==="overview"&&i.jsxs(ce.div,{initial:{opacity:0},animate:{opacity:1},children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[i.jsxs("div",{className:"card",style:{textAlign:"center"},children:[i.jsx("div",{className:"stat-value",children:x}),i.jsx("div",{className:"stat-label",children:"Businesses Visited"})]}),i.jsxs("div",{className:"card",style:{textAlign:"center"},children:[i.jsx("div",{className:"stat-value",children:(t==null?void 0:t.totalCheckins)||0}),i.jsx("div",{className:"stat-label",children:"Total Check-ins"})]}),i.jsxs("div",{className:"card",style:{textAlign:"center"},children:[i.jsxs("div",{className:"stat-value",style:{color:"var(--kb-gold)"},children:["$",T.toFixed(0)]}),i.jsx("div",{className:"stat-label",children:"Kinderbucks Exchanged"})]})]}),i.jsxs("div",{className:"card",children:[i.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Quick Actions"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"0.75rem"},children:[i.jsxs(fe,{to:"/exchange",className:"btn btn-gold",style:{textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[i.jsx(ii,{size:18})," Exchange"]}),i.jsxs(fe,{to:"/businesses",className:"btn btn-secondary",style:{textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[i.jsx(It,{size:18})," Find Businesses"]}),i.jsxs(fe,{to:"/benefits",className:"btn btn-secondary",style:{textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[i.jsx(Qu,{size:18})," View Benefits"]})]})]})]}),d==="progress"&&i.jsxs(ce.div,{initial:{opacity:0},animate:{opacity:1},children:[y&&i.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[i.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Tier Progress"}),S.nextTier?i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{marginBottom:"0.5rem"},children:[i.jsx("span",{style:{color:y.color,fontWeight:"600"},children:y.name}),i.jsx("span",{style:{color:"var(--kb-gray-400)",margin:"0 0.5rem"},children:""}),i.jsx("span",{style:{color:S.nextTier.color,fontWeight:"600"},children:S.nextTier.name})]}),i.jsx("div",{className:"progress-bar",style:{height:"12px",marginBottom:"0.5rem"},children:i.jsx("div",{className:"progress-bar-fill",style:{width:`${S.progress}%`,background:y.color}})}),i.jsxs("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:[S.remaining," more business",S.remaining!==1?"es":""," to reach ",S.nextTier.name]})]}):i.jsxs("p",{style:{color:"var(--kb-gold)",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(yr,{size:20})," Maximum tier reached! You're a Village Patron!"]})]}),i.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[i.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(ti,{size:20,color:"var(--kb-green)"})," Businesses Visited (",w.length,")"]}),w.length>0?i.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:w.map((M,F)=>i.jsxs("span",{style:{background:"#d4edda",color:"var(--kb-green)",padding:"0.4rem 0.75rem",borderRadius:"100px",fontSize:"0.85rem",display:"inline-flex",alignItems:"center",gap:"0.25rem"},children:[i.jsx(ti,{size:14})," ",M]},F))}):i.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"No businesses visited yet"})]}),_.length>0&&i.jsxs("div",{className:"card",children:[i.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(M0,{size:20,color:"var(--kb-navy)"})," Still to Explore (",_.length,")"]}),i.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:[_.slice(0,12).map(M=>i.jsx("span",{style:{background:"var(--kb-gray-100)",color:"var(--kb-gray-600)",padding:"0.4rem 0.75rem",borderRadius:"100px",fontSize:"0.85rem"},children:M.name},M.code)),_.length>12&&i.jsxs("span",{style:{color:"var(--kb-gray-500)",padding:"0.4rem"},children:["+",_.length-12," more"]})]})]})]}),d==="history"&&i.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},children:i.jsxs("div",{className:"card",children:[i.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Exchange History"}),o.length>0?i.jsx("div",{children:o.map((M,F)=>{var K,q,A,E;return i.jsxs("div",{style:{padding:"1rem 0",borderBottom:F<o.length-1?"1px solid var(--kb-gray-100)":"none",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[i.jsxs("div",{children:[i.jsxs("div",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:["$",M.usdAmount,"  $",(K=M.kinderbucksAmount)==null?void 0:K.toFixed(2)," KB"]}),i.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:[((E=(A=(q=M.createdAt)==null?void 0:q.toDate)==null?void 0:A.call(q))==null?void 0:E.toLocaleDateString())||"Pending","  ",Math.round(M.bonusRate*100),"% bonus"]})]}),i.jsx("span",{className:"badge",style:{background:M.status==="completed"?"#d4edda":"#fff3cd",color:M.status==="completed"?"var(--kb-green)":"#856404"},children:M.status})]},M.id)})}):i.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"var(--kb-gray-500)"},children:[i.jsx("p",{style:{marginBottom:"1rem"},children:"No exchanges yet"}),i.jsx(fe,{to:"/exchange",className:"btn btn-gold",children:"Make Your First Exchange"})]})]})})]})}),i.jsx(en,{})]})}const Jw={curious:xn,hooked:Lr,lineAndSinker:Rr,patron:yr},Yc={curious:"#888888",hooked:"#2e7d32",lineAndSinker:"#1565c0",patron:"#c9a227"};function X9(){var _,T;const{user:t,profile:e,isAuthenticated:n}=gr(),[r,o]=C.useState(null),[l,c]=C.useState([]),[h,d]=C.useState(!0);C.useEffect(()=>{async function P(){const V=kf(),M=await td(V),F=await Xn();o(M),c(F.filter(K=>K.isActive)),d(!1)}P()},[t]);const m=(r==null?void 0:r.tier)||"curious",g=Nr[m],y=((_=r==null?void 0:r.businessesVisited)==null?void 0:_.length)||0,x=kE(y),S=((T=r==null?void 0:r.businessesVisited)==null?void 0:T.map(P=>{const V=l.find(M=>M.code===P);return V?V.name:P}))||[],w=l.filter(P=>{var V;return!((V=r==null?void 0:r.businessesVisited)!=null&&V.includes(P.code))});return i.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[i.jsx(Zt,{}),i.jsx("main",{style:{flex:1,background:"var(--kb-cream)",padding:"2rem 1rem"},children:i.jsx("div",{style:{maxWidth:"600px",margin:"0 auto"},children:h?i.jsx("div",{style:{textAlign:"center",padding:"4rem 0"},children:i.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading your profile..."})}):r?i.jsxs(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[n&&e&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1.5rem",padding:"1rem",background:"white",borderRadius:"12px"},children:[i.jsx("div",{style:{width:"48px",height:"48px",background:"var(--kb-gray-100)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(_l,{size:24,color:"var(--kb-gray-500)"})}),i.jsxs("div",{children:[i.jsx("div",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:e.displayName||t.email}),i.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:t.email})]})]}),i.jsxs(ce.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.1},style:{background:`linear-gradient(135deg, ${Yc[m]} 0%, ${Yc[m]}dd 100%)`,borderRadius:"20px",padding:"2rem",color:"white",textAlign:"center",marginBottom:"1.5rem",boxShadow:"0 4px 20px rgba(0,0,0,0.2)"},children:[(()=>{const P=Jw[m]||xn;return i.jsx(P,{size:48,color:"white",strokeWidth:1.5,style:{marginBottom:"0.5rem"}})})(),i.jsx("div",{style:{fontSize:"1.8rem",fontWeight:"bold",marginBottom:"0.25rem"},children:g.name}),i.jsxs("div",{style:{opacity:.9,fontSize:"1rem"},children:[Math.round(g.bonus*100),"% Kinderbuck Exchange Bonus"]})]}),i.jsxs(fe,{to:"/card",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",width:"100%",padding:"1.25rem",background:"linear-gradient(135deg, var(--kb-gold) 0%, #d4af37 100%)",color:"var(--kb-navy)",borderRadius:"16px",fontSize:"1.25rem",fontWeight:"700",textDecoration:"none",marginBottom:"1.5rem",boxShadow:"0 4px 12px rgba(201, 162, 39, 0.3)"},children:[i.jsx(lf,{size:28}),"SHOW MY OK CARD"]}),i.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[i.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",textAlign:"center"},children:[y," Business",y!==1?"es":""," Visited"]}),x.nextTier?i.jsxs(i.Fragment,{children:[i.jsx("div",{style:{background:"var(--kb-gray-100)",borderRadius:"10px",height:"28px",overflow:"hidden",marginBottom:"0.75rem"},children:i.jsxs(ce.div,{initial:{width:0},animate:{width:`${x.progress}%`},transition:{delay:.3,duration:.8},style:{background:`linear-gradient(90deg, ${Yc[m]}, ${x.nextTier.color})`,height:"100%",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"0.85rem",fontWeight:"bold"},children:[y,"/",x.nextTier.threshold]})}),i.jsxs("p",{style:{color:"var(--kb-gray-600)",textAlign:"center"},children:[i.jsx("strong",{children:x.remaining})," more to reach"," ",i.jsx("strong",{style:{color:x.nextTier.color},children:x.nextTier.name})]})]}):i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",color:"var(--kb-gold-dark)",fontWeight:"600"},children:[i.jsx(yr,{size:20})," Maximum tier reached! You're a true Village Patron!"]})]}),S.length>0&&i.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[i.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(ti,{size:20,color:"var(--kb-green)"})," Visited"]}),i.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:S.map((P,V)=>i.jsxs("span",{style:{padding:"0.4rem 0.8rem",background:"#e8f5e9",borderRadius:"6px",color:"#2e7d32",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:[i.jsx(ti,{size:14})," ",P]},V))})]}),w.length>0&&i.jsxs("div",{className:"card",style:{marginBottom:"1.5rem"},children:[i.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(M0,{size:20})," Still to Explore (",w.length,")"]}),i.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:[w.slice(0,10).map(P=>i.jsx("span",{style:{padding:"0.4rem 0.8rem",background:"var(--kb-gray-100)",borderRadius:"6px",color:"var(--kb-gray-600)",fontSize:"0.9rem"},children:P.name},P.code)),w.length>10&&i.jsxs("span",{style:{padding:"0.4rem 0.8rem",color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:["+",w.length-10," more"]})]}),i.jsxs(fe,{to:"/businesses",style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",marginTop:"1rem",color:"var(--kb-navy)",fontWeight:"500",fontSize:"0.9rem"},children:["View all businesses ",i.jsx(Zg,{size:16})]})]}),i.jsxs("div",{style:{textAlign:"center",color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:["Total Check-ins: ",r.totalCheckins||0]}),!n&&i.jsxs("div",{style:{marginTop:"2rem",padding:"1rem",background:"rgba(201, 162, 39, 0.1)",borderRadius:"12px",textAlign:"center"},children:[i.jsx("p",{style:{color:"var(--kb-gray-700)",marginBottom:"0.75rem"},children:"Sign in to save your progress across devices"}),i.jsxs(fe,{to:"/login",className:"btn btn-gold",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(Ol,{size:18})," Sign In"]})]})]}):i.jsxs(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[i.jsxs("div",{className:"card",style:{padding:"2rem",textAlign:"center",marginBottom:"2rem"},children:[i.jsx("div",{style:{width:"80px",height:"80px",background:"linear-gradient(135deg, var(--kb-navy) 0%, var(--kb-navy-light) 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.5rem"},children:i.jsx(Qu,{size:36,color:"var(--kb-gold)"})}),i.jsx("h1",{style:{color:"var(--kb-navy)",marginBottom:"0.75rem"},children:"Welcome to Kinderbucks!"}),i.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem",fontSize:"1.05rem"},children:"You haven't checked in anywhere yet. Visit a local business and scan their QR code to start building your OK Member status!"}),!n&&i.jsxs("div",{style:{background:"rgba(201, 162, 39, 0.1)",borderRadius:"12px",padding:"1rem",marginBottom:"1.5rem"},children:[i.jsx("p",{style:{color:"var(--kb-gray-700)",fontSize:"0.9rem",marginBottom:"0.75rem"},children:"Sign in to save your progress across devices"}),i.jsxs(fe,{to:"/login",className:"btn btn-gold",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(Ol,{size:18})," Sign In or Create Account"]})]}),i.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap",justifyContent:"center"},children:[i.jsxs(fe,{to:"/businesses",className:"btn btn-primary",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(an,{size:18})," Find Businesses"]}),i.jsxs(fe,{to:"/card",className:"btn btn-gold",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(lf,{size:18})," View My Card"]})]})]}),i.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[i.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",textAlign:"center"},children:"How to Get Started"}),i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[{step:1,text:"Visit any participating Kinderhook business",icon:It},{step:2,text:"Scan their check-in QR code with your phone",icon:xn},{step:3,text:"Build your tier to unlock better exchange rates",icon:bs}].map(P=>i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[i.jsx("div",{style:{width:"44px",height:"44px",background:"var(--kb-navy)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:i.jsx(P.icon,{size:20,color:"var(--kb-gold)"})}),i.jsx("div",{style:{color:"var(--kb-gray-700)"},children:P.text})]},P.step))})]}),i.jsxs("div",{style:{marginTop:"2rem"},children:[i.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem",textAlign:"center"},children:"Tier Rewards"}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.75rem"},children:Object.entries(Nr).map(([P,V])=>{const M=Jw[P];return i.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"1rem",textAlign:"center",border:"1px solid var(--kb-gray-200)"},children:[i.jsx(M,{size:24,color:Yc[P],style:{marginBottom:"0.5rem"}}),i.jsx("div",{style:{fontWeight:"600",color:Yc[P],marginBottom:"0.25rem"},children:V.name}),i.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:[Math.round(V.bonus*100),"% bonus"]})]},P)})})]})]})})}),i.jsx(en,{})]})}function J9(){var M,F;const[t,e]=C.useState("login"),[n,r]=C.useState(""),[o,l]=C.useState(""),[c,h]=C.useState(""),[d,m]=C.useState(""),[g,y]=C.useState(!1),x=bo(),S=Or(),{isAuthenticated:w}=gr(),P=new URLSearchParams(S.search).get("redirect")||((F=(M=S.state)==null?void 0:M.from)==null?void 0:F.pathname)||"/card",V=async K=>{K.preventDefault(),m(""),y(!0);try{if(t==="signup"){if(!c.trim()){m("Please enter your name"),y(!1);return}await zM(n,o,c)}else await FM(n,o);x(P,{replace:!0})}catch(q){console.error("Auth error:",q),q.code==="auth/email-already-in-use"?m("An account with this email already exists"):q.code==="auth/weak-password"?m("Password should be at least 6 characters"):q.code==="auth/invalid-email"?m("Please enter a valid email address"):q.code==="auth/user-not-found"||q.code==="auth/wrong-password"||q.code==="auth/invalid-credential"?m("Invalid email or password"):m("Something went wrong. Please try again.")}y(!1)};return i.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[i.jsx(Zt,{}),i.jsx("section",{style:{flex:1,background:"linear-gradient(180deg, var(--kb-cream) 0%, var(--kb-white) 100%)",padding:"3rem 1rem",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsxs(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{width:"100%",maxWidth:"420px"},children:[i.jsxs("div",{className:"card",style:{padding:"2rem"},children:[i.jsxs("div",{style:{display:"flex",marginBottom:"2rem",background:"var(--kb-gray-100)",borderRadius:"10px",padding:"4px"},children:[i.jsxs("button",{onClick:()=>{e("login"),m("")},style:{flex:1,padding:"0.75rem",border:"none",borderRadius:"8px",background:t==="login"?"white":"transparent",color:t==="login"?"var(--kb-navy)":"var(--kb-gray-500)",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",boxShadow:t==="login"?"0 1px 3px rgba(0,0,0,0.1)":"none",transition:"all 0.2s"},children:[i.jsx(Ol,{size:18})," Sign In"]}),i.jsxs("button",{onClick:()=>{e("signup"),m("")},style:{flex:1,padding:"0.75rem",border:"none",borderRadius:"8px",background:t==="signup"?"white":"transparent",color:t==="signup"?"var(--kb-navy)":"var(--kb-gray-500)",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",boxShadow:t==="signup"?"0 1px 3px rgba(0,0,0,0.1)":"none",transition:"all 0.2s"},children:[i.jsx(hf,{size:18})," Sign Up"]})]}),i.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[i.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:t==="login"?"Welcome Back":"Join OK Kinderhook"}),i.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.95rem"},children:t==="login"?"Sign in to access your account":"Create an account to track your OK Member status"})]}),d&&i.jsxs(ce.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},style:{background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",padding:"0.75rem 1rem",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem",color:"#dc2626",fontSize:"0.9rem"},children:[i.jsx(hs,{size:18}),d]}),i.jsxs("form",{onSubmit:V,children:[t==="signup"&&i.jsxs("div",{style:{marginBottom:"1rem"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Your Name"}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx(_l,{size:18,color:"var(--kb-gray-400)",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)"}}),i.jsx("input",{type:"text",value:c,onChange:K=>h(K.target.value),placeholder:"Jane Smith",style:{width:"100%",paddingLeft:"40px"},required:t==="signup"})]})]}),i.jsxs("div",{style:{marginBottom:"1rem"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Email"}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx(b5,{size:18,color:"var(--kb-gray-400)",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)"}}),i.jsx("input",{type:"email",value:n,onChange:K=>r(K.target.value),placeholder:"you@example.com",style:{width:"100%",paddingLeft:"40px"},required:!0})]})]}),i.jsxs("div",{style:{marginBottom:"1.5rem"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Password"}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx(h6,{size:18,color:"var(--kb-gray-400)",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)"}}),i.jsx("input",{type:"password",value:o,onChange:K=>l(K.target.value),placeholder:"",style:{width:"100%",paddingLeft:"40px"},required:!0,minLength:6})]}),t==="signup"&&i.jsx("p",{style:{marginTop:"0.5rem",fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:"At least 6 characters"})]}),i.jsx("button",{type:"submit",className:"btn btn-gold",disabled:g,style:{width:"100%",padding:"0.875rem",fontSize:"1rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:g?i.jsxs(i.Fragment,{children:[i.jsx(O0,{size:20,className:"animate-spin",style:{animation:"spin 1s linear infinite"}}),t==="login"?"Signing in...":"Creating account..."]}):i.jsxs(i.Fragment,{children:[t==="login"?i.jsx(Ol,{size:20}):i.jsx(hf,{size:20}),t==="login"?"Sign In":"Create Account"]})})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",margin:"1.5rem 0",gap:"1rem"},children:[i.jsx("div",{style:{flex:1,height:"1px",background:"var(--kb-gray-200)"}}),i.jsx("span",{style:{color:"var(--kb-gray-400)",fontSize:"0.85rem"},children:"or"}),i.jsx("div",{style:{flex:1,height:"1px",background:"var(--kb-gray-200)"}})]}),i.jsxs("button",{type:"button",onClick:async()=>{m(""),y(!0);try{await UM(),x(P,{replace:!0})}catch(K){console.error("Google sign-in error:",K),K.code==="auth/popup-closed-by-user"?m("Sign-in cancelled"):m("Could not sign in with Google. Please try again.")}y(!1)},disabled:g,style:{width:"100%",padding:"0.75rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",background:"white",border:"1px solid var(--kb-gray-300)",borderRadius:"8px",cursor:"pointer",fontSize:"0.95rem",fontWeight:"500",color:"var(--kb-gray-700)",transition:"all 0.2s"},children:[i.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",children:[i.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),i.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),i.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),i.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),i.jsx("div",{style:{marginTop:"1rem"},children:i.jsx(fe,{to:"/profile",style:{display:"block",textAlign:"center",color:"var(--kb-gray-500)",fontSize:"0.85rem",textDecoration:"none"},children:"Continue as guest (limited features)"})})]}),i.jsx("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"rgba(201, 162, 39, 0.1)",borderRadius:"12px",textAlign:"center"},children:i.jsx("p",{style:{color:"var(--kb-gray-700)",fontSize:"0.9rem",margin:0},children:"Create an account to sync your OK Member status across devices and never lose your tier progress!"})})]})}),i.jsx(en,{}),i.jsx("style",{children:`
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
      `})]})}const Fl="checkins",Z9=3600*1e3;async function ez(t,e){var n;try{const r=new Date(Date.now()-Z9),o=Mt(it(ye,Fl),un("visitorId","==",t),un("businessCode","==",e)),l=await ft(o);if(l.empty)return!1;for(const c of l.docs)if((((n=c.data().timestamp)==null?void 0:n.toDate())||new Date(0))>r)return!0;return!1}catch(r){return console.error("hasRecentCheckin error (allowing checkin):",r),!1}}async function tz(t,e,n){await qu(it(ye,Fl),{visitorId:t,businessCode:e,timestamp:Be(),kinderbucksMatched:!1,boostApplied:0,memberTier:n||"curious"})}async function jE(t){try{const e=Mt(it(ye,Fl),un("businessCode","==",t));return(await ft(e)).docs.map(o=>({id:o.id,...o.data()})).sort((o,l)=>{var d,m,g,y;const c=((m=(d=o.timestamp)==null?void 0:d.toDate)==null?void 0:m.call(d))||new Date(0);return(((y=(g=l.timestamp)==null?void 0:g.toDate)==null?void 0:y.call(g))||new Date(0))-c}).slice(0,100)}catch(e){return console.error("getCheckinsByBusiness error:",e),[]}}async function nz(){try{return(await ft(it(ye,Fl))).docs.map(e=>({id:e.id,...e.data()}))}catch(t){return console.error("getAllCheckins error:",t),[]}}async function bv(t){try{let e=Mt(it(ye,Fl),un("memberId","==",t)),n=await ft(e);return n.empty&&(e=Mt(it(ye,Fl),un("visitorId","==",t)),n=await ft(e)),n.docs.map(r=>({id:r.id,...r.data()}))}catch(e){return console.error("getMemberCheckins error:",e),[]}}async function rz(t,e){var o;const n=await bv(t),r={};for(const l of n){const c=l.businessCode;r[c]||(r[c]={count:0,checkins:[],business:e.find(h=>h.code===c)||{code:c,name:c}}),r[c].count++,r[c].checkins.push(l)}for(const l of Object.keys(r))r[l].checkins.sort((c,h)=>{var g,y,x,S;const d=((y=(g=c.timestamp)==null?void 0:g.toDate)==null?void 0:y.call(g))||new Date(0);return(((S=(x=h.timestamp)==null?void 0:x.toDate)==null?void 0:S.call(x))||new Date(0))-d}),r[l].lastCheckin=(o=r[l].checkins[0])==null?void 0:o.timestamp;return r}async function iz(t,e){const n=await bv(t),r={};for(const l of e)r[l.code]=l.category||"services";const o={food:0,retail:0,services:0,arts:0};for(const l of n){const c=r[l.businessCode]||"services";o[c]!==void 0&&o[c]++}return o}const sz={curious:xn,hooked:Lr,lineAndSinker:Rr,patron:yr},oz={curious:{primary:"#6b7280",secondary:"#9ca3af",bg:"#f3f4f6"},hooked:{primary:"#16a34a",secondary:"#22c55e",bg:"#dcfce7"},lineAndSinker:{primary:"#2563eb",secondary:"#3b82f6",bg:"#dbeafe"},patron:{primary:"#ca8a04",secondary:"#eab308",bg:"#fef3c7"}},az={food:{name:"Food Explorer",Icon:F0,color:"#e67e22",thresholds:[{count:3,level:"bronze",label:"Taster"},{count:10,level:"silver",label:"Regular"},{count:25,level:"gold",label:"Connoisseur"}]},retail:{name:"Shop Local Hero",Icon:nm,color:"#3498db",thresholds:[{count:3,level:"bronze",label:"Browser"},{count:10,level:"silver",label:"Shopper"},{count:25,level:"gold",label:"VIP"}]},services:{name:"Service Supporter",Icon:D0,color:"#9b59b6",thresholds:[{count:3,level:"bronze",label:"Visitor"},{count:10,level:"silver",label:"Regular"},{count:25,level:"gold",label:"Loyal"}]},arts:{name:"Culture Seeker",Icon:B0,color:"#1abc9c",thresholds:[{count:3,level:"bronze",label:"Curious"},{count:10,level:"silver",label:"Enthusiast"},{count:25,level:"gold",label:"Patron"}]}},lz={none:{bg:"#f3f4f6",border:"#e5e7eb",text:"#9ca3af"},bronze:{bg:"#fef3e2",border:"#cd7f32",text:"#cd7f32"},silver:{bg:"#f1f5f9",border:"#a8a9ad",text:"#71717a"},gold:{bg:"#fef9c3",border:"#c9a227",text:"#92710c"}};function cz(t,e){let n="none",r=e[0],o=null;for(const l of e)if(t>=l.count){n=l.level,o=l.label;const c=e.indexOf(l)+1;r=e[c]||null}return{level:n,currentLabel:o,nextThreshold:r,count:t}}function uz(){var A;const{user:t,profile:e,isAuthenticated:n}=gr(),[r,o]=C.useState(null),[l,c]=C.useState({food:0,retail:0,services:0,arts:0}),[h,d]=C.useState([]),[m,g]=C.useState([]),[y,x]=C.useState(0),[S,w]=C.useState(!0);C.useEffect(()=>{async function E(){const I=kf(),[D,L]=await Promise.all([td(I),Xn()]);if(o(D),I){const[z,O,Re]=await Promise.all([iz(I,L),rz(I,L),bv(I)]);c(z);const $e=new Date;$e.setDate($e.getDate()-7);const tt=Re.filter(me=>{var $;return(($=me.timestamp)!=null&&$.toDate?me.timestamp.toDate():new Date(me.timestamp))>$e});x(tt.length);const Ce=Re.sort((me,ue)=>{var Ie,Te;const $=(Ie=me.timestamp)!=null&&Ie.toDate?me.timestamp.toDate():new Date(me.timestamp);return((Te=ue.timestamp)!=null&&Te.toDate?ue.timestamp.toDate():new Date(ue.timestamp))-$});g(Ce.slice(0,5));const ie=await H9(I,O);d(ie)}w(!1)}E()},[t]);const _=(r==null?void 0:r.tier)||"curious",T=Nr[_],P=oz[_],V=sz[_],M=((A=r==null?void 0:r.businessesVisited)==null?void 0:A.length)||0;Math.round(T.bonus*100);const F=kf(),K=F?`OK-${F.substring(0,6).toUpperCase()}`:"OK-GUEST",q=E=>{const D=new Date-E,L=Math.floor(D/6e4),z=Math.floor(D/36e5),O=Math.floor(D/864e5);return L<1?"Just now":L<60?`${L}m ago`:z<24?`${z}h ago`:O===1?"Yesterday":O<7?`${O}d ago`:E.toLocaleDateString("en-US",{month:"short",day:"numeric"})};return S?i.jsx("div",{style:{minHeight:"100vh",background:"var(--kb-navy)",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx("div",{style:{color:"white",fontSize:"1.5rem"},children:"Loading..."})}):i.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(180deg, var(--kb-navy) 0%, #1a3a5c 100%)",padding:"1rem",display:"flex",flexDirection:"column"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[i.jsxs(fe,{to:"/map",style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",color:"white",opacity:.8,textDecoration:"none",fontSize:"1rem"},children:[i.jsx(k3,{size:20})," Village Map"]}),i.jsx(fe,{to:"/profile",style:{color:"white",opacity:.8,textDecoration:"none",fontSize:"1rem"},children:"My Profile"})]}),i.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsxs(ce.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},style:{width:"100%",maxWidth:"380px"},children:[i.jsxs("div",{style:{background:"white",borderRadius:"20px",overflow:"hidden",boxShadow:"0 20px 60px rgba(0,0,0,0.3)",border:"3px solid var(--kb-gold)"},children:[i.jsxs("div",{style:{background:"var(--kb-navy)",padding:"1.25rem 1.5rem",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[i.jsxs("div",{children:[i.jsx("div",{style:{color:"var(--kb-gold)",fontFamily:"var(--font-display)",fontWeight:"700",fontSize:"1.5rem",letterSpacing:"0.02em"},children:"KINDERBUCKS"}),i.jsx("div",{style:{color:"rgba(255,255,255,0.7)",fontSize:"0.8rem",marginTop:"0.1rem"},children:"OK MEMBER CARD"})]}),i.jsx("div",{style:{width:"50px",height:"50px",background:"var(--kb-gold)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--kb-navy)",fontFamily:"var(--font-display)",fontWeight:"700",fontSize:"1.75rem"},children:"K"})]}),i.jsxs("div",{style:{padding:"1.5rem"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1.5rem"},children:[i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"1.4rem",fontWeight:"600",color:"var(--kb-navy)",marginBottom:"0.15rem"},children:n&&(e!=null&&e.displayName)?e.displayName:"OK Member"}),i.jsx("div",{style:{fontFamily:"monospace",fontSize:"0.95rem",color:"var(--kb-gray-500)"},children:K})]}),i.jsxs("div",{style:{background:`linear-gradient(135deg, ${P.primary} 0%, ${P.secondary} 100%)`,borderRadius:"12px",padding:"0.5rem 0.75rem",display:"flex",alignItems:"center",gap:"0.5rem",color:"white"},children:[i.jsx(V,{size:18}),i.jsx("span",{style:{fontWeight:"600",fontSize:"0.9rem"},children:T.name})]})]}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.75rem",marginBottom:"1.5rem"},children:Object.entries(az).map(([E,I])=>{const D=l[E]||0,L=cz(D,I.thresholds),z=lz[L.level],O=I.Icon;return i.jsxs("div",{style:{background:z.bg,border:`2px solid ${z.border}`,borderRadius:"12px",padding:"0.75rem",textAlign:"center"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.35rem",marginBottom:"0.35rem"},children:[i.jsx(O,{size:16,color:I.color}),i.jsx("span",{style:{fontSize:"0.75rem",fontWeight:"600",color:I.color,textTransform:"uppercase"},children:E})]}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:L.level==="none"?"var(--kb-gray-400)":z.text,lineHeight:1},children:D}),i.jsx("div",{style:{fontSize:"0.7rem",color:L.level==="none"?"var(--kb-gray-400)":z.text,marginTop:"0.15rem"},children:L.currentLabel||(L.nextThreshold?`${L.nextThreshold.count-D} to ${L.nextThreshold.label}`:"check-ins")})]},E)})}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",justifyContent:"center",marginBottom:"1rem"},children:[M>=5&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.35rem",padding:"0.4rem 0.75rem",background:"rgba(37, 99, 235, 0.1)",border:"1px solid #2563eb",borderRadius:"100px",fontSize:"0.75rem",fontWeight:"600",color:"#2563eb"},children:[i.jsx(M0,{size:14}),"Explorer"]}),((r==null?void 0:r.totalCheckins)||0)>=10&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.35rem",padding:"0.4rem 0.75rem",background:"rgba(39, 174, 96, 0.1)",border:"1px solid #27ae60",borderRadius:"100px",fontSize:"0.75rem",fontWeight:"600",color:"#27ae60"},children:[i.jsx(Lr,{size:14}),"Regular"]}),y>=7&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.35rem",padding:"0.4rem 0.75rem",background:"rgba(230, 126, 34, 0.1)",border:"1px solid #e67e22",borderRadius:"100px",fontSize:"0.75rem",fontWeight:"600",color:"#e67e22"},children:[i.jsx(_k,{size:14}),"On Fire!"]}),M>=15&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.35rem",padding:"0.4rem 0.75rem",background:"rgba(201, 162, 39, 0.15)",border:"2px solid var(--kb-gold)",borderRadius:"100px",fontSize:"0.75rem",fontWeight:"700",color:"var(--kb-gold-dark)"},children:[i.jsx(yr,{size:14}),"Completionist"]}),Object.values(l).some(E=>E>=5)&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.35rem",padding:"0.4rem 0.75rem",background:"rgba(155, 89, 182, 0.1)",border:"1px solid #9b59b6",borderRadius:"100px",fontSize:"0.75rem",fontWeight:"600",color:"#9b59b6"},children:[i.jsx(x5,{size:14}),"Loyalist"]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"1.5rem",padding:"0.75rem 0",borderTop:"1px solid var(--kb-gray-200)",borderBottom:"1px solid var(--kb-gray-200)",marginBottom:"1rem"},children:[i.jsxs("div",{style:{textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"1.4rem",fontWeight:"700",color:"var(--kb-navy)"},children:M}),i.jsx("div",{style:{fontSize:"0.75rem",color:"var(--kb-gray-500)"},children:"Businesses"})]}),i.jsxs("div",{style:{textAlign:"center"},children:[i.jsxs("div",{style:{fontSize:"1.4rem",fontWeight:"700",color:y>0?"var(--kb-green)":"var(--kb-navy)",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.25rem"},children:[y>0&&i.jsx(_k,{size:16,color:"var(--kb-green)"}),y]}),i.jsx("div",{style:{fontSize:"0.75rem",color:"var(--kb-gray-500)"},children:"This Week"})]}),i.jsxs("div",{style:{textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"1.4rem",fontWeight:"700",color:"var(--kb-navy)"},children:(r==null?void 0:r.totalCheckins)||0}),i.jsx("div",{style:{fontSize:"0.75rem",color:"var(--kb-gray-500)"},children:"All Time"})]})]}),i.jsxs("div",{style:{background:"var(--kb-cream)",borderRadius:"10px",padding:"0.75rem",textAlign:"center"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"0.25rem",color:"var(--kb-navy)",fontWeight:"600",fontSize:"0.9rem"},children:[i.jsx(Pr,{size:16}),"Scan QR codes to earn badges"]}),i.jsx("p",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)",margin:0},children:"Visit businesses to level up your categories"})]})]}),i.jsx("div",{style:{background:"var(--kb-cream)",padding:"0.75rem 1.5rem",textAlign:"center",borderTop:"1px solid var(--kb-gray-200)"},children:i.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:"Village of Kinderhook  Est. 2026"})})]}),h.length>0&&i.jsxs("div",{style:{marginTop:"1.5rem",background:"white",borderRadius:"16px",padding:"1rem",boxShadow:"0 4px 20px rgba(0,0,0,0.1)"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem",color:"var(--kb-navy)",fontWeight:"600"},children:[i.jsx(Sl,{size:18,color:"var(--kb-green)"}),"Partner Rewards"]}),i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:h.slice(0,3).map(E=>i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.6rem",background:E.isUnlocked?"rgba(39, 174, 96, 0.1)":"var(--kb-gray-50)",borderRadius:"10px",border:E.isUnlocked?"1px solid var(--kb-green)":"1px solid var(--kb-gray-200)"},children:[E.isUnlocked?i.jsx("div",{style:{width:"32px",height:"32px",background:"var(--kb-green)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:i.jsx(ti,{size:16,color:"white"})}):i.jsxs("div",{style:{width:"32px",height:"32px",background:"white",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,border:"2px solid var(--kb-gray-200)",fontSize:"0.75rem",fontWeight:"700",color:"var(--kb-gray-500)"},children:[E.currentCheckins,"/",E.requiredCheckins]}),i.jsxs("div",{style:{flex:1,minWidth:0},children:[i.jsx("div",{style:{fontSize:"0.85rem",fontWeight:"600",color:E.isUnlocked?"var(--kb-green)":"var(--kb-navy)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:E.reward}),i.jsx("div",{style:{fontSize:"0.7rem",color:"var(--kb-gray-500)"},children:E.isUnlocked?`Unlocked! Redeem at ${E.offeringBusinessName}`:`${E.checkinsRemaining} more visits to ${E.partnerBusinessName}`})]}),i.jsx(em,{size:16,color:"var(--kb-gray-400)"})]},E.id))}),h.length>3&&i.jsxs("div",{style:{textAlign:"center",marginTop:"0.5rem",fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:["+",h.length-3," more rewards available"]})]}),m.length>0&&i.jsxs("div",{style:{marginTop:"1.5rem",background:"white",borderRadius:"16px",padding:"1rem",boxShadow:"0 4px 20px rgba(0,0,0,0.1)"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem",color:"var(--kb-navy)",fontWeight:"600"},children:[i.jsx(Gu,{size:18,color:"var(--kb-navy)"}),"Recent Activity"]}),i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:m.map((E,I)=>{var z;const D=(z=E.timestamp)!=null&&z.toDate?E.timestamp.toDate():new Date(E.timestamp),L=q(D);return i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.5rem",background:"var(--kb-gray-50)",borderRadius:"8px"},children:[i.jsx("span",{style:{fontSize:"0.85rem",color:"var(--kb-navy)"},children:E.businessName}),i.jsx("span",{style:{fontSize:"0.75rem",color:"var(--kb-gray-500)"},children:L})]},I)})})]}),i.jsxs(fe,{to:"/map",className:"btn btn-gold",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",width:"100%",marginTop:"1.5rem",padding:"1rem",fontSize:"1.1rem"},children:[i.jsx(Pr,{size:22}),"Find a Business to Check In"]})]})})]})}const nd="kinderbucks",dz="scans";async function EE(t){const e=Ve(ye,nd,t),n=await On(e);return n.exists()?{serial:n.id,...n.data()}:null}async function TE(){const t=Mt(it(ye,nd),Vr("serial"));return(await ft(t)).docs.map(n=>({serial:n.id,...n.data()}))}async function hz(t,e){const n=t.map(r=>Fi(Ve(ye,nd,r),{serial:r,denomination:e,status:"draft",scanCount:0,createdAt:Be()}));await Promise.all(n)}async function fz(t,e,n=null){const r=Ve(ye,nd,t),o={status:e,issuedAt:Be(),...n&&{issuedTo:n}};await ut(r,o)}async function mz(t){const e=Ve(ye,nd,t);await ut(e,{scanCount:yo(1),lastScanned:Be(),status:"active"}),await qu(it(ye,dz),{serial:t,scannedAt:Be(),userAgent:navigator.userAgent||null})}async function pz(t){const e=await EE(t);return e?e.status!=="active"?{valid:!1,error:`Kinderbuck status is "${e.status}" - must be "active"`}:e.currentHolder&&e.holderType==="business"?{valid:!1,error:"Kinderbuck is already held by a business"}:{valid:!0,kb:e}:{valid:!1,error:"Kinderbuck not found"}}function CE(){const[t,e]=C.useState([]);return C.useEffect(()=>{const n=["#2d5a27","#c9a227","#4a7c43","#d4af37","#5c4033"],r=Array.from({length:50},(o,l)=>({id:l,x:Math.random()*100,color:n[Math.floor(Math.random()*n.length)],delay:Math.random()*.5,duration:2+Math.random()*2,size:8+Math.random()*8}));e(r)},[]),i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,pointerEvents:"none",overflow:"hidden",zIndex:100},children:t.map(n=>i.jsx(ce.div,{initial:{y:-20,x:`${n.x}vw`,opacity:1,rotate:0},animate:{y:"110vh",rotate:360*(Math.random()>.5?1:-1),opacity:[1,1,0]},transition:{duration:n.duration,delay:n.delay,ease:"linear"},style:{position:"absolute",width:n.size,height:n.size,background:n.color,borderRadius:Math.random()>.5?"50%":"2px"}},n.id))})}const Zw={1:{bg:"#d4edda",text:"#155724"},5:{bg:"#cce5ff",text:"#004085"},10:{bg:"#e2d5e7",text:"#4a235a"},20:{bg:"#fff3cd",text:"#856404"}};function gz({kinderbuck:t}){const e=Zw[t.denomination]||Zw[5];return i.jsxs(ce.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",duration:.5},className:"card",style:{textAlign:"center",maxWidth:"400px",background:e.bg},children:[i.jsxs(ce.div,{initial:{y:-20},animate:{y:0},transition:{delay:.2},children:[i.jsxs("h1",{style:{color:e.text,fontSize:"3rem",marginBottom:"0.5rem"},children:["$",t.denomination]}),i.jsx("p",{style:{fontFamily:"monospace",fontSize:"1.5rem",color:e.text},children:t.serial})]}),i.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},style:{marginTop:"1.5rem"},children:i.jsx("div",{style:{display:"inline-block",padding:"0.5rem 1rem",background:"rgba(255,255,255,0.7)",borderRadius:"20px",color:"var(--kb-green)",fontWeight:"bold"},children:"VERIFIED AUTHENTIC"})}),i.jsxs(ce.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},style:{marginTop:"1.5rem",fontSize:"0.9rem",opacity:.8},children:[i.jsxs("p",{children:["Status: ",i.jsx("strong",{children:t.status})]}),t.issuedAt&&i.jsxs("p",{children:["Issued: ",new Date(t.issuedAt.seconds*1e3).toLocaleDateString()]}),i.jsxs("p",{children:["Scans: ",t.scanCount||1]})]}),i.jsx(ce.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.8,type:"spring"},style:{marginTop:"1.5rem"},children:i.jsx("iframe",{src:"https://giphy.com/embed/B1txHfofr9y08bDB8b",width:"200",height:"200",frameBorder:"0",style:{borderRadius:"12px",pointerEvents:"none"},allowFullScreen:!0})})]})}function yz(){const{serial:t}=jf(),[e,n]=C.useState(null),[r,o]=C.useState(!0),[l,c]=C.useState(null);return C.useEffect(()=>{async function h(){try{const d=await EE(t);d?(n(d),await mz(t)):c("not_found")}catch(d){console.error("Verification error:",d),c("error")}finally{o(!1)}}h()},[t]),r?i.jsxs("div",{className:"page page-center",children:[i.jsx(ce.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},style:{fontSize:"3rem"},children:"$"}),i.jsxs("p",{style:{marginTop:"1rem"},children:["Verifying ",t,"..."]})]}):l==="not_found"?i.jsxs("div",{className:"page page-center",children:[i.jsx("h1",{style:{color:"#c0392b"},children:"Not Found"}),i.jsxs("p",{children:["Serial ",i.jsx("strong",{children:t})," is not a valid Kinderbuck."]})]}):l?i.jsxs("div",{className:"page page-center",children:[i.jsx("h1",{style:{color:"#c0392b"},children:"Error"}),i.jsx("p",{children:"Something went wrong verifying this Kinderbuck."})]}):i.jsxs("div",{className:"page page-center",children:[i.jsx(CE,{}),i.jsx(gz,{kinderbuck:e})]})}const vz={curious:xn,hooked:Lr,lineAndSinker:Rr,patron:yr},xz={curious:"#6b7280",hooked:"#16a34a",lineAndSinker:"#2563eb",patron:"#ca8a04"};function bz(t,e){const n=new Date,r=n.getHours().toString().padStart(2,"0")+n.getMinutes().toString().padStart(2,"0"),o=e.substring(0,4).toUpperCase();return`${t.substring(0,3).toUpperCase()}-${o}-${r}`}function kz(){const{businessCode:t}=jf(),{isAuthenticated:e}=gr(),[n,r]=C.useState(null),[o,l]=C.useState(!0),[c,h]=C.useState(null),[d,m]=C.useState(null),[g,y]=C.useState(!1),[x,S]=C.useState(!1),[w,_]=C.useState("");if(C.useEffect(()=>{async function q(){try{const A=await ed(t);if(!A){h("not_found"),l(!1);return}if(!A.isActive){h("inactive"),l(!1);return}if(r(A),!e){l(!1);return}const E=kf();if(_(bz(t,E)),await ez(E,t)){y(!0);const L=await td(E);L&&m({tierChanged:!1,newTier:L.tier,businessesVisited:L.businessesVisited||[],totalCheckins:L.totalCheckins||0,isNewBusiness:!1}),l(!1);return}const D=await q9(E,t);await tz(E,t,D.newTier),await B9(t),m(D),D.tierChanged&&D.newTier&&S(!0),l(!1)}catch(A){console.error("Check-in error:",A),h("error"),l(!1)}}q()},[t,e]),o)return i.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"linear-gradient(180deg, var(--kb-navy) 0%, #1a3a5c 100%)",padding:"2rem"},children:[i.jsx(ce.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:i.jsx(O0,{size:64,color:"var(--kb-gold)"})}),i.jsx("p",{style:{marginTop:"1.5rem",color:"white",fontSize:"1.25rem"},children:"Checking in..."})]});if(c==="not_found")return i.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#fef2f2",padding:"2rem",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:"?"}),i.jsx("h1",{style:{color:"#dc2626",fontSize:"1.75rem",marginBottom:"0.75rem"},children:"Business Not Found"}),i.jsx("p",{style:{color:"#7f1d1d",fontSize:"1.1rem",marginBottom:"2rem"},children:"This QR code doesn't match any participating business."}),i.jsx(fe,{to:"/",className:"btn btn-primary",style:{fontSize:"1.1rem",padding:"1rem 2rem"},children:"Go Home"})]});if(c==="inactive")return i.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#fffbeb",padding:"2rem",textAlign:"center"},children:[i.jsx("h1",{style:{color:"#d97706",fontSize:"1.75rem",marginBottom:"0.75rem"},children:"Business Not Active"}),i.jsx("p",{style:{color:"#92400e",fontSize:"1.1rem",marginBottom:"2rem"},children:"This business is not currently participating."}),i.jsx(fe,{to:"/",className:"btn btn-primary",style:{fontSize:"1.1rem",padding:"1rem 2rem"},children:"Go Home"})]});if(c)return i.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#fef2f2",padding:"2rem",textAlign:"center"},children:[i.jsx("h1",{style:{color:"#dc2626",fontSize:"1.75rem",marginBottom:"0.75rem"},children:"Something went wrong"}),i.jsx("p",{style:{color:"#7f1d1d",fontSize:"1.1rem",marginBottom:"2rem"},children:"Please try scanning again."}),i.jsx(fe,{to:"/",className:"btn btn-primary",style:{fontSize:"1.1rem",padding:"1rem 2rem"},children:"Go Home"})]});const T=(d==null?void 0:d.newTier)||"curious",P=Nr[T],V=xz[T],M=vz[T],F=Math.round(P.bonus*100),K=e?g?"#6b7280":V:"var(--kb-navy)";return i.jsxs("div",{style:{minHeight:"100vh",background:`linear-gradient(180deg, ${K} 0%, ${K}dd 100%)`,padding:"1.5rem",display:"flex",flexDirection:"column"},children:[x&&i.jsx(CE,{}),i.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",maxWidth:"400px",margin:"0 auto",width:"100%"},children:[g?i.jsxs(ce.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},style:{textAlign:"center",color:"white"},children:[i.jsx(hr,{size:80,strokeWidth:1.5,style:{marginBottom:"1rem",opacity:.8}}),i.jsx("h1",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"Already Checked In"}),i.jsxs("p",{style:{fontSize:"1.25rem",opacity:.9,marginBottom:"2rem"},children:["at ",n.name]}),i.jsxs("p",{style:{fontSize:"1.1rem",opacity:.8},children:["Come back in about an hour",i.jsx("br",{}),"for another check-in!"]})]}):e?i.jsxs(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{width:"100%"},children:[i.jsxs("div",{style:{textAlign:"center",color:"white",marginBottom:"1.5rem"},children:[i.jsx(ce.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.2},children:i.jsx("div",{style:{width:"80px",height:"80px",background:"rgba(255,255,255,0.2)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:i.jsx(ti,{size:48,strokeWidth:2.5})})}),i.jsx("h1",{style:{fontSize:"1.75rem",marginBottom:"0.25rem"},children:"Checked In!"}),i.jsx("p",{style:{fontSize:"1.25rem",opacity:.9},children:n.name})]}),i.jsxs(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},style:{background:"white",borderRadius:"24px",padding:"2rem",textAlign:"center",boxShadow:"0 10px 40px rgba(0,0,0,0.2)"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"1rem"},children:[i.jsx(M,{size:28,color:V}),i.jsx("span",{style:{fontSize:"1.25rem",fontWeight:"700",color:V,textTransform:"uppercase"},children:P.name})]}),i.jsxs("div",{style:{background:`${V}15`,borderRadius:"16px",padding:"1.5rem",marginBottom:"1.5rem"},children:[i.jsxs("div",{style:{fontSize:"4rem",fontWeight:"800",color:V,lineHeight:1},children:[F,"%"]}),i.jsx("div",{style:{fontSize:"1.1rem",color:"var(--kb-gray-600)",marginTop:"0.25rem"},children:"Exchange Bonus"})]}),i.jsxs("div",{style:{background:"var(--kb-navy)",borderRadius:"12px",padding:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[i.jsx(_5,{size:18,color:"var(--kb-gold)"}),i.jsx("span",{style:{color:"var(--kb-gold)",fontSize:"0.85rem",fontWeight:"600"},children:"VERIFICATION CODE"})]}),i.jsx("div",{style:{fontFamily:"monospace",fontSize:"1.75rem",fontWeight:"700",color:"white",letterSpacing:"0.1em"},children:w})]}),i.jsxs("p",{style:{fontSize:"1.1rem",color:"var(--kb-gray-600)",lineHeight:1.5},children:["Show this screen to the cashier",i.jsx("br",{}),"to receive your ",i.jsxs("strong",{children:[F,"% bonus"]})]})]}),(d==null?void 0:d.tierChanged)&&i.jsxs(ce.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},style:{marginTop:"1.5rem",padding:"1rem",background:"rgba(255,255,255,0.15)",borderRadius:"12px",textAlign:"center",color:"white"},children:[i.jsx("span",{style:{fontSize:"1.25rem"},children:""}),i.jsxs("span",{style:{marginLeft:"0.5rem",fontWeight:"600"},children:["You just leveled up to ",P.name,"!"]})]})]}):i.jsxs(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{width:"100%"},children:[i.jsxs("div",{style:{textAlign:"center",color:"white",marginBottom:"1.5rem"},children:[i.jsx(ce.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.2},children:i.jsx("div",{style:{width:"80px",height:"80px",background:"rgba(255,255,255,0.2)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:i.jsx(hf,{size:40,strokeWidth:1.5})})}),i.jsxs("h1",{style:{fontSize:"1.75rem",marginBottom:"0.25rem"},children:["Welcome to ",n.name,"!"]}),i.jsx("p",{style:{fontSize:"1.1rem",opacity:.9},children:"Sign in to complete your check-in and unlock your discount"})]}),i.jsxs(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},style:{background:"white",borderRadius:"24px",padding:"2rem",textAlign:"center",boxShadow:"0 10px 40px rgba(0,0,0,0.2)"},children:[i.jsx("div",{style:{width:"60px",height:"60px",background:"var(--kb-gold)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.25rem"},children:i.jsx(Sl,{size:28,color:"var(--kb-navy)"})}),i.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem",fontSize:"1.5rem"},children:"Your Discount is Waiting!"}),i.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"1rem",marginBottom:"1.5rem",lineHeight:1.5},children:"Create a free OK Member account to unlock your exclusive bonus discount."}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",marginBottom:"1.5rem",textAlign:"left",background:"var(--kb-cream)",borderRadius:"12px",padding:"1rem 1.25rem"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"0.95rem",color:"var(--kb-gray-700)"},children:[i.jsx("div",{style:{width:"24px",height:"24px",background:"var(--kb-green)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(ti,{size:14,color:"white"})}),"Unlock your discount code"]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"0.95rem",color:"var(--kb-gray-700)"},children:[i.jsx("div",{style:{width:"24px",height:"24px",background:"var(--kb-green)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(ti,{size:14,color:"white"})}),"Track your tier progress"]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"0.95rem",color:"var(--kb-gray-700)"},children:[i.jsx("div",{style:{width:"24px",height:"24px",background:"var(--kb-green)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(ti,{size:14,color:"white"})}),"Get your digital OK Member Card"]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"0.95rem",color:"var(--kb-gray-700)"},children:[i.jsx("div",{style:{width:"24px",height:"24px",background:"var(--kb-green)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(ti,{size:14,color:"white"})}),"Earn higher bonuses as you level up"]})]}),i.jsxs(fe,{to:`/login?redirect=/checkin/${t}`,className:"btn btn-gold",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",padding:"1rem",fontSize:"1.15rem",marginBottom:"0.75rem"},children:[i.jsx(hf,{size:22}),"Sign Up Free"]}),i.jsxs("p",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:["Already have an account? ",i.jsx(fe,{to:`/login?redirect=/checkin/${t}`,style:{color:"var(--kb-navy)",fontWeight:"600"},children:"Sign In"})]})]})]}),i.jsxs(ce.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},style:{marginTop:"2rem",display:"flex",gap:"0.75rem"},children:[i.jsx(fe,{to:"/profile",className:"btn",style:{background:"rgba(255,255,255,0.2)",color:"white",padding:"0.875rem 1.5rem",fontSize:"1rem"},children:"My Profile"}),i.jsx(fe,{to:"/",className:"btn",style:{background:"white",color:"var(--kb-navy)",padding:"0.875rem 1.5rem",fontSize:"1rem"},children:"Home"})]})]})]})}const lm="promoCodes";async function Eh(t){const e=Mt(it(ye,lm),un("businessCode","==",t),Vr("createdAt","desc"));return(await ft(e)).docs.map(r=>({id:r.id,...r.data()}))}async function wz({businessCode:t,code:e,description:n,discountType:r,discountValue:o,minTier:l,expiresAt:c,usageLimit:h}){const d=`${t}-${e.toUpperCase()}`;return await Fi(Ve(ye,lm,d),{businessCode:t,code:e.toUpperCase(),description:n,discountType:r,discountValue:o,minTier:l||null,expiresAt:c||null,usageLimit:h||null,usageCount:0,isActive:!0,createdAt:Be()}),d}async function Sz(t,e){const n=Ve(ye,lm,t);await ut(n,{isActive:e})}async function _z(t){await Zf(Ve(ye,lm,t))}const rd="transactions";async function jz(t,e,n){const r=R0(ye),o=Ve(ye,"kinderbucks",t),l=await On(o);if(!l.exists())throw new Error("Kinderbuck not found");const h=l.data().denomination;r.update(o,{currentHolder:e,holderType:"business",lastTransferAt:Be()});const d=Ve(ye,"businesses",e);r.update(d,{kinderbucksBalance:yo(h),lifetimeAccepted:yo(h)});const m=Ve(it(ye,rd));return r.set(m,{type:"payment",kinderbuckSerial:t,denomination:h,businessCode:e,businessName:n,amount:h,status:"completed",createdAt:Be()}),await r.commit(),{serial:t,amount:h,businessCode:e}}async function Ez(t,e=50){const n=Mt(it(ye,rd),un("businessCode","==",t),Vr("createdAt","desc"));return(await ft(n)).docs.slice(0,e).map(o=>({id:o.id,...o.data()}))}async function Tz(t,e,n){return{id:(await qu(it(ye,rd),{type:"redemption",businessCode:t,businessName:e,amount:n,status:"pending",createdAt:Be()})).id,amount:n,businessCode:t}}async function Cz(t,e,n){const r=Ve(ye,rd,t),o=await On(r);if(!o.exists())throw new Error("Transaction not found");const l=o.data();if(l.status!=="pending")throw new Error("Transaction already processed");const c=R0(ye);if(c.update(r,{status:e?"approved":"rejected",processedBy:n,processedAt:Be()}),e){const h=Ve(ye,"businesses",l.businessCode);c.update(h,{kinderbucksBalance:yo(-l.amount),lifetimeRedeemed:yo(l.amount)});const d=Mt(it(ye,"kinderbucks"),un("currentHolder","==",l.businessCode),un("status","==","active")),m=await ft(d);let g=l.amount;const y=[];for(const x of m.docs){if(g<=0)break;const S=x.data();c.update(x.ref,{status:"redeemed",redeemedAt:Be(),redeemedInTransaction:t}),g-=S.denomination,y.push(x.id)}c.update(r,{redeemedSerials:y})}return await c.commit(),{txnId:t,approved:e,status:e?"approved":"rejected"}}async function Iz(){const t=Mt(it(ye,rd),un("type","==","redemption"),Vr("createdAt","desc"));return(await ft(t)).docs.map(n=>({id:n.id,...n.data()}))}function Az({isOpen:t,onClose:e,businessCode:n,businessName:r,currentBalance:o,onSuccess:l}){const[c,h]=C.useState(""),[d,m]=C.useState(!1),[g,y]=C.useState(""),[x,S]=C.useState(!1),w=async T=>{T.preventDefault(),y("");const P=parseFloat(c);if(!P||P<=0){y("Please enter a valid amount");return}if(P>o){y(`Amount exceeds your balance of $${o}`);return}m(!0);try{await Tz(n,r,P),S(!0),setTimeout(()=>{l==null||l(),e(),S(!1),h("")},2e3)}catch(V){console.error("Error creating redemption:",V),y("Failed to create redemption request")}m(!1)},_=()=>{d||(h(""),y(""),S(!1),e())};return t?i.jsx(El,{children:i.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},onClick:_,children:i.jsxs(ce.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"card",style:{maxWidth:"400px",width:"100%",padding:0,overflow:"hidden"},onClick:T=>T.stopPropagation(),children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1.25rem 1.5rem",borderBottom:"1px solid var(--kb-gray-200)",background:"var(--kb-gray-50)"},children:[i.jsxs("h3",{style:{margin:0,color:"var(--kb-navy)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(Ll,{size:20}),"Request Redemption"]}),i.jsx("button",{onClick:_,style:{background:"none",border:"none",cursor:"pointer",padding:"0.25rem",color:"var(--kb-gray-500)"},children:i.jsx(rm,{size:20})})]}),i.jsx("div",{style:{padding:"1.5rem"},children:x?i.jsxs("div",{style:{textAlign:"center",padding:"2rem 0"},children:[i.jsx("div",{style:{width:"64px",height:"64px",background:"rgba(39, 174, 96, 0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:i.jsx(vn,{size:32,color:"var(--kb-green)"})}),i.jsx("h4",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"Request Submitted"}),i.jsxs("p",{style:{color:"var(--kb-gray-600)",margin:0},children:["Your redemption request for $",c," has been submitted for admin approval."]})]}):i.jsxs("form",{onSubmit:w,children:[i.jsxs("div",{style:{background:"linear-gradient(135deg, var(--kb-gold) 0%, var(--kb-gold-dark) 100%)",borderRadius:"12px",padding:"1.25rem",marginBottom:"1.5rem",color:"white",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.85rem",opacity:.9,marginBottom:"0.25rem"},children:"Available Balance"}),i.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700"},children:["$",o.toFixed(2)]})]}),i.jsxs("div",{style:{marginBottom:"1.5rem"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Amount to Redeem (USD)"}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("span",{style:{position:"absolute",left:"1rem",top:"50%",transform:"translateY(-50%)",color:"var(--kb-gray-500)",fontWeight:"500"},children:"$"}),i.jsx("input",{type:"number",value:c,onChange:T=>h(T.target.value),placeholder:"0.00",min:"1",max:o,step:"0.01",style:{width:"100%",paddingLeft:"2rem",fontSize:"1.25rem",fontWeight:"500"},required:!0})]}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.75rem",flexWrap:"wrap"},children:[[25,50,100].map(T=>o>=T&&i.jsxs("button",{type:"button",onClick:()=>h(T.toString()),className:"btn btn-secondary",style:{padding:"0.4rem 0.75rem",fontSize:"0.85rem"},children:["$",T]},T)),i.jsx("button",{type:"button",onClick:()=>h(o.toString()),className:"btn btn-secondary",style:{padding:"0.4rem 0.75rem",fontSize:"0.85rem"},children:"Max"})]})]}),g&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",background:"#fef2f2",borderRadius:"8px",color:"#dc2626",marginBottom:"1rem",fontSize:"0.9rem"},children:[i.jsx(hs,{size:18}),g]}),i.jsxs("div",{style:{padding:"1rem",background:"var(--kb-gray-50)",borderRadius:"8px",marginBottom:"1.5rem",fontSize:"0.85rem",color:"var(--kb-gray-600)"},children:[i.jsx("strong",{children:"How it works:"})," Your request will be reviewed by an administrator. Once approved, you'll receive USD equivalent and the corresponding Kinderbucks bills will be marked as redeemed."]}),i.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[i.jsx("button",{type:"button",onClick:_,className:"btn btn-secondary",style:{flex:1},disabled:d,children:"Cancel"}),i.jsx("button",{type:"submit",className:"btn btn-primary",style:{flex:1},disabled:d||!c,children:d?"Submitting...":"Submit Request"})]})]})})]})})}):null}function Rz(){const{profile:t}=gr(),e=bo(),[n,r]=C.useState(null),[o,l]=C.useState([]),[c,h]=C.useState([]),[d,m]=C.useState([]),[g,y]=C.useState([]),[x,S]=C.useState([]),[w,_]=C.useState(!0),[T,P]=C.useState("overview"),[V,M]=C.useState(!1),[F,K]=C.useState(!1),[q,A]=C.useState(!1),[E,I]=C.useState(!1),[D,L]=C.useState(null),[z,O]=C.useState({code:"",description:"",discountType:"percent",discountValue:10,minTier:"",expiresAt:"",usageLimit:""}),[Re,$e]=C.useState(!1),[tt,Ce]=C.useState([]),[ie,me]=C.useState(!1),[ue,$]=C.useState({checkinsRequired:5,reward:"",rewardType:"discount",rewardValue:10}),[te,Ie]=C.useState(!1),[Te,Le]=C.useState([]),[ze,se]=C.useState(!1),[G,pe]=C.useState({partnerBusiness:"",requiredCheckins:5,reward:"",rewardType:"discount",rewardValue:10}),[qe,gt]=C.useState(!1),[qt,yt]=C.useState(""),[dn,bn]=C.useState([]),[Pn,Bn]=C.useState(!1),[zn,lt]=C.useState({amount:5,description:""}),[dt,Fn]=C.useState(!1),Es=async()=>{if(!(t!=null&&t.businessCode)){_(!1);return}try{const[U,ne,Se,He,St,kn]=await Promise.all([F9(t.businessCode),jE(t.businessCode),Eh(t.businessCode).catch(()=>[]),Xn(),nz(),Ez(t.businessCode).catch(()=>[])]);r(U),l(ne),h(Se),m(He.filter(pi=>pi.isActive)),y(St),S(kn),Ce((U==null?void 0:U.loyaltyRewards)||[]),Le((U==null?void 0:U.crossRewards)||[]),yt((U==null?void 0:U.okMemberDiscount)||""),bn((U==null?void 0:U.kinderbucksSpecials)||[])}catch(U){console.error("Error loading business data:",U)}_(!1)};C.useEffect(()=>{Es()},[t==null?void 0:t.businessCode]);const To=()=>{const U=`https://harmonicsystems.github.io/kinderbucks/#/checkin/${t.businessCode}`;navigator.clipboard.writeText(U),K(!0),setTimeout(()=>K(!1),2e3)};o.filter(U=>{var He;const ne=(He=U.timestamp)!=null&&He.toDate?U.timestamp.toDate():new Date(U.timestamp),Se=new Date;return ne.toDateString()===Se.toDateString()}).length;const Ts=o.filter(U=>{var He;const ne=(He=U.timestamp)!=null&&He.toDate?U.timestamp.toDate():new Date(U.timestamp),Se=new Date;return Se.setDate(Se.getDate()-7),ne>Se}).length,vr=o.filter(U=>{var St;const ne=(St=U.timestamp)!=null&&St.toDate?U.timestamp.toDate():new Date(U.timestamp),Se=new Date,He=new Date;return Se.setDate(Se.getDate()-7),He.setDate(He.getDate()-14),ne>He&&ne<=Se}).length,zr=vr>0?Math.round((Ts-vr)/vr*100):Ts>0?100:0,Cs=new Set(o.map(U=>U.visitorId)).size,xr=g.length,_a=g.filter(U=>{var He;const ne=(He=U.timestamp)!=null&&He.toDate?U.timestamp.toDate():new Date(U.timestamp),Se=new Date;return Se.setDate(Se.getDate()-7),ne>Se}).length,ui=d.sort((U,ne)=>(ne.checkinCount||0)-(U.checkinCount||0)).slice(0,5),Fr=d.sort((U,ne)=>(ne.checkinCount||0)-(U.checkinCount||0)).findIndex(U=>U.code===(t==null?void 0:t.businessCode))+1,ja=async U=>{if(U.preventDefault(),!(!z.code||!z.description)){$e(!0);try{await wz({businessCode:t.businessCode,code:z.code,description:z.description,discountType:z.discountType,discountValue:Number(z.discountValue),minTier:z.minTier||null,expiresAt:z.expiresAt?new Date(z.expiresAt):null,usageLimit:z.usageLimit?Number(z.usageLimit):null});const ne=await Eh(t.businessCode);h(ne),O({code:"",description:"",discountType:"percent",discountValue:10,minTier:"",expiresAt:"",usageLimit:""}),A(!1)}catch(ne){console.error("Error creating promo:",ne),alert("Error creating promo code")}$e(!1)}},di=async(U,ne)=>{await Sz(U,!ne);const Se=await Eh(t.businessCode);h(Se)},Is=async U=>{if(!confirm("Delete this promo code?"))return;await _z(U);const ne=await Eh(t.businessCode);h(ne)},Co=async U=>{if(U.preventDefault(),!!ue.reward){Ie(!0);try{const ne={checkinsRequired:Number(ue.checkinsRequired),reward:ue.reward,rewardType:ue.rewardType,rewardValue:Number(ue.rewardValue)},Se=[...tt,ne].sort((He,St)=>He.checkinsRequired-St.checkinsRequired);await Yw(t.businessCode,Se),Ce(Se),$({checkinsRequired:5,reward:"",rewardType:"discount",rewardValue:10}),me(!1)}catch(ne){console.error("Error adding loyalty reward:",ne),alert("Error adding loyalty reward")}Ie(!1)}},Jn=async U=>{if(!confirm("Remove this reward tier?"))return;const ne=tt.filter((Se,He)=>He!==U);await Yw(t.businessCode,ne),Ce(ne)},As=async U=>{if(U.preventDefault(),!(!G.partnerBusiness||!G.reward)){gt(!0);try{const ne={id:`cr-${Date.now()}`,partnerBusiness:G.partnerBusiness,requiredCheckins:Number(G.requiredCheckins),reward:G.reward,rewardType:G.rewardType,rewardValue:Number(G.rewardValue),isActive:!0},Se=[...Te,ne];await yg(t.businessCode,Se),Le(Se),pe({partnerBusiness:"",requiredCheckins:5,reward:"",rewardType:"discount",rewardValue:10}),se(!1)}catch(ne){console.error("Error adding cross-reward:",ne),alert("Error adding partner reward")}gt(!1)}},hi=async U=>{if(!confirm("Remove this partner reward?"))return;const ne=Te.filter(Se=>Se.id!==U);await yg(t.businessCode,ne),Le(ne)},Rs=async U=>{const ne=Te.map(Se=>Se.id===U?{...Se,isActive:!Se.isActive}:Se);await yg(t.businessCode,ne),Le(ne)},Ur=async U=>{U.preventDefault(),Fn(!0);try{await W9(t.businessCode,qt)}catch(ne){console.error("Error saving OK discount:",ne),alert("Error saving discount")}Fn(!1)},Wr=async U=>{if(U.preventDefault(),!zn.description)return;const ne=[...dn,{amount:parseInt(zn.amount),description:zn.description}];try{await Qw(t.businessCode,ne),bn(ne),lt({amount:5,description:""}),Bn(!1)}catch(Se){console.error("Error adding KB special:",Se),alert("Error adding special")}},wt=async U=>{const ne=dn.filter((Se,He)=>He!==U);try{await Qw(t.businessCode,ne),bn(ne)}catch(Se){console.error("Error removing KB special:",Se)}};if(w)return i.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[i.jsx(Zt,{}),i.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",background:"var(--kb-cream)"},children:i.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading..."})}),i.jsx(en,{})]});if(!(t!=null&&t.businessCode))return i.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[i.jsx(Zt,{}),i.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",background:"var(--kb-cream)",padding:"2rem"},children:i.jsxs("div",{className:"card",style:{maxWidth:"400px",textAlign:"center",padding:"2rem"},children:[i.jsx(It,{size:48,color:"var(--kb-gray-400)",style:{marginBottom:"1rem"}}),i.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"No Business Assigned"}),i.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem"},children:"Your account doesn't have a business assigned yet. Contact an administrator to get set up."}),i.jsx(fe,{to:"/",className:"btn btn-primary",children:"Go Home"})]})}),i.jsx(en,{})]});const Io=`https://harmonicsystems.github.io/kinderbucks/#/checkin/${t.businessCode}`,fi=[{key:"overview",label:"Overview",icon:N0},{key:"kinderbucks",label:"Kinderbucks",icon:ii},{key:"loyalty",label:"Loyalty Rewards",icon:Sl},{key:"qrcode",label:"QR Code",icon:Pr},{key:"promos",label:"Promo Codes",icon:Gc},{key:"trends",label:"Village Trends",icon:bs},{key:"guide",label:"Resource Guide",icon:ey}],mi=[{id:"qr-setup",title:"Setting Up Your QR Code",icon:Pr,content:["Print your unique QR code and display it prominently at your counter or entrance","Use a stand or frame to keep it visible and accessible for customers","Consider printing multiple codes for different checkout areas","Test the code regularly to ensure it scans correctly"]},{id:"customer-flow",title:"Customer Check-in Flow",icon:ry,content:["Customers scan the QR code with their phone camera","They're taken to your check-in page (no app download needed)","If signed in, they earn a check-in toward their OK Member status","Their tier badge appears so you can offer appropriate discounts"]},{id:"tier-discounts",title:"Member Tier Discounts",icon:Rr,content:["Curious (0-4 check-ins): New to Kinderhook - welcome them warmly!","Hooked (5-14 check-ins): Regular visitors - consider small perks","Line & Sinker (15-29 check-ins): Loyal customers - offer meaningful discounts","Village Patron (30+ check-ins): Your best customers - VIP treatment!"]},{id:"promo-tips",title:"Creating Effective Promos",icon:Gc,content:["Create tier-specific promos to reward loyalty","Set expiration dates to create urgency","Use memorable, easy-to-type codes","Track usage to see what resonates with customers"]}];return i.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[i.jsx(Zt,{}),i.jsx("main",{style:{flex:1,background:"var(--kb-cream)",padding:"2rem 1rem"},children:i.jsxs("div",{style:{maxWidth:"1100px",margin:"0 auto"},children:[i.jsx(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{marginBottom:"1.5rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("div",{className:"badge badge-gold",style:{marginBottom:"0.5rem"},children:"Business Resource Center"}),i.jsx("h1",{style:{color:"var(--kb-navy)",marginBottom:"0.25rem"},children:(n==null?void 0:n.name)||t.businessCode}),i.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"Manage check-ins, promos, and see village trends"})]}),Fr>0&&i.jsxs("div",{style:{background:"linear-gradient(135deg, var(--kb-gold) 0%, var(--kb-gold-dark) 100%)",color:"white",padding:"0.75rem 1.25rem",borderRadius:"12px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",opacity:.9},children:"Village Rank"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700"},children:["#",Fr]})]})]})}),i.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem",overflowX:"auto",paddingBottom:"0.5rem"},children:fi.map(U=>{const ne=U.icon;return i.jsxs("button",{onClick:()=>P(U.key),className:"btn",style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.6rem 1rem",background:T===U.key?"var(--kb-navy)":"white",color:T===U.key?"white":"var(--kb-gray-600)",border:"1px solid var(--kb-gray-200)",whiteSpace:"nowrap"},children:[i.jsx(ne,{size:16}),U.label]},U.key)})}),T==="overview"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[i.jsx(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card",style:{padding:"1.25rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[i.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(39, 174, 96, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(bs,{size:22,color:"var(--kb-green)"})}),i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:(n==null?void 0:n.checkinCount)||0}),i.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Total Check-ins"})]})]})}),i.jsx(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card",style:{padding:"1.25rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[i.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(52, 152, 219, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(Gu,{size:22,color:"#3498db"})}),i.jsxs("div",{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx("span",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:Ts}),zr!==0&&i.jsxs("span",{style:{fontSize:"0.75rem",padding:"0.15rem 0.4rem",borderRadius:"4px",background:zr>0?"rgba(39, 174, 96, 0.1)":"rgba(231, 76, 60, 0.1)",color:zr>0?"var(--kb-green)":"#e74c3c"},children:[zr>0?"+":"",zr,"%"]})]}),i.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"This Week"})]})]})}),i.jsx(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"card",style:{padding:"1.25rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[i.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(201, 162, 39, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(ln,{size:22,color:"var(--kb-gold-dark)"})}),i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:Cs}),i.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Unique Visitors"})]})]})}),i.jsx(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"card",style:{padding:"1.25rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[i.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(155, 89, 182, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(Gc,{size:22,color:"#9b59b6"})}),i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:c.filter(U=>U.isActive).length}),i.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Active Promos"})]})]})})]}),i.jsxs(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"card",children:[i.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(hr,{size:20})," Recent Check-ins"]}),o.length===0?i.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[i.jsx(ln,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),i.jsx("p",{children:"No check-ins yet"}),i.jsx("p",{style:{fontSize:"0.9rem"},children:"Display your QR code to start receiving check-ins!"}),i.jsx("button",{onClick:()=>P("qrcode"),className:"btn btn-gold",style:{marginTop:"1rem"},children:"View QR Code"})]}):i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:o.slice(0,10).map((U,ne)=>{var St;const Se=(St=U.timestamp)!=null&&St.toDate?U.timestamp.toDate():new Date(U.timestamp),He={"Village Patron":"#9b59b6","Line & Sinker":"#c9a227",Hooked:"#27ae60",Curious:"#3498db"};return i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"var(--kb-gray-50)",borderRadius:"8px"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[i.jsx("div",{style:{width:"36px",height:"36px",background:"var(--kb-green)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(vn,{size:18,color:"white"})}),i.jsxs("div",{children:[i.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:"Check-in recorded"}),U.tier&&i.jsx("span",{style:{fontSize:"0.75rem",padding:"0.1rem 0.5rem",borderRadius:"4px",background:`${He[U.tier]||"#95a5a6"}20`,color:He[U.tier]||"#95a5a6",fontWeight:"500"},children:U.tier})]})]}),i.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:Se.toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]},U.id||ne)})})]})]}),T==="kinderbucks"&&i.jsxs(i.Fragment,{children:[i.jsx(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",style:{marginBottom:"1.5rem",background:"linear-gradient(135deg, var(--kb-gold) 0%, var(--kb-gold-dark) 100%)",color:"white",padding:"2rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"1.5rem"},children:[i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"0.9rem",opacity:.9,marginBottom:"0.25rem"},children:"Current Kinderbucks Balance"}),i.jsxs("div",{style:{fontSize:"3rem",fontWeight:"700",lineHeight:1},children:["$",((n==null?void 0:n.kinderbucksBalance)||0).toFixed(2)]}),i.jsx("div",{style:{fontSize:"0.85rem",opacity:.8,marginTop:"0.5rem"},children:"Available for redemption to USD"})]}),i.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[i.jsxs("button",{onClick:()=>e("/business/accept-payment"),className:"btn",style:{background:"rgba(255,255,255,0.2)",color:"white",display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(ni,{size:18}),"Accept Payment"]}),i.jsxs("button",{onClick:()=>I(!0),className:"btn",style:{background:"white",color:"var(--kb-gold-dark)",display:"flex",alignItems:"center",gap:"0.5rem"},disabled:((n==null?void 0:n.kinderbucksBalance)||0)===0,children:[i.jsx(Ll,{size:18}),"Request Redemption"]})]})]})}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[i.jsx(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card",style:{padding:"1.25rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[i.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(39, 174, 96, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(kk,{size:22,color:"var(--kb-green)"})}),i.jsxs("div",{children:[i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"var(--kb-navy)"},children:["$",((n==null?void 0:n.lifetimeAccepted)||0).toFixed(0)]}),i.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Total Accepted"})]})]})}),i.jsx(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card",style:{padding:"1.25rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[i.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(52, 152, 219, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(wk,{size:22,color:"#3498db"})}),i.jsxs("div",{children:[i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"var(--kb-navy)"},children:["$",((n==null?void 0:n.lifetimeRedeemed)||0).toFixed(0)]}),i.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Total Redeemed"})]})]})}),i.jsx(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"card",style:{padding:"1.25rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[i.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(155, 89, 182, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(ii,{size:22,color:"#9b59b6"})}),i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"var(--kb-navy)"},children:x.filter(U=>U.type==="payment").length}),i.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Payments Received"})]})]})})]}),i.jsxs(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"card",children:[i.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(hr,{size:20})," Recent Transactions"]}),x.length===0?i.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[i.jsx(ii,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),i.jsx("p",{children:"No transactions yet"}),i.jsx("p",{style:{fontSize:"0.9rem"},children:"Accept Kinderbucks payments to see them here."}),i.jsx("button",{onClick:()=>e("/business/accept-payment"),className:"btn btn-gold",style:{marginTop:"1rem"},children:"Accept First Payment"})]}):i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:x.slice(0,10).map((U,ne)=>{var St,kn;const Se=(St=U.createdAt)!=null&&St.toDate?U.createdAt.toDate():new Date(U.createdAt),He=U.type==="payment";return i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"var(--kb-gray-50)",borderRadius:"8px"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[i.jsx("div",{style:{width:"36px",height:"36px",background:He?"rgba(39, 174, 96, 0.1)":"rgba(52, 152, 219, 0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:He?i.jsx(kk,{size:18,color:"var(--kb-green)"}):i.jsx(wk,{size:18,color:"#3498db"})}),i.jsxs("div",{children:[i.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:He?"Payment received":"Redemption"}),U.kinderbuckSerial&&i.jsx("span",{style:{fontSize:"0.75rem",fontFamily:"monospace",color:"var(--kb-gray-500)"},children:U.kinderbuckSerial}),U.status==="pending"&&i.jsx("span",{style:{fontSize:"0.75rem",padding:"0.1rem 0.4rem",borderRadius:"4px",background:"#fff3cd",color:"#856404",marginLeft:"0.5rem"},children:"Pending"})]})]}),i.jsxs("div",{style:{textAlign:"right"},children:[i.jsxs("div",{style:{fontWeight:"600",color:He?"var(--kb-green)":"#3498db"},children:[He?"+":"-","$",(kn=U.amount)==null?void 0:kn.toFixed(2)]}),i.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:Se.toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]})]},U.id||ne)})})]})]}),T==="qrcode"&&i.jsx(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",style:{padding:"2rem"},children:i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"2rem",alignItems:"start"},children:[i.jsxs("div",{style:{textAlign:"center"},children:[i.jsx("div",{style:{background:"linear-gradient(135deg, var(--kb-green) 0%, #1e8449 100%)",borderRadius:"20px",padding:"4px",display:"inline-block"},children:i.jsxs("div",{style:{background:"white",borderRadius:"18px",padding:"20px"},children:[i.jsx("div",{style:{fontSize:"11px",fontWeight:"600",color:"var(--kb-green)",letterSpacing:"2px",marginBottom:"12px"},children:"CHECK IN AT"}),i.jsx(xa,{value:Io,size:180,denomination:1,showFrame:!1}),i.jsx("div",{style:{marginTop:"12px",fontWeight:"600",color:"var(--kb-navy)",fontSize:"1.1rem"},children:n==null?void 0:n.name})]})}),i.jsxs("div",{style:{marginTop:"1.5rem",display:"flex",gap:"0.5rem",justifyContent:"center",flexWrap:"wrap"},children:[i.jsxs("button",{onClick:()=>window.print(),className:"btn btn-gold",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(z0,{size:18})," Print"]}),i.jsxs("button",{onClick:To,className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[F?i.jsx(vn,{size:18}):i.jsx(V0,{size:18}),F?"Copied!":"Copy URL"]})]})]}),i.jsxs("div",{children:[i.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"How Customers Use This"}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[i.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"start"},children:[i.jsx("div",{style:{width:"32px",height:"32px",background:"var(--kb-navy)",color:"white",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"600",fontSize:"0.9rem",flexShrink:0},children:"1"}),i.jsxs("div",{children:[i.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:"Customer scans with phone"}),i.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"Using their camera app or QR reader"})]})]}),i.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"start"},children:[i.jsx("div",{style:{width:"32px",height:"32px",background:"var(--kb-navy)",color:"white",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"600",fontSize:"0.9rem",flexShrink:0},children:"2"}),i.jsxs("div",{children:[i.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:"Opens check-in page"}),i.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"No app download required!"})]})]}),i.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"start"},children:[i.jsx("div",{style:{width:"32px",height:"32px",background:"var(--kb-navy)",color:"white",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"600",fontSize:"0.9rem",flexShrink:0},children:"3"}),i.jsxs("div",{children:[i.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:'They tap "Check In"'}),i.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"Earns progress toward their OK Member tier"})]})]}),i.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"start"},children:[i.jsx("div",{style:{width:"32px",height:"32px",background:"var(--kb-green)",color:"white",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:i.jsx(vn,{size:18})}),i.jsxs("div",{children:[i.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:"You see their tier badge"}),i.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"Offer appropriate discounts for their loyalty level"})]})]})]}),i.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"rgba(201, 162, 39, 0.1)",borderRadius:"8px",borderLeft:"3px solid var(--kb-gold)"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--kb-gold-dark)",fontWeight:"600",marginBottom:"0.5rem"},children:[i.jsx(eg,{size:16})," Pro Tip"]}),i.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.9rem",margin:0},children:"Place your QR code near the register or on table tents so customers can check in while they wait!"})]})]})]})}),T==="loyalty"&&i.jsxs(i.Fragment,{children:[i.jsxs(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",style:{marginBottom:"1.5rem"},children:[i.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(Rr,{size:20,color:"var(--kb-gold)"})," OK Member Discount"]}),i.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1rem",fontSize:"0.9rem"},children:"Set the discount OK Members receive when they show their card at your business."}),i.jsxs("form",{onSubmit:Ur,style:{display:"flex",gap:"0.75rem",alignItems:"flex-end",flexWrap:"wrap"},children:[i.jsxs("div",{style:{flex:1,minWidth:"200px"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.85rem",color:"var(--kb-gray-600)"},children:"Discount Description"}),i.jsx("input",{type:"text",value:qt,onChange:U=>yt(U.target.value),placeholder:"e.g., 10% off all purchases",style:{width:"100%"}})]}),i.jsx("button",{type:"submit",className:"btn btn-gold",disabled:dt,style:{whiteSpace:"nowrap"},children:dt?"Saving...":"Save Discount"})]})]}),i.jsxs(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card",style:{marginBottom:"1.5rem"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.5rem"},children:[i.jsxs("h3",{style:{color:"var(--kb-navy)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(ii,{size:20,color:"#2563eb"})," Kinderbucks Specials"]}),i.jsxs("button",{onClick:()=>Bn(!Pn),className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(ni,{size:16})," Add Special"]})]}),i.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1rem",fontSize:"0.9rem"},children:"Create special offers exclusively for Kinderbucks customers."}),Pn&&i.jsx("form",{onSubmit:Wr,style:{padding:"1rem",background:"var(--kb-gray-50)",borderRadius:"8px",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",gap:"0.75rem",alignItems:"flex-end",flexWrap:"wrap"},children:[i.jsxs("div",{style:{width:"100px"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.85rem",color:"var(--kb-gray-600)"},children:"KB Amount"}),i.jsx("input",{type:"number",min:"1",value:zn.amount,onChange:U=>lt(ne=>({...ne,amount:U.target.value})),style:{width:"100%"},required:!0})]}),i.jsxs("div",{style:{flex:1,minWidth:"200px"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.85rem",color:"var(--kb-gray-600)"},children:"What They Get"}),i.jsx("input",{type:"text",value:zn.description,onChange:U=>lt(ne=>({...ne,description:U.target.value})),placeholder:"e.g., Coffee + pastry",style:{width:"100%"},required:!0})]}),i.jsx("button",{type:"submit",className:"btn btn-primary",children:"Add"}),i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>Bn(!1),children:"Cancel"})]})}),dn.length===0?i.jsx("p",{style:{color:"var(--kb-gray-400)",fontStyle:"italic"},children:"No Kinderbucks specials yet. Add one to attract KB customers!"}):i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:dn.map((U,ne)=>i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"rgba(37, 99, 235, 0.08)",borderRadius:"8px",border:"1px solid rgba(37, 99, 235, 0.2)"},children:[i.jsxs("div",{children:[i.jsxs("span",{style:{fontWeight:"700",color:"#2563eb"},children:[U.amount," KB"]}),i.jsxs("span",{style:{color:"var(--kb-gray-600)"},children:[" = ",U.description]})]}),i.jsx("button",{onClick:()=>wt(ne),className:"btn",style:{padding:"0.4rem",background:"#e74c3c",color:"white"},children:i.jsx(Ni,{size:14})})]},ne))})]}),i.jsxs(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card",children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1.5rem"},children:[i.jsxs("h3",{style:{color:"var(--kb-navy)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(Sl,{size:20})," Check-in Rewards"]}),i.jsxs("button",{onClick:()=>me(!ie),className:"btn btn-gold",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(ni,{size:18})," Add Reward Tier"]})]}),i.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem"},children:"Set up rewards for customers who check in at your business. The more they visit, the better the rewards!"}),ie&&i.jsxs("form",{onSubmit:Co,style:{padding:"1.5rem",background:"var(--kb-gray-50)",borderRadius:"12px",marginBottom:"1.5rem"},children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Check-ins Required"}),i.jsx("input",{type:"number",min:"1",value:ue.checkinsRequired,onChange:U=>$(ne=>({...ne,checkinsRequired:U.target.value})),style:{width:"100%"},required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Reward Type"}),i.jsxs("select",{value:ue.rewardType,onChange:U=>$(ne=>({...ne,rewardType:U.target.value})),style:{width:"100%"},children:[i.jsx("option",{value:"discount",children:"% Discount"}),i.jsx("option",{value:"freeItem",children:"Free Item"}),i.jsx("option",{value:"credit",children:"$ Credit"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:ue.rewardType==="freeItem"?"Value ($)":ue.rewardType==="credit"?"Credit ($)":"Discount (%)"}),i.jsx("input",{type:"number",min:"1",value:ue.rewardValue,onChange:U=>$(ne=>({...ne,rewardValue:U.target.value})),style:{width:"100%"},required:!0})]})]}),i.jsxs("div",{style:{marginBottom:"1rem"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Reward Description *"}),i.jsx("input",{type:"text",value:ue.reward,onChange:U=>$(ne=>({...ne,reward:U.target.value})),placeholder:"e.g., Free coffee, 10% off your order, $5 off...",style:{width:"100%"},required:!0})]}),i.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:te||!ue.reward,children:te?"Saving...":"Add Reward"}),i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>me(!1),children:"Cancel"})]})]}),tt.length===0?i.jsxs("div",{style:{textAlign:"center",padding:"3rem",background:"var(--kb-gray-50)",borderRadius:"12px"},children:[i.jsx(Sl,{size:48,color:"var(--kb-gray-300)",style:{marginBottom:"1rem"}}),i.jsx("p",{style:{color:"var(--kb-gray-500)",marginBottom:"1rem"},children:"No loyalty rewards set up yet."}),i.jsx("p",{style:{color:"var(--kb-gray-400)",fontSize:"0.9rem"},children:"Add reward tiers to incentivize repeat visits!"})]}):i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:tt.map((U,ne)=>i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem",background:"var(--kb-gray-50)",borderRadius:"10px",borderLeft:`4px solid ${U.checkinsRequired>=20?"var(--kb-gold)":U.checkinsRequired>=10?"var(--kb-green)":"var(--kb-navy)"}`},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[i.jsxs("div",{style:{width:"50px",height:"50px",background:"white",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",border:"1px solid var(--kb-gray-200)"},children:[i.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:"var(--kb-navy)",lineHeight:1},children:U.checkinsRequired}),i.jsx("div",{style:{fontSize:"0.65rem",color:"var(--kb-gray-500)"},children:"visits"})]}),i.jsxs("div",{children:[i.jsx("div",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:U.reward}),i.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:[U.rewardType==="discount"&&`${U.rewardValue}% off`,U.rewardType==="freeItem"&&`$${U.rewardValue} value`,U.rewardType==="credit"&&`$${U.rewardValue} credit`]})]})]}),i.jsx("button",{onClick:()=>Jn(ne),className:"btn",style:{padding:"0.5rem",background:"white",color:"var(--kb-gray-500)",border:"1px solid var(--kb-gray-200)"},children:i.jsx(Ni,{size:16})})]},ne))}),i.jsxs("div",{style:{marginTop:"2.5rem",borderTop:"2px solid var(--kb-gray-200)",paddingTop:"2rem"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsxs("h3",{style:{color:"var(--kb-navy)",display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:[i.jsx(ln,{size:20})," Partner Rewards"]}),i.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem",margin:0},children:"Offer rewards to customers who visit other village businesses"})]}),i.jsxs("button",{onClick:()=>se(!ze),className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(ni,{size:18})," Add Partner Reward"]})]}),ze&&i.jsxs("form",{onSubmit:As,style:{padding:"1.5rem",background:"linear-gradient(135deg, rgba(39, 174, 96, 0.05) 0%, rgba(52, 152, 219, 0.05) 100%)",border:"1px solid var(--kb-gray-200)",borderRadius:"12px",marginBottom:"1.5rem"},children:[i.jsxs("div",{style:{marginBottom:"1rem"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Partner Business *"}),i.jsxs("select",{value:G.partnerBusiness,onChange:U=>pe(ne=>({...ne,partnerBusiness:U.target.value})),style:{width:"100%"},required:!0,children:[i.jsx("option",{value:"",children:"Select a business..."}),d.filter(U=>U.code!==t.businessCode).map(U=>i.jsx("option",{value:U.code,children:U.name},U.code))]}),i.jsx("p",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)",marginTop:"0.25rem"},children:"Customers who check in at this business will earn your reward"})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Check-ins Required"}),i.jsx("input",{type:"number",min:"1",value:G.requiredCheckins,onChange:U=>pe(ne=>({...ne,requiredCheckins:U.target.value})),style:{width:"100%"},required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Reward Type"}),i.jsxs("select",{value:G.rewardType,onChange:U=>pe(ne=>({...ne,rewardType:U.target.value})),style:{width:"100%"},children:[i.jsx("option",{value:"discount",children:"% Discount"}),i.jsx("option",{value:"freeItem",children:"Free Item"}),i.jsx("option",{value:"credit",children:"$ Credit"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:G.rewardType==="freeItem"?"Value ($)":G.rewardType==="credit"?"Credit ($)":"Discount (%)"}),i.jsx("input",{type:"number",min:"1",value:G.rewardValue,onChange:U=>pe(ne=>({...ne,rewardValue:U.target.value})),style:{width:"100%"},required:!0})]})]}),i.jsxs("div",{style:{marginBottom:"1rem"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Reward Description *"}),i.jsx("input",{type:"text",value:G.reward,onChange:U=>pe(ne=>({...ne,reward:U.target.value})),placeholder:"e.g., 10% off your first wine flight",style:{width:"100%"},required:!0})]}),i.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:qe||!G.partnerBusiness||!G.reward,children:qe?"Saving...":"Add Partner Reward"}),i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>se(!1),children:"Cancel"})]})]}),Te.length===0?i.jsxs("div",{style:{textAlign:"center",padding:"2rem",background:"var(--kb-gray-50)",borderRadius:"12px"},children:[i.jsx(ln,{size:40,color:"var(--kb-gray-300)",style:{marginBottom:"0.75rem"}}),i.jsx("p",{style:{color:"var(--kb-gray-500)",marginBottom:"0.5rem"},children:"No partner rewards set up yet."}),i.jsx("p",{style:{color:"var(--kb-gray-400)",fontSize:"0.85rem"},children:'Example: "Check in 5x at Village Yoga, get 10% off wine at your store"'})]}):i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:Te.map(U=>{const ne=d.find(Se=>Se.code===U.partnerBusiness);return i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem",background:U.isActive?"linear-gradient(135deg, rgba(39, 174, 96, 0.05) 0%, rgba(52, 152, 219, 0.05) 100%)":"var(--kb-gray-100)",borderRadius:"10px",border:"1px solid var(--kb-gray-200)",opacity:U.isActive?1:.6,flexWrap:"wrap",gap:"1rem"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flex:1},children:[i.jsxs("div",{style:{width:"50px",height:"50px",background:"white",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",border:"1px solid var(--kb-gray-200)"},children:[i.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:"var(--kb-green)",lineHeight:1},children:U.requiredCheckins}),i.jsx("div",{style:{fontSize:"0.6rem",color:"var(--kb-gray-500)"},children:"visits"})]}),i.jsxs("div",{children:[i.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)",marginBottom:"0.15rem"},children:["When they visit ",i.jsx("strong",{style:{color:"var(--kb-navy)"},children:(ne==null?void 0:ne.name)||U.partnerBusiness})]}),i.jsx("div",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:U.reward}),i.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:[U.rewardType==="discount"&&`${U.rewardValue}% off`,U.rewardType==="freeItem"&&`$${U.rewardValue} value`,U.rewardType==="credit"&&`$${U.rewardValue} credit`," at your store"]})]})]}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[i.jsx("button",{onClick:()=>Rs(U.id),className:"btn btn-secondary",style:{padding:"0.4rem 0.6rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:U.isActive?i.jsx(cf,{size:16}):i.jsx(_u,{size:16})}),i.jsx("button",{onClick:()=>hi(U.id),className:"btn",style:{padding:"0.4rem 0.6rem",background:"#e74c3c",color:"white"},children:i.jsx(Ni,{size:16})})]})]},U.id)})}),i.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"rgba(39, 174, 96, 0.08)",borderRadius:"8px",borderLeft:"3px solid var(--kb-green)"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--kb-green)",fontWeight:"600",marginBottom:"0.5rem"},children:[i.jsx(eg,{size:16})," How Partner Rewards Work"]}),i.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.9rem",margin:0},children:"Partner rewards encourage customers to explore the village! When a customer checks in at your partner business enough times, they can claim your reward. This creates a network effect that benefits everyone."})]})]}),i.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"rgba(201, 162, 39, 0.1)",borderRadius:"8px",borderLeft:"3px solid var(--kb-gold)"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--kb-gold-dark)",fontWeight:"600",marginBottom:"0.5rem"},children:[i.jsx(eg,{size:16})," How it works"]}),i.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.9rem",margin:0},children:"When customers check in, they'll see their progress toward your rewards. Staff can verify their check-in count and apply the appropriate reward!"})]})]})]}),T==="promos"&&i.jsx(i.Fragment,{children:i.jsxs(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",style:{marginBottom:"1.5rem"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1.5rem"},children:[i.jsxs("h3",{style:{color:"var(--kb-navy)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(Gc,{size:20})," Your Promo Codes"]}),i.jsxs("button",{onClick:()=>A(!q),className:"btn btn-gold",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(ni,{size:18})," Create Promo"]})]}),q&&i.jsxs("form",{onSubmit:ja,style:{padding:"1.5rem",background:"var(--kb-gray-50)",borderRadius:"12px",marginBottom:"1.5rem"},children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Code *"}),i.jsx("input",{type:"text",value:z.code,onChange:U=>O(ne=>({...ne,code:U.target.value.toUpperCase().replace(/[^A-Z0-9]/g,"")})),placeholder:"SUMMER20",style:{width:"100%",fontFamily:"monospace"},required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Discount Type"}),i.jsxs("select",{value:z.discountType,onChange:U=>O(ne=>({...ne,discountType:U.target.value})),style:{width:"100%"},children:[i.jsx("option",{value:"percent",children:"Percent Off"}),i.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:z.discountType==="percent"?"Percent Off":"Amount Off ($)"}),i.jsx("input",{type:"number",value:z.discountValue,onChange:U=>O(ne=>({...ne,discountValue:U.target.value})),min:"1",max:z.discountType==="percent"?100:1e3,style:{width:"100%"}})]})]}),i.jsxs("div",{style:{marginBottom:"1rem"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Description *"}),i.jsx("input",{type:"text",value:z.description,onChange:U=>O(ne=>({...ne,description:U.target.value})),placeholder:"10% off your entire purchase",style:{width:"100%"},required:!0})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Min. Tier (optional)"}),i.jsxs("select",{value:z.minTier,onChange:U=>O(ne=>({...ne,minTier:U.target.value})),style:{width:"100%"},children:[i.jsx("option",{value:"",children:"Any tier"}),i.jsx("option",{value:"Curious",children:"Curious"}),i.jsx("option",{value:"Hooked",children:"Hooked"}),i.jsx("option",{value:"Line & Sinker",children:"Line & Sinker"}),i.jsx("option",{value:"Village Patron",children:"Village Patron"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Expires (optional)"}),i.jsx("input",{type:"date",value:z.expiresAt,onChange:U=>O(ne=>({...ne,expiresAt:U.target.value})),style:{width:"100%"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Usage Limit (optional)"}),i.jsx("input",{type:"number",value:z.usageLimit,onChange:U=>O(ne=>({...ne,usageLimit:U.target.value})),placeholder:"Unlimited",min:"1",style:{width:"100%"}})]})]}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:Re,children:Re?"Creating...":"Create Promo Code"}),i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>A(!1),children:"Cancel"})]})]}),c.length===0?i.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[i.jsx(Gc,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),i.jsx("p",{children:"No promo codes yet"}),i.jsx("p",{style:{fontSize:"0.9rem"},children:"Create your first promo to reward loyal customers!"})]}):i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:c.map(U=>i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem",background:U.isActive?"var(--kb-gray-50)":"var(--kb-gray-100)",borderRadius:"8px",opacity:U.isActive?1:.6,flexWrap:"wrap",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.25rem"},children:[i.jsx("code",{style:{padding:"0.25rem 0.5rem",background:"var(--kb-navy)",color:"var(--kb-gold)",borderRadius:"4px",fontWeight:"600"},children:U.code}),i.jsxs("span",{style:{padding:"0.15rem 0.5rem",background:U.discountType==="percent"?"rgba(39, 174, 96, 0.1)":"rgba(52, 152, 219, 0.1)",color:U.discountType==="percent"?"var(--kb-green)":"#3498db",borderRadius:"4px",fontSize:"0.8rem",fontWeight:"500"},children:[U.discountType==="percent"?i.jsx(I6,{size:12,style:{marginRight:4}}):i.jsx(Ll,{size:12,style:{marginRight:4}}),U.discountValue,U.discountType==="percent"?"% off":" off"]})]}),i.jsx("div",{style:{color:"var(--kb-gray-600)",fontSize:"0.9rem"},children:U.description}),i.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"0.5rem",fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:[U.minTier&&i.jsxs("span",{children:["Min tier: ",U.minTier]}),U.usageLimit&&i.jsxs("span",{children:["Limit: ",U.usageCount||0,"/",U.usageLimit]}),U.expiresAt&&i.jsxs("span",{children:["Expires: ",new Date(U.expiresAt.toDate?U.expiresAt.toDate():U.expiresAt).toLocaleDateString()]})]})]}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[i.jsxs("button",{onClick:()=>di(U.id,U.isActive),className:"btn btn-secondary",style:{padding:"0.4rem 0.6rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:[U.isActive?i.jsx(cf,{size:16}):i.jsx(_u,{size:16}),U.isActive?"Disable":"Enable"]}),i.jsx("button",{onClick:()=>Is(U.id),className:"btn",style:{padding:"0.4rem 0.6rem",background:"#e74c3c",color:"white"},children:i.jsx(Ni,{size:16})})]})]},U.id))})]})}),T==="trends"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[i.jsxs(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",style:{padding:"1.5rem"},children:[i.jsx("h4",{style:{color:"var(--kb-gray-500)",marginBottom:"0.5rem",fontSize:"0.9rem"},children:"Village-Wide Check-ins"}),i.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"var(--kb-navy)"},children:xr}),i.jsxs("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:[_a," this week across all businesses"]})]}),i.jsxs(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card",style:{padding:"1.5rem"},children:[i.jsx("h4",{style:{color:"var(--kb-gray-500)",marginBottom:"0.5rem",fontSize:"0.9rem"},children:"Participating Businesses"}),i.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"var(--kb-navy)"},children:d.length}),i.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Active in the Kinderbucks network"})]}),i.jsxs(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card",style:{padding:"1.5rem",background:"linear-gradient(135deg, var(--kb-gold) 0%, var(--kb-gold-dark) 100%)",color:"white"},children:[i.jsx("h4",{style:{opacity:.9,marginBottom:"0.5rem",fontSize:"0.9rem"},children:"Your Market Share"}),i.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"700"},children:[xr>0?Math.round(((n==null?void 0:n.checkinCount)||0)/xr*100):0,"%"]}),i.jsx("div",{style:{opacity:.9,fontSize:"0.85rem"},children:"of all village check-ins"})]})]}),i.jsxs(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"card",children:[i.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(Rr,{size:20})," Top Businesses This Month"]}),i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:ui.map((U,ne)=>{var kn;const Se=U.code===(t==null?void 0:t.businessCode),He=((kn=ui[0])==null?void 0:kn.checkinCount)||1,St=(U.checkinCount||0)/He*100;return i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"0.75rem 1rem",background:Se?"rgba(201, 162, 39, 0.1)":"var(--kb-gray-50)",borderRadius:"8px",border:Se?"2px solid var(--kb-gold)":"none"},children:[i.jsx("div",{style:{width:"28px",height:"28px",background:ne===0?"var(--kb-gold)":ne===1?"#c0c0c0":ne===2?"#cd7f32":"var(--kb-gray-300)",color:"white",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"600",fontSize:"0.85rem"},children:ne+1}),i.jsxs("div",{style:{flex:1},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:[i.jsx("span",{style:{fontWeight:Se?"600":"500",color:"var(--kb-navy)"},children:U.name}),Se&&i.jsx("span",{style:{fontSize:"0.7rem",padding:"0.1rem 0.4rem",background:"var(--kb-gold)",color:"white",borderRadius:"4px"},children:"YOU"})]}),i.jsx("div",{style:{height:"6px",background:"var(--kb-gray-200)",borderRadius:"3px",overflow:"hidden"},children:i.jsx("div",{style:{width:`${St}%`,height:"100%",background:Se?"var(--kb-gold)":"var(--kb-green)",borderRadius:"3px"}})})]}),i.jsx("div",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:U.checkinCount||0})]},U.code)})})]})]}),T==="guide"&&i.jsxs(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",children:[i.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(ey,{size:20})," Business Resource Guide"]}),i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:mi.map(U=>{const ne=U.icon,Se=D===U.id;return i.jsxs("div",{style:{border:"1px solid var(--kb-gray-200)",borderRadius:"12px",overflow:"hidden"},children:[i.jsxs("button",{onClick:()=>L(Se?null:U.id),style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem 1.25rem",background:Se?"var(--kb-gray-50)":"white",border:"none",cursor:"pointer",textAlign:"left"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[i.jsx("div",{style:{width:"40px",height:"40px",background:"rgba(201, 162, 39, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(ne,{size:20,color:"var(--kb-gold-dark)"})}),i.jsx("span",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:U.title})]}),Se?i.jsx(_3,{size:20,color:"var(--kb-gray-400)"}):i.jsx(g5,{size:20,color:"var(--kb-gray-400)"})]}),Se&&i.jsx("div",{style:{padding:"1rem 1.25rem",borderTop:"1px solid var(--kb-gray-200)"},children:i.jsx("ul",{style:{margin:0,paddingLeft:"1.25rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:U.content.map((He,St)=>i.jsx("li",{style:{color:"var(--kb-gray-600)",lineHeight:1.5},children:He},St))})})]},U.id)})}),i.jsxs("div",{style:{marginTop:"2rem",padding:"1.5rem",background:"linear-gradient(135deg, var(--kb-navy) 0%, var(--kb-navy-light) 100%)",borderRadius:"12px",color:"white"},children:[i.jsx("h4",{style:{marginBottom:"0.5rem"},children:"Need Help?"}),i.jsx("p",{style:{opacity:.9,marginBottom:"1rem",fontSize:"0.95rem"},children:"Questions about Kinderbucks or need assistance with your account? We're here to help!"}),i.jsx("a",{href:"mailto:support@kinderbucks.com",className:"btn",style:{background:"rgba(255,255,255,0.2)",color:"white"},children:"Contact Support"})]})]})]})}),i.jsx(en,{}),i.jsx(Az,{isOpen:E,onClose:()=>I(!1),businessCode:t==null?void 0:t.businessCode,businessName:n==null?void 0:n.name,currentBalance:(n==null?void 0:n.kinderbucksBalance)||0,onSuccess:()=>Es()})]})}function Kt({children:t,title:e}){const n=Or(),r=bo(),{user:o,profile:l,isAdmin:c}=gr(),h=[{to:"/admin/dashboard",label:"Dashboard",Icon:o6},{to:"/admin/exchanges",label:"Exchanges",Icon:P0},{to:"/admin/redemptions",label:"Redemptions",Icon:ii},{to:"/admin/members",label:"Members",Icon:ln},{to:"/admin/generate",label:"Generate QR",Icon:Pr},{to:"/admin/issue",label:"Issue Currency",Icon:uf},{to:"/admin/businesses",label:"Businesses",Icon:It},{to:"/admin/landmarks",label:"Landmarks",Icon:an},{to:"/admin/hunts",label:"Discovery Trails",Icon:ya},{to:"/admin/users",label:"User Management",Icon:df}],d=async()=>{await c5(),r("/")},m=g=>n.pathname===g;return i.jsxs("div",{style:{display:"flex",minHeight:"100vh"},children:[i.jsxs("aside",{style:{width:"260px",background:"var(--kb-navy)",color:"var(--kb-white)",display:"flex",flexDirection:"column",position:"fixed",top:0,left:0,bottom:0,zIndex:100},children:[i.jsx("div",{style:{padding:"1.5rem",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:i.jsxs(fe,{to:"/map",style:{display:"flex",alignItems:"center",gap:"0.75rem",textDecoration:"none"},children:[i.jsx("div",{style:{width:"40px",height:"40px",background:"var(--kb-gold)",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--kb-navy)",fontFamily:"var(--font-display)",fontWeight:"700",fontSize:"1.2rem"},children:"K"}),i.jsxs("div",{children:[i.jsx("div",{style:{fontFamily:"var(--font-display)",fontWeight:"600",color:"var(--kb-white)",fontSize:"1.1rem"},children:"Kinderbucks"}),i.jsx("div",{style:{fontSize:"0.7rem",color:"var(--kb-gold)",textTransform:"uppercase",letterSpacing:"0.1em"},children:"Admin Portal"})]})]})}),i.jsx("nav",{style:{flex:1,padding:"1rem 0",overflowY:"auto"},children:h.map(g=>i.jsxs(fe,{to:g.to,style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.875rem 1.5rem",color:m(g.to)?"var(--kb-gold)":"var(--kb-gray-300)",background:m(g.to)?"rgba(201, 162, 39, 0.1)":"transparent",borderLeft:m(g.to)?"3px solid var(--kb-gold)":"3px solid transparent",textDecoration:"none",fontSize:"0.95rem",fontWeight:m(g.to)?"600":"400",transition:"all 0.2s"},children:[i.jsx(g.Icon,{size:20,strokeWidth:1.5}),g.label]},g.to))}),i.jsxs("div",{style:{padding:"1rem 1.5rem",borderTop:"1px solid rgba(255,255,255,0.1)"},children:[o&&i.jsxs("div",{style:{padding:"0.75rem 0",borderBottom:"1px solid rgba(255,255,255,0.1)",marginBottom:"0.75rem"},children:[i.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-300)"},children:(l==null?void 0:l.displayName)||o.email}),i.jsx("div",{style:{fontSize:"0.75rem",color:"var(--kb-gray-500)"},children:(l==null?void 0:l.role)||"member"})]}),i.jsxs(fe,{to:"/map",style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.5rem 0",color:"var(--kb-gray-400)",textDecoration:"none",fontSize:"0.9rem"},children:[i.jsx(r6,{size:18}),"Back to Site"]}),o&&i.jsxs("button",{onClick:d,style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.5rem 0",color:"var(--kb-gray-400)",background:"none",border:"none",cursor:"pointer",fontSize:"0.9rem",width:"100%"},children:[i.jsx(ny,{size:18}),"Sign Out"]})]})]}),i.jsxs("main",{style:{flex:1,marginLeft:"260px",background:"var(--kb-cream)",minHeight:"100vh"},children:[i.jsx("header",{style:{background:"var(--kb-white)",borderBottom:"1px solid var(--kb-gray-200)",padding:"1.25rem 2rem",position:"sticky",top:0,zIndex:50},children:i.jsx("h1",{style:{fontFamily:"var(--font-display)",fontSize:"1.5rem",color:"var(--kb-navy)",margin:0},children:e})}),i.jsx("div",{style:{padding:"2rem"},children:t})]}),i.jsx("style",{children:`
        @media (max-width: 768px) {
          aside {
            width: 100% !important;
            position: relative !important;
            display: none;
          }
          main {
            margin-left: 0 !important;
          }
        }
      `})]})}function Pz(){const[t,e]=C.useState({totalCurrency:0,inCirculation:0,circulationValue:0,pendingExchanges:0,pendingValue:0,totalMembers:0,activeBusinesses:0,totalCheckins:0}),[n,r]=C.useState([]),[o,l]=C.useState({}),[c,h]=C.useState(!0);C.useEffect(()=>{async function m(){try{const g=await TE(),y=g.filter(A=>A.status==="issued"||A.status==="active"),x={};y.forEach(A=>{const E=A.denomination||0;x[E]=(x[E]||0)+1}),l(x);const S=await Xn(),w=S.filter(A=>A.isActive),_=S.reduce((A,E)=>A+(E.checkinCount||0),0),T=Mt(it(ye,"exchanges"),un("status","==","pending"),Vr("createdAt","desc")),V=(await ft(T)).docs.map(A=>({id:A.id,...A.data()})),M=V.reduce((A,E)=>A+(E.kinderbucksAmount||0),0),F=Mt(it(ye,"exchanges"),Vr("createdAt","desc"),i5(5)),K=await ft(F);r(K.docs.map(A=>({id:A.id,...A.data()})));const q=await ft(it(ye,"members"));e({totalCurrency:g.length,inCirculation:y.length,circulationValue:y.reduce((A,E)=>A+(E.denomination||0),0),pendingExchanges:V.length,pendingValue:M,totalMembers:q.size,activeBusinesses:w.length,totalCheckins:_}),h(!1)}catch(g){console.error("Error loading dashboard data:",g),h(!1)}}m()},[]);const d=({icon:m,label:g,value:y,subtext:x,color:S,to:w})=>i.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[i.jsxs("div",{children:[i.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem",marginBottom:"0.5rem"},children:g}),i.jsx("div",{style:{fontFamily:"var(--font-display)",fontSize:"2rem",fontWeight:"700",color:S||"var(--kb-navy)"},children:y}),x&&i.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem",marginTop:"0.25rem"},children:x})]}),i.jsx("div",{style:{width:"48px",height:"48px",background:`${S||"var(--kb-navy)"}15`,borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(m,{size:24,color:S||"var(--kb-navy)"})})]}),w&&i.jsx(fe,{to:w,style:{display:"block",marginTop:"1rem",paddingTop:"1rem",borderTop:"1px solid var(--kb-gray-100)",color:"var(--kb-navy)",fontSize:"0.85rem",fontWeight:"500"},children:"View Details "})]});return c?i.jsx(Kt,{title:"Dashboard",children:i.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:i.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading dashboard..."})})}):i.jsxs(Kt,{title:"Dashboard",children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[i.jsx(d,{icon:ii,label:"In Circulation",value:`$${t.circulationValue.toLocaleString()}`,subtext:`${t.inCirculation} bills issued`,color:"var(--kb-green)"}),i.jsx(d,{icon:hr,label:"Pending Exchanges",value:t.pendingExchanges,subtext:`$${t.pendingValue.toFixed(2)} value`,color:t.pendingExchanges>0?"#e67e22":"var(--kb-gray-400)",to:"/admin/exchanges"}),i.jsx(d,{icon:ln,label:"OK Members",value:t.totalMembers,subtext:`${t.totalCheckins} total check-ins`,color:"var(--kb-navy)",to:"/admin/members"}),i.jsx(d,{icon:It,label:"Active Businesses",value:t.activeBusinesses,color:"var(--kb-gold-dark)",to:"/admin/businesses"})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem"},children:[i.jsxs("div",{className:"card",children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[i.jsx("h3",{style:{color:"var(--kb-navy)",margin:0},children:"Recent Exchanges"}),i.jsx(fe,{to:"/admin/exchanges",style:{fontSize:"0.85rem",color:"var(--kb-navy)"},children:"View All "})]}),n.length===0?i.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"No exchanges yet"}):i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:n.map(m=>{var g,y,x,S;return i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem",background:"var(--kb-gray-50)",borderRadius:"8px"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[m.status==="completed"?i.jsx(vn,{size:18,color:"var(--kb-green)"}):m.status==="pending"?i.jsx(hr,{size:18,color:"#e67e22"}):i.jsx(hs,{size:18,color:"var(--kb-gray-400)"}),i.jsxs("div",{children:[i.jsxs("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:["$",m.usdAmount,"  $",(g=m.kinderbucksAmount)==null?void 0:g.toFixed(2)," KB"]}),i.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:((S=(x=(y=m.createdAt)==null?void 0:y.toDate)==null?void 0:x.call(y))==null?void 0:S.toLocaleDateString())||"Pending"})]})]}),i.jsx("span",{className:"badge",style:{background:m.status==="completed"?"#d4edda":m.status==="pending"?"#fff3cd":"#f8f9fa",color:m.status==="completed"?"var(--kb-green)":m.status==="pending"?"#856404":"var(--kb-gray-600)"},children:m.status})]},m.id)})})]}),i.jsxs("div",{className:"card",children:[i.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem"},children:"Circulation by Denomination"}),Object.keys(o).length===0?i.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"No currency in circulation yet"}):i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[1,5,10,20].map(m=>{const g=o[m]||0,y=Math.max(...Object.values(o),1),x=g/y*100,S={1:"#27ae60",5:"#3498db",10:"#9b59b6",20:"#c9a227"};return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[i.jsxs("span",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:["$",m]}),i.jsxs("span",{style:{color:"var(--kb-gray-500)"},children:[g," bills ($",g*m,")"]})]}),i.jsx("div",{style:{height:"8px",background:"var(--kb-gray-100)",borderRadius:"4px",overflow:"hidden"},children:i.jsx("div",{style:{width:`${x}%`,height:"100%",background:S[m],borderRadius:"4px",transition:"width 0.5s ease"}})})]},m)})})]})]}),i.jsxs("div",{className:"card",style:{marginTop:"1.5rem"},children:[i.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Quick Actions"}),i.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[i.jsxs(fe,{to:"/admin/generate",className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(Pr,{size:18})," Generate QR Codes"]}),i.jsxs(fe,{to:"/admin/issue",className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(uf,{size:18})," Issue Currency"]}),i.jsxs(fe,{to:"/admin/exchanges",className:"btn btn-gold",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(P0,{size:18})," Process Exchanges"]})]})]})]})}function Dz(){const[t,e]=C.useState({start:1,end:100}),[n,r]=C.useState(5),[o,l]=C.useState([]),[c,h]=C.useState(!1),[d,m]=C.useState(!1),g=()=>{const w=[];for(let _=t.start;_<=t.end;_++)w.push(`KB-${String(_).padStart(4,"0")}`);l(w),m(!1)},y=async()=>{h(!0);try{await hz(o,n),m(!0)}catch(w){console.error("Error saving:",w),alert("Error saving to database")}h(!1)},x="https://harmonicsystems.github.io/kinderbucks/#/scan/",S={1:{bg:"rgba(39, 174, 96, 0.1)",text:"var(--kb-green)"},5:{bg:"rgba(52, 152, 219, 0.1)",text:"#3498db"},10:{bg:"rgba(155, 89, 182, 0.1)",text:"#9b59b6"},20:{bg:"rgba(201, 162, 39, 0.1)",text:"var(--kb-gold-dark)"}};return i.jsxs(Kt,{title:"Generate QR Codes",children:[i.jsxs("div",{className:"card",style:{marginBottom:"2rem"},children:[i.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(Pr,{size:20})," Generation Settings"]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1.5rem",marginBottom:"1.5rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Start Number"}),i.jsx("input",{type:"number",value:t.start,onChange:w=>e(_=>({..._,start:Number(w.target.value)})),min:1,max:9999,style:{width:"100%"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"End Number"}),i.jsx("input",{type:"number",value:t.end,onChange:w=>e(_=>({..._,end:Number(w.target.value)})),min:1,max:9999,style:{width:"100%"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Denomination"}),i.jsxs("select",{value:n,onChange:w=>r(Number(w.target.value)),style:{width:"100%"},children:[i.jsx("option",{value:1,children:"$1"}),i.jsx("option",{value:5,children:"$5"}),i.jsx("option",{value:10,children:"$10"}),i.jsx("option",{value:20,children:"$20"})]})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[i.jsxs("button",{className:"btn btn-primary",onClick:g,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(Pr,{size:18})," Generate ",t.end-t.start+1," Codes"]}),i.jsxs("div",{style:{padding:"0.75rem 1rem",background:S[n].bg,borderRadius:"8px",color:S[n].text,fontWeight:"600"},children:["Total Value: $",(t.end-t.start+1)*n]})]})]}),o.length>0&&i.jsxs("div",{className:"card",children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsxs("h3",{style:{color:"var(--kb-navy)",margin:0},children:["Generated: ",o.length," Kinderbucks"]}),i.jsxs("p",{style:{color:"var(--kb-gray-500)",margin:"0.25rem 0 0",fontSize:"0.9rem"},children:["$",n," denomination  Total value: $",o.length*n]})]}),i.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[d?i.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--kb-green)",fontWeight:"600"},children:[i.jsx(vn,{size:18})," Saved!"]}):i.jsxs("button",{className:"btn btn-gold",onClick:y,disabled:c,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(F6,{size:18}),c?"Saving...":"Save to Database"]}),i.jsxs("button",{className:"btn btn-secondary",onClick:()=>window.print(),style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(z0,{size:18})," Print"]})]})]}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gap:"1.5rem"},children:o.slice(0,50).map(w=>i.jsxs("div",{style:{background:"var(--kb-white)",border:"1px solid var(--kb-gray-200)",borderRadius:"12px",padding:"1rem",textAlign:"center"},children:[i.jsx(xa,{value:`${x}${w}`,size:140,denomination:n}),i.jsx("p",{style:{fontFamily:"monospace",marginTop:"0.75rem",fontSize:"0.9rem",color:"var(--kb-navy)",fontWeight:"600"},children:w})]},w))}),o.length>50&&i.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"var(--kb-gray-50)",borderRadius:"8px",textAlign:"center",color:"var(--kb-gray-600)"},children:["Showing 50 of ",o.length," codes. All will be saved and printable."]})]}),o.length===0&&i.jsxs("div",{className:"card",style:{textAlign:"center",padding:"4rem 2rem"},children:[i.jsx(Pr,{size:64,color:"var(--kb-gray-300)",style:{marginBottom:"1rem"}}),i.jsx("h3",{style:{color:"var(--kb-gray-500)",marginBottom:"0.5rem"},children:"No codes generated yet"}),i.jsx("p",{style:{color:"var(--kb-gray-400)"},children:"Set your range and denomination above, then click Generate."})]})]})}function Nz(){const[t,e]=C.useState([]),[n,r]=C.useState(!0),[o,l]=C.useState([]),[c,h]=C.useState(""),[d,m]=C.useState(!1),[g,y]=C.useState(0),x=async()=>{const A=await TE();e(A.filter(E=>E.status==="draft"||E.status==="issued")),r(!1)};C.useEffect(()=>{x()},[]);const S=A=>{l(E=>E.includes(A)?E.filter(I=>I!==A):[...E,A])},w=()=>{const A=P.map(E=>E.serial);l(A)},_=()=>{l([])},T=async()=>{if(o.length!==0){m(!0);try{for(const A of o)await fz(A,"issued",c);y(o.length),l([]),h(""),await x(),setTimeout(()=>y(0),3e3)}catch(A){console.error("Error issuing:",A),alert("Error issuing Kinderbucks")}m(!1)}},P=t.filter(A=>A.status==="draft"),V=t.filter(A=>A.status==="issued"),M=o.reduce((A,E)=>{const I=t.find(D=>D.serial===E);return A+((I==null?void 0:I.denomination)||0)},0),K=(A=>{const E={1:[],5:[],10:[],20:[]};return A.forEach(I=>{const D=I.denomination||5;E[D]&&E[D].push(I)}),E})(P),q={1:"#27ae60",5:"#3498db",10:"#9b59b6",20:"#c9a227"};return n?i.jsx(Kt,{title:"Issue Currency",children:i.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:i.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading..."})})}):i.jsxs(Kt,{title:"Issue Currency",children:[g>0&&i.jsxs("div",{style:{position:"fixed",top:"100px",right:"2rem",background:"var(--kb-green)",color:"white",padding:"1rem 1.5rem",borderRadius:"8px",display:"flex",alignItems:"center",gap:"0.75rem",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:1e3},children:[i.jsx(vn,{size:20}),i.jsxs("span",{children:["Issued ",g," Kinderbucks successfully!"]})]}),i.jsxs("div",{className:"card",style:{marginBottom:"2rem"},children:[i.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(uf,{size:20})," Issue to Circulation"]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:"1.5rem",alignItems:"end"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Recipient (optional)"}),i.jsx("input",{type:"text",value:c,onChange:A=>h(A.target.value),placeholder:"Business name or exchange point",style:{width:"100%"}})]}),i.jsxs("button",{className:"btn btn-gold",onClick:T,disabled:o.length===0||d,style:{display:"flex",alignItems:"center",gap:"0.5rem",height:"42px"},children:[i.jsx(uf,{size:18}),d?"Issuing...":`Issue ${o.length} Selected`]})]}),o.length>0&&i.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem 1rem",background:"var(--kb-gold)",borderRadius:"8px",color:"var(--kb-navy)",fontWeight:"500"},children:["Selected: ",o.length," bills  Total value: $",M]})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[i.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-gray-500)"},children:P.length}),i.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Available (Draft)"})]}),i.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-green)"},children:V.length}),i.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Already Issued"})]}),i.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:o.length}),i.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Selected"})]})]}),i.jsxs("div",{className:"card",children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[i.jsxs("h3",{style:{color:"var(--kb-navy)",margin:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(Ek,{size:20})," Available to Issue (",P.length,")"]}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[i.jsx("button",{className:"btn btn-secondary",onClick:w,style:{padding:"0.4rem 0.75rem",fontSize:"0.85rem"},children:"Select All"}),i.jsx("button",{className:"btn btn-secondary",onClick:_,style:{padding:"0.4rem 0.75rem",fontSize:"0.85rem"},children:"Clear"})]})]}),P.length===0?i.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[i.jsx(Ek,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),i.jsx("p",{children:"No draft Kinderbucks available."}),i.jsx("p",{style:{fontSize:"0.9rem"},children:"Generate some QR codes first."})]}):i.jsx("div",{children:[1,5,10,20].map(A=>{const E=K[A];return E.length===0?null:i.jsxs("div",{style:{marginBottom:"1.5rem"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem"},children:[i.jsxs("div",{style:{width:"24px",height:"24px",background:q[A],borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"0.75rem",fontWeight:"600"},children:["$",A]}),i.jsxs("span",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:["$",A," Bills (",E.length,")"]}),i.jsx("button",{onClick:()=>{const I=E.map(L=>L.serial),D=I.every(L=>o.includes(L));l(D?L=>L.filter(z=>!I.includes(z)):L=>[...new Set([...L,...I])])},style:{background:"none",border:"none",color:q[A],cursor:"pointer",fontSize:"0.85rem"},children:E.every(I=>o.includes(I.serial))?"Deselect all":"Select all"})]}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))",gap:"0.5rem"},children:E.map(I=>{const D=o.includes(I.serial);return i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.6rem 0.75rem",background:D?`${q[A]}15`:"var(--kb-gray-50)",borderRadius:"6px",cursor:"pointer",border:D?`2px solid ${q[A]}`:"2px solid transparent",transition:"all 0.15s"},children:[D?i.jsx(J6,{size:18,color:q[A]}):i.jsx(tV,{size:18,color:"var(--kb-gray-400)"}),i.jsx("input",{type:"checkbox",checked:D,onChange:()=>S(I.serial),style:{display:"none"}}),i.jsx("span",{style:{fontFamily:"monospace",fontSize:"0.85rem",color:D?q[A]:"var(--kb-gray-600)",fontWeight:D?"600":"400"},children:I.serial})]},I.serial)})})]},A)})})]})]})}const Mz="AIzaSyBTfW1zXwDOYJGEZ7ktRsLNowGvFewLKj0";function Vz(t){if(!t)return"services";const e=new Set(t);return e.has("restaurant")||e.has("cafe")||e.has("bar")||e.has("bakery")||e.has("food")||e.has("meal_takeaway")||e.has("meal_delivery")?"food":e.has("store")||e.has("shopping_mall")||e.has("clothing_store")||e.has("grocery_or_supermarket")||e.has("convenience_store")||e.has("liquor_store")||e.has("florist")||e.has("jewelry_store")||e.has("book_store")||e.has("hardware_store")?"retail":e.has("art_gallery")||e.has("museum")||e.has("movie_theater")||e.has("library")||e.has("tourist_attraction")?"arts":"services"}function Lz(t){return t?t.toUpperCase().replace(/[^A-Z0-9\s]/g,"").replace(/\b(THE|AND|OF|AT|IN)\b/gi,"").trim().replace(/\s+/g,"-").substring(0,20)||"BIZ":""}function Oz({onPlaceSelect:t,placeholder:e="Search for a business..."}){const[n,r]=C.useState(""),[o,l]=C.useState([]),[c,h]=C.useState(!1),[d,m]=C.useState(!1),[g,y]=C.useState(!1),x=C.useRef(null),S=C.useRef(null),w=C.useRef(null),_=C.useRef(null),T=C.useRef(null);C.useEffect(()=>{var q,A,E,I;if((A=(q=window.google)==null?void 0:q.maps)!=null&&A.places){y(!0);return}const F=document.querySelector('script[src*="maps.googleapis.com"]');if(F){F.addEventListener("load",()=>y(!0)),(I=(E=window.google)==null?void 0:E.maps)!=null&&I.places&&y(!0);return}const K=document.createElement("script");K.src=`https://maps.googleapis.com/maps/api/js?key=${Mz}&libraries=places`,K.async=!0,K.defer=!0,K.onload=()=>y(!0),document.head.appendChild(K)},[]),C.useEffect(()=>{if(!g)return;x.current=new window.google.maps.places.AutocompleteService;const F=document.createElement("div");S.current=new window.google.maps.places.PlacesService(F),w.current=new window.google.maps.places.AutocompleteSessionToken},[g]),C.useEffect(()=>{const F=K=>{T.current&&!T.current.contains(K.target)&&_.current&&!_.current.contains(K.target)&&m(!1)};return document.addEventListener("mousedown",F),()=>document.removeEventListener("mousedown",F)},[]);const P=async F=>{if(!F||F.length<2||!x.current){l([]);return}h(!0);const K={input:F,sessionToken:w.current,types:["establishment"],locationBias:{center:{lat:42.3951,lng:-73.6977},radius:5e4}};x.current.getPlacePredictions(K,(q,A)=>{h(!1),A===window.google.maps.places.PlacesServiceStatus.OK&&q?(l(q),m(!0)):l([])})};C.useEffect(()=>{const F=setTimeout(()=>{P(n)},300);return()=>clearTimeout(F)},[n]);const V=F=>{if(!S.current)return;const K={placeId:F.place_id,fields:["name","formatted_address","types","geometry","formatted_phone_number","website","opening_hours","photos"],sessionToken:w.current};S.current.getDetails(K,(q,A)=>{var E;if(A===window.google.maps.places.PlacesServiceStatus.OK&&q){let I=null;q.photos&&q.photos.length>0&&(I=q.photos[0].getUrl({maxWidth:400,maxHeight:300}));const D={name:q.name,address:q.formatted_address,code:Lz(q.name),category:Vz(q.types),phone:q.formatted_phone_number,website:q.website,photoUrl:I,location:(E=q.geometry)!=null&&E.location?{lat:q.geometry.location.lat(),lng:q.geometry.location.lng()}:null,placeId:F.place_id};t(D),r(""),l([]),m(!1),w.current=new window.google.maps.places.AutocompleteSessionToken}})},M=()=>{var F;r(""),l([]),m(!1),(F=_.current)==null||F.focus()};return i.jsxs("div",{style:{position:"relative"},children:[i.jsxs("div",{style:{position:"relative"},children:[i.jsx(tm,{size:18,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--kb-gray-400)"}}),i.jsx("input",{ref:_,type:"text",value:n,onChange:F=>r(F.target.value),onFocus:()=>o.length>0&&m(!0),placeholder:e,style:{width:"100%",paddingLeft:"40px",paddingRight:n?"36px":"12px"}}),n&&i.jsx("button",{onClick:M,style:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"var(--kb-gray-400)",padding:"4px"},children:i.jsx(rm,{size:16})})]}),d&&o.length>0&&i.jsx("div",{ref:T,style:{position:"absolute",top:"100%",left:0,right:0,marginTop:"4px",background:"white",borderRadius:"8px",boxShadow:"0 4px 20px rgba(0,0,0,0.15)",zIndex:100,maxHeight:"300px",overflowY:"auto"},children:o.map(F=>{var K,q;return i.jsxs("button",{onClick:()=>V(F),style:{width:"100%",padding:"0.75rem 1rem",background:"none",border:"none",borderBottom:"1px solid var(--kb-gray-100)",cursor:"pointer",textAlign:"left",display:"flex",alignItems:"flex-start",gap:"0.75rem"},onMouseEnter:A=>A.currentTarget.style.background="var(--kb-gray-50)",onMouseLeave:A=>A.currentTarget.style.background="none",children:[i.jsx(an,{size:16,color:"var(--kb-gold)",style:{marginTop:"2px",flexShrink:0}}),i.jsxs("div",{children:[i.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:((K=F.structured_formatting)==null?void 0:K.main_text)||F.description}),i.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:(q=F.structured_formatting)==null?void 0:q.secondary_text})]})]},F.place_id)})}),c&&i.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,marginTop:"4px",padding:"1rem",background:"white",borderRadius:"8px",boxShadow:"0 4px 20px rgba(0,0,0,0.15)",textAlign:"center",color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"Searching..."})]})}const Bz=[{code:"AVIARY",name:"The Aviary",category:"food"},{code:"MORNINGBIRD",name:"Morningbird Cafe",category:"food"},{code:"SAISONNIER",name:"Saisonnier",category:"food"},{code:"BROADST-BAGEL",name:"Broad Street Bagel Co.",category:"food"},{code:"ISOLA",name:"Isola Wine Bar",category:"food"},{code:"BOTTLE-SHOP",name:"Kinderhook Bottle Shop",category:"retail"},{code:"SAMASCOTTS",name:"Samascott's Garden Market",category:"retail"},{code:"SAMASCOTT-ORCHARDS",name:"Samascott Orchards",category:"retail"},{code:"SCHOOL-GALLERY",name:"The School | Jack Shainman Gallery",category:"arts"},{code:"FEED-SEED",name:"The Feed and Seed",category:"services"},{code:"OLD-DUTCH",name:"The Old Dutch Inn",category:"services"},{code:"VILLAGE-YOGA",name:"Village Yoga",category:"services"},{code:"WALSH-DENTISTRY",name:"Walsh & Walsh Dentistry",category:"services"}],xg={food:{label:"Food & Drink",Icon:F0,color:"#e74c3c"},retail:{label:"Retail",Icon:nm,color:"#9b59b6"},services:{label:"Services",Icon:D0,color:"#3498db"},arts:{label:"Arts & Culture",Icon:B0,color:"#1abc9c"}};function zz(){var te,Ie,Te,Le,ze,se;const[t,e]=C.useState([]),[n,r]=C.useState([]),[o,l]=C.useState(!0),[c,h]=C.useState({code:"",name:"",category:"food",address:"",placeId:"",photoUrl:"",website:""}),[d,m]=C.useState(!1),[g,y]=C.useState(null),[x,S]=C.useState(!1),[w,_]=C.useState(null),[T,P]=C.useState(!1),[V,M]=C.useState(null),[F,K]=C.useState(""),[q,A]=C.useState(!1),[E,I]=C.useState(null),D=async()=>{const[G,pe]=await Promise.all([Xn(),V9()]);e(G),r(pe),l(!1)};C.useEffect(()=>{D()},[]);const L=async G=>{if(G.preventDefault(),!(!c.code||!c.name)){m(!0);try{await Gw(c.code.toUpperCase(),c.name,c.category,{address:c.address,placeId:c.placeId,photoUrl:c.photoUrl,website:c.website}),h({code:"",name:"",category:"food",address:"",placeId:"",photoUrl:"",website:""}),await D()}catch(pe){console.error("Error creating business:",pe),alert("Error creating business")}m(!1)}},z=G=>{h({code:G.code,name:G.name,category:G.category,address:G.address||"",placeId:G.placeId||"",photoUrl:G.photoUrl||"",website:G.website||""})},O=async(G,pe)=>{const qe=await SE(G);M({code:G,name:pe,info:qe}),K("")},Re=async(G=!1)=>{if(V){A(!0);try{await L9(V.code,null,G),M(null),K(""),await D()}catch(pe){console.error("Error deleting business:",pe),alert(pe.message||"Error deleting business")}A(!1)}},$e=async G=>{try{await O9(G),await D()}catch(pe){console.error("Error restoring business:",pe),alert("Error restoring business")}},tt=async G=>{var pe,qe;if(!((qe=(pe=window.google)==null?void 0:pe.maps)!=null&&qe.places)){alert("Google Maps not loaded. Please refresh the page.");return}I(G.code);try{const gt=document.createElement("div"),qt=new window.google.maps.places.PlacesService(gt),yt=G.placeId?{placeId:G.placeId,fields:["photos"]}:{query:`${G.name} ${G.address||"Kinderhook NY"}`,fields:["photos","place_id"]},bn=await(Pn=>new Promise((Bn,zn)=>{Pn.placeId?qt.getDetails(Pn,(lt,dt)=>{dt===window.google.maps.places.PlacesServiceStatus.OK?Bn(lt):zn(new Error("Place not found"))}):qt.findPlaceFromQuery({query:Pn.query,fields:["photos","place_id"]},(lt,dt)=>{dt===window.google.maps.places.PlacesServiceStatus.OK&&lt[0]?Bn(lt[0]):zn(new Error("Place not found"))})}))(yt);if(bn.photos&&bn.photos.length>0){const Pn=bn.photos[0].getUrl({maxWidth:400,maxHeight:300});await U9(G.code,Pn),await D()}else alert("No photos found for this business on Google Places")}catch(gt){console.error("Error fetching photo:",gt),alert("Could not fetch photo. Try searching for the business manually.")}I(null)},Ce=async(G,pe)=>{await z9(G,!pe),await D()},ie=async()=>{if(confirm("This will add all Kinderhook businesses. Continue?")){S(!0);try{for(const G of Bz)t.find(qe=>qe.code===G.code)||await Gw(G.code,G.name,G.category);await D(),alert("Businesses seeded successfully!")}catch(G){console.error("Error seeding:",G),alert("Error seeding businesses")}S(!1)}},me=G=>{navigator.clipboard.writeText(G),_(G),setTimeout(()=>_(null),2e3)},ue="https://harmonicsystems.github.io/kinderbucks/#/checkin/",$={total:t.length,active:t.filter(G=>G.isActive).length,totalCheckins:t.reduce((G,pe)=>G+(pe.checkinCount||0),0)};return o?i.jsx(Kt,{title:"Business Directory",children:i.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:i.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading..."})})}):i.jsxs(Kt,{title:"Business Directory",children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[i.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:$.total}),i.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Businesses"})]}),i.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-green)"},children:$.active}),i.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Active"})]}),i.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-gold-dark)"},children:$.totalCheckins}),i.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Check-ins"})]})]}),i.jsxs("div",{className:"card",style:{marginBottom:"2rem"},children:[i.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(ni,{size:20})," Add Business"]}),i.jsxs("div",{style:{marginBottom:"1.5rem"},children:[i.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:[i.jsx(tm,{size:16,style:{marginRight:"0.5rem",verticalAlign:"middle"}}),"Search Google Places"]}),i.jsx(Oz,{onPlaceSelect:z,placeholder:"Search for a business by name..."}),i.jsx("p",{style:{marginTop:"0.5rem",fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Search to auto-fill details, or enter manually below"})]}),c.photoUrl&&i.jsxs("div",{style:{marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"1rem",padding:"1rem",background:"var(--kb-gray-50)",borderRadius:"8px"},children:[i.jsx("img",{src:c.photoUrl,alt:c.name,style:{width:"80px",height:"80px",objectFit:"cover",borderRadius:"8px"}}),i.jsxs("div",{children:[i.jsx("div",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:c.name}),i.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:c.address}),c.website&&i.jsx("a",{href:c.website,target:"_blank",rel:"noopener noreferrer",style:{fontSize:"0.85rem",color:"var(--kb-gold-dark)"},children:c.website})]})]}),i.jsx("div",{style:{borderTop:"1px solid var(--kb-gray-200)",paddingTop:"1.5rem"},children:i.jsxs("form",{onSubmit:L,children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1.5rem",marginBottom:"1.5rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Code *"}),i.jsx("input",{type:"text",value:c.code,onChange:G=>h(pe=>({...pe,code:G.target.value.toUpperCase().replace(/[^A-Z0-9-]/g,"")})),placeholder:"CAFE-01",style:{width:"100%",fontFamily:"monospace"},required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Name *"}),i.jsx("input",{type:"text",value:c.name,onChange:G=>h(pe=>({...pe,name:G.target.value})),placeholder:"Village Caf",style:{width:"100%"},required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Category"}),i.jsx("select",{value:c.category,onChange:G=>h(pe=>({...pe,category:G.target.value})),style:{width:"100%"},children:Object.entries(xg).map(([G,pe])=>i.jsx("option",{value:G,children:pe.label},G))})]})]}),i.jsxs("div",{style:{marginBottom:"1.5rem"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:"Address"}),i.jsx("input",{type:"text",value:c.address,onChange:G=>h(pe=>({...pe,address:G.target.value})),placeholder:"123 Main Street, Kinderhook, NY 12106",style:{width:"100%"}})]}),i.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[i.jsxs("button",{type:"submit",className:"btn btn-primary",disabled:d||!c.code||!c.name,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(ni,{size:18})," ",d?"Adding...":"Add Business"]}),i.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:ie,disabled:x,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(L0,{size:18})," ",x?"Seeding...":"Seed Kinderhook Businesses"]})]})]})})]}),i.jsxs("div",{className:"card",children:[i.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(It,{size:20})," Participating Businesses (",t.length,")"]}),t.length===0?i.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[i.jsx(It,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),i.jsx("p",{children:"No businesses yet. Add one above or seed the Kinderhook businesses."})]}):i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:t.map(G=>{const pe=xg[G.category]||xg.services,qe=pe.Icon,gt=`${ue}${G.code}`;return i.jsxs("div",{style:{background:G.isActive?"var(--kb-white)":"var(--kb-gray-50)",border:`1px solid ${G.isActive,"var(--kb-gray-200)"}`,borderRadius:"12px",padding:"1.25rem",opacity:G.isActive?1:.7},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"1rem"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[G.photoUrl?i.jsx("img",{src:G.photoUrl,alt:G.name,style:{width:"48px",height:"48px",objectFit:"cover",borderRadius:"10px"}}):i.jsx("div",{style:{width:"48px",height:"48px",background:`${pe.color}15`,borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(qe,{size:24,color:pe.color})}),i.jsxs("div",{children:[i.jsx("div",{style:{fontWeight:"600",color:G.isActive?"var(--kb-navy)":"var(--kb-gray-500)",fontSize:"1.1rem"},children:G.name}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginTop:"0.25rem",flexWrap:"wrap"},children:[i.jsx("span",{style:{fontFamily:"monospace",fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:G.code}),i.jsx("span",{style:{fontSize:"0.85rem",color:pe.color},children:pe.label}),G.address&&i.jsx("span",{style:{fontSize:"0.8rem",color:"var(--kb-gray-400)"},children:G.address.split(",")[0]})]})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1.5rem"},children:[i.jsxs("div",{style:{textAlign:"center"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"var(--kb-green)",fontWeight:"600"},children:[i.jsx(bs,{size:16}),G.checkinCount||0]}),i.jsx("div",{style:{fontSize:"0.75rem",color:"var(--kb-gray-500)"},children:"check-ins"})]}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[i.jsxs(fe,{to:`/admin/businesses/${G.code}`,className:"btn btn-gold",style:{padding:"0.5rem 0.75rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:[i.jsx(_u,{size:16})," Details"]}),i.jsx("button",{onClick:()=>y(g===G.code?null:G.code),className:"btn btn-secondary",style:{padding:"0.5rem 0.75rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:i.jsx(Pr,{size:16})}),i.jsxs("button",{onClick:()=>Ce(G.code,G.isActive),className:"btn",style:{padding:"0.5rem 0.75rem",background:G.isActive?"#e74c3c":"var(--kb-green)",color:"white",display:"flex",alignItems:"center",gap:"0.25rem"},children:[G.isActive?i.jsx(mV,{size:16}):i.jsx(hV,{size:16}),G.isActive?"Deactivate":"Activate"]}),i.jsx("button",{onClick:()=>tt(G),className:"btn",style:{padding:"0.5rem 0.75rem",background:G.photoUrl?"var(--kb-gray-100)":"rgba(201, 162, 39, 0.1)",color:G.photoUrl?"var(--kb-gray-500)":"var(--kb-gold-dark)",display:"flex",alignItems:"center"},title:G.photoUrl?"Refresh photo":"Fetch photo from Google",disabled:E===G.code,children:i.jsx(p5,{size:16,className:E===G.code?"animate-pulse":""})}),i.jsx("button",{onClick:()=>O(G.code,G.name),className:"btn",style:{padding:"0.5rem 0.75rem",background:"var(--kb-gray-100)",color:"var(--kb-gray-600)",display:"flex",alignItems:"center"},title:"Delete business",children:i.jsx(Ni,{size:16})})]})]})]}),g===G.code&&i.jsxs("div",{style:{marginTop:"1.5rem",paddingTop:"1.5rem",borderTop:"1px solid var(--kb-gray-200)",display:"flex",alignItems:"center",gap:"2rem",flexWrap:"wrap"},children:[i.jsx("div",{style:{textAlign:"center"},children:i.jsx(xa,{value:gt,size:150,denomination:5,showFrame:!1})}),i.jsxs("div",{style:{flex:1,minWidth:"200px"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontSize:"0.85rem"},children:"Check-in URL"}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[i.jsx("input",{type:"text",value:gt,readOnly:!0,style:{flex:1,fontFamily:"monospace",fontSize:"0.85rem"}}),i.jsxs("button",{onClick:()=>me(gt),className:"btn btn-secondary",style:{padding:"0.5rem 0.75rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:[i.jsx(V0,{size:16}),w===gt?"Copied!":"Copy"]})]}),i.jsx("p",{style:{marginTop:"0.75rem",fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Print this QR code and display it at the counter for customers to scan when they visit."})]})]})]},G.code)})})]}),n.length>0&&i.jsxs("div",{className:"card",style:{marginTop:"2rem"},children:[i.jsxs("button",{onClick:()=>P(!T),style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",background:"none",border:"none",cursor:"pointer",padding:0},children:[i.jsxs("h3",{style:{color:"var(--kb-gray-500)",display:"flex",alignItems:"center",gap:"0.5rem",margin:0},children:[i.jsx(f5,{size:20})," Deleted Businesses (",n.length,")"]}),i.jsx("span",{style:{color:"var(--kb-gray-400)"},children:T?"":""})]}),T&&i.jsx("div",{style:{marginTop:"1.5rem",display:"flex",flexDirection:"column",gap:"0.75rem"},children:n.map(G=>{var pe;return i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem",background:"var(--kb-gray-50)",borderRadius:"8px",opacity:.7},children:[i.jsxs("div",{children:[i.jsx("div",{style:{fontWeight:"500",color:"var(--kb-gray-600)"},children:G.name}),i.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-400)"},children:[G.code,"  Deleted ",(pe=G.deletedAt)!=null&&pe.toDate?G.deletedAt.toDate().toLocaleDateString():"recently"]})]}),i.jsxs("button",{onClick:()=>$e(G.code),className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(S5,{size:16})," Restore"]})]},G.code)})})]}),V&&i.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:i.jsxs("div",{className:"card",style:{maxWidth:"500px",width:"100%",padding:"2rem"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1.5rem"},children:[i.jsx("div",{style:{width:"48px",height:"48px",background:(te=V.info)!=null&&te.hasData?"rgba(231, 76, 60, 0.1)":"rgba(39, 174, 96, 0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:(Ie=V.info)!=null&&Ie.hasData?i.jsx(E5,{size:24,color:"#e74c3c"}):i.jsx(Ni,{size:24,color:"var(--kb-green)"})}),i.jsxs("div",{children:[i.jsxs("h3",{style:{color:"var(--kb-navy)",margin:0},children:["Delete ",V.name,"?"]}),i.jsx("p",{style:{color:"var(--kb-gray-500)",margin:0,fontSize:"0.9rem"},children:(Te=V.info)!=null&&Te.hasData?"This business has associated data":"This business can be safely deleted"})]})]}),((Le=V.info)==null?void 0:Le.hasData)&&i.jsxs("div",{style:{background:"rgba(231, 76, 60, 0.05)",border:"1px solid rgba(231, 76, 60, 0.2)",borderRadius:"8px",padding:"1rem",marginBottom:"1.5rem"},children:[i.jsx("div",{style:{fontWeight:"600",color:"#c0392b",marginBottom:"0.5rem"},children:"Associated Data Found:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem",color:"var(--kb-gray-600)"},children:[V.info.checkinCount>0&&i.jsxs("li",{children:[V.info.checkinCount," check-ins recorded"]}),V.info.transactionCount>0&&i.jsxs("li",{children:[V.info.transactionCount," transactions"]}),V.info.balance>0&&i.jsxs("li",{children:["$",V.info.balance.toFixed(2)," Kinderbucks balance"]})]}),i.jsx("p",{style:{margin:"0.75rem 0 0 0",fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"The business will be soft-deleted and can be restored later."})]}),((ze=V.info)==null?void 0:ze.hasData)&&i.jsxs("div",{style:{marginBottom:"1.5rem"},children:[i.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:['Type "',V.name,'" to confirm:']}),i.jsx("input",{type:"text",value:F,onChange:G=>K(G.target.value),placeholder:V.name,style:{width:"100%"}})]}),i.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end"},children:[i.jsx("button",{onClick:()=>{M(null),K("")},className:"btn btn-secondary",children:"Cancel"}),(se=V.info)!=null&&se.hasData?i.jsx("button",{onClick:()=>Re(!0),className:"btn",style:{background:"#e74c3c",color:"white"},disabled:F!==V.name||q,children:q?"Deleting...":"Delete Anyway"}):i.jsx("button",{onClick:()=>Re(!1),className:"btn",style:{background:"#e74c3c",color:"white"},disabled:q,children:q?"Deleting...":"Delete"})]})]})})]})}const Fz={curious:xn,hooked:Lr,lineAndSinker:Rr,patron:yr};function Uz(){const[t,e]=C.useState([]),[n,r]=C.useState(!0),[o,l]=C.useState("all"),[c,h]=C.useState(null),d=async()=>{try{const w=Mt(it(ye,"exchanges"),Vr("createdAt","desc")),_=await ft(w);e(_.docs.map(T=>({id:T.id,...T.data()}))),r(!1)}catch(w){console.error("Error loading exchanges:",w),r(!1)}};C.useEffect(()=>{d()},[]);const m=async(w,_)=>{h(w);try{await ut(Ve(ye,"exchanges",w),{status:_,processedAt:Be()}),await d()}catch(T){console.error("Error updating exchange:",T),alert("Error updating exchange status")}h(null)},g=o==="all"?t:t.filter(w=>w.status===o),y={total:t.length,pending:t.filter(w=>w.status==="pending").length,completed:t.filter(w=>w.status==="completed").length,cancelled:t.filter(w=>w.status==="cancelled").length,totalValue:t.filter(w=>w.status==="completed").reduce((w,_)=>w+(_.kinderbucksAmount||0),0)},x=w=>{switch(w){case"completed":return i.jsx(vn,{size:18,color:"var(--kb-green)"});case"pending":return i.jsx(hr,{size:18,color:"#e67e22"});case"cancelled":return i.jsx(y5,{size:18,color:"#e74c3c"});default:return i.jsx(hs,{size:18,color:"var(--kb-gray-400)"})}},S=w=>{switch(w){case"completed":return{background:"#d4edda",color:"var(--kb-green)"};case"pending":return{background:"#fff3cd",color:"#856404"};case"cancelled":return{background:"#f8d7da",color:"#721c24"};default:return{background:"#f8f9fa",color:"var(--kb-gray-600)"}}};return n?i.jsx(Kt,{title:"Exchange Management",children:i.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:i.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading exchanges..."})})}):i.jsxs(Kt,{title:"Exchange Management",children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[i.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"#e67e22"},children:y.pending}),i.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Pending"})]}),i.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-green)"},children:y.completed}),i.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Completed"})]}),i.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[i.jsxs("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-gold-dark)"},children:["$",y.totalValue.toFixed(0)]}),i.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Exchanged"})]})]}),i.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem",flexWrap:"wrap"},children:[{value:"all",label:`All (${y.total})`},{value:"pending",label:`Pending (${y.pending})`},{value:"completed",label:`Completed (${y.completed})`},{value:"cancelled",label:`Cancelled (${y.cancelled})`}].map(w=>i.jsx("button",{onClick:()=>l(w.value),className:o===w.value?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem"},children:w.label},w.value))}),i.jsx("div",{className:"card",children:g.length===0?i.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[i.jsx(P0,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),i.jsxs("p",{children:["No ",o!=="all"?o:""," exchanges found"]})]}):i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 150px",gap:"1rem",padding:"0.75rem 1rem",borderBottom:"2px solid var(--kb-navy)",fontWeight:"600",color:"var(--kb-navy)",fontSize:"0.85rem"},children:[i.jsx("div",{children:"Date"}),i.jsx("div",{children:"Amount"}),i.jsx("div",{children:"Tier & Bonus"}),i.jsx("div",{children:"Status"}),i.jsx("div",{children:"Actions"})]}),g.map(w=>{var T,P,V,M,F,K,q;const _=Fz[w.tier]||xn;return i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 150px",gap:"1rem",padding:"1rem",borderBottom:"1px solid var(--kb-gray-100)",alignItems:"center",background:w.status==="pending"?"rgba(230, 126, 34, 0.05)":"transparent"},children:[i.jsxs("div",{children:[i.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:((V=(P=(T=w.createdAt)==null?void 0:T.toDate)==null?void 0:P.call(T))==null?void 0:V.toLocaleDateString())||"Unknown"}),i.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:((K=(F=(M=w.createdAt)==null?void 0:M.toDate)==null?void 0:F.call(M))==null?void 0:K.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))||""})]}),i.jsxs("div",{children:[i.jsxs("div",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:["$",w.usdAmount," USD"]}),i.jsxs("div",{style:{fontSize:"0.9rem",color:"var(--kb-gold-dark)"},children:[" $",(q=w.kinderbucksAmount)==null?void 0:q.toFixed(2)," KB"]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(_,{size:18,color:"var(--kb-gray-500)"}),i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"0.9rem",color:"var(--kb-gray-700)",textTransform:"capitalize"},children:w.tier||"curious"}),i.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--kb-green)"},children:["+",Math.round((w.bonusRate||.1)*100),"% bonus"]})]})]}),i.jsx("div",{children:i.jsxs("span",{className:"badge",style:{...S(w.status),display:"inline-flex",alignItems:"center",gap:"0.25rem"},children:[x(w.status),w.status]})}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[w.status==="pending"&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>m(w.id,"completed"),disabled:c===w.id,className:"btn btn-primary",style:{padding:"0.4rem 0.75rem",fontSize:"0.8rem"},children:c===w.id?"...":"Approve"}),i.jsx("button",{onClick:()=>m(w.id,"cancelled"),disabled:c===w.id,className:"btn btn-secondary",style:{padding:"0.4rem 0.75rem",fontSize:"0.8rem"},children:"Cancel"})]}),w.status==="completed"&&i.jsx("span",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Processed"}),w.status==="cancelled"&&i.jsx("button",{onClick:()=>m(w.id,"pending"),disabled:c===w.id,className:"btn btn-secondary",style:{padding:"0.4rem 0.75rem",fontSize:"0.8rem"},children:"Reopen"})]})]},w.id)})]})})]})}const bg={curious:xn,hooked:Lr,lineAndSinker:Rr,patron:yr},kg={curious:"#888888",hooked:"#2e7d32",lineAndSinker:"#1565c0",patron:"#c9a227"};function Wz(){const[t,e]=C.useState([]),[n,r]=C.useState([]),[o,l]=C.useState(!0),[c,h]=C.useState("checkins"),[d,m]=C.useState("all");C.useEffect(()=>{async function w(){try{const T=(await ft(it(ye,"members"))).docs.map(V=>({id:V.id,...V.data()})),P=await Xn();e(T),r(P),l(!1)}catch(_){console.error("Error loading members:",_),l(!1)}}w()},[]);const g=w=>{const _=n.find(T=>T.code===w);return _?_.name:w},y=[...t].sort((w,_)=>{var T,P,V,M,F,K;switch(c){case"checkins":return(_.totalCheckins||0)-(w.totalCheckins||0);case"businesses":return(((T=_.businessesVisited)==null?void 0:T.length)||0)-(((P=w.businessesVisited)==null?void 0:P.length)||0);case"recent":const q=((M=(V=w.lastCheckin)==null?void 0:V.toDate)==null?void 0:M.call(V))||new Date(0);return(((K=(F=_.lastCheckin)==null?void 0:F.toDate)==null?void 0:K.call(F))||new Date(0))-q;default:return 0}}),x=d==="all"?y:y.filter(w=>w.tier===d),S={total:t.length,curious:t.filter(w=>w.tier==="curious").length,hooked:t.filter(w=>w.tier==="hooked").length,lineAndSinker:t.filter(w=>w.tier==="lineAndSinker").length,patron:t.filter(w=>w.tier==="patron").length,totalCheckins:t.reduce((w,_)=>w+(_.totalCheckins||0),0)};return o?i.jsx(Kt,{title:"Member Management",children:i.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:i.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading members..."})})}):i.jsxs(Kt,{title:"Member Management",children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(130px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[i.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:S.total}),i.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Members"})]}),Object.entries(bg).map(([w,_])=>{var T;return i.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[i.jsx(_,{size:20,color:kg[w]}),i.jsx("span",{style:{fontSize:"1.5rem",fontWeight:"700",color:kg[w]},children:S[w]})]}),i.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)",textTransform:"capitalize"},children:((T=Nr[w])==null?void 0:T.name)||w})]},w)})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[i.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[i.jsx("button",{onClick:()=>m("all"),className:d==="all"?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem"},children:"All"}),Object.entries(bg).map(([w,_])=>i.jsx("button",{onClick:()=>m(w),className:d===w?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:i.jsx(_,{size:16})},w))]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx("span",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:"Sort by:"}),i.jsxs("select",{value:c,onChange:w=>h(w.target.value),style:{padding:"0.5rem"},children:[i.jsx("option",{value:"checkins",children:"Most Check-ins"}),i.jsx("option",{value:"businesses",children:"Most Businesses"}),i.jsx("option",{value:"recent",children:"Recent Activity"})]})]})]}),i.jsx("div",{className:"card",children:x.length===0?i.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[i.jsx(ln,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),i.jsx("p",{children:"No members found"})]}):i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 2fr",gap:"1rem",padding:"0.75rem 1rem",borderBottom:"2px solid var(--kb-navy)",fontWeight:"600",color:"var(--kb-navy)",fontSize:"0.85rem"},children:[i.jsx("div",{children:"Member"}),i.jsx("div",{children:"Tier"}),i.jsx("div",{children:"Activity"}),i.jsx("div",{children:"Businesses Visited"})]}),x.map(w=>{var M,F,K,q,A;const _=bg[w.tier]||xn,T=kg[w.tier]||"#888",P=Nr[w.tier]||Nr.curious,V=((M=w.businessesVisited)==null?void 0:M.length)||0;return i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 2fr",gap:"1rem",padding:"1rem",borderBottom:"1px solid var(--kb-gray-100)",alignItems:"center"},children:[i.jsxs("div",{children:[i.jsxs("div",{style:{fontFamily:"monospace",fontSize:"0.85rem",color:"var(--kb-gray-500)",wordBreak:"break-all"},children:[w.id.substring(0,16),"..."]}),w.lastCheckin&&i.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-400)",display:"flex",alignItems:"center",gap:"0.25rem",marginTop:"0.25rem"},children:[i.jsx(Gu,{size:12}),"Last: ",((q=(K=(F=w.lastCheckin)==null?void 0:F.toDate)==null?void 0:K.call(F))==null?void 0:q.toLocaleDateString())||"Unknown"]})]}),i.jsxs("div",{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:T,fontWeight:"600"},children:[i.jsx(_,{size:20}),P.name]}),i.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:[Math.round(P.bonus*100),"% bonus"]})]}),i.jsxs("div",{children:[i.jsxs("div",{style:{fontWeight:"600",color:"var(--kb-navy)",display:"flex",alignItems:"center",gap:"0.25rem"},children:[i.jsx(bs,{size:16}),w.totalCheckins||0]}),i.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:"check-ins"})]}),i.jsxs("div",{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",marginBottom:"0.5rem",color:"var(--kb-gray-600)"},children:[i.jsx(an,{size:14}),i.jsx("span",{style:{fontWeight:"500"},children:V}),i.jsx("span",{style:{fontSize:"0.85rem"},children:"businesses"})]}),((A=w.businessesVisited)==null?void 0:A.length)>0&&i.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.25rem"},children:[w.businessesVisited.slice(0,3).map(E=>i.jsx("span",{style:{fontSize:"0.75rem",padding:"0.15rem 0.5rem",background:"var(--kb-gray-100)",borderRadius:"4px",color:"var(--kb-gray-600)"},children:g(E)},E)),w.businessesVisited.length>3&&i.jsxs("span",{style:{fontSize:"0.75rem",color:"var(--kb-gray-400)"},children:["+",w.businessesVisited.length-3," more"]})]})]})]},w.id)})]})}),i.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"var(--kb-gray-50)",borderRadius:"8px",textAlign:"center",color:"var(--kb-gray-600)",fontSize:"0.9rem"},children:["Total of ",i.jsx("strong",{children:S.totalCheckins})," check-ins across ",i.jsx("strong",{children:S.total})," members"]})]})}const wg={admin:{label:"Admin",color:"#dc2626",bgColor:"#fef2f2",Icon:df,description:"Full system access"},business:{label:"Business",color:"#2563eb",bgColor:"#eff6ff",Icon:It,description:"Business owner access"},member:{label:"Member",color:"var(--kb-green)",bgColor:"#f0fdf4",Icon:_l,description:"Regular member"}};function $z(){var $,te,Ie,Te,Le,ze;const[t,e]=C.useState([]),[n,r]=C.useState([]),[o,l]=C.useState([]),[c,h]=C.useState(!0),[d,m]=C.useState(""),[g,y]=C.useState("all"),[x,S]=C.useState(null),[w,_]=C.useState(null),[T,P]=C.useState(""),[V,M]=C.useState(null),[F,K]=C.useState(!1),[q,A]=C.useState(null),[E,I]=C.useState(""),[D,L]=C.useState(!1),z=async()=>{const[se,G,pe]=await Promise.all([KM(),Xn(),XM()]);e(se.filter(qe=>!qe.isDeleted)),r(pe),l(G),h(!1)};C.useEffect(()=>{z()},[]);const O=async(se,G)=>{M(`${se}-${G}`);try{const pe=t.find(gt=>gt.id===se);ei(pe).includes(G)?await $M(se,G):await WM(se,G),P("Role updated successfully"),setTimeout(()=>P(""),3e3),await z()}catch(pe){console.error("Error updating role:",pe),alert("Error updating role")}M(null)},Re=async(se,G)=>{try{await HM(se,G),P("Business assigned successfully"),setTimeout(()=>P(""),3e3),await z(),_(null)}catch(pe){console.error("Error assigning business:",pe),alert("Error assigning business")}},$e=async se=>{const G=await u5(se.id);A({user:se,info:G}),I("")},tt=async(se=!1)=>{if(q){L(!0);try{await GM(q.user.id,null,se),A(null),I(""),P("User deleted successfully"),setTimeout(()=>P(""),3e3),await z()}catch(G){console.error("Error deleting user:",G),alert(G.message||"Error deleting user")}L(!1)}},Ce=async se=>{try{await QM(se),P("User restored successfully"),setTimeout(()=>P(""),3e3),await z()}catch(G){console.error("Error restoring user:",G),alert("Error restoring user")}},ie=t.filter(se=>{var qe,gt;const G=((qe=se.email)==null?void 0:qe.toLowerCase().includes(d.toLowerCase()))||((gt=se.displayName)==null?void 0:gt.toLowerCase().includes(d.toLowerCase()));if(g==="all")return G;const pe=ei(se);return G&&pe.includes(g)}),me={total:t.length,admins:t.filter(se=>ei(se).includes("admin")).length,businesses:t.filter(se=>ei(se).includes("business")).length,members:t.filter(se=>ei(se).includes("member")).length},ue=se=>se?(se.toDate?se.toDate():new Date(se)).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Never";return c?i.jsx(Kt,{title:"User Management",children:i.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:i.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading..."})})}):i.jsxs(Kt,{title:"User Management",children:[T&&i.jsxs("div",{style:{position:"fixed",top:"100px",right:"2rem",background:"var(--kb-green)",color:"white",padding:"1rem 1.5rem",borderRadius:"8px",display:"flex",alignItems:"center",gap:"0.75rem",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:1e3},children:[i.jsx(vn,{size:20}),i.jsx("span",{children:T})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[i.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:me.total}),i.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Users"})]}),i.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"#dc2626"},children:me.admins}),i.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Admins"})]}),i.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"#2563eb"},children:me.businesses}),i.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Business Users"})]}),i.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-green)"},children:me.members}),i.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Members"})]})]}),i.jsx("div",{className:"card",style:{marginBottom:"2rem"},children:i.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap",alignItems:"center"},children:[i.jsxs("div",{style:{flex:1,minWidth:"200px",position:"relative"},children:[i.jsx(tm,{size:18,color:"var(--kb-gray-400)",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)"}}),i.jsx("input",{type:"text",placeholder:"Search by name or email...",value:d,onChange:se=>m(se.target.value),style:{width:"100%",paddingLeft:"40px"}})]}),i.jsxs("select",{value:g,onChange:se=>y(se.target.value),style:{minWidth:"150px"},children:[i.jsx("option",{value:"all",children:"All Roles"}),i.jsx("option",{value:"admin",children:"Has Admin"}),i.jsx("option",{value:"business",children:"Has Business"}),i.jsx("option",{value:"member",children:"Has Member"})]})]})}),i.jsxs("div",{className:"card",children:[i.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(ln,{size:20})," All Users (",ie.length,")"]}),ie.length===0?i.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[i.jsx(ln,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),i.jsx("p",{children:"No users found"})]}):i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:ie.map(se=>{const G=ei(se),pe=G.includes("admin")?"admin":G.includes("business")?"business":"member",qe=wg[pe],gt=qe.Icon;return i.jsxs("div",{style:{background:"var(--kb-gray-50)",border:"1px solid var(--kb-gray-200)",borderRadius:"12px",padding:"1.25rem"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",flexWrap:"wrap",gap:"1rem"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[i.jsx("div",{style:{width:"48px",height:"48px",background:qe.bgColor,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(gt,{size:24,color:qe.color})}),i.jsxs("div",{children:[i.jsxs("div",{style:{fontWeight:"600",color:"var(--kb-navy)",fontSize:"1.05rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[se.displayName||"Unnamed User",G.includes("admin")&&i.jsx(yr,{size:16,color:"#c9a227"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--kb-gray-500)",fontSize:"0.9rem"},children:[i.jsx(b5,{size:14}),se.email]}),se.businessCode&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#2563eb",fontSize:"0.85rem",marginTop:"0.25rem"},children:[i.jsx(It,{size:14}),se.businessCode]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"var(--kb-gray-400)",fontSize:"0.8rem",marginTop:"0.25rem"},children:[i.jsx(Gu,{size:12}),"Last login: ",ue(se.lastLogin)]})]})]}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:"0.75rem"},children:[i.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:G.map(qt=>{const yt=wg[qt];return yt?i.jsxs("div",{style:{padding:"0.35rem 0.75rem",background:yt.bgColor,color:yt.color,borderRadius:"6px",fontSize:"0.8rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.35rem"},children:[i.jsx(yt.Icon,{size:14}),yt.label]},qt):null})}),i.jsx("button",{onClick:()=>S(x===se.id?null:se.id),className:"btn btn-secondary",style:{padding:"0.4rem 0.75rem",fontSize:"0.8rem"},children:x===se.id?"Done":"Edit Roles"})]})]}),x===se.id&&i.jsxs("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:"1px solid var(--kb-gray-200)"},children:[i.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)",marginBottom:"0.75rem"},children:"Toggle roles for this user:"}),i.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",marginBottom:"1rem"},children:Object.entries(wg).map(([qt,yt])=>{const dn=G.includes(qt),bn=V===`${se.id}-${qt}`;return i.jsxs("button",{onClick:()=>O(se.id,qt),disabled:bn,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",borderRadius:"8px",border:`2px solid ${dn?yt.color:"var(--kb-gray-300)"}`,background:dn?yt.bgColor:"white",color:dn?yt.color:"var(--kb-gray-500)",cursor:bn?"wait":"pointer",fontWeight:"500",fontSize:"0.9rem",opacity:bn?.6:1},children:[dn?i.jsx(k6,{size:16}):i.jsx(ni,{size:16}),i.jsx(yt.Icon,{size:16}),yt.label]},qt)})}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[G.includes("business")&&i.jsxs("button",{onClick:()=>_(se.id),className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem"},children:[i.jsx(It,{size:16}),se.businessCode?`Change Business (${se.businessCode})`:"Assign Business"]}),i.jsxs("button",{onClick:()=>$e(se),className:"btn",style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem",background:"var(--kb-gray-100)",color:"var(--kb-gray-600)"},children:[i.jsx(Ni,{size:16}),"Delete User"]})]})]})]},se.id)})})]}),n.length>0&&i.jsxs("div",{className:"card",style:{marginTop:"2rem"},children:[i.jsxs("button",{onClick:()=>K(!F),style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",background:"none",border:"none",cursor:"pointer",padding:0},children:[i.jsxs("h3",{style:{color:"var(--kb-gray-500)",display:"flex",alignItems:"center",gap:"0.5rem",margin:0},children:[i.jsx(f5,{size:20})," Deleted Users (",n.length,")"]}),i.jsx("span",{style:{color:"var(--kb-gray-400)"},children:F?"":""})]}),F&&i.jsx("div",{style:{marginTop:"1.5rem",display:"flex",flexDirection:"column",gap:"0.75rem"},children:n.map(se=>{var G;return i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem",background:"var(--kb-gray-50)",borderRadius:"8px",opacity:.7},children:[i.jsxs("div",{children:[i.jsx("div",{style:{fontWeight:"500",color:"var(--kb-gray-600)"},children:se.displayName||"Unnamed User"}),i.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-400)"},children:[se.email,"  Deleted ",(G=se.deletedAt)!=null&&G.toDate?se.deletedAt.toDate().toLocaleDateString():"recently"]})]}),i.jsxs("button",{onClick:()=>Ce(se.id),className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(S5,{size:16})," Restore"]})]},se.id)})})]}),w&&i.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:1e3},children:i.jsxs("div",{className:"card",style:{maxWidth:"400px",width:"100%",padding:"1.5rem"},children:[i.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Assign Business"}),i.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1rem"},children:"Select a business to assign to this user:"}),i.jsx("div",{style:{maxHeight:"300px",overflowY:"auto",marginBottom:"1rem"},children:o.map(se=>i.jsxs("button",{onClick:()=>Re(w,se.code),style:{display:"flex",alignItems:"center",gap:"0.75rem",width:"100%",padding:"0.75rem",border:"1px solid var(--kb-gray-200)",borderRadius:"8px",background:"white",cursor:"pointer",marginBottom:"0.5rem",textAlign:"left"},children:[i.jsx(It,{size:18,color:"var(--kb-navy)"}),i.jsxs("div",{children:[i.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:se.name}),i.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:se.code})]})]},se.code))}),i.jsx("button",{onClick:()=>_(null),className:"btn btn-secondary",style:{width:"100%"},children:"Cancel"})]})}),q&&i.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:i.jsxs("div",{className:"card",style:{maxWidth:"500px",width:"100%",padding:"2rem"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1.5rem"},children:[i.jsx("div",{style:{width:"48px",height:"48px",background:($=q.info)!=null&&$.hasData?"rgba(231, 76, 60, 0.1)":"rgba(39, 174, 96, 0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:(te=q.info)!=null&&te.hasData?i.jsx(E5,{size:24,color:"#e74c3c"}):i.jsx(Ni,{size:24,color:"var(--kb-green)"})}),i.jsxs("div",{children:[i.jsxs("h3",{style:{color:"var(--kb-navy)",margin:0},children:["Delete ",q.user.displayName||q.user.email,"?"]}),i.jsx("p",{style:{color:"var(--kb-gray-500)",margin:0,fontSize:"0.9rem"},children:(Ie=q.info)!=null&&Ie.hasData?"This user has associated data":"This user can be safely deleted"})]})]}),((Te=q.info)==null?void 0:Te.hasData)&&i.jsxs("div",{style:{background:"rgba(231, 76, 60, 0.05)",border:"1px solid rgba(231, 76, 60, 0.2)",borderRadius:"8px",padding:"1rem",marginBottom:"1.5rem"},children:[i.jsx("div",{style:{fontWeight:"600",color:"#c0392b",marginBottom:"0.5rem"},children:"Associated Data Found:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem",color:"var(--kb-gray-600)"},children:[q.info.checkinCount>0&&i.jsxs("li",{children:[q.info.checkinCount," check-ins recorded"]}),q.info.exchangeCount>0&&i.jsxs("li",{children:[q.info.exchangeCount," exchange requests"]}),q.info.isBusinessOwner&&i.jsxs("li",{children:["Business owner: ",q.info.businessCode]})]}),i.jsx("p",{style:{margin:"0.75rem 0 0 0",fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"The user will be soft-deleted and can be restored later."})]}),((Le=q.info)==null?void 0:Le.hasData)&&i.jsxs("div",{style:{marginBottom:"1.5rem"},children:[i.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500"},children:['Type "',q.user.email,'" to confirm:']}),i.jsx("input",{type:"text",value:E,onChange:se=>I(se.target.value),placeholder:q.user.email,style:{width:"100%"}})]}),i.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end"},children:[i.jsx("button",{onClick:()=>{A(null),I("")},className:"btn btn-secondary",children:"Cancel"}),(ze=q.info)!=null&&ze.hasData?i.jsx("button",{onClick:()=>tt(!0),className:"btn",style:{background:"#e74c3c",color:"white"},disabled:E!==q.user.email||D,children:D?"Deleting...":"Delete Anyway"}):i.jsx("button",{onClick:()=>tt(!1),className:"btn",style:{background:"#e74c3c",color:"white"},disabled:D,children:D?"Deleting...":"Delete"})]})]})})]})}const e2={curious:xn,hooked:Lr,lineAndSinker:Rr,patron:yr},t2={curious:"#6b7280",hooked:"#16a34a",lineAndSinker:"#2563eb",patron:"#ca8a04"};function Hz(){const{businessCode:t}=jf(),[e,n]=C.useState(null),[r,o]=C.useState([]),[l,c]=C.useState(!0),[h,d]=C.useState(!1);C.useEffect(()=>{async function _(){const[T,P]=await Promise.all([ed(t),jE(t)]);n(T),o(P),c(!1)}_()},[t]);const m=()=>{const _=`https://harmonicsystems.github.io/kinderbucks/#/checkin/${t}`;navigator.clipboard.writeText(_),d(!0),setTimeout(()=>d(!1),2e3)},g=r.filter(_=>{var V;const T=(V=_.timestamp)!=null&&V.toDate?_.timestamp.toDate():new Date(_.timestamp),P=new Date;return T.toDateString()===P.toDateString()}).length,y=r.filter(_=>{var V;const T=(V=_.timestamp)!=null&&V.toDate?_.timestamp.toDate():new Date(_.timestamp),P=new Date;return P.setDate(P.getDate()-7),T>P}).length,x=new Set(r.map(_=>_.visitorId)).size,S=r.reduce((_,T)=>{const P=T.memberTier||"curious";return _[P]=(_[P]||0)+1,_},{});if(l)return i.jsx(Kt,{title:"Business Details",children:i.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:i.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading..."})})});if(!e)return i.jsx(Kt,{title:"Business Details",children:i.jsxs("div",{style:{textAlign:"center",padding:"4rem"},children:[i.jsx(It,{size:48,color:"var(--kb-gray-300)",style:{marginBottom:"1rem"}}),i.jsx("h2",{style:{color:"var(--kb-navy)"},children:"Business Not Found"}),i.jsxs("p",{style:{color:"var(--kb-gray-500)",marginBottom:"1.5rem"},children:['No business with code "',t,'" exists.']}),i.jsx(fe,{to:"/admin/businesses",className:"btn btn-primary",children:"Back to Businesses"})]})});const w=`https://harmonicsystems.github.io/kinderbucks/#/checkin/${t}`;return i.jsxs(Kt,{title:"Business Details",children:[i.jsxs(fe,{to:"/admin/businesses",style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",color:"var(--kb-gray-500)",marginBottom:"1.5rem",fontSize:"0.9rem"},children:[i.jsx(m5,{size:16})," Back to Directory"]}),i.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",flexWrap:"wrap",gap:"1.5rem",marginBottom:"2rem"},children:[i.jsxs("div",{children:[i.jsx("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.25rem 0.75rem",background:e.isActive?"rgba(39, 174, 96, 0.1)":"rgba(231, 76, 60, 0.1)",color:e.isActive?"var(--kb-green)":"#e74c3c",borderRadius:"6px",fontSize:"0.85rem",fontWeight:"600",marginBottom:"0.75rem"},children:e.isActive?"Active":"Inactive"}),i.jsx("h1",{style:{color:"var(--kb-navy)",marginBottom:"0.25rem",fontSize:"2rem"},children:e.name}),i.jsx("div",{style:{fontFamily:"monospace",color:"var(--kb-gray-500)"},children:t})]}),i.jsxs("div",{className:"card",style:{padding:"1.5rem",textAlign:"center"},children:[i.jsx("div",{style:{background:"white",borderRadius:"12px",padding:"12px",marginBottom:"1rem"},children:i.jsx(xa,{value:w,size:120,showFrame:!1})}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[i.jsxs("button",{onClick:m,className:"btn btn-secondary",style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.25rem",fontSize:"0.85rem"},children:[i.jsx(V0,{size:14})," ",h?"Copied!":"Copy URL"]}),i.jsxs("button",{onClick:()=>window.print(),className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"0.85rem"},children:[i.jsx(L0,{size:14})," Print"]})]})]})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[i.jsx("div",{className:"card",style:{padding:"1.25rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[i.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(39, 174, 96, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(bs,{size:22,color:"var(--kb-green)"})}),i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:e.checkinCount||0}),i.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Total Check-ins"})]})]})}),i.jsx("div",{className:"card",style:{padding:"1.25rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[i.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(52, 152, 219, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(hr,{size:22,color:"#3498db"})}),i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:g}),i.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Today"})]})]})}),i.jsx("div",{className:"card",style:{padding:"1.25rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[i.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(155, 89, 182, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(Gu,{size:22,color:"#9b59b6"})}),i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:y}),i.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"This Week"})]})]})}),i.jsx("div",{className:"card",style:{padding:"1.25rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[i.jsx("div",{style:{width:"44px",height:"44px",background:"rgba(201, 162, 39, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(ln,{size:22,color:"var(--kb-gold-dark)"})}),i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-navy)"},children:x}),i.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Unique Visitors"})]})]})})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem"},children:[i.jsxs("div",{className:"card",children:[i.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem"},children:"Check-ins by Member Tier"}),Object.keys(S).length===0?i.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"No check-ins yet"}):i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:["curious","hooked","lineAndSinker","patron"].map(_=>{const T=S[_]||0;if(T===0&&!S[_])return null;const P=e2[_],V=t2[_],M={curious:"Curious",hooked:"Hooked",lineAndSinker:"Line & Sinker",patron:"Village Patron"},F=Math.max(...Object.values(S),1),K=T/F*100;return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.5rem"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(P,{size:18,color:V}),i.jsx("span",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:M[_]})]}),i.jsx("span",{style:{color:"var(--kb-gray-500)",fontWeight:"600"},children:T})]}),i.jsx("div",{style:{height:"8px",background:"var(--kb-gray-100)",borderRadius:"4px",overflow:"hidden"},children:i.jsx("div",{style:{width:`${K}%`,height:"100%",background:V,borderRadius:"4px"}})})]},_)}).filter(Boolean)})]}),i.jsxs("div",{className:"card",children:[i.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:"Check-in Information"}),i.jsxs("div",{style:{marginBottom:"1rem"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontSize:"0.85rem"},children:"Check-in URL"}),i.jsx("input",{type:"text",value:w,readOnly:!0,style:{width:"100%",fontFamily:"monospace",fontSize:"0.85rem"}})]}),i.jsxs("div",{style:{background:"var(--kb-cream)",borderRadius:"8px",padding:"1rem"},children:[i.jsx("h4",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem",fontSize:"0.95rem"},children:"How Check-ins Work"}),i.jsxs("ul",{style:{color:"var(--kb-gray-600)",fontSize:"0.9rem",paddingLeft:"1.25rem",lineHeight:1.6},children:[i.jsx("li",{children:"Customer scans QR code with phone"}),i.jsx("li",{children:"App shows verification code + bonus %"}),i.jsx("li",{children:"Customer shows screen to cashier"}),i.jsx("li",{children:"1 hour cooldown between check-ins"})]})]})]})]}),i.jsxs("div",{className:"card",style:{marginTop:"1.5rem"},children:[i.jsxs("h3",{style:{color:"var(--kb-navy)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(hr,{size:20})," Recent Check-ins"]}),r.length===0?i.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[i.jsx(ln,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),i.jsx("p",{children:"No check-ins recorded yet"})]}):i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:r.slice(0,25).map((_,T)=>{var F,K;const P=(F=_.timestamp)!=null&&F.toDate?_.timestamp.toDate():new Date(_.timestamp),V=e2[_.memberTier]||xn,M=t2[_.memberTier]||"#6b7280";return i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"var(--kb-gray-50)",borderRadius:"8px"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[i.jsx("div",{style:{width:"36px",height:"36px",background:"var(--kb-green)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(vn,{size:18,color:"white"})}),i.jsxs("div",{children:[i.jsxs("div",{style:{fontWeight:"500",color:"var(--kb-navy)",display:"flex",alignItems:"center",gap:"0.5rem"},children:["Check-in",_.memberTier&&i.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",fontSize:"0.75rem",color:M,background:`${M}15`,padding:"0.125rem 0.5rem",borderRadius:"4px"},children:[i.jsx(V,{size:12}),_.memberTier]})]}),i.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)",fontFamily:"monospace"},children:[(K=_.visitorId)==null?void 0:K.substring(0,8),"..."]})]})]}),i.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:P.toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]},_.id||T)})})]})]})}function Kz(){const{user:t}=gr(),[e,n]=C.useState([]),[r,o]=C.useState(!0),[l,c]=C.useState("all"),[h,d]=C.useState(null),m=async()=>{try{const _=await Iz();n(_),o(!1)}catch(_){console.error("Error loading redemptions:",_),o(!1)}};C.useEffect(()=>{m()},[]);const g=async(_,T)=>{d(_);try{await Cz(_,T,t.uid),await m()}catch(P){console.error("Error processing redemption:",P),alert("Error processing redemption: "+P.message)}d(null)},y=l==="all"?e:e.filter(_=>_.status===l),x={total:e.length,pending:e.filter(_=>_.status==="pending").length,approved:e.filter(_=>_.status==="approved").length,rejected:e.filter(_=>_.status==="rejected").length,totalValue:e.filter(_=>_.status==="approved").reduce((_,T)=>_+(T.amount||0),0)},S=_=>{switch(_){case"approved":return i.jsx(vn,{size:18,color:"var(--kb-green)"});case"pending":return i.jsx(hr,{size:18,color:"#e67e22"});case"rejected":return i.jsx(y5,{size:18,color:"#e74c3c"});default:return i.jsx(hs,{size:18,color:"var(--kb-gray-400)"})}},w=_=>{switch(_){case"approved":return{background:"#d4edda",color:"var(--kb-green)"};case"pending":return{background:"#fff3cd",color:"#856404"};case"rejected":return{background:"#f8d7da",color:"#721c24"};default:return{background:"#f8f9fa",color:"var(--kb-gray-600)"}}};return r?i.jsx(Kt,{title:"Redemption Requests",children:i.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem"},children:i.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading redemptions..."})})}):i.jsxs(Kt,{title:"Redemption Requests",children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[i.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"#e67e22"},children:x.pending}),i.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Pending"})]}),i.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-green)"},children:x.approved}),i.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Approved"})]}),i.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"#e74c3c"},children:x.rejected}),i.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Rejected"})]}),i.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[i.jsxs("div",{style:{fontSize:"1.75rem",fontWeight:"700",color:"var(--kb-gold-dark)"},children:["$",x.totalValue.toFixed(0)]}),i.jsx("div",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Total Redeemed"})]})]}),i.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem",flexWrap:"wrap"},children:[{value:"all",label:`All (${x.total})`},{value:"pending",label:`Pending (${x.pending})`},{value:"approved",label:`Approved (${x.approved})`},{value:"rejected",label:`Rejected (${x.rejected})`}].map(_=>i.jsx("button",{onClick:()=>c(_.value),className:l===_.value?"btn btn-primary":"btn btn-secondary",style:{padding:"0.5rem 1rem"},children:_.label},_.value))}),i.jsx("div",{className:"card",children:y.length===0?i.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--kb-gray-500)"},children:[i.jsx(ii,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),i.jsxs("p",{children:["No ",l!=="all"?l:""," redemption requests"]})]}):i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 150px",gap:"1rem",padding:"0.75rem 1rem",borderBottom:"2px solid var(--kb-navy)",fontWeight:"600",color:"var(--kb-navy)",fontSize:"0.85rem"},children:[i.jsx("div",{children:"Date"}),i.jsx("div",{children:"Business"}),i.jsx("div",{children:"Amount"}),i.jsx("div",{children:"Status"}),i.jsx("div",{children:"Actions"})]}),y.map(_=>{var T,P,V,M,F,K,q;return i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 150px",gap:"1rem",padding:"1rem",borderBottom:"1px solid var(--kb-gray-100)",alignItems:"center",background:_.status==="pending"?"rgba(230, 126, 34, 0.05)":"transparent"},children:[i.jsxs("div",{children:[i.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:((V=(P=(T=_.createdAt)==null?void 0:T.toDate)==null?void 0:P.call(T))==null?void 0:V.toLocaleDateString())||"Unknown"}),i.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:((K=(F=(M=_.createdAt)==null?void 0:M.toDate)==null?void 0:F.call(M))==null?void 0:K.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))||""})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(It,{size:18,color:"var(--kb-gray-400)"}),i.jsxs("div",{children:[i.jsx("div",{style:{fontWeight:"500",color:"var(--kb-navy)"},children:_.businessName||_.businessCode}),i.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)"},children:_.businessCode})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(Ll,{size:18,color:"var(--kb-gold-dark)"}),i.jsxs("span",{style:{fontSize:"1.25rem",fontWeight:"600",color:"var(--kb-navy)"},children:["$",(q=_.amount)==null?void 0:q.toFixed(2)]})]}),i.jsx("div",{children:i.jsxs("span",{className:"badge",style:{...w(_.status),display:"inline-flex",alignItems:"center",gap:"0.25rem"},children:[S(_.status),_.status]})}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[_.status==="pending"&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>g(_.id,!0),disabled:h===_.id,className:"btn btn-primary",style:{padding:"0.4rem 0.75rem",fontSize:"0.8rem"},children:h===_.id?"...":"Approve"}),i.jsx("button",{onClick:()=>g(_.id,!1),disabled:h===_.id,className:"btn btn-secondary",style:{padding:"0.4rem 0.75rem",fontSize:"0.8rem"},children:"Reject"})]}),_.status==="approved"&&i.jsx("span",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Processed"}),_.status==="rejected"&&i.jsx("span",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:"Rejected"})]})]},_.id)})]})})]})}const nc="landmarks";async function qz(t){const e=Ve(ye,nc,t),n=await On(e);return n.exists()?{code:n.id,...n.data()}:null}async function kv(t=!1){const e=Mt(it(ye,nc),Vr("name")),r=(await ft(e)).docs.map(o=>({code:o.id,...o.data()}));return t?r:r.filter(o=>o.isActive)}async function Gz(t,e){const n={code:t,name:e.name,description:e.description||"",category:e.category||"scenic",location:e.location||null,address:e.address||"",photoUrl:e.photoUrl||null,isActive:!0,scanCount:0,createdAt:Be()};return await Fi(Ve(ye,nc,t),n),n}async function n2(t,e){const n=Ve(ye,nc,t);await ut(n,{...e,updatedAt:Be()})}async function Qz(t){await Zf(Ve(ye,nc,t))}async function Yz(t){const{increment:e}=await wE(async()=>{const{increment:r}=await Promise.resolve().then(()=>a5);return{increment:r}},[]),n=Ve(ye,nc,t);await ut(n,{scanCount:e(1),lastScanned:Be()})}const Sf={historic:{name:"Historic",color:"#8B4513",description:"Historic sites and markers"},nature:{name:"Nature",color:"#228B22",description:"Parks, trails, and natural areas"},art:{name:"Public Art",color:"#9932CC",description:"Sculptures, murals, and installations"},scenic:{name:"Scenic",color:"#4169E1",description:"Viewpoints and photo spots"},trail:{name:"Rail Trail",color:"#CD853F",description:"Rail trail markers and access points"}};function Xz(){var q;const[t,e]=C.useState([]),[n,r]=C.useState(!0),[o,l]=C.useState(!1),[c,h]=C.useState(null),[d,m]=C.useState(null),[g,y]=C.useState({code:"",name:"",description:"",category:"scenic",address:"",photoUrl:""}),[x,S]=C.useState(!1),w=async()=>{try{const A=await kv(!0);e(A)}catch(A){console.error("Error loading landmarks:",A)}r(!1)};C.useEffect(()=>{w()},[]);const _=A=>A.toUpperCase().replace(/[^A-Z0-9\s]/g,"").replace(/\s+/g,"-").substring(0,20),T=async A=>{if(A.preventDefault(),!!g.name){S(!0);try{const E=c?c.code:_(g.name);c?await n2(E,{name:g.name,description:g.description,category:g.category,address:g.address,photoUrl:g.photoUrl||null}):await Gz(E,g),await w(),F()}catch(E){console.error("Error saving landmark:",E),alert("Error saving landmark")}S(!1)}},P=A=>{h(A),y({code:A.code,name:A.name,description:A.description||"",category:A.category,address:A.address||"",photoUrl:A.photoUrl||""}),l(!0)},V=async A=>{if(confirm("Delete this landmark? This cannot be undone."))try{await Qz(A),await w()}catch(E){console.error("Error deleting landmark:",E),alert("Error deleting landmark")}},M=async A=>{try{await n2(A.code,{isActive:!A.isActive}),await w()}catch(E){console.error("Error toggling landmark:",E)}},F=()=>{y({code:"",name:"",description:"",category:"scenic",address:"",photoUrl:""}),h(null),l(!1)},K=A=>`https://harmonicsystems.github.io/kinderbucks/#/landmark/${A}`;return i.jsxs(Kt,{title:"Landmarks",subtitle:"Manage village landmarks for scavenger hunts",children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[i.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"var(--kb-navy)"},children:t.length}),i.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Total Landmarks"})]}),i.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"var(--kb-green)"},children:t.filter(A=>A.isActive).length}),i.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Active"})]}),i.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"var(--kb-gold)"},children:t.reduce((A,E)=>A+(E.scanCount||0),0)}),i.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Total Scans"})]})]}),i.jsx("div",{style:{marginBottom:"1.5rem"},children:i.jsxs("button",{onClick:()=>l(!o),className:"btn btn-gold",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(ni,{size:18}),"Add Landmark"]})}),o&&i.jsxs(ce.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"card",style:{marginBottom:"1.5rem"},children:[i.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:c?"Edit Landmark":"Add New Landmark"}),i.jsxs("form",{onSubmit:T,children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{children:"Name *"}),i.jsx("input",{type:"text",value:g.name,onChange:A=>y(E=>({...E,name:A.target.value})),placeholder:"Martin Van Buren National Historic Site",style:{width:"100%"},required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{children:"Category"}),i.jsx("select",{value:g.category,onChange:A=>y(E=>({...E,category:A.target.value})),style:{width:"100%"},children:Object.entries(Sf).map(([A,E])=>i.jsx("option",{value:A,children:E.name},A))})]})]}),i.jsxs("div",{style:{marginBottom:"1rem"},children:[i.jsx("label",{children:"Description"}),i.jsx("textarea",{value:g.description,onChange:A=>y(E=>({...E,description:A.target.value})),placeholder:"Brief description of the landmark...",style:{width:"100%",minHeight:"80px"}})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[i.jsxs("div",{children:[i.jsx("label",{children:"Address"}),i.jsx("input",{type:"text",value:g.address,onChange:A=>y(E=>({...E,address:A.target.value})),placeholder:"123 Main St, Kinderhook, NY",style:{width:"100%"}})]}),i.jsxs("div",{children:[i.jsx("label",{children:"Photo URL (optional)"}),i.jsx("input",{type:"text",value:g.photoUrl,onChange:A=>y(E=>({...E,photoUrl:A.target.value})),placeholder:"https://...",style:{width:"100%"}})]})]}),i.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:x||!g.name,children:x?"Saving...":c?"Update Landmark":"Create Landmark"}),i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:F,children:"Cancel"})]})]})]}),n?i.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"var(--kb-gray-500)"},children:"Loading landmarks..."}):t.length===0?i.jsxs("div",{className:"card",style:{textAlign:"center",padding:"3rem"},children:[i.jsx(an,{size:48,color:"var(--kb-gray-300)",style:{marginBottom:"1rem"}}),i.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"No landmarks yet. Add your first one!"})]}):i.jsxs("div",{className:"card",children:[i.jsxs("table",{style:{width:"100%"},children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:"Landmark"}),i.jsx("th",{children:"Category"}),i.jsx("th",{children:"Scans"}),i.jsx("th",{children:"Status"}),i.jsx("th",{style:{textAlign:"right"},children:"Actions"})]})}),i.jsx("tbody",{children:t.map(A=>{const E=Sf[A.category];return i.jsxs("tr",{style:{opacity:A.isActive?1:.5},children:[i.jsx("td",{children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[i.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"8px",background:`${E==null?void 0:E.color}15`,display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(an,{size:20,color:E==null?void 0:E.color})}),i.jsxs("div",{children:[i.jsx("div",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:A.name}),i.jsx("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)",fontFamily:"monospace"},children:A.code})]})]})}),i.jsx("td",{children:i.jsx("span",{style:{padding:"0.25rem 0.5rem",background:`${E==null?void 0:E.color}15`,color:E==null?void 0:E.color,borderRadius:"4px",fontSize:"0.8rem",fontWeight:"500"},children:E==null?void 0:E.name})}),i.jsx("td",{style:{fontWeight:"600"},children:A.scanCount||0}),i.jsx("td",{children:i.jsx("span",{style:{padding:"0.25rem 0.5rem",background:A.isActive?"rgba(39, 174, 96, 0.1)":"var(--kb-gray-100)",color:A.isActive?"var(--kb-green)":"var(--kb-gray-500)",borderRadius:"4px",fontSize:"0.8rem",fontWeight:"500"},children:A.isActive?"Active":"Inactive"})}),i.jsx("td",{children:i.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[i.jsx("button",{onClick:()=>m(d===A.code?null:A.code),className:"btn btn-secondary",style:{padding:"0.4rem 0.6rem"},title:"Show QR Code",children:i.jsx(Pr,{size:16})}),i.jsx("button",{onClick:()=>P(A),className:"btn btn-secondary",style:{padding:"0.4rem 0.6rem"},title:"Edit",children:i.jsx(j5,{size:16})}),i.jsx("button",{onClick:()=>M(A),className:"btn btn-secondary",style:{padding:"0.4rem 0.6rem"},title:A.isActive?"Deactivate":"Activate",children:A.isActive?i.jsx(cf,{size:16}):i.jsx(_u,{size:16})}),i.jsx("button",{onClick:()=>V(A.code),className:"btn",style:{padding:"0.4rem 0.6rem",background:"#e74c3c",color:"white"},title:"Delete",children:i.jsx(Ni,{size:16})})]})})]},A.code)})})]}),d&&i.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},onClick:()=>m(null),children:i.jsxs(ce.div,{initial:{scale:.9},animate:{scale:1},className:"card",style:{maxWidth:"400px",textAlign:"center",padding:"2rem"},onClick:A=>A.stopPropagation(),children:[i.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:(q=t.find(A=>A.code===d))==null?void 0:q.name}),i.jsx("div",{style:{background:"white",borderRadius:"12px",padding:"1rem",display:"inline-block",marginBottom:"1rem"},children:i.jsx(xa,{value:K(d),size:200,denomination:1,showFrame:!1})}),i.jsx("p",{style:{fontSize:"0.85rem",color:"var(--kb-gray-500)",marginBottom:"1rem",fontFamily:"monospace"},children:K(d)}),i.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"center"},children:[i.jsxs("button",{onClick:()=>window.print(),className:"btn btn-gold",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(L0,{size:16})," Print"]}),i.jsx("button",{onClick:()=>m(null),className:"btn btn-secondary",children:"Close"})]})]})})]})]})}const rc="hunts",IE="huntProgress";async function Jz(t){const e=Ve(ye,rc,t),n=await On(e);return n.exists()?{id:n.id,...n.data()}:null}async function AE(t=!1){const e=Mt(it(ye,rc),Vr("createdAt","desc")),r=(await ft(e)).docs.map(o=>({id:o.id,...o.data()}));return t?r:r.filter(o=>o.isActive)}async function RE(){const t=rt.now();return(await AE()).filter(n=>{var h,d;if(!n.isActive)return!1;const r=(h=n.startDate)!=null&&h.toDate?n.startDate.toDate():new Date(n.startDate),o=(d=n.endDate)!=null&&d.toDate?n.endDate.toDate():null,l=r<=t.toDate(),c=!o||o>=t.toDate();return l&&c})}async function Zz(t){const e=`hunt-${Date.now()}`,n={name:t.name,description:t.description||"",type:t.type||"special",landmarks:t.landmarks||[],startDate:t.startDate?rt.fromDate(new Date(t.startDate)):rt.now(),endDate:t.endDate?rt.fromDate(new Date(t.endDate)):null,badge:t.badge||{name:t.name,icon:"map",color:"#c9a227"},reward:t.reward||{type:"badge",bonusPercent:0,duration:0},sponsorBusinessCode:t.sponsorBusinessCode||null,sponsorBusinessName:t.sponsorBusinessName||null,isActive:!0,completionCount:0,createdAt:Be()};return await Fi(Ve(ye,rc,e),n),{id:e,...n}}async function r2(t,e){const n=Ve(ye,rc,t);e.startDate&&typeof e.startDate=="string"&&(e.startDate=rt.fromDate(new Date(e.startDate))),e.endDate&&typeof e.endDate=="string"&&(e.endDate=rt.fromDate(new Date(e.endDate))),await ut(n,{...e,updatedAt:Be()})}async function e7(t){await Zf(Ve(ye,rc,t))}async function t7(t){const e=Mt(it(ye,IE),un("memberId","==",t));return(await ft(e)).docs.map(r=>({id:r.id,...r.data()}))}async function n7(t,e,n){const r=await Jz(n);if(!r||!r.landmarks.includes(e))return{updated:!1,completed:!1,hunt:null};const o=`${t}_${n}`,l=Ve(ye,IE,o),c=await On(l);let h=[];if(c.exists()&&(h=c.data().landmarksScanned||[]),h.includes(e))return{updated:!1,completed:h.length===r.landmarks.length,hunt:r,progress:{landmarksScanned:h,total:r.landmarks.length}};h.push(e);const d=h.length===r.landmarks.length,m={memberId:t,huntId:n,landmarksScanned:h,startedAt:c.exists()?c.data().startedAt:Be(),completedAt:d?Be():null,updatedAt:Be()};if(await Fi(l,m),d){const{increment:g}=await wE(async()=>{const{increment:x}=await Promise.resolve().then(()=>a5);return{increment:x}},void 0),y=Ve(ye,rc,n);await ut(y,{completionCount:g(1)})}return{updated:!0,completed:d,hunt:r,progress:{landmarksScanned:h,total:r.landmarks.length}}}async function r7(t){const[e,n]=await Promise.all([RE(),t7(t)]),r=Object.fromEntries(n.map(o=>[o.huntId,o]));return e.map(o=>{var l,c;return{...o,progress:r[o.id]||null,landmarksScanned:((l=r[o.id])==null?void 0:l.landmarksScanned)||[],isCompleted:((c=r[o.id])==null?void 0:c.completedAt)!==null}})}const Ay={weekly:{name:"Weekly Challenge",description:"Resets every week",color:"#3498db"},seasonal:{name:"Seasonal Event",description:"Limited time seasonal hunt",color:"#e67e22"},special:{name:"Special Event",description:"One-time special event",color:"#9b59b6"},permanent:{name:"Permanent",description:"Always available",color:"#27ae60"}};function i7(){const[t,e]=C.useState([]),[n,r]=C.useState([]),[o,l]=C.useState([]),[c,h]=C.useState(!0),[d,m]=C.useState(!1),[g,y]=C.useState(null),[x,S]=C.useState({name:"",description:"",type:"special",landmarks:[],startDate:"",endDate:"",sponsorBusinessCode:"",badge:{name:"",icon:"map",color:"#c9a227"},reward:{type:"badge",bonusPercent:0}}),[w,_]=C.useState(!1),T=async()=>{try{const[I,D,L]=await Promise.all([AE(!0),kv(!0),Xn()]);e(I),r(D.filter(z=>z.isActive)),l(L.filter(z=>z.isActive))}catch(I){console.error("Error loading data:",I)}h(!1)};C.useEffect(()=>{T()},[]);const P=async I=>{var D;if(I.preventDefault(),!(!x.name||x.landmarks.length===0)){_(!0);try{const L={name:x.name,description:x.description,type:x.type,landmarks:x.landmarks,startDate:x.startDate||null,endDate:x.endDate||null,sponsorBusinessCode:x.sponsorBusinessCode||null,sponsorBusinessName:x.sponsorBusinessCode&&((D=o.find(z=>z.code===x.sponsorBusinessCode))==null?void 0:D.name)||null,badge:{name:x.badge.name||x.name,icon:x.badge.icon,color:x.badge.color},reward:x.reward};g?await r2(g.id,L):await Zz(L),await T(),q()}catch(L){console.error("Error saving trail:",L),alert("Error saving trail")}_(!1)}},V=I=>{y(I);const D=L=>L?(L.toDate?L.toDate():new Date(L)).toISOString().split("T")[0]:"";S({name:I.name,description:I.description||"",type:I.type,landmarks:I.landmarks||[],startDate:D(I.startDate),endDate:D(I.endDate),sponsorBusinessCode:I.sponsorBusinessCode||"",badge:I.badge||{name:I.name,icon:"map",color:"#c9a227"},reward:I.reward||{type:"badge",bonusPercent:0}}),m(!0)},M=async I=>{if(confirm("Delete this trail? This cannot be undone."))try{await e7(I),await T()}catch(D){console.error("Error deleting trail:",D),alert("Error deleting trail")}},F=async I=>{try{await r2(I.id,{isActive:!I.isActive}),await T()}catch(D){console.error("Error toggling hunt:",D)}},K=I=>{S(D=>({...D,landmarks:D.landmarks.includes(I)?D.landmarks.filter(L=>L!==I):[...D.landmarks,I]}))},q=()=>{S({name:"",description:"",type:"special",landmarks:[],startDate:"",endDate:"",sponsorBusinessCode:"",badge:{name:"",icon:"map",color:"#c9a227"},reward:{type:"badge",bonusPercent:0}}),y(null),m(!1)},A=I=>I?(I.toDate?I.toDate():new Date(I)).toLocaleDateString():"N/A",E=I=>{var O,Re;if(!I.isActive)return!1;const D=new Date,L=(O=I.startDate)!=null&&O.toDate?I.startDate.toDate():new Date(I.startDate),z=(Re=I.endDate)!=null&&Re.toDate?I.endDate.toDate():null;return L<=D&&(!z||z>=D)};return i.jsxs(Kt,{title:"Discovery Trails",subtitle:"Create and manage village exploration trails",children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[i.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"var(--kb-navy)"},children:t.length}),i.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Total Trails"})]}),i.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"var(--kb-green)"},children:t.filter(I=>E(I)).length}),i.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Active Now"})]}),i.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"var(--kb-gold)"},children:t.reduce((I,D)=>I+(D.completionCount||0),0)}),i.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Completions"})]}),i.jsxs("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"var(--kb-navy)"},children:n.length}),i.jsx("div",{style:{color:"var(--kb-gray-500)",fontSize:"0.85rem"},children:"Landmarks"})]})]}),i.jsx("div",{style:{marginBottom:"1.5rem"},children:i.jsxs("button",{onClick:()=>m(!d),className:"btn btn-gold",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(ni,{size:18}),"Create Trail"]})}),d&&i.jsxs(ce.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"card",style:{marginBottom:"1.5rem"},children:[i.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:g?"Edit Trail":"Create New Trail"}),i.jsxs("form",{onSubmit:P,children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{children:"Trail Name *"}),i.jsx("input",{type:"text",value:x.name,onChange:I=>S(D=>({...D,name:I.target.value})),placeholder:"Winter Village Walk",style:{width:"100%"},required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{children:"Trail Type"}),i.jsx("select",{value:x.type,onChange:I=>S(D=>({...D,type:I.target.value})),style:{width:"100%"},children:Object.entries(Ay).map(([I,D])=>i.jsx("option",{value:I,children:D.name},I))})]})]}),i.jsxs("div",{style:{marginBottom:"1rem"},children:[i.jsx("label",{children:"Description"}),i.jsx("textarea",{value:x.description,onChange:I=>S(D=>({...D,description:I.target.value})),placeholder:"Explore Kinderhook's winter wonderland...",style:{width:"100%",minHeight:"80px"}})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{children:"Start Date"}),i.jsx("input",{type:"date",value:x.startDate,onChange:I=>S(D=>({...D,startDate:I.target.value})),style:{width:"100%"}})]}),i.jsxs("div",{children:[i.jsx("label",{children:"End Date (leave empty for permanent)"}),i.jsx("input",{type:"date",value:x.endDate,onChange:I=>S(D=>({...D,endDate:I.target.value})),style:{width:"100%"}})]}),i.jsxs("div",{children:[i.jsx("label",{children:"Sponsor Business (optional)"}),i.jsxs("select",{value:x.sponsorBusinessCode,onChange:I=>S(D=>({...D,sponsorBusinessCode:I.target.value})),style:{width:"100%"},children:[i.jsx("option",{value:"",children:"No Sponsor"}),o.map(I=>i.jsx("option",{value:I.code,children:I.name},I.code))]})]})]}),i.jsxs("div",{style:{marginBottom:"1.5rem"},children:[i.jsxs("label",{style:{marginBottom:"0.75rem",display:"block"},children:["Select Landmarks * (",x.landmarks.length," selected)"]}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"0.5rem",maxHeight:"300px",overflowY:"auto",padding:"0.5rem",background:"var(--kb-gray-50)",borderRadius:"8px"},children:n.map(I=>i.jsxs("button",{type:"button",onClick:()=>K(I.code),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.75rem",background:x.landmarks.includes(I.code)?"var(--kb-gold)":"white",color:x.landmarks.includes(I.code)?"white":"var(--kb-navy)",border:"1px solid var(--kb-gray-200)",borderRadius:"6px",cursor:"pointer",textAlign:"left",fontSize:"0.85rem"},children:[x.landmarks.includes(I.code)&&i.jsx(ti,{size:14}),i.jsx(an,{size:14}),i.jsx("span",{style:{flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:I.name})]},I.code))}),n.length===0&&i.jsx("p",{style:{color:"var(--kb-gray-500)",fontSize:"0.9rem",marginTop:"0.5rem"},children:"No landmarks available. Create landmarks first in the Landmarks page."})]}),i.jsxs("div",{style:{background:"var(--kb-gray-50)",borderRadius:"8px",padding:"1rem",marginBottom:"1.5rem"},children:[i.jsxs("h4",{style:{color:"var(--kb-navy)",marginBottom:"0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(Bl,{size:18})," Reward Settings"]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{children:"Reward Type"}),i.jsxs("select",{value:x.reward.type,onChange:I=>S(D=>({...D,reward:{...D.reward,type:I.target.value}})),style:{width:"100%"},children:[i.jsx("option",{value:"badge",children:"Badge Only"}),i.jsx("option",{value:"bonus",children:"Exchange Bonus"}),i.jsx("option",{value:"both",children:"Badge + Bonus"})]})]}),(x.reward.type==="bonus"||x.reward.type==="both")&&i.jsxs("div",{children:[i.jsx("label",{children:"Bonus Percent"}),i.jsx("input",{type:"number",value:x.reward.bonusPercent||"",onChange:I=>S(D=>({...D,reward:{...D.reward,bonusPercent:parseInt(I.target.value)||0}})),placeholder:"10",style:{width:"100%"},min:"0",max:"50"})]}),i.jsxs("div",{children:[i.jsx("label",{children:"Badge Color"}),i.jsx("input",{type:"color",value:x.badge.color,onChange:I=>S(D=>({...D,badge:{...D.badge,color:I.target.value}})),style:{width:"100%",height:"38px"}})]})]})]}),i.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:w||!x.name||x.landmarks.length===0,children:w?"Saving...":g?"Update Trail":"Create Trail"}),i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:q,children:"Cancel"})]})]})]}),c?i.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"var(--kb-gray-500)"},children:"Loading hunts..."}):t.length===0?i.jsxs("div",{className:"card",style:{textAlign:"center",padding:"3rem"},children:[i.jsx(ya,{size:48,color:"var(--kb-gray-300)",style:{marginBottom:"1rem"}}),i.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"No trails yet. Create your first one!"})]}):i.jsx("div",{className:"card",children:i.jsxs("table",{style:{width:"100%"},children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:"Trail"}),i.jsx("th",{children:"Type"}),i.jsx("th",{children:"Landmarks"}),i.jsx("th",{children:"Dates"}),i.jsx("th",{children:"Completions"}),i.jsx("th",{children:"Status"}),i.jsx("th",{style:{textAlign:"right"},children:"Actions"})]})}),i.jsx("tbody",{children:t.map(I=>{var z,O,Re;const D=Ay[I.type],L=E(I);return i.jsxs("tr",{style:{opacity:I.isActive?1:.5},children:[i.jsx("td",{children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[i.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"8px",background:`${((z=I.badge)==null?void 0:z.color)||(D==null?void 0:D.color)}15`,display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(Bl,{size:20,color:((O=I.badge)==null?void 0:O.color)||(D==null?void 0:D.color)})}),i.jsxs("div",{children:[i.jsx("div",{style:{fontWeight:"600",color:"var(--kb-navy)"},children:I.name}),I.sponsorBusinessName&&i.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--kb-gray-500)",display:"flex",alignItems:"center",gap:"0.25rem"},children:[i.jsx(It,{size:12}),"Sponsored by ",I.sponsorBusinessName]})]})]})}),i.jsx("td",{children:i.jsx("span",{style:{padding:"0.25rem 0.5rem",background:`${D==null?void 0:D.color}15`,color:D==null?void 0:D.color,borderRadius:"4px",fontSize:"0.8rem",fontWeight:"500"},children:D==null?void 0:D.name})}),i.jsx("td",{children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[i.jsx(an,{size:14,color:"var(--kb-gray-500)"}),i.jsx("span",{children:((Re=I.landmarks)==null?void 0:Re.length)||0})]})}),i.jsxs("td",{style:{fontSize:"0.85rem"},children:[i.jsx("div",{children:A(I.startDate)}),i.jsx("div",{style:{color:"var(--kb-gray-500)"},children:I.endDate?`to ${A(I.endDate)}`:"Ongoing"})]}),i.jsx("td",{children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[i.jsx(ln,{size:14,color:"var(--kb-gray-500)"}),i.jsx("span",{style:{fontWeight:"600"},children:I.completionCount||0})]})}),i.jsx("td",{children:i.jsx("span",{style:{padding:"0.25rem 0.5rem",background:L?"rgba(39, 174, 96, 0.1)":"var(--kb-gray-100)",color:L?"var(--kb-green)":"var(--kb-gray-500)",borderRadius:"4px",fontSize:"0.8rem",fontWeight:"500"},children:L?"Active":I.isActive?"Scheduled":"Inactive"})}),i.jsx("td",{children:i.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[i.jsx("button",{onClick:()=>V(I),className:"btn btn-secondary",style:{padding:"0.4rem 0.6rem"},title:"Edit",children:i.jsx(j5,{size:16})}),i.jsx("button",{onClick:()=>F(I),className:"btn btn-secondary",style:{padding:"0.4rem 0.6rem"},title:I.isActive?"Deactivate":"Activate",children:I.isActive?i.jsx(cf,{size:16}):i.jsx(_u,{size:16})}),i.jsx("button",{onClick:()=>M(I.id),className:"btn",style:{padding:"0.4rem 0.6rem",background:"#e74c3c",color:"white"},title:"Delete",children:i.jsx(Ni,{size:16})})]})})]},I.id)})})]})})]})}function s7(){const{profile:t}=gr(),e=bo(),[n,r]=C.useState(""),[o,l]=C.useState(!1),[c,h]=C.useState(null),[d,m]=C.useState(""),[g,y]=C.useState(!1),[x,S]=C.useState(null),[w,_]=C.useState("");C.useState(()=>{async function F(){if(t!=null&&t.businessCode){const K=await ed(t.businessCode);K&&_(K.name)}}F()},[t==null?void 0:t.businessCode]);const T=async F=>{F.preventDefault(),m(""),h(null);const K=n.trim().toUpperCase();if(!K){m("Please enter a serial number");return}l(!0);try{const q=await pz(K);q.valid?h(q.kb):m(q.error)}catch(q){console.error("Validation error:",q),m("Failed to validate serial number")}l(!1)},P=async()=>{if(!(!c||!(t!=null&&t.businessCode))){y(!0);try{await jz(c.serial,t.businessCode,w),S({serial:c.serial,amount:c.denomination}),h(null),r("")}catch(F){console.error("Payment error:",F),m("Failed to record payment")}y(!1)}},V=()=>{r(""),h(null),m(""),S(null)};if(!(t!=null&&t.businessCode))return i.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"var(--kb-cream)",padding:"2rem"},children:i.jsxs("div",{className:"card",style:{maxWidth:"400px",textAlign:"center",padding:"2rem"},children:[i.jsx(hs,{size:48,color:"var(--kb-gray-400)",style:{marginBottom:"1rem"}}),i.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"No Business Assigned"}),i.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem"},children:"You need a business account to accept payments."}),i.jsx(fe,{to:"/",className:"btn btn-primary",children:"Go Home"})]})});const M=F=>{switch(F){case 1:return"#27ae60";case 5:return"#3498db";case 10:return"#9b59b6";case 20:return"#e67e22";case 50:return"#c0392b";default:return"var(--kb-gold)"}};return i.jsxs("div",{style:{minHeight:"100vh",background:"var(--kb-navy)",display:"flex",flexDirection:"column"},children:[i.jsxs("header",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem 1.5rem",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:[i.jsxs(fe,{to:"/business/dashboard",style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--kb-gray-300)",textDecoration:"none"},children:[i.jsx(m5,{size:20}),"Back to Dashboard"]}),i.jsx("div",{style:{color:"var(--kb-gold)",fontWeight:"500"},children:w})]}),i.jsx("main",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem"},children:i.jsxs(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{width:"100%",maxWidth:"500px"},children:[x&&i.jsxs("div",{className:"card",style:{padding:"3rem 2rem",textAlign:"center"},children:[i.jsx(ce.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200,damping:15},children:i.jsx("div",{style:{width:"80px",height:"80px",background:"rgba(39, 174, 96, 0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.5rem"},children:i.jsx(vn,{size:40,color:"var(--kb-green)"})})}),i.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"Payment Accepted"}),i.jsxs("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem"},children:["$",x.amount," Kinderbuck has been added to your balance"]}),i.jsx("div",{style:{background:"var(--kb-gray-50)",borderRadius:"8px",padding:"1rem",marginBottom:"2rem",fontFamily:"monospace",fontSize:"1.25rem",color:"var(--kb-navy)"},children:x.serial}),i.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[i.jsxs("button",{onClick:V,className:"btn btn-gold",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(ni,{size:18}),"Accept Another"]}),i.jsx("button",{onClick:()=>e("/business/dashboard"),className:"btn btn-secondary",children:"Done"})]})]}),c&&!x&&i.jsxs("div",{className:"card",style:{padding:"2rem"},children:[i.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[i.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"Confirm Payment"}),i.jsx("p",{style:{color:"var(--kb-gray-600)"},children:"Review the Kinderbuck details below"})]}),i.jsx("div",{style:{background:"linear-gradient(135deg, var(--kb-cream) 0%, var(--kb-gray-100) 100%)",borderRadius:"16px",padding:"2rem",marginBottom:"1.5rem",border:`3px solid ${M(c.denomination)}`},children:i.jsxs("div",{style:{textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"var(--kb-gray-500)",textTransform:"uppercase",letterSpacing:"0.1em",marginBottom:"0.5rem"},children:"Serial Number"}),i.jsx("div",{style:{fontFamily:"monospace",fontSize:"1.5rem",fontWeight:"600",color:"var(--kb-navy)",marginBottom:"1.5rem"},children:c.serial}),i.jsxs("div",{style:{fontSize:"4rem",fontWeight:"700",color:M(c.denomination),lineHeight:1},children:["$",c.denomination]}),i.jsx("div",{style:{fontSize:"0.9rem",color:"var(--kb-gray-600)",marginTop:"0.5rem"},children:"Kinderbuck"})]})}),d&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",background:"#fef2f2",borderRadius:"8px",color:"#dc2626",marginBottom:"1rem",fontSize:"0.9rem"},children:[i.jsx(hs,{size:18}),d]}),i.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[i.jsxs("button",{onClick:V,className:"btn btn-secondary",style:{flex:1},disabled:g,children:[i.jsx(rm,{size:18,style:{marginRight:"0.5rem"}}),"Cancel"]}),i.jsx("button",{onClick:P,className:"btn btn-primary",style:{flex:1},disabled:g,children:g?"Processing...":i.jsxs(i.Fragment,{children:[i.jsx(vn,{size:18,style:{marginRight:"0.5rem"}}),"Accept $",c.denomination]})})]})]}),!c&&!x&&i.jsxs("div",{className:"card",style:{padding:"2rem"},children:[i.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[i.jsx("div",{style:{width:"64px",height:"64px",background:"rgba(201, 162, 39, 0.1)",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:i.jsx(ii,{size:32,color:"var(--kb-gold-dark)"})}),i.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"Accept Kinderbuck Payment"}),i.jsx("p",{style:{color:"var(--kb-gray-600)"},children:"Enter the serial number from the physical bill"})]}),i.jsxs("form",{onSubmit:T,children:[i.jsxs("div",{style:{marginBottom:"1.5rem"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--kb-gray-600)",fontWeight:"500",fontSize:"0.9rem"},children:"Serial Number"}),i.jsx("input",{type:"text",value:n,onChange:F=>r(F.target.value.toUpperCase()),placeholder:"KB-0001",style:{width:"100%",fontFamily:"monospace",fontSize:"1.25rem",textAlign:"center",letterSpacing:"0.1em"},autoFocus:!0})]}),d&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",background:"#fef2f2",borderRadius:"8px",color:"#dc2626",marginBottom:"1rem",fontSize:"0.9rem"},children:[i.jsx(hs,{size:18}),d]}),i.jsx("button",{type:"submit",className:"btn btn-gold",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",padding:"1rem",fontSize:"1.1rem"},disabled:o,children:o?"Validating...":i.jsxs(i.Fragment,{children:[i.jsx(tm,{size:20}),"Validate"]})})]}),i.jsxs("div",{style:{marginTop:"2rem",padding:"1rem",background:"var(--kb-gray-50)",borderRadius:"8px",fontSize:"0.85rem",color:"var(--kb-gray-600)"},children:[i.jsx("strong",{children:"Tip:"})," The serial number is printed on the front of the Kinderbuck bill, typically in the format KB-XXXX."]})]})]})})]})}const o7={AVIARY:{address:"4 Hudson Street, Kinderhook, NY 12106",phone:"(518) 610-8543",website:"https://theaviarykinderhook.com",hours:{monday:"Closed",tuesday:"Closed",wednesday:"5:00 PM - 9:00 PM",thursday:"5:00 PM - 9:00 PM",friday:"5:00 PM - 10:00 PM",saturday:"5:00 PM - 10:00 PM",sunday:"5:00 PM - 9:00 PM"}},MORNINGBIRD:{address:"4 Hudson Street, Kinderhook, NY 12106",phone:"(518) 610-8543",website:"https://theaviarykinderhook.com/morningbird",hours:{monday:"Closed",tuesday:"8:00 AM - 3:00 PM",wednesday:"8:00 AM - 3:00 PM",thursday:"8:00 AM - 3:00 PM",friday:"8:00 AM - 3:00 PM",saturday:"8:00 AM - 3:00 PM",sunday:"8:00 AM - 3:00 PM"}},SAISONNIER:{address:"11 Chatham Street, Kinderhook, NY 12106",phone:"(518) 610-8100",website:"https://www.saisonnier.us",hours:{monday:"Closed",tuesday:"Closed",wednesday:"5:00 PM - 9:00 PM",thursday:"5:00 PM - 9:00 PM",friday:"5:00 PM - 10:00 PM",saturday:"11:30 AM - 2:30 PM, 5:00 PM - 10:00 PM",sunday:"11:30 AM - 2:30 PM, 5:00 PM - 9:00 PM"}},"BROADST-BAGEL":{address:"1 Broad Street, Kinderhook, NY 12106",phone:"(518) 758-8084",website:"https://broadstreetbagelco.com",hours:{monday:"7:00 AM - 2:00 PM",tuesday:"7:00 AM - 2:00 PM",wednesday:"7:00 AM - 2:00 PM",thursday:"7:00 AM - 2:00 PM",friday:"7:00 AM - 2:00 PM",saturday:"7:00 AM - 2:00 PM",sunday:"8:00 AM - 1:00 PM"}},"BOTTLE-SHOP":{address:"8 Hudson Street, Kinderhook, NY 12106",phone:"(518) 610-8111",website:"https://kinderhookbottleshop.com",hours:{monday:"12:00 PM - 7:00 PM",tuesday:"12:00 PM - 7:00 PM",wednesday:"12:00 PM - 7:00 PM",thursday:"12:00 PM - 7:00 PM",friday:"12:00 PM - 8:00 PM",saturday:"11:00 AM - 8:00 PM",sunday:"12:00 PM - 5:00 PM"}},"OLD-DUTCH":{address:"8 Broad Street, Kinderhook, NY 12106",phone:"(518) 203-3347",website:"https://theolddutchinn.com",hours:{monday:"Closed",tuesday:"Closed",wednesday:"5:00 PM - 9:00 PM",thursday:"5:00 PM - 9:00 PM",friday:"5:00 PM - 10:00 PM",saturday:"11:00 AM - 10:00 PM",sunday:"11:00 AM - 8:00 PM"}},SAMASCOTTS:{address:"65 Chatham Street, Kinderhook, NY 12106",phone:"(518) 758-9292",website:"https://www.samascott.com/gardenmarket",hours:{monday:"9:00 AM - 6:00 PM",tuesday:"9:00 AM - 6:00 PM",wednesday:"9:00 AM - 6:00 PM",thursday:"9:00 AM - 6:00 PM",friday:"9:00 AM - 6:00 PM",saturday:"9:00 AM - 6:00 PM",sunday:"9:00 AM - 5:00 PM"}},"SAMASCOTT-ORCHARDS":{address:"5 Sunset Avenue, Kinderhook, NY 12106",phone:"(518) 758-7224",website:"https://www.samascott.com",hours:{monday:"9:00 AM - 6:00 PM",tuesday:"9:00 AM - 6:00 PM",wednesday:"9:00 AM - 6:00 PM",thursday:"9:00 AM - 6:00 PM",friday:"9:00 AM - 6:00 PM",saturday:"9:00 AM - 6:00 PM",sunday:"9:00 AM - 5:00 PM"}},"SCHOOL-GALLERY":{address:"25 Broad Street, Kinderhook, NY 12106",phone:"(518) 758-1620",website:"https://jackshainman.com/the_school",hours:{monday:"Closed",tuesday:"Closed",wednesday:"11:00 AM - 6:00 PM",thursday:"11:00 AM - 6:00 PM",friday:"11:00 AM - 6:00 PM",saturday:"11:00 AM - 6:00 PM",sunday:"Closed"}},ISOLA:{address:"16 Hudson Street, Kinderhook, NY 12106",phone:"(518) 567-7181",website:"https://isolawinebar.com",hours:{monday:"Closed",tuesday:"Closed",wednesday:"4:00 PM - 9:00 PM",thursday:"4:00 PM - 9:00 PM",friday:"4:00 PM - 10:00 PM",saturday:"12:00 PM - 10:00 PM",sunday:"12:00 PM - 8:00 PM"}},"VILLAGE-YOGA":{address:"6 Hudson Street, 2nd Floor, Kinderhook, NY 12106",phone:"(518) 610-8135",website:"https://villageyoga.co",hours:{monday:"9:00 AM - 7:00 PM",tuesday:"9:00 AM - 7:00 PM",wednesday:"9:00 AM - 7:00 PM",thursday:"9:00 AM - 7:00 PM",friday:"9:00 AM - 5:00 PM",saturday:"9:00 AM - 12:00 PM",sunday:"Closed"}},"WALSH-DENTISTRY":{address:"3 Hudson Street, 2nd Floor, Kinderhook, NY 12106",phone:"(518) 758-7071",website:"https://walshdentistry.com",hours:{monday:"8:00 AM - 5:00 PM",tuesday:"8:00 AM - 5:00 PM",wednesday:"8:00 AM - 5:00 PM",thursday:"8:00 AM - 5:00 PM",friday:"8:00 AM - 3:00 PM",saturday:"Closed",sunday:"Closed"}},"FEED-SEED":{address:"22 Hudson Street, Kinderhook, NY 12106",hours:{monday:"9:00 AM - 5:00 PM",tuesday:"9:00 AM - 5:00 PM",wednesday:"9:00 AM - 5:00 PM",thursday:"9:00 AM - 5:00 PM",friday:"9:00 AM - 5:00 PM",saturday:"9:00 AM - 4:00 PM",sunday:"Closed"}}};function Sg(t){if(!t)return null;const e=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],n=new Date,r=e[n.getDay()],o=t[r];if(!o||o==="Closed")return!1;const l=o.match(/(\d+):(\d+)\s*(AM|PM)/gi);if(!l||l.length<2)return null;const c=n.getHours(),h=n.getMinutes(),d=c*60+h,m=o.match(/(\d+):(\d+)\s*(AM|PM)/i);if(m){let g=parseInt(m[1]);const y=parseInt(m[2]),x=m[3].toUpperCase();x==="PM"&&g!==12&&(g+=12),x==="AM"&&g===12&&(g=0);const S=g*60+y,w=o.match(/(\d+):(\d+)\s*(AM|PM)/gi);if(w&&w.length>=2){const _=w[w.length-1].match(/(\d+):(\d+)\s*(AM|PM)/i);if(_){let T=parseInt(_[1]);const P=parseInt(_[2]),V=_[3].toUpperCase();V==="PM"&&T!==12&&(T+=12),V==="AM"&&T===12&&(T=0);const M=T*60+P;return d>=S&&d<M}}}return null}function a7(t){if(!t)return"Hours not available";const r=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][new Date().getDay()];return t[r]||"Hours not available"}const l7=42.3944,c7=-73.7059,i2={0:{icon:Tk,description:"Clear sky",suggestion:"Perfect day to explore the village!"},1:{icon:Tk,description:"Mainly clear",suggestion:"Great weather for a village stroll!"},2:{icon:bh,description:"Partly cloudy",suggestion:"Nice day to visit local shops!"},3:{icon:bh,description:"Overcast",suggestion:"Good day to cozy up at a cafe!"},45:{icon:bh,description:"Foggy",suggestion:"Mysterious village vibes today!"},48:{icon:bh,description:"Foggy",suggestion:"Grab a warm drink at a local cafe!"},51:{icon:is,description:"Light drizzle",suggestion:"Pop into a shop to stay dry!"},53:{icon:is,description:"Drizzle",suggestion:"Perfect excuse for a coffee break!"},55:{icon:is,description:"Heavy drizzle",suggestion:"Browse the bookstore while it passes!"},61:{icon:is,description:"Light rain",suggestion:"Duck into a local business!"},63:{icon:is,description:"Rain",suggestion:"Great day for indoor shopping!"},65:{icon:is,description:"Heavy rain",suggestion:"Stay cozy at a village restaurant!"},71:{icon:al,description:"Light snow",suggestion:"Beautiful! Warm up with hot cocoa!"},73:{icon:al,description:"Snow",suggestion:"Snow day! Explore the charming village!"},75:{icon:al,description:"Heavy snow",suggestion:"Cozy up at a local spot!"},77:{icon:al,description:"Snow grains",suggestion:"Winter wonderland vibes!"},80:{icon:is,description:"Light showers",suggestion:"Quick visits between showers!"},81:{icon:is,description:"Showers",suggestion:"Pop into shops along the way!"},82:{icon:is,description:"Heavy showers",suggestion:"Find shelter at a cozy cafe!"},85:{icon:al,description:"Snow showers",suggestion:"Magical village views!"},86:{icon:al,description:"Heavy snow showers",suggestion:"Warm drinks are calling!"},95:{icon:Zp,description:"Thunderstorm",suggestion:"Stay safe indoors!"},96:{icon:Zp,description:"Thunderstorm with hail",suggestion:"Seek shelter in a shop!"},99:{icon:Zp,description:"Severe thunderstorm",suggestion:"Stay safe inside!"}};function u7({compact:t=!1}){const[e,n]=C.useState(null),[r,o]=C.useState(!0),[l,c]=C.useState(null);if(C.useEffect(()=>{async function m(){var y,x,S,w;try{const _=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${l7}&longitude=${c7}&current=temperature_2m,relative_humidity_2m,weather_code,wind_speed_10m&daily=sunrise,sunset&temperature_unit=fahrenheit&wind_speed_unit=mph&timezone=America%2FNew_York`);if(!_.ok)throw new Error("Weather fetch failed");const T=await _.json(),P=(x=(y=T.daily)==null?void 0:y.sunrise)!=null&&x[0]?new Date(T.daily.sunrise[0]):null,V=(w=(S=T.daily)==null?void 0:S.sunset)!=null&&w[0]?new Date(T.daily.sunset[0]):null;n({temp:Math.round(T.current.temperature_2m),humidity:T.current.relative_humidity_2m,windSpeed:Math.round(T.current.wind_speed_10m),code:T.current.weather_code,sunrise:P,sunset:V}),o(!1)}catch(_){console.error("Weather error:",_),c("Could not load weather"),o(!1)}}m();const g=setInterval(m,1800*1e3);return()=>clearInterval(g)},[]),r)return i.jsx("div",{style:{background:"linear-gradient(135deg, #4a90d9 0%, #67b8e3 100%)",borderRadius:"12px",padding:t?"0.75rem 1rem":"1rem 1.25rem",color:"white",opacity:.7},children:"Loading weather..."});if(l||!e)return null;const h=i2[e.code]||i2[0],d=h.icon;return t?i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",background:"linear-gradient(135deg, #4a90d9 0%, #67b8e3 100%)",borderRadius:"10px",padding:"0.5rem 1rem",color:"white"},children:[i.jsx(d,{size:24}),i.jsxs("span",{style:{fontSize:"1.25rem",fontWeight:"700"},children:[e.temp,"F"]}),i.jsx("span",{style:{opacity:.9,fontSize:"0.85rem"},children:h.description})]}):i.jsxs("div",{style:{background:"linear-gradient(135deg, #4a90d9 0%, #67b8e3 100%)",borderRadius:"16px",padding:"1.25rem",color:"white"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.75rem"},children:[i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"0.8rem",opacity:.9,marginBottom:"0.25rem"},children:"Kinderhook, NY"}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsxs("span",{style:{fontSize:"2.5rem",fontWeight:"700",lineHeight:1},children:[e.temp,""]}),i.jsx("span",{style:{fontSize:"1rem"},children:"F"})]})]}),i.jsx(d,{size:56,strokeWidth:1.5})]}),i.jsx("div",{style:{fontSize:"1rem",fontWeight:"600",marginBottom:"0.5rem"},children:h.description}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem",fontSize:"0.8rem",opacity:.9,marginBottom:"1rem"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[i.jsx(K3,{size:14})," ",e.humidity,"%"]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[i.jsx(_V,{size:14})," ",e.windSpeed," mph"]}),e.sunrise&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[i.jsx(oV,{size:14})," ",e.sunrise.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})]}),e.sunset&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[i.jsx(lV,{size:14})," ",e.sunset.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})]})]}),i.jsx("div",{style:{background:"rgba(255,255,255,0.2)",borderRadius:"8px",padding:"0.75rem",fontSize:"0.9rem",fontStyle:"italic"},children:h.suggestion})]})}function d7(){const[t,e]=C.useState([]),[n,r]=C.useState(!0),[o,l]=C.useState("all"),[c,h]=C.useState(!1);C.useEffect(()=>{async function w(){const _=await Xn();e(_.filter(T=>T.isActive)),r(!1)}w()},[]);const d=t.map(w=>({...w,...o7[w.code]})),m=d.filter(w=>!(!w.address||o==="open"&&!Sg(w.hours))),g=d.filter(w=>w.address&&Sg(w.hours)),y=()=>{const _=new Date().toLocaleDateString("en-US",{weekday:"long"}),T=g.map(P=>P.name).join(", ");return`What's open in Kinderhook this ${_}? ${g.length} businesses are ready to serve you: ${T}. Show your OK Member card for bonus discounts! #Kinderbucks #ShopLocal`},x=async()=>{const w=y();if(navigator.share)try{await navigator.share({title:"What's Open in Kinderhook",text:w})}catch{}else navigator.clipboard.writeText(w),h(!0),setTimeout(()=>h(!1),2e3)},S=w=>{switch(w){case"food":return"#e67e22";case"retail":return"#3498db";case"services":return"#9b59b6";case"arts":return"#1abc9c";default:return"var(--kb-gray-500)"}};return i.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[i.jsx(Zt,{}),i.jsxs("main",{style:{flex:1,background:"var(--kb-cream)"},children:[i.jsx("section",{style:{background:"linear-gradient(135deg, var(--kb-navy) 0%, var(--kb-navy-light) 100%)",padding:"2rem 1rem",color:"white",textAlign:"center"},children:i.jsxs(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[i.jsx("div",{className:"badge badge-gold",style:{marginBottom:"0.75rem"},children:"Village Directory"}),i.jsx("h1",{style:{marginBottom:"0.5rem"},children:"Explore Kinderhook"}),i.jsx("p",{style:{opacity:.8,maxWidth:"500px",margin:"0 auto"},children:"Find participating businesses, check hours, and earn rewards"})]})}),i.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto",padding:"2rem 1rem"},children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[i.jsx(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:i.jsx(u7,{})}),i.jsx(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card",style:{background:"linear-gradient(135deg, var(--kb-green) 0%, #1e8449 100%)",color:"white"},children:i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[i.jsx(hr,{size:20}),i.jsx("span",{style:{fontWeight:"600"},children:"Open Right Now"})]}),i.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700"},children:[g.length," Businesses"]}),i.jsx("div",{style:{opacity:.9,fontSize:"0.9rem"},children:"Show your OK card for bonus discounts!"})]}),i.jsxs("button",{onClick:x,className:"btn",style:{background:"rgba(255,255,255,0.2)",color:"white",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c?i.jsx(vn,{size:18}):i.jsx(H6,{size:18}),c?"Copied!":"Share"]})]})})]}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem"},children:[i.jsxs("button",{onClick:()=>l("all"),className:"btn",style:{padding:"0.6rem 1.25rem",fontSize:"0.9rem",background:o==="all"?"var(--kb-navy)":"white",color:o==="all"?"white":"var(--kb-gray-600)",border:"1px solid var(--kb-gray-200)"},children:["All (",d.filter(w=>w.address).length,")"]}),i.jsxs("button",{onClick:()=>l("open"),className:"btn",style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.6rem 1.25rem",fontSize:"0.9rem",background:o==="open"?"var(--kb-green)":"white",color:o==="open"?"white":"var(--kb-gray-600)",border:"1px solid var(--kb-gray-200)"},children:[i.jsx(hr,{size:16}),"Open Now (",g.length,")"]})]}),i.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"1rem"},children:o==="open"?"Open Now":"All Businesses"}),n?i.jsx("div",{className:"card",style:{padding:"4rem",textAlign:"center",color:"var(--kb-gray-500)"},children:"Loading businesses..."}):i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"1rem"},children:m.map((w,_)=>{const T=Sg(w.hours),P=a7(w.hours);return i.jsxs(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:_*.05},className:"card",style:{padding:"1.25rem",overflow:"hidden"},children:[w.photoUrl&&i.jsx("div",{style:{margin:"-1.25rem -1.25rem 1rem -1.25rem"},children:i.jsx("img",{src:w.photoUrl,alt:w.name,style:{width:"100%",height:"120px",objectFit:"cover"}})}),i.jsxs("div",{style:{marginBottom:"0.75rem"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.25rem"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx("span",{style:{display:"inline-block",width:"8px",height:"8px",borderRadius:"50%",background:T?"#27ae60":"#95a5a6"}}),i.jsx("span",{style:{fontSize:"0.7rem",fontWeight:"600",color:T?"#27ae60":"var(--kb-gray-500)"},children:T?"OPEN NOW":"CLOSED"})]}),i.jsx("span",{style:{fontSize:"0.7rem",padding:"0.15rem 0.5rem",borderRadius:"4px",background:`${S(w.category)}15`,color:S(w.category),fontWeight:"500",textTransform:"capitalize"},children:w.category})]}),i.jsx("h3",{style:{color:"var(--kb-navy)",fontSize:"1.1rem",marginBottom:"0.25rem"},children:w.name})]}),w.address&&i.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.5rem",fontSize:"0.85rem",color:"var(--kb-gray-600)",marginBottom:"0.5rem"},children:[i.jsx(an,{size:14,style:{flexShrink:0,marginTop:"2px"}}),i.jsx("span",{children:w.address})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem",color:"var(--kb-gray-600)",marginBottom:"0.5rem"},children:[i.jsx(hr,{size:14}),"Today: ",P]}),w.phone&&i.jsxs("a",{href:`tel:${w.phone}`,style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem",color:"var(--kb-gray-600)",textDecoration:"none",marginBottom:"0.75rem"},children:[i.jsx(R6,{size:14}),w.phone]}),w.okMemberDiscount&&i.jsxs("div",{style:{background:"rgba(201, 162, 39, 0.1)",border:"1px solid var(--kb-gold)",borderRadius:"8px",padding:"0.6rem 0.75rem",marginBottom:"0.5rem"},children:[i.jsx("div",{style:{fontSize:"0.7rem",fontWeight:"600",color:"var(--kb-gold-dark)",textTransform:"uppercase",marginBottom:"0.15rem"},children:"OK Member Discount"}),i.jsx("div",{style:{fontSize:"0.9rem",fontWeight:"600",color:"var(--kb-navy)"},children:w.okMemberDiscount})]}),w.kinderbucksSpecials&&w.kinderbucksSpecials.length>0&&i.jsxs("div",{style:{background:"rgba(37, 99, 235, 0.08)",border:"1px solid rgba(37, 99, 235, 0.3)",borderRadius:"8px",padding:"0.6rem 0.75rem",marginBottom:"0.5rem"},children:[i.jsx("div",{style:{fontSize:"0.7rem",fontWeight:"600",color:"#2563eb",textTransform:"uppercase",marginBottom:"0.25rem"},children:"Kinderbucks Special"}),w.kinderbucksSpecials.map((V,M)=>i.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--kb-navy)"},children:[i.jsxs("strong",{children:[V.amount," KB"]})," = ",V.description]},M))]}),w.website&&i.jsxs("a",{href:w.website,target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem",color:"var(--kb-gold-dark)",textDecoration:"none",marginBottom:"0.75rem"},children:[i.jsx(v5,{size:14}),"Visit Website"]}),w.address&&i.jsxs("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(w.address)}`,target:"_blank",rel:"noopener noreferrer",className:"btn btn-gold",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",width:"100%",fontSize:"0.85rem",padding:"0.5rem"},children:[i.jsx(S6,{size:14})," Get Directions"]})]},w.code)})}),m.length===0&&!n&&i.jsxs("div",{className:"card",style:{padding:"3rem",textAlign:"center",color:"var(--kb-gray-500)"},children:[i.jsx(It,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),i.jsx("p",{children:o==="open"?"No businesses are open right now":"No businesses found"}),o==="open"&&i.jsx("button",{onClick:()=>l("all"),className:"btn btn-secondary",style:{marginTop:"1rem"},children:"View All Businesses"})]})]})]}),i.jsx(en,{})]})}function h7(){const{user:t,isAuthenticated:e}=gr(),[n,r]=C.useState([]),[o,l]=C.useState([]),[c,h]=C.useState(!0),[d,m]=C.useState("all");C.useEffect(()=>{async function S(){try{const[w,_]=await Promise.all([e?r7(t.uid):[],kv()]);r(w),l(_)}catch(w){console.error("Error loading hunts:",w)}h(!1)}S()},[t,e]);const g=n.filter(S=>d==="active"?!S.isCompleted:d==="completed"?S.isCompleted:!0),y=n.filter(S=>S.isCompleted).length,x=S=>{if(!S)return null;const w=S.toDate?S.toDate():new Date(S);return Math.ceil((w-new Date)/(1e3*60*60*24))};return c?i.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[i.jsx(Zt,{}),i.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",background:"var(--kb-cream)"},children:i.jsx("div",{style:{color:"var(--kb-gray-500)"},children:"Loading hunts..."})}),i.jsx(en,{})]}):i.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[i.jsx(Zt,{}),i.jsx("section",{style:{background:"linear-gradient(135deg, var(--kb-navy) 0%, var(--kb-navy-light) 100%)",color:"white",padding:"3rem 1rem",textAlign:"center"},children:i.jsxs(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{maxWidth:"600px",margin:"0 auto"},children:[i.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",background:"rgba(255,255,255,0.1)",padding:"0.5rem 1rem",borderRadius:"100px",marginBottom:"1rem"},children:[i.jsx(ya,{size:18}),i.jsx("span",{style:{fontSize:"0.9rem",fontWeight:"500"},children:"Village Discovery Trails"})]}),i.jsx("h1",{style:{marginBottom:"0.75rem"},children:"Explore Kinderhook"}),i.jsx("p",{style:{opacity:.9,fontSize:"1.05rem"},children:"Discover landmarks, earn badges, and unlock rewards as you explore the village!"}),e&&y>0&&i.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",background:"var(--kb-gold)",color:"var(--kb-navy)",padding:"0.5rem 1rem",borderRadius:"8px",marginTop:"1rem",fontWeight:"600"},children:[i.jsx(Bl,{size:18}),y," Trail",y!==1?"s":""," Completed"]})]})}),i.jsx("main",{style:{flex:1,background:"var(--kb-cream)",padding:"2rem 1rem"},children:i.jsxs("div",{style:{maxWidth:"900px",margin:"0 auto"},children:[!e&&i.jsxs(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",style:{marginBottom:"2rem",padding:"1.5rem",textAlign:"center",background:"linear-gradient(135deg, var(--kb-gold) 0%, var(--kb-gold-dark) 100%)",color:"var(--kb-navy)"},children:[i.jsx(Qu,{size:32,style:{marginBottom:"0.75rem"}}),i.jsx("h3",{style:{marginBottom:"0.5rem"},children:"Track Your Progress"}),i.jsx("p",{style:{marginBottom:"1rem",opacity:.9},children:"Sign in to save your trail progress and earn badges!"}),i.jsx(fe,{to:"/login",className:"btn",style:{background:"var(--kb-navy)",color:"white"},children:"Sign In to Start"})]}),e&&n.length>0&&i.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem"},children:[{key:"all",label:"All Trails"},{key:"active",label:"In Progress"},{key:"completed",label:"Completed"}].map(S=>i.jsx("button",{onClick:()=>m(S.key),className:"btn",style:{background:d===S.key?"var(--kb-navy)":"white",color:d===S.key?"white":"var(--kb-gray-600)",border:"1px solid var(--kb-gray-200)",padding:"0.5rem 1rem"},children:S.label},S.key))}),g.length===0?i.jsxs("div",{className:"card",style:{textAlign:"center",padding:"3rem"},children:[i.jsx(ya,{size:48,color:"var(--kb-gray-300)",style:{marginBottom:"1rem"}}),i.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:d==="completed"?"No completed trails yet":"No active trails"}),i.jsx("p",{style:{color:"var(--kb-gray-500)"},children:d==="completed"?"Complete your first trail to see it here!":"Check back soon for new discovery trails!"})]}):i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:g.map((S,w)=>{var F,K,q;const _=Ay[S.type],T=x(S.endDate),P=((F=S.landmarksScanned)==null?void 0:F.length)||0,V=((K=S.landmarks)==null?void 0:K.length)||0,M=V>0?P/V*100:0;return i.jsxs(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:w*.1},className:"card",style:{padding:"1.5rem",border:S.isCompleted?"2px solid var(--kb-green)":"1px solid var(--kb-gray-200)"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:"1rem",flexWrap:"wrap"},children:[i.jsxs("div",{style:{flex:1},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem",flexWrap:"wrap"},children:[i.jsx("span",{style:{padding:"0.25rem 0.6rem",background:`${_==null?void 0:_.color}15`,color:_==null?void 0:_.color,borderRadius:"4px",fontSize:"0.75rem",fontWeight:"600",textTransform:"uppercase"},children:_==null?void 0:_.name}),S.sponsorBusinessName&&i.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem",padding:"0.25rem 0.6rem",background:"var(--kb-gray-100)",color:"var(--kb-gray-600)",borderRadius:"4px",fontSize:"0.75rem"},children:[i.jsx(It,{size:12}),"Sponsored by ",S.sponsorBusinessName]}),S.isCompleted&&i.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem",padding:"0.25rem 0.6rem",background:"var(--kb-green)",color:"white",borderRadius:"4px",fontSize:"0.75rem",fontWeight:"600"},children:[i.jsx(vn,{size:12}),"Complete"]})]}),i.jsx("h3",{style:{color:"var(--kb-navy)",marginBottom:"0.25rem"},children:S.name}),S.description&&i.jsx("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.9rem",marginBottom:"0.75rem"},children:S.description}),i.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap",fontSize:"0.85rem",color:"var(--kb-gray-500)"},children:[i.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.35rem"},children:[i.jsx(an,{size:14}),V," landmarks"]}),S.endDate&&i.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.35rem",color:T<=3?"var(--kb-red)":"var(--kb-gray-500)"},children:[i.jsx(hr,{size:14}),T>0?`${T} days left`:"Ends today!"]}),((q=S.reward)==null?void 0:q.bonusPercent)>0&&i.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.35rem",color:"var(--kb-gold-dark)"},children:[i.jsx(Bl,{size:14}),"+",S.reward.bonusPercent,"% exchange bonus"]})]})]}),i.jsx("div",{style:{textAlign:"center"},children:e&&P>0?i.jsx("div",{style:{width:"70px",height:"70px",borderRadius:"50%",background:`conic-gradient(${S.isCompleted?"var(--kb-green)":"var(--kb-gold)"} ${M}%, var(--kb-gray-200) 0%)`,display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsxs("div",{style:{width:"56px",height:"56px",borderRadius:"50%",background:"white",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},children:[i.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"700",color:"var(--kb-navy)",lineHeight:1},children:P}),i.jsxs("span",{style:{fontSize:"0.65rem",color:"var(--kb-gray-500)"},children:["/ ",V]})]})}):i.jsxs(fe,{to:"/map",className:"btn btn-gold",style:{display:"flex",alignItems:"center",gap:"0.5rem",whiteSpace:"nowrap"},children:[i.jsx(xn,{size:16}),"Start Trail"]})})]}),e&&V>0&&i.jsx("div",{style:{marginTop:"1rem"},children:i.jsx("div",{style:{height:"8px",background:"var(--kb-gray-200)",borderRadius:"4px",overflow:"hidden"},children:i.jsx("div",{style:{width:`${M}%`,height:"100%",background:S.isCompleted?"var(--kb-green)":"linear-gradient(90deg, var(--kb-gold) 0%, var(--kb-gold-dark) 100%)",borderRadius:"4px",transition:"width 0.5s ease"}})})})]},S.id)})}),i.jsxs(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},style:{marginTop:"3rem"},children:[i.jsxs("h2",{style:{color:"var(--kb-navy)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(an,{size:24}),"Village Landmarks",i.jsxs("span",{style:{fontSize:"0.9rem",fontWeight:"500",color:"var(--kb-gray-500)",marginLeft:"0.5rem"},children:["(",o.length," locations)"]})]}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"1rem"},children:o.map((S,w)=>{const _=Sf[S.category];return i.jsx(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3+w*.05},className:"card",style:{padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[i.jsx("div",{style:{width:"50px",height:"50px",borderRadius:"12px",background:`${_==null?void 0:_.color}15`,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:i.jsx(an,{size:24,color:_==null?void 0:_.color})}),i.jsxs("div",{style:{flex:1,minWidth:0},children:[i.jsx("div",{style:{fontWeight:"600",color:"var(--kb-navy)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:S.name}),i.jsx("div",{style:{fontSize:"0.8rem",color:_==null?void 0:_.color,fontWeight:"500"},children:_==null?void 0:_.name})]}),i.jsx(em,{size:20,color:"var(--kb-gray-400)"})]})},S.code)})}),o.length===0&&i.jsxs("div",{className:"card",style:{textAlign:"center",padding:"2rem"},children:[i.jsx(an,{size:40,color:"var(--kb-gray-300)",style:{marginBottom:"0.75rem"}}),i.jsx("p",{style:{color:"var(--kb-gray-500)"},children:"Landmarks coming soon! Check back for village exploration spots."})]})]})]})}),i.jsx(en,{})]})}function f7(){const{landmarkCode:t}=jf(),{user:e,isAuthenticated:n}=gr(),[r,o]=C.useState(null),[l,c]=C.useState(!0),[h,d]=C.useState(!1),[m,g]=C.useState(!1),[y,x]=C.useState([]),[S,w]=C.useState(null);C.useEffect(()=>{async function P(){try{const V=await qz(t);V?V.isActive?o(V):w("This landmark is not currently active"):w("Landmark not found")}catch(V){console.error("Error loading landmark:",V),w("Error loading landmark")}c(!1)}P()},[t]);const _=async()=>{if(n){d(!0);try{await Yz(t);const P=await RE(),V=[];for(const M of P)if(M.landmarks.includes(t)){const F=await n7(e.uid,t,M.id);(F.updated||F.completed)&&V.push({hunt:M,...F})}x(V),g(!0)}catch(P){console.error("Error recording scan:",P),w("Error recording your visit")}d(!1)}},T=r?Sf[r.category]:null;return l?i.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[i.jsx(Zt,{}),i.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",background:"var(--kb-cream)"},children:i.jsx(jk,{size:32,className:"spin",color:"var(--kb-navy)"})}),i.jsx(en,{})]}):S?i.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[i.jsx(Zt,{}),i.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",background:"var(--kb-cream)",padding:"2rem"},children:i.jsxs("div",{className:"card",style:{maxWidth:"400px",textAlign:"center",padding:"2rem"},children:[i.jsx(hs,{size:48,color:"var(--kb-red)",style:{marginBottom:"1rem"}}),i.jsx("h2",{style:{color:"var(--kb-navy)",marginBottom:"0.5rem"},children:"Oops!"}),i.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem"},children:S}),i.jsx(fe,{to:"/hunts",className:"btn btn-primary",children:"View Active Hunts"})]})}),i.jsx(en,{})]}):i.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[i.jsx(Zt,{}),i.jsx("main",{style:{flex:1,background:`linear-gradient(135deg, ${(T==null?void 0:T.color)||"var(--kb-navy)"} 0%, ${(T==null?void 0:T.color)||"var(--kb-navy)"}dd 100%)`,padding:"2rem 1rem",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(ce.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},style:{width:"100%",maxWidth:"420px"},children:i.jsxs("div",{className:"card",style:{padding:"2rem",textAlign:"center",borderRadius:"20px",boxShadow:"0 20px 60px rgba(0,0,0,0.2)"},children:[i.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.4rem 1rem",background:`${T==null?void 0:T.color}15`,borderRadius:"100px",marginBottom:"1.5rem"},children:[i.jsx(an,{size:16,color:T==null?void 0:T.color}),i.jsx("span",{style:{fontSize:"0.85rem",fontWeight:"600",color:T==null?void 0:T.color,textTransform:"uppercase",letterSpacing:"0.05em"},children:(T==null?void 0:T.name)||"Landmark"})]}),r.photoUrl?i.jsx("div",{style:{width:"120px",height:"120px",borderRadius:"16px",overflow:"hidden",margin:"0 auto 1.5rem",border:`3px solid ${T==null?void 0:T.color}`},children:i.jsx("img",{src:r.photoUrl,alt:r.name,style:{width:"100%",height:"100%",objectFit:"cover"}})}):i.jsx("div",{style:{width:"100px",height:"100px",borderRadius:"50%",background:`${T==null?void 0:T.color}15`,display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.5rem",border:`3px solid ${T==null?void 0:T.color}`},children:i.jsx(an,{size:40,color:T==null?void 0:T.color})}),i.jsx("h1",{style:{color:"var(--kb-navy)",fontSize:"1.75rem",marginBottom:"0.5rem"},children:r.name}),r.description&&i.jsx("p",{style:{color:"var(--kb-gray-600)",marginBottom:"1.5rem",fontSize:"0.95rem"},children:r.description}),m?i.jsxs(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[i.jsxs("div",{style:{background:"rgba(39, 174, 96, 0.1)",borderRadius:"12px",padding:"1.5rem",marginBottom:"1.5rem"},children:[i.jsx(vn,{size:48,color:"var(--kb-green)",style:{marginBottom:"0.75rem"}}),i.jsx("h3",{style:{color:"var(--kb-green)",marginBottom:"0.5rem"},children:"Visit Recorded!"}),i.jsxs("p",{style:{color:"var(--kb-gray-600)",fontSize:"0.9rem"},children:["You've discovered ",r.name]})]}),y.length>0&&i.jsxs("div",{style:{marginBottom:"1.5rem"},children:[i.jsxs("h4",{style:{color:"var(--kb-navy)",marginBottom:"0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(Bl,{size:18,color:"var(--kb-gold)"}),"Hunt Progress"]}),y.map((P,V)=>i.jsxs("div",{style:{background:P.completed?"rgba(39, 174, 96, 0.1)":"var(--kb-gray-50)",borderRadius:"10px",padding:"1rem",marginBottom:"0.5rem",border:P.completed?"2px solid var(--kb-green)":"1px solid var(--kb-gray-200)"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.5rem"},children:[i.jsx("span",{style:{fontWeight:"600",color:P.completed?"var(--kb-green)":"var(--kb-navy)"},children:P.hunt.name}),P.completed&&i.jsx("span",{style:{background:"var(--kb-green)",color:"white",padding:"0.2rem 0.5rem",borderRadius:"4px",fontSize:"0.75rem",fontWeight:"600"},children:"COMPLETE!"})]}),i.jsx("div",{style:{height:"6px",background:"var(--kb-gray-200)",borderRadius:"3px",overflow:"hidden"},children:i.jsx("div",{style:{width:`${P.progress.landmarksScanned.length/P.progress.total*100}%`,height:"100%",background:P.completed?"var(--kb-green)":"var(--kb-gold)",borderRadius:"3px",transition:"width 0.5s ease"}})}),i.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--kb-gray-500)",marginTop:"0.35rem"},children:[P.progress.landmarksScanned.length," / ",P.progress.total," landmarks"]})]},V))]}),i.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[i.jsxs(fe,{to:"/hunts",className:"btn btn-primary",style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[i.jsx(ya,{size:18}),"View Hunts"]}),i.jsxs(fe,{to:"/card",className:"btn btn-secondary",style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:["My Card",i.jsx(em,{size:18})]})]})]}):i.jsx(i.Fragment,{children:n?i.jsx("button",{onClick:_,disabled:h,className:"btn btn-gold",style:{width:"100%",padding:"1rem",fontSize:"1.1rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:h?i.jsxs(i.Fragment,{children:[i.jsx(jk,{size:20,className:"spin"}),"Recording..."]}):i.jsxs(i.Fragment,{children:[i.jsx(vn,{size:20}),"Record My Visit"]})}):i.jsxs("div",{style:{background:"var(--kb-cream)",borderRadius:"12px",padding:"1.5rem",marginBottom:"1.5rem"},children:[i.jsx(p5,{size:32,color:"var(--kb-navy)",style:{marginBottom:"0.75rem"}}),i.jsx("p",{style:{color:"var(--kb-gray-700)",marginBottom:"1rem"},children:"Sign in to record your visit and earn hunt progress!"}),i.jsx(fe,{to:"/login",className:"btn btn-primary",style:{width:"100%"},children:"Sign In to Continue"})]})}),r.address&&i.jsx("div",{style:{marginTop:"1.5rem",paddingTop:"1.5rem",borderTop:"1px solid var(--kb-gray-200)",textAlign:"left"},children:i.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",color:"var(--kb-gray-600)",fontSize:"0.9rem"},children:[i.jsx(an,{size:18,style:{flexShrink:0,marginTop:"2px"}}),i.jsx("span",{children:r.address})]})})]})})}),i.jsx(en,{}),i.jsx("style",{children:`
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
        .spin {
          animation: spin 1s linear infinite;
        }
      `})]})}const _g=[{id:"villageos-saas",title:"VillageOS SaaS",subtitle:"The Scale Pitch",icon:w5,color:"#4ade80",audience:"Investors / Partners",description:"OK Kinderhook as proof of concept for a scalable SaaS product. Tourism infrastructure for small towns everywhere.",file:"VILLAGEOS-SAAS.html",recommended:["investors"]},{id:"daytrip",title:"Day Trip Layer",subtitle:"Regional Tourism",icon:ya,color:"#84cc16",audience:"Tourism Boards / County",description:"Every village gets a mascot universe. Digital collectibles across Columbia County. Catskill cats, Kinderhook foxes, Hudson whales.",file:"OK-KINDERHOOK-DAYTRIP.html",recommended:["tourism","county"]},{id:"village-os",title:"Village OS",subtitle:"Full Vision Pitch",icon:Z3,color:"#2B5F2F",audience:"Business Association / Board",description:"Stardew Valley framing, 4 skill tracks, community bundles. The complete vision.",file:"OK-KINDERHOOK-VILLAGE-OS.html",recommended:["business-association","village-board"]},{id:"economics",title:"Economics of Loyalty",subtitle:"The Math That Sells",icon:bs,color:"#059669",audience:"Skeptical Business Owners",description:"Hard numbers: why habitual 10% discount customers beat occasional full-price. The leakage problem.",file:"OK-KINDERHOOK-ECONOMICS.html",recommended:["individual-business","business-association"]},{id:"faq",title:"Hard Questions",subtitle:"Objection Handling",icon:C3,color:"#dc3545",audience:"Skeptics / Deep Divers",description:'The anti-pitch. Every objection answered honestly: surveillance, trust, AI, "it never works."',file:"OK-KINDERHOOK-FAQ.html",recommended:["skeptics","individual-business"]},{id:"8dollar",title:"The $8 Bill",subtitle:"Meme Marketing",icon:Ll,color:"#85bb65",audience:"Marketing / Tourism",description:"Van Buren on an $8 bill. Absurd enough to screenshot, real enough to visit. Viral marketing angle.",file:"OK-KINDERHOOK-8DOLLAR.html",recommended:["marketing","tourism"]},{id:"cooperative",title:"Digital Cooperative",subtitle:"Tech-Forward Angle",icon:j6,color:"#3b82f6",audience:"Village Board / Tech-Savvy",description:"Radical transparency, QR portals, cooperative economics. For forward-thinking audiences.",file:"OK-KINDERHOOK-COOPERATIVE.html",recommended:["library","village-board"]},{id:"printable",title:"Simple Explainer",subtitle:"Print-Friendly",icon:Sk,color:"#f59e0b",audience:"General / Seniors",description:"Clear 4-step explanation with AAA card analogy. Works great printed out.",file:"OK-KINDERHOOK-PRINTABLE.html",recommended:["businesses","residents"]},{id:"slide",title:"Habit Ladder",subtitle:"Quick Presentation",icon:k5,color:"#8b5cf6",audience:"Quick Pitch",description:"Shows how each layer builds on the previous. Great for walking through live.",file:"OK-KINDERHOOK-SLIDE.html",recommended:["quick-pitch"]},{id:"slide-simple",title:"Gentle Ladder",subtitle:"Friendlier Language",icon:ln,color:"#ec4899",audience:"Boomers / Skeptics",description:'Same ladder concept with softer language. "No smartphone? No problem!"',file:"OK-KINDERHOOK-SLIDE-SIMPLE.html",recommended:["seniors","skeptics"]},{id:"onepager",title:"One-Pager",subtitle:"Leave-Behind",icon:Sk,color:"#14b8a6",audience:"Anyone",description:"Compact summary with flow diagram. Perfect to hand out after a meeting.",file:"OK-KINDERHOOK-ONEPAGER.html",recommended:["leave-behind"]},{id:"governance",title:"Who Runs What",subtitle:"Distributed Ownership",icon:ln,color:"#606c38",audience:"Potential Partners",description:"Shows how each stakeholder owns their piece. Business champions, library partners, quest designers, historians.",file:"OK-KINDERHOOK-GOVERNANCE.html",recommended:["partners","village-board"]}],m7=[{id:"business-association",label:"Business Association",icon:ty,docs:["village-os","economics","onepager"],flow:"Start with Village OS for vision, Economics for skeptics, leave One-Pager"},{id:"library",label:"Library",icon:ey,docs:["cooperative","village-os"],flow:"Lead with Cooperative (learning track), show Village OS for bundles"},{id:"individual-business",label:"Individual Business",icon:ty,docs:["economics","faq","printable"],flow:"Lead with Economics, Hard Questions for skeptics, Printable to leave behind"},{id:"village-board",label:"Village Board",icon:ln,docs:["village-os","cooperative"],flow:"Lead with Village OS vision, Cooperative for transparency angle"},{id:"elevator",label:"Elevator Pitch",icon:k5,docs:["slide-simple"],flow:"Pull up Gentle Ladder on your phone"},{id:"marketing",label:"Marketing / Tourism",icon:Ll,docs:["8dollar","village-os"],flow:"Lead with The $8 Bill meme angle, Village OS for full context"},{id:"investors",label:"Investors / Partners",icon:w5,docs:["villageos-saas","economics","village-os"],flow:"Lead with SaaS vision, Economics for validation, Village OS for full Kinderhook context"},{id:"tourism",label:"Tourism / County",icon:ya,docs:["daytrip","villageos-saas","8dollar"],flow:"Lead with Day Trip regional vision, VillageOS for scale potential, $8 Bill for meme marketing"}],p7={type:"spring",stiffness:300,damping:30};function g7(){const[t,e]=C.useState(null),[n,r]=C.useState(!0),[o,l]=C.useState(!1);C.useEffect(()=>{t&&l(!1)},[t==null?void 0:t.id]);const c=d=>{e(d)},h=d=>{window.open(`/kinderbucks/pitches/${d}`,"_blank")};return i.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(180deg, #0f0f1a 0%, #1a1a2e 50%, #16213e 100%)",color:"white"},children:[i.jsx("header",{style:{padding:"2rem",borderBottom:"1px solid rgba(255,255,255,0.08)",background:"rgba(0,0,0,0.2)"},children:i.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"1rem"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[i.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #c9a227 0%, #d4af37 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(201, 162, 39, 0.3)"},children:i.jsx(Qu,{size:24,color:"#1a1a2e"})}),i.jsxs("div",{children:[i.jsx("h1",{style:{fontSize:"clamp(1.25rem, 4vw, 1.75rem)",fontWeight:"700",letterSpacing:"-0.02em",marginBottom:"0.15rem"},children:"OK Kinderhook"}),i.jsx("div",{style:{fontSize:"clamp(0.8rem, 2vw, 0.9rem)",color:"#c9a227",fontWeight:"500",letterSpacing:"0.05em"},children:"PITCH ROOM"})]})]}),i.jsx("a",{href:"/#/",style:{color:"rgba(255,255,255,0.5)",fontSize:"0.85rem",textDecoration:"none",padding:"0.5rem 1rem",borderRadius:"6px",border:"1px solid rgba(255,255,255,0.1)",transition:"all 0.2s"},onMouseEnter:d=>{d.target.style.background="rgba(255,255,255,0.05)",d.target.style.color="rgba(255,255,255,0.8)"},onMouseLeave:d=>{d.target.style.background="transparent",d.target.style.color="rgba(255,255,255,0.5)"},children:"Back to Site"})]})}),i.jsxs("main",{style:{padding:"2rem",maxWidth:"1200px",margin:"0 auto"},children:[i.jsxs("section",{style:{marginBottom:"2.5rem"},children:[i.jsxs("button",{onClick:()=>r(!n),style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"none",border:"none",color:"white",fontSize:"1rem",fontWeight:"600",cursor:"pointer",marginBottom:"1rem",padding:"0.5rem 0"},children:[i.jsx(ce.div,{animate:{rotate:n?0:-90},transition:{duration:.2},children:i.jsx(g5,{size:20})}),"Who are you pitching to?"]}),i.jsx(El,{initial:!1,children:n&&i.jsx(ce.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3,ease:[.4,0,.2,1]},style:{overflow:"hidden"},children:i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:"1rem",paddingBottom:"0.5rem"},children:m7.map((d,m)=>i.jsxs(ce.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:m*.05,duration:.3},whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},style:{background:"rgba(255,255,255,0.03)",borderRadius:"12px",padding:"1rem",cursor:"pointer",border:"1px solid rgba(255,255,255,0.08)",transition:"background 0.2s, border-color 0.2s"},onClick:()=>{const g=_g.find(y=>y.id===d.docs[0]);g&&c(g)},onMouseEnter:g=>{g.currentTarget.style.background="rgba(255,255,255,0.06)",g.currentTarget.style.borderColor="rgba(255,255,255,0.15)"},onMouseLeave:g=>{g.currentTarget.style.background="rgba(255,255,255,0.03)",g.currentTarget.style.borderColor="rgba(255,255,255,0.08)"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[i.jsx(d.icon,{size:18,color:"#c9a227"}),i.jsx("span",{style:{fontWeight:"600"},children:d.label})]}),i.jsx("p",{style:{fontSize:"0.8rem",color:"rgba(255,255,255,0.5)",lineHeight:1.4},children:d.flow}),i.jsx("div",{style:{marginTop:"0.75rem",display:"flex",gap:"0.35rem",flexWrap:"wrap"},children:d.docs.map(g=>{const y=_g.find(x=>x.id===g);return i.jsx("span",{style:{fontSize:"0.65rem",background:(y==null?void 0:y.color)||"#666",padding:"0.15rem 0.45rem",borderRadius:"4px",opacity:.85,fontWeight:"500"},children:y==null?void 0:y.title},g)})})]},d.id))})})})]}),i.jsxs("section",{children:[i.jsx("h2",{style:{fontSize:"1rem",fontWeight:"600",marginBottom:"1rem",color:"rgba(255,255,255,0.7)"},children:"All Pitch Documents"}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"1rem"},children:_g.map((d,m)=>i.jsxs(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:m*.03,duration:.4},whileHover:{scale:1.02,y:-3},whileTap:{scale:.98},style:{background:"rgba(255,255,255,0.02)",borderRadius:"12px",overflow:"hidden",border:"1px solid rgba(255,255,255,0.06)",cursor:"pointer",transition:"background 0.2s, border-color 0.2s, box-shadow 0.2s"},onClick:()=>c(d),onMouseEnter:g=>{g.currentTarget.style.background="rgba(255,255,255,0.05)",g.currentTarget.style.borderColor="rgba(255,255,255,0.12)",g.currentTarget.style.boxShadow=`0 8px 24px ${d.color}15`},onMouseLeave:g=>{g.currentTarget.style.background="rgba(255,255,255,0.02)",g.currentTarget.style.borderColor="rgba(255,255,255,0.06)",g.currentTarget.style.boxShadow="none"},children:[i.jsx("div",{style:{height:"3px",background:d.color}}),i.jsxs("div",{style:{padding:"1.25rem"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem"},children:[i.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:`${d.color}15`,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:i.jsx(d.icon,{size:20,color:d.color})}),i.jsxs("div",{style:{flex:1,minWidth:0},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",marginBottom:"0.15rem"},children:d.title}),i.jsx("div",{style:{fontSize:"0.8rem",color:d.color,fontWeight:"500"},children:d.subtitle})]})]}),i.jsx("p",{style:{fontSize:"0.85rem",color:"rgba(255,255,255,0.5)",marginTop:"0.75rem",lineHeight:1.5},children:d.description}),i.jsxs("div",{style:{marginTop:"0.75rem",fontSize:"0.75rem",color:"rgba(255,255,255,0.35)"},children:["Best for: ",d.audience]})]})]},d.id))})]}),i.jsxs("section",{style:{marginTop:"2.5rem",padding:"1.25rem 1.5rem",background:"rgba(201, 162, 39, 0.08)",borderRadius:"12px",border:"1px solid rgba(201, 162, 39, 0.2)"},children:[i.jsx("h3",{style:{color:"#c9a227",marginBottom:"0.75rem",fontSize:"0.9rem",fontWeight:"600"},children:"Pro Tips"}),i.jsxs("ul",{style:{fontSize:"0.85rem",color:"rgba(255,255,255,0.6)",lineHeight:1.8,paddingLeft:"1.25rem",margin:0},children:[i.jsxs("li",{children:["Print docs with ",i.jsx("strong",{style:{color:"rgba(255,255,255,0.8)"},children:"File  Print"}),' and enable "Background graphics"']}),i.jsxs("li",{children:["Present full-screen with ",i.jsx("strong",{style:{color:"rgba(255,255,255,0.8)"},children:"F11"})," or ",i.jsx("strong",{style:{color:"rgba(255,255,255,0.8)"},children:"Cmd+Shift+F"})]}),i.jsx("li",{children:'The One-Pager is designed for letter-size paper (8.5"  11")'}),i.jsx("li",{children:"For skeptics, start with Hard Questions - addresses every concern upfront"})]})]})]}),i.jsx(El,{children:t&&i.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.85)",backdropFilter:"blur(8px)",zIndex:1e3,display:"flex",flexDirection:"column"},onClick:d=>{d.target===d.currentTarget&&e(null)},children:i.jsxs(ce.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:p7,style:{display:"flex",flexDirection:"column",height:"100%",margin:"1rem",background:"#1a1a2e",borderRadius:"16px",overflow:"hidden",boxShadow:"0 25px 50px rgba(0,0,0,0.5)"},children:[i.jsxs("div",{style:{padding:"1rem 1.25rem",background:"rgba(0,0,0,0.3)",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid rgba(255,255,255,0.08)",flexWrap:"wrap",gap:"0.75rem"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.85rem"},children:[i.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:`${t.color}20`,display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(t.icon,{size:20,color:t.color})}),i.jsxs("div",{children:[i.jsx("h2",{style:{fontSize:"1.1rem",fontWeight:"600",color:"white"},children:t.title}),i.jsx("div",{style:{fontSize:"0.8rem",color:"rgba(255,255,255,0.5)"},children:t.subtitle})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsxs(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>h(t.file),style:{display:"flex",alignItems:"center",gap:"0.4rem",padding:"0.5rem 0.85rem",background:"rgba(255,255,255,0.08)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",color:"white",cursor:"pointer",fontSize:"0.8rem",fontWeight:"500"},children:[i.jsx(v5,{size:15}),"Open"]}),i.jsxs(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{const d=window.open(`/kinderbucks/pitches/${t.file}`,"_blank");d&&d.addEventListener("load",()=>d.print())},style:{display:"flex",alignItems:"center",gap:"0.4rem",padding:"0.5rem 0.85rem",background:"rgba(255,255,255,0.08)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",color:"white",cursor:"pointer",fontSize:"0.8rem",fontWeight:"500"},children:[i.jsx(z0,{size:15}),"Print"]}),i.jsx(ce.button,{whileHover:{scale:1.1,background:"rgba(255,255,255,0.15)"},whileTap:{scale:.9},onClick:()=>e(null),style:{width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(255,255,255,0.08)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",color:"white",cursor:"pointer"},children:i.jsx(rm,{size:18})})]})]}),i.jsxs("div",{style:{flex:1,position:"relative",background:"#0a0a0f"},children:[i.jsx(El,{children:!o&&i.jsx(ce.div,{initial:{opacity:1},exit:{opacity:0},transition:{duration:.3},style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",background:"#0a0a0f",zIndex:1},children:i.jsx(ce.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},style:{width:"32px",height:"32px",border:"3px solid rgba(255,255,255,0.1)",borderTopColor:t.color,borderRadius:"50%"}})})}),i.jsx("iframe",{src:`/kinderbucks/pitches/${t.file}`,onLoad:()=>l(!0),style:{width:"100%",height:"100%",border:"none",background:"white",opacity:o?1:0,transition:"opacity 0.3s ease"},title:t.title})]})]})})})]})}function y7(){return i.jsx(JM,{children:i.jsx(pI,{children:i.jsxs(HC,{children:[i.jsx(ot,{path:"/",element:i.jsx(c9,{})}),i.jsx(ot,{path:"/demo",element:i.jsx(p9,{})}),i.jsx(ot,{path:"/about",element:i.jsx(I9,{})}),i.jsx(ot,{path:"/benefits",element:i.jsx(R9,{})}),i.jsx(ot,{path:"/businesses",element:i.jsx(K9,{})}),i.jsx(ot,{path:"/map",element:i.jsx(d7,{})}),i.jsx(ot,{path:"/exchange",element:i.jsx(Q9,{})}),i.jsx(ot,{path:"/login",element:i.jsx(J9,{})}),i.jsx(ot,{path:"/pitch",element:i.jsx(g7,{})}),i.jsx(ot,{path:"/account",element:i.jsx(Y9,{})}),i.jsx(ot,{path:"/profile",element:i.jsx(X9,{})}),i.jsx(ot,{path:"/card",element:i.jsx(uz,{})}),i.jsx(ot,{path:"/hunts",element:i.jsx(h7,{})}),i.jsx(ot,{path:"/landmark/:landmarkCode",element:i.jsx(f7,{})}),i.jsx(ot,{path:"/scan/:serial",element:i.jsx(yz,{})}),i.jsx(ot,{path:"/checkin/:businessCode",element:i.jsx(kz,{})}),i.jsx(ot,{path:"/business/dashboard",element:i.jsx(lr,{allowedRoles:["business","admin"],children:i.jsx(Rz,{})})}),i.jsx(ot,{path:"/business/accept-payment",element:i.jsx(lr,{allowedRoles:["business","admin"],children:i.jsx(s7,{})})}),i.jsx(ot,{path:"/admin/dashboard",element:i.jsx(lr,{allowedRoles:["admin"],children:i.jsx(Pz,{})})}),i.jsx(ot,{path:"/admin/exchanges",element:i.jsx(lr,{allowedRoles:["admin"],children:i.jsx(Uz,{})})}),i.jsx(ot,{path:"/admin/members",element:i.jsx(lr,{allowedRoles:["admin"],children:i.jsx(Wz,{})})}),i.jsx(ot,{path:"/admin/generate",element:i.jsx(lr,{allowedRoles:["admin"],children:i.jsx(Dz,{})})}),i.jsx(ot,{path:"/admin/issue",element:i.jsx(lr,{allowedRoles:["admin"],children:i.jsx(Nz,{})})}),i.jsx(ot,{path:"/admin/businesses",element:i.jsx(lr,{allowedRoles:["admin"],children:i.jsx(zz,{})})}),i.jsx(ot,{path:"/admin/businesses/:businessCode",element:i.jsx(lr,{allowedRoles:["admin"],children:i.jsx(Hz,{})})}),i.jsx(ot,{path:"/admin/users",element:i.jsx(lr,{allowedRoles:["admin"],children:i.jsx($z,{})})}),i.jsx(ot,{path:"/admin/redemptions",element:i.jsx(lr,{allowedRoles:["admin"],children:i.jsx(Kz,{})})}),i.jsx(ot,{path:"/admin/landmarks",element:i.jsx(lr,{allowedRoles:["admin"],children:i.jsx(Xz,{})})}),i.jsx(ot,{path:"/admin/hunts",element:i.jsx(lr,{allowedRoles:["admin"],children:i.jsx(i7,{})})})]})})})}qT.createRoot(document.getElementById("root")).render(i.jsx(C.StrictMode,{children:i.jsx(y7,{})}));
